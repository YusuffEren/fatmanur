/*! For license information please see app.js.LICENSE.txt */
(()=>{var t,e={4204:function(t,e){!function(t){"use strict";class e{constructor(t){this.controller_=t}get element(){return this.controller_.view.element}get disabled(){return this.controller_.viewProps.get("disabled")}set disabled(t){this.controller_.viewProps.set("disabled",t)}get hidden(){return this.controller_.viewProps.get("hidden")}set hidden(t){this.controller_.viewProps.set("hidden",t)}dispose(){this.controller_.viewProps.set("disposed",!0)}}class n{constructor(t){this.target=t}}class r extends n{constructor(t,e,n,r){super(t),this.value=e,this.presetKey=n,this.last=null==r||r}}function i(t){return t}function o(t){return null==t}const a={alreadydisposed:()=>"View has been already disposed",invalidparams:t=>`Invalid parameters for '${t.name}'`,nomatchingcontroller:t=>`No matching controller for '${t.key}'`,nomatchingview:t=>`No matching view for '${JSON.stringify(t.params)}'`,notbindable:()=>"Value is not bindable",propertynotfound:t=>`Property '${t.name}' not found`,shouldneverhappen:()=>"This error should never happen"};class s{constructor(t){var e;this.message=null!==(e=a[t.type](i(t.context)))&&void 0!==e?e:"Unexpected error",this.name=this.constructor.name,this.stack=new Error(this.message).stack,this.type=t.type}static alreadyDisposed(){return new s({type:"alreadydisposed"})}static notBindable(){return new s({type:"notbindable"})}static propertyNotFound(t){return new s({type:"propertynotfound",context:{name:t}})}static shouldNeverHappen(){return new s({type:"shouldneverhappen"})}}class l{constructor(){this.observers_={}}on(t,e){let n=this.observers_[t];return n||(n=this.observers_[t]=[]),n.push({handler:e}),this}off(t,e){const n=this.observers_[t];return n&&(this.observers_[t]=n.filter((t=>t.handler!==e))),this}emit(t,e){const n=this.observers_[t];n&&n.forEach((t=>{t.handler(e)}))}}const u="tp";function c(t){return(e,n)=>[u,"-",t,"v",e?`_${e}`:"",n?`-${n}`:""].join("")}function d(t,e){return n=>e(t(n))}function f(t){return t.rawValue}function h(t,e){t.emitter.on("change",d(f,e)),e(t.rawValue)}function p(t,e,n){h(t.value(e),n)}function m(t,e,n){n?t.classList.add(e):t.classList.remove(e)}function g(t,e){return n=>{m(t,e,n)}}function v(t,e){h(t,(t=>{e.textContent=null!=t?t:""}))}const y=c("btn");class b{constructor(t,e){this.element=t.createElement("div"),this.element.classList.add(y()),e.viewProps.bindClassModifiers(this.element);const n=t.createElement("button");n.classList.add(y("b")),e.viewProps.bindDisabled(n),this.element.appendChild(n),this.buttonElement=n;const r=t.createElement("div");r.classList.add(y("t")),v(e.props.value("title"),r),this.buttonElement.appendChild(r)}}class _{constructor(t,e){this.emitter=new l,this.onClick_=this.onClick_.bind(this),this.props=e.props,this.viewProps=e.viewProps,this.view=new b(t,{props:this.props,viewProps:this.viewProps}),this.view.buttonElement.addEventListener("click",this.onClick_)}onClick_(){this.emitter.emit("click",{sender:this})}}class w{constructor(t,e){var n;this.constraint_=null==e?void 0:e.constraint,this.equals_=null!==(n=null==e?void 0:e.equals)&&void 0!==n?n:(t,e)=>t===e,this.emitter=new l,this.rawValue_=t}get constraint(){return this.constraint_}get rawValue(){return this.rawValue_}set rawValue(t){this.setRawValue(t,{forceEmit:!1,last:!0})}setRawValue(t,e){const n=null!=e?e:{forceEmit:!1,last:!0},r=this.constraint_?this.constraint_.constrain(t):t,i=this.rawValue_;(!this.equals_(i,r)||n.forceEmit)&&(this.emitter.emit("beforechange",{sender:this}),this.rawValue_=r,this.emitter.emit("change",{options:n,previousRawValue:i,rawValue:r,sender:this}))}}class A{constructor(t){this.emitter=new l,this.value_=t}get rawValue(){return this.value_}set rawValue(t){this.setRawValue(t,{forceEmit:!1,last:!0})}setRawValue(t,e){const n=null!=e?e:{forceEmit:!1,last:!0},r=this.value_;(r!==t||n.forceEmit)&&(this.emitter.emit("beforechange",{sender:this}),this.value_=t,this.emitter.emit("change",{options:n,previousRawValue:r,rawValue:this.value_,sender:this}))}}function E(t,e){const n=null==e?void 0:e.constraint,r=null==e?void 0:e.equals;return n||r?new w(t,e):new A(t)}class x{constructor(t){this.emitter=new l,this.valMap_=t;for(const t in this.valMap_)this.valMap_[t].emitter.on("change",(()=>{this.emitter.emit("change",{key:t,sender:this})}))}static createCore(t){return Object.keys(t).reduce(((e,n)=>Object.assign(e,{[n]:E(t[n])})),{})}static fromObject(t){const e=this.createCore(t);return new x(e)}get(t){return this.valMap_[t].rawValue}set(t,e){this.valMap_[t].rawValue=e}value(t){return this.valMap_[t]}}function S(t,e){return i(Object.keys(e).reduce(((n,r)=>{if(void 0===n)return;const i=(0,e[r])(t[r]);return i.succeeded?Object.assign(Object.assign({},n),{[r]:i.value}):void 0}),{}))}function T(t,e){return t.reduce(((t,n)=>{if(void 0===t)return;const r=e(n);return r.succeeded&&void 0!==r.value?[...t,r.value]:void 0}),[])}function C(t){return null!==t&&"object"==typeof t}function I(t){return e=>n=>{if(!e&&void 0===n)return{succeeded:!1,value:void 0};if(e&&void 0===n)return{succeeded:!0,value:void 0};const r=t(n);return void 0!==r?{succeeded:!0,value:r}:{succeeded:!1,value:void 0}}}function k(t){return{custom:e=>I(e)(t),boolean:I((t=>"boolean"==typeof t?t:void 0))(t),number:I((t=>"number"==typeof t?t:void 0))(t),string:I((t=>"string"==typeof t?t:void 0))(t),function:I((t=>"function"==typeof t?t:void 0))(t),constant:e=>I((t=>t===e?e:void 0))(t),raw:I((t=>t))(t),object:e=>I((t=>{if(C(t))return S(t,e)}))(t),array:e=>I((t=>{if(Array.isArray(t))return T(t,e)}))(t)}}const P={optional:k(!0),required:k(!1)};function R(t,e){const n=P.required.object(e)(t);return n.succeeded?n.value:void 0}function O(t){console.warn([`Missing '${t.key}' of ${t.target} in ${t.place}.`,"Please rebuild plugins with the latest core package."].join(" "))}function M(t){return t&&t.parentElement&&t.parentElement.removeChild(t),null}class L{constructor(t){this.value_=t}static create(t){return[new L(t),(e,n)=>{t.setRawValue(e,n)}]}get emitter(){return this.value_.emitter}get rawValue(){return this.value_.rawValue}}const D=c("");function N(t,e){return g(t,D(void 0,e))}class B extends x{constructor(t){var e;super(t),this.onDisabledChange_=this.onDisabledChange_.bind(this),this.onParentChange_=this.onParentChange_.bind(this),this.onParentGlobalDisabledChange_=this.onParentGlobalDisabledChange_.bind(this),[this.globalDisabled_,this.setGlobalDisabled_]=L.create(E(this.getGlobalDisabled_())),this.value("disabled").emitter.on("change",this.onDisabledChange_),this.value("parent").emitter.on("change",this.onParentChange_),null===(e=this.get("parent"))||void 0===e||e.globalDisabled.emitter.on("change",this.onParentGlobalDisabledChange_)}static create(t){var e,n,r;const i=null!=t?t:{};return new B(x.createCore({disabled:null!==(e=i.disabled)&&void 0!==e&&e,disposed:!1,hidden:null!==(n=i.hidden)&&void 0!==n&&n,parent:null!==(r=i.parent)&&void 0!==r?r:null}))}get globalDisabled(){return this.globalDisabled_}bindClassModifiers(t){h(this.globalDisabled_,N(t,"disabled")),p(this,"hidden",N(t,"hidden"))}bindDisabled(t){h(this.globalDisabled_,(e=>{t.disabled=e}))}bindTabIndex(t){h(this.globalDisabled_,(e=>{t.tabIndex=e?-1:0}))}handleDispose(t){this.value("disposed").emitter.on("change",(e=>{e&&t()}))}getGlobalDisabled_(){const t=this.get("parent");return!!t&&t.globalDisabled.rawValue||this.get("disabled")}updateGlobalDisabled_(){this.setGlobalDisabled_(this.getGlobalDisabled_())}onDisabledChange_(){this.updateGlobalDisabled_()}onParentGlobalDisabledChange_(){this.updateGlobalDisabled_()}onParentChange_(t){var e;const n=t.previousRawValue;null==n||n.globalDisabled.emitter.off("change",this.onParentGlobalDisabledChange_),null===(e=this.get("parent"))||void 0===e||e.globalDisabled.emitter.on("change",this.onParentGlobalDisabledChange_),this.updateGlobalDisabled_()}}function j(){return["veryfirst","first","last","verylast"]}const z=c(""),F={veryfirst:"vfst",first:"fst",last:"lst",verylast:"vlst"};class U{constructor(t){this.parent_=null,this.blade=t.blade,this.view=t.view,this.viewProps=t.viewProps;const e=this.view.element;this.blade.value("positions").emitter.on("change",(()=>{j().forEach((t=>{e.classList.remove(z(void 0,F[t]))})),this.blade.get("positions").forEach((t=>{e.classList.add(z(void 0,F[t]))}))})),this.viewProps.handleDispose((()=>{M(e)}))}get parent(){return this.parent_}set parent(t){this.parent_=t,"parent"in this.viewProps.valMap_?this.viewProps.set("parent",this.parent_?this.parent_.viewProps:null):O({key:"parent",target:B.name,place:"BladeController.parent"})}}const q="http://www.w3.org/2000/svg";function G(t){t.offsetHeight}function H(t,e){const n=t.style.transition;t.style.transition="none",e(),t.style.transition=n}function V(t){return void 0!==t.ontouchstart}function Q(t){for(;t.childNodes.length>0;)t.removeChild(t.childNodes[0])}function W(t){return t.relatedTarget?i(t.relatedTarget):"explicitOriginalTarget"in t?t.explicitOriginalTarget:null}const Y=c("lbl");function K(t,e){const n=t.createDocumentFragment();return e.split("\n").map((e=>t.createTextNode(e))).forEach(((e,r)=>{r>0&&n.appendChild(t.createElement("br")),n.appendChild(e)})),n}class X{constructor(t,e){this.element=t.createElement("div"),this.element.classList.add(Y()),e.viewProps.bindClassModifiers(this.element);const n=t.createElement("div");n.classList.add(Y("l")),p(e.props,"label",(e=>{o(e)?this.element.classList.add(Y(void 0,"nol")):(this.element.classList.remove(Y(void 0,"nol")),Q(n),n.appendChild(K(t,e)))})),this.element.appendChild(n),this.labelElement=n;const r=t.createElement("div");r.classList.add(Y("v")),this.element.appendChild(r),this.valueElement=r}}class $ extends U{constructor(t,e){const n=e.valueController.viewProps;super(Object.assign(Object.assign({},e),{view:new X(t,{props:e.props,viewProps:n}),viewProps:n})),this.props=e.props,this.valueController=e.valueController,this.view.valueElement.appendChild(this.valueController.view.element)}}class Z extends U{constructor(t){super(t),this.value=t.value}}class J extends x{constructor(t){super(t)}static create(t){const e={completed:!0,expanded:t,expandedHeight:null,shouldFixHeight:!1,temporaryExpanded:null},n=x.createCore(e);return new J(n)}get styleExpanded(){var t;return null!==(t=this.get("temporaryExpanded"))&&void 0!==t?t:this.get("expanded")}get styleHeight(){if(!this.styleExpanded)return"0";const t=this.get("expandedHeight");return this.get("shouldFixHeight")&&!o(t)?`${t}px`:"auto"}bindExpandedClass(t,e){const n=()=>{this.styleExpanded?t.classList.add(e):t.classList.remove(e)};p(this,"expanded",n),p(this,"temporaryExpanded",n)}cleanUpTransition(){this.set("shouldFixHeight",!1),this.set("expandedHeight",null),this.set("completed",!0)}}function tt(t){return J.create(t)}function et(t,e){let n=0;return H(e,(()=>{t.set("expandedHeight",null),t.set("temporaryExpanded",!0),G(e),n=e.clientHeight,t.set("temporaryExpanded",null),G(e)})),n}function nt(t,e){e.style.height=t.styleHeight}function rt(t,e){t.value("expanded").emitter.on("beforechange",(()=>{t.set("completed",!1),o(t.get("expandedHeight"))&&t.set("expandedHeight",et(t,e)),t.set("shouldFixHeight",!0),G(e)})),t.emitter.on("change",(()=>{nt(t,e)})),nt(t,e),e.addEventListener("transitionend",(e=>{"height"===e.propertyName&&t.cleanUpTransition()}))}class it{constructor(t,e){const n=c(e.viewName);this.element=t.createElement("div"),this.element.classList.add(n()),e.viewProps.bindClassModifiers(this.element)}}class ot extends Z{constructor(t,e){const n=e.valueController.viewProps;super(Object.assign(Object.assign({},e),{value:e.valueController.value,view:new X(t,{props:e.props,viewProps:n}),viewProps:n})),this.props=e.props,this.valueController=e.valueController,this.view.valueElement.appendChild(this.valueController.view.element)}}class at{constructor(){this.disabled=!1,this.emitter=new l}dispose(){}tick(){this.disabled||this.emitter.emit("tick",{sender:this})}}class st{constructor(t,e){this.disabled_=!1,this.timerId_=null,this.onTick_=this.onTick_.bind(this),this.doc_=t,this.emitter=new l,this.interval_=e,this.setTimer_()}get disabled(){return this.disabled_}set disabled(t){this.disabled_=t,this.disabled_?this.clearTimer_():this.setTimer_()}dispose(){this.clearTimer_()}clearTimer_(){if(null===this.timerId_)return;const t=this.doc_.defaultView;t&&t.clearInterval(this.timerId_),this.timerId_=null}setTimer_(){if(this.clearTimer_(),this.interval_<=0)return;const t=this.doc_.defaultView;t&&(this.timerId_=t.setInterval(this.onTick_,this.interval_))}onTick_(){this.disabled_||this.emitter.emit("tick",{sender:this})}}class lt{constructor(t){this.constraints=t}constrain(t){return this.constraints.reduce(((t,e)=>e.constrain(t)),t)}}function ut(t,e){if(t instanceof e)return t;if(t instanceof lt){const n=t.constraints.reduce(((t,n)=>t||(n instanceof e?n:null)),null);if(n)return n}return null}class ct{constructor(t){this.values=x.fromObject({max:t.max,min:t.min})}constrain(t){const e=this.values.get("max"),n=this.values.get("min");return Math.min(Math.max(t,n),e)}}class dt{constructor(t){this.values=x.fromObject({max:t.max,min:t.min})}get maxValue(){return this.values.get("max")}get minValue(){return this.values.get("min")}constrain(t){const e=this.values.get("max"),n=this.values.get("min");let r=t;return o(n)||(r=Math.max(r,n)),o(e)||(r=Math.min(r,e)),r}}class ft{constructor(t,e=0){this.step=t,this.origin=e}constrain(t){const e=this.origin%this.step;return e+Math.round((t-e)/this.step)*this.step}}const ht=c("pop");class pt{constructor(t,e){this.element=t.createElement("div"),this.element.classList.add(ht()),e.viewProps.bindClassModifiers(this.element),h(e.shows,g(this.element,ht(void 0,"v")))}}class mt{constructor(t,e){this.shows=E(!1),this.viewProps=e.viewProps,this.view=new pt(t,{shows:this.shows,viewProps:this.viewProps})}}const gt=c("txt");class vt{constructor(t,e){this.onChange_=this.onChange_.bind(this),this.element=t.createElement("div"),this.element.classList.add(gt()),e.viewProps.bindClassModifiers(this.element),this.props_=e.props,this.props_.emitter.on("change",this.onChange_);const n=t.createElement("input");n.classList.add(gt("i")),n.type="text",e.viewProps.bindDisabled(n),this.element.appendChild(n),this.inputElement=n,e.value.emitter.on("change",this.onChange_),this.value_=e.value,this.refresh()}refresh(){const t=this.props_.get("formatter");this.inputElement.value=t(this.value_.rawValue)}onChange_(){this.refresh()}}class yt{constructor(t,e){this.onInputChange_=this.onInputChange_.bind(this),this.parser_=e.parser,this.props=e.props,this.value=e.value,this.viewProps=e.viewProps,this.view=new vt(t,{props:e.props,value:this.value,viewProps:this.viewProps}),this.view.inputElement.addEventListener("change",this.onInputChange_)}onInputChange_(t){const e=i(t.currentTarget).value,n=this.parser_(e);o(n)||(this.value.rawValue=n),this.view.refresh()}}function bt(t){return"false"!==t&&!!t}class _t{constructor(t){this.text=t}evaluate(){return Number(this.text)}toString(){return this.text}}const wt={"**":(t,e)=>Math.pow(t,e),"*":(t,e)=>t*e,"/":(t,e)=>t/e,"%":(t,e)=>t%e,"+":(t,e)=>t+e,"-":(t,e)=>t-e,"<<":(t,e)=>t<<e,">>":(t,e)=>t>>e,">>>":(t,e)=>t>>>e,"&":(t,e)=>t&e,"^":(t,e)=>t^e,"|":(t,e)=>t|e};class At{constructor(t,e,n){this.left=e,this.operator=t,this.right=n}evaluate(){const t=wt[this.operator];if(!t)throw new Error(`unexpected binary operator: '${this.operator}`);return t(this.left.evaluate(),this.right.evaluate())}toString(){return["b(",this.left.toString(),this.operator,this.right.toString(),")"].join(" ")}}const Et={"+":t=>t,"-":t=>-t,"~":t=>~t};class xt{constructor(t,e){this.operator=t,this.expression=e}evaluate(){const t=Et[this.operator];if(!t)throw new Error(`unexpected unary operator: '${this.operator}`);return t(this.expression.evaluate())}toString(){return["u(",this.operator,this.expression.toString(),")"].join(" ")}}function St(t){return(e,n)=>{for(let r=0;r<t.length;r++){const i=t[r](e,n);if(""!==i)return i}return""}}function Tt(t,e){var n;const r=t.substr(e).match(/^\s+/);return null!==(n=r&&r[0])&&void 0!==n?n:""}function Ct(t,e){const n=t.substr(e,1);return n.match(/^[1-9]$/)?n:""}function It(t,e){var n;const r=t.substr(e).match(/^[0-9]+/);return null!==(n=r&&r[0])&&void 0!==n?n:""}function kt(t,e){const n=It(t,e);if(""!==n)return n;const r=t.substr(e,1);if("-"!==r&&"+"!==r)return"";const i=It(t,e+=1);return""===i?"":r+i}function Pt(t,e){const n=t.substr(e,1);if(e+=1,"e"!==n.toLowerCase())return"";const r=kt(t,e);return""===r?"":n+r}function Rt(t,e){const n=t.substr(e,1);if("0"===n)return n;const r=Ct(t,e);return e+=r.length,""===r?"":r+It(t,e)}function Ot(t,e){const n=Rt(t,e);if(e+=n.length,""===n)return"";const r=t.substr(e,1);if(e+=r.length,"."!==r)return"";const i=It(t,e);return n+r+i+Pt(t,e+=i.length)}function Mt(t,e){const n=t.substr(e,1);if(e+=n.length,"."!==n)return"";const r=It(t,e);return e+=r.length,""===r?"":n+r+Pt(t,e)}function Lt(t,e){const n=Rt(t,e);return e+=n.length,""===n?"":n+Pt(t,e)}const Dt=St([Ot,Mt,Lt]);function Nt(t,e){var n;const r=t.substr(e).match(/^[01]+/);return null!==(n=r&&r[0])&&void 0!==n?n:""}function Bt(t,e){const n=t.substr(e,2);if(e+=n.length,"0b"!==n.toLowerCase())return"";const r=Nt(t,e);return""===r?"":n+r}function jt(t,e){var n;const r=t.substr(e).match(/^[0-7]+/);return null!==(n=r&&r[0])&&void 0!==n?n:""}function zt(t,e){const n=t.substr(e,2);if(e+=n.length,"0o"!==n.toLowerCase())return"";const r=jt(t,e);return""===r?"":n+r}function Ft(t,e){var n;const r=t.substr(e).match(/^[0-9a-f]+/i);return null!==(n=r&&r[0])&&void 0!==n?n:""}function Ut(t,e){const n=t.substr(e,2);if(e+=n.length,"0x"!==n.toLowerCase())return"";const r=Ft(t,e);return""===r?"":n+r}const qt=St([Bt,zt,Ut]),Gt=St([qt,Dt]);function Ht(t,e){const n=Gt(t,e);return e+=n.length,""===n?null:{evaluable:new _t(n),cursor:e}}function Vt(t,e){const n=t.substr(e,1);if(e+=n.length,"("!==n)return null;const r=$t(t,e);if(!r)return null;e=r.cursor,e+=Tt(t,e).length;const i=t.substr(e,1);return e+=i.length,")"!==i?null:{evaluable:r.evaluable,cursor:e}}function Qt(t,e){var n;return null!==(n=Ht(t,e))&&void 0!==n?n:Vt(t,e)}function Wt(t,e){const n=Qt(t,e);if(n)return n;const r=t.substr(e,1);if(e+=r.length,"+"!==r&&"-"!==r&&"~"!==r)return null;const i=Wt(t,e);return i?{cursor:e=i.cursor,evaluable:new xt(r,i.evaluable)}:null}function Yt(t,e,n){n+=Tt(e,n).length;const r=t.filter((t=>e.startsWith(t,n)))[0];return r?(n+=r.length,{cursor:n+=Tt(e,n).length,operator:r}):null}function Kt(t,e){return(n,r)=>{const i=t(n,r);if(!i)return null;r=i.cursor;let o=i.evaluable;for(;;){const i=Yt(e,n,r);if(!i)break;r=i.cursor;const a=t(n,r);if(!a)return null;r=a.cursor,o=new At(i.operator,o,a.evaluable)}return o?{cursor:r,evaluable:o}:null}}const Xt=[["**"],["*","/","%"],["+","-"],["<<",">>>",">>"],["&"],["^"],["|"]].reduce(((t,e)=>Kt(t,e)),Wt);function $t(t,e){return e+=Tt(t,e).length,Xt(t,e)}function Zt(t){const e=$t(t,0);return e?e.cursor+Tt(t,e.cursor).length!==t.length?null:e.evaluable:null}function Jt(t){var e;const n=Zt(t);return null!==(e=null==n?void 0:n.evaluate())&&void 0!==e?e:null}function te(t){if("number"==typeof t)return t;if("string"==typeof t){const e=Jt(t);if(!o(e))return e}return 0}function ee(t){return e=>e.toFixed(Math.max(Math.min(t,20),0))}function ne(t){return String(t)}function re(t,e){for(;t.length<e;)t.push(void 0)}function ie(t){const e=[];return re(e,t),E(e)}function oe(t){const e=t.indexOf(void 0);return i(e<0?t:t.slice(0,e))}function ae(t,e){const n=[...oe(t),e];return n.length>t.length?n.splice(0,n.length-t.length):re(n,t.length),n}function se({primary:t,secondary:e,forward:n,backward:r}){let i=!1;function o(t){i||(i=!0,t(),i=!1)}t.emitter.on("change",(r=>{o((()=>{e.setRawValue(n(t,e),r.options)}))})),e.emitter.on("change",(i=>{o((()=>{t.setRawValue(r(t,e),i.options)})),o((()=>{e.setRawValue(n(t,e),i.options)}))})),o((()=>{e.setRawValue(n(t,e),{forceEmit:!1,last:!0})}))}function le(t,e){const n=t*(e.altKey?.1:1)*(e.shiftKey?10:1);return e.upKey?+n:e.downKey?-n:0}function ue(t){return{altKey:t.altKey,downKey:"ArrowDown"===t.key,shiftKey:t.shiftKey,upKey:"ArrowUp"===t.key}}function ce(t){return{altKey:t.altKey,downKey:"ArrowLeft"===t.key,shiftKey:t.shiftKey,upKey:"ArrowRight"===t.key}}function de(t){return"ArrowUp"===t||"ArrowDown"===t}function fe(t){return de(t)||"ArrowLeft"===t||"ArrowRight"===t}function he(t,e){var n,r;const i=e.ownerDocument.defaultView,o=e.getBoundingClientRect();return{x:t.pageX-((null!==(n=i&&i.scrollX)&&void 0!==n?n:0)+o.left),y:t.pageY-((null!==(r=i&&i.scrollY)&&void 0!==r?r:0)+o.top)}}ee(0);class pe{constructor(t){this.lastTouch_=null,this.onDocumentMouseMove_=this.onDocumentMouseMove_.bind(this),this.onDocumentMouseUp_=this.onDocumentMouseUp_.bind(this),this.onMouseDown_=this.onMouseDown_.bind(this),this.onTouchEnd_=this.onTouchEnd_.bind(this),this.onTouchMove_=this.onTouchMove_.bind(this),this.onTouchStart_=this.onTouchStart_.bind(this),this.elem_=t,this.emitter=new l,t.addEventListener("touchstart",this.onTouchStart_,{passive:!1}),t.addEventListener("touchmove",this.onTouchMove_,{passive:!0}),t.addEventListener("touchend",this.onTouchEnd_),t.addEventListener("mousedown",this.onMouseDown_)}computePosition_(t){const e=this.elem_.getBoundingClientRect();return{bounds:{width:e.width,height:e.height},point:t?{x:t.x,y:t.y}:null}}onMouseDown_(t){var e;t.preventDefault(),null===(e=t.currentTarget)||void 0===e||e.focus();const n=this.elem_.ownerDocument;n.addEventListener("mousemove",this.onDocumentMouseMove_),n.addEventListener("mouseup",this.onDocumentMouseUp_),this.emitter.emit("down",{altKey:t.altKey,data:this.computePosition_(he(t,this.elem_)),sender:this,shiftKey:t.shiftKey})}onDocumentMouseMove_(t){this.emitter.emit("move",{altKey:t.altKey,data:this.computePosition_(he(t,this.elem_)),sender:this,shiftKey:t.shiftKey})}onDocumentMouseUp_(t){const e=this.elem_.ownerDocument;e.removeEventListener("mousemove",this.onDocumentMouseMove_),e.removeEventListener("mouseup",this.onDocumentMouseUp_),this.emitter.emit("up",{altKey:t.altKey,data:this.computePosition_(he(t,this.elem_)),sender:this,shiftKey:t.shiftKey})}onTouchStart_(t){t.preventDefault();const e=t.targetTouches.item(0),n=this.elem_.getBoundingClientRect();this.emitter.emit("down",{altKey:t.altKey,data:this.computePosition_(e?{x:e.clientX-n.left,y:e.clientY-n.top}:void 0),sender:this,shiftKey:t.shiftKey}),this.lastTouch_=e}onTouchMove_(t){const e=t.targetTouches.item(0),n=this.elem_.getBoundingClientRect();this.emitter.emit("move",{altKey:t.altKey,data:this.computePosition_(e?{x:e.clientX-n.left,y:e.clientY-n.top}:void 0),sender:this,shiftKey:t.shiftKey}),this.lastTouch_=e}onTouchEnd_(t){var e;const n=null!==(e=t.targetTouches.item(0))&&void 0!==e?e:this.lastTouch_,r=this.elem_.getBoundingClientRect();this.emitter.emit("up",{altKey:t.altKey,data:this.computePosition_(n?{x:n.clientX-r.left,y:n.clientY-r.top}:void 0),sender:this,shiftKey:t.shiftKey})}}function me(t,e,n,r,i){return r+(t-e)/(n-e)*(i-r)}function ge(t){return String(t.toFixed(10)).split(".")[1].replace(/0+$/,"").length}function ve(t,e,n){return Math.min(Math.max(t,e),n)}const ye=c("txt");class be{constructor(t,e){this.onChange_=this.onChange_.bind(this),this.props_=e.props,this.props_.emitter.on("change",this.onChange_),this.element=t.createElement("div"),this.element.classList.add(ye(),ye(void 0,"num")),e.arrayPosition&&this.element.classList.add(ye(void 0,e.arrayPosition)),e.viewProps.bindClassModifiers(this.element);const n=t.createElement("input");n.classList.add(ye("i")),n.type="text",e.viewProps.bindDisabled(n),this.element.appendChild(n),this.inputElement=n,this.onDraggingChange_=this.onDraggingChange_.bind(this),this.dragging_=e.dragging,this.dragging_.emitter.on("change",this.onDraggingChange_),this.element.classList.add(ye()),this.inputElement.classList.add(ye("i"));const r=t.createElement("div");r.classList.add(ye("k")),this.element.appendChild(r),this.knobElement=r;const i=t.createElementNS(q,"svg");i.classList.add(ye("g")),this.knobElement.appendChild(i);const o=t.createElementNS(q,"path");o.classList.add(ye("gb")),i.appendChild(o),this.guideBodyElem_=o;const a=t.createElementNS(q,"path");a.classList.add(ye("gh")),i.appendChild(a),this.guideHeadElem_=a;const s=t.createElement("div");s.classList.add(c("tt")()),this.knobElement.appendChild(s),this.tooltipElem_=s,e.value.emitter.on("change",this.onChange_),this.value=e.value,this.refresh()}onDraggingChange_(t){if(null===t.rawValue)return void this.element.classList.remove(ye(void 0,"drg"));this.element.classList.add(ye(void 0,"drg"));const e=t.rawValue/this.props_.get("draggingScale"),n=e+(e>0?-1:e<0?1:0),r=ve(-n,-4,4);this.guideHeadElem_.setAttributeNS(null,"d",[`M ${n+r},0 L${n},4 L${n+r},8`,`M ${e},-1 L${e},9`].join(" ")),this.guideBodyElem_.setAttributeNS(null,"d",`M 0,4 L${e},4`);const i=this.props_.get("formatter");this.tooltipElem_.textContent=i(this.value.rawValue),this.tooltipElem_.style.left=`${e}px`}refresh(){const t=this.props_.get("formatter");this.inputElement.value=t(this.value.rawValue)}onChange_(){this.refresh()}}class _e{constructor(t,e){var n;this.originRawValue_=0,this.onInputChange_=this.onInputChange_.bind(this),this.onInputKeyDown_=this.onInputKeyDown_.bind(this),this.onInputKeyUp_=this.onInputKeyUp_.bind(this),this.onPointerDown_=this.onPointerDown_.bind(this),this.onPointerMove_=this.onPointerMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.baseStep_=e.baseStep,this.parser_=e.parser,this.props=e.props,this.sliderProps_=null!==(n=e.sliderProps)&&void 0!==n?n:null,this.value=e.value,this.viewProps=e.viewProps,this.dragging_=E(null),this.view=new be(t,{arrayPosition:e.arrayPosition,dragging:this.dragging_,props:this.props,value:this.value,viewProps:this.viewProps}),this.view.inputElement.addEventListener("change",this.onInputChange_),this.view.inputElement.addEventListener("keydown",this.onInputKeyDown_),this.view.inputElement.addEventListener("keyup",this.onInputKeyUp_);const r=new pe(this.view.knobElement);r.emitter.on("down",this.onPointerDown_),r.emitter.on("move",this.onPointerMove_),r.emitter.on("up",this.onPointerUp_)}constrainValue_(t){var e,n;const r=null===(e=this.sliderProps_)||void 0===e?void 0:e.get("minValue"),i=null===(n=this.sliderProps_)||void 0===n?void 0:n.get("maxValue");let o=t;return void 0!==r&&(o=Math.max(o,r)),void 0!==i&&(o=Math.min(o,i)),o}onInputChange_(t){const e=i(t.currentTarget).value,n=this.parser_(e);o(n)||(this.value.rawValue=this.constrainValue_(n)),this.view.refresh()}onInputKeyDown_(t){const e=le(this.baseStep_,ue(t));0!==e&&this.value.setRawValue(this.constrainValue_(this.value.rawValue+e),{forceEmit:!1,last:!1})}onInputKeyUp_(t){0!==le(this.baseStep_,ue(t))&&this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})}onPointerDown_(){this.originRawValue_=this.value.rawValue,this.dragging_.rawValue=0}computeDraggingValue_(t){if(!t.point)return null;const e=t.point.x-t.bounds.width/2;return this.constrainValue_(this.originRawValue_+e*this.props.get("draggingScale"))}onPointerMove_(t){const e=this.computeDraggingValue_(t.data);null!==e&&(this.value.setRawValue(e,{forceEmit:!1,last:!1}),this.dragging_.rawValue=this.value.rawValue-this.originRawValue_)}onPointerUp_(t){const e=this.computeDraggingValue_(t.data);null!==e&&(this.value.setRawValue(e,{forceEmit:!0,last:!0}),this.dragging_.rawValue=null)}}function we(t,e){t.write(e)}function Ae(t){const e=t?ut(t,ft):null;return e?e.step:null}function Ee(t,e){const n=t&&ut(t,ft);return n?ge(n.step):Math.max(ge(e),2)}function xe(t){const e=Ae(t);return null!=e?e:1}function Se(t,e){var n;const r=t&&ut(t,ft),i=Math.abs(null!==(n=null==r?void 0:r.step)&&void 0!==n?n:e);return 0===i?.1:Math.pow(10,Math.floor(Math.log10(i))-1)}function Te(t){return[t[0],t[1],t[2]]}function Ce(t,e){const n=ee("float"===e?2:0);return`rgb(${Te(t.getComponents("rgb",e)).map((t=>n(t))).join(", ")})`}function Ie(t){return e=>Ce(e,t)}function ke(t,e){const n=ee(2),r=ee("float"===e?2:0);return`rgba(${t.getComponents("rgb",e).map(((t,e)=>(3===e?n:r)(t))).join(", ")})`}function Pe(t){return e=>ke(e,t)}function Re(t,e){const n=ee("float"===e?2:0),r=["r","g","b"];return`{${Te(t.getComponents("rgb",e)).map(((t,e)=>`${r[e]}: ${n(t)}`)).join(", ")}}`}function Oe(t){return e=>Re(e,t)}function Me(t,e){const n=ee(2),r=ee("float"===e?2:0),i=["r","g","b","a"];return`{${t.getComponents("rgb",e).map(((t,e)=>{const o=3===e?n:r;return`${i[e]}: ${o(t)}`})).join(", ")}}`}function Le(t){return e=>Me(e,t)}["int","float"].reduce(((t,e)=>[...t,{format:{alpha:!1,mode:"rgb",notation:"func",type:e},stringifier:Ie(e)},{format:{alpha:!0,mode:"rgb",notation:"func",type:e},stringifier:Pe(e)},{format:{alpha:!1,mode:"rgb",notation:"object",type:e},stringifier:Oe(e)},{format:{alpha:!0,mode:"rgb",notation:"object",type:e},stringifier:Le(e)}]),[]);class De{constructor(t){this.components=t.components,this.asm_=t.assembly}constrain(t){const e=this.asm_.toComponents(t).map(((t,e)=>{var n,r;return null!==(r=null===(n=this.components[e])||void 0===n?void 0:n.constrain(t))&&void 0!==r?r:t}));return this.asm_.fromComponents(e)}}const Ne=c("pndtxt");class Be{constructor(t,e){this.textViews=e.textViews,this.element=t.createElement("div"),this.element.classList.add(Ne()),this.textViews.forEach((e=>{const n=t.createElement("div");n.classList.add(Ne("a")),n.appendChild(e.element),this.element.appendChild(n)}))}}function je(t,e,n){return new _e(t,{arrayPosition:0===n?"fst":n===e.axes.length-1?"lst":"mid",baseStep:e.axes[n].baseStep,parser:e.parser,props:e.axes[n].textProps,value:E(0,{constraint:e.axes[n].constraint}),viewProps:e.viewProps})}class ze{constructor(t,e){this.value=e.value,this.viewProps=e.viewProps,this.acs_=e.axes.map(((n,r)=>je(t,e,r))),this.acs_.forEach(((t,n)=>{se({primary:this.value,secondary:t.value,forward:t=>e.assembly.toComponents(t.rawValue)[n],backward:(t,r)=>{const i=e.assembly.toComponents(t.rawValue);return i[n]=r.rawValue,e.assembly.fromComponents(i)}})})),this.view=new Be(t,{textViews:this.acs_.map((t=>t.view))})}}function Fe(t,e){return"step"in t&&!o(t.step)?new ft(t.step,e):null}function Ue(t){return o(t.max)||o(t.min)?o(t.max)&&o(t.min)?null:new dt({max:t.max,min:t.min}):new ct({max:t.max,min:t.min})}const qe={monitor:{defaultInterval:200,defaultLineCount:3}},Ge=c("grl");class He{constructor(t,e){this.onCursorChange_=this.onCursorChange_.bind(this),this.onValueUpdate_=this.onValueUpdate_.bind(this),this.element=t.createElement("div"),this.element.classList.add(Ge()),e.viewProps.bindClassModifiers(this.element),this.formatter_=e.formatter,this.props_=e.props,this.cursor_=e.cursor,this.cursor_.emitter.on("change",this.onCursorChange_);const n=t.createElementNS(q,"svg");n.classList.add(Ge("g")),n.style.height=`calc(var(--bld-us) * ${e.lineCount})`,this.element.appendChild(n),this.svgElem_=n;const r=t.createElementNS(q,"polyline");this.svgElem_.appendChild(r),this.lineElem_=r;const i=t.createElement("div");i.classList.add(Ge("t"),c("tt")()),this.element.appendChild(i),this.tooltipElem_=i,e.value.emitter.on("change",this.onValueUpdate_),this.value=e.value,this.update_()}get graphElement(){return this.svgElem_}update_(){const t=this.svgElem_.getBoundingClientRect(),e=this.value.rawValue.length-1,n=this.props_.get("minValue"),r=this.props_.get("maxValue"),i=[];this.value.rawValue.forEach(((o,a)=>{if(void 0===o)return;const s=me(a,0,e,0,t.width),l=me(o,n,r,t.height,0);i.push([s,l].join(","))})),this.lineElem_.setAttributeNS(null,"points",i.join(" "));const o=this.tooltipElem_,a=this.value.rawValue[this.cursor_.rawValue];if(void 0===a)return void o.classList.remove(Ge("t","a"));const s=me(this.cursor_.rawValue,0,e,0,t.width),l=me(a,n,r,t.height,0);o.style.left=`${s}px`,o.style.top=`${l}px`,o.textContent=`${this.formatter_(a)}`,o.classList.contains(Ge("t","a"))||(o.classList.add(Ge("t","a"),Ge("t","in")),G(o),o.classList.remove(Ge("t","in")))}onValueUpdate_(){this.update_()}onCursorChange_(){this.update_()}}class Ve{constructor(t,e){if(this.onGraphMouseMove_=this.onGraphMouseMove_.bind(this),this.onGraphMouseLeave_=this.onGraphMouseLeave_.bind(this),this.onGraphPointerDown_=this.onGraphPointerDown_.bind(this),this.onGraphPointerMove_=this.onGraphPointerMove_.bind(this),this.onGraphPointerUp_=this.onGraphPointerUp_.bind(this),this.props_=e.props,this.value=e.value,this.viewProps=e.viewProps,this.cursor_=E(-1),this.view=new He(t,{cursor:this.cursor_,formatter:e.formatter,lineCount:e.lineCount,props:this.props_,value:this.value,viewProps:this.viewProps}),V(t)){const t=new pe(this.view.element);t.emitter.on("down",this.onGraphPointerDown_),t.emitter.on("move",this.onGraphPointerMove_),t.emitter.on("up",this.onGraphPointerUp_)}else this.view.element.addEventListener("mousemove",this.onGraphMouseMove_),this.view.element.addEventListener("mouseleave",this.onGraphMouseLeave_)}onGraphMouseLeave_(){this.cursor_.rawValue=-1}onGraphMouseMove_(t){const e=this.view.element.getBoundingClientRect();this.cursor_.rawValue=Math.floor(me(t.offsetX,0,e.width,0,this.value.rawValue.length))}onGraphPointerDown_(t){this.onGraphPointerMove_(t)}onGraphPointerMove_(t){t.data.point?this.cursor_.rawValue=Math.floor(me(t.data.point.x,0,t.data.bounds.width,0,this.value.rawValue.length)):this.cursor_.rawValue=-1}onGraphPointerUp_(){this.cursor_.rawValue=-1}}class Qe{constructor(t){this.controller_=t}get disabled(){return this.controller_.viewProps.get("disabled")}set disabled(t){this.controller_.viewProps.set("disabled",t)}get title(){var t;return null!==(t=this.controller_.props.get("title"))&&void 0!==t?t:""}set title(t){this.controller_.props.set("title",t)}on(t,e){const r=e.bind(this);return this.controller_.emitter.on(t,(()=>{r(new n(this))})),this}}class We extends n{constructor(t,e,n){super(t),this.cell=e,this.index=n}}class Ye extends e{constructor(t){super(t),this.cellToApiMap_=new Map,this.emitter_=new l;const e=this.controller_.valueController;e.cellControllers.forEach(((t,n)=>{const r=new Qe(t);this.cellToApiMap_.set(t,r),t.emitter.on("click",(()=>{const t=n%e.size[0],i=Math.floor(n/e.size[0]);this.emitter_.emit("click",{event:new We(this,r,[t,i])})}))}))}cell(t,e){const n=this.controller_.valueController,r=n.cellControllers[e*n.size[0]+t];return this.cellToApiMap_.get(r)}on(t,e){const n=e.bind(this);return this.emitter_.on(t,(t=>{n(t.event)})),this}}class Ke{constructor(t,e){this.size=e.size;const[n,r]=this.size,i=[];for(let o=0;o<r;o++)for(let r=0;r<n;r++){const n=new _(t,{props:x.fromObject(Object.assign({},e.cellConfig(r,o))),viewProps:B.create()});i.push(n)}this.cellCs_=i,this.viewProps=B.create(),this.viewProps.handleDispose((()=>{this.cellCs_.forEach((t=>{t.viewProps.set("disposed",!0)}))})),this.view=new it(t,{viewProps:this.viewProps,viewName:"btngrid"}),this.view.element.style.gridTemplateColumns=`repeat(${n}, 1fr)`,this.cellCs_.forEach((t=>{this.view.element.appendChild(t.view.element)}))}get cellControllers(){return this.cellCs_}}const Xe={id:"buttongrid",type:"blade",css:'.tp-cbzgv,.tp-radv_b,.tp-rslv_k,.tp-cbzv_b{-webkit-appearance:none;-moz-appearance:none;appearance:none;background-color:rgba(0,0,0,0);border-width:0;font-family:inherit;font-size:inherit;font-weight:inherit;margin:0;outline:none;padding:0}.tp-radv_b,.tp-rslv_k,.tp-cbzv_b{background-color:var(--btn-bg);border-radius:var(--elm-br);color:var(--btn-fg);cursor:pointer;display:block;font-weight:bold;height:var(--bld-us);line-height:var(--bld-us);overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.tp-radv_b:hover,.tp-rslv_k:hover,.tp-cbzv_b:hover{background-color:var(--btn-bg-h)}.tp-radv_b:focus,.tp-rslv_k:focus,.tp-cbzv_b:focus{background-color:var(--btn-bg-f)}.tp-radv_b:active,.tp-rslv_k:active,.tp-cbzv_b:active{background-color:var(--btn-bg-a)}.tp-radv_b:disabled,.tp-rslv_k:disabled,.tp-cbzv_b:disabled{opacity:.5}.tp-cbzgv{background-color:var(--in-bg);border-radius:var(--elm-br);box-sizing:border-box;color:var(--in-fg);font-family:inherit;height:var(--bld-us);line-height:var(--bld-us);min-width:0;width:100%}.tp-cbzgv:hover{background-color:var(--in-bg-h)}.tp-cbzgv:focus{background-color:var(--in-bg-f)}.tp-cbzgv:active{background-color:var(--in-bg-a)}.tp-cbzgv:disabled{opacity:.5}.tp-btngridv{border-radius:var(--elm-br);display:grid;overflow:hidden;gap:2px}.tp-btngridv.tp-v-disabled{opacity:.5}.tp-btngridv .tp-btnv_b:disabled{opacity:1}.tp-btngridv .tp-btnv_b:disabled .tp-btnv_t{opacity:.5}.tp-btngridv .tp-btnv_b{border-radius:0}.tp-cbzv{position:relative}.tp-cbzv_h{display:flex}.tp-cbzv_b{margin-right:4px;position:relative;width:var(--bld-us)}.tp-cbzv_b svg{display:block;height:16px;left:50%;margin-left:-8px;margin-top:-8px;position:absolute;top:50%;width:16px}.tp-cbzv_b svg path{stroke:var(--bs-bg);stroke-width:2}.tp-cbzv_t{flex:1}.tp-cbzv_p{height:0;margin-top:0;opacity:0;overflow:hidden;transition:height .2s ease-in-out,opacity .2s linear,margin .2s ease-in-out}.tp-cbzv.tp-cbzv-expanded .tp-cbzv_p{margin-top:var(--bld-s);opacity:1}.tp-cbzv.tp-cbzv-cpl .tp-cbzv_p{overflow:visible}.tp-cbzv .tp-popv{left:calc(-1*var(--cnt-h-p));position:absolute;right:calc(-1*var(--cnt-h-p));top:var(--bld-us)}.tp-cbzpv_t{margin-top:var(--bld-s)}.tp-cbzgv{height:auto;overflow:hidden;position:relative}.tp-cbzgv.tp-v-disabled{opacity:.5}.tp-cbzgv_p{left:16px;position:absolute;right:16px;top:0}.tp-cbzgv_g{cursor:pointer;display:block;height:calc(var(--bld-us)*5);width:100%}.tp-cbzgv_u{opacity:.1;stroke:var(--in-fg);stroke-dasharray:1}.tp-cbzgv_l{fill:rgba(0,0,0,0);stroke:var(--in-fg)}.tp-cbzgv_v{opacity:.5;stroke:var(--in-fg);stroke-dasharray:1}.tp-cbzgv_h{border:var(--in-fg) solid 1px;border-radius:50%;box-sizing:border-box;height:4px;margin-left:-2px;margin-top:-2px;pointer-events:none;position:absolute;width:4px}.tp-cbzgv:focus .tp-cbzgv_h-sel{background-color:var(--in-fg);border-width:0}.tp-cbzprvv{cursor:pointer;height:4px;padding:4px 0;position:relative}.tp-cbzprvv_g{display:block;height:100%;overflow:visible;width:100%}.tp-cbzprvv_t{opacity:.5;stroke:var(--mo-fg)}.tp-cbzprvv_m{background-color:var(--mo-fg);border-radius:50%;height:4px;margin-left:-2px;margin-top:-2px;opacity:0;position:absolute;top:50%;transition:opacity .2s ease-out;width:4px}.tp-cbzprvv_m.tp-cbzprvv_m-a{opacity:1}.tp-fpsv{position:relative}.tp-fpsv_l{bottom:4px;color:var(--mo-fg);line-height:1;right:4px;pointer-events:none;position:absolute}.tp-fpsv_u{margin-left:.2em;opacity:.7}.tp-rslv{cursor:pointer;padding-left:8px;padding-right:8px}.tp-rslv.tp-v-disabled{opacity:.5}.tp-rslv_t{height:calc(var(--bld-us));position:relative}.tp-rslv_t::before{background-color:var(--in-bg);border-radius:1px;content:"";height:2px;margin-top:-1px;position:absolute;top:50%;left:-4px;right:-4px}.tp-rslv_b{bottom:0;top:0;position:absolute}.tp-rslv_b::before{background-color:var(--in-fg);content:"";height:2px;margin-top:-1px;position:absolute;top:50%;left:0;right:0}.tp-rslv_k{height:calc(var(--bld-us) - 8px);margin-top:calc((var(--bld-us) - 8px)/-2);position:absolute;top:50%;width:8px}.tp-rslv_k.tp-rslv_k-min{margin-left:-8px}.tp-rslv_k.tp-rslv_k-max{margin-left:0}.tp-rslv.tp-rslv-zero .tp-rslv_k.tp-rslv_k-min{border-bottom-right-radius:0;border-top-right-radius:0}.tp-rslv.tp-rslv-zero .tp-rslv_k.tp-rslv_k-max{border-bottom-left-radius:0;border-top-left-radius:0}.tp-rsltxtv{display:flex}.tp-rsltxtv_s{flex:1}.tp-rsltxtv_t{flex:1;margin-left:4px}.tp-radv_l{display:block;position:relative}.tp-radv_i{left:0;opacity:0;position:absolute;top:0}.tp-radv_b{opacity:.5}.tp-radv_i:hover+.tp-radv_b{background-color:var(--btn-bg-h)}.tp-radv_i:focus+.tp-radv_b{background-color:var(--btn-bg-f)}.tp-radv_i:active+.tp-radv_b{background-color:var(--btn-bg-a)}.tp-radv_i:checked+.tp-radv_b{opacity:1}.tp-radv_t{bottom:0;color:inherit;left:0;overflow:hidden;position:absolute;right:0;text-align:center;text-overflow:ellipsis;top:0}.tp-radv_i:disabled+.tp-radv_b>.tp-radv_t{opacity:.5}.tp-radgridv{border-radius:var(--elm-br);display:grid;overflow:hidden;gap:2px}.tp-radgridv.tp-v-disabled{opacity:.5}.tp-radgridv .tp-radv_b{border-radius:0}',accept(t){const e=P,n=R(t,{cells:e.required.function,size:e.required.array(e.required.number),view:e.required.constant("buttongrid"),label:e.optional.string});return n?{params:n}:null},controller:t=>new $(t.document,{blade:t.blade,props:x.fromObject({label:t.params.label}),valueController:new Ke(t.document,{cellConfig:t.params.cells,size:t.params.size})}),api:t=>t.controller instanceof $&&t.controller.valueController instanceof Ke?new Ye(t.controller):null};class $e extends e{get label(){return this.controller_.props.get("label")}set label(t){this.controller_.props.set("label",t)}get value(){return this.controller_.valueController.value.rawValue}set value(t){this.controller_.valueController.value.rawValue=t}on(t,e){const n=e.bind(this);return this.controller_.valueController.value.emitter.on(t,(t=>{n(new r(this,t.rawValue,void 0,t.options.last))})),this}}function Ze(t,e,n){return t*(1-n)+e*n}const Je=20,tn=.001,en=100;function nn(t,e){let n=.25,r=.5,i=-1;for(let o=0;o<Je;o++){const[o,a]=t.curve(r);if(r+=n*(o<e?1:-1),i=a,n*=.5,Math.abs(e-o)<tn)break}return i}class rn{constructor(t=0,e=0,n=1,r=1){this.cache_=[],this.comps_=[t,e,n,r]}get x1(){return this.comps_[0]}get y1(){return this.comps_[1]}get x2(){return this.comps_[2]}get y2(){return this.comps_[3]}static isObject(t){return!o(t)&&!!Array.isArray(t)&&"number"==typeof t[0]&&"number"==typeof t[1]&&"number"==typeof t[2]&&"number"==typeof t[3]}static equals(t,e){return t.x1===e.x1&&t.y1===e.y1&&t.x2===e.x2&&t.y2===e.y2}curve(t){const e=Ze(0,this.x1,t),n=Ze(0,this.y1,t),r=Ze(this.x1,this.x2,t),i=Ze(this.y1,this.y2,t),o=Ze(this.x2,1,t),a=Ze(this.y2,1,t),s=Ze(e,r,t),l=Ze(n,i,t),u=Ze(r,o,t),c=Ze(i,a,t);return[Ze(s,u,t),Ze(l,c,t)]}y(t){if(0===this.cache_.length){const t=[];for(let e=0;e<en;e++)t.push(nn(this,me(e,0,en-1,0,1)));this.cache_=t}return this.cache_[Math.round(me(ve(t,0,1),0,1,0,en-1))]}toObject(){return[this.comps_[0],this.comps_[1],this.comps_[2],this.comps_[3]]}}const on={toComponents:t=>t.toObject(),fromComponents:t=>new rn(...t)};function an(t){const e=ee(2);return`cubic-bezier(${t.toObject().map((t=>e(t))).join(", ")})`}const sn=[0,.5,.5,1];function ln(t){const e=t.match(/^cubic-bezier\s*\(\s*([0-9.]+)\s*,\s*([0-9.]+)\s*,\s*([0-9.]+)\s*,\s*([0-9.]+)\s*\)$/);if(!e)return new rn(...sn);const n=[e[1],e[2],e[3],e[4]].reduce(((t,e)=>{if(!t)return null;const n=Number(e);return isNaN(n)?null:[...t,n]}),[]);return new rn(...null!=n?n:sn)}const un=c("cbz");class cn{constructor(t,e){this.element=t.createElement("div"),this.element.classList.add(un()),e.viewProps.bindClassModifiers(this.element),e.foldable.bindExpandedClass(this.element,un(void 0,"expanded")),p(e.foldable,"completed",g(this.element,un(void 0,"cpl")));const n=t.createElement("div");n.classList.add(un("h")),this.element.appendChild(n);const r=t.createElement("button");r.classList.add(un("b")),e.viewProps.bindDisabled(r);const i=t.createElementNS(q,"svg");i.innerHTML='<path d="M2 13C8 13 8 3 14 3"/>',r.appendChild(i),n.appendChild(r),this.buttonElement=r;const o=t.createElement("div");if(o.classList.add(un("t")),n.appendChild(o),this.textElement=o,"inline"===e.pickerLayout){const e=t.createElement("div");e.classList.add(un("p")),this.element.appendChild(e),this.pickerElement=e}else this.pickerElement=null}}const dn=c("cbzp");class fn{constructor(t,e){this.element=t.createElement("div"),this.element.classList.add(dn()),e.viewProps.bindClassModifiers(this.element);const n=t.createElement("div");n.classList.add(dn("g")),this.element.appendChild(n),this.graphElement=n;const r=t.createElement("div");r.classList.add(dn("t")),this.element.appendChild(r),this.textElement=r}}function hn(t,e){const n=new MutationObserver((t=>{for(const r of t)"childList"===r.type&&r.addedNodes.forEach((t=>{t.contains(t)&&(e(),n.disconnect())}))})),r=t.ownerDocument;n.observe(r.body,{attributes:!0,childList:!0,subtree:!0})}const pn=c("cbzg");function mn(t,e){return n=>e(t(n))}class gn{constructor(t,e){this.element=t.createElement("div"),this.element.classList.add(pn()),e.viewProps.bindClassModifiers(this.element),e.viewProps.bindTabIndex(this.element);const n=t.createElement("div");n.classList.add(pn("p")),this.element.appendChild(n),this.previewElement=n;const r=t.createElementNS(q,"svg");r.classList.add(pn("g")),this.element.appendChild(r),this.svgElem_=r;const i=t.createElementNS(q,"path");i.classList.add(pn("u")),this.svgElem_.appendChild(i),this.guideElem_=i;const o=t.createElementNS(q,"polyline");o.classList.add(pn("l")),this.svgElem_.appendChild(o),this.lineElem_=o,this.handleElems_=[t.createElement("div"),t.createElement("div")],this.handleElems_.forEach((t=>{t.classList.add(pn("h")),this.element.appendChild(t)})),this.vectorElems_=[t.createElementNS(q,"line"),t.createElementNS(q,"line")],this.vectorElems_.forEach((t=>{t.classList.add(pn("v")),this.svgElem_.appendChild(t)})),this.value_=e.value,this.value_.emitter.on("change",this.onValueChange_.bind(this)),this.sel_=e.selection,this.handleElems_.forEach(((t,e)=>{h(this.sel_,mn((t=>t===e),g(t,pn("h","sel"))))})),hn(this.element,(()=>{this.refresh()}))}getVertMargin_(t){return.25*t}valueToPosition(t,e){const n=this.element.getBoundingClientRect(),r=n.width,i=n.height,o=this.getVertMargin_(i);return{x:me(t,0,1,0,r),y:me(e,0,1,i-o,o)}}positionToValue(t,e){const n=this.element.getBoundingClientRect(),r=n.width,i=n.height,o=this.getVertMargin_(i);return{x:ve(me(t,0,r,0,1),0,1),y:me(e,i-o,o,0,1)}}refresh(){this.guideElem_.setAttributeNS(null,"d",[0,1].map((t=>{const e=this.valueToPosition(0,t),n=this.valueToPosition(1,t);return[`M ${e.x},${e.y}`,`L ${n.x},${n.y}`].join(" ")})).join(" "));const t=this.value_.rawValue,e=[];let n=0;for(;;){const r=this.valueToPosition(...t.curve(n));if(e.push([r.x,r.y].join(",")),n>=1)break;n=Math.min(n+.05,1)}this.lineElem_.setAttributeNS(null,"points",e.join(" "));const r=t.toObject();[0,1].forEach((t=>{const e=this.valueToPosition(t,t),n=this.valueToPosition(r[2*t],r[2*t+1]),i=this.vectorElems_[t];i.setAttributeNS(null,"x1",String(e.x)),i.setAttributeNS(null,"y1",String(e.y)),i.setAttributeNS(null,"x2",String(n.x)),i.setAttributeNS(null,"y2",String(n.y));const o=this.handleElems_[t];o.style.left=`${n.x}px`,o.style.top=`${n.y}px`}))}onValueChange_(){this.refresh()}}const vn=24,yn=400,bn=1e3,_n=c("cbzprv");class wn{constructor(t,e){this.stopped_=!0,this.startTime_=-1,this.onDispose_=this.onDispose_.bind(this),this.onTimer_=this.onTimer_.bind(this),this.onValueChange_=this.onValueChange_.bind(this),this.element=t.createElement("div"),this.element.classList.add(_n()),e.viewProps.bindClassModifiers(this.element);const n=t.createElementNS(q,"svg");n.classList.add(_n("g")),this.element.appendChild(n),this.svgElem_=n;const r=t.createElementNS(q,"path");r.classList.add(_n("t")),this.svgElem_.appendChild(r),this.ticksElem_=r;const i=t.createElement("div");i.classList.add(_n("m")),this.element.appendChild(i),this.markerElem_=i,this.value_=e.value,this.value_.emitter.on("change",this.onValueChange_),e.viewProps.handleDispose(this.onDispose_),hn(this.element,(()=>{this.refresh()}))}play(){this.stop(),this.updateMarker_(0),this.markerElem_.classList.add(_n("m","a")),this.startTime_=(new Date).getTime()+yn,this.stopped_=!1,requestAnimationFrame(this.onTimer_)}stop(){this.stopped_=!0,this.markerElem_.classList.remove(_n("m","a"))}onDispose_(){this.stop()}updateMarker_(t){const e=this.value_.rawValue.y(ve(t,0,1));this.markerElem_.style.left=100*e+"%"}refresh(){const t=this.svgElem_.getBoundingClientRect(),e=t.width,n=t.height,r=[],i=this.value_.rawValue;for(let t=0;t<vn;t++){const o=me(t,0,vn-1,0,1),a=me(i.y(o),0,1,0,e);r.push(`M ${a},0 v${n}`)}this.ticksElem_.setAttributeNS(null,"d",r.join(" "))}onTimer_(){if(null===this.startTime_)return;const t=(new Date).getTime()-this.startTime_,e=t/bn;this.updateMarker_(e),t>bn+yn&&this.stop(),this.stopped_||requestAnimationFrame(this.onTimer_)}onValueChange_(){this.refresh(),this.play()}}function An(t,e,n,r){const i=n-t,o=r-e;return Math.sqrt(i*i+o*o)}function En(t,e,n,r){const i=An(t,e,n,r),o=Math.atan2(r-e,n-t),a=Math.round(o/(Math.PI/4))*Math.PI/4;return{x:t+Math.cos(a)*i,y:e+Math.sin(a)*i}}class xn{constructor(t,e){this.onKeyDown_=this.onKeyDown_.bind(this),this.onKeyUp_=this.onKeyUp_.bind(this),this.onPointerDown_=this.onPointerDown_.bind(this),this.onPointerMove_=this.onPointerMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.baseStep_=e.baseStep,this.value=e.value,this.sel_=E(0),this.viewProps=e.viewProps,this.view=new gn(t,{selection:this.sel_,value:this.value,viewProps:this.viewProps}),this.view.element.addEventListener("keydown",this.onKeyDown_),this.view.element.addEventListener("keyup",this.onKeyUp_),this.prevView_=new wn(t,{value:this.value,viewProps:this.viewProps}),this.prevView_.element.addEventListener("mousedown",(t=>{t.stopImmediatePropagation(),t.preventDefault(),this.prevView_.play()})),this.view.previewElement.appendChild(this.prevView_.element);const n=new pe(this.view.element);n.emitter.on("down",this.onPointerDown_),n.emitter.on("move",this.onPointerMove_),n.emitter.on("up",this.onPointerUp_)}refresh(){this.view.refresh(),this.prevView_.refresh(),this.prevView_.play()}updateValue_(t,e,n){const r=this.sel_.rawValue,i=this.value.rawValue.toObject(),o=this.view.positionToValue(t.x,t.y),a=e?En(r,r,o.x,o.y):o;i[2*r]=a.x,i[2*r+1]=a.y,this.value.setRawValue(new rn(...i),n)}onPointerDown_(t){const e=t.data;if(!e.point)return;const n=this.value.rawValue,r=this.view.valueToPosition(n.x1,n.y1),i=An(e.point.x,e.point.y,r.x,r.y),o=this.view.valueToPosition(n.x2,n.y2),a=An(e.point.x,e.point.y,o.x,o.y);this.sel_.rawValue=i<=a?0:1,this.updateValue_(e.point,t.shiftKey,{forceEmit:!1,last:!1})}onPointerMove_(t){const e=t.data;e.point&&this.updateValue_(e.point,t.shiftKey,{forceEmit:!1,last:!1})}onPointerUp_(t){const e=t.data;e.point&&this.updateValue_(e.point,t.shiftKey,{forceEmit:!0,last:!0})}onKeyDown_(t){fe(t.key)&&t.preventDefault();const e=this.sel_.rawValue,n=this.value.rawValue.toObject();n[2*e]+=le(this.baseStep_,ce(t)),n[2*e+1]+=le(this.baseStep_,ue(t)),this.value.setRawValue(new rn(...n),{forceEmit:!1,last:!1})}onKeyUp_(t){fe(t.key)&&t.preventDefault();const e=le(this.baseStep_,ce(t)),n=le(this.baseStep_,ue(t));0===e&&0===n||this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})}}class Sn{constructor(t,e){this.value=e.value,this.viewProps=e.viewProps,this.view=new fn(t,{viewProps:this.viewProps}),this.gc_=new xn(t,{baseStep:e.axis.baseStep,value:this.value,viewProps:this.viewProps}),this.view.graphElement.appendChild(this.gc_.view.element);const n=Object.assign(Object.assign({},e.axis),{constraint:new dt({max:1,min:0})}),r=Object.assign(Object.assign({},e.axis),{constraint:void 0});this.tc_=new ze(t,{assembly:on,axes:[n,r,n,r],parser:Jt,value:this.value,viewProps:this.viewProps}),this.view.textElement.appendChild(this.tc_.view.element)}get allFocusableElements(){return[this.gc_.view.element,...this.tc_.view.textViews.map((t=>t.inputElement))]}refresh(){this.gc_.refresh()}}class Tn{constructor(t,e){this.onButtonBlur_=this.onButtonBlur_.bind(this),this.onButtonClick_=this.onButtonClick_.bind(this),this.onPopupChildBlur_=this.onPopupChildBlur_.bind(this),this.onPopupChildKeydown_=this.onPopupChildKeydown_.bind(this),this.value=e.value,this.viewProps=e.viewProps,this.foldable_=tt(e.expanded),this.view=new cn(t,{foldable:this.foldable_,pickerLayout:e.pickerLayout,viewProps:this.viewProps}),this.view.buttonElement.addEventListener("blur",this.onButtonBlur_),this.view.buttonElement.addEventListener("click",this.onButtonClick_),this.tc_=new yt(t,{parser:ln,props:x.fromObject({formatter:an}),value:this.value,viewProps:this.viewProps}),this.view.textElement.appendChild(this.tc_.view.element),this.popC_="popup"===e.pickerLayout?new mt(t,{viewProps:this.viewProps}):null;const n=new Sn(t,{axis:e.axis,value:this.value,viewProps:this.viewProps});n.allFocusableElements.forEach((t=>{t.addEventListener("blur",this.onPopupChildBlur_),t.addEventListener("keydown",this.onPopupChildKeydown_)})),this.pickerC_=n,this.popC_?(this.view.element.appendChild(this.popC_.view.element),this.popC_.view.element.appendChild(this.pickerC_.view.element),h(this.popC_.shows,(t=>{t&&n.refresh()})),se({primary:this.foldable_.value("expanded"),secondary:this.popC_.shows,forward:t=>t.rawValue,backward:(t,e)=>e.rawValue})):this.view.pickerElement&&(this.view.pickerElement.appendChild(this.pickerC_.view.element),rt(this.foldable_,this.view.pickerElement))}onButtonBlur_(t){if(!this.popC_)return;const e=i(t.relatedTarget);e&&this.popC_.view.element.contains(e)||(this.popC_.shows.rawValue=!1)}onButtonClick_(){this.foldable_.set("expanded",!this.foldable_.get("expanded")),this.foldable_.get("expanded")&&this.pickerC_.allFocusableElements[0].focus()}onPopupChildBlur_(t){if(!this.popC_)return;const e=this.popC_.view.element,n=W(t);n&&e.contains(n)||n&&n===this.view.buttonElement&&!V(e.ownerDocument)||(this.popC_.shows.rawValue=!1)}onPopupChildKeydown_(t){this.popC_&&"Escape"===t.key&&(this.popC_.shows.rawValue=!1)}}function Cn(){return new De({assembly:on,components:[0,1,2,3].map((t=>t%2==0?new dt({min:0,max:1}):void 0))})}const In={id:"cubic-bezier",type:"blade",css:'.tp-cbzgv,.tp-radv_b,.tp-rslv_k,.tp-cbzv_b{-webkit-appearance:none;-moz-appearance:none;appearance:none;background-color:rgba(0,0,0,0);border-width:0;font-family:inherit;font-size:inherit;font-weight:inherit;margin:0;outline:none;padding:0}.tp-radv_b,.tp-rslv_k,.tp-cbzv_b{background-color:var(--btn-bg);border-radius:var(--elm-br);color:var(--btn-fg);cursor:pointer;display:block;font-weight:bold;height:var(--bld-us);line-height:var(--bld-us);overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.tp-radv_b:hover,.tp-rslv_k:hover,.tp-cbzv_b:hover{background-color:var(--btn-bg-h)}.tp-radv_b:focus,.tp-rslv_k:focus,.tp-cbzv_b:focus{background-color:var(--btn-bg-f)}.tp-radv_b:active,.tp-rslv_k:active,.tp-cbzv_b:active{background-color:var(--btn-bg-a)}.tp-radv_b:disabled,.tp-rslv_k:disabled,.tp-cbzv_b:disabled{opacity:.5}.tp-cbzgv{background-color:var(--in-bg);border-radius:var(--elm-br);box-sizing:border-box;color:var(--in-fg);font-family:inherit;height:var(--bld-us);line-height:var(--bld-us);min-width:0;width:100%}.tp-cbzgv:hover{background-color:var(--in-bg-h)}.tp-cbzgv:focus{background-color:var(--in-bg-f)}.tp-cbzgv:active{background-color:var(--in-bg-a)}.tp-cbzgv:disabled{opacity:.5}.tp-btngridv{border-radius:var(--elm-br);display:grid;overflow:hidden;gap:2px}.tp-btngridv.tp-v-disabled{opacity:.5}.tp-btngridv .tp-btnv_b:disabled{opacity:1}.tp-btngridv .tp-btnv_b:disabled .tp-btnv_t{opacity:.5}.tp-btngridv .tp-btnv_b{border-radius:0}.tp-cbzv{position:relative}.tp-cbzv_h{display:flex}.tp-cbzv_b{margin-right:4px;position:relative;width:var(--bld-us)}.tp-cbzv_b svg{display:block;height:16px;left:50%;margin-left:-8px;margin-top:-8px;position:absolute;top:50%;width:16px}.tp-cbzv_b svg path{stroke:var(--bs-bg);stroke-width:2}.tp-cbzv_t{flex:1}.tp-cbzv_p{height:0;margin-top:0;opacity:0;overflow:hidden;transition:height .2s ease-in-out,opacity .2s linear,margin .2s ease-in-out}.tp-cbzv.tp-cbzv-expanded .tp-cbzv_p{margin-top:var(--bld-s);opacity:1}.tp-cbzv.tp-cbzv-cpl .tp-cbzv_p{overflow:visible}.tp-cbzv .tp-popv{left:calc(-1*var(--cnt-h-p));position:absolute;right:calc(-1*var(--cnt-h-p));top:var(--bld-us)}.tp-cbzpv_t{margin-top:var(--bld-s)}.tp-cbzgv{height:auto;overflow:hidden;position:relative}.tp-cbzgv.tp-v-disabled{opacity:.5}.tp-cbzgv_p{left:16px;position:absolute;right:16px;top:0}.tp-cbzgv_g{cursor:pointer;display:block;height:calc(var(--bld-us)*5);width:100%}.tp-cbzgv_u{opacity:.1;stroke:var(--in-fg);stroke-dasharray:1}.tp-cbzgv_l{fill:rgba(0,0,0,0);stroke:var(--in-fg)}.tp-cbzgv_v{opacity:.5;stroke:var(--in-fg);stroke-dasharray:1}.tp-cbzgv_h{border:var(--in-fg) solid 1px;border-radius:50%;box-sizing:border-box;height:4px;margin-left:-2px;margin-top:-2px;pointer-events:none;position:absolute;width:4px}.tp-cbzgv:focus .tp-cbzgv_h-sel{background-color:var(--in-fg);border-width:0}.tp-cbzprvv{cursor:pointer;height:4px;padding:4px 0;position:relative}.tp-cbzprvv_g{display:block;height:100%;overflow:visible;width:100%}.tp-cbzprvv_t{opacity:.5;stroke:var(--mo-fg)}.tp-cbzprvv_m{background-color:var(--mo-fg);border-radius:50%;height:4px;margin-left:-2px;margin-top:-2px;opacity:0;position:absolute;top:50%;transition:opacity .2s ease-out;width:4px}.tp-cbzprvv_m.tp-cbzprvv_m-a{opacity:1}.tp-fpsv{position:relative}.tp-fpsv_l{bottom:4px;color:var(--mo-fg);line-height:1;right:4px;pointer-events:none;position:absolute}.tp-fpsv_u{margin-left:.2em;opacity:.7}.tp-rslv{cursor:pointer;padding-left:8px;padding-right:8px}.tp-rslv.tp-v-disabled{opacity:.5}.tp-rslv_t{height:calc(var(--bld-us));position:relative}.tp-rslv_t::before{background-color:var(--in-bg);border-radius:1px;content:"";height:2px;margin-top:-1px;position:absolute;top:50%;left:-4px;right:-4px}.tp-rslv_b{bottom:0;top:0;position:absolute}.tp-rslv_b::before{background-color:var(--in-fg);content:"";height:2px;margin-top:-1px;position:absolute;top:50%;left:0;right:0}.tp-rslv_k{height:calc(var(--bld-us) - 8px);margin-top:calc((var(--bld-us) - 8px)/-2);position:absolute;top:50%;width:8px}.tp-rslv_k.tp-rslv_k-min{margin-left:-8px}.tp-rslv_k.tp-rslv_k-max{margin-left:0}.tp-rslv.tp-rslv-zero .tp-rslv_k.tp-rslv_k-min{border-bottom-right-radius:0;border-top-right-radius:0}.tp-rslv.tp-rslv-zero .tp-rslv_k.tp-rslv_k-max{border-bottom-left-radius:0;border-top-left-radius:0}.tp-rsltxtv{display:flex}.tp-rsltxtv_s{flex:1}.tp-rsltxtv_t{flex:1;margin-left:4px}.tp-radv_l{display:block;position:relative}.tp-radv_i{left:0;opacity:0;position:absolute;top:0}.tp-radv_b{opacity:.5}.tp-radv_i:hover+.tp-radv_b{background-color:var(--btn-bg-h)}.tp-radv_i:focus+.tp-radv_b{background-color:var(--btn-bg-f)}.tp-radv_i:active+.tp-radv_b{background-color:var(--btn-bg-a)}.tp-radv_i:checked+.tp-radv_b{opacity:1}.tp-radv_t{bottom:0;color:inherit;left:0;overflow:hidden;position:absolute;right:0;text-align:center;text-overflow:ellipsis;top:0}.tp-radv_i:disabled+.tp-radv_b>.tp-radv_t{opacity:.5}.tp-radgridv{border-radius:var(--elm-br);display:grid;overflow:hidden;gap:2px}.tp-radgridv.tp-v-disabled{opacity:.5}.tp-radgridv .tp-radv_b{border-radius:0}',accept(t){const e=P,n=R(t,{value:e.required.array(e.required.number),view:e.required.constant("cubicbezier"),expanded:e.optional.boolean,label:e.optional.string,picker:e.optional.custom((t=>"inline"===t||"popup"===t?t:void 0))});return n?{params:n}:null},controller(t){var e,n;const r=E(new rn(...t.params.value),{constraint:Cn(),equals:rn.equals}),i=new Tn(t.document,{axis:{baseStep:.1,textProps:x.fromObject({draggingScale:.01,formatter:ee(2)})},expanded:null!==(e=t.params.expanded)&&void 0!==e&&e,pickerLayout:null!==(n=t.params.picker)&&void 0!==n?n:"popup",value:r,viewProps:t.viewProps});return new ot(t.document,{blade:t.blade,props:x.fromObject({label:t.params.label}),valueController:i})},api:t=>t.controller instanceof ot&&t.controller.valueController instanceof Tn?new $e(t.controller):null};class kn extends e{begin(){this.controller_.valueController.begin()}end(){this.controller_.valueController.end()}}const Pn=20;class Rn{constructor(){this.start_=null,this.duration_=0,this.fps_=null,this.frameCount_=0,this.timestamps_=[]}get duration(){return this.duration_}get fps(){return this.fps_}begin(t){this.start_=t.getTime()}calculateFps_(t){if(0===this.timestamps_.length)return null;const e=this.timestamps_[0];return 1e3*(this.frameCount_-e.frameCount)/(t-e.time)}compactTimestamps_(){if(this.timestamps_.length<=Pn)return;const t=this.timestamps_.length-Pn;this.timestamps_.splice(0,t);const e=this.timestamps_[0].frameCount;this.timestamps_.forEach((t=>{t.frameCount-=e})),this.frameCount_-=e}end(t){if(null===this.start_)return;const e=t.getTime();this.duration_=e-this.start_,this.start_=null,this.fps_=this.calculateFps_(e),this.timestamps_.push({frameCount:this.frameCount_,time:e}),++this.frameCount_,this.compactTimestamps_()}}const On=c("fps");class Mn{constructor(t,e){this.element=t.createElement("div"),this.element.classList.add(On()),e.viewProps.bindClassModifiers(this.element),this.graphElement=t.createElement("div"),this.graphElement.classList.add(On("g")),this.element.appendChild(this.graphElement);const n=t.createElement("div");n.classList.add(On("l")),this.element.appendChild(n);const r=t.createElement("span");r.classList.add(On("v")),r.textContent="--",n.appendChild(r),this.valueElement=r;const i=t.createElement("span");i.classList.add(On("u")),i.textContent="FPS",n.appendChild(i)}}class Ln{constructor(t,e){this.stopwatch_=new Rn,this.onTick_=this.onTick_.bind(this),this.ticker_=e.ticker,this.ticker_.emitter.on("tick",this.onTick_),this.value_=e.value,this.viewProps=e.viewProps,this.view=new Mn(t,{viewProps:this.viewProps}),this.graphC_=new Ve(t,{formatter:ee(0),lineCount:e.lineCount,props:x.fromObject({maxValue:e.maxValue,minValue:e.minValue}),value:this.value_,viewProps:this.viewProps}),this.view.graphElement.appendChild(this.graphC_.view.element),this.viewProps.handleDispose((()=>{this.graphC_.viewProps.set("disposed",!0),this.ticker_.dispose()}))}begin(){this.stopwatch_.begin(new Date)}end(){this.stopwatch_.end(new Date)}onTick_(){const t=this.stopwatch_.fps;if(null!==t){const e=this.value_.rawValue;this.value_.rawValue=ae(e,t),this.view.valueElement.textContent=t.toFixed(0)}}}function Dn(t,e){return 0===e?new at:new st(t,null!=e?e:qe.monitor.defaultInterval)}const Nn={id:"fpsgraph",type:"blade",accept(t){const e=P,n=R(t,{view:e.required.constant("fpsgraph"),interval:e.optional.number,label:e.optional.string,lineCount:e.optional.number,max:e.optional.number,min:e.optional.number});return n?{params:n}:null},controller(t){var e,n,r,i;const o=null!==(e=t.params.interval)&&void 0!==e?e:500;return new $(t.document,{blade:t.blade,props:x.fromObject({label:t.params.label}),valueController:new Ln(t.document,{lineCount:null!==(n=t.params.lineCount)&&void 0!==n?n:2,maxValue:null!==(r=t.params.max)&&void 0!==r?r:90,minValue:null!==(i=t.params.min)&&void 0!==i?i:0,ticker:Dn(t.document,o),value:ie(80),viewProps:t.viewProps})})},api:t=>t.controller instanceof $&&t.controller.valueController instanceof Ln?new kn(t.controller):null};class Bn{constructor(t,e){this.min=t,this.max=e}static isObject(t){if("object"!=typeof t||null===t)return!1;const e=t.min,n=t.max;return"number"==typeof e&&"number"==typeof n}static equals(t,e){return t.min===e.min&&t.max===e.max}get length(){return this.max-this.min}toObject(){return{min:this.min,max:this.max}}}const jn={fromComponents:t=>new Bn(t[0],t[1]),toComponents:t=>[t.min,t.max]};class zn{constructor(t){this.edge=t}constrain(t){var e,n,r,i,o,a,s,l;if(t.min<=t.max)return new Bn(null!==(n=null===(e=this.edge)||void 0===e?void 0:e.constrain(t.min))&&void 0!==n?n:t.min,null!==(i=null===(r=this.edge)||void 0===r?void 0:r.constrain(t.max))&&void 0!==i?i:t.max);const u=(t.min+t.max)/2;return new Bn(null!==(a=null===(o=this.edge)||void 0===o?void 0:o.constrain(u))&&void 0!==a?a:u,null!==(l=null===(s=this.edge)||void 0===s?void 0:s.constrain(u))&&void 0!==l?l:u)}}const Fn=c("rsltxt");class Un{constructor(t,e){this.sliderView_=e.sliderView,this.textView_=e.textView,this.element=t.createElement("div"),this.element.classList.add(Fn());const n=t.createElement("div");n.classList.add(Fn("s")),n.appendChild(this.sliderView_.element),this.element.appendChild(n);const r=t.createElement("div");r.classList.add(Fn("t")),r.appendChild(this.textView_.element),this.element.appendChild(r)}}const qn=c("rsl");class Gn{constructor(t,e){this.onSliderPropsChange_=this.onSliderPropsChange_.bind(this),this.onValueChange_=this.onValueChange_.bind(this),this.sliderProps_=e.sliderProps,this.sliderProps_.emitter.on("change",this.onSliderPropsChange_),this.element=t.createElement("div"),this.element.classList.add(qn()),e.viewProps.bindClassModifiers(this.element),this.value_=e.value,this.value_.emitter.on("change",this.onValueChange_);const n=t.createElement("div");n.classList.add(qn("t")),this.element.appendChild(n),this.trackElement=n;const r=t.createElement("div");r.classList.add(qn("b")),n.appendChild(r),this.barElement=r;const i=["min","max"].map((e=>{const r=t.createElement("div");return r.classList.add(qn("k"),qn("k",e)),n.appendChild(r),r}));this.knobElements=[i[0],i[1]],this.update_()}valueToX_(t){return 100*ve(me(t,this.sliderProps_.get("minValue"),this.sliderProps_.get("maxValue"),0,1),0,1)}update_(){const t=this.value_.rawValue;0===t.length?this.element.classList.add(qn(void 0,"zero")):this.element.classList.remove(qn(void 0,"zero"));const e=[this.valueToX_(t.min),this.valueToX_(t.max)];this.barElement.style.left=`${e[0]}%`,this.barElement.style.right=100-e[1]+"%",this.knobElements.forEach(((t,n)=>{t.style.left=`${e[n]}%`}))}onSliderPropsChange_(){this.update_()}onValueChange_(){this.update_()}}class Hn{constructor(t,e){this.grabbing_=null,this.grabOffset_=0,this.onPointerDown_=this.onPointerDown_.bind(this),this.onPointerMove_=this.onPointerMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.sliderProps=e.sliderProps,this.viewProps=e.viewProps,this.value=e.value,this.view=new Gn(t,{sliderProps:this.sliderProps,value:this.value,viewProps:e.viewProps});const n=new pe(this.view.trackElement);n.emitter.on("down",this.onPointerDown_),n.emitter.on("move",this.onPointerMove_),n.emitter.on("up",this.onPointerUp_)}ofs_(){return"min"===this.grabbing_?this.view.knobElements[0].getBoundingClientRect().width/2:"max"===this.grabbing_?-this.view.knobElements[1].getBoundingClientRect().width/2:0}valueFromData_(t){return t.point?me((t.point.x+this.ofs_())/t.bounds.width,0,1,this.sliderProps.get("minValue"),this.sliderProps.get("maxValue")):null}onPointerDown_(t){if(!t.data.point)return;const e=t.data.point.x/t.data.bounds.width,n=this.value.rawValue,r=this.sliderProps.get("minValue"),i=this.sliderProps.get("maxValue"),o=me(n.min,r,i,0,1),a=me(n.max,r,i,0,1);Math.abs(a-e)<=.025?this.grabbing_="max":Math.abs(o-e)<=.025?this.grabbing_="min":e>=o&&e<=a?(this.grabbing_="length",this.grabOffset_=me(e-o,0,1,0,i-r)):e<o?(this.grabbing_="min",this.onPointerMove_(t)):e>a&&(this.grabbing_="max",this.onPointerMove_(t))}applyPointToValue_(t,e){const n=this.valueFromData_(t);if(null===n)return;const r=this.sliderProps.get("minValue"),i=this.sliderProps.get("maxValue");if("min"===this.grabbing_)this.value.setRawValue(new Bn(n,this.value.rawValue.max),e);else if("max"===this.grabbing_)this.value.setRawValue(new Bn(this.value.rawValue.min,n),e);else if("length"===this.grabbing_){const t=this.value.rawValue.length;let o=n-this.grabOffset_,a=o+t;o<r?(o=r,a=r+t):a>i&&(o=i-t,a=i),this.value.setRawValue(new Bn(o,a),e)}}onPointerMove_(t){this.applyPointToValue_(t.data,{forceEmit:!1,last:!1})}onPointerUp_(t){this.applyPointToValue_(t.data,{forceEmit:!0,last:!0}),this.grabbing_=null}}class Vn{constructor(t,e){this.value=e.value,this.viewProps=e.viewProps,this.sc_=new Hn(t,e);const n={baseStep:e.baseStep,constraint:e.constraint,textProps:x.fromObject({draggingScale:e.draggingScale,formatter:e.formatter})};this.tc_=new ze(t,{assembly:jn,axes:[n,n],parser:e.parser,value:this.value,viewProps:e.viewProps}),this.view=new Un(t,{sliderView:this.sc_.view,textView:this.tc_.view})}get textController(){return this.tc_}}function Qn(t){return Bn.isObject(t)?new Bn(t.min,t.max):new Bn(0,0)}function Wn(t,e){t.writeProperty("max",e.max),t.writeProperty("min",e.min)}function Yn(t){const e=[],n=Ue(t);n&&e.push(n);const r=Fe(t);return r&&e.push(r),new zn(new lt(e))}const Kn={id:"input-interval",type:"input",css:'.tp-cbzgv,.tp-radv_b,.tp-rslv_k,.tp-cbzv_b{-webkit-appearance:none;-moz-appearance:none;appearance:none;background-color:rgba(0,0,0,0);border-width:0;font-family:inherit;font-size:inherit;font-weight:inherit;margin:0;outline:none;padding:0}.tp-radv_b,.tp-rslv_k,.tp-cbzv_b{background-color:var(--btn-bg);border-radius:var(--elm-br);color:var(--btn-fg);cursor:pointer;display:block;font-weight:bold;height:var(--bld-us);line-height:var(--bld-us);overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.tp-radv_b:hover,.tp-rslv_k:hover,.tp-cbzv_b:hover{background-color:var(--btn-bg-h)}.tp-radv_b:focus,.tp-rslv_k:focus,.tp-cbzv_b:focus{background-color:var(--btn-bg-f)}.tp-radv_b:active,.tp-rslv_k:active,.tp-cbzv_b:active{background-color:var(--btn-bg-a)}.tp-radv_b:disabled,.tp-rslv_k:disabled,.tp-cbzv_b:disabled{opacity:.5}.tp-cbzgv{background-color:var(--in-bg);border-radius:var(--elm-br);box-sizing:border-box;color:var(--in-fg);font-family:inherit;height:var(--bld-us);line-height:var(--bld-us);min-width:0;width:100%}.tp-cbzgv:hover{background-color:var(--in-bg-h)}.tp-cbzgv:focus{background-color:var(--in-bg-f)}.tp-cbzgv:active{background-color:var(--in-bg-a)}.tp-cbzgv:disabled{opacity:.5}.tp-btngridv{border-radius:var(--elm-br);display:grid;overflow:hidden;gap:2px}.tp-btngridv.tp-v-disabled{opacity:.5}.tp-btngridv .tp-btnv_b:disabled{opacity:1}.tp-btngridv .tp-btnv_b:disabled .tp-btnv_t{opacity:.5}.tp-btngridv .tp-btnv_b{border-radius:0}.tp-cbzv{position:relative}.tp-cbzv_h{display:flex}.tp-cbzv_b{margin-right:4px;position:relative;width:var(--bld-us)}.tp-cbzv_b svg{display:block;height:16px;left:50%;margin-left:-8px;margin-top:-8px;position:absolute;top:50%;width:16px}.tp-cbzv_b svg path{stroke:var(--bs-bg);stroke-width:2}.tp-cbzv_t{flex:1}.tp-cbzv_p{height:0;margin-top:0;opacity:0;overflow:hidden;transition:height .2s ease-in-out,opacity .2s linear,margin .2s ease-in-out}.tp-cbzv.tp-cbzv-expanded .tp-cbzv_p{margin-top:var(--bld-s);opacity:1}.tp-cbzv.tp-cbzv-cpl .tp-cbzv_p{overflow:visible}.tp-cbzv .tp-popv{left:calc(-1*var(--cnt-h-p));position:absolute;right:calc(-1*var(--cnt-h-p));top:var(--bld-us)}.tp-cbzpv_t{margin-top:var(--bld-s)}.tp-cbzgv{height:auto;overflow:hidden;position:relative}.tp-cbzgv.tp-v-disabled{opacity:.5}.tp-cbzgv_p{left:16px;position:absolute;right:16px;top:0}.tp-cbzgv_g{cursor:pointer;display:block;height:calc(var(--bld-us)*5);width:100%}.tp-cbzgv_u{opacity:.1;stroke:var(--in-fg);stroke-dasharray:1}.tp-cbzgv_l{fill:rgba(0,0,0,0);stroke:var(--in-fg)}.tp-cbzgv_v{opacity:.5;stroke:var(--in-fg);stroke-dasharray:1}.tp-cbzgv_h{border:var(--in-fg) solid 1px;border-radius:50%;box-sizing:border-box;height:4px;margin-left:-2px;margin-top:-2px;pointer-events:none;position:absolute;width:4px}.tp-cbzgv:focus .tp-cbzgv_h-sel{background-color:var(--in-fg);border-width:0}.tp-cbzprvv{cursor:pointer;height:4px;padding:4px 0;position:relative}.tp-cbzprvv_g{display:block;height:100%;overflow:visible;width:100%}.tp-cbzprvv_t{opacity:.5;stroke:var(--mo-fg)}.tp-cbzprvv_m{background-color:var(--mo-fg);border-radius:50%;height:4px;margin-left:-2px;margin-top:-2px;opacity:0;position:absolute;top:50%;transition:opacity .2s ease-out;width:4px}.tp-cbzprvv_m.tp-cbzprvv_m-a{opacity:1}.tp-fpsv{position:relative}.tp-fpsv_l{bottom:4px;color:var(--mo-fg);line-height:1;right:4px;pointer-events:none;position:absolute}.tp-fpsv_u{margin-left:.2em;opacity:.7}.tp-rslv{cursor:pointer;padding-left:8px;padding-right:8px}.tp-rslv.tp-v-disabled{opacity:.5}.tp-rslv_t{height:calc(var(--bld-us));position:relative}.tp-rslv_t::before{background-color:var(--in-bg);border-radius:1px;content:"";height:2px;margin-top:-1px;position:absolute;top:50%;left:-4px;right:-4px}.tp-rslv_b{bottom:0;top:0;position:absolute}.tp-rslv_b::before{background-color:var(--in-fg);content:"";height:2px;margin-top:-1px;position:absolute;top:50%;left:0;right:0}.tp-rslv_k{height:calc(var(--bld-us) - 8px);margin-top:calc((var(--bld-us) - 8px)/-2);position:absolute;top:50%;width:8px}.tp-rslv_k.tp-rslv_k-min{margin-left:-8px}.tp-rslv_k.tp-rslv_k-max{margin-left:0}.tp-rslv.tp-rslv-zero .tp-rslv_k.tp-rslv_k-min{border-bottom-right-radius:0;border-top-right-radius:0}.tp-rslv.tp-rslv-zero .tp-rslv_k.tp-rslv_k-max{border-bottom-left-radius:0;border-top-left-radius:0}.tp-rsltxtv{display:flex}.tp-rsltxtv_s{flex:1}.tp-rsltxtv_t{flex:1;margin-left:4px}.tp-radv_l{display:block;position:relative}.tp-radv_i{left:0;opacity:0;position:absolute;top:0}.tp-radv_b{opacity:.5}.tp-radv_i:hover+.tp-radv_b{background-color:var(--btn-bg-h)}.tp-radv_i:focus+.tp-radv_b{background-color:var(--btn-bg-f)}.tp-radv_i:active+.tp-radv_b{background-color:var(--btn-bg-a)}.tp-radv_i:checked+.tp-radv_b{opacity:1}.tp-radv_t{bottom:0;color:inherit;left:0;overflow:hidden;position:absolute;right:0;text-align:center;text-overflow:ellipsis;top:0}.tp-radv_i:disabled+.tp-radv_b>.tp-radv_t{opacity:.5}.tp-radgridv{border-radius:var(--elm-br);display:grid;overflow:hidden;gap:2px}.tp-radgridv.tp-v-disabled{opacity:.5}.tp-radgridv .tp-radv_b{border-radius:0}',accept:(t,e)=>{if(!Bn.isObject(t))return null;const n=P,r=R(e,{format:n.optional.function,max:n.optional.number,min:n.optional.number,step:n.optional.number});return r?{initialValue:new Bn(t.min,t.max),params:r}:null},binding:{reader:t=>Qn,constraint:t=>Yn(t.params),equals:Bn.equals,writer:t=>Wn},controller(t){var e;const n=t.value,r=t.constraint;if(!(r instanceof zn))throw s.shouldNeverHappen();const i=(n.rawValue.min+n.rawValue.max)/2,o=null!==(e=t.params.format)&&void 0!==e?e:ee(Ee(r.edge,i)),a=r.edge&&ut(r.edge,ct);if(a)return new Vn(t.document,{baseStep:xe(r.edge),constraint:r.edge,draggingScale:Se(r.edge,i),formatter:o,parser:Jt,sliderProps:new x({maxValue:a.values.value("max"),minValue:a.values.value("min")}),value:n,viewProps:t.viewProps});const l={baseStep:xe(r.edge),constraint:r.edge,textProps:x.fromObject({draggingScale:i,formatter:o})};return new ze(t.document,{assembly:jn,axes:[l,l],parser:Jt,value:n,viewProps:t.viewProps})}};class Xn{constructor(t){this.controller_=t}get disabled(){return this.controller_.viewProps.get("disabled")}set disabled(t){this.controller_.viewProps.set("disabled",t)}get title(){var t;return null!==(t=this.controller_.props.get("title"))&&void 0!==t?t:""}set title(t){this.controller_.props.set("title",t)}}class $n extends r{constructor(t,e,n,r,i){super(t,r,i),this.cell=e,this.index=n}}class Zn extends e{constructor(t){super(t),this.cellToApiMap_=new Map,this.controller_.valueController.cellControllers.forEach((t=>{const e=new Xn(t);this.cellToApiMap_.set(t,e)}))}get value(){return this.controller_.value}cell(t,e){const n=this.controller_.valueController,r=n.cellControllers[e*n.size[0]+t];return this.cellToApiMap_.get(r)}on(t,e){const n=e.bind(this);this.controller_.value.emitter.on(t,(t=>{const e=this.controller_.valueController,r=e.findCellByValue(t.rawValue);if(!r)return;const i=this.cellToApiMap_.get(r);if(!i)return;const o=e.cellControllers.indexOf(r);n(new $n(this,i,[o%e.size[0],Math.floor(o/e.size[0])],t.rawValue,void 0))}))}}const Jn=c("rad");class tr{constructor(t,e){this.element=t.createElement("div"),this.element.classList.add(Jn()),e.viewProps.bindClassModifiers(this.element);const n=t.createElement("label");n.classList.add(Jn("l")),this.element.appendChild(n);const r=t.createElement("input");r.classList.add(Jn("i")),r.name=e.name,r.type="radio",e.viewProps.bindDisabled(r),n.appendChild(r),this.inputElement=r;const i=t.createElement("div");i.classList.add(Jn("b")),n.appendChild(i);const o=t.createElement("div");o.classList.add(Jn("t")),i.appendChild(o),p(e.props,"title",(t=>{o.textContent=t}))}}class er{constructor(t,e){this.props=e.props,this.viewProps=e.viewProps,this.view=new tr(t,{name:e.name,props:this.props,viewProps:this.viewProps})}}class nr{constructor(t,e){this.cellCs_=[],this.cellValues_=[],this.onCellInputChange_=this.onCellInputChange_.bind(this),this.size=e.size;const[n,r]=this.size;for(let i=0;i<r;i++)for(let r=0;r<n;r++){const n=new er(t,{name:e.groupName,props:x.fromObject(Object.assign({},e.cellConfig(r,i))),viewProps:B.create()});this.cellCs_.push(n),this.cellValues_.push(e.cellConfig(r,i).value)}this.value=e.value,h(this.value,(t=>{const e=this.findCellByValue(t);e&&(e.view.inputElement.checked=!0)})),this.viewProps=B.create(),this.view=new it(t,{viewProps:this.viewProps,viewName:"radgrid"}),this.view.element.style.gridTemplateColumns=`repeat(${n}, 1fr)`,this.cellCs_.forEach((t=>{t.view.inputElement.addEventListener("change",this.onCellInputChange_),this.view.element.appendChild(t.view.element)}))}get cellControllers(){return this.cellCs_}findCellByValue(t){const e=this.cellValues_.findIndex((e=>e===t));return e<0?null:this.cellCs_[e]}onCellInputChange_(t){const e=t.currentTarget,n=this.cellCs_.findIndex((t=>t.view.inputElement===e));n<0||(this.value.rawValue=this.cellValues_[n])}}const rr={id:"radiogrid",type:"blade",accept(t){const e=P,n=R(t,{cells:e.required.function,groupName:e.required.string,size:e.required.array(e.required.number),value:e.required.raw,view:e.required.constant("radiogrid"),label:e.optional.string});return n?{params:n}:null},controller:t=>new ot(t.document,{blade:t.blade,props:x.fromObject({label:t.params.label}),valueController:new nr(t.document,{groupName:t.params.groupName,cellConfig:t.params.cells,size:t.params.size,value:E(t.params.value)})}),api:t=>t.controller instanceof ot&&t.controller.valueController instanceof nr?new Zn(t.controller):null};function ir(t){return{id:"input-radiogrid",type:"input",accept(e,n){if(!t.isType(e))return null;const r=P,i=R(n,{cells:r.required.function,groupName:r.required.string,size:r.required.array(r.required.number),view:r.required.constant("radiogrid")});return i?{initialValue:e,params:i}:null},binding:t.binding,controller:t=>new nr(t.document,{cellConfig:t.params.cells,groupName:t.params.groupName,size:t.params.size,value:t.value})}}const or=ir({isType:t=>"number"==typeof t,binding:{reader:t=>te,writer:t=>we}}),ar=ir({isType:t=>"string"==typeof t,binding:{reader:t=>ne,writer:t=>we}}),sr=ir({isType:t=>"boolean"==typeof t,binding:{reader:t=>bt,writer:t=>we}}),lr=[Xe,In,Nn,Kn,rr,sr,or,ar];t.ButtonCellApi=Qe,t.ButtonGridApi=Ye,t.ButtonGridController=Ke,t.CubicBezier=rn,t.CubicBezierApi=$e,t.CubicBezierAssembly=on,t.CubicBezierController=Tn,t.CubicBezierGraphController=xn,t.CubicBezierGraphView=gn,t.CubicBezierPickerController=Sn,t.CubicBezierPickerView=fn,t.CubicBezierPreviewView=wn,t.CubicBezierView=cn,t.FpsGraphBladeApi=kn,t.FpsGraphController=Ln,t.FpsView=Mn,t.Fpswatch=Rn,t.Interval=Bn,t.IntervalAssembly=jn,t.IntervalConstraint=zn,t.RadioCellApi=Xn,t.RadioController=er,t.RadioGridApi=Zn,t.RadioGridController=nr,t.RadioView=tr,t.RangeSliderController=Hn,t.RangeSliderTextController=Vn,t.RangeSliderTextView=Un,t.RangeSliderView=Gn,t.TpRadioGridChangeEvent=$n,t.plugins=lr,Object.defineProperty(t,"__esModule",{value:!0})}(e)},9486:t=>{var e=Object.prototype.toString;t.exports=function(t){return t.BYTES_PER_ELEMENT&&"[object ArrayBuffer]"===e.call(t.buffer)||Array.isArray(t)}},6255:(t,e,n)=>{"use strict";var r={};function i(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function o(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}n.r(r),n.d(r,{Account:()=>CC,AccountCreation:()=>uk,AddToCart:()=>bq,Advantages:()=>Int,Audio:()=>qQ,AudioPlayerTl:()=>gD,Banner:()=>_R,BookCard:()=>XQ,CarouselGallery:()=>NO,Cart:()=>OR,CartProduct:()=>LQ,Checkout:()=>aI,Choice:()=>WM,Contact:()=>NL,ContactPanel:()=>ZR,CoursesGallery:()=>jM,CoursesListing:()=>rQ,Cursor:()=>xL,DropdownButton:()=>IO,EditCard:()=>xG,EditProfile:()=>NG,EventInPerson:()=>$I,Events:()=>eG,EventsListing:()=>iW,FeaturedSlideshow:()=>sO,FilmsListing:()=>mV,FilterBarListing:()=>gO,GalleryVideo:()=>sD,GiftMembershipRegister:()=>Uk,GlobalCursor:()=>iq,Header:()=>fR,Home:()=>nm,Homepage:()=>DC,HorizontalScrollFeatured:()=>bP,InternalAboutDavid:()=>GD,InternalCenteredText:()=>cj,InternalCompanionSubscription:()=>BF,InternalContactCta:()=>FU,InternalCountdown:()=>Yz,InternalCustomSelect:()=>lz,InternalEventCta:()=>yF,InternalFaq:()=>bj,InternalFaqItem:()=>Cj,InternalHero:()=>DD,InternalImagesSlideshow:()=>Jj,InternalLargeImage:()=>ej,InternalNewsletter:()=>vN,InternalPoemsSlideshow:()=>oN,InternalProductLike:()=>IF,InternalProductsDescriptionSlideshow:()=>Mz,InternalProductsListing:()=>xz,InternalProductsSlideshow:()=>GN,InternalQuote:()=>QB,InternalSingleProductBookHero:()=>rF,InternalTestimonialsSlideshow:()=>BB,InternalTextAndCards:()=>QF,InternalThreeSundaysComments:()=>xU,InternalThreeSundaysCommentsItem:()=>OU,InternalThreeSundaysSessions:()=>cU,Likes:()=>jq,ListingDropdown:()=>LH,ListingFiltersMenu:()=>WH,ListingSlideshow:()=>bH,LoadMoreCards:()=>sL,LoaderExperience:()=>bnt,Login:()=>rC,Maps:()=>BT,Mapsv2:()=>YT,Menu:()=>rR,MenuMobile:()=>UR,MobileNavFilters:()=>VO,MobileResize:()=>YP,Notifications:()=>iH,OpenTitleSubtitle:()=>GC,Orders:()=>Iq,PageLike:()=>CD,PasswordInput:()=>HL,PoemsEssaysListing:()=>EQ,ProductCard:()=>eM,Register:()=>hC,ScrollInside:()=>FP,Search:()=>Rk,SearchInput:()=>mL,SeeOnMap:()=>JL,SingleCourse:()=>Qq,StickyBar:()=>dm,Subscription:()=>YG,TalksListing:()=>BV,ThankYou:()=>bk,ThreeSundaysContent:()=>GI,VideoPlayer:()=>IM,VirtualEvent:()=>_I,WalkingTour:()=>DI,WatercolorExperience:()=>r9});var l,u,c,d,f,h,p,m,g,v,y,b={autoSleep:120,force3D:"auto",nullTargetWarn:1,units:{lineHeight:""}},_={duration:.5,overwrite:!1,delay:0},w=1e8,A=1e-8,E=2*Math.PI,x=E/4,S=0,T=Math.sqrt,C=Math.cos,I=Math.sin,k=function(t){return"string"==typeof t},P=function(t){return"function"==typeof t},R=function(t){return"number"==typeof t},O=function(t){return void 0===t},M=function(t){return"object"==typeof t},L=function(t){return!1!==t},D=function(){return"undefined"!=typeof window},N=function(t){return P(t)||k(t)},B="function"==typeof ArrayBuffer&&ArrayBuffer.isView||function(){},j=Array.isArray,z=/random\([^)]+\)/g,F=/,\s*/g,U=/(?:-?\.?\d|\.)+/gi,q=/[-+=.]*\d+[.e\-+]*\d*[e\-+]*\d*/g,G=/[-+=.]*\d+[.e-]*\d*[a-z%]*/g,H=/[-+=.]*\d+\.?\d*(?:e-|e\+)?\d*/gi,V=/[+-]=-?[.\d]+/,Q=/[^,'"\[\]\s]+/gi,W=/^[+\-=e\s\d]*\d+[.\d]*([a-z]*|%)\s*$/i,Y={},K={},X=function(t){return(K=Tt(t,Y))&&In},$=function(t,e){return console.warn("Invalid property",t,"set to",e,"Missing plugin? gsap.registerPlugin()")},Z=function(t,e){return!e&&console.warn(t)},J=function(t,e){return t&&(Y[t]=e)&&K&&(K[t]=e)||Y},tt=function(){return 0},et={suppressEvents:!0,isStart:!0,kill:!1},nt={suppressEvents:!0,kill:!1},rt={suppressEvents:!0},it={},ot=[],at={},st={},lt={},ut=30,ct=[],dt="",ft=function(t){var e,n,r=t[0];if(M(r)||P(r)||(t=[t]),!(e=(r._gsap||{}).harness)){for(n=ct.length;n--&&!ct[n].targetTest(r););e=ct[n]}for(n=t.length;n--;)t[n]&&(t[n]._gsap||(t[n]._gsap=new Ue(t[n],e)))||t.splice(n,1);return t},ht=function(t){return t._gsap||ft(ie(t))[0]._gsap},pt=function(t,e,n){return(n=t[e])&&P(n)?t[e]():O(n)&&t.getAttribute&&t.getAttribute(e)||n},mt=function(t,e){return(t=t.split(",")).forEach(e)||t},gt=function(t){return Math.round(1e5*t)/1e5||0},vt=function(t){return Math.round(1e7*t)/1e7||0},yt=function(t,e){var n=e.charAt(0),r=parseFloat(e.substr(2));return t=parseFloat(t),"+"===n?t+r:"-"===n?t-r:"*"===n?t*r:t/r},bt=function(t,e){for(var n=e.length,r=0;t.indexOf(e[r])<0&&++r<n;);return r<n},_t=function(){var t,e,n=ot.length,r=ot.slice(0);for(at={},ot.length=0,t=0;t<n;t++)(e=r[t])&&e._lazy&&(e.render(e._lazy[0],e._lazy[1],!0)._lazy=0)},wt=function(t){return!!(t._initted||t._startAt||t.add)},At=function(t,e,n,r){ot.length&&!u&&_t(),t.render(e,n,r||!!(u&&e<0&&wt(t))),ot.length&&!u&&_t()},Et=function(t){var e=parseFloat(t);return(e||0===e)&&(t+"").match(Q).length<2?e:k(t)?t.trim():t},xt=function(t){return t},St=function(t,e){for(var n in e)n in t||(t[n]=e[n]);return t},Tt=function(t,e){for(var n in e)t[n]=e[n];return t},Ct=function t(e,n){for(var r in n)"__proto__"!==r&&"constructor"!==r&&"prototype"!==r&&(e[r]=M(n[r])?t(e[r]||(e[r]={}),n[r]):n[r]);return e},It=function(t,e){var n,r={};for(n in t)n in e||(r[n]=t[n]);return r},kt=function(t){var e,n=t.parent||d,r=t.keyframes?(e=j(t.keyframes),function(t,n){for(var r in n)r in t||"duration"===r&&e||"ease"===r||(t[r]=n[r])}):St;if(L(t.inherit))for(;n;)r(t,n.vars.defaults),n=n.parent||n._dp;return t},Pt=function(t,e,n,r,i){void 0===n&&(n="_first"),void 0===r&&(r="_last");var o,a=t[r];if(i)for(o=e[i];a&&a[i]>o;)a=a._prev;return a?(e._next=a._next,a._next=e):(e._next=t[n],t[n]=e),e._next?e._next._prev=e:t[r]=e,e._prev=a,e.parent=e._dp=t,e},Rt=function(t,e,n,r){void 0===n&&(n="_first"),void 0===r&&(r="_last");var i=e._prev,o=e._next;i?i._next=o:t[n]===e&&(t[n]=o),o?o._prev=i:t[r]===e&&(t[r]=i),e._next=e._prev=e.parent=null},Ot=function(t,e){t.parent&&(!e||t.parent.autoRemoveChildren)&&t.parent.remove&&t.parent.remove(t),t._act=0},Mt=function(t,e){if(t&&(!e||e._end>t._dur||e._start<0))for(var n=t;n;)n._dirty=1,n=n.parent;return t},Lt=function(t,e,n,r){return t._startAt&&(u?t._startAt.revert(nt):t.vars.immediateRender&&!t.vars.autoRevert||t._startAt.render(e,!0,r))},Dt=function t(e){return!e||e._ts&&t(e.parent)},Nt=function(t){return t._repeat?Bt(t._tTime,t=t.duration()+t._rDelay)*t:0},Bt=function(t,e){var n=Math.floor(t=vt(t/e));return t&&n===t?n-1:n},jt=function(t,e){return(t-e._start)*e._ts+(e._ts>=0?0:e._dirty?e.totalDuration():e._tDur)},zt=function(t){return t._end=vt(t._start+(t._tDur/Math.abs(t._ts||t._rts||A)||0))},Ft=function(t,e){var n=t._dp;return n&&n.smoothChildTiming&&t._ts&&(t._start=vt(n._time-(t._ts>0?e/t._ts:((t._dirty?t.totalDuration():t._tDur)-e)/-t._ts)),zt(t),n._dirty||Mt(n,t)),t},Ut=function(t,e){var n;if((e._time||!e._dur&&e._initted||e._start<t._time&&(e._dur||!e.add))&&(n=jt(t.rawTime(),e),(!e._dur||Jt(0,e.totalDuration(),n)-e._tTime>A)&&e.render(n,!0)),Mt(t,e)._dp&&t._initted&&t._time>=t._dur&&t._ts){if(t._dur<t.duration())for(n=t;n._dp;)n.rawTime()>=0&&n.totalTime(n._tTime),n=n._dp;t._zTime=-1e-8}},qt=function(t,e,n,r){return e.parent&&Ot(e),e._start=vt((R(n)?n:n||t!==d?Xt(t,n,e):t._time)+e._delay),e._end=vt(e._start+(e.totalDuration()/Math.abs(e.timeScale())||0)),Pt(t,e,"_first","_last",t._sort?"_start":0),Qt(e)||(t._recent=e),r||Ut(t,e),t._ts<0&&Ft(t,t._tTime),t},Gt=function(t,e){return(Y.ScrollTrigger||$("scrollTrigger",e))&&Y.ScrollTrigger.create(e,t)},Ht=function(t,e,n,r,i){return Ke(t,e,i),t._initted?!n&&t._pt&&!u&&(t._dur&&!1!==t.vars.lazy||!t._dur&&t.vars.lazy)&&g!==Ie.frame?(ot.push(t),t._lazy=[i,r],1):void 0:1},Vt=function t(e){var n=e.parent;return n&&n._ts&&n._initted&&!n._lock&&(n.rawTime()<0||t(n))},Qt=function(t){var e=t.data;return"isFromStart"===e||"isStart"===e},Wt=function(t,e,n,r){var i=t._repeat,o=vt(e)||0,a=t._tTime/t._tDur;return a&&!r&&(t._time*=o/t._dur),t._dur=o,t._tDur=i?i<0?1e10:vt(o*(i+1)+t._rDelay*i):o,a>0&&!r&&Ft(t,t._tTime=t._tDur*a),t.parent&&zt(t),n||Mt(t.parent,t),t},Yt=function(t){return t instanceof Ge?Mt(t):Wt(t,t._dur)},Kt={_start:0,endTime:tt,totalDuration:tt},Xt=function t(e,n,r){var i,o,a,s=e.labels,l=e._recent||Kt,u=e.duration()>=w?l.endTime(!1):e._dur;return k(n)&&(isNaN(n)||n in s)?(o=n.charAt(0),a="%"===n.substr(-1),i=n.indexOf("="),"<"===o||">"===o?(i>=0&&(n=n.replace(/=/,"")),("<"===o?l._start:l.endTime(l._repeat>=0))+(parseFloat(n.substr(1))||0)*(a?(i<0?l:r).totalDuration()/100:1)):i<0?(n in s||(s[n]=u),s[n]):(o=parseFloat(n.charAt(i-1)+n.substr(i+1)),a&&r&&(o=o/100*(j(r)?r[0]:r).totalDuration()),i>1?t(e,n.substr(0,i-1),r)+o:u+o)):null==n?u:+n},$t=function(t,e,n){var r,i,o=R(e[1]),a=(o?2:1)+(t<2?0:1),s=e[a];if(o&&(s.duration=e[1]),s.parent=n,t){for(r=s,i=n;i&&!("immediateRender"in r);)r=i.vars.defaults||{},i=L(i.vars.inherit)&&i.parent;s.immediateRender=L(r.immediateRender),t<2?s.runBackwards=1:s.startAt=e[a-1]}return new tn(e[0],s,e[a+1])},Zt=function(t,e){return t||0===t?e(t):e},Jt=function(t,e,n){return n<t?t:n>e?e:n},te=function(t,e){return k(t)&&(e=W.exec(t))?e[1]:""},ee=[].slice,ne=function(t,e){return t&&M(t)&&"length"in t&&(!e&&!t.length||t.length-1 in t&&M(t[0]))&&!t.nodeType&&t!==f},re=function(t,e,n){return void 0===n&&(n=[]),t.forEach((function(t){var r;return k(t)&&!e||ne(t,1)?(r=n).push.apply(r,ie(t)):n.push(t)}))||n},ie=function(t,e,n){return c&&!e&&c.selector?c.selector(t):!k(t)||n||!h&&ke()?j(t)?re(t,n):ne(t)?ee.call(t,0):t?[t]:[]:ee.call((e||p).querySelectorAll(t),0)},oe=function(t){return t=ie(t)[0]||Z("Invalid scope")||{},function(e){var n=t.current||t.nativeElement||t;return ie(e,n.querySelectorAll?n:n===t?Z("Invalid scope")||p.createElement("div"):t)}},ae=function(t){return t.sort((function(){return.5-Math.random()}))},se=function(t){if(P(t))return t;var e=M(t)?t:{each:t},n=Ne(e.ease),r=e.from||0,i=parseFloat(e.base)||0,o={},a=r>0&&r<1,s=isNaN(r)||a,l=e.axis,u=r,c=r;return k(r)?u=c={center:.5,edges:.5,end:1}[r]||0:!a&&s&&(u=r[0],c=r[1]),function(t,a,d){var f,h,p,m,g,v,y,b,_,A=(d||e).length,E=o[A];if(!E){if(!(_="auto"===e.grid?0:(e.grid||[1,w])[1])){for(y=-w;y<(y=d[_++].getBoundingClientRect().left)&&_<A;);_<A&&_--}for(E=o[A]=[],f=s?Math.min(_,A)*u-.5:r%_,h=_===w?0:s?A*c/_-.5:r/_|0,y=0,b=w,v=0;v<A;v++)p=v%_-f,m=h-(v/_|0),E[v]=g=l?Math.abs("y"===l?m:p):T(p*p+m*m),g>y&&(y=g),g<b&&(b=g);"random"===r&&ae(E),E.max=y-b,E.min=b,E.v=A=(parseFloat(e.amount)||parseFloat(e.each)*(_>A?A-1:l?"y"===l?A/_:_:Math.max(_,A/_))||0)*("edges"===r?-1:1),E.b=A<0?i-A:i,E.u=te(e.amount||e.each)||0,n=n&&A<0?Le(n):n}return A=(E[t]-E.min)/E.max||0,vt(E.b+(n?n(A):A)*E.v)+E.u}},le=function(t){var e=Math.pow(10,((t+"").split(".")[1]||"").length);return function(n){var r=vt(Math.round(parseFloat(n)/t)*t*e);return(r-r%1)/e+(R(n)?0:te(n))}},ue=function(t,e){var n,r,i=j(t);return!i&&M(t)&&(n=i=t.radius||w,t.values?(t=ie(t.values),(r=!R(t[0]))&&(n*=n)):t=le(t.increment)),Zt(e,i?P(t)?function(e){return r=t(e),Math.abs(r-e)<=n?r:e}:function(e){for(var i,o,a=parseFloat(r?e.x:e),s=parseFloat(r?e.y:0),l=w,u=0,c=t.length;c--;)(i=r?(i=t[c].x-a)*i+(o=t[c].y-s)*o:Math.abs(t[c]-a))<l&&(l=i,u=c);return u=!n||l<=n?t[u]:e,r||u===e||R(e)?u:u+te(e)}:le(t))},ce=function(t,e,n,r){return Zt(j(t)?!e:!0===n?!!(n=0):!r,(function(){return j(t)?t[~~(Math.random()*t.length)]:(n=n||1e-5)&&(r=n<1?Math.pow(10,(n+"").length-2):1)&&Math.floor(Math.round((t-n/2+Math.random()*(e-t+.99*n))/n)*n*r)/r}))},de=function(t,e,n){return Zt(n,(function(n){return t[~~e(n)]}))},fe=function(t){return t.replace(z,(function(t){var e=t.indexOf("[")+1,n=t.substring(e||7,e?t.indexOf("]"):t.length-1).split(F);return ce(e?n:+n[0],e?0:+n[1],+n[2]||1e-5)}))},he=function(t,e,n,r,i){var o=e-t,a=r-n;return Zt(i,(function(e){return n+((e-t)/o*a||0)}))},pe=function(t,e,n){var r,i,o,a=t.labels,s=w;for(r in a)(i=a[r]-e)<0==!!n&&i&&s>(i=Math.abs(i))&&(o=r,s=i);return o},me=function(t,e,n){var r,i,o,a=t.vars,s=a[e],l=c,u=t._ctx;if(s)return r=a[e+"Params"],i=a.callbackScope||t,n&&ot.length&&_t(),u&&(c=u),o=r?s.apply(i,r):s.call(i),c=l,o},ge=function(t){return Ot(t),t.scrollTrigger&&t.scrollTrigger.kill(!!u),t.progress()<1&&me(t,"onInterrupt"),t},ve=[],ye=function(t){if(t)if(t=!t.name&&t.default||t,D()||t.headless){var e=t.name,n=P(t),r=e&&!n&&t.init?function(){this._props=[]}:t,i={init:tt,render:cn,add:We,kill:fn,modifier:dn,rawVars:0},o={targetTest:0,get:0,getSetter:an,aliases:{},register:0};if(ke(),t!==r){if(st[e])return;St(r,St(It(t,i),o)),Tt(r.prototype,Tt(i,It(t,o))),st[r.prop=e]=r,t.targetTest&&(ct.push(r),it[e]=1),e=("css"===e?"CSS":e.charAt(0).toUpperCase()+e.substr(1))+"Plugin"}J(e,r),t.register&&t.register(In,r,mn)}else ve.push(t)},be=255,_e={aqua:[0,be,be],lime:[0,be,0],silver:[192,192,192],black:[0,0,0],maroon:[128,0,0],teal:[0,128,128],blue:[0,0,be],navy:[0,0,128],white:[be,be,be],olive:[128,128,0],yellow:[be,be,0],orange:[be,165,0],gray:[128,128,128],purple:[128,0,128],green:[0,128,0],red:[be,0,0],pink:[be,192,203],cyan:[0,be,be],transparent:[be,be,be,0]},we=function(t,e,n){return(6*(t+=t<0?1:t>1?-1:0)<1?e+(n-e)*t*6:t<.5?n:3*t<2?e+(n-e)*(2/3-t)*6:e)*be+.5|0},Ae=function(t,e,n){var r,i,o,a,s,l,u,c,d,f,h=t?R(t)?[t>>16,t>>8&be,t&be]:0:_e.black;if(!h){if(","===t.substr(-1)&&(t=t.substr(0,t.length-1)),_e[t])h=_e[t];else if("#"===t.charAt(0)){if(t.length<6&&(r=t.charAt(1),i=t.charAt(2),o=t.charAt(3),t="#"+r+r+i+i+o+o+(5===t.length?t.charAt(4)+t.charAt(4):"")),9===t.length)return[(h=parseInt(t.substr(1,6),16))>>16,h>>8&be,h&be,parseInt(t.substr(7),16)/255];h=[(t=parseInt(t.substr(1),16))>>16,t>>8&be,t&be]}else if("hsl"===t.substr(0,3))if(h=f=t.match(U),e){if(~t.indexOf("="))return h=t.match(q),n&&h.length<4&&(h[3]=1),h}else a=+h[0]%360/360,s=+h[1]/100,r=2*(l=+h[2]/100)-(i=l<=.5?l*(s+1):l+s-l*s),h.length>3&&(h[3]*=1),h[0]=we(a+1/3,r,i),h[1]=we(a,r,i),h[2]=we(a-1/3,r,i);else h=t.match(U)||_e.transparent;h=h.map(Number)}return e&&!f&&(r=h[0]/be,i=h[1]/be,o=h[2]/be,l=((u=Math.max(r,i,o))+(c=Math.min(r,i,o)))/2,u===c?a=s=0:(d=u-c,s=l>.5?d/(2-u-c):d/(u+c),a=u===r?(i-o)/d+(i<o?6:0):u===i?(o-r)/d+2:(r-i)/d+4,a*=60),h[0]=~~(a+.5),h[1]=~~(100*s+.5),h[2]=~~(100*l+.5)),n&&h.length<4&&(h[3]=1),h},Ee=function(t){var e=[],n=[],r=-1;return t.split(Se).forEach((function(t){var i=t.match(G)||[];e.push.apply(e,i),n.push(r+=i.length+1)})),e.c=n,e},xe=function(t,e,n){var r,i,o,a,s="",l=(t+s).match(Se),u=e?"hsla(":"rgba(",c=0;if(!l)return t;if(l=l.map((function(t){return(t=Ae(t,e,1))&&u+(e?t[0]+","+t[1]+"%,"+t[2]+"%,"+t[3]:t.join(","))+")"})),n&&(o=Ee(t),(r=n.c).join(s)!==o.c.join(s)))for(a=(i=t.replace(Se,"1").split(G)).length-1;c<a;c++)s+=i[c]+(~r.indexOf(c)?l.shift()||u+"0,0,0,0)":(o.length?o:l.length?l:n).shift());if(!i)for(a=(i=t.split(Se)).length-1;c<a;c++)s+=i[c]+l[c];return s+i[a]},Se=function(){var t,e="(?:\\b(?:(?:rgb|rgba|hsl|hsla)\\(.+?\\))|\\B#(?:[0-9a-f]{3,4}){1,2}\\b";for(t in _e)e+="|"+t+"\\b";return new RegExp(e+")","gi")}(),Te=/hsl[a]?\(/,Ce=function(t){var e,n=t.join(" ");if(Se.lastIndex=0,Se.test(n))return e=Te.test(n),t[1]=xe(t[1],e),t[0]=xe(t[0],e,Ee(t[1])),!0},Ie=function(){var t,e,n,r,i,o,a=Date.now,s=500,l=33,u=a(),c=u,d=1e3/240,g=d,v=[],b=function n(f){var h,p,m,y,b=a()-c,_=!0===f;if((b>s||b<0)&&(u+=b-l),((h=(m=(c+=b)-u)-g)>0||_)&&(y=++r.frame,i=m-1e3*r.time,r.time=m/=1e3,g+=h+(h>=d?4:d-h),p=1),_||(t=e(n)),p)for(o=0;o<v.length;o++)v[o](m,i,y,f)};return r={time:0,frame:0,tick:function(){b(!0)},deltaRatio:function(t){return i/(1e3/(t||60))},wake:function(){m&&(!h&&D()&&(f=h=window,p=f.document||{},Y.gsap=In,(f.gsapVersions||(f.gsapVersions=[])).push(In.version),X(K||f.GreenSockGlobals||!f.gsap&&f||{}),ve.forEach(ye)),n="undefined"!=typeof requestAnimationFrame&&requestAnimationFrame,t&&r.sleep(),e=n||function(t){return setTimeout(t,g-1e3*r.time+1|0)},y=1,b(2))},sleep:function(){(n?cancelAnimationFrame:clearTimeout)(t),y=0,e=tt},lagSmoothing:function(t,e){s=t||1/0,l=Math.min(e||33,s)},fps:function(t){d=1e3/(t||240),g=1e3*r.time+d},add:function(t,e,n){var i=e?function(e,n,o,a){t(e,n,o,a),r.remove(i)}:t;return r.remove(t),v[n?"unshift":"push"](i),ke(),i},remove:function(t,e){~(e=v.indexOf(t))&&v.splice(e,1)&&o>=e&&o--},_listeners:v},r}(),ke=function(){return!y&&Ie.wake()},Pe={},Re=/^[\d.\-M][\d.\-,\s]/,Oe=/["']/g,Me=function(t){for(var e,n,r,i={},o=t.substr(1,t.length-3).split(":"),a=o[0],s=1,l=o.length;s<l;s++)n=o[s],e=s!==l-1?n.lastIndexOf(","):n.length,r=n.substr(0,e),i[a]=isNaN(r)?r.replace(Oe,"").trim():+r,a=n.substr(e+1).trim();return i},Le=function(t){return function(e){return 1-t(1-e)}},De=function t(e,n){for(var r,i=e._first;i;)i instanceof Ge?t(i,n):!i.vars.yoyoEase||i._yoyo&&i._repeat||i._yoyo===n||(i.timeline?t(i.timeline,n):(r=i._ease,i._ease=i._yEase,i._yEase=r,i._yoyo=n)),i=i._next},Ne=function(t,e){return t&&(P(t)?t:Pe[t]||function(t){var e,n,r,i,o=(t+"").split("("),a=Pe[o[0]];return a&&o.length>1&&a.config?a.config.apply(null,~t.indexOf("{")?[Me(o[1])]:(e=t,n=e.indexOf("(")+1,r=e.indexOf(")"),i=e.indexOf("(",n),e.substring(n,~i&&i<r?e.indexOf(")",r+1):r)).split(",").map(Et)):Pe._CE&&Re.test(t)?Pe._CE("",t):a}(t))||e},Be=function(t,e,n,r){void 0===n&&(n=function(t){return 1-e(1-t)}),void 0===r&&(r=function(t){return t<.5?e(2*t)/2:1-e(2*(1-t))/2});var i,o={easeIn:e,easeOut:n,easeInOut:r};return mt(t,(function(t){for(var e in Pe[t]=Y[t]=o,Pe[i=t.toLowerCase()]=n,o)Pe[i+("easeIn"===e?".in":"easeOut"===e?".out":".inOut")]=Pe[t+"."+e]=o[e]})),o},je=function(t){return function(e){return e<.5?(1-t(1-2*e))/2:.5+t(2*(e-.5))/2}},ze=function t(e,n,r){var i=n>=1?n:1,o=(r||(e?.3:.45))/(n<1?n:1),a=o/E*(Math.asin(1/i)||0),s=function(t){return 1===t?1:i*Math.pow(2,-10*t)*I((t-a)*o)+1},l="out"===e?s:"in"===e?function(t){return 1-s(1-t)}:je(s);return o=E/o,l.config=function(n,r){return t(e,n,r)},l},Fe=function t(e,n){void 0===n&&(n=1.70158);var r=function(t){return t?--t*t*((n+1)*t+n)+1:0},i="out"===e?r:"in"===e?function(t){return 1-r(1-t)}:je(r);return i.config=function(n){return t(e,n)},i};mt("Linear,Quad,Cubic,Quart,Quint,Strong",(function(t,e){var n=e<5?e+1:e;Be(t+",Power"+(n-1),e?function(t){return Math.pow(t,n)}:function(t){return t},(function(t){return 1-Math.pow(1-t,n)}),(function(t){return t<.5?Math.pow(2*t,n)/2:1-Math.pow(2*(1-t),n)/2}))})),Pe.Linear.easeNone=Pe.none=Pe.Linear.easeIn,Be("Elastic",ze("in"),ze("out"),ze()),function(t,e){var n=1/e,r=2*n,i=2.5*n,o=function(o){return o<n?t*o*o:o<r?t*Math.pow(o-1.5/e,2)+.75:o<i?t*(o-=2.25/e)*o+.9375:t*Math.pow(o-2.625/e,2)+.984375};Be("Bounce",(function(t){return 1-o(1-t)}),o)}(7.5625,2.75),Be("Expo",(function(t){return Math.pow(2,10*(t-1))*t+t*t*t*t*t*t*(1-t)})),Be("Circ",(function(t){return-(T(1-t*t)-1)})),Be("Sine",(function(t){return 1===t?1:1-C(t*x)})),Be("Back",Fe("in"),Fe("out"),Fe()),Pe.SteppedEase=Pe.steps=Y.SteppedEase={config:function(t,e){void 0===t&&(t=1);var n=1/t,r=t+(e?0:1),i=e?1:0;return function(t){return((r*Jt(0,.99999999,t)|0)+i)*n}}},_.ease=Pe["quad.out"],mt("onComplete,onUpdate,onStart,onRepeat,onReverseComplete,onInterrupt",(function(t){return dt+=t+","+t+"Params,"}));var Ue=function(t,e){this.id=S++,t._gsap=this,this.target=t,this.harness=e,this.get=e?e.get:pt,this.set=e?e.getSetter:an},qe=function(){function t(t){this.vars=t,this._delay=+t.delay||0,(this._repeat=t.repeat===1/0?-2:t.repeat||0)&&(this._rDelay=t.repeatDelay||0,this._yoyo=!!t.yoyo||!!t.yoyoEase),this._ts=1,Wt(this,+t.duration,1,1),this.data=t.data,c&&(this._ctx=c,c.data.push(this)),y||Ie.wake()}var e=t.prototype;return e.delay=function(t){return t||0===t?(this.parent&&this.parent.smoothChildTiming&&this.startTime(this._start+t-this._delay),this._delay=t,this):this._delay},e.duration=function(t){return arguments.length?this.totalDuration(this._repeat>0?t+(t+this._rDelay)*this._repeat:t):this.totalDuration()&&this._dur},e.totalDuration=function(t){return arguments.length?(this._dirty=0,Wt(this,this._repeat<0?t:(t-this._repeat*this._rDelay)/(this._repeat+1))):this._tDur},e.totalTime=function(t,e){if(ke(),!arguments.length)return this._tTime;var n=this._dp;if(n&&n.smoothChildTiming&&this._ts){for(Ft(this,t),!n._dp||n.parent||Ut(n,this);n&&n.parent;)n.parent._time!==n._start+(n._ts>=0?n._tTime/n._ts:(n.totalDuration()-n._tTime)/-n._ts)&&n.totalTime(n._tTime,!0),n=n.parent;!this.parent&&this._dp.autoRemoveChildren&&(this._ts>0&&t<this._tDur||this._ts<0&&t>0||!this._tDur&&!t)&&qt(this._dp,this,this._start-this._delay)}return(this._tTime!==t||!this._dur&&!e||this._initted&&Math.abs(this._zTime)===A||!this._initted&&this._dur&&t||!t&&!this._initted&&(this.add||this._ptLookup))&&(this._ts||(this._pTime=t),At(this,t,e)),this},e.time=function(t,e){return arguments.length?this.totalTime(Math.min(this.totalDuration(),t+Nt(this))%(this._dur+this._rDelay)||(t?this._dur:0),e):this._time},e.totalProgress=function(t,e){return arguments.length?this.totalTime(this.totalDuration()*t,e):this.totalDuration()?Math.min(1,this._tTime/this._tDur):this.rawTime()>=0&&this._initted?1:0},e.progress=function(t,e){return arguments.length?this.totalTime(this.duration()*(!this._yoyo||1&this.iteration()?t:1-t)+Nt(this),e):this.duration()?Math.min(1,this._time/this._dur):this.rawTime()>0?1:0},e.iteration=function(t,e){var n=this.duration()+this._rDelay;return arguments.length?this.totalTime(this._time+(t-1)*n,e):this._repeat?Bt(this._tTime,n)+1:1},e.timeScale=function(t,e){if(!arguments.length)return-1e-8===this._rts?0:this._rts;if(this._rts===t)return this;var n=this.parent&&this._ts?jt(this.parent._time,this):this._tTime;return this._rts=+t||0,this._ts=this._ps||-1e-8===t?0:this._rts,this.totalTime(Jt(-Math.abs(this._delay),this.totalDuration(),n),!1!==e),zt(this),function(t){for(var e=t.parent;e&&e.parent;)e._dirty=1,e.totalDuration(),e=e.parent;return t}(this)},e.paused=function(t){return arguments.length?(this._ps!==t&&(this._ps=t,t?(this._pTime=this._tTime||Math.max(-this._delay,this.rawTime()),this._ts=this._act=0):(ke(),this._ts=this._rts,this.totalTime(this.parent&&!this.parent.smoothChildTiming?this.rawTime():this._tTime||this._pTime,1===this.progress()&&Math.abs(this._zTime)!==A&&(this._tTime-=A)))),this):this._ps},e.startTime=function(t){if(arguments.length){this._start=vt(t);var e=this.parent||this._dp;return e&&(e._sort||!this.parent)&&qt(e,this,this._start-this._delay),this}return this._start},e.endTime=function(t){return this._start+(L(t)?this.totalDuration():this.duration())/Math.abs(this._ts||1)},e.rawTime=function(t){var e=this.parent||this._dp;return e?t&&(!this._ts||this._repeat&&this._time&&this.totalProgress()<1)?this._tTime%(this._dur+this._rDelay):this._ts?jt(e.rawTime(t),this):this._tTime:this._tTime},e.revert=function(t){void 0===t&&(t=rt);var e=u;return u=t,wt(this)&&(this.timeline&&this.timeline.revert(t),this.totalTime(-.01,t.suppressEvents)),"nested"!==this.data&&!1!==t.kill&&this.kill(),u=e,this},e.globalTime=function(t){for(var e=this,n=arguments.length?t:e.rawTime();e;)n=e._start+n/(Math.abs(e._ts)||1),e=e._dp;return!this.parent&&this._sat?this._sat.globalTime(t):n},e.repeat=function(t){return arguments.length?(this._repeat=t===1/0?-2:t,Yt(this)):-2===this._repeat?1/0:this._repeat},e.repeatDelay=function(t){if(arguments.length){var e=this._time;return this._rDelay=t,Yt(this),e?this.time(e):this}return this._rDelay},e.yoyo=function(t){return arguments.length?(this._yoyo=t,this):this._yoyo},e.seek=function(t,e){return this.totalTime(Xt(this,t),L(e))},e.restart=function(t,e){return this.play().totalTime(t?-this._delay:0,L(e)),this._dur||(this._zTime=-1e-8),this},e.play=function(t,e){return null!=t&&this.seek(t,e),this.reversed(!1).paused(!1)},e.reverse=function(t,e){return null!=t&&this.seek(t||this.totalDuration(),e),this.reversed(!0).paused(!1)},e.pause=function(t,e){return null!=t&&this.seek(t,e),this.paused(!0)},e.resume=function(){return this.paused(!1)},e.reversed=function(t){return arguments.length?(!!t!==this.reversed()&&this.timeScale(-this._rts||(t?-1e-8:0)),this):this._rts<0},e.invalidate=function(){return this._initted=this._act=0,this._zTime=-1e-8,this},e.isActive=function(){var t,e=this.parent||this._dp,n=this._start;return!(e&&!(this._ts&&this._initted&&e.isActive()&&(t=e.rawTime(!0))>=n&&t<this.endTime(!0)-A))},e.eventCallback=function(t,e,n){var r=this.vars;return arguments.length>1?(e?(r[t]=e,n&&(r[t+"Params"]=n),"onUpdate"===t&&(this._onUpdate=e)):delete r[t],this):r[t]},e.then=function(t){var e=this,n=e._prom;return new Promise((function(r){var i=P(t)?t:xt,o=function(){var t=e.then;e.then=null,n&&n(),P(i)&&(i=i(e))&&(i.then||i===e)&&(e.then=t),r(i),e.then=t};e._initted&&1===e.totalProgress()&&e._ts>=0||!e._tTime&&e._ts<0?o():e._prom=o}))},e.kill=function(){ge(this)},t}();St(qe.prototype,{_time:0,_start:0,_end:0,_tTime:0,_tDur:0,_dirty:0,_repeat:0,_yoyo:!1,parent:null,_initted:!1,_rDelay:0,_ts:1,_dp:0,ratio:0,_zTime:-1e-8,_prom:0,_ps:!1,_rts:1});var Ge=function(t){function e(e,n){var r;return void 0===e&&(e={}),(r=t.call(this,e)||this).labels={},r.smoothChildTiming=!!e.smoothChildTiming,r.autoRemoveChildren=!!e.autoRemoveChildren,r._sort=L(e.sortChildren),d&&qt(e.parent||d,i(r),n),e.reversed&&r.reverse(),e.paused&&r.paused(!0),e.scrollTrigger&&Gt(i(r),e.scrollTrigger),r}o(e,t);var n=e.prototype;return n.to=function(t,e,n){return $t(0,arguments,this),this},n.from=function(t,e,n){return $t(1,arguments,this),this},n.fromTo=function(t,e,n,r){return $t(2,arguments,this),this},n.set=function(t,e,n){return e.duration=0,e.parent=this,kt(e).repeatDelay||(e.repeat=0),e.immediateRender=!!e.immediateRender,new tn(t,e,Xt(this,n),1),this},n.call=function(t,e,n){return qt(this,tn.delayedCall(0,t,e),n)},n.staggerTo=function(t,e,n,r,i,o,a){return n.duration=e,n.stagger=n.stagger||r,n.onComplete=o,n.onCompleteParams=a,n.parent=this,new tn(t,n,Xt(this,i)),this},n.staggerFrom=function(t,e,n,r,i,o,a){return n.runBackwards=1,kt(n).immediateRender=L(n.immediateRender),this.staggerTo(t,e,n,r,i,o,a)},n.staggerFromTo=function(t,e,n,r,i,o,a,s){return r.startAt=n,kt(r).immediateRender=L(r.immediateRender),this.staggerTo(t,e,r,i,o,a,s)},n.render=function(t,e,n){var r,i,o,a,s,l,c,f,h,p,m,g,v=this._time,y=this._dirty?this.totalDuration():this._tDur,b=this._dur,_=t<=0?0:vt(t),w=this._zTime<0!=t<0&&(this._initted||!b);if(this!==d&&_>y&&t>=0&&(_=y),_!==this._tTime||n||w){if(v!==this._time&&b&&(_+=this._time-v,t+=this._time-v),r=_,h=this._start,l=!(f=this._ts),w&&(b||(v=this._zTime),(t||!e)&&(this._zTime=t)),this._repeat){if(m=this._yoyo,s=b+this._rDelay,this._repeat<-1&&t<0)return this.totalTime(100*s+t,e,n);if(r=vt(_%s),_===y?(a=this._repeat,r=b):((a=~~(p=vt(_/s)))&&a===p&&(r=b,a--),r>b&&(r=b)),p=Bt(this._tTime,s),!v&&this._tTime&&p!==a&&this._tTime-p*s-this._dur<=0&&(p=a),m&&1&a&&(r=b-r,g=1),a!==p&&!this._lock){var E=m&&1&p,x=E===(m&&1&a);if(a<p&&(E=!E),v=E?0:_%b?b:_,this._lock=1,this.render(v||(g?0:vt(a*s)),e,!b)._lock=0,this._tTime=_,!e&&this.parent&&me(this,"onRepeat"),this.vars.repeatRefresh&&!g&&(this.invalidate()._lock=1,p=a),v&&v!==this._time||l!==!this._ts||this.vars.onRepeat&&!this.parent&&!this._act)return this;if(b=this._dur,y=this._tDur,x&&(this._lock=2,v=E?b:-1e-4,this.render(v,!0),this.vars.repeatRefresh&&!g&&this.invalidate()),this._lock=0,!this._ts&&!l)return this;De(this,g)}}if(this._hasPause&&!this._forcing&&this._lock<2&&(c=function(t,e,n){var r;if(n>e)for(r=t._first;r&&r._start<=n;){if("isPause"===r.data&&r._start>e)return r;r=r._next}else for(r=t._last;r&&r._start>=n;){if("isPause"===r.data&&r._start<e)return r;r=r._prev}}(this,vt(v),vt(r)),c&&(_-=r-(r=c._start))),this._tTime=_,this._time=r,this._act=!f,this._initted||(this._onUpdate=this.vars.onUpdate,this._initted=1,this._zTime=t,v=0),!v&&_&&b&&!e&&!p&&(me(this,"onStart"),this._tTime!==_))return this;if(r>=v&&t>=0)for(i=this._first;i;){if(o=i._next,(i._act||r>=i._start)&&i._ts&&c!==i){if(i.parent!==this)return this.render(t,e,n);if(i.render(i._ts>0?(r-i._start)*i._ts:(i._dirty?i.totalDuration():i._tDur)+(r-i._start)*i._ts,e,n),r!==this._time||!this._ts&&!l){c=0,o&&(_+=this._zTime=-1e-8);break}}i=o}else{i=this._last;for(var S=t<0?t:r;i;){if(o=i._prev,(i._act||S<=i._end)&&i._ts&&c!==i){if(i.parent!==this)return this.render(t,e,n);if(i.render(i._ts>0?(S-i._start)*i._ts:(i._dirty?i.totalDuration():i._tDur)+(S-i._start)*i._ts,e,n||u&&wt(i)),r!==this._time||!this._ts&&!l){c=0,o&&(_+=this._zTime=S?-1e-8:A);break}}i=o}}if(c&&!e&&(this.pause(),c.render(r>=v?0:-1e-8)._zTime=r>=v?1:-1,this._ts))return this._start=h,zt(this),this.render(t,e,n);this._onUpdate&&!e&&me(this,"onUpdate",!0),(_===y&&this._tTime>=this.totalDuration()||!_&&v)&&(h!==this._start&&Math.abs(f)===Math.abs(this._ts)||this._lock||((t||!b)&&(_===y&&this._ts>0||!_&&this._ts<0)&&Ot(this,1),e||t<0&&!v||!_&&!v&&y||(me(this,_===y&&t>=0?"onComplete":"onReverseComplete",!0),this._prom&&!(_<y&&this.timeScale()>0)&&this._prom())))}return this},n.add=function(t,e){var n=this;if(R(e)||(e=Xt(this,e,t)),!(t instanceof qe)){if(j(t))return t.forEach((function(t){return n.add(t,e)})),this;if(k(t))return this.addLabel(t,e);if(!P(t))return this;t=tn.delayedCall(0,t)}return this!==t?qt(this,t,e):this},n.getChildren=function(t,e,n,r){void 0===t&&(t=!0),void 0===e&&(e=!0),void 0===n&&(n=!0),void 0===r&&(r=-w);for(var i=[],o=this._first;o;)o._start>=r&&(o instanceof tn?e&&i.push(o):(n&&i.push(o),t&&i.push.apply(i,o.getChildren(!0,e,n)))),o=o._next;return i},n.getById=function(t){for(var e=this.getChildren(1,1,1),n=e.length;n--;)if(e[n].vars.id===t)return e[n]},n.remove=function(t){return k(t)?this.removeLabel(t):P(t)?this.killTweensOf(t):(t.parent===this&&Rt(this,t),t===this._recent&&(this._recent=this._last),Mt(this))},n.totalTime=function(e,n){return arguments.length?(this._forcing=1,!this._dp&&this._ts&&(this._start=vt(Ie.time-(this._ts>0?e/this._ts:(this.totalDuration()-e)/-this._ts))),t.prototype.totalTime.call(this,e,n),this._forcing=0,this):this._tTime},n.addLabel=function(t,e){return this.labels[t]=Xt(this,e),this},n.removeLabel=function(t){return delete this.labels[t],this},n.addPause=function(t,e,n){var r=tn.delayedCall(0,e||tt,n);return r.data="isPause",this._hasPause=1,qt(this,r,Xt(this,t))},n.removePause=function(t){var e=this._first;for(t=Xt(this,t);e;)e._start===t&&"isPause"===e.data&&Ot(e),e=e._next},n.killTweensOf=function(t,e,n){for(var r=this.getTweensOf(t,n),i=r.length;i--;)He!==r[i]&&r[i].kill(t,e);return this},n.getTweensOf=function(t,e){for(var n,r=[],i=ie(t),o=this._first,a=R(e);o;)o instanceof tn?bt(o._targets,i)&&(a?(!He||o._initted&&o._ts)&&o.globalTime(0)<=e&&o.globalTime(o.totalDuration())>e:!e||o.isActive())&&r.push(o):(n=o.getTweensOf(i,e)).length&&r.push.apply(r,n),o=o._next;return r},n.tweenTo=function(t,e){e=e||{};var n,r=this,i=Xt(r,t),o=e,a=o.startAt,s=o.onStart,l=o.onStartParams,u=o.immediateRender,c=tn.to(r,St({ease:e.ease||"none",lazy:!1,immediateRender:!1,time:i,overwrite:"auto",duration:e.duration||Math.abs((i-(a&&"time"in a?a.time:r._time))/r.timeScale())||A,onStart:function(){if(r.pause(),!n){var t=e.duration||Math.abs((i-(a&&"time"in a?a.time:r._time))/r.timeScale());c._dur!==t&&Wt(c,t,0,1).render(c._time,!0,!0),n=1}s&&s.apply(c,l||[])}},e));return u?c.render(0):c},n.tweenFromTo=function(t,e,n){return this.tweenTo(e,St({startAt:{time:Xt(this,t)}},n))},n.recent=function(){return this._recent},n.nextLabel=function(t){return void 0===t&&(t=this._time),pe(this,Xt(this,t))},n.previousLabel=function(t){return void 0===t&&(t=this._time),pe(this,Xt(this,t),1)},n.currentLabel=function(t){return arguments.length?this.seek(t,!0):this.previousLabel(this._time+A)},n.shiftChildren=function(t,e,n){void 0===n&&(n=0);var r,i=this._first,o=this.labels;for(t=vt(t);i;)i._start>=n&&(i._start+=t,i._end+=t),i=i._next;if(e)for(r in o)o[r]>=n&&(o[r]+=t);return Mt(this)},n.invalidate=function(e){var n=this._first;for(this._lock=0;n;)n.invalidate(e),n=n._next;return t.prototype.invalidate.call(this,e)},n.clear=function(t){void 0===t&&(t=!0);for(var e,n=this._first;n;)e=n._next,this.remove(n),n=e;return this._dp&&(this._time=this._tTime=this._pTime=0),t&&(this.labels={}),Mt(this)},n.totalDuration=function(t){var e,n,r,i=0,o=this,a=o._last,s=w;if(arguments.length)return o.timeScale((o._repeat<0?o.duration():o.totalDuration())/(o.reversed()?-t:t));if(o._dirty){for(r=o.parent;a;)e=a._prev,a._dirty&&a.totalDuration(),(n=a._start)>s&&o._sort&&a._ts&&!o._lock?(o._lock=1,qt(o,a,n-a._delay,1)._lock=0):s=n,n<0&&a._ts&&(i-=n,(!r&&!o._dp||r&&r.smoothChildTiming)&&(o._start+=vt(n/o._ts),o._time-=n,o._tTime-=n),o.shiftChildren(-n,!1,-Infinity),s=0),a._end>i&&a._ts&&(i=a._end),a=e;Wt(o,o===d&&o._time>i?o._time:i,1,1),o._dirty=0}return o._tDur},e.updateRoot=function(t){if(d._ts&&(At(d,jt(t,d)),g=Ie.frame),Ie.frame>=ut){ut+=b.autoSleep||120;var e=d._first;if((!e||!e._ts)&&b.autoSleep&&Ie._listeners.length<2){for(;e&&!e._ts;)e=e._next;e||Ie.sleep()}}},e}(qe);St(Ge.prototype,{_lock:0,_hasPause:0,_forcing:0});var He,Ve,Qe=function(t,e,n,r,i,o,a){var s,l,u,c,d,f,h,p,m=new mn(this._pt,t,e,0,1,un,null,i),g=0,v=0;for(m.b=n,m.e=r,n+="",(h=~(r+="").indexOf("random("))&&(r=fe(r)),o&&(o(p=[n,r],t,e),n=p[0],r=p[1]),l=n.match(H)||[];s=H.exec(r);)c=s[0],d=r.substring(g,s.index),u?u=(u+1)%5:"rgba("===d.substr(-5)&&(u=1),c!==l[v++]&&(f=parseFloat(l[v-1])||0,m._pt={_next:m._pt,p:d||1===v?d:",",s:f,c:"="===c.charAt(1)?yt(f,c)-f:parseFloat(c)-f,m:u&&u<4?Math.round:0},g=H.lastIndex);return m.c=g<r.length?r.substring(g,r.length):"",m.fp=a,(V.test(r)||h)&&(m.e=0),this._pt=m,m},We=function(t,e,n,r,i,o,a,s,l,u){P(r)&&(r=r(i||0,t,o));var c,d=t[e],f="get"!==n?n:P(d)?l?t[e.indexOf("set")||!P(t["get"+e.substr(3)])?e:"get"+e.substr(3)](l):t[e]():d,h=P(d)?l?rn:nn:en;if(k(r)&&(~r.indexOf("random(")&&(r=fe(r)),"="===r.charAt(1)&&((c=yt(f,r)+(te(f)||0))||0===c)&&(r=c)),!u||f!==r||Ve)return isNaN(f*r)||""===r?(!d&&!(e in t)&&$(e,r),Qe.call(this,t,e,f,r,h,s||b.stringFilter,l)):(c=new mn(this._pt,t,e,+f||0,r-(f||0),"boolean"==typeof d?ln:sn,0,h),l&&(c.fp=l),a&&c.modifier(a,this,t),this._pt=c)},Ye=function(t,e,n,r,i,o){var a,s,l,u;if(st[t]&&!1!==(a=new st[t]).init(i,a.rawVars?e[t]:function(t,e,n,r,i){if(P(t)&&(t=$e(t,i,e,n,r)),!M(t)||t.style&&t.nodeType||j(t)||B(t))return k(t)?$e(t,i,e,n,r):t;var o,a={};for(o in t)a[o]=$e(t[o],i,e,n,r);return a}(e[t],r,i,o,n),n,r,o)&&(n._pt=s=new mn(n._pt,i,t,0,1,a.render,a,0,a.priority),n!==v))for(l=n._ptLookup[n._targets.indexOf(i)],u=a._props.length;u--;)l[a._props[u]]=s;return a},Ke=function t(e,n,r){var i,o,a,s,c,f,h,p,m,g,v,y,b,E=e.vars,x=E.ease,S=E.startAt,T=E.immediateRender,C=E.lazy,I=E.onUpdate,k=E.runBackwards,P=E.yoyoEase,R=E.keyframes,O=E.autoRevert,M=e._dur,D=e._startAt,N=e._targets,B=e.parent,j=B&&"nested"===B.data?B.vars.targets:N,z="auto"===e._overwrite&&!l,F=e.timeline;if(F&&(!R||!x)&&(x="none"),e._ease=Ne(x,_.ease),e._yEase=P?Le(Ne(!0===P?x:P,_.ease)):0,P&&e._yoyo&&!e._repeat&&(P=e._yEase,e._yEase=e._ease,e._ease=P),e._from=!F&&!!E.runBackwards,!F||R&&!E.stagger){if(y=(p=N[0]?ht(N[0]).harness:0)&&E[p.prop],i=It(E,it),D&&(D._zTime<0&&D.progress(1),n<0&&k&&T&&!O?D.render(-1,!0):D.revert(k&&M?nt:et),D._lazy=0),S){if(Ot(e._startAt=tn.set(N,St({data:"isStart",overwrite:!1,parent:B,immediateRender:!0,lazy:!D&&L(C),startAt:null,delay:0,onUpdate:I&&function(){return me(e,"onUpdate")},stagger:0},S))),e._startAt._dp=0,e._startAt._sat=e,n<0&&(u||!T&&!O)&&e._startAt.revert(nt),T&&M&&n<=0&&r<=0)return void(n&&(e._zTime=n))}else if(k&&M&&!D)if(n&&(T=!1),a=St({overwrite:!1,data:"isFromStart",lazy:T&&!D&&L(C),immediateRender:T,stagger:0,parent:B},i),y&&(a[p.prop]=y),Ot(e._startAt=tn.set(N,a)),e._startAt._dp=0,e._startAt._sat=e,n<0&&(u?e._startAt.revert(nt):e._startAt.render(-1,!0)),e._zTime=n,T){if(!n)return}else t(e._startAt,A,A);for(e._pt=e._ptCache=0,C=M&&L(C)||C&&!M,o=0;o<N.length;o++){if(h=(c=N[o])._gsap||ft(N)[o]._gsap,e._ptLookup[o]=g={},at[h.id]&&ot.length&&_t(),v=j===N?o:j.indexOf(c),p&&!1!==(m=new p).init(c,y||i,e,v,j)&&(e._pt=s=new mn(e._pt,c,m.name,0,1,m.render,m,0,m.priority),m._props.forEach((function(t){g[t]=s})),m.priority&&(f=1)),!p||y)for(a in i)st[a]&&(m=Ye(a,i,e,v,c,j))?m.priority&&(f=1):g[a]=s=We.call(e,c,a,"get",i[a],v,j,0,E.stringFilter);e._op&&e._op[o]&&e.kill(c,e._op[o]),z&&e._pt&&(He=e,d.killTweensOf(c,g,e.globalTime(n)),b=!e.parent,He=0),e._pt&&C&&(at[h.id]=1)}f&&pn(e),e._onInit&&e._onInit(e)}e._onUpdate=I,e._initted=(!e._op||e._pt)&&!b,R&&n<=0&&F.render(w,!0,!0)},Xe=function(t,e,n,r){var i,o,a=e.ease||r||"power1.inOut";if(j(e))o=n[t]||(n[t]=[]),e.forEach((function(t,n){return o.push({t:n/(e.length-1)*100,v:t,e:a})}));else for(i in e)o=n[i]||(n[i]=[]),"ease"===i||o.push({t:parseFloat(t),v:e[i],e:a})},$e=function(t,e,n,r,i){return P(t)?t.call(e,n,r,i):k(t)&&~t.indexOf("random(")?fe(t):t},Ze=dt+"repeat,repeatDelay,yoyo,repeatRefresh,yoyoEase,autoRevert",Je={};mt(Ze+",id,stagger,delay,duration,paused,scrollTrigger",(function(t){return Je[t]=1}));var tn=function(t){function e(e,n,r,o){var a;"number"==typeof n&&(r.duration=n,n=r,r=null);var s,u,c,f,h,p,m,g,v=(a=t.call(this,o?n:kt(n))||this).vars,y=v.duration,_=v.delay,w=v.immediateRender,A=v.stagger,E=v.overwrite,x=v.keyframes,S=v.defaults,T=v.scrollTrigger,C=v.yoyoEase,I=n.parent||d,k=(j(e)||B(e)?R(e[0]):"length"in n)?[e]:ie(e);if(a._targets=k.length?ft(k):Z("GSAP target "+e+" not found. https://gsap.com",!b.nullTargetWarn)||[],a._ptLookup=[],a._overwrite=E,x||A||N(y)||N(_)){if(n=a.vars,(s=a.timeline=new Ge({data:"nested",defaults:S||{},targets:I&&"nested"===I.data?I.vars.targets:k})).kill(),s.parent=s._dp=i(a),s._start=0,A||N(y)||N(_)){if(f=k.length,m=A&&se(A),M(A))for(h in A)~Ze.indexOf(h)&&(g||(g={}),g[h]=A[h]);for(u=0;u<f;u++)(c=It(n,Je)).stagger=0,C&&(c.yoyoEase=C),g&&Tt(c,g),p=k[u],c.duration=+$e(y,i(a),u,p,k),c.delay=(+$e(_,i(a),u,p,k)||0)-a._delay,!A&&1===f&&c.delay&&(a._delay=_=c.delay,a._start+=_,c.delay=0),s.to(p,c,m?m(u,p,k):0),s._ease=Pe.none;s.duration()?y=_=0:a.timeline=0}else if(x){kt(St(s.vars.defaults,{ease:"none"})),s._ease=Ne(x.ease||n.ease||"none");var P,O,D,z=0;if(j(x))x.forEach((function(t){return s.to(k,t,">")})),s.duration();else{for(h in c={},x)"ease"===h||"easeEach"===h||Xe(h,x[h],c,x.easeEach);for(h in c)for(P=c[h].sort((function(t,e){return t.t-e.t})),z=0,u=0;u<P.length;u++)(D={ease:(O=P[u]).e,duration:(O.t-(u?P[u-1].t:0))/100*y})[h]=O.v,s.to(k,D,z),z+=D.duration;s.duration()<y&&s.to({},{duration:y-s.duration()})}}y||a.duration(y=s.duration())}else a.timeline=0;return!0!==E||l||(He=i(a),d.killTweensOf(k),He=0),qt(I,i(a),r),n.reversed&&a.reverse(),n.paused&&a.paused(!0),(w||!y&&!x&&a._start===vt(I._time)&&L(w)&&Dt(i(a))&&"nested"!==I.data)&&(a._tTime=-1e-8,a.render(Math.max(0,-_)||0)),T&&Gt(i(a),T),a}o(e,t);var n=e.prototype;return n.render=function(t,e,n){var r,i,o,a,s,l,c,d,f,h=this._time,p=this._tDur,m=this._dur,g=t<0,v=t>p-A&&!g?p:t<A?0:t;if(m){if(v!==this._tTime||!t||n||!this._initted&&this._tTime||this._startAt&&this._zTime<0!==g||this._lazy){if(r=v,d=this.timeline,this._repeat){if(a=m+this._rDelay,this._repeat<-1&&g)return this.totalTime(100*a+t,e,n);if(r=vt(v%a),v===p?(o=this._repeat,r=m):(o=~~(s=vt(v/a)))&&o===s?(r=m,o--):r>m&&(r=m),(l=this._yoyo&&1&o)&&(f=this._yEase,r=m-r),s=Bt(this._tTime,a),r===h&&!n&&this._initted&&o===s)return this._tTime=v,this;o!==s&&(d&&this._yEase&&De(d,l),this.vars.repeatRefresh&&!l&&!this._lock&&r!==a&&this._initted&&(this._lock=n=1,this.render(vt(a*o),!0).invalidate()._lock=0))}if(!this._initted){if(Ht(this,g?t:r,n,e,v))return this._tTime=0,this;if(!(h===this._time||n&&this.vars.repeatRefresh&&o!==s))return this;if(m!==this._dur)return this.render(t,e,n)}if(this._tTime=v,this._time=r,!this._act&&this._ts&&(this._act=1,this._lazy=0),this.ratio=c=(f||this._ease)(r/m),this._from&&(this.ratio=c=1-c),!h&&v&&!e&&!s&&(me(this,"onStart"),this._tTime!==v))return this;for(i=this._pt;i;)i.r(c,i.d),i=i._next;d&&d.render(t<0?t:d._dur*d._ease(r/this._dur),e,n)||this._startAt&&(this._zTime=t),this._onUpdate&&!e&&(g&&Lt(this,t,0,n),me(this,"onUpdate")),this._repeat&&o!==s&&this.vars.onRepeat&&!e&&this.parent&&me(this,"onRepeat"),v!==this._tDur&&v||this._tTime!==v||(g&&!this._onUpdate&&Lt(this,t,0,!0),(t||!m)&&(v===this._tDur&&this._ts>0||!v&&this._ts<0)&&Ot(this,1),e||g&&!h||!(v||h||l)||(me(this,v===p?"onComplete":"onReverseComplete",!0),this._prom&&!(v<p&&this.timeScale()>0)&&this._prom()))}}else!function(t,e,n,r){var i,o,a,s=t.ratio,l=e<0||!e&&(!t._start&&Vt(t)&&(t._initted||!Qt(t))||(t._ts<0||t._dp._ts<0)&&!Qt(t))?0:1,c=t._rDelay,d=0;if(c&&t._repeat&&(d=Jt(0,t._tDur,e),o=Bt(d,c),t._yoyo&&1&o&&(l=1-l),o!==Bt(t._tTime,c)&&(s=1-l,t.vars.repeatRefresh&&t._initted&&t.invalidate())),l!==s||u||r||t._zTime===A||!e&&t._zTime){if(!t._initted&&Ht(t,e,r,n,d))return;for(a=t._zTime,t._zTime=e||(n?A:0),n||(n=e&&!a),t.ratio=l,t._from&&(l=1-l),t._time=0,t._tTime=d,i=t._pt;i;)i.r(l,i.d),i=i._next;e<0&&Lt(t,e,0,!0),t._onUpdate&&!n&&me(t,"onUpdate"),d&&t._repeat&&!n&&t.parent&&me(t,"onRepeat"),(e>=t._tDur||e<0)&&t.ratio===l&&(l&&Ot(t,1),n||u||(me(t,l?"onComplete":"onReverseComplete",!0),t._prom&&t._prom()))}else t._zTime||(t._zTime=e)}(this,t,e,n);return this},n.targets=function(){return this._targets},n.invalidate=function(e){return(!e||!this.vars.runBackwards)&&(this._startAt=0),this._pt=this._op=this._onUpdate=this._lazy=this.ratio=0,this._ptLookup=[],this.timeline&&this.timeline.invalidate(e),t.prototype.invalidate.call(this,e)},n.resetTo=function(t,e,n,r,i){y||Ie.wake(),this._ts||this.play();var o=Math.min(this._dur,(this._dp._time-this._start)*this._ts);return this._initted||Ke(this,o),function(t,e,n,r,i,o,a,s){var l,u,c,d,f=(t._pt&&t._ptCache||(t._ptCache={}))[e];if(!f)for(f=t._ptCache[e]=[],c=t._ptLookup,d=t._targets.length;d--;){if((l=c[d][e])&&l.d&&l.d._pt)for(l=l.d._pt;l&&l.p!==e&&l.fp!==e;)l=l._next;if(!l)return Ve=1,t.vars[e]="+=0",Ke(t,a),Ve=0,s?Z(e+" not eligible for reset"):1;f.push(l)}for(d=f.length;d--;)(l=(u=f[d])._pt||u).s=!r&&0!==r||i?l.s+(r||0)+o*l.c:r,l.c=n-l.s,u.e&&(u.e=gt(n)+te(u.e)),u.b&&(u.b=l.s+te(u.b))}(this,t,e,n,r,this._ease(o/this._dur),o,i)?this.resetTo(t,e,n,r,1):(Ft(this,0),this.parent||Pt(this._dp,this,"_first","_last",this._dp._sort?"_start":0),this.render(0))},n.kill=function(t,e){if(void 0===e&&(e="all"),!(t||e&&"all"!==e))return this._lazy=this._pt=0,this.parent?ge(this):this.scrollTrigger&&this.scrollTrigger.kill(!!u),this;if(this.timeline){var n=this.timeline.totalDuration();return this.timeline.killTweensOf(t,e,He&&!0!==He.vars.overwrite)._first||ge(this),this.parent&&n!==this.timeline.totalDuration()&&Wt(this,this._dur*this.timeline._tDur/n,0,1),this}var r,i,o,a,s,l,c,d=this._targets,f=t?ie(t):d,h=this._ptLookup,p=this._pt;if((!e||"all"===e)&&function(t,e){for(var n=t.length,r=n===e.length;r&&n--&&t[n]===e[n];);return n<0}(d,f))return"all"===e&&(this._pt=0),ge(this);for(r=this._op=this._op||[],"all"!==e&&(k(e)&&(s={},mt(e,(function(t){return s[t]=1})),e=s),e=function(t,e){var n,r,i,o,a=t[0]?ht(t[0]).harness:0,s=a&&a.aliases;if(!s)return e;for(r in n=Tt({},e),s)if(r in n)for(i=(o=s[r].split(",")).length;i--;)n[o[i]]=n[r];return n}(d,e)),c=d.length;c--;)if(~f.indexOf(d[c]))for(s in i=h[c],"all"===e?(r[c]=e,a=i,o={}):(o=r[c]=r[c]||{},a=e),a)(l=i&&i[s])&&("kill"in l.d&&!0!==l.d.kill(s)||Rt(this,l,"_pt"),delete i[s]),"all"!==o&&(o[s]=1);return this._initted&&!this._pt&&p&&ge(this),this},e.to=function(t,n){return new e(t,n,arguments[2])},e.from=function(t,e){return $t(1,arguments)},e.delayedCall=function(t,n,r,i){return new e(n,0,{immediateRender:!1,lazy:!1,overwrite:!1,delay:t,onComplete:n,onReverseComplete:n,onCompleteParams:r,onReverseCompleteParams:r,callbackScope:i})},e.fromTo=function(t,e,n){return $t(2,arguments)},e.set=function(t,n){return n.duration=0,n.repeatDelay||(n.repeat=0),new e(t,n)},e.killTweensOf=function(t,e,n){return d.killTweensOf(t,e,n)},e}(qe);St(tn.prototype,{_targets:[],_lazy:0,_startAt:0,_op:0,_onInit:0}),mt("staggerTo,staggerFrom,staggerFromTo",(function(t){tn[t]=function(){var e=new Ge,n=ee.call(arguments,0);return n.splice("staggerFromTo"===t?5:4,0,0),e[t].apply(e,n)}}));var en=function(t,e,n){return t[e]=n},nn=function(t,e,n){return t[e](n)},rn=function(t,e,n,r){return t[e](r.fp,n)},on=function(t,e,n){return t.setAttribute(e,n)},an=function(t,e){return P(t[e])?nn:O(t[e])&&t.setAttribute?on:en},sn=function(t,e){return e.set(e.t,e.p,Math.round(1e6*(e.s+e.c*t))/1e6,e)},ln=function(t,e){return e.set(e.t,e.p,!!(e.s+e.c*t),e)},un=function(t,e){var n=e._pt,r="";if(!t&&e.b)r=e.b;else if(1===t&&e.e)r=e.e;else{for(;n;)r=n.p+(n.m?n.m(n.s+n.c*t):Math.round(1e4*(n.s+n.c*t))/1e4)+r,n=n._next;r+=e.c}e.set(e.t,e.p,r,e)},cn=function(t,e){for(var n=e._pt;n;)n.r(t,n.d),n=n._next},dn=function(t,e,n,r){for(var i,o=this._pt;o;)i=o._next,o.p===r&&o.modifier(t,e,n),o=i},fn=function(t){for(var e,n,r=this._pt;r;)n=r._next,r.p===t&&!r.op||r.op===t?Rt(this,r,"_pt"):r.dep||(e=1),r=n;return!e},hn=function(t,e,n,r){r.mSet(t,e,r.m.call(r.tween,n,r.mt),r)},pn=function(t){for(var e,n,r,i,o=t._pt;o;){for(e=o._next,n=r;n&&n.pr>o.pr;)n=n._next;(o._prev=n?n._prev:i)?o._prev._next=o:r=o,(o._next=n)?n._prev=o:i=o,o=e}t._pt=r},mn=function(){function t(t,e,n,r,i,o,a,s,l){this.t=e,this.s=r,this.c=i,this.p=n,this.r=o||sn,this.d=a||this,this.set=s||en,this.pr=l||0,this._next=t,t&&(t._prev=this)}return t.prototype.modifier=function(t,e,n){this.mSet=this.mSet||this.set,this.set=hn,this.m=t,this.mt=n,this.tween=e},t}();mt(dt+"parent,duration,ease,delay,overwrite,runBackwards,startAt,yoyo,immediateRender,repeat,repeatDelay,data,paused,reversed,lazy,callbackScope,stringFilter,id,yoyoEase,stagger,inherit,repeatRefresh,keyframes,autoRevert,scrollTrigger",(function(t){return it[t]=1})),Y.TweenMax=Y.TweenLite=tn,Y.TimelineLite=Y.TimelineMax=Ge,d=new Ge({sortChildren:!1,defaults:_,autoRemoveChildren:!0,id:"root",smoothChildTiming:!0}),b.stringFilter=Ce;var gn=[],vn={},yn=[],bn=0,_n=0,wn=function(t){return(vn[t]||yn).map((function(t){return t()}))},An=function(){var t=Date.now(),e=[];t-bn>2&&(wn("matchMediaInit"),gn.forEach((function(t){var n,r,i,o,a=t.queries,s=t.conditions;for(r in a)(n=f.matchMedia(a[r]).matches)&&(i=1),n!==s[r]&&(s[r]=n,o=1);o&&(t.revert(),i&&e.push(t))})),wn("matchMediaRevert"),e.forEach((function(t){return t.onMatch(t,(function(e){return t.add(null,e)}))})),bn=t,wn("matchMedia"))},En=function(){function t(t,e){this.selector=e&&oe(e),this.data=[],this._r=[],this.isReverted=!1,this.id=_n++,t&&this.add(t)}var e=t.prototype;return e.add=function(t,e,n){P(t)&&(n=e,e=t,t=P);var r=this,i=function(){var t,i=c,o=r.selector;return i&&i!==r&&i.data.push(r),n&&(r.selector=oe(n)),c=r,t=e.apply(r,arguments),P(t)&&r._r.push(t),c=i,r.selector=o,r.isReverted=!1,t};return r.last=i,t===P?i(r,(function(t){return r.add(null,t)})):t?r[t]=i:i},e.ignore=function(t){var e=c;c=null,t(this),c=e},e.getTweens=function(){var e=[];return this.data.forEach((function(n){return n instanceof t?e.push.apply(e,n.getTweens()):n instanceof tn&&!(n.parent&&"nested"===n.parent.data)&&e.push(n)})),e},e.clear=function(){this._r.length=this.data.length=0},e.kill=function(t,e){var n=this;if(t?function(){for(var e,r=n.getTweens(),i=n.data.length;i--;)"isFlip"===(e=n.data[i]).data&&(e.revert(),e.getChildren(!0,!0,!1).forEach((function(t){return r.splice(r.indexOf(t),1)})));for(r.map((function(t){return{g:t._dur||t._delay||t._sat&&!t._sat.vars.immediateRender?t.globalTime(0):-1/0,t}})).sort((function(t,e){return e.g-t.g||-1/0})).forEach((function(e){return e.t.revert(t)})),i=n.data.length;i--;)(e=n.data[i])instanceof Ge?"nested"!==e.data&&(e.scrollTrigger&&e.scrollTrigger.revert(),e.kill()):!(e instanceof tn)&&e.revert&&e.revert(t);n._r.forEach((function(e){return e(t,n)})),n.isReverted=!0}():this.data.forEach((function(t){return t.kill&&t.kill()})),this.clear(),e)for(var r=gn.length;r--;)gn[r].id===this.id&&gn.splice(r,1)},e.revert=function(t){this.kill(t||{})},t}(),xn=function(){function t(t){this.contexts=[],this.scope=t,c&&c.data.push(this)}var e=t.prototype;return e.add=function(t,e,n){M(t)||(t={matches:t});var r,i,o,a=new En(0,n||this.scope),s=a.conditions={};for(i in c&&!a.selector&&(a.selector=c.selector),this.contexts.push(a),e=a.add("onMatch",e),a.queries=t,t)"all"===i?o=1:(r=f.matchMedia(t[i]))&&(gn.indexOf(a)<0&&gn.push(a),(s[i]=r.matches)&&(o=1),r.addListener?r.addListener(An):r.addEventListener("change",An));return o&&e(a,(function(t){return a.add(null,t)})),this},e.revert=function(t){this.kill(t||{})},e.kill=function(t){this.contexts.forEach((function(e){return e.kill(t,!0)}))},t}(),Sn={registerPlugin:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];e.forEach((function(t){return ye(t)}))},timeline:function(t){return new Ge(t)},getTweensOf:function(t,e){return d.getTweensOf(t,e)},getProperty:function(t,e,n,r){k(t)&&(t=ie(t)[0]);var i=ht(t||{}).get,o=n?xt:Et;return"native"===n&&(n=""),t?e?o((st[e]&&st[e].get||i)(t,e,n,r)):function(e,n,r){return o((st[e]&&st[e].get||i)(t,e,n,r))}:t},quickSetter:function(t,e,n){if((t=ie(t)).length>1){var r=t.map((function(t){return In.quickSetter(t,e,n)})),i=r.length;return function(t){for(var e=i;e--;)r[e](t)}}t=t[0]||{};var o=st[e],a=ht(t),s=a.harness&&(a.harness.aliases||{})[e]||e,l=o?function(e){var r=new o;v._pt=0,r.init(t,n?e+n:e,v,0,[t]),r.render(1,r),v._pt&&cn(1,v)}:a.set(t,s);return o?l:function(e){return l(t,s,n?e+n:e,a,1)}},quickTo:function(t,e,n){var r,i=In.to(t,St(((r={})[e]="+=0.1",r.paused=!0,r.stagger=0,r),n||{})),o=function(t,n,r){return i.resetTo(e,t,n,r)};return o.tween=i,o},isTweening:function(t){return d.getTweensOf(t,!0).length>0},defaults:function(t){return t&&t.ease&&(t.ease=Ne(t.ease,_.ease)),Ct(_,t||{})},config:function(t){return Ct(b,t||{})},registerEffect:function(t){var e=t.name,n=t.effect,r=t.plugins,i=t.defaults,o=t.extendTimeline;(r||"").split(",").forEach((function(t){return t&&!st[t]&&!Y[t]&&Z(e+" effect requires "+t+" plugin.")})),lt[e]=function(t,e,r){return n(ie(t),St(e||{},i),r)},o&&(Ge.prototype[e]=function(t,n,r){return this.add(lt[e](t,M(n)?n:(r=n)&&{},this),r)})},registerEase:function(t,e){Pe[t]=Ne(e)},parseEase:function(t,e){return arguments.length?Ne(t,e):Pe},getById:function(t){return d.getById(t)},exportRoot:function(t,e){void 0===t&&(t={});var n,r,i=new Ge(t);for(i.smoothChildTiming=L(t.smoothChildTiming),d.remove(i),i._dp=0,i._time=i._tTime=d._time,n=d._first;n;)r=n._next,!e&&!n._dur&&n instanceof tn&&n.vars.onComplete===n._targets[0]||qt(i,n,n._start-n._delay),n=r;return qt(d,i,0),i},context:function(t,e){return t?new En(t,e):c},matchMedia:function(t){return new xn(t)},matchMediaRefresh:function(){return gn.forEach((function(t){var e,n,r=t.conditions;for(n in r)r[n]&&(r[n]=!1,e=1);e&&t.revert()}))||An()},addEventListener:function(t,e){var n=vn[t]||(vn[t]=[]);~n.indexOf(e)||n.push(e)},removeEventListener:function(t,e){var n=vn[t],r=n&&n.indexOf(e);r>=0&&n.splice(r,1)},utils:{wrap:function t(e,n,r){var i=n-e;return j(e)?de(e,t(0,e.length),n):Zt(r,(function(t){return(i+(t-e)%i)%i+e}))},wrapYoyo:function t(e,n,r){var i=n-e,o=2*i;return j(e)?de(e,t(0,e.length-1),n):Zt(r,(function(t){return e+((t=(o+(t-e)%o)%o||0)>i?o-t:t)}))},distribute:se,random:ce,snap:ue,normalize:function(t,e,n){return he(t,e,0,1,n)},getUnit:te,clamp:function(t,e,n){return Zt(n,(function(n){return Jt(t,e,n)}))},splitColor:Ae,toArray:ie,selector:oe,mapRange:he,pipe:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return function(t){return e.reduce((function(t,e){return e(t)}),t)}},unitize:function(t,e){return function(n){return t(parseFloat(n))+(e||te(n))}},interpolate:function t(e,n,r,i){var o=isNaN(e+n)?0:function(t){return(1-t)*e+t*n};if(!o){var a,s,l,u,c,d=k(e),f={};if(!0===r&&(i=1)&&(r=null),d)e={p:e},n={p:n};else if(j(e)&&!j(n)){for(l=[],u=e.length,c=u-2,s=1;s<u;s++)l.push(t(e[s-1],e[s]));u--,o=function(t){t*=u;var e=Math.min(c,~~t);return l[e](t-e)},r=n}else i||(e=Tt(j(e)?[]:{},e));if(!l){for(a in n)We.call(f,e,a,"get",n[a]);o=function(t){return cn(t,f)||(d?e.p:e)}}}return Zt(r,o)},shuffle:ae},install:X,effects:lt,ticker:Ie,updateRoot:Ge.updateRoot,plugins:st,globalTimeline:d,core:{PropTween:mn,globals:J,Tween:tn,Timeline:Ge,Animation:qe,getCache:ht,_removeLinkedListItem:Rt,reverting:function(){return u},context:function(t){return t&&c&&(c.data.push(t),t._ctx=c),c},suppressOverwrites:function(t){return l=t}}};mt("to,from,fromTo,delayedCall,set,killTweensOf",(function(t){return Sn[t]=tn[t]})),Ie.add(Ge.updateRoot),v=Sn.to({},{duration:0});var Tn=function(t,e){for(var n=t._pt;n&&n.p!==e&&n.op!==e&&n.fp!==e;)n=n._next;return n},Cn=function(t,e){return{name:t,headless:1,rawVars:1,init:function(t,n,r){r._onInit=function(t){var r,i;if(k(n)&&(r={},mt(n,(function(t){return r[t]=1})),n=r),e){for(i in r={},n)r[i]=e(n[i]);n=r}!function(t,e){var n,r,i,o=t._targets;for(n in e)for(r=o.length;r--;)(i=t._ptLookup[r][n])&&(i=i.d)&&(i._pt&&(i=Tn(i,n)),i&&i.modifier&&i.modifier(e[n],t,o[r],n))}(t,n)}}}},In=Sn.registerPlugin({name:"attr",init:function(t,e,n,r,i){var o,a,s;for(o in this.tween=n,e)s=t.getAttribute(o)||"",(a=this.add(t,"setAttribute",(s||0)+"",e[o],r,i,0,0,o)).op=o,a.b=s,this._props.push(o)},render:function(t,e){for(var n=e._pt;n;)u?n.set(n.t,n.p,n.b,n):n.r(t,n.d),n=n._next}},{name:"endArray",headless:1,init:function(t,e){for(var n=e.length;n--;)this.add(t,n,t[n]||0,e[n],0,0,0,0,0,1)}},Cn("roundProps",le),Cn("modifiers"),Cn("snap",ue))||Sn;tn.version=Ge.version=In.version="3.14.2",m=1,D()&&ke();Pe.Power0,Pe.Power1,Pe.Power2,Pe.Power3,Pe.Power4;var kn,Pn,Rn,On,Mn,Ln,Dn,Nn,Bn=Pe.Linear,jn=(Pe.Quad,Pe.Cubic,Pe.Quart,Pe.Quint),zn=(Pe.Strong,Pe.Elastic,Pe.Back,Pe.SteppedEase,Pe.Bounce,Pe.Sine,Pe.Expo,Pe.Circ,{}),Fn=180/Math.PI,Un=Math.PI/180,qn=Math.atan2,Gn=/([A-Z])/g,Hn=/(left|right|width|margin|padding|x)/i,Vn=/[\s,\(]\S/,Qn={autoAlpha:"opacity,visibility",scale:"scaleX,scaleY",alpha:"opacity"},Wn=function(t,e){return e.set(e.t,e.p,Math.round(1e4*(e.s+e.c*t))/1e4+e.u,e)},Yn=function(t,e){return e.set(e.t,e.p,1===t?e.e:Math.round(1e4*(e.s+e.c*t))/1e4+e.u,e)},Kn=function(t,e){return e.set(e.t,e.p,t?Math.round(1e4*(e.s+e.c*t))/1e4+e.u:e.b,e)},Xn=function(t,e){return e.set(e.t,e.p,1===t?e.e:t?Math.round(1e4*(e.s+e.c*t))/1e4+e.u:e.b,e)},$n=function(t,e){var n=e.s+e.c*t;e.set(e.t,e.p,~~(n+(n<0?-.5:.5))+e.u,e)},Zn=function(t,e){return e.set(e.t,e.p,t?e.e:e.b,e)},Jn=function(t,e){return e.set(e.t,e.p,1!==t?e.b:e.e,e)},tr=function(t,e,n){return t.style[e]=n},er=function(t,e,n){return t.style.setProperty(e,n)},nr=function(t,e,n){return t._gsap[e]=n},rr=function(t,e,n){return t._gsap.scaleX=t._gsap.scaleY=n},ir=function(t,e,n,r,i){var o=t._gsap;o.scaleX=o.scaleY=n,o.renderTransform(i,o)},or=function(t,e,n,r,i){var o=t._gsap;o[e]=n,o.renderTransform(i,o)},ar="transform",sr=ar+"Origin",lr=function t(e,n){var r=this,i=this.target,o=i.style,a=i._gsap;if(e in zn&&o){if(this.tfm=this.tfm||{},"transform"===e)return Qn.transform.split(",").forEach((function(e){return t.call(r,e,n)}));if(~(e=Qn[e]||e).indexOf(",")?e.split(",").forEach((function(t){return r.tfm[t]=Tr(i,t)})):this.tfm[e]=a.x?a[e]:Tr(i,e),e===sr&&(this.tfm.zOrigin=a.zOrigin),this.props.indexOf(ar)>=0)return;a.svg&&(this.svgo=i.getAttribute("data-svg-origin"),this.props.push(sr,n,"")),e=ar}(o||n)&&this.props.push(e,n,o[e])},ur=function(t){t.translate&&(t.removeProperty("translate"),t.removeProperty("scale"),t.removeProperty("rotate"))},cr=function(){var t,e,n=this.props,r=this.target,i=r.style,o=r._gsap;for(t=0;t<n.length;t+=3)n[t+1]?2===n[t+1]?r[n[t]](n[t+2]):r[n[t]]=n[t+2]:n[t+2]?i[n[t]]=n[t+2]:i.removeProperty("--"===n[t].substr(0,2)?n[t]:n[t].replace(Gn,"-$1").toLowerCase());if(this.tfm){for(e in this.tfm)o[e]=this.tfm[e];o.svg&&(o.renderTransform(),r.setAttribute("data-svg-origin",this.svgo||"")),(t=Dn())&&t.isStart||i[ar]||(ur(i),o.zOrigin&&i[sr]&&(i[sr]+=" "+o.zOrigin+"px",o.zOrigin=0,o.renderTransform()),o.uncache=1)}},dr=function(t,e){var n={target:t,props:[],revert:cr,save:lr};return t._gsap||In.core.getCache(t),e&&t.style&&t.nodeType&&e.split(",").forEach((function(t){return n.save(t)})),n},fr=function(t,e){var n=Pn.createElementNS?Pn.createElementNS((e||"http://www.w3.org/1999/xhtml").replace(/^https/,"http"),t):Pn.createElement(t);return n&&n.style?n:Pn.createElement(t)},hr=function t(e,n,r){var i=getComputedStyle(e);return i[n]||i.getPropertyValue(n.replace(Gn,"-$1").toLowerCase())||i.getPropertyValue(n)||!r&&t(e,mr(n)||n,1)||""},pr="O,Moz,ms,Ms,Webkit".split(","),mr=function(t,e,n){var r=(e||Mn).style,i=5;if(t in r&&!n)return t;for(t=t.charAt(0).toUpperCase()+t.substr(1);i--&&!(pr[i]+t in r););return i<0?null:(3===i?"ms":i>=0?pr[i]:"")+t},gr=function(){"undefined"!=typeof window&&window.document&&(kn=window,Pn=kn.document,Rn=Pn.documentElement,Mn=fr("div")||{style:{}},fr("div"),ar=mr(ar),sr=ar+"Origin",Mn.style.cssText="border-width:0;line-height:0;position:absolute;padding:0",Nn=!!mr("perspective"),Dn=In.core.reverting,On=1)},vr=function(t){var e,n=t.ownerSVGElement,r=fr("svg",n&&n.getAttribute("xmlns")||"http://www.w3.org/2000/svg"),i=t.cloneNode(!0);i.style.display="block",r.appendChild(i),Rn.appendChild(r);try{e=i.getBBox()}catch(t){}return r.removeChild(i),Rn.removeChild(r),e},yr=function(t,e){for(var n=e.length;n--;)if(t.hasAttribute(e[n]))return t.getAttribute(e[n])},br=function(t){var e,n;try{e=t.getBBox()}catch(r){e=vr(t),n=1}return e&&(e.width||e.height)||n||(e=vr(t)),!e||e.width||e.x||e.y?e:{x:+yr(t,["x","cx","x1"])||0,y:+yr(t,["y","cy","y1"])||0,width:0,height:0}},_r=function(t){return!(!t.getCTM||t.parentNode&&!t.ownerSVGElement||!br(t))},wr=function(t,e){if(e){var n,r=t.style;e in zn&&e!==sr&&(e=ar),r.removeProperty?("ms"!==(n=e.substr(0,2))&&"webkit"!==e.substr(0,6)||(e="-"+e),r.removeProperty("--"===n?e:e.replace(Gn,"-$1").toLowerCase())):r.removeAttribute(e)}},Ar=function(t,e,n,r,i,o){var a=new mn(t._pt,e,n,0,1,o?Jn:Zn);return t._pt=a,a.b=r,a.e=i,t._props.push(n),a},Er={deg:1,rad:1,turn:1},xr={grid:1,flex:1},Sr=function t(e,n,r,i){var o,a,s,l,u=parseFloat(r)||0,c=(r+"").trim().substr((u+"").length)||"px",d=Mn.style,f=Hn.test(n),h="svg"===e.tagName.toLowerCase(),p=(h?"client":"offset")+(f?"Width":"Height"),m=100,g="px"===i,v="%"===i;if(i===c||!u||Er[i]||Er[c])return u;if("px"!==c&&!g&&(u=t(e,n,r,"px")),l=e.getCTM&&_r(e),(v||"%"===c)&&(zn[n]||~n.indexOf("adius")))return o=l?e.getBBox()[f?"width":"height"]:e[p],gt(v?u/o*m:u/100*o);if(d[f?"width":"height"]=m+(g?c:i),a="rem"!==i&&~n.indexOf("adius")||"em"===i&&e.appendChild&&!h?e:e.parentNode,l&&(a=(e.ownerSVGElement||{}).parentNode),a&&a!==Pn&&a.appendChild||(a=Pn.body),(s=a._gsap)&&v&&s.width&&f&&s.time===Ie.time&&!s.uncache)return gt(u/s.width*m);if(!v||"height"!==n&&"width"!==n)(v||"%"===c)&&!xr[hr(a,"display")]&&(d.position=hr(e,"position")),a===e&&(d.position="static"),a.appendChild(Mn),o=Mn[p],a.removeChild(Mn),d.position="absolute";else{var y=e.style[n];e.style[n]=m+i,o=e[p],y?e.style[n]=y:wr(e,n)}return f&&v&&((s=ht(a)).time=Ie.time,s.width=a[p]),gt(g?o*u/m:o&&u?m/o*u:0)},Tr=function(t,e,n,r){var i;return On||gr(),e in Qn&&"transform"!==e&&~(e=Qn[e]).indexOf(",")&&(e=e.split(",")[0]),zn[e]&&"transform"!==e?(i=jr(t,r),i="transformOrigin"!==e?i[e]:i.svg?i.origin:zr(hr(t,sr))+" "+i.zOrigin+"px"):(!(i=t.style[e])||"auto"===i||r||~(i+"").indexOf("calc("))&&(i=Rr[e]&&Rr[e](t,e,n)||hr(t,e)||pt(t,e)||("opacity"===e?1:0)),n&&!~(i+"").trim().indexOf(" ")?Sr(t,e,i,n)+n:i},Cr=function(t,e,n,r){if(!n||"none"===n){var i=mr(e,t,1),o=i&&hr(t,i,1);o&&o!==n?(e=i,n=o):"borderColor"===e&&(n=hr(t,"borderTopColor"))}var a,s,l,u,c,d,f,h,p,m,g,v=new mn(this._pt,t.style,e,0,1,un),y=0,_=0;if(v.b=n,v.e=r,n+="","var(--"===(r+="").substring(0,6)&&(r=hr(t,r.substring(4,r.indexOf(")")))),"auto"===r&&(d=t.style[e],t.style[e]=r,r=hr(t,e)||r,d?t.style[e]=d:wr(t,e)),Ce(a=[n,r]),r=a[1],l=(n=a[0]).match(G)||[],(r.match(G)||[]).length){for(;s=G.exec(r);)f=s[0],p=r.substring(y,s.index),c?c=(c+1)%5:"rgba("!==p.substr(-5)&&"hsla("!==p.substr(-5)||(c=1),f!==(d=l[_++]||"")&&(u=parseFloat(d)||0,g=d.substr((u+"").length),"="===f.charAt(1)&&(f=yt(u,f)+g),h=parseFloat(f),m=f.substr((h+"").length),y=G.lastIndex-m.length,m||(m=m||b.units[e]||g,y===r.length&&(r+=m,v.e+=m)),g!==m&&(u=Sr(t,e,d,m)||0),v._pt={_next:v._pt,p:p||1===_?p:",",s:u,c:h-u,m:c&&c<4||"zIndex"===e?Math.round:0});v.c=y<r.length?r.substring(y,r.length):""}else v.r="display"===e&&"none"===r?Jn:Zn;return V.test(r)&&(v.e=0),this._pt=v,v},Ir={top:"0%",bottom:"100%",left:"0%",right:"100%",center:"50%"},kr=function(t){var e=t.split(" "),n=e[0],r=e[1]||"50%";return"top"!==n&&"bottom"!==n&&"left"!==r&&"right"!==r||(t=n,n=r,r=t),e[0]=Ir[n]||n,e[1]=Ir[r]||r,e.join(" ")},Pr=function(t,e){if(e.tween&&e.tween._time===e.tween._dur){var n,r,i,o=e.t,a=o.style,s=e.u,l=o._gsap;if("all"===s||!0===s)a.cssText="",r=1;else for(i=(s=s.split(",")).length;--i>-1;)n=s[i],zn[n]&&(r=1,n="transformOrigin"===n?sr:ar),wr(o,n);r&&(wr(o,ar),l&&(l.svg&&o.removeAttribute("transform"),a.scale=a.rotate=a.translate="none",jr(o,1),l.uncache=1,ur(a)))}},Rr={clearProps:function(t,e,n,r,i){if("isFromStart"!==i.data){var o=t._pt=new mn(t._pt,e,n,0,0,Pr);return o.u=r,o.pr=-10,o.tween=i,t._props.push(n),1}}},Or=[1,0,0,1,0,0],Mr={},Lr=function(t){return"matrix(1, 0, 0, 1, 0, 0)"===t||"none"===t||!t},Dr=function(t){var e=hr(t,ar);return Lr(e)?Or:e.substr(7).match(q).map(gt)},Nr=function(t,e){var n,r,i,o,a=t._gsap||ht(t),s=t.style,l=Dr(t);return a.svg&&t.getAttribute("transform")?"1,0,0,1,0,0"===(l=[(i=t.transform.baseVal.consolidate().matrix).a,i.b,i.c,i.d,i.e,i.f]).join(",")?Or:l:(l!==Or||t.offsetParent||t===Rn||a.svg||(i=s.display,s.display="block",(n=t.parentNode)&&(t.offsetParent||t.getBoundingClientRect().width)||(o=1,r=t.nextElementSibling,Rn.appendChild(t)),l=Dr(t),i?s.display=i:wr(t,"display"),o&&(r?n.insertBefore(t,r):n?n.appendChild(t):Rn.removeChild(t))),e&&l.length>6?[l[0],l[1],l[4],l[5],l[12],l[13]]:l)},Br=function(t,e,n,r,i,o){var a,s,l,u=t._gsap,c=i||Nr(t,!0),d=u.xOrigin||0,f=u.yOrigin||0,h=u.xOffset||0,p=u.yOffset||0,m=c[0],g=c[1],v=c[2],y=c[3],b=c[4],_=c[5],w=e.split(" "),A=parseFloat(w[0])||0,E=parseFloat(w[1])||0;n?c!==Or&&(s=m*y-g*v)&&(l=A*(-g/s)+E*(m/s)-(m*_-g*b)/s,A=A*(y/s)+E*(-v/s)+(v*_-y*b)/s,E=l):(A=(a=br(t)).x+(~w[0].indexOf("%")?A/100*a.width:A),E=a.y+(~(w[1]||w[0]).indexOf("%")?E/100*a.height:E)),r||!1!==r&&u.smooth?(b=A-d,_=E-f,u.xOffset=h+(b*m+_*v)-b,u.yOffset=p+(b*g+_*y)-_):u.xOffset=u.yOffset=0,u.xOrigin=A,u.yOrigin=E,u.smooth=!!r,u.origin=e,u.originIsAbsolute=!!n,t.style[sr]="0px 0px",o&&(Ar(o,u,"xOrigin",d,A),Ar(o,u,"yOrigin",f,E),Ar(o,u,"xOffset",h,u.xOffset),Ar(o,u,"yOffset",p,u.yOffset)),t.setAttribute("data-svg-origin",A+" "+E)},jr=function(t,e){var n=t._gsap||new Ue(t);if("x"in n&&!e&&!n.uncache)return n;var r,i,o,a,s,l,u,c,d,f,h,p,m,g,v,y,_,w,A,E,x,S,T,C,I,k,P,R,O,M,L,D,N=t.style,B=n.scaleX<0,j="px",z="deg",F=getComputedStyle(t),U=hr(t,sr)||"0";return r=i=o=l=u=c=d=f=h=0,a=s=1,n.svg=!(!t.getCTM||!_r(t)),F.translate&&("none"===F.translate&&"none"===F.scale&&"none"===F.rotate||(N[ar]=("none"!==F.translate?"translate3d("+(F.translate+" 0 0").split(" ").slice(0,3).join(", ")+") ":"")+("none"!==F.rotate?"rotate("+F.rotate+") ":"")+("none"!==F.scale?"scale("+F.scale.split(" ").join(",")+") ":"")+("none"!==F[ar]?F[ar]:"")),N.scale=N.rotate=N.translate="none"),g=Nr(t,n.svg),n.svg&&(n.uncache?(I=t.getBBox(),U=n.xOrigin-I.x+"px "+(n.yOrigin-I.y)+"px",C=""):C=!e&&t.getAttribute("data-svg-origin"),Br(t,C||U,!!C||n.originIsAbsolute,!1!==n.smooth,g)),p=n.xOrigin||0,m=n.yOrigin||0,g!==Or&&(w=g[0],A=g[1],E=g[2],x=g[3],r=S=g[4],i=T=g[5],6===g.length?(a=Math.sqrt(w*w+A*A),s=Math.sqrt(x*x+E*E),l=w||A?qn(A,w)*Fn:0,(d=E||x?qn(E,x)*Fn+l:0)&&(s*=Math.abs(Math.cos(d*Un))),n.svg&&(r-=p-(p*w+m*E),i-=m-(p*A+m*x))):(D=g[6],M=g[7],P=g[8],R=g[9],O=g[10],L=g[11],r=g[12],i=g[13],o=g[14],u=(v=qn(D,O))*Fn,v&&(C=S*(y=Math.cos(-v))+P*(_=Math.sin(-v)),I=T*y+R*_,k=D*y+O*_,P=S*-_+P*y,R=T*-_+R*y,O=D*-_+O*y,L=M*-_+L*y,S=C,T=I,D=k),c=(v=qn(-E,O))*Fn,v&&(y=Math.cos(-v),L=x*(_=Math.sin(-v))+L*y,w=C=w*y-P*_,A=I=A*y-R*_,E=k=E*y-O*_),l=(v=qn(A,w))*Fn,v&&(C=w*(y=Math.cos(v))+A*(_=Math.sin(v)),I=S*y+T*_,A=A*y-w*_,T=T*y-S*_,w=C,S=I),u&&Math.abs(u)+Math.abs(l)>359.9&&(u=l=0,c=180-c),a=gt(Math.sqrt(w*w+A*A+E*E)),s=gt(Math.sqrt(T*T+D*D)),v=qn(S,T),d=Math.abs(v)>2e-4?v*Fn:0,h=L?1/(L<0?-L:L):0),n.svg&&(C=t.getAttribute("transform"),n.forceCSS=t.setAttribute("transform","")||!Lr(hr(t,ar)),C&&t.setAttribute("transform",C))),Math.abs(d)>90&&Math.abs(d)<270&&(B?(a*=-1,d+=l<=0?180:-180,l+=l<=0?180:-180):(s*=-1,d+=d<=0?180:-180)),e=e||n.uncache,n.x=r-((n.xPercent=r&&(!e&&n.xPercent||(Math.round(t.offsetWidth/2)===Math.round(-r)?-50:0)))?t.offsetWidth*n.xPercent/100:0)+j,n.y=i-((n.yPercent=i&&(!e&&n.yPercent||(Math.round(t.offsetHeight/2)===Math.round(-i)?-50:0)))?t.offsetHeight*n.yPercent/100:0)+j,n.z=o+j,n.scaleX=gt(a),n.scaleY=gt(s),n.rotation=gt(l)+z,n.rotationX=gt(u)+z,n.rotationY=gt(c)+z,n.skewX=d+z,n.skewY=f+z,n.transformPerspective=h+j,(n.zOrigin=parseFloat(U.split(" ")[2])||!e&&n.zOrigin||0)&&(N[sr]=zr(U)),n.xOffset=n.yOffset=0,n.force3D=b.force3D,n.renderTransform=n.svg?Qr:Nn?Vr:Ur,n.uncache=0,n},zr=function(t){return(t=t.split(" "))[0]+" "+t[1]},Fr=function(t,e,n){var r=te(e);return gt(parseFloat(e)+parseFloat(Sr(t,"x",n+"px",r)))+r},Ur=function(t,e){e.z="0px",e.rotationY=e.rotationX="0deg",e.force3D=0,Vr(t,e)},qr="0deg",Gr="0px",Hr=") ",Vr=function(t,e){var n=e||this,r=n.xPercent,i=n.yPercent,o=n.x,a=n.y,s=n.z,l=n.rotation,u=n.rotationY,c=n.rotationX,d=n.skewX,f=n.skewY,h=n.scaleX,p=n.scaleY,m=n.transformPerspective,g=n.force3D,v=n.target,y=n.zOrigin,b="",_="auto"===g&&t&&1!==t||!0===g;if(y&&(c!==qr||u!==qr)){var w,A=parseFloat(u)*Un,E=Math.sin(A),x=Math.cos(A);A=parseFloat(c)*Un,w=Math.cos(A),o=Fr(v,o,E*w*-y),a=Fr(v,a,-Math.sin(A)*-y),s=Fr(v,s,x*w*-y+y)}m!==Gr&&(b+="perspective("+m+Hr),(r||i)&&(b+="translate("+r+"%, "+i+"%) "),(_||o!==Gr||a!==Gr||s!==Gr)&&(b+=s!==Gr||_?"translate3d("+o+", "+a+", "+s+") ":"translate("+o+", "+a+Hr),l!==qr&&(b+="rotate("+l+Hr),u!==qr&&(b+="rotateY("+u+Hr),c!==qr&&(b+="rotateX("+c+Hr),d===qr&&f===qr||(b+="skew("+d+", "+f+Hr),1===h&&1===p||(b+="scale("+h+", "+p+Hr),v.style[ar]=b||"translate(0, 0)"},Qr=function(t,e){var n,r,i,o,a,s=e||this,l=s.xPercent,u=s.yPercent,c=s.x,d=s.y,f=s.rotation,h=s.skewX,p=s.skewY,m=s.scaleX,g=s.scaleY,v=s.target,y=s.xOrigin,b=s.yOrigin,_=s.xOffset,w=s.yOffset,A=s.forceCSS,E=parseFloat(c),x=parseFloat(d);f=parseFloat(f),h=parseFloat(h),(p=parseFloat(p))&&(h+=p=parseFloat(p),f+=p),f||h?(f*=Un,h*=Un,n=Math.cos(f)*m,r=Math.sin(f)*m,i=Math.sin(f-h)*-g,o=Math.cos(f-h)*g,h&&(p*=Un,a=Math.tan(h-p),i*=a=Math.sqrt(1+a*a),o*=a,p&&(a=Math.tan(p),n*=a=Math.sqrt(1+a*a),r*=a)),n=gt(n),r=gt(r),i=gt(i),o=gt(o)):(n=m,o=g,r=i=0),(E&&!~(c+"").indexOf("px")||x&&!~(d+"").indexOf("px"))&&(E=Sr(v,"x",c,"px"),x=Sr(v,"y",d,"px")),(y||b||_||w)&&(E=gt(E+y-(y*n+b*i)+_),x=gt(x+b-(y*r+b*o)+w)),(l||u)&&(a=v.getBBox(),E=gt(E+l/100*a.width),x=gt(x+u/100*a.height)),a="matrix("+n+","+r+","+i+","+o+","+E+","+x+")",v.setAttribute("transform",a),A&&(v.style[ar]=a)},Wr=function(t,e,n,r,i){var o,a,s=360,l=k(i),u=parseFloat(i)*(l&&~i.indexOf("rad")?Fn:1)-r,c=r+u+"deg";return l&&("short"===(o=i.split("_")[1])&&(u%=s)!==u%180&&(u+=u<0?s:-360),"cw"===o&&u<0?u=(u+36e9)%s-~~(u/s)*s:"ccw"===o&&u>0&&(u=(u-36e9)%s-~~(u/s)*s)),t._pt=a=new mn(t._pt,e,n,r,u,Yn),a.e=c,a.u="deg",t._props.push(n),a},Yr=function(t,e){for(var n in e)t[n]=e[n];return t},Kr=function(t,e,n){var r,i,o,a,s,l,u,c=Yr({},n._gsap),d=n.style;for(i in c.svg?(o=n.getAttribute("transform"),n.setAttribute("transform",""),d[ar]=e,r=jr(n,1),wr(n,ar),n.setAttribute("transform",o)):(o=getComputedStyle(n)[ar],d[ar]=e,r=jr(n,1),d[ar]=o),zn)(o=c[i])!==(a=r[i])&&"perspective,force3D,transformOrigin,svgOrigin".indexOf(i)<0&&(s=te(o)!==(u=te(a))?Sr(n,i,o,u):parseFloat(o),l=parseFloat(a),t._pt=new mn(t._pt,r,i,s,l-s,Wn),t._pt.u=u||0,t._props.push(i));Yr(r,c)};mt("padding,margin,Width,Radius",(function(t,e){var n="Top",r="Right",i="Bottom",o="Left",a=(e<3?[n,r,i,o]:[n+o,n+r,i+r,i+o]).map((function(n){return e<2?t+n:"border"+n+t}));Rr[e>1?"border"+t:t]=function(t,e,n,r,i){var o,s;if(arguments.length<4)return o=a.map((function(e){return Tr(t,e,n)})),5===(s=o.join(" ")).split(o[0]).length?o[0]:s;o=(r+"").split(" "),s={},a.forEach((function(t,e){return s[t]=o[e]=o[e]||o[(e-1)/2|0]})),t.init(e,s,i)}}));var Xr,$r,Zr,Jr={name:"css",register:gr,targetTest:function(t){return t.style&&t.nodeType},init:function(t,e,n,r,i){var o,a,s,l,u,c,d,f,h,p,m,g,v,y,_,w,A,E=this._props,x=t.style,S=n.vars.startAt;for(d in On||gr(),this.styles=this.styles||dr(t),w=this.styles.props,this.tween=n,e)if("autoRound"!==d&&(a=e[d],!st[d]||!Ye(d,e,n,r,t,i)))if(u=typeof a,c=Rr[d],"function"===u&&(u=typeof(a=a.call(n,r,t,i))),"string"===u&&~a.indexOf("random(")&&(a=fe(a)),c)c(this,t,d,a,n)&&(_=1);else if("--"===d.substr(0,2))o=(getComputedStyle(t).getPropertyValue(d)+"").trim(),a+="",Se.lastIndex=0,Se.test(o)||(f=te(o),(h=te(a))?f!==h&&(o=Sr(t,d,o,h)+h):f&&(a+=f)),this.add(x,"setProperty",o,a,r,i,0,0,d),E.push(d),w.push(d,0,x[d]);else if("undefined"!==u){if(S&&d in S?(o="function"==typeof S[d]?S[d].call(n,r,t,i):S[d],k(o)&&~o.indexOf("random(")&&(o=fe(o)),te(o+"")||"auto"===o||(o+=b.units[d]||te(Tr(t,d))||""),"="===(o+"").charAt(1)&&(o=Tr(t,d))):o=Tr(t,d),l=parseFloat(o),(p="string"===u&&"="===a.charAt(1)&&a.substr(0,2))&&(a=a.substr(2)),s=parseFloat(a),d in Qn&&("autoAlpha"===d&&(1===l&&"hidden"===Tr(t,"visibility")&&s&&(l=0),w.push("visibility",0,x.visibility),Ar(this,x,"visibility",l?"inherit":"hidden",s?"inherit":"hidden",!s)),"scale"!==d&&"transform"!==d&&~(d=Qn[d]).indexOf(",")&&(d=d.split(",")[0])),m=d in zn){if(this.styles.save(d),A=a,"string"===u&&"var(--"===a.substring(0,6)){if("calc("===(a=hr(t,a.substring(4,a.indexOf(")")))).substring(0,5)){var T=t.style.perspective;t.style.perspective=a,a=hr(t,"perspective"),T?t.style.perspective=T:wr(t,"perspective")}s=parseFloat(a)}if(g||((v=t._gsap).renderTransform&&!e.parseTransform||jr(t,e.parseTransform),y=!1!==e.smoothOrigin&&v.smooth,(g=this._pt=new mn(this._pt,x,ar,0,1,v.renderTransform,v,0,-1)).dep=1),"scale"===d)this._pt=new mn(this._pt,v,"scaleY",v.scaleY,(p?yt(v.scaleY,p+s):s)-v.scaleY||0,Wn),this._pt.u=0,E.push("scaleY",d),d+="X";else{if("transformOrigin"===d){w.push(sr,0,x[sr]),a=kr(a),v.svg?Br(t,a,0,y,0,this):((h=parseFloat(a.split(" ")[2])||0)!==v.zOrigin&&Ar(this,v,"zOrigin",v.zOrigin,h),Ar(this,x,d,zr(o),zr(a)));continue}if("svgOrigin"===d){Br(t,a,1,y,0,this);continue}if(d in Mr){Wr(this,v,d,l,p?yt(l,p+a):a);continue}if("smoothOrigin"===d){Ar(this,v,"smooth",v.smooth,a);continue}if("force3D"===d){v[d]=a;continue}if("transform"===d){Kr(this,a,t);continue}}}else d in x||(d=mr(d)||d);if(m||(s||0===s)&&(l||0===l)&&!Vn.test(a)&&d in x)s||(s=0),(f=(o+"").substr((l+"").length))!==(h=te(a)||(d in b.units?b.units[d]:f))&&(l=Sr(t,d,o,h)),this._pt=new mn(this._pt,m?v:x,d,l,(p?yt(l,p+s):s)-l,m||"px"!==h&&"zIndex"!==d||!1===e.autoRound?Wn:$n),this._pt.u=h||0,m&&A!==a?(this._pt.b=o,this._pt.e=A,this._pt.r=Xn):f!==h&&"%"!==h&&(this._pt.b=o,this._pt.r=Kn);else if(d in x)Cr.call(this,t,d,o,p?p+a:a);else if(d in t)this.add(t,d,o||t[d],p?p+a:a,r,i);else if("parseTransform"!==d){$(d,a);continue}m||(d in x?w.push(d,0,x[d]):"function"==typeof t[d]?w.push(d,2,t[d]()):w.push(d,1,o||t[d])),E.push(d)}_&&pn(this)},render:function(t,e){if(e.tween._time||!Dn())for(var n=e._pt;n;)n.r(t,n.d),n=n._next;else e.styles.revert()},get:Tr,aliases:Qn,getSetter:function(t,e,n){var r=Qn[e];return r&&r.indexOf(",")<0&&(e=r),e in zn&&e!==sr&&(t._gsap.x||Tr(t,"x"))?n&&Ln===n?"scale"===e?rr:nr:(Ln=n||{})&&("scale"===e?ir:or):t.style&&!O(t.style[e])?tr:~e.indexOf("-")?er:an(t,e)},core:{_removeProperty:wr,_getMatrix:Nr}};In.utils.checkPrefix=mr,In.core.getStyleSaver=dr,Zr=mt((Xr="x,y,z,scale,scaleX,scaleY,xPercent,yPercent")+","+($r="rotation,rotationX,rotationY,skewX,skewY")+",transform,transformOrigin,svgOrigin,force3D,smoothOrigin,transformPerspective",(function(t){zn[t]=1})),mt($r,(function(t){b.units[t]="deg",Mr[t]=1})),Qn[Zr[13]]=Xr+","+$r,mt("0:translateX,1:translateY,2:translateZ,8:rotate,8:rotationZ,8:rotateZ,9:rotateX,10:rotateY",(function(t){var e=t.split(":");Qn[e[1]]=Zr[e[0]]})),mt("x,y,z,top,right,bottom,left,width,height,fontSize,padding,margin,perspective",(function(t){b.units[t]="px"})),In.registerPlugin(Jr);var ti=In.registerPlugin(Jr)||In,ei=ti.core.Tween;function ni(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var ri,ii,oi,ai,si,li,ui,ci,di,fi,hi,pi,mi,gi=function(){return ri||"undefined"!=typeof window&&(ri=window.gsap)&&ri.registerPlugin&&ri},vi=1,yi=[],bi=[],_i=[],wi=Date.now,Ai=function(t,e){return e},Ei=function(t,e){return~_i.indexOf(t)&&_i[_i.indexOf(t)+1][e]},xi=function(t){return!!~fi.indexOf(t)},Si=function(t,e,n,r,i){return t.addEventListener(e,n,{passive:!1!==r,capture:!!i})},Ti=function(t,e,n,r){return t.removeEventListener(e,n,!!r)},Ci="scrollLeft",Ii="scrollTop",ki=function(){return hi&&hi.isPressed||bi.cache++},Pi=function(t,e){var n=function n(r){if(r||0===r){vi&&(oi.history.scrollRestoration="manual");var i=hi&&hi.isPressed;r=n.v=Math.round(r)||(hi&&hi.iOS?1:0),t(r),n.cacheID=bi.cache,i&&Ai("ss",r)}else(e||bi.cache!==n.cacheID||Ai("ref"))&&(n.cacheID=bi.cache,n.v=t());return n.v+n.offset};return n.offset=0,t&&n},Ri={s:Ci,p:"left",p2:"Left",os:"right",os2:"Right",d:"width",d2:"Width",a:"x",sc:Pi((function(t){return arguments.length?oi.scrollTo(t,Oi.sc()):oi.pageXOffset||ai[Ci]||si[Ci]||li[Ci]||0}))},Oi={s:Ii,p:"top",p2:"Top",os:"bottom",os2:"Bottom",d:"height",d2:"Height",a:"y",op:Ri,sc:Pi((function(t){return arguments.length?oi.scrollTo(Ri.sc(),t):oi.pageYOffset||ai[Ii]||si[Ii]||li[Ii]||0}))},Mi=function(t,e){return(e&&e._ctx&&e._ctx.selector||ri.utils.toArray)(t)[0]||("string"==typeof t&&!1!==ri.config().nullTargetWarn?console.warn("Element not found:",t):null)},Li=function(t,e){var n=e.s,r=e.sc;xi(t)&&(t=ai.scrollingElement||si);var i=bi.indexOf(t),o=r===Oi.sc?1:2;!~i&&(i=bi.push(t)-1),bi[i+o]||Si(t,"scroll",ki);var a=bi[i+o],s=a||(bi[i+o]=Pi(Ei(t,n),!0)||(xi(t)?r:Pi((function(e){return arguments.length?t[n]=e:t[n]}))));return s.target=t,a||(s.smooth="smooth"===ri.getProperty(t,"scrollBehavior")),s},Di=function(t,e,n){var r=t,i=t,o=wi(),a=o,s=e||50,l=Math.max(500,3*s),u=function(t,e){var l=wi();e||l-o>s?(i=r,r=t,a=o,o=l):n?r+=t:r=i+(t-i)/(l-a)*(o-a)};return{update:u,reset:function(){i=r=n?0:r,a=o=0},getVelocity:function(t){var e=a,s=i,c=wi();return(t||0===t)&&t!==r&&u(t),o===a||c-a>l?0:(r+(n?s:-s))/((n?c:o)-e)*1e3}}},Ni=function(t,e){return e&&!t._gsapAllow&&t.preventDefault(),t.changedTouches?t.changedTouches[0]:t},Bi=function(t){var e=Math.max.apply(Math,t),n=Math.min.apply(Math,t);return Math.abs(e)>=Math.abs(n)?e:n},ji=function(){var t,e,n,r;(di=ri.core.globals().ScrollTrigger)&&di.core&&(t=di.core,e=t.bridge||{},n=t._scrollers,r=t._proxies,n.push.apply(n,bi),r.push.apply(r,_i),bi=n,_i=r,Ai=function(t,n){return e[t](n)})},zi=function(t){return ri=t||gi(),!ii&&ri&&"undefined"!=typeof document&&document.body&&(oi=window,ai=document,si=ai.documentElement,li=ai.body,fi=[oi,ai,si,li],ri.utils.clamp,mi=ri.core.context||function(){},ci="onpointerenter"in li?"pointer":"mouse",ui=Fi.isTouch=oi.matchMedia&&oi.matchMedia("(hover: none), (pointer: coarse)").matches?1:"ontouchstart"in oi||navigator.maxTouchPoints>0||navigator.msMaxTouchPoints>0?2:0,pi=Fi.eventTypes=("ontouchstart"in si?"touchstart,touchmove,touchcancel,touchend":"onpointerdown"in si?"pointerdown,pointermove,pointercancel,pointerup":"mousedown,mousemove,mouseup,mouseup").split(","),setTimeout((function(){return vi=0}),500),ji(),ii=1),ii};Ri.op=Oi,bi.cache=0;var Fi=function(){function t(t){this.init(t)}var e,n,r;return t.prototype.init=function(t){ii||zi(ri)||console.warn("Please gsap.registerPlugin(Observer)"),di||ji();var e=t.tolerance,n=t.dragMinimum,r=t.type,i=t.target,o=t.lineHeight,a=t.debounce,s=t.preventDefault,l=t.onStop,u=t.onStopDelay,c=t.ignore,d=t.wheelSpeed,f=t.event,h=t.onDragStart,p=t.onDragEnd,m=t.onDrag,g=t.onPress,v=t.onRelease,y=t.onRight,b=t.onLeft,_=t.onUp,w=t.onDown,A=t.onChangeX,E=t.onChangeY,x=t.onChange,S=t.onToggleX,T=t.onToggleY,C=t.onHover,I=t.onHoverEnd,k=t.onMove,P=t.ignoreCheck,R=t.isNormalizer,O=t.onGestureStart,M=t.onGestureEnd,L=t.onWheel,D=t.onEnable,N=t.onDisable,B=t.onClick,j=t.scrollSpeed,z=t.capture,F=t.allowClicks,U=t.lockAxis,q=t.onLockAxis;this.target=i=Mi(i)||si,this.vars=t,c&&(c=ri.utils.toArray(c)),e=e||1e-9,n=n||0,d=d||1,j=j||1,r=r||"wheel,touch,pointer",a=!1!==a,o||(o=parseFloat(oi.getComputedStyle(li).lineHeight)||22);var G,H,V,Q,W,Y,K,X=this,$=0,Z=0,J=t.passive||!s&&!1!==t.passive,tt=Li(i,Ri),et=Li(i,Oi),nt=tt(),rt=et(),it=~r.indexOf("touch")&&!~r.indexOf("pointer")&&"pointerdown"===pi[0],ot=xi(i),at=i.ownerDocument||ai,st=[0,0,0],lt=[0,0,0],ut=0,ct=function(){return ut=wi()},dt=function(t,e){return(X.event=t)&&c&&function(t,e){for(var n=e.length;n--;)if(e[n]===t||e[n].contains(t))return!0;return!1}(t.target,c)||e&&it&&"touch"!==t.pointerType||P&&P(t,e)},ft=function(){var t=X.deltaX=Bi(st),n=X.deltaY=Bi(lt),r=Math.abs(t)>=e,i=Math.abs(n)>=e;x&&(r||i)&&x(X,t,n,st,lt),r&&(y&&X.deltaX>0&&y(X),b&&X.deltaX<0&&b(X),A&&A(X),S&&X.deltaX<0!=$<0&&S(X),$=X.deltaX,st[0]=st[1]=st[2]=0),i&&(w&&X.deltaY>0&&w(X),_&&X.deltaY<0&&_(X),E&&E(X),T&&X.deltaY<0!=Z<0&&T(X),Z=X.deltaY,lt[0]=lt[1]=lt[2]=0),(Q||V)&&(k&&k(X),V&&(h&&1===V&&h(X),m&&m(X),V=0),Q=!1),Y&&!(Y=!1)&&q&&q(X),W&&(L(X),W=!1),G=0},ht=function(t,e,n){st[n]+=t,lt[n]+=e,X._vx.update(t),X._vy.update(e),a?G||(G=requestAnimationFrame(ft)):ft()},pt=function(t,e){U&&!K&&(X.axis=K=Math.abs(t)>Math.abs(e)?"x":"y",Y=!0),"y"!==K&&(st[2]+=t,X._vx.update(t,!0)),"x"!==K&&(lt[2]+=e,X._vy.update(e,!0)),a?G||(G=requestAnimationFrame(ft)):ft()},mt=function(t){if(!dt(t,1)){var e=(t=Ni(t,s)).clientX,r=t.clientY,i=e-X.x,o=r-X.y,a=X.isDragging;X.x=e,X.y=r,(a||(i||o)&&(Math.abs(X.startX-e)>=n||Math.abs(X.startY-r)>=n))&&(V||(V=a?2:1),a||(X.isDragging=!0),pt(i,o))}},gt=X.onPress=function(t){dt(t,1)||t&&t.button||(X.axis=K=null,H.pause(),X.isPressed=!0,t=Ni(t),$=Z=0,X.startX=X.x=t.clientX,X.startY=X.y=t.clientY,X._vx.reset(),X._vy.reset(),Si(R?i:at,pi[1],mt,J,!0),X.deltaX=X.deltaY=0,g&&g(X))},vt=X.onRelease=function(t){if(!dt(t,1)){Ti(R?i:at,pi[1],mt,!0);var e=!isNaN(X.y-X.startY),n=X.isDragging,r=n&&(Math.abs(X.x-X.startX)>3||Math.abs(X.y-X.startY)>3),o=Ni(t);!r&&e&&(X._vx.reset(),X._vy.reset(),s&&F&&ri.delayedCall(.08,(function(){if(wi()-ut>300&&!t.defaultPrevented)if(t.target.click)t.target.click();else if(at.createEvent){var e=at.createEvent("MouseEvents");e.initMouseEvent("click",!0,!0,oi,1,o.screenX,o.screenY,o.clientX,o.clientY,!1,!1,!1,!1,0,null),t.target.dispatchEvent(e)}}))),X.isDragging=X.isGesturing=X.isPressed=!1,l&&n&&!R&&H.restart(!0),V&&ft(),p&&n&&p(X),v&&v(X,r)}},yt=function(t){return t.touches&&t.touches.length>1&&(X.isGesturing=!0)&&O(t,X.isDragging)},bt=function(){return(X.isGesturing=!1)||M(X)},_t=function(t){if(!dt(t)){var e=tt(),n=et();ht((e-nt)*j,(n-rt)*j,1),nt=e,rt=n,l&&H.restart(!0)}},wt=function(t){if(!dt(t)){t=Ni(t,s),L&&(W=!0);var e=(1===t.deltaMode?o:2===t.deltaMode?oi.innerHeight:1)*d;ht(t.deltaX*e,t.deltaY*e,0),l&&!R&&H.restart(!0)}},At=function(t){if(!dt(t)){var e=t.clientX,n=t.clientY,r=e-X.x,i=n-X.y;X.x=e,X.y=n,Q=!0,l&&H.restart(!0),(r||i)&&pt(r,i)}},Et=function(t){X.event=t,C(X)},xt=function(t){X.event=t,I(X)},St=function(t){return dt(t)||Ni(t,s)&&B(X)};H=X._dc=ri.delayedCall(u||.25,(function(){X._vx.reset(),X._vy.reset(),H.pause(),l&&l(X)})).pause(),X.deltaX=X.deltaY=0,X._vx=Di(0,50,!0),X._vy=Di(0,50,!0),X.scrollX=tt,X.scrollY=et,X.isDragging=X.isGesturing=X.isPressed=!1,mi(this),X.enable=function(t){return X.isEnabled||(Si(ot?at:i,"scroll",ki),r.indexOf("scroll")>=0&&Si(ot?at:i,"scroll",_t,J,z),r.indexOf("wheel")>=0&&Si(i,"wheel",wt,J,z),(r.indexOf("touch")>=0&&ui||r.indexOf("pointer")>=0)&&(Si(i,pi[0],gt,J,z),Si(at,pi[2],vt),Si(at,pi[3],vt),F&&Si(i,"click",ct,!0,!0),B&&Si(i,"click",St),O&&Si(at,"gesturestart",yt),M&&Si(at,"gestureend",bt),C&&Si(i,ci+"enter",Et),I&&Si(i,ci+"leave",xt),k&&Si(i,ci+"move",At)),X.isEnabled=!0,X.isDragging=X.isGesturing=X.isPressed=Q=V=!1,X._vx.reset(),X._vy.reset(),nt=tt(),rt=et(),t&&t.type&&gt(t),D&&D(X)),X},X.disable=function(){X.isEnabled&&(yi.filter((function(t){return t!==X&&xi(t.target)})).length||Ti(ot?at:i,"scroll",ki),X.isPressed&&(X._vx.reset(),X._vy.reset(),Ti(R?i:at,pi[1],mt,!0)),Ti(ot?at:i,"scroll",_t,z),Ti(i,"wheel",wt,z),Ti(i,pi[0],gt,z),Ti(at,pi[2],vt),Ti(at,pi[3],vt),Ti(i,"click",ct,!0),Ti(i,"click",St),Ti(at,"gesturestart",yt),Ti(at,"gestureend",bt),Ti(i,ci+"enter",Et),Ti(i,ci+"leave",xt),Ti(i,ci+"move",At),X.isEnabled=X.isPressed=X.isDragging=!1,N&&N(X))},X.kill=X.revert=function(){X.disable();var t=yi.indexOf(X);t>=0&&yi.splice(t,1),hi===X&&(hi=0)},yi.push(X),R&&xi(i)&&(hi=X),X.enable(f)},e=t,(n=[{key:"velocityX",get:function(){return this._vx.getVelocity()}},{key:"velocityY",get:function(){return this._vy.getVelocity()}}])&&ni(e.prototype,n),r&&ni(e,r),t}();Fi.version="3.14.2",Fi.create=function(t){return new Fi(t)},Fi.register=zi,Fi.getAll=function(){return yi.slice()},Fi.getById=function(t){return yi.filter((function(e){return e.vars.id===t}))[0]},gi()&&ri.registerPlugin(Fi);var Ui,qi,Gi,Hi,Vi,Qi,Wi,Yi,Ki,Xi,$i,Zi,Ji,to,eo,no,ro,io,oo,ao,so,lo,uo,co,fo,ho,po,mo,go,vo,yo,bo,_o,wo,Ao,Eo,xo,So,To=1,Co=Date.now,Io=Co(),ko=0,Po=0,Ro=function(t,e,n){var r=Vo(t)&&("clamp("===t.substr(0,6)||t.indexOf("max")>-1);return n["_"+e+"Clamp"]=r,r?t.substr(6,t.length-7):t},Oo=function(t,e){return!e||Vo(t)&&"clamp("===t.substr(0,6)?t:"clamp("+t+")"},Mo=function t(){return Po&&requestAnimationFrame(t)},Lo=function(){return to=1},Do=function(){return to=0},No=function(t){return t},Bo=function(t){return Math.round(1e5*t)/1e5||0},jo=function(){return"undefined"!=typeof window},zo=function(){return Ui||jo()&&(Ui=window.gsap)&&Ui.registerPlugin&&Ui},Fo=function(t){return!!~Wi.indexOf(t)},Uo=function(t){return("Height"===t?yo:Gi["inner"+t])||Vi["client"+t]||Qi["client"+t]},qo=function(t){return Ei(t,"getBoundingClientRect")||(Fo(t)?function(){return ns.width=Gi.innerWidth,ns.height=yo,ns}:function(){return pa(t)})},Go=function(t,e){var n=e.s,r=e.d2,i=e.d,o=e.a;return Math.max(0,(n="scroll"+r)&&(o=Ei(t,n))?o()-qo(t)()[i]:Fo(t)?(Vi[n]||Qi[n])-Uo(r):t[n]-t["offset"+r])},Ho=function(t,e){for(var n=0;n<oo.length;n+=3)(!e||~e.indexOf(oo[n+1]))&&t(oo[n],oo[n+1],oo[n+2])},Vo=function(t){return"string"==typeof t},Qo=function(t){return"function"==typeof t},Wo=function(t){return"number"==typeof t},Yo=function(t){return"object"==typeof t},Ko=function(t,e,n){return t&&t.progress(e?0:1)&&n&&t.pause()},Xo=function(t,e){if(t.enabled){var n=t._ctx?t._ctx.add((function(){return e(t)})):e(t);n&&n.totalTime&&(t.callbackAnimation=n)}},$o=Math.abs,Zo="left",Jo="right",ta="bottom",ea="width",na="height",ra="Right",ia="Left",oa="Top",aa="Bottom",sa="padding",la="margin",ua="Width",ca="Height",da="px",fa=function(t){return Gi.getComputedStyle(t)},ha=function(t,e){for(var n in e)n in t||(t[n]=e[n]);return t},pa=function(t,e){var n=e&&"matrix(1, 0, 0, 1, 0, 0)"!==fa(t)[eo]&&Ui.to(t,{x:0,y:0,xPercent:0,yPercent:0,rotation:0,rotationX:0,rotationY:0,scale:1,skewX:0,skewY:0}).progress(1),r=t.getBoundingClientRect();return n&&n.progress(0).kill(),r},ma=function(t,e){var n=e.d2;return t["offset"+n]||t["client"+n]||0},ga=function(t){var e,n=[],r=t.labels,i=t.duration();for(e in r)n.push(r[e]/i);return n},va=function(t){var e=Ui.utils.snap(t),n=Array.isArray(t)&&t.slice(0).sort((function(t,e){return t-e}));return n?function(t,r,i){var o;if(void 0===i&&(i=.001),!r)return e(t);if(r>0){for(t-=i,o=0;o<n.length;o++)if(n[o]>=t)return n[o];return n[o-1]}for(o=n.length,t+=i;o--;)if(n[o]<=t)return n[o];return n[0]}:function(n,r,i){void 0===i&&(i=.001);var o=e(n);return!r||Math.abs(o-n)<i||o-n<0==r<0?o:e(r<0?n-t:n+t)}},ya=function(t,e,n,r){return n.split(",").forEach((function(n){return t(e,n,r)}))},ba=function(t,e,n,r,i){return t.addEventListener(e,n,{passive:!r,capture:!!i})},_a=function(t,e,n,r){return t.removeEventListener(e,n,!!r)},wa=function(t,e,n){(n=n&&n.wheelHandler)&&(t(e,"wheel",n),t(e,"touchmove",n))},Aa={startColor:"green",endColor:"red",indent:0,fontSize:"16px",fontWeight:"normal"},Ea={toggleActions:"play",anticipatePin:0},xa={top:0,left:0,center:.5,bottom:1,right:1},Sa=function(t,e){if(Vo(t)){var n=t.indexOf("="),r=~n?+(t.charAt(n-1)+1)*parseFloat(t.substr(n+1)):0;~n&&(t.indexOf("%")>n&&(r*=e/100),t=t.substr(0,n-1)),t=r+(t in xa?xa[t]*e:~t.indexOf("%")?parseFloat(t)*e/100:parseFloat(t)||0)}return t},Ta=function(t,e,n,r,i,o,a,s){var l=i.startColor,u=i.endColor,c=i.fontSize,d=i.indent,f=i.fontWeight,h=Hi.createElement("div"),p=Fo(n)||"fixed"===Ei(n,"pinType"),m=-1!==t.indexOf("scroller"),g=p?Qi:n,v=-1!==t.indexOf("start"),y=v?l:u,b="border-color:"+y+";font-size:"+c+";color:"+y+";font-weight:"+f+";pointer-events:none;white-space:nowrap;font-family:sans-serif,Arial;z-index:1000;padding:4px 8px;border-width:0;border-style:solid;";return b+="position:"+((m||s)&&p?"fixed;":"absolute;"),(m||s||!p)&&(b+=(r===Oi?Jo:ta)+":"+(o+parseFloat(d))+"px;"),a&&(b+="box-sizing:border-box;text-align:left;width:"+a.offsetWidth+"px;"),h._isStart=v,h.setAttribute("class","gsap-marker-"+t+(e?" marker-"+e:"")),h.style.cssText=b,h.innerText=e||0===e?t+"-"+e:t,g.children[0]?g.insertBefore(h,g.children[0]):g.appendChild(h),h._offset=h["offset"+r.op.d2],Ca(h,0,r,v),h},Ca=function(t,e,n,r){var i={display:"block"},o=n[r?"os2":"p2"],a=n[r?"p2":"os2"];t._isFlipped=r,i[n.a+"Percent"]=r?-100:0,i[n.a]=r?"1px":0,i["border"+o+ua]=1,i["border"+a+ua]=0,i[n.p]=e+"px",Ui.set(t,i)},Ia=[],ka={},Pa=function(){return Co()-ko>34&&(Ao||(Ao=requestAnimationFrame(Ka)))},Ra=function(){(!uo||!uo.isPressed||uo.startX>Qi.clientWidth)&&(bi.cache++,uo?Ao||(Ao=requestAnimationFrame(Ka)):Ka(),ko||Ba("scrollStart"),ko=Co())},Oa=function(){ho=Gi.innerWidth,fo=Gi.innerHeight},Ma=function(t){bi.cache++,(!0===t||!Ji&&!lo&&!Hi.fullscreenElement&&!Hi.webkitFullscreenElement&&(!co||ho!==Gi.innerWidth||Math.abs(Gi.innerHeight-fo)>.25*Gi.innerHeight))&&Yi.restart(!0)},La={},Da=[],Na=function t(){return _a(us,"scrollEnd",t)||Qa(!0)},Ba=function(t){return La[t]&&La[t].map((function(t){return t()}))||Da},ja=[],za=function(t){for(var e=0;e<ja.length;e+=5)(!t||ja[e+4]&&ja[e+4].query===t)&&(ja[e].style.cssText=ja[e+1],ja[e].getBBox&&ja[e].setAttribute("transform",ja[e+2]||""),ja[e+3].uncache=1)},Fa=function(){return bi.forEach((function(t){return Qo(t)&&++t.cacheID&&(t.rec=t())}))},Ua=function(t,e){var n;for(no=0;no<Ia.length;no++)!(n=Ia[no])||e&&n._ctx!==e||(t?n.kill(1):n.revert(!0,!0));bo=!0,e&&za(e),e||Ba("revert")},qa=function(t,e){bi.cache++,(e||!Eo)&&bi.forEach((function(t){return Qo(t)&&t.cacheID++&&(t.rec=0)})),Vo(t)&&(Gi.history.scrollRestoration=go=t)},Ga=0,Ha=function(){Qi.appendChild(vo),yo=!uo&&vo.offsetHeight||Gi.innerHeight,Qi.removeChild(vo)},Va=function(t){return Ki(".gsap-marker-start, .gsap-marker-end, .gsap-marker-scroller-start, .gsap-marker-scroller-end").forEach((function(e){return e.style.display=t?"none":"block"}))},Qa=function(t,e){if(Vi=Hi.documentElement,Qi=Hi.body,Wi=[Gi,Hi,Vi,Qi],!ko||t||bo){Ha(),Eo=us.isRefreshing=!0,bo||Fa();var n=Ba("refreshInit");ao&&us.sort(),e||Ua(),bi.forEach((function(t){Qo(t)&&(t.smooth&&(t.target.style.scrollBehavior="auto"),t(0))})),Ia.slice(0).forEach((function(t){return t.refresh()})),bo=!1,Ia.forEach((function(t){if(t._subPinOffset&&t.pin){var e=t.vars.horizontal?"offsetWidth":"offsetHeight",n=t.pin[e];t.revert(!0,1),t.adjustPinSpacing(t.pin[e]-n),t.refresh()}})),_o=1,Va(!0),Ia.forEach((function(t){var e=Go(t.scroller,t._dir),n="max"===t.vars.end||t._endClamp&&t.end>e,r=t._startClamp&&t.start>=e;(n||r)&&t.setPositions(r?e-1:t.start,n?Math.max(r?e:t.start+1,e):t.end,!0)})),Va(!1),_o=0,n.forEach((function(t){return t&&t.render&&t.render(-1)})),bi.forEach((function(t){Qo(t)&&(t.smooth&&requestAnimationFrame((function(){return t.target.style.scrollBehavior="smooth"})),t.rec&&t(t.rec))})),qa(go,1),Yi.pause(),Ga++,Eo=2,Ka(2),Ia.forEach((function(t){return Qo(t.vars.onRefresh)&&t.vars.onRefresh(t)})),Eo=us.isRefreshing=!1,Ba("refresh")}else ba(us,"scrollEnd",Na)},Wa=0,Ya=1,Ka=function(t){if(2===t||!Eo&&!bo){us.isUpdating=!0,So&&So.update(0);var e=Ia.length,n=Co(),r=n-Io>=50,i=e&&Ia[0].scroll();if(Ya=Wa>i?-1:1,Eo||(Wa=i),r&&(ko&&!to&&n-ko>200&&(ko=0,Ba("scrollEnd")),$i=Io,Io=n),Ya<0){for(no=e;no-- >0;)Ia[no]&&Ia[no].update(0,r);Ya=1}else for(no=0;no<e;no++)Ia[no]&&Ia[no].update(0,r);us.isUpdating=!1}Ao=0},Xa=[Zo,"top",ta,Jo,la+aa,la+ra,la+oa,la+ia,"display","flexShrink","float","zIndex","gridColumnStart","gridColumnEnd","gridRowStart","gridRowEnd","gridArea","justifySelf","alignSelf","placeSelf","order"],$a=Xa.concat([ea,na,"boxSizing","max"+ua,"max"+ca,"position",la,sa,sa+oa,sa+ra,sa+aa,sa+ia]),Za=function(t,e,n,r){if(!t._gsap.swappedIn){for(var i,o=Xa.length,a=e.style,s=t.style;o--;)a[i=Xa[o]]=n[i];a.position="absolute"===n.position?"absolute":"relative","inline"===n.display&&(a.display="inline-block"),s[ta]=s[Jo]="auto",a.flexBasis=n.flexBasis||"auto",a.overflow="visible",a.boxSizing="border-box",a[ea]=ma(t,Ri)+da,a[na]=ma(t,Oi)+da,a[sa]=s[la]=s.top=s[Zo]="0",ts(r),s[ea]=s["max"+ua]=n[ea],s[na]=s["max"+ca]=n[na],s[sa]=n[sa],t.parentNode!==e&&(t.parentNode.insertBefore(e,t),e.appendChild(t)),t._gsap.swappedIn=!0}},Ja=/([A-Z])/g,ts=function(t){if(t){var e,n,r=t.t.style,i=t.length,o=0;for((t.t._gsap||Ui.core.getCache(t.t)).uncache=1;o<i;o+=2)n=t[o+1],e=t[o],n?r[e]=n:r[e]&&r.removeProperty(e.replace(Ja,"-$1").toLowerCase())}},es=function(t){for(var e=$a.length,n=t.style,r=[],i=0;i<e;i++)r.push($a[i],n[$a[i]]);return r.t=t,r},ns={left:0,top:0},rs=function(t,e,n,r,i,o,a,s,l,u,c,d,f,h){Qo(t)&&(t=t(s)),Vo(t)&&"max"===t.substr(0,3)&&(t=d+("="===t.charAt(4)?Sa("0"+t.substr(3),n):0));var p,m,g,v=f?f.time():0;if(f&&f.seek(0),isNaN(t)||(t=+t),Wo(t))f&&(t=Ui.utils.mapRange(f.scrollTrigger.start,f.scrollTrigger.end,0,d,t)),a&&Ca(a,n,r,!0);else{Qo(e)&&(e=e(s));var y,b,_,w,A=(t||"0").split(" ");g=Mi(e,s)||Qi,(y=pa(g)||{})&&(y.left||y.top)||"none"!==fa(g).display||(w=g.style.display,g.style.display="block",y=pa(g),w?g.style.display=w:g.style.removeProperty("display")),b=Sa(A[0],y[r.d]),_=Sa(A[1]||"0",n),t=y[r.p]-l[r.p]-u+b+i-_,a&&Ca(a,_,r,n-_<20||a._isStart&&_>20),n-=n-_}if(h&&(s[h]=t||-.001,t<0&&(t=0)),o){var E=t+n,x=o._isStart;p="scroll"+r.d2,Ca(o,E,r,x&&E>20||!x&&(c?Math.max(Qi[p],Vi[p]):o.parentNode[p])<=E+1),c&&(l=pa(a),c&&(o.style[r.op.p]=l[r.op.p]-r.op.m-o._offset+da))}return f&&g&&(p=pa(g),f.seek(d),m=pa(g),f._caScrollDist=p[r.p]-m[r.p],t=t/f._caScrollDist*d),f&&f.seek(v),f?t:Math.round(t)},is=/(webkit|moz|length|cssText|inset)/i,os=function(t,e,n,r){if(t.parentNode!==e){var i,o,a=t.style;if(e===Qi){for(i in t._stOrig=a.cssText,o=fa(t))+i||is.test(i)||!o[i]||"string"!=typeof a[i]||"0"===i||(a[i]=o[i]);a.top=n,a.left=r}else a.cssText=t._stOrig;Ui.core.getCache(t).uncache=1,e.appendChild(t)}},as=function(t,e,n){var r=e,i=r;return function(e){var o=Math.round(t());return o!==r&&o!==i&&Math.abs(o-r)>3&&Math.abs(o-i)>3&&(e=o,n&&n()),i=r,r=Math.round(e)}},ss=function(t,e,n){var r={};r[e.p]="+="+n,Ui.set(t,r)},ls=function(t,e){var n=Li(t,e),r="_scroll"+e.p2,i=function e(i,o,a,s,l){var u=e.tween,c=o.onComplete,d={};a=a||n();var f=as(n,a,(function(){u.kill(),e.tween=0}));return l=s&&l||0,s=s||i-a,u&&u.kill(),o[r]=i,o.inherit=!1,o.modifiers=d,d[r]=function(){return f(a+s*u.ratio+l*u.ratio*u.ratio)},o.onUpdate=function(){bi.cache++,e.tween&&Ka()},o.onComplete=function(){e.tween=0,c&&c.call(u)},u=e.tween=Ui.to(t,o)};return t[r]=n,n.wheelHandler=function(){return i.tween&&i.tween.kill()&&(i.tween=0)},ba(t,"wheel",n.wheelHandler),us.isTouch&&ba(t,"touchmove",n.wheelHandler),i},us=function(){function t(e,n){qi||t.register(Ui)||console.warn("Please gsap.registerPlugin(ScrollTrigger)"),mo(this),this.init(e,n)}return t.prototype.init=function(e,n){if(this.progress=this.start=0,this.vars&&this.kill(!0,!0),Po){var r,i,o,a,s,l,u,c,d,f,h,p,m,g,v,y,b,_,w,A,E,x,S,T,C,I,k,P,R,O,M,L,D,N,B,j,z,F,U,q,G,H,V=e=ha(Vo(e)||Wo(e)||e.nodeType?{trigger:e}:e,Ea),Q=V.onUpdate,W=V.toggleClass,Y=V.id,K=V.onToggle,X=V.onRefresh,$=V.scrub,Z=V.trigger,J=V.pin,tt=V.pinSpacing,et=V.invalidateOnRefresh,nt=V.anticipatePin,rt=V.onScrubComplete,it=V.onSnapComplete,ot=V.once,at=V.snap,st=V.pinReparent,lt=V.pinSpacer,ut=V.containerAnimation,ct=V.fastScrollEnd,dt=V.preventOverlaps,ft=e.horizontal||e.containerAnimation&&!1!==e.horizontal?Ri:Oi,ht=!$&&0!==$,pt=Mi(e.scroller||Gi),mt=Ui.core.getCache(pt),gt=Fo(pt),vt="fixed"===("pinType"in e?e.pinType:Ei(pt,"pinType")||gt&&"fixed"),yt=[e.onEnter,e.onLeave,e.onEnterBack,e.onLeaveBack],bt=ht&&e.toggleActions.split(" "),_t="markers"in e?e.markers:Ea.markers,wt=gt?0:parseFloat(fa(pt)["border"+ft.p2+ua])||0,At=this,Et=e.onRefreshInit&&function(){return e.onRefreshInit(At)},xt=function(t,e,n){var r=n.d,i=n.d2,o=n.a;return(o=Ei(t,"getBoundingClientRect"))?function(){return o()[r]}:function(){return(e?Uo(i):t["client"+i])||0}}(pt,gt,ft),St=function(t,e){return!e||~_i.indexOf(t)?qo(t):function(){return ns}}(pt,gt),Tt=0,Ct=0,It=0,kt=Li(pt,ft);if(At._startClamp=At._endClamp=!1,At._dir=ft,nt*=45,At.scroller=pt,At.scroll=ut?ut.time.bind(ut):kt,a=kt(),At.vars=e,n=n||e.animation,"refreshPriority"in e&&(ao=1,-9999===e.refreshPriority&&(So=At)),mt.tweenScroll=mt.tweenScroll||{top:ls(pt,Oi),left:ls(pt,Ri)},At.tweenTo=r=mt.tweenScroll[ft.p],At.scrubDuration=function(t){(D=Wo(t)&&t)?L?L.duration(t):L=Ui.to(n,{ease:"expo",totalProgress:"+=0",inherit:!1,duration:D,paused:!0,onComplete:function(){return rt&&rt(At)}}):(L&&L.progress(1).kill(),L=0)},n&&(n.vars.lazy=!1,n._initted&&!At.isReverted||!1!==n.vars.immediateRender&&!1!==e.immediateRender&&n.duration()&&n.render(0,!0,!0),At.animation=n.pause(),n.scrollTrigger=At,At.scrubDuration($),O=0,Y||(Y=n.vars.id)),at&&(Yo(at)&&!at.push||(at={snapTo:at}),"scrollBehavior"in Qi.style&&Ui.set(gt?[Qi,Vi]:pt,{scrollBehavior:"auto"}),bi.forEach((function(t){return Qo(t)&&t.target===(gt?Hi.scrollingElement||Vi:pt)&&(t.smooth=!1)})),o=Qo(at.snapTo)?at.snapTo:"labels"===at.snapTo?function(t){return function(e){return Ui.utils.snap(ga(t),e)}}(n):"labelsDirectional"===at.snapTo?(q=n,function(t,e){return va(ga(q))(t,e.direction)}):!1!==at.directional?function(t,e){return va(at.snapTo)(t,Co()-Ct<500?0:e.direction)}:Ui.utils.snap(at.snapTo),N=at.duration||{min:.1,max:2},N=Yo(N)?Xi(N.min,N.max):Xi(N,N),B=Ui.delayedCall(at.delay||D/2||.1,(function(){var t=kt(),e=Co()-Ct<500,i=r.tween;if(!(e||Math.abs(At.getVelocity())<10)||i||to||Tt===t)At.isActive&&Tt!==t&&B.restart(!0);else{var a,s,c=(t-l)/g,d=n&&!ht?n.totalProgress():c,f=e?0:(d-M)/(Co()-$i)*1e3||0,h=Ui.utils.clamp(-c,1-c,$o(f/2)*f/.185),p=c+(!1===at.inertia?0:h),m=at,v=m.onStart,y=m.onInterrupt,b=m.onComplete;if(a=o(p,At),Wo(a)||(a=p),s=Math.max(0,Math.round(l+a*g)),t<=u&&t>=l&&s!==t){if(i&&!i._initted&&i.data<=$o(s-t))return;!1===at.inertia&&(h=a-c),r(s,{duration:N($o(.185*Math.max($o(p-d),$o(a-d))/f/.05||0)),ease:at.ease||"power3",data:$o(s-t),onInterrupt:function(){return B.restart(!0)&&y&&y(At)},onComplete:function(){At.update(),Tt=kt(),n&&!ht&&(L?L.resetTo("totalProgress",a,n._tTime/n._tDur):n.progress(a)),O=M=n&&!ht?n.totalProgress():At.progress,it&&it(At),b&&b(At)}},t,h*g,s-t-h*g),v&&v(At,r.tween)}}})).pause()),Y&&(ka[Y]=At),(U=(Z=At.trigger=Mi(Z||!0!==J&&J))&&Z._gsap&&Z._gsap.stRevert)&&(U=U(At)),J=!0===J?Z:Mi(J),Vo(W)&&(W={targets:Z,className:W}),J&&(!1===tt||tt===la||(tt=!(!tt&&J.parentNode&&J.parentNode.style&&"flex"===fa(J.parentNode).display)&&sa),At.pin=J,(i=Ui.core.getCache(J)).spacer?v=i.pinState:(lt&&((lt=Mi(lt))&&!lt.nodeType&&(lt=lt.current||lt.nativeElement),i.spacerIsNative=!!lt,lt&&(i.spacerState=es(lt))),i.spacer=_=lt||Hi.createElement("div"),_.classList.add("pin-spacer"),Y&&_.classList.add("pin-spacer-"+Y),i.pinState=v=es(J)),!1!==e.force3D&&Ui.set(J,{force3D:!0}),At.spacer=_=i.spacer,R=fa(J),T=R[tt+ft.os2],A=Ui.getProperty(J),E=Ui.quickSetter(J,ft.a,da),Za(J,_,R),b=es(J)),_t){p=Yo(_t)?ha(_t,Aa):Aa,f=Ta("scroller-start",Y,pt,ft,p,0),h=Ta("scroller-end",Y,pt,ft,p,0,f),w=f["offset"+ft.op.d2];var Pt=Mi(Ei(pt,"content")||pt);c=this.markerStart=Ta("start",Y,Pt,ft,p,w,0,ut),d=this.markerEnd=Ta("end",Y,Pt,ft,p,w,0,ut),ut&&(F=Ui.quickSetter([c,d],ft.a,da)),vt||_i.length&&!0===Ei(pt,"fixedMarkers")||(H=fa(G=gt?Qi:pt).position,G.style.position="absolute"===H||"fixed"===H?H:"relative",Ui.set([f,h],{force3D:!0}),I=Ui.quickSetter(f,ft.a,da),P=Ui.quickSetter(h,ft.a,da))}if(ut){var Rt=ut.vars.onUpdate,Ot=ut.vars.onUpdateParams;ut.eventCallback("onUpdate",(function(){At.update(0,0,1),Rt&&Rt.apply(ut,Ot||[])}))}if(At.previous=function(){return Ia[Ia.indexOf(At)-1]},At.next=function(){return Ia[Ia.indexOf(At)+1]},At.revert=function(t,e){if(!e)return At.kill(!0);var r=!1!==t||!At.enabled,i=Ji;r!==At.isReverted&&(r&&(j=Math.max(kt(),At.scroll.rec||0),It=At.progress,z=n&&n.progress()),c&&[c,d,f,h].forEach((function(t){return t.style.display=r?"none":"block"})),r&&(Ji=At,At.update(r)),!J||st&&At.isActive||(r?function(t,e,n){ts(n);var r=t._gsap;if(r.spacerIsNative)ts(r.spacerState);else if(t._gsap.swappedIn){var i=e.parentNode;i&&(i.insertBefore(t,e),i.removeChild(e))}t._gsap.swappedIn=!1}(J,_,v):Za(J,_,fa(J),C)),r||At.update(r),Ji=i,At.isReverted=r)},At.refresh=function(i,o,p,w){if(!Ji&&At.enabled||o)if(J&&i&&ko)ba(t,"scrollEnd",Na);else{!Eo&&Et&&Et(At),Ji=At,r.tween&&!p&&(r.tween.kill(),r.tween=0),L&&L.pause(),et&&n&&(n.revert({kill:!1}).invalidate(),n.getChildren?n.getChildren(!0,!0,!1).forEach((function(t){return t.vars.immediateRender&&t.render(0,!0,!0)})):n.vars.immediateRender&&n.render(0,!0,!0)),At.isReverted||At.revert(!0,!0),At._subPinOffset=!1;var E,T,I,P,R,O,M,D,N,F,U,q,G,H=xt(),V=St(),Q=ut?ut.duration():Go(pt,ft),W=g<=.01||!g,Y=0,K=w||0,$=Yo(p)?p.end:e.end,nt=e.endTrigger||Z,rt=Yo(p)?p.start:e.start||(0!==e.start&&Z?J?"0 0":"0 100%":0),it=At.pinnedContainer=e.pinnedContainer&&Mi(e.pinnedContainer,At),ot=Z&&Math.max(0,Ia.indexOf(At))||0,at=ot;for(_t&&Yo(p)&&(q=Ui.getProperty(f,ft.p),G=Ui.getProperty(h,ft.p));at-- >0;)(O=Ia[at]).end||O.refresh(0,1)||(Ji=At),!(M=O.pin)||M!==Z&&M!==J&&M!==it||O.isReverted||(F||(F=[]),F.unshift(O),O.revert(!0,!0)),O!==Ia[at]&&(ot--,at--);for(Qo(rt)&&(rt=rt(At)),rt=Ro(rt,"start",At),l=rs(rt,Z,H,ft,kt(),c,f,At,V,wt,vt,Q,ut,At._startClamp&&"_startClamp")||(J?-.001:0),Qo($)&&($=$(At)),Vo($)&&!$.indexOf("+=")&&(~$.indexOf(" ")?$=(Vo(rt)?rt.split(" ")[0]:"")+$:(Y=Sa($.substr(2),H),$=Vo(rt)?rt:(ut?Ui.utils.mapRange(0,ut.duration(),ut.scrollTrigger.start,ut.scrollTrigger.end,l):l)+Y,nt=Z)),$=Ro($,"end",At),u=Math.max(l,rs($||(nt?"100% 0":Q),nt,H,ft,kt()+Y,d,h,At,V,wt,vt,Q,ut,At._endClamp&&"_endClamp"))||-.001,Y=0,at=ot;at--;)(M=(O=Ia[at]||{}).pin)&&O.start-O._pinPush<=l&&!ut&&O.end>0&&(E=O.end-(At._startClamp?Math.max(0,O.start):O.start),(M===Z&&O.start-O._pinPush<l||M===it)&&isNaN(rt)&&(Y+=E*(1-O.progress)),M===J&&(K+=E));if(l+=Y,u+=Y,At._startClamp&&(At._startClamp+=Y),At._endClamp&&!Eo&&(At._endClamp=u||-.001,u=Math.min(u,Go(pt,ft))),g=u-l||(l-=.01)&&.001,W&&(It=Ui.utils.clamp(0,1,Ui.utils.normalize(l,u,j))),At._pinPush=K,c&&Y&&((E={})[ft.a]="+="+Y,it&&(E[ft.p]="-="+kt()),Ui.set([c,d],E)),!J||_o&&At.end>=Go(pt,ft)){if(Z&&kt()&&!ut)for(T=Z.parentNode;T&&T!==Qi;)T._pinOffset&&(l-=T._pinOffset,u-=T._pinOffset),T=T.parentNode}else E=fa(J),P=ft===Oi,I=kt(),x=parseFloat(A(ft.a))+K,!Q&&u>1&&(U={style:U=(gt?Hi.scrollingElement||Vi:pt).style,value:U["overflow"+ft.a.toUpperCase()]},gt&&"scroll"!==fa(Qi)["overflow"+ft.a.toUpperCase()]&&(U.style["overflow"+ft.a.toUpperCase()]="scroll")),Za(J,_,E),b=es(J),T=pa(J,!0),D=vt&&Li(pt,P?Ri:Oi)(),tt?((C=[tt+ft.os2,g+K+da]).t=_,(at=tt===sa?ma(J,ft)+g+K:0)&&(C.push(ft.d,at+da),"auto"!==_.style.flexBasis&&(_.style.flexBasis=at+da)),ts(C),it&&Ia.forEach((function(t){t.pin===it&&!1!==t.vars.pinSpacing&&(t._subPinOffset=!0)})),vt&&kt(j)):(at=ma(J,ft))&&"auto"!==_.style.flexBasis&&(_.style.flexBasis=at+da),vt&&((R={top:T.top+(P?I-l:D)+da,left:T.left+(P?D:I-l)+da,boxSizing:"border-box",position:"fixed"})[ea]=R["max"+ua]=Math.ceil(T.width)+da,R[na]=R["max"+ca]=Math.ceil(T.height)+da,R[la]=R[la+oa]=R[la+ra]=R[la+aa]=R[la+ia]="0",R[sa]=E[sa],R[sa+oa]=E[sa+oa],R[sa+ra]=E[sa+ra],R[sa+aa]=E[sa+aa],R[sa+ia]=E[sa+ia],y=function(t,e,n){for(var r,i=[],o=t.length,a=n?8:0;a<o;a+=2)r=t[a],i.push(r,r in e?e[r]:t[a+1]);return i.t=t.t,i}(v,R,st),Eo&&kt(0)),n?(N=n._initted,so(1),n.render(n.duration(),!0,!0),S=A(ft.a)-x+g+K,k=Math.abs(g-S)>1,vt&&k&&y.splice(y.length-2,2),n.render(0,!0,!0),N||n.invalidate(!0),n.parent||n.totalTime(n.totalTime()),so(0)):S=g,U&&(U.value?U.style["overflow"+ft.a.toUpperCase()]=U.value:U.style.removeProperty("overflow-"+ft.a));F&&F.forEach((function(t){return t.revert(!1,!0)})),At.start=l,At.end=u,a=s=Eo?j:kt(),ut||Eo||(a<j&&kt(j),At.scroll.rec=0),At.revert(!1,!0),Ct=Co(),B&&(Tt=-1,B.restart(!0)),Ji=0,n&&ht&&(n._initted||z)&&n.progress()!==z&&n.progress(z||0,!0).render(n.time(),!0,!0),(W||It!==At.progress||ut||et||n&&!n._initted)&&(n&&!ht&&(n._initted||It||!1!==n.vars.immediateRender)&&n.totalProgress(ut&&l<-.001&&!It?Ui.utils.normalize(l,u,0):It,!0),At.progress=W||(a-l)/g===It?0:It),J&&tt&&(_._pinOffset=Math.round(At.progress*S)),L&&L.invalidate(),isNaN(q)||(q-=Ui.getProperty(f,ft.p),G-=Ui.getProperty(h,ft.p),ss(f,ft,q),ss(c,ft,q-(w||0)),ss(h,ft,G),ss(d,ft,G-(w||0))),W&&!Eo&&At.update(),!X||Eo||m||(m=!0,X(At),m=!1)}},At.getVelocity=function(){return(kt()-s)/(Co()-$i)*1e3||0},At.endAnimation=function(){Ko(At.callbackAnimation),n&&(L?L.progress(1):n.paused()?ht||Ko(n,At.direction<0,1):Ko(n,n.reversed()))},At.labelToScroll=function(t){return n&&n.labels&&(l||At.refresh()||l)+n.labels[t]/n.duration()*g||0},At.getTrailing=function(t){var e=Ia.indexOf(At),n=At.direction>0?Ia.slice(0,e).reverse():Ia.slice(e+1);return(Vo(t)?n.filter((function(e){return e.vars.preventOverlaps===t})):n).filter((function(t){return At.direction>0?t.end<=l:t.start>=u}))},At.update=function(t,e,i){if(!ut||i||t){var o,c,d,h,p,m,v,w=!0===Eo?j:At.scroll(),A=t?0:(w-l)/g,C=A<0?0:A>1?1:A||0,R=At.progress;if(e&&(s=a,a=ut?kt():w,at&&(M=O,O=n&&!ht?n.totalProgress():C)),nt&&J&&!Ji&&!To&&ko&&(!C&&l<w+(w-s)/(Co()-$i)*nt?C=1e-4:1===C&&u>w+(w-s)/(Co()-$i)*nt&&(C=.9999)),C!==R&&At.enabled){if(h=(p=(o=At.isActive=!!C&&C<1)!==(!!R&&R<1))||!!C!=!!R,At.direction=C>R?1:-1,At.progress=C,h&&!Ji&&(c=C&&!R?0:1===C?1:1===R?2:3,ht&&(d=!p&&"none"!==bt[c+1]&&bt[c+1]||bt[c],v=n&&("complete"===d||"reset"===d||d in n))),dt&&(p||v)&&(v||$||!n)&&(Qo(dt)?dt(At):At.getTrailing(dt).forEach((function(t){return t.endAnimation()}))),ht||(!L||Ji||To?n&&n.totalProgress(C,!(!Ji||!Ct&&!t)):(L._dp._time-L._start!==L._time&&L.render(L._dp._time-L._start),L.resetTo?L.resetTo("totalProgress",C,n._tTime/n._tDur):(L.vars.totalProgress=C,L.invalidate().restart()))),J)if(t&&tt&&(_.style[tt+ft.os2]=T),vt){if(h){if(m=!t&&C>R&&u+1>w&&w+1>=Go(pt,ft),st)if(t||!o&&!m)os(J,_);else{var D=pa(J,!0),N=w-l;os(J,Qi,D.top+(ft===Oi?N:0)+da,D.left+(ft===Oi?0:N)+da)}ts(o||m?y:b),k&&C<1&&o||E(x+(1!==C||m?0:S))}}else E(Bo(x+S*C));at&&!r.tween&&!Ji&&!To&&B.restart(!0),W&&(p||ot&&C&&(C<1||!wo))&&Ki(W.targets).forEach((function(t){return t.classList[o||ot?"add":"remove"](W.className)})),Q&&!ht&&!t&&Q(At),h&&!Ji?(ht&&(v&&("complete"===d?n.pause().totalProgress(1):"reset"===d?n.restart(!0).pause():"restart"===d?n.restart(!0):n[d]()),Q&&Q(At)),!p&&wo||(K&&p&&Xo(At,K),yt[c]&&Xo(At,yt[c]),ot&&(1===C?At.kill(!1,1):yt[c]=0),p||yt[c=1===C?1:3]&&Xo(At,yt[c])),ct&&!o&&Math.abs(At.getVelocity())>(Wo(ct)?ct:2500)&&(Ko(At.callbackAnimation),L?L.progress(1):Ko(n,"reverse"===d?1:!C,1))):ht&&Q&&!Ji&&Q(At)}if(P){var z=ut?w/ut.duration()*(ut._caScrollDist||0):w;I(z+(f._isFlipped?1:0)),P(z)}F&&F(-w/ut.duration()*(ut._caScrollDist||0))}},At.enable=function(e,n){At.enabled||(At.enabled=!0,ba(pt,"resize",Ma),gt||ba(pt,"scroll",Ra),Et&&ba(t,"refreshInit",Et),!1!==e&&(At.progress=It=0,a=s=Tt=kt()),!1!==n&&At.refresh())},At.getTween=function(t){return t&&r?r.tween:L},At.setPositions=function(t,e,n,r){if(ut){var i=ut.scrollTrigger,o=ut.duration(),a=i.end-i.start;t=i.start+a*t/o,e=i.start+a*e/o}At.refresh(!1,!1,{start:Oo(t,n&&!!At._startClamp),end:Oo(e,n&&!!At._endClamp)},r),At.update()},At.adjustPinSpacing=function(t){if(C&&t){var e=C.indexOf(ft.d)+1;C[e]=parseFloat(C[e])+t+da,C[1]=parseFloat(C[1])+t+da,ts(C)}},At.disable=function(e,n){if(!1!==e&&At.revert(!0,!0),At.enabled&&(At.enabled=At.isActive=!1,n||L&&L.pause(),j=0,i&&(i.uncache=1),Et&&_a(t,"refreshInit",Et),B&&(B.pause(),r.tween&&r.tween.kill()&&(r.tween=0)),!gt)){for(var o=Ia.length;o--;)if(Ia[o].scroller===pt&&Ia[o]!==At)return;_a(pt,"resize",Ma),gt||_a(pt,"scroll",Ra)}},At.kill=function(t,r){At.disable(t,r),L&&!r&&L.kill(),Y&&delete ka[Y];var o=Ia.indexOf(At);o>=0&&Ia.splice(o,1),o===no&&Ya>0&&no--,o=0,Ia.forEach((function(t){return t.scroller===At.scroller&&(o=1)})),o||Eo||(At.scroll.rec=0),n&&(n.scrollTrigger=null,t&&n.revert({kill:!1}),r||n.kill()),c&&[c,d,f,h].forEach((function(t){return t.parentNode&&t.parentNode.removeChild(t)})),So===At&&(So=0),J&&(i&&(i.uncache=1),o=0,Ia.forEach((function(t){return t.pin===J&&o++})),o||(i.spacer=0)),e.onKill&&e.onKill(At)},Ia.push(At),At.enable(!1,!1),U&&U(At),n&&n.add&&!g){var Mt=At.update;At.update=function(){At.update=Mt,bi.cache++,l||u||At.refresh()},Ui.delayedCall(.01,At.update),g=.01,l=u=0}else At.refresh();J&&function(){if(xo!==Ga){var t=xo=Ga;requestAnimationFrame((function(){return t===Ga&&Qa(!0)}))}}()}else this.update=this.refresh=this.kill=No},t.register=function(e){return qi||(Ui=e||zo(),jo()&&window.document&&t.enable(),qi=Po),qi},t.defaults=function(t){if(t)for(var e in t)Ea[e]=t[e];return Ea},t.disable=function(t,e){Po=0,Ia.forEach((function(n){return n[e?"kill":"disable"](t)})),_a(Gi,"wheel",Ra),_a(Hi,"scroll",Ra),clearInterval(Zi),_a(Hi,"touchcancel",No),_a(Qi,"touchstart",No),ya(_a,Hi,"pointerdown,touchstart,mousedown",Lo),ya(_a,Hi,"pointerup,touchend,mouseup",Do),Yi.kill(),Ho(_a);for(var n=0;n<bi.length;n+=3)wa(_a,bi[n],bi[n+1]),wa(_a,bi[n],bi[n+2])},t.enable=function(){if(Gi=window,Hi=document,Vi=Hi.documentElement,Qi=Hi.body,Ui&&(Ki=Ui.utils.toArray,Xi=Ui.utils.clamp,mo=Ui.core.context||No,so=Ui.core.suppressOverwrites||No,go=Gi.history.scrollRestoration||"auto",Wa=Gi.pageYOffset||0,Ui.core.globals("ScrollTrigger",t),Qi)){Po=1,(vo=document.createElement("div")).style.height="100vh",vo.style.position="absolute",Ha(),Mo(),Fi.register(Ui),t.isTouch=Fi.isTouch,po=Fi.isTouch&&/(iPad|iPhone|iPod|Mac)/g.test(navigator.userAgent),co=1===Fi.isTouch,ba(Gi,"wheel",Ra),Wi=[Gi,Hi,Vi,Qi],Ui.matchMedia?(t.matchMedia=function(t){var e,n=Ui.matchMedia();for(e in t)n.add(e,t[e]);return n},Ui.addEventListener("matchMediaInit",(function(){Fa(),Ua()})),Ui.addEventListener("matchMediaRevert",(function(){return za()})),Ui.addEventListener("matchMedia",(function(){Qa(0,1),Ba("matchMedia")})),Ui.matchMedia().add("(orientation: portrait)",(function(){return Oa(),Oa}))):console.warn("Requires GSAP 3.11.0 or later"),Oa(),ba(Hi,"scroll",Ra);var e,n,r=Qi.hasAttribute("style"),i=Qi.style,o=i.borderTopStyle,a=Ui.core.Animation.prototype;for(a.revert||Object.defineProperty(a,"revert",{value:function(){return this.time(-.01,!0)}}),i.borderTopStyle="solid",e=pa(Qi),Oi.m=Math.round(e.top+Oi.sc())||0,Ri.m=Math.round(e.left+Ri.sc())||0,o?i.borderTopStyle=o:i.removeProperty("border-top-style"),r||(Qi.setAttribute("style",""),Qi.removeAttribute("style")),Zi=setInterval(Pa,250),Ui.delayedCall(.5,(function(){return To=0})),ba(Hi,"touchcancel",No),ba(Qi,"touchstart",No),ya(ba,Hi,"pointerdown,touchstart,mousedown",Lo),ya(ba,Hi,"pointerup,touchend,mouseup",Do),eo=Ui.utils.checkPrefix("transform"),$a.push(eo),qi=Co(),Yi=Ui.delayedCall(.2,Qa).pause(),oo=[Hi,"visibilitychange",function(){var t=Gi.innerWidth,e=Gi.innerHeight;Hi.hidden?(ro=t,io=e):ro===t&&io===e||Ma()},Hi,"DOMContentLoaded",Qa,Gi,"load",Qa,Gi,"resize",Ma],Ho(ba),Ia.forEach((function(t){return t.enable(0,1)})),n=0;n<bi.length;n+=3)wa(_a,bi[n],bi[n+1]),wa(_a,bi[n],bi[n+2])}},t.config=function(e){"limitCallbacks"in e&&(wo=!!e.limitCallbacks);var n=e.syncInterval;n&&clearInterval(Zi)||(Zi=n)&&setInterval(Pa,n),"ignoreMobileResize"in e&&(co=1===t.isTouch&&e.ignoreMobileResize),"autoRefreshEvents"in e&&(Ho(_a)||Ho(ba,e.autoRefreshEvents||"none"),lo=-1===(e.autoRefreshEvents+"").indexOf("resize"))},t.scrollerProxy=function(t,e){var n=Mi(t),r=bi.indexOf(n),i=Fo(n);~r&&bi.splice(r,i?6:2),e&&(i?_i.unshift(Gi,e,Qi,e,Vi,e):_i.unshift(n,e))},t.clearMatchMedia=function(t){Ia.forEach((function(e){return e._ctx&&e._ctx.query===t&&e._ctx.kill(!0,!0)}))},t.isInViewport=function(t,e,n){var r=(Vo(t)?Mi(t):t).getBoundingClientRect(),i=r[n?ea:na]*e||0;return n?r.right-i>0&&r.left+i<Gi.innerWidth:r.bottom-i>0&&r.top+i<Gi.innerHeight},t.positionInViewport=function(t,e,n){Vo(t)&&(t=Mi(t));var r=t.getBoundingClientRect(),i=r[n?ea:na],o=null==e?i/2:e in xa?xa[e]*i:~e.indexOf("%")?parseFloat(e)*i/100:parseFloat(e)||0;return n?(r.left+o)/Gi.innerWidth:(r.top+o)/Gi.innerHeight},t.killAll=function(t){if(Ia.slice(0).forEach((function(t){return"ScrollSmoother"!==t.vars.id&&t.kill()})),!0!==t){var e=La.killAll||[];La={},e.forEach((function(t){return t()}))}},t}();us.version="3.14.2",us.saveStyles=function(t){return t?Ki(t).forEach((function(t){if(t&&t.style){var e=ja.indexOf(t);e>=0&&ja.splice(e,5),ja.push(t,t.style.cssText,t.getBBox&&t.getAttribute("transform"),Ui.core.getCache(t),mo())}})):ja},us.revert=function(t,e){return Ua(!t,e)},us.create=function(t,e){return new us(t,e)},us.refresh=function(t){return t?Ma(!0):(qi||us.register())&&Qa(!0)},us.update=function(t){return++bi.cache&&Ka(!0===t?2:0)},us.clearScrollMemory=qa,us.maxScroll=function(t,e){return Go(t,e?Ri:Oi)},us.getScrollFunc=function(t,e){return Li(Mi(t),e?Ri:Oi)},us.getById=function(t){return ka[t]},us.getAll=function(){return Ia.filter((function(t){return"ScrollSmoother"!==t.vars.id}))},us.isScrolling=function(){return!!ko},us.snapDirectional=va,us.addEventListener=function(t,e){var n=La[t]||(La[t]=[]);~n.indexOf(e)||n.push(e)},us.removeEventListener=function(t,e){var n=La[t],r=n&&n.indexOf(e);r>=0&&n.splice(r,1)},us.batch=function(t,e){var n,r=[],i={},o=e.interval||.016,a=e.batchMax||1e9,s=function(t,e){var n=[],r=[],i=Ui.delayedCall(o,(function(){e(n,r),n=[],r=[]})).pause();return function(t){n.length||i.restart(!0),n.push(t.trigger),r.push(t),a<=n.length&&i.progress(1)}};for(n in e)i[n]="on"===n.substr(0,2)&&Qo(e[n])&&"onRefreshInit"!==n?s(0,e[n]):e[n];return Qo(a)&&(a=a(),ba(us,"refresh",(function(){return a=e.batchMax()}))),Ki(t).forEach((function(t){var e={};for(n in i)e[n]=i[n];e.trigger=t,r.push(us.create(e))})),r};var cs,ds=function(t,e,n,r){return e>r?t(r):e<0&&t(0),n>r?(r-e)/(n-e):n<0?e/(e-n):1},fs=function t(e,n){!0===n?e.style.removeProperty("touch-action"):e.style.touchAction=!0===n?"auto":n?"pan-"+n+(Fi.isTouch?" pinch-zoom":""):"none",e===Vi&&t(Qi,n)},hs={auto:1,scroll:1},ps=function(t){var e,n=t.event,r=t.target,i=t.axis,o=(n.changedTouches?n.changedTouches[0]:n).target,a=o._gsap||Ui.core.getCache(o),s=Co();if(!a._isScrollT||s-a._isScrollT>2e3){for(;o&&o!==Qi&&(o.scrollHeight<=o.clientHeight&&o.scrollWidth<=o.clientWidth||!hs[(e=fa(o)).overflowY]&&!hs[e.overflowX]);)o=o.parentNode;a._isScroll=o&&o!==r&&!Fo(o)&&(hs[(e=fa(o)).overflowY]||hs[e.overflowX]),a._isScrollT=s}(a._isScroll||"x"===i)&&(n.stopPropagation(),n._gsapAllow=!0)},ms=function(t,e,n,r){return Fi.create({target:t,capture:!0,debounce:!1,lockAxis:!0,type:e,onWheel:r=r&&ps,onPress:r,onDrag:r,onScroll:r,onEnable:function(){return n&&ba(Hi,Fi.eventTypes[0],vs,!1,!0)},onDisable:function(){return _a(Hi,Fi.eventTypes[0],vs,!0)}})},gs=/(input|label|select|textarea)/i,vs=function(t){var e=gs.test(t.target.tagName);(e||cs)&&(t._gsapAllow=!0,cs=e)},ys=function(t){Yo(t)||(t={}),t.preventDefault=t.isNormalizer=t.allowClicks=!0,t.type||(t.type="wheel,touch"),t.debounce=!!t.debounce,t.id=t.id||"normalizer";var e,n,r,i,o,a,s,l,u=t,c=u.normalizeScrollX,d=u.momentum,f=u.allowNestedScroll,h=u.onRelease,p=Mi(t.target)||Vi,m=Ui.core.globals().ScrollSmoother,g=m&&m.get(),v=po&&(t.content&&Mi(t.content)||g&&!1!==t.content&&!g.smooth()&&g.content()),y=Li(p,Oi),b=Li(p,Ri),_=1,w=(Fi.isTouch&&Gi.visualViewport?Gi.visualViewport.scale*Gi.visualViewport.width:Gi.outerWidth)/Gi.innerWidth,A=0,E=Qo(d)?function(){return d(e)}:function(){return d||2.8},x=ms(p,t.type,!0,f),S=function(){return i=!1},T=No,C=No,I=function(){n=Go(p,Oi),C=Xi(po?1:0,n),c&&(T=Xi(0,Go(p,Ri))),r=Ga},k=function(){v._gsap.y=Bo(parseFloat(v._gsap.y)+y.offset)+"px",v.style.transform="matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, "+parseFloat(v._gsap.y)+", 0, 1)",y.offset=y.cacheID=0},P=function(){I(),o.isActive()&&o.vars.scrollY>n&&(y()>n?o.progress(1)&&y(n):o.resetTo("scrollY",n))};return v&&Ui.set(v,{y:"+=0"}),t.ignoreCheck=function(t){return po&&"touchmove"===t.type&&function(){if(i){requestAnimationFrame(S);var t=Bo(e.deltaY/2),n=C(y.v-t);if(v&&n!==y.v+y.offset){y.offset=n-y.v;var r=Bo((parseFloat(v&&v._gsap.y)||0)-y.offset);v.style.transform="matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, "+r+", 0, 1)",v._gsap.y=r+"px",y.cacheID=bi.cache,Ka()}return!0}y.offset&&k(),i=!0}()||_>1.05&&"touchstart"!==t.type||e.isGesturing||t.touches&&t.touches.length>1},t.onPress=function(){i=!1;var t=_;_=Bo((Gi.visualViewport&&Gi.visualViewport.scale||1)/w),o.pause(),t!==_&&fs(p,_>1.01||!c&&"x"),a=b(),s=y(),I(),r=Ga},t.onRelease=t.onGestureStart=function(t,e){if(y.offset&&k(),e){bi.cache++;var r,i,a=E();c&&(i=(r=b())+.05*a*-t.velocityX/.227,a*=ds(b,r,i,Go(p,Ri)),o.vars.scrollX=T(i)),i=(r=y())+.05*a*-t.velocityY/.227,a*=ds(y,r,i,Go(p,Oi)),o.vars.scrollY=C(i),o.invalidate().duration(a).play(.01),(po&&o.vars.scrollY>=n||r>=n-1)&&Ui.to({},{onUpdate:P,duration:a})}else l.restart(!0);h&&h(t)},t.onWheel=function(){o._ts&&o.pause(),Co()-A>1e3&&(r=0,A=Co())},t.onChange=function(t,e,n,i,o){if(Ga!==r&&I(),e&&c&&b(T(i[2]===e?a+(t.startX-t.x):b()+e-i[1])),n){y.offset&&k();var l=o[2]===n,u=l?s+t.startY-t.y:y()+n-o[1],d=C(u);l&&u!==d&&(s+=d-u),y(d)}(n||e)&&Ka()},t.onEnable=function(){fs(p,!c&&"x"),us.addEventListener("refresh",P),ba(Gi,"resize",P),y.smooth&&(y.target.style.scrollBehavior="auto",y.smooth=b.smooth=!1),x.enable()},t.onDisable=function(){fs(p,!0),_a(Gi,"resize",P),us.removeEventListener("refresh",P),x.kill()},t.lockAxis=!1!==t.lockAxis,(e=new Fi(t)).iOS=po,po&&!y()&&y(1),po&&Ui.ticker.add(No),l=e._dc,o=Ui.to(e,{ease:"power4",paused:!0,inherit:!1,scrollX:c?"+=0.1":"+=0",scrollY:"+=0.1",modifiers:{scrollY:as(y,y(),(function(){return o.pause()}))},onUpdate:Ka,onComplete:l.vars.onComplete}),e};us.sort=function(t){if(Qo(t))return Ia.sort(t);var e=Gi.pageYOffset||0;return us.getAll().forEach((function(t){return t._sortY=t.trigger?e+t.trigger.getBoundingClientRect().top:t.start+Gi.innerHeight})),Ia.sort(t||function(t,e){return-1e6*(t.vars.refreshPriority||0)+(t.vars.containerAnimation?1e6:t._sortY)-((e.vars.containerAnimation?1e6:e._sortY)+-1e6*(e.vars.refreshPriority||0))})},us.observe=function(t){return new Fi(t)},us.normalizeScroll=function(t){if(void 0===t)return uo;if(!0===t&&uo)return uo.enable();if(!1===t)return uo&&uo.kill(),void(uo=t);var e=t instanceof Fi?t:ys(t);return uo&&uo.target===e.target&&uo.kill(),Fo(e.target)&&(uo=e),e},us.core={_getVelocityProp:Di,_inputObserver:ms,_scrollers:bi,_proxies:_i,bridge:{ss:function(){ko||Ba("scrollStart"),ko=Co()},ref:function(){return Ji}}},zo()&&Ui.registerPlugin(us);let bs,_s,ws,As="function"==typeof Symbol?Symbol():"_split",Es="undefined"!=typeof Intl&&"Segmenter"in Intl?new Intl.Segmenter:0,xs=t=>"string"==typeof t?xs(document.querySelectorAll(t)):"length"in t?Array.from(t).reduce(((t,e)=>("string"==typeof e?t.push(...xs(e)):t.push(e),t)),[]):[t],Ss=t=>xs(t).filter((t=>t instanceof HTMLElement)),Ts=[],Cs=function(){},Is={add:t=>t()},ks=/\s+/g,Ps=new RegExp("\\p{RI}\\p{RI}|\\p{Emoji}(\\p{EMod}|\\u{FE0F}\\u{20E3}?|[\\u{E0020}-\\u{E007E}]+\\u{E007F})?(\\u{200D}\\p{Emoji}(\\p{EMod}|\\u{FE0F}\\u{20E3}?|[\\u{E0020}-\\u{E007E}]+\\u{E007F})?)*|.","gu"),Rs={left:0,top:0,width:0,height:0},Os=(t,e)=>{for(;++e<t.length&&t[e]===Rs;);return t[e]||Rs},Ms=({element:t,html:e,ariaL:n,ariaH:r})=>{t.innerHTML=e,n?t.setAttribute("aria-label",n):t.removeAttribute("aria-label"),r?t.setAttribute("aria-hidden",r):t.removeAttribute("aria-hidden")},Ls=(t,e)=>{if(e){let n,r,i,o,a=new Set(t.join("").match(e)||Ts),s=t.length;if(a.size)for(;--s>-1;)for(i of(r=t[s],a))if(i.startsWith(r)&&i.length>r.length){for(n=0,o=r;i.startsWith(o+=t[s+ ++n])&&o.length<i.length;);if(n&&o.length===i.length){t[s]=i,t.splice(s+1,n);break}}}return t},Ds=t=>"inline"===window.getComputedStyle(t).display&&(t.style.display="inline-block"),Ns=(t,e,n)=>e.insertBefore("string"==typeof t?document.createTextNode(t):t,n),Bs=(t,e,n)=>{let r=e[t+"sClass"]||"",{tag:i="div",aria:o="auto",propIndex:a=!1}=e,s="line"===t?"block":"inline-block",l=r.indexOf("++")>-1,u=e=>{let u=document.createElement(i),c=n.length+1;return r&&(u.className=r+(l?" "+r+c:"")),a&&u.style.setProperty("--"+t,c+""),"none"!==o&&u.setAttribute("aria-hidden","true"),"span"!==i&&(u.style.position="relative",u.style.display=s),u.textContent=e,n.push(u),u};return l&&(r=r.replace("++","")),u.collection=n,u},js=(t,e,n,r,i,o,a,s,l,u)=>{var c;let d,f,h,p,m,g,v,y,b,_,w,A,E,x,S,T,C,I,k=Array.from(t.childNodes),P=0,{wordDelimiter:R,reduceWhiteSpace:O=!0,prepareText:M}=e,L=t.getBoundingClientRect(),D=L,N=!O&&"pre"===window.getComputedStyle(t).whiteSpace.substring(0,3),B=0,j=n.collection;for("object"==typeof R?(h=R.delimiter||R,f=R.replaceWith||""):f=""===R?"":R||" ",d=" "!==f;P<k.length;P++)if(p=k[P],3===p.nodeType){for(S=p.textContent||"",O?S=S.replace(ks," "):N&&(S=S.replace(/\n/g,f+"\n")),M&&(S=M(S,t)),p.textContent=S,m=f||h?S.split(h||f):S.match(s)||Ts,C=m[m.length-1],y=d?" "===C.slice(-1):!C,C||m.pop(),D=L,v=d?" "===m[0].charAt(0):!m[0],v&&Ns(" ",t,p),m[0]||m.shift(),Ls(m,l),o&&u||(p.textContent=""),b=1;b<=m.length;b++)if(T=m[b-1],!O&&N&&"\n"===T.charAt(0)&&(null==(c=p.previousSibling)||c.remove(),Ns(document.createElement("br"),t,p),T=T.slice(1)),O||""!==T)if(" "===T)t.insertBefore(document.createTextNode(" "),p);else{if(d&&" "===T.charAt(0)&&Ns(" ",t,p),B&&1===b&&!v&&j.indexOf(B.parentNode)>-1?(g=j[j.length-1],g.appendChild(document.createTextNode(r?"":T))):(g=n(r?"":T),Ns(g,t,p),B&&1===b&&!v&&g.insertBefore(B,g.firstChild)),r)for(w=Es?Ls([...Es.segment(T)].map((t=>t.segment)),l):T.match(s)||Ts,I=0;I<w.length;I++)g.appendChild(" "===w[I]?document.createTextNode(" "):r(w[I]));if(o&&u){if(S=p.textContent=S.substring(T.length+1,S.length),_=g.getBoundingClientRect(),_.top>D.top&&_.left<=D.left){for(A=t.cloneNode(),E=t.childNodes[0];E&&E!==g;)x=E,E=E.nextSibling,A.appendChild(x);t.parentNode.insertBefore(A,t),i&&Ds(A)}D=_}(b<m.length||y)&&Ns(b>=m.length?" ":d&&" "===T.slice(-1)?" "+f:f,t,p)}else Ns(f,t,p);t.removeChild(p),B=0}else 1===p.nodeType&&(a&&a.indexOf(p)>-1?(j.indexOf(p.previousSibling)>-1&&j[j.length-1].appendChild(p),B=p):(js(p,e,n,r,i,o,a,s,l,!0),B=0),i&&Ds(p))};const zs=class t{constructor(t,e){this.isSplit=!1,ws||Fs.register(window.gsap),this.elements=Ss(t),this.chars=[],this.words=[],this.lines=[],this.masks=[],this.vars=e,this.elements.forEach((t=>{var n;!1!==e.overwrite&&(null==(n=t[As])||n._data.orig.filter((({element:e})=>e===t)).forEach(Ms)),t[As]=this})),this._split=()=>this.isSplit&&this.split(this.vars);let n,r=[],i=()=>{let t,e=r.length;for(;e--;){t=r[e];let n=t.element.offsetWidth;if(n!==t.width)return t.width=n,void this._split()}};this._data={orig:r,obs:"undefined"!=typeof ResizeObserver&&new ResizeObserver((()=>{clearTimeout(n),n=setTimeout(i,200)}))},Cs(this),this.split(e)}split(t){return(this._ctx||Is).add((()=>{this.isSplit&&this.revert(),this.vars=t=t||this.vars||{};let e,{type:n="chars,words,lines",aria:r="auto",deepSlice:i=!0,smartWrap:o,onSplit:a,autoSplit:s=!1,specialChars:l,mask:u}=this.vars,c=n.indexOf("lines")>-1,d=n.indexOf("chars")>-1,f=n.indexOf("words")>-1,h=d&&!f&&!c,p=l&&("push"in l?new RegExp("(?:"+l.join("|")+")","gu"):l),m=p?new RegExp(p.source+"|"+Ps.source,"gu"):Ps,g=!!t.ignore&&Ss(t.ignore),{orig:v,animTime:y,obs:b}=this._data;(d||f||c)&&(this.elements.forEach(((e,n)=>{v[n]={element:e,html:e.innerHTML,ariaL:e.getAttribute("aria-label"),ariaH:e.getAttribute("aria-hidden")},"auto"===r?e.setAttribute("aria-label",(e.textContent||"").trim()):"hidden"===r&&e.setAttribute("aria-hidden","true");let a,s,l,u,y=[],b=[],_=[],w=d?Bs("char",t,y):null,A=Bs("word",t,b);if(js(e,t,A,w,h,i&&(c||h),g,m,p,!1),c){let n,r,i=xs(e.childNodes),o=((t,e,n,r)=>{let i=Bs("line",n,r),o=window.getComputedStyle(t).textAlign||"left";return(n,r)=>{let a=i("");for(a.style.textAlign=o,t.insertBefore(a,e[n]);n<r;n++)a.appendChild(e[n]);a.normalize()}})(e,i,t,_),s=[],l=0,u=i.map((t=>1===t.nodeType?t.getBoundingClientRect():Rs)),c=Rs;for(a=0;a<i.length;a++)n=i[a],1===n.nodeType&&("BR"===n.nodeName?(a&&"BR"===i[a-1].nodeName||(s.push(n),o(l,a+1)),l=a+1,c=Os(u,a)):(r=u[a],a&&r.top>c.top&&r.left<c.left+c.width-1&&(o(l,a),l=a),c=r));l<a&&o(l,a),s.forEach((t=>{var e;return null==(e=t.parentNode)?void 0:e.removeChild(t)}))}if(!f){for(a=0;a<b.length;a++)if(s=b[a],d||!s.nextSibling||3!==s.nextSibling.nodeType)if(o&&!c){for(l=document.createElement("span"),l.style.whiteSpace="nowrap";s.firstChild;)l.appendChild(s.firstChild);s.replaceWith(l)}else s.replaceWith(...s.childNodes);else u=s.nextSibling,u&&3===u.nodeType&&(u.textContent=(s.textContent||"")+(u.textContent||""),s.remove());b.length=0,e.normalize()}this.lines.push(..._),this.words.push(...b),this.chars.push(...y)})),u&&this[u]&&this.masks.push(...this[u].map((t=>{let e=t.cloneNode();return t.replaceWith(e),e.appendChild(t),t.className&&(e.className=t.className.trim()+"-mask"),e.style.overflow="clip",e})))),this.isSplit=!0,_s&&c&&(s?_s.addEventListener("loadingdone",this._split):"loading"===_s.status&&console.warn("SplitText called before fonts loaded")),(e=a&&a(this))&&e.totalTime&&(this._data.anim=y?e.totalTime(y):e),c&&s&&this.elements.forEach(((t,e)=>{v[e].width=t.offsetWidth,b&&b.observe(t)}))})),this}kill(){let{obs:t}=this._data;t&&t.disconnect(),null==_s||_s.removeEventListener("loadingdone",this._split)}revert(){var t,e;if(this.isSplit){let{orig:n,anim:r}=this._data;this.kill(),n.forEach(Ms),this.chars.length=this.words.length=this.lines.length=n.length=this.masks.length=0,this.isSplit=!1,r&&(this._data.animTime=r.totalTime(),r.revert()),null==(e=(t=this.vars).onRevert)||e.call(t,this)}return this}static create(e,n){return new t(e,n)}static register(t){bs=bs||t||window.gsap,bs&&(xs=bs.utils.toArray,Cs=bs.core.context||Cs),!ws&&window.innerWidth>0&&(_s=document.fonts,ws=!0)}};zs.version="3.14.2";let Fs=zs;var Us,qs,Gs,Hs,Vs,Qs,Ws,Ys,Ks,Xs="transform",$s=Xs+"Origin",Zs=function(t){var e=t.ownerDocument||t;!(Xs in t.style)&&"msTransform"in t.style&&($s=(Xs="msTransform")+"Origin");for(;e.parentNode&&(e=e.parentNode););if(qs=window,Ws=new ul,e){Us=e,Gs=e.documentElement,Hs=e.body,(Ys=Us.createElementNS("http://www.w3.org/2000/svg","g")).style.transform="none";var n=e.createElement("div"),r=e.createElement("div"),i=e&&(e.body||e.firstElementChild);i&&i.appendChild&&(i.appendChild(n),n.appendChild(r),n.style.position="static",n.style.transform="translate3d(0,0,1px)",Ks=r.offsetParent!==n,i.removeChild(n))}return e},Js=[],tl=[],el=function(){return qs.pageYOffset||Us.scrollTop||Gs.scrollTop||Hs.scrollTop||0},nl=function(){return qs.pageXOffset||Us.scrollLeft||Gs.scrollLeft||Hs.scrollLeft||0},rl=function(t){return t.ownerSVGElement||("svg"===(t.tagName+"").toLowerCase()?t:null)},il=function t(e){return"fixed"===qs.getComputedStyle(e).position||((e=e.parentNode)&&1===e.nodeType?t(e):void 0)},ol=function t(e,n){if(e.parentNode&&(Us||Zs(e))){var r=rl(e),i=r?r.getAttribute("xmlns")||"http://www.w3.org/2000/svg":"http://www.w3.org/1999/xhtml",o=r?n?"rect":"g":"div",a=2!==n?0:100,s=3===n?100:0,l={position:"absolute",display:"block",pointerEvents:"none",margin:"0",padding:"0"},u=Us.createElementNS?Us.createElementNS(i.replace(/^https/,"http"),o):Us.createElement(o);return n&&(r?(Qs||(Qs=t(e)),u.setAttribute("width",.01),u.setAttribute("height",.01),u.setAttribute("transform","translate("+a+","+s+")"),u.setAttribute("fill","transparent"),Qs.appendChild(u)):(Vs||(Vs=t(e),Object.assign(Vs.style,l)),Object.assign(u.style,l,{width:"0.1px",height:"0.1px",top:s+"px",left:a+"px"}),Vs.appendChild(u))),u}throw"Need document and parent."},al=function(t){var e,n=t.getCTM();return n||(e=t.style[Xs],t.style[Xs]="none",t.appendChild(Ys),n=Ys.getCTM(),t.removeChild(Ys),e?t.style[Xs]=e:t.style.removeProperty(Xs.replace(/([A-Z])/g,"-$1").toLowerCase())),n||Ws.clone()},sl=function(t,e){var n,r,i,o,a,s,l=rl(t),u=t===l,c=l?Js:tl,d=t.parentNode,f=d&&!l&&d.shadowRoot&&d.shadowRoot.appendChild?d.shadowRoot:d;if(t===qs)return t;if(c.length||c.push(ol(t,1),ol(t,2),ol(t,3)),n=l?Qs:Vs,l)u?(o=-(i=al(t)).e/i.a,a=-i.f/i.d,r=Ws):t.getBBox?(i=t.getBBox(),r=(r=t.transform?t.transform.baseVal:{}).numberOfItems?r.numberOfItems>1?function(t){for(var e=new ul,n=0;n<t.numberOfItems;n++)e.multiply(t.getItem(n).matrix);return e}(r):r.getItem(0).matrix:Ws,o=r.a*i.x+r.c*i.y,a=r.b*i.x+r.d*i.y):(r=new ul,o=a=0),e&&"g"===t.tagName.toLowerCase()&&(o=a=0),(u||!t.getBoundingClientRect().width?l:d).appendChild(n),n.setAttribute("transform","matrix("+r.a+","+r.b+","+r.c+","+r.d+","+(r.e+o)+","+(r.f+a)+")");else{if(o=a=0,Ks)for(r=t.offsetParent,i=t;i&&(i=i.parentNode)&&i!==r&&i.parentNode;)(qs.getComputedStyle(i)[Xs]+"").length>4&&(o=i.offsetLeft,a=i.offsetTop,i=0);if("absolute"!==(s=qs.getComputedStyle(t)).position&&"fixed"!==s.position)for(r=t.offsetParent;d&&d!==r;)o+=d.scrollLeft||0,a+=d.scrollTop||0,d=d.parentNode;(i=n.style).top=t.offsetTop-a+"px",i.left=t.offsetLeft-o+"px",i[Xs]=s[Xs],i[$s]=s[$s],i.position="fixed"===s.position?"fixed":"absolute",f.appendChild(n)}return n},ll=function(t,e,n,r,i,o,a){return t.a=e,t.b=n,t.c=r,t.d=i,t.e=o,t.f=a,t},ul=function(){function t(t,e,n,r,i,o){void 0===t&&(t=1),void 0===e&&(e=0),void 0===n&&(n=0),void 0===r&&(r=1),void 0===i&&(i=0),void 0===o&&(o=0),ll(this,t,e,n,r,i,o)}var e=t.prototype;return e.inverse=function(){var t=this.a,e=this.b,n=this.c,r=this.d,i=this.e,o=this.f,a=t*r-e*n||1e-10;return ll(this,r/a,-e/a,-n/a,t/a,(n*o-r*i)/a,-(t*o-e*i)/a)},e.multiply=function(t){var e=this.a,n=this.b,r=this.c,i=this.d,o=this.e,a=this.f,s=t.a,l=t.c,u=t.b,c=t.d,d=t.e,f=t.f;return ll(this,s*e+u*r,s*n+u*i,l*e+c*r,l*n+c*i,o+d*e+f*r,a+d*n+f*i)},e.clone=function(){return new t(this.a,this.b,this.c,this.d,this.e,this.f)},e.equals=function(t){var e=this.a,n=this.b,r=this.c,i=this.d,o=this.e,a=this.f;return e===t.a&&n===t.b&&r===t.c&&i===t.d&&o===t.e&&a===t.f},e.apply=function(t,e){void 0===e&&(e={});var n=t.x,r=t.y,i=this.a,o=this.b,a=this.c,s=this.d,l=this.e,u=this.f;return e.x=n*i+r*a+l||0,e.y=n*o+r*s+u||0,e},t}();function cl(t,e,n,r){if(!t||!t.parentNode||(Us||Zs(t)).documentElement===t)return new ul;var i=function(t){for(var e,n;t&&t!==Hs;)(n=t._gsap)&&n.uncache&&n.get(t,"x"),n&&!n.scaleX&&!n.scaleY&&n.renderTransform&&(n.scaleX=n.scaleY=1e-4,n.renderTransform(1,n),e?e.push(n):e=[n]),t=t.parentNode;return e}(t),o=rl(t)?Js:tl,a=sl(t,n),s=o[0].getBoundingClientRect(),l=o[1].getBoundingClientRect(),u=o[2].getBoundingClientRect(),c=a.parentNode,d=!r&&il(t),f=new ul((l.left-s.left)/100,(l.top-s.top)/100,(u.left-s.left)/100,(u.top-s.top)/100,s.left+(d?0:nl()),s.top+(d?0:el()));if(c.removeChild(a),i)for(s=i.length;s--;)(l=i[s]).scaleX=l.scaleY=0,l.renderTransform(1,l);return e?f.inverse():f}function dl(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}var fl,hl,pl,ml,gl,vl,yl,bl,_l,wl,Al,El,xl,Sl,Tl,Cl,Il,kl,Pl,Rl,Ol,Ml,Ll=0,Dl=function(){return"undefined"!=typeof window},Nl=function(){return fl||Dl()&&(fl=window.gsap)&&fl.registerPlugin&&fl},Bl=function(t){return"function"==typeof t},jl=function(t){return"object"==typeof t},zl=function(t){return void 0===t},Fl=function(){return!1},Ul="transform",ql="transformOrigin",Gl=function(t){return Math.round(1e4*t)/1e4},Hl=Array.isArray,Vl=function(t,e){var n=pl.createElementNS?pl.createElementNS((e||"http://www.w3.org/1999/xhtml").replace(/^https/,"http"),t):pl.createElement(t);return n.style?n:pl.createElement(t)},Ql=180/Math.PI,Wl=1e20,Yl=new ul,Kl=Date.now||function(){return(new Date).getTime()},Xl=[],$l={},Zl=0,Jl=/^(?:a|input|textarea|button|select)$/i,tu=0,eu={},nu={},ru=function(t,e){var n,r={};for(n in t)r[n]=e?t[n]*e:t[n];return r},iu=function t(e,n){for(var r,i=e.length;i--;)n?e[i].style.touchAction=n:e[i].style.removeProperty("touch-action"),(r=e[i].children)&&r.length&&t(r,n)},ou=function(){return Xl.forEach((function(t){return t()}))},au=function(){return!Xl.length&&fl.ticker.remove(ou)},su=function(t){for(var e=Xl.length;e--;)Xl[e]===t&&Xl.splice(e,1);fl.to(au,{overwrite:!0,delay:15,duration:0,onComplete:au,data:"_draggable"})},lu=function(t,e,n,r){if(t.addEventListener){var i=xl[e];r=r||(Al?{passive:!1}:null),t.addEventListener(i||e,n,r),i&&e!==i&&t.addEventListener(e,n,r)}},uu=function(t,e,n,r){if(t.removeEventListener){var i=xl[e];t.removeEventListener(i||e,n,r),i&&e!==i&&t.removeEventListener(e,n,r)}},cu=function(t){t.preventDefault&&t.preventDefault(),t.preventManipulation&&t.preventManipulation()},du=function t(e){Sl=e.touches&&Ll<e.touches.length,uu(e.target,"touchend",t)},fu=function(t){Sl=t.touches&&Ll<t.touches.length,lu(t.target,"touchend",du)},hu=function(t){return hl.pageYOffset||t.scrollTop||t.documentElement.scrollTop||t.body.scrollTop||0},pu=function(t){return hl.pageXOffset||t.scrollLeft||t.documentElement.scrollLeft||t.body.scrollLeft||0},mu=function t(e,n){lu(e,"scroll",n),vu(e.parentNode)||t(e.parentNode,n)},gu=function t(e,n){uu(e,"scroll",n),vu(e.parentNode)||t(e.parentNode,n)},vu=function(t){return!(t&&t!==ml&&9!==t.nodeType&&t!==pl.body&&t!==hl&&t.nodeType&&t.parentNode)},yu=function(t,e){var n="x"===e?"Width":"Height",r="scroll"+n,i="client"+n;return Math.max(0,vu(t)?Math.max(ml[r],gl[r])-(hl["inner"+n]||ml[i]||gl[i]):t[r]-t[i])},bu=function t(e,n){var r=yu(e,"x"),i=yu(e,"y");vu(e)?e=nu:t(e.parentNode,n),e._gsMaxScrollX=r,e._gsMaxScrollY=i,n||(e._gsScrollX=e.scrollLeft||0,e._gsScrollY=e.scrollTop||0)},_u=function(t,e,n){var r=t.style;r&&(zl(r[e])&&(e=_l(e,t)||e),null==n?r.removeProperty&&r.removeProperty(e.replace(/([A-Z])/g,"-$1").toLowerCase()):r[e]=n)},wu=function(t){return hl.getComputedStyle(t instanceof Element?t:t.host||(t.parentNode||{}).host||t)},Au={},Eu=function(t){if(t===hl)return Au.left=Au.top=0,Au.width=Au.right=ml.clientWidth||t.innerWidth||gl.clientWidth||0,Au.height=Au.bottom=(t.innerHeight||0)-20<ml.clientHeight?ml.clientHeight:t.innerHeight||gl.clientHeight||0,Au;var e=t.ownerDocument||pl,n=zl(t.pageX)?t.nodeType||zl(t.left)||zl(t.top)?wl(t)[0].getBoundingClientRect():t:{left:t.pageX-pu(e),top:t.pageY-hu(e),right:t.pageX-pu(e)+1,bottom:t.pageY-hu(e)+1};return zl(n.right)&&!zl(n.width)?(n.right=n.left+n.width,n.bottom=n.top+n.height):zl(n.width)&&(n={width:n.right-n.left,height:n.bottom-n.top,right:n.right,left:n.left,bottom:n.bottom,top:n.top}),n},xu=function(t,e,n){var r,i=t.vars,o=i[n],a=t._listeners[e];return Bl(o)&&(r=o.apply(i.callbackScope||t,i[n+"Params"]||[t.pointerEvent])),a&&!1===t.dispatchEvent(e)&&(r=!1),r},Su=function(t,e){var n,r,i,o=wl(t)[0];return o.nodeType||o===hl?Cu(o,e):zl(t.left)?{left:r=t.min||t.minX||t.minRotation||0,top:n=t.min||t.minY||0,width:(t.max||t.maxX||t.maxRotation||0)-r,height:(t.max||t.maxY||0)-n}:(i={x:0,y:0},{left:t.left-i.x,top:t.top-i.y,width:t.width,height:t.height})},Tu={},Cu=function(t,e){e=wl(e)[0];var n,r,i,o,a,s,l,u,c,d,f,h,p,m=t.getBBox&&t.ownerSVGElement,g=t.ownerDocument||pl;if(t===hl)i=hu(g),r=(n=pu(g))+(g.documentElement.clientWidth||t.innerWidth||g.body.clientWidth||0),o=i+((t.innerHeight||0)-20<g.documentElement.clientHeight?g.documentElement.clientHeight:t.innerHeight||g.body.clientHeight||0);else{if(e===hl||zl(e))return t.getBoundingClientRect();n=i=0,m?(f=(d=t.getBBox()).width,h=d.height):(t.viewBox&&(d=t.viewBox.baseVal)&&(n=d.x||0,i=d.y||0,f=d.width,h=d.height),f||(d="border-box"===(p=wu(t)).boxSizing,f=(parseFloat(p.width)||t.clientWidth||0)+(d?0:parseFloat(p.borderLeftWidth)+parseFloat(p.borderRightWidth)),h=(parseFloat(p.height)||t.clientHeight||0)+(d?0:parseFloat(p.borderTopWidth)+parseFloat(p.borderBottomWidth)))),r=f,o=h}return t===e?{left:n,top:i,width:r-n,height:o-i}:(s=(a=cl(e,!0).multiply(cl(t))).apply({x:n,y:i}),l=a.apply({x:r,y:i}),u=a.apply({x:r,y:o}),c=a.apply({x:n,y:o}),{left:n=Math.min(s.x,l.x,u.x,c.x),top:i=Math.min(s.y,l.y,u.y,c.y),width:Math.max(s.x,l.x,u.x,c.x)-n,height:Math.max(s.y,l.y,u.y,c.y)-i})},Iu=function(t,e,n,r,i,o){var a,s,l,u={};if(e)if(1!==i&&e instanceof Array){if(u.end=a=[],l=e.length,jl(e[0]))for(s=0;s<l;s++)a[s]=ru(e[s],i);else for(s=0;s<l;s++)a[s]=e[s]*i;n+=1.1,r-=1.1}else Bl(e)?u.end=function(n){var r,o,a=e.call(t,n);if(1!==i)if(jl(a)){for(o in r={},a)r[o]=a[o]*i;a=r}else a*=i;return a}:u.end=e;return(n||0===n)&&(u.max=n),(r||0===r)&&(u.min=r),o&&(u.velocity=0),u},ku=function t(e){var n;return!(!e||!e.getAttribute||e===gl)&&(!("true"!==(n=e.getAttribute("data-clickable"))&&("false"===n||!Jl.test(e.nodeName+"")&&"true"!==e.getAttribute("contentEditable")))||t(e.parentNode))},Pu=function(t,e){for(var n,r=t.length;r--;)(n=t[r]).ondragstart=n.onselectstart=e?null:Fl,fl.set(n,{lazy:!0,userSelect:e?"text":"none"})},Ru=function t(e){return"fixed"===wu(e).position||((e=e.parentNode)&&1===e.nodeType?t(e):void 0)},Ou=function(t,e){t=fl.utils.toArray(t)[0],e=e||{};var n,r,i,o,a,s,l=document.createElement("div"),u=l.style,c=t.firstChild,d=0,f=0,h=t.scrollTop,p=t.scrollLeft,m=t.scrollWidth,g=t.scrollHeight,v=0,y=0,b=0;Ol&&!1!==e.force3D?(a="translate3d(",s="px,0px)"):Ul&&(a="translate(",s="px)"),this.scrollTop=function(t,e){if(!arguments.length)return-this.top();this.top(-t,e)},this.scrollLeft=function(t,e){if(!arguments.length)return-this.left();this.left(-t,e)},this.left=function(n,r){if(!arguments.length)return-(t.scrollLeft+f);var i=t.scrollLeft-p,o=f;if((i>2||i<-2)&&!r)return p=t.scrollLeft,fl.killTweensOf(this,{left:1,scrollLeft:1}),this.left(-p),void(e.onKill&&e.onKill());(n=-n)<0?(f=n-.5|0,n=0):n>y?(f=n-y|0,n=y):f=0,(f||o)&&(this._skip||(u[Ul]=a+-f+"px,"+-d+s),f+v>=0&&(u.paddingRight=f+v+"px")),t.scrollLeft=0|n,p=t.scrollLeft},this.top=function(n,r){if(!arguments.length)return-(t.scrollTop+d);var i=t.scrollTop-h,o=d;if((i>2||i<-2)&&!r)return h=t.scrollTop,fl.killTweensOf(this,{top:1,scrollTop:1}),this.top(-h),void(e.onKill&&e.onKill());(n=-n)<0?(d=n-.5|0,n=0):n>b?(d=n-b|0,n=b):d=0,(d||o)&&(this._skip||(u[Ul]=a+-f+"px,"+-d+s)),t.scrollTop=0|n,h=t.scrollTop},this.maxScrollTop=function(){return b},this.maxScrollLeft=function(){return y},this.disable=function(){for(c=l.firstChild;c;)o=c.nextSibling,t.appendChild(c),c=o;t===l.parentNode&&t.removeChild(l)},this.enable=function(){if((c=t.firstChild)!==l){for(;c;)o=c.nextSibling,l.appendChild(c),c=o;t.appendChild(l),this.calibrate()}},this.calibrate=function(e){var o,a,s,c=t.clientWidth===n;h=t.scrollTop,p=t.scrollLeft,c&&t.clientHeight===r&&l.offsetHeight===i&&m===t.scrollWidth&&g===t.scrollHeight&&!e||((d||f)&&(a=this.left(),s=this.top(),this.left(-t.scrollLeft),this.top(-t.scrollTop)),o=wu(t),c&&!e||(u.display="block",u.width="auto",u.paddingRight="0px",(v=Math.max(0,t.scrollWidth-t.clientWidth))&&(v+=parseFloat(o.paddingLeft)+(Ml?parseFloat(o.paddingRight):0))),u.display="inline-block",u.position="relative",u.overflow="visible",u.verticalAlign="top",u.boxSizing="content-box",u.width="100%",u.paddingRight=v+"px",Ml&&(u.paddingBottom=o.paddingBottom),n=t.clientWidth,r=t.clientHeight,m=t.scrollWidth,g=t.scrollHeight,y=t.scrollWidth-n,b=t.scrollHeight-r,i=l.offsetHeight,u.display="block",(a||s)&&(this.left(a),this.top(s)))},this.content=l,this.element=t,this._skip=!1,this.enable()},Mu=function(t){if(Dl()&&document.body){var e=window&&window.navigator;hl=window,pl=document,ml=pl.documentElement,gl=pl.body,vl=Vl("div"),kl=!!window.PointerEvent,(yl=Vl("div")).style.cssText="visibility:hidden;height:1px;top:-1px;pointer-events:none;position:relative;clear:both;cursor:grab",Il="grab"===yl.style.cursor?"grab":"move",Tl=e&&-1!==e.userAgent.toLowerCase().indexOf("android"),El="ontouchstart"in ml&&"orientation"in hl||e&&(e.MaxTouchPoints>0||e.msMaxTouchPoints>0),r=Vl("div"),i=Vl("div"),o=i.style,a=gl,o.display="inline-block",o.position="relative",r.style.cssText="width:90px;height:40px;padding:10px;overflow:auto;visibility:hidden",r.appendChild(i),a.appendChild(r),n=i.offsetHeight+18>r.scrollHeight,a.removeChild(r),Ml=n,xl=function(t){for(var e=t.split(","),n=(("onpointerdown"in vl?"pointerdown,pointermove,pointerup,pointercancel":"onmspointerdown"in vl?"MSPointerDown,MSPointerMove,MSPointerUp,MSPointerCancel":t).split(",")),r={},i=4;--i>-1;)r[e[i]]=n[i],r[n[i]]=e[i];try{ml.addEventListener("test",null,Object.defineProperty({},"passive",{get:function(){Al=1}}))}catch(t){}return r}("touchstart,touchmove,touchend,touchcancel"),lu(pl,"touchcancel",Fl),lu(hl,"touchmove",Fl),gl&&gl.addEventListener("touchstart",Fl),lu(pl,"contextmenu",(function(){for(var t in $l)$l[t].isPressed&&$l[t].endDrag()})),fl=bl=Nl()}var n,r,i,o,a;fl?(Cl=fl.plugins.inertia,Pl=fl.core.context||function(){},_l=fl.utils.checkPrefix,Ul=_l(Ul),ql=_l(ql),wl=fl.utils.toArray,Rl=fl.core.getStyleSaver,Ol=!!_l("perspective")):t&&console.warn("Please gsap.registerPlugin(Draggable)")},Lu=function(){function t(t){this._listeners={},this.target=t||this}var e=t.prototype;return e.addEventListener=function(t,e){var n=this._listeners[t]||(this._listeners[t]=[]);~n.indexOf(e)||n.push(e)},e.removeEventListener=function(t,e){var n=this._listeners[t],r=n&&n.indexOf(e);r>=0&&n.splice(r,1)},e.dispatchEvent=function(t){var e,n=this;return(this._listeners[t]||[]).forEach((function(r){return!1===r.call(n,{type:t,target:n.target})&&(e=!1)})),e},t}(),Du=function(t){var e,n;function r(e,n){var i;i=t.call(this)||this,bl||Mu(1),e=wl(e)[0],i.styles=Rl&&Rl(e,"transform,left,top"),Cl||(Cl=fl.plugins.inertia),i.vars=n=ru(n||{}),i.target=e,i.x=i.y=i.rotation=0,i.dragResistance=parseFloat(n.dragResistance)||0,i.edgeResistance=isNaN(n.edgeResistance)?1:parseFloat(n.edgeResistance)||0,i.lockAxis=n.lockAxis,i.autoScroll=n.autoScroll||0,i.lockedAxis=null,i.allowEventDefault=!!n.allowEventDefault,fl.getProperty(e,"x");var o,a,s,l,u,c,d,f,h,p,m,g,v,y,b,_,w,A,E,x,S,T,C,I,k,P,R,O,M,L,D,N,B,j=(n.type||"x,y").toLowerCase(),z=~j.indexOf("x")||~j.indexOf("y"),F=-1!==j.indexOf("rotation"),U=F?"rotation":z?"x":"left",q=z?"y":"top",G=!(!~j.indexOf("x")&&!~j.indexOf("left")&&"scroll"!==j),H=!(!~j.indexOf("y")&&!~j.indexOf("top")&&"scroll"!==j),V=n.minimumMovement||2,Q=dl(i),W=wl(n.trigger||n.handle||e),Y={},K=0,X=!1,$=n.autoScrollMarginTop||40,Z=n.autoScrollMarginRight||40,J=n.autoScrollMarginBottom||40,tt=n.autoScrollMarginLeft||40,et=n.clickableTest||ku,nt=0,rt=e._gsap||fl.core.getCache(e),it=Ru(e),ot=function(t,n){return parseFloat(rt.get(e,t,n))},at=e.ownerDocument||pl,st=function(t){return cu(t),t.stopImmediatePropagation&&t.stopImmediatePropagation(),!1},lt=function t(n){if(Q.autoScroll&&Q.isDragging&&(X||w)){var r,i,o,s,l,u,c,d,h=e,p=15*Q.autoScroll;for(X=!1,nu.scrollTop=null!=hl.pageYOffset?hl.pageYOffset:null!=at.documentElement.scrollTop?at.documentElement.scrollTop:at.body.scrollTop,nu.scrollLeft=null!=hl.pageXOffset?hl.pageXOffset:null!=at.documentElement.scrollLeft?at.documentElement.scrollLeft:at.body.scrollLeft,s=Q.pointerX-nu.scrollLeft,l=Q.pointerY-nu.scrollTop;h&&!i;)r=(i=vu(h.parentNode))?nu:h.parentNode,o=i?{bottom:Math.max(ml.clientHeight,hl.innerHeight||0),right:Math.max(ml.clientWidth,hl.innerWidth||0),left:0,top:0}:r.getBoundingClientRect(),u=c=0,H&&((d=r._gsMaxScrollY-r.scrollTop)<0?c=d:l>o.bottom-J&&d?(X=!0,c=Math.min(d,p*(1-Math.max(0,o.bottom-l)/J)|0)):l<o.top+$&&r.scrollTop&&(X=!0,c=-Math.min(r.scrollTop,p*(1-Math.max(0,l-o.top)/$)|0)),c&&(r.scrollTop+=c)),G&&((d=r._gsMaxScrollX-r.scrollLeft)<0?u=d:s>o.right-Z&&d?(X=!0,u=Math.min(d,p*(1-Math.max(0,o.right-s)/Z)|0)):s<o.left+tt&&r.scrollLeft&&(X=!0,u=-Math.min(r.scrollLeft,p*(1-Math.max(0,s-o.left)/tt)|0)),u&&(r.scrollLeft+=u)),i&&(u||c)&&(hl.scrollTo(r.scrollLeft,r.scrollTop),wt(Q.pointerX+u,Q.pointerY+c)),h=r}if(w){var m=Q.x,g=Q.y;F?(Q.deltaX=m-parseFloat(rt.rotation),Q.rotation=m,rt.rotation=m+"deg",rt.renderTransform(1,rt)):a?(H&&(Q.deltaY=g-a.top(),a.top(g)),G&&(Q.deltaX=m-a.left(),a.left(m))):z?(H&&(Q.deltaY=g-parseFloat(rt.y),rt.y=g+"px"),G&&(Q.deltaX=m-parseFloat(rt.x),rt.x=m+"px"),rt.renderTransform(1,rt)):(H&&(Q.deltaY=g-parseFloat(e.style.top||0),e.style.top=g+"px"),G&&(Q.deltaX=m-parseFloat(e.style.left||0),e.style.left=m+"px")),!f||n||O||(O=!0,!1===xu(Q,"drag","onDrag")&&(G&&(Q.x-=Q.deltaX),H&&(Q.y-=Q.deltaY),t(!0)),O=!1)}w=!1},ut=function(t,n){var r,i,o=Q.x,s=Q.y;e._gsap||(rt=fl.core.getCache(e)),rt.uncache&&fl.getProperty(e,"x"),z?(Q.x=parseFloat(rt.x),Q.y=parseFloat(rt.y)):F?Q.x=Q.rotation=Gl(parseFloat(rt.rotation)):a?(Q.y=a.top(),Q.x=a.left()):(Q.y=parseFloat(e.style.top||(i=wu(e))&&i.top)||0,Q.x=parseFloat(e.style.left||(i||{}).left)||0),(E||x||S)&&!n&&(Q.isDragging||Q.isThrowing)&&(S&&(eu.x=Q.x,eu.y=Q.y,(r=S(eu)).x!==Q.x&&(Q.x=r.x,w=!0),r.y!==Q.y&&(Q.y=r.y,w=!0)),E&&(r=E(Q.x))!==Q.x&&(Q.x=r,F&&(Q.rotation=r),w=!0),x&&((r=x(Q.y))!==Q.y&&(Q.y=r),w=!0)),w&&lt(!0),t||(Q.deltaX=Q.x-o,Q.deltaY=Q.y-s,xu(Q,"throwupdate","onThrowUpdate"))},ct=function(t,e,n,r){return null==e&&(e=-Wl),null==n&&(n=Wl),Bl(t)?function(i){var o=Q.isPressed?1-Q.edgeResistance:1;return t.call(Q,(i>n?n+(i-n)*o:i<e?e+(i-e)*o:i)*r)*r}:Hl(t)?function(r){for(var i,o,a=t.length,s=0,l=Wl;--a>-1;)(o=(i=t[a])-r)<0&&(o=-o),o<l&&i>=e&&i<=n&&(s=a,l=o);return t[s]}:isNaN(t)?function(t){return t}:function(){return t*r}},dt=function(){var t,r,i,o;d=!1,a?(a.calibrate(),Q.minX=m=-a.maxScrollLeft(),Q.minY=v=-a.maxScrollTop(),Q.maxX=p=Q.maxY=g=0,d=!0):n.bounds&&(t=Su(n.bounds,e.parentNode),F?(Q.minX=m=t.left,Q.maxX=p=t.left+t.width,Q.minY=v=Q.maxY=g=0):zl(n.bounds.maxX)&&zl(n.bounds.maxY)?(r=Su(e,e.parentNode),Q.minX=m=Math.round(ot(U,"px")+t.left-r.left),Q.minY=v=Math.round(ot(q,"px")+t.top-r.top),Q.maxX=p=Math.round(m+(t.width-r.width)),Q.maxY=g=Math.round(v+(t.height-r.height))):(t=n.bounds,Q.minX=m=t.minX,Q.minY=v=t.minY,Q.maxX=p=t.maxX,Q.maxY=g=t.maxY),m>p&&(Q.minX=p,Q.maxX=p=m,m=Q.minX),v>g&&(Q.minY=g,Q.maxY=g=v,v=Q.minY),F&&(Q.minRotation=m,Q.maxRotation=p),d=!0),n.liveSnap&&(i=!0===n.liveSnap?n.snap||{}:n.liveSnap,o=Hl(i)||Bl(i),F?(E=ct(o?i:i.rotation,m,p,1),x=null):i.points?S=function(t,e,n,r,i,o,a){return o=o&&o<Wl?o*o:Wl,Bl(t)?function(s){var l,u,c,d=Q.isPressed?1-Q.edgeResistance:1,f=s.x,h=s.y;return s.x=f=f>n?n+(f-n)*d:f<e?e+(f-e)*d:f,s.y=h=h>i?i+(h-i)*d:h<r?r+(h-r)*d:h,(l=t.call(Q,s))!==s&&(s.x=l.x,s.y=l.y),1!==a&&(s.x*=a,s.y*=a),o<Wl&&(u=s.x-f)*u+(c=s.y-h)*c>o&&(s.x=f,s.y=h),s}:Hl(t)?function(e){for(var n,r,i,a,s=t.length,l=0,u=Wl;--s>-1;)(a=(n=(i=t[s]).x-e.x)*n+(r=i.y-e.y)*r)<u&&(l=s,u=a);return u<=o?t[l]:e}:function(t){return t}}(o?i:i.points,m,p,v,g,i.radius,a?-1:1):(G&&(E=ct(o?i:i.x||i.left||i.scrollLeft,m,p,a?-1:1)),H&&(x=ct(o?i:i.y||i.top||i.scrollTop,v,g,a?-1:1))))},ft=function(){Q.isThrowing=!1,xu(Q,"throwcomplete","onThrowComplete")},ht=function(){Q.isThrowing=!1},pt=function(t,r){var i,o,s,l;t&&Cl?(!0===t&&(i=n.snap||n.liveSnap||{},o=Hl(i)||Bl(i),t={resistance:(n.throwResistance||n.resistance||1e3)/(F?10:1)},F?t.rotation=Iu(Q,o?i:i.rotation,p,m,1,r):(G&&(t[U]=Iu(Q,o?i:i.points||i.x||i.left,p,m,a?-1:1,r||"x"===Q.lockedAxis)),H&&(t[q]=Iu(Q,o?i:i.points||i.y||i.top,g,v,a?-1:1,r||"y"===Q.lockedAxis)),(i.points||Hl(i)&&jl(i[0]))&&(t.linkedProps=U+","+q,t.radius=i.radius))),Q.isThrowing=!0,l=isNaN(n.overshootTolerance)?1===n.edgeResistance?0:1-Q.edgeResistance+.2:n.overshootTolerance,t.duration||(t.duration={max:Math.max(n.minDuration||0,"maxDuration"in n?n.maxDuration:2),min:isNaN(n.minDuration)?0===l||jl(t)&&t.resistance>1e3?0:.5:n.minDuration,overshoot:l}),Q.tween=s=fl.to(a||e,{inertia:t,data:"_draggable",inherit:!1,onComplete:ft,onInterrupt:ht,onUpdate:n.fastMode?xu:ut,onUpdateParams:n.fastMode?[Q,"onthrowupdate","onThrowUpdate"]:i&&i.radius?[!1,!0]:[]}),n.fastMode||(a&&(a._skip=!0),s.render(1e9,!0,!0),ut(!0,!0),Q.endX=Q.x,Q.endY=Q.y,F&&(Q.endRotation=Q.x),s.play(0),ut(!0,!0),a&&(a._skip=!1))):d&&Q.applyBounds()},mt=function(t){var n,r=I;I=cl(e.parentNode,!0),t&&Q.isPressed&&!I.equals(r||new ul)&&(n=r.inverse().apply({x:s,y:l}),I.apply(n,n),s=n.x,l=n.y),I.equals(Yl)&&(I=null)},gt=function(){var t,n,r,i=1-Q.edgeResistance,o=it?pu(at):0,f=it?hu(at):0;z&&(rt.x=ot(U,"px")+"px",rt.y=ot(q,"px")+"px",rt.renderTransform()),mt(!1),Tu.x=Q.pointerX-o,Tu.y=Q.pointerY-f,I&&I.apply(Tu,Tu),s=Tu.x,l=Tu.y,w&&(wt(Q.pointerX,Q.pointerY),lt(!0)),N=cl(e),a?(dt(),c=a.top(),u=a.left()):(vt()?(ut(!0,!0),dt()):Q.applyBounds(),F?(t=e.ownerSVGElement?[rt.xOrigin-e.getBBox().x,rt.yOrigin-e.getBBox().y]:(wu(e)[ql]||"0 0").split(" "),_=Q.rotationOrigin=cl(e).apply({x:parseFloat(t[0])||0,y:parseFloat(t[1])||0}),ut(!0,!0),n=Q.pointerX-_.x-o,r=_.y-Q.pointerY+f,u=Q.x,c=Q.y=Math.atan2(r,n)*Ql):(c=ot(q,"px"),u=ot(U,"px"))),d&&i&&(u>p?u=p+(u-p)/i:u<m&&(u=m-(m-u)/i),F||(c>g?c=g+(c-g)/i:c<v&&(c=v-(v-c)/i))),Q.startX=u=Gl(u),Q.startY=c=Gl(c)},vt=function(){return Q.tween&&Q.tween.isActive()},yt=function(){!yl.parentNode||vt()||Q.isDragging||yl.parentNode.removeChild(yl)},bt=function(t,i){var u;if(!o||Q.isPressed||!t||!("mousedown"!==t.type&&"pointerdown"!==t.type||i)&&Kl()-nt<30&&xl[Q.pointerEvent.type])D&&t&&o&&cu(t);else{if(k=vt(),B=!1,Q.pointerEvent=t,xl[t.type]?(C=~t.type.indexOf("touch")?t.currentTarget||t.target:at,lu(C,"touchend",At),lu(C,"touchmove",_t),lu(C,"touchcancel",At),lu(at,"touchstart",fu)):(C=null,lu(at,"mousemove",_t)),R=null,kl&&C||(lu(at,"mouseup",At),t&&t.target&&lu(t.target,"mouseup",At)),T=et.call(Q,t.target)&&!1===n.dragClickables&&!i)return lu(t.target,"change",At),xu(Q,"pressInit","onPressInit"),xu(Q,"press","onPress"),Pu(W,!0),void(D=!1);var c;if(P=!(!C||G===H||!1===Q.vars.allowNativeTouchScrolling||Q.vars.allowContextMenu&&t&&(t.ctrlKey||t.which>2))&&(G?"y":"x"),(D=!P&&!Q.allowEventDefault)&&(cu(t),lu(hl,"touchforcechange",cu)),t.changedTouches?(t=y=t.changedTouches[0],b=t.identifier):t.pointerId?b=t.pointerId:y=b=null,Ll++,c=lt,Xl.push(c),1===Xl.length&&fl.ticker.add(ou),l=Q.pointerY=t.pageY,s=Q.pointerX=t.pageX,xu(Q,"pressInit","onPressInit"),(P||Q.autoScroll)&&bu(e.parentNode),!e.parentNode||!Q.autoScroll||a||F||!e.parentNode._gsMaxScrollX||yl.parentNode||e.getBBox||(yl.style.width=e.parentNode.scrollWidth+"px",e.parentNode.appendChild(yl)),gt(),Q.tween&&Q.tween.kill(),Q.isThrowing=!1,fl.killTweensOf(a||e,Y,!0),a&&fl.killTweensOf(e,{scrollTo:1},!0),Q.tween=Q.lockedAxis=null,(n.zIndexBoost||!F&&!a&&!1!==n.zIndexBoost)&&(e.style.zIndex=r.zIndex++),Q.isPressed=!0,f=!(!n.onDrag&&!Q._listeners.drag),h=!(!n.onMove&&!Q._listeners.move),!1!==n.cursor||n.activeCursor)for(u=W.length;--u>-1;)fl.set(W[u],{cursor:n.activeCursor||n.cursor||("grab"===Il?"grabbing":Il)});xu(Q,"press","onPress"),Cl&&Cl.track(a||e,z?"x,y":F?"rotation":"top,left")}},_t=function(t){var n,r,i,a,u,c,d=t;if(o&&!Sl&&Q.isPressed&&t){if(Q.pointerEvent=t,n=t.changedTouches){if((t=n[0])!==y&&t.identifier!==b){for(a=n.length;--a>-1&&(t=n[a]).identifier!==b&&t.target!==e;);if(a<0)return}}else if(t.pointerId&&b&&t.pointerId!==b)return;C&&P&&!R&&(Tu.x=t.pageX-(it?pu(at):0),Tu.y=t.pageY-(it?hu(at):0),I&&I.apply(Tu,Tu),r=Tu.x,i=Tu.y,((u=Math.abs(r-s))!==(c=Math.abs(i-l))&&(u>V||c>V)||Tl&&P===R)&&(R=u>c&&G?"x":"y",P&&R!==P&&lu(hl,"touchforcechange",cu),!1!==Q.vars.lockAxisOnTouchScroll&&G&&H&&(Q.lockedAxis="x"===R?"y":"x",Bl(Q.vars.onLockAxis)&&Q.vars.onLockAxis.call(Q,d)),Tl&&P===R))?At(d):(Q.allowEventDefault||P&&(!R||P===R)||!1===d.cancelable?D&&(D=!1):(cu(d),D=!0),Q.autoScroll&&(X=!0),wt(t.pageX,t.pageY,h))}else D&&t&&o&&cu(t)},wt=function(t,e,n){var r,i,o,a,f,h,y=1-Q.dragResistance,b=1-Q.edgeResistance,A=Q.pointerX,T=Q.pointerY,C=c,k=Q.x,P=Q.y,R=Q.endX,O=Q.endY,M=Q.endRotation,L=w;Q.pointerX=t,Q.pointerY=e,it&&(t-=pu(at),e-=hu(at)),F?(a=Gl(Math.atan2(_.y-e,t-_.x)*Ql),(f=Q.y-a)>180?(c-=360,Q.y=a):f<-180&&(c+=360,Q.y=a),I&&(h=t*I.a+e*I.c+I.e,e=t*I.b+e*I.d+I.f,t=h),Q.x!==u||Math.max(Math.abs(s-t),Math.abs(l-e))>V?(Q.y=a,o=Gl(u+(c-a)*y)):o=u):(I&&(h=t*I.a+e*I.c+I.e,e=t*I.b+e*I.d+I.f,t=h),(i=e-l)<V&&i>-V&&(i=0),(r=t-s)<V&&r>-V&&(r=0),(Q.lockAxis||Q.lockedAxis)&&(r||i)&&((h=Q.lockedAxis)||(Q.lockedAxis=h=G&&Math.abs(r)>Math.abs(i)?"y":H?"x":null,h&&Bl(Q.vars.onLockAxis)&&Q.vars.onLockAxis.call(Q,Q.pointerEvent)),"y"===h?i=0:"x"===h&&(r=0)),o=Gl(u+r*y),a=Gl(c+i*y)),(E||x||S)&&(Q.x!==o||Q.y!==a&&!F)&&(S&&(eu.x=o,eu.y=a,h=S(eu),o=Gl(h.x),a=Gl(h.y)),E&&(o=Gl(E(o))),x&&(a=Gl(x(a)))),d&&(o>p?o=p+Math.round((o-p)*b):o<m&&(o=m+Math.round((o-m)*b)),F||(a>g?a=Math.round(g+(a-g)*b):a<v&&(a=Math.round(v+(a-v)*b)))),(Q.x!==o||Q.y!==a&&!F)&&(F?(Q.endRotation=Q.x=Q.endX=Gl(o),w=!0):(H&&(Q.y=Q.endY=a,w=!0),G&&(Q.x=Q.endX=o,w=!0)),n&&!1===xu(Q,"move","onMove")?(Q.pointerX=A,Q.pointerY=T,c=C,Q.x=k,Q.y=P,Q.endX=R,Q.endY=O,Q.endRotation=M,w=L):!Q.isDragging&&Q.isPressed&&(Q.isDragging=B=!0,xu(Q,"dragstart","onDragStart")))},At=function t(r,i){if(o&&Q.isPressed&&(!r||null==b||i||!(r.pointerId&&r.pointerId!==b&&r.target!==e||r.changedTouches&&!function(t,e){for(var n=t.length;n--;)if(t[n].identifier===e)return!0}(r.changedTouches,b)))){Q.isPressed=!1;var a,s,l,u,c,d=r,f=Q.isDragging,h=Q.vars.allowContextMenu&&r&&(r.ctrlKey||r.which>2),p=fl.delayedCall(.001,yt);if(C?(uu(C,"touchend",t),uu(C,"touchmove",_t),uu(C,"touchcancel",t),uu(at,"touchstart",fu)):uu(at,"mousemove",_t),uu(hl,"touchforcechange",cu),kl&&C||(uu(at,"mouseup",t),r&&r.target&&uu(r.target,"mouseup",t)),w=!1,f&&(K=tu=Kl(),Q.isDragging=!1),su(lt),T&&!h)return r&&(uu(r.target,"change",t),Q.pointerEvent=d),Pu(W,!1),xu(Q,"release","onRelease"),xu(Q,"click","onClick"),void(T=!1);for(s=W.length;--s>-1;)_u(W[s],"cursor",n.cursor||(!1!==n.cursor?Il:null));if(Ll--,r){if((a=r.changedTouches)&&(r=a[0])!==y&&r.identifier!==b){for(s=a.length;--s>-1&&(r=a[s]).identifier!==b&&r.target!==e;);if(s<0&&!i)return}Q.pointerEvent=d,Q.pointerX=r.pageX,Q.pointerY=r.pageY}return h&&d?(cu(d),D=!0,xu(Q,"release","onRelease")):d&&!f?(D=!1,k&&(n.snap||n.bounds)&&pt(n.inertia||n.throwProps),xu(Q,"release","onRelease"),Tl&&"touchmove"===d.type||-1!==d.type.indexOf("cancel")||(xu(Q,"click","onClick"),Kl()-nt<300&&xu(Q,"doubleclick","onDoubleClick"),u=d.target||e,nt=Kl(),c=function(){nt===M||!Q.enabled()||Q.isPressed||d.defaultPrevented||(u.click?u.click():at.createEvent&&((l=at.createEvent("MouseEvents")).initMouseEvent("click",!0,!0,hl,1,Q.pointerEvent.screenX,Q.pointerEvent.screenY,Q.pointerX,Q.pointerY,!1,!1,!1,!1,0,null),u.dispatchEvent(l)))},Tl||d.defaultPrevented||fl.delayedCall(.05,c))):(pt(n.inertia||n.throwProps),Q.allowEventDefault||!d||!1===n.dragClickables&&et.call(Q,d.target)||!f||P&&(!R||P!==R)||!1===d.cancelable?D=!1:(D=!0,cu(d)),xu(Q,"release","onRelease")),vt()&&p.duration(Q.tween.duration()),f&&xu(Q,"dragend","onDragEnd"),!0}D&&r&&o&&cu(r)},Et=function(t){if(t&&Q.isDragging&&!a){var n=t.target||e.parentNode,r=n.scrollLeft-n._gsScrollX,i=n.scrollTop-n._gsScrollY;(r||i)&&(I?(s-=r*I.a+i*I.c,l-=i*I.d+r*I.b):(s-=r,l-=i),n._gsScrollX+=r,n._gsScrollY+=i,wt(Q.pointerX,Q.pointerY))}},xt=function(t){var e=Kl(),n=e-nt<100,r=e-K<50,i=n&&M===nt,o=Q.pointerEvent&&Q.pointerEvent.defaultPrevented,a=n&&L===nt,s=t.isTrusted||null==t.isTrusted&&n&&i;if((i||r&&!1!==Q.vars.suppressClickOnDrag)&&t.stopImmediatePropagation&&t.stopImmediatePropagation(),n&&(!Q.pointerEvent||!Q.pointerEvent.defaultPrevented)&&(!i||s&&!a))return s&&i&&(L=nt),void(M=nt);(Q.isPressed||r||n)&&(s&&t.detail&&n&&!o||cu(t)),n||r||B||(t&&t.target&&(Q.pointerEvent=t),xu(Q,"click","onClick"))},St=function(t){return I?{x:t.x*I.a+t.y*I.c+I.e,y:t.x*I.b+t.y*I.d+I.f}:{x:t.x,y:t.y}};return(A=r.get(e))&&A.kill(),i.startDrag=function(t,n){var r,i,o,a;bt(t||Q.pointerEvent,!0),n&&!Q.hitTest(t||Q.pointerEvent)&&(r=Eu(t||Q.pointerEvent),i=Eu(e),o=St({x:r.left+r.width/2,y:r.top+r.height/2}),a=St({x:i.left+i.width/2,y:i.top+i.height/2}),s-=o.x-a.x,l-=o.y-a.y),Q.isDragging||(Q.isDragging=B=!0,xu(Q,"dragstart","onDragStart"))},i.drag=_t,i.endDrag=function(t){return At(t||Q.pointerEvent,!0)},i.timeSinceDrag=function(){return Q.isDragging?0:(Kl()-K)/1e3},i.timeSinceClick=function(){return(Kl()-nt)/1e3},i.hitTest=function(t,e){return r.hitTest(Q.target,t,e)},i.getDirection=function(t,n){var r,i,o,a,s,l,d="velocity"===t&&Cl?t:jl(t)&&!F?"element":"start";return"element"===d&&(s=Eu(Q.target),l=Eu(t)),r="start"===d?Q.x-u:"velocity"===d?Cl.getVelocity(e,U):s.left+s.width/2-(l.left+l.width/2),F?r<0?"counter-clockwise":"clockwise":(n=n||2,i="start"===d?Q.y-c:"velocity"===d?Cl.getVelocity(e,q):s.top+s.height/2-(l.top+l.height/2),a=(o=Math.abs(r/i))<1/n?"":r<0?"left":"right",o<n&&(""!==a&&(a+="-"),a+=i<0?"up":"down"),a)},i.applyBounds=function(t,r){var i,o,a,s,l,u;if(t&&n.bounds!==t)return n.bounds=t,Q.update(!0,r);if(ut(!0),dt(),d&&!vt()){if(i=Q.x,o=Q.y,i>p?i=p:i<m&&(i=m),o>g?o=g:o<v&&(o=v),(Q.x!==i||Q.y!==o)&&(a=!0,Q.x=Q.endX=i,F?Q.endRotation=i:Q.y=Q.endY=o,w=!0,lt(!0),Q.autoScroll&&!Q.isDragging))for(bu(e.parentNode),s=e,nu.scrollTop=null!=hl.pageYOffset?hl.pageYOffset:null!=at.documentElement.scrollTop?at.documentElement.scrollTop:at.body.scrollTop,nu.scrollLeft=null!=hl.pageXOffset?hl.pageXOffset:null!=at.documentElement.scrollLeft?at.documentElement.scrollLeft:at.body.scrollLeft;s&&!u;)l=(u=vu(s.parentNode))?nu:s.parentNode,H&&l.scrollTop>l._gsMaxScrollY&&(l.scrollTop=l._gsMaxScrollY),G&&l.scrollLeft>l._gsMaxScrollX&&(l.scrollLeft=l._gsMaxScrollX),s=l;Q.isThrowing&&(a||Q.endX>p||Q.endX<m||Q.endY>g||Q.endY<v)&&pt(n.inertia||n.throwProps,a)}return Q},i.update=function(t,n,r){if(n&&Q.isPressed){if(F)Q.x=Q.y=Gl(parseFloat(rt.rotation));else{var i=cl(e),o=N.apply({x:Q.x-u,y:Q.y-c}),a=cl(e.parentNode,!0);a.apply({x:i.e-o.x,y:i.f-o.y},o),Q.x=Gl(Q.x-(o.x-a.e)),Q.y=Gl(Q.y-(o.y-a.f))}lt(!0),gt()}var s=Q.x,l=Q.y;return mt(!n),t?Q.applyBounds():(w&&r&&lt(!0),ut(!0)),n&&(wt(Q.pointerX,Q.pointerY),w&&lt(!0)),Q.isPressed&&!n&&(G&&Math.abs(s-Q.x)>.01||H&&Math.abs(l-Q.y)>.01&&!F)&&gt(),Q.autoScroll&&(bu(e.parentNode,Q.isDragging),X=Q.isDragging,lt(!0),gu(e,Et),mu(e,Et)),Q},i.enable=function(t){var r,i,s,l={lazy:!0};if(!1!==n.cursor&&(l.cursor=n.cursor||Il),fl.utils.checkPrefix("touchCallout")&&(l.touchCallout="none"),"soft"!==t){for(iu(W,G===H?"none":n.allowNativeTouchScrolling&&e.scrollHeight===e.clientHeight==(e.scrollWidth===e.clientHeight)||n.allowEventDefault?"manipulation":G?"pan-y":"pan-x"),i=W.length;--i>-1;)s=W[i],kl||lu(s,"mousedown",bt),lu(s,"touchstart",bt),lu(s,"click",xt,!0),fl.set(s,l),s.getBBox&&s.ownerSVGElement&&G!==H&&fl.set(s.ownerSVGElement,{touchAction:n.allowNativeTouchScrolling||n.allowEventDefault?"manipulation":G?"pan-y":"pan-x"}),n.allowContextMenu||lu(s,"contextmenu",st);Pu(W,!1)}return mu(e,Et),o=!0,Cl&&"soft"!==t&&Cl.track(a||e,z?"x,y":F?"rotation":"top,left"),e._gsDragID=r=e._gsDragID||"d"+Zl++,$l[r]=Q,a&&(a.enable(),a.element._gsDragID=r),(n.bounds||F)&&gt(),n.bounds&&Q.applyBounds(),Q},i.disable=function(t){for(var n,r=Q.isDragging,i=W.length;--i>-1;)_u(W[i],"cursor",null);if("soft"!==t){for(iu(W,null),i=W.length;--i>-1;)n=W[i],_u(n,"touchCallout",null),uu(n,"mousedown",bt),uu(n,"touchstart",bt),uu(n,"click",xt,!0),uu(n,"contextmenu",st);Pu(W,!0),C&&(uu(C,"touchcancel",At),uu(C,"touchend",At),uu(C,"touchmove",_t)),uu(at,"mouseup",At),uu(at,"mousemove",_t)}return gu(e,Et),o=!1,Cl&&"soft"!==t&&(Cl.untrack(a||e,z?"x,y":F?"rotation":"top,left"),Q.tween&&Q.tween.kill()),a&&a.disable(),su(lt),Q.isDragging=Q.isPressed=T=!1,r&&xu(Q,"dragend","onDragEnd"),Q},i.enabled=function(t,e){return arguments.length?t?Q.enable(e):Q.disable(e):o},i.kill=function(){return Q.isThrowing=!1,Q.tween&&Q.tween.kill(),Q.disable(),fl.set(W,{clearProps:"userSelect"}),delete $l[e._gsDragID],Q},i.revert=function(){this.kill(),this.styles&&this.styles.revert()},~j.indexOf("scroll")&&(a=i.scrollProxy=new Ou(e,function(t,e){for(var n in e)n in t||(t[n]=e[n]);return t}({onKill:function(){Q.isPressed&&At(null)}},n)),e.style.overflowY=H&&!El?"auto":"hidden",e.style.overflowX=G&&!El?"auto":"hidden",e=a.content),F?Y.rotation=1:(G&&(Y[U]=1),H&&(Y[q]=1)),rt.force3D=!("force3D"in n)||n.force3D,Pl(dl(i)),i.enable(),i}return n=t,(e=r).prototype=Object.create(n.prototype),e.prototype.constructor=e,e.__proto__=n,r.register=function(t){fl=t,Mu()},r.create=function(t,e){return bl||Mu(!0),wl(t).map((function(t){return new r(t,e)}))},r.get=function(t){return $l[(wl(t)[0]||{})._gsDragID]},r.timeSinceDrag=function(){return(Kl()-tu)/1e3},r.hitTest=function(t,e,n){if(t===e)return!1;var r,i,o,a=Eu(t),s=Eu(e),l=a.top,u=a.left,c=a.right,d=a.bottom,f=a.width,h=a.height,p=s.left>c||s.right<u||s.top>d||s.bottom<l;return p||!n?!p:(o=-1!==(n+"").indexOf("%"),n=parseFloat(n)||0,(r={left:Math.max(u,s.left),top:Math.max(l,s.top)}).width=Math.min(c,s.right)-r.left,r.height=Math.min(d,s.bottom)-r.top,!(r.width<0||r.height<0)&&(o?(n*=.01,(i=r.width*r.height)>=f*h*n||i>=s.width*s.height*n):r.width>n&&r.height>n))},r}(Lu);!function(t,e){for(var n in e)n in t||(t[n]=e[n])}(Du.prototype,{pointerX:0,pointerY:0,startX:0,startY:0,deltaX:0,deltaY:0,isDragging:!1,isPressed:!1}),Du.zIndex=1e3,Du.version="3.14.2",Nl()&&fl.registerPlugin(Du);var Nu,Bu,ju,zu,Fu,Uu,qu,Gu,Hu=function(){return Nu||"undefined"!=typeof window&&(Nu=window.gsap)},Vu={},Qu=function(t){return Gu(t).id},Wu=function(t){return Vu[Qu("string"==typeof t?ju(t)[0]:t)]},Yu=function(t){var e,n=Fu;if(t-qu>=.05)for(qu,qu=t;n;)((e=n.g(n.t,n.p))!==n.v1||t-n.t1>.2)&&(n.v2=n.v1,n.v1=e,n.t2=n.t1,n.t1=t),n=n._next},Ku={deg:360,rad:2*Math.PI},Xu=function(){(Nu=Hu())&&(ju=Nu.utils.toArray,zu=Nu.utils.getUnit,Gu=Nu.core.getCache,Uu=Nu.ticker,Bu=1)},$u=function(t,e,n,r){this.t=t,this.p=e,this.g=t._gsap.get,this.rCap=Ku[n||zu(this.g(t,e))],this.v1=this.v2=this.g(t,e),this.t1=this.t2=Uu.time,r&&(this._next=r,r._prev=this)},Zu=function(){function t(t,e){Bu||Xu(),this.target=ju(t)[0],Vu[Qu(this.target)]=this,this._props={},e&&this.add(e)}t.register=function(t){Nu=t,Xu()};var e=t.prototype;return e.get=function(t,e){var n,r,i,o=this._props[t]||console.warn("Not tracking "+t+" velocity.");return n=parseFloat(e?o.v1:o.g(o.t,o.p))-parseFloat(o.v2),(r=o.rCap)&&(n%=r)!==n%(r/2)&&(n=n<0?n+r:n-r),i=n/((e?o.t1:Uu.time)-o.t2),Math.round(1e4*i)/1e4},e.getAll=function(){var t,e={},n=this._props;for(t in n)e[t]=this.get(t);return e},e.isTracking=function(t){return t in this._props},e.add=function(t,e){var n=this._props[t];n?(n.v1=n.v2=n.g(n.t,n.p),n.t1=n.t2=Uu.time):(Fu||(Uu.add(Yu),qu=Uu.time),Fu=this._props[t]=new $u(this.target,t,e,Fu))},e.remove=function(t){var e,n,r=this._props[t];r&&(e=r._prev,n=r._next,e&&(e._next=n),n?n._prev=e:Fu===r&&(Uu.remove(Yu),Fu=0),delete this._props[t])},e.kill=function(t){for(var e in this._props)this.remove(e);t||delete Vu[Qu(this.target)]},t.track=function(e,n,r){Bu||Xu();for(var i,o,a=[],s=ju(e),l=n.split(","),u=(r||"").split(","),c=s.length;c--;){for(i=Wu(s[c])||new t(s[c]),o=l.length;o--;)i.add(l[o],u[o]||u[0]);a.push(i)}return a},t.untrack=function(t,e){var n=e&&e.split(",");ju(t).forEach((function(t){var e=Wu(t);e&&(n?n.forEach((function(t){return e.remove(t)})):e.kill(1))}))},t.isTracking=function(t,e){var n=Wu(t);return n&&n.isTracking(e)},t.getVelocity=function(t,e){var n=Wu(t);return n&&n.isTracking(e)?n.get(e):console.warn("Not tracking velocity of "+e)},t}();Zu.getByTarget=Wu,Hu()&&Nu.registerPlugin(Zu);var Ju,tc,ec,nc,rc,ic,oc,ac,sc,lc,uc,cc,dc,fc,hc=Zu.getByTarget,pc=function(){return Ju||"undefined"!=typeof window&&(Ju=window.gsap)&&Ju.registerPlugin&&Ju},mc=function(t){return"number"==typeof t},gc=function(t){return"object"==typeof t},vc=function(t){return"function"==typeof t},yc=Array.isArray,bc=function(t){return t},_c=1e10,wc=function(t,e,n){for(var r in e)r in t||r===n||(t[r]=e[r]);return t},Ac=function t(e){var n,r,i={};for(n in e)i[n]=gc(r=e[n])&&!yc(r)?t(r):r;return i},Ec=function(t,e,n,r,i){var o,a,s,l,u=e.length,c=0,d=_c;if(gc(t)){for(;u--;){for(s in o=e[u],a=0,t)a+=(l=o[s]-t[s])*l;a<d&&(c=u,d=a)}if((i||_c)<_c&&i<Math.sqrt(d))return t}else for(;u--;)(a=(o=e[u])-t)<0&&(a=-a),a<d&&o>=r&&o<=n&&(c=u,d=a);return e[c]},xc=function(t,e,n,r,i,o,a){if("auto"===t.end)return t;var s,l,u=t.end;if(n=isNaN(n)?_c:n,r=isNaN(r)?-1e10:r,gc(e)){if(s=e.calculated?e:(vc(u)?u(e,a):Ec(e,u,n,r,o))||e,!e.calculated){for(l in s)e[l]=s[l];e.calculated=!0}s=s[i]}else s=vc(u)?u(e,a):yc(u)?Ec(e,u,n,r,o):parseFloat(u);return s>n?s=n:s<r&&(s=r),{max:s,min:s,unitFactor:t.unitFactor}},Sc=function(t,e,n){return isNaN(t[e])?n:+t[e]},Tc=function(t,e){return.05*e*t/lc},Cc=function(t,e,n){return Math.abs((e-t)*lc/n/.05)},Ic={resistance:1,checkpoint:1,preventOvershoot:1,linkedProps:1,radius:1,duration:1},kc=function(t,e,n,r){if(e.linkedProps){var i,o,a,s,l,u,c=e.linkedProps.split(","),d={};for(i=0;i<c.length;i++)(a=e[o=c[i]])&&(s=mc(a.velocity)?a.velocity:(l=l||hc(t))&&l.isTracking(o)?l.get(o):0,u=Math.abs(s/Sc(a,"resistance",r)),d[o]=parseFloat(n(t,o))+Tc(s,u));return d}},Pc=function(){(Ju=pc())&&(ec=Ju.parseEase,nc=Ju.utils.toArray,oc=Ju.utils.getUnit,sc=Ju.core.getCache,uc=Ju.utils.clamp,dc=Ju.core.getStyleSaver,fc=Ju.core.reverting||function(){},rc=ec("power3"),lc=rc(.05),ac=Ju.core.PropTween,Ju.config({resistance:100,unitFactors:{time:1e3,totalTime:1e3,progress:1e3,totalProgress:1e3}}),ic=Ju.config(),Ju.registerPlugin(Zu),tc=1)},Rc={version:"3.14.2",name:"inertia",register:function(t){Ju=t,Pc()},init:function(t,e,n,r,i){tc||Pc();var o=hc(t);if("auto"===e){if(!o)return void console.warn("No inertia tracking on "+t+". InertiaPlugin.track(target) first.");e=o.getAll()}this.styles=dc&&"object"==typeof t.style&&dc(t),this.target=t,this.tween=n,cc=e;var a,s,l,u,c,d,f,h,p,m=t._gsap,g=m.get,v=e.duration,y=gc(v),b=e.preventOvershoot||y&&0===v.overshoot,_=Sc(e,"resistance",ic.resistance),w=mc(v)?v:function(t,e,n,r,i,o){if(void 0===n&&(n=10),void 0===r&&(r=.2),void 0===i&&(i=1),void 0===o&&(o=0),"string"==typeof t&&(t=nc(t)[0]),!t)return 0;var a,s,l,u,c,d,f,h,p,m,g=0,v=_c,y=e.inertia||e,b=sc(t).get,_=Sc(y,"resistance",ic.resistance);for(a in m=kc(t,y,b,_),y)Ic[a]||(s=y[a],gc(s)||((h=h||hc(t))&&h.isTracking(a)?s=mc(s)?{velocity:s}:{velocity:h.get(a)}:(u=+s||0,l=Math.abs(u/_))),gc(s)&&(u=mc(s.velocity)?s.velocity:(h=h||hc(t))&&h.isTracking(a)?h.get(a):0,l=uc(r,n,Math.abs(u/Sc(s,"resistance",_))),d=(c=parseFloat(b(t,a))||0)+Tc(u,l),"end"in s&&(s=xc(s,m&&a in m?m:d,s.max,s.min,a,y.radius,u),o&&(cc===e&&(cc=y=Ac(e)),y[a]=wc(s,y[a],"end"))),"max"in s&&d>+s.max+1e-10?(p=s.unitFactor||ic.unitFactors[a]||1,(f=c>s.max&&s.min!==s.max||u*p>-15&&u*p<45?r+.1*(n-r):Cc(c,s.max,u))+i<v&&(v=f+i)):"min"in s&&d<+s.min-1e-10&&(p=s.unitFactor||ic.unitFactors[a]||1,(f=c<s.min&&s.min!==s.max||u*p>-45&&u*p<15?r+.1*(n-r):Cc(c,s.min,u))+i<v&&(v=f+i)),f>g&&(g=f)),l>g&&(g=l));return g>v&&(g=v),g>n?n:g<r?r:g}(t,e,y&&v.max||10,y&&v.min||.2,y&&"overshoot"in v?+v.overshoot:b?0:1,!0);for(a in e=cc,cc=0,p=kc(t,e,g,_),e)Ic[a]||(s=e[a],vc(s)&&(s=s(r,t,i)),mc(s)?c=s:gc(s)&&!isNaN(s.velocity)?c=+s.velocity:o&&o.isTracking(a)?c=o.get(a):console.warn("ERROR: No velocity was defined for "+t+" property: "+a),d=Tc(c,w),h=0,l=g(t,a),u=oc(l),l=parseFloat(l),gc(s)&&(f=l+d,"end"in s&&(s=xc(s,p&&a in p?p:f,s.max,s.min,a,e.radius,c)),"max"in s&&+s.max<f?b||s.preventOvershoot?d=s.max-l:h=s.max-l-d:"min"in s&&+s.min>f&&(b||s.preventOvershoot?d=s.min-l:h=s.min-l-d)),this._props.push(a),this.styles&&this.styles.save(a),this._pt=new ac(this._pt,t,a,l,0,bc,0,m.set(t,a,this)),this._pt.u=u||0,this._pt.c1=d,this._pt.c2=h);return n.duration(w),1},render:function(t,e){var n,r=e._pt;if((t=rc(e.tween._time/e.tween._dur))||!fc())for(;r;)r.set(r.t,r.p,(n=r.s+r.c1*t+r.c2*t*t,Math.round(1e4*n)/1e4+r.u),r.d,t),r=r._next;else e.styles.revert()}};"track,untrack,isTracking,getVelocity,getByTarget".split(",").forEach((function(t){return Rc[t]=Zu[t]})),pc()&&Ju.registerPlugin(Rc);var Oc,Mc,Lc,Dc,Nc,Bc,jc,zc,Fc=function(){return"undefined"!=typeof window},Uc=function(){return Oc||Fc()&&(Oc=window.gsap)&&Oc.registerPlugin&&Oc},qc=function(t){return"string"==typeof t},Gc=function(t){return"function"==typeof t},Hc=function(t,e){var n="x"===e?"Width":"Height",r="scroll"+n,i="client"+n;return t===Lc||t===Dc||t===Nc?Math.max(Dc[r],Nc[r])-(Lc["inner"+n]||Dc[i]||Nc[i]):t[r]-t["offset"+n]},Vc=function(t,e){var n="scroll"+("x"===e?"Left":"Top");return t===Lc&&(null!=t.pageXOffset?n="page"+e.toUpperCase()+"Offset":t=null!=Dc[n]?Dc:Nc),function(){return t[n]}},Qc=function(t,e){if(!(t=Bc(t)[0])||!t.getBoundingClientRect)return console.warn("scrollTo target doesn't exist. Using 0")||{x:0,y:0};var n=t.getBoundingClientRect(),r=!e||e===Lc||e===Nc,i=r?{top:Dc.clientTop-(Lc.pageYOffset||Dc.scrollTop||Nc.scrollTop||0),left:Dc.clientLeft-(Lc.pageXOffset||Dc.scrollLeft||Nc.scrollLeft||0)}:e.getBoundingClientRect(),o={x:n.left-i.left,y:n.top-i.top};return!r&&e&&(o.x+=Vc(e,"x")(),o.y+=Vc(e,"y")()),o},Wc=function(t,e,n,r,i){return isNaN(t)||"object"==typeof t?qc(t)&&"="===t.charAt(1)?parseFloat(t.substr(2))*("-"===t.charAt(0)?-1:1)+r-i:"max"===t?Hc(e,n)-i:Math.min(Hc(e,n),Qc(t,e)[n]-i):parseFloat(t)-i},Yc=function(){Oc=Uc(),Fc()&&Oc&&"undefined"!=typeof document&&document.body&&(Lc=window,Nc=document.body,Dc=document.documentElement,Bc=Oc.utils.toArray,Oc.config({autoKillThreshold:7}),jc=Oc.config(),Mc=1)},Kc={version:"3.14.2",name:"scrollTo",rawVars:1,register:function(t){Oc=t,Yc()},init:function(t,e,n,r,i){Mc||Yc();var o=this,a=Oc.getProperty(t,"scrollSnapType");o.isWin=t===Lc,o.target=t,o.tween=n,e=function(t,e,n,r){if(Gc(t)&&(t=t(e,n,r)),"object"!=typeof t)return qc(t)&&"max"!==t&&"="!==t.charAt(1)?{x:t,y:t}:{y:t};if(t.nodeType)return{y:t,x:t};var i,o={};for(i in t)o[i]="onAutoKill"!==i&&Gc(t[i])?t[i](e,n,r):t[i];return o}(e,r,t,i),o.vars=e,o.autoKill=!!("autoKill"in e?e:jc).autoKill,o.getX=Vc(t,"x"),o.getY=Vc(t,"y"),o.x=o.xPrev=o.getX(),o.y=o.yPrev=o.getY(),zc||(zc=Oc.core.globals().ScrollTrigger),"smooth"===Oc.getProperty(t,"scrollBehavior")&&Oc.set(t,{scrollBehavior:"auto"}),a&&"none"!==a&&(o.snap=1,o.snapInline=t.style.scrollSnapType,t.style.scrollSnapType="none"),null!=e.x?(o.add(o,"x",o.x,Wc(e.x,t,"x",o.x,e.offsetX||0),r,i),o._props.push("scrollTo_x")):o.skipX=1,null!=e.y?(o.add(o,"y",o.y,Wc(e.y,t,"y",o.y,e.offsetY||0),r,i),o._props.push("scrollTo_y")):o.skipY=1},render:function(t,e){for(var n,r,i,o,a,s=e._pt,l=e.target,u=e.tween,c=e.autoKill,d=e.xPrev,f=e.yPrev,h=e.isWin,p=e.snap,m=e.snapInline;s;)s.r(t,s.d),s=s._next;n=h||!e.skipX?e.getX():d,i=(r=h||!e.skipY?e.getY():f)-f,o=n-d,a=jc.autoKillThreshold,e.x<0&&(e.x=0),e.y<0&&(e.y=0),c&&(!e.skipX&&(o>a||o<-a)&&n<Hc(l,"x")&&(e.skipX=1),!e.skipY&&(i>a||i<-a)&&r<Hc(l,"y")&&(e.skipY=1),e.skipX&&e.skipY&&(u.kill(),e.vars.onAutoKill&&e.vars.onAutoKill.apply(u,e.vars.onAutoKillParams||[]))),h?Lc.scrollTo(e.skipX?n:e.x,e.skipY?r:e.y):(e.skipY||(l.scrollTop=e.y),e.skipX||(l.scrollLeft=e.x)),!p||1!==t&&0!==t||(r=l.scrollTop,n=l.scrollLeft,m?l.style.scrollSnapType=m:l.style.removeProperty("scroll-snap-type"),l.scrollTop=r+1,l.scrollLeft=n+1,l.scrollTop=r,l.scrollLeft=n),e.xPrev=e.x,e.yPrev=e.y,zc&&zc.update()},kill:function(t){var e="scrollTo"===t,n=this._props.indexOf(t);return(e||"scrollTo_x"===t)&&(this.skipX=1),(e||"scrollTo_y"===t)&&(this.skipY=1),n>-1&&this._props.splice(n,1),!this._props.length}};Kc.max=Hc,Kc.getOffset=Qc,Kc.buildGetter=Vc,Kc.config=function(t){for(var e in jc||Yc()||(jc=Oc.config()),t)jc[e]=t[e]},Uc()&&Oc.registerPlugin(Kc);var Xc,$c,Zc,Jc,td,ed,nd,rd,id=1,od=function(t,e){return t.actions.forEach((function(t){return t.vars[e]&&t.vars[e](t)}))},ad={},sd=180/Math.PI,ld=Math.PI/180,ud={},cd={},dd={},fd=function(t){return"string"==typeof t?t.split(" ").join("").split(","):t},hd=fd("onStart,onUpdate,onComplete,onReverseComplete,onInterrupt"),pd=fd("transform,transformOrigin,width,height,position,top,left,opacity,zIndex,maxWidth,maxHeight,minWidth,minHeight"),md=function(t){return Xc(t)[0]||console.warn("Element not found:",t)},gd=function(t){return Math.round(1e4*t)/1e4||0},vd=function(t,e,n){return t.forEach((function(t){return t.classList[n](e)}))},yd={zIndex:1,kill:1,simple:1,spin:1,clearProps:1,targets:1,toggleClass:1,onComplete:1,onUpdate:1,onInterrupt:1,onStart:1,delay:1,repeat:1,repeatDelay:1,yoyo:1,scale:1,fade:1,absolute:1,props:1,onEnter:1,onLeave:1,custom:1,paused:1,nested:1,prune:1,absoluteOnLeave:1},bd={zIndex:1,simple:1,clearProps:1,scale:1,absolute:1,fitChild:1,getVars:1,props:1},_d=function(t){return t.replace(/([A-Z])/g,"-$1").toLowerCase()},wd=function(t,e){var n,r={};for(n in t)e[n]||(r[n]=t[n]);return r},Ad={},Ed=function(t){var e=Ad[t]=fd(t);return dd[t]=e.concat(pd),e},xd=function t(e,n,r){void 0===r&&(r=0);for(var i=e.parentNode,o=1e3*Math.pow(10,r)*(n?-1:1),a=n?900*-o:0;e;)a+=o,e=e.previousSibling;return i?a+t(i,n,r+1):a},Sd=function(t,e,n){return t.forEach((function(t){return t.d=xd(n?t.element:t.t,e)})),t.sort((function(t,e){return t.d-e.d})),t},Td=function(t,e){for(var n,r,i=t.element.style,o=t.css=t.css||[],a=e.length;a--;)r=i[n=e[a]]||i.getPropertyValue(n),o.push(r?n:cd[n]||(cd[n]=_d(n)),r);return i},Cd=function(t){var e=t.css,n=t.element.style,r=0;for(t.cache.uncache=1;r<e.length;r+=2)e[r+1]?n[e[r]]=e[r+1]:n.removeProperty(e[r]);!e[e.indexOf("transform")+1]&&n.translate&&(n.removeProperty("translate"),n.removeProperty("scale"),n.removeProperty("rotate"))},Id=function(t,e){t.forEach((function(t){return t.a.cache.uncache=1})),e||t.finalStates.forEach(Cd)},kd="paddingTop,paddingRight,paddingBottom,paddingLeft,gridArea,transition".split(","),Pd=function(t,e,n){var r,i,o,a=t.element,s=t.width,l=t.height,u=t.uncache,c=t.getProp,d=a.style,f=4;if("object"!=typeof e&&(e=t),Zc&&1!==n)return Zc._abs.push({t:a,b:t,a:t,sd:0}),Zc._final.push((function(){return(t.cache.uncache=1)&&Cd(t)})),a;for(i="none"===c("display"),t.isVisible&&!i||(i&&(Td(t,["display"]).display=e.display),t.matrix=e.matrix,t.width=s=t.width||e.width,t.height=l=t.height||e.height),Td(t,kd),o=window.getComputedStyle(a);f--;)d[kd[f]]=o[kd[f]];if(d.gridArea="1 / 1 / 1 / 1",d.transition="none",d.position="absolute",d.width=s+"px",d.height=l+"px",d.top||(d.top="0px"),d.left||(d.left="0px"),u)r=new Xd(a);else if((r=wd(t,ud)).position="absolute",t.simple){var h=a.getBoundingClientRect();r.matrix=new ul(1,0,0,1,h.left+nl(),h.top+el())}else r.matrix=cl(a,!1,!1,!0);return r=jd(r,t,!0),t.x=ed(r.x,.01),t.y=ed(r.y,.01),a},Rd=function(t,e){return!0!==e&&(e=Xc(e),t=t.filter((function(t){if(-1!==e.indexOf((t.sd<0?t.b:t.a).element))return!0;t.t._gsap.renderTransform(1),t.b.isVisible&&(t.t.style.width=t.b.width+"px",t.t.style.height=t.b.height+"px")}))),t},Od=function(t){return Sd(t,!0).forEach((function(t){return(t.a.isVisible||t.b.isVisible)&&Pd(t.sd<0?t.b:t.a,t.b,1)}))},Md=function(t,e){return e&&t.idLookup[Ld(e).id]||t.elementStates[0]},Ld=function(t,e,n,r){return t instanceof Xd?t:t instanceof Kd?Md(t,r):new Xd("string"==typeof t?md(t)||console.warn(t+" not found"):t,e,n)},Dd=function(t,e){var n,r=t.style||t;for(n in e)r[n]=e[n]},Nd=function(t){return t.map((function(t){return t.element}))},Bd=function(t,e,n){return t&&e.length&&n.add(t(Nd(e),n,new Kd(e,0,!0)),0)},jd=function(t,e,n,r,i,o){var a,s,l,u,c,d,f,h=t.element,p=t.cache,m=t.parent,g=t.x,v=t.y,y=e.width,b=e.height,_=e.scaleX,w=e.scaleY,A=e.rotation,E=e.bounds,x=o&&nd&&nd(h,"transform,width,height"),S=t,T=e.matrix,C=T.e,I=T.f,k=t.bounds.width!==E.width||t.bounds.height!==E.height||t.scaleX!==_||t.scaleY!==w||t.rotation!==A,P=!k&&t.simple&&e.simple&&!i;return P||!m?(_=w=1,A=a=0):(c=function(t){var e=t._gsap||$c.core.getCache(t);return e.gmCache===$c.ticker.frame?e.gMatrix:(e.gmCache=$c.ticker.frame,e.gMatrix=cl(t,!0,!1,!0))}(m),d=c.clone().multiply(e.ctm?e.matrix.clone().multiply(e.ctm):e.matrix),A=gd(Math.atan2(d.b,d.a)*sd),a=gd(Math.atan2(d.c,d.d)*sd+A)%360,_=Math.sqrt(Math.pow(d.a,2)+Math.pow(d.b,2)),w=Math.sqrt(Math.pow(d.c,2)+Math.pow(d.d,2))*Math.cos(a*ld),i&&(i=Xc(i)[0],u=$c.getProperty(i),f=i.getBBox&&"function"==typeof i.getBBox&&i.getBBox(),S={scaleX:u("scaleX"),scaleY:u("scaleY"),width:f?f.width:Math.ceil(parseFloat(u("width","px"))),height:f?f.height:parseFloat(u("height","px"))}),p.rotation=A+"deg",p.skewX=a+"deg"),n?(_*=y!==S.width&&S.width?y/S.width:1,w*=b!==S.height&&S.height?b/S.height:1,p.scaleX=_,p.scaleY=w):(y=ed(y*_/S.scaleX,0),b=ed(b*w/S.scaleY,0),h.style.width=y+"px",h.style.height=b+"px"),r&&Dd(h,e.props),P||!m?(g+=C-t.matrix.e,v+=I-t.matrix.f):k||m!==e.parent?(p.x=g+"px",p.y=v+"px",p.renderTransform(1,p),d=cl(i||h,!1,!1,!0),s=c.apply({x:d.e,y:d.f}),g+=(l=c.apply({x:C,y:I})).x-s.x,v+=l.y-s.y):(c.e=c.f=0,g+=(l=c.apply({x:C-t.matrix.e,y:I-t.matrix.f})).x,v+=l.y),g=ed(g,.02),v=ed(v,.02),!o||o instanceof Xd?(p.x=g+"px",p.y=v+"px",p.renderTransform(1,p)):x&&x.revert(),o&&(o.x=g,o.y=v,o.rotation=A,o.skewX=a,n?(o.scaleX=_,o.scaleY=w):(o.width=y,o.height=b)),o||p},zd=function(t,e){return t instanceof Kd?t:new Kd(t,e)},Fd=function(t,e,n){var r=t.idLookup[n],i=t.alt[n];return!i.isVisible||(e.getElementState(i.element)||i).isVisible&&r.isVisible?r:i},Ud=[],qd="width,height,overflowX,overflowY".split(","),Gd=function(t){if(t!==rd){var e=td.style,n=td.clientWidth===window.outerWidth,r=td.clientHeight===window.outerHeight,i=4;if(t&&(n||r)){for(;i--;)Ud[i]=e[qd[i]];n&&(e.width=td.clientWidth+"px",e.overflowY="hidden"),r&&(e.height=td.clientHeight+"px",e.overflowX="hidden"),rd=t}else if(rd){for(;i--;)Ud[i]?e[qd[i]]=Ud[i]:e.removeProperty(_d(qd[i]));rd=t}}},Hd=function(t,e){for(var n=0;n<t.length;n+=3)$c.set(t[n],{clearProps:!0}),t[n].setAttribute("style",t[n+e]),t[n]._gsap.gmCache=-1},Vd=function(t,e,n,r){t instanceof Kd&&e instanceof Kd||console.warn("Not a valid state object.");var i,o,a,s,l,u,c,d,f,h,p,m,g,v,y,b=n=n||{},_=b.clearProps,w=b.onEnter,A=b.onLeave,E=b.absolute,x=b.absoluteOnLeave,S=b.custom,T=b.delay,C=b.paused,I=b.repeat,k=b.repeatDelay,P=b.yoyo,R=b.toggleClass,O=b.nested,M=b.zIndex,L=b.scale,D=b.fade,N=b.stagger,B=b.spin,j=b.prune,z=("props"in n?n:t).props,F=wd(n,yd),U=$c.timeline({delay:T,paused:C,repeat:I,repeatDelay:k,yoyo:P,data:"isFlip"}),q=F,G=[],H=[],V=[],Q=[],W=!0===B?1:B||0,Y="function"==typeof B?B:function(){return W},K=t.interrupted||e.interrupted,X=U[1!==r?"to":"from"];for(o in e.idLookup)p=e.alt[o]?Fd(e,t,o):e.idLookup[o],l=p.element,h=t.idLookup[o],t.alt[o]&&l===h.element&&(t.alt[o].isVisible||!p.isVisible)&&(h=t.alt[o]),h?(u={t:l,b:h,a:p,sd:h.element===l?0:p.isVisible?1:-1},V.push(u),u.sd&&(u.sd<0&&(u.b=p,u.a=h),K&&Td(u.b,z?dd[z]:pd),D&&V.push(u.swap={t:h.element,b:u.b,a:u.a,sd:-u.sd,swap:u})),l._flip=h.element._flip=Zc?Zc.timeline:U):p.isVisible&&(V.push({t:l,b:wd(p,{isVisible:1}),a:p,sd:0,entering:1}),l._flip=Zc?Zc.timeline:U);(z&&(Ad[z]||Ed(z)).forEach((function(t){return F[t]=function(e){return V[e].a.props[t]}})),V.finalStates=f=[],m=function(){Sd(V),Gd(!0);var e,r=[];for(s=0;s<V.length;s++)u=V[s],g=u.a,v=u.b,!j||g.isDifferent(v)||u.entering?(l=u.t,!O||u.sd<0||!s||(g=u.a=g.clone({matrix:cl(l,!1,!1,!0)})),v.isVisible&&g.isVisible?(u.sd<0?(O&&Hd(r,1),c=new Xd(l,z,t.simple),jd(c,g,L,0,0,c),c.matrix=cl(l,!1,!1,!0),c.bounds=l.getBoundingClientRect(),c.css=u.b.css,u.a=g=c,D&&(l.style.opacity=K?v.opacity:g.opacity),N&&Q.push(l),O&&(Hd(r,2),r.push(l,l.getAttribute("style")))):u.sd>0&&D&&(l.style.opacity=K?g.opacity-v.opacity:"0"),jd(g,v,L,z),O&&u.sd<0&&r.push(l.getAttribute("style"))):v.isVisible!==g.isVisible&&(v.isVisible?g.isVisible||(v.css=g.css,H.push(v),V.splice(s--,1),E&&O&&jd(g,v,L,z)):(g.isVisible&&G.push(g),V.splice(s--,1))),L||(l.style.maxWidth=Math.max(g.width,v.width)+"px",l.style.maxHeight=Math.max(g.height,v.height)+"px",l.style.minWidth=Math.min(g.width,v.width)+"px",l.style.minHeight=Math.min(g.height,v.height)+"px"),O&&R&&l.classList.add(R)):V.splice(s--,1),f.push(g);if(R&&(e=f.map((function(t){return t.element})),O&&e.forEach((function(t){return t.classList.remove(R)}))),Gd(!1),L?(F.scaleX=function(t){return V[t].a.scaleX},F.scaleY=function(t){return V[t].a.scaleY}):(F.width=function(t){return V[t].a.width+"px"},F.height=function(t){return V[t].a.height+"px"},F.autoRound=n.autoRound||!1),F.x=function(t){return V[t].a.x+"px"},F.y=function(t){return V[t].a.y+"px"},F.rotation=function(t){return V[t].a.rotation+(B?360*Y(t,d[t],d):0)},F.skewX=function(t){return V[t].a.skewX},d=V.map((function(t){return t.t})),(M||0===M)&&(F.modifiers={zIndex:function(){return M}},F.zIndex=M,F.immediateRender=!1!==n.immediateRender),D&&(F.opacity=function(t){return V[t].sd<0?0:V[t].sd>0?V[t].a.opacity:"+=0"}),Q.length){N=$c.utils.distribute(N);var h=d.slice(Q.length);F.stagger=function(t,e){return N(~Q.indexOf(e)?d.indexOf(V[t].swap.t):t,e,h)}}if(hd.forEach((function(t){return n[t]&&U.eventCallback(t,n[t],n[t+"Params"])})),S&&d.length)for(o in q=wd(F,yd),"scale"in S&&(S.scaleX=S.scaleY=S.scale,delete S.scale),S)(i=wd(S[o],bd))[o]=F[o],!("duration"in i)&&"duration"in F&&(i.duration=F.duration),i.stagger=F.stagger,X.call(U,d,i,0),delete q[o];(d.length||H.length||G.length)&&(R&&U.add((function(){return vd(e,R,U._zTime<0?"remove":"add")}),0)&&!C&&vd(e,R,"add"),d.length&&X.call(U,d,q,0)),Bd(w,G,U),Bd(A,H,U);var p=Zc&&Zc.timeline;p&&(p.add(U,0),Zc._final.push((function(){return Id(V,!_)}))),a=U.duration(),U.call((function(){var t=U.time()>=a;t&&!p&&Id(V,!_),R&&vd(e,R,t?"remove":"add")}))},x&&(E=V.filter((function(t){return!t.sd&&!t.a.isVisible&&t.b.isVisible})).map((function(t){return t.a.element}))),Zc)?(E&&(y=Zc._abs).push.apply(y,Rd(V,E)),Zc._run.push(m)):(E&&Od(Rd(V,E)),m());var $=Zc?Zc.timeline:U;return $.revert=function(){return Wd($,1,1)},$},Qd=function t(e){e.vars.onInterrupt&&e.vars.onInterrupt.apply(e,e.vars.onInterruptParams||[]),e.getChildren(!0,!1,!0).forEach(t)},Wd=function(t,e,n){if(t&&t.progress()<1&&(!t.paused()||n))return e&&(Qd(t),e<2&&t.progress(1),t.kill()),!0},Yd=function(t){for(var e,n=t.idLookup={},r=t.alt={},i=t.elementStates,o=i.length;o--;)n[(e=i[o]).id]?r[e.id]=e:n[e.id]=e},Kd=function(){function t(t,e,n){if(this.props=e&&e.props,this.simple=!(!e||!e.simple),n)this.targets=Nd(t),this.elementStates=t,Yd(this);else{this.targets=Xc(t);var r=e&&(!1===e.kill||e.batch&&!e.kill);Zc&&!r&&Zc._kill.push(this),this.update(r||!!Zc)}}var e=t.prototype;return e.update=function(t){var e=this;return this.elementStates=this.targets.map((function(t){return new Xd(t,e.props,e.simple)})),Yd(this),this.interrupt(t),this.recordInlineStyles(),this},e.clear=function(){return this.targets.length=this.elementStates.length=0,Yd(this),this},e.fit=function(t,e,n){for(var r,i,o=Sd(this.elementStates.slice(0),!1,!0),a=(t||this).idLookup,s=0;s<o.length;s++)r=o[s],n&&(r.matrix=cl(r.element,!1,!1,!0)),(i=a[r.id])&&jd(r,i,e,!0,0,r),r.matrix=cl(r.element,!1,!1,!0);return this},e.getProperty=function(t,e){var n=this.getElementState(t)||ud;return(e in n?n:n.props||ud)[e]},e.add=function(t){for(var e,n,r,i=t.targets.length,o=this.idLookup,a=this.alt;i--;)(r=o[(n=t.elementStates[i]).id])&&(n.element===r.element||a[n.id]&&a[n.id].element===n.element)?(e=this.elementStates.indexOf(n.element===r.element?r:a[n.id]),this.targets.splice(e,1,t.targets[i]),this.elementStates.splice(e,1,n)):(this.targets.push(t.targets[i]),this.elementStates.push(n));return t.interrupted&&(this.interrupted=!0),t.simple||(this.simple=!1),Yd(this),this},e.compare=function(t){var e,n,r,i,o,a,s,l,u=t.idLookup,c=this.idLookup,d=[],f=[],h=[],p=[],m=[],g=t.alt,v=this.alt,y=function(t,e,n){return(t.isVisible!==e.isVisible?t.isVisible?h:p:t.isVisible?f:d).push(n)&&m.push(n)},b=function(t,e,n){return m.indexOf(n)<0&&y(t,e,n)};for(r in u)o=g[r],a=v[r],i=(e=o?Fd(t,this,r):u[r]).element,n=c[r],a?(l=n.isVisible||!a.isVisible&&i===n.element?n:a,(s=!o||e.isVisible||o.isVisible||l.element!==o.element?e:o).isVisible&&l.isVisible&&s.element!==l.element?((s.isDifferent(l)?f:d).push(s.element,l.element),m.push(s.element,l.element)):y(s,l,s.element),o&&s.element===o.element&&(o=u[r]),b(s.element!==n.element&&o?o:s,n,n.element),b(o&&o.element===a.element?o:s,a,a.element),o&&b(o,a.element===o.element?a:n,o.element)):(n?n.isDifferent(e)?y(e,n,i):d.push(i):h.push(i),o&&b(o,n,o.element));for(r in c)u[r]||(p.push(c[r].element),v[r]&&p.push(v[r].element));return{changed:f,unchanged:d,enter:h,leave:p}},e.recordInlineStyles=function(){for(var t=dd[this.props]||pd,e=this.elementStates.length;e--;)Td(this.elementStates[e],t)},e.interrupt=function(t){var e=this,n=[];this.targets.forEach((function(r){var i=r._flip,o=Wd(i,t?0:1);t&&o&&n.indexOf(i)<0&&i.add((function(){return e.updateVisibility()})),o&&n.push(i)})),!t&&n.length&&this.updateVisibility(),this.interrupted||(this.interrupted=!!n.length)},e.updateVisibility=function(){this.elementStates.forEach((function(t){var e=t.element.getBoundingClientRect();t.isVisible=!!(e.width||e.height||e.top||e.left),t.uncache=1}))},e.getElementState=function(t){return this.elementStates[this.targets.indexOf(md(t))]},e.makeAbsolute=function(){return Sd(this.elementStates.slice(0),!0,!0).map(Pd)},t}(),Xd=function(){function t(e,n,r){e instanceof t?Object.assign(this,e,n||{}):(this.element=e,this.update(n,r))}var e=t.prototype;return e.isDifferent=function(t){var e=this.bounds,n=t.bounds;return e.top!==n.top||e.left!==n.left||e.width!==n.width||e.height!==n.height||!this.matrix.equals(t.matrix)||this.opacity!==t.opacity||this.props&&t.props&&JSON.stringify(this.props)!==JSON.stringify(t.props)},e.clone=function(e){return new t(this,e)},e.update=function(t,e){var n=this,r=n.element,i=$c.getProperty(r),o=$c.core.getCache(r),a=r.getBoundingClientRect(),s=r.getBBox&&"function"==typeof r.getBBox&&"svg"!==r.nodeName.toLowerCase()&&r.getBBox(),l=e?new ul(1,0,0,1,a.left+nl(),a.top+el()):cl(r,!1,!1,!0);o.uncache=1,n.getProp=i,n.element=r,n.id=function(t){var e=t.getAttribute("data-flip-id");return e||t.setAttribute("data-flip-id",e="auto-"+id++),e}(r),n.matrix=l,n.cache=o,n.bounds=a,n.isVisible=!!(a.width||a.height||a.left||a.top),n.display=i("display"),n.position=i("position"),n.parent=r.parentNode,n.x=i("x","px"),n.y=i("y","px"),n.scaleX=o.scaleX,n.scaleY=o.scaleY,n.rotation=i("rotation"),n.skewX=i("skewX"),n.opacity=i("opacity"),n.width=s?s.width:ed(i("width","px"),.04),n.height=s?s.height:ed(i("height","px"),.04),t&&function(t,e){for(var n=$c.getProperty(t.element,null,"native"),r=t.props={},i=e.length;i--;)r[e[i]]=(n(e[i])+"").trim();r.zIndex&&(r.zIndex=parseFloat(r.zIndex)||0)}(n,Ad[t]||Ed(t)),n.ctm=r.getCTM&&"svg"===r.nodeName.toLowerCase()&&al(r).inverse(),n.simple=e||1===gd(l.a)&&!gd(l.b)&&!gd(l.c)&&1===gd(l.d),n.uncache=0},t}(),$d=function(){function t(t,e){this.vars=t,this.batch=e,this.states=[],this.timeline=e.timeline}var e=t.prototype;return e.getStateById=function(t){for(var e=this.states.length;e--;)if(this.states[e].idLookup[t])return this.states[e]},e.kill=function(){this.batch.remove(this)},t}(),Zd=function(){function t(t){this.id=t,this.actions=[],this._kill=[],this._final=[],this._abs=[],this._run=[],this.data={},this.state=new Kd,this.timeline=$c.timeline()}var e=t.prototype;return e.add=function(t){var e=this.actions.filter((function(e){return e.vars===t}));return e.length?e[0]:(e=new $d("function"==typeof t?{animate:t}:t,this),this.actions.push(e),e)},e.remove=function(t){var e=this.actions.indexOf(t);return e>=0&&this.actions.splice(e,1),this},e.getState=function(t){var e=this,n=Zc,r=Jc;return Zc=this,this.state.clear(),this._kill.length=0,this.actions.forEach((function(n){n.vars.getState&&(n.states.length=0,Jc=n,n.state=n.vars.getState(n)),t&&n.states.forEach((function(t){return e.state.add(t)}))})),Jc=r,Zc=n,this.killConflicts(),this},e.animate=function(){var t,e,n=this,r=Zc,i=this.timeline,o=this.actions.length;for(Zc=this,i.clear(),this._abs.length=this._final.length=this._run.length=0,this.actions.forEach((function(t){t.vars.animate&&t.vars.animate(t);var e,n,r=t.vars.onEnter,i=t.vars.onLeave,o=t.targets;o&&o.length&&(r||i)&&(e=new Kd,t.states.forEach((function(t){return e.add(t)})),(n=e.compare(Jd.getState(o))).enter.length&&r&&r(n.enter),n.leave.length&&i&&i(n.leave))})),Od(this._abs),this._run.forEach((function(t){return t()})),e=i.duration(),t=this._final.slice(0),i.add((function(){e<=i.time()&&(t.forEach((function(t){return t()})),od(n,"onComplete"))})),Zc=r;o--;)this.actions[o].vars.once&&this.actions[o].kill();return od(this,"onStart"),i.restart(),this},e.loadState=function(t){t||(t=function(){return 0});var e=[];return this.actions.forEach((function(n){if(n.vars.loadState){var r,i=function i(o){o&&(n.targets=o),~(r=e.indexOf(i))&&(e.splice(r,1),e.length||t())};e.push(i),n.vars.loadState(i)}})),e.length||t(),this},e.setState=function(){return this.actions.forEach((function(t){return t.targets=t.vars.setState&&t.vars.setState(t)})),this},e.killConflicts=function(t){return this.state.interrupt(t),this._kill.forEach((function(e){return e.interrupt(t)})),this},e.run=function(t,e){var n=this;return this!==Zc&&(t||this.getState(e),this.loadState((function(){n._killed||(n.setState(),n.animate())}))),this},e.clear=function(t){this.state.clear(),t||(this.actions.length=0)},e.getStateById=function(t){for(var e,n=this.actions.length;n--;)if(e=this.actions[n].getStateById(t))return e;return this.state.idLookup[t]&&this.state},e.kill=function(){this._killed=1,this.clear(),delete ad[this.id]},t}(),Jd=function(){function t(){}return t.getState=function(e,n){var r=zd(e,n);return Jc&&Jc.states.push(r),n&&n.batch&&t.batch(n.batch).state.add(r),r},t.from=function(t,e){return"clearProps"in(e=e||{})||(e.clearProps=!0),Vd(t,zd(e.targets||t.targets,{props:e.props||t.props,simple:e.simple,kill:!!e.kill}),e,-1)},t.to=function(t,e){return Vd(t,zd(e.targets||t.targets,{props:e.props||t.props,simple:e.simple,kill:!!e.kill}),e,1)},t.fromTo=function(t,e,n){return Vd(t,e,n)},t.fit=function(t,e,n){var r=n?wd(n,bd):{},i=n||r,o=i.absolute,a=i.scale,s=i.getVars,l=i.props,u=i.runBackwards,c=i.onComplete,d=i.simple,f=n&&n.fitChild&&md(n.fitChild),h=Ld(e,l,d,t),p=Ld(t,0,d,h),m=l?dd[l]:pd,g=$c.context();return l&&Dd(r,h.props),Td(p,m),u&&("immediateRender"in r||(r.immediateRender=!0),r.onComplete=function(){Cd(p),c&&c.apply(this,arguments)}),o&&Pd(p,h),r=jd(p,h,a||f,!r.duration&&l,f,r.duration||s?r:0),"object"==typeof n&&"zIndex"in n&&(r.zIndex=n.zIndex),g&&!s&&g.add((function(){return function(){return Cd(p)}})),s?r:r.duration?$c.to(p.element,r):null},t.makeAbsolute=function(t,e){return(t instanceof Kd?t:new Kd(t,e)).makeAbsolute()},t.batch=function(t){return t||(t="default"),ad[t]||(ad[t]=new Zd(t))},t.killFlipsOf=function(t,e){(t instanceof Kd?t.targets:Xc(t)).forEach((function(t){return t&&Wd(t._flip,!1!==e?1:2)}))},t.isFlipping=function(e){var n=t.getByTarget(e);return!!n&&n.isActive()},t.getByTarget=function(t){return(md(t)||ud)._flip},t.getElementState=function(t,e){return new Xd(md(t),e)},t.convertCoordinates=function(t,e,n){var r=cl(e,!0,!0).multiply(cl(t));return n?r.apply(n):r},t.register=function(t){if(td="undefined"!=typeof document&&document.body){$c=t,Zs(td),Xc=$c.utils.toArray,nd=$c.core.getStyleSaver;var e=$c.utils.snap(.1);ed=function(t,n){return e(parseFloat(t)+n)}}},t}();Jd.version="3.14.2","undefined"!=typeof window&&window.gsap&&window.gsap.registerPlugin(Jd);n(9129);var tf=n(3011),ef=n.n(tf);class nf extends(ef()){constructor(t){super(),this.bootstrap=t,this._dependencies=new Set,this._enabled=!1}get priority(){return 0}get enabled(){return this._enabled}set enabled(t){this._enabled!=t&&(this._enabled=t)}get dependencies(){return this._dependencies}get runnable(){return this.enabled&&Array.from(this.dependencies).every((t=>this.bootstrap.modules.has(t)))}init(){}async before(){}async run(){}async after(){}}const rf=nf;var of=n(3065);class af extends rf{constructor(t){super(t),this._previous={},this._state={}}get previous(){return this._previous}get state(){return this._state}set state(t){of.debug("state",t),this._previous=this._state,this._state=t||{},this.emit("change",this._state)}}const sf=af;var lf=n(2200),uf=n.n(lf),cf=n(4193),df=n.n(cf);let ff;function hf(){if(ff)return ff;let t=(e=document.location.href).substring(0,e.lastIndexOf("/")+1).trim();var e;let n=document.querySelector("base");return ff=n?n.getAttribute("href"):t,ff=ff||t,ff}class pf{constructor(t){this._uri=df()(t),this._base=df()(hf()),this._uri.normalize(),this._base.normalize()}get base(){return this._base}get relative(){return this._uri.toString().replace(this._base.toString(),"")}get external(){return this.hostname!=this._base.hostname()}get scheme(){return this._uri.scheme()||this._base.scheme()}set scheme(t){this._uri.scheme(t)}get hostname(){return this._uri.hostname()||this._base.hostname()}set hostname(t){this._uri.hostname(t)}get port(){return this._uri.port()}set port(t){this._uri.port(t)}get username(){return this._uri.username()}set username(t){this._uri.username(t)}get password(){return this._uri.password()}set password(t){this._uri.password(t)}get path(){return this._uri.path()}set path(t){this._uri.path(t)}get tld(){return this._uri.tld()}set tld(t){this._uri.tld(t)}get hash(){return this._uri.hash()}set hash(t){this._uri.hash(t)}get segment(){return this._uri.segment()}set segment(t){this._uri.segment(t)}get query(){return this._uri.query(!0)}set query(t){this._uri.query(t)}equals(t=void 0){return t instanceof pf?this._uri.equals(t._uri):this._uri.equals(t.toString())}toString(){return this._uri.toString()}}class mf extends(ef()){constructor(){super(),this._crossroads=uf().create(),this._crossroads.ignoreState=!0,this._crossroads.shouldTypecast=!0,this._previous=void 0,this._current=new pf(window.location.href),this.routedHandler=null,this.exitHandlers=new WeakMap,document.querySelector("base")||console.warn(`No <base> tag defined, Router may not work properly [computed base: ${hf()}].`)}get previous(){return this._previous}get current(){return this._current}add(t,e){const n=this._crossroads.addRoute(t);return"function"==typeof e&&(this.routedHandler&&n.matched.add(this.routedHandler,null,10),n.matched.add(e,null,0)),n}remove(t){this._crossroads.removeRoute(t),t.dispose()}catchAll(t){this._crossroads.bypassed.add(t)}removeCatchAll(t){this._crossroads.bypassed.remove(t)}routed(t,e=10){this.routedHandler=t,this._crossroads._routes.forEach((t=>t.matched.add(this.routedHandler,null,10)))}removeRouted(t){this._crossroads._routes.forEach((t=>t.matched.remove(this.routedHandler,null,10))),this.routedHandler=null}set(t){t=new pf("string"==typeof t?t:""),this.current.equals(t)||(this._previous=this._current,this._current=t,this._crossroads.parse(this._current.relative),this.emit("change",this._current.toString()))}}const gf=mf;class vf extends rf{constructor(t){super(t),this.router=new gf,this.catchAll=this.catchAll.bind(this),this.stateChanged=this.stateChanged.bind(this),this.routed=this.routed.bind(this),this.dependencies.add(sf)}get enabled(){return this._enabled}set enabled(t){this._enabled!=t&&(this._enabled=t,t?(this.router.routed(this.routed),this.router.catchAll(this.catchAll),this.bootstrap.get(sf).on("change",this.stateChanged)):(this.router.removeRouted(this.routed),this.router.removeCatchAll(this.catchAll),this.bootstrap.get(sf).off("change",this.stateChanged)))}get current(){return this.router.current}get previous(){return this.router.previous}add(t,e){return this.router.add(t,e)}remove(t){this.router.remove(t)}set(t){this.router.set(t)}async before(){let t=this.bootstrap.get(sf);t.state&&t.state.url||(t.state.url=this.router.current.toString())}routed(t){if(!this.router.previous.equals(this.router.current)){of.debug("routeChanged",t);let e=this.bootstrap.get(sf),n=e.state;return n.url=this.router.current.toString(),e.state=n,!0}return!1}catchAll(t){this.routed(t)&&this.bootstrap.run()}stateChanged(t){of.debug("stateChanged",t),this.router.set(t&&t.url?t.url:"")}}const yf=vf;class bf extends rf{constructor(t){super(t),this.dependencies.add(yf),this.wrapper="#root",this.selector="> *:first-child",this._previous=null,this.autoRemove=!0}get priority(){return 1}get previous(){return this._previous}get current(){return this._current}set current(t){this._current!=t&&(this._previous=this._current,this._current=t,this.emit("page",t))}async init(){this.root=document.querySelector(this.wrapper)}async run(){this._current=document.querySelector(this.wrapper+" "+this.selector)}async after(){this.autoRemove&&this.removePrevious()}removePrevious(){this.previous&&this.removeElement(this.previous)}removeElement(t){t&&t.parentElement&&t.parentElement.removeChild(t)}}const _f=bf;class wf extends rf{constructor(t){super(t),this.historyChanged=this.historyChanged.bind(this),this.pageChanged=this.pageChanged.bind(this),this.dependencies.add(sf),this.dependencies.add(_f),this._first=!0,window.history.state||window.history.replaceState({url:window.location.href},null)}get priority(){return 5}get enabled(){return this._enabled}set enabled(t){this._enabled!=t&&(this._enabled=t,t?(window.addEventListener("popstate",this.historyChanged),this.bootstrap.get(_f).on("page",this.pageChanged)):(window.removeEventListener("popstate",this.historyChanged),this.bootstrap.get(_f).off("page",this.pageChanged)))}historyChanged(t){of.debug("historyChanged",window.history.state);this.bootstrap.get(sf);this.bootstrap.get(sf).state=window.history.state}pageChanged(t){const e=this.bootstrap.get(sf).state;window.history.pushState(e,e.title,e.url)}}function Af(t){var e=[];return Ef(t,e),e}function Ef(t,e){for(var n=0;n<t.length;n++){var r=t[n];Array.isArray(r)?Ef(r,e):e.push(r)}}class xf extends(ef()){constructor(){super(),this.parallel=!0,this.exceptions=!1,this.waiting=new Set,this.pending=new Set,this.progresses=new Map,this.loaded=new Map,this.pendingCheckInterval=500}get progress(){if(0!=this.progresses.size){let t=0;return this.progresses.forEach((e=>t+=e)),t/this.progresses.size}return 1}get complete(){return 1==this.progress}get size(){return this.waiting.size+this.pending.size+this.loaded.size}get(t){return this.loaded.get(t)}has(t){return this.waiting.has(t)||this.pending.has(t)||this.loaded.has(t)}add(...t){return(t=Af(t)).forEach((t=>{!this.accepts(t)||this.waiting.has(t)||this.pending.has(t)||this.loaded.has(t)||(this.waiting.add(t),this.progresses.set(t,0))})),this}delete(...t){return(t=Af(t)).forEach((t=>{this.waiting.delete(t),this.pending.delete(t),this.loaded.delete(t),this.progresses.delete(t)})),this}reset(){this.lastProgress=null,this.waiting=new Set,this.pending=new Set,this.progresses=new Map,this.loaded=new Map}isWaiting(t){return this.waiting.has(t)}isPending(t){return this.pending.has(t)}isLoaded(t){return this.loaded.has(t)}accepts(t){return!0}async loadItem(t){return t}async allSettled(t){return new Promise(((e,n)=>{let r=t.length,i=0;if(0==r)return e();t.forEach((t=>{t.then((()=>{i++})).catch((t=>{throw i++,t})).finally((()=>{i==r&&e()}))}))}))}async sequentialLoad(){for(0==this.waiting.size&&this.triggerProgress();this.waiting.size>0;){let t=this.waiting.values().next().value;this.waiting.delete(t),this.pending.add(t);try{let e=await this.loadItem(t);this.loaded.set(t,e),this.progresses.set(t,1),this.pending.delete(t),this.triggerProgress()}catch(e){if(this.loaded.set(t,null),this.progresses.set(t,1),this.pending.delete(t),this.triggerProgress(),this.exceptions)throw e}}}async parallelLoad(){for(0==this.waiting.size&&this.triggerProgress();this.waiting.size>0;){let t=this.waiting.values().next().value;this.waiting.delete(t),this.pending.add(t),this.loadItem(t).then((e=>{this.loaded.set(t,e),this.progresses.set(t,1),this.pending.delete(t),this.triggerProgress()})).catch((e=>{if(this.loaded.set(t,null),this.progresses.set(t,1),this.pending.delete(t),this.triggerProgress(),this.exceptions)throw e}))}return this.awaitPending()}async awaitPending(){for(;this.pending.size>0;)await this.sleep(this.pendingCheckInterval)}async sleep(t){return new Promise(((e,n)=>{setTimeout(e,t)}))}async load(...t){return this.add(...t),this.parallel?await this.parallelLoad():await this.sequentialLoad(),this.emit("complete",this.loaded),this.loaded.forEach(((t,e)=>this.progresses.delete(e))),this.loaded}triggerProgress(){let t=this.progress;this.lastProgress!=t&&(this.lastProgress=t,this.emit("progress",t))}}class Sf extends xf{constructor({method:t="GET",params:e={},headers:n={},body:r=null,cache:i="no-cache",redirect:o="follow",callback:a=(async()=>{})}={}){super(),this.options={method:t,params:e,headers:n,body:r,cache:i,redirect:o},this.responses=new Map,this.callback=a}accepts(t){return"string"==typeof t}getResponse(t){this.response.get(t)}async loadItem(t){of.debug("loadItem",t);let e=Object.entries(this.options.params).map((t=>t.join("="))).join("&");return""!=e&&(e=(t.indexOf("?")>=0?"&":"?")+e),window.fetch(t+e,this.options).then((async e=>(await this.callback(e),this.responses.set(t,e),this._value=await e.text(),this._value)))}}var Tf=n(6749),Cf=n.n(Tf);function If(t){return Cf()(t)?(e=t,(n=document.createElement("div")).innerHTML=e.trim(),n.childNodes&&n.childNodes.length>1?n.childNodes:n.firstChild):t instanceof window.Node?t:kf(t)?function(t){return document.querySelector(t)}(t):null;var e,n}const kf=t=>{try{(t=>{document.createDocumentFragment().querySelector(t)})(t)}catch(t){return!1}return!0};class Pf extends Sf{constructor(t={}){t.headers=t.headers?t.headers:{"X-Requested-With":"XMLHttpRequest"},super(t)}accepts(t){return"string"==typeof t}async loadItem(t){return If(await super.loadItem(t))}}const Rf=class extends xf{constructor(){super()}accepts(t){return t instanceof xf}async loadItem(t){const e=e=>{this.progresses.set(t,e),this.triggerProgress()};t.on("progress",e),await t.load(),t.off("progress",e)}};class Of extends rf{constructor(t){super(t),this.loader=new Rf}get priority(){return-1}async before(){this.loader.reset()}}const Mf=class extends xf{constructor(){super(),this.ajax=!1}accepts(t){return"string"==typeof t}async loadItem(t){return this.ajax?await this.loadAjax(t):await this.loadSimple(t)}loadSimple(t){return new Promise(((e,n)=>{let r=t,i=new window.Image;i.onload=()=>e(i),i.crossOrigin="Anonymous",i.onerror=()=>{n(new Error(`Could not load '${t}'`))},i.src=r}))}loadAjax(t){return new Promise(((e,n)=>{let r=t,i=new window.Image,o=new XMLHttpRequest;o.open("GET",r,!0),o.responseType="arraybuffer",o.onerror=t=>n(t),o.onload=function(t){var n=o.getAllResponseHeaders().match(/^Content-Type\:\s*(.*?)$/im)[1]||"image/png",r=new Blob([o.response],{type:n});i.src=window.URL.createObjectURL(r),e()},o.onprogress=t=>{t.lengthComputable&&(this.progresses.set(r,t.loaded/t.total),this.triggerProgress())},o.onloadend=()=>{this.progresses.set(r,1),this.triggerProgress()},o.send()}))}};var Lf=n(9466),Df=n.n(Lf);class Nf extends(ef()){constructor(t){super(),this.element=t}async init(){}async attach(){}async detach(){}async destroy(){}}const Bf=Nf,jf=function(...t){return console&&console.error&&console.error.apply(console,t),null};const zf=class{constructor({selector:t="html"}={}){this.selector=t,this.element=If(this.selector),this.registry=new Map,this.elements=new Map,this.initFns=["init","attach"],this.destroyFns=["detach","destroy"],this.creator=(t,e)=>new t(e)}register(t){this.registry=new Map([...this.registry].concat(Object.entries(t)))}needSetup(t){return"component"in t.dataset&&this.registry.has(t.dataset.component)&&!this.elements.has(t)}get(t){return this.elements.has(t)?this.elements.get(t):null}async setup(){await this.clean();let t=[this.element].concat(...this.element.querySelectorAll("[data-component]")).filter((t=>this.needSetup(t))).map((t=>this.create(t)));return await this.call(t,this.initFns),t}create(t){let e=t.dataset.component;if(!this.registry.has(e))return jf("Component not found: ",e);let n=this.registry.get(e),r=this.creator(n,t);return r?(this.elements.set(t,r),r):jf("Component not created",e)}async call(t,e){for(let n of e)for(let e of t)e instanceof Bf&&"function"==typeof e[n]&&await e[n]()}async clean(){for await(let[t,e]of this.elements.entries())t.compareDocumentPosition(document.body)&Node.DOCUMENT_POSITION_CONTAINS||(await this.call([e],this.destroyFns),this.elements.delete(t))}};class Ff extends Bf{constructor(t,e){super(t),this.__bootstrap=e}get bootstrap(){return this.__bootstrap}}const Uf=Ff;class qf extends rf{constructor(t){super(t),this.selector="html"}get priority(){return-2}build(){this._components=new zf(this.selector),this._components.creator=(t,e)=>t.prototype instanceof Uf?new t(e,this.bootstrap):new t(e)}get selector(){return this._selector}set selector(t){this._selector!=t&&(this._selector=t,this.build())}get components(){return this._components||this.build(),this._components}get(t){return this.components.get(t)}register(t){of.debug("register",t),this.components.register(t)}async run(){await this.components.setup()}}class Gf extends(ef()){constructor({sizer:t=null,selector:e="html"}={}){super(),this.width=1,this.height=1,this.minWidth=0,this.minHeight=0,this.viewportWidth=0,this.viewportHeight=0,this.widthOnly=!1,this.orientation=null,this._medias=new Map,this.medias={},this.onResize=this.onResize.bind(this),this.mediaDisabled=this.mediaDisabled.bind(this),this.mediaEnabled=this.mediaEnabled.bind(this),"undefined"!=typeof window&&(this.sizer=t||window,this.element=document.querySelector(e),this.attach(),this.resize())}attach(){"undefined"!=typeof window&&(window.addEventListener("resize",this.onResize),window.addEventListener("orientationchange",this.onResize))}detach(){"undefined"!=typeof window&&(window.removeEventListener("resize",this.onResize),window.removeEventListener("orientationchange",this.onResize))}onResize(t){this.computeResize()}async resize(){await this.computeResize(!0)}async computeResize(t=!1){if("undefined"==typeof window)return;let e=this.width,n=this.height;this.sizer==window?(this.innerWidth=document.documentElement.clientWidth,this.outerWidth=window.innerWidth,this.innerHeight=document.documentElement.clientHeight,this.outerHeight=window.innerHeight):(this.innerWidth=this.outerWidth=this.sizer.offsetWidth,this.innerHeight=this.outerHeight=this.sizer.offsetHeight),this.viewportWidth=Math.min(this.innerWidth,this.outerWidth),this.viewportHeight=Math.min(this.innerHeight,this.outerHeight),this.width=this.viewportWidth<this.minWidth?this.minWidth:this.viewportWidth,this.height=this.viewportHeight<this.minHeight?this.minHeight:this.viewportHeight,this.orientation=this.width<this.height?"portrait":"landscape";var r=Array.from(this._medias.values()).filter((t=>t.update()));(!this.widthOnly&&(e!=this.width||n!=this.height)||this.widthOnly&&e!=this.width||t)&&(this.computeResize(),await this.emitAsync("pre-resize"),await this.emitAsync("resize"),await this.emitAsync("post-resize"),this.computeResize()),r.length&&this.emit("media",r.map((t=>t.name)),r)}add(t){t.viewport=this;let e=new Hf(t);return e.on("disable",this.mediaDisabled),e.on("enable",this.mediaEnabled),this._medias.set(e.name,e),this.medias[e.name]=!1,e.update(),e}remove(t){delete this.medias[t.name],this._medias.delete(t.name),t.off("disable",this.mediaDisabled),t.off("enable",this.mediaEnabled)}get(t){return this._medias.get(t)}mediaDisabled(t){this.medias[t.name]=!1,t.addClass&&this.element.classList.remove(t.classPrefix+t.name)}mediaEnabled(t){this.medias[t.name]=!0,t.addClass&&this.element.classList.add(t.classPrefix+t.name)}}class Hf extends(ef()){constructor({viewport:t=new Gf,name:e="",minWidth:n=-1/0,minHeight:r=-1/0,maxWidth:i=1/0,maxHeight:o=1/0,addClass:a=!0,classPrefix:s="",condition:l=null,meta:u=null,media:c=null}={}){super(),this.viewport=t,this.name=e,this.minWidth=n,this.minHeight=r,this.maxWidth=i,this.maxHeight=o,this.addClass=a,this.classPrefix=s,this.condition=l,this.meta=u,this.media=c,this.active=!1}update(){if("undefined"==typeof window)return!1;var t=this.viewport.width>=this.minWidth&&this.viewport.width<this.maxWidth&&this.viewport.height>=this.minHeight&&this.viewport.height<this.maxHeight&&(!this.media||window.matchMedia(this.media).matches);return"function"==typeof this.condition&&(t=this.condition(t)),this.active&&!t?(this.active=!1,this.emit("disable",this),!0):!(this.active||!t)&&(this.active=!0,this.emit("enable",this),!0)}}const Vf=Gf;class Qf extends rf{constructor(t){super(t),this.viewport=new Vf}async after(){await this.viewport.resize()}}var Wf=n(7007),Yf=n(4427),Kf=n(2421),Xf=n.n(Kf);class $f extends(ef()){constructor({precision:t=.01,damper:e=.05,damperHeld:n=1,damperAverage:r=.05,anticipate:i=!0,clampPosition:o=!0}={}){super(),this.precision=t,this.initialDamper=e,this.damperHeld=n,this.damperAverage=r,this.damper=e,this.anticipate=i,this.clampPosition=o,this.active=!1,this.position=new(Xf()),this.target=new(Xf()),this.speed=new(Xf()),this.acceleration=new(Xf()),this.direction=new(Xf()),this.min=new(Xf()),this.max=new(Xf()),this.averageSpeed=new(Xf()),this.deltaHeld=new(Xf()),this._holdTarget=new(Xf()),this._deltaT=.016,this._mass=1,this._averageSamples=2,this.stop=(0,Yf.debounce)(!1,250,this.stop.bind(this)),this.update=this.update.bind(this),this._updating=!1}get paused(){return this._paused}set paused(t){this._paused!=t&&(this._paused=t,t?(window.cancelAnimationFrame(this.requestId),this.stop()):this.update())}update(){if(this._paused)return;this.min.x!=-1/0&&this.min.y!=-1/0&&this.max.x!=1/0&&this.max.y!=1/0&&this.target.clamp(this.min,this.max),this.speed.set(this.target).subtract(this.position).multiply(this.damper),this.position.add(this.speed),this.clampPosition&&this.min.x!=-1/0&&this.min.y!=-1/0&&this.max.x!=1/0&&this.max.y!=1/0&&this.position.clamp(this.min,this.max),this.averageSpeed=this.averageSpeed.multiply(this._averageSamples-1).add(this.speed).divide(this._averageSamples),this.direction.set(Math.abs(this.speed.x)/this.speed.x|0,Math.abs(this.speed.y)/this.speed.y|0);let t=this.speed.length();t<this.precision&&1!=this.damper?(this.position.set(this.target),this.stop()):t>0&&this.start(),this.requestId=window.requestAnimationFrame(this.update)}hold(){this.held||(this.damper=this.damperHeld,this.held=!0,this._holdTarget.set(this.target),this.emit("hold"))}release(){if(this.held){if(this.held=!1,this.damper=this.initialDamper,this.anticipate){let t=1/this._deltaT,e=this._mass/this.damperAverage,n=this.averageSpeed.clone().divide(this._deltaT).multiply(e).multiply(1-Math.exp(-t/e)).multiply(this._deltaT);this.target.set(this.position).add(n),this.min.x!=-1/0&&this.min.y!=-1/0&&this.max.x!=1/0&&this.max.y!=1/0&&this.target.clamp(this.min,this.max),this.target.set(parseInt(this.target.x),parseInt(this.target.y))}this.deltaHeld.set(this.target).subtract(this._holdTarget),this.emit("release")}}start(){this.active||(this.active=!0,this.emit("start"))}stop(){this.active&&(this.active=!1,this.emit("stop"))}}const Zf=$f;class Jf extends(ef()){constructor(){super(),this.triggerStart=this.triggerStart.bind(this),this.triggerStop=this.triggerStop.bind(this),this.triggerHold=this.triggerHold.bind(this),this.triggerRelease=this.triggerRelease.bind(this),this._paused=!0,this._active=!1,this._held=!1,this._listen=!0}get position(){return this._position||(this._position=new(Xf())),this._position}get target(){return this._target||(this._target=new(Xf())),this._target}get speed(){return this._speed||(this._speed=new(Xf())),this._speed}get acceleration(){return this._acceleration||(this._acceleration=new(Xf())),this._acceleration}get direction(){return this._direction||(this._direction=new(Xf())),this._direction}get min(){return this._min||(this._min=new(Xf())),this._min}get max(){return this._max||(this._max=new(Xf())),this._max}get averageSpeed(){return this._averageSpeed||(this._averageSpeed=new(Xf())),this._averageSpeed}set paused(t){this._paused=t}get paused(){return this._paused}set listen(t){this._listen=t}get listen(){return this._listen}get active(){return this._active}get held(){return this._held}attach(){this._attached||(this._attached=!0)}detach(){this._attached&&(this._attached=!1)}triggerStart(){this.emit("start")}triggerStop(){this.emit("stop")}triggerHold(){this.emit("hold")}triggerRelease(){this.emit("release")}}const th=Jf;const eh=class extends th{constructor({precision:t=.01,damper:e=.05,damperHeld:n=.05,anticipate:r=!0,smoother:i=new Zf}={}){super(),this.smoother=i,this.damper=e,this.damperHeld=n,this.anticipate=r,this.precision=t}get position(){return this.smoother.position}get target(){return this.smoother.target}get speed(){return this.smoother.speed}get acceleration(){return this.smoother.acceleration}get direction(){return this.smoother.direction}get min(){return this.smoother.min}get max(){return this.smoother.max}get averageSpeed(){return this.smoother.averageSpeed}set paused(t){this.smoother.paused=t}get paused(){return this.smoother.paused}set damper(t){this.smoother.damper=t}get damper(){return this.smoother.damper}set damperHeld(t){this.smoother.damperHeld=t}get damperHeld(){return this.smoother.damperHeld}set anticipate(t){this.smoother.anticipate=t}get anticipate(){return this.smoother.anticipate}set precision(t){this.smoother.precision=t}get precision(){return this.smoother.precision}get active(){return this.smoother.active}get held(){return this.smoother.held}get deltaHeld(){return this.smoother.deltaHeld}attach(){this._attached||(this.smoother.on("start",this.triggerStart),this.smoother.on("stop",this.triggerStop),this.smoother.on("hold",this.triggerHold),this.smoother.on("release",this.triggerRelease)),super.attach()}detach(){this._attached&&(this.smoother.off("start",this.triggerStart),this.smoother.off("stop",this.triggerStop),this.smoother.off("hold",this.triggerHold),this.smoother.off("release",this.triggerRelease)),super.detach()}};const nh=new class{constructor(){"undefined"!=typeof window&&(this.ua=navigator.userAgent.toLowerCase(),this.html=document.querySelector("html"),this.checkNavigator(),this.checkPlatform(),this.checkDevice(),this.checkVersion(),this.checkEvents(),this.checkCss(),this.addConsole())}checkDevice(){this.device={},this.device.iphone=null!=this.ua.match(/iPhone/i)||null!=this.ua.match(/iPod/i),this.device.mobile=null!=this.ua.match(/mobile/i),this.device.ipad=this.platform.ios&&!this.device.iphone,this.device.tablet=this.device.ipad&&!this.device.iphone||null!=this.ua.match(/android/i)&&!this.device.mobile,this.device.tablet&&(this.device.mobile=!1),this.device.desktop=!this.device.tablet&&!this.device.mobile,this.device.touch=!!("function"==typeof window.ontouchstart||navigator.maxTouchPoints>0||navigator.msMaxTouchPoints>0||this.device.mobile||this.device.ipad||this.device.iphone||this.device.tablet||this.platform.android||this.platform.windowsphone),this.device.retina=window.devicePixelRatio>1}checkNavigator(){this.browser={},this.browser.ioswebview=/(iPhone|iPod|iPad).*AppleWebKit(?!.*Safari)/i.test(this.ua),this.browser.firefox=this.ua.indexOf("firefox")>-1,this.browser.samsung=this.ua.indexOf("samsungbrowser")>-1,this.browser.ie=(this.ua.indexOf("msie")>-1||window.ActiveXObject||"ActiveXObject"in window)&&!this.browser.firefox,this.browser.edge=/Edge./i.test(this.ua),this.browser.chrome=this.ua.indexOf("chrome")>-1&&!this.browser.samsung,this.browser.safari=!!(this.ua.indexOf("safari")>-1&&!this.browser.chrome&&!this.browser.samsung||this.ua.match(/fbios/i)||this.ua.match(/micromessenger/i)),this.browser.opera=this.ua.indexOf("presto")>-1,this.browser.facebook=this.ua.indexOf("fban")>-1||this.ua.indexOf("fbav")>-1}checkPlatform(){this.platform={},this.platform.ios=/iPad|iPhone|iPod/.test(navigator.platform)||"MacIntel"===navigator.platform&&navigator.maxTouchPoints>1,this.platform.win=/win/i.test(navigator.platform.toLowerCase()),this.platform.mac=navigator.platform.toLowerCase().indexOf("mac")>=0,this.platform.android=this.ua.indexOf("android")>-1,this.platform.linux=this.ua.indexOf("linux")>-1,this.platform.windowsphone=this.ua.indexOf("windows phone")>-1||null!=this.ua.match(/mobile/i)&&this.browser.ie}checkVersion(){this.version={},this.version.full=this.getBrowserVersion(),this.version.main=parseInt(this.version.full),this.version.ie6=this.html.classList.contains("ie6"),this.version.ie7=this.html.classList.contains("ie7"),this.version.ie8=this.html.classList.contains("ie8"),this.version.ie9=this.html.classList.contains("ie9"),this.version.ie10=-1!==navigator.appVersion.indexOf("MSIE 10"),this.version.ie11=null!=this.ua.match(/Trident\/7\./i),this.version.edge=/Edge./i.test(this.ua),this.version.ios7=null!=this.ua.match(/Version\/7/i),this.version.ios9=null!=this.ua.match(/Version\/9/i)}checkEvents(){this.event={},this.device.touch?(this.event.click="touchstart",this.event.down="touchstart",this.event.up="touchend",this.event.move="touchmove",window.navigator.msPointerEnabled&&(this.event.click="MSPointerDown",this.event.down="MSPointerDown",this.event.up="MSPointerUp",this.event.move="MSPointerMove")):(this.event.click="click",this.event.down="mousedown",this.event.up="mouseup",this.event.move="mousemove")}checkCss(){this.css={},this.css.transform3d=this.checkCssProperty("transform","translate3d(1px,1px,1px)",!0)}checkCssProperty(t,e,n){var r=document.createElement("div");this.html.appendChild(r);var i=(n?this.browser.cssVendorPrefix:"")+t,o=(n?this.browser.jsVendorPrefix:"")+this.uppercaseFirstLetter(t),a=void 0;return void 0!==r.style[o]&&(r.style[o]=e,a=window.getComputedStyle(r).getPropertyValue(i)),this.html.removeChild(r),void 0!==a&&a.length>0&&"none"!==a}getBrowserVersion(){var t,e=navigator.appName,n=this.ua,r=n.match(/(opera|chrome|safari|firefox|msie)\/?\s*(\.?\d+(\.\d+)*)/i);return r&&null!=(t=n.match(/version\/([\.\d]+)/i))&&(r[2]=t[1]),(r=r?[r[1],r[2]]:[e,navigator.appVersion,"-?"])[1]}checkVendorPrefix(){var t={ioswebview:["-webkit-","webkit"],facebook:["-webkit-","webkit"],samsung:["-webkit-","webkit"],chrome:["-webkit-","webkit"],safari:["-webkit-","webkit"],firefox:["-moz-","Moz"],opera:["-o-","O"],ie:["-ms-","ms"]};for(var e in this.browser)if(this.browser[e])return this.browser.cssVendorPrefix=t[e][0],void(this.browser.jsVendorPrefix=t[e][1]);this.browser.cssVendorPrefix="",this.browser.jsVendorPrefix=""}checkVideoSupport(){var t={ioswebview:["mp4","video/mp4"],facebook:["mp4","video/mp4"],samsung:["mp4","video/mp4"],chrome:["mp4","video/mp4"],safari:["mp4","video/mp4"],firefox:["mp4","video/mp4"],opera:["webm","video/webm"],ie:["mp4","video/mp4"]};for(var e in this.browser)if(this.browser[e])return this.browser.videoExtension=t[e][0],void(this.browser.videoType=t[e][1]);this.browser.videoExtension="mp4",this.browser.videoType="video/mp4"}checkWebGL(){var t,e,n;try{n=(e=(t=document.createElement("canvas")).getContext("webgl")||t.getContext("experimental-webgl")).getSupportedExtensions()}catch(t){}if(void 0!==e&&(self.webgl=new Boolean(!0)),e)for(var r=-1,i=n.length;++r<i;)self.webgl[n[r]]=!0;t=void 0}uppercaseFirstLetter(t){return t.charAt(0).toUpperCase()+t.slice(1)}addConsole(){if(!window.console);}};ef();const rh=(t,e,n,r)=>{var i={x:0,y:0,width:e.width,height:e.height},o=((r=Object.assign({top:0,left:0,bottom:1,right:1},r)).right,r.left,e.width,r.bottom,r.top,e.height,e.width/e.height);if((n?o>=t:o<t)?(i.width=e.height*t,i.x=(e.width-i.width)/2|0):(i.height=e.width/t,i.y=(e.height-i.height)/2|0),!n){var a=r.right*i.width-r.left*i.width;a<e.width&&a>0&&(i.width*=e.width/a,i.height=i.width/t);var s=r.bottom*i.height-r.top*i.height;s<e.height&&s>0&&(i.height*=e.height/s,i.width=i.height*t),i.width=Math.ceil(i.width),i.height=Math.ceil(i.height),i.x=-r.left*i.width-((r.right-r.left)*i.width-e.width)/2|0,i.y=-r.top*i.height-((r.bottom-r.top)*i.height-e.height)/2|0}return i},ih=(t,e)=>{"string"==typeof t&&(t=document.querySelectorAll(t)),t=t&&"function"==typeof t[Symbol.iterator]?Array.from(t):[t],e=Object.assign({inside:"boolean"==typeof e&&e,animate:!1,duration:1,ease:jn.easeInOut,reference:null,ratio:null,useTransform:!1,sizeOnly:!1,heightOnly:!1,widthOnly:!1},e);var n=new Ge({paused:!0});return t.forEach((t=>{let r=e.reference?e.reference:t.parentElement,i=t.dataset;var o=e.ratio,a=0,s=0,l=t.tagName.toLowerCase();if(r.tagName&&"picture"==r.tagName.toLowerCase()){var u=r;r=r.parentElement,Array.from(u.querySelectorAll("source")).forEach((t=>{window.matchMedia(t.getAttribute("media")).matches&&(i=Object.assign({},i,t.dataset))}))}if(!o)if(i.ratio)o=i.ratio;else if(i.width&&i.height)o=(a=i.width)/(s=i.height);else if("video"==l)o=(a=t.videoWidth)/(s=t.videoHeight);else if("picture"==l){let n=t.querySelector("img");if(n.style.width="100%",n.style.height="100%",!n.complete)return void n.addEventListener("load",(()=>ih(t,e)));a=t.attr("width"),s=t.attr("height"),a||(a=t.naturalWidth),s||(s=t.naturalHeight),o=a/s}else{if(!t.complete)return void t.addEventListener("load",(()=>ih(t,e)));a=t.getAttribute("width"),s=t.getAttribute("height"),a||(a=t.naturalWidth),s||(s=t.naturalHeight),o=a/s}var c=r.tagName?{x:0,y:0,width:r.offsetWidth,height:r.offsetHeight}:e.reference,d={top:0|i.maxTop,left:0|i.maxLeft,bottom:1|i.maxBottom,right:1|i.maxRight};e.hasOwnProperty("maxTop")&&(d.top=e.maxTop),e.hasOwnProperty("maxLeft")&&(d.left=e.maxLeft),e.hasOwnProperty("maxRight")&&(d.right=e.maxRight),e.hasOwnProperty("maxBottom")&&(d.bottom=e.maxBottom);var f=rh(o,c,e.inside,d),h={};h=e.useTransform?((t,e,n)=>{var r={force3D:!0};return e.width&&!t.heightOnly&&(t.sizeOnly||t.widthOnly||(r.x=e.x),r.scaleX=e.width/n.offsetWidth),e.height&&!t.widthOnly&&(t.sizeOnly||t.heightOnly||(r.y=e.y),r.scaleY=e.height/n.offsetHeight),r})(e,f,t):((t,e)=>{var n={};return e.width&&!t.heightOnly&&(t.sizeOnly||t.widthOnly||(n.left=e.x),n.width=e.width),e.height&&!t.widthOnly&&(t.sizeOnly||t.heightOnly||(n.top=e.y),n.height=e.height),n})(e,f),e.animate?(h.ease=e.ease,n.to(t,e.duration,h,0)):ei.set(t,h,0)})),n.play()};ih.getBounds=rh;n(2981);ef().defaultMaxListeners=100;class oh extends(ef()){constructor(...t){super(),this.modules=new Map,this.run=this.run.bind(this),this._running=!1,this._ready=!1,document.body?this._ready=!0:document.addEventListener("DOMContentLoaded",(()=>{this._ready=!0,this._runRequested&&this.run()})),this.add(...t)}sort(){this.modules.forEach((t=>{t.dependencies.forEach((t=>{this.modules.has(t)||this.modules.set(t,new t(this))}))})),this.modules=new Map(this.toposort(Array.from(this.modules.values())).map((t=>[t.constructor,t]))),this.modules.forEach((t=>t.enabled=!0))}toposort(t){let e=new Map;t.forEach((t=>e.set(t,Array.from(t.dependencies.keys()).map((t=>this.modules.get(t))))));const n=Array.from(e.keys()).reduce(((t,n)=>t.set(n,Array.from(e.keys()).filter((t=>e.get(t).includes(n))))),new Map),r=Array.from(e.keys()).filter((t=>0==e.get(t).length)).sort(((t,e)=>t.priority-e.priority)),i=[];for(;r.length;){const t=r.pop();i.push(t);var o=[];n.get(t).forEach((n=>{e.set(n,e.get(n).filter((e=>e!==t))),0==e.get(n).length&&o.push(n)})),o.sort(((t,e)=>t.priority-e.priority)).forEach((t=>r.push(t)))}return i}add(...t){(t=Af(t)).forEach((t=>this.modules.set(t,new t(this)))),this.sort()}override(t,e){if(this.modules.has(overridenModule)){this.modules.delete(overridenModule);let t=new e(this);this.modules.set(overridenModule,t),this.modules.set(e,t),this.sort()}}get(t){return this.modules.get(t)}async run(){if(!this._running){if(!this._ready)return void(this._runRequested=!0);of.debug("Bootstrap","run"),this._running=!0;for(let t of["init","before","run","after"])for(let[e,n]of Array.from(this.modules))of.debug("Bootstrap","module",n.constructor.name,t),n.runnable&&await n[t]();this._running=!1}}}class ah extends Ff{get components(){return this.bootstrap.components}get viewport(){return this.bootstrap.viewport}get animator(){return this.bootstrap.animator}}class sh extends ah{get router(){return this.bootstrap.router}}ef(),Symbol.iterator;const lh=class extends eh{constructor(t,e={}){e.damperHeld=e.damperHeld?e.damperHeld:1,super(e);let{multiplier:n=1}=e;this.multiplier=n,this.element=t,this.drag=this.drag.bind(this)}drag(t){if(!this.paused&&this.listen){var e=new(Xf())(-t.clientX,-t.clientY).multiply(this.multiplier),n=new(Xf())(e),r=new(Xf()),i=function(t){!this.paused&&this.listen&&(r.set(-t.clientX,-t.clientY).multiply(this.multiplier),this.target.add(r.subtract(n)),n.set(-t.clientX,-t.clientY).multiply(this.multiplier))}.bind(this),o=function(t){i(t),document.removeEventListener("mouseup",o,!0),document.removeEventListener("mousemove",i,!0),this.smoother.release(),setTimeout((function(){document.removeEventListener("click",a,!0)}),50)}.bind(this),a=function(t){i(t),document.removeEventListener("click",a,!0),n.subtract(e).length()>5&&(t.preventDefault(),t.stopPropagation(),t.stopImmediatePropagation())}.bind(this);this.target.set(this.position),this.smoother.hold(),document.addEventListener("mouseup",o,!0),document.addEventListener("mousemove",i,!0),document.addEventListener("click",a,!0)}}attach(){this._attached||this.element.addEventListener("mousedown",this.drag),super.attach()}detach(){this._attached&&this.element.removeEventListener("mousedown",this.drag),super.detach()}};const uh=class extends eh{constructor(t,e={}){e.damperHeld=e.damperHeld?e.damperHeld:1,super(e);let{multiplier:n=1,prevent:r=!1,preventTouchDelta:i={x:0,y:0}}=e;this.multiplier=n,this.preventTouchDelta=i,this.element=t,this.drag=this.drag.bind(this),this.touchmove=this.touchmove.bind(this),this.touchend=this.touchend.bind(this),this._start=new(Xf()),this._current=new(Xf()),this._tmp=new(Xf()),this._minAcceleration=new(Xf())(1,1),this._maxAcceleration=new(Xf())(1.5,1.5),this._acceleration=new(Xf()),this._delta=new(Xf()),this._prevented=!1}drag(t){this._start.set(-t.touches[0].clientX,-t.touches[0].clientY).multiply(this.multiplier),this._current.set(this._start),!this.paused&&this.listen&&(this._acceleration.set(this.speed).abs().clamp(this._minAcceleration,this._maxAcceleration),this.target.set(this.position),this.smoother.hold())}touchmove(t){if(!this.paused&&this.listen){var e=t.touches;1==e.length&&(this._tmp.set(-e[0].clientX,-e[0].clientY).multiply(this.multiplier).subtract(this._current),this._delta.set(this._tmp),this._tmp.multiply(this._acceleration),("boolean"!=typeof t.cancelable||event.cancelable)&&(this._prevented||Math.abs(this._delta.x)>this.preventTouchDelta.x&&Math.abs(this._delta.x)>Math.abs(this._delta.y)||Math.abs(this._delta.y)>this.preventTouchDelta.y&&Math.abs(this._delta.y)>Math.abs(this._delta.x))&&(this.target.add(this._tmp).clamp(this.min,this.max),t.preventDefault(),this._prevented=!0),this._current.set(-e[0].clientX,-e[0].clientY).multiply(this.multiplier))}}touchend(t){this._prevented=!1;var e=this._current.subtract(this._start).length();("boolean"!=typeof t.cancelable||event.cancelable)&&e>1&&t.preventDefault(),this.smoother.release()}attach(){this._attached||(this.element.addEventListener("touchstart",this.drag),this.element.addEventListener("touchmove",this.touchmove),this.element.addEventListener("touchend",this.touchend)),super.attach()}detach(){this._attached&&(this.element.removeEventListener("touchstart",this.drag),this.element.removeEventListener("touchmove",this.touchmove),this.element.removeEventListener("touchend",this.touchend)),super.detach()}};var ch=n(3964),dh=n.n(ch);const fh=class extends eh{constructor(t,e={}){super(e);let{wheelStop:n=(nh.platform.win?1e3:250),wheelSpeed:r=(nh.platform.win?30:1)}=e;this.wheelStop=n,this.wheelSpeed=r,this.element=t,this.onWheel=this.onWheel.bind(this),this.inputStart=(0,Yf.debounce)(this.wheelStop,!0,this.inputStart.bind(this)),this.inputStop=(0,Yf.debounce)(this.wheelStop,!1,this.inputStop.bind(this)),this._delta=new(Xf())}onWheel(t){if(this.paused||!this.listen)return;let e=(t.deltaMode?30:1)*this.wheelSpeed;this._delta.set(0|t.deltaX,0|t.deltaY).multiply(e),this.target.add(this._delta),this.inputStart(),this.inputStop()}inputStart(){this.target.set(this.position),this.smoother.hold()}inputStop(){this.smoother.release()}attach(){this._attached||dh().addWheelListener(this.element,this.onWheel,!0),super.attach()}detach(){this._attached&&dh().removeWheelListener(this.element,this.onWheel,!0),super.detach()}};const hh=class extends eh{constructor(t,e={}){super(e);let{touch:n=!0,wheel:r=!0,drag:i=!0}=e;this.inputs=new Set,e.smoother=this.smoother,n&&nh.device.touch?this.inputs.add(new uh(t,e)):(r&&this.inputs.add(new fh(t,e)),i&&this.inputs.add(new lh(t,e)))}get listen(){return this._listen}set listen(t){this._listen=t,this.inputs.forEach((e=>e.listen=t))}attach(){this._attached||this.inputs.forEach((t=>t.attach())),super.attach()}detach(){this._attached&&this.inputs.forEach((t=>t.detach())),super.detach()}};class ph extends(ef()){constructor(t,e={}){super(),this.element=t,this.x=0,this.y=0,this.width=1,this.height=1}resize(){this.width=this.element.clientWidth,this.height=this.element.clientHeight}}const mh=ph;const gh=function(t,e){return(t%e+e)%e};class vh extends(ef()){constructor(t,{slides:e="> .slide",index:n=0,loop:r=!1,autoResize:i=!0,slideClass:o=mh,slideOptions:a={}}={}){super(),this.slidesElements=e,this.slideOptions=a,this.element=t,this.slides=[],this._previousPage=0,this._page=0,this._previousIndex=n,this._index=n,this._loop=r,this._slideClass=o,this._autoResize=i,this.width=0,this.height=0,this._needsUpdate=!0,this.slidesIndex=new Map,this.rebuild(e,a),this._min=0,this._max=Math.max(0,this.slides.length-1),this.resize=this.resize.bind(this),this.next=this.next.bind(this),this.previous=this.previous.bind(this),this.autoResize&&setTimeout(this.resize)}get min(){return this._min}get max(){return this._max}get loop(){return this._loop}set loop(t){this._loop!=t&&(this._loop=t)}get page(){return this._page}set page(t){this._page!=t&&(this._previousPage=t,this._page=t)}get previousIndex(){return this._previousIndex}get index(){return this._index}set index(t){this._index!=t&&(this._previousIndex=this.index,this._index=this._clamp(t),this._index!=this._previousIndex&&this.emit("change",this._index))}get autoResize(){return this._autoResize}set autoResize(t){this._autoResize!=t&&(this._autoResize=t,this._attached&&this._autoResize?(window.addEventListener("resize",this.resize),this.resize()):window.removeEventListener("resize",this.resize))}get absoluteIndex(){return this.page*this.slides.length+this.index}next(){return this.index++}previous(){return this.index--}rebuild(){this._rebuildSlides(this.slidesElements,this.slideOptions),this.resize()}_rebuildSlides(t,e){this.slides=[],this.slidesIndex.clear(),"string"==typeof t&&this.element.querySelectorAll(":scope "+t).forEach(((t,n)=>{let r=new this._slideClass(t,e);this.slides.push(r),this.slidesIndex.set(r,n)}))}resize(){this._attached&&(this.width=this.element.clientWidth,this.height=this.element.clientHeight,this.slides.forEach((t=>t.resize())),this.layout(),this._build())}layout(){}unlayout(){}_build(){this.slides.forEach((t=>{t.timeline=this.slideAnimation(t),t.timeline.paused(!0)}))}slideAnimation(t){return new Ge({paused:!0})}attach(){this._attached||(this.autoResize&&window.addEventListener("resize",this.resize),this._attached=!0)}detach(){this._attached&&(this._attached=!1,this.autoResize&&window.removeEventListener("resize",this.resize),this.unlayout())}_clamp(t){return this.loop?gh(t-this._min,this._max+1-this._min)-this._min:(t>this._max&&(t=this._max),t<this._min&&(t=this._min),t)}}const yh=vh;const bh=class extends ph{constructor(t,e){e.anchor=void 0===e.anchor?anchor={x:0,y:0}:e.anchor,super(t,e),this.timeline=new Ge({paused:!0}),this.relativeAnchor=new(Xf())(e.anchor.x,e.anchor.y),this.anchor=new(Xf())}resize(){super.resize(),this.anchor.set(this.relativeAnchor.x*this.width,this.relativeAnchor.y*this.height)}get progress(){return this.timeline.progress()}set progress(t){this.timeline.progress(t)}};const _h=class extends yh{constructor(t,e={}){e.slideClass=void 0===e.slideClass?bh:e.slideClass;let{snapping:n=!1,swiping:r=!1,swipeTrigger:i=30,anchor:o={x:0,y:0},inputOptions:a={wheel:!1}}=e;void 0===e.slideOptions&&(e.slideOptions={}),void 0===e.slideOptions.anchor&&(e.slideOptions.anchor={x:o.x,y:o.y}),super(t,e),this._snapping=n,this.swiping=r,this.swipeTrigger=i,this.relativeAnchor=new(Xf())(o.x,o.y),this.anchor=new(Xf()),this._needsUpdate=!0,this._updateEnabled=!0,this.smoother=new Zf(a),this.input=new hh(this.element,a),this.smoother.min=this.input.min,this.smoother.max=this.input.max,this.target=new(Xf()),this._onInputStart=this._onInputStart.bind(this),this._onInputStop=this._onInputStop.bind(this),this._onInputHold=this._onInputHold.bind(this),this._onInputRelease=this._onInputRelease.bind(this),this._update=this._update.bind(this),this.snap=this.snap.bind(this),this._virtualIndex=this.index,this._absoluteIndex=this.index,this._previousAbsoluteIndex=this.index}rebuild(){this._rebuildSlides(this.slidesElements,this.slideOptions),this._rebuildVirtualSlides(),this.resize()}_rebuildVirtualSlides(){this.virtualSlides=[],this.loop?(this.slides.forEach((t=>this.virtualSlides.push(new wh(t,-1)))),this.slides.forEach((t=>this.virtualSlides.push(new wh(t,0)))),this.slides.forEach((t=>this.virtualSlides.push(new wh(t,1))))):this.slides.forEach((t=>this.virtualSlides.push(new wh(t,0))))}get loop(){return this._loop}set loop(t){this._loop!=t&&(this._loop=t,this.rebuild())}get snapping(){return this._snapping&&!this._swiping}set snapping(t){this._snapping!=t&&(this._snapping=t)}get swiping(){return this._swiping}set swiping(t){this._swiping!=t&&(this._swiping=t)}get index(){return this._index}set index(t){if(t=parseInt(t),this._index!=t){let e=t-this.index,n=(Math.abs(e),(this.absoluteIndex+e)/this.slides.length),r=Math.floor(n);t=this._clamp(t),this.loop||(r=0),this._updateTarget(r,t),this.swiping&&(this._updateEnabled=!0,this._update(!0),this._updateEnabled=!1)}}get absoluteIndex(){return this._absoluteIndex}layout(){super.layout(),this.input.min.x=-1/0,this.input.max.x=1/0,this.anchor.set(this.relativeAnchor.x*this.width,this.relativeAnchor.y*this.height)}_build(){super._build(),this.input.target.clamp(this.input.min,this.input.max),this.smoother.position.set(this.smoother.target.set(this.input.target)),this.slides.forEach((t=>{t.progress=this.slideProgress(t,this.smoother.target.x,this.smoother.target.y)})),this._updateTarget(this.page,this.index),this.smoother.position.set(this.input.target),this.input.position.set(this.input.target),this._updateEnabled=!0,this._update(),this._updateEnabled=!0}slideProgress(t,e,n){return 0}setTarget(t,e){}getVirtualIndex(t,e){}_getIndex(t){return gh(t,this.slides.length)}_computeIndex(t){const e=this.index;this._previousAbsoluteIndex=this.absoluteIndex!=this._previousAbsoluteIndex?this.absoluteIndex:this._previousAbsoluteIndex,this._virtualIndex=this.getVirtualIndex(t.x,t.y),this._index=this._getIndex(this._virtualIndex),this._page=this.getPage(t.x,t.y,this._index),this._absoluteIndex=this._page*this.slides.length+this._index,this._previousAbsoluteIndex!=this._absoluteIndex&&(this._previousIndex=e,this.emit("change",this._index,this._absoluteIndex,this._absoluteIndex-this._previousAbsoluteIndex))}_update(){this._updateEnabled&&(this.smoother.damper=this.input.damper,this.smoother.target.set(this.input.target)),this.slides.forEach((t=>t.progress=this.slideProgress(t,this.smoother.position.x,this.smoother.position.y))),this._computeIndex(this.input.target),(this.smoother.active||this.input.active)&&window.requestAnimationFrame(this._update)}_updateTarget(t,e){this.slides.length&&(this.setTarget(t,e),this.input.target.set(this.target).clamp(this.input.min,this.input.max),this._computeIndex(this.target))}attach(){this._attached||(this.input.on("start",this._onInputStart),this.input.on("stop",this._onInputStop),this.input.on("hold",this._onInputHold),this.input.on("release",this._onInputRelease),this.input.attach(),this.input.paused=!1,this.smoother.paused=!1),super.attach()}detach(){this._attached&&(this.smoother.paused=!0,this.input.paused=!0,this.input.detach(),this.input.off("start",this._onInputStart),this.input.off("stop",this._onInputStop),this.input.off("hold",this._onInputHold),this.input.off("release",this._onInputRelease)),super.detach()}snap(){this.input.target.clamp(this.input.min,this.input.max);let t=this.getVirtualIndex(this.input.target.x,this.input.target.y),e=this._getIndex(t),n=this.getPage(this.input.target.x,this.input.target.y,e);this.loop||(n=0,e=Math.max(this.min,Math.min(this.max,this.index))),this._updateTarget(n,e)}_swipe(){if(Math.abs(this.input.deltaHeld.length())>this.swipeTrigger){let t=this.input.deltaHeld.x+this.input.deltaHeld.y<0?-1:1,e=this.getVirtualIndex(this.smoother.target.x,this.input.smoother.y)+t,n=this._getIndex(e),r=this.getPage(this.smoother.target.x,this.smoother.target.y,n);this.loop||(r=0,n=Math.max(this.min,Math.min(this.max,this.index+t))),this._updateTarget(r,n),this._updateEnabled=!0,this._update(!0),this._updateEnabled=!1}else this.input.position.set(this.input.target.set(this.smoother.target))}_onInputStart(){this._needsUpdate=!0,this._updateEnabled=!this._swiping,this._update()}_onInputStop(){this._updateEnabled=!this._swiping}_onInputHold(){this._swiping&&this.input.speed.set(0,0)}_onInputRelease(){this.target.set(this.input.target),this._computeIndex(this.target),this._snapping&&!this._swiping&&this.snap(),this._swiping&&this._swipe()}};class wh extends Wf.EventEmitter{constructor(t,e){super(),this.slide=t,this.page=e}}var Ah=n(6983);const Eh=(t,e,n,r=!1)=>{let i=e-t;return n===e&&r?n:((n-t)%i+i)%i+t},xh=(t,e=0,n=1)=>Math.min(n,Math.max(e,t)),Sh=(t,e,n)=>xh((n-t)/(e-t));class Th extends _h{constructor(t,e={}){e.anchor="number"==typeof e.anchor?{x:e.anchor}:e.anchor,e.reference=e.reference?e.reference:t,void 0===e.inputOptions&&(e.inputOptions={}),void 0===e.inputOptions.preventWheelDelta&&(e.inputOptions.preventWheelDelta={x:0,y:50}),void 0===e.inputOptions.preventTouchDelta&&(e.inputOptions.preventTouchDelta={x:0,y:50}),super(t,e),this.reference=e.reference?e.reference:t}get totalWidth(){return this._totalWidth}layout(){super.layout();let t=this.element.getBoundingClientRect();if(this.reference==window)this._scrollLeft=t.left,this._scrollRight=this.reference.innerWidth-t.left;else if(this.reference==this.element)this._scrollLeft=0,this._scrollRight=this.width;else{let e=this.reference.getBoundingClientRect();this._scrollLeft=t.left-e.left,this._scrollRight=e.left+this.reference.offsetWidth-t.left}let e=0;if(this.slides.forEach((t=>{t.x=e,t.middle=t.width/2,e+=t.width})),this._totalWidth=e,this._maxX=e-this.width,this._min=0,this._max=this.slides.length-1,!this.loop){this.input.min.x=0,this.input.max.x=this._maxX;const t=this.slides.findIndex((t=>t.x>=this._maxX));t>-1&&(this._max=t)}this._minSlideX=this.loop?-this._maxX:0,this._maxSlideX=this.width}unlayout(){super.unlayout(),this.slides.forEach((t=>{ei.set(t.element,{clearProps:"all"})}))}slideAnimation(t){let e=new Ge({paused:!0});return e.fromTo(t.element,1,{x:-t.width-this._scrollLeft},{x:0,ease:Bn.easeNone}),e.fromTo(t.element,1,{x:0},{x:this._scrollRight,ease:Bn.easeNone}),e.seek(1),e}setTarget(t,e){this.target.x=t*this._totalWidth-this.anchor.x+(this.slides.length?this.slides[e].x+this.slides[e].anchor.x:0)}getPage(t,e,n){return this.loop?Math.floor((t+this.anchor.x-(this.slides.length?this.slides[n].x+this.slides[n].anchor.x:0))/this._totalWidth):0}getVirtualIndex(t,e){let n=Eh(-this._totalWidth,this._totalWidth,t,!0);return n>=this.input.max.x?this._max:n<=this.input.min.x?this._min:(0,Ah.findClosestIndex)(this.virtualSlides,n,(t=>t.page*this._totalWidth+t.slide.x))}slideProgress(t,e,n){let r=t.x-e;return this.loop&&(r=Eh(this._minSlideX,this._maxSlideX,r,!0)),.5*(Sh(-t.width-this._scrollLeft,0,r)+Sh(0,this._scrollRight,r))}}function Ch(t){return Ch="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ch(t)}function Ih(){Ih=function(){return e};var t,e={},n=Object.prototype,r=n.hasOwnProperty,i=Object.defineProperty||function(t,e,n){t[e]=n.value},o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",s=o.asyncIterator||"@@asyncIterator",l=o.toStringTag||"@@toStringTag";function u(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,n){return t[e]=n}}function c(t,e,n,r){var o=e&&e.prototype instanceof v?e:v,a=Object.create(o.prototype),s=new P(r||[]);return i(a,"_invoke",{value:T(t,n,s)}),a}function d(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}e.wrap=c;var f="suspendedStart",h="suspendedYield",p="executing",m="completed",g={};function v(){}function y(){}function b(){}var _={};u(_,a,(function(){return this}));var w=Object.getPrototypeOf,A=w&&w(w(R([])));A&&A!==n&&r.call(A,a)&&(_=A);var E=b.prototype=v.prototype=Object.create(_);function x(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function S(t,e){function n(i,o,a,s){var l=d(t[i],t,o);if("throw"!==l.type){var u=l.arg,c=u.value;return c&&"object"==Ch(c)&&r.call(c,"__await")?e.resolve(c.__await).then((function(t){n("next",t,a,s)}),(function(t){n("throw",t,a,s)})):e.resolve(c).then((function(t){u.value=t,a(u)}),(function(t){return n("throw",t,a,s)}))}s(l.arg)}var o;i(this,"_invoke",{value:function(t,r){function i(){return new e((function(e,i){n(t,r,e,i)}))}return o=o?o.then(i,i):i()}})}function T(e,n,r){var i=f;return function(o,a){if(i===p)throw Error("Generator is already running");if(i===m){if("throw"===o)throw a;return{value:t,done:!0}}for(r.method=o,r.arg=a;;){var s=r.delegate;if(s){var l=C(s,r);if(l){if(l===g)continue;return l}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(i===f)throw i=m,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);i=p;var u=d(e,n,r);if("normal"===u.type){if(i=r.done?m:h,u.arg===g)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(i=m,r.method="throw",r.arg=u.arg)}}}function C(e,n){var r=n.method,i=e.iterator[r];if(i===t)return n.delegate=null,"throw"===r&&e.iterator.return&&(n.method="return",n.arg=t,C(e,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),g;var o=d(i,e.iterator,n.arg);if("throw"===o.type)return n.method="throw",n.arg=o.arg,n.delegate=null,g;var a=o.arg;return a?a.done?(n[e.resultName]=a.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=t),n.delegate=null,g):a:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,g)}function I(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function k(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function P(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(I,this),this.reset(!0)}function R(e){if(e||""===e){var n=e[a];if(n)return n.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var i=-1,o=function n(){for(;++i<e.length;)if(r.call(e,i))return n.value=e[i],n.done=!1,n;return n.value=t,n.done=!0,n};return o.next=o}}throw new TypeError(Ch(e)+" is not iterable")}return y.prototype=b,i(E,"constructor",{value:b,configurable:!0}),i(b,"constructor",{value:y,configurable:!0}),y.displayName=u(b,l,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===y||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,b):(t.__proto__=b,u(t,l,"GeneratorFunction")),t.prototype=Object.create(E),t},e.awrap=function(t){return{__await:t}},x(S.prototype),u(S.prototype,s,(function(){return this})),e.AsyncIterator=S,e.async=function(t,n,r,i,o){void 0===o&&(o=Promise);var a=new S(c(t,n,r,i),o);return e.isGeneratorFunction(n)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},x(E),u(E,l,"Generator"),u(E,a,(function(){return this})),u(E,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),n=[];for(var r in e)n.push(r);return n.reverse(),function t(){for(;n.length;){var r=n.pop();if(r in e)return t.value=r,t.done=!1,t}return t.done=!0,t}},e.values=R,P.prototype={constructor:P,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(k),!e)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function i(r,i){return s.type="throw",s.arg=e,n.next=r,i&&(n.method="next",n.arg=t),!!i}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],s=a.completion;if("root"===a.tryLoc)return i("end");if(a.tryLoc<=this.prev){var l=r.call(a,"catchLoc"),u=r.call(a,"finallyLoc");if(l&&u){if(this.prev<a.catchLoc)return i(a.catchLoc,!0);if(this.prev<a.finallyLoc)return i(a.finallyLoc)}else if(l){if(this.prev<a.catchLoc)return i(a.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return i(a.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=t,a.arg=e,o?(this.method="next",this.next=o.finallyLoc,g):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),g},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),k(n),g}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var i=r.arg;k(n)}return i}}throw Error("illegal catch attempt")},delegateYield:function(e,n,r){return this.delegate={iterator:R(e),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=t),g}},e}function kh(t,e,n,r,i,o,a){try{var s=t[o](a),l=s.value}catch(t){return void n(t)}s.done?e(l):Promise.resolve(l).then(r,i)}function Ph(t){return function(){var e=this,n=arguments;return new Promise((function(r,i){var o=t.apply(e,n);function a(t){kh(o,r,i,a,s,"next",t)}function s(t){kh(o,r,i,a,s,"throw",t)}a(void 0)}))}}function Rh(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Bh(r.key),r)}}function Oh(t,e,n){return e=Lh(e),function(t,e){if(e&&("object"===Ch(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,Mh()?Reflect.construct(e,n||[],Lh(t).constructor):e.apply(t,n))}function Mh(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(Mh=function(){return!!t})()}function Lh(t){return Lh=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Lh(t)}function Dh(t,e){return Dh=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Dh(t,e)}function Nh(t,e,n){return(e=Bh(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Bh(t){var e=function(t,e){if("object"!=Ch(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=Ch(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Ch(e)?e:e+""}var jh=function(t){function e(t){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),Nh(n=Oh(this,e,[t]),"showInterLoader",(function(){return n.isOpen=!0,n.tProgress=ti.timeline(),n.tProgress})),Nh(n,"hideInterLoader",(function(){return n.tProgress&&n.tProgress.kill(),ti.timeline()})),n.dependencies.add(bf),n.dependencies.add(dp),n.dependencies.add(Of),n.dependencies.add(qf),n.dependencies.add(Qf),n.body=document.getElementById("body"),n.isOpen=!1,n.first=!0,n.tProgress,n.progress={p:0},n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Dh(t,e)}(e,t),n=e,r=[{key:"viewport",get:function(){return this.bootstrap.get(Qf).viewport}},{key:"components",get:function(){return this.bootstrap.get(qf).components}},{key:"pageModule",get:function(){return this.bootstrap.get(bf)}},{key:"previousComponent",get:function(){return this.pageModule.previous?this.components.get(this.pageModule.previous):null}},{key:"currentComponent",get:function(){return this.pageModule.current?this.components.get(this.pageModule.current):null}},{key:"loaderModule",get:function(){return this.bootstrap.get(Of).loader}},{key:"menuComponent",get:function(){return this.components.get(this.menu)}},{key:"before",value:(a=Ph(Ih().mark((function t(){return Ih().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.first){t.next=2;break}return t.abrupt("return");case 2:this.bT=ti.timeline();case 3:case"end":return t.stop()}}),t,this)}))),function(){return a.apply(this,arguments)})},{key:"after",value:(o=Ph(Ih().mark((function t(){return Ih().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.first){t.next=2;break}return t.abrupt("return");case 2:this.first=!1;case 3:case"end":return t.stop()}}),t,this)}))),function(){return o.apply(this,arguments)})}],r&&Rh(n.prototype,r),i&&Rh(n,i),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,i,o,a}(nf);const zh=jh;function Fh(t){return Fh="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Fh(t)}function Uh(){Uh=function(){return e};var t,e={},n=Object.prototype,r=n.hasOwnProperty,i=Object.defineProperty||function(t,e,n){t[e]=n.value},o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",s=o.asyncIterator||"@@asyncIterator",l=o.toStringTag||"@@toStringTag";function u(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,n){return t[e]=n}}function c(t,e,n,r){var o=e&&e.prototype instanceof v?e:v,a=Object.create(o.prototype),s=new P(r||[]);return i(a,"_invoke",{value:T(t,n,s)}),a}function d(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}e.wrap=c;var f="suspendedStart",h="suspendedYield",p="executing",m="completed",g={};function v(){}function y(){}function b(){}var _={};u(_,a,(function(){return this}));var w=Object.getPrototypeOf,A=w&&w(w(R([])));A&&A!==n&&r.call(A,a)&&(_=A);var E=b.prototype=v.prototype=Object.create(_);function x(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function S(t,e){function n(i,o,a,s){var l=d(t[i],t,o);if("throw"!==l.type){var u=l.arg,c=u.value;return c&&"object"==Fh(c)&&r.call(c,"__await")?e.resolve(c.__await).then((function(t){n("next",t,a,s)}),(function(t){n("throw",t,a,s)})):e.resolve(c).then((function(t){u.value=t,a(u)}),(function(t){return n("throw",t,a,s)}))}s(l.arg)}var o;i(this,"_invoke",{value:function(t,r){function i(){return new e((function(e,i){n(t,r,e,i)}))}return o=o?o.then(i,i):i()}})}function T(e,n,r){var i=f;return function(o,a){if(i===p)throw Error("Generator is already running");if(i===m){if("throw"===o)throw a;return{value:t,done:!0}}for(r.method=o,r.arg=a;;){var s=r.delegate;if(s){var l=C(s,r);if(l){if(l===g)continue;return l}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(i===f)throw i=m,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);i=p;var u=d(e,n,r);if("normal"===u.type){if(i=r.done?m:h,u.arg===g)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(i=m,r.method="throw",r.arg=u.arg)}}}function C(e,n){var r=n.method,i=e.iterator[r];if(i===t)return n.delegate=null,"throw"===r&&e.iterator.return&&(n.method="return",n.arg=t,C(e,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),g;var o=d(i,e.iterator,n.arg);if("throw"===o.type)return n.method="throw",n.arg=o.arg,n.delegate=null,g;var a=o.arg;return a?a.done?(n[e.resultName]=a.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=t),n.delegate=null,g):a:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,g)}function I(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function k(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function P(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(I,this),this.reset(!0)}function R(e){if(e||""===e){var n=e[a];if(n)return n.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var i=-1,o=function n(){for(;++i<e.length;)if(r.call(e,i))return n.value=e[i],n.done=!1,n;return n.value=t,n.done=!0,n};return o.next=o}}throw new TypeError(Fh(e)+" is not iterable")}return y.prototype=b,i(E,"constructor",{value:b,configurable:!0}),i(b,"constructor",{value:y,configurable:!0}),y.displayName=u(b,l,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===y||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,b):(t.__proto__=b,u(t,l,"GeneratorFunction")),t.prototype=Object.create(E),t},e.awrap=function(t){return{__await:t}},x(S.prototype),u(S.prototype,s,(function(){return this})),e.AsyncIterator=S,e.async=function(t,n,r,i,o){void 0===o&&(o=Promise);var a=new S(c(t,n,r,i),o);return e.isGeneratorFunction(n)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},x(E),u(E,l,"Generator"),u(E,a,(function(){return this})),u(E,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),n=[];for(var r in e)n.push(r);return n.reverse(),function t(){for(;n.length;){var r=n.pop();if(r in e)return t.value=r,t.done=!1,t}return t.done=!0,t}},e.values=R,P.prototype={constructor:P,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(k),!e)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function i(r,i){return s.type="throw",s.arg=e,n.next=r,i&&(n.method="next",n.arg=t),!!i}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],s=a.completion;if("root"===a.tryLoc)return i("end");if(a.tryLoc<=this.prev){var l=r.call(a,"catchLoc"),u=r.call(a,"finallyLoc");if(l&&u){if(this.prev<a.catchLoc)return i(a.catchLoc,!0);if(this.prev<a.finallyLoc)return i(a.finallyLoc)}else if(l){if(this.prev<a.catchLoc)return i(a.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return i(a.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=t,a.arg=e,o?(this.method="next",this.next=o.finallyLoc,g):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),g},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),k(n),g}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var i=r.arg;k(n)}return i}}throw Error("illegal catch attempt")},delegateYield:function(e,n,r){return this.delegate={iterator:R(e),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=t),g}},e}function qh(t,e,n,r,i,o,a){try{var s=t[o](a),l=s.value}catch(t){return void n(t)}s.done?e(l):Promise.resolve(l).then(r,i)}function Gh(t){return function(){var e=this,n=arguments;return new Promise((function(r,i){var o=t.apply(e,n);function a(t){qh(o,r,i,a,s,"next",t)}function s(t){qh(o,r,i,a,s,"throw",t)}a(void 0)}))}}function Hh(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Vh(r.key),r)}}function Vh(t){var e=function(t,e){if("object"!=Fh(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=Fh(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Fh(e)?e:e+""}function Qh(t,e,n){return e=Yh(e),function(t,e){if(e&&("object"===Fh(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,Wh()?Reflect.construct(e,n||[],Yh(t).constructor):e.apply(t,n))}function Wh(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(Wh=function(){return!!t})()}function Yh(t){return Yh=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Yh(t)}function Kh(t,e){return Kh=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Kh(t,e)}function Xh(t,e){return e=e||"\\s",t.replace(new RegExp("["+e+"]+$","g"),"")}var $h=function(t){function e(t){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=Qh(this,e,[t])).dependencies.add(bf),n.dependencies.add(vf),n.dependencies.add(af),n.loader=new Pf,n.prepend=!0,n._current=null,n.transform=function(){var t=Gh(Uh().mark((function t(e){return Uh().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",e);case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),n.header=document.getElementById("header"),n.root=document.getElementById("root"),n.footer=document.getElementById("footer"),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Kh(t,e)}(e,t),n=e,r=[{key:"priority",get:function(){return 1}},{key:"pageModule",get:function(){return this.bootstrap.get(bf)}},{key:"run",value:(o=Gh(Uh().mark((function t(){var e,n,r,i,o,a;return Uh().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e=this.pageModule.current,n=this.bootstrap.get(vf).router,r=n.current.toString(),n.previous||(this._current=r),!e||!n.previous||Xh(this._current,"/")==Xh(r,"/")){t.next=22;break}return t.next=7,this.loader.load(r);case 7:if(!(i=this.loader.get(r))){t.next=22;break}return t.next=11,this.transform(i);case 11:if(i=t.sent,this.loader.delete(r),this.insertElement(i),this.pageModule.current=i,!(o=this.loader.responses.get(r)).redirected||!o.url.includes("membership")&&!o.url.includes("thank-you")){t.next=20;break}return ti.set([this.header,this.root,this.footer],{opacity:0}),window.location.href=o.url+"&skipRegister=1",t.abrupt("return");case 20:o.redirected&&((a=this.bootstrap.get(af).state).url=o.url,window.history.replaceState(a,a.title,a.url)),this._current=o.redirected?o.url:r;case 22:case"end":return t.stop()}}),t,this)}))),function(){return o.apply(this,arguments)})},{key:"insertElement",value:function(t){var e=this;t&&(this.prepend?t instanceof NodeList?t.forEach((function(t){return e.pageModule.root.insertBefore(t,e.pageModule.root.firstChild)})):this.pageModule.root.insertBefore(t,this.pageModule.root.firstChild):t instanceof NodeList?t.forEach((function(t){return e.pageModule.root.appendChild(t)})):this.pageModule.root.appendChild(t))}}],r&&Hh(n.prototype,r),i&&Hh(n,i),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,i,o}(nf);const Zh=$h;function Jh(t){return Jh="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Jh(t)}function tp(t){return function(t){if(Array.isArray(t))return ep(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return ep(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ep(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ep(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function np(){np=function(){return e};var t,e={},n=Object.prototype,r=n.hasOwnProperty,i=Object.defineProperty||function(t,e,n){t[e]=n.value},o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",s=o.asyncIterator||"@@asyncIterator",l=o.toStringTag||"@@toStringTag";function u(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,n){return t[e]=n}}function c(t,e,n,r){var o=e&&e.prototype instanceof v?e:v,a=Object.create(o.prototype),s=new P(r||[]);return i(a,"_invoke",{value:T(t,n,s)}),a}function d(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}e.wrap=c;var f="suspendedStart",h="suspendedYield",p="executing",m="completed",g={};function v(){}function y(){}function b(){}var _={};u(_,a,(function(){return this}));var w=Object.getPrototypeOf,A=w&&w(w(R([])));A&&A!==n&&r.call(A,a)&&(_=A);var E=b.prototype=v.prototype=Object.create(_);function x(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function S(t,e){function n(i,o,a,s){var l=d(t[i],t,o);if("throw"!==l.type){var u=l.arg,c=u.value;return c&&"object"==Jh(c)&&r.call(c,"__await")?e.resolve(c.__await).then((function(t){n("next",t,a,s)}),(function(t){n("throw",t,a,s)})):e.resolve(c).then((function(t){u.value=t,a(u)}),(function(t){return n("throw",t,a,s)}))}s(l.arg)}var o;i(this,"_invoke",{value:function(t,r){function i(){return new e((function(e,i){n(t,r,e,i)}))}return o=o?o.then(i,i):i()}})}function T(e,n,r){var i=f;return function(o,a){if(i===p)throw Error("Generator is already running");if(i===m){if("throw"===o)throw a;return{value:t,done:!0}}for(r.method=o,r.arg=a;;){var s=r.delegate;if(s){var l=C(s,r);if(l){if(l===g)continue;return l}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(i===f)throw i=m,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);i=p;var u=d(e,n,r);if("normal"===u.type){if(i=r.done?m:h,u.arg===g)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(i=m,r.method="throw",r.arg=u.arg)}}}function C(e,n){var r=n.method,i=e.iterator[r];if(i===t)return n.delegate=null,"throw"===r&&e.iterator.return&&(n.method="return",n.arg=t,C(e,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),g;var o=d(i,e.iterator,n.arg);if("throw"===o.type)return n.method="throw",n.arg=o.arg,n.delegate=null,g;var a=o.arg;return a?a.done?(n[e.resultName]=a.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=t),n.delegate=null,g):a:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,g)}function I(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function k(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function P(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(I,this),this.reset(!0)}function R(e){if(e||""===e){var n=e[a];if(n)return n.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var i=-1,o=function n(){for(;++i<e.length;)if(r.call(e,i))return n.value=e[i],n.done=!1,n;return n.value=t,n.done=!0,n};return o.next=o}}throw new TypeError(Jh(e)+" is not iterable")}return y.prototype=b,i(E,"constructor",{value:b,configurable:!0}),i(b,"constructor",{value:y,configurable:!0}),y.displayName=u(b,l,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===y||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,b):(t.__proto__=b,u(t,l,"GeneratorFunction")),t.prototype=Object.create(E),t},e.awrap=function(t){return{__await:t}},x(S.prototype),u(S.prototype,s,(function(){return this})),e.AsyncIterator=S,e.async=function(t,n,r,i,o){void 0===o&&(o=Promise);var a=new S(c(t,n,r,i),o);return e.isGeneratorFunction(n)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},x(E),u(E,l,"Generator"),u(E,a,(function(){return this})),u(E,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),n=[];for(var r in e)n.push(r);return n.reverse(),function t(){for(;n.length;){var r=n.pop();if(r in e)return t.value=r,t.done=!1,t}return t.done=!0,t}},e.values=R,P.prototype={constructor:P,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(k),!e)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function i(r,i){return s.type="throw",s.arg=e,n.next=r,i&&(n.method="next",n.arg=t),!!i}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],s=a.completion;if("root"===a.tryLoc)return i("end");if(a.tryLoc<=this.prev){var l=r.call(a,"catchLoc"),u=r.call(a,"finallyLoc");if(l&&u){if(this.prev<a.catchLoc)return i(a.catchLoc,!0);if(this.prev<a.finallyLoc)return i(a.finallyLoc)}else if(l){if(this.prev<a.catchLoc)return i(a.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return i(a.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=t,a.arg=e,o?(this.method="next",this.next=o.finallyLoc,g):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),g},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),k(n),g}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var i=r.arg;k(n)}return i}}throw Error("illegal catch attempt")},delegateYield:function(e,n,r){return this.delegate={iterator:R(e),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=t),g}},e}function rp(t,e,n,r,i,o,a){try{var s=t[o](a),l=s.value}catch(t){return void n(t)}s.done?e(l):Promise.resolve(l).then(r,i)}function ip(t){return function(){var e=this,n=arguments;return new Promise((function(r,i){var o=t.apply(e,n);function a(t){rp(o,r,i,a,s,"next",t)}function s(t){rp(o,r,i,a,s,"throw",t)}a(void 0)}))}}function op(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,ap(r.key),r)}}function ap(t){var e=function(t,e){if("object"!=Jh(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=Jh(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Jh(e)?e:e+""}function sp(t,e,n){return e=up(e),function(t,e){if(e&&("object"===Jh(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,lp()?Reflect.construct(e,n||[],up(t).constructor):e.apply(t,n))}function lp(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(lp=function(){return!!t})()}function up(t){return up=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},up(t)}function cp(t,e){return cp=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},cp(t,e)}var dp=function(t){function e(t){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=sp(this,e,[t])).dependencies.add(bf),n.dependencies.add(Zh),n.dependencies.add(qf),n.dependencies.add(Qf),n.dependencies.add(vf),n.header=document.getElementById("header"),n.root=document.getElementById("root"),n.footer=document.getElementById("footer"),n.contactPanel=document.querySelector(".widget-contact"),n.timeline=null,n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&cp(t,e)}(e,t),n=e,r=[{key:"viewport",get:function(){return this.bootstrap.get(Qf).viewport}},{key:"pageModule",get:function(){return this.bootstrap.get(bf)}},{key:"headerModule",get:function(){return this.components.get(this.header)}},{key:"ajaxPageModule",get:function(){return this.bootstrap.get(Zh)}},{key:"components",get:function(){return this.bootstrap.get(qf).components}},{key:"loaderModule",get:function(){return this.bootstrap.get(zh)}},{key:"previousComponent",get:function(){return this.pageModule.previous?this.components.get(this.pageModule.previous):null}},{key:"currentComponent",get:function(){return this.pageModule.current?this.components.get(this.pageModule.current):null}},{key:"router",get:function(){return this.bootstrap.get(vf)}},{key:"contactPanelComponent",get:function(){return this.components.get(this.contactPanel)}},{key:"before",value:(s=ip(np().mark((function t(){var e,n=this;return np().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return null===(e=this.bootstrap.lenis)||void 0===e||e.stop(),this.timeline&&this.timeline.kill(),this.timeline=ti.timeline(),this.pageModule.autoRemove=!1,this.timeline.to(this.header,{opacity:0,duration:.3},0),t.abrupt("return",new Promise((function(t,e){if(n.pageModule.current){var r=document.querySelectorAll("body > [data-fixed]");n.timeline.addLabel("close",0),n.timeline.add(n.loaderModule.showInterLoader(),0),n.timeline.to([n.root,n.footer],{opacity:0,duration:.3},"close"),n.timeline.add((function(){var t;null===(t=n.bootstrap.smoother)||void 0===t||t.scrollTo(0,{duration:0})})),n.currentComponent&&n.currentComponent.close,n.timeline.add((function(){r.forEach((function(t){return t.remove()})),t()}))}else{var i;n.timeline.set(window,{scrollTo:0}),null===(i=n.bootstrap.smoother)||void 0===i||i.scrollTo(0,{duration:0}),n.timeline.add(t)}})));case 6:case"end":return t.stop()}}),t,this)}))),function(){return s.apply(this,arguments)})},{key:"run",value:(a=ip(np().mark((function t(){var e=this;return np().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise((function(t,n){e.pageModule.previous&&(e.pageModule.removeElement(e.pageModule.previous),e.components.clean()),document.body.classList.contains("woocommerce-page")&&document.body.classList.remove("woocommerce-page"),document.body.classList.contains("woocommerce")&&document.body.classList.remove("woocommerce"),t()})));case 1:case"end":return t.stop()}}),t)}))),function(){return a.apply(this,arguments)})},{key:"after",value:(o=ip(np().mark((function t(){var e,n,r,i,o=this;return np().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:this.emit("routeChange"),this.timeline&&this.timeline.kill(),this.timeline=ti.timeline(),this.timeline.add((function(){var t;null===(t=o.headerModule)||void 0===t||t.selectCurrentRoute();var e=document.querySelectorAll("[data-header-props]");if(o.footer&&o.footer.classList.contains("hidden")&&o.footer.classList.remove("hidden"),e.length&&("companion"!==e[0].dataset.headerProps&&"disable-courses-cp"!==e[0].dataset.headerProps&&"disable-talks"!==e[0].dataset.headerProps&&"disable-films"!==e[0].dataset.headerProps&&"404"!==e[0].dataset.headerProps||o.footer.classList.add("hidden")),window.location.hash)if("#contact"===window.location.hash)o.contactPanelComponent&&o.contactPanelComponent.togglePanel();else{var n=document.querySelector(window.location.hash);if(n){var r,i=n.getBoundingClientRect().top+window.scrollY;null===(r=o.bootstrap.smoother)||void 0===r||r.scrollTo(i,{duration:0})}}}),0),this.pageModule.previous?(null===(r=this.bootstrap.smoother)||void 0===r||r.scrollTo(0,{duration:0}),this.timeline.addLabel("open",0),i=this.pageModule.previous?this.pageModule.previous.id:null,this.timeline.to([this.root,this.footer],{opacity:1,duration:.3},""===i&&this.bootstrap.anchor?.2:0),this.currentComponent&&"function"==typeof this.currentComponent.open&&this.timeline.add(this.currentComponent.open(),"open")):(this.currentComponent&&"function"==typeof this.currentComponent.open&&this.timeline.add(this.currentComponent.open()),this.headerModule&&"function"==typeof this.headerModule.open&&this.timeline.add(this.headerModule.open(),"<")),n=this.pageModule.current.querySelectorAll("[data-fixed]"),(e=document.body).prepend.apply(e,tp(n)),this.timeline.add((function(){if(o.bootstrap.lenis&&(o.bootstrap.lenis.start(),o.bootstrap.lenis.dimensions.scrollHeight=document.body.scrollHeight),o.bootstrap.anchor){var t,e,n=null===(t=document.querySelector("section"))||void 0===t?void 0:t.id,r=o.pageModule.previous?o.pageModule.previous.id:null;if(""!==n)if("book-store"===n&&""===r)null===(e=o.bootstrap.smoother)||void 0===e||e.scrollTo(o.bootstrap.anchor,{duration:0}),o.bootstrap.anchor=null;else if("page"===n);else if("companion-listing-page"===n&&"page"===r){var i;null===(i=o.bootstrap.smoother)||void 0===i||i.scrollTo(o.bootstrap.anchor,{duration:0})}else o.bootstrap.anchor=null}}),0);case 9:case"end":return t.stop()}}),t,this)}))),function(){return o.apply(this,arguments)})},{key:"preventScroll",value:function(t){t.stopPropagation(),t.preventDefault()}}],r&&op(n.prototype,r),i&&op(n,i),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,i,o,a,s}(nf);function fp(t){return fp="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},fp(t)}function hp(){hp=function(){return e};var t,e={},n=Object.prototype,r=n.hasOwnProperty,i=Object.defineProperty||function(t,e,n){t[e]=n.value},o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",s=o.asyncIterator||"@@asyncIterator",l=o.toStringTag||"@@toStringTag";function u(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,n){return t[e]=n}}function c(t,e,n,r){var o=e&&e.prototype instanceof v?e:v,a=Object.create(o.prototype),s=new P(r||[]);return i(a,"_invoke",{value:T(t,n,s)}),a}function d(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}e.wrap=c;var f="suspendedStart",h="suspendedYield",p="executing",m="completed",g={};function v(){}function y(){}function b(){}var _={};u(_,a,(function(){return this}));var w=Object.getPrototypeOf,A=w&&w(w(R([])));A&&A!==n&&r.call(A,a)&&(_=A);var E=b.prototype=v.prototype=Object.create(_);function x(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function S(t,e){function n(i,o,a,s){var l=d(t[i],t,o);if("throw"!==l.type){var u=l.arg,c=u.value;return c&&"object"==fp(c)&&r.call(c,"__await")?e.resolve(c.__await).then((function(t){n("next",t,a,s)}),(function(t){n("throw",t,a,s)})):e.resolve(c).then((function(t){u.value=t,a(u)}),(function(t){return n("throw",t,a,s)}))}s(l.arg)}var o;i(this,"_invoke",{value:function(t,r){function i(){return new e((function(e,i){n(t,r,e,i)}))}return o=o?o.then(i,i):i()}})}function T(e,n,r){var i=f;return function(o,a){if(i===p)throw Error("Generator is already running");if(i===m){if("throw"===o)throw a;return{value:t,done:!0}}for(r.method=o,r.arg=a;;){var s=r.delegate;if(s){var l=C(s,r);if(l){if(l===g)continue;return l}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(i===f)throw i=m,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);i=p;var u=d(e,n,r);if("normal"===u.type){if(i=r.done?m:h,u.arg===g)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(i=m,r.method="throw",r.arg=u.arg)}}}function C(e,n){var r=n.method,i=e.iterator[r];if(i===t)return n.delegate=null,"throw"===r&&e.iterator.return&&(n.method="return",n.arg=t,C(e,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),g;var o=d(i,e.iterator,n.arg);if("throw"===o.type)return n.method="throw",n.arg=o.arg,n.delegate=null,g;var a=o.arg;return a?a.done?(n[e.resultName]=a.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=t),n.delegate=null,g):a:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,g)}function I(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function k(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function P(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(I,this),this.reset(!0)}function R(e){if(e||""===e){var n=e[a];if(n)return n.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var i=-1,o=function n(){for(;++i<e.length;)if(r.call(e,i))return n.value=e[i],n.done=!1,n;return n.value=t,n.done=!0,n};return o.next=o}}throw new TypeError(fp(e)+" is not iterable")}return y.prototype=b,i(E,"constructor",{value:b,configurable:!0}),i(b,"constructor",{value:y,configurable:!0}),y.displayName=u(b,l,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===y||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,b):(t.__proto__=b,u(t,l,"GeneratorFunction")),t.prototype=Object.create(E),t},e.awrap=function(t){return{__await:t}},x(S.prototype),u(S.prototype,s,(function(){return this})),e.AsyncIterator=S,e.async=function(t,n,r,i,o){void 0===o&&(o=Promise);var a=new S(c(t,n,r,i),o);return e.isGeneratorFunction(n)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},x(E),u(E,l,"Generator"),u(E,a,(function(){return this})),u(E,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),n=[];for(var r in e)n.push(r);return n.reverse(),function t(){for(;n.length;){var r=n.pop();if(r in e)return t.value=r,t.done=!1,t}return t.done=!0,t}},e.values=R,P.prototype={constructor:P,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(k),!e)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function i(r,i){return s.type="throw",s.arg=e,n.next=r,i&&(n.method="next",n.arg=t),!!i}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],s=a.completion;if("root"===a.tryLoc)return i("end");if(a.tryLoc<=this.prev){var l=r.call(a,"catchLoc"),u=r.call(a,"finallyLoc");if(l&&u){if(this.prev<a.catchLoc)return i(a.catchLoc,!0);if(this.prev<a.finallyLoc)return i(a.finallyLoc)}else if(l){if(this.prev<a.catchLoc)return i(a.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return i(a.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=t,a.arg=e,o?(this.method="next",this.next=o.finallyLoc,g):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),g},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),k(n),g}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var i=r.arg;k(n)}return i}}throw Error("illegal catch attempt")},delegateYield:function(e,n,r){return this.delegate={iterator:R(e),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=t),g}},e}function pp(t,e,n,r,i,o,a){try{var s=t[o](a),l=s.value}catch(t){return void n(t)}s.done?e(l):Promise.resolve(l).then(r,i)}function mp(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,_p(r.key),r)}}function gp(t,e,n){return e=yp(e),function(t,e){if(e&&("object"===fp(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,vp()?Reflect.construct(e,n||[],yp(t).constructor):e.apply(t,n))}function vp(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(vp=function(){return!!t})()}function yp(t){return yp=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},yp(t)}function bp(t,e){return bp=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},bp(t,e)}function _p(t){var e=function(t,e){if("object"!=fp(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=fp(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==fp(e)?e:e+""}var wp=function(t){function e(t){var n,r,i,o;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),n=gp(this,e,[t]),r=n,o=function(){n.after()},(i=_p(i="update"))in r?Object.defineProperty(r,i,{value:o,enumerable:!0,configurable:!0,writable:!0}):r[i]=o,n.dependencies.add(vf),n.selector="[data-follow-link]",n.onClick=n.onClick.bind(n),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&bp(t,e)}(e,t),n=e,r=[{key:"after",value:(o=function(t){return function(){var e=this,n=arguments;return new Promise((function(r,i){var o=t.apply(e,n);function a(t){pp(o,r,i,a,s,"next",t)}function s(t){pp(o,r,i,a,s,"throw",t)}a(void 0)}))}}(hp().mark((function t(){var e=this;return hp().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:this.items&&this.items.forEach((function(t){return t.removeEventListener("click",e.onClick,!0)})),this.items=document.querySelectorAll(this.selector),this.items.forEach((function(t){return t.addEventListener("click",e.onClick,!0)}));case 3:case"end":return t.stop()}}),t,this)}))),function(){return o.apply(this,arguments)})},{key:"getParentAnchor",value:function(t){return t&&t.parentNode&&"a"!=t.tagName.toLowerCase()?this.getParentAnchor(t.parentNode):t==document?null:t}},{key:"getLink",value:function(t){if(t.currentTarget.dataset.followLink)return{url:t.currentTarget.dataset.followLink,target:t.currentTarget.dataset.followLinkTarget?t.currentTarget.dataset.followLinkTarget:"_self"};for(var e=0,n=[this.getParentAnchor(t.target),t.currentTarget.querySelector("a")];e<n.length;e++){var r=n[e];if(r){var i=r.getAttribute("href"),o=r.getAttribute("target");if(i)return{url:i,target:o||"_self"}}}return{url:t.currentTarget.dataset.followLink,target:t.currentTarget.dataset.followLinkTarget}}},{key:"onClick",value:function(t){if(!t.target.hasAttribute("data-no-follow")&&!t.srcElement.hasAttribute("data-no-follow")&&"a"!=t.target.tagName.toLowerCase()){t.preventDefault(),t.stopPropagation(),t.stopImmediatePropagation();var e=this.getLink(t);if(this.bootstrap.anchor=document.documentElement.scrollTop,e.target=t.metaKey||new pf(e.url).external?"_blank":e.target,"_blank"==e.target)return window.open(e.url);this.bootstrap.modules.has(wf)?this.bootstrap._running||this.bootstrap.get(vf).set(e.url):window.location.href=e.url}}}],r&&mp(n.prototype,r),i&&mp(n,i),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,i,o}(nf);function Ap(t){return Ap="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ap(t)}function Ep(){Ep=function(){return e};var t,e={},n=Object.prototype,r=n.hasOwnProperty,i=Object.defineProperty||function(t,e,n){t[e]=n.value},o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",s=o.asyncIterator||"@@asyncIterator",l=o.toStringTag||"@@toStringTag";function u(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,n){return t[e]=n}}function c(t,e,n,r){var o=e&&e.prototype instanceof v?e:v,a=Object.create(o.prototype),s=new P(r||[]);return i(a,"_invoke",{value:T(t,n,s)}),a}function d(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}e.wrap=c;var f="suspendedStart",h="suspendedYield",p="executing",m="completed",g={};function v(){}function y(){}function b(){}var _={};u(_,a,(function(){return this}));var w=Object.getPrototypeOf,A=w&&w(w(R([])));A&&A!==n&&r.call(A,a)&&(_=A);var E=b.prototype=v.prototype=Object.create(_);function x(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function S(t,e){function n(i,o,a,s){var l=d(t[i],t,o);if("throw"!==l.type){var u=l.arg,c=u.value;return c&&"object"==Ap(c)&&r.call(c,"__await")?e.resolve(c.__await).then((function(t){n("next",t,a,s)}),(function(t){n("throw",t,a,s)})):e.resolve(c).then((function(t){u.value=t,a(u)}),(function(t){return n("throw",t,a,s)}))}s(l.arg)}var o;i(this,"_invoke",{value:function(t,r){function i(){return new e((function(e,i){n(t,r,e,i)}))}return o=o?o.then(i,i):i()}})}function T(e,n,r){var i=f;return function(o,a){if(i===p)throw Error("Generator is already running");if(i===m){if("throw"===o)throw a;return{value:t,done:!0}}for(r.method=o,r.arg=a;;){var s=r.delegate;if(s){var l=C(s,r);if(l){if(l===g)continue;return l}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(i===f)throw i=m,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);i=p;var u=d(e,n,r);if("normal"===u.type){if(i=r.done?m:h,u.arg===g)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(i=m,r.method="throw",r.arg=u.arg)}}}function C(e,n){var r=n.method,i=e.iterator[r];if(i===t)return n.delegate=null,"throw"===r&&e.iterator.return&&(n.method="return",n.arg=t,C(e,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),g;var o=d(i,e.iterator,n.arg);if("throw"===o.type)return n.method="throw",n.arg=o.arg,n.delegate=null,g;var a=o.arg;return a?a.done?(n[e.resultName]=a.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=t),n.delegate=null,g):a:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,g)}function I(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function k(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function P(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(I,this),this.reset(!0)}function R(e){if(e||""===e){var n=e[a];if(n)return n.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var i=-1,o=function n(){for(;++i<e.length;)if(r.call(e,i))return n.value=e[i],n.done=!1,n;return n.value=t,n.done=!0,n};return o.next=o}}throw new TypeError(Ap(e)+" is not iterable")}return y.prototype=b,i(E,"constructor",{value:b,configurable:!0}),i(b,"constructor",{value:y,configurable:!0}),y.displayName=u(b,l,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===y||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,b):(t.__proto__=b,u(t,l,"GeneratorFunction")),t.prototype=Object.create(E),t},e.awrap=function(t){return{__await:t}},x(S.prototype),u(S.prototype,s,(function(){return this})),e.AsyncIterator=S,e.async=function(t,n,r,i,o){void 0===o&&(o=Promise);var a=new S(c(t,n,r,i),o);return e.isGeneratorFunction(n)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},x(E),u(E,l,"Generator"),u(E,a,(function(){return this})),u(E,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),n=[];for(var r in e)n.push(r);return n.reverse(),function t(){for(;n.length;){var r=n.pop();if(r in e)return t.value=r,t.done=!1,t}return t.done=!0,t}},e.values=R,P.prototype={constructor:P,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(k),!e)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function i(r,i){return s.type="throw",s.arg=e,n.next=r,i&&(n.method="next",n.arg=t),!!i}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],s=a.completion;if("root"===a.tryLoc)return i("end");if(a.tryLoc<=this.prev){var l=r.call(a,"catchLoc"),u=r.call(a,"finallyLoc");if(l&&u){if(this.prev<a.catchLoc)return i(a.catchLoc,!0);if(this.prev<a.finallyLoc)return i(a.finallyLoc)}else if(l){if(this.prev<a.catchLoc)return i(a.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return i(a.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=t,a.arg=e,o?(this.method="next",this.next=o.finallyLoc,g):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),g},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),k(n),g}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var i=r.arg;k(n)}return i}}throw Error("illegal catch attempt")},delegateYield:function(e,n,r){return this.delegate={iterator:R(e),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=t),g}},e}function xp(t,e,n,r,i,o,a){try{var s=t[o](a),l=s.value}catch(t){return void n(t)}s.done?e(l):Promise.resolve(l).then(r,i)}function Sp(t){return function(){var e=this,n=arguments;return new Promise((function(r,i){var o=t.apply(e,n);function a(t){xp(o,r,i,a,s,"next",t)}function s(t){xp(o,r,i,a,s,"throw",t)}a(void 0)}))}}function Tp(t){return function(t){if(Array.isArray(t))return Cp(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return Cp(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Cp(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Cp(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Ip(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Lp(r.key),r)}}function kp(t,e,n){return e=Rp(e),function(t,e){if(e&&("object"===Ap(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,Pp()?Reflect.construct(e,n||[],Rp(t).constructor):e.apply(t,n))}function Pp(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(Pp=function(){return!!t})()}function Rp(t){return Rp=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Rp(t)}function Op(t,e){return Op=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Op(t,e)}function Mp(t,e,n){return(e=Lp(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Lp(t){var e=function(t,e){if("object"!=Ap(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=Ap(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Ap(e)?e:e+""}function Dp(t,e,n){!function(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}(t,e),e.set(t,n)}function Np(t,e){return t.get(Bp(t,e))}function Bp(t,e,n){if("function"==typeof t?t===e:t.has(e))return arguments.length<3?e:n;throw new TypeError("Private element is not present on this object")}var jp=new WeakMap,zp=new WeakMap,Fp=function(t){function e(t){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),Dp(n=kp(this,e,[t]),jp,!0),Dp(n,zp,[]),Mp(n,"buildAnimations",(function(){"function"==typeof n.pageModule.current.hasAttribute&&n.pageModule.current.hasAttribute("data-cancel-animations")||(n.bootstrap.viewport.on("resize",n.onResize),n.pretitle(),n.title(),n.paragraph(),n.imageScaleDown(),n.fade(),n.revealItems(),n.line())})),Mp(n,"onLoaded",(function(){Np(jp,n)&&(n.buildAnimations(),us.refresh(),function(t,e,n){t.set(Bp(t,e),n)}(jp,n,!1))})),Mp(n,"onResize",(function(){Np(zp,n).forEach((function(t){return null==t?void 0:t.revert()}))})),n.dependencies.add(Qf),n.dependencies.add(bf),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Op(t,e)}(e,t),n=e,r=[{key:"init",value:function(){this.viewport=this.bootstrap.get(Qf).viewport,this.pageModule=this.bootstrap.get(bf),this.bootstrap.loaderModule.on("animation",this.onLoaded)}},{key:"pretitle",value:function(){var t,e=this,n=null===(t=this.pageModule.current)||void 0===t?void 0:t.querySelectorAll('[data-animation="pretitle"]');null==n||n.forEach((function(t){t.classList.add("pretitle-animation");var n=new Fs(t,{type:"chars,lines",charsClass:"char"}),r=0;n.chars.forEach((function(t,e){t.style.transitionDelay="".concat(.015*e,"s"),r=.015*e})),r+=2.4;var i=ti.timeline({scrollTrigger:{trigger:t,start:"animationHero"in t.dataset?"top 100%":"top 92%"}});i.add((function(){return n.chars.forEach((function(t){return t.classList.add("active-animation")}))}),0),i.add((function(){return Np(zp,e).push(n)}),r),i.add((function(){return n.revert()}),r)}))}},{key:"title",value:function(){var t,e,n=this,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;r||(r=null===(t=this.pageModule.current)||void 0===t?void 0:t.querySelectorAll('[data-animation="title"]')),null===(e=r)||void 0===e||e.forEach((function(t){var e=0;t.classList.add("title-animation");var r=new Fs(t,{type:"lines",linesClass:"line"});r.lines.forEach((function(t,n){t.style.transitionDelay="".concat(.08*n,"s"),e=.08*n})),e+=2.4;var i=ti.timeline({scrollTrigger:{trigger:t,start:"animationHero"in t.dataset?"top 100%":"top 92%"}});i.add((function(){return r.lines.forEach((function(t){return t.classList.add("active-animation")}))}),0),i.add((function(){return Np(zp,n).push(r)}),e)}))}},{key:"paragraph",value:function(){var t,e=null===(t=this.pageModule.current)||void 0===t?void 0:t.querySelectorAll('[data-animation="paragraph"]');null==e||e.forEach((function(t){t.classList.add("paragraph-animation"),ti.timeline({scrollTrigger:{trigger:t,start:"top 92%"}}).add((function(){return t.classList.add("active-animation")}),0)}))}},{key:"imageScaleDown",value:function(){var t,e=null===(t=this.pageModule.current)||void 0===t?void 0:t.querySelectorAll('[data-animation="imageScaleDown"]');null==e||e.forEach((function(t){var e=t.querySelector("img");new ti.timeline({scrollTrigger:{trigger:t,start:"animationHero"in t.dataset?"top 100%":"top 92%"}}).fromTo(e,{scale:1.09},{scale:1,duration:4,ease:"immg.expoOut"},0)}))}},{key:"fade",value:function(){var t,e=null===(t=this.pageModule.current)||void 0===t?void 0:t.querySelectorAll('[data-animation="fade"]');null==e||e.forEach((function(t){var e=ti.timeline({scrollTrigger:{trigger:t,start:"animationHero"in t.dataset?"top 100%":"top 92%"}}),n=t.dataset.delay?parseFloat(t.dataset.delay):0;e.fromTo(t,{opacity:0},{opacity:1,duration:1.1,ease:"none",onComplete:function(){t.classList.add("animation-done")}},n)}))}},{key:"revealItems",value:function(){var t,e=null===(t=this.pageModule.current)||void 0===t?void 0:t.querySelectorAll('[data-animation="revealItems"]');null==e||e.forEach((function(t){t.classList.add("reveal-items-animation");var e=Tp(t.children);null==e||e.forEach((function(t,e){t.classList.add("child"),t.style.transitionDelay="".concat(.1*e,"s")})),ti.timeline({scrollTrigger:{trigger:t,start:"animationHero"in t.dataset?"top 100%":"top 92%"}}).add((function(){return e.forEach((function(t){return t.classList.add("active-animation")}))}),0)}))}},{key:"line",value:function(){var t,e=null===(t=this.pageModule.current)||void 0===t?void 0:t.querySelectorAll('[data-animation="line"]');null==e||e.forEach((function(t){ti.timeline({scrollTrigger:{trigger:t,start:"top 92%"}}).fromTo(t,{scaleX:0},{scaleX:1,duration:1,ease:"power2.out"},0)}))}},{key:"before",value:(s=Sp(Ep().mark((function t(){return Ep().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:this.bootstrap.viewport.off("resize",this.onResize),us.getAll().forEach((function(t){t.vars.type&&"permanent"==t.vars.type||t.kill(!1)})),us.clearMatchMedia();case 3:case"end":return t.stop()}}),t,this)}))),function(){return s.apply(this,arguments)})},{key:"run",value:(a=Sp(Ep().mark((function t(){return Ep().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:case"end":return t.stop()}}),t)}))),function(){return a.apply(this,arguments)})},{key:"after",value:(o=Sp(Ep().mark((function t(){return Ep().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!Np(jp,this)){t.next=2;break}return t.abrupt("return");case 2:this.buildAnimations(),us.refresh();case 4:case"end":return t.stop()}}),t,this)}))),function(){return o.apply(this,arguments)})}],r&&Ip(n.prototype,r),i&&Ip(n,i),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,i,o,a,s}(nf);function Up(t){return Up="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Up(t)}function qp(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Gp(r.key),r)}}function Gp(t){var e=function(t,e){if("object"!=Up(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=Up(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Up(e)?e:e+""}function Hp(t,e,n){return e=Qp(e),function(t,e){if(e&&("object"===Up(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,Vp()?Reflect.construct(e,n||[],Qp(t).constructor):e.apply(t,n))}function Vp(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(Vp=function(){return!!t})()}function Qp(t){return Qp=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Qp(t)}function Wp(t,e){return Wp=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Wp(t,e)}var Yp=function(t){function e(t,n){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),Hp(this,e,[t,n])}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Wp(t,e)}(e,t),n=e,(r=[{key:"viewport",get:function(){return this.bootstrap.get(Qf).viewport}},{key:"followLinkModule",get:function(){return this.bootstrap.get(wp)}},{key:"animationsModule",get:function(){return this.bootstrap.get(Fp)}},{key:"router",get:function(){return this.bootstrap.router}},{key:"imageLoader",get:function(){return this.bootstrap.imageLoader}},{key:"pageMod",get:function(){return this.bootstrap.get(bf)}},{key:"previousPage",get:function(){return this.bootstrap.get(bf).previous}},{key:"transitionModule",get:function(){return this.bootstrap.get(dp)}},{key:"smoother",get:function(){return this.bootstrap.smoother}},{key:"components",get:function(){return this.bootstrap.get(qf).components}}])&&qp(n.prototype,r),i&&qp(n,i),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,i}(sh);function Kp(t){return Kp="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Kp(t)}function Xp(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,$p(r.key),r)}}function $p(t){var e=function(t,e){if("object"!=Kp(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=Kp(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Kp(e)?e:e+""}function Zp(t,e,n){return e=tm(e),function(t,e){if(e&&("object"===Kp(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,Jp()?Reflect.construct(e,n||[],tm(t).constructor):e.apply(t,n))}function Jp(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(Jp=function(){return!!t})()}function tm(t){return tm=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},tm(t)}function em(t,e){return em=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},em(t,e)}var nm=function(t){function e(t,n){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),Zp(this,e,[t,n])}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&em(t,e)}(e,t),n=e,(r=[{key:"attach",value:function(){this.build()}},{key:"detach",value:function(){}},{key:"open",value:function(){return ti.timeline()}}])&&Xp(n.prototype,r),i&&Xp(n,i),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,i}(Yp);function rm(t){return rm="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},rm(t)}function im(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,cm(r.key),r)}}function om(t,e,n){return e=sm(e),function(t,e){if(e&&("object"===rm(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,am()?Reflect.construct(e,n||[],sm(t).constructor):e.apply(t,n))}function am(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(am=function(){return!!t})()}function sm(t){return sm=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},sm(t)}function lm(t,e){return lm=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},lm(t,e)}function um(t,e,n){return(e=cm(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function cm(t){var e=function(t,e){if("object"!=rm(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=rm(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==rm(e)?e:e+""}var dm=function(t){function e(t,n){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),um(r=om(this,e,[t,n]),"closeSearch",(function(t){var e;t.preventDefault(),t.stopPropagation(),null!==(e=r.bootstrap.router.previous)&&void 0!==e&&e._uri._parts.path?r.bootstrap.router.set(r.bootstrap.router.previous._uri._parts.path):r.bootstrap.router.set("/")})),um(r,"stickyNav",(function(){var t=ti.matchMedia();t.add("(min-width: 1025px)",(function(){var t,e;null===(t=r.st)||void 0===t||null===(e=t.kill)||void 0===e||e.call(t),r.st=ti.timeline({scrollTrigger:{trigger:r.element,scrub:0,start:"top 30px",endTrigger:r.footer?r.footer:"html",end:r.footer?"top bottom":"bottom top",pinSpacing:!1,toggleClass:{targets:[r.element],className:"search-page"},pin:!0}})})),t.add("(max-width: 1024px)",(function(){var t,e;null===(t=r.st)||void 0===t||null===(e=t.kill)||void 0===e||e.call(t),r.st=ti.timeline({scrollTrigger:{trigger:r.element,scrub:0,start:"bottom top",endTrigger:r.footer?r.footer:"html",end:r.footer?"top bottom":"bottom top",pinSpacing:!1,toggleClass:{targets:r.mobileIconsNav,className:"visible"}}})}))})),r.mobileIconsNav=document.querySelector('[data-component="MobileNavFilters"]'),r.footer=document.querySelector("#footer"),r.header=document.querySelector("#header"),r.searchPageHeader=r.header.querySelector(".page-search"),r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&lm(t,e)}(e,t),n=e,(r=[{key:"init",value:function(){this.header.classList.add("search-page"),setTimeout(this.stickyNav,1e3)}},{key:"attach",value:function(){var t,e,n;null===(t=this.searchPageHeader)||void 0===t||t.addEventListener("click",this.closeSearch),null===(e=this.st)||void 0===e||null===(e=e.scrollTrigger)||void 0===e||null===(n=e.refresh)||void 0===n||n.call(e)}},{key:"detach",value:function(){var t,e,n;this.header.classList.remove("search-page"),null===(t=this.searchPageHeader)||void 0===t||t.removeEventListener("click",this.closeSearch),null===(e=this.st)||void 0===e||null===(n=e.kill)||void 0===n||n.call(e)}}])&&im(n.prototype,r),i&&im(n,i),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,i}(Yp);class fm{constructor(t,e,n,r,i="div"){this.parent=t,this.object=e,this.property=n,this._disabled=!1,this._hidden=!1,this.initialValue=this.getValue(),this.domElement=document.createElement("div"),this.domElement.classList.add("controller"),this.domElement.classList.add(r),this.$name=document.createElement("div"),this.$name.classList.add("name"),fm.nextNameID=fm.nextNameID||0,this.$name.id="lil-gui-name-"+ ++fm.nextNameID,this.$widget=document.createElement(i),this.$widget.classList.add("widget"),this.$disable=this.$widget,this.domElement.appendChild(this.$name),this.domElement.appendChild(this.$widget),this.parent.children.push(this),this.parent.controllers.push(this),this.parent.$children.appendChild(this.domElement),this._listenCallback=this._listenCallback.bind(this),this.name(n)}name(t){return this._name=t,this.$name.innerHTML=t,this}onChange(t){return this._onChange=t,this}_callOnChange(){this.parent._callOnChange(this),void 0!==this._onChange&&this._onChange.call(this,this.getValue()),this._changed=!0}onFinishChange(t){return this._onFinishChange=t,this}_callOnFinishChange(){this._changed&&(this.parent._callOnFinishChange(this),void 0!==this._onFinishChange&&this._onFinishChange.call(this,this.getValue())),this._changed=!1}reset(){return this.setValue(this.initialValue),this._callOnFinishChange(),this}enable(t=!0){return this.disable(!t)}disable(t=!0){return t===this._disabled||(this._disabled=t,this.domElement.classList.toggle("disabled",t),this.$disable.toggleAttribute("disabled",t)),this}show(t=!0){return this._hidden=!t,this.domElement.style.display=this._hidden?"none":"",this}hide(){return this.show(!1)}options(t){const e=this.parent.add(this.object,this.property,t);return e.name(this._name),this.destroy(),e}min(t){return this}max(t){return this}step(t){return this}decimals(t){return this}listen(t=!0){return this._listening=t,void 0!==this._listenCallbackID&&(cancelAnimationFrame(this._listenCallbackID),this._listenCallbackID=void 0),this._listening&&this._listenCallback(),this}_listenCallback(){this._listenCallbackID=requestAnimationFrame(this._listenCallback);const t=this.save();t!==this._listenPrevValue&&this.updateDisplay(),this._listenPrevValue=t}getValue(){return this.object[this.property]}setValue(t){return this.object[this.property]=t,this._callOnChange(),this.updateDisplay(),this}updateDisplay(){return this}load(t){return this.setValue(t),this._callOnFinishChange(),this}save(){return this.getValue()}destroy(){this.listen(!1),this.parent.children.splice(this.parent.children.indexOf(this),1),this.parent.controllers.splice(this.parent.controllers.indexOf(this),1),this.parent.$children.removeChild(this.domElement)}}class hm extends fm{constructor(t,e,n){super(t,e,n,"boolean","label"),this.$input=document.createElement("input"),this.$input.setAttribute("type","checkbox"),this.$input.setAttribute("aria-labelledby",this.$name.id),this.$widget.appendChild(this.$input),this.$input.addEventListener("change",(()=>{this.setValue(this.$input.checked),this._callOnFinishChange()})),this.$disable=this.$input,this.updateDisplay()}updateDisplay(){return this.$input.checked=this.getValue(),this}}function pm(t){let e,n;return(e=t.match(/(#|0x)?([a-f0-9]{6})/i))?n=e[2]:(e=t.match(/rgb\(\s*(\d*)\s*,\s*(\d*)\s*,\s*(\d*)\s*\)/))?n=parseInt(e[1]).toString(16).padStart(2,0)+parseInt(e[2]).toString(16).padStart(2,0)+parseInt(e[3]).toString(16).padStart(2,0):(e=t.match(/^#?([a-f0-9])([a-f0-9])([a-f0-9])$/i))&&(n=e[1]+e[1]+e[2]+e[2]+e[3]+e[3]),!!n&&"#"+n}const mm={isPrimitive:!0,match:t=>"string"==typeof t,fromHexString:pm,toHexString:pm},gm={isPrimitive:!0,match:t=>"number"==typeof t,fromHexString:t=>parseInt(t.substring(1),16),toHexString:t=>"#"+t.toString(16).padStart(6,0)},vm={isPrimitive:!1,match:Array.isArray,fromHexString(t,e,n=1){const r=gm.fromHexString(t);e[0]=(r>>16&255)/255*n,e[1]=(r>>8&255)/255*n,e[2]=(255&r)/255*n},toHexString:([t,e,n],r=1)=>gm.toHexString(t*(r=255/r)<<16^e*r<<8^n*r)},ym={isPrimitive:!1,match:t=>Object(t)===t,fromHexString(t,e,n=1){const r=gm.fromHexString(t);e.r=(r>>16&255)/255*n,e.g=(r>>8&255)/255*n,e.b=(255&r)/255*n},toHexString:({r:t,g:e,b:n},r=1)=>gm.toHexString(t*(r=255/r)<<16^e*r<<8^n*r)},bm=[mm,gm,vm,ym];class _m extends fm{constructor(t,e,n,r){var i;super(t,e,n,"color"),this.$input=document.createElement("input"),this.$input.setAttribute("type","color"),this.$input.setAttribute("tabindex",-1),this.$input.setAttribute("aria-labelledby",this.$name.id),this.$text=document.createElement("input"),this.$text.setAttribute("type","text"),this.$text.setAttribute("spellcheck","false"),this.$text.setAttribute("aria-labelledby",this.$name.id),this.$display=document.createElement("div"),this.$display.classList.add("display"),this.$display.appendChild(this.$input),this.$widget.appendChild(this.$display),this.$widget.appendChild(this.$text),this._format=(i=this.initialValue,bm.find((t=>t.match(i)))),this._rgbScale=r,this._initialValueHexString=this.save(),this._textFocused=!1,this.$input.addEventListener("input",(()=>{this._setValueFromHexString(this.$input.value)})),this.$input.addEventListener("blur",(()=>{this._callOnFinishChange()})),this.$text.addEventListener("input",(()=>{const t=pm(this.$text.value);t&&this._setValueFromHexString(t)})),this.$text.addEventListener("focus",(()=>{this._textFocused=!0,this.$text.select()})),this.$text.addEventListener("blur",(()=>{this._textFocused=!1,this.updateDisplay(),this._callOnFinishChange()})),this.$disable=this.$text,this.updateDisplay()}reset(){return this._setValueFromHexString(this._initialValueHexString),this}_setValueFromHexString(t){if(this._format.isPrimitive){const e=this._format.fromHexString(t);this.setValue(e)}else this._format.fromHexString(t,this.getValue(),this._rgbScale),this._callOnChange(),this.updateDisplay()}save(){return this._format.toHexString(this.getValue(),this._rgbScale)}load(t){return this._setValueFromHexString(t),this._callOnFinishChange(),this}updateDisplay(){return this.$input.value=this._format.toHexString(this.getValue(),this._rgbScale),this._textFocused||(this.$text.value=this.$input.value.substring(1)),this.$display.style.backgroundColor=this.$input.value,this}}class wm extends fm{constructor(t,e,n){super(t,e,n,"function"),this.$button=document.createElement("button"),this.$button.appendChild(this.$name),this.$widget.appendChild(this.$button),this.$button.addEventListener("click",(t=>{t.preventDefault(),this.getValue().call(this.object)})),this.$button.addEventListener("touchstart",(()=>{}),{passive:!0}),this.$disable=this.$button}}class Am extends fm{constructor(t,e,n,r,i,o){super(t,e,n,"number"),this._initInput(),this.min(r),this.max(i);const a=void 0!==o;this.step(a?o:this._getImplicitStep(),a),this.updateDisplay()}decimals(t){return this._decimals=t,this.updateDisplay(),this}min(t){return this._min=t,this._onUpdateMinMax(),this}max(t){return this._max=t,this._onUpdateMinMax(),this}step(t,e=!0){return this._step=t,this._stepExplicit=e,this}updateDisplay(){const t=this.getValue();if(this._hasSlider){let e=(t-this._min)/(this._max-this._min);e=Math.max(0,Math.min(e,1)),this.$fill.style.width=100*e+"%"}return this._inputFocused||(this.$input.value=void 0===this._decimals?t:t.toFixed(this._decimals)),this}_initInput(){this.$input=document.createElement("input"),this.$input.setAttribute("type","number"),this.$input.setAttribute("step","any"),this.$input.setAttribute("aria-labelledby",this.$name.id),this.$widget.appendChild(this.$input),this.$disable=this.$input;const t=t=>{const e=parseFloat(this.$input.value);isNaN(e)||(this._snapClampSetValue(e+t),this.$input.value=this.getValue())};let e,n,r,i,o,a=!1;const s=t=>{if(a){const r=t.clientX-e,i=t.clientY-n;Math.abs(i)>5?(t.preventDefault(),this.$input.blur(),a=!1,this._setDraggingStyle(!0,"vertical")):Math.abs(r)>5&&l()}if(!a){const e=t.clientY-r;o-=e*this._step*this._arrowKeyMultiplier(t),i+o>this._max?o=this._max-i:i+o<this._min&&(o=this._min-i),this._snapClampSetValue(i+o)}r=t.clientY},l=()=>{this._setDraggingStyle(!1,"vertical"),this._callOnFinishChange(),window.removeEventListener("mousemove",s),window.removeEventListener("mouseup",l)};this.$input.addEventListener("input",(()=>{let t=parseFloat(this.$input.value);isNaN(t)||(this._stepExplicit&&(t=this._snap(t)),this.setValue(this._clamp(t)))})),this.$input.addEventListener("keydown",(e=>{"Enter"===e.code&&this.$input.blur(),"ArrowUp"===e.code&&(e.preventDefault(),t(this._step*this._arrowKeyMultiplier(e))),"ArrowDown"===e.code&&(e.preventDefault(),t(this._step*this._arrowKeyMultiplier(e)*-1))})),this.$input.addEventListener("wheel",(e=>{this._inputFocused&&(e.preventDefault(),t(this._step*this._normalizeMouseWheel(e)))}),{passive:!1}),this.$input.addEventListener("mousedown",(t=>{e=t.clientX,n=r=t.clientY,a=!0,i=this.getValue(),o=0,window.addEventListener("mousemove",s),window.addEventListener("mouseup",l)})),this.$input.addEventListener("focus",(()=>{this._inputFocused=!0})),this.$input.addEventListener("blur",(()=>{this._inputFocused=!1,this.updateDisplay(),this._callOnFinishChange()}))}_initSlider(){this._hasSlider=!0,this.$slider=document.createElement("div"),this.$slider.classList.add("slider"),this.$fill=document.createElement("div"),this.$fill.classList.add("fill"),this.$slider.appendChild(this.$fill),this.$widget.insertBefore(this.$slider,this.$input),this.domElement.classList.add("hasSlider");const t=t=>{const e=this.$slider.getBoundingClientRect();let n=((t,e,n,r,i)=>(t-e)/(n-e)*(i-r)+r)(t,e.left,e.right,this._min,this._max);this._snapClampSetValue(n)},e=e=>{t(e.clientX)},n=()=>{this._callOnFinishChange(),this._setDraggingStyle(!1),window.removeEventListener("mousemove",e),window.removeEventListener("mouseup",n)};let r,i,o=!1;const a=e=>{e.preventDefault(),this._setDraggingStyle(!0),t(e.touches[0].clientX),o=!1},s=e=>{if(o){const t=e.touches[0].clientX-r,n=e.touches[0].clientY-i;Math.abs(t)>Math.abs(n)?a(e):(window.removeEventListener("touchmove",s),window.removeEventListener("touchend",l))}else e.preventDefault(),t(e.touches[0].clientX)},l=()=>{this._callOnFinishChange(),this._setDraggingStyle(!1),window.removeEventListener("touchmove",s),window.removeEventListener("touchend",l)},u=this._callOnFinishChange.bind(this);let c;this.$slider.addEventListener("mousedown",(r=>{this._setDraggingStyle(!0),t(r.clientX),window.addEventListener("mousemove",e),window.addEventListener("mouseup",n)})),this.$slider.addEventListener("touchstart",(t=>{t.touches.length>1||(this._hasScrollBar?(r=t.touches[0].clientX,i=t.touches[0].clientY,o=!0):a(t),window.addEventListener("touchmove",s,{passive:!1}),window.addEventListener("touchend",l))}),{passive:!1}),this.$slider.addEventListener("wheel",(t=>{if(Math.abs(t.deltaX)<Math.abs(t.deltaY)&&this._hasScrollBar)return;t.preventDefault();const e=this._normalizeMouseWheel(t)*this._step;this._snapClampSetValue(this.getValue()+e),this.$input.value=this.getValue(),clearTimeout(c),c=setTimeout(u,400)}),{passive:!1})}_setDraggingStyle(t,e="horizontal"){this.$slider&&this.$slider.classList.toggle("active",t),document.body.classList.toggle("lil-gui-dragging",t),document.body.classList.toggle(`lil-gui-${e}`,t)}_getImplicitStep(){return this._hasMin&&this._hasMax?(this._max-this._min)/1e3:.1}_onUpdateMinMax(){!this._hasSlider&&this._hasMin&&this._hasMax&&(this._stepExplicit||this.step(this._getImplicitStep(),!1),this._initSlider(),this.updateDisplay())}_normalizeMouseWheel(t){let{deltaX:e,deltaY:n}=t;Math.floor(t.deltaY)!==t.deltaY&&t.wheelDelta&&(e=0,n=-t.wheelDelta/120,n*=this._stepExplicit?1:10);return e+-n}_arrowKeyMultiplier(t){let e=this._stepExplicit?1:10;return t.shiftKey?e*=10:t.altKey&&(e/=10),e}_snap(t){const e=Math.round(t/this._step)*this._step;return parseFloat(e.toPrecision(15))}_clamp(t){return t<this._min&&(t=this._min),t>this._max&&(t=this._max),t}_snapClampSetValue(t){this.setValue(this._clamp(this._snap(t)))}get _hasScrollBar(){const t=this.parent.root.$children;return t.scrollHeight>t.clientHeight}get _hasMin(){return void 0!==this._min}get _hasMax(){return void 0!==this._max}}class Em extends fm{constructor(t,e,n,r){super(t,e,n,"option"),this.$select=document.createElement("select"),this.$select.setAttribute("aria-labelledby",this.$name.id),this.$display=document.createElement("div"),this.$display.classList.add("display"),this._values=Array.isArray(r)?r:Object.values(r),this._names=Array.isArray(r)?r:Object.keys(r),this._names.forEach((t=>{const e=document.createElement("option");e.innerHTML=t,this.$select.appendChild(e)})),this.$select.addEventListener("change",(()=>{this.setValue(this._values[this.$select.selectedIndex]),this._callOnFinishChange()})),this.$select.addEventListener("focus",(()=>{this.$display.classList.add("focus")})),this.$select.addEventListener("blur",(()=>{this.$display.classList.remove("focus")})),this.$widget.appendChild(this.$select),this.$widget.appendChild(this.$display),this.$disable=this.$select,this.updateDisplay()}updateDisplay(){const t=this.getValue(),e=this._values.indexOf(t);return this.$select.selectedIndex=e,this.$display.innerHTML=-1===e?t:this._names[e],this}}class xm extends fm{constructor(t,e,n){super(t,e,n,"string"),this.$input=document.createElement("input"),this.$input.setAttribute("type","text"),this.$input.setAttribute("aria-labelledby",this.$name.id),this.$input.addEventListener("input",(()=>{this.setValue(this.$input.value)})),this.$input.addEventListener("keydown",(t=>{"Enter"===t.code&&this.$input.blur()})),this.$input.addEventListener("blur",(()=>{this._callOnFinishChange()})),this.$widget.appendChild(this.$input),this.$disable=this.$input,this.updateDisplay()}updateDisplay(){return this.$input.value=this.getValue(),this}}let Sm=!1;class Tm{constructor({parent:t,autoPlace:e=void 0===t,container:n,width:r,title:i="Controls",injectStyles:o=!0,touchStyles:a=!0}={}){if(this.parent=t,this.root=t?t.root:this,this.children=[],this.controllers=[],this.folders=[],this._closed=!1,this._hidden=!1,this.domElement=document.createElement("div"),this.domElement.classList.add("lil-gui"),this.$title=document.createElement("div"),this.$title.classList.add("title"),this.$title.setAttribute("role","button"),this.$title.setAttribute("aria-expanded",!0),this.$title.setAttribute("tabindex",0),this.$title.addEventListener("click",(()=>this.openAnimated(this._closed))),this.$title.addEventListener("keydown",(t=>{"Enter"!==t.code&&"Space"!==t.code||(t.preventDefault(),this.$title.click())})),this.$title.addEventListener("touchstart",(()=>{}),{passive:!0}),this.$children=document.createElement("div"),this.$children.classList.add("children"),this.domElement.appendChild(this.$title),this.domElement.appendChild(this.$children),this.title(i),a&&this.domElement.classList.add("allow-touch-styles"),this.parent)return this.parent.children.push(this),this.parent.folders.push(this),void this.parent.$children.appendChild(this.domElement);this.domElement.classList.add("root"),!Sm&&o&&(!function(t){const e=document.createElement("style");e.innerHTML=t;const n=document.querySelector("head link[rel=stylesheet], head style");n?document.head.insertBefore(e,n):document.head.appendChild(e)}('.lil-gui {\n  font-family: var(--font-family);\n  font-size: var(--font-size);\n  line-height: 1;\n  font-weight: normal;\n  font-style: normal;\n  text-align: left;\n  background-color: var(--background-color);\n  color: var(--text-color);\n  user-select: none;\n  -webkit-user-select: none;\n  touch-action: manipulation;\n  --background-color: #1f1f1f;\n  --text-color: #ebebeb;\n  --title-background-color: #111111;\n  --title-text-color: #ebebeb;\n  --widget-color: #424242;\n  --hover-color: #4f4f4f;\n  --focus-color: #595959;\n  --number-color: #2cc9ff;\n  --string-color: #a2db3c;\n  --font-size: 11px;\n  --input-font-size: 11px;\n  --font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Arial, sans-serif;\n  --font-family-mono: Menlo, Monaco, Consolas, "Droid Sans Mono", monospace;\n  --padding: 4px;\n  --spacing: 4px;\n  --widget-height: 20px;\n  --name-width: 45%;\n  --slider-knob-width: 2px;\n  --slider-input-width: 27%;\n  --color-input-width: 27%;\n  --slider-input-min-width: 45px;\n  --color-input-min-width: 45px;\n  --folder-indent: 7px;\n  --widget-padding: 0 0 0 3px;\n  --widget-border-radius: 2px;\n  --checkbox-size: calc(0.75 * var(--widget-height));\n  --scrollbar-width: 5px;\n}\n.lil-gui, .lil-gui * {\n  box-sizing: border-box;\n  margin: 0;\n  padding: 0;\n}\n.lil-gui.root {\n  width: var(--width, 245px);\n  display: flex;\n  flex-direction: column;\n}\n.lil-gui.root > .title {\n  background: var(--title-background-color);\n  color: var(--title-text-color);\n}\n.lil-gui.root > .children {\n  overflow-x: hidden;\n  overflow-y: auto;\n}\n.lil-gui.root > .children::-webkit-scrollbar {\n  width: var(--scrollbar-width);\n  height: var(--scrollbar-width);\n  background: var(--background-color);\n}\n.lil-gui.root > .children::-webkit-scrollbar-thumb {\n  border-radius: var(--scrollbar-width);\n  background: var(--focus-color);\n}\n@media (pointer: coarse) {\n  .lil-gui.allow-touch-styles {\n    --widget-height: 28px;\n    --padding: 6px;\n    --spacing: 6px;\n    --font-size: 13px;\n    --input-font-size: 16px;\n    --folder-indent: 10px;\n    --scrollbar-width: 7px;\n    --slider-input-min-width: 50px;\n    --color-input-min-width: 65px;\n  }\n}\n.lil-gui.force-touch-styles {\n  --widget-height: 28px;\n  --padding: 6px;\n  --spacing: 6px;\n  --font-size: 13px;\n  --input-font-size: 16px;\n  --folder-indent: 10px;\n  --scrollbar-width: 7px;\n  --slider-input-min-width: 50px;\n  --color-input-min-width: 65px;\n}\n.lil-gui.autoPlace {\n  max-height: 100%;\n  position: fixed;\n  top: 0;\n  right: 15px;\n  z-index: 1001;\n}\n\n.lil-gui .controller {\n  display: flex;\n  align-items: center;\n  padding: 0 var(--padding);\n  margin: var(--spacing) 0;\n}\n.lil-gui .controller.disabled {\n  opacity: 0.5;\n}\n.lil-gui .controller.disabled, .lil-gui .controller.disabled * {\n  pointer-events: none !important;\n}\n.lil-gui .controller > .name {\n  min-width: var(--name-width);\n  flex-shrink: 0;\n  white-space: pre;\n  padding-right: var(--spacing);\n  line-height: var(--widget-height);\n}\n.lil-gui .controller .widget {\n  position: relative;\n  display: flex;\n  align-items: center;\n  width: 100%;\n  min-height: var(--widget-height);\n}\n.lil-gui .controller.string input {\n  color: var(--string-color);\n}\n.lil-gui .controller.boolean .widget {\n  cursor: pointer;\n}\n.lil-gui .controller.color .display {\n  width: 100%;\n  height: var(--widget-height);\n  border-radius: var(--widget-border-radius);\n  position: relative;\n}\n@media (hover: hover) {\n  .lil-gui .controller.color .display:hover:before {\n    content: " ";\n    display: block;\n    position: absolute;\n    border-radius: var(--widget-border-radius);\n    border: 1px solid #fff9;\n    top: 0;\n    right: 0;\n    bottom: 0;\n    left: 0;\n  }\n}\n.lil-gui .controller.color input[type=color] {\n  opacity: 0;\n  width: 100%;\n  height: 100%;\n  cursor: pointer;\n}\n.lil-gui .controller.color input[type=text] {\n  margin-left: var(--spacing);\n  font-family: var(--font-family-mono);\n  min-width: var(--color-input-min-width);\n  width: var(--color-input-width);\n  flex-shrink: 0;\n}\n.lil-gui .controller.option select {\n  opacity: 0;\n  position: absolute;\n  width: 100%;\n  max-width: 100%;\n}\n.lil-gui .controller.option .display {\n  position: relative;\n  pointer-events: none;\n  border-radius: var(--widget-border-radius);\n  height: var(--widget-height);\n  line-height: var(--widget-height);\n  max-width: 100%;\n  overflow: hidden;\n  word-break: break-all;\n  padding-left: 0.55em;\n  padding-right: 1.75em;\n  background: var(--widget-color);\n}\n@media (hover: hover) {\n  .lil-gui .controller.option .display.focus {\n    background: var(--focus-color);\n  }\n}\n.lil-gui .controller.option .display.active {\n  background: var(--focus-color);\n}\n.lil-gui .controller.option .display:after {\n  font-family: "lil-gui";\n  content: "";\n  position: absolute;\n  top: 0;\n  right: 0;\n  bottom: 0;\n  padding-right: 0.375em;\n}\n.lil-gui .controller.option .widget,\n.lil-gui .controller.option select {\n  cursor: pointer;\n}\n@media (hover: hover) {\n  .lil-gui .controller.option .widget:hover .display {\n    background: var(--hover-color);\n  }\n}\n.lil-gui .controller.number input {\n  color: var(--number-color);\n}\n.lil-gui .controller.number.hasSlider input {\n  margin-left: var(--spacing);\n  width: var(--slider-input-width);\n  min-width: var(--slider-input-min-width);\n  flex-shrink: 0;\n}\n.lil-gui .controller.number .slider {\n  width: 100%;\n  height: var(--widget-height);\n  background-color: var(--widget-color);\n  border-radius: var(--widget-border-radius);\n  padding-right: var(--slider-knob-width);\n  overflow: hidden;\n  cursor: ew-resize;\n  touch-action: pan-y;\n}\n@media (hover: hover) {\n  .lil-gui .controller.number .slider:hover {\n    background-color: var(--hover-color);\n  }\n}\n.lil-gui .controller.number .slider.active {\n  background-color: var(--focus-color);\n}\n.lil-gui .controller.number .slider.active .fill {\n  opacity: 0.95;\n}\n.lil-gui .controller.number .fill {\n  height: 100%;\n  border-right: var(--slider-knob-width) solid var(--number-color);\n  box-sizing: content-box;\n}\n\n.lil-gui-dragging .lil-gui {\n  --hover-color: var(--widget-color);\n}\n.lil-gui-dragging * {\n  cursor: ew-resize !important;\n}\n\n.lil-gui-dragging.lil-gui-vertical * {\n  cursor: ns-resize !important;\n}\n\n.lil-gui .title {\n  --title-height: calc(var(--widget-height) + var(--spacing) * 1.25);\n  height: var(--title-height);\n  line-height: calc(var(--title-height) - 4px);\n  font-weight: 600;\n  padding: 0 var(--padding);\n  -webkit-tap-highlight-color: transparent;\n  cursor: pointer;\n  outline: none;\n  text-decoration-skip: objects;\n}\n.lil-gui .title:before {\n  font-family: "lil-gui";\n  content: "";\n  padding-right: 2px;\n  display: inline-block;\n}\n.lil-gui .title:active {\n  background: var(--title-background-color);\n  opacity: 0.75;\n}\n@media (hover: hover) {\n  body:not(.lil-gui-dragging) .lil-gui .title:hover {\n    background: var(--title-background-color);\n    opacity: 0.85;\n  }\n  .lil-gui .title:focus {\n    text-decoration: underline var(--focus-color);\n  }\n}\n.lil-gui.root > .title:focus {\n  text-decoration: none !important;\n}\n.lil-gui.closed > .title:before {\n  content: "";\n}\n.lil-gui.closed > .children {\n  transform: translateY(-7px);\n  opacity: 0;\n}\n.lil-gui.closed:not(.transition) > .children {\n  display: none;\n}\n.lil-gui.transition > .children {\n  transition-duration: 300ms;\n  transition-property: height, opacity, transform;\n  transition-timing-function: cubic-bezier(0.2, 0.6, 0.35, 1);\n  overflow: hidden;\n  pointer-events: none;\n}\n.lil-gui .children:empty:before {\n  content: "Empty";\n  padding: 0 var(--padding);\n  margin: var(--spacing) 0;\n  display: block;\n  height: var(--widget-height);\n  font-style: italic;\n  line-height: var(--widget-height);\n  opacity: 0.5;\n}\n.lil-gui.root > .children > .lil-gui > .title {\n  border: 0 solid var(--widget-color);\n  border-width: 1px 0;\n  transition: border-color 300ms;\n}\n.lil-gui.root > .children > .lil-gui.closed > .title {\n  border-bottom-color: transparent;\n}\n.lil-gui + .controller {\n  border-top: 1px solid var(--widget-color);\n  margin-top: 0;\n  padding-top: var(--spacing);\n}\n.lil-gui .lil-gui .lil-gui > .title {\n  border: none;\n}\n.lil-gui .lil-gui .lil-gui > .children {\n  border: none;\n  margin-left: var(--folder-indent);\n  border-left: 2px solid var(--widget-color);\n}\n.lil-gui .lil-gui .controller {\n  border: none;\n}\n\n.lil-gui input {\n  -webkit-tap-highlight-color: transparent;\n  border: 0;\n  outline: none;\n  font-family: var(--font-family);\n  font-size: var(--input-font-size);\n  border-radius: var(--widget-border-radius);\n  height: var(--widget-height);\n  background: var(--widget-color);\n  color: var(--text-color);\n  width: 100%;\n}\n@media (hover: hover) {\n  .lil-gui input:hover {\n    background: var(--hover-color);\n  }\n  .lil-gui input:active {\n    background: var(--focus-color);\n  }\n}\n.lil-gui input:disabled {\n  opacity: 1;\n}\n.lil-gui input[type=text],\n.lil-gui input[type=number] {\n  padding: var(--widget-padding);\n}\n.lil-gui input[type=text]:focus,\n.lil-gui input[type=number]:focus {\n  background: var(--focus-color);\n}\n.lil-gui input::-webkit-outer-spin-button,\n.lil-gui input::-webkit-inner-spin-button {\n  -webkit-appearance: none;\n  margin: 0;\n}\n.lil-gui input[type=number] {\n  -moz-appearance: textfield;\n}\n.lil-gui input[type=checkbox] {\n  appearance: none;\n  -webkit-appearance: none;\n  height: var(--checkbox-size);\n  width: var(--checkbox-size);\n  border-radius: var(--widget-border-radius);\n  text-align: center;\n  cursor: pointer;\n}\n.lil-gui input[type=checkbox]:checked:before {\n  font-family: "lil-gui";\n  content: "";\n  font-size: var(--checkbox-size);\n  line-height: var(--checkbox-size);\n}\n@media (hover: hover) {\n  .lil-gui input[type=checkbox]:focus {\n    box-shadow: inset 0 0 0 1px var(--focus-color);\n  }\n}\n.lil-gui button {\n  -webkit-tap-highlight-color: transparent;\n  outline: none;\n  cursor: pointer;\n  font-family: var(--font-family);\n  font-size: var(--font-size);\n  color: var(--text-color);\n  width: 100%;\n  height: var(--widget-height);\n  text-transform: none;\n  background: var(--widget-color);\n  border-radius: var(--widget-border-radius);\n  border: 1px solid var(--widget-color);\n  text-align: center;\n  line-height: calc(var(--widget-height) - 4px);\n}\n@media (hover: hover) {\n  .lil-gui button:hover {\n    background: var(--hover-color);\n    border-color: var(--hover-color);\n  }\n  .lil-gui button:focus {\n    border-color: var(--focus-color);\n  }\n}\n.lil-gui button:active {\n  background: var(--focus-color);\n}\n\n@font-face {\n  font-family: "lil-gui";\n  src: url("data:application/font-woff;charset=utf-8;base64,d09GRgABAAAAAAUsAAsAAAAACJwAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAABHU1VCAAABCAAAAH4AAADAImwmYE9TLzIAAAGIAAAAPwAAAGBKqH5SY21hcAAAAcgAAAD0AAACrukyyJBnbHlmAAACvAAAAF8AAACEIZpWH2hlYWQAAAMcAAAAJwAAADZfcj2zaGhlYQAAA0QAAAAYAAAAJAC5AHhobXR4AAADXAAAABAAAABMAZAAAGxvY2EAAANsAAAAFAAAACgCEgIybWF4cAAAA4AAAAAeAAAAIAEfABJuYW1lAAADoAAAASIAAAIK9SUU/XBvc3QAAATEAAAAZgAAAJCTcMc2eJxVjbEOgjAURU+hFRBK1dGRL+ALnAiToyMLEzFpnPz/eAshwSa97517c/MwwJmeB9kwPl+0cf5+uGPZXsqPu4nvZabcSZldZ6kfyWnomFY/eScKqZNWupKJO6kXN3K9uCVoL7iInPr1X5baXs3tjuMqCtzEuagm/AAlzQgPAAB4nGNgYRBlnMDAysDAYM/gBiT5oLQBAwuDJAMDEwMrMwNWEJDmmsJwgCFeXZghBcjlZMgFCzOiKOIFAB71Bb8AeJy1kjFuwkAQRZ+DwRAwBtNQRUGKQ8OdKCAWUhAgKLhIuAsVSpWz5Bbkj3dEgYiUIszqWdpZe+Z7/wB1oCYmIoboiwiLT2WjKl/jscrHfGg/pKdMkyklC5Zs2LEfHYpjcRoPzme9MWWmk3dWbK9ObkWkikOetJ554fWyoEsmdSlt+uR0pCJR34b6t/TVg1SY3sYvdf8vuiKrpyaDXDISiegp17p7579Gp3p++y7HPAiY9pmTibljrr85qSidtlg4+l25GLCaS8e6rRxNBmsnERunKbaOObRz7N72ju5vdAjYpBXHgJylOAVsMseDAPEP8LYoUHicY2BiAAEfhiAGJgZWBgZ7RnFRdnVJELCQlBSRlATJMoLV2DK4glSYs6ubq5vbKrJLSbGrgEmovDuDJVhe3VzcXFwNLCOILB/C4IuQ1xTn5FPilBTj5FPmBAB4WwoqAHicY2BkYGAA4sk1sR/j+W2+MnAzpDBgAyEMQUCSg4EJxAEAwUgFHgB4nGNgZGBgSGFggJMhDIwMqEAYAByHATJ4nGNgAIIUNEwmAABl3AGReJxjYAACIQYlBiMGJ3wQAEcQBEV4nGNgZGBgEGZgY2BiAAEQyQWEDAz/wXwGAAsPATIAAHicXdBNSsNAHAXwl35iA0UQXYnMShfS9GPZA7T7LgIu03SSpkwzYTIt1BN4Ak/gKTyAeCxfw39jZkjymzcvAwmAW/wgwHUEGDb36+jQQ3GXGot79L24jxCP4gHzF/EIr4jEIe7wxhOC3g2TMYy4Q7+Lu/SHuEd/ivt4wJd4wPxbPEKMX3GI5+DJFGaSn4qNzk8mcbKSR6xdXdhSzaOZJGtdapd4vVPbi6rP+cL7TGXOHtXKll4bY1Xl7EGnPtp7Xy2n00zyKLVHfkHBa4IcJ2oD3cgggWvt/V/FbDrUlEUJhTn/0azVWbNTNr0Ens8de1tceK9xZmfB1CPjOmPH4kitmvOubcNpmVTN3oFJyjzCvnmrwhJTzqzVj9jiSX911FjeAAB4nG3HMRKCMBBA0f0giiKi4DU8k0V2GWbIZDOh4PoWWvq6J5V8If9NVNQcaDhyouXMhY4rPTcG7jwYmXhKq8Wz+p762aNaeYXom2n3m2dLTVgsrCgFJ7OTmIkYbwIbC6vIB7WmFfAAAA==") format("woff");\n}'),Sm=!0),n?n.appendChild(this.domElement):e&&(this.domElement.classList.add("autoPlace"),document.body.appendChild(this.domElement)),r&&this.domElement.style.setProperty("--width",r+"px"),this.domElement.addEventListener("keydown",(t=>t.stopPropagation())),this.domElement.addEventListener("keyup",(t=>t.stopPropagation()))}add(t,e,n,r,i){if(Object(n)===n)return new Em(this,t,e,n);const o=t[e];switch(typeof o){case"number":return new Am(this,t,e,n,r,i);case"boolean":return new hm(this,t,e);case"string":return new xm(this,t,e);case"function":return new wm(this,t,e)}console.error("gui.add failed\n\tproperty:",e,"\n\tobject:",t,"\n\tvalue:",o)}addColor(t,e,n=1){return new _m(this,t,e,n)}addFolder(t){return new Tm({parent:this,title:t})}load(t,e=!0){return t.controllers&&this.controllers.forEach((e=>{e instanceof wm||e._name in t.controllers&&e.load(t.controllers[e._name])})),e&&t.folders&&this.folders.forEach((e=>{e._title in t.folders&&e.load(t.folders[e._title])})),this}save(t=!0){const e={controllers:{},folders:{}};return this.controllers.forEach((t=>{if(!(t instanceof wm)){if(t._name in e.controllers)throw new Error(`Cannot save GUI with duplicate property "${t._name}"`);e.controllers[t._name]=t.save()}})),t&&this.folders.forEach((t=>{if(t._title in e.folders)throw new Error(`Cannot save GUI with duplicate folder "${t._title}"`);e.folders[t._title]=t.save()})),e}open(t=!0){return this._closed=!t,this.$title.setAttribute("aria-expanded",!this._closed),this.domElement.classList.toggle("closed",this._closed),this}close(){return this.open(!1)}show(t=!0){return this._hidden=!t,this.domElement.style.display=this._hidden?"none":"",this}hide(){return this.show(!1)}openAnimated(t=!0){return this._closed=!t,this.$title.setAttribute("aria-expanded",!this._closed),requestAnimationFrame((()=>{const e=this.$children.clientHeight;this.$children.style.height=e+"px",this.domElement.classList.add("transition");const n=t=>{t.target===this.$children&&(this.$children.style.height="",this.domElement.classList.remove("transition"),this.$children.removeEventListener("transitionend",n))};this.$children.addEventListener("transitionend",n);const r=t?this.$children.scrollHeight:0;this.domElement.classList.toggle("closed",!t),requestAnimationFrame((()=>{this.$children.style.height=r+"px"}))})),this}title(t){return this._title=t,this.$title.innerHTML=t,this}reset(t=!0){return(t?this.controllersRecursive():this.controllers).forEach((t=>t.reset())),this}onChange(t){return this._onChange=t,this}_callOnChange(t){this.parent&&this.parent._callOnChange(t),void 0!==this._onChange&&this._onChange.call(this,{object:t.object,property:t.property,value:t.getValue(),controller:t})}onFinishChange(t){return this._onFinishChange=t,this}_callOnFinishChange(t){this.parent&&this.parent._callOnFinishChange(t),void 0!==this._onFinishChange&&this._onFinishChange.call(this,{object:t.object,property:t.property,value:t.getValue(),controller:t})}destroy(){this.parent&&(this.parent.children.splice(this.parent.children.indexOf(this),1),this.parent.folders.splice(this.parent.folders.indexOf(this),1)),this.domElement.parentElement&&this.domElement.parentElement.removeChild(this.domElement),Array.from(this.children).forEach((t=>t.destroy()))}controllersRecursive(){let t=Array.from(this.controllers);return this.folders.forEach((e=>{t=t.concat(e.controllersRecursive())})),t}foldersRecursive(){let t=Array.from(this.folders);return this.folders.forEach((e=>{t=t.concat(e.foldersRecursive())})),t}}const Cm=Tm,Im="149",km=0,Pm=1,Rm=2,Om=0,Mm=1,Lm=2,Dm=3,Nm=0,Bm=1,jm=2,zm=1,Fm=2,Um=3,qm=0,Gm=1,Hm=2,Vm=0,Qm=1,Wm=2,Ym=3,Km=4,Xm=5,$m=100,Zm=101,Jm=102,tg=103,eg=104,ng=200,rg=201,ig=202,og=203,ag=204,sg=205,lg=206,ug=207,cg=208,dg=209,fg=210,hg=0,pg=1,mg=2,gg=3,vg=4,yg=5,bg=6,_g=7,wg=0,Ag=1,Eg=2,xg=0,Sg=1,Tg=2,Cg=3,Ig=4,kg=5,Pg=301,Rg=302,Og=303,Mg=304,Lg=306,Dg=1e3,Ng=1001,Bg=1002,jg=1003,zg=1004,Fg=1005,Ug=1006,qg=1007,Gg=1008,Hg=1009,Vg=1010,Qg=1011,Wg=1012,Yg=1013,Kg=1014,Xg=1015,$g=1016,Zg=1017,Jg=1018,tv=1020,ev=1021,nv=1023,rv=1024,iv=1025,ov=1026,av=1027,sv=1028,lv=1029,uv=1030,cv=1031,dv=1033,fv=33776,hv=33777,pv=33778,mv=33779,gv=35840,vv=35841,yv=35842,bv=35843,_v=36196,wv=37492,Av=37496,Ev=37808,xv=37809,Sv=37810,Tv=37811,Cv=37812,Iv=37813,kv=37814,Pv=37815,Rv=37816,Ov=37817,Mv=37818,Lv=37819,Dv=37820,Nv=37821,Bv=36492,jv=36283,zv=36284,Fv=36285,Uv=36286,qv=2300,Gv=2301,Hv=2302,Vv=2400,Qv=2401,Wv=2402,Yv=2500,Kv=3e3,Xv=3001,$v=3201,Zv=0,Jv=1,ty="srgb",ey="srgb-linear",ny=7680,ry=35044,iy=35048,oy="300 es",ay=1035;class sy{addEventListener(t,e){void 0===this._listeners&&(this._listeners={});const n=this._listeners;void 0===n[t]&&(n[t]=[]),-1===n[t].indexOf(e)&&n[t].push(e)}hasEventListener(t,e){if(void 0===this._listeners)return!1;const n=this._listeners;return void 0!==n[t]&&-1!==n[t].indexOf(e)}removeEventListener(t,e){if(void 0===this._listeners)return;const n=this._listeners[t];if(void 0!==n){const t=n.indexOf(e);-1!==t&&n.splice(t,1)}}dispatchEvent(t){if(void 0===this._listeners)return;const e=this._listeners[t.type];if(void 0!==e){t.target=this;const n=e.slice(0);for(let e=0,r=n.length;e<r;e++)n[e].call(this,t);t.target=null}}}const ly=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];let uy=1234567;const cy=Math.PI/180,dy=180/Math.PI;function fy(){const t=4294967295*Math.random()|0,e=4294967295*Math.random()|0,n=4294967295*Math.random()|0,r=4294967295*Math.random()|0;return(ly[255&t]+ly[t>>8&255]+ly[t>>16&255]+ly[t>>24&255]+"-"+ly[255&e]+ly[e>>8&255]+"-"+ly[e>>16&15|64]+ly[e>>24&255]+"-"+ly[63&n|128]+ly[n>>8&255]+"-"+ly[n>>16&255]+ly[n>>24&255]+ly[255&r]+ly[r>>8&255]+ly[r>>16&255]+ly[r>>24&255]).toLowerCase()}function hy(t,e,n){return Math.max(e,Math.min(n,t))}function py(t,e){return(t%e+e)%e}function my(t,e,n){return(1-n)*t+n*e}function gy(t){return!(t&t-1)&&0!==t}function vy(t){return Math.pow(2,Math.ceil(Math.log(t)/Math.LN2))}function yy(t){return Math.pow(2,Math.floor(Math.log(t)/Math.LN2))}function by(t,e){switch(e.constructor){case Float32Array:return t;case Uint16Array:return t/65535;case Uint8Array:return t/255;case Int16Array:return Math.max(t/32767,-1);case Int8Array:return Math.max(t/127,-1);default:throw new Error("Invalid component type.")}}function _y(t,e){switch(e.constructor){case Float32Array:return t;case Uint16Array:return Math.round(65535*t);case Uint8Array:return Math.round(255*t);case Int16Array:return Math.round(32767*t);case Int8Array:return Math.round(127*t);default:throw new Error("Invalid component type.")}}var wy=Object.freeze({__proto__:null,DEG2RAD:cy,RAD2DEG:dy,ceilPowerOfTwo:vy,clamp:hy,damp:function(t,e,n,r){return my(t,e,1-Math.exp(-n*r))},degToRad:function(t){return t*cy},denormalize:by,euclideanModulo:py,floorPowerOfTwo:yy,generateUUID:fy,inverseLerp:function(t,e,n){return t!==e?(n-t)/(e-t):0},isPowerOfTwo:gy,lerp:my,mapLinear:function(t,e,n,r,i){return r+(t-e)*(i-r)/(n-e)},normalize:_y,pingpong:function(t,e=1){return e-Math.abs(py(t,2*e)-e)},radToDeg:function(t){return t*dy},randFloat:function(t,e){return t+Math.random()*(e-t)},randFloatSpread:function(t){return t*(.5-Math.random())},randInt:function(t,e){return t+Math.floor(Math.random()*(e-t+1))},seededRandom:function(t){void 0!==t&&(uy=t);let e=uy+=1831565813;return e=Math.imul(e^e>>>15,1|e),e^=e+Math.imul(e^e>>>7,61|e),((e^e>>>14)>>>0)/4294967296},setQuaternionFromProperEuler:function(t,e,n,r,i){const o=Math.cos,a=Math.sin,s=o(n/2),l=a(n/2),u=o((e+r)/2),c=a((e+r)/2),d=o((e-r)/2),f=a((e-r)/2),h=o((r-e)/2),p=a((r-e)/2);switch(i){case"XYX":t.set(s*c,l*d,l*f,s*u);break;case"YZY":t.set(l*f,s*c,l*d,s*u);break;case"ZXZ":t.set(l*d,l*f,s*c,s*u);break;case"XZX":t.set(s*c,l*p,l*h,s*u);break;case"YXY":t.set(l*h,s*c,l*p,s*u);break;case"ZYZ":t.set(l*p,l*h,s*c,s*u);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+i)}},smootherstep:function(t,e,n){return t<=e?0:t>=n?1:(t=(t-e)/(n-e))*t*t*(t*(6*t-15)+10)},smoothstep:function(t,e,n){return t<=e?0:t>=n?1:(t=(t-e)/(n-e))*t*(3-2*t)}});class Ay{constructor(t=0,e=0){Ay.prototype.isVector2=!0,this.x=t,this.y=e}get width(){return this.x}set width(t){this.x=t}get height(){return this.y}set height(t){this.y=t}set(t,e){return this.x=t,this.y=e,this}setScalar(t){return this.x=t,this.y=t,this}setX(t){return this.x=t,this}setY(t){return this.y=t,this}setComponent(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;default:throw new Error("index is out of range: "+t)}return this}getComponent(t){switch(t){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+t)}}clone(){return new this.constructor(this.x,this.y)}copy(t){return this.x=t.x,this.y=t.y,this}add(t){return this.x+=t.x,this.y+=t.y,this}addScalar(t){return this.x+=t,this.y+=t,this}addVectors(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this}addScaledVector(t,e){return this.x+=t.x*e,this.y+=t.y*e,this}sub(t){return this.x-=t.x,this.y-=t.y,this}subScalar(t){return this.x-=t,this.y-=t,this}subVectors(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this}multiply(t){return this.x*=t.x,this.y*=t.y,this}multiplyScalar(t){return this.x*=t,this.y*=t,this}divide(t){return this.x/=t.x,this.y/=t.y,this}divideScalar(t){return this.multiplyScalar(1/t)}applyMatrix3(t){const e=this.x,n=this.y,r=t.elements;return this.x=r[0]*e+r[3]*n+r[6],this.y=r[1]*e+r[4]*n+r[7],this}min(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this}max(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this}clamp(t,e){return this.x=Math.max(t.x,Math.min(e.x,this.x)),this.y=Math.max(t.y,Math.min(e.y,this.y)),this}clampScalar(t,e){return this.x=Math.max(t,Math.min(e,this.x)),this.y=Math.max(t,Math.min(e,this.y)),this}clampLength(t,e){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(t,Math.min(e,n)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(t){return this.x*t.x+this.y*t.y}cross(t){return this.x*t.y-this.y*t.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}distanceTo(t){return Math.sqrt(this.distanceToSquared(t))}distanceToSquared(t){const e=this.x-t.x,n=this.y-t.y;return e*e+n*n}manhattanDistanceTo(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)}setLength(t){return this.normalize().multiplyScalar(t)}lerp(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this}lerpVectors(t,e,n){return this.x=t.x+(e.x-t.x)*n,this.y=t.y+(e.y-t.y)*n,this}equals(t){return t.x===this.x&&t.y===this.y}fromArray(t,e=0){return this.x=t[e],this.y=t[e+1],this}toArray(t=[],e=0){return t[e]=this.x,t[e+1]=this.y,t}fromBufferAttribute(t,e){return this.x=t.getX(e),this.y=t.getY(e),this}rotateAround(t,e){const n=Math.cos(e),r=Math.sin(e),i=this.x-t.x,o=this.y-t.y;return this.x=i*n-o*r+t.x,this.y=i*r+o*n+t.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class Ey{constructor(){Ey.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1]}set(t,e,n,r,i,o,a,s,l){const u=this.elements;return u[0]=t,u[1]=r,u[2]=a,u[3]=e,u[4]=i,u[5]=s,u[6]=n,u[7]=o,u[8]=l,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(t){const e=this.elements,n=t.elements;return e[0]=n[0],e[1]=n[1],e[2]=n[2],e[3]=n[3],e[4]=n[4],e[5]=n[5],e[6]=n[6],e[7]=n[7],e[8]=n[8],this}extractBasis(t,e,n){return t.setFromMatrix3Column(this,0),e.setFromMatrix3Column(this,1),n.setFromMatrix3Column(this,2),this}setFromMatrix4(t){const e=t.elements;return this.set(e[0],e[4],e[8],e[1],e[5],e[9],e[2],e[6],e[10]),this}multiply(t){return this.multiplyMatrices(this,t)}premultiply(t){return this.multiplyMatrices(t,this)}multiplyMatrices(t,e){const n=t.elements,r=e.elements,i=this.elements,o=n[0],a=n[3],s=n[6],l=n[1],u=n[4],c=n[7],d=n[2],f=n[5],h=n[8],p=r[0],m=r[3],g=r[6],v=r[1],y=r[4],b=r[7],_=r[2],w=r[5],A=r[8];return i[0]=o*p+a*v+s*_,i[3]=o*m+a*y+s*w,i[6]=o*g+a*b+s*A,i[1]=l*p+u*v+c*_,i[4]=l*m+u*y+c*w,i[7]=l*g+u*b+c*A,i[2]=d*p+f*v+h*_,i[5]=d*m+f*y+h*w,i[8]=d*g+f*b+h*A,this}multiplyScalar(t){const e=this.elements;return e[0]*=t,e[3]*=t,e[6]*=t,e[1]*=t,e[4]*=t,e[7]*=t,e[2]*=t,e[5]*=t,e[8]*=t,this}determinant(){const t=this.elements,e=t[0],n=t[1],r=t[2],i=t[3],o=t[4],a=t[5],s=t[6],l=t[7],u=t[8];return e*o*u-e*a*l-n*i*u+n*a*s+r*i*l-r*o*s}invert(){const t=this.elements,e=t[0],n=t[1],r=t[2],i=t[3],o=t[4],a=t[5],s=t[6],l=t[7],u=t[8],c=u*o-a*l,d=a*s-u*i,f=l*i-o*s,h=e*c+n*d+r*f;if(0===h)return this.set(0,0,0,0,0,0,0,0,0);const p=1/h;return t[0]=c*p,t[1]=(r*l-u*n)*p,t[2]=(a*n-r*o)*p,t[3]=d*p,t[4]=(u*e-r*s)*p,t[5]=(r*i-a*e)*p,t[6]=f*p,t[7]=(n*s-l*e)*p,t[8]=(o*e-n*i)*p,this}transpose(){let t;const e=this.elements;return t=e[1],e[1]=e[3],e[3]=t,t=e[2],e[2]=e[6],e[6]=t,t=e[5],e[5]=e[7],e[7]=t,this}getNormalMatrix(t){return this.setFromMatrix4(t).invert().transpose()}transposeIntoArray(t){const e=this.elements;return t[0]=e[0],t[1]=e[3],t[2]=e[6],t[3]=e[1],t[4]=e[4],t[5]=e[7],t[6]=e[2],t[7]=e[5],t[8]=e[8],this}setUvTransform(t,e,n,r,i,o,a){const s=Math.cos(i),l=Math.sin(i);return this.set(n*s,n*l,-n*(s*o+l*a)+o+t,-r*l,r*s,-r*(-l*o+s*a)+a+e,0,0,1),this}scale(t,e){return this.premultiply(xy.makeScale(t,e)),this}rotate(t){return this.premultiply(xy.makeRotation(-t)),this}translate(t,e){return this.premultiply(xy.makeTranslation(t,e)),this}makeTranslation(t,e){return this.set(1,0,t,0,1,e,0,0,1),this}makeRotation(t){const e=Math.cos(t),n=Math.sin(t);return this.set(e,-n,0,n,e,0,0,0,1),this}makeScale(t,e){return this.set(t,0,0,0,e,0,0,0,1),this}equals(t){const e=this.elements,n=t.elements;for(let t=0;t<9;t++)if(e[t]!==n[t])return!1;return!0}fromArray(t,e=0){for(let n=0;n<9;n++)this.elements[n]=t[n+e];return this}toArray(t=[],e=0){const n=this.elements;return t[e]=n[0],t[e+1]=n[1],t[e+2]=n[2],t[e+3]=n[3],t[e+4]=n[4],t[e+5]=n[5],t[e+6]=n[6],t[e+7]=n[7],t[e+8]=n[8],t}clone(){return(new this.constructor).fromArray(this.elements)}}const xy=new Ey;function Sy(t){for(let e=t.length-1;e>=0;--e)if(t[e]>=65535)return!0;return!1}Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array;function Ty(t){return document.createElementNS("http://www.w3.org/1999/xhtml",t)}function Cy(t){return t<.04045?.0773993808*t:Math.pow(.9478672986*t+.0521327014,2.4)}function Iy(t){return t<.0031308?12.92*t:1.055*Math.pow(t,.41666)-.055}const ky={[ty]:{[ey]:Cy},[ey]:{[ty]:Iy}},Py={legacyMode:!0,get workingColorSpace(){return ey},set workingColorSpace(t){console.warn("THREE.ColorManagement: .workingColorSpace is readonly.")},convert:function(t,e,n){if(this.legacyMode||e===n||!e||!n)return t;if(ky[e]&&void 0!==ky[e][n]){const r=ky[e][n];return t.r=r(t.r),t.g=r(t.g),t.b=r(t.b),t}throw new Error("Unsupported color space conversion.")},fromWorkingColorSpace:function(t,e){return this.convert(t,this.workingColorSpace,e)},toWorkingColorSpace:function(t,e){return this.convert(t,e,this.workingColorSpace)}},Ry={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},Oy={r:0,g:0,b:0},My={h:0,s:0,l:0},Ly={h:0,s:0,l:0};function Dy(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+6*(e-t)*n:n<.5?e:n<2/3?t+6*(e-t)*(2/3-n):t}function Ny(t,e){return e.r=t.r,e.g=t.g,e.b=t.b,e}class By{constructor(t,e,n){return this.isColor=!0,this.r=1,this.g=1,this.b=1,void 0===e&&void 0===n?this.set(t):this.setRGB(t,e,n)}set(t){return t&&t.isColor?this.copy(t):"number"==typeof t?this.setHex(t):"string"==typeof t&&this.setStyle(t),this}setScalar(t){return this.r=t,this.g=t,this.b=t,this}setHex(t,e=ty){return t=Math.floor(t),this.r=(t>>16&255)/255,this.g=(t>>8&255)/255,this.b=(255&t)/255,Py.toWorkingColorSpace(this,e),this}setRGB(t,e,n,r=Py.workingColorSpace){return this.r=t,this.g=e,this.b=n,Py.toWorkingColorSpace(this,r),this}setHSL(t,e,n,r=Py.workingColorSpace){if(t=py(t,1),e=hy(e,0,1),n=hy(n,0,1),0===e)this.r=this.g=this.b=n;else{const r=n<=.5?n*(1+e):n+e-n*e,i=2*n-r;this.r=Dy(i,r,t+1/3),this.g=Dy(i,r,t),this.b=Dy(i,r,t-1/3)}return Py.toWorkingColorSpace(this,r),this}setStyle(t,e=ty){function n(e){void 0!==e&&parseFloat(e)<1&&console.warn("THREE.Color: Alpha component of "+t+" will be ignored.")}let r;if(r=/^((?:rgb|hsl)a?)\(([^\)]*)\)/.exec(t)){let t;const i=r[1],o=r[2];switch(i){case"rgb":case"rgba":if(t=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(o))return this.r=Math.min(255,parseInt(t[1],10))/255,this.g=Math.min(255,parseInt(t[2],10))/255,this.b=Math.min(255,parseInt(t[3],10))/255,Py.toWorkingColorSpace(this,e),n(t[4]),this;if(t=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(o))return this.r=Math.min(100,parseInt(t[1],10))/100,this.g=Math.min(100,parseInt(t[2],10))/100,this.b=Math.min(100,parseInt(t[3],10))/100,Py.toWorkingColorSpace(this,e),n(t[4]),this;break;case"hsl":case"hsla":if(t=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(o)){const r=parseFloat(t[1])/360,i=parseFloat(t[2])/100,o=parseFloat(t[3])/100;return n(t[4]),this.setHSL(r,i,o,e)}}}else if(r=/^\#([A-Fa-f\d]+)$/.exec(t)){const t=r[1],n=t.length;if(3===n)return this.r=parseInt(t.charAt(0)+t.charAt(0),16)/255,this.g=parseInt(t.charAt(1)+t.charAt(1),16)/255,this.b=parseInt(t.charAt(2)+t.charAt(2),16)/255,Py.toWorkingColorSpace(this,e),this;if(6===n)return this.r=parseInt(t.charAt(0)+t.charAt(1),16)/255,this.g=parseInt(t.charAt(2)+t.charAt(3),16)/255,this.b=parseInt(t.charAt(4)+t.charAt(5),16)/255,Py.toWorkingColorSpace(this,e),this}return t&&t.length>0?this.setColorName(t,e):this}setColorName(t,e=ty){const n=Ry[t.toLowerCase()];return void 0!==n?this.setHex(n,e):console.warn("THREE.Color: Unknown color "+t),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(t){return this.r=t.r,this.g=t.g,this.b=t.b,this}copySRGBToLinear(t){return this.r=Cy(t.r),this.g=Cy(t.g),this.b=Cy(t.b),this}copyLinearToSRGB(t){return this.r=Iy(t.r),this.g=Iy(t.g),this.b=Iy(t.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(t=ty){return Py.fromWorkingColorSpace(Ny(this,Oy),t),hy(255*Oy.r,0,255)<<16^hy(255*Oy.g,0,255)<<8^hy(255*Oy.b,0,255)}getHexString(t=ty){return("000000"+this.getHex(t).toString(16)).slice(-6)}getHSL(t,e=Py.workingColorSpace){Py.fromWorkingColorSpace(Ny(this,Oy),e);const n=Oy.r,r=Oy.g,i=Oy.b,o=Math.max(n,r,i),a=Math.min(n,r,i);let s,l;const u=(a+o)/2;if(a===o)s=0,l=0;else{const t=o-a;switch(l=u<=.5?t/(o+a):t/(2-o-a),o){case n:s=(r-i)/t+(r<i?6:0);break;case r:s=(i-n)/t+2;break;case i:s=(n-r)/t+4}s/=6}return t.h=s,t.s=l,t.l=u,t}getRGB(t,e=Py.workingColorSpace){return Py.fromWorkingColorSpace(Ny(this,Oy),e),t.r=Oy.r,t.g=Oy.g,t.b=Oy.b,t}getStyle(t=ty){return Py.fromWorkingColorSpace(Ny(this,Oy),t),t!==ty?`color(${t} ${Oy.r} ${Oy.g} ${Oy.b})`:`rgb(${255*Oy.r|0},${255*Oy.g|0},${255*Oy.b|0})`}offsetHSL(t,e,n){return this.getHSL(My),My.h+=t,My.s+=e,My.l+=n,this.setHSL(My.h,My.s,My.l),this}add(t){return this.r+=t.r,this.g+=t.g,this.b+=t.b,this}addColors(t,e){return this.r=t.r+e.r,this.g=t.g+e.g,this.b=t.b+e.b,this}addScalar(t){return this.r+=t,this.g+=t,this.b+=t,this}sub(t){return this.r=Math.max(0,this.r-t.r),this.g=Math.max(0,this.g-t.g),this.b=Math.max(0,this.b-t.b),this}multiply(t){return this.r*=t.r,this.g*=t.g,this.b*=t.b,this}multiplyScalar(t){return this.r*=t,this.g*=t,this.b*=t,this}lerp(t,e){return this.r+=(t.r-this.r)*e,this.g+=(t.g-this.g)*e,this.b+=(t.b-this.b)*e,this}lerpColors(t,e,n){return this.r=t.r+(e.r-t.r)*n,this.g=t.g+(e.g-t.g)*n,this.b=t.b+(e.b-t.b)*n,this}lerpHSL(t,e){this.getHSL(My),t.getHSL(Ly);const n=my(My.h,Ly.h,e),r=my(My.s,Ly.s,e),i=my(My.l,Ly.l,e);return this.setHSL(n,r,i),this}equals(t){return t.r===this.r&&t.g===this.g&&t.b===this.b}fromArray(t,e=0){return this.r=t[e],this.g=t[e+1],this.b=t[e+2],this}toArray(t=[],e=0){return t[e]=this.r,t[e+1]=this.g,t[e+2]=this.b,t}fromBufferAttribute(t,e){return this.r=t.getX(e),this.g=t.getY(e),this.b=t.getZ(e),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}}let jy;By.NAMES=Ry;class zy{static getDataURL(t){if(/^data:/i.test(t.src))return t.src;if("undefined"==typeof HTMLCanvasElement)return t.src;let e;if(t instanceof HTMLCanvasElement)e=t;else{void 0===jy&&(jy=Ty("canvas")),jy.width=t.width,jy.height=t.height;const n=jy.getContext("2d");t instanceof ImageData?n.putImageData(t,0,0):n.drawImage(t,0,0,t.width,t.height),e=jy}return e.width>2048||e.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",t),e.toDataURL("image/jpeg",.6)):e.toDataURL("image/png")}static sRGBToLinear(t){if("undefined"!=typeof HTMLImageElement&&t instanceof HTMLImageElement||"undefined"!=typeof HTMLCanvasElement&&t instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&t instanceof ImageBitmap){const e=Ty("canvas");e.width=t.width,e.height=t.height;const n=e.getContext("2d");n.drawImage(t,0,0,t.width,t.height);const r=n.getImageData(0,0,t.width,t.height),i=r.data;for(let t=0;t<i.length;t++)i[t]=255*Cy(i[t]/255);return n.putImageData(r,0,0),e}if(t.data){const e=t.data.slice(0);for(let t=0;t<e.length;t++)e instanceof Uint8Array||e instanceof Uint8ClampedArray?e[t]=Math.floor(255*Cy(e[t]/255)):e[t]=Cy(e[t]);return{data:e,width:t.width,height:t.height}}return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),t}}class Fy{constructor(t=null){this.isSource=!0,this.uuid=fy(),this.data=t,this.version=0}set needsUpdate(t){!0===t&&this.version++}toJSON(t){const e=void 0===t||"string"==typeof t;if(!e&&void 0!==t.images[this.uuid])return t.images[this.uuid];const n={uuid:this.uuid,url:""},r=this.data;if(null!==r){let t;if(Array.isArray(r)){t=[];for(let e=0,n=r.length;e<n;e++)r[e].isDataTexture?t.push(Uy(r[e].image)):t.push(Uy(r[e]))}else t=Uy(r);n.url=t}return e||(t.images[this.uuid]=n),n}}function Uy(t){return"undefined"!=typeof HTMLImageElement&&t instanceof HTMLImageElement||"undefined"!=typeof HTMLCanvasElement&&t instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&t instanceof ImageBitmap?zy.getDataURL(t):t.data?{data:Array.from(t.data),width:t.width,height:t.height,type:t.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}let qy=0;class Gy extends sy{constructor(t=Gy.DEFAULT_IMAGE,e=Gy.DEFAULT_MAPPING,n=Ng,r=Ng,i=Ug,o=Gg,a=nv,s=Hg,l=Gy.DEFAULT_ANISOTROPY,u=Kv){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:qy++}),this.uuid=fy(),this.name="",this.source=new Fy(t),this.mipmaps=[],this.mapping=e,this.wrapS=n,this.wrapT=r,this.magFilter=i,this.minFilter=o,this.anisotropy=l,this.format=a,this.internalFormat=null,this.type=s,this.offset=new Ay(0,0),this.repeat=new Ay(1,1),this.center=new Ay(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new Ey,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.encoding=u,this.userData={},this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1,this.needsPMREMUpdate=!1}get image(){return this.source.data}set image(t){this.source.data=t}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return(new this.constructor).copy(this)}copy(t){return this.name=t.name,this.source=t.source,this.mipmaps=t.mipmaps.slice(0),this.mapping=t.mapping,this.wrapS=t.wrapS,this.wrapT=t.wrapT,this.magFilter=t.magFilter,this.minFilter=t.minFilter,this.anisotropy=t.anisotropy,this.format=t.format,this.internalFormat=t.internalFormat,this.type=t.type,this.offset.copy(t.offset),this.repeat.copy(t.repeat),this.center.copy(t.center),this.rotation=t.rotation,this.matrixAutoUpdate=t.matrixAutoUpdate,this.matrix.copy(t.matrix),this.generateMipmaps=t.generateMipmaps,this.premultiplyAlpha=t.premultiplyAlpha,this.flipY=t.flipY,this.unpackAlignment=t.unpackAlignment,this.encoding=t.encoding,this.userData=JSON.parse(JSON.stringify(t.userData)),this.needsUpdate=!0,this}toJSON(t){const e=void 0===t||"string"==typeof t;if(!e&&void 0!==t.textures[this.uuid])return t.textures[this.uuid];const n={metadata:{version:4.5,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(t).uuid,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,type:this.type,encoding:this.encoding,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(n.userData=this.userData),e||(t.textures[this.uuid]=n),n}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(t){if(300!==this.mapping)return t;if(t.applyMatrix3(this.matrix),t.x<0||t.x>1)switch(this.wrapS){case Dg:t.x=t.x-Math.floor(t.x);break;case Ng:t.x=t.x<0?0:1;break;case Bg:1===Math.abs(Math.floor(t.x)%2)?t.x=Math.ceil(t.x)-t.x:t.x=t.x-Math.floor(t.x)}if(t.y<0||t.y>1)switch(this.wrapT){case Dg:t.y=t.y-Math.floor(t.y);break;case Ng:t.y=t.y<0?0:1;break;case Bg:1===Math.abs(Math.floor(t.y)%2)?t.y=Math.ceil(t.y)-t.y:t.y=t.y-Math.floor(t.y)}return this.flipY&&(t.y=1-t.y),t}set needsUpdate(t){!0===t&&(this.version++,this.source.needsUpdate=!0)}}Gy.DEFAULT_IMAGE=null,Gy.DEFAULT_MAPPING=300,Gy.DEFAULT_ANISOTROPY=1;class Hy{constructor(t=0,e=0,n=0,r=1){Hy.prototype.isVector4=!0,this.x=t,this.y=e,this.z=n,this.w=r}get width(){return this.z}set width(t){this.z=t}get height(){return this.w}set height(t){this.w=t}set(t,e,n,r){return this.x=t,this.y=e,this.z=n,this.w=r,this}setScalar(t){return this.x=t,this.y=t,this.z=t,this.w=t,this}setX(t){return this.x=t,this}setY(t){return this.y=t,this}setZ(t){return this.z=t,this}setW(t){return this.w=t,this}setComponent(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;case 2:this.z=e;break;case 3:this.w=e;break;default:throw new Error("index is out of range: "+t)}return this}getComponent(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+t)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(t){return this.x=t.x,this.y=t.y,this.z=t.z,this.w=void 0!==t.w?t.w:1,this}add(t){return this.x+=t.x,this.y+=t.y,this.z+=t.z,this.w+=t.w,this}addScalar(t){return this.x+=t,this.y+=t,this.z+=t,this.w+=t,this}addVectors(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this.z=t.z+e.z,this.w=t.w+e.w,this}addScaledVector(t,e){return this.x+=t.x*e,this.y+=t.y*e,this.z+=t.z*e,this.w+=t.w*e,this}sub(t){return this.x-=t.x,this.y-=t.y,this.z-=t.z,this.w-=t.w,this}subScalar(t){return this.x-=t,this.y-=t,this.z-=t,this.w-=t,this}subVectors(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this.z=t.z-e.z,this.w=t.w-e.w,this}multiply(t){return this.x*=t.x,this.y*=t.y,this.z*=t.z,this.w*=t.w,this}multiplyScalar(t){return this.x*=t,this.y*=t,this.z*=t,this.w*=t,this}applyMatrix4(t){const e=this.x,n=this.y,r=this.z,i=this.w,o=t.elements;return this.x=o[0]*e+o[4]*n+o[8]*r+o[12]*i,this.y=o[1]*e+o[5]*n+o[9]*r+o[13]*i,this.z=o[2]*e+o[6]*n+o[10]*r+o[14]*i,this.w=o[3]*e+o[7]*n+o[11]*r+o[15]*i,this}divideScalar(t){return this.multiplyScalar(1/t)}setAxisAngleFromQuaternion(t){this.w=2*Math.acos(t.w);const e=Math.sqrt(1-t.w*t.w);return e<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=t.x/e,this.y=t.y/e,this.z=t.z/e),this}setAxisAngleFromRotationMatrix(t){let e,n,r,i;const o=.01,a=.1,s=t.elements,l=s[0],u=s[4],c=s[8],d=s[1],f=s[5],h=s[9],p=s[2],m=s[6],g=s[10];if(Math.abs(u-d)<o&&Math.abs(c-p)<o&&Math.abs(h-m)<o){if(Math.abs(u+d)<a&&Math.abs(c+p)<a&&Math.abs(h+m)<a&&Math.abs(l+f+g-3)<a)return this.set(1,0,0,0),this;e=Math.PI;const t=(l+1)/2,s=(f+1)/2,v=(g+1)/2,y=(u+d)/4,b=(c+p)/4,_=(h+m)/4;return t>s&&t>v?t<o?(n=0,r=.707106781,i=.707106781):(n=Math.sqrt(t),r=y/n,i=b/n):s>v?s<o?(n=.707106781,r=0,i=.707106781):(r=Math.sqrt(s),n=y/r,i=_/r):v<o?(n=.707106781,r=.707106781,i=0):(i=Math.sqrt(v),n=b/i,r=_/i),this.set(n,r,i,e),this}let v=Math.sqrt((m-h)*(m-h)+(c-p)*(c-p)+(d-u)*(d-u));return Math.abs(v)<.001&&(v=1),this.x=(m-h)/v,this.y=(c-p)/v,this.z=(d-u)/v,this.w=Math.acos((l+f+g-1)/2),this}min(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this.w=Math.min(this.w,t.w),this}max(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this.w=Math.max(this.w,t.w),this}clamp(t,e){return this.x=Math.max(t.x,Math.min(e.x,this.x)),this.y=Math.max(t.y,Math.min(e.y,this.y)),this.z=Math.max(t.z,Math.min(e.z,this.z)),this.w=Math.max(t.w,Math.min(e.w,this.w)),this}clampScalar(t,e){return this.x=Math.max(t,Math.min(e,this.x)),this.y=Math.max(t,Math.min(e,this.y)),this.z=Math.max(t,Math.min(e,this.z)),this.w=Math.max(t,Math.min(e,this.w)),this}clampLength(t,e){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(t,Math.min(e,n)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(t){return this.x*t.x+this.y*t.y+this.z*t.z+this.w*t.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(t){return this.normalize().multiplyScalar(t)}lerp(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this.z+=(t.z-this.z)*e,this.w+=(t.w-this.w)*e,this}lerpVectors(t,e,n){return this.x=t.x+(e.x-t.x)*n,this.y=t.y+(e.y-t.y)*n,this.z=t.z+(e.z-t.z)*n,this.w=t.w+(e.w-t.w)*n,this}equals(t){return t.x===this.x&&t.y===this.y&&t.z===this.z&&t.w===this.w}fromArray(t,e=0){return this.x=t[e],this.y=t[e+1],this.z=t[e+2],this.w=t[e+3],this}toArray(t=[],e=0){return t[e]=this.x,t[e+1]=this.y,t[e+2]=this.z,t[e+3]=this.w,t}fromBufferAttribute(t,e){return this.x=t.getX(e),this.y=t.getY(e),this.z=t.getZ(e),this.w=t.getW(e),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class Vy extends sy{constructor(t=1,e=1,n={}){super(),this.isWebGLRenderTarget=!0,this.width=t,this.height=e,this.depth=1,this.scissor=new Hy(0,0,t,e),this.scissorTest=!1,this.viewport=new Hy(0,0,t,e);const r={width:t,height:e,depth:1};this.texture=new Gy(r,n.mapping,n.wrapS,n.wrapT,n.magFilter,n.minFilter,n.format,n.type,n.anisotropy,n.encoding),this.texture.isRenderTargetTexture=!0,this.texture.flipY=!1,this.texture.generateMipmaps=void 0!==n.generateMipmaps&&n.generateMipmaps,this.texture.internalFormat=void 0!==n.internalFormat?n.internalFormat:null,this.texture.minFilter=void 0!==n.minFilter?n.minFilter:Ug,this.depthBuffer=void 0===n.depthBuffer||n.depthBuffer,this.stencilBuffer=void 0!==n.stencilBuffer&&n.stencilBuffer,this.depthTexture=void 0!==n.depthTexture?n.depthTexture:null,this.samples=void 0!==n.samples?n.samples:0}setSize(t,e,n=1){this.width===t&&this.height===e&&this.depth===n||(this.width=t,this.height=e,this.depth=n,this.texture.image.width=t,this.texture.image.height=e,this.texture.image.depth=n,this.dispose()),this.viewport.set(0,0,t,e),this.scissor.set(0,0,t,e)}clone(){return(new this.constructor).copy(this)}copy(t){this.width=t.width,this.height=t.height,this.depth=t.depth,this.viewport.copy(t.viewport),this.texture=t.texture.clone(),this.texture.isRenderTargetTexture=!0;const e=Object.assign({},t.texture.image);return this.texture.source=new Fy(e),this.depthBuffer=t.depthBuffer,this.stencilBuffer=t.stencilBuffer,null!==t.depthTexture&&(this.depthTexture=t.depthTexture.clone()),this.samples=t.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class Qy extends Gy{constructor(t=null,e=1,n=1,r=1){super(null),this.isDataArrayTexture=!0,this.image={data:t,width:e,height:n,depth:r},this.magFilter=jg,this.minFilter=jg,this.wrapR=Ng,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class Wy extends Gy{constructor(t=null,e=1,n=1,r=1){super(null),this.isData3DTexture=!0,this.image={data:t,width:e,height:n,depth:r},this.magFilter=jg,this.minFilter=jg,this.wrapR=Ng,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class Yy{constructor(t=0,e=0,n=0,r=1){this.isQuaternion=!0,this._x=t,this._y=e,this._z=n,this._w=r}static slerpFlat(t,e,n,r,i,o,a){let s=n[r+0],l=n[r+1],u=n[r+2],c=n[r+3];const d=i[o+0],f=i[o+1],h=i[o+2],p=i[o+3];if(0===a)return t[e+0]=s,t[e+1]=l,t[e+2]=u,void(t[e+3]=c);if(1===a)return t[e+0]=d,t[e+1]=f,t[e+2]=h,void(t[e+3]=p);if(c!==p||s!==d||l!==f||u!==h){let t=1-a;const e=s*d+l*f+u*h+c*p,n=e>=0?1:-1,r=1-e*e;if(r>Number.EPSILON){const i=Math.sqrt(r),o=Math.atan2(i,e*n);t=Math.sin(t*o)/i,a=Math.sin(a*o)/i}const i=a*n;if(s=s*t+d*i,l=l*t+f*i,u=u*t+h*i,c=c*t+p*i,t===1-a){const t=1/Math.sqrt(s*s+l*l+u*u+c*c);s*=t,l*=t,u*=t,c*=t}}t[e]=s,t[e+1]=l,t[e+2]=u,t[e+3]=c}static multiplyQuaternionsFlat(t,e,n,r,i,o){const a=n[r],s=n[r+1],l=n[r+2],u=n[r+3],c=i[o],d=i[o+1],f=i[o+2],h=i[o+3];return t[e]=a*h+u*c+s*f-l*d,t[e+1]=s*h+u*d+l*c-a*f,t[e+2]=l*h+u*f+a*d-s*c,t[e+3]=u*h-a*c-s*d-l*f,t}get x(){return this._x}set x(t){this._x=t,this._onChangeCallback()}get y(){return this._y}set y(t){this._y=t,this._onChangeCallback()}get z(){return this._z}set z(t){this._z=t,this._onChangeCallback()}get w(){return this._w}set w(t){this._w=t,this._onChangeCallback()}set(t,e,n,r){return this._x=t,this._y=e,this._z=n,this._w=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(t){return this._x=t.x,this._y=t.y,this._z=t.z,this._w=t.w,this._onChangeCallback(),this}setFromEuler(t,e){const n=t._x,r=t._y,i=t._z,o=t._order,a=Math.cos,s=Math.sin,l=a(n/2),u=a(r/2),c=a(i/2),d=s(n/2),f=s(r/2),h=s(i/2);switch(o){case"XYZ":this._x=d*u*c+l*f*h,this._y=l*f*c-d*u*h,this._z=l*u*h+d*f*c,this._w=l*u*c-d*f*h;break;case"YXZ":this._x=d*u*c+l*f*h,this._y=l*f*c-d*u*h,this._z=l*u*h-d*f*c,this._w=l*u*c+d*f*h;break;case"ZXY":this._x=d*u*c-l*f*h,this._y=l*f*c+d*u*h,this._z=l*u*h+d*f*c,this._w=l*u*c-d*f*h;break;case"ZYX":this._x=d*u*c-l*f*h,this._y=l*f*c+d*u*h,this._z=l*u*h-d*f*c,this._w=l*u*c+d*f*h;break;case"YZX":this._x=d*u*c+l*f*h,this._y=l*f*c+d*u*h,this._z=l*u*h-d*f*c,this._w=l*u*c-d*f*h;break;case"XZY":this._x=d*u*c-l*f*h,this._y=l*f*c-d*u*h,this._z=l*u*h+d*f*c,this._w=l*u*c+d*f*h;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+o)}return!1!==e&&this._onChangeCallback(),this}setFromAxisAngle(t,e){const n=e/2,r=Math.sin(n);return this._x=t.x*r,this._y=t.y*r,this._z=t.z*r,this._w=Math.cos(n),this._onChangeCallback(),this}setFromRotationMatrix(t){const e=t.elements,n=e[0],r=e[4],i=e[8],o=e[1],a=e[5],s=e[9],l=e[2],u=e[6],c=e[10],d=n+a+c;if(d>0){const t=.5/Math.sqrt(d+1);this._w=.25/t,this._x=(u-s)*t,this._y=(i-l)*t,this._z=(o-r)*t}else if(n>a&&n>c){const t=2*Math.sqrt(1+n-a-c);this._w=(u-s)/t,this._x=.25*t,this._y=(r+o)/t,this._z=(i+l)/t}else if(a>c){const t=2*Math.sqrt(1+a-n-c);this._w=(i-l)/t,this._x=(r+o)/t,this._y=.25*t,this._z=(s+u)/t}else{const t=2*Math.sqrt(1+c-n-a);this._w=(o-r)/t,this._x=(i+l)/t,this._y=(s+u)/t,this._z=.25*t}return this._onChangeCallback(),this}setFromUnitVectors(t,e){let n=t.dot(e)+1;return n<Number.EPSILON?(n=0,Math.abs(t.x)>Math.abs(t.z)?(this._x=-t.y,this._y=t.x,this._z=0,this._w=n):(this._x=0,this._y=-t.z,this._z=t.y,this._w=n)):(this._x=t.y*e.z-t.z*e.y,this._y=t.z*e.x-t.x*e.z,this._z=t.x*e.y-t.y*e.x,this._w=n),this.normalize()}angleTo(t){return 2*Math.acos(Math.abs(hy(this.dot(t),-1,1)))}rotateTowards(t,e){const n=this.angleTo(t);if(0===n)return this;const r=Math.min(1,e/n);return this.slerp(t,r),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(t){return this._x*t._x+this._y*t._y+this._z*t._z+this._w*t._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let t=this.length();return 0===t?(this._x=0,this._y=0,this._z=0,this._w=1):(t=1/t,this._x=this._x*t,this._y=this._y*t,this._z=this._z*t,this._w=this._w*t),this._onChangeCallback(),this}multiply(t){return this.multiplyQuaternions(this,t)}premultiply(t){return this.multiplyQuaternions(t,this)}multiplyQuaternions(t,e){const n=t._x,r=t._y,i=t._z,o=t._w,a=e._x,s=e._y,l=e._z,u=e._w;return this._x=n*u+o*a+r*l-i*s,this._y=r*u+o*s+i*a-n*l,this._z=i*u+o*l+n*s-r*a,this._w=o*u-n*a-r*s-i*l,this._onChangeCallback(),this}slerp(t,e){if(0===e)return this;if(1===e)return this.copy(t);const n=this._x,r=this._y,i=this._z,o=this._w;let a=o*t._w+n*t._x+r*t._y+i*t._z;if(a<0?(this._w=-t._w,this._x=-t._x,this._y=-t._y,this._z=-t._z,a=-a):this.copy(t),a>=1)return this._w=o,this._x=n,this._y=r,this._z=i,this;const s=1-a*a;if(s<=Number.EPSILON){const t=1-e;return this._w=t*o+e*this._w,this._x=t*n+e*this._x,this._y=t*r+e*this._y,this._z=t*i+e*this._z,this.normalize(),this._onChangeCallback(),this}const l=Math.sqrt(s),u=Math.atan2(l,a),c=Math.sin((1-e)*u)/l,d=Math.sin(e*u)/l;return this._w=o*c+this._w*d,this._x=n*c+this._x*d,this._y=r*c+this._y*d,this._z=i*c+this._z*d,this._onChangeCallback(),this}slerpQuaternions(t,e,n){return this.copy(t).slerp(e,n)}random(){const t=Math.random(),e=Math.sqrt(1-t),n=Math.sqrt(t),r=2*Math.PI*Math.random(),i=2*Math.PI*Math.random();return this.set(e*Math.cos(r),n*Math.sin(i),n*Math.cos(i),e*Math.sin(r))}equals(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._w===this._w}fromArray(t,e=0){return this._x=t[e],this._y=t[e+1],this._z=t[e+2],this._w=t[e+3],this._onChangeCallback(),this}toArray(t=[],e=0){return t[e]=this._x,t[e+1]=this._y,t[e+2]=this._z,t[e+3]=this._w,t}fromBufferAttribute(t,e){return this._x=t.getX(e),this._y=t.getY(e),this._z=t.getZ(e),this._w=t.getW(e),this}_onChange(t){return this._onChangeCallback=t,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class Ky{constructor(t=0,e=0,n=0){Ky.prototype.isVector3=!0,this.x=t,this.y=e,this.z=n}set(t,e,n){return void 0===n&&(n=this.z),this.x=t,this.y=e,this.z=n,this}setScalar(t){return this.x=t,this.y=t,this.z=t,this}setX(t){return this.x=t,this}setY(t){return this.y=t,this}setZ(t){return this.z=t,this}setComponent(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;case 2:this.z=e;break;default:throw new Error("index is out of range: "+t)}return this}getComponent(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+t)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(t){return this.x=t.x,this.y=t.y,this.z=t.z,this}add(t){return this.x+=t.x,this.y+=t.y,this.z+=t.z,this}addScalar(t){return this.x+=t,this.y+=t,this.z+=t,this}addVectors(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this.z=t.z+e.z,this}addScaledVector(t,e){return this.x+=t.x*e,this.y+=t.y*e,this.z+=t.z*e,this}sub(t){return this.x-=t.x,this.y-=t.y,this.z-=t.z,this}subScalar(t){return this.x-=t,this.y-=t,this.z-=t,this}subVectors(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this.z=t.z-e.z,this}multiply(t){return this.x*=t.x,this.y*=t.y,this.z*=t.z,this}multiplyScalar(t){return this.x*=t,this.y*=t,this.z*=t,this}multiplyVectors(t,e){return this.x=t.x*e.x,this.y=t.y*e.y,this.z=t.z*e.z,this}applyEuler(t){return this.applyQuaternion($y.setFromEuler(t))}applyAxisAngle(t,e){return this.applyQuaternion($y.setFromAxisAngle(t,e))}applyMatrix3(t){const e=this.x,n=this.y,r=this.z,i=t.elements;return this.x=i[0]*e+i[3]*n+i[6]*r,this.y=i[1]*e+i[4]*n+i[7]*r,this.z=i[2]*e+i[5]*n+i[8]*r,this}applyNormalMatrix(t){return this.applyMatrix3(t).normalize()}applyMatrix4(t){const e=this.x,n=this.y,r=this.z,i=t.elements,o=1/(i[3]*e+i[7]*n+i[11]*r+i[15]);return this.x=(i[0]*e+i[4]*n+i[8]*r+i[12])*o,this.y=(i[1]*e+i[5]*n+i[9]*r+i[13])*o,this.z=(i[2]*e+i[6]*n+i[10]*r+i[14])*o,this}applyQuaternion(t){const e=this.x,n=this.y,r=this.z,i=t.x,o=t.y,a=t.z,s=t.w,l=s*e+o*r-a*n,u=s*n+a*e-i*r,c=s*r+i*n-o*e,d=-i*e-o*n-a*r;return this.x=l*s+d*-i+u*-a-c*-o,this.y=u*s+d*-o+c*-i-l*-a,this.z=c*s+d*-a+l*-o-u*-i,this}project(t){return this.applyMatrix4(t.matrixWorldInverse).applyMatrix4(t.projectionMatrix)}unproject(t){return this.applyMatrix4(t.projectionMatrixInverse).applyMatrix4(t.matrixWorld)}transformDirection(t){const e=this.x,n=this.y,r=this.z,i=t.elements;return this.x=i[0]*e+i[4]*n+i[8]*r,this.y=i[1]*e+i[5]*n+i[9]*r,this.z=i[2]*e+i[6]*n+i[10]*r,this.normalize()}divide(t){return this.x/=t.x,this.y/=t.y,this.z/=t.z,this}divideScalar(t){return this.multiplyScalar(1/t)}min(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this}max(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this}clamp(t,e){return this.x=Math.max(t.x,Math.min(e.x,this.x)),this.y=Math.max(t.y,Math.min(e.y,this.y)),this.z=Math.max(t.z,Math.min(e.z,this.z)),this}clampScalar(t,e){return this.x=Math.max(t,Math.min(e,this.x)),this.y=Math.max(t,Math.min(e,this.y)),this.z=Math.max(t,Math.min(e,this.z)),this}clampLength(t,e){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(t,Math.min(e,n)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(t){return this.x*t.x+this.y*t.y+this.z*t.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(t){return this.normalize().multiplyScalar(t)}lerp(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this.z+=(t.z-this.z)*e,this}lerpVectors(t,e,n){return this.x=t.x+(e.x-t.x)*n,this.y=t.y+(e.y-t.y)*n,this.z=t.z+(e.z-t.z)*n,this}cross(t){return this.crossVectors(this,t)}crossVectors(t,e){const n=t.x,r=t.y,i=t.z,o=e.x,a=e.y,s=e.z;return this.x=r*s-i*a,this.y=i*o-n*s,this.z=n*a-r*o,this}projectOnVector(t){const e=t.lengthSq();if(0===e)return this.set(0,0,0);const n=t.dot(this)/e;return this.copy(t).multiplyScalar(n)}projectOnPlane(t){return Xy.copy(this).projectOnVector(t),this.sub(Xy)}reflect(t){return this.sub(Xy.copy(t).multiplyScalar(2*this.dot(t)))}angleTo(t){const e=Math.sqrt(this.lengthSq()*t.lengthSq());if(0===e)return Math.PI/2;const n=this.dot(t)/e;return Math.acos(hy(n,-1,1))}distanceTo(t){return Math.sqrt(this.distanceToSquared(t))}distanceToSquared(t){const e=this.x-t.x,n=this.y-t.y,r=this.z-t.z;return e*e+n*n+r*r}manhattanDistanceTo(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)+Math.abs(this.z-t.z)}setFromSpherical(t){return this.setFromSphericalCoords(t.radius,t.phi,t.theta)}setFromSphericalCoords(t,e,n){const r=Math.sin(e)*t;return this.x=r*Math.sin(n),this.y=Math.cos(e)*t,this.z=r*Math.cos(n),this}setFromCylindrical(t){return this.setFromCylindricalCoords(t.radius,t.theta,t.y)}setFromCylindricalCoords(t,e,n){return this.x=t*Math.sin(e),this.y=n,this.z=t*Math.cos(e),this}setFromMatrixPosition(t){const e=t.elements;return this.x=e[12],this.y=e[13],this.z=e[14],this}setFromMatrixScale(t){const e=this.setFromMatrixColumn(t,0).length(),n=this.setFromMatrixColumn(t,1).length(),r=this.setFromMatrixColumn(t,2).length();return this.x=e,this.y=n,this.z=r,this}setFromMatrixColumn(t,e){return this.fromArray(t.elements,4*e)}setFromMatrix3Column(t,e){return this.fromArray(t.elements,3*e)}setFromEuler(t){return this.x=t._x,this.y=t._y,this.z=t._z,this}equals(t){return t.x===this.x&&t.y===this.y&&t.z===this.z}fromArray(t,e=0){return this.x=t[e],this.y=t[e+1],this.z=t[e+2],this}toArray(t=[],e=0){return t[e]=this.x,t[e+1]=this.y,t[e+2]=this.z,t}fromBufferAttribute(t,e){return this.x=t.getX(e),this.y=t.getY(e),this.z=t.getZ(e),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const t=2*(Math.random()-.5),e=Math.random()*Math.PI*2,n=Math.sqrt(1-t**2);return this.x=n*Math.cos(e),this.y=n*Math.sin(e),this.z=t,this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const Xy=new Ky,$y=new Yy;class Zy{constructor(t=new Ky(1/0,1/0,1/0),e=new Ky(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=t,this.max=e}set(t,e){return this.min.copy(t),this.max.copy(e),this}setFromArray(t){let e=1/0,n=1/0,r=1/0,i=-1/0,o=-1/0,a=-1/0;for(let s=0,l=t.length;s<l;s+=3){const l=t[s],u=t[s+1],c=t[s+2];l<e&&(e=l),u<n&&(n=u),c<r&&(r=c),l>i&&(i=l),u>o&&(o=u),c>a&&(a=c)}return this.min.set(e,n,r),this.max.set(i,o,a),this}setFromBufferAttribute(t){let e=1/0,n=1/0,r=1/0,i=-1/0,o=-1/0,a=-1/0;for(let s=0,l=t.count;s<l;s++){const l=t.getX(s),u=t.getY(s),c=t.getZ(s);l<e&&(e=l),u<n&&(n=u),c<r&&(r=c),l>i&&(i=l),u>o&&(o=u),c>a&&(a=c)}return this.min.set(e,n,r),this.max.set(i,o,a),this}setFromPoints(t){this.makeEmpty();for(let e=0,n=t.length;e<n;e++)this.expandByPoint(t[e]);return this}setFromCenterAndSize(t,e){const n=tb.copy(e).multiplyScalar(.5);return this.min.copy(t).sub(n),this.max.copy(t).add(n),this}setFromObject(t,e=!1){return this.makeEmpty(),this.expandByObject(t,e)}clone(){return(new this.constructor).copy(this)}copy(t){return this.min.copy(t.min),this.max.copy(t.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(t){return this.isEmpty()?t.set(0,0,0):t.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(t){return this.isEmpty()?t.set(0,0,0):t.subVectors(this.max,this.min)}expandByPoint(t){return this.min.min(t),this.max.max(t),this}expandByVector(t){return this.min.sub(t),this.max.add(t),this}expandByScalar(t){return this.min.addScalar(-t),this.max.addScalar(t),this}expandByObject(t,e=!1){t.updateWorldMatrix(!1,!1);const n=t.geometry;if(void 0!==n)if(e&&null!=n.attributes&&void 0!==n.attributes.position){const e=n.attributes.position;for(let n=0,r=e.count;n<r;n++)tb.fromBufferAttribute(e,n).applyMatrix4(t.matrixWorld),this.expandByPoint(tb)}else null===n.boundingBox&&n.computeBoundingBox(),eb.copy(n.boundingBox),eb.applyMatrix4(t.matrixWorld),this.union(eb);const r=t.children;for(let t=0,n=r.length;t<n;t++)this.expandByObject(r[t],e);return this}containsPoint(t){return!(t.x<this.min.x||t.x>this.max.x||t.y<this.min.y||t.y>this.max.y||t.z<this.min.z||t.z>this.max.z)}containsBox(t){return this.min.x<=t.min.x&&t.max.x<=this.max.x&&this.min.y<=t.min.y&&t.max.y<=this.max.y&&this.min.z<=t.min.z&&t.max.z<=this.max.z}getParameter(t,e){return e.set((t.x-this.min.x)/(this.max.x-this.min.x),(t.y-this.min.y)/(this.max.y-this.min.y),(t.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(t){return!(t.max.x<this.min.x||t.min.x>this.max.x||t.max.y<this.min.y||t.min.y>this.max.y||t.max.z<this.min.z||t.min.z>this.max.z)}intersectsSphere(t){return this.clampPoint(t.center,tb),tb.distanceToSquared(t.center)<=t.radius*t.radius}intersectsPlane(t){let e,n;return t.normal.x>0?(e=t.normal.x*this.min.x,n=t.normal.x*this.max.x):(e=t.normal.x*this.max.x,n=t.normal.x*this.min.x),t.normal.y>0?(e+=t.normal.y*this.min.y,n+=t.normal.y*this.max.y):(e+=t.normal.y*this.max.y,n+=t.normal.y*this.min.y),t.normal.z>0?(e+=t.normal.z*this.min.z,n+=t.normal.z*this.max.z):(e+=t.normal.z*this.max.z,n+=t.normal.z*this.min.z),e<=-t.constant&&n>=-t.constant}intersectsTriangle(t){if(this.isEmpty())return!1;this.getCenter(lb),ub.subVectors(this.max,lb),nb.subVectors(t.a,lb),rb.subVectors(t.b,lb),ib.subVectors(t.c,lb),ob.subVectors(rb,nb),ab.subVectors(ib,rb),sb.subVectors(nb,ib);let e=[0,-ob.z,ob.y,0,-ab.z,ab.y,0,-sb.z,sb.y,ob.z,0,-ob.x,ab.z,0,-ab.x,sb.z,0,-sb.x,-ob.y,ob.x,0,-ab.y,ab.x,0,-sb.y,sb.x,0];return!!fb(e,nb,rb,ib,ub)&&(e=[1,0,0,0,1,0,0,0,1],!!fb(e,nb,rb,ib,ub)&&(cb.crossVectors(ob,ab),e=[cb.x,cb.y,cb.z],fb(e,nb,rb,ib,ub)))}clampPoint(t,e){return e.copy(t).clamp(this.min,this.max)}distanceToPoint(t){return tb.copy(t).clamp(this.min,this.max).sub(t).length()}getBoundingSphere(t){return this.getCenter(t.center),t.radius=.5*this.getSize(tb).length(),t}intersect(t){return this.min.max(t.min),this.max.min(t.max),this.isEmpty()&&this.makeEmpty(),this}union(t){return this.min.min(t.min),this.max.max(t.max),this}applyMatrix4(t){return this.isEmpty()||(Jy[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(t),Jy[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(t),Jy[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(t),Jy[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(t),Jy[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(t),Jy[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(t),Jy[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(t),Jy[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(t),this.setFromPoints(Jy)),this}translate(t){return this.min.add(t),this.max.add(t),this}equals(t){return t.min.equals(this.min)&&t.max.equals(this.max)}}const Jy=[new Ky,new Ky,new Ky,new Ky,new Ky,new Ky,new Ky,new Ky],tb=new Ky,eb=new Zy,nb=new Ky,rb=new Ky,ib=new Ky,ob=new Ky,ab=new Ky,sb=new Ky,lb=new Ky,ub=new Ky,cb=new Ky,db=new Ky;function fb(t,e,n,r,i){for(let o=0,a=t.length-3;o<=a;o+=3){db.fromArray(t,o);const a=i.x*Math.abs(db.x)+i.y*Math.abs(db.y)+i.z*Math.abs(db.z),s=e.dot(db),l=n.dot(db),u=r.dot(db);if(Math.max(-Math.max(s,l,u),Math.min(s,l,u))>a)return!1}return!0}const hb=new Zy,pb=new Ky,mb=new Ky;class gb{constructor(t=new Ky,e=-1){this.center=t,this.radius=e}set(t,e){return this.center.copy(t),this.radius=e,this}setFromPoints(t,e){const n=this.center;void 0!==e?n.copy(e):hb.setFromPoints(t).getCenter(n);let r=0;for(let e=0,i=t.length;e<i;e++)r=Math.max(r,n.distanceToSquared(t[e]));return this.radius=Math.sqrt(r),this}copy(t){return this.center.copy(t.center),this.radius=t.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(t){return t.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(t){return t.distanceTo(this.center)-this.radius}intersectsSphere(t){const e=this.radius+t.radius;return t.center.distanceToSquared(this.center)<=e*e}intersectsBox(t){return t.intersectsSphere(this)}intersectsPlane(t){return Math.abs(t.distanceToPoint(this.center))<=this.radius}clampPoint(t,e){const n=this.center.distanceToSquared(t);return e.copy(t),n>this.radius*this.radius&&(e.sub(this.center).normalize(),e.multiplyScalar(this.radius).add(this.center)),e}getBoundingBox(t){return this.isEmpty()?(t.makeEmpty(),t):(t.set(this.center,this.center),t.expandByScalar(this.radius),t)}applyMatrix4(t){return this.center.applyMatrix4(t),this.radius=this.radius*t.getMaxScaleOnAxis(),this}translate(t){return this.center.add(t),this}expandByPoint(t){if(this.isEmpty())return this.center.copy(t),this.radius=0,this;pb.subVectors(t,this.center);const e=pb.lengthSq();if(e>this.radius*this.radius){const t=Math.sqrt(e),n=.5*(t-this.radius);this.center.addScaledVector(pb,n/t),this.radius+=n}return this}union(t){return t.isEmpty()?this:this.isEmpty()?(this.copy(t),this):(!0===this.center.equals(t.center)?this.radius=Math.max(this.radius,t.radius):(mb.subVectors(t.center,this.center).setLength(t.radius),this.expandByPoint(pb.copy(t.center).add(mb)),this.expandByPoint(pb.copy(t.center).sub(mb))),this)}equals(t){return t.center.equals(this.center)&&t.radius===this.radius}clone(){return(new this.constructor).copy(this)}}const vb=new Ky,yb=new Ky,bb=new Ky,_b=new Ky,wb=new Ky,Ab=new Ky,Eb=new Ky;class xb{constructor(t=new Ky,e=new Ky(0,0,-1)){this.origin=t,this.direction=e}set(t,e){return this.origin.copy(t),this.direction.copy(e),this}copy(t){return this.origin.copy(t.origin),this.direction.copy(t.direction),this}at(t,e){return e.copy(this.direction).multiplyScalar(t).add(this.origin)}lookAt(t){return this.direction.copy(t).sub(this.origin).normalize(),this}recast(t){return this.origin.copy(this.at(t,vb)),this}closestPointToPoint(t,e){e.subVectors(t,this.origin);const n=e.dot(this.direction);return n<0?e.copy(this.origin):e.copy(this.direction).multiplyScalar(n).add(this.origin)}distanceToPoint(t){return Math.sqrt(this.distanceSqToPoint(t))}distanceSqToPoint(t){const e=vb.subVectors(t,this.origin).dot(this.direction);return e<0?this.origin.distanceToSquared(t):(vb.copy(this.direction).multiplyScalar(e).add(this.origin),vb.distanceToSquared(t))}distanceSqToSegment(t,e,n,r){yb.copy(t).add(e).multiplyScalar(.5),bb.copy(e).sub(t).normalize(),_b.copy(this.origin).sub(yb);const i=.5*t.distanceTo(e),o=-this.direction.dot(bb),a=_b.dot(this.direction),s=-_b.dot(bb),l=_b.lengthSq(),u=Math.abs(1-o*o);let c,d,f,h;if(u>0)if(c=o*s-a,d=o*a-s,h=i*u,c>=0)if(d>=-h)if(d<=h){const t=1/u;c*=t,d*=t,f=c*(c+o*d+2*a)+d*(o*c+d+2*s)+l}else d=i,c=Math.max(0,-(o*d+a)),f=-c*c+d*(d+2*s)+l;else d=-i,c=Math.max(0,-(o*d+a)),f=-c*c+d*(d+2*s)+l;else d<=-h?(c=Math.max(0,-(-o*i+a)),d=c>0?-i:Math.min(Math.max(-i,-s),i),f=-c*c+d*(d+2*s)+l):d<=h?(c=0,d=Math.min(Math.max(-i,-s),i),f=d*(d+2*s)+l):(c=Math.max(0,-(o*i+a)),d=c>0?i:Math.min(Math.max(-i,-s),i),f=-c*c+d*(d+2*s)+l);else d=o>0?-i:i,c=Math.max(0,-(o*d+a)),f=-c*c+d*(d+2*s)+l;return n&&n.copy(this.direction).multiplyScalar(c).add(this.origin),r&&r.copy(bb).multiplyScalar(d).add(yb),f}intersectSphere(t,e){vb.subVectors(t.center,this.origin);const n=vb.dot(this.direction),r=vb.dot(vb)-n*n,i=t.radius*t.radius;if(r>i)return null;const o=Math.sqrt(i-r),a=n-o,s=n+o;return a<0&&s<0?null:a<0?this.at(s,e):this.at(a,e)}intersectsSphere(t){return this.distanceSqToPoint(t.center)<=t.radius*t.radius}distanceToPlane(t){const e=t.normal.dot(this.direction);if(0===e)return 0===t.distanceToPoint(this.origin)?0:null;const n=-(this.origin.dot(t.normal)+t.constant)/e;return n>=0?n:null}intersectPlane(t,e){const n=this.distanceToPlane(t);return null===n?null:this.at(n,e)}intersectsPlane(t){const e=t.distanceToPoint(this.origin);if(0===e)return!0;return t.normal.dot(this.direction)*e<0}intersectBox(t,e){let n,r,i,o,a,s;const l=1/this.direction.x,u=1/this.direction.y,c=1/this.direction.z,d=this.origin;return l>=0?(n=(t.min.x-d.x)*l,r=(t.max.x-d.x)*l):(n=(t.max.x-d.x)*l,r=(t.min.x-d.x)*l),u>=0?(i=(t.min.y-d.y)*u,o=(t.max.y-d.y)*u):(i=(t.max.y-d.y)*u,o=(t.min.y-d.y)*u),n>o||i>r?null:((i>n||isNaN(n))&&(n=i),(o<r||isNaN(r))&&(r=o),c>=0?(a=(t.min.z-d.z)*c,s=(t.max.z-d.z)*c):(a=(t.max.z-d.z)*c,s=(t.min.z-d.z)*c),n>s||a>r?null:((a>n||n!=n)&&(n=a),(s<r||r!=r)&&(r=s),r<0?null:this.at(n>=0?n:r,e)))}intersectsBox(t){return null!==this.intersectBox(t,vb)}intersectTriangle(t,e,n,r,i){wb.subVectors(e,t),Ab.subVectors(n,t),Eb.crossVectors(wb,Ab);let o,a=this.direction.dot(Eb);if(a>0){if(r)return null;o=1}else{if(!(a<0))return null;o=-1,a=-a}_b.subVectors(this.origin,t);const s=o*this.direction.dot(Ab.crossVectors(_b,Ab));if(s<0)return null;const l=o*this.direction.dot(wb.cross(_b));if(l<0)return null;if(s+l>a)return null;const u=-o*_b.dot(Eb);return u<0?null:this.at(u/a,i)}applyMatrix4(t){return this.origin.applyMatrix4(t),this.direction.transformDirection(t),this}equals(t){return t.origin.equals(this.origin)&&t.direction.equals(this.direction)}clone(){return(new this.constructor).copy(this)}}class Sb{constructor(){Sb.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}set(t,e,n,r,i,o,a,s,l,u,c,d,f,h,p,m){const g=this.elements;return g[0]=t,g[4]=e,g[8]=n,g[12]=r,g[1]=i,g[5]=o,g[9]=a,g[13]=s,g[2]=l,g[6]=u,g[10]=c,g[14]=d,g[3]=f,g[7]=h,g[11]=p,g[15]=m,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return(new Sb).fromArray(this.elements)}copy(t){const e=this.elements,n=t.elements;return e[0]=n[0],e[1]=n[1],e[2]=n[2],e[3]=n[3],e[4]=n[4],e[5]=n[5],e[6]=n[6],e[7]=n[7],e[8]=n[8],e[9]=n[9],e[10]=n[10],e[11]=n[11],e[12]=n[12],e[13]=n[13],e[14]=n[14],e[15]=n[15],this}copyPosition(t){const e=this.elements,n=t.elements;return e[12]=n[12],e[13]=n[13],e[14]=n[14],this}setFromMatrix3(t){const e=t.elements;return this.set(e[0],e[3],e[6],0,e[1],e[4],e[7],0,e[2],e[5],e[8],0,0,0,0,1),this}extractBasis(t,e,n){return t.setFromMatrixColumn(this,0),e.setFromMatrixColumn(this,1),n.setFromMatrixColumn(this,2),this}makeBasis(t,e,n){return this.set(t.x,e.x,n.x,0,t.y,e.y,n.y,0,t.z,e.z,n.z,0,0,0,0,1),this}extractRotation(t){const e=this.elements,n=t.elements,r=1/Tb.setFromMatrixColumn(t,0).length(),i=1/Tb.setFromMatrixColumn(t,1).length(),o=1/Tb.setFromMatrixColumn(t,2).length();return e[0]=n[0]*r,e[1]=n[1]*r,e[2]=n[2]*r,e[3]=0,e[4]=n[4]*i,e[5]=n[5]*i,e[6]=n[6]*i,e[7]=0,e[8]=n[8]*o,e[9]=n[9]*o,e[10]=n[10]*o,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,this}makeRotationFromEuler(t){const e=this.elements,n=t.x,r=t.y,i=t.z,o=Math.cos(n),a=Math.sin(n),s=Math.cos(r),l=Math.sin(r),u=Math.cos(i),c=Math.sin(i);if("XYZ"===t.order){const t=o*u,n=o*c,r=a*u,i=a*c;e[0]=s*u,e[4]=-s*c,e[8]=l,e[1]=n+r*l,e[5]=t-i*l,e[9]=-a*s,e[2]=i-t*l,e[6]=r+n*l,e[10]=o*s}else if("YXZ"===t.order){const t=s*u,n=s*c,r=l*u,i=l*c;e[0]=t+i*a,e[4]=r*a-n,e[8]=o*l,e[1]=o*c,e[5]=o*u,e[9]=-a,e[2]=n*a-r,e[6]=i+t*a,e[10]=o*s}else if("ZXY"===t.order){const t=s*u,n=s*c,r=l*u,i=l*c;e[0]=t-i*a,e[4]=-o*c,e[8]=r+n*a,e[1]=n+r*a,e[5]=o*u,e[9]=i-t*a,e[2]=-o*l,e[6]=a,e[10]=o*s}else if("ZYX"===t.order){const t=o*u,n=o*c,r=a*u,i=a*c;e[0]=s*u,e[4]=r*l-n,e[8]=t*l+i,e[1]=s*c,e[5]=i*l+t,e[9]=n*l-r,e[2]=-l,e[6]=a*s,e[10]=o*s}else if("YZX"===t.order){const t=o*s,n=o*l,r=a*s,i=a*l;e[0]=s*u,e[4]=i-t*c,e[8]=r*c+n,e[1]=c,e[5]=o*u,e[9]=-a*u,e[2]=-l*u,e[6]=n*c+r,e[10]=t-i*c}else if("XZY"===t.order){const t=o*s,n=o*l,r=a*s,i=a*l;e[0]=s*u,e[4]=-c,e[8]=l*u,e[1]=t*c+i,e[5]=o*u,e[9]=n*c-r,e[2]=r*c-n,e[6]=a*u,e[10]=i*c+t}return e[3]=0,e[7]=0,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,this}makeRotationFromQuaternion(t){return this.compose(Ib,t,kb)}lookAt(t,e,n){const r=this.elements;return Ob.subVectors(t,e),0===Ob.lengthSq()&&(Ob.z=1),Ob.normalize(),Pb.crossVectors(n,Ob),0===Pb.lengthSq()&&(1===Math.abs(n.z)?Ob.x+=1e-4:Ob.z+=1e-4,Ob.normalize(),Pb.crossVectors(n,Ob)),Pb.normalize(),Rb.crossVectors(Ob,Pb),r[0]=Pb.x,r[4]=Rb.x,r[8]=Ob.x,r[1]=Pb.y,r[5]=Rb.y,r[9]=Ob.y,r[2]=Pb.z,r[6]=Rb.z,r[10]=Ob.z,this}multiply(t){return this.multiplyMatrices(this,t)}premultiply(t){return this.multiplyMatrices(t,this)}multiplyMatrices(t,e){const n=t.elements,r=e.elements,i=this.elements,o=n[0],a=n[4],s=n[8],l=n[12],u=n[1],c=n[5],d=n[9],f=n[13],h=n[2],p=n[6],m=n[10],g=n[14],v=n[3],y=n[7],b=n[11],_=n[15],w=r[0],A=r[4],E=r[8],x=r[12],S=r[1],T=r[5],C=r[9],I=r[13],k=r[2],P=r[6],R=r[10],O=r[14],M=r[3],L=r[7],D=r[11],N=r[15];return i[0]=o*w+a*S+s*k+l*M,i[4]=o*A+a*T+s*P+l*L,i[8]=o*E+a*C+s*R+l*D,i[12]=o*x+a*I+s*O+l*N,i[1]=u*w+c*S+d*k+f*M,i[5]=u*A+c*T+d*P+f*L,i[9]=u*E+c*C+d*R+f*D,i[13]=u*x+c*I+d*O+f*N,i[2]=h*w+p*S+m*k+g*M,i[6]=h*A+p*T+m*P+g*L,i[10]=h*E+p*C+m*R+g*D,i[14]=h*x+p*I+m*O+g*N,i[3]=v*w+y*S+b*k+_*M,i[7]=v*A+y*T+b*P+_*L,i[11]=v*E+y*C+b*R+_*D,i[15]=v*x+y*I+b*O+_*N,this}multiplyScalar(t){const e=this.elements;return e[0]*=t,e[4]*=t,e[8]*=t,e[12]*=t,e[1]*=t,e[5]*=t,e[9]*=t,e[13]*=t,e[2]*=t,e[6]*=t,e[10]*=t,e[14]*=t,e[3]*=t,e[7]*=t,e[11]*=t,e[15]*=t,this}determinant(){const t=this.elements,e=t[0],n=t[4],r=t[8],i=t[12],o=t[1],a=t[5],s=t[9],l=t[13],u=t[2],c=t[6],d=t[10],f=t[14];return t[3]*(+i*s*c-r*l*c-i*a*d+n*l*d+r*a*f-n*s*f)+t[7]*(+e*s*f-e*l*d+i*o*d-r*o*f+r*l*u-i*s*u)+t[11]*(+e*l*c-e*a*f-i*o*c+n*o*f+i*a*u-n*l*u)+t[15]*(-r*a*u-e*s*c+e*a*d+r*o*c-n*o*d+n*s*u)}transpose(){const t=this.elements;let e;return e=t[1],t[1]=t[4],t[4]=e,e=t[2],t[2]=t[8],t[8]=e,e=t[6],t[6]=t[9],t[9]=e,e=t[3],t[3]=t[12],t[12]=e,e=t[7],t[7]=t[13],t[13]=e,e=t[11],t[11]=t[14],t[14]=e,this}setPosition(t,e,n){const r=this.elements;return t.isVector3?(r[12]=t.x,r[13]=t.y,r[14]=t.z):(r[12]=t,r[13]=e,r[14]=n),this}invert(){const t=this.elements,e=t[0],n=t[1],r=t[2],i=t[3],o=t[4],a=t[5],s=t[6],l=t[7],u=t[8],c=t[9],d=t[10],f=t[11],h=t[12],p=t[13],m=t[14],g=t[15],v=c*m*l-p*d*l+p*s*f-a*m*f-c*s*g+a*d*g,y=h*d*l-u*m*l-h*s*f+o*m*f+u*s*g-o*d*g,b=u*p*l-h*c*l+h*a*f-o*p*f-u*a*g+o*c*g,_=h*c*s-u*p*s-h*a*d+o*p*d+u*a*m-o*c*m,w=e*v+n*y+r*b+i*_;if(0===w)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const A=1/w;return t[0]=v*A,t[1]=(p*d*i-c*m*i-p*r*f+n*m*f+c*r*g-n*d*g)*A,t[2]=(a*m*i-p*s*i+p*r*l-n*m*l-a*r*g+n*s*g)*A,t[3]=(c*s*i-a*d*i-c*r*l+n*d*l+a*r*f-n*s*f)*A,t[4]=y*A,t[5]=(u*m*i-h*d*i+h*r*f-e*m*f-u*r*g+e*d*g)*A,t[6]=(h*s*i-o*m*i-h*r*l+e*m*l+o*r*g-e*s*g)*A,t[7]=(o*d*i-u*s*i+u*r*l-e*d*l-o*r*f+e*s*f)*A,t[8]=b*A,t[9]=(h*c*i-u*p*i-h*n*f+e*p*f+u*n*g-e*c*g)*A,t[10]=(o*p*i-h*a*i+h*n*l-e*p*l-o*n*g+e*a*g)*A,t[11]=(u*a*i-o*c*i-u*n*l+e*c*l+o*n*f-e*a*f)*A,t[12]=_*A,t[13]=(u*p*r-h*c*r+h*n*d-e*p*d-u*n*m+e*c*m)*A,t[14]=(h*a*r-o*p*r-h*n*s+e*p*s+o*n*m-e*a*m)*A,t[15]=(o*c*r-u*a*r+u*n*s-e*c*s-o*n*d+e*a*d)*A,this}scale(t){const e=this.elements,n=t.x,r=t.y,i=t.z;return e[0]*=n,e[4]*=r,e[8]*=i,e[1]*=n,e[5]*=r,e[9]*=i,e[2]*=n,e[6]*=r,e[10]*=i,e[3]*=n,e[7]*=r,e[11]*=i,this}getMaxScaleOnAxis(){const t=this.elements,e=t[0]*t[0]+t[1]*t[1]+t[2]*t[2],n=t[4]*t[4]+t[5]*t[5]+t[6]*t[6],r=t[8]*t[8]+t[9]*t[9]+t[10]*t[10];return Math.sqrt(Math.max(e,n,r))}makeTranslation(t,e,n){return this.set(1,0,0,t,0,1,0,e,0,0,1,n,0,0,0,1),this}makeRotationX(t){const e=Math.cos(t),n=Math.sin(t);return this.set(1,0,0,0,0,e,-n,0,0,n,e,0,0,0,0,1),this}makeRotationY(t){const e=Math.cos(t),n=Math.sin(t);return this.set(e,0,n,0,0,1,0,0,-n,0,e,0,0,0,0,1),this}makeRotationZ(t){const e=Math.cos(t),n=Math.sin(t);return this.set(e,-n,0,0,n,e,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(t,e){const n=Math.cos(e),r=Math.sin(e),i=1-n,o=t.x,a=t.y,s=t.z,l=i*o,u=i*a;return this.set(l*o+n,l*a-r*s,l*s+r*a,0,l*a+r*s,u*a+n,u*s-r*o,0,l*s-r*a,u*s+r*o,i*s*s+n,0,0,0,0,1),this}makeScale(t,e,n){return this.set(t,0,0,0,0,e,0,0,0,0,n,0,0,0,0,1),this}makeShear(t,e,n,r,i,o){return this.set(1,n,i,0,t,1,o,0,e,r,1,0,0,0,0,1),this}compose(t,e,n){const r=this.elements,i=e._x,o=e._y,a=e._z,s=e._w,l=i+i,u=o+o,c=a+a,d=i*l,f=i*u,h=i*c,p=o*u,m=o*c,g=a*c,v=s*l,y=s*u,b=s*c,_=n.x,w=n.y,A=n.z;return r[0]=(1-(p+g))*_,r[1]=(f+b)*_,r[2]=(h-y)*_,r[3]=0,r[4]=(f-b)*w,r[5]=(1-(d+g))*w,r[6]=(m+v)*w,r[7]=0,r[8]=(h+y)*A,r[9]=(m-v)*A,r[10]=(1-(d+p))*A,r[11]=0,r[12]=t.x,r[13]=t.y,r[14]=t.z,r[15]=1,this}decompose(t,e,n){const r=this.elements;let i=Tb.set(r[0],r[1],r[2]).length();const o=Tb.set(r[4],r[5],r[6]).length(),a=Tb.set(r[8],r[9],r[10]).length();this.determinant()<0&&(i=-i),t.x=r[12],t.y=r[13],t.z=r[14],Cb.copy(this);const s=1/i,l=1/o,u=1/a;return Cb.elements[0]*=s,Cb.elements[1]*=s,Cb.elements[2]*=s,Cb.elements[4]*=l,Cb.elements[5]*=l,Cb.elements[6]*=l,Cb.elements[8]*=u,Cb.elements[9]*=u,Cb.elements[10]*=u,e.setFromRotationMatrix(Cb),n.x=i,n.y=o,n.z=a,this}makePerspective(t,e,n,r,i,o){const a=this.elements,s=2*i/(e-t),l=2*i/(n-r),u=(e+t)/(e-t),c=(n+r)/(n-r),d=-(o+i)/(o-i),f=-2*o*i/(o-i);return a[0]=s,a[4]=0,a[8]=u,a[12]=0,a[1]=0,a[5]=l,a[9]=c,a[13]=0,a[2]=0,a[6]=0,a[10]=d,a[14]=f,a[3]=0,a[7]=0,a[11]=-1,a[15]=0,this}makeOrthographic(t,e,n,r,i,o){const a=this.elements,s=1/(e-t),l=1/(n-r),u=1/(o-i),c=(e+t)*s,d=(n+r)*l,f=(o+i)*u;return a[0]=2*s,a[4]=0,a[8]=0,a[12]=-c,a[1]=0,a[5]=2*l,a[9]=0,a[13]=-d,a[2]=0,a[6]=0,a[10]=-2*u,a[14]=-f,a[3]=0,a[7]=0,a[11]=0,a[15]=1,this}equals(t){const e=this.elements,n=t.elements;for(let t=0;t<16;t++)if(e[t]!==n[t])return!1;return!0}fromArray(t,e=0){for(let n=0;n<16;n++)this.elements[n]=t[n+e];return this}toArray(t=[],e=0){const n=this.elements;return t[e]=n[0],t[e+1]=n[1],t[e+2]=n[2],t[e+3]=n[3],t[e+4]=n[4],t[e+5]=n[5],t[e+6]=n[6],t[e+7]=n[7],t[e+8]=n[8],t[e+9]=n[9],t[e+10]=n[10],t[e+11]=n[11],t[e+12]=n[12],t[e+13]=n[13],t[e+14]=n[14],t[e+15]=n[15],t}}const Tb=new Ky,Cb=new Sb,Ib=new Ky(0,0,0),kb=new Ky(1,1,1),Pb=new Ky,Rb=new Ky,Ob=new Ky,Mb=new Sb,Lb=new Yy;class Db{constructor(t=0,e=0,n=0,r=Db.DEFAULT_ORDER){this.isEuler=!0,this._x=t,this._y=e,this._z=n,this._order=r}get x(){return this._x}set x(t){this._x=t,this._onChangeCallback()}get y(){return this._y}set y(t){this._y=t,this._onChangeCallback()}get z(){return this._z}set z(t){this._z=t,this._onChangeCallback()}get order(){return this._order}set order(t){this._order=t,this._onChangeCallback()}set(t,e,n,r=this._order){return this._x=t,this._y=e,this._z=n,this._order=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(t){return this._x=t._x,this._y=t._y,this._z=t._z,this._order=t._order,this._onChangeCallback(),this}setFromRotationMatrix(t,e=this._order,n=!0){const r=t.elements,i=r[0],o=r[4],a=r[8],s=r[1],l=r[5],u=r[9],c=r[2],d=r[6],f=r[10];switch(e){case"XYZ":this._y=Math.asin(hy(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(-u,f),this._z=Math.atan2(-o,i)):(this._x=Math.atan2(d,l),this._z=0);break;case"YXZ":this._x=Math.asin(-hy(u,-1,1)),Math.abs(u)<.9999999?(this._y=Math.atan2(a,f),this._z=Math.atan2(s,l)):(this._y=Math.atan2(-c,i),this._z=0);break;case"ZXY":this._x=Math.asin(hy(d,-1,1)),Math.abs(d)<.9999999?(this._y=Math.atan2(-c,f),this._z=Math.atan2(-o,l)):(this._y=0,this._z=Math.atan2(s,i));break;case"ZYX":this._y=Math.asin(-hy(c,-1,1)),Math.abs(c)<.9999999?(this._x=Math.atan2(d,f),this._z=Math.atan2(s,i)):(this._x=0,this._z=Math.atan2(-o,l));break;case"YZX":this._z=Math.asin(hy(s,-1,1)),Math.abs(s)<.9999999?(this._x=Math.atan2(-u,l),this._y=Math.atan2(-c,i)):(this._x=0,this._y=Math.atan2(a,f));break;case"XZY":this._z=Math.asin(-hy(o,-1,1)),Math.abs(o)<.9999999?(this._x=Math.atan2(d,l),this._y=Math.atan2(a,i)):(this._x=Math.atan2(-u,f),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+e)}return this._order=e,!0===n&&this._onChangeCallback(),this}setFromQuaternion(t,e,n){return Mb.makeRotationFromQuaternion(t),this.setFromRotationMatrix(Mb,e,n)}setFromVector3(t,e=this._order){return this.set(t.x,t.y,t.z,e)}reorder(t){return Lb.setFromEuler(this),this.setFromQuaternion(Lb,t)}equals(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._order===this._order}fromArray(t){return this._x=t[0],this._y=t[1],this._z=t[2],void 0!==t[3]&&(this._order=t[3]),this._onChangeCallback(),this}toArray(t=[],e=0){return t[e]=this._x,t[e+1]=this._y,t[e+2]=this._z,t[e+3]=this._order,t}_onChange(t){return this._onChangeCallback=t,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}}Db.DEFAULT_ORDER="XYZ";class Nb{constructor(){this.mask=1}set(t){this.mask=1<<t>>>0}enable(t){this.mask|=1<<t}enableAll(){this.mask=-1}toggle(t){this.mask^=1<<t}disable(t){this.mask&=~(1<<t)}disableAll(){this.mask=0}test(t){return!!(this.mask&t.mask)}isEnabled(t){return!!(this.mask&1<<t)}}let Bb=0;const jb=new Ky,zb=new Yy,Fb=new Sb,Ub=new Ky,qb=new Ky,Gb=new Ky,Hb=new Yy,Vb=new Ky(1,0,0),Qb=new Ky(0,1,0),Wb=new Ky(0,0,1),Yb={type:"added"},Kb={type:"removed"};class Xb extends sy{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:Bb++}),this.uuid=fy(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=Xb.DEFAULT_UP.clone();const t=new Ky,e=new Db,n=new Yy,r=new Ky(1,1,1);e._onChange((function(){n.setFromEuler(e,!1)})),n._onChange((function(){e.setFromQuaternion(n,void 0,!1)})),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:t},rotation:{configurable:!0,enumerable:!0,value:e},quaternion:{configurable:!0,enumerable:!0,value:n},scale:{configurable:!0,enumerable:!0,value:r},modelViewMatrix:{value:new Sb},normalMatrix:{value:new Ey}}),this.matrix=new Sb,this.matrixWorld=new Sb,this.matrixAutoUpdate=Xb.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.matrixWorldAutoUpdate=Xb.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.layers=new Nb,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeRender(){}onAfterRender(){}applyMatrix4(t){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(t),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(t){return this.quaternion.premultiply(t),this}setRotationFromAxisAngle(t,e){this.quaternion.setFromAxisAngle(t,e)}setRotationFromEuler(t){this.quaternion.setFromEuler(t,!0)}setRotationFromMatrix(t){this.quaternion.setFromRotationMatrix(t)}setRotationFromQuaternion(t){this.quaternion.copy(t)}rotateOnAxis(t,e){return zb.setFromAxisAngle(t,e),this.quaternion.multiply(zb),this}rotateOnWorldAxis(t,e){return zb.setFromAxisAngle(t,e),this.quaternion.premultiply(zb),this}rotateX(t){return this.rotateOnAxis(Vb,t)}rotateY(t){return this.rotateOnAxis(Qb,t)}rotateZ(t){return this.rotateOnAxis(Wb,t)}translateOnAxis(t,e){return jb.copy(t).applyQuaternion(this.quaternion),this.position.add(jb.multiplyScalar(e)),this}translateX(t){return this.translateOnAxis(Vb,t)}translateY(t){return this.translateOnAxis(Qb,t)}translateZ(t){return this.translateOnAxis(Wb,t)}localToWorld(t){return this.updateWorldMatrix(!0,!1),t.applyMatrix4(this.matrixWorld)}worldToLocal(t){return this.updateWorldMatrix(!0,!1),t.applyMatrix4(Fb.copy(this.matrixWorld).invert())}lookAt(t,e,n){t.isVector3?Ub.copy(t):Ub.set(t,e,n);const r=this.parent;this.updateWorldMatrix(!0,!1),qb.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?Fb.lookAt(qb,Ub,this.up):Fb.lookAt(Ub,qb,this.up),this.quaternion.setFromRotationMatrix(Fb),r&&(Fb.extractRotation(r.matrixWorld),zb.setFromRotationMatrix(Fb),this.quaternion.premultiply(zb.invert()))}add(t){if(arguments.length>1){for(let t=0;t<arguments.length;t++)this.add(arguments[t]);return this}return t===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",t),this):(t&&t.isObject3D?(null!==t.parent&&t.parent.remove(t),t.parent=this,this.children.push(t),t.dispatchEvent(Yb)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",t),this)}remove(t){if(arguments.length>1){for(let t=0;t<arguments.length;t++)this.remove(arguments[t]);return this}const e=this.children.indexOf(t);return-1!==e&&(t.parent=null,this.children.splice(e,1),t.dispatchEvent(Kb)),this}removeFromParent(){const t=this.parent;return null!==t&&t.remove(this),this}clear(){for(let t=0;t<this.children.length;t++){const e=this.children[t];e.parent=null,e.dispatchEvent(Kb)}return this.children.length=0,this}attach(t){return this.updateWorldMatrix(!0,!1),Fb.copy(this.matrixWorld).invert(),null!==t.parent&&(t.parent.updateWorldMatrix(!0,!1),Fb.multiply(t.parent.matrixWorld)),t.applyMatrix4(Fb),this.add(t),t.updateWorldMatrix(!1,!0),this}getObjectById(t){return this.getObjectByProperty("id",t)}getObjectByName(t){return this.getObjectByProperty("name",t)}getObjectByProperty(t,e){if(this[t]===e)return this;for(let n=0,r=this.children.length;n<r;n++){const r=this.children[n].getObjectByProperty(t,e);if(void 0!==r)return r}}getObjectsByProperty(t,e){let n=[];this[t]===e&&n.push(this);for(let r=0,i=this.children.length;r<i;r++){const i=this.children[r].getObjectsByProperty(t,e);i.length>0&&(n=n.concat(i))}return n}getWorldPosition(t){return this.updateWorldMatrix(!0,!1),t.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(t){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(qb,t,Gb),t}getWorldScale(t){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(qb,Hb,t),t}getWorldDirection(t){this.updateWorldMatrix(!0,!1);const e=this.matrixWorld.elements;return t.set(e[8],e[9],e[10]).normalize()}raycast(){}traverse(t){t(this);const e=this.children;for(let n=0,r=e.length;n<r;n++)e[n].traverse(t)}traverseVisible(t){if(!1===this.visible)return;t(this);const e=this.children;for(let n=0,r=e.length;n<r;n++)e[n].traverseVisible(t)}traverseAncestors(t){const e=this.parent;null!==e&&(t(e),e.traverseAncestors(t))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(t){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||t)&&(null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,t=!0);const e=this.children;for(let n=0,r=e.length;n<r;n++){const r=e[n];!0!==r.matrixWorldAutoUpdate&&!0!==t||r.updateMatrixWorld(t)}}updateWorldMatrix(t,e){const n=this.parent;if(!0===t&&null!==n&&!0===n.matrixWorldAutoUpdate&&n.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),!0===e){const t=this.children;for(let e=0,n=t.length;e<n;e++){const n=t[e];!0===n.matrixWorldAutoUpdate&&n.updateWorldMatrix(!1,!0)}}}toJSON(t){const e=void 0===t||"string"==typeof t,n={};e&&(t={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},n.metadata={version:4.5,type:"Object",generator:"Object3D.toJSON"});const r={};function i(e,n){return void 0===e[n.uuid]&&(e[n.uuid]=n.toJSON(t)),n.uuid}if(r.uuid=this.uuid,r.type=this.type,""!==this.name&&(r.name=this.name),!0===this.castShadow&&(r.castShadow=!0),!0===this.receiveShadow&&(r.receiveShadow=!0),!1===this.visible&&(r.visible=!1),!1===this.frustumCulled&&(r.frustumCulled=!1),0!==this.renderOrder&&(r.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(r.userData=this.userData),r.layers=this.layers.mask,r.matrix=this.matrix.toArray(),!1===this.matrixAutoUpdate&&(r.matrixAutoUpdate=!1),this.isInstancedMesh&&(r.type="InstancedMesh",r.count=this.count,r.instanceMatrix=this.instanceMatrix.toJSON(),null!==this.instanceColor&&(r.instanceColor=this.instanceColor.toJSON())),this.isScene)this.background&&(this.background.isColor?r.background=this.background.toJSON():this.background.isTexture&&(r.background=this.background.toJSON(t).uuid)),this.environment&&this.environment.isTexture&&!0!==this.environment.isRenderTargetTexture&&(r.environment=this.environment.toJSON(t).uuid);else if(this.isMesh||this.isLine||this.isPoints){r.geometry=i(t.geometries,this.geometry);const e=this.geometry.parameters;if(void 0!==e&&void 0!==e.shapes){const n=e.shapes;if(Array.isArray(n))for(let e=0,r=n.length;e<r;e++){const r=n[e];i(t.shapes,r)}else i(t.shapes,n)}}if(this.isSkinnedMesh&&(r.bindMode=this.bindMode,r.bindMatrix=this.bindMatrix.toArray(),void 0!==this.skeleton&&(i(t.skeletons,this.skeleton),r.skeleton=this.skeleton.uuid)),void 0!==this.material)if(Array.isArray(this.material)){const e=[];for(let n=0,r=this.material.length;n<r;n++)e.push(i(t.materials,this.material[n]));r.material=e}else r.material=i(t.materials,this.material);if(this.children.length>0){r.children=[];for(let e=0;e<this.children.length;e++)r.children.push(this.children[e].toJSON(t).object)}if(this.animations.length>0){r.animations=[];for(let e=0;e<this.animations.length;e++){const n=this.animations[e];r.animations.push(i(t.animations,n))}}if(e){const e=o(t.geometries),r=o(t.materials),i=o(t.textures),a=o(t.images),s=o(t.shapes),l=o(t.skeletons),u=o(t.animations),c=o(t.nodes);e.length>0&&(n.geometries=e),r.length>0&&(n.materials=r),i.length>0&&(n.textures=i),a.length>0&&(n.images=a),s.length>0&&(n.shapes=s),l.length>0&&(n.skeletons=l),u.length>0&&(n.animations=u),c.length>0&&(n.nodes=c)}return n.object=r,n;function o(t){const e=[];for(const n in t){const r=t[n];delete r.metadata,e.push(r)}return e}}clone(t){return(new this.constructor).copy(this,t)}copy(t,e=!0){if(this.name=t.name,this.up.copy(t.up),this.position.copy(t.position),this.rotation.order=t.rotation.order,this.quaternion.copy(t.quaternion),this.scale.copy(t.scale),this.matrix.copy(t.matrix),this.matrixWorld.copy(t.matrixWorld),this.matrixAutoUpdate=t.matrixAutoUpdate,this.matrixWorldNeedsUpdate=t.matrixWorldNeedsUpdate,this.matrixWorldAutoUpdate=t.matrixWorldAutoUpdate,this.layers.mask=t.layers.mask,this.visible=t.visible,this.castShadow=t.castShadow,this.receiveShadow=t.receiveShadow,this.frustumCulled=t.frustumCulled,this.renderOrder=t.renderOrder,this.userData=JSON.parse(JSON.stringify(t.userData)),!0===e)for(let e=0;e<t.children.length;e++){const n=t.children[e];this.add(n.clone())}return this}}Xb.DEFAULT_UP=new Ky(0,1,0),Xb.DEFAULT_MATRIX_AUTO_UPDATE=!0,Xb.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0;const $b=new Ky,Zb=new Ky,Jb=new Ky,t_=new Ky,e_=new Ky,n_=new Ky,r_=new Ky,i_=new Ky,o_=new Ky,a_=new Ky;class s_{constructor(t=new Ky,e=new Ky,n=new Ky){this.a=t,this.b=e,this.c=n}static getNormal(t,e,n,r){r.subVectors(n,e),$b.subVectors(t,e),r.cross($b);const i=r.lengthSq();return i>0?r.multiplyScalar(1/Math.sqrt(i)):r.set(0,0,0)}static getBarycoord(t,e,n,r,i){$b.subVectors(r,e),Zb.subVectors(n,e),Jb.subVectors(t,e);const o=$b.dot($b),a=$b.dot(Zb),s=$b.dot(Jb),l=Zb.dot(Zb),u=Zb.dot(Jb),c=o*l-a*a;if(0===c)return i.set(-2,-1,-1);const d=1/c,f=(l*s-a*u)*d,h=(o*u-a*s)*d;return i.set(1-f-h,h,f)}static containsPoint(t,e,n,r){return this.getBarycoord(t,e,n,r,t_),t_.x>=0&&t_.y>=0&&t_.x+t_.y<=1}static getUV(t,e,n,r,i,o,a,s){return this.getBarycoord(t,e,n,r,t_),s.set(0,0),s.addScaledVector(i,t_.x),s.addScaledVector(o,t_.y),s.addScaledVector(a,t_.z),s}static isFrontFacing(t,e,n,r){return $b.subVectors(n,e),Zb.subVectors(t,e),$b.cross(Zb).dot(r)<0}set(t,e,n){return this.a.copy(t),this.b.copy(e),this.c.copy(n),this}setFromPointsAndIndices(t,e,n,r){return this.a.copy(t[e]),this.b.copy(t[n]),this.c.copy(t[r]),this}setFromAttributeAndIndices(t,e,n,r){return this.a.fromBufferAttribute(t,e),this.b.fromBufferAttribute(t,n),this.c.fromBufferAttribute(t,r),this}clone(){return(new this.constructor).copy(this)}copy(t){return this.a.copy(t.a),this.b.copy(t.b),this.c.copy(t.c),this}getArea(){return $b.subVectors(this.c,this.b),Zb.subVectors(this.a,this.b),.5*$b.cross(Zb).length()}getMidpoint(t){return t.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(t){return s_.getNormal(this.a,this.b,this.c,t)}getPlane(t){return t.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(t,e){return s_.getBarycoord(t,this.a,this.b,this.c,e)}getUV(t,e,n,r,i){return s_.getUV(t,this.a,this.b,this.c,e,n,r,i)}containsPoint(t){return s_.containsPoint(t,this.a,this.b,this.c)}isFrontFacing(t){return s_.isFrontFacing(this.a,this.b,this.c,t)}intersectsBox(t){return t.intersectsTriangle(this)}closestPointToPoint(t,e){const n=this.a,r=this.b,i=this.c;let o,a;e_.subVectors(r,n),n_.subVectors(i,n),i_.subVectors(t,n);const s=e_.dot(i_),l=n_.dot(i_);if(s<=0&&l<=0)return e.copy(n);o_.subVectors(t,r);const u=e_.dot(o_),c=n_.dot(o_);if(u>=0&&c<=u)return e.copy(r);const d=s*c-u*l;if(d<=0&&s>=0&&u<=0)return o=s/(s-u),e.copy(n).addScaledVector(e_,o);a_.subVectors(t,i);const f=e_.dot(a_),h=n_.dot(a_);if(h>=0&&f<=h)return e.copy(i);const p=f*l-s*h;if(p<=0&&l>=0&&h<=0)return a=l/(l-h),e.copy(n).addScaledVector(n_,a);const m=u*h-f*c;if(m<=0&&c-u>=0&&f-h>=0)return r_.subVectors(i,r),a=(c-u)/(c-u+(f-h)),e.copy(r).addScaledVector(r_,a);const g=1/(m+p+d);return o=p*g,a=d*g,e.copy(n).addScaledVector(e_,o).addScaledVector(n_,a)}equals(t){return t.a.equals(this.a)&&t.b.equals(this.b)&&t.c.equals(this.c)}}let l_=0;class u_ extends sy{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:l_++}),this.uuid=fy(),this.name="",this.type="Material",this.blending=Qm,this.side=qm,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.blendSrc=ag,this.blendDst=sg,this.blendEquation=$m,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.depthFunc=gg,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=519,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=ny,this.stencilZFail=ny,this.stencilZPass=ny,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(t){this._alphaTest>0!=t>0&&this.version++,this._alphaTest=t}onBuild(){}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(t){if(void 0!==t)for(const e in t){const n=t[e];if(void 0===n){console.warn("THREE.Material: '"+e+"' parameter is undefined.");continue}const r=this[e];void 0!==r?r&&r.isColor?r.set(n):r&&r.isVector3&&n&&n.isVector3?r.copy(n):this[e]=n:console.warn("THREE."+this.type+": '"+e+"' is not a property of this material.")}}toJSON(t){const e=void 0===t||"string"==typeof t;e&&(t={textures:{},images:{}});const n={metadata:{version:4.5,type:"Material",generator:"Material.toJSON"}};function r(t){const e=[];for(const n in t){const r=t[n];delete r.metadata,e.push(r)}return e}if(n.uuid=this.uuid,n.type=this.type,""!==this.name&&(n.name=this.name),this.color&&this.color.isColor&&(n.color=this.color.getHex()),void 0!==this.roughness&&(n.roughness=this.roughness),void 0!==this.metalness&&(n.metalness=this.metalness),void 0!==this.sheen&&(n.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(n.sheenColor=this.sheenColor.getHex()),void 0!==this.sheenRoughness&&(n.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(n.emissive=this.emissive.getHex()),this.emissiveIntensity&&1!==this.emissiveIntensity&&(n.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(n.specular=this.specular.getHex()),void 0!==this.specularIntensity&&(n.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(n.specularColor=this.specularColor.getHex()),void 0!==this.shininess&&(n.shininess=this.shininess),void 0!==this.clearcoat&&(n.clearcoat=this.clearcoat),void 0!==this.clearcoatRoughness&&(n.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(n.clearcoatMap=this.clearcoatMap.toJSON(t).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(n.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(t).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(n.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(t).uuid,n.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),void 0!==this.iridescence&&(n.iridescence=this.iridescence),void 0!==this.iridescenceIOR&&(n.iridescenceIOR=this.iridescenceIOR),void 0!==this.iridescenceThicknessRange&&(n.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(n.iridescenceMap=this.iridescenceMap.toJSON(t).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(n.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(t).uuid),this.map&&this.map.isTexture&&(n.map=this.map.toJSON(t).uuid),this.matcap&&this.matcap.isTexture&&(n.matcap=this.matcap.toJSON(t).uuid),this.alphaMap&&this.alphaMap.isTexture&&(n.alphaMap=this.alphaMap.toJSON(t).uuid),this.lightMap&&this.lightMap.isTexture&&(n.lightMap=this.lightMap.toJSON(t).uuid,n.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(n.aoMap=this.aoMap.toJSON(t).uuid,n.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(n.bumpMap=this.bumpMap.toJSON(t).uuid,n.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(n.normalMap=this.normalMap.toJSON(t).uuid,n.normalMapType=this.normalMapType,n.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(n.displacementMap=this.displacementMap.toJSON(t).uuid,n.displacementScale=this.displacementScale,n.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(n.roughnessMap=this.roughnessMap.toJSON(t).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(n.metalnessMap=this.metalnessMap.toJSON(t).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(n.emissiveMap=this.emissiveMap.toJSON(t).uuid),this.specularMap&&this.specularMap.isTexture&&(n.specularMap=this.specularMap.toJSON(t).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(n.specularIntensityMap=this.specularIntensityMap.toJSON(t).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(n.specularColorMap=this.specularColorMap.toJSON(t).uuid),this.envMap&&this.envMap.isTexture&&(n.envMap=this.envMap.toJSON(t).uuid,void 0!==this.combine&&(n.combine=this.combine)),void 0!==this.envMapIntensity&&(n.envMapIntensity=this.envMapIntensity),void 0!==this.reflectivity&&(n.reflectivity=this.reflectivity),void 0!==this.refractionRatio&&(n.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(n.gradientMap=this.gradientMap.toJSON(t).uuid),void 0!==this.transmission&&(n.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(n.transmissionMap=this.transmissionMap.toJSON(t).uuid),void 0!==this.thickness&&(n.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(n.thicknessMap=this.thicknessMap.toJSON(t).uuid),void 0!==this.attenuationDistance&&this.attenuationDistance!==1/0&&(n.attenuationDistance=this.attenuationDistance),void 0!==this.attenuationColor&&(n.attenuationColor=this.attenuationColor.getHex()),void 0!==this.size&&(n.size=this.size),null!==this.shadowSide&&(n.shadowSide=this.shadowSide),void 0!==this.sizeAttenuation&&(n.sizeAttenuation=this.sizeAttenuation),this.blending!==Qm&&(n.blending=this.blending),this.side!==qm&&(n.side=this.side),this.vertexColors&&(n.vertexColors=!0),this.opacity<1&&(n.opacity=this.opacity),!0===this.transparent&&(n.transparent=this.transparent),n.depthFunc=this.depthFunc,n.depthTest=this.depthTest,n.depthWrite=this.depthWrite,n.colorWrite=this.colorWrite,n.stencilWrite=this.stencilWrite,n.stencilWriteMask=this.stencilWriteMask,n.stencilFunc=this.stencilFunc,n.stencilRef=this.stencilRef,n.stencilFuncMask=this.stencilFuncMask,n.stencilFail=this.stencilFail,n.stencilZFail=this.stencilZFail,n.stencilZPass=this.stencilZPass,void 0!==this.rotation&&0!==this.rotation&&(n.rotation=this.rotation),!0===this.polygonOffset&&(n.polygonOffset=!0),0!==this.polygonOffsetFactor&&(n.polygonOffsetFactor=this.polygonOffsetFactor),0!==this.polygonOffsetUnits&&(n.polygonOffsetUnits=this.polygonOffsetUnits),void 0!==this.linewidth&&1!==this.linewidth&&(n.linewidth=this.linewidth),void 0!==this.dashSize&&(n.dashSize=this.dashSize),void 0!==this.gapSize&&(n.gapSize=this.gapSize),void 0!==this.scale&&(n.scale=this.scale),!0===this.dithering&&(n.dithering=!0),this.alphaTest>0&&(n.alphaTest=this.alphaTest),!0===this.alphaToCoverage&&(n.alphaToCoverage=this.alphaToCoverage),!0===this.premultipliedAlpha&&(n.premultipliedAlpha=this.premultipliedAlpha),!0===this.forceSinglePass&&(n.forceSinglePass=this.forceSinglePass),!0===this.wireframe&&(n.wireframe=this.wireframe),this.wireframeLinewidth>1&&(n.wireframeLinewidth=this.wireframeLinewidth),"round"!==this.wireframeLinecap&&(n.wireframeLinecap=this.wireframeLinecap),"round"!==this.wireframeLinejoin&&(n.wireframeLinejoin=this.wireframeLinejoin),!0===this.flatShading&&(n.flatShading=this.flatShading),!1===this.visible&&(n.visible=!1),!1===this.toneMapped&&(n.toneMapped=!1),!1===this.fog&&(n.fog=!1),Object.keys(this.userData).length>0&&(n.userData=this.userData),e){const e=r(t.textures),i=r(t.images);e.length>0&&(n.textures=e),i.length>0&&(n.images=i)}return n}clone(){return(new this.constructor).copy(this)}copy(t){this.name=t.name,this.blending=t.blending,this.side=t.side,this.vertexColors=t.vertexColors,this.opacity=t.opacity,this.transparent=t.transparent,this.blendSrc=t.blendSrc,this.blendDst=t.blendDst,this.blendEquation=t.blendEquation,this.blendSrcAlpha=t.blendSrcAlpha,this.blendDstAlpha=t.blendDstAlpha,this.blendEquationAlpha=t.blendEquationAlpha,this.depthFunc=t.depthFunc,this.depthTest=t.depthTest,this.depthWrite=t.depthWrite,this.stencilWriteMask=t.stencilWriteMask,this.stencilFunc=t.stencilFunc,this.stencilRef=t.stencilRef,this.stencilFuncMask=t.stencilFuncMask,this.stencilFail=t.stencilFail,this.stencilZFail=t.stencilZFail,this.stencilZPass=t.stencilZPass,this.stencilWrite=t.stencilWrite;const e=t.clippingPlanes;let n=null;if(null!==e){const t=e.length;n=new Array(t);for(let r=0;r!==t;++r)n[r]=e[r].clone()}return this.clippingPlanes=n,this.clipIntersection=t.clipIntersection,this.clipShadows=t.clipShadows,this.shadowSide=t.shadowSide,this.colorWrite=t.colorWrite,this.precision=t.precision,this.polygonOffset=t.polygonOffset,this.polygonOffsetFactor=t.polygonOffsetFactor,this.polygonOffsetUnits=t.polygonOffsetUnits,this.dithering=t.dithering,this.alphaTest=t.alphaTest,this.alphaToCoverage=t.alphaToCoverage,this.premultipliedAlpha=t.premultipliedAlpha,this.forceSinglePass=t.forceSinglePass,this.visible=t.visible,this.toneMapped=t.toneMapped,this.userData=JSON.parse(JSON.stringify(t.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(t){!0===t&&this.version++}}class c_ extends u_{constructor(t){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new By(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=wg,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.specularMap=t.specularMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.combine=t.combine,this.reflectivity=t.reflectivity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.fog=t.fog,this}}const d_=new Ky,f_=new Ay;class h_{constructor(t,e,n=!1){if(Array.isArray(t))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,this.name="",this.array=t,this.itemSize=e,this.count=void 0!==t?t.length/e:0,this.normalized=n,this.usage=ry,this.updateRange={offset:0,count:-1},this.version=0}onUploadCallback(){}set needsUpdate(t){!0===t&&this.version++}setUsage(t){return this.usage=t,this}copy(t){return this.name=t.name,this.array=new t.array.constructor(t.array),this.itemSize=t.itemSize,this.count=t.count,this.normalized=t.normalized,this.usage=t.usage,this}copyAt(t,e,n){t*=this.itemSize,n*=e.itemSize;for(let r=0,i=this.itemSize;r<i;r++)this.array[t+r]=e.array[n+r];return this}copyArray(t){return this.array.set(t),this}applyMatrix3(t){if(2===this.itemSize)for(let e=0,n=this.count;e<n;e++)f_.fromBufferAttribute(this,e),f_.applyMatrix3(t),this.setXY(e,f_.x,f_.y);else if(3===this.itemSize)for(let e=0,n=this.count;e<n;e++)d_.fromBufferAttribute(this,e),d_.applyMatrix3(t),this.setXYZ(e,d_.x,d_.y,d_.z);return this}applyMatrix4(t){for(let e=0,n=this.count;e<n;e++)d_.fromBufferAttribute(this,e),d_.applyMatrix4(t),this.setXYZ(e,d_.x,d_.y,d_.z);return this}applyNormalMatrix(t){for(let e=0,n=this.count;e<n;e++)d_.fromBufferAttribute(this,e),d_.applyNormalMatrix(t),this.setXYZ(e,d_.x,d_.y,d_.z);return this}transformDirection(t){for(let e=0,n=this.count;e<n;e++)d_.fromBufferAttribute(this,e),d_.transformDirection(t),this.setXYZ(e,d_.x,d_.y,d_.z);return this}set(t,e=0){return this.array.set(t,e),this}getX(t){let e=this.array[t*this.itemSize];return this.normalized&&(e=by(e,this.array)),e}setX(t,e){return this.normalized&&(e=_y(e,this.array)),this.array[t*this.itemSize]=e,this}getY(t){let e=this.array[t*this.itemSize+1];return this.normalized&&(e=by(e,this.array)),e}setY(t,e){return this.normalized&&(e=_y(e,this.array)),this.array[t*this.itemSize+1]=e,this}getZ(t){let e=this.array[t*this.itemSize+2];return this.normalized&&(e=by(e,this.array)),e}setZ(t,e){return this.normalized&&(e=_y(e,this.array)),this.array[t*this.itemSize+2]=e,this}getW(t){let e=this.array[t*this.itemSize+3];return this.normalized&&(e=by(e,this.array)),e}setW(t,e){return this.normalized&&(e=_y(e,this.array)),this.array[t*this.itemSize+3]=e,this}setXY(t,e,n){return t*=this.itemSize,this.normalized&&(e=_y(e,this.array),n=_y(n,this.array)),this.array[t+0]=e,this.array[t+1]=n,this}setXYZ(t,e,n,r){return t*=this.itemSize,this.normalized&&(e=_y(e,this.array),n=_y(n,this.array),r=_y(r,this.array)),this.array[t+0]=e,this.array[t+1]=n,this.array[t+2]=r,this}setXYZW(t,e,n,r,i){return t*=this.itemSize,this.normalized&&(e=_y(e,this.array),n=_y(n,this.array),r=_y(r,this.array),i=_y(i,this.array)),this.array[t+0]=e,this.array[t+1]=n,this.array[t+2]=r,this.array[t+3]=i,this}onUpload(t){return this.onUploadCallback=t,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const t={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return""!==this.name&&(t.name=this.name),this.usage!==ry&&(t.usage=this.usage),0===this.updateRange.offset&&-1===this.updateRange.count||(t.updateRange=this.updateRange),t}copyColorsArray(){console.error("THREE.BufferAttribute: copyColorsArray() was removed in r144.")}copyVector2sArray(){console.error("THREE.BufferAttribute: copyVector2sArray() was removed in r144.")}copyVector3sArray(){console.error("THREE.BufferAttribute: copyVector3sArray() was removed in r144.")}copyVector4sArray(){console.error("THREE.BufferAttribute: copyVector4sArray() was removed in r144.")}}class p_ extends h_{constructor(t,e,n){super(new Uint16Array(t),e,n)}}class m_ extends h_{constructor(t,e,n){super(new Uint32Array(t),e,n)}}class g_ extends h_{constructor(t,e,n){super(new Float32Array(t),e,n)}}let v_=0;const y_=new Sb,b_=new Xb,__=new Ky,w_=new Zy,A_=new Zy,E_=new Ky;class x_ extends sy{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:v_++}),this.uuid=fy(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(t){return Array.isArray(t)?this.index=new(Sy(t)?m_:p_)(t,1):this.index=t,this}getAttribute(t){return this.attributes[t]}setAttribute(t,e){return this.attributes[t]=e,this}deleteAttribute(t){return delete this.attributes[t],this}hasAttribute(t){return void 0!==this.attributes[t]}addGroup(t,e,n=0){this.groups.push({start:t,count:e,materialIndex:n})}clearGroups(){this.groups=[]}setDrawRange(t,e){this.drawRange.start=t,this.drawRange.count=e}applyMatrix4(t){const e=this.attributes.position;void 0!==e&&(e.applyMatrix4(t),e.needsUpdate=!0);const n=this.attributes.normal;if(void 0!==n){const e=(new Ey).getNormalMatrix(t);n.applyNormalMatrix(e),n.needsUpdate=!0}const r=this.attributes.tangent;return void 0!==r&&(r.transformDirection(t),r.needsUpdate=!0),null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this}applyQuaternion(t){return y_.makeRotationFromQuaternion(t),this.applyMatrix4(y_),this}rotateX(t){return y_.makeRotationX(t),this.applyMatrix4(y_),this}rotateY(t){return y_.makeRotationY(t),this.applyMatrix4(y_),this}rotateZ(t){return y_.makeRotationZ(t),this.applyMatrix4(y_),this}translate(t,e,n){return y_.makeTranslation(t,e,n),this.applyMatrix4(y_),this}scale(t,e,n){return y_.makeScale(t,e,n),this.applyMatrix4(y_),this}lookAt(t){return b_.lookAt(t),b_.updateMatrix(),this.applyMatrix4(b_.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(__).negate(),this.translate(__.x,__.y,__.z),this}setFromPoints(t){const e=[];for(let n=0,r=t.length;n<r;n++){const r=t[n];e.push(r.x,r.y,r.z||0)}return this.setAttribute("position",new g_(e,3)),this}computeBoundingBox(){null===this.boundingBox&&(this.boundingBox=new Zy);const t=this.attributes.position,e=this.morphAttributes.position;if(t&&t.isGLBufferAttribute)return console.error('THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box. Alternatively set "mesh.frustumCulled" to "false".',this),void this.boundingBox.set(new Ky(-1/0,-1/0,-1/0),new Ky(1/0,1/0,1/0));if(void 0!==t){if(this.boundingBox.setFromBufferAttribute(t),e)for(let t=0,n=e.length;t<n;t++){const n=e[t];w_.setFromBufferAttribute(n),this.morphTargetsRelative?(E_.addVectors(this.boundingBox.min,w_.min),this.boundingBox.expandByPoint(E_),E_.addVectors(this.boundingBox.max,w_.max),this.boundingBox.expandByPoint(E_)):(this.boundingBox.expandByPoint(w_.min),this.boundingBox.expandByPoint(w_.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){null===this.boundingSphere&&(this.boundingSphere=new gb);const t=this.attributes.position,e=this.morphAttributes.position;if(t&&t.isGLBufferAttribute)return console.error('THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere. Alternatively set "mesh.frustumCulled" to "false".',this),void this.boundingSphere.set(new Ky,1/0);if(t){const n=this.boundingSphere.center;if(w_.setFromBufferAttribute(t),e)for(let t=0,n=e.length;t<n;t++){const n=e[t];A_.setFromBufferAttribute(n),this.morphTargetsRelative?(E_.addVectors(w_.min,A_.min),w_.expandByPoint(E_),E_.addVectors(w_.max,A_.max),w_.expandByPoint(E_)):(w_.expandByPoint(A_.min),w_.expandByPoint(A_.max))}w_.getCenter(n);let r=0;for(let e=0,i=t.count;e<i;e++)E_.fromBufferAttribute(t,e),r=Math.max(r,n.distanceToSquared(E_));if(e)for(let i=0,o=e.length;i<o;i++){const o=e[i],a=this.morphTargetsRelative;for(let e=0,i=o.count;e<i;e++)E_.fromBufferAttribute(o,e),a&&(__.fromBufferAttribute(t,e),E_.add(__)),r=Math.max(r,n.distanceToSquared(E_))}this.boundingSphere.radius=Math.sqrt(r),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const t=this.index,e=this.attributes;if(null===t||void 0===e.position||void 0===e.normal||void 0===e.uv)return void console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");const n=t.array,r=e.position.array,i=e.normal.array,o=e.uv.array,a=r.length/3;!1===this.hasAttribute("tangent")&&this.setAttribute("tangent",new h_(new Float32Array(4*a),4));const s=this.getAttribute("tangent").array,l=[],u=[];for(let t=0;t<a;t++)l[t]=new Ky,u[t]=new Ky;const c=new Ky,d=new Ky,f=new Ky,h=new Ay,p=new Ay,m=new Ay,g=new Ky,v=new Ky;function y(t,e,n){c.fromArray(r,3*t),d.fromArray(r,3*e),f.fromArray(r,3*n),h.fromArray(o,2*t),p.fromArray(o,2*e),m.fromArray(o,2*n),d.sub(c),f.sub(c),p.sub(h),m.sub(h);const i=1/(p.x*m.y-m.x*p.y);isFinite(i)&&(g.copy(d).multiplyScalar(m.y).addScaledVector(f,-p.y).multiplyScalar(i),v.copy(f).multiplyScalar(p.x).addScaledVector(d,-m.x).multiplyScalar(i),l[t].add(g),l[e].add(g),l[n].add(g),u[t].add(v),u[e].add(v),u[n].add(v))}let b=this.groups;0===b.length&&(b=[{start:0,count:n.length}]);for(let t=0,e=b.length;t<e;++t){const e=b[t],r=e.start;for(let t=r,i=r+e.count;t<i;t+=3)y(n[t+0],n[t+1],n[t+2])}const _=new Ky,w=new Ky,A=new Ky,E=new Ky;function x(t){A.fromArray(i,3*t),E.copy(A);const e=l[t];_.copy(e),_.sub(A.multiplyScalar(A.dot(e))).normalize(),w.crossVectors(E,e);const n=w.dot(u[t])<0?-1:1;s[4*t]=_.x,s[4*t+1]=_.y,s[4*t+2]=_.z,s[4*t+3]=n}for(let t=0,e=b.length;t<e;++t){const e=b[t],r=e.start;for(let t=r,i=r+e.count;t<i;t+=3)x(n[t+0]),x(n[t+1]),x(n[t+2])}}computeVertexNormals(){const t=this.index,e=this.getAttribute("position");if(void 0!==e){let n=this.getAttribute("normal");if(void 0===n)n=new h_(new Float32Array(3*e.count),3),this.setAttribute("normal",n);else for(let t=0,e=n.count;t<e;t++)n.setXYZ(t,0,0,0);const r=new Ky,i=new Ky,o=new Ky,a=new Ky,s=new Ky,l=new Ky,u=new Ky,c=new Ky;if(t)for(let d=0,f=t.count;d<f;d+=3){const f=t.getX(d+0),h=t.getX(d+1),p=t.getX(d+2);r.fromBufferAttribute(e,f),i.fromBufferAttribute(e,h),o.fromBufferAttribute(e,p),u.subVectors(o,i),c.subVectors(r,i),u.cross(c),a.fromBufferAttribute(n,f),s.fromBufferAttribute(n,h),l.fromBufferAttribute(n,p),a.add(u),s.add(u),l.add(u),n.setXYZ(f,a.x,a.y,a.z),n.setXYZ(h,s.x,s.y,s.z),n.setXYZ(p,l.x,l.y,l.z)}else for(let t=0,a=e.count;t<a;t+=3)r.fromBufferAttribute(e,t+0),i.fromBufferAttribute(e,t+1),o.fromBufferAttribute(e,t+2),u.subVectors(o,i),c.subVectors(r,i),u.cross(c),n.setXYZ(t+0,u.x,u.y,u.z),n.setXYZ(t+1,u.x,u.y,u.z),n.setXYZ(t+2,u.x,u.y,u.z);this.normalizeNormals(),n.needsUpdate=!0}}merge(){return console.error("THREE.BufferGeometry.merge() has been removed. Use THREE.BufferGeometryUtils.mergeBufferGeometries() instead."),this}normalizeNormals(){const t=this.attributes.normal;for(let e=0,n=t.count;e<n;e++)E_.fromBufferAttribute(t,e),E_.normalize(),t.setXYZ(e,E_.x,E_.y,E_.z)}toNonIndexed(){function t(t,e){const n=t.array,r=t.itemSize,i=t.normalized,o=new n.constructor(e.length*r);let a=0,s=0;for(let i=0,l=e.length;i<l;i++){a=t.isInterleavedBufferAttribute?e[i]*t.data.stride+t.offset:e[i]*r;for(let t=0;t<r;t++)o[s++]=n[a++]}return new h_(o,r,i)}if(null===this.index)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const e=new x_,n=this.index.array,r=this.attributes;for(const i in r){const o=t(r[i],n);e.setAttribute(i,o)}const i=this.morphAttributes;for(const r in i){const o=[],a=i[r];for(let e=0,r=a.length;e<r;e++){const r=t(a[e],n);o.push(r)}e.morphAttributes[r]=o}e.morphTargetsRelative=this.morphTargetsRelative;const o=this.groups;for(let t=0,n=o.length;t<n;t++){const n=o[t];e.addGroup(n.start,n.count,n.materialIndex)}return e}toJSON(){const t={metadata:{version:4.5,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(t.uuid=this.uuid,t.type=this.type,""!==this.name&&(t.name=this.name),Object.keys(this.userData).length>0&&(t.userData=this.userData),void 0!==this.parameters){const e=this.parameters;for(const n in e)void 0!==e[n]&&(t[n]=e[n]);return t}t.data={attributes:{}};const e=this.index;null!==e&&(t.data.index={type:e.array.constructor.name,array:Array.prototype.slice.call(e.array)});const n=this.attributes;for(const e in n){const r=n[e];t.data.attributes[e]=r.toJSON(t.data)}const r={};let i=!1;for(const e in this.morphAttributes){const n=this.morphAttributes[e],o=[];for(let e=0,r=n.length;e<r;e++){const r=n[e];o.push(r.toJSON(t.data))}o.length>0&&(r[e]=o,i=!0)}i&&(t.data.morphAttributes=r,t.data.morphTargetsRelative=this.morphTargetsRelative);const o=this.groups;o.length>0&&(t.data.groups=JSON.parse(JSON.stringify(o)));const a=this.boundingSphere;return null!==a&&(t.data.boundingSphere={center:a.center.toArray(),radius:a.radius}),t}clone(){return(new this.constructor).copy(this)}copy(t){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const e={};this.name=t.name;const n=t.index;null!==n&&this.setIndex(n.clone(e));const r=t.attributes;for(const t in r){const n=r[t];this.setAttribute(t,n.clone(e))}const i=t.morphAttributes;for(const t in i){const n=[],r=i[t];for(let t=0,i=r.length;t<i;t++)n.push(r[t].clone(e));this.morphAttributes[t]=n}this.morphTargetsRelative=t.morphTargetsRelative;const o=t.groups;for(let t=0,e=o.length;t<e;t++){const e=o[t];this.addGroup(e.start,e.count,e.materialIndex)}const a=t.boundingBox;null!==a&&(this.boundingBox=a.clone());const s=t.boundingSphere;return null!==s&&(this.boundingSphere=s.clone()),this.drawRange.start=t.drawRange.start,this.drawRange.count=t.drawRange.count,this.userData=t.userData,void 0!==t.parameters&&(this.parameters=Object.assign({},t.parameters)),this}dispose(){this.dispatchEvent({type:"dispose"})}}const S_=new Sb,T_=new xb,C_=new gb,I_=new Ky,k_=new Ky,P_=new Ky,R_=new Ky,O_=new Ky,M_=new Ay,L_=new Ay,D_=new Ay,N_=new Ky,B_=new Ky;class j_ extends Xb{constructor(t=new x_,e=new c_){super(),this.isMesh=!0,this.type="Mesh",this.geometry=t,this.material=e,this.updateMorphTargets()}copy(t,e){return super.copy(t,e),void 0!==t.morphTargetInfluences&&(this.morphTargetInfluences=t.morphTargetInfluences.slice()),void 0!==t.morphTargetDictionary&&(this.morphTargetDictionary=Object.assign({},t.morphTargetDictionary)),this.material=t.material,this.geometry=t.geometry,this}updateMorphTargets(){const t=this.geometry.morphAttributes,e=Object.keys(t);if(e.length>0){const n=t[e[0]];if(void 0!==n){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let t=0,e=n.length;t<e;t++){const e=n[t].name||String(t);this.morphTargetInfluences.push(0),this.morphTargetDictionary[e]=t}}}}getVertexPosition(t,e){const n=this.geometry,r=n.attributes.position,i=n.morphAttributes.position,o=n.morphTargetsRelative;e.fromBufferAttribute(r,t);const a=this.morphTargetInfluences;if(i&&a){O_.set(0,0,0);for(let n=0,r=i.length;n<r;n++){const r=a[n],s=i[n];0!==r&&(R_.fromBufferAttribute(s,t),o?O_.addScaledVector(R_,r):O_.addScaledVector(R_.sub(e),r))}e.add(O_)}return this.isSkinnedMesh&&this.boneTransform(t,e),e}raycast(t,e){const n=this.geometry,r=this.material,i=this.matrixWorld;if(void 0===r)return;if(null===n.boundingSphere&&n.computeBoundingSphere(),C_.copy(n.boundingSphere),C_.applyMatrix4(i),!1===t.ray.intersectsSphere(C_))return;if(S_.copy(i).invert(),T_.copy(t.ray).applyMatrix4(S_),null!==n.boundingBox&&!1===T_.intersectsBox(n.boundingBox))return;let o;const a=n.index,s=n.attributes.position,l=n.attributes.uv,u=n.attributes.uv2,c=n.groups,d=n.drawRange;if(null!==a)if(Array.isArray(r))for(let n=0,i=c.length;n<i;n++){const i=c[n],s=r[i.materialIndex];for(let n=Math.max(i.start,d.start),r=Math.min(a.count,Math.min(i.start+i.count,d.start+d.count));n<r;n+=3){const r=a.getX(n),c=a.getX(n+1),d=a.getX(n+2);o=z_(this,s,t,T_,l,u,r,c,d),o&&(o.faceIndex=Math.floor(n/3),o.face.materialIndex=i.materialIndex,e.push(o))}}else{for(let n=Math.max(0,d.start),i=Math.min(a.count,d.start+d.count);n<i;n+=3){const i=a.getX(n),s=a.getX(n+1),c=a.getX(n+2);o=z_(this,r,t,T_,l,u,i,s,c),o&&(o.faceIndex=Math.floor(n/3),e.push(o))}}else if(void 0!==s)if(Array.isArray(r))for(let n=0,i=c.length;n<i;n++){const i=c[n],a=r[i.materialIndex];for(let n=Math.max(i.start,d.start),r=Math.min(s.count,Math.min(i.start+i.count,d.start+d.count));n<r;n+=3){o=z_(this,a,t,T_,l,u,n,n+1,n+2),o&&(o.faceIndex=Math.floor(n/3),o.face.materialIndex=i.materialIndex,e.push(o))}}else{for(let n=Math.max(0,d.start),i=Math.min(s.count,d.start+d.count);n<i;n+=3){o=z_(this,r,t,T_,l,u,n,n+1,n+2),o&&(o.faceIndex=Math.floor(n/3),e.push(o))}}}}function z_(t,e,n,r,i,o,a,s,l){t.getVertexPosition(a,I_),t.getVertexPosition(s,k_),t.getVertexPosition(l,P_);const u=function(t,e,n,r,i,o,a,s){let l;if(l=e.side===Gm?r.intersectTriangle(a,o,i,!0,s):r.intersectTriangle(i,o,a,e.side===qm,s),null===l)return null;B_.copy(s),B_.applyMatrix4(t.matrixWorld);const u=n.ray.origin.distanceTo(B_);return u<n.near||u>n.far?null:{distance:u,point:B_.clone(),object:t}}(t,e,n,r,I_,k_,P_,N_);if(u){i&&(M_.fromBufferAttribute(i,a),L_.fromBufferAttribute(i,s),D_.fromBufferAttribute(i,l),u.uv=s_.getUV(N_,I_,k_,P_,M_,L_,D_,new Ay)),o&&(M_.fromBufferAttribute(o,a),L_.fromBufferAttribute(o,s),D_.fromBufferAttribute(o,l),u.uv2=s_.getUV(N_,I_,k_,P_,M_,L_,D_,new Ay));const t={a,b:s,c:l,normal:new Ky,materialIndex:0};s_.getNormal(I_,k_,P_,t.normal),u.face=t}return u}class F_ extends x_{constructor(t=1,e=1,n=1,r=1,i=1,o=1){super(),this.type="BoxGeometry",this.parameters={width:t,height:e,depth:n,widthSegments:r,heightSegments:i,depthSegments:o};const a=this;r=Math.floor(r),i=Math.floor(i),o=Math.floor(o);const s=[],l=[],u=[],c=[];let d=0,f=0;function h(t,e,n,r,i,o,h,p,m,g,v){const y=o/m,b=h/g,_=o/2,w=h/2,A=p/2,E=m+1,x=g+1;let S=0,T=0;const C=new Ky;for(let o=0;o<x;o++){const a=o*b-w;for(let s=0;s<E;s++){const d=s*y-_;C[t]=d*r,C[e]=a*i,C[n]=A,l.push(C.x,C.y,C.z),C[t]=0,C[e]=0,C[n]=p>0?1:-1,u.push(C.x,C.y,C.z),c.push(s/m),c.push(1-o/g),S+=1}}for(let t=0;t<g;t++)for(let e=0;e<m;e++){const n=d+e+E*t,r=d+e+E*(t+1),i=d+(e+1)+E*(t+1),o=d+(e+1)+E*t;s.push(n,r,o),s.push(r,i,o),T+=6}a.addGroup(f,T,v),f+=T,d+=S}h("z","y","x",-1,-1,n,e,t,o,i,0),h("z","y","x",1,-1,n,e,-t,o,i,1),h("x","z","y",1,1,t,n,e,r,o,2),h("x","z","y",1,-1,t,n,-e,r,o,3),h("x","y","z",1,-1,t,e,n,r,i,4),h("x","y","z",-1,-1,t,e,-n,r,i,5),this.setIndex(s),this.setAttribute("position",new g_(l,3)),this.setAttribute("normal",new g_(u,3)),this.setAttribute("uv",new g_(c,2))}static fromJSON(t){return new F_(t.width,t.height,t.depth,t.widthSegments,t.heightSegments,t.depthSegments)}}function U_(t){const e={};for(const n in t){e[n]={};for(const r in t[n]){const i=t[n][r];i&&(i.isColor||i.isMatrix3||i.isMatrix4||i.isVector2||i.isVector3||i.isVector4||i.isTexture||i.isQuaternion)?e[n][r]=i.clone():Array.isArray(i)?e[n][r]=i.slice():e[n][r]=i}}return e}function q_(t){const e={};for(let n=0;n<t.length;n++){const r=U_(t[n]);for(const t in r)e[t]=r[t]}return e}function G_(t){return null===t.getRenderTarget()&&t.outputEncoding===Xv?ty:ey}const H_={clone:U_,merge:q_};class V_ extends u_{constructor(t){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader="void main() {\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",this.fragmentShader="void main() {\n\tgl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\n}",this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,void 0!==t&&this.setValues(t)}copy(t){return super.copy(t),this.fragmentShader=t.fragmentShader,this.vertexShader=t.vertexShader,this.uniforms=U_(t.uniforms),this.uniformsGroups=function(t){const e=[];for(let n=0;n<t.length;n++)e.push(t[n].clone());return e}(t.uniformsGroups),this.defines=Object.assign({},t.defines),this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.fog=t.fog,this.lights=t.lights,this.clipping=t.clipping,this.extensions=Object.assign({},t.extensions),this.glslVersion=t.glslVersion,this}toJSON(t){const e=super.toJSON(t);e.glslVersion=this.glslVersion,e.uniforms={};for(const n in this.uniforms){const r=this.uniforms[n].value;r&&r.isTexture?e.uniforms[n]={type:"t",value:r.toJSON(t).uuid}:r&&r.isColor?e.uniforms[n]={type:"c",value:r.getHex()}:r&&r.isVector2?e.uniforms[n]={type:"v2",value:r.toArray()}:r&&r.isVector3?e.uniforms[n]={type:"v3",value:r.toArray()}:r&&r.isVector4?e.uniforms[n]={type:"v4",value:r.toArray()}:r&&r.isMatrix3?e.uniforms[n]={type:"m3",value:r.toArray()}:r&&r.isMatrix4?e.uniforms[n]={type:"m4",value:r.toArray()}:e.uniforms[n]={value:r}}Object.keys(this.defines).length>0&&(e.defines=this.defines),e.vertexShader=this.vertexShader,e.fragmentShader=this.fragmentShader;const n={};for(const t in this.extensions)!0===this.extensions[t]&&(n[t]=!0);return Object.keys(n).length>0&&(e.extensions=n),e}}class Q_ extends Xb{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new Sb,this.projectionMatrix=new Sb,this.projectionMatrixInverse=new Sb}copy(t,e){return super.copy(t,e),this.matrixWorldInverse.copy(t.matrixWorldInverse),this.projectionMatrix.copy(t.projectionMatrix),this.projectionMatrixInverse.copy(t.projectionMatrixInverse),this}getWorldDirection(t){this.updateWorldMatrix(!0,!1);const e=this.matrixWorld.elements;return t.set(-e[8],-e[9],-e[10]).normalize()}updateMatrixWorld(t){super.updateMatrixWorld(t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(t,e){super.updateWorldMatrix(t,e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return(new this.constructor).copy(this)}}class W_ extends Q_{constructor(t=50,e=1,n=.1,r=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=t,this.zoom=1,this.near=n,this.far=r,this.focus=10,this.aspect=e,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(t,e){return super.copy(t,e),this.fov=t.fov,this.zoom=t.zoom,this.near=t.near,this.far=t.far,this.focus=t.focus,this.aspect=t.aspect,this.view=null===t.view?null:Object.assign({},t.view),this.filmGauge=t.filmGauge,this.filmOffset=t.filmOffset,this}setFocalLength(t){const e=.5*this.getFilmHeight()/t;this.fov=2*dy*Math.atan(e),this.updateProjectionMatrix()}getFocalLength(){const t=Math.tan(.5*cy*this.fov);return.5*this.getFilmHeight()/t}getEffectiveFOV(){return 2*dy*Math.atan(Math.tan(.5*cy*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}setViewOffset(t,e,n,r,i,o){this.aspect=t/e,null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=t,this.view.fullHeight=e,this.view.offsetX=n,this.view.offsetY=r,this.view.width=i,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const t=this.near;let e=t*Math.tan(.5*cy*this.fov)/this.zoom,n=2*e,r=this.aspect*n,i=-.5*r;const o=this.view;if(null!==this.view&&this.view.enabled){const t=o.fullWidth,a=o.fullHeight;i+=o.offsetX*r/t,e-=o.offsetY*n/a,r*=o.width/t,n*=o.height/a}const a=this.filmOffset;0!==a&&(i+=t*a/this.getFilmWidth()),this.projectionMatrix.makePerspective(i,i+r,e,e-n,t,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(t){const e=super.toJSON(t);return e.object.fov=this.fov,e.object.zoom=this.zoom,e.object.near=this.near,e.object.far=this.far,e.object.focus=this.focus,e.object.aspect=this.aspect,null!==this.view&&(e.object.view=Object.assign({},this.view)),e.object.filmGauge=this.filmGauge,e.object.filmOffset=this.filmOffset,e}}const Y_=-90;class K_ extends Xb{constructor(t,e,n){super(),this.type="CubeCamera",this.renderTarget=n;const r=new W_(Y_,1,t,e);r.layers=this.layers,r.up.set(0,1,0),r.lookAt(1,0,0),this.add(r);const i=new W_(Y_,1,t,e);i.layers=this.layers,i.up.set(0,1,0),i.lookAt(-1,0,0),this.add(i);const o=new W_(Y_,1,t,e);o.layers=this.layers,o.up.set(0,0,-1),o.lookAt(0,1,0),this.add(o);const a=new W_(Y_,1,t,e);a.layers=this.layers,a.up.set(0,0,1),a.lookAt(0,-1,0),this.add(a);const s=new W_(Y_,1,t,e);s.layers=this.layers,s.up.set(0,1,0),s.lookAt(0,0,1),this.add(s);const l=new W_(Y_,1,t,e);l.layers=this.layers,l.up.set(0,1,0),l.lookAt(0,0,-1),this.add(l)}update(t,e){null===this.parent&&this.updateMatrixWorld();const n=this.renderTarget,[r,i,o,a,s,l]=this.children,u=t.getRenderTarget(),c=t.toneMapping,d=t.xr.enabled;t.toneMapping=xg,t.xr.enabled=!1;const f=n.texture.generateMipmaps;n.texture.generateMipmaps=!1,t.setRenderTarget(n,0),t.render(e,r),t.setRenderTarget(n,1),t.render(e,i),t.setRenderTarget(n,2),t.render(e,o),t.setRenderTarget(n,3),t.render(e,a),t.setRenderTarget(n,4),t.render(e,s),n.texture.generateMipmaps=f,t.setRenderTarget(n,5),t.render(e,l),t.setRenderTarget(u),t.toneMapping=c,t.xr.enabled=d,n.texture.needsPMREMUpdate=!0}}class X_ extends Gy{constructor(t,e,n,r,i,o,a,s,l,u){super(t=void 0!==t?t:[],e=void 0!==e?e:Pg,n,r,i,o,a,s,l,u),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(t){this.image=t}}class $_ extends Vy{constructor(t=1,e={}){super(t,t,e),this.isWebGLCubeRenderTarget=!0;const n={width:t,height:t,depth:1},r=[n,n,n,n,n,n];this.texture=new X_(r,e.mapping,e.wrapS,e.wrapT,e.magFilter,e.minFilter,e.format,e.type,e.anisotropy,e.encoding),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=void 0!==e.generateMipmaps&&e.generateMipmaps,this.texture.minFilter=void 0!==e.minFilter?e.minFilter:Ug}fromEquirectangularTexture(t,e){this.texture.type=e.type,this.texture.encoding=e.encoding,this.texture.generateMipmaps=e.generateMipmaps,this.texture.minFilter=e.minFilter,this.texture.magFilter=e.magFilter;const n={uniforms:{tEquirect:{value:null}},vertexShader:"\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\tvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\n\t\t\t\t\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n\n\t\t\t\t}\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvWorldDirection = transformDirection( position, modelMatrix );\n\n\t\t\t\t\t#include <begin_vertex>\n\t\t\t\t\t#include <project_vertex>\n\n\t\t\t\t}\n\t\t\t",fragmentShader:"\n\n\t\t\t\tuniform sampler2D tEquirect;\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\t#include <common>\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvec3 direction = normalize( vWorldDirection );\n\n\t\t\t\t\tvec2 sampleUV = equirectUv( direction );\n\n\t\t\t\t\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\n\t\t\t\t}\n\t\t\t"},r=new F_(5,5,5),i=new V_({name:"CubemapFromEquirect",uniforms:U_(n.uniforms),vertexShader:n.vertexShader,fragmentShader:n.fragmentShader,side:Gm,blending:Vm});i.uniforms.tEquirect.value=e;const o=new j_(r,i),a=e.minFilter;e.minFilter===Gg&&(e.minFilter=Ug);return new K_(1,10,this).update(t,o),e.minFilter=a,o.geometry.dispose(),o.material.dispose(),this}clear(t,e,n,r){const i=t.getRenderTarget();for(let i=0;i<6;i++)t.setRenderTarget(this,i),t.clear(e,n,r);t.setRenderTarget(i)}}const Z_=new Ky,J_=new Ky,tw=new Ey;class ew{constructor(t=new Ky(1,0,0),e=0){this.isPlane=!0,this.normal=t,this.constant=e}set(t,e){return this.normal.copy(t),this.constant=e,this}setComponents(t,e,n,r){return this.normal.set(t,e,n),this.constant=r,this}setFromNormalAndCoplanarPoint(t,e){return this.normal.copy(t),this.constant=-e.dot(this.normal),this}setFromCoplanarPoints(t,e,n){const r=Z_.subVectors(n,e).cross(J_.subVectors(t,e)).normalize();return this.setFromNormalAndCoplanarPoint(r,t),this}copy(t){return this.normal.copy(t.normal),this.constant=t.constant,this}normalize(){const t=1/this.normal.length();return this.normal.multiplyScalar(t),this.constant*=t,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(t){return this.normal.dot(t)+this.constant}distanceToSphere(t){return this.distanceToPoint(t.center)-t.radius}projectPoint(t,e){return e.copy(this.normal).multiplyScalar(-this.distanceToPoint(t)).add(t)}intersectLine(t,e){const n=t.delta(Z_),r=this.normal.dot(n);if(0===r)return 0===this.distanceToPoint(t.start)?e.copy(t.start):null;const i=-(t.start.dot(this.normal)+this.constant)/r;return i<0||i>1?null:e.copy(n).multiplyScalar(i).add(t.start)}intersectsLine(t){const e=this.distanceToPoint(t.start),n=this.distanceToPoint(t.end);return e<0&&n>0||n<0&&e>0}intersectsBox(t){return t.intersectsPlane(this)}intersectsSphere(t){return t.intersectsPlane(this)}coplanarPoint(t){return t.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(t,e){const n=e||tw.getNormalMatrix(t),r=this.coplanarPoint(Z_).applyMatrix4(t),i=this.normal.applyMatrix3(n).normalize();return this.constant=-r.dot(i),this}translate(t){return this.constant-=t.dot(this.normal),this}equals(t){return t.normal.equals(this.normal)&&t.constant===this.constant}clone(){return(new this.constructor).copy(this)}}const nw=new gb,rw=new Ky;class iw{constructor(t=new ew,e=new ew,n=new ew,r=new ew,i=new ew,o=new ew){this.planes=[t,e,n,r,i,o]}set(t,e,n,r,i,o){const a=this.planes;return a[0].copy(t),a[1].copy(e),a[2].copy(n),a[3].copy(r),a[4].copy(i),a[5].copy(o),this}copy(t){const e=this.planes;for(let n=0;n<6;n++)e[n].copy(t.planes[n]);return this}setFromProjectionMatrix(t){const e=this.planes,n=t.elements,r=n[0],i=n[1],o=n[2],a=n[3],s=n[4],l=n[5],u=n[6],c=n[7],d=n[8],f=n[9],h=n[10],p=n[11],m=n[12],g=n[13],v=n[14],y=n[15];return e[0].setComponents(a-r,c-s,p-d,y-m).normalize(),e[1].setComponents(a+r,c+s,p+d,y+m).normalize(),e[2].setComponents(a+i,c+l,p+f,y+g).normalize(),e[3].setComponents(a-i,c-l,p-f,y-g).normalize(),e[4].setComponents(a-o,c-u,p-h,y-v).normalize(),e[5].setComponents(a+o,c+u,p+h,y+v).normalize(),this}intersectsObject(t){const e=t.geometry;return null===e.boundingSphere&&e.computeBoundingSphere(),nw.copy(e.boundingSphere).applyMatrix4(t.matrixWorld),this.intersectsSphere(nw)}intersectsSprite(t){return nw.center.set(0,0,0),nw.radius=.7071067811865476,nw.applyMatrix4(t.matrixWorld),this.intersectsSphere(nw)}intersectsSphere(t){const e=this.planes,n=t.center,r=-t.radius;for(let t=0;t<6;t++){if(e[t].distanceToPoint(n)<r)return!1}return!0}intersectsBox(t){const e=this.planes;for(let n=0;n<6;n++){const r=e[n];if(rw.x=r.normal.x>0?t.max.x:t.min.x,rw.y=r.normal.y>0?t.max.y:t.min.y,rw.z=r.normal.z>0?t.max.z:t.min.z,r.distanceToPoint(rw)<0)return!1}return!0}containsPoint(t){const e=this.planes;for(let n=0;n<6;n++)if(e[n].distanceToPoint(t)<0)return!1;return!0}clone(){return(new this.constructor).copy(this)}}function ow(){let t=null,e=!1,n=null,r=null;function i(e,o){n(e,o),r=t.requestAnimationFrame(i)}return{start:function(){!0!==e&&null!==n&&(r=t.requestAnimationFrame(i),e=!0)},stop:function(){t.cancelAnimationFrame(r),e=!1},setAnimationLoop:function(t){n=t},setContext:function(e){t=e}}}function aw(t,e){const n=e.isWebGL2,r=new WeakMap;return{get:function(t){return t.isInterleavedBufferAttribute&&(t=t.data),r.get(t)},remove:function(e){e.isInterleavedBufferAttribute&&(e=e.data);const n=r.get(e);n&&(t.deleteBuffer(n.buffer),r.delete(e))},update:function(e,i){if(e.isGLBufferAttribute){const t=r.get(e);return void((!t||t.version<e.version)&&r.set(e,{buffer:e.buffer,type:e.type,bytesPerElement:e.elementSize,version:e.version}))}e.isInterleavedBufferAttribute&&(e=e.data);const o=r.get(e);void 0===o?r.set(e,function(e,r){const i=e.array,o=e.usage,a=t.createBuffer();let s;if(t.bindBuffer(r,a),t.bufferData(r,i,o),e.onUploadCallback(),i instanceof Float32Array)s=5126;else if(i instanceof Uint16Array)if(e.isFloat16BufferAttribute){if(!n)throw new Error("THREE.WebGLAttributes: Usage of Float16BufferAttribute requires WebGL2.");s=5131}else s=5123;else if(i instanceof Int16Array)s=5122;else if(i instanceof Uint32Array)s=5125;else if(i instanceof Int32Array)s=5124;else if(i instanceof Int8Array)s=5120;else if(i instanceof Uint8Array)s=5121;else{if(!(i instanceof Uint8ClampedArray))throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+i);s=5121}return{buffer:a,type:s,bytesPerElement:i.BYTES_PER_ELEMENT,version:e.version}}(e,i)):o.version<e.version&&(!function(e,r,i){const o=r.array,a=r.updateRange;t.bindBuffer(i,e),-1===a.count?t.bufferSubData(i,0,o):(n?t.bufferSubData(i,a.offset*o.BYTES_PER_ELEMENT,o,a.offset,a.count):t.bufferSubData(i,a.offset*o.BYTES_PER_ELEMENT,o.subarray(a.offset,a.offset+a.count)),a.count=-1),r.onUploadCallback()}(o.buffer,e,i),o.version=e.version)}}}class sw extends x_{constructor(t=1,e=1,n=1,r=1){super(),this.type="PlaneGeometry",this.parameters={width:t,height:e,widthSegments:n,heightSegments:r};const i=t/2,o=e/2,a=Math.floor(n),s=Math.floor(r),l=a+1,u=s+1,c=t/a,d=e/s,f=[],h=[],p=[],m=[];for(let t=0;t<u;t++){const e=t*d-o;for(let n=0;n<l;n++){const r=n*c-i;h.push(r,-e,0),p.push(0,0,1),m.push(n/a),m.push(1-t/s)}}for(let t=0;t<s;t++)for(let e=0;e<a;e++){const n=e+l*t,r=e+l*(t+1),i=e+1+l*(t+1),o=e+1+l*t;f.push(n,r,o),f.push(r,i,o)}this.setIndex(f),this.setAttribute("position",new g_(h,3)),this.setAttribute("normal",new g_(p,3)),this.setAttribute("uv",new g_(m,2))}static fromJSON(t){return new sw(t.width,t.height,t.widthSegments,t.heightSegments)}}const lw={alphamap_fragment:"#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, vUv ).g;\n#endif",alphamap_pars_fragment:"#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",alphatest_fragment:"#ifdef USE_ALPHATEST\n\tif ( diffuseColor.a < alphaTest ) discard;\n#endif",alphatest_pars_fragment:"#ifdef USE_ALPHATEST\n\tuniform float alphaTest;\n#endif",aomap_fragment:"#ifdef USE_AOMAP\n\tfloat ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;\n\treflectedLight.indirectDiffuse *= ambientOcclusion;\n\t#if defined( USE_ENVMAP ) && defined( STANDARD )\n\t\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\t\treflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );\n\t#endif\n#endif",aomap_pars_fragment:"#ifdef USE_AOMAP\n\tuniform sampler2D aoMap;\n\tuniform float aoMapIntensity;\n#endif",begin_vertex:"vec3 transformed = vec3( position );",beginnormal_vertex:"vec3 objectNormal = vec3( normal );\n#ifdef USE_TANGENT\n\tvec3 objectTangent = vec3( tangent.xyz );\n#endif",bsdfs:"vec3 BRDF_Lambert( const in vec3 diffuseColor ) {\n\treturn RECIPROCAL_PI * diffuseColor;\n}\nvec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {\n\tfloat fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );\n\treturn f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );\n}\nfloat F_Schlick( const in float f0, const in float f90, const in float dotVH ) {\n\tfloat fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );\n\treturn f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );\n}\nvec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {\n    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );\n    float x2 = x * x;\n    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );\n    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );\n}\nfloat V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\tfloat gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\treturn 0.5 / max( gv + gl, EPSILON );\n}\nfloat D_GGX( const in float alpha, const in float dotNH ) {\n\tfloat a2 = pow2( alpha );\n\tfloat denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;\n\treturn RECIPROCAL_PI * a2 / pow2( denom );\n}\nvec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 f0, const in float f90, const in float roughness ) {\n\tfloat alpha = pow2( roughness );\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\tvec3 F = F_Schlick( f0, f90, dotVH );\n\tfloat V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\tfloat D = D_GGX( alpha, dotNH );\n\treturn F * ( V * D );\n}\n#ifdef USE_IRIDESCENCE\n\tvec3 BRDF_GGX_Iridescence( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 f0, const in float f90, const in float iridescence, const in vec3 iridescenceFresnel, const in float roughness ) {\n\t\tfloat alpha = pow2( roughness );\n\t\tvec3 halfDir = normalize( lightDir + viewDir );\n\t\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\t\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\t\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\t\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\t\tvec3 F = mix( F_Schlick( f0, f90, dotVH ), iridescenceFresnel, iridescence );\n\t\tfloat V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\t\tfloat D = D_GGX( alpha, dotNH );\n\t\treturn F * ( V * D );\n\t}\n#endif\nvec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {\n\tconst float LUT_SIZE = 64.0;\n\tconst float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;\n\tconst float LUT_BIAS = 0.5 / LUT_SIZE;\n\tfloat dotNV = saturate( dot( N, V ) );\n\tvec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );\n\tuv = uv * LUT_SCALE + LUT_BIAS;\n\treturn uv;\n}\nfloat LTC_ClippedSphereFormFactor( const in vec3 f ) {\n\tfloat l = length( f );\n\treturn max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );\n}\nvec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {\n\tfloat x = dot( v1, v2 );\n\tfloat y = abs( x );\n\tfloat a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;\n\tfloat b = 3.4175940 + ( 4.1616724 + y ) * y;\n\tfloat v = a / b;\n\tfloat theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;\n\treturn cross( v1, v2 ) * theta_sintheta;\n}\nvec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {\n\tvec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];\n\tvec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];\n\tvec3 lightNormal = cross( v1, v2 );\n\tif( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );\n\tvec3 T1, T2;\n\tT1 = normalize( V - N * dot( V, N ) );\n\tT2 = - cross( N, T1 );\n\tmat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );\n\tvec3 coords[ 4 ];\n\tcoords[ 0 ] = mat * ( rectCoords[ 0 ] - P );\n\tcoords[ 1 ] = mat * ( rectCoords[ 1 ] - P );\n\tcoords[ 2 ] = mat * ( rectCoords[ 2 ] - P );\n\tcoords[ 3 ] = mat * ( rectCoords[ 3 ] - P );\n\tcoords[ 0 ] = normalize( coords[ 0 ] );\n\tcoords[ 1 ] = normalize( coords[ 1 ] );\n\tcoords[ 2 ] = normalize( coords[ 2 ] );\n\tcoords[ 3 ] = normalize( coords[ 3 ] );\n\tvec3 vectorFormFactor = vec3( 0.0 );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );\n\tfloat result = LTC_ClippedSphereFormFactor( vectorFormFactor );\n\treturn vec3( result );\n}\nfloat G_BlinnPhong_Implicit( ) {\n\treturn 0.25;\n}\nfloat D_BlinnPhong( const in float shininess, const in float dotNH ) {\n\treturn RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\n}\nvec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, 1.0, dotVH );\n\tfloat G = G_BlinnPhong_Implicit( );\n\tfloat D = D_BlinnPhong( shininess, dotNH );\n\treturn F * ( G * D );\n}\n#if defined( USE_SHEEN )\nfloat D_Charlie( float roughness, float dotNH ) {\n\tfloat alpha = pow2( roughness );\n\tfloat invAlpha = 1.0 / alpha;\n\tfloat cos2h = dotNH * dotNH;\n\tfloat sin2h = max( 1.0 - cos2h, 0.0078125 );\n\treturn ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );\n}\nfloat V_Neubelt( float dotNV, float dotNL ) {\n\treturn saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );\n}\nvec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat D = D_Charlie( sheenRoughness, dotNH );\n\tfloat V = V_Neubelt( dotNV, dotNL );\n\treturn sheenColor * ( D * V );\n}\n#endif",iridescence_fragment:"#ifdef USE_IRIDESCENCE\n\tconst mat3 XYZ_TO_REC709 = mat3(\n\t\t 3.2404542, -0.9692660,  0.0556434,\n\t\t-1.5371385,  1.8760108, -0.2040259,\n\t\t-0.4985314,  0.0415560,  1.0572252\n\t);\n\tvec3 Fresnel0ToIor( vec3 fresnel0 ) {\n\t\tvec3 sqrtF0 = sqrt( fresnel0 );\n\t\treturn ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );\n\t}\n\tvec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {\n\t\treturn pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );\n\t}\n\tfloat IorToFresnel0( float transmittedIor, float incidentIor ) {\n\t\treturn pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));\n\t}\n\tvec3 evalSensitivity( float OPD, vec3 shift ) {\n\t\tfloat phase = 2.0 * PI * OPD * 1.0e-9;\n\t\tvec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );\n\t\tvec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );\n\t\tvec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );\n\t\tvec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );\n\t\txyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );\n\t\txyz /= 1.0685e-7;\n\t\tvec3 rgb = XYZ_TO_REC709 * xyz;\n\t\treturn rgb;\n\t}\n\tvec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {\n\t\tvec3 I;\n\t\tfloat iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );\n\t\tfloat sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );\n\t\tfloat cosTheta2Sq = 1.0 - sinTheta2Sq;\n\t\tif ( cosTheta2Sq < 0.0 ) {\n\t\t\t return vec3( 1.0 );\n\t\t}\n\t\tfloat cosTheta2 = sqrt( cosTheta2Sq );\n\t\tfloat R0 = IorToFresnel0( iridescenceIOR, outsideIOR );\n\t\tfloat R12 = F_Schlick( R0, 1.0, cosTheta1 );\n\t\tfloat R21 = R12;\n\t\tfloat T121 = 1.0 - R12;\n\t\tfloat phi12 = 0.0;\n\t\tif ( iridescenceIOR < outsideIOR ) phi12 = PI;\n\t\tfloat phi21 = PI - phi12;\n\t\tvec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );\t\tvec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );\n\t\tvec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );\n\t\tvec3 phi23 = vec3( 0.0 );\n\t\tif ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;\n\t\tif ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;\n\t\tif ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;\n\t\tfloat OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;\n\t\tvec3 phi = vec3( phi21 ) + phi23;\n\t\tvec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );\n\t\tvec3 r123 = sqrt( R123 );\n\t\tvec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );\n\t\tvec3 C0 = R12 + Rs;\n\t\tI = C0;\n\t\tvec3 Cm = Rs - T121;\n\t\tfor ( int m = 1; m <= 2; ++ m ) {\n\t\t\tCm *= r123;\n\t\t\tvec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );\n\t\t\tI += Cm * Sm;\n\t\t}\n\t\treturn max( I, vec3( 0.0 ) );\n\t}\n#endif",bumpmap_pars_fragment:"#ifdef USE_BUMPMAP\n\tuniform sampler2D bumpMap;\n\tuniform float bumpScale;\n\tvec2 dHdxy_fwd() {\n\t\tvec2 dSTdx = dFdx( vUv );\n\t\tvec2 dSTdy = dFdy( vUv );\n\t\tfloat Hll = bumpScale * texture2D( bumpMap, vUv ).x;\n\t\tfloat dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;\n\t\tfloat dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;\n\t\treturn vec2( dBx, dBy );\n\t}\n\tvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {\n\t\tvec3 vSigmaX = dFdx( surf_pos.xyz );\n\t\tvec3 vSigmaY = dFdy( surf_pos.xyz );\n\t\tvec3 vN = surf_norm;\n\t\tvec3 R1 = cross( vSigmaY, vN );\n\t\tvec3 R2 = cross( vN, vSigmaX );\n\t\tfloat fDet = dot( vSigmaX, R1 ) * faceDirection;\n\t\tvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\n\t\treturn normalize( abs( fDet ) * surf_norm - vGrad );\n\t}\n#endif",clipping_planes_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvec4 plane;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {\n\t\tplane = clippingPlanes[ i ];\n\t\tif ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;\n\t}\n\t#pragma unroll_loop_end\n\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n\t\tbool clipped = true;\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {\n\t\t\tplane = clippingPlanes[ i ];\n\t\t\tclipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t\tif ( clipped ) discard;\n\t#endif\n#endif",clipping_planes_pars_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n\tuniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];\n#endif",clipping_planes_pars_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n#endif",clipping_planes_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvClipPosition = - mvPosition.xyz;\n#endif",color_fragment:"#if defined( USE_COLOR_ALPHA )\n\tdiffuseColor *= vColor;\n#elif defined( USE_COLOR )\n\tdiffuseColor.rgb *= vColor;\n#endif",color_pars_fragment:"#if defined( USE_COLOR_ALPHA )\n\tvarying vec4 vColor;\n#elif defined( USE_COLOR )\n\tvarying vec3 vColor;\n#endif",color_pars_vertex:"#if defined( USE_COLOR_ALPHA )\n\tvarying vec4 vColor;\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\n\tvarying vec3 vColor;\n#endif",color_vertex:"#if defined( USE_COLOR_ALPHA )\n\tvColor = vec4( 1.0 );\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\n\tvColor = vec3( 1.0 );\n#endif\n#ifdef USE_COLOR\n\tvColor *= color;\n#endif\n#ifdef USE_INSTANCING_COLOR\n\tvColor.xyz *= instanceColor.xyz;\n#endif",common:"#define PI 3.141592653589793\n#define PI2 6.283185307179586\n#define PI_HALF 1.5707963267948966\n#define RECIPROCAL_PI 0.3183098861837907\n#define RECIPROCAL_PI2 0.15915494309189535\n#define EPSILON 1e-6\n#ifndef saturate\n#define saturate( a ) clamp( a, 0.0, 1.0 )\n#endif\n#define whiteComplement( a ) ( 1.0 - saturate( a ) )\nfloat pow2( const in float x ) { return x*x; }\nvec3 pow2( const in vec3 x ) { return x*x; }\nfloat pow3( const in float x ) { return x*x*x; }\nfloat pow4( const in float x ) { float x2 = x*x; return x2*x2; }\nfloat max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }\nfloat average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }\nhighp float rand( const in vec2 uv ) {\n\tconst highp float a = 12.9898, b = 78.233, c = 43758.5453;\n\thighp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );\n\treturn fract( sin( sn ) * c );\n}\n#ifdef HIGH_PRECISION\n\tfloat precisionSafeLength( vec3 v ) { return length( v ); }\n#else\n\tfloat precisionSafeLength( vec3 v ) {\n\t\tfloat maxComponent = max3( abs( v ) );\n\t\treturn length( v / maxComponent ) * maxComponent;\n\t}\n#endif\nstruct IncidentLight {\n\tvec3 color;\n\tvec3 direction;\n\tbool visible;\n};\nstruct ReflectedLight {\n\tvec3 directDiffuse;\n\tvec3 directSpecular;\n\tvec3 indirectDiffuse;\n\tvec3 indirectSpecular;\n};\nstruct GeometricContext {\n\tvec3 position;\n\tvec3 normal;\n\tvec3 viewDir;\n#ifdef USE_CLEARCOAT\n\tvec3 clearcoatNormal;\n#endif\n};\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n}\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\n}\nmat3 transposeMat3( const in mat3 m ) {\n\tmat3 tmp;\n\ttmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );\n\ttmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );\n\ttmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );\n\treturn tmp;\n}\nfloat luminance( const in vec3 rgb ) {\n\tconst vec3 weights = vec3( 0.2126729, 0.7151522, 0.0721750 );\n\treturn dot( weights, rgb );\n}\nbool isPerspectiveMatrix( mat4 m ) {\n\treturn m[ 2 ][ 3 ] == - 1.0;\n}\nvec2 equirectUv( in vec3 dir ) {\n\tfloat u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;\n\tfloat v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\treturn vec2( u, v );\n}",cube_uv_reflection_fragment:"#ifdef ENVMAP_TYPE_CUBE_UV\n\t#define cubeUV_minMipLevel 4.0\n\t#define cubeUV_minTileSize 16.0\n\tfloat getFace( vec3 direction ) {\n\t\tvec3 absDirection = abs( direction );\n\t\tfloat face = - 1.0;\n\t\tif ( absDirection.x > absDirection.z ) {\n\t\t\tif ( absDirection.x > absDirection.y )\n\t\t\t\tface = direction.x > 0.0 ? 0.0 : 3.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t} else {\n\t\t\tif ( absDirection.z > absDirection.y )\n\t\t\t\tface = direction.z > 0.0 ? 2.0 : 5.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t}\n\t\treturn face;\n\t}\n\tvec2 getUV( vec3 direction, float face ) {\n\t\tvec2 uv;\n\t\tif ( face == 0.0 ) {\n\t\t\tuv = vec2( direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 1.0 ) {\n\t\t\tuv = vec2( - direction.x, - direction.z ) / abs( direction.y );\n\t\t} else if ( face == 2.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.y ) / abs( direction.z );\n\t\t} else if ( face == 3.0 ) {\n\t\t\tuv = vec2( - direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 4.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.z ) / abs( direction.y );\n\t\t} else {\n\t\t\tuv = vec2( direction.x, direction.y ) / abs( direction.z );\n\t\t}\n\t\treturn 0.5 * ( uv + 1.0 );\n\t}\n\tvec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {\n\t\tfloat face = getFace( direction );\n\t\tfloat filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );\n\t\tmipInt = max( mipInt, cubeUV_minMipLevel );\n\t\tfloat faceSize = exp2( mipInt );\n\t\thighp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;\n\t\tif ( face > 2.0 ) {\n\t\t\tuv.y += faceSize;\n\t\t\tface -= 3.0;\n\t\t}\n\t\tuv.x += face * faceSize;\n\t\tuv.x += filterInt * 3.0 * cubeUV_minTileSize;\n\t\tuv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );\n\t\tuv.x *= CUBEUV_TEXEL_WIDTH;\n\t\tuv.y *= CUBEUV_TEXEL_HEIGHT;\n\t\t#ifdef texture2DGradEXT\n\t\t\treturn texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;\n\t\t#else\n\t\t\treturn texture2D( envMap, uv ).rgb;\n\t\t#endif\n\t}\n\t#define cubeUV_r0 1.0\n\t#define cubeUV_v0 0.339\n\t#define cubeUV_m0 - 2.0\n\t#define cubeUV_r1 0.8\n\t#define cubeUV_v1 0.276\n\t#define cubeUV_m1 - 1.0\n\t#define cubeUV_r4 0.4\n\t#define cubeUV_v4 0.046\n\t#define cubeUV_m4 2.0\n\t#define cubeUV_r5 0.305\n\t#define cubeUV_v5 0.016\n\t#define cubeUV_m5 3.0\n\t#define cubeUV_r6 0.21\n\t#define cubeUV_v6 0.0038\n\t#define cubeUV_m6 4.0\n\tfloat roughnessToMip( float roughness ) {\n\t\tfloat mip = 0.0;\n\t\tif ( roughness >= cubeUV_r1 ) {\n\t\t\tmip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;\n\t\t} else if ( roughness >= cubeUV_r4 ) {\n\t\t\tmip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;\n\t\t} else if ( roughness >= cubeUV_r5 ) {\n\t\t\tmip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;\n\t\t} else if ( roughness >= cubeUV_r6 ) {\n\t\t\tmip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;\n\t\t} else {\n\t\t\tmip = - 2.0 * log2( 1.16 * roughness );\t\t}\n\t\treturn mip;\n\t}\n\tvec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {\n\t\tfloat mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );\n\t\tfloat mipF = fract( mip );\n\t\tfloat mipInt = floor( mip );\n\t\tvec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );\n\t\tif ( mipF == 0.0 ) {\n\t\t\treturn vec4( color0, 1.0 );\n\t\t} else {\n\t\t\tvec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );\n\t\t\treturn vec4( mix( color0, color1, mipF ), 1.0 );\n\t\t}\n\t}\n#endif",defaultnormal_vertex:"vec3 transformedNormal = objectNormal;\n#ifdef USE_INSTANCING\n\tmat3 m = mat3( instanceMatrix );\n\ttransformedNormal /= vec3( dot( m[ 0 ], m[ 0 ] ), dot( m[ 1 ], m[ 1 ] ), dot( m[ 2 ], m[ 2 ] ) );\n\ttransformedNormal = m * transformedNormal;\n#endif\ntransformedNormal = normalMatrix * transformedNormal;\n#ifdef FLIP_SIDED\n\ttransformedNormal = - transformedNormal;\n#endif\n#ifdef USE_TANGENT\n\tvec3 transformedTangent = ( modelViewMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#ifdef FLIP_SIDED\n\t\ttransformedTangent = - transformedTangent;\n\t#endif\n#endif",displacementmap_pars_vertex:"#ifdef USE_DISPLACEMENTMAP\n\tuniform sampler2D displacementMap;\n\tuniform float displacementScale;\n\tuniform float displacementBias;\n#endif",displacementmap_vertex:"#ifdef USE_DISPLACEMENTMAP\n\ttransformed += normalize( objectNormal ) * ( texture2D( displacementMap, vUv ).x * displacementScale + displacementBias );\n#endif",emissivemap_fragment:"#ifdef USE_EMISSIVEMAP\n\tvec4 emissiveColor = texture2D( emissiveMap, vUv );\n\ttotalEmissiveRadiance *= emissiveColor.rgb;\n#endif",emissivemap_pars_fragment:"#ifdef USE_EMISSIVEMAP\n\tuniform sampler2D emissiveMap;\n#endif",encodings_fragment:"gl_FragColor = linearToOutputTexel( gl_FragColor );",encodings_pars_fragment:"vec4 LinearToLinear( in vec4 value ) {\n\treturn value;\n}\nvec4 LinearTosRGB( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );\n}",envmap_fragment:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvec3 cameraToFrag;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToFrag = normalize( vWorldPosition - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( cameraToFrag, worldNormal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );\n\t\t#endif\n\t#else\n\t\tvec3 reflectVec = vReflect;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n\t#else\n\t\tvec4 envColor = vec4( 0.0 );\n\t#endif\n\t#ifdef ENVMAP_BLENDING_MULTIPLY\n\t\toutgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_MIX )\n\t\toutgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_ADD )\n\t\toutgoingLight += envColor.xyz * specularStrength * reflectivity;\n\t#endif\n#endif",envmap_common_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float envMapIntensity;\n\tuniform float flipEnvMap;\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tuniform samplerCube envMap;\n\t#else\n\t\tuniform sampler2D envMap;\n\t#endif\n\t\n#endif",envmap_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float reflectivity;\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\tvarying vec3 vWorldPosition;\n\t\tuniform float refractionRatio;\n\t#else\n\t\tvarying vec3 vReflect;\n\t#endif\n#endif",envmap_pars_vertex:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\t\n\t\tvarying vec3 vWorldPosition;\n\t#else\n\t\tvarying vec3 vReflect;\n\t\tuniform float refractionRatio;\n\t#endif\n#endif",envmap_physical_pars_fragment:"#if defined( USE_ENVMAP )\n\tvec3 getIBLIrradiance( const in vec3 normal ) {\n\t\t#if defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );\n\t\t\treturn PI * envMapColor.rgb * envMapIntensity;\n\t\t#else\n\t\t\treturn vec3( 0.0 );\n\t\t#endif\n\t}\n\tvec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {\n\t\t#if defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 reflectVec = reflect( - viewDir, normal );\n\t\t\treflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );\n\t\t\treflectVec = inverseTransformDirection( reflectVec, viewMatrix );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );\n\t\t\treturn envMapColor.rgb * envMapIntensity;\n\t\t#else\n\t\t\treturn vec3( 0.0 );\n\t\t#endif\n\t}\n#endif",envmap_vertex:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvWorldPosition = worldPosition.xyz;\n\t#else\n\t\tvec3 cameraToVertex;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToVertex = normalize( worldPosition.xyz - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvReflect = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvReflect = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#endif\n#endif",fog_vertex:"#ifdef USE_FOG\n\tvFogDepth = - mvPosition.z;\n#endif",fog_pars_vertex:"#ifdef USE_FOG\n\tvarying float vFogDepth;\n#endif",fog_fragment:"#ifdef USE_FOG\n\t#ifdef FOG_EXP2\n\t\tfloat fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );\n\t#else\n\t\tfloat fogFactor = smoothstep( fogNear, fogFar, vFogDepth );\n\t#endif\n\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\n#endif",fog_pars_fragment:"#ifdef USE_FOG\n\tuniform vec3 fogColor;\n\tvarying float vFogDepth;\n\t#ifdef FOG_EXP2\n\t\tuniform float fogDensity;\n\t#else\n\t\tuniform float fogNear;\n\t\tuniform float fogFar;\n\t#endif\n#endif",gradientmap_pars_fragment:"#ifdef USE_GRADIENTMAP\n\tuniform sampler2D gradientMap;\n#endif\nvec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {\n\tfloat dotNL = dot( normal, lightDirection );\n\tvec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );\n\t#ifdef USE_GRADIENTMAP\n\t\treturn vec3( texture2D( gradientMap, coord ).r );\n\t#else\n\t\tvec2 fw = fwidth( coord ) * 0.5;\n\t\treturn mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );\n\t#endif\n}",lightmap_fragment:"#ifdef USE_LIGHTMAP\n\tvec4 lightMapTexel = texture2D( lightMap, vUv2 );\n\tvec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;\n\treflectedLight.indirectDiffuse += lightMapIrradiance;\n#endif",lightmap_pars_fragment:"#ifdef USE_LIGHTMAP\n\tuniform sampler2D lightMap;\n\tuniform float lightMapIntensity;\n#endif",lights_lambert_fragment:"LambertMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularStrength = specularStrength;",lights_lambert_pars_fragment:"varying vec3 vViewPosition;\nstruct LambertMaterial {\n\tvec3 diffuseColor;\n\tfloat specularStrength;\n};\nvoid RE_Direct_Lambert( const in IncidentLight directLight, const in GeometricContext geometry, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in GeometricContext geometry, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_Lambert\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Lambert",lights_pars_begin:"uniform bool receiveShadow;\nuniform vec3 ambientLightColor;\nuniform vec3 lightProbe[ 9 ];\nvec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {\n\tfloat x = normal.x, y = normal.y, z = normal.z;\n\tvec3 result = shCoefficients[ 0 ] * 0.886227;\n\tresult += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;\n\tresult += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;\n\tresult += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;\n\tresult += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;\n\tresult += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;\n\tresult += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );\n\tresult += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;\n\tresult += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );\n\treturn result;\n}\nvec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {\n\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\tvec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );\n\treturn irradiance;\n}\nvec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {\n\tvec3 irradiance = ambientLightColor;\n\treturn irradiance;\n}\nfloat getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {\n\t#if defined ( PHYSICALLY_CORRECT_LIGHTS )\n\t\tfloat distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );\n\t\tif ( cutoffDistance > 0.0 ) {\n\t\t\tdistanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );\n\t\t}\n\t\treturn distanceFalloff;\n\t#else\n\t\tif ( cutoffDistance > 0.0 && decayExponent > 0.0 ) {\n\t\t\treturn pow( saturate( - lightDistance / cutoffDistance + 1.0 ), decayExponent );\n\t\t}\n\t\treturn 1.0;\n\t#endif\n}\nfloat getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {\n\treturn smoothstep( coneCosine, penumbraCosine, angleCosine );\n}\n#if NUM_DIR_LIGHTS > 0\n\tstruct DirectionalLight {\n\t\tvec3 direction;\n\t\tvec3 color;\n\t};\n\tuniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];\n\tvoid getDirectionalLightInfo( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight light ) {\n\t\tlight.color = directionalLight.color;\n\t\tlight.direction = directionalLight.direction;\n\t\tlight.visible = true;\n\t}\n#endif\n#if NUM_POINT_LIGHTS > 0\n\tstruct PointLight {\n\t\tvec3 position;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t};\n\tuniform PointLight pointLights[ NUM_POINT_LIGHTS ];\n\tvoid getPointLightInfo( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight light ) {\n\t\tvec3 lVector = pointLight.position - geometry.position;\n\t\tlight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tlight.color = pointLight.color;\n\t\tlight.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );\n\t\tlight.visible = ( light.color != vec3( 0.0 ) );\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\tstruct SpotLight {\n\t\tvec3 position;\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tfloat coneCos;\n\t\tfloat penumbraCos;\n\t};\n\tuniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];\n\tvoid getSpotLightInfo( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight light ) {\n\t\tvec3 lVector = spotLight.position - geometry.position;\n\t\tlight.direction = normalize( lVector );\n\t\tfloat angleCos = dot( light.direction, spotLight.direction );\n\t\tfloat spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );\n\t\tif ( spotAttenuation > 0.0 ) {\n\t\t\tfloat lightDistance = length( lVector );\n\t\t\tlight.color = spotLight.color * spotAttenuation;\n\t\t\tlight.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );\n\t\t\tlight.visible = ( light.color != vec3( 0.0 ) );\n\t\t} else {\n\t\t\tlight.color = vec3( 0.0 );\n\t\t\tlight.visible = false;\n\t\t}\n\t}\n#endif\n#if NUM_RECT_AREA_LIGHTS > 0\n\tstruct RectAreaLight {\n\t\tvec3 color;\n\t\tvec3 position;\n\t\tvec3 halfWidth;\n\t\tvec3 halfHeight;\n\t};\n\tuniform sampler2D ltc_1;\tuniform sampler2D ltc_2;\n\tuniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\tstruct HemisphereLight {\n\t\tvec3 direction;\n\t\tvec3 skyColor;\n\t\tvec3 groundColor;\n\t};\n\tuniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];\n\tvec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {\n\t\tfloat dotNL = dot( normal, hemiLight.direction );\n\t\tfloat hemiDiffuseWeight = 0.5 * dotNL + 0.5;\n\t\tvec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );\n\t\treturn irradiance;\n\t}\n#endif",lights_toon_fragment:"ToonMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;",lights_toon_pars_fragment:"varying vec3 vViewPosition;\nstruct ToonMaterial {\n\tvec3 diffuseColor;\n};\nvoid RE_Direct_Toon( const in IncidentLight directLight, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\tvec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_Toon\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Toon",lights_phong_fragment:"BlinnPhongMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularColor = specular;\nmaterial.specularShininess = shininess;\nmaterial.specularStrength = specularStrength;",lights_phong_pars_fragment:"varying vec3 vViewPosition;\nstruct BlinnPhongMaterial {\n\tvec3 diffuseColor;\n\tvec3 specularColor;\n\tfloat specularShininess;\n\tfloat specularStrength;\n};\nvoid RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n\treflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularShininess ) * material.specularStrength;\n}\nvoid RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_BlinnPhong\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_BlinnPhong",lights_physical_fragment:"PhysicalMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );\nvec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );\nfloat geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );\nmaterial.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;\nmaterial.roughness = min( material.roughness, 1.0 );\n#ifdef IOR\n\tmaterial.ior = ior;\n\t#ifdef SPECULAR\n\t\tfloat specularIntensityFactor = specularIntensity;\n\t\tvec3 specularColorFactor = specularColor;\n\t\t#ifdef USE_SPECULARINTENSITYMAP\n\t\t\tspecularIntensityFactor *= texture2D( specularIntensityMap, vUv ).a;\n\t\t#endif\n\t\t#ifdef USE_SPECULARCOLORMAP\n\t\t\tspecularColorFactor *= texture2D( specularColorMap, vUv ).rgb;\n\t\t#endif\n\t\tmaterial.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );\n\t#else\n\t\tfloat specularIntensityFactor = 1.0;\n\t\tvec3 specularColorFactor = vec3( 1.0 );\n\t\tmaterial.specularF90 = 1.0;\n\t#endif\n\tmaterial.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );\n#else\n\tmaterial.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );\n\tmaterial.specularF90 = 1.0;\n#endif\n#ifdef USE_CLEARCOAT\n\tmaterial.clearcoat = clearcoat;\n\tmaterial.clearcoatRoughness = clearcoatRoughness;\n\tmaterial.clearcoatF0 = vec3( 0.04 );\n\tmaterial.clearcoatF90 = 1.0;\n\t#ifdef USE_CLEARCOATMAP\n\t\tmaterial.clearcoat *= texture2D( clearcoatMap, vUv ).x;\n\t#endif\n\t#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\t\tmaterial.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vUv ).y;\n\t#endif\n\tmaterial.clearcoat = saturate( material.clearcoat );\tmaterial.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );\n\tmaterial.clearcoatRoughness += geometryRoughness;\n\tmaterial.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );\n#endif\n#ifdef USE_IRIDESCENCE\n\tmaterial.iridescence = iridescence;\n\tmaterial.iridescenceIOR = iridescenceIOR;\n\t#ifdef USE_IRIDESCENCEMAP\n\t\tmaterial.iridescence *= texture2D( iridescenceMap, vUv ).r;\n\t#endif\n\t#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\t\tmaterial.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vUv ).g + iridescenceThicknessMinimum;\n\t#else\n\t\tmaterial.iridescenceThickness = iridescenceThicknessMaximum;\n\t#endif\n#endif\n#ifdef USE_SHEEN\n\tmaterial.sheenColor = sheenColor;\n\t#ifdef USE_SHEENCOLORMAP\n\t\tmaterial.sheenColor *= texture2D( sheenColorMap, vUv ).rgb;\n\t#endif\n\tmaterial.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );\n\t#ifdef USE_SHEENROUGHNESSMAP\n\t\tmaterial.sheenRoughness *= texture2D( sheenRoughnessMap, vUv ).a;\n\t#endif\n#endif",lights_physical_pars_fragment:"struct PhysicalMaterial {\n\tvec3 diffuseColor;\n\tfloat roughness;\n\tvec3 specularColor;\n\tfloat specularF90;\n\t#ifdef USE_CLEARCOAT\n\t\tfloat clearcoat;\n\t\tfloat clearcoatRoughness;\n\t\tvec3 clearcoatF0;\n\t\tfloat clearcoatF90;\n\t#endif\n\t#ifdef USE_IRIDESCENCE\n\t\tfloat iridescence;\n\t\tfloat iridescenceIOR;\n\t\tfloat iridescenceThickness;\n\t\tvec3 iridescenceFresnel;\n\t\tvec3 iridescenceF0;\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tvec3 sheenColor;\n\t\tfloat sheenRoughness;\n\t#endif\n\t#ifdef IOR\n\t\tfloat ior;\n\t#endif\n\t#ifdef USE_TRANSMISSION\n\t\tfloat transmission;\n\t\tfloat transmissionAlpha;\n\t\tfloat thickness;\n\t\tfloat attenuationDistance;\n\t\tvec3 attenuationColor;\n\t#endif\n};\nvec3 clearcoatSpecular = vec3( 0.0 );\nvec3 sheenSpecular = vec3( 0.0 );\nfloat IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat r2 = roughness * roughness;\n\tfloat a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;\n\tfloat b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;\n\tfloat DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );\n\treturn saturate( DG * RECIPROCAL_PI );\n}\nvec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tconst vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );\n\tconst vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );\n\tvec4 r = roughness * c0 + c1;\n\tfloat a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\n\tvec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;\n\treturn fab;\n}\nvec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {\n\tvec2 fab = DFGApprox( normal, viewDir, roughness );\n\treturn specularColor * fab.x + specularF90 * fab.y;\n}\n#ifdef USE_IRIDESCENCE\nvoid computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n#else\nvoid computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n#endif\n\tvec2 fab = DFGApprox( normal, viewDir, roughness );\n\t#ifdef USE_IRIDESCENCE\n\t\tvec3 Fr = mix( specularColor, iridescenceF0, iridescence );\n\t#else\n\t\tvec3 Fr = specularColor;\n\t#endif\n\tvec3 FssEss = Fr * fab.x + specularF90 * fab.y;\n\tfloat Ess = fab.x + fab.y;\n\tfloat Ems = 1.0 - Ess;\n\tvec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;\tvec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );\n\tsingleScatter += FssEss;\n\tmultiScatter += Fms * Ems;\n}\n#if NUM_RECT_AREA_LIGHTS > 0\n\tvoid RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t\tvec3 normal = geometry.normal;\n\t\tvec3 viewDir = geometry.viewDir;\n\t\tvec3 position = geometry.position;\n\t\tvec3 lightPos = rectAreaLight.position;\n\t\tvec3 halfWidth = rectAreaLight.halfWidth;\n\t\tvec3 halfHeight = rectAreaLight.halfHeight;\n\t\tvec3 lightColor = rectAreaLight.color;\n\t\tfloat roughness = material.roughness;\n\t\tvec3 rectCoords[ 4 ];\n\t\trectCoords[ 0 ] = lightPos + halfWidth - halfHeight;\t\trectCoords[ 1 ] = lightPos - halfWidth - halfHeight;\n\t\trectCoords[ 2 ] = lightPos - halfWidth + halfHeight;\n\t\trectCoords[ 3 ] = lightPos + halfWidth + halfHeight;\n\t\tvec2 uv = LTC_Uv( normal, viewDir, roughness );\n\t\tvec4 t1 = texture2D( ltc_1, uv );\n\t\tvec4 t2 = texture2D( ltc_2, uv );\n\t\tmat3 mInv = mat3(\n\t\t\tvec3( t1.x, 0, t1.y ),\n\t\t\tvec3(    0, 1,    0 ),\n\t\t\tvec3( t1.z, 0, t1.w )\n\t\t);\n\t\tvec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );\n\t\treflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );\n\t\treflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );\n\t}\n#endif\nvoid RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\t#ifdef USE_CLEARCOAT\n\t\tfloat dotNLcc = saturate( dot( geometry.clearcoatNormal, directLight.direction ) );\n\t\tvec3 ccIrradiance = dotNLcc * directLight.color;\n\t\tclearcoatSpecular += ccIrradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.clearcoatNormal, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tsheenSpecular += irradiance * BRDF_Sheen( directLight.direction, geometry.viewDir, geometry.normal, material.sheenColor, material.sheenRoughness );\n\t#endif\n\t#ifdef USE_IRIDESCENCE\n\t\treflectedLight.directSpecular += irradiance * BRDF_GGX_Iridescence( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness );\n\t#else\n\t\treflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularF90, material.roughness );\n\t#endif\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {\n\t#ifdef USE_CLEARCOAT\n\t\tclearcoatSpecular += clearcoatRadiance * EnvironmentBRDF( geometry.clearcoatNormal, geometry.viewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tsheenSpecular += irradiance * material.sheenColor * IBLSheenBRDF( geometry.normal, geometry.viewDir, material.sheenRoughness );\n\t#endif\n\tvec3 singleScattering = vec3( 0.0 );\n\tvec3 multiScattering = vec3( 0.0 );\n\tvec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;\n\t#ifdef USE_IRIDESCENCE\n\t\tcomputeMultiscatteringIridescence( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );\n\t#else\n\t\tcomputeMultiscattering( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );\n\t#endif\n\tvec3 totalScattering = singleScattering + multiScattering;\n\tvec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );\n\treflectedLight.indirectSpecular += radiance * singleScattering;\n\treflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;\n\treflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;\n}\n#define RE_Direct\t\t\t\tRE_Direct_Physical\n#define RE_Direct_RectArea\t\tRE_Direct_RectArea_Physical\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Physical\n#define RE_IndirectSpecular\t\tRE_IndirectSpecular_Physical\nfloat computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {\n\treturn saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );\n}",lights_fragment_begin:"\nGeometricContext geometry;\ngeometry.position = - vViewPosition;\ngeometry.normal = normal;\ngeometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );\n#ifdef USE_CLEARCOAT\n\tgeometry.clearcoatNormal = clearcoatNormal;\n#endif\n#ifdef USE_IRIDESCENCE\n\tfloat dotNVi = saturate( dot( normal, geometry.viewDir ) );\n\tif ( material.iridescenceThickness == 0.0 ) {\n\t\tmaterial.iridescence = 0.0;\n\t} else {\n\t\tmaterial.iridescence = saturate( material.iridescence );\n\t}\n\tif ( material.iridescence > 0.0 ) {\n\t\tmaterial.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );\n\t\tmaterial.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );\n\t}\n#endif\nIncidentLight directLight;\n#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )\n\tPointLight pointLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tgetPointLightInfo( pointLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )\n\t\tpointLightShadow = pointLightShadows[ i ];\n\t\tdirectLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )\n\tSpotLight spotLight;\n\tvec4 spotColor;\n\tvec3 spotLightCoord;\n\tbool inSpotLightMap;\n\t#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tgetSpotLightInfo( spotLight, geometry, directLight );\n\t\t#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )\n\t\t#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX\n\t\t#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\t#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS\n\t\t#else\n\t\t#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )\n\t\t#endif\n\t\t#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )\n\t\t\tspotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;\n\t\t\tinSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );\n\t\t\tspotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );\n\t\t\tdirectLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;\n\t\t#endif\n\t\t#undef SPOT_LIGHT_MAP_INDEX\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\tspotLightShadow = spotLightShadows[ i ];\n\t\tdirectLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )\n\tDirectionalLight directionalLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tgetDirectionalLightInfo( directionalLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )\n\t\tdirectionalLightShadow = directionalLightShadows[ i ];\n\t\tdirectLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )\n\tRectAreaLight rectAreaLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {\n\t\trectAreaLight = rectAreaLights[ i ];\n\t\tRE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if defined( RE_IndirectDiffuse )\n\tvec3 iblIrradiance = vec3( 0.0 );\n\tvec3 irradiance = getAmbientLightIrradiance( ambientLightColor );\n\tirradiance += getLightProbeIrradiance( lightProbe, geometry.normal );\n\t#if ( NUM_HEMI_LIGHTS > 0 )\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\t\tirradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry.normal );\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n#endif\n#if defined( RE_IndirectSpecular )\n\tvec3 radiance = vec3( 0.0 );\n\tvec3 clearcoatRadiance = vec3( 0.0 );\n#endif",lights_fragment_maps:"#if defined( RE_IndirectDiffuse )\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel = texture2D( lightMap, vUv2 );\n\t\tvec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;\n\t\tirradiance += lightMapIrradiance;\n\t#endif\n\t#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )\n\t\tiblIrradiance += getIBLIrradiance( geometry.normal );\n\t#endif\n#endif\n#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )\n\tradiance += getIBLRadiance( geometry.viewDir, geometry.normal, material.roughness );\n\t#ifdef USE_CLEARCOAT\n\t\tclearcoatRadiance += getIBLRadiance( geometry.viewDir, geometry.clearcoatNormal, material.clearcoatRoughness );\n\t#endif\n#endif",lights_fragment_end:"#if defined( RE_IndirectDiffuse )\n\tRE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );\n#endif\n#if defined( RE_IndirectSpecular )\n\tRE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometry, material, reflectedLight );\n#endif",logdepthbuf_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tgl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;\n#endif",logdepthbuf_pars_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tuniform float logDepthBufFC;\n\tvarying float vFragDepth;\n\tvarying float vIsPerspective;\n#endif",logdepthbuf_pars_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvarying float vFragDepth;\n\t\tvarying float vIsPerspective;\n\t#else\n\t\tuniform float logDepthBufFC;\n\t#endif\n#endif",logdepthbuf_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvFragDepth = 1.0 + gl_Position.w;\n\t\tvIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );\n\t#else\n\t\tif ( isPerspectiveMatrix( projectionMatrix ) ) {\n\t\t\tgl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;\n\t\t\tgl_Position.z *= gl_Position.w;\n\t\t}\n\t#endif\n#endif",map_fragment:"#ifdef USE_MAP\n\tvec4 sampledDiffuseColor = texture2D( map, vUv );\n\t#ifdef DECODE_VIDEO_TEXTURE\n\t\tsampledDiffuseColor = vec4( mix( pow( sampledDiffuseColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), sampledDiffuseColor.rgb * 0.0773993808, vec3( lessThanEqual( sampledDiffuseColor.rgb, vec3( 0.04045 ) ) ) ), sampledDiffuseColor.w );\n\t#endif\n\tdiffuseColor *= sampledDiffuseColor;\n#endif",map_pars_fragment:"#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif",map_particle_fragment:"#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\tvec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;\n#endif\n#ifdef USE_MAP\n\tdiffuseColor *= texture2D( map, uv );\n#endif\n#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, uv ).g;\n#endif",map_particle_pars_fragment:"#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\tuniform mat3 uvTransform;\n#endif\n#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif\n#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",metalnessmap_fragment:"float metalnessFactor = metalness;\n#ifdef USE_METALNESSMAP\n\tvec4 texelMetalness = texture2D( metalnessMap, vUv );\n\tmetalnessFactor *= texelMetalness.b;\n#endif",metalnessmap_pars_fragment:"#ifdef USE_METALNESSMAP\n\tuniform sampler2D metalnessMap;\n#endif",morphcolor_vertex:"#if defined( USE_MORPHCOLORS ) && defined( MORPHTARGETS_TEXTURE )\n\tvColor *= morphTargetBaseInfluence;\n\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t#if defined( USE_COLOR_ALPHA )\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];\n\t\t#elif defined( USE_COLOR )\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];\n\t\t#endif\n\t}\n#endif",morphnormal_vertex:"#ifdef USE_MORPHNORMALS\n\tobjectNormal *= morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];\n\t\t}\n\t#else\n\t\tobjectNormal += morphNormal0 * morphTargetInfluences[ 0 ];\n\t\tobjectNormal += morphNormal1 * morphTargetInfluences[ 1 ];\n\t\tobjectNormal += morphNormal2 * morphTargetInfluences[ 2 ];\n\t\tobjectNormal += morphNormal3 * morphTargetInfluences[ 3 ];\n\t#endif\n#endif",morphtarget_pars_vertex:"#ifdef USE_MORPHTARGETS\n\tuniform float morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tuniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];\n\t\tuniform sampler2DArray morphTargetsTexture;\n\t\tuniform ivec2 morphTargetsTextureSize;\n\t\tvec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {\n\t\t\tint texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;\n\t\t\tint y = texelIndex / morphTargetsTextureSize.x;\n\t\t\tint x = texelIndex - y * morphTargetsTextureSize.x;\n\t\t\tivec3 morphUV = ivec3( x, y, morphTargetIndex );\n\t\t\treturn texelFetch( morphTargetsTexture, morphUV, 0 );\n\t\t}\n\t#else\n\t\t#ifndef USE_MORPHNORMALS\n\t\t\tuniform float morphTargetInfluences[ 8 ];\n\t\t#else\n\t\t\tuniform float morphTargetInfluences[ 4 ];\n\t\t#endif\n\t#endif\n#endif",morphtarget_vertex:"#ifdef USE_MORPHTARGETS\n\ttransformed *= morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];\n\t\t}\n\t#else\n\t\ttransformed += morphTarget0 * morphTargetInfluences[ 0 ];\n\t\ttransformed += morphTarget1 * morphTargetInfluences[ 1 ];\n\t\ttransformed += morphTarget2 * morphTargetInfluences[ 2 ];\n\t\ttransformed += morphTarget3 * morphTargetInfluences[ 3 ];\n\t\t#ifndef USE_MORPHNORMALS\n\t\t\ttransformed += morphTarget4 * morphTargetInfluences[ 4 ];\n\t\t\ttransformed += morphTarget5 * morphTargetInfluences[ 5 ];\n\t\t\ttransformed += morphTarget6 * morphTargetInfluences[ 6 ];\n\t\t\ttransformed += morphTarget7 * morphTargetInfluences[ 7 ];\n\t\t#endif\n\t#endif\n#endif",normal_fragment_begin:"float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;\n#ifdef FLAT_SHADED\n\tvec3 fdx = dFdx( vViewPosition );\n\tvec3 fdy = dFdy( vViewPosition );\n\tvec3 normal = normalize( cross( fdx, fdy ) );\n#else\n\tvec3 normal = normalize( vNormal );\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * faceDirection;\n\t#endif\n\t#ifdef USE_TANGENT\n\t\tvec3 tangent = normalize( vTangent );\n\t\tvec3 bitangent = normalize( vBitangent );\n\t\t#ifdef DOUBLE_SIDED\n\t\t\ttangent = tangent * faceDirection;\n\t\t\tbitangent = bitangent * faceDirection;\n\t\t#endif\n\t\t#if defined( TANGENTSPACE_NORMALMAP ) || defined( USE_CLEARCOAT_NORMALMAP )\n\t\t\tmat3 vTBN = mat3( tangent, bitangent, normal );\n\t\t#endif\n\t#endif\n#endif\nvec3 geometryNormal = normal;",normal_fragment_maps:"#ifdef OBJECTSPACE_NORMALMAP\n\tnormal = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\t#ifdef FLIP_SIDED\n\t\tnormal = - normal;\n\t#endif\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * faceDirection;\n\t#endif\n\tnormal = normalize( normalMatrix * normal );\n#elif defined( TANGENTSPACE_NORMALMAP )\n\tvec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\tmapN.xy *= normalScale;\n\t#ifdef USE_TANGENT\n\t\tnormal = normalize( vTBN * mapN );\n\t#else\n\t\tnormal = perturbNormal2Arb( - vViewPosition, normal, mapN, faceDirection );\n\t#endif\n#elif defined( USE_BUMPMAP )\n\tnormal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );\n#endif",normal_pars_fragment:"#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif",normal_pars_vertex:"#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif",normal_vertex:"#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n\t#ifdef USE_TANGENT\n\t\tvTangent = normalize( transformedTangent );\n\t\tvBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );\n\t#endif\n#endif",normalmap_pars_fragment:"#ifdef USE_NORMALMAP\n\tuniform sampler2D normalMap;\n\tuniform vec2 normalScale;\n#endif\n#ifdef OBJECTSPACE_NORMALMAP\n\tuniform mat3 normalMatrix;\n#endif\n#if ! defined ( USE_TANGENT ) && ( defined ( TANGENTSPACE_NORMALMAP ) || defined ( USE_CLEARCOAT_NORMALMAP ) )\n\tvec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm, vec3 mapN, float faceDirection ) {\n\t\tvec3 q0 = dFdx( eye_pos.xyz );\n\t\tvec3 q1 = dFdy( eye_pos.xyz );\n\t\tvec2 st0 = dFdx( vUv.st );\n\t\tvec2 st1 = dFdy( vUv.st );\n\t\tvec3 N = surf_norm;\n\t\tvec3 q1perp = cross( q1, N );\n\t\tvec3 q0perp = cross( N, q0 );\n\t\tvec3 T = q1perp * st0.x + q0perp * st1.x;\n\t\tvec3 B = q1perp * st0.y + q0perp * st1.y;\n\t\tfloat det = max( dot( T, T ), dot( B, B ) );\n\t\tfloat scale = ( det == 0.0 ) ? 0.0 : faceDirection * inversesqrt( det );\n\t\treturn normalize( T * ( mapN.x * scale ) + B * ( mapN.y * scale ) + N * mapN.z );\n\t}\n#endif",clearcoat_normal_fragment_begin:"#ifdef USE_CLEARCOAT\n\tvec3 clearcoatNormal = geometryNormal;\n#endif",clearcoat_normal_fragment_maps:"#ifdef USE_CLEARCOAT_NORMALMAP\n\tvec3 clearcoatMapN = texture2D( clearcoatNormalMap, vUv ).xyz * 2.0 - 1.0;\n\tclearcoatMapN.xy *= clearcoatNormalScale;\n\t#ifdef USE_TANGENT\n\t\tclearcoatNormal = normalize( vTBN * clearcoatMapN );\n\t#else\n\t\tclearcoatNormal = perturbNormal2Arb( - vViewPosition, clearcoatNormal, clearcoatMapN, faceDirection );\n\t#endif\n#endif",clearcoat_pars_fragment:"#ifdef USE_CLEARCOATMAP\n\tuniform sampler2D clearcoatMap;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tuniform sampler2D clearcoatRoughnessMap;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tuniform sampler2D clearcoatNormalMap;\n\tuniform vec2 clearcoatNormalScale;\n#endif",iridescence_pars_fragment:"#ifdef USE_IRIDESCENCEMAP\n\tuniform sampler2D iridescenceMap;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tuniform sampler2D iridescenceThicknessMap;\n#endif",output_fragment:"#ifdef OPAQUE\ndiffuseColor.a = 1.0;\n#endif\n#ifdef USE_TRANSMISSION\ndiffuseColor.a *= material.transmissionAlpha + 0.1;\n#endif\ngl_FragColor = vec4( outgoingLight, diffuseColor.a );",packing:"vec3 packNormalToRGB( const in vec3 normal ) {\n\treturn normalize( normal ) * 0.5 + 0.5;\n}\nvec3 unpackRGBToNormal( const in vec3 rgb ) {\n\treturn 2.0 * rgb.xyz - 1.0;\n}\nconst float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;\nconst vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );\nconst vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );\nconst float ShiftRight8 = 1. / 256.;\nvec4 packDepthToRGBA( const in float v ) {\n\tvec4 r = vec4( fract( v * PackFactors ), v );\n\tr.yzw -= r.xyz * ShiftRight8;\treturn r * PackUpscale;\n}\nfloat unpackRGBAToDepth( const in vec4 v ) {\n\treturn dot( v, UnpackFactors );\n}\nvec2 packDepthToRG( in highp float v ) {\n\treturn packDepthToRGBA( v ).yx;\n}\nfloat unpackRGToDepth( const in highp vec2 v ) {\n\treturn unpackRGBAToDepth( vec4( v.xy, 0.0, 0.0 ) );\n}\nvec4 pack2HalfToRGBA( vec2 v ) {\n\tvec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );\n\treturn vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );\n}\nvec2 unpackRGBATo2Half( vec4 v ) {\n\treturn vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );\n}\nfloat viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( viewZ + near ) / ( near - far );\n}\nfloat orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {\n\treturn linearClipZ * ( near - far ) - near;\n}\nfloat viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );\n}\nfloat perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {\n\treturn ( near * far ) / ( ( far - near ) * invClipZ - far );\n}",premultiplied_alpha_fragment:"#ifdef PREMULTIPLIED_ALPHA\n\tgl_FragColor.rgb *= gl_FragColor.a;\n#endif",project_vertex:"vec4 mvPosition = vec4( transformed, 1.0 );\n#ifdef USE_INSTANCING\n\tmvPosition = instanceMatrix * mvPosition;\n#endif\nmvPosition = modelViewMatrix * mvPosition;\ngl_Position = projectionMatrix * mvPosition;",dithering_fragment:"#ifdef DITHERING\n\tgl_FragColor.rgb = dithering( gl_FragColor.rgb );\n#endif",dithering_pars_fragment:"#ifdef DITHERING\n\tvec3 dithering( vec3 color ) {\n\t\tfloat grid_position = rand( gl_FragCoord.xy );\n\t\tvec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );\n\t\tdither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );\n\t\treturn color + dither_shift_RGB;\n\t}\n#endif",roughnessmap_fragment:"float roughnessFactor = roughness;\n#ifdef USE_ROUGHNESSMAP\n\tvec4 texelRoughness = texture2D( roughnessMap, vUv );\n\troughnessFactor *= texelRoughness.g;\n#endif",roughnessmap_pars_fragment:"#ifdef USE_ROUGHNESSMAP\n\tuniform sampler2D roughnessMap;\n#endif",shadowmap_pars_fragment:"#if NUM_SPOT_LIGHT_COORDS > 0\n  varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];\n#endif\n#if NUM_SPOT_LIGHT_MAPS > 0\n  uniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];\n#endif\n#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n\tfloat texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\n\t\treturn step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );\n\t}\n\tvec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {\n\t\treturn unpackRGBATo2Half( texture2D( shadow, uv ) );\n\t}\n\tfloat VSMShadow (sampler2D shadow, vec2 uv, float compare ){\n\t\tfloat occlusion = 1.0;\n\t\tvec2 distribution = texture2DDistribution( shadow, uv );\n\t\tfloat hard_shadow = step( compare , distribution.x );\n\t\tif (hard_shadow != 1.0 ) {\n\t\t\tfloat distance = compare - distribution.x ;\n\t\t\tfloat variance = max( 0.00000, distribution.y * distribution.y );\n\t\t\tfloat softness_probability = variance / (variance + distance * distance );\t\t\tsoftness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );\t\t\tocclusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );\n\t\t}\n\t\treturn occlusion;\n\t}\n\tfloat getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n\t\tfloat shadow = 1.0;\n\t\tshadowCoord.xyz /= shadowCoord.w;\n\t\tshadowCoord.z += shadowBias;\n\t\tbool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;\n\t\tbool frustumTest = inFrustum && shadowCoord.z <= 1.0;\n\t\tif ( frustumTest ) {\n\t\t#if defined( SHADOWMAP_TYPE_PCF )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\tfloat dx2 = dx0 / 2.0;\n\t\t\tfloat dy2 = dy0 / 2.0;\n\t\t\tfloat dx3 = dx1 / 2.0;\n\t\t\tfloat dy3 = dy1 / 2.0;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 17.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx = texelSize.x;\n\t\t\tfloat dy = texelSize.y;\n\t\t\tvec2 uv = shadowCoord.xy;\n\t\t\tvec2 f = fract( uv * shadowMapSize + 0.5 );\n\t\t\tuv -= f * texelSize;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, uv, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t f.y )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_VSM )\n\t\t\tshadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#else\n\t\t\tshadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#endif\n\t\t}\n\t\treturn shadow;\n\t}\n\tvec2 cubeToUV( vec3 v, float texelSizeY ) {\n\t\tvec3 absV = abs( v );\n\t\tfloat scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );\n\t\tabsV *= scaleToCube;\n\t\tv *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );\n\t\tvec2 planar = v.xy;\n\t\tfloat almostATexel = 1.5 * texelSizeY;\n\t\tfloat almostOne = 1.0 - almostATexel;\n\t\tif ( absV.z >= almostOne ) {\n\t\t\tif ( v.z > 0.0 )\n\t\t\t\tplanar.x = 4.0 - v.x;\n\t\t} else if ( absV.x >= almostOne ) {\n\t\t\tfloat signX = sign( v.x );\n\t\t\tplanar.x = v.z * signX + 2.0 * signX;\n\t\t} else if ( absV.y >= almostOne ) {\n\t\t\tfloat signY = sign( v.y );\n\t\t\tplanar.x = v.x + 2.0 * signY + 2.0;\n\t\t\tplanar.y = v.z * signY - 2.0;\n\t\t}\n\t\treturn vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\n\t}\n\tfloat getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {\n\t\tvec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );\n\t\tvec3 lightToPosition = shadowCoord.xyz;\n\t\tfloat dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );\t\tdp += shadowBias;\n\t\tvec3 bd3D = normalize( lightToPosition );\n\t\t#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )\n\t\t\tvec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;\n\t\t\treturn (\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#else\n\t\t\treturn texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );\n\t\t#endif\n\t}\n#endif",shadowmap_pars_vertex:"#if NUM_SPOT_LIGHT_COORDS > 0\n  uniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];\n  varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];\n#endif\n#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n#endif",shadowmap_vertex:"#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )\n\tvec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\tvec4 shadowWorldPosition;\n#endif\n#if defined( USE_SHADOWMAP )\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );\n\t\t\tvDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );\n\t\t\tvPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n#endif\n#if NUM_SPOT_LIGHT_COORDS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition;\n\t\t#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\t\tshadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;\n\t\t#endif\n\t\tvSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n#endif",shadowmask_pars_fragment:"float getShadowMask() {\n\tfloat shadow = 1.0;\n\t#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\tdirectionalLight = directionalLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\n\t\tspotLight = spotLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\tpointLight = pointLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#endif\n\treturn shadow;\n}",skinbase_vertex:"#ifdef USE_SKINNING\n\tmat4 boneMatX = getBoneMatrix( skinIndex.x );\n\tmat4 boneMatY = getBoneMatrix( skinIndex.y );\n\tmat4 boneMatZ = getBoneMatrix( skinIndex.z );\n\tmat4 boneMatW = getBoneMatrix( skinIndex.w );\n#endif",skinning_pars_vertex:"#ifdef USE_SKINNING\n\tuniform mat4 bindMatrix;\n\tuniform mat4 bindMatrixInverse;\n\tuniform highp sampler2D boneTexture;\n\tuniform int boneTextureSize;\n\tmat4 getBoneMatrix( const in float i ) {\n\t\tfloat j = i * 4.0;\n\t\tfloat x = mod( j, float( boneTextureSize ) );\n\t\tfloat y = floor( j / float( boneTextureSize ) );\n\t\tfloat dx = 1.0 / float( boneTextureSize );\n\t\tfloat dy = 1.0 / float( boneTextureSize );\n\t\ty = dy * ( y + 0.5 );\n\t\tvec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );\n\t\tvec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );\n\t\tvec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );\n\t\tvec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );\n\t\tmat4 bone = mat4( v1, v2, v3, v4 );\n\t\treturn bone;\n\t}\n#endif",skinning_vertex:"#ifdef USE_SKINNING\n\tvec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\n\tvec4 skinned = vec4( 0.0 );\n\tskinned += boneMatX * skinVertex * skinWeight.x;\n\tskinned += boneMatY * skinVertex * skinWeight.y;\n\tskinned += boneMatZ * skinVertex * skinWeight.z;\n\tskinned += boneMatW * skinVertex * skinWeight.w;\n\ttransformed = ( bindMatrixInverse * skinned ).xyz;\n#endif",skinnormal_vertex:"#ifdef USE_SKINNING\n\tmat4 skinMatrix = mat4( 0.0 );\n\tskinMatrix += skinWeight.x * boneMatX;\n\tskinMatrix += skinWeight.y * boneMatY;\n\tskinMatrix += skinWeight.z * boneMatZ;\n\tskinMatrix += skinWeight.w * boneMatW;\n\tskinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;\n\tobjectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\n\t#ifdef USE_TANGENT\n\t\tobjectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#endif\n#endif",specularmap_fragment:"float specularStrength;\n#ifdef USE_SPECULARMAP\n\tvec4 texelSpecular = texture2D( specularMap, vUv );\n\tspecularStrength = texelSpecular.r;\n#else\n\tspecularStrength = 1.0;\n#endif",specularmap_pars_fragment:"#ifdef USE_SPECULARMAP\n\tuniform sampler2D specularMap;\n#endif",tonemapping_fragment:"#if defined( TONE_MAPPING )\n\tgl_FragColor.rgb = toneMapping( gl_FragColor.rgb );\n#endif",tonemapping_pars_fragment:"#ifndef saturate\n#define saturate( a ) clamp( a, 0.0, 1.0 )\n#endif\nuniform float toneMappingExposure;\nvec3 LinearToneMapping( vec3 color ) {\n\treturn toneMappingExposure * color;\n}\nvec3 ReinhardToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( color / ( vec3( 1.0 ) + color ) );\n}\nvec3 OptimizedCineonToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\tcolor = max( vec3( 0.0 ), color - 0.004 );\n\treturn pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );\n}\nvec3 RRTAndODTFit( vec3 v ) {\n\tvec3 a = v * ( v + 0.0245786 ) - 0.000090537;\n\tvec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;\n\treturn a / b;\n}\nvec3 ACESFilmicToneMapping( vec3 color ) {\n\tconst mat3 ACESInputMat = mat3(\n\t\tvec3( 0.59719, 0.07600, 0.02840 ),\t\tvec3( 0.35458, 0.90834, 0.13383 ),\n\t\tvec3( 0.04823, 0.01566, 0.83777 )\n\t);\n\tconst mat3 ACESOutputMat = mat3(\n\t\tvec3(  1.60475, -0.10208, -0.00327 ),\t\tvec3( -0.53108,  1.10813, -0.07276 ),\n\t\tvec3( -0.07367, -0.00605,  1.07602 )\n\t);\n\tcolor *= toneMappingExposure / 0.6;\n\tcolor = ACESInputMat * color;\n\tcolor = RRTAndODTFit( color );\n\tcolor = ACESOutputMat * color;\n\treturn saturate( color );\n}\nvec3 CustomToneMapping( vec3 color ) { return color; }",transmission_fragment:"#ifdef USE_TRANSMISSION\n\tmaterial.transmission = transmission;\n\tmaterial.transmissionAlpha = 1.0;\n\tmaterial.thickness = thickness;\n\tmaterial.attenuationDistance = attenuationDistance;\n\tmaterial.attenuationColor = attenuationColor;\n\t#ifdef USE_TRANSMISSIONMAP\n\t\tmaterial.transmission *= texture2D( transmissionMap, vUv ).r;\n\t#endif\n\t#ifdef USE_THICKNESSMAP\n\t\tmaterial.thickness *= texture2D( thicknessMap, vUv ).g;\n\t#endif\n\tvec3 pos = vWorldPosition;\n\tvec3 v = normalize( cameraPosition - pos );\n\tvec3 n = inverseTransformDirection( normal, viewMatrix );\n\tvec4 transmission = getIBLVolumeRefraction(\n\t\tn, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,\n\t\tpos, modelMatrix, viewMatrix, projectionMatrix, material.ior, material.thickness,\n\t\tmaterial.attenuationColor, material.attenuationDistance );\n\tmaterial.transmissionAlpha = mix( material.transmissionAlpha, transmission.a, material.transmission );\n\ttotalDiffuse = mix( totalDiffuse, transmission.rgb, material.transmission );\n#endif",transmission_pars_fragment:"#ifdef USE_TRANSMISSION\n\tuniform float transmission;\n\tuniform float thickness;\n\tuniform float attenuationDistance;\n\tuniform vec3 attenuationColor;\n\t#ifdef USE_TRANSMISSIONMAP\n\t\tuniform sampler2D transmissionMap;\n\t#endif\n\t#ifdef USE_THICKNESSMAP\n\t\tuniform sampler2D thicknessMap;\n\t#endif\n\tuniform vec2 transmissionSamplerSize;\n\tuniform sampler2D transmissionSamplerMap;\n\tuniform mat4 modelMatrix;\n\tuniform mat4 projectionMatrix;\n\tvarying vec3 vWorldPosition;\n\tvec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {\n\t\tvec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );\n\t\tvec3 modelScale;\n\t\tmodelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );\n\t\tmodelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );\n\t\tmodelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );\n\t\treturn normalize( refractionVector ) * thickness * modelScale;\n\t}\n\tfloat applyIorToRoughness( const in float roughness, const in float ior ) {\n\t\treturn roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );\n\t}\n\tvec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {\n\t\tfloat framebufferLod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );\n\t\t#ifdef texture2DLodEXT\n\t\t\treturn texture2DLodEXT( transmissionSamplerMap, fragCoord.xy, framebufferLod );\n\t\t#else\n\t\t\treturn texture2D( transmissionSamplerMap, fragCoord.xy, framebufferLod );\n\t\t#endif\n\t}\n\tvec3 applyVolumeAttenuation( const in vec3 radiance, const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {\n\t\tif ( isinf( attenuationDistance ) ) {\n\t\t\treturn radiance;\n\t\t} else {\n\t\t\tvec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;\n\t\t\tvec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );\t\t\treturn transmittance * radiance;\n\t\t}\n\t}\n\tvec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,\n\t\tconst in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,\n\t\tconst in mat4 viewMatrix, const in mat4 projMatrix, const in float ior, const in float thickness,\n\t\tconst in vec3 attenuationColor, const in float attenuationDistance ) {\n\t\tvec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );\n\t\tvec3 refractedRayExit = position + transmissionRay;\n\t\tvec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );\n\t\tvec2 refractionCoords = ndcPos.xy / ndcPos.w;\n\t\trefractionCoords += 1.0;\n\t\trefractionCoords /= 2.0;\n\t\tvec4 transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );\n\t\tvec3 attenuatedColor = applyVolumeAttenuation( transmittedLight.rgb, length( transmissionRay ), attenuationColor, attenuationDistance );\n\t\tvec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );\n\t\treturn vec4( ( 1.0 - F ) * attenuatedColor * diffuseColor, transmittedLight.a );\n\t}\n#endif",uv_pars_fragment:"#if ( defined( USE_UV ) && ! defined( UVS_VERTEX_ONLY ) )\n\tvarying vec2 vUv;\n#endif",uv_pars_vertex:"#ifdef USE_UV\n\t#ifdef UVS_VERTEX_ONLY\n\t\tvec2 vUv;\n\t#else\n\t\tvarying vec2 vUv;\n\t#endif\n\tuniform mat3 uvTransform;\n#endif",uv_vertex:"#ifdef USE_UV\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n#endif",uv2_pars_fragment:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvarying vec2 vUv2;\n#endif",uv2_pars_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tattribute vec2 uv2;\n\tvarying vec2 vUv2;\n\tuniform mat3 uv2Transform;\n#endif",uv2_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvUv2 = ( uv2Transform * vec3( uv2, 1 ) ).xy;\n#endif",worldpos_vertex:"#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0\n\tvec4 worldPosition = vec4( transformed, 1.0 );\n\t#ifdef USE_INSTANCING\n\t\tworldPosition = instanceMatrix * worldPosition;\n\t#endif\n\tworldPosition = modelMatrix * worldPosition;\n#endif",background_vert:"varying vec2 vUv;\nuniform mat3 uvTransform;\nvoid main() {\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n\tgl_Position = vec4( position.xy, 1.0, 1.0 );\n}",background_frag:"uniform sampler2D t2D;\nuniform float backgroundIntensity;\nvarying vec2 vUv;\nvoid main() {\n\tvec4 texColor = texture2D( t2D, vUv );\n\t#ifdef DECODE_VIDEO_TEXTURE\n\t\ttexColor = vec4( mix( pow( texColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), texColor.rgb * 0.0773993808, vec3( lessThanEqual( texColor.rgb, vec3( 0.04045 ) ) ) ), texColor.w );\n\t#endif\n\ttexColor.rgb *= backgroundIntensity;\n\tgl_FragColor = texColor;\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",backgroundCube_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}",backgroundCube_frag:"#ifdef ENVMAP_TYPE_CUBE\n\tuniform samplerCube envMap;\n#elif defined( ENVMAP_TYPE_CUBE_UV )\n\tuniform sampler2D envMap;\n#endif\nuniform float flipEnvMap;\nuniform float backgroundBlurriness;\nuniform float backgroundIntensity;\nvarying vec3 vWorldDirection;\n#include <cube_uv_reflection_fragment>\nvoid main() {\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 texColor = textureCube( envMap, vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );\n\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\tvec4 texColor = textureCubeUV( envMap, vWorldDirection, backgroundBlurriness );\n\t#else\n\t\tvec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\t#endif\n\ttexColor.rgb *= backgroundIntensity;\n\tgl_FragColor = texColor;\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",cube_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}",cube_frag:"uniform samplerCube tCube;\nuniform float tFlip;\nuniform float opacity;\nvarying vec3 vWorldDirection;\nvoid main() {\n\tvec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );\n\tgl_FragColor = texColor;\n\tgl_FragColor.a *= opacity;\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",depth_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvHighPrecisionZW = gl_Position.zw;\n}",depth_frag:"#if DEPTH_PACKING == 3200\n\tuniform float opacity;\n#endif\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#if DEPTH_PACKING == 3200\n\t\tdiffuseColor.a = opacity;\n\t#endif\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <logdepthbuf_fragment>\n\tfloat fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;\n\t#if DEPTH_PACKING == 3200\n\t\tgl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );\n\t#elif DEPTH_PACKING == 3201\n\t\tgl_FragColor = packDepthToRGBA( fragCoordZ );\n\t#endif\n}",distanceRGBA_vert:"#define DISTANCE\nvarying vec3 vWorldPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\tvWorldPosition = worldPosition.xyz;\n}",distanceRGBA_frag:"#define DISTANCE\nuniform vec3 referencePosition;\nuniform float nearDistance;\nuniform float farDistance;\nvarying vec3 vWorldPosition;\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main () {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\tfloat dist = length( vWorldPosition - referencePosition );\n\tdist = ( dist - nearDistance ) / ( farDistance - nearDistance );\n\tdist = saturate( dist );\n\tgl_FragColor = packDepthToRGBA( dist );\n}",equirect_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n}",equirect_frag:"uniform sampler2D tEquirect;\nvarying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvec3 direction = normalize( vWorldDirection );\n\tvec2 sampleUV = equirectUv( direction );\n\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",linedashed_vert:"uniform float scale;\nattribute float lineDistance;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\tvLineDistance = scale * lineDistance;\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",linedashed_frag:"uniform vec3 diffuse;\nuniform float opacity;\nuniform float dashSize;\nuniform float totalSize;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tif ( mod( vLineDistance, totalSize ) > dashSize ) {\n\t\tdiscard;\n\t}\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <color_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",meshbasic_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinbase_vertex>\n\t\t#include <skinnormal_vertex>\n\t\t#include <defaultnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <fog_vertex>\n}",meshbasic_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel = texture2D( lightMap, vUv2 );\n\t\treflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;\n\t#else\n\t\treflectedLight.indirectDiffuse += vec3( 1.0 );\n\t#endif\n\t#include <aomap_fragment>\n\treflectedLight.indirectDiffuse *= diffuseColor.rgb;\n\tvec3 outgoingLight = reflectedLight.indirectDiffuse;\n\t#include <envmap_fragment>\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshlambert_vert:"#define LAMBERT\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshlambert_frag:"#define LAMBERT\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_lambert_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_lambert_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshmatcap_vert:"#define MATCAP\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <color_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n\tvViewPosition = - mvPosition.xyz;\n}",meshmatcap_frag:"#define MATCAP\nuniform vec3 diffuse;\nuniform float opacity;\nuniform sampler2D matcap;\nvarying vec3 vViewPosition;\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <fog_pars_fragment>\n#include <normal_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tvec3 viewDir = normalize( vViewPosition );\n\tvec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );\n\tvec3 y = cross( viewDir, x );\n\tvec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;\n\t#ifdef USE_MATCAP\n\t\tvec4 matcapColor = texture2D( matcap, uv );\n\t#else\n\t\tvec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );\n\t#endif\n\tvec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshnormal_vert:"#define NORMAL\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvViewPosition = - mvPosition.xyz;\n#endif\n}",meshnormal_frag:"#define NORMAL\nuniform float opacity;\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#include <packing>\n#include <uv_pars_fragment>\n#include <normal_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\t#include <logdepthbuf_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tgl_FragColor = vec4( packNormalToRGB( normal ), opacity );\n\t#ifdef OPAQUE\n\t\tgl_FragColor.a = 1.0;\n\t#endif\n}",meshphong_vert:"#define PHONG\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshphong_frag:"#define PHONG\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_phong_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_phong_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshphysical_vert:"#define STANDARD\nvarying vec3 vViewPosition;\n#ifdef USE_TRANSMISSION\n\tvarying vec3 vWorldPosition;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n#ifdef USE_TRANSMISSION\n\tvWorldPosition = worldPosition.xyz;\n#endif\n}",meshphysical_frag:"#define STANDARD\n#ifdef PHYSICAL\n\t#define IOR\n\t#define SPECULAR\n#endif\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float roughness;\nuniform float metalness;\nuniform float opacity;\n#ifdef IOR\n\tuniform float ior;\n#endif\n#ifdef SPECULAR\n\tuniform float specularIntensity;\n\tuniform vec3 specularColor;\n\t#ifdef USE_SPECULARINTENSITYMAP\n\t\tuniform sampler2D specularIntensityMap;\n\t#endif\n\t#ifdef USE_SPECULARCOLORMAP\n\t\tuniform sampler2D specularColorMap;\n\t#endif\n#endif\n#ifdef USE_CLEARCOAT\n\tuniform float clearcoat;\n\tuniform float clearcoatRoughness;\n#endif\n#ifdef USE_IRIDESCENCE\n\tuniform float iridescence;\n\tuniform float iridescenceIOR;\n\tuniform float iridescenceThicknessMinimum;\n\tuniform float iridescenceThicknessMaximum;\n#endif\n#ifdef USE_SHEEN\n\tuniform vec3 sheenColor;\n\tuniform float sheenRoughness;\n\t#ifdef USE_SHEENCOLORMAP\n\t\tuniform sampler2D sheenColorMap;\n\t#endif\n\t#ifdef USE_SHEENROUGHNESSMAP\n\t\tuniform sampler2D sheenRoughnessMap;\n\t#endif\n#endif\nvarying vec3 vViewPosition;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <bsdfs>\n#include <iridescence_fragment>\n#include <cube_uv_reflection_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_physical_pars_fragment>\n#include <fog_pars_fragment>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_physical_pars_fragment>\n#include <transmission_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <clearcoat_pars_fragment>\n#include <iridescence_pars_fragment>\n#include <roughnessmap_pars_fragment>\n#include <metalnessmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <roughnessmap_fragment>\n\t#include <metalnessmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <clearcoat_normal_fragment_begin>\n\t#include <clearcoat_normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_physical_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;\n\tvec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;\n\t#include <transmission_fragment>\n\tvec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;\n\t#ifdef USE_SHEEN\n\t\tfloat sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );\n\t\toutgoingLight = outgoingLight * sheenEnergyComp + sheenSpecular;\n\t#endif\n\t#ifdef USE_CLEARCOAT\n\t\tfloat dotNVcc = saturate( dot( geometry.clearcoatNormal, geometry.viewDir ) );\n\t\tvec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );\n\t\toutgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + clearcoatSpecular * material.clearcoat;\n\t#endif\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshtoon_vert:"#define TOON\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshtoon_frag:"#define TOON\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <gradientmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_toon_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_toon_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",points_vert:"uniform float size;\nuniform float scale;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\tgl_PointSize = size;\n\t#ifdef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );\n\t#endif\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <fog_vertex>\n}",points_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <color_pars_fragment>\n#include <map_particle_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_particle_fragment>\n\t#include <color_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",shadow_vert:"#include <common>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\nvoid main() {\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",shadow_frag:"uniform vec3 color;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\nvoid main() {\n\tgl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}",sprite_vert:"uniform float rotation;\nuniform vec2 center;\n#include <common>\n#include <uv_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\tvec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );\n\tvec2 scale;\n\tscale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );\n\tscale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );\n\t#ifndef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) scale *= - mvPosition.z;\n\t#endif\n\tvec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;\n\tvec2 rotatedPosition;\n\trotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;\n\trotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;\n\tmvPosition.xy += rotatedPosition;\n\tgl_Position = projectionMatrix * mvPosition;\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",sprite_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}"},uw={common:{diffuse:{value:new By(16777215)},opacity:{value:1},map:{value:null},uvTransform:{value:new Ey},uv2Transform:{value:new Ey},alphaMap:{value:null},alphaTest:{value:0}},specularmap:{specularMap:{value:null}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1}},emissivemap:{emissiveMap:{value:null}},bumpmap:{bumpMap:{value:null},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalScale:{value:new Ay(1,1)}},displacementmap:{displacementMap:{value:null},displacementScale:{value:1},displacementBias:{value:0}},roughnessmap:{roughnessMap:{value:null}},metalnessmap:{metalnessMap:{value:null}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new By(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new By(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new Ey}},sprite:{diffuse:{value:new By(16777215)},opacity:{value:1},center:{value:new Ay(.5,.5)},rotation:{value:0},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new Ey}}},cw={basic:{uniforms:q_([uw.common,uw.specularmap,uw.envmap,uw.aomap,uw.lightmap,uw.fog]),vertexShader:lw.meshbasic_vert,fragmentShader:lw.meshbasic_frag},lambert:{uniforms:q_([uw.common,uw.specularmap,uw.envmap,uw.aomap,uw.lightmap,uw.emissivemap,uw.bumpmap,uw.normalmap,uw.displacementmap,uw.fog,uw.lights,{emissive:{value:new By(0)}}]),vertexShader:lw.meshlambert_vert,fragmentShader:lw.meshlambert_frag},phong:{uniforms:q_([uw.common,uw.specularmap,uw.envmap,uw.aomap,uw.lightmap,uw.emissivemap,uw.bumpmap,uw.normalmap,uw.displacementmap,uw.fog,uw.lights,{emissive:{value:new By(0)},specular:{value:new By(1118481)},shininess:{value:30}}]),vertexShader:lw.meshphong_vert,fragmentShader:lw.meshphong_frag},standard:{uniforms:q_([uw.common,uw.envmap,uw.aomap,uw.lightmap,uw.emissivemap,uw.bumpmap,uw.normalmap,uw.displacementmap,uw.roughnessmap,uw.metalnessmap,uw.fog,uw.lights,{emissive:{value:new By(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:lw.meshphysical_vert,fragmentShader:lw.meshphysical_frag},toon:{uniforms:q_([uw.common,uw.aomap,uw.lightmap,uw.emissivemap,uw.bumpmap,uw.normalmap,uw.displacementmap,uw.gradientmap,uw.fog,uw.lights,{emissive:{value:new By(0)}}]),vertexShader:lw.meshtoon_vert,fragmentShader:lw.meshtoon_frag},matcap:{uniforms:q_([uw.common,uw.bumpmap,uw.normalmap,uw.displacementmap,uw.fog,{matcap:{value:null}}]),vertexShader:lw.meshmatcap_vert,fragmentShader:lw.meshmatcap_frag},points:{uniforms:q_([uw.points,uw.fog]),vertexShader:lw.points_vert,fragmentShader:lw.points_frag},dashed:{uniforms:q_([uw.common,uw.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:lw.linedashed_vert,fragmentShader:lw.linedashed_frag},depth:{uniforms:q_([uw.common,uw.displacementmap]),vertexShader:lw.depth_vert,fragmentShader:lw.depth_frag},normal:{uniforms:q_([uw.common,uw.bumpmap,uw.normalmap,uw.displacementmap,{opacity:{value:1}}]),vertexShader:lw.meshnormal_vert,fragmentShader:lw.meshnormal_frag},sprite:{uniforms:q_([uw.sprite,uw.fog]),vertexShader:lw.sprite_vert,fragmentShader:lw.sprite_frag},background:{uniforms:{uvTransform:{value:new Ey},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:lw.background_vert,fragmentShader:lw.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1}},vertexShader:lw.backgroundCube_vert,fragmentShader:lw.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:lw.cube_vert,fragmentShader:lw.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:lw.equirect_vert,fragmentShader:lw.equirect_frag},distanceRGBA:{uniforms:q_([uw.common,uw.displacementmap,{referencePosition:{value:new Ky},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:lw.distanceRGBA_vert,fragmentShader:lw.distanceRGBA_frag},shadow:{uniforms:q_([uw.lights,uw.fog,{color:{value:new By(0)},opacity:{value:1}}]),vertexShader:lw.shadow_vert,fragmentShader:lw.shadow_frag}};cw.physical={uniforms:q_([cw.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatNormalScale:{value:new Ay(1,1)},clearcoatNormalMap:{value:null},iridescence:{value:0},iridescenceMap:{value:null},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},sheen:{value:0},sheenColor:{value:new By(0)},sheenColorMap:{value:null},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},transmission:{value:0},transmissionMap:{value:null},transmissionSamplerSize:{value:new Ay},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},attenuationDistance:{value:0},attenuationColor:{value:new By(0)},specularIntensity:{value:1},specularIntensityMap:{value:null},specularColor:{value:new By(1,1,1)},specularColorMap:{value:null}}]),vertexShader:lw.meshphysical_vert,fragmentShader:lw.meshphysical_frag};const dw={r:0,b:0,g:0};function fw(t,e,n,r,i,o,a){const s=new By(0);let l,u,c=!0===o?0:1,d=null,f=0,h=null;function p(e,n){e.getRGB(dw,G_(t)),r.buffers.color.setClear(dw.r,dw.g,dw.b,n,a)}return{getClearColor:function(){return s},setClearColor:function(t,e=1){s.set(t),c=e,p(s,c)},getClearAlpha:function(){return c},setClearAlpha:function(t){c=t,p(s,c)},render:function(r,o){let a=!1,m=!0===o.isScene?o.background:null;if(m&&m.isTexture){m=(o.backgroundBlurriness>0?n:e).get(m)}const g=t.xr,v=g.getSession&&g.getSession();v&&"additive"===v.environmentBlendMode&&(m=null),null===m?p(s,c):m&&m.isColor&&(p(m,1),a=!0),(t.autoClear||a)&&t.clear(t.autoClearColor,t.autoClearDepth,t.autoClearStencil),m&&(m.isCubeTexture||m.mapping===Lg)?(void 0===u&&(u=new j_(new F_(1,1,1),new V_({name:"BackgroundCubeMaterial",uniforms:U_(cw.backgroundCube.uniforms),vertexShader:cw.backgroundCube.vertexShader,fragmentShader:cw.backgroundCube.fragmentShader,side:Gm,depthTest:!1,depthWrite:!1,fog:!1})),u.geometry.deleteAttribute("normal"),u.geometry.deleteAttribute("uv"),u.onBeforeRender=function(t,e,n){this.matrixWorld.copyPosition(n.matrixWorld)},Object.defineProperty(u.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),i.update(u)),u.material.uniforms.envMap.value=m,u.material.uniforms.flipEnvMap.value=m.isCubeTexture&&!1===m.isRenderTargetTexture?-1:1,u.material.uniforms.backgroundBlurriness.value=o.backgroundBlurriness,u.material.uniforms.backgroundIntensity.value=o.backgroundIntensity,u.material.toneMapped=m.encoding!==Xv,d===m&&f===m.version&&h===t.toneMapping||(u.material.needsUpdate=!0,d=m,f=m.version,h=t.toneMapping),u.layers.enableAll(),r.unshift(u,u.geometry,u.material,0,0,null)):m&&m.isTexture&&(void 0===l&&(l=new j_(new sw(2,2),new V_({name:"BackgroundMaterial",uniforms:U_(cw.background.uniforms),vertexShader:cw.background.vertexShader,fragmentShader:cw.background.fragmentShader,side:qm,depthTest:!1,depthWrite:!1,fog:!1})),l.geometry.deleteAttribute("normal"),Object.defineProperty(l.material,"map",{get:function(){return this.uniforms.t2D.value}}),i.update(l)),l.material.uniforms.t2D.value=m,l.material.uniforms.backgroundIntensity.value=o.backgroundIntensity,l.material.toneMapped=m.encoding!==Xv,!0===m.matrixAutoUpdate&&m.updateMatrix(),l.material.uniforms.uvTransform.value.copy(m.matrix),d===m&&f===m.version&&h===t.toneMapping||(l.material.needsUpdate=!0,d=m,f=m.version,h=t.toneMapping),l.layers.enableAll(),r.unshift(l,l.geometry,l.material,0,0,null))}}}function hw(t,e,n,r){const i=t.getParameter(34921),o=r.isWebGL2?null:e.get("OES_vertex_array_object"),a=r.isWebGL2||null!==o,s={},l=h(null);let u=l,c=!1;function d(e){return r.isWebGL2?t.bindVertexArray(e):o.bindVertexArrayOES(e)}function f(e){return r.isWebGL2?t.deleteVertexArray(e):o.deleteVertexArrayOES(e)}function h(t){const e=[],n=[],r=[];for(let t=0;t<i;t++)e[t]=0,n[t]=0,r[t]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:e,enabledAttributes:n,attributeDivisors:r,object:t,attributes:{},index:null}}function p(){const t=u.newAttributes;for(let e=0,n=t.length;e<n;e++)t[e]=0}function m(t){g(t,0)}function g(n,i){const o=u.newAttributes,a=u.enabledAttributes,s=u.attributeDivisors;if(o[n]=1,0===a[n]&&(t.enableVertexAttribArray(n),a[n]=1),s[n]!==i){(r.isWebGL2?t:e.get("ANGLE_instanced_arrays"))[r.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](n,i),s[n]=i}}function v(){const e=u.newAttributes,n=u.enabledAttributes;for(let r=0,i=n.length;r<i;r++)n[r]!==e[r]&&(t.disableVertexAttribArray(r),n[r]=0)}function y(e,n,i,o,a,s){!0!==r.isWebGL2||5124!==i&&5125!==i?t.vertexAttribPointer(e,n,i,o,a,s):t.vertexAttribIPointer(e,n,i,a,s)}function b(){_(),c=!0,u!==l&&(u=l,d(u.object))}function _(){l.geometry=null,l.program=null,l.wireframe=!1}return{setup:function(i,l,f,b,_){let w=!1;if(a){const e=function(e,n,i){const a=!0===i.wireframe;let l=s[e.id];void 0===l&&(l={},s[e.id]=l);let u=l[n.id];void 0===u&&(u={},l[n.id]=u);let c=u[a];void 0===c&&(c=h(r.isWebGL2?t.createVertexArray():o.createVertexArrayOES()),u[a]=c);return c}(b,f,l);u!==e&&(u=e,d(u.object)),w=function(t,e,n,r){const i=u.attributes,o=e.attributes;let a=0;const s=n.getAttributes();for(const e in s){if(s[e].location>=0){const n=i[e];let r=o[e];if(void 0===r&&("instanceMatrix"===e&&t.instanceMatrix&&(r=t.instanceMatrix),"instanceColor"===e&&t.instanceColor&&(r=t.instanceColor)),void 0===n)return!0;if(n.attribute!==r)return!0;if(r&&n.data!==r.data)return!0;a++}}return u.attributesNum!==a||u.index!==r}(i,b,f,_),w&&function(t,e,n,r){const i={},o=e.attributes;let a=0;const s=n.getAttributes();for(const e in s){if(s[e].location>=0){let n=o[e];void 0===n&&("instanceMatrix"===e&&t.instanceMatrix&&(n=t.instanceMatrix),"instanceColor"===e&&t.instanceColor&&(n=t.instanceColor));const r={};r.attribute=n,n&&n.data&&(r.data=n.data),i[e]=r,a++}}u.attributes=i,u.attributesNum=a,u.index=r}(i,b,f,_)}else{const t=!0===l.wireframe;u.geometry===b.id&&u.program===f.id&&u.wireframe===t||(u.geometry=b.id,u.program=f.id,u.wireframe=t,w=!0)}null!==_&&n.update(_,34963),(w||c)&&(c=!1,function(i,o,a,s){if(!1===r.isWebGL2&&(i.isInstancedMesh||s.isInstancedBufferGeometry)&&null===e.get("ANGLE_instanced_arrays"))return;p();const l=s.attributes,u=a.getAttributes(),c=o.defaultAttributeValues;for(const e in u){const r=u[e];if(r.location>=0){let o=l[e];if(void 0===o&&("instanceMatrix"===e&&i.instanceMatrix&&(o=i.instanceMatrix),"instanceColor"===e&&i.instanceColor&&(o=i.instanceColor)),void 0!==o){const e=o.normalized,a=o.itemSize,l=n.get(o);if(void 0===l)continue;const u=l.buffer,c=l.type,d=l.bytesPerElement;if(o.isInterleavedBufferAttribute){const n=o.data,l=n.stride,f=o.offset;if(n.isInstancedInterleavedBuffer){for(let t=0;t<r.locationSize;t++)g(r.location+t,n.meshPerAttribute);!0!==i.isInstancedMesh&&void 0===s._maxInstanceCount&&(s._maxInstanceCount=n.meshPerAttribute*n.count)}else for(let t=0;t<r.locationSize;t++)m(r.location+t);t.bindBuffer(34962,u);for(let t=0;t<r.locationSize;t++)y(r.location+t,a/r.locationSize,c,e,l*d,(f+a/r.locationSize*t)*d)}else{if(o.isInstancedBufferAttribute){for(let t=0;t<r.locationSize;t++)g(r.location+t,o.meshPerAttribute);!0!==i.isInstancedMesh&&void 0===s._maxInstanceCount&&(s._maxInstanceCount=o.meshPerAttribute*o.count)}else for(let t=0;t<r.locationSize;t++)m(r.location+t);t.bindBuffer(34962,u);for(let t=0;t<r.locationSize;t++)y(r.location+t,a/r.locationSize,c,e,a*d,a/r.locationSize*t*d)}}else if(void 0!==c){const n=c[e];if(void 0!==n)switch(n.length){case 2:t.vertexAttrib2fv(r.location,n);break;case 3:t.vertexAttrib3fv(r.location,n);break;case 4:t.vertexAttrib4fv(r.location,n);break;default:t.vertexAttrib1fv(r.location,n)}}}}v()}(i,l,f,b),null!==_&&t.bindBuffer(34963,n.get(_).buffer))},reset:b,resetDefaultState:_,dispose:function(){b();for(const t in s){const e=s[t];for(const t in e){const n=e[t];for(const t in n)f(n[t].object),delete n[t];delete e[t]}delete s[t]}},releaseStatesOfGeometry:function(t){if(void 0===s[t.id])return;const e=s[t.id];for(const t in e){const n=e[t];for(const t in n)f(n[t].object),delete n[t];delete e[t]}delete s[t.id]},releaseStatesOfProgram:function(t){for(const e in s){const n=s[e];if(void 0===n[t.id])continue;const r=n[t.id];for(const t in r)f(r[t].object),delete r[t];delete n[t.id]}},initAttributes:p,enableAttribute:m,disableUnusedAttributes:v}}function pw(t,e,n,r){const i=r.isWebGL2;let o;this.setMode=function(t){o=t},this.render=function(e,r){t.drawArrays(o,e,r),n.update(r,o,1)},this.renderInstances=function(r,a,s){if(0===s)return;let l,u;if(i)l=t,u="drawArraysInstanced";else if(l=e.get("ANGLE_instanced_arrays"),u="drawArraysInstancedANGLE",null===l)return void console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");l[u](o,r,a,s),n.update(a,o,s)}}function mw(t,e,n){let r;function i(e){if("highp"===e){if(t.getShaderPrecisionFormat(35633,36338).precision>0&&t.getShaderPrecisionFormat(35632,36338).precision>0)return"highp";e="mediump"}return"mediump"===e&&t.getShaderPrecisionFormat(35633,36337).precision>0&&t.getShaderPrecisionFormat(35632,36337).precision>0?"mediump":"lowp"}const o="undefined"!=typeof WebGL2RenderingContext&&t instanceof WebGL2RenderingContext;let a=void 0!==n.precision?n.precision:"highp";const s=i(a);s!==a&&(console.warn("THREE.WebGLRenderer:",a,"not supported, using",s,"instead."),a=s);const l=o||e.has("WEBGL_draw_buffers"),u=!0===n.logarithmicDepthBuffer,c=t.getParameter(34930),d=t.getParameter(35660),f=t.getParameter(3379),h=t.getParameter(34076),p=t.getParameter(34921),m=t.getParameter(36347),g=t.getParameter(36348),v=t.getParameter(36349),y=d>0,b=o||e.has("OES_texture_float");return{isWebGL2:o,drawBuffers:l,getMaxAnisotropy:function(){if(void 0!==r)return r;if(!0===e.has("EXT_texture_filter_anisotropic")){const n=e.get("EXT_texture_filter_anisotropic");r=t.getParameter(n.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else r=0;return r},getMaxPrecision:i,precision:a,logarithmicDepthBuffer:u,maxTextures:c,maxVertexTextures:d,maxTextureSize:f,maxCubemapSize:h,maxAttributes:p,maxVertexUniforms:m,maxVaryings:g,maxFragmentUniforms:v,vertexTextures:y,floatFragmentTextures:b,floatVertexTextures:y&&b,maxSamples:o?t.getParameter(36183):0}}function gw(t){const e=this;let n=null,r=0,i=!1,o=!1;const a=new ew,s=new Ey,l={value:null,needsUpdate:!1};function u(t,n,r,i){const o=null!==t?t.length:0;let u=null;if(0!==o){if(u=l.value,!0!==i||null===u){const e=r+4*o,i=n.matrixWorldInverse;s.getNormalMatrix(i),(null===u||u.length<e)&&(u=new Float32Array(e));for(let e=0,n=r;e!==o;++e,n+=4)a.copy(t[e]).applyMatrix4(i,s),a.normal.toArray(u,n),u[n+3]=a.constant}l.value=u,l.needsUpdate=!0}return e.numPlanes=o,e.numIntersection=0,u}this.uniform=l,this.numPlanes=0,this.numIntersection=0,this.init=function(t,e){const n=0!==t.length||e||0!==r||i;return i=e,r=t.length,n},this.beginShadows=function(){o=!0,u(null)},this.endShadows=function(){o=!1},this.setGlobalState=function(t,e){n=u(t,e,0)},this.setState=function(a,s,c){const d=a.clippingPlanes,f=a.clipIntersection,h=a.clipShadows,p=t.get(a);if(!i||null===d||0===d.length||o&&!h)o?u(null):function(){l.value!==n&&(l.value=n,l.needsUpdate=r>0);e.numPlanes=r,e.numIntersection=0}();else{const t=o?0:r,e=4*t;let i=p.clippingState||null;l.value=i,i=u(d,s,e,c);for(let t=0;t!==e;++t)i[t]=n[t];p.clippingState=i,this.numIntersection=f?this.numPlanes:0,this.numPlanes+=t}}}function vw(t){let e=new WeakMap;function n(t,e){return e===Og?t.mapping=Pg:e===Mg&&(t.mapping=Rg),t}function r(t){const n=t.target;n.removeEventListener("dispose",r);const i=e.get(n);void 0!==i&&(e.delete(n),i.dispose())}return{get:function(i){if(i&&i.isTexture&&!1===i.isRenderTargetTexture){const o=i.mapping;if(o===Og||o===Mg){if(e.has(i)){return n(e.get(i).texture,i.mapping)}{const o=i.image;if(o&&o.height>0){const a=new $_(o.height/2);return a.fromEquirectangularTexture(t,i),e.set(i,a),i.addEventListener("dispose",r),n(a.texture,i.mapping)}return null}}}return i},dispose:function(){e=new WeakMap}}}class yw extends Q_{constructor(t=-1,e=1,n=1,r=-1,i=.1,o=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=t,this.right=e,this.top=n,this.bottom=r,this.near=i,this.far=o,this.updateProjectionMatrix()}copy(t,e){return super.copy(t,e),this.left=t.left,this.right=t.right,this.top=t.top,this.bottom=t.bottom,this.near=t.near,this.far=t.far,this.zoom=t.zoom,this.view=null===t.view?null:Object.assign({},t.view),this}setViewOffset(t,e,n,r,i,o){null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=t,this.view.fullHeight=e,this.view.offsetX=n,this.view.offsetY=r,this.view.width=i,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const t=(this.right-this.left)/(2*this.zoom),e=(this.top-this.bottom)/(2*this.zoom),n=(this.right+this.left)/2,r=(this.top+this.bottom)/2;let i=n-t,o=n+t,a=r+e,s=r-e;if(null!==this.view&&this.view.enabled){const t=(this.right-this.left)/this.view.fullWidth/this.zoom,e=(this.top-this.bottom)/this.view.fullHeight/this.zoom;i+=t*this.view.offsetX,o=i+t*this.view.width,a-=e*this.view.offsetY,s=a-e*this.view.height}this.projectionMatrix.makeOrthographic(i,o,a,s,this.near,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(t){const e=super.toJSON(t);return e.object.zoom=this.zoom,e.object.left=this.left,e.object.right=this.right,e.object.top=this.top,e.object.bottom=this.bottom,e.object.near=this.near,e.object.far=this.far,null!==this.view&&(e.object.view=Object.assign({},this.view)),e}}const bw=[.125,.215,.35,.446,.526,.582],_w=20,ww=new yw,Aw=new By;let Ew=null;const xw=(1+Math.sqrt(5))/2,Sw=1/xw,Tw=[new Ky(1,1,1),new Ky(-1,1,1),new Ky(1,1,-1),new Ky(-1,1,-1),new Ky(0,xw,Sw),new Ky(0,xw,-Sw),new Ky(Sw,0,xw),new Ky(-Sw,0,xw),new Ky(xw,Sw,0),new Ky(-xw,Sw,0)];class Cw{constructor(t){this._renderer=t,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(t,e=0,n=.1,r=100){Ew=this._renderer.getRenderTarget(),this._setSize(256);const i=this._allocateTargets();return i.depthBuffer=!0,this._sceneToCubeUV(t,n,r,i),e>0&&this._blur(i,0,0,e),this._applyPMREM(i),this._cleanup(i),i}fromEquirectangular(t,e=null){return this._fromTexture(t,e)}fromCubemap(t,e=null){return this._fromTexture(t,e)}compileCubemapShader(){null===this._cubemapMaterial&&(this._cubemapMaterial=Rw(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){null===this._equirectMaterial&&(this._equirectMaterial=Pw(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),null!==this._cubemapMaterial&&this._cubemapMaterial.dispose(),null!==this._equirectMaterial&&this._equirectMaterial.dispose()}_setSize(t){this._lodMax=Math.floor(Math.log2(t)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){null!==this._blurMaterial&&this._blurMaterial.dispose(),null!==this._pingPongRenderTarget&&this._pingPongRenderTarget.dispose();for(let t=0;t<this._lodPlanes.length;t++)this._lodPlanes[t].dispose()}_cleanup(t){this._renderer.setRenderTarget(Ew),t.scissorTest=!1,kw(t,0,0,t.width,t.height)}_fromTexture(t,e){t.mapping===Pg||t.mapping===Rg?this._setSize(0===t.image.length?16:t.image[0].width||t.image[0].image.width):this._setSize(t.image.width/4),Ew=this._renderer.getRenderTarget();const n=e||this._allocateTargets();return this._textureToCubeUV(t,n),this._applyPMREM(n),this._cleanup(n),n}_allocateTargets(){const t=3*Math.max(this._cubeSize,112),e=4*this._cubeSize,n={magFilter:Ug,minFilter:Ug,generateMipmaps:!1,type:$g,format:nv,encoding:Kv,depthBuffer:!1},r=Iw(t,e,n);if(null===this._pingPongRenderTarget||this._pingPongRenderTarget.width!==t||this._pingPongRenderTarget.height!==e){null!==this._pingPongRenderTarget&&this._dispose(),this._pingPongRenderTarget=Iw(t,e,n);const{_lodMax:r}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=function(t){const e=[],n=[],r=[];let i=t;const o=t-4+1+bw.length;for(let a=0;a<o;a++){const o=Math.pow(2,i);n.push(o);let s=1/o;a>t-4?s=bw[a-t+4-1]:0===a&&(s=0),r.push(s);const l=1/(o-2),u=-l,c=1+l,d=[u,u,c,u,c,c,u,u,c,c,u,c],f=6,h=6,p=3,m=2,g=1,v=new Float32Array(p*h*f),y=new Float32Array(m*h*f),b=new Float32Array(g*h*f);for(let t=0;t<f;t++){const e=t%3*2/3-1,n=t>2?0:-1,r=[e,n,0,e+2/3,n,0,e+2/3,n+1,0,e,n,0,e+2/3,n+1,0,e,n+1,0];v.set(r,p*h*t),y.set(d,m*h*t);const i=[t,t,t,t,t,t];b.set(i,g*h*t)}const _=new x_;_.setAttribute("position",new h_(v,p)),_.setAttribute("uv",new h_(y,m)),_.setAttribute("faceIndex",new h_(b,g)),e.push(_),i>4&&i--}return{lodPlanes:e,sizeLods:n,sigmas:r}}(r)),this._blurMaterial=function(t,e,n){const r=new Float32Array(_w),i=new Ky(0,1,0),o=new V_({name:"SphericalGaussianBlur",defines:{n:_w,CUBEUV_TEXEL_WIDTH:1/e,CUBEUV_TEXEL_HEIGHT:1/n,CUBEUV_MAX_MIP:`${t}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:r},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:i}},vertexShader:Ow(),fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\t\t\tuniform int samples;\n\t\t\tuniform float weights[ n ];\n\t\t\tuniform bool latitudinal;\n\t\t\tuniform float dTheta;\n\t\t\tuniform float mipInt;\n\t\t\tuniform vec3 poleAxis;\n\n\t\t\t#define ENVMAP_TYPE_CUBE_UV\n\t\t\t#include <cube_uv_reflection_fragment>\n\n\t\t\tvec3 getSample( float theta, vec3 axis ) {\n\n\t\t\t\tfloat cosTheta = cos( theta );\n\t\t\t\t// Rodrigues' axis-angle rotation\n\t\t\t\tvec3 sampleDirection = vOutputDirection * cosTheta\n\t\t\t\t\t+ cross( axis, vOutputDirection ) * sin( theta )\n\t\t\t\t\t+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );\n\n\t\t\t\treturn bilinearCubeUV( envMap, sampleDirection, mipInt );\n\n\t\t\t}\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );\n\n\t\t\t\tif ( all( equal( axis, vec3( 0.0 ) ) ) ) {\n\n\t\t\t\t\taxis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );\n\n\t\t\t\t}\n\n\t\t\t\taxis = normalize( axis );\n\n\t\t\t\tgl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\t\t\t\tgl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );\n\n\t\t\t\tfor ( int i = 1; i < n; i++ ) {\n\n\t\t\t\t\tif ( i >= samples ) {\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tfloat theta = dTheta * float( i );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( theta, axis );\n\n\t\t\t\t}\n\n\t\t\t}\n\t\t",blending:Vm,depthTest:!1,depthWrite:!1});return o}(r,t,e)}return r}_compileMaterial(t){const e=new j_(this._lodPlanes[0],t);this._renderer.compile(e,ww)}_sceneToCubeUV(t,e,n,r){const i=new W_(90,1,e,n),o=[1,-1,1,1,1,1],a=[1,1,1,-1,-1,-1],s=this._renderer,l=s.autoClear,u=s.toneMapping;s.getClearColor(Aw),s.toneMapping=xg,s.autoClear=!1;const c=new c_({name:"PMREM.Background",side:Gm,depthWrite:!1,depthTest:!1}),d=new j_(new F_,c);let f=!1;const h=t.background;h?h.isColor&&(c.color.copy(h),t.background=null,f=!0):(c.color.copy(Aw),f=!0);for(let e=0;e<6;e++){const n=e%3;0===n?(i.up.set(0,o[e],0),i.lookAt(a[e],0,0)):1===n?(i.up.set(0,0,o[e]),i.lookAt(0,a[e],0)):(i.up.set(0,o[e],0),i.lookAt(0,0,a[e]));const l=this._cubeSize;kw(r,n*l,e>2?l:0,l,l),s.setRenderTarget(r),f&&s.render(d,i),s.render(t,i)}d.geometry.dispose(),d.material.dispose(),s.toneMapping=u,s.autoClear=l,t.background=h}_textureToCubeUV(t,e){const n=this._renderer,r=t.mapping===Pg||t.mapping===Rg;r?(null===this._cubemapMaterial&&(this._cubemapMaterial=Rw()),this._cubemapMaterial.uniforms.flipEnvMap.value=!1===t.isRenderTargetTexture?-1:1):null===this._equirectMaterial&&(this._equirectMaterial=Pw());const i=r?this._cubemapMaterial:this._equirectMaterial,o=new j_(this._lodPlanes[0],i);i.uniforms.envMap.value=t;const a=this._cubeSize;kw(e,0,0,3*a,2*a),n.setRenderTarget(e),n.render(o,ww)}_applyPMREM(t){const e=this._renderer,n=e.autoClear;e.autoClear=!1;for(let e=1;e<this._lodPlanes.length;e++){const n=Math.sqrt(this._sigmas[e]*this._sigmas[e]-this._sigmas[e-1]*this._sigmas[e-1]),r=Tw[(e-1)%Tw.length];this._blur(t,e-1,e,n,r)}e.autoClear=n}_blur(t,e,n,r,i){const o=this._pingPongRenderTarget;this._halfBlur(t,o,e,n,r,"latitudinal",i),this._halfBlur(o,t,n,n,r,"longitudinal",i)}_halfBlur(t,e,n,r,i,o,a){const s=this._renderer,l=this._blurMaterial;"latitudinal"!==o&&"longitudinal"!==o&&console.error("blur direction must be either latitudinal or longitudinal!");const u=new j_(this._lodPlanes[r],l),c=l.uniforms,d=this._sizeLods[n]-1,f=isFinite(i)?Math.PI/(2*d):2*Math.PI/39,h=i/f,p=isFinite(i)?1+Math.floor(3*h):_w;p>_w&&console.warn(`sigmaRadians, ${i}, is too large and will clip, as it requested ${p} samples when the maximum is set to 20`);const m=[];let g=0;for(let t=0;t<_w;++t){const e=t/h,n=Math.exp(-e*e/2);m.push(n),0===t?g+=n:t<p&&(g+=2*n)}for(let t=0;t<m.length;t++)m[t]=m[t]/g;c.envMap.value=t.texture,c.samples.value=p,c.weights.value=m,c.latitudinal.value="latitudinal"===o,a&&(c.poleAxis.value=a);const{_lodMax:v}=this;c.dTheta.value=f,c.mipInt.value=v-n;const y=this._sizeLods[r];kw(e,3*y*(r>v-4?r-v+4:0),4*(this._cubeSize-y),3*y,2*y),s.setRenderTarget(e),s.render(u,ww)}}function Iw(t,e,n){const r=new Vy(t,e,n);return r.texture.mapping=Lg,r.texture.name="PMREM.cubeUv",r.scissorTest=!0,r}function kw(t,e,n,r,i){t.viewport.set(e,n,r,i),t.scissor.set(e,n,r,i)}function Pw(){return new V_({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:Ow(),fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\n\t\t\t#include <common>\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 outputDirection = normalize( vOutputDirection );\n\t\t\t\tvec2 uv = equirectUv( outputDirection );\n\n\t\t\t\tgl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );\n\n\t\t\t}\n\t\t",blending:Vm,depthTest:!1,depthWrite:!1})}function Rw(){return new V_({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:Ow(),fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tuniform float flipEnvMap;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform samplerCube envMap;\n\n\t\t\tvoid main() {\n\n\t\t\t\tgl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );\n\n\t\t\t}\n\t\t",blending:Vm,depthTest:!1,depthWrite:!1})}function Ow(){return"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t"}function Mw(t){let e=new WeakMap,n=null;function r(t){const n=t.target;n.removeEventListener("dispose",r);const i=e.get(n);void 0!==i&&(e.delete(n),i.dispose())}return{get:function(i){if(i&&i.isTexture){const o=i.mapping,a=o===Og||o===Mg,s=o===Pg||o===Rg;if(a||s){if(i.isRenderTargetTexture&&!0===i.needsPMREMUpdate){i.needsPMREMUpdate=!1;let r=e.get(i);return null===n&&(n=new Cw(t)),r=a?n.fromEquirectangular(i,r):n.fromCubemap(i,r),e.set(i,r),r.texture}if(e.has(i))return e.get(i).texture;{const o=i.image;if(a&&o&&o.height>0||s&&o&&function(t){let e=0;const n=6;for(let r=0;r<n;r++)void 0!==t[r]&&e++;return e===n}(o)){null===n&&(n=new Cw(t));const o=a?n.fromEquirectangular(i):n.fromCubemap(i);return e.set(i,o),i.addEventListener("dispose",r),o.texture}return null}}}return i},dispose:function(){e=new WeakMap,null!==n&&(n.dispose(),n=null)}}}function Lw(t){const e={};function n(n){if(void 0!==e[n])return e[n];let r;switch(n){case"WEBGL_depth_texture":r=t.getExtension("WEBGL_depth_texture")||t.getExtension("MOZ_WEBGL_depth_texture")||t.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":r=t.getExtension("EXT_texture_filter_anisotropic")||t.getExtension("MOZ_EXT_texture_filter_anisotropic")||t.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":r=t.getExtension("WEBGL_compressed_texture_s3tc")||t.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||t.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":r=t.getExtension("WEBGL_compressed_texture_pvrtc")||t.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:r=t.getExtension(n)}return e[n]=r,r}return{has:function(t){return null!==n(t)},init:function(t){t.isWebGL2?n("EXT_color_buffer_float"):(n("WEBGL_depth_texture"),n("OES_texture_float"),n("OES_texture_half_float"),n("OES_texture_half_float_linear"),n("OES_standard_derivatives"),n("OES_element_index_uint"),n("OES_vertex_array_object"),n("ANGLE_instanced_arrays")),n("OES_texture_float_linear"),n("EXT_color_buffer_half_float"),n("WEBGL_multisampled_render_to_texture")},get:function(t){const e=n(t);return null===e&&console.warn("THREE.WebGLRenderer: "+t+" extension not supported."),e}}}function Dw(t,e,n,r){const i={},o=new WeakMap;function a(t){const s=t.target;null!==s.index&&e.remove(s.index);for(const t in s.attributes)e.remove(s.attributes[t]);s.removeEventListener("dispose",a),delete i[s.id];const l=o.get(s);l&&(e.remove(l),o.delete(s)),r.releaseStatesOfGeometry(s),!0===s.isInstancedBufferGeometry&&delete s._maxInstanceCount,n.memory.geometries--}function s(t){const n=[],r=t.index,i=t.attributes.position;let a=0;if(null!==r){const t=r.array;a=r.version;for(let e=0,r=t.length;e<r;e+=3){const r=t[e+0],i=t[e+1],o=t[e+2];n.push(r,i,i,o,o,r)}}else{const t=i.array;a=i.version;for(let e=0,r=t.length/3-1;e<r;e+=3){const t=e+0,r=e+1,i=e+2;n.push(t,r,r,i,i,t)}}const s=new(Sy(n)?m_:p_)(n,1);s.version=a;const l=o.get(t);l&&e.remove(l),o.set(t,s)}return{get:function(t,e){return!0===i[e.id]||(e.addEventListener("dispose",a),i[e.id]=!0,n.memory.geometries++),e},update:function(t){const n=t.attributes;for(const t in n)e.update(n[t],34962);const r=t.morphAttributes;for(const t in r){const n=r[t];for(let t=0,r=n.length;t<r;t++)e.update(n[t],34962)}},getWireframeAttribute:function(t){const e=o.get(t);if(e){const n=t.index;null!==n&&e.version<n.version&&s(t)}else s(t);return o.get(t)}}}function Nw(t,e,n,r){const i=r.isWebGL2;let o,a,s;this.setMode=function(t){o=t},this.setIndex=function(t){a=t.type,s=t.bytesPerElement},this.render=function(e,r){t.drawElements(o,r,a,e*s),n.update(r,o,1)},this.renderInstances=function(r,l,u){if(0===u)return;let c,d;if(i)c=t,d="drawElementsInstanced";else if(c=e.get("ANGLE_instanced_arrays"),d="drawElementsInstancedANGLE",null===c)return void console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");c[d](o,l,a,r*s,u),n.update(l,o,u)}}function Bw(t){const e={frame:0,calls:0,triangles:0,points:0,lines:0};return{memory:{geometries:0,textures:0},render:e,programs:null,autoReset:!0,reset:function(){e.frame++,e.calls=0,e.triangles=0,e.points=0,e.lines=0},update:function(t,n,r){switch(e.calls++,n){case 4:e.triangles+=r*(t/3);break;case 1:e.lines+=r*(t/2);break;case 3:e.lines+=r*(t-1);break;case 2:e.lines+=r*t;break;case 0:e.points+=r*t;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",n)}}}}function jw(t,e){return t[0]-e[0]}function zw(t,e){return Math.abs(e[1])-Math.abs(t[1])}function Fw(t,e,n){const r={},i=new Float32Array(8),o=new WeakMap,a=new Hy,s=[];for(let t=0;t<8;t++)s[t]=[t,0];return{update:function(l,u,c,d){const f=l.morphTargetInfluences;if(!0===e.isWebGL2){const h=u.morphAttributes.position||u.morphAttributes.normal||u.morphAttributes.color,p=void 0!==h?h.length:0;let m=o.get(u);if(void 0===m||m.count!==p){void 0!==m&&m.texture.dispose();const y=void 0!==u.morphAttributes.position,b=void 0!==u.morphAttributes.normal,_=void 0!==u.morphAttributes.color,w=u.morphAttributes.position||[],A=u.morphAttributes.normal||[],E=u.morphAttributes.color||[];let x=0;!0===y&&(x=1),!0===b&&(x=2),!0===_&&(x=3);let S=u.attributes.position.count*x,T=1;S>e.maxTextureSize&&(T=Math.ceil(S/e.maxTextureSize),S=e.maxTextureSize);const C=new Float32Array(S*T*4*p),I=new Qy(C,S,T,p);I.type=Xg,I.needsUpdate=!0;const k=4*x;for(let R=0;R<p;R++){const O=w[R],M=A[R],L=E[R],D=S*T*4*R;for(let N=0;N<O.count;N++){const B=N*k;!0===y&&(a.fromBufferAttribute(O,N),C[D+B+0]=a.x,C[D+B+1]=a.y,C[D+B+2]=a.z,C[D+B+3]=0),!0===b&&(a.fromBufferAttribute(M,N),C[D+B+4]=a.x,C[D+B+5]=a.y,C[D+B+6]=a.z,C[D+B+7]=0),!0===_&&(a.fromBufferAttribute(L,N),C[D+B+8]=a.x,C[D+B+9]=a.y,C[D+B+10]=a.z,C[D+B+11]=4===L.itemSize?a.w:1)}}function P(){I.dispose(),o.delete(u),u.removeEventListener("dispose",P)}m={count:p,texture:I,size:new Ay(S,T)},o.set(u,m),u.addEventListener("dispose",P)}let g=0;for(let j=0;j<f.length;j++)g+=f[j];const v=u.morphTargetsRelative?1:1-g;d.getUniforms().setValue(t,"morphTargetBaseInfluence",v),d.getUniforms().setValue(t,"morphTargetInfluences",f),d.getUniforms().setValue(t,"morphTargetsTexture",m.texture,n),d.getUniforms().setValue(t,"morphTargetsTextureSize",m.size)}else{const z=void 0===f?0:f.length;let F=r[u.id];if(void 0===F||F.length!==z){F=[];for(let V=0;V<z;V++)F[V]=[V,0];r[u.id]=F}for(let Q=0;Q<z;Q++){const W=F[Q];W[0]=Q,W[1]=f[Q]}F.sort(zw);for(let Y=0;Y<8;Y++)Y<z&&F[Y][1]?(s[Y][0]=F[Y][0],s[Y][1]=F[Y][1]):(s[Y][0]=Number.MAX_SAFE_INTEGER,s[Y][1]=0);s.sort(jw);const U=u.morphAttributes.position,q=u.morphAttributes.normal;let G=0;for(let K=0;K<8;K++){const X=s[K],$=X[0],Z=X[1];$!==Number.MAX_SAFE_INTEGER&&Z?(U&&u.getAttribute("morphTarget"+K)!==U[$]&&u.setAttribute("morphTarget"+K,U[$]),q&&u.getAttribute("morphNormal"+K)!==q[$]&&u.setAttribute("morphNormal"+K,q[$]),i[K]=Z,G+=Z):(U&&!0===u.hasAttribute("morphTarget"+K)&&u.deleteAttribute("morphTarget"+K),q&&!0===u.hasAttribute("morphNormal"+K)&&u.deleteAttribute("morphNormal"+K),i[K]=0)}const H=u.morphTargetsRelative?1:1-G;d.getUniforms().setValue(t,"morphTargetBaseInfluence",H),d.getUniforms().setValue(t,"morphTargetInfluences",i)}}}}function Uw(t,e,n,r){let i=new WeakMap;function o(t){const e=t.target;e.removeEventListener("dispose",o),n.remove(e.instanceMatrix),null!==e.instanceColor&&n.remove(e.instanceColor)}return{update:function(t){const a=r.render.frame,s=t.geometry,l=e.get(t,s);return i.get(l)!==a&&(e.update(l),i.set(l,a)),t.isInstancedMesh&&(!1===t.hasEventListener("dispose",o)&&t.addEventListener("dispose",o),n.update(t.instanceMatrix,34962),null!==t.instanceColor&&n.update(t.instanceColor,34962)),l},dispose:function(){i=new WeakMap}}}const qw=new Gy,Gw=new Qy,Hw=new Wy,Vw=new X_,Qw=[],Ww=[],Yw=new Float32Array(16),Kw=new Float32Array(9),Xw=new Float32Array(4);function $w(t,e,n){const r=t[0];if(r<=0||r>0)return t;const i=e*n;let o=Qw[i];if(void 0===o&&(o=new Float32Array(i),Qw[i]=o),0!==e){r.toArray(o,0);for(let r=1,i=0;r!==e;++r)i+=n,t[r].toArray(o,i)}return o}function Zw(t,e){if(t.length!==e.length)return!1;for(let n=0,r=t.length;n<r;n++)if(t[n]!==e[n])return!1;return!0}function Jw(t,e){for(let n=0,r=e.length;n<r;n++)t[n]=e[n]}function tA(t,e){let n=Ww[e];void 0===n&&(n=new Int32Array(e),Ww[e]=n);for(let r=0;r!==e;++r)n[r]=t.allocateTextureUnit();return n}function eA(t,e){const n=this.cache;n[0]!==e&&(t.uniform1f(this.addr,e),n[0]=e)}function nA(t,e){const n=this.cache;if(void 0!==e.x)n[0]===e.x&&n[1]===e.y||(t.uniform2f(this.addr,e.x,e.y),n[0]=e.x,n[1]=e.y);else{if(Zw(n,e))return;t.uniform2fv(this.addr,e),Jw(n,e)}}function rA(t,e){const n=this.cache;if(void 0!==e.x)n[0]===e.x&&n[1]===e.y&&n[2]===e.z||(t.uniform3f(this.addr,e.x,e.y,e.z),n[0]=e.x,n[1]=e.y,n[2]=e.z);else if(void 0!==e.r)n[0]===e.r&&n[1]===e.g&&n[2]===e.b||(t.uniform3f(this.addr,e.r,e.g,e.b),n[0]=e.r,n[1]=e.g,n[2]=e.b);else{if(Zw(n,e))return;t.uniform3fv(this.addr,e),Jw(n,e)}}function iA(t,e){const n=this.cache;if(void 0!==e.x)n[0]===e.x&&n[1]===e.y&&n[2]===e.z&&n[3]===e.w||(t.uniform4f(this.addr,e.x,e.y,e.z,e.w),n[0]=e.x,n[1]=e.y,n[2]=e.z,n[3]=e.w);else{if(Zw(n,e))return;t.uniform4fv(this.addr,e),Jw(n,e)}}function oA(t,e){const n=this.cache,r=e.elements;if(void 0===r){if(Zw(n,e))return;t.uniformMatrix2fv(this.addr,!1,e),Jw(n,e)}else{if(Zw(n,r))return;Xw.set(r),t.uniformMatrix2fv(this.addr,!1,Xw),Jw(n,r)}}function aA(t,e){const n=this.cache,r=e.elements;if(void 0===r){if(Zw(n,e))return;t.uniformMatrix3fv(this.addr,!1,e),Jw(n,e)}else{if(Zw(n,r))return;Kw.set(r),t.uniformMatrix3fv(this.addr,!1,Kw),Jw(n,r)}}function sA(t,e){const n=this.cache,r=e.elements;if(void 0===r){if(Zw(n,e))return;t.uniformMatrix4fv(this.addr,!1,e),Jw(n,e)}else{if(Zw(n,r))return;Yw.set(r),t.uniformMatrix4fv(this.addr,!1,Yw),Jw(n,r)}}function lA(t,e){const n=this.cache;n[0]!==e&&(t.uniform1i(this.addr,e),n[0]=e)}function uA(t,e){const n=this.cache;if(void 0!==e.x)n[0]===e.x&&n[1]===e.y||(t.uniform2i(this.addr,e.x,e.y),n[0]=e.x,n[1]=e.y);else{if(Zw(n,e))return;t.uniform2iv(this.addr,e),Jw(n,e)}}function cA(t,e){const n=this.cache;if(void 0!==e.x)n[0]===e.x&&n[1]===e.y&&n[2]===e.z||(t.uniform3i(this.addr,e.x,e.y,e.z),n[0]=e.x,n[1]=e.y,n[2]=e.z);else{if(Zw(n,e))return;t.uniform3iv(this.addr,e),Jw(n,e)}}function dA(t,e){const n=this.cache;if(void 0!==e.x)n[0]===e.x&&n[1]===e.y&&n[2]===e.z&&n[3]===e.w||(t.uniform4i(this.addr,e.x,e.y,e.z,e.w),n[0]=e.x,n[1]=e.y,n[2]=e.z,n[3]=e.w);else{if(Zw(n,e))return;t.uniform4iv(this.addr,e),Jw(n,e)}}function fA(t,e){const n=this.cache;n[0]!==e&&(t.uniform1ui(this.addr,e),n[0]=e)}function hA(t,e){const n=this.cache;if(void 0!==e.x)n[0]===e.x&&n[1]===e.y||(t.uniform2ui(this.addr,e.x,e.y),n[0]=e.x,n[1]=e.y);else{if(Zw(n,e))return;t.uniform2uiv(this.addr,e),Jw(n,e)}}function pA(t,e){const n=this.cache;if(void 0!==e.x)n[0]===e.x&&n[1]===e.y&&n[2]===e.z||(t.uniform3ui(this.addr,e.x,e.y,e.z),n[0]=e.x,n[1]=e.y,n[2]=e.z);else{if(Zw(n,e))return;t.uniform3uiv(this.addr,e),Jw(n,e)}}function mA(t,e){const n=this.cache;if(void 0!==e.x)n[0]===e.x&&n[1]===e.y&&n[2]===e.z&&n[3]===e.w||(t.uniform4ui(this.addr,e.x,e.y,e.z,e.w),n[0]=e.x,n[1]=e.y,n[2]=e.z,n[3]=e.w);else{if(Zw(n,e))return;t.uniform4uiv(this.addr,e),Jw(n,e)}}function gA(t,e,n){const r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(t.uniform1i(this.addr,i),r[0]=i),n.setTexture2D(e||qw,i)}function vA(t,e,n){const r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(t.uniform1i(this.addr,i),r[0]=i),n.setTexture3D(e||Hw,i)}function yA(t,e,n){const r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(t.uniform1i(this.addr,i),r[0]=i),n.setTextureCube(e||Vw,i)}function bA(t,e,n){const r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(t.uniform1i(this.addr,i),r[0]=i),n.setTexture2DArray(e||Gw,i)}function _A(t,e){t.uniform1fv(this.addr,e)}function wA(t,e){const n=$w(e,this.size,2);t.uniform2fv(this.addr,n)}function AA(t,e){const n=$w(e,this.size,3);t.uniform3fv(this.addr,n)}function EA(t,e){const n=$w(e,this.size,4);t.uniform4fv(this.addr,n)}function xA(t,e){const n=$w(e,this.size,4);t.uniformMatrix2fv(this.addr,!1,n)}function SA(t,e){const n=$w(e,this.size,9);t.uniformMatrix3fv(this.addr,!1,n)}function TA(t,e){const n=$w(e,this.size,16);t.uniformMatrix4fv(this.addr,!1,n)}function CA(t,e){t.uniform1iv(this.addr,e)}function IA(t,e){t.uniform2iv(this.addr,e)}function kA(t,e){t.uniform3iv(this.addr,e)}function PA(t,e){t.uniform4iv(this.addr,e)}function RA(t,e){t.uniform1uiv(this.addr,e)}function OA(t,e){t.uniform2uiv(this.addr,e)}function MA(t,e){t.uniform3uiv(this.addr,e)}function LA(t,e){t.uniform4uiv(this.addr,e)}function DA(t,e,n){const r=this.cache,i=e.length,o=tA(n,i);Zw(r,o)||(t.uniform1iv(this.addr,o),Jw(r,o));for(let t=0;t!==i;++t)n.setTexture2D(e[t]||qw,o[t])}function NA(t,e,n){const r=this.cache,i=e.length,o=tA(n,i);Zw(r,o)||(t.uniform1iv(this.addr,o),Jw(r,o));for(let t=0;t!==i;++t)n.setTexture3D(e[t]||Hw,o[t])}function BA(t,e,n){const r=this.cache,i=e.length,o=tA(n,i);Zw(r,o)||(t.uniform1iv(this.addr,o),Jw(r,o));for(let t=0;t!==i;++t)n.setTextureCube(e[t]||Vw,o[t])}function jA(t,e,n){const r=this.cache,i=e.length,o=tA(n,i);Zw(r,o)||(t.uniform1iv(this.addr,o),Jw(r,o));for(let t=0;t!==i;++t)n.setTexture2DArray(e[t]||Gw,o[t])}class zA{constructor(t,e,n){this.id=t,this.addr=n,this.cache=[],this.setValue=function(t){switch(t){case 5126:return eA;case 35664:return nA;case 35665:return rA;case 35666:return iA;case 35674:return oA;case 35675:return aA;case 35676:return sA;case 5124:case 35670:return lA;case 35667:case 35671:return uA;case 35668:case 35672:return cA;case 35669:case 35673:return dA;case 5125:return fA;case 36294:return hA;case 36295:return pA;case 36296:return mA;case 35678:case 36198:case 36298:case 36306:case 35682:return gA;case 35679:case 36299:case 36307:return vA;case 35680:case 36300:case 36308:case 36293:return yA;case 36289:case 36303:case 36311:case 36292:return bA}}(e.type)}}class FA{constructor(t,e,n){this.id=t,this.addr=n,this.cache=[],this.size=e.size,this.setValue=function(t){switch(t){case 5126:return _A;case 35664:return wA;case 35665:return AA;case 35666:return EA;case 35674:return xA;case 35675:return SA;case 35676:return TA;case 5124:case 35670:return CA;case 35667:case 35671:return IA;case 35668:case 35672:return kA;case 35669:case 35673:return PA;case 5125:return RA;case 36294:return OA;case 36295:return MA;case 36296:return LA;case 35678:case 36198:case 36298:case 36306:case 35682:return DA;case 35679:case 36299:case 36307:return NA;case 35680:case 36300:case 36308:case 36293:return BA;case 36289:case 36303:case 36311:case 36292:return jA}}(e.type)}}class UA{constructor(t){this.id=t,this.seq=[],this.map={}}setValue(t,e,n){const r=this.seq;for(let i=0,o=r.length;i!==o;++i){const o=r[i];o.setValue(t,e[o.id],n)}}}const qA=/(\w+)(\])?(\[|\.)?/g;function GA(t,e){t.seq.push(e),t.map[e.id]=e}function HA(t,e,n){const r=t.name,i=r.length;for(qA.lastIndex=0;;){const o=qA.exec(r),a=qA.lastIndex;let s=o[1];const l="]"===o[2],u=o[3];if(l&&(s|=0),void 0===u||"["===u&&a+2===i){GA(n,void 0===u?new zA(s,t,e):new FA(s,t,e));break}{let t=n.map[s];void 0===t&&(t=new UA(s),GA(n,t)),n=t}}}class VA{constructor(t,e){this.seq=[],this.map={};const n=t.getProgramParameter(e,35718);for(let r=0;r<n;++r){const n=t.getActiveUniform(e,r);HA(n,t.getUniformLocation(e,n.name),this)}}setValue(t,e,n,r){const i=this.map[e];void 0!==i&&i.setValue(t,n,r)}setOptional(t,e,n){const r=e[n];void 0!==r&&this.setValue(t,n,r)}static upload(t,e,n,r){for(let i=0,o=e.length;i!==o;++i){const o=e[i],a=n[o.id];!1!==a.needsUpdate&&o.setValue(t,a.value,r)}}static seqWithValue(t,e){const n=[];for(let r=0,i=t.length;r!==i;++r){const i=t[r];i.id in e&&n.push(i)}return n}}function QA(t,e,n){const r=t.createShader(e);return t.shaderSource(r,n),t.compileShader(r),r}let WA=0;function YA(t,e,n){const r=t.getShaderParameter(e,35713),i=t.getShaderInfoLog(e).trim();if(r&&""===i)return"";const o=/ERROR: 0:(\d+)/.exec(i);if(o){const r=parseInt(o[1]);return n.toUpperCase()+"\n\n"+i+"\n\n"+function(t,e){const n=t.split("\n"),r=[],i=Math.max(e-6,0),o=Math.min(e+6,n.length);for(let t=i;t<o;t++){const i=t+1;r.push(`${i===e?">":" "} ${i}: ${n[t]}`)}return r.join("\n")}(t.getShaderSource(e),r)}return i}function KA(t,e){const n=function(t){switch(t){case Kv:return["Linear","( value )"];case Xv:return["sRGB","( value )"];default:return console.warn("THREE.WebGLProgram: Unsupported encoding:",t),["Linear","( value )"]}}(e);return"vec4 "+t+"( vec4 value ) { return LinearTo"+n[0]+n[1]+"; }"}function XA(t,e){let n;switch(e){case Sg:n="Linear";break;case Tg:n="Reinhard";break;case Cg:n="OptimizedCineon";break;case Ig:n="ACESFilmic";break;case kg:n="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",e),n="Linear"}return"vec3 "+t+"( vec3 color ) { return "+n+"ToneMapping( color ); }"}function $A(t){return""!==t}function ZA(t,e){const n=e.numSpotLightShadows+e.numSpotLightMaps-e.numSpotLightShadowsWithMaps;return t.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,e.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,n).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,e.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,e.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,e.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,e.numPointLightShadows)}function JA(t,e){return t.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}const tE=/^[ \t]*#include +<([\w\d./]+)>/gm;function eE(t){return t.replace(tE,nE)}function nE(t,e){const n=lw[e];if(void 0===n)throw new Error("Can not resolve #include <"+e+">");return eE(n)}const rE=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function iE(t){return t.replace(rE,oE)}function oE(t,e,n,r){let i="";for(let t=parseInt(e);t<parseInt(n);t++)i+=r.replace(/\[\s*i\s*\]/g,"[ "+t+" ]").replace(/UNROLLED_LOOP_INDEX/g,t);return i}function aE(t){let e="precision "+t.precision+" float;\nprecision "+t.precision+" int;";return"highp"===t.precision?e+="\n#define HIGH_PRECISION":"mediump"===t.precision?e+="\n#define MEDIUM_PRECISION":"lowp"===t.precision&&(e+="\n#define LOW_PRECISION"),e}function sE(t,e,n,r){const i=t.getContext(),o=n.defines;let a=n.vertexShader,s=n.fragmentShader;const l=function(t){let e="SHADOWMAP_TYPE_BASIC";return t.shadowMapType===zm?e="SHADOWMAP_TYPE_PCF":t.shadowMapType===Fm?e="SHADOWMAP_TYPE_PCF_SOFT":t.shadowMapType===Um&&(e="SHADOWMAP_TYPE_VSM"),e}(n),u=function(t){let e="ENVMAP_TYPE_CUBE";if(t.envMap)switch(t.envMapMode){case Pg:case Rg:e="ENVMAP_TYPE_CUBE";break;case Lg:e="ENVMAP_TYPE_CUBE_UV"}return e}(n),c=function(t){let e="ENVMAP_MODE_REFLECTION";t.envMap&&t.envMapMode===Rg&&(e="ENVMAP_MODE_REFRACTION");return e}(n),d=function(t){let e="ENVMAP_BLENDING_NONE";if(t.envMap)switch(t.combine){case wg:e="ENVMAP_BLENDING_MULTIPLY";break;case Ag:e="ENVMAP_BLENDING_MIX";break;case Eg:e="ENVMAP_BLENDING_ADD"}return e}(n),f=function(t){const e=t.envMapCubeUVHeight;if(null===e)return null;const n=Math.log2(e)-2,r=1/e;return{texelWidth:1/(3*Math.max(Math.pow(2,n),112)),texelHeight:r,maxMip:n}}(n),h=n.isWebGL2?"":function(t){return[t.extensionDerivatives||t.envMapCubeUVHeight||t.bumpMap||t.tangentSpaceNormalMap||t.clearcoatNormalMap||t.flatShading||"physical"===t.shaderID?"#extension GL_OES_standard_derivatives : enable":"",(t.extensionFragDepth||t.logarithmicDepthBuffer)&&t.rendererExtensionFragDepth?"#extension GL_EXT_frag_depth : enable":"",t.extensionDrawBuffers&&t.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",(t.extensionShaderTextureLOD||t.envMap||t.transmission)&&t.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":""].filter($A).join("\n")}(n),p=function(t){const e=[];for(const n in t){const r=t[n];!1!==r&&e.push("#define "+n+" "+r)}return e.join("\n")}(o),m=i.createProgram();let g,v,y=n.glslVersion?"#version "+n.glslVersion+"\n":"";n.isRawShaderMaterial?(g=[p].filter($A).join("\n"),g.length>0&&(g+="\n"),v=[h,p].filter($A).join("\n"),v.length>0&&(v+="\n")):(g=[aE(n),"#define SHADER_NAME "+n.shaderName,p,n.instancing?"#define USE_INSTANCING":"",n.instancingColor?"#define USE_INSTANCING_COLOR":"",n.supportsVertexTextures?"#define VERTEX_TEXTURES":"",n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.map?"#define USE_MAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+c:"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMap&&n.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",n.normalMap&&n.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",n.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",n.displacementMap&&n.supportsVertexTextures?"#define USE_DISPLACEMENTMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.specularIntensityMap?"#define USE_SPECULARINTENSITYMAP":"",n.specularColorMap?"#define USE_SPECULARCOLORMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.transmission?"#define USE_TRANSMISSION":"",n.transmissionMap?"#define USE_TRANSMISSIONMAP":"",n.thicknessMap?"#define USE_THICKNESSMAP":"",n.sheenColorMap?"#define USE_SHEENCOLORMAP":"",n.sheenRoughnessMap?"#define USE_SHEENROUGHNESSMAP":"",n.vertexTangents?"#define USE_TANGENT":"",n.vertexColors?"#define USE_COLOR":"",n.vertexAlphas?"#define USE_COLOR_ALPHA":"",n.vertexUvs?"#define USE_UV":"",n.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",n.flatShading?"#define FLAT_SHADED":"",n.skinning?"#define USE_SKINNING":"",n.morphTargets?"#define USE_MORPHTARGETS":"",n.morphNormals&&!1===n.flatShading?"#define USE_MORPHNORMALS":"",n.morphColors&&n.isWebGL2?"#define USE_MORPHCOLORS":"",n.morphTargetsCount>0&&n.isWebGL2?"#define MORPHTARGETS_TEXTURE":"",n.morphTargetsCount>0&&n.isWebGL2?"#define MORPHTARGETS_TEXTURE_STRIDE "+n.morphTextureStride:"",n.morphTargetsCount>0&&n.isWebGL2?"#define MORPHTARGETS_COUNT "+n.morphTargetsCount:"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+l:"",n.sizeAttenuation?"#define USE_SIZEATTENUATION":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",n.logarithmicDepthBuffer&&n.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","\tattribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","\tattribute vec3 instanceColor;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_TANGENT","\tattribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","\tattribute vec4 color;","#elif defined( USE_COLOR )","\tattribute vec3 color;","#endif","#if ( defined( USE_MORPHTARGETS ) && ! defined( MORPHTARGETS_TEXTURE ) )","\tattribute vec3 morphTarget0;","\tattribute vec3 morphTarget1;","\tattribute vec3 morphTarget2;","\tattribute vec3 morphTarget3;","\t#ifdef USE_MORPHNORMALS","\t\tattribute vec3 morphNormal0;","\t\tattribute vec3 morphNormal1;","\t\tattribute vec3 morphNormal2;","\t\tattribute vec3 morphNormal3;","\t#else","\t\tattribute vec3 morphTarget4;","\t\tattribute vec3 morphTarget5;","\t\tattribute vec3 morphTarget6;","\t\tattribute vec3 morphTarget7;","\t#endif","#endif","#ifdef USE_SKINNING","\tattribute vec4 skinIndex;","\tattribute vec4 skinWeight;","#endif","\n"].filter($A).join("\n"),v=[h,aE(n),"#define SHADER_NAME "+n.shaderName,p,n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.map?"#define USE_MAP":"",n.matcap?"#define USE_MATCAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+u:"",n.envMap?"#define "+c:"",n.envMap?"#define "+d:"",f?"#define CUBEUV_TEXEL_WIDTH "+f.texelWidth:"",f?"#define CUBEUV_TEXEL_HEIGHT "+f.texelHeight:"",f?"#define CUBEUV_MAX_MIP "+f.maxMip+".0":"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMap&&n.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",n.normalMap&&n.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",n.clearcoat?"#define USE_CLEARCOAT":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.iridescence?"#define USE_IRIDESCENCE":"",n.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",n.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.specularIntensityMap?"#define USE_SPECULARINTENSITYMAP":"",n.specularColorMap?"#define USE_SPECULARCOLORMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.alphaTest?"#define USE_ALPHATEST":"",n.sheen?"#define USE_SHEEN":"",n.sheenColorMap?"#define USE_SHEENCOLORMAP":"",n.sheenRoughnessMap?"#define USE_SHEENROUGHNESSMAP":"",n.transmission?"#define USE_TRANSMISSION":"",n.transmissionMap?"#define USE_TRANSMISSIONMAP":"",n.thicknessMap?"#define USE_THICKNESSMAP":"",n.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",n.vertexTangents?"#define USE_TANGENT":"",n.vertexColors||n.instancingColor?"#define USE_COLOR":"",n.vertexAlphas?"#define USE_COLOR_ALPHA":"",n.vertexUvs?"#define USE_UV":"",n.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",n.gradientMap?"#define USE_GRADIENTMAP":"",n.flatShading?"#define FLAT_SHADED":"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+l:"",n.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",n.physicallyCorrectLights?"#define PHYSICALLY_CORRECT_LIGHTS":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",n.logarithmicDepthBuffer&&n.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",n.toneMapping!==xg?"#define TONE_MAPPING":"",n.toneMapping!==xg?lw.tonemapping_pars_fragment:"",n.toneMapping!==xg?XA("toneMapping",n.toneMapping):"",n.dithering?"#define DITHERING":"",n.opaque?"#define OPAQUE":"",lw.encodings_pars_fragment,KA("linearToOutputTexel",n.outputEncoding),n.useDepthPacking?"#define DEPTH_PACKING "+n.depthPacking:"","\n"].filter($A).join("\n")),a=eE(a),a=ZA(a,n),a=JA(a,n),s=eE(s),s=ZA(s,n),s=JA(s,n),a=iE(a),s=iE(s),n.isWebGL2&&!0!==n.isRawShaderMaterial&&(y="#version 300 es\n",g=["precision mediump sampler2DArray;","#define attribute in","#define varying out","#define texture2D texture"].join("\n")+"\n"+g,v=["#define varying in",n.glslVersion===oy?"":"layout(location = 0) out highp vec4 pc_fragColor;",n.glslVersion===oy?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join("\n")+"\n"+v);const b=y+v+s,_=QA(i,35633,y+g+a),w=QA(i,35632,b);if(i.attachShader(m,_),i.attachShader(m,w),void 0!==n.index0AttributeName?i.bindAttribLocation(m,0,n.index0AttributeName):!0===n.morphTargets&&i.bindAttribLocation(m,0,"position"),i.linkProgram(m),t.debug.checkShaderErrors){const t=i.getProgramInfoLog(m).trim(),e=i.getShaderInfoLog(_).trim(),n=i.getShaderInfoLog(w).trim();let r=!0,o=!0;if(!1===i.getProgramParameter(m,35714)){r=!1;const e=YA(i,_,"vertex"),n=YA(i,w,"fragment");console.error("THREE.WebGLProgram: Shader Error "+i.getError()+" - VALIDATE_STATUS "+i.getProgramParameter(m,35715)+"\n\nProgram Info Log: "+t+"\n"+e+"\n"+n)}else""!==t?console.warn("THREE.WebGLProgram: Program Info Log:",t):""!==e&&""!==n||(o=!1);o&&(this.diagnostics={runnable:r,programLog:t,vertexShader:{log:e,prefix:g},fragmentShader:{log:n,prefix:v}})}let A,E;return i.deleteShader(_),i.deleteShader(w),this.getUniforms=function(){return void 0===A&&(A=new VA(i,m)),A},this.getAttributes=function(){return void 0===E&&(E=function(t,e){const n={},r=t.getProgramParameter(e,35721);for(let i=0;i<r;i++){const r=t.getActiveAttrib(e,i),o=r.name;let a=1;35674===r.type&&(a=2),35675===r.type&&(a=3),35676===r.type&&(a=4),n[o]={type:r.type,location:t.getAttribLocation(e,o),locationSize:a}}return n}(i,m)),E},this.destroy=function(){r.releaseStatesOfProgram(this),i.deleteProgram(m),this.program=void 0},this.name=n.shaderName,this.id=WA++,this.cacheKey=e,this.usedTimes=1,this.program=m,this.vertexShader=_,this.fragmentShader=w,this}let lE=0;class uE{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(t){const e=t.vertexShader,n=t.fragmentShader,r=this._getShaderStage(e),i=this._getShaderStage(n),o=this._getShaderCacheForMaterial(t);return!1===o.has(r)&&(o.add(r),r.usedTimes++),!1===o.has(i)&&(o.add(i),i.usedTimes++),this}remove(t){const e=this.materialCache.get(t);for(const t of e)t.usedTimes--,0===t.usedTimes&&this.shaderCache.delete(t.code);return this.materialCache.delete(t),this}getVertexShaderID(t){return this._getShaderStage(t.vertexShader).id}getFragmentShaderID(t){return this._getShaderStage(t.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(t){const e=this.materialCache;let n=e.get(t);return void 0===n&&(n=new Set,e.set(t,n)),n}_getShaderStage(t){const e=this.shaderCache;let n=e.get(t);return void 0===n&&(n=new cE(t),e.set(t,n)),n}}class cE{constructor(t){this.id=lE++,this.code=t,this.usedTimes=0}}function dE(t,e,n,r,i,o,a){const s=new Nb,l=new uE,u=[],c=i.isWebGL2,d=i.logarithmicDepthBuffer,f=i.vertexTextures;let h=i.precision;const p={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};return{getParameters:function(o,s,u,m,g){const v=m.fog,y=g.geometry,b=o.isMeshStandardMaterial?m.environment:null,_=(o.isMeshStandardMaterial?n:e).get(o.envMap||b),w=_&&_.mapping===Lg?_.image.height:null,A=p[o.type];null!==o.precision&&(h=i.getMaxPrecision(o.precision),h!==o.precision&&console.warn("THREE.WebGLProgram.getParameters:",o.precision,"not supported, using",h,"instead."));const E=y.morphAttributes.position||y.morphAttributes.normal||y.morphAttributes.color,x=void 0!==E?E.length:0;let S,T,C,I,k=0;if(void 0!==y.morphAttributes.position&&(k=1),void 0!==y.morphAttributes.normal&&(k=2),void 0!==y.morphAttributes.color&&(k=3),A){const t=cw[A];S=t.vertexShader,T=t.fragmentShader}else S=o.vertexShader,T=o.fragmentShader,l.update(o),C=l.getVertexShaderID(o),I=l.getFragmentShaderID(o);const P=t.getRenderTarget(),R=o.alphaTest>0,O=o.clearcoat>0,M=o.iridescence>0;return{isWebGL2:c,shaderID:A,shaderName:o.type,vertexShader:S,fragmentShader:T,defines:o.defines,customVertexShaderID:C,customFragmentShaderID:I,isRawShaderMaterial:!0===o.isRawShaderMaterial,glslVersion:o.glslVersion,precision:h,instancing:!0===g.isInstancedMesh,instancingColor:!0===g.isInstancedMesh&&null!==g.instanceColor,supportsVertexTextures:f,outputEncoding:null===P?t.outputEncoding:!0===P.isXRRenderTarget?P.texture.encoding:Kv,map:!!o.map,matcap:!!o.matcap,envMap:!!_,envMapMode:_&&_.mapping,envMapCubeUVHeight:w,lightMap:!!o.lightMap,aoMap:!!o.aoMap,emissiveMap:!!o.emissiveMap,bumpMap:!!o.bumpMap,normalMap:!!o.normalMap,objectSpaceNormalMap:o.normalMapType===Jv,tangentSpaceNormalMap:o.normalMapType===Zv,decodeVideoTexture:!!o.map&&!0===o.map.isVideoTexture&&o.map.encoding===Xv,clearcoat:O,clearcoatMap:O&&!!o.clearcoatMap,clearcoatRoughnessMap:O&&!!o.clearcoatRoughnessMap,clearcoatNormalMap:O&&!!o.clearcoatNormalMap,iridescence:M,iridescenceMap:M&&!!o.iridescenceMap,iridescenceThicknessMap:M&&!!o.iridescenceThicknessMap,displacementMap:!!o.displacementMap,roughnessMap:!!o.roughnessMap,metalnessMap:!!o.metalnessMap,specularMap:!!o.specularMap,specularIntensityMap:!!o.specularIntensityMap,specularColorMap:!!o.specularColorMap,opaque:!1===o.transparent&&o.blending===Qm,alphaMap:!!o.alphaMap,alphaTest:R,gradientMap:!!o.gradientMap,sheen:o.sheen>0,sheenColorMap:!!o.sheenColorMap,sheenRoughnessMap:!!o.sheenRoughnessMap,transmission:o.transmission>0,transmissionMap:!!o.transmissionMap,thicknessMap:!!o.thicknessMap,combine:o.combine,vertexTangents:!!o.normalMap&&!!y.attributes.tangent,vertexColors:o.vertexColors,vertexAlphas:!0===o.vertexColors&&!!y.attributes.color&&4===y.attributes.color.itemSize,vertexUvs:!!(o.map||o.bumpMap||o.normalMap||o.specularMap||o.alphaMap||o.emissiveMap||o.roughnessMap||o.metalnessMap||o.clearcoatMap||o.clearcoatRoughnessMap||o.clearcoatNormalMap||o.iridescenceMap||o.iridescenceThicknessMap||o.displacementMap||o.transmissionMap||o.thicknessMap||o.specularIntensityMap||o.specularColorMap||o.sheenColorMap||o.sheenRoughnessMap),uvsVertexOnly:!(o.map||o.bumpMap||o.normalMap||o.specularMap||o.alphaMap||o.emissiveMap||o.roughnessMap||o.metalnessMap||o.clearcoatNormalMap||o.iridescenceMap||o.iridescenceThicknessMap||o.transmission>0||o.transmissionMap||o.thicknessMap||o.specularIntensityMap||o.specularColorMap||o.sheen>0||o.sheenColorMap||o.sheenRoughnessMap||!o.displacementMap),fog:!!v,useFog:!0===o.fog,fogExp2:v&&v.isFogExp2,flatShading:!!o.flatShading,sizeAttenuation:o.sizeAttenuation,logarithmicDepthBuffer:d,skinning:!0===g.isSkinnedMesh,morphTargets:void 0!==y.morphAttributes.position,morphNormals:void 0!==y.morphAttributes.normal,morphColors:void 0!==y.morphAttributes.color,morphTargetsCount:x,morphTextureStride:k,numDirLights:s.directional.length,numPointLights:s.point.length,numSpotLights:s.spot.length,numSpotLightMaps:s.spotLightMap.length,numRectAreaLights:s.rectArea.length,numHemiLights:s.hemi.length,numDirLightShadows:s.directionalShadowMap.length,numPointLightShadows:s.pointShadowMap.length,numSpotLightShadows:s.spotShadowMap.length,numSpotLightShadowsWithMaps:s.numSpotLightShadowsWithMaps,numClippingPlanes:a.numPlanes,numClipIntersection:a.numIntersection,dithering:o.dithering,shadowMapEnabled:t.shadowMap.enabled&&u.length>0,shadowMapType:t.shadowMap.type,toneMapping:o.toneMapped?t.toneMapping:xg,physicallyCorrectLights:t.physicallyCorrectLights,premultipliedAlpha:o.premultipliedAlpha,doubleSided:o.side===Hm,flipSided:o.side===Gm,useDepthPacking:!!o.depthPacking,depthPacking:o.depthPacking||0,index0AttributeName:o.index0AttributeName,extensionDerivatives:o.extensions&&o.extensions.derivatives,extensionFragDepth:o.extensions&&o.extensions.fragDepth,extensionDrawBuffers:o.extensions&&o.extensions.drawBuffers,extensionShaderTextureLOD:o.extensions&&o.extensions.shaderTextureLOD,rendererExtensionFragDepth:c||r.has("EXT_frag_depth"),rendererExtensionDrawBuffers:c||r.has("WEBGL_draw_buffers"),rendererExtensionShaderTextureLod:c||r.has("EXT_shader_texture_lod"),customProgramCacheKey:o.customProgramCacheKey()}},getProgramCacheKey:function(e){const n=[];if(e.shaderID?n.push(e.shaderID):(n.push(e.customVertexShaderID),n.push(e.customFragmentShaderID)),void 0!==e.defines)for(const t in e.defines)n.push(t),n.push(e.defines[t]);return!1===e.isRawShaderMaterial&&(!function(t,e){t.push(e.precision),t.push(e.outputEncoding),t.push(e.envMapMode),t.push(e.envMapCubeUVHeight),t.push(e.combine),t.push(e.vertexUvs),t.push(e.fogExp2),t.push(e.sizeAttenuation),t.push(e.morphTargetsCount),t.push(e.morphAttributeCount),t.push(e.numDirLights),t.push(e.numPointLights),t.push(e.numSpotLights),t.push(e.numSpotLightMaps),t.push(e.numHemiLights),t.push(e.numRectAreaLights),t.push(e.numDirLightShadows),t.push(e.numPointLightShadows),t.push(e.numSpotLightShadows),t.push(e.numSpotLightShadowsWithMaps),t.push(e.shadowMapType),t.push(e.toneMapping),t.push(e.numClippingPlanes),t.push(e.numClipIntersection),t.push(e.depthPacking)}(n,e),function(t,e){s.disableAll(),e.isWebGL2&&s.enable(0);e.supportsVertexTextures&&s.enable(1);e.instancing&&s.enable(2);e.instancingColor&&s.enable(3);e.map&&s.enable(4);e.matcap&&s.enable(5);e.envMap&&s.enable(6);e.lightMap&&s.enable(7);e.aoMap&&s.enable(8);e.emissiveMap&&s.enable(9);e.bumpMap&&s.enable(10);e.normalMap&&s.enable(11);e.objectSpaceNormalMap&&s.enable(12);e.tangentSpaceNormalMap&&s.enable(13);e.clearcoat&&s.enable(14);e.clearcoatMap&&s.enable(15);e.clearcoatRoughnessMap&&s.enable(16);e.clearcoatNormalMap&&s.enable(17);e.iridescence&&s.enable(18);e.iridescenceMap&&s.enable(19);e.iridescenceThicknessMap&&s.enable(20);e.displacementMap&&s.enable(21);e.specularMap&&s.enable(22);e.roughnessMap&&s.enable(23);e.metalnessMap&&s.enable(24);e.gradientMap&&s.enable(25);e.alphaMap&&s.enable(26);e.alphaTest&&s.enable(27);e.vertexColors&&s.enable(28);e.vertexAlphas&&s.enable(29);e.vertexUvs&&s.enable(30);e.vertexTangents&&s.enable(31);e.uvsVertexOnly&&s.enable(32);t.push(s.mask),s.disableAll(),e.fog&&s.enable(0);e.useFog&&s.enable(1);e.flatShading&&s.enable(2);e.logarithmicDepthBuffer&&s.enable(3);e.skinning&&s.enable(4);e.morphTargets&&s.enable(5);e.morphNormals&&s.enable(6);e.morphColors&&s.enable(7);e.premultipliedAlpha&&s.enable(8);e.shadowMapEnabled&&s.enable(9);e.physicallyCorrectLights&&s.enable(10);e.doubleSided&&s.enable(11);e.flipSided&&s.enable(12);e.useDepthPacking&&s.enable(13);e.dithering&&s.enable(14);e.specularIntensityMap&&s.enable(15);e.specularColorMap&&s.enable(16);e.transmission&&s.enable(17);e.transmissionMap&&s.enable(18);e.thicknessMap&&s.enable(19);e.sheen&&s.enable(20);e.sheenColorMap&&s.enable(21);e.sheenRoughnessMap&&s.enable(22);e.decodeVideoTexture&&s.enable(23);e.opaque&&s.enable(24);t.push(s.mask)}(n,e),n.push(t.outputEncoding)),n.push(e.customProgramCacheKey),n.join()},getUniforms:function(t){const e=p[t.type];let n;if(e){const t=cw[e];n=H_.clone(t.uniforms)}else n=t.uniforms;return n},acquireProgram:function(e,n){let r;for(let t=0,e=u.length;t<e;t++){const e=u[t];if(e.cacheKey===n){r=e,++r.usedTimes;break}}return void 0===r&&(r=new sE(t,n,e,o),u.push(r)),r},releaseProgram:function(t){if(0==--t.usedTimes){const e=u.indexOf(t);u[e]=u[u.length-1],u.pop(),t.destroy()}},releaseShaderCache:function(t){l.remove(t)},programs:u,dispose:function(){l.dispose()}}}function fE(){let t=new WeakMap;return{get:function(e){let n=t.get(e);return void 0===n&&(n={},t.set(e,n)),n},remove:function(e){t.delete(e)},update:function(e,n,r){t.get(e)[n]=r},dispose:function(){t=new WeakMap}}}function hE(t,e){return t.groupOrder!==e.groupOrder?t.groupOrder-e.groupOrder:t.renderOrder!==e.renderOrder?t.renderOrder-e.renderOrder:t.material.id!==e.material.id?t.material.id-e.material.id:t.z!==e.z?t.z-e.z:t.id-e.id}function pE(t,e){return t.groupOrder!==e.groupOrder?t.groupOrder-e.groupOrder:t.renderOrder!==e.renderOrder?t.renderOrder-e.renderOrder:t.z!==e.z?e.z-t.z:t.id-e.id}function mE(){const t=[];let e=0;const n=[],r=[],i=[];function o(n,r,i,o,a,s){let l=t[e];return void 0===l?(l={id:n.id,object:n,geometry:r,material:i,groupOrder:o,renderOrder:n.renderOrder,z:a,group:s},t[e]=l):(l.id=n.id,l.object=n,l.geometry=r,l.material=i,l.groupOrder=o,l.renderOrder=n.renderOrder,l.z=a,l.group=s),e++,l}return{opaque:n,transmissive:r,transparent:i,init:function(){e=0,n.length=0,r.length=0,i.length=0},push:function(t,e,a,s,l,u){const c=o(t,e,a,s,l,u);a.transmission>0?r.push(c):!0===a.transparent?i.push(c):n.push(c)},unshift:function(t,e,a,s,l,u){const c=o(t,e,a,s,l,u);a.transmission>0?r.unshift(c):!0===a.transparent?i.unshift(c):n.unshift(c)},finish:function(){for(let n=e,r=t.length;n<r;n++){const e=t[n];if(null===e.id)break;e.id=null,e.object=null,e.geometry=null,e.material=null,e.group=null}},sort:function(t,e){n.length>1&&n.sort(t||hE),r.length>1&&r.sort(e||pE),i.length>1&&i.sort(e||pE)}}}function gE(){let t=new WeakMap;return{get:function(e,n){const r=t.get(e);let i;return void 0===r?(i=new mE,t.set(e,[i])):n>=r.length?(i=new mE,r.push(i)):i=r[n],i},dispose:function(){t=new WeakMap}}}function vE(){const t={};return{get:function(e){if(void 0!==t[e.id])return t[e.id];let n;switch(e.type){case"DirectionalLight":n={direction:new Ky,color:new By};break;case"SpotLight":n={position:new Ky,direction:new Ky,color:new By,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":n={position:new Ky,color:new By,distance:0,decay:0};break;case"HemisphereLight":n={direction:new Ky,skyColor:new By,groundColor:new By};break;case"RectAreaLight":n={color:new By,position:new Ky,halfWidth:new Ky,halfHeight:new Ky}}return t[e.id]=n,n}}}let yE=0;function bE(t,e){return(e.castShadow?2:0)-(t.castShadow?2:0)+(e.map?1:0)-(t.map?1:0)}function _E(t,e){const n=new vE,r=function(){const t={};return{get:function(e){if(void 0!==t[e.id])return t[e.id];let n;switch(e.type){case"DirectionalLight":case"SpotLight":n={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Ay};break;case"PointLight":n={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Ay,shadowCameraNear:1,shadowCameraFar:1e3}}return t[e.id]=n,n}}}(),i={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0};for(let t=0;t<9;t++)i.probe.push(new Ky);const o=new Ky,a=new Sb,s=new Sb;return{setup:function(o,a){let s=0,l=0,u=0;for(let t=0;t<9;t++)i.probe[t].set(0,0,0);let c=0,d=0,f=0,h=0,p=0,m=0,g=0,v=0,y=0,b=0;o.sort(bE);const _=!0!==a?Math.PI:1;for(let t=0,e=o.length;t<e;t++){const e=o[t],a=e.color,w=e.intensity,A=e.distance,E=e.shadow&&e.shadow.map?e.shadow.map.texture:null;if(e.isAmbientLight)s+=a.r*w*_,l+=a.g*w*_,u+=a.b*w*_;else if(e.isLightProbe)for(let t=0;t<9;t++)i.probe[t].addScaledVector(e.sh.coefficients[t],w);else if(e.isDirectionalLight){const t=n.get(e);if(t.color.copy(e.color).multiplyScalar(e.intensity*_),e.castShadow){const t=e.shadow,n=r.get(e);n.shadowBias=t.bias,n.shadowNormalBias=t.normalBias,n.shadowRadius=t.radius,n.shadowMapSize=t.mapSize,i.directionalShadow[c]=n,i.directionalShadowMap[c]=E,i.directionalShadowMatrix[c]=e.shadow.matrix,m++}i.directional[c]=t,c++}else if(e.isSpotLight){const t=n.get(e);t.position.setFromMatrixPosition(e.matrixWorld),t.color.copy(a).multiplyScalar(w*_),t.distance=A,t.coneCos=Math.cos(e.angle),t.penumbraCos=Math.cos(e.angle*(1-e.penumbra)),t.decay=e.decay,i.spot[f]=t;const o=e.shadow;if(e.map&&(i.spotLightMap[y]=e.map,y++,o.updateMatrices(e),e.castShadow&&b++),i.spotLightMatrix[f]=o.matrix,e.castShadow){const t=r.get(e);t.shadowBias=o.bias,t.shadowNormalBias=o.normalBias,t.shadowRadius=o.radius,t.shadowMapSize=o.mapSize,i.spotShadow[f]=t,i.spotShadowMap[f]=E,v++}f++}else if(e.isRectAreaLight){const t=n.get(e);t.color.copy(a).multiplyScalar(w),t.halfWidth.set(.5*e.width,0,0),t.halfHeight.set(0,.5*e.height,0),i.rectArea[h]=t,h++}else if(e.isPointLight){const t=n.get(e);if(t.color.copy(e.color).multiplyScalar(e.intensity*_),t.distance=e.distance,t.decay=e.decay,e.castShadow){const t=e.shadow,n=r.get(e);n.shadowBias=t.bias,n.shadowNormalBias=t.normalBias,n.shadowRadius=t.radius,n.shadowMapSize=t.mapSize,n.shadowCameraNear=t.camera.near,n.shadowCameraFar=t.camera.far,i.pointShadow[d]=n,i.pointShadowMap[d]=E,i.pointShadowMatrix[d]=e.shadow.matrix,g++}i.point[d]=t,d++}else if(e.isHemisphereLight){const t=n.get(e);t.skyColor.copy(e.color).multiplyScalar(w*_),t.groundColor.copy(e.groundColor).multiplyScalar(w*_),i.hemi[p]=t,p++}}h>0&&(e.isWebGL2||!0===t.has("OES_texture_float_linear")?(i.rectAreaLTC1=uw.LTC_FLOAT_1,i.rectAreaLTC2=uw.LTC_FLOAT_2):!0===t.has("OES_texture_half_float_linear")?(i.rectAreaLTC1=uw.LTC_HALF_1,i.rectAreaLTC2=uw.LTC_HALF_2):console.error("THREE.WebGLRenderer: Unable to use RectAreaLight. Missing WebGL extensions.")),i.ambient[0]=s,i.ambient[1]=l,i.ambient[2]=u;const w=i.hash;w.directionalLength===c&&w.pointLength===d&&w.spotLength===f&&w.rectAreaLength===h&&w.hemiLength===p&&w.numDirectionalShadows===m&&w.numPointShadows===g&&w.numSpotShadows===v&&w.numSpotMaps===y||(i.directional.length=c,i.spot.length=f,i.rectArea.length=h,i.point.length=d,i.hemi.length=p,i.directionalShadow.length=m,i.directionalShadowMap.length=m,i.pointShadow.length=g,i.pointShadowMap.length=g,i.spotShadow.length=v,i.spotShadowMap.length=v,i.directionalShadowMatrix.length=m,i.pointShadowMatrix.length=g,i.spotLightMatrix.length=v+y-b,i.spotLightMap.length=y,i.numSpotLightShadowsWithMaps=b,w.directionalLength=c,w.pointLength=d,w.spotLength=f,w.rectAreaLength=h,w.hemiLength=p,w.numDirectionalShadows=m,w.numPointShadows=g,w.numSpotShadows=v,w.numSpotMaps=y,i.version=yE++)},setupView:function(t,e){let n=0,r=0,l=0,u=0,c=0;const d=e.matrixWorldInverse;for(let e=0,f=t.length;e<f;e++){const f=t[e];if(f.isDirectionalLight){const t=i.directional[n];t.direction.setFromMatrixPosition(f.matrixWorld),o.setFromMatrixPosition(f.target.matrixWorld),t.direction.sub(o),t.direction.transformDirection(d),n++}else if(f.isSpotLight){const t=i.spot[l];t.position.setFromMatrixPosition(f.matrixWorld),t.position.applyMatrix4(d),t.direction.setFromMatrixPosition(f.matrixWorld),o.setFromMatrixPosition(f.target.matrixWorld),t.direction.sub(o),t.direction.transformDirection(d),l++}else if(f.isRectAreaLight){const t=i.rectArea[u];t.position.setFromMatrixPosition(f.matrixWorld),t.position.applyMatrix4(d),s.identity(),a.copy(f.matrixWorld),a.premultiply(d),s.extractRotation(a),t.halfWidth.set(.5*f.width,0,0),t.halfHeight.set(0,.5*f.height,0),t.halfWidth.applyMatrix4(s),t.halfHeight.applyMatrix4(s),u++}else if(f.isPointLight){const t=i.point[r];t.position.setFromMatrixPosition(f.matrixWorld),t.position.applyMatrix4(d),r++}else if(f.isHemisphereLight){const t=i.hemi[c];t.direction.setFromMatrixPosition(f.matrixWorld),t.direction.transformDirection(d),c++}}},state:i}}function wE(t,e){const n=new _E(t,e),r=[],i=[];return{init:function(){r.length=0,i.length=0},state:{lightsArray:r,shadowsArray:i,lights:n},setupLights:function(t){n.setup(r,t)},setupLightsView:function(t){n.setupView(r,t)},pushLight:function(t){r.push(t)},pushShadow:function(t){i.push(t)}}}function AE(t,e){let n=new WeakMap;return{get:function(r,i=0){const o=n.get(r);let a;return void 0===o?(a=new wE(t,e),n.set(r,[a])):i>=o.length?(a=new wE(t,e),o.push(a)):a=o[i],a},dispose:function(){n=new WeakMap}}}class EE extends u_{constructor(t){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=3200,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(t)}copy(t){return super.copy(t),this.depthPacking=t.depthPacking,this.map=t.map,this.alphaMap=t.alphaMap,this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this}}class xE extends u_{constructor(t){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.referencePosition=new Ky,this.nearDistance=1,this.farDistance=1e3,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(t)}copy(t){return super.copy(t),this.referencePosition.copy(t.referencePosition),this.nearDistance=t.nearDistance,this.farDistance=t.farDistance,this.map=t.map,this.alphaMap=t.alphaMap,this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this}}const SE="void main() {\n\tgl_Position = vec4( position, 1.0 );\n}",TE="uniform sampler2D shadow_pass;\nuniform vec2 resolution;\nuniform float radius;\n#include <packing>\nvoid main() {\n\tconst float samples = float( VSM_SAMPLES );\n\tfloat mean = 0.0;\n\tfloat squared_mean = 0.0;\n\tfloat uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );\n\tfloat uvStart = samples <= 1.0 ? 0.0 : - 1.0;\n\tfor ( float i = 0.0; i < samples; i ++ ) {\n\t\tfloat uvOffset = uvStart + i * uvStride;\n\t\t#ifdef HORIZONTAL_PASS\n\t\t\tvec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );\n\t\t\tmean += distribution.x;\n\t\t\tsquared_mean += distribution.y * distribution.y + distribution.x * distribution.x;\n\t\t#else\n\t\t\tfloat depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );\n\t\t\tmean += depth;\n\t\t\tsquared_mean += depth * depth;\n\t\t#endif\n\t}\n\tmean = mean / samples;\n\tsquared_mean = squared_mean / samples;\n\tfloat std_dev = sqrt( squared_mean - mean * mean );\n\tgl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );\n}";function CE(t,e,n){let r=new iw;const i=new Ay,o=new Ay,a=new Hy,s=new EE({depthPacking:$v}),l=new xE,u={},c=n.maxTextureSize,d={[qm]:Gm,[Gm]:qm,[Hm]:Hm},f=new V_({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new Ay},radius:{value:4}},vertexShader:SE,fragmentShader:TE}),h=f.clone();h.defines.HORIZONTAL_PASS=1;const p=new x_;p.setAttribute("position",new h_(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const m=new j_(p,f),g=this;function v(n,r){const o=e.update(m);f.defines.VSM_SAMPLES!==n.blurSamples&&(f.defines.VSM_SAMPLES=n.blurSamples,h.defines.VSM_SAMPLES=n.blurSamples,f.needsUpdate=!0,h.needsUpdate=!0),null===n.mapPass&&(n.mapPass=new Vy(i.x,i.y)),f.uniforms.shadow_pass.value=n.map.texture,f.uniforms.resolution.value=n.mapSize,f.uniforms.radius.value=n.radius,t.setRenderTarget(n.mapPass),t.clear(),t.renderBufferDirect(r,null,o,f,m,null),h.uniforms.shadow_pass.value=n.mapPass.texture,h.uniforms.resolution.value=n.mapSize,h.uniforms.radius.value=n.radius,t.setRenderTarget(n.map),t.clear(),t.renderBufferDirect(r,null,o,h,m,null)}function y(e,n,r,i,o,a){let c=null;const f=!0===r.isPointLight?e.customDistanceMaterial:e.customDepthMaterial;if(void 0!==f)c=f;else if(c=!0===r.isPointLight?l:s,t.localClippingEnabled&&!0===n.clipShadows&&Array.isArray(n.clippingPlanes)&&0!==n.clippingPlanes.length||n.displacementMap&&0!==n.displacementScale||n.alphaMap&&n.alphaTest>0||n.map&&n.alphaTest>0){const t=c.uuid,e=n.uuid;let r=u[t];void 0===r&&(r={},u[t]=r);let i=r[e];void 0===i&&(i=c.clone(),r[e]=i),c=i}return c.visible=n.visible,c.wireframe=n.wireframe,c.side=a===Um?null!==n.shadowSide?n.shadowSide:n.side:null!==n.shadowSide?n.shadowSide:d[n.side],c.alphaMap=n.alphaMap,c.alphaTest=n.alphaTest,c.map=n.map,c.clipShadows=n.clipShadows,c.clippingPlanes=n.clippingPlanes,c.clipIntersection=n.clipIntersection,c.displacementMap=n.displacementMap,c.displacementScale=n.displacementScale,c.displacementBias=n.displacementBias,c.wireframeLinewidth=n.wireframeLinewidth,c.linewidth=n.linewidth,!0===r.isPointLight&&!0===c.isMeshDistanceMaterial&&(c.referencePosition.setFromMatrixPosition(r.matrixWorld),c.nearDistance=i,c.farDistance=o),c}function b(n,i,o,a,s){if(!1===n.visible)return;if(n.layers.test(i.layers)&&(n.isMesh||n.isLine||n.isPoints)&&(n.castShadow||n.receiveShadow&&s===Um)&&(!n.frustumCulled||r.intersectsObject(n))){n.modelViewMatrix.multiplyMatrices(o.matrixWorldInverse,n.matrixWorld);const r=e.update(n),i=n.material;if(Array.isArray(i)){const e=r.groups;for(let l=0,u=e.length;l<u;l++){const u=e[l],c=i[u.materialIndex];if(c&&c.visible){const e=y(n,c,a,o.near,o.far,s);t.renderBufferDirect(o,null,r,e,n,u)}}}else if(i.visible){const e=y(n,i,a,o.near,o.far,s);t.renderBufferDirect(o,null,r,e,n,null)}}const l=n.children;for(let t=0,e=l.length;t<e;t++)b(l[t],i,o,a,s)}this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=zm,this.render=function(e,n,s){if(!1===g.enabled)return;if(!1===g.autoUpdate&&!1===g.needsUpdate)return;if(0===e.length)return;const l=t.getRenderTarget(),u=t.getActiveCubeFace(),d=t.getActiveMipmapLevel(),f=t.state;f.setBlending(Vm),f.buffers.color.setClear(1,1,1,1),f.buffers.depth.setTest(!0),f.setScissorTest(!1);for(let l=0,u=e.length;l<u;l++){const u=e[l],d=u.shadow;if(void 0===d){console.warn("THREE.WebGLShadowMap:",u,"has no shadow.");continue}if(!1===d.autoUpdate&&!1===d.needsUpdate)continue;i.copy(d.mapSize);const h=d.getFrameExtents();if(i.multiply(h),o.copy(d.mapSize),(i.x>c||i.y>c)&&(i.x>c&&(o.x=Math.floor(c/h.x),i.x=o.x*h.x,d.mapSize.x=o.x),i.y>c&&(o.y=Math.floor(c/h.y),i.y=o.y*h.y,d.mapSize.y=o.y)),null===d.map){const t=this.type!==Um?{minFilter:jg,magFilter:jg}:{};d.map=new Vy(i.x,i.y,t),d.map.texture.name=u.name+".shadowMap",d.camera.updateProjectionMatrix()}t.setRenderTarget(d.map),t.clear();const p=d.getViewportCount();for(let t=0;t<p;t++){const e=d.getViewport(t);a.set(o.x*e.x,o.y*e.y,o.x*e.z,o.y*e.w),f.viewport(a),d.updateMatrices(u,t),r=d.getFrustum(),b(n,s,d.camera,u,this.type)}!0!==d.isPointLightShadow&&this.type===Um&&v(d,s),d.needsUpdate=!1}g.needsUpdate=!1,t.setRenderTarget(l,u,d)}}function IE(t,e,n){const r=n.isWebGL2;const i=new function(){let e=!1;const n=new Hy;let r=null;const i=new Hy(0,0,0,0);return{setMask:function(n){r===n||e||(t.colorMask(n,n,n,n),r=n)},setLocked:function(t){e=t},setClear:function(e,r,o,a,s){!0===s&&(e*=a,r*=a,o*=a),n.set(e,r,o,a),!1===i.equals(n)&&(t.clearColor(e,r,o,a),i.copy(n))},reset:function(){e=!1,r=null,i.set(-1,0,0,0)}}},o=new function(){let e=!1,n=null,r=null,i=null;return{setTest:function(t){t?F(2929):U(2929)},setMask:function(r){n===r||e||(t.depthMask(r),n=r)},setFunc:function(e){if(r!==e){switch(e){case hg:t.depthFunc(512);break;case pg:t.depthFunc(519);break;case mg:t.depthFunc(513);break;case gg:t.depthFunc(515);break;case vg:t.depthFunc(514);break;case yg:t.depthFunc(518);break;case bg:t.depthFunc(516);break;case _g:t.depthFunc(517);break;default:t.depthFunc(515)}r=e}},setLocked:function(t){e=t},setClear:function(e){i!==e&&(t.clearDepth(e),i=e)},reset:function(){e=!1,n=null,r=null,i=null}}},a=new function(){let e=!1,n=null,r=null,i=null,o=null,a=null,s=null,l=null,u=null;return{setTest:function(t){e||(t?F(2960):U(2960))},setMask:function(r){n===r||e||(t.stencilMask(r),n=r)},setFunc:function(e,n,a){r===e&&i===n&&o===a||(t.stencilFunc(e,n,a),r=e,i=n,o=a)},setOp:function(e,n,r){a===e&&s===n&&l===r||(t.stencilOp(e,n,r),a=e,s=n,l=r)},setLocked:function(t){e=t},setClear:function(e){u!==e&&(t.clearStencil(e),u=e)},reset:function(){e=!1,n=null,r=null,i=null,o=null,a=null,s=null,l=null,u=null}}},s=new WeakMap,l=new WeakMap;let u={},c={},d=new WeakMap,f=[],h=null,p=!1,m=null,g=null,v=null,y=null,b=null,_=null,w=null,A=!1,E=null,x=null,S=null,T=null,C=null;const I=t.getParameter(35661);let k=!1,P=0;const R=t.getParameter(7938);-1!==R.indexOf("WebGL")?(P=parseFloat(/^WebGL (\d)/.exec(R)[1]),k=P>=1):-1!==R.indexOf("OpenGL ES")&&(P=parseFloat(/^OpenGL ES (\d)/.exec(R)[1]),k=P>=2);let O=null,M={};const L=t.getParameter(3088),D=t.getParameter(2978),N=(new Hy).fromArray(L),B=(new Hy).fromArray(D);function j(e,n,r){const i=new Uint8Array(4),o=t.createTexture();t.bindTexture(e,o),t.texParameteri(e,10241,9728),t.texParameteri(e,10240,9728);for(let e=0;e<r;e++)t.texImage2D(n+e,0,6408,1,1,0,6408,5121,i);return o}const z={};function F(e){!0!==u[e]&&(t.enable(e),u[e]=!0)}function U(e){!1!==u[e]&&(t.disable(e),u[e]=!1)}z[3553]=j(3553,3553,1),z[34067]=j(34067,34069,6),i.setClear(0,0,0,1),o.setClear(1),a.setClear(0),F(2929),o.setFunc(gg),V(!1),Q(Bm),F(2884),H(Vm);const q={[$m]:32774,[Zm]:32778,[Jm]:32779};if(r)q[tg]=32775,q[eg]=32776;else{const t=e.get("EXT_blend_minmax");null!==t&&(q[tg]=t.MIN_EXT,q[eg]=t.MAX_EXT)}const G={[ng]:0,[rg]:1,[ig]:768,[ag]:770,[fg]:776,[cg]:774,[lg]:772,[og]:769,[sg]:771,[dg]:775,[ug]:773};function H(e,n,r,i,o,a,s,l){if(e!==Vm){if(!1===p&&(F(3042),p=!0),e===Xm)o=o||n,a=a||r,s=s||i,n===g&&o===b||(t.blendEquationSeparate(q[n],q[o]),g=n,b=o),r===v&&i===y&&a===_&&s===w||(t.blendFuncSeparate(G[r],G[i],G[a],G[s]),v=r,y=i,_=a,w=s),m=e,A=!1;else if(e!==m||l!==A){if(g===$m&&b===$m||(t.blendEquation(32774),g=$m,b=$m),l)switch(e){case Qm:t.blendFuncSeparate(1,771,1,771);break;case Wm:t.blendFunc(1,1);break;case Ym:t.blendFuncSeparate(0,769,0,1);break;case Km:t.blendFuncSeparate(0,768,0,770);break;default:console.error("THREE.WebGLState: Invalid blending: ",e)}else switch(e){case Qm:t.blendFuncSeparate(770,771,1,771);break;case Wm:t.blendFunc(770,1);break;case Ym:t.blendFuncSeparate(0,769,0,1);break;case Km:t.blendFunc(0,768);break;default:console.error("THREE.WebGLState: Invalid blending: ",e)}v=null,y=null,_=null,w=null,m=e,A=l}}else!0===p&&(U(3042),p=!1)}function V(e){E!==e&&(e?t.frontFace(2304):t.frontFace(2305),E=e)}function Q(e){e!==Nm?(F(2884),e!==x&&(e===Bm?t.cullFace(1029):e===jm?t.cullFace(1028):t.cullFace(1032))):U(2884),x=e}function W(e,n,r){e?(F(32823),T===n&&C===r||(t.polygonOffset(n,r),T=n,C=r)):U(32823)}return{buffers:{color:i,depth:o,stencil:a},enable:F,disable:U,bindFramebuffer:function(e,n){return c[e]!==n&&(t.bindFramebuffer(e,n),c[e]=n,r&&(36009===e&&(c[36160]=n),36160===e&&(c[36009]=n)),!0)},drawBuffers:function(r,i){let o=f,a=!1;if(r)if(o=d.get(i),void 0===o&&(o=[],d.set(i,o)),r.isWebGLMultipleRenderTargets){const t=r.texture;if(o.length!==t.length||36064!==o[0]){for(let e=0,n=t.length;e<n;e++)o[e]=36064+e;o.length=t.length,a=!0}}else 36064!==o[0]&&(o[0]=36064,a=!0);else 1029!==o[0]&&(o[0]=1029,a=!0);a&&(n.isWebGL2?t.drawBuffers(o):e.get("WEBGL_draw_buffers").drawBuffersWEBGL(o))},useProgram:function(e){return h!==e&&(t.useProgram(e),h=e,!0)},setBlending:H,setMaterial:function(t,e){t.side===Hm?U(2884):F(2884);let n=t.side===Gm;e&&(n=!n),V(n),t.blending===Qm&&!1===t.transparent?H(Vm):H(t.blending,t.blendEquation,t.blendSrc,t.blendDst,t.blendEquationAlpha,t.blendSrcAlpha,t.blendDstAlpha,t.premultipliedAlpha),o.setFunc(t.depthFunc),o.setTest(t.depthTest),o.setMask(t.depthWrite),i.setMask(t.colorWrite);const r=t.stencilWrite;a.setTest(r),r&&(a.setMask(t.stencilWriteMask),a.setFunc(t.stencilFunc,t.stencilRef,t.stencilFuncMask),a.setOp(t.stencilFail,t.stencilZFail,t.stencilZPass)),W(t.polygonOffset,t.polygonOffsetFactor,t.polygonOffsetUnits),!0===t.alphaToCoverage?F(32926):U(32926)},setFlipSided:V,setCullFace:Q,setLineWidth:function(e){e!==S&&(k&&t.lineWidth(e),S=e)},setPolygonOffset:W,setScissorTest:function(t){t?F(3089):U(3089)},activeTexture:function(e){void 0===e&&(e=33984+I-1),O!==e&&(t.activeTexture(e),O=e)},bindTexture:function(e,n,r){void 0===r&&(r=null===O?33984+I-1:O);let i=M[r];void 0===i&&(i={type:void 0,texture:void 0},M[r]=i),i.type===e&&i.texture===n||(O!==r&&(t.activeTexture(r),O=r),t.bindTexture(e,n||z[e]),i.type=e,i.texture=n)},unbindTexture:function(){const e=M[O];void 0!==e&&void 0!==e.type&&(t.bindTexture(e.type,null),e.type=void 0,e.texture=void 0)},compressedTexImage2D:function(){try{t.compressedTexImage2D.apply(t,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},compressedTexImage3D:function(){try{t.compressedTexImage3D.apply(t,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},texImage2D:function(){try{t.texImage2D.apply(t,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},texImage3D:function(){try{t.texImage3D.apply(t,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},updateUBOMapping:function(e,n){let r=l.get(n);void 0===r&&(r=new WeakMap,l.set(n,r));let i=r.get(e);void 0===i&&(i=t.getUniformBlockIndex(n,e.name),r.set(e,i))},uniformBlockBinding:function(e,n){const r=l.get(n).get(e);s.get(n)!==r&&(t.uniformBlockBinding(n,r,e.__bindingPointIndex),s.set(n,r))},texStorage2D:function(){try{t.texStorage2D.apply(t,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},texStorage3D:function(){try{t.texStorage3D.apply(t,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},texSubImage2D:function(){try{t.texSubImage2D.apply(t,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},texSubImage3D:function(){try{t.texSubImage3D.apply(t,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},compressedTexSubImage2D:function(){try{t.compressedTexSubImage2D.apply(t,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},compressedTexSubImage3D:function(){try{t.compressedTexSubImage3D.apply(t,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},scissor:function(e){!1===N.equals(e)&&(t.scissor(e.x,e.y,e.z,e.w),N.copy(e))},viewport:function(e){!1===B.equals(e)&&(t.viewport(e.x,e.y,e.z,e.w),B.copy(e))},reset:function(){t.disable(3042),t.disable(2884),t.disable(2929),t.disable(32823),t.disable(3089),t.disable(2960),t.disable(32926),t.blendEquation(32774),t.blendFunc(1,0),t.blendFuncSeparate(1,0,1,0),t.colorMask(!0,!0,!0,!0),t.clearColor(0,0,0,0),t.depthMask(!0),t.depthFunc(513),t.clearDepth(1),t.stencilMask(4294967295),t.stencilFunc(519,0,4294967295),t.stencilOp(7680,7680,7680),t.clearStencil(0),t.cullFace(1029),t.frontFace(2305),t.polygonOffset(0,0),t.activeTexture(33984),t.bindFramebuffer(36160,null),!0===r&&(t.bindFramebuffer(36009,null),t.bindFramebuffer(36008,null)),t.useProgram(null),t.lineWidth(1),t.scissor(0,0,t.canvas.width,t.canvas.height),t.viewport(0,0,t.canvas.width,t.canvas.height),u={},O=null,M={},c={},d=new WeakMap,f=[],h=null,p=!1,m=null,g=null,v=null,y=null,b=null,_=null,w=null,A=!1,E=null,x=null,S=null,T=null,C=null,N.set(0,0,t.canvas.width,t.canvas.height),B.set(0,0,t.canvas.width,t.canvas.height),i.reset(),o.reset(),a.reset()}}}function kE(t,e,n,r,i,o,a){const s=i.isWebGL2,l=i.maxTextures,u=i.maxCubemapSize,c=i.maxTextureSize,d=i.maxSamples,f=e.has("WEBGL_multisampled_render_to_texture")?e.get("WEBGL_multisampled_render_to_texture"):null,h="undefined"!=typeof navigator&&/OculusBrowser/g.test(navigator.userAgent),p=new WeakMap;let m;const g=new WeakMap;let v=!1;try{v="undefined"!=typeof OffscreenCanvas&&null!==new OffscreenCanvas(1,1).getContext("2d")}catch(t){}function y(t,e){return v?new OffscreenCanvas(t,e):Ty("canvas")}function b(t,e,n,r){let i=1;if((t.width>r||t.height>r)&&(i=r/Math.max(t.width,t.height)),i<1||!0===e){if("undefined"!=typeof HTMLImageElement&&t instanceof HTMLImageElement||"undefined"!=typeof HTMLCanvasElement&&t instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&t instanceof ImageBitmap){const r=e?yy:Math.floor,o=r(i*t.width),a=r(i*t.height);void 0===m&&(m=y(o,a));const s=n?y(o,a):m;s.width=o,s.height=a;return s.getContext("2d").drawImage(t,0,0,o,a),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+t.width+"x"+t.height+") to ("+o+"x"+a+")."),s}return"data"in t&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+t.width+"x"+t.height+")."),t}return t}function _(t){return gy(t.width)&&gy(t.height)}function w(t,e){return t.generateMipmaps&&e&&t.minFilter!==jg&&t.minFilter!==Ug}function A(e){t.generateMipmap(e)}function E(n,r,i,o,a=!1){if(!1===s)return r;if(null!==n){if(void 0!==t[n])return t[n];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+n+"'")}let l=r;return 6403===r&&(5126===i&&(l=33326),5131===i&&(l=33325),5121===i&&(l=33321)),33319===r&&(5126===i&&(l=33328),5131===i&&(l=33327),5121===i&&(l=33323)),6408===r&&(5126===i&&(l=34836),5131===i&&(l=34842),5121===i&&(l=o===Xv&&!1===a?35907:32856),32819===i&&(l=32854),32820===i&&(l=32855)),33325!==l&&33326!==l&&33327!==l&&33328!==l&&34842!==l&&34836!==l||e.get("EXT_color_buffer_float"),l}function x(t,e,n){return!0===w(t,n)||t.isFramebufferTexture&&t.minFilter!==jg&&t.minFilter!==Ug?Math.log2(Math.max(e.width,e.height))+1:void 0!==t.mipmaps&&t.mipmaps.length>0?t.mipmaps.length:t.isCompressedTexture&&Array.isArray(t.image)?e.mipmaps.length:1}function S(t){return t===jg||t===zg||t===Fg?9728:9729}function T(t){const e=t.target;e.removeEventListener("dispose",T),function(t){const e=r.get(t);if(void 0===e.__webglInit)return;const n=t.source,i=g.get(n);if(i){const r=i[e.__cacheKey];r.usedTimes--,0===r.usedTimes&&I(t),0===Object.keys(i).length&&g.delete(n)}r.remove(t)}(e),e.isVideoTexture&&p.delete(e)}function C(e){const n=e.target;n.removeEventListener("dispose",C),function(e){const n=e.texture,i=r.get(e),o=r.get(n);void 0!==o.__webglTexture&&(t.deleteTexture(o.__webglTexture),a.memory.textures--);e.depthTexture&&e.depthTexture.dispose();if(e.isWebGLCubeRenderTarget)for(let e=0;e<6;e++)t.deleteFramebuffer(i.__webglFramebuffer[e]),i.__webglDepthbuffer&&t.deleteRenderbuffer(i.__webglDepthbuffer[e]);else{if(t.deleteFramebuffer(i.__webglFramebuffer),i.__webglDepthbuffer&&t.deleteRenderbuffer(i.__webglDepthbuffer),i.__webglMultisampledFramebuffer&&t.deleteFramebuffer(i.__webglMultisampledFramebuffer),i.__webglColorRenderbuffer)for(let e=0;e<i.__webglColorRenderbuffer.length;e++)i.__webglColorRenderbuffer[e]&&t.deleteRenderbuffer(i.__webglColorRenderbuffer[e]);i.__webglDepthRenderbuffer&&t.deleteRenderbuffer(i.__webglDepthRenderbuffer)}if(e.isWebGLMultipleRenderTargets)for(let e=0,i=n.length;e<i;e++){const i=r.get(n[e]);i.__webglTexture&&(t.deleteTexture(i.__webglTexture),a.memory.textures--),r.remove(n[e])}r.remove(n),r.remove(e)}(n)}function I(e){const n=r.get(e);t.deleteTexture(n.__webglTexture);const i=e.source;delete g.get(i)[n.__cacheKey],a.memory.textures--}let k=0;function P(t,e){const i=r.get(t);if(t.isVideoTexture&&function(t){const e=a.render.frame;p.get(t)!==e&&(p.set(t,e),t.update())}(t),!1===t.isRenderTargetTexture&&t.version>0&&i.__version!==t.version){const n=t.image;if(null===n)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else{if(!1!==n.complete)return void D(i,t,e);console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete")}}n.bindTexture(3553,i.__webglTexture,33984+e)}const R={[Dg]:10497,[Ng]:33071,[Bg]:33648},O={[jg]:9728,[zg]:9984,[Fg]:9986,[Ug]:9729,[qg]:9985,[Gg]:9987};function M(n,o,a){if(a?(t.texParameteri(n,10242,R[o.wrapS]),t.texParameteri(n,10243,R[o.wrapT]),32879!==n&&35866!==n||t.texParameteri(n,32882,R[o.wrapR]),t.texParameteri(n,10240,O[o.magFilter]),t.texParameteri(n,10241,O[o.minFilter])):(t.texParameteri(n,10242,33071),t.texParameteri(n,10243,33071),32879!==n&&35866!==n||t.texParameteri(n,32882,33071),o.wrapS===Ng&&o.wrapT===Ng||console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),t.texParameteri(n,10240,S(o.magFilter)),t.texParameteri(n,10241,S(o.minFilter)),o.minFilter!==jg&&o.minFilter!==Ug&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.")),!0===e.has("EXT_texture_filter_anisotropic")){const a=e.get("EXT_texture_filter_anisotropic");if(o.magFilter===jg)return;if(o.minFilter!==Fg&&o.minFilter!==Gg)return;if(o.type===Xg&&!1===e.has("OES_texture_float_linear"))return;if(!1===s&&o.type===$g&&!1===e.has("OES_texture_half_float_linear"))return;(o.anisotropy>1||r.get(o).__currentAnisotropy)&&(t.texParameterf(n,a.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(o.anisotropy,i.getMaxAnisotropy())),r.get(o).__currentAnisotropy=o.anisotropy)}}function L(e,n){let r=!1;void 0===e.__webglInit&&(e.__webglInit=!0,n.addEventListener("dispose",T));const i=n.source;let o=g.get(i);void 0===o&&(o={},g.set(i,o));const s=function(t){const e=[];return e.push(t.wrapS),e.push(t.wrapT),e.push(t.wrapR||0),e.push(t.magFilter),e.push(t.minFilter),e.push(t.anisotropy),e.push(t.internalFormat),e.push(t.format),e.push(t.type),e.push(t.generateMipmaps),e.push(t.premultiplyAlpha),e.push(t.flipY),e.push(t.unpackAlignment),e.push(t.encoding),e.join()}(n);if(s!==e.__cacheKey){void 0===o[s]&&(o[s]={texture:t.createTexture(),usedTimes:0},a.memory.textures++,r=!0),o[s].usedTimes++;const i=o[e.__cacheKey];void 0!==i&&(o[e.__cacheKey].usedTimes--,0===i.usedTimes&&I(n)),e.__cacheKey=s,e.__webglTexture=o[s].texture}return r}function D(e,i,a){let l=3553;(i.isDataArrayTexture||i.isCompressedArrayTexture)&&(l=35866),i.isData3DTexture&&(l=32879);const u=L(e,i),d=i.source;n.bindTexture(l,e.__webglTexture,33984+a);const f=r.get(d);if(d.version!==f.__version||!0===u){n.activeTexture(33984+a),t.pixelStorei(37440,i.flipY),t.pixelStorei(37441,i.premultiplyAlpha),t.pixelStorei(3317,i.unpackAlignment),t.pixelStorei(37443,0);const e=function(t){return!s&&(t.wrapS!==Ng||t.wrapT!==Ng||t.minFilter!==jg&&t.minFilter!==Ug)}(i)&&!1===_(i.image);let r=b(i.image,e,!1,c);r=U(i,r);const h=_(r)||s,p=o.convert(i.format,i.encoding);let m,g=o.convert(i.type),v=E(i.internalFormat,p,g,i.encoding,i.isVideoTexture);M(l,i,h);const y=i.mipmaps,S=s&&!0!==i.isVideoTexture,T=void 0===f.__version||!0===u,C=x(i,r,h);if(i.isDepthTexture)v=6402,s?v=i.type===Xg?36012:i.type===Kg?33190:i.type===tv?35056:33189:i.type===Xg&&console.error("WebGLRenderer: Floating point depth texture requires WebGL2."),i.format===ov&&6402===v&&i.type!==Wg&&i.type!==Kg&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),i.type=Kg,g=o.convert(i.type)),i.format===av&&6402===v&&(v=34041,i.type!==tv&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),i.type=tv,g=o.convert(i.type))),T&&(S?n.texStorage2D(3553,1,v,r.width,r.height):n.texImage2D(3553,0,v,r.width,r.height,0,p,g,null));else if(i.isDataTexture)if(y.length>0&&h){S&&T&&n.texStorage2D(3553,C,v,y[0].width,y[0].height);for(let t=0,e=y.length;t<e;t++)m=y[t],S?n.texSubImage2D(3553,t,0,0,m.width,m.height,p,g,m.data):n.texImage2D(3553,t,v,m.width,m.height,0,p,g,m.data);i.generateMipmaps=!1}else S?(T&&n.texStorage2D(3553,C,v,r.width,r.height),n.texSubImage2D(3553,0,0,0,r.width,r.height,p,g,r.data)):n.texImage2D(3553,0,v,r.width,r.height,0,p,g,r.data);else if(i.isCompressedTexture)if(i.isCompressedArrayTexture){S&&T&&n.texStorage3D(35866,C,v,y[0].width,y[0].height,r.depth);for(let t=0,e=y.length;t<e;t++)m=y[t],i.format!==nv?null!==p?S?n.compressedTexSubImage3D(35866,t,0,0,0,m.width,m.height,r.depth,p,m.data,0,0):n.compressedTexImage3D(35866,t,v,m.width,m.height,r.depth,0,m.data,0,0):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):S?n.texSubImage3D(35866,t,0,0,0,m.width,m.height,r.depth,p,g,m.data):n.texImage3D(35866,t,v,m.width,m.height,r.depth,0,p,g,m.data)}else{S&&T&&n.texStorage2D(3553,C,v,y[0].width,y[0].height);for(let t=0,e=y.length;t<e;t++)m=y[t],i.format!==nv?null!==p?S?n.compressedTexSubImage2D(3553,t,0,0,m.width,m.height,p,m.data):n.compressedTexImage2D(3553,t,v,m.width,m.height,0,m.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):S?n.texSubImage2D(3553,t,0,0,m.width,m.height,p,g,m.data):n.texImage2D(3553,t,v,m.width,m.height,0,p,g,m.data)}else if(i.isDataArrayTexture)S?(T&&n.texStorage3D(35866,C,v,r.width,r.height,r.depth),n.texSubImage3D(35866,0,0,0,0,r.width,r.height,r.depth,p,g,r.data)):n.texImage3D(35866,0,v,r.width,r.height,r.depth,0,p,g,r.data);else if(i.isData3DTexture)S?(T&&n.texStorage3D(32879,C,v,r.width,r.height,r.depth),n.texSubImage3D(32879,0,0,0,0,r.width,r.height,r.depth,p,g,r.data)):n.texImage3D(32879,0,v,r.width,r.height,r.depth,0,p,g,r.data);else if(i.isFramebufferTexture){if(T)if(S)n.texStorage2D(3553,C,v,r.width,r.height);else{let t=r.width,e=r.height;for(let r=0;r<C;r++)n.texImage2D(3553,r,v,t,e,0,p,g,null),t>>=1,e>>=1}}else if(y.length>0&&h){S&&T&&n.texStorage2D(3553,C,v,y[0].width,y[0].height);for(let t=0,e=y.length;t<e;t++)m=y[t],S?n.texSubImage2D(3553,t,0,0,p,g,m):n.texImage2D(3553,t,v,p,g,m);i.generateMipmaps=!1}else S?(T&&n.texStorage2D(3553,C,v,r.width,r.height),n.texSubImage2D(3553,0,0,0,p,g,r)):n.texImage2D(3553,0,v,p,g,r);w(i,h)&&A(l),f.__version=d.version,i.onUpdate&&i.onUpdate(i)}e.__version=i.version}function N(e,i,a,s,l){const u=o.convert(a.format,a.encoding),c=o.convert(a.type),d=E(a.internalFormat,u,c,a.encoding);r.get(i).__hasExternalTextures||(32879===l||35866===l?n.texImage3D(l,0,d,i.width,i.height,i.depth,0,u,c,null):n.texImage2D(l,0,d,i.width,i.height,0,u,c,null)),n.bindFramebuffer(36160,e),F(i)?f.framebufferTexture2DMultisampleEXT(36160,s,l,r.get(a).__webglTexture,0,z(i)):(3553===l||l>=34069&&l<=34074)&&t.framebufferTexture2D(36160,s,l,r.get(a).__webglTexture,0),n.bindFramebuffer(36160,null)}function B(e,n,r){if(t.bindRenderbuffer(36161,e),n.depthBuffer&&!n.stencilBuffer){let i=33189;if(r||F(n)){const e=n.depthTexture;e&&e.isDepthTexture&&(e.type===Xg?i=36012:e.type===Kg&&(i=33190));const r=z(n);F(n)?f.renderbufferStorageMultisampleEXT(36161,r,i,n.width,n.height):t.renderbufferStorageMultisample(36161,r,i,n.width,n.height)}else t.renderbufferStorage(36161,i,n.width,n.height);t.framebufferRenderbuffer(36160,36096,36161,e)}else if(n.depthBuffer&&n.stencilBuffer){const i=z(n);r&&!1===F(n)?t.renderbufferStorageMultisample(36161,i,35056,n.width,n.height):F(n)?f.renderbufferStorageMultisampleEXT(36161,i,35056,n.width,n.height):t.renderbufferStorage(36161,34041,n.width,n.height),t.framebufferRenderbuffer(36160,33306,36161,e)}else{const e=!0===n.isWebGLMultipleRenderTargets?n.texture:[n.texture];for(let i=0;i<e.length;i++){const a=e[i],s=o.convert(a.format,a.encoding),l=o.convert(a.type),u=E(a.internalFormat,s,l,a.encoding),c=z(n);r&&!1===F(n)?t.renderbufferStorageMultisample(36161,c,u,n.width,n.height):F(n)?f.renderbufferStorageMultisampleEXT(36161,c,u,n.width,n.height):t.renderbufferStorage(36161,u,n.width,n.height)}}t.bindRenderbuffer(36161,null)}function j(e){const i=r.get(e),o=!0===e.isWebGLCubeRenderTarget;if(e.depthTexture&&!i.__autoAllocateDepthBuffer){if(o)throw new Error("target.depthTexture not supported in Cube render targets");!function(e,i){if(i&&i.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(n.bindFramebuffer(36160,e),!i.depthTexture||!i.depthTexture.isDepthTexture)throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");r.get(i.depthTexture).__webglTexture&&i.depthTexture.image.width===i.width&&i.depthTexture.image.height===i.height||(i.depthTexture.image.width=i.width,i.depthTexture.image.height=i.height,i.depthTexture.needsUpdate=!0),P(i.depthTexture,0);const o=r.get(i.depthTexture).__webglTexture,a=z(i);if(i.depthTexture.format===ov)F(i)?f.framebufferTexture2DMultisampleEXT(36160,36096,3553,o,0,a):t.framebufferTexture2D(36160,36096,3553,o,0);else{if(i.depthTexture.format!==av)throw new Error("Unknown depthTexture format");F(i)?f.framebufferTexture2DMultisampleEXT(36160,33306,3553,o,0,a):t.framebufferTexture2D(36160,33306,3553,o,0)}}(i.__webglFramebuffer,e)}else if(o){i.__webglDepthbuffer=[];for(let r=0;r<6;r++)n.bindFramebuffer(36160,i.__webglFramebuffer[r]),i.__webglDepthbuffer[r]=t.createRenderbuffer(),B(i.__webglDepthbuffer[r],e,!1)}else n.bindFramebuffer(36160,i.__webglFramebuffer),i.__webglDepthbuffer=t.createRenderbuffer(),B(i.__webglDepthbuffer,e,!1);n.bindFramebuffer(36160,null)}function z(t){return Math.min(d,t.samples)}function F(t){const n=r.get(t);return s&&t.samples>0&&!0===e.has("WEBGL_multisampled_render_to_texture")&&!1!==n.__useRenderToTexture}function U(t,n){const r=t.encoding,i=t.format,o=t.type;return!0===t.isCompressedTexture||!0===t.isVideoTexture||t.format===ay||r!==Kv&&(r===Xv?!1===s?!0===e.has("EXT_sRGB")&&i===nv?(t.format=ay,t.minFilter=Ug,t.generateMipmaps=!1):n=zy.sRGBToLinear(n):i===nv&&o===Hg||console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture encoding:",r)),n}this.allocateTextureUnit=function(){const t=k;return t>=l&&console.warn("THREE.WebGLTextures: Trying to use "+t+" texture units while this GPU supports only "+l),k+=1,t},this.resetTextureUnits=function(){k=0},this.setTexture2D=P,this.setTexture2DArray=function(t,e){const i=r.get(t);t.version>0&&i.__version!==t.version?D(i,t,e):n.bindTexture(35866,i.__webglTexture,33984+e)},this.setTexture3D=function(t,e){const i=r.get(t);t.version>0&&i.__version!==t.version?D(i,t,e):n.bindTexture(32879,i.__webglTexture,33984+e)},this.setTextureCube=function(e,i){const a=r.get(e);e.version>0&&a.__version!==e.version?function(e,i,a){if(6!==i.image.length)return;const l=L(e,i),c=i.source;n.bindTexture(34067,e.__webglTexture,33984+a);const d=r.get(c);if(c.version!==d.__version||!0===l){n.activeTexture(33984+a),t.pixelStorei(37440,i.flipY),t.pixelStorei(37441,i.premultiplyAlpha),t.pixelStorei(3317,i.unpackAlignment),t.pixelStorei(37443,0);const e=i.isCompressedTexture||i.image[0].isCompressedTexture,r=i.image[0]&&i.image[0].isDataTexture,f=[];for(let t=0;t<6;t++)f[t]=e||r?r?i.image[t].image:i.image[t]:b(i.image[t],!1,!0,u),f[t]=U(i,f[t]);const h=f[0],p=_(h)||s,m=o.convert(i.format,i.encoding),g=o.convert(i.type),v=E(i.internalFormat,m,g,i.encoding),y=s&&!0!==i.isVideoTexture,S=void 0===d.__version||!0===l;let T,C=x(i,h,p);if(M(34067,i,p),e){y&&S&&n.texStorage2D(34067,C,v,h.width,h.height);for(let t=0;t<6;t++){T=f[t].mipmaps;for(let e=0;e<T.length;e++){const r=T[e];i.format!==nv?null!==m?y?n.compressedTexSubImage2D(34069+t,e,0,0,r.width,r.height,m,r.data):n.compressedTexImage2D(34069+t,e,v,r.width,r.height,0,r.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):y?n.texSubImage2D(34069+t,e,0,0,r.width,r.height,m,g,r.data):n.texImage2D(34069+t,e,v,r.width,r.height,0,m,g,r.data)}}}else{T=i.mipmaps,y&&S&&(T.length>0&&C++,n.texStorage2D(34067,C,v,f[0].width,f[0].height));for(let t=0;t<6;t++)if(r){y?n.texSubImage2D(34069+t,0,0,0,f[t].width,f[t].height,m,g,f[t].data):n.texImage2D(34069+t,0,v,f[t].width,f[t].height,0,m,g,f[t].data);for(let e=0;e<T.length;e++){const r=T[e].image[t].image;y?n.texSubImage2D(34069+t,e+1,0,0,r.width,r.height,m,g,r.data):n.texImage2D(34069+t,e+1,v,r.width,r.height,0,m,g,r.data)}}else{y?n.texSubImage2D(34069+t,0,0,0,m,g,f[t]):n.texImage2D(34069+t,0,v,m,g,f[t]);for(let e=0;e<T.length;e++){const r=T[e];y?n.texSubImage2D(34069+t,e+1,0,0,m,g,r.image[t]):n.texImage2D(34069+t,e+1,v,m,g,r.image[t])}}}w(i,p)&&A(34067),d.__version=c.version,i.onUpdate&&i.onUpdate(i)}e.__version=i.version}(a,e,i):n.bindTexture(34067,a.__webglTexture,33984+i)},this.rebindTextures=function(t,e,n){const i=r.get(t);void 0!==e&&N(i.__webglFramebuffer,t,t.texture,36064,3553),void 0!==n&&j(t)},this.setupRenderTarget=function(e){const l=e.texture,u=r.get(e),c=r.get(l);e.addEventListener("dispose",C),!0!==e.isWebGLMultipleRenderTargets&&(void 0===c.__webglTexture&&(c.__webglTexture=t.createTexture()),c.__version=l.version,a.memory.textures++);const d=!0===e.isWebGLCubeRenderTarget,f=!0===e.isWebGLMultipleRenderTargets,h=_(e)||s;if(d){u.__webglFramebuffer=[];for(let e=0;e<6;e++)u.__webglFramebuffer[e]=t.createFramebuffer()}else{if(u.__webglFramebuffer=t.createFramebuffer(),f)if(i.drawBuffers){const n=e.texture;for(let e=0,i=n.length;e<i;e++){const i=r.get(n[e]);void 0===i.__webglTexture&&(i.__webglTexture=t.createTexture(),a.memory.textures++)}}else console.warn("THREE.WebGLRenderer: WebGLMultipleRenderTargets can only be used with WebGL2 or WEBGL_draw_buffers extension.");if(s&&e.samples>0&&!1===F(e)){const r=f?l:[l];u.__webglMultisampledFramebuffer=t.createFramebuffer(),u.__webglColorRenderbuffer=[],n.bindFramebuffer(36160,u.__webglMultisampledFramebuffer);for(let n=0;n<r.length;n++){const i=r[n];u.__webglColorRenderbuffer[n]=t.createRenderbuffer(),t.bindRenderbuffer(36161,u.__webglColorRenderbuffer[n]);const a=o.convert(i.format,i.encoding),s=o.convert(i.type),l=E(i.internalFormat,a,s,i.encoding,!0===e.isXRRenderTarget),c=z(e);t.renderbufferStorageMultisample(36161,c,l,e.width,e.height),t.framebufferRenderbuffer(36160,36064+n,36161,u.__webglColorRenderbuffer[n])}t.bindRenderbuffer(36161,null),e.depthBuffer&&(u.__webglDepthRenderbuffer=t.createRenderbuffer(),B(u.__webglDepthRenderbuffer,e,!0)),n.bindFramebuffer(36160,null)}}if(d){n.bindTexture(34067,c.__webglTexture),M(34067,l,h);for(let t=0;t<6;t++)N(u.__webglFramebuffer[t],e,l,36064,34069+t);w(l,h)&&A(34067),n.unbindTexture()}else if(f){const t=e.texture;for(let i=0,o=t.length;i<o;i++){const o=t[i],a=r.get(o);n.bindTexture(3553,a.__webglTexture),M(3553,o,h),N(u.__webglFramebuffer,e,o,36064+i,3553),w(o,h)&&A(3553)}n.unbindTexture()}else{let t=3553;(e.isWebGL3DRenderTarget||e.isWebGLArrayRenderTarget)&&(s?t=e.isWebGL3DRenderTarget?32879:35866:console.error("THREE.WebGLTextures: THREE.Data3DTexture and THREE.DataArrayTexture only supported with WebGL2.")),n.bindTexture(t,c.__webglTexture),M(t,l,h),N(u.__webglFramebuffer,e,l,36064,t),w(l,h)&&A(t),n.unbindTexture()}e.depthBuffer&&j(e)},this.updateRenderTargetMipmap=function(t){const e=_(t)||s,i=!0===t.isWebGLMultipleRenderTargets?t.texture:[t.texture];for(let o=0,a=i.length;o<a;o++){const a=i[o];if(w(a,e)){const e=t.isWebGLCubeRenderTarget?34067:3553,i=r.get(a).__webglTexture;n.bindTexture(e,i),A(e),n.unbindTexture()}}},this.updateMultisampleRenderTarget=function(e){if(s&&e.samples>0&&!1===F(e)){const i=e.isWebGLMultipleRenderTargets?e.texture:[e.texture],o=e.width,a=e.height;let s=16384;const l=[],u=e.stencilBuffer?33306:36096,c=r.get(e),d=!0===e.isWebGLMultipleRenderTargets;if(d)for(let e=0;e<i.length;e++)n.bindFramebuffer(36160,c.__webglMultisampledFramebuffer),t.framebufferRenderbuffer(36160,36064+e,36161,null),n.bindFramebuffer(36160,c.__webglFramebuffer),t.framebufferTexture2D(36009,36064+e,3553,null,0);n.bindFramebuffer(36008,c.__webglMultisampledFramebuffer),n.bindFramebuffer(36009,c.__webglFramebuffer);for(let n=0;n<i.length;n++){l.push(36064+n),e.depthBuffer&&l.push(u);const f=void 0!==c.__ignoreDepthValues&&c.__ignoreDepthValues;if(!1===f&&(e.depthBuffer&&(s|=256),e.stencilBuffer&&(s|=1024)),d&&t.framebufferRenderbuffer(36008,36064,36161,c.__webglColorRenderbuffer[n]),!0===f&&(t.invalidateFramebuffer(36008,[u]),t.invalidateFramebuffer(36009,[u])),d){const e=r.get(i[n]).__webglTexture;t.framebufferTexture2D(36009,36064,3553,e,0)}t.blitFramebuffer(0,0,o,a,0,0,o,a,s,9728),h&&t.invalidateFramebuffer(36008,l)}if(n.bindFramebuffer(36008,null),n.bindFramebuffer(36009,null),d)for(let e=0;e<i.length;e++){n.bindFramebuffer(36160,c.__webglMultisampledFramebuffer),t.framebufferRenderbuffer(36160,36064+e,36161,c.__webglColorRenderbuffer[e]);const o=r.get(i[e]).__webglTexture;n.bindFramebuffer(36160,c.__webglFramebuffer),t.framebufferTexture2D(36009,36064+e,3553,o,0)}n.bindFramebuffer(36009,c.__webglMultisampledFramebuffer)}},this.setupDepthRenderbuffer=j,this.setupFrameBufferTexture=N,this.useMultisampledRTT=F}function PE(t,e,n){const r=n.isWebGL2;return{convert:function(n,i=null){let o;if(n===Hg)return 5121;if(n===Zg)return 32819;if(n===Jg)return 32820;if(n===Vg)return 5120;if(n===Qg)return 5122;if(n===Wg)return 5123;if(n===Yg)return 5124;if(n===Kg)return 5125;if(n===Xg)return 5126;if(n===$g)return r?5131:(o=e.get("OES_texture_half_float"),null!==o?o.HALF_FLOAT_OES:null);if(n===ev)return 6406;if(n===nv)return 6408;if(n===rv)return 6409;if(n===iv)return 6410;if(n===ov)return 6402;if(n===av)return 34041;if(n===ay)return o=e.get("EXT_sRGB"),null!==o?o.SRGB_ALPHA_EXT:null;if(n===sv)return 6403;if(n===lv)return 36244;if(n===uv)return 33319;if(n===cv)return 33320;if(n===dv)return 36249;if(n===fv||n===hv||n===pv||n===mv)if(i===Xv){if(o=e.get("WEBGL_compressed_texture_s3tc_srgb"),null===o)return null;if(n===fv)return o.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(n===hv)return o.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(n===pv)return o.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(n===mv)return o.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else{if(o=e.get("WEBGL_compressed_texture_s3tc"),null===o)return null;if(n===fv)return o.COMPRESSED_RGB_S3TC_DXT1_EXT;if(n===hv)return o.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(n===pv)return o.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(n===mv)return o.COMPRESSED_RGBA_S3TC_DXT5_EXT}if(n===gv||n===vv||n===yv||n===bv){if(o=e.get("WEBGL_compressed_texture_pvrtc"),null===o)return null;if(n===gv)return o.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(n===vv)return o.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(n===yv)return o.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(n===bv)return o.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}if(n===_v)return o=e.get("WEBGL_compressed_texture_etc1"),null!==o?o.COMPRESSED_RGB_ETC1_WEBGL:null;if(n===wv||n===Av){if(o=e.get("WEBGL_compressed_texture_etc"),null===o)return null;if(n===wv)return i===Xv?o.COMPRESSED_SRGB8_ETC2:o.COMPRESSED_RGB8_ETC2;if(n===Av)return i===Xv?o.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:o.COMPRESSED_RGBA8_ETC2_EAC}if(n===Ev||n===xv||n===Sv||n===Tv||n===Cv||n===Iv||n===kv||n===Pv||n===Rv||n===Ov||n===Mv||n===Lv||n===Dv||n===Nv){if(o=e.get("WEBGL_compressed_texture_astc"),null===o)return null;if(n===Ev)return i===Xv?o.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:o.COMPRESSED_RGBA_ASTC_4x4_KHR;if(n===xv)return i===Xv?o.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:o.COMPRESSED_RGBA_ASTC_5x4_KHR;if(n===Sv)return i===Xv?o.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:o.COMPRESSED_RGBA_ASTC_5x5_KHR;if(n===Tv)return i===Xv?o.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:o.COMPRESSED_RGBA_ASTC_6x5_KHR;if(n===Cv)return i===Xv?o.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:o.COMPRESSED_RGBA_ASTC_6x6_KHR;if(n===Iv)return i===Xv?o.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:o.COMPRESSED_RGBA_ASTC_8x5_KHR;if(n===kv)return i===Xv?o.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:o.COMPRESSED_RGBA_ASTC_8x6_KHR;if(n===Pv)return i===Xv?o.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:o.COMPRESSED_RGBA_ASTC_8x8_KHR;if(n===Rv)return i===Xv?o.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:o.COMPRESSED_RGBA_ASTC_10x5_KHR;if(n===Ov)return i===Xv?o.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:o.COMPRESSED_RGBA_ASTC_10x6_KHR;if(n===Mv)return i===Xv?o.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:o.COMPRESSED_RGBA_ASTC_10x8_KHR;if(n===Lv)return i===Xv?o.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:o.COMPRESSED_RGBA_ASTC_10x10_KHR;if(n===Dv)return i===Xv?o.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:o.COMPRESSED_RGBA_ASTC_12x10_KHR;if(n===Nv)return i===Xv?o.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:o.COMPRESSED_RGBA_ASTC_12x12_KHR}if(n===Bv){if(o=e.get("EXT_texture_compression_bptc"),null===o)return null;if(n===Bv)return i===Xv?o.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:o.COMPRESSED_RGBA_BPTC_UNORM_EXT}if(n===jv||n===zv||n===Fv||n===Uv){if(o=e.get("EXT_texture_compression_rgtc"),null===o)return null;if(n===Bv)return o.COMPRESSED_RED_RGTC1_EXT;if(n===zv)return o.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(n===Fv)return o.COMPRESSED_RED_GREEN_RGTC2_EXT;if(n===Uv)return o.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}return n===tv?r?34042:(o=e.get("WEBGL_depth_texture"),null!==o?o.UNSIGNED_INT_24_8_WEBGL:null):void 0!==t[n]?t[n]:null}}}class RE extends W_{constructor(t=[]){super(),this.isArrayCamera=!0,this.cameras=t}}class OE extends Xb{constructor(){super(),this.isGroup=!0,this.type="Group"}}const ME={type:"move"};class LE{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return null===this._hand&&(this._hand=new OE,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return null===this._targetRay&&(this._targetRay=new OE,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new Ky,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new Ky),this._targetRay}getGripSpace(){return null===this._grip&&(this._grip=new OE,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new Ky,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new Ky),this._grip}dispatchEvent(t){return null!==this._targetRay&&this._targetRay.dispatchEvent(t),null!==this._grip&&this._grip.dispatchEvent(t),null!==this._hand&&this._hand.dispatchEvent(t),this}connect(t){if(t&&t.hand){const e=this._hand;if(e)for(const n of t.hand.values())this._getHandJoint(e,n)}return this.dispatchEvent({type:"connected",data:t}),this}disconnect(t){return this.dispatchEvent({type:"disconnected",data:t}),null!==this._targetRay&&(this._targetRay.visible=!1),null!==this._grip&&(this._grip.visible=!1),null!==this._hand&&(this._hand.visible=!1),this}update(t,e,n){let r=null,i=null,o=null;const a=this._targetRay,s=this._grip,l=this._hand;if(t&&"visible-blurred"!==e.session.visibilityState){if(l&&t.hand){o=!0;for(const r of t.hand.values()){const t=e.getJointPose(r,n),i=this._getHandJoint(l,r);null!==t&&(i.matrix.fromArray(t.transform.matrix),i.matrix.decompose(i.position,i.rotation,i.scale),i.jointRadius=t.radius),i.visible=null!==t}const r=l.joints["index-finger-tip"],i=l.joints["thumb-tip"],a=r.position.distanceTo(i.position),s=.02,u=.005;l.inputState.pinching&&a>s+u?(l.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:t.handedness,target:this})):!l.inputState.pinching&&a<=s-u&&(l.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:t.handedness,target:this}))}else null!==s&&t.gripSpace&&(i=e.getPose(t.gripSpace,n),null!==i&&(s.matrix.fromArray(i.transform.matrix),s.matrix.decompose(s.position,s.rotation,s.scale),i.linearVelocity?(s.hasLinearVelocity=!0,s.linearVelocity.copy(i.linearVelocity)):s.hasLinearVelocity=!1,i.angularVelocity?(s.hasAngularVelocity=!0,s.angularVelocity.copy(i.angularVelocity)):s.hasAngularVelocity=!1));null!==a&&(r=e.getPose(t.targetRaySpace,n),null===r&&null!==i&&(r=i),null!==r&&(a.matrix.fromArray(r.transform.matrix),a.matrix.decompose(a.position,a.rotation,a.scale),r.linearVelocity?(a.hasLinearVelocity=!0,a.linearVelocity.copy(r.linearVelocity)):a.hasLinearVelocity=!1,r.angularVelocity?(a.hasAngularVelocity=!0,a.angularVelocity.copy(r.angularVelocity)):a.hasAngularVelocity=!1,this.dispatchEvent(ME)))}return null!==a&&(a.visible=null!==r),null!==s&&(s.visible=null!==i),null!==l&&(l.visible=null!==o),this}_getHandJoint(t,e){if(void 0===t.joints[e.jointName]){const n=new OE;n.matrixAutoUpdate=!1,n.visible=!1,t.joints[e.jointName]=n,t.add(n)}return t.joints[e.jointName]}}class DE extends Gy{constructor(t,e,n,r,i,o,a,s,l,u){if((u=void 0!==u?u:ov)!==ov&&u!==av)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");void 0===n&&u===ov&&(n=Kg),void 0===n&&u===av&&(n=tv),super(null,r,i,o,a,s,u,n,l),this.isDepthTexture=!0,this.image={width:t,height:e},this.magFilter=void 0!==a?a:jg,this.minFilter=void 0!==s?s:jg,this.flipY=!1,this.generateMipmaps=!1}}class NE extends sy{constructor(t,e){super();const n=this;let r=null,i=1,o=null,a="local-floor",s=1,l=null,u=null,c=null,d=null,f=null,h=null;const p=e.getContextAttributes();let m=null,g=null;const v=[],y=[],b=new Set,_=new Map,w=new W_;w.layers.enable(1),w.viewport=new Hy;const A=new W_;A.layers.enable(2),A.viewport=new Hy;const E=[w,A],x=new RE;x.layers.enable(1),x.layers.enable(2);let S=null,T=null;function C(t){const e=y.indexOf(t.inputSource);if(-1===e)return;const n=v[e];void 0!==n&&n.dispatchEvent({type:t.type,data:t.inputSource})}function I(){r.removeEventListener("select",C),r.removeEventListener("selectstart",C),r.removeEventListener("selectend",C),r.removeEventListener("squeeze",C),r.removeEventListener("squeezestart",C),r.removeEventListener("squeezeend",C),r.removeEventListener("end",I),r.removeEventListener("inputsourceschange",k);for(let t=0;t<v.length;t++){const e=y[t];null!==e&&(y[t]=null,v[t].disconnect(e))}S=null,T=null,t.setRenderTarget(m),f=null,d=null,c=null,r=null,g=null,L.stop(),n.isPresenting=!1,n.dispatchEvent({type:"sessionend"})}function k(t){for(let e=0;e<t.removed.length;e++){const n=t.removed[e],r=y.indexOf(n);r>=0&&(y[r]=null,v[r].disconnect(n))}for(let e=0;e<t.added.length;e++){const n=t.added[e];let r=y.indexOf(n);if(-1===r){for(let t=0;t<v.length;t++){if(t>=y.length){y.push(n),r=t;break}if(null===y[t]){y[t]=n,r=t;break}}if(-1===r)break}const i=v[r];i&&i.connect(n)}}this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(t){let e=v[t];return void 0===e&&(e=new LE,v[t]=e),e.getTargetRaySpace()},this.getControllerGrip=function(t){let e=v[t];return void 0===e&&(e=new LE,v[t]=e),e.getGripSpace()},this.getHand=function(t){let e=v[t];return void 0===e&&(e=new LE,v[t]=e),e.getHandSpace()},this.setFramebufferScaleFactor=function(t){i=t,!0===n.isPresenting&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(t){a=t,!0===n.isPresenting&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return l||o},this.setReferenceSpace=function(t){l=t},this.getBaseLayer=function(){return null!==d?d:f},this.getBinding=function(){return c},this.getFrame=function(){return h},this.getSession=function(){return r},this.setSession=async function(u){if(r=u,null!==r){if(m=t.getRenderTarget(),r.addEventListener("select",C),r.addEventListener("selectstart",C),r.addEventListener("selectend",C),r.addEventListener("squeeze",C),r.addEventListener("squeezestart",C),r.addEventListener("squeezeend",C),r.addEventListener("end",I),r.addEventListener("inputsourceschange",k),!0!==p.xrCompatible&&await e.makeXRCompatible(),void 0===r.renderState.layers||!1===t.capabilities.isWebGL2){const n={antialias:void 0!==r.renderState.layers||p.antialias,alpha:p.alpha,depth:p.depth,stencil:p.stencil,framebufferScaleFactor:i};f=new XRWebGLLayer(r,e,n),r.updateRenderState({baseLayer:f}),g=new Vy(f.framebufferWidth,f.framebufferHeight,{format:nv,type:Hg,encoding:t.outputEncoding,stencilBuffer:p.stencil})}else{let n=null,o=null,a=null;p.depth&&(a=p.stencil?35056:33190,n=p.stencil?av:ov,o=p.stencil?tv:Kg);const s={colorFormat:32856,depthFormat:a,scaleFactor:i};c=new XRWebGLBinding(r,e),d=c.createProjectionLayer(s),r.updateRenderState({layers:[d]}),g=new Vy(d.textureWidth,d.textureHeight,{format:nv,type:Hg,depthTexture:new DE(d.textureWidth,d.textureHeight,o,void 0,void 0,void 0,void 0,void 0,void 0,n),stencilBuffer:p.stencil,encoding:t.outputEncoding,samples:p.antialias?4:0});t.properties.get(g).__ignoreDepthValues=d.ignoreDepthValues}g.isXRRenderTarget=!0,this.setFoveation(s),l=null,o=await r.requestReferenceSpace(a),L.setContext(r),L.start(),n.isPresenting=!0,n.dispatchEvent({type:"sessionstart"})}};const P=new Ky,R=new Ky;function O(t,e){null===e?t.matrixWorld.copy(t.matrix):t.matrixWorld.multiplyMatrices(e.matrixWorld,t.matrix),t.matrixWorldInverse.copy(t.matrixWorld).invert()}this.updateCamera=function(t){if(null===r)return;x.near=A.near=w.near=t.near,x.far=A.far=w.far=t.far,S===x.near&&T===x.far||(r.updateRenderState({depthNear:x.near,depthFar:x.far}),S=x.near,T=x.far);const e=t.parent,n=x.cameras;O(x,e);for(let t=0;t<n.length;t++)O(n[t],e);x.matrixWorld.decompose(x.position,x.quaternion,x.scale),t.matrix.copy(x.matrix),t.matrix.decompose(t.position,t.quaternion,t.scale);const i=t.children;for(let t=0,e=i.length;t<e;t++)i[t].updateMatrixWorld(!0);2===n.length?function(t,e,n){P.setFromMatrixPosition(e.matrixWorld),R.setFromMatrixPosition(n.matrixWorld);const r=P.distanceTo(R),i=e.projectionMatrix.elements,o=n.projectionMatrix.elements,a=i[14]/(i[10]-1),s=i[14]/(i[10]+1),l=(i[9]+1)/i[5],u=(i[9]-1)/i[5],c=(i[8]-1)/i[0],d=(o[8]+1)/o[0],f=a*c,h=a*d,p=r/(-c+d),m=p*-c;e.matrixWorld.decompose(t.position,t.quaternion,t.scale),t.translateX(m),t.translateZ(p),t.matrixWorld.compose(t.position,t.quaternion,t.scale),t.matrixWorldInverse.copy(t.matrixWorld).invert();const g=a+p,v=s+p,y=f-m,b=h+(r-m),_=l*s/v*g,w=u*s/v*g;t.projectionMatrix.makePerspective(y,b,_,w,g,v)}(x,w,A):x.projectionMatrix.copy(w.projectionMatrix)},this.getCamera=function(){return x},this.getFoveation=function(){if(null!==d||null!==f)return s},this.setFoveation=function(t){s=t,null!==d&&(d.fixedFoveation=t),null!==f&&void 0!==f.fixedFoveation&&(f.fixedFoveation=t)},this.getPlanes=function(){return b};let M=null;const L=new ow;L.setAnimationLoop((function(e,r){if(u=r.getViewerPose(l||o),h=r,null!==u){const e=u.views;null!==f&&(t.setRenderTargetFramebuffer(g,f.framebuffer),t.setRenderTarget(g));let n=!1;e.length!==x.cameras.length&&(x.cameras.length=0,n=!0);for(let r=0;r<e.length;r++){const i=e[r];let o=null;if(null!==f)o=f.getViewport(i);else{const e=c.getViewSubImage(d,i);o=e.viewport,0===r&&(t.setRenderTargetTextures(g,e.colorTexture,d.ignoreDepthValues?void 0:e.depthStencilTexture),t.setRenderTarget(g))}let a=E[r];void 0===a&&(a=new W_,a.layers.enable(r),a.viewport=new Hy,E[r]=a),a.matrix.fromArray(i.transform.matrix),a.projectionMatrix.fromArray(i.projectionMatrix),a.viewport.set(o.x,o.y,o.width,o.height),0===r&&x.matrix.copy(a.matrix),!0===n&&x.cameras.push(a)}}for(let t=0;t<v.length;t++){const e=y[t],n=v[t];null!==e&&void 0!==n&&n.update(e,r,l||o)}if(M&&M(e,r),r.detectedPlanes){n.dispatchEvent({type:"planesdetected",data:r.detectedPlanes});let t=null;for(const e of b)r.detectedPlanes.has(e)||(null===t&&(t=[]),t.push(e));if(null!==t)for(const e of t)b.delete(e),_.delete(e),n.dispatchEvent({type:"planeremoved",data:e});for(const t of r.detectedPlanes)if(b.has(t)){const e=_.get(t);t.lastChangedTime>e&&(_.set(t,t.lastChangedTime),n.dispatchEvent({type:"planechanged",data:t}))}else b.add(t),_.set(t,r.lastChangedTime),n.dispatchEvent({type:"planeadded",data:t})}h=null})),this.setAnimationLoop=function(t){M=t},this.dispose=function(){}}}function BE(t,e){function n(n,r){n.opacity.value=r.opacity,r.color&&n.diffuse.value.copy(r.color),r.emissive&&n.emissive.value.copy(r.emissive).multiplyScalar(r.emissiveIntensity),r.map&&(n.map.value=r.map),r.alphaMap&&(n.alphaMap.value=r.alphaMap),r.bumpMap&&(n.bumpMap.value=r.bumpMap,n.bumpScale.value=r.bumpScale,r.side===Gm&&(n.bumpScale.value*=-1)),r.displacementMap&&(n.displacementMap.value=r.displacementMap,n.displacementScale.value=r.displacementScale,n.displacementBias.value=r.displacementBias),r.emissiveMap&&(n.emissiveMap.value=r.emissiveMap),r.normalMap&&(n.normalMap.value=r.normalMap,n.normalScale.value.copy(r.normalScale),r.side===Gm&&n.normalScale.value.negate()),r.specularMap&&(n.specularMap.value=r.specularMap),r.alphaTest>0&&(n.alphaTest.value=r.alphaTest);const i=e.get(r).envMap;if(i&&(n.envMap.value=i,n.flipEnvMap.value=i.isCubeTexture&&!1===i.isRenderTargetTexture?-1:1,n.reflectivity.value=r.reflectivity,n.ior.value=r.ior,n.refractionRatio.value=r.refractionRatio),r.lightMap){n.lightMap.value=r.lightMap;const e=!0!==t.physicallyCorrectLights?Math.PI:1;n.lightMapIntensity.value=r.lightMapIntensity*e}let o,a;r.aoMap&&(n.aoMap.value=r.aoMap,n.aoMapIntensity.value=r.aoMapIntensity),r.map?o=r.map:r.specularMap?o=r.specularMap:r.displacementMap?o=r.displacementMap:r.normalMap?o=r.normalMap:r.bumpMap?o=r.bumpMap:r.roughnessMap?o=r.roughnessMap:r.metalnessMap?o=r.metalnessMap:r.alphaMap?o=r.alphaMap:r.emissiveMap?o=r.emissiveMap:r.clearcoatMap?o=r.clearcoatMap:r.clearcoatNormalMap?o=r.clearcoatNormalMap:r.clearcoatRoughnessMap?o=r.clearcoatRoughnessMap:r.iridescenceMap?o=r.iridescenceMap:r.iridescenceThicknessMap?o=r.iridescenceThicknessMap:r.specularIntensityMap?o=r.specularIntensityMap:r.specularColorMap?o=r.specularColorMap:r.transmissionMap?o=r.transmissionMap:r.thicknessMap?o=r.thicknessMap:r.sheenColorMap?o=r.sheenColorMap:r.sheenRoughnessMap&&(o=r.sheenRoughnessMap),void 0!==o&&(o.isWebGLRenderTarget&&(o=o.texture),!0===o.matrixAutoUpdate&&o.updateMatrix(),n.uvTransform.value.copy(o.matrix)),r.aoMap?a=r.aoMap:r.lightMap&&(a=r.lightMap),void 0!==a&&(a.isWebGLRenderTarget&&(a=a.texture),!0===a.matrixAutoUpdate&&a.updateMatrix(),n.uv2Transform.value.copy(a.matrix))}return{refreshFogUniforms:function(e,n){n.color.getRGB(e.fogColor.value,G_(t)),n.isFog?(e.fogNear.value=n.near,e.fogFar.value=n.far):n.isFogExp2&&(e.fogDensity.value=n.density)},refreshMaterialUniforms:function(t,r,i,o,a){r.isMeshBasicMaterial||r.isMeshLambertMaterial?n(t,r):r.isMeshToonMaterial?(n(t,r),function(t,e){e.gradientMap&&(t.gradientMap.value=e.gradientMap)}(t,r)):r.isMeshPhongMaterial?(n(t,r),function(t,e){t.specular.value.copy(e.specular),t.shininess.value=Math.max(e.shininess,1e-4)}(t,r)):r.isMeshStandardMaterial?(n(t,r),function(t,n){t.roughness.value=n.roughness,t.metalness.value=n.metalness,n.roughnessMap&&(t.roughnessMap.value=n.roughnessMap);n.metalnessMap&&(t.metalnessMap.value=n.metalnessMap);const r=e.get(n).envMap;r&&(t.envMapIntensity.value=n.envMapIntensity)}(t,r),r.isMeshPhysicalMaterial&&function(t,e,n){t.ior.value=e.ior,e.sheen>0&&(t.sheenColor.value.copy(e.sheenColor).multiplyScalar(e.sheen),t.sheenRoughness.value=e.sheenRoughness,e.sheenColorMap&&(t.sheenColorMap.value=e.sheenColorMap),e.sheenRoughnessMap&&(t.sheenRoughnessMap.value=e.sheenRoughnessMap));e.clearcoat>0&&(t.clearcoat.value=e.clearcoat,t.clearcoatRoughness.value=e.clearcoatRoughness,e.clearcoatMap&&(t.clearcoatMap.value=e.clearcoatMap),e.clearcoatRoughnessMap&&(t.clearcoatRoughnessMap.value=e.clearcoatRoughnessMap),e.clearcoatNormalMap&&(t.clearcoatNormalScale.value.copy(e.clearcoatNormalScale),t.clearcoatNormalMap.value=e.clearcoatNormalMap,e.side===Gm&&t.clearcoatNormalScale.value.negate()));e.iridescence>0&&(t.iridescence.value=e.iridescence,t.iridescenceIOR.value=e.iridescenceIOR,t.iridescenceThicknessMinimum.value=e.iridescenceThicknessRange[0],t.iridescenceThicknessMaximum.value=e.iridescenceThicknessRange[1],e.iridescenceMap&&(t.iridescenceMap.value=e.iridescenceMap),e.iridescenceThicknessMap&&(t.iridescenceThicknessMap.value=e.iridescenceThicknessMap));e.transmission>0&&(t.transmission.value=e.transmission,t.transmissionSamplerMap.value=n.texture,t.transmissionSamplerSize.value.set(n.width,n.height),e.transmissionMap&&(t.transmissionMap.value=e.transmissionMap),t.thickness.value=e.thickness,e.thicknessMap&&(t.thicknessMap.value=e.thicknessMap),t.attenuationDistance.value=e.attenuationDistance,t.attenuationColor.value.copy(e.attenuationColor));t.specularIntensity.value=e.specularIntensity,t.specularColor.value.copy(e.specularColor),e.specularIntensityMap&&(t.specularIntensityMap.value=e.specularIntensityMap);e.specularColorMap&&(t.specularColorMap.value=e.specularColorMap)}(t,r,a)):r.isMeshMatcapMaterial?(n(t,r),function(t,e){e.matcap&&(t.matcap.value=e.matcap)}(t,r)):r.isMeshDepthMaterial?n(t,r):r.isMeshDistanceMaterial?(n(t,r),function(t,e){t.referencePosition.value.copy(e.referencePosition),t.nearDistance.value=e.nearDistance,t.farDistance.value=e.farDistance}(t,r)):r.isMeshNormalMaterial?n(t,r):r.isLineBasicMaterial?(function(t,e){t.diffuse.value.copy(e.color),t.opacity.value=e.opacity}(t,r),r.isLineDashedMaterial&&function(t,e){t.dashSize.value=e.dashSize,t.totalSize.value=e.dashSize+e.gapSize,t.scale.value=e.scale}(t,r)):r.isPointsMaterial?function(t,e,n,r){t.diffuse.value.copy(e.color),t.opacity.value=e.opacity,t.size.value=e.size*n,t.scale.value=.5*r,e.map&&(t.map.value=e.map);e.alphaMap&&(t.alphaMap.value=e.alphaMap);e.alphaTest>0&&(t.alphaTest.value=e.alphaTest);let i;e.map?i=e.map:e.alphaMap&&(i=e.alphaMap);void 0!==i&&(!0===i.matrixAutoUpdate&&i.updateMatrix(),t.uvTransform.value.copy(i.matrix))}(t,r,i,o):r.isSpriteMaterial?function(t,e){t.diffuse.value.copy(e.color),t.opacity.value=e.opacity,t.rotation.value=e.rotation,e.map&&(t.map.value=e.map);e.alphaMap&&(t.alphaMap.value=e.alphaMap);e.alphaTest>0&&(t.alphaTest.value=e.alphaTest);let n;e.map?n=e.map:e.alphaMap&&(n=e.alphaMap);void 0!==n&&(!0===n.matrixAutoUpdate&&n.updateMatrix(),t.uvTransform.value.copy(n.matrix))}(t,r):r.isShadowMaterial?(t.color.value.copy(r.color),t.opacity.value=r.opacity):r.isShaderMaterial&&(r.uniformsNeedUpdate=!1)}}}function jE(t,e,n,r){let i={},o={},a=[];const s=n.isWebGL2?t.getParameter(35375):0;function l(t,e,n){const r=t.value;if(void 0===n[e]){if("number"==typeof r)n[e]=r;else{const t=Array.isArray(r)?r:[r],i=[];for(let e=0;e<t.length;e++)i.push(t[e].clone());n[e]=i}return!0}if("number"==typeof r){if(n[e]!==r)return n[e]=r,!0}else{const t=Array.isArray(n[e])?n[e]:[n[e]],i=Array.isArray(r)?r:[r];for(let e=0;e<t.length;e++){const n=t[e];if(!1===n.equals(i[e]))return n.copy(i[e]),!0}}return!1}function u(t){const e={boundary:0,storage:0};return"number"==typeof t?(e.boundary=4,e.storage=4):t.isVector2?(e.boundary=8,e.storage=8):t.isVector3||t.isColor?(e.boundary=16,e.storage=12):t.isVector4?(e.boundary=16,e.storage=16):t.isMatrix3?(e.boundary=48,e.storage=48):t.isMatrix4?(e.boundary=64,e.storage=64):t.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",t),e}function c(e){const n=e.target;n.removeEventListener("dispose",c);const r=a.indexOf(n.__bindingPointIndex);a.splice(r,1),t.deleteBuffer(i[n.id]),delete i[n.id],delete o[n.id]}return{bind:function(t,e){const n=e.program;r.uniformBlockBinding(t,n)},update:function(n,d){let f=i[n.id];void 0===f&&(!function(t){const e=t.uniforms;let n=0;const r=16;let i=0;for(let t=0,o=e.length;t<o;t++){const o=e[t],a={boundary:0,storage:0},s=Array.isArray(o.value)?o.value:[o.value];for(let t=0,e=s.length;t<e;t++){const e=u(s[t]);a.boundary+=e.boundary,a.storage+=e.storage}if(o.__data=new Float32Array(a.storage/Float32Array.BYTES_PER_ELEMENT),o.__offset=n,t>0){i=n%r;0!==i&&r-i-a.boundary<0&&(n+=r-i,o.__offset=n)}n+=a.storage}i=n%r,i>0&&(n+=r-i);t.__size=n,t.__cache={}}(n),f=function(e){const n=function(){for(let t=0;t<s;t++)if(-1===a.indexOf(t))return a.push(t),t;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}();e.__bindingPointIndex=n;const r=t.createBuffer(),i=e.__size,o=e.usage;return t.bindBuffer(35345,r),t.bufferData(35345,i,o),t.bindBuffer(35345,null),t.bindBufferBase(35345,n,r),r}(n),i[n.id]=f,n.addEventListener("dispose",c));const h=d.program;r.updateUBOMapping(n,h);const p=e.render.frame;o[n.id]!==p&&(!function(e){const n=i[e.id],r=e.uniforms,o=e.__cache;t.bindBuffer(35345,n);for(let e=0,n=r.length;e<n;e++){const n=r[e];if(!0===l(n,e,o)){const e=n.__offset,r=Array.isArray(n.value)?n.value:[n.value];let i=0;for(let o=0;o<r.length;o++){const a=r[o],s=u(a);"number"==typeof a?(n.__data[0]=a,t.bufferSubData(35345,e+i,n.__data)):a.isMatrix3?(n.__data[0]=a.elements[0],n.__data[1]=a.elements[1],n.__data[2]=a.elements[2],n.__data[3]=a.elements[0],n.__data[4]=a.elements[3],n.__data[5]=a.elements[4],n.__data[6]=a.elements[5],n.__data[7]=a.elements[0],n.__data[8]=a.elements[6],n.__data[9]=a.elements[7],n.__data[10]=a.elements[8],n.__data[11]=a.elements[0]):(a.toArray(n.__data,i),i+=s.storage/Float32Array.BYTES_PER_ELEMENT)}t.bufferSubData(35345,e,n.__data)}}t.bindBuffer(35345,null)}(n),o[n.id]=p)},dispose:function(){for(const e in i)t.deleteBuffer(i[e]);a=[],i={},o={}}}}function zE(t={}){this.isWebGLRenderer=!0;const e=void 0!==t.canvas?t.canvas:function(){const t=Ty("canvas");return t.style.display="block",t}(),n=void 0!==t.context?t.context:null,r=void 0===t.depth||t.depth,i=void 0===t.stencil||t.stencil,o=void 0!==t.antialias&&t.antialias,a=void 0===t.premultipliedAlpha||t.premultipliedAlpha,s=void 0!==t.preserveDrawingBuffer&&t.preserveDrawingBuffer,l=void 0!==t.powerPreference?t.powerPreference:"default",u=void 0!==t.failIfMajorPerformanceCaveat&&t.failIfMajorPerformanceCaveat;let c;c=null!==n?n.getContextAttributes().alpha:void 0!==t.alpha&&t.alpha;let d=null,f=null;const h=[],p=[];this.domElement=e,this.debug={checkShaderErrors:!0},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.outputEncoding=Kv,this.physicallyCorrectLights=!1,this.toneMapping=xg,this.toneMappingExposure=1;const m=this;let g=!1,v=0,y=0,b=null,_=-1,w=null;const A=new Hy,E=new Hy;let x=null,S=e.width,T=e.height,C=1,I=null,k=null;const P=new Hy(0,0,S,T),R=new Hy(0,0,S,T);let O=!1;const M=new iw;let L=!1,D=!1,N=null;const B=new Sb,j=new Ay,z=new Ky,F={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};function U(){return null===b?C:1}let q,G,H,V,Q,W,Y,K,X,$,Z,J,tt,et,nt,rt,it,ot,at,st,lt,ut,ct,dt,ft=n;function ht(t,n){for(let r=0;r<t.length;r++){const i=t[r],o=e.getContext(i,n);if(null!==o)return o}return null}try{const t={alpha:!0,depth:r,stencil:i,antialias:o,premultipliedAlpha:a,preserveDrawingBuffer:s,powerPreference:l,failIfMajorPerformanceCaveat:u};if("setAttribute"in e&&e.setAttribute("data-engine",`three.js r${Im}`),e.addEventListener("webglcontextlost",gt,!1),e.addEventListener("webglcontextrestored",vt,!1),e.addEventListener("webglcontextcreationerror",yt,!1),null===ft){const e=["webgl2","webgl","experimental-webgl"];if(!0===m.isWebGL1Renderer&&e.shift(),ft=ht(e,t),null===ft)throw ht(e)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}void 0===ft.getShaderPrecisionFormat&&(ft.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(t){throw console.error("THREE.WebGLRenderer: "+t.message),t}function pt(){q=new Lw(ft),G=new mw(ft,q,t),q.init(G),ut=new PE(ft,q,G),H=new IE(ft,q,G),V=new Bw,Q=new fE,W=new kE(ft,q,H,Q,G,ut,V),Y=new vw(m),K=new Mw(m),X=new aw(ft,G),ct=new hw(ft,q,X,G),$=new Dw(ft,X,V,ct),Z=new Uw(ft,$,X,V),at=new Fw(ft,G,W),rt=new gw(Q),J=new dE(m,Y,K,q,G,ct,rt),tt=new BE(m,Q),et=new gE,nt=new AE(q,G),ot=new fw(m,Y,K,H,Z,c,a),it=new CE(m,Z,G),dt=new jE(ft,V,G,H),st=new pw(ft,q,V,G),lt=new Nw(ft,q,V,G),V.programs=J.programs,m.capabilities=G,m.extensions=q,m.properties=Q,m.renderLists=et,m.shadowMap=it,m.state=H,m.info=V}pt();const mt=new NE(m,ft);function gt(t){t.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),g=!0}function vt(){console.log("THREE.WebGLRenderer: Context Restored."),g=!1;const t=V.autoReset,e=it.enabled,n=it.autoUpdate,r=it.needsUpdate,i=it.type;pt(),V.autoReset=t,it.enabled=e,it.autoUpdate=n,it.needsUpdate=r,it.type=i}function yt(t){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",t.statusMessage)}function bt(t){const e=t.target;e.removeEventListener("dispose",bt),function(t){(function(t){const e=Q.get(t).programs;void 0!==e&&(e.forEach((function(t){J.releaseProgram(t)})),t.isShaderMaterial&&J.releaseShaderCache(t))})(t),Q.remove(t)}(e)}this.xr=mt,this.getContext=function(){return ft},this.getContextAttributes=function(){return ft.getContextAttributes()},this.forceContextLoss=function(){const t=q.get("WEBGL_lose_context");t&&t.loseContext()},this.forceContextRestore=function(){const t=q.get("WEBGL_lose_context");t&&t.restoreContext()},this.getPixelRatio=function(){return C},this.setPixelRatio=function(t){void 0!==t&&(C=t,this.setSize(S,T,!1))},this.getSize=function(t){return t.set(S,T)},this.setSize=function(t,n,r){mt.isPresenting?console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting."):(S=t,T=n,e.width=Math.floor(t*C),e.height=Math.floor(n*C),!1!==r&&(e.style.width=t+"px",e.style.height=n+"px"),this.setViewport(0,0,t,n))},this.getDrawingBufferSize=function(t){return t.set(S*C,T*C).floor()},this.setDrawingBufferSize=function(t,n,r){S=t,T=n,C=r,e.width=Math.floor(t*r),e.height=Math.floor(n*r),this.setViewport(0,0,t,n)},this.getCurrentViewport=function(t){return t.copy(A)},this.getViewport=function(t){return t.copy(P)},this.setViewport=function(t,e,n,r){t.isVector4?P.set(t.x,t.y,t.z,t.w):P.set(t,e,n,r),H.viewport(A.copy(P).multiplyScalar(C).floor())},this.getScissor=function(t){return t.copy(R)},this.setScissor=function(t,e,n,r){t.isVector4?R.set(t.x,t.y,t.z,t.w):R.set(t,e,n,r),H.scissor(E.copy(R).multiplyScalar(C).floor())},this.getScissorTest=function(){return O},this.setScissorTest=function(t){H.setScissorTest(O=t)},this.setOpaqueSort=function(t){I=t},this.setTransparentSort=function(t){k=t},this.getClearColor=function(t){return t.copy(ot.getClearColor())},this.setClearColor=function(){ot.setClearColor.apply(ot,arguments)},this.getClearAlpha=function(){return ot.getClearAlpha()},this.setClearAlpha=function(){ot.setClearAlpha.apply(ot,arguments)},this.clear=function(t=!0,e=!0,n=!0){let r=0;t&&(r|=16384),e&&(r|=256),n&&(r|=1024),ft.clear(r)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){e.removeEventListener("webglcontextlost",gt,!1),e.removeEventListener("webglcontextrestored",vt,!1),e.removeEventListener("webglcontextcreationerror",yt,!1),et.dispose(),nt.dispose(),Q.dispose(),Y.dispose(),K.dispose(),Z.dispose(),ct.dispose(),dt.dispose(),J.dispose(),mt.dispose(),mt.removeEventListener("sessionstart",wt),mt.removeEventListener("sessionend",At),N&&(N.dispose(),N=null),Et.stop()},this.renderBufferDirect=function(t,e,n,r,i,o){null===e&&(e=F);const a=i.isMesh&&i.matrixWorld.determinant()<0,s=function(t,e,n,r,i){!0!==e.isScene&&(e=F);W.resetTextureUnits();const o=e.fog,a=r.isMeshStandardMaterial?e.environment:null,s=null===b?m.outputEncoding:!0===b.isXRRenderTarget?b.texture.encoding:Kv,l=(r.isMeshStandardMaterial?K:Y).get(r.envMap||a),u=!0===r.vertexColors&&!!n.attributes.color&&4===n.attributes.color.itemSize,c=!!r.normalMap&&!!n.attributes.tangent,d=!!n.morphAttributes.position,h=!!n.morphAttributes.normal,p=!!n.morphAttributes.color,g=r.toneMapped?m.toneMapping:xg,v=n.morphAttributes.position||n.morphAttributes.normal||n.morphAttributes.color,y=void 0!==v?v.length:0,A=Q.get(r),E=f.state.lights;if(!0===L&&(!0===D||t!==w)){const e=t===w&&r.id===_;rt.setState(r,t,e)}let x=!1;r.version===A.__version?A.needsLights&&A.lightsStateVersion!==E.state.version||A.outputEncoding!==s||i.isInstancedMesh&&!1===A.instancing?x=!0:i.isInstancedMesh||!0!==A.instancing?i.isSkinnedMesh&&!1===A.skinning?x=!0:i.isSkinnedMesh||!0!==A.skinning?A.envMap!==l||!0===r.fog&&A.fog!==o?x=!0:void 0===A.numClippingPlanes||A.numClippingPlanes===rt.numPlanes&&A.numIntersection===rt.numIntersection?(A.vertexAlphas!==u||A.vertexTangents!==c||A.morphTargets!==d||A.morphNormals!==h||A.morphColors!==p||A.toneMapping!==g||!0===G.isWebGL2&&A.morphTargetsCount!==y)&&(x=!0):x=!0:x=!0:x=!0:(x=!0,A.__version=r.version);let S=A.currentProgram;!0===x&&(S=It(r,e,i));let I=!1,k=!1,P=!1;const R=S.getUniforms(),O=A.uniforms;H.useProgram(S.program)&&(I=!0,k=!0,P=!0);r.id!==_&&(_=r.id,k=!0);if(I||w!==t){if(R.setValue(ft,"projectionMatrix",t.projectionMatrix),G.logarithmicDepthBuffer&&R.setValue(ft,"logDepthBufFC",2/(Math.log(t.far+1)/Math.LN2)),w!==t&&(w=t,k=!0,P=!0),r.isShaderMaterial||r.isMeshPhongMaterial||r.isMeshToonMaterial||r.isMeshStandardMaterial||r.envMap){const e=R.map.cameraPosition;void 0!==e&&e.setValue(ft,z.setFromMatrixPosition(t.matrixWorld))}(r.isMeshPhongMaterial||r.isMeshToonMaterial||r.isMeshLambertMaterial||r.isMeshBasicMaterial||r.isMeshStandardMaterial||r.isShaderMaterial)&&R.setValue(ft,"isOrthographic",!0===t.isOrthographicCamera),(r.isMeshPhongMaterial||r.isMeshToonMaterial||r.isMeshLambertMaterial||r.isMeshBasicMaterial||r.isMeshStandardMaterial||r.isShaderMaterial||r.isShadowMaterial||i.isSkinnedMesh)&&R.setValue(ft,"viewMatrix",t.matrixWorldInverse)}if(i.isSkinnedMesh){R.setOptional(ft,i,"bindMatrix"),R.setOptional(ft,i,"bindMatrixInverse");const t=i.skeleton;t&&(G.floatVertexTextures?(null===t.boneTexture&&t.computeBoneTexture(),R.setValue(ft,"boneTexture",t.boneTexture,W),R.setValue(ft,"boneTextureSize",t.boneTextureSize)):console.warn("THREE.WebGLRenderer: SkinnedMesh can only be used with WebGL 2. With WebGL 1 OES_texture_float and vertex textures support is required."))}const M=n.morphAttributes;(void 0!==M.position||void 0!==M.normal||void 0!==M.color&&!0===G.isWebGL2)&&at.update(i,n,r,S);(k||A.receiveShadow!==i.receiveShadow)&&(A.receiveShadow=i.receiveShadow,R.setValue(ft,"receiveShadow",i.receiveShadow));r.isMeshGouraudMaterial&&null!==r.envMap&&(O.envMap.value=l,O.flipEnvMap.value=l.isCubeTexture&&!1===l.isRenderTargetTexture?-1:1);k&&(R.setValue(ft,"toneMappingExposure",m.toneMappingExposure),A.needsLights&&(j=P,(B=O).ambientLightColor.needsUpdate=j,B.lightProbe.needsUpdate=j,B.directionalLights.needsUpdate=j,B.directionalLightShadows.needsUpdate=j,B.pointLights.needsUpdate=j,B.pointLightShadows.needsUpdate=j,B.spotLights.needsUpdate=j,B.spotLightShadows.needsUpdate=j,B.rectAreaLights.needsUpdate=j,B.hemisphereLights.needsUpdate=j),o&&!0===r.fog&&tt.refreshFogUniforms(O,o),tt.refreshMaterialUniforms(O,r,C,T,N),VA.upload(ft,A.uniformsList,O,W));var B,j;r.isShaderMaterial&&!0===r.uniformsNeedUpdate&&(VA.upload(ft,A.uniformsList,O,W),r.uniformsNeedUpdate=!1);r.isSpriteMaterial&&R.setValue(ft,"center",i.center);if(R.setValue(ft,"modelViewMatrix",i.modelViewMatrix),R.setValue(ft,"normalMatrix",i.normalMatrix),R.setValue(ft,"modelMatrix",i.matrixWorld),r.isShaderMaterial||r.isRawShaderMaterial){const t=r.uniformsGroups;for(let e=0,n=t.length;e<n;e++)if(G.isWebGL2){const n=t[e];dt.update(n,S),dt.bind(n,S)}else console.warn("THREE.WebGLRenderer: Uniform Buffer Objects can only be used with WebGL 2.")}return S}(t,e,n,r,i);H.setMaterial(r,a);let l=n.index,u=1;!0===r.wireframe&&(l=$.getWireframeAttribute(n),u=2);const c=n.drawRange,d=n.attributes.position;let h=c.start*u,p=(c.start+c.count)*u;null!==o&&(h=Math.max(h,o.start*u),p=Math.min(p,(o.start+o.count)*u)),null!==l?(h=Math.max(h,0),p=Math.min(p,l.count)):null!=d&&(h=Math.max(h,0),p=Math.min(p,d.count));const g=p-h;if(g<0||g===1/0)return;let v;ct.setup(i,r,s,n,l);let y=st;if(null!==l&&(v=X.get(l),y=lt,y.setIndex(v)),i.isMesh)!0===r.wireframe?(H.setLineWidth(r.wireframeLinewidth*U()),y.setMode(1)):y.setMode(4);else if(i.isLine){let t=r.linewidth;void 0===t&&(t=1),H.setLineWidth(t*U()),i.isLineSegments?y.setMode(1):i.isLineLoop?y.setMode(2):y.setMode(3)}else i.isPoints?y.setMode(0):i.isSprite&&y.setMode(4);if(i.isInstancedMesh)y.renderInstances(h,g,i.count);else if(n.isInstancedBufferGeometry){const t=void 0!==n._maxInstanceCount?n._maxInstanceCount:1/0,e=Math.min(n.instanceCount,t);y.renderInstances(h,g,e)}else y.render(h,g)},this.compile=function(t,e){function n(t,e,n){!0===t.transparent&&t.side===Hm&&!1===t.forceSinglePass?(t.side=Gm,t.needsUpdate=!0,It(t,e,n),t.side=qm,t.needsUpdate=!0,It(t,e,n),t.side=Hm):It(t,e,n)}f=nt.get(t),f.init(),p.push(f),t.traverseVisible((function(t){t.isLight&&t.layers.test(e.layers)&&(f.pushLight(t),t.castShadow&&f.pushShadow(t))})),f.setupLights(m.physicallyCorrectLights),t.traverse((function(e){const r=e.material;if(r)if(Array.isArray(r))for(let i=0;i<r.length;i++){n(r[i],t,e)}else n(r,t,e)})),p.pop(),f=null};let _t=null;function wt(){Et.stop()}function At(){Et.start()}const Et=new ow;function xt(t,e,n,r){if(!1===t.visible)return;if(t.layers.test(e.layers))if(t.isGroup)n=t.renderOrder;else if(t.isLOD)!0===t.autoUpdate&&t.update(e);else if(t.isLight)f.pushLight(t),t.castShadow&&f.pushShadow(t);else if(t.isSprite){if(!t.frustumCulled||M.intersectsSprite(t)){r&&z.setFromMatrixPosition(t.matrixWorld).applyMatrix4(B);const e=Z.update(t),i=t.material;i.visible&&d.push(t,e,i,n,z.z,null)}}else if((t.isMesh||t.isLine||t.isPoints)&&(t.isSkinnedMesh&&t.skeleton.frame!==V.render.frame&&(t.skeleton.update(),t.skeleton.frame=V.render.frame),!t.frustumCulled||M.intersectsObject(t))){r&&z.setFromMatrixPosition(t.matrixWorld).applyMatrix4(B);const e=Z.update(t),i=t.material;if(Array.isArray(i)){const r=e.groups;for(let o=0,a=r.length;o<a;o++){const a=r[o],s=i[a.materialIndex];s&&s.visible&&d.push(t,e,s,n,z.z,a)}}else i.visible&&d.push(t,e,i,n,z.z,null)}const i=t.children;for(let t=0,o=i.length;t<o;t++)xt(i[t],e,n,r)}function St(t,e,n,r){const i=t.opaque,a=t.transmissive,s=t.transparent;f.setupLightsView(n),!0===L&&rt.setGlobalState(m.clippingPlanes,n),a.length>0&&function(t,e,n){const r=G.isWebGL2;null===N&&(N=new Vy(1,1,{generateMipmaps:!0,type:q.has("EXT_color_buffer_half_float")?$g:Hg,minFilter:Gg,samples:r&&!0===o?4:0}));m.getDrawingBufferSize(j),r?N.setSize(j.x,j.y):N.setSize(yy(j.x),yy(j.y));const i=m.getRenderTarget();m.setRenderTarget(N),m.clear();const a=m.toneMapping;m.toneMapping=xg,Tt(t,e,n),m.toneMapping=a,W.updateMultisampleRenderTarget(N),W.updateRenderTargetMipmap(N),m.setRenderTarget(i)}(i,e,n),r&&H.viewport(A.copy(r)),i.length>0&&Tt(i,e,n),a.length>0&&Tt(a,e,n),s.length>0&&Tt(s,e,n),H.buffers.depth.setTest(!0),H.buffers.depth.setMask(!0),H.buffers.color.setMask(!0),H.setPolygonOffset(!1)}function Tt(t,e,n){const r=!0===e.isScene?e.overrideMaterial:null;for(let i=0,o=t.length;i<o;i++){const o=t[i],a=o.object,s=o.geometry,l=null===r?o.material:r,u=o.group;a.layers.test(n.layers)&&Ct(a,e,n,s,l,u)}}function Ct(t,e,n,r,i,o){t.onBeforeRender(m,e,n,r,i,o),t.modelViewMatrix.multiplyMatrices(n.matrixWorldInverse,t.matrixWorld),t.normalMatrix.getNormalMatrix(t.modelViewMatrix),i.onBeforeRender(m,e,n,r,t,o),!0===i.transparent&&i.side===Hm&&!1===i.forceSinglePass?(i.side=Gm,i.needsUpdate=!0,m.renderBufferDirect(n,e,r,i,t,o),i.side=qm,i.needsUpdate=!0,m.renderBufferDirect(n,e,r,i,t,o),i.side=Hm):m.renderBufferDirect(n,e,r,i,t,o),t.onAfterRender(m,e,n,r,i,o)}function It(t,e,n){!0!==e.isScene&&(e=F);const r=Q.get(t),i=f.state.lights,o=f.state.shadowsArray,a=i.state.version,s=J.getParameters(t,i.state,o,e,n),l=J.getProgramCacheKey(s);let u=r.programs;r.environment=t.isMeshStandardMaterial?e.environment:null,r.fog=e.fog,r.envMap=(t.isMeshStandardMaterial?K:Y).get(t.envMap||r.environment),void 0===u&&(t.addEventListener("dispose",bt),u=new Map,r.programs=u);let c=u.get(l);if(void 0!==c){if(r.currentProgram===c&&r.lightsStateVersion===a)return kt(t,s),c}else s.uniforms=J.getUniforms(t),t.onBuild(n,s,m),t.onBeforeCompile(s,m),c=J.acquireProgram(s,l),u.set(l,c),r.uniforms=s.uniforms;const d=r.uniforms;(t.isShaderMaterial||t.isRawShaderMaterial)&&!0!==t.clipping||(d.clippingPlanes=rt.uniform),kt(t,s),r.needsLights=function(t){return t.isMeshLambertMaterial||t.isMeshToonMaterial||t.isMeshPhongMaterial||t.isMeshStandardMaterial||t.isShadowMaterial||t.isShaderMaterial&&!0===t.lights}(t),r.lightsStateVersion=a,r.needsLights&&(d.ambientLightColor.value=i.state.ambient,d.lightProbe.value=i.state.probe,d.directionalLights.value=i.state.directional,d.directionalLightShadows.value=i.state.directionalShadow,d.spotLights.value=i.state.spot,d.spotLightShadows.value=i.state.spotShadow,d.rectAreaLights.value=i.state.rectArea,d.ltc_1.value=i.state.rectAreaLTC1,d.ltc_2.value=i.state.rectAreaLTC2,d.pointLights.value=i.state.point,d.pointLightShadows.value=i.state.pointShadow,d.hemisphereLights.value=i.state.hemi,d.directionalShadowMap.value=i.state.directionalShadowMap,d.directionalShadowMatrix.value=i.state.directionalShadowMatrix,d.spotShadowMap.value=i.state.spotShadowMap,d.spotLightMatrix.value=i.state.spotLightMatrix,d.spotLightMap.value=i.state.spotLightMap,d.pointShadowMap.value=i.state.pointShadowMap,d.pointShadowMatrix.value=i.state.pointShadowMatrix);const h=c.getUniforms(),p=VA.seqWithValue(h.seq,d);return r.currentProgram=c,r.uniformsList=p,c}function kt(t,e){const n=Q.get(t);n.outputEncoding=e.outputEncoding,n.instancing=e.instancing,n.skinning=e.skinning,n.morphTargets=e.morphTargets,n.morphNormals=e.morphNormals,n.morphColors=e.morphColors,n.morphTargetsCount=e.morphTargetsCount,n.numClippingPlanes=e.numClippingPlanes,n.numIntersection=e.numClipIntersection,n.vertexAlphas=e.vertexAlphas,n.vertexTangents=e.vertexTangents,n.toneMapping=e.toneMapping}Et.setAnimationLoop((function(t){_t&&_t(t)})),"undefined"!=typeof self&&Et.setContext(self),this.setAnimationLoop=function(t){_t=t,mt.setAnimationLoop(t),null===t?Et.stop():Et.start()},mt.addEventListener("sessionstart",wt),mt.addEventListener("sessionend",At),this.render=function(t,e){if(void 0!==e&&!0!==e.isCamera)return void console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");if(!0===g)return;!0===t.matrixWorldAutoUpdate&&t.updateMatrixWorld(),null===e.parent&&!0===e.matrixWorldAutoUpdate&&e.updateMatrixWorld(),!0===mt.enabled&&!0===mt.isPresenting&&(!0===mt.cameraAutoUpdate&&mt.updateCamera(e),e=mt.getCamera()),!0===t.isScene&&t.onBeforeRender(m,t,e,b),f=nt.get(t,p.length),f.init(),p.push(f),B.multiplyMatrices(e.projectionMatrix,e.matrixWorldInverse),M.setFromProjectionMatrix(B),D=this.localClippingEnabled,L=rt.init(this.clippingPlanes,D),d=et.get(t,h.length),d.init(),h.push(d),xt(t,e,0,m.sortObjects),d.finish(),!0===m.sortObjects&&d.sort(I,k),!0===L&&rt.beginShadows();const n=f.state.shadowsArray;if(it.render(n,t,e),!0===L&&rt.endShadows(),!0===this.info.autoReset&&this.info.reset(),ot.render(d,t),f.setupLights(m.physicallyCorrectLights),e.isArrayCamera){const n=e.cameras;for(let e=0,r=n.length;e<r;e++){const r=n[e];St(d,t,r,r.viewport)}}else St(d,t,e);null!==b&&(W.updateMultisampleRenderTarget(b),W.updateRenderTargetMipmap(b)),!0===t.isScene&&t.onAfterRender(m,t,e),ct.resetDefaultState(),_=-1,w=null,p.pop(),f=p.length>0?p[p.length-1]:null,h.pop(),d=h.length>0?h[h.length-1]:null},this.getActiveCubeFace=function(){return v},this.getActiveMipmapLevel=function(){return y},this.getRenderTarget=function(){return b},this.setRenderTargetTextures=function(t,e,n){Q.get(t.texture).__webglTexture=e,Q.get(t.depthTexture).__webglTexture=n;const r=Q.get(t);r.__hasExternalTextures=!0,r.__hasExternalTextures&&(r.__autoAllocateDepthBuffer=void 0===n,r.__autoAllocateDepthBuffer||!0===q.has("WEBGL_multisampled_render_to_texture")&&(console.warn("THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided"),r.__useRenderToTexture=!1))},this.setRenderTargetFramebuffer=function(t,e){const n=Q.get(t);n.__webglFramebuffer=e,n.__useDefaultFramebuffer=void 0===e},this.setRenderTarget=function(t,e=0,n=0){b=t,v=e,y=n;let r=!0,i=null,o=!1,a=!1;if(t){const n=Q.get(t);void 0!==n.__useDefaultFramebuffer?(H.bindFramebuffer(36160,null),r=!1):void 0===n.__webglFramebuffer?W.setupRenderTarget(t):n.__hasExternalTextures&&W.rebindTextures(t,Q.get(t.texture).__webglTexture,Q.get(t.depthTexture).__webglTexture);const s=t.texture;(s.isData3DTexture||s.isDataArrayTexture||s.isCompressedArrayTexture)&&(a=!0);const l=Q.get(t).__webglFramebuffer;t.isWebGLCubeRenderTarget?(i=l[e],o=!0):i=G.isWebGL2&&t.samples>0&&!1===W.useMultisampledRTT(t)?Q.get(t).__webglMultisampledFramebuffer:l,A.copy(t.viewport),E.copy(t.scissor),x=t.scissorTest}else A.copy(P).multiplyScalar(C).floor(),E.copy(R).multiplyScalar(C).floor(),x=O;if(H.bindFramebuffer(36160,i)&&G.drawBuffers&&r&&H.drawBuffers(t,i),H.viewport(A),H.scissor(E),H.setScissorTest(x),o){const r=Q.get(t.texture);ft.framebufferTexture2D(36160,36064,34069+e,r.__webglTexture,n)}else if(a){const r=Q.get(t.texture),i=e||0;ft.framebufferTextureLayer(36160,36064,r.__webglTexture,n||0,i)}_=-1},this.readRenderTargetPixels=function(t,e,n,r,i,o,a){if(!t||!t.isWebGLRenderTarget)return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");let s=Q.get(t).__webglFramebuffer;if(t.isWebGLCubeRenderTarget&&void 0!==a&&(s=s[a]),s){H.bindFramebuffer(36160,s);try{const a=t.texture,s=a.format,l=a.type;if(s!==nv&&ut.convert(s)!==ft.getParameter(35739))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");const u=l===$g&&(q.has("EXT_color_buffer_half_float")||G.isWebGL2&&q.has("EXT_color_buffer_float"));if(!(l===Hg||ut.convert(l)===ft.getParameter(35738)||l===Xg&&(G.isWebGL2||q.has("OES_texture_float")||q.has("WEBGL_color_buffer_float"))||u))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");e>=0&&e<=t.width-r&&n>=0&&n<=t.height-i&&ft.readPixels(e,n,r,i,ut.convert(s),ut.convert(l),o)}finally{const t=null!==b?Q.get(b).__webglFramebuffer:null;H.bindFramebuffer(36160,t)}}},this.copyFramebufferToTexture=function(t,e,n=0){const r=Math.pow(2,-n),i=Math.floor(e.image.width*r),o=Math.floor(e.image.height*r);W.setTexture2D(e,0),ft.copyTexSubImage2D(3553,n,0,0,t.x,t.y,i,o),H.unbindTexture()},this.copyTextureToTexture=function(t,e,n,r=0){const i=e.image.width,o=e.image.height,a=ut.convert(n.format),s=ut.convert(n.type);W.setTexture2D(n,0),ft.pixelStorei(37440,n.flipY),ft.pixelStorei(37441,n.premultiplyAlpha),ft.pixelStorei(3317,n.unpackAlignment),e.isDataTexture?ft.texSubImage2D(3553,r,t.x,t.y,i,o,a,s,e.image.data):e.isCompressedTexture?ft.compressedTexSubImage2D(3553,r,t.x,t.y,e.mipmaps[0].width,e.mipmaps[0].height,a,e.mipmaps[0].data):ft.texSubImage2D(3553,r,t.x,t.y,a,s,e.image),0===r&&n.generateMipmaps&&ft.generateMipmap(3553),H.unbindTexture()},this.copyTextureToTexture3D=function(t,e,n,r,i=0){if(m.isWebGL1Renderer)return void console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: can only be used with WebGL2.");const o=t.max.x-t.min.x+1,a=t.max.y-t.min.y+1,s=t.max.z-t.min.z+1,l=ut.convert(r.format),u=ut.convert(r.type);let c;if(r.isData3DTexture)W.setTexture3D(r,0),c=32879;else{if(!r.isDataArrayTexture)return void console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray.");W.setTexture2DArray(r,0),c=35866}ft.pixelStorei(37440,r.flipY),ft.pixelStorei(37441,r.premultiplyAlpha),ft.pixelStorei(3317,r.unpackAlignment);const d=ft.getParameter(3314),f=ft.getParameter(32878),h=ft.getParameter(3316),p=ft.getParameter(3315),g=ft.getParameter(32877),v=n.isCompressedTexture?n.mipmaps[0]:n.image;ft.pixelStorei(3314,v.width),ft.pixelStorei(32878,v.height),ft.pixelStorei(3316,t.min.x),ft.pixelStorei(3315,t.min.y),ft.pixelStorei(32877,t.min.z),n.isDataTexture||n.isData3DTexture?ft.texSubImage3D(c,i,e.x,e.y,e.z,o,a,s,l,u,v.data):n.isCompressedArrayTexture?(console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: untested support for compressed srcTexture."),ft.compressedTexSubImage3D(c,i,e.x,e.y,e.z,o,a,s,l,v.data)):ft.texSubImage3D(c,i,e.x,e.y,e.z,o,a,s,l,u,v),ft.pixelStorei(3314,d),ft.pixelStorei(32878,f),ft.pixelStorei(3316,h),ft.pixelStorei(3315,p),ft.pixelStorei(32877,g),0===i&&r.generateMipmaps&&ft.generateMipmap(c),H.unbindTexture()},this.initTexture=function(t){t.isCubeTexture?W.setTextureCube(t,0):t.isData3DTexture?W.setTexture3D(t,0):t.isDataArrayTexture||t.isCompressedArrayTexture?W.setTexture2DArray(t,0):W.setTexture2D(t,0),H.unbindTexture()},this.resetState=function(){v=0,y=0,b=null,H.reset(),ct.reset()},"undefined"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}class FE extends zE{}FE.prototype.isWebGL1Renderer=!0;class UE extends Xb{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.overrideMaterial=null,"undefined"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(t,e){return super.copy(t,e),null!==t.background&&(this.background=t.background.clone()),null!==t.environment&&(this.environment=t.environment.clone()),null!==t.fog&&(this.fog=t.fog.clone()),this.backgroundBlurriness=t.backgroundBlurriness,this.backgroundIntensity=t.backgroundIntensity,null!==t.overrideMaterial&&(this.overrideMaterial=t.overrideMaterial.clone()),this.matrixAutoUpdate=t.matrixAutoUpdate,this}toJSON(t){const e=super.toJSON(t);return null!==this.fog&&(e.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(e.object.backgroundBlurriness=this.backgroundBlurriness),1!==this.backgroundIntensity&&(e.object.backgroundIntensity=this.backgroundIntensity),e}get autoUpdate(){return console.warn("THREE.Scene: autoUpdate was renamed to matrixWorldAutoUpdate in r144."),this.matrixWorldAutoUpdate}set autoUpdate(t){console.warn("THREE.Scene: autoUpdate was renamed to matrixWorldAutoUpdate in r144."),this.matrixWorldAutoUpdate=t}}class qE{constructor(t,e){this.isInterleavedBuffer=!0,this.array=t,this.stride=e,this.count=void 0!==t?t.length/e:0,this.usage=ry,this.updateRange={offset:0,count:-1},this.version=0,this.uuid=fy()}onUploadCallback(){}set needsUpdate(t){!0===t&&this.version++}setUsage(t){return this.usage=t,this}copy(t){return this.array=new t.array.constructor(t.array),this.count=t.count,this.stride=t.stride,this.usage=t.usage,this}copyAt(t,e,n){t*=this.stride,n*=e.stride;for(let r=0,i=this.stride;r<i;r++)this.array[t+r]=e.array[n+r];return this}set(t,e=0){return this.array.set(t,e),this}clone(t){void 0===t.arrayBuffers&&(t.arrayBuffers={}),void 0===this.array.buffer._uuid&&(this.array.buffer._uuid=fy()),void 0===t.arrayBuffers[this.array.buffer._uuid]&&(t.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const e=new this.array.constructor(t.arrayBuffers[this.array.buffer._uuid]),n=new this.constructor(e,this.stride);return n.setUsage(this.usage),n}onUpload(t){return this.onUploadCallback=t,this}toJSON(t){return void 0===t.arrayBuffers&&(t.arrayBuffers={}),void 0===this.array.buffer._uuid&&(this.array.buffer._uuid=fy()),void 0===t.arrayBuffers[this.array.buffer._uuid]&&(t.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}const GE=new Ky;class HE{constructor(t,e,n,r=!1){this.isInterleavedBufferAttribute=!0,this.name="",this.data=t,this.itemSize=e,this.offset=n,this.normalized=r}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(t){this.data.needsUpdate=t}applyMatrix4(t){for(let e=0,n=this.data.count;e<n;e++)GE.fromBufferAttribute(this,e),GE.applyMatrix4(t),this.setXYZ(e,GE.x,GE.y,GE.z);return this}applyNormalMatrix(t){for(let e=0,n=this.count;e<n;e++)GE.fromBufferAttribute(this,e),GE.applyNormalMatrix(t),this.setXYZ(e,GE.x,GE.y,GE.z);return this}transformDirection(t){for(let e=0,n=this.count;e<n;e++)GE.fromBufferAttribute(this,e),GE.transformDirection(t),this.setXYZ(e,GE.x,GE.y,GE.z);return this}setX(t,e){return this.normalized&&(e=_y(e,this.array)),this.data.array[t*this.data.stride+this.offset]=e,this}setY(t,e){return this.normalized&&(e=_y(e,this.array)),this.data.array[t*this.data.stride+this.offset+1]=e,this}setZ(t,e){return this.normalized&&(e=_y(e,this.array)),this.data.array[t*this.data.stride+this.offset+2]=e,this}setW(t,e){return this.normalized&&(e=_y(e,this.array)),this.data.array[t*this.data.stride+this.offset+3]=e,this}getX(t){let e=this.data.array[t*this.data.stride+this.offset];return this.normalized&&(e=by(e,this.array)),e}getY(t){let e=this.data.array[t*this.data.stride+this.offset+1];return this.normalized&&(e=by(e,this.array)),e}getZ(t){let e=this.data.array[t*this.data.stride+this.offset+2];return this.normalized&&(e=by(e,this.array)),e}getW(t){let e=this.data.array[t*this.data.stride+this.offset+3];return this.normalized&&(e=by(e,this.array)),e}setXY(t,e,n){return t=t*this.data.stride+this.offset,this.normalized&&(e=_y(e,this.array),n=_y(n,this.array)),this.data.array[t+0]=e,this.data.array[t+1]=n,this}setXYZ(t,e,n,r){return t=t*this.data.stride+this.offset,this.normalized&&(e=_y(e,this.array),n=_y(n,this.array),r=_y(r,this.array)),this.data.array[t+0]=e,this.data.array[t+1]=n,this.data.array[t+2]=r,this}setXYZW(t,e,n,r,i){return t=t*this.data.stride+this.offset,this.normalized&&(e=_y(e,this.array),n=_y(n,this.array),r=_y(r,this.array),i=_y(i,this.array)),this.data.array[t+0]=e,this.data.array[t+1]=n,this.data.array[t+2]=r,this.data.array[t+3]=i,this}clone(t){if(void 0===t){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will de-interleave buffer data.");const t=[];for(let e=0;e<this.count;e++){const n=e*this.data.stride+this.offset;for(let e=0;e<this.itemSize;e++)t.push(this.data.array[n+e])}return new h_(new this.array.constructor(t),this.itemSize,this.normalized)}return void 0===t.interleavedBuffers&&(t.interleavedBuffers={}),void 0===t.interleavedBuffers[this.data.uuid]&&(t.interleavedBuffers[this.data.uuid]=this.data.clone(t)),new HE(t.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(t){if(void 0===t){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will de-interleave buffer data.");const t=[];for(let e=0;e<this.count;e++){const n=e*this.data.stride+this.offset;for(let e=0;e<this.itemSize;e++)t.push(this.data.array[n+e])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:t,normalized:this.normalized}}return void 0===t.interleavedBuffers&&(t.interleavedBuffers={}),void 0===t.interleavedBuffers[this.data.uuid]&&(t.interleavedBuffers[this.data.uuid]=this.data.toJSON(t)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}const VE=new Ky,QE=new Hy,WE=new Hy,YE=new Ky,KE=new Sb;class XE extends j_{constructor(t,e){super(t,e),this.isSkinnedMesh=!0,this.type="SkinnedMesh",this.bindMode="attached",this.bindMatrix=new Sb,this.bindMatrixInverse=new Sb}copy(t,e){return super.copy(t,e),this.bindMode=t.bindMode,this.bindMatrix.copy(t.bindMatrix),this.bindMatrixInverse.copy(t.bindMatrixInverse),this.skeleton=t.skeleton,this}bind(t,e){this.skeleton=t,void 0===e&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),e=this.matrixWorld),this.bindMatrix.copy(e),this.bindMatrixInverse.copy(e).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){const t=new Hy,e=this.geometry.attributes.skinWeight;for(let n=0,r=e.count;n<r;n++){t.fromBufferAttribute(e,n);const r=1/t.manhattanLength();r!==1/0?t.multiplyScalar(r):t.set(1,0,0,0),e.setXYZW(n,t.x,t.y,t.z,t.w)}}updateMatrixWorld(t){super.updateMatrixWorld(t),"attached"===this.bindMode?this.bindMatrixInverse.copy(this.matrixWorld).invert():"detached"===this.bindMode?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}boneTransform(t,e){const n=this.skeleton,r=this.geometry;QE.fromBufferAttribute(r.attributes.skinIndex,t),WE.fromBufferAttribute(r.attributes.skinWeight,t),VE.copy(e).applyMatrix4(this.bindMatrix),e.set(0,0,0);for(let t=0;t<4;t++){const r=WE.getComponent(t);if(0!==r){const i=QE.getComponent(t);KE.multiplyMatrices(n.bones[i].matrixWorld,n.boneInverses[i]),e.addScaledVector(YE.copy(VE).applyMatrix4(KE),r)}}return e.applyMatrix4(this.bindMatrixInverse)}}class $E extends Xb{constructor(){super(),this.isBone=!0,this.type="Bone"}}class ZE extends Gy{constructor(t=null,e=1,n=1,r,i,o,a,s,l=jg,u=jg,c,d){super(null,o,a,s,l,u,r,i,c,d),this.isDataTexture=!0,this.image={data:t,width:e,height:n},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}const JE=new Sb,tx=new Sb;class ex{constructor(t=[],e=[]){this.uuid=fy(),this.bones=t.slice(0),this.boneInverses=e,this.boneMatrices=null,this.boneTexture=null,this.boneTextureSize=0,this.frame=-1,this.init()}init(){const t=this.bones,e=this.boneInverses;if(this.boneMatrices=new Float32Array(16*t.length),0===e.length)this.calculateInverses();else if(t.length!==e.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let t=0,e=this.bones.length;t<e;t++)this.boneInverses.push(new Sb)}}calculateInverses(){this.boneInverses.length=0;for(let t=0,e=this.bones.length;t<e;t++){const e=new Sb;this.bones[t]&&e.copy(this.bones[t].matrixWorld).invert(),this.boneInverses.push(e)}}pose(){for(let t=0,e=this.bones.length;t<e;t++){const e=this.bones[t];e&&e.matrixWorld.copy(this.boneInverses[t]).invert()}for(let t=0,e=this.bones.length;t<e;t++){const e=this.bones[t];e&&(e.parent&&e.parent.isBone?(e.matrix.copy(e.parent.matrixWorld).invert(),e.matrix.multiply(e.matrixWorld)):e.matrix.copy(e.matrixWorld),e.matrix.decompose(e.position,e.quaternion,e.scale))}}update(){const t=this.bones,e=this.boneInverses,n=this.boneMatrices,r=this.boneTexture;for(let r=0,i=t.length;r<i;r++){const i=t[r]?t[r].matrixWorld:tx;JE.multiplyMatrices(i,e[r]),JE.toArray(n,16*r)}null!==r&&(r.needsUpdate=!0)}clone(){return new ex(this.bones,this.boneInverses)}computeBoneTexture(){let t=Math.sqrt(4*this.bones.length);t=vy(t),t=Math.max(t,4);const e=new Float32Array(t*t*4);e.set(this.boneMatrices);const n=new ZE(e,t,t,nv,Xg);return n.needsUpdate=!0,this.boneMatrices=e,this.boneTexture=n,this.boneTextureSize=t,this}getBoneByName(t){for(let e=0,n=this.bones.length;e<n;e++){const n=this.bones[e];if(n.name===t)return n}}dispose(){null!==this.boneTexture&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(t,e){this.uuid=t.uuid;for(let n=0,r=t.bones.length;n<r;n++){const r=t.bones[n];let i=e[r];void 0===i&&(console.warn("THREE.Skeleton: No bone found with UUID:",r),i=new $E),this.bones.push(i),this.boneInverses.push((new Sb).fromArray(t.boneInverses[n]))}return this.init(),this}toJSON(){const t={metadata:{version:4.5,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};t.uuid=this.uuid;const e=this.bones,n=this.boneInverses;for(let r=0,i=e.length;r<i;r++){const i=e[r];t.bones.push(i.uuid);const o=n[r];t.boneInverses.push(o.toArray())}return t}}class nx extends h_{constructor(t,e,n,r=1){super(t,e,n),this.isInstancedBufferAttribute=!0,this.meshPerAttribute=r}copy(t){return super.copy(t),this.meshPerAttribute=t.meshPerAttribute,this}toJSON(){const t=super.toJSON();return t.meshPerAttribute=this.meshPerAttribute,t.isInstancedBufferAttribute=!0,t}}const rx=new Sb,ix=new Sb,ox=[],ax=new Sb,sx=new j_;class lx extends j_{constructor(t,e,n){super(t,e),this.isInstancedMesh=!0,this.instanceMatrix=new nx(new Float32Array(16*n),16),this.instanceColor=null,this.count=n,this.frustumCulled=!1;for(let t=0;t<n;t++)this.setMatrixAt(t,ax)}copy(t,e){return super.copy(t,e),this.instanceMatrix.copy(t.instanceMatrix),null!==t.instanceColor&&(this.instanceColor=t.instanceColor.clone()),this.count=t.count,this}getColorAt(t,e){e.fromArray(this.instanceColor.array,3*t)}getMatrixAt(t,e){e.fromArray(this.instanceMatrix.array,16*t)}raycast(t,e){const n=this.matrixWorld,r=this.count;if(sx.geometry=this.geometry,sx.material=this.material,void 0!==sx.material)for(let i=0;i<r;i++){this.getMatrixAt(i,rx),ix.multiplyMatrices(n,rx),sx.matrixWorld=ix,sx.raycast(t,ox);for(let t=0,n=ox.length;t<n;t++){const n=ox[t];n.instanceId=i,n.object=this,e.push(n)}ox.length=0}}setColorAt(t,e){null===this.instanceColor&&(this.instanceColor=new nx(new Float32Array(3*this.instanceMatrix.count),3)),e.toArray(this.instanceColor.array,3*t)}setMatrixAt(t,e){e.toArray(this.instanceMatrix.array,16*t)}updateMorphTargets(){}dispose(){this.dispatchEvent({type:"dispose"})}}class ux extends u_{constructor(t){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new By(16777215),this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.linewidth=t.linewidth,this.linecap=t.linecap,this.linejoin=t.linejoin,this.fog=t.fog,this}}const cx=new Ky,dx=new Ky,fx=new Sb,hx=new xb,px=new gb;class mx extends Xb{constructor(t=new x_,e=new ux){super(),this.isLine=!0,this.type="Line",this.geometry=t,this.material=e,this.updateMorphTargets()}copy(t,e){return super.copy(t,e),this.material=t.material,this.geometry=t.geometry,this}computeLineDistances(){const t=this.geometry;if(null===t.index){const e=t.attributes.position,n=[0];for(let t=1,r=e.count;t<r;t++)cx.fromBufferAttribute(e,t-1),dx.fromBufferAttribute(e,t),n[t]=n[t-1],n[t]+=cx.distanceTo(dx);t.setAttribute("lineDistance",new g_(n,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(t,e){const n=this.geometry,r=this.matrixWorld,i=t.params.Line.threshold,o=n.drawRange;if(null===n.boundingSphere&&n.computeBoundingSphere(),px.copy(n.boundingSphere),px.applyMatrix4(r),px.radius+=i,!1===t.ray.intersectsSphere(px))return;fx.copy(r).invert(),hx.copy(t.ray).applyMatrix4(fx);const a=i/((this.scale.x+this.scale.y+this.scale.z)/3),s=a*a,l=new Ky,u=new Ky,c=new Ky,d=new Ky,f=this.isLineSegments?2:1,h=n.index,p=n.attributes.position;if(null!==h){for(let n=Math.max(0,o.start),r=Math.min(h.count,o.start+o.count)-1;n<r;n+=f){const r=h.getX(n),i=h.getX(n+1);l.fromBufferAttribute(p,r),u.fromBufferAttribute(p,i);if(hx.distanceSqToSegment(l,u,d,c)>s)continue;d.applyMatrix4(this.matrixWorld);const o=t.ray.origin.distanceTo(d);o<t.near||o>t.far||e.push({distance:o,point:c.clone().applyMatrix4(this.matrixWorld),index:n,face:null,faceIndex:null,object:this})}}else{for(let n=Math.max(0,o.start),r=Math.min(p.count,o.start+o.count)-1;n<r;n+=f){l.fromBufferAttribute(p,n),u.fromBufferAttribute(p,n+1);if(hx.distanceSqToSegment(l,u,d,c)>s)continue;d.applyMatrix4(this.matrixWorld);const r=t.ray.origin.distanceTo(d);r<t.near||r>t.far||e.push({distance:r,point:c.clone().applyMatrix4(this.matrixWorld),index:n,face:null,faceIndex:null,object:this})}}}updateMorphTargets(){const t=this.geometry.morphAttributes,e=Object.keys(t);if(e.length>0){const n=t[e[0]];if(void 0!==n){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let t=0,e=n.length;t<e;t++){const e=n[t].name||String(t);this.morphTargetInfluences.push(0),this.morphTargetDictionary[e]=t}}}}}const gx=new Ky,vx=new Ky;class yx extends mx{constructor(t,e){super(t,e),this.isLineSegments=!0,this.type="LineSegments"}computeLineDistances(){const t=this.geometry;if(null===t.index){const e=t.attributes.position,n=[];for(let t=0,r=e.count;t<r;t+=2)gx.fromBufferAttribute(e,t),vx.fromBufferAttribute(e,t+1),n[t]=0===t?0:n[t-1],n[t+1]=n[t]+gx.distanceTo(vx);t.setAttribute("lineDistance",new g_(n,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}}class bx extends mx{constructor(t,e){super(t,e),this.isLineLoop=!0,this.type="LineLoop"}}class _x extends u_{constructor(t){super(),this.isPointsMaterial=!0,this.type="PointsMaterial",this.color=new By(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.map=t.map,this.alphaMap=t.alphaMap,this.size=t.size,this.sizeAttenuation=t.sizeAttenuation,this.fog=t.fog,this}}const wx=new Sb,Ax=new xb,Ex=new gb,xx=new Ky;class Sx extends Xb{constructor(t=new x_,e=new _x){super(),this.isPoints=!0,this.type="Points",this.geometry=t,this.material=e,this.updateMorphTargets()}copy(t,e){return super.copy(t,e),this.material=t.material,this.geometry=t.geometry,this}raycast(t,e){const n=this.geometry,r=this.matrixWorld,i=t.params.Points.threshold,o=n.drawRange;if(null===n.boundingSphere&&n.computeBoundingSphere(),Ex.copy(n.boundingSphere),Ex.applyMatrix4(r),Ex.radius+=i,!1===t.ray.intersectsSphere(Ex))return;wx.copy(r).invert(),Ax.copy(t.ray).applyMatrix4(wx);const a=i/((this.scale.x+this.scale.y+this.scale.z)/3),s=a*a,l=n.index,u=n.attributes.position;if(null!==l){for(let n=Math.max(0,o.start),i=Math.min(l.count,o.start+o.count);n<i;n++){const i=l.getX(n);xx.fromBufferAttribute(u,i),Tx(xx,i,s,r,t,e,this)}}else{for(let n=Math.max(0,o.start),i=Math.min(u.count,o.start+o.count);n<i;n++)xx.fromBufferAttribute(u,n),Tx(xx,n,s,r,t,e,this)}}updateMorphTargets(){const t=this.geometry.morphAttributes,e=Object.keys(t);if(e.length>0){const n=t[e[0]];if(void 0!==n){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let t=0,e=n.length;t<e;t++){const e=n[t].name||String(t);this.morphTargetInfluences.push(0),this.morphTargetDictionary[e]=t}}}}}function Tx(t,e,n,r,i,o,a){const s=Ax.distanceSqToPoint(t);if(s<n){const n=new Ky;Ax.closestPointToPoint(t,n),n.applyMatrix4(r);const l=i.ray.origin.distanceTo(n);if(l<i.near||l>i.far)return;o.push({distance:l,distanceToRay:Math.sqrt(s),point:n,index:e,face:null,object:a})}}class Cx extends Gy{constructor(t,e,n,r,i,o,a,s,l){super(t,e,n,r,i,o,a,s,l),this.isVideoTexture=!0,this.minFilter=void 0!==o?o:Ug,this.magFilter=void 0!==i?i:Ug,this.generateMipmaps=!1;const u=this;"requestVideoFrameCallback"in t&&t.requestVideoFrameCallback((function e(){u.needsUpdate=!0,t.requestVideoFrameCallback(e)}))}clone(){return new this.constructor(this.image).copy(this)}update(){const t=this.image;!1==="requestVideoFrameCallback"in t&&t.readyState>=t.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}}class Ix extends Gy{constructor(t,e,n,r,i,o,a,s,l,u,c,d){super(null,o,a,s,l,u,r,i,c,d),this.isCompressedTexture=!0,this.image={width:e,height:n},this.mipmaps=t,this.flipY=!1,this.generateMipmaps=!1}}class kx extends Ix{constructor(t,e,n,r,i,o){super(t,e,n,i,o),this.isCompressedArrayTexture=!0,this.image.depth=r,this.wrapR=Ng}}class Px extends x_{constructor(t=1,e=32,n=16,r=0,i=2*Math.PI,o=0,a=Math.PI){super(),this.type="SphereGeometry",this.parameters={radius:t,widthSegments:e,heightSegments:n,phiStart:r,phiLength:i,thetaStart:o,thetaLength:a},e=Math.max(3,Math.floor(e)),n=Math.max(2,Math.floor(n));const s=Math.min(o+a,Math.PI);let l=0;const u=[],c=new Ky,d=new Ky,f=[],h=[],p=[],m=[];for(let f=0;f<=n;f++){const g=[],v=f/n;let y=0;0==f&&0==o?y=.5/e:f==n&&s==Math.PI&&(y=-.5/e);for(let n=0;n<=e;n++){const s=n/e;c.x=-t*Math.cos(r+s*i)*Math.sin(o+v*a),c.y=t*Math.cos(o+v*a),c.z=t*Math.sin(r+s*i)*Math.sin(o+v*a),h.push(c.x,c.y,c.z),d.copy(c).normalize(),p.push(d.x,d.y,d.z),m.push(s+y,1-v),g.push(l++)}u.push(g)}for(let t=0;t<n;t++)for(let r=0;r<e;r++){const e=u[t][r+1],i=u[t][r],a=u[t+1][r],l=u[t+1][r+1];(0!==t||o>0)&&f.push(e,i,l),(t!==n-1||s<Math.PI)&&f.push(i,a,l)}this.setIndex(f),this.setAttribute("position",new g_(h,3)),this.setAttribute("normal",new g_(p,3)),this.setAttribute("uv",new g_(m,2))}static fromJSON(t){return new Px(t.radius,t.widthSegments,t.heightSegments,t.phiStart,t.phiLength,t.thetaStart,t.thetaLength)}}class Rx extends V_{constructor(t){super(t),this.isRawShaderMaterial=!0,this.type="RawShaderMaterial"}}class Ox extends u_{constructor(t){super(),this.isMeshStandardMaterial=!0,this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new By(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new By(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Zv,this.normalScale=new Ay(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapIntensity=1,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.defines={STANDARD:""},this.color.copy(t.color),this.roughness=t.roughness,this.metalness=t.metalness,this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.roughnessMap=t.roughnessMap,this.metalnessMap=t.metalnessMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.envMapIntensity=t.envMapIntensity,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.flatShading=t.flatShading,this.fog=t.fog,this}}class Mx extends Ox{constructor(t){super(),this.isMeshPhysicalMaterial=!0,this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new Ay(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return hy(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(t){this.ior=(1+.4*t)/(1-.4*t)}}),this.iridescenceMap=null,this.iridescenceIOR=1.3,this.iridescenceThicknessRange=[100,400],this.iridescenceThicknessMap=null,this.sheenColor=new By(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=0,this.thicknessMap=null,this.attenuationDistance=1/0,this.attenuationColor=new By(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new By(1,1,1),this.specularColorMap=null,this._sheen=0,this._clearcoat=0,this._iridescence=0,this._transmission=0,this.setValues(t)}get sheen(){return this._sheen}set sheen(t){this._sheen>0!=t>0&&this.version++,this._sheen=t}get clearcoat(){return this._clearcoat}set clearcoat(t){this._clearcoat>0!=t>0&&this.version++,this._clearcoat=t}get iridescence(){return this._iridescence}set iridescence(t){this._iridescence>0!=t>0&&this.version++,this._iridescence=t}get transmission(){return this._transmission}set transmission(t){this._transmission>0!=t>0&&this.version++,this._transmission=t}copy(t){return super.copy(t),this.defines={STANDARD:"",PHYSICAL:""},this.clearcoat=t.clearcoat,this.clearcoatMap=t.clearcoatMap,this.clearcoatRoughness=t.clearcoatRoughness,this.clearcoatRoughnessMap=t.clearcoatRoughnessMap,this.clearcoatNormalMap=t.clearcoatNormalMap,this.clearcoatNormalScale.copy(t.clearcoatNormalScale),this.ior=t.ior,this.iridescence=t.iridescence,this.iridescenceMap=t.iridescenceMap,this.iridescenceIOR=t.iridescenceIOR,this.iridescenceThicknessRange=[...t.iridescenceThicknessRange],this.iridescenceThicknessMap=t.iridescenceThicknessMap,this.sheen=t.sheen,this.sheenColor.copy(t.sheenColor),this.sheenColorMap=t.sheenColorMap,this.sheenRoughness=t.sheenRoughness,this.sheenRoughnessMap=t.sheenRoughnessMap,this.transmission=t.transmission,this.transmissionMap=t.transmissionMap,this.thickness=t.thickness,this.thicknessMap=t.thicknessMap,this.attenuationDistance=t.attenuationDistance,this.attenuationColor.copy(t.attenuationColor),this.specularIntensity=t.specularIntensity,this.specularIntensityMap=t.specularIntensityMap,this.specularColor.copy(t.specularColor),this.specularColorMap=t.specularColorMap,this}}class Lx extends u_{constructor(t){super(),this.isMeshPhongMaterial=!0,this.type="MeshPhongMaterial",this.color=new By(16777215),this.specular=new By(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new By(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Zv,this.normalScale=new Ay(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=wg,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.specular.copy(t.specular),this.shininess=t.shininess,this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.specularMap=t.specularMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.combine=t.combine,this.reflectivity=t.reflectivity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.flatShading=t.flatShading,this.fog=t.fog,this}}function Dx(t,e,n){return Bx(t)?new t.constructor(t.subarray(e,void 0!==n?n:t.length)):t.slice(e,n)}function Nx(t,e,n){return!t||!n&&t.constructor===e?t:"number"==typeof e.BYTES_PER_ELEMENT?new e(t):Array.prototype.slice.call(t)}function Bx(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function jx(t){const e=t.length,n=new Array(e);for(let t=0;t!==e;++t)n[t]=t;return n.sort((function(e,n){return t[e]-t[n]})),n}function zx(t,e,n){const r=t.length,i=new t.constructor(r);for(let o=0,a=0;a!==r;++o){const r=n[o]*e;for(let n=0;n!==e;++n)i[a++]=t[r+n]}return i}function Fx(t,e,n,r){let i=1,o=t[0];for(;void 0!==o&&void 0===o[r];)o=t[i++];if(void 0===o)return;let a=o[r];if(void 0!==a)if(Array.isArray(a))do{a=o[r],void 0!==a&&(e.push(o.time),n.push.apply(n,a)),o=t[i++]}while(void 0!==o);else if(void 0!==a.toArray)do{a=o[r],void 0!==a&&(e.push(o.time),a.toArray(n,n.length)),o=t[i++]}while(void 0!==o);else do{a=o[r],void 0!==a&&(e.push(o.time),n.push(a)),o=t[i++]}while(void 0!==o)}class Ux{constructor(t,e,n,r){this.parameterPositions=t,this._cachedIndex=0,this.resultBuffer=void 0!==r?r:new e.constructor(n),this.sampleValues=e,this.valueSize=n,this.settings=null,this.DefaultSettings_={}}evaluate(t){const e=this.parameterPositions;let n=this._cachedIndex,r=e[n],i=e[n-1];t:{e:{let o;n:{r:if(!(t<r)){for(let o=n+2;;){if(void 0===r){if(t<i)break r;return n=e.length,this._cachedIndex=n,this.copySampleValue_(n-1)}if(n===o)break;if(i=r,r=e[++n],t<r)break e}o=e.length;break n}if(t>=i)break t;{const a=e[1];t<a&&(n=2,i=a);for(let o=n-2;;){if(void 0===i)return this._cachedIndex=0,this.copySampleValue_(0);if(n===o)break;if(r=i,i=e[--n-1],t>=i)break e}o=n,n=0}}for(;n<o;){const r=n+o>>>1;t<e[r]?o=r:n=r+1}if(r=e[n],i=e[n-1],void 0===i)return this._cachedIndex=0,this.copySampleValue_(0);if(void 0===r)return n=e.length,this._cachedIndex=n,this.copySampleValue_(n-1)}this._cachedIndex=n,this.intervalChanged_(n,i,r)}return this.interpolate_(n,i,t,r)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(t){const e=this.resultBuffer,n=this.sampleValues,r=this.valueSize,i=t*r;for(let t=0;t!==r;++t)e[t]=n[i+t];return e}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}class qx extends Ux{constructor(t,e,n,r){super(t,e,n,r),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:Vv,endingEnd:Vv}}intervalChanged_(t,e,n){const r=this.parameterPositions;let i=t-2,o=t+1,a=r[i],s=r[o];if(void 0===a)switch(this.getSettings_().endingStart){case Qv:i=t,a=2*e-n;break;case Wv:i=r.length-2,a=e+r[i]-r[i+1];break;default:i=t,a=n}if(void 0===s)switch(this.getSettings_().endingEnd){case Qv:o=t,s=2*n-e;break;case Wv:o=1,s=n+r[1]-r[0];break;default:o=t-1,s=e}const l=.5*(n-e),u=this.valueSize;this._weightPrev=l/(e-a),this._weightNext=l/(s-n),this._offsetPrev=i*u,this._offsetNext=o*u}interpolate_(t,e,n,r){const i=this.resultBuffer,o=this.sampleValues,a=this.valueSize,s=t*a,l=s-a,u=this._offsetPrev,c=this._offsetNext,d=this._weightPrev,f=this._weightNext,h=(n-e)/(r-e),p=h*h,m=p*h,g=-d*m+2*d*p-d*h,v=(1+d)*m+(-1.5-2*d)*p+(-.5+d)*h+1,y=(-1-f)*m+(1.5+f)*p+.5*h,b=f*m-f*p;for(let t=0;t!==a;++t)i[t]=g*o[u+t]+v*o[l+t]+y*o[s+t]+b*o[c+t];return i}}class Gx extends Ux{constructor(t,e,n,r){super(t,e,n,r)}interpolate_(t,e,n,r){const i=this.resultBuffer,o=this.sampleValues,a=this.valueSize,s=t*a,l=s-a,u=(n-e)/(r-e),c=1-u;for(let t=0;t!==a;++t)i[t]=o[l+t]*c+o[s+t]*u;return i}}class Hx extends Ux{constructor(t,e,n,r){super(t,e,n,r)}interpolate_(t){return this.copySampleValue_(t-1)}}class Vx{constructor(t,e,n,r){if(void 0===t)throw new Error("THREE.KeyframeTrack: track name is undefined");if(void 0===e||0===e.length)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+t);this.name=t,this.times=Nx(e,this.TimeBufferType),this.values=Nx(n,this.ValueBufferType),this.setInterpolation(r||this.DefaultInterpolation)}static toJSON(t){const e=t.constructor;let n;if(e.toJSON!==this.toJSON)n=e.toJSON(t);else{n={name:t.name,times:Nx(t.times,Array),values:Nx(t.values,Array)};const e=t.getInterpolation();e!==t.DefaultInterpolation&&(n.interpolation=e)}return n.type=t.ValueTypeName,n}InterpolantFactoryMethodDiscrete(t){return new Hx(this.times,this.values,this.getValueSize(),t)}InterpolantFactoryMethodLinear(t){return new Gx(this.times,this.values,this.getValueSize(),t)}InterpolantFactoryMethodSmooth(t){return new qx(this.times,this.values,this.getValueSize(),t)}setInterpolation(t){let e;switch(t){case qv:e=this.InterpolantFactoryMethodDiscrete;break;case Gv:e=this.InterpolantFactoryMethodLinear;break;case Hv:e=this.InterpolantFactoryMethodSmooth}if(void 0===e){const e="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(void 0===this.createInterpolant){if(t===this.DefaultInterpolation)throw new Error(e);this.setInterpolation(this.DefaultInterpolation)}return console.warn("THREE.KeyframeTrack:",e),this}return this.createInterpolant=e,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return qv;case this.InterpolantFactoryMethodLinear:return Gv;case this.InterpolantFactoryMethodSmooth:return Hv}}getValueSize(){return this.values.length/this.times.length}shift(t){if(0!==t){const e=this.times;for(let n=0,r=e.length;n!==r;++n)e[n]+=t}return this}scale(t){if(1!==t){const e=this.times;for(let n=0,r=e.length;n!==r;++n)e[n]*=t}return this}trim(t,e){const n=this.times,r=n.length;let i=0,o=r-1;for(;i!==r&&n[i]<t;)++i;for(;-1!==o&&n[o]>e;)--o;if(++o,0!==i||o!==r){i>=o&&(o=Math.max(o,1),i=o-1);const t=this.getValueSize();this.times=Dx(n,i,o),this.values=Dx(this.values,i*t,o*t)}return this}validate(){let t=!0;const e=this.getValueSize();e-Math.floor(e)!=0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),t=!1);const n=this.times,r=this.values,i=n.length;0===i&&(console.error("THREE.KeyframeTrack: Track is empty.",this),t=!1);let o=null;for(let e=0;e!==i;e++){const r=n[e];if("number"==typeof r&&isNaN(r)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,e,r),t=!1;break}if(null!==o&&o>r){console.error("THREE.KeyframeTrack: Out of order keys.",this,e,r,o),t=!1;break}o=r}if(void 0!==r&&Bx(r))for(let e=0,n=r.length;e!==n;++e){const n=r[e];if(isNaN(n)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,e,n),t=!1;break}}return t}optimize(){const t=Dx(this.times),e=Dx(this.values),n=this.getValueSize(),r=this.getInterpolation()===Hv,i=t.length-1;let o=1;for(let a=1;a<i;++a){let i=!1;const s=t[a];if(s!==t[a+1]&&(1!==a||s!==t[0]))if(r)i=!0;else{const t=a*n,r=t-n,o=t+n;for(let a=0;a!==n;++a){const n=e[t+a];if(n!==e[r+a]||n!==e[o+a]){i=!0;break}}}if(i){if(a!==o){t[o]=t[a];const r=a*n,i=o*n;for(let t=0;t!==n;++t)e[i+t]=e[r+t]}++o}}if(i>0){t[o]=t[i];for(let t=i*n,r=o*n,a=0;a!==n;++a)e[r+a]=e[t+a];++o}return o!==t.length?(this.times=Dx(t,0,o),this.values=Dx(e,0,o*n)):(this.times=t,this.values=e),this}clone(){const t=Dx(this.times,0),e=Dx(this.values,0),n=new(0,this.constructor)(this.name,t,e);return n.createInterpolant=this.createInterpolant,n}}Vx.prototype.TimeBufferType=Float32Array,Vx.prototype.ValueBufferType=Float32Array,Vx.prototype.DefaultInterpolation=Gv;class Qx extends Vx{}Qx.prototype.ValueTypeName="bool",Qx.prototype.ValueBufferType=Array,Qx.prototype.DefaultInterpolation=qv,Qx.prototype.InterpolantFactoryMethodLinear=void 0,Qx.prototype.InterpolantFactoryMethodSmooth=void 0;class Wx extends Vx{}Wx.prototype.ValueTypeName="color";class Yx extends Vx{}Yx.prototype.ValueTypeName="number";class Kx extends Ux{constructor(t,e,n,r){super(t,e,n,r)}interpolate_(t,e,n,r){const i=this.resultBuffer,o=this.sampleValues,a=this.valueSize,s=(n-e)/(r-e);let l=t*a;for(let t=l+a;l!==t;l+=4)Yy.slerpFlat(i,0,o,l-a,o,l,s);return i}}class Xx extends Vx{InterpolantFactoryMethodLinear(t){return new Kx(this.times,this.values,this.getValueSize(),t)}}Xx.prototype.ValueTypeName="quaternion",Xx.prototype.DefaultInterpolation=Gv,Xx.prototype.InterpolantFactoryMethodSmooth=void 0;class $x extends Vx{}$x.prototype.ValueTypeName="string",$x.prototype.ValueBufferType=Array,$x.prototype.DefaultInterpolation=qv,$x.prototype.InterpolantFactoryMethodLinear=void 0,$x.prototype.InterpolantFactoryMethodSmooth=void 0;class Zx extends Vx{}Zx.prototype.ValueTypeName="vector";class Jx{constructor(t,e=-1,n,r=2500){this.name=t,this.tracks=n,this.duration=e,this.blendMode=r,this.uuid=fy(),this.duration<0&&this.resetDuration()}static parse(t){const e=[],n=t.tracks,r=1/(t.fps||1);for(let t=0,i=n.length;t!==i;++t)e.push(tS(n[t]).scale(r));const i=new this(t.name,t.duration,e,t.blendMode);return i.uuid=t.uuid,i}static toJSON(t){const e=[],n=t.tracks,r={name:t.name,duration:t.duration,tracks:e,uuid:t.uuid,blendMode:t.blendMode};for(let t=0,r=n.length;t!==r;++t)e.push(Vx.toJSON(n[t]));return r}static CreateFromMorphTargetSequence(t,e,n,r){const i=e.length,o=[];for(let t=0;t<i;t++){let a=[],s=[];a.push((t+i-1)%i,t,(t+1)%i),s.push(0,1,0);const l=jx(a);a=zx(a,1,l),s=zx(s,1,l),r||0!==a[0]||(a.push(i),s.push(s[0])),o.push(new Yx(".morphTargetInfluences["+e[t].name+"]",a,s).scale(1/n))}return new this(t,-1,o)}static findByName(t,e){let n=t;if(!Array.isArray(t)){const e=t;n=e.geometry&&e.geometry.animations||e.animations}for(let t=0;t<n.length;t++)if(n[t].name===e)return n[t];return null}static CreateClipsFromMorphTargetSequences(t,e,n){const r={},i=/^([\w-]*?)([\d]+)$/;for(let e=0,n=t.length;e<n;e++){const n=t[e],o=n.name.match(i);if(o&&o.length>1){const t=o[1];let e=r[t];e||(r[t]=e=[]),e.push(n)}}const o=[];for(const t in r)o.push(this.CreateFromMorphTargetSequence(t,r[t],e,n));return o}static parseAnimation(t,e){if(!t)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;const n=function(t,e,n,r,i){if(0!==n.length){const o=[],a=[];Fx(n,o,a,r),0!==o.length&&i.push(new t(e,o,a))}},r=[],i=t.name||"default",o=t.fps||30,a=t.blendMode;let s=t.length||-1;const l=t.hierarchy||[];for(let t=0;t<l.length;t++){const i=l[t].keys;if(i&&0!==i.length)if(i[0].morphTargets){const t={};let e;for(e=0;e<i.length;e++)if(i[e].morphTargets)for(let n=0;n<i[e].morphTargets.length;n++)t[i[e].morphTargets[n]]=-1;for(const n in t){const t=[],o=[];for(let r=0;r!==i[e].morphTargets.length;++r){const r=i[e];t.push(r.time),o.push(r.morphTarget===n?1:0)}r.push(new Yx(".morphTargetInfluence["+n+"]",t,o))}s=t.length*o}else{const o=".bones["+e[t].name+"]";n(Zx,o+".position",i,"pos",r),n(Xx,o+".quaternion",i,"rot",r),n(Zx,o+".scale",i,"scl",r)}}if(0===r.length)return null;return new this(i,s,r,a)}resetDuration(){let t=0;for(let e=0,n=this.tracks.length;e!==n;++e){const n=this.tracks[e];t=Math.max(t,n.times[n.times.length-1])}return this.duration=t,this}trim(){for(let t=0;t<this.tracks.length;t++)this.tracks[t].trim(0,this.duration);return this}validate(){let t=!0;for(let e=0;e<this.tracks.length;e++)t=t&&this.tracks[e].validate();return t}optimize(){for(let t=0;t<this.tracks.length;t++)this.tracks[t].optimize();return this}clone(){const t=[];for(let e=0;e<this.tracks.length;e++)t.push(this.tracks[e].clone());return new this.constructor(this.name,this.duration,t,this.blendMode)}toJSON(){return this.constructor.toJSON(this)}}function tS(t){if(void 0===t.type)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const e=function(t){switch(t.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return Yx;case"vector":case"vector2":case"vector3":case"vector4":return Zx;case"color":return Wx;case"quaternion":return Xx;case"bool":case"boolean":return Qx;case"string":return $x}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+t)}(t.type);if(void 0===t.times){const e=[],n=[];Fx(t.keys,e,n,"value"),t.times=e,t.values=n}return void 0!==e.parse?e.parse(t):new e(t.name,t.times,t.values,t.interpolation)}const eS={enabled:!1,files:{},add:function(t,e){!1!==this.enabled&&(this.files[t]=e)},get:function(t){if(!1!==this.enabled)return this.files[t]},remove:function(t){delete this.files[t]},clear:function(){this.files={}}};class nS{constructor(t,e,n){const r=this;let i,o=!1,a=0,s=0;const l=[];this.onStart=void 0,this.onLoad=t,this.onProgress=e,this.onError=n,this.itemStart=function(t){s++,!1===o&&void 0!==r.onStart&&r.onStart(t,a,s),o=!0},this.itemEnd=function(t){a++,void 0!==r.onProgress&&r.onProgress(t,a,s),a===s&&(o=!1,void 0!==r.onLoad&&r.onLoad())},this.itemError=function(t){void 0!==r.onError&&r.onError(t)},this.resolveURL=function(t){return i?i(t):t},this.setURLModifier=function(t){return i=t,this},this.addHandler=function(t,e){return l.push(t,e),this},this.removeHandler=function(t){const e=l.indexOf(t);return-1!==e&&l.splice(e,2),this},this.getHandler=function(t){for(let e=0,n=l.length;e<n;e+=2){const n=l[e],r=l[e+1];if(n.global&&(n.lastIndex=0),n.test(t))return r}return null}}}const rS=new nS;class iS{constructor(t){this.manager=void 0!==t?t:rS,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(t,e){const n=this;return new Promise((function(r,i){n.load(t,r,e,i)}))}parse(){}setCrossOrigin(t){return this.crossOrigin=t,this}setWithCredentials(t){return this.withCredentials=t,this}setPath(t){return this.path=t,this}setResourcePath(t){return this.resourcePath=t,this}setRequestHeader(t){return this.requestHeader=t,this}}const oS={};class aS extends Error{constructor(t,e){super(t),this.response=e}}class sS extends iS{constructor(t){super(t)}load(t,e,n,r){void 0===t&&(t=""),void 0!==this.path&&(t=this.path+t),t=this.manager.resolveURL(t);const i=eS.get(t);if(void 0!==i)return this.manager.itemStart(t),setTimeout((()=>{e&&e(i),this.manager.itemEnd(t)}),0),i;if(void 0!==oS[t])return void oS[t].push({onLoad:e,onProgress:n,onError:r});oS[t]=[],oS[t].push({onLoad:e,onProgress:n,onError:r});const o=new Request(t,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"}),a=this.mimeType,s=this.responseType;fetch(o).then((e=>{if(200===e.status||0===e.status){if(0===e.status&&console.warn("THREE.FileLoader: HTTP Status 0 received."),"undefined"==typeof ReadableStream||void 0===e.body||void 0===e.body.getReader)return e;const n=oS[t],r=e.body.getReader(),i=e.headers.get("Content-Length")||e.headers.get("X-File-Size"),o=i?parseInt(i):0,a=0!==o;let s=0;const l=new ReadableStream({start(t){!function e(){r.read().then((({done:r,value:i})=>{if(r)t.close();else{s+=i.byteLength;const r=new ProgressEvent("progress",{lengthComputable:a,loaded:s,total:o});for(let t=0,e=n.length;t<e;t++){const e=n[t];e.onProgress&&e.onProgress(r)}t.enqueue(i),e()}}))}()}});return new Response(l)}throw new aS(`fetch for "${e.url}" responded with ${e.status}: ${e.statusText}`,e)})).then((t=>{switch(s){case"arraybuffer":return t.arrayBuffer();case"blob":return t.blob();case"document":return t.text().then((t=>(new DOMParser).parseFromString(t,a)));case"json":return t.json();default:if(void 0===a)return t.text();{const e=/charset="?([^;"\s]*)"?/i.exec(a),n=e&&e[1]?e[1].toLowerCase():void 0,r=new TextDecoder(n);return t.arrayBuffer().then((t=>r.decode(t)))}}})).then((e=>{eS.add(t,e);const n=oS[t];delete oS[t];for(let t=0,r=n.length;t<r;t++){const r=n[t];r.onLoad&&r.onLoad(e)}})).catch((e=>{const n=oS[t];if(void 0===n)throw this.manager.itemError(t),e;delete oS[t];for(let t=0,r=n.length;t<r;t++){const r=n[t];r.onError&&r.onError(e)}this.manager.itemError(t)})).finally((()=>{this.manager.itemEnd(t)})),this.manager.itemStart(t)}setResponseType(t){return this.responseType=t,this}setMimeType(t){return this.mimeType=t,this}}class lS extends iS{constructor(t){super(t)}load(t,e,n,r){void 0!==this.path&&(t=this.path+t),t=this.manager.resolveURL(t);const i=this,o=eS.get(t);if(void 0!==o)return i.manager.itemStart(t),setTimeout((function(){e&&e(o),i.manager.itemEnd(t)}),0),o;const a=Ty("img");function s(){u(),eS.add(t,this),e&&e(this),i.manager.itemEnd(t)}function l(e){u(),r&&r(e),i.manager.itemError(t),i.manager.itemEnd(t)}function u(){a.removeEventListener("load",s,!1),a.removeEventListener("error",l,!1)}return a.addEventListener("load",s,!1),a.addEventListener("error",l,!1),"data:"!==t.slice(0,5)&&void 0!==this.crossOrigin&&(a.crossOrigin=this.crossOrigin),i.manager.itemStart(t),a.src=t,a}}class uS extends iS{constructor(t){super(t)}load(t,e,n,r){const i=this,o=new ZE,a=new sS(this.manager);return a.setResponseType("arraybuffer"),a.setRequestHeader(this.requestHeader),a.setPath(this.path),a.setWithCredentials(i.withCredentials),a.load(t,(function(t){const n=i.parse(t);n&&(void 0!==n.image?o.image=n.image:void 0!==n.data&&(o.image.width=n.width,o.image.height=n.height,o.image.data=n.data),o.wrapS=void 0!==n.wrapS?n.wrapS:Ng,o.wrapT=void 0!==n.wrapT?n.wrapT:Ng,o.magFilter=void 0!==n.magFilter?n.magFilter:Ug,o.minFilter=void 0!==n.minFilter?n.minFilter:Ug,o.anisotropy=void 0!==n.anisotropy?n.anisotropy:1,void 0!==n.encoding&&(o.encoding=n.encoding),void 0!==n.flipY&&(o.flipY=n.flipY),void 0!==n.format&&(o.format=n.format),void 0!==n.type&&(o.type=n.type),void 0!==n.mipmaps&&(o.mipmaps=n.mipmaps,o.minFilter=Gg),1===n.mipmapCount&&(o.minFilter=Ug),void 0!==n.generateMipmaps&&(o.generateMipmaps=n.generateMipmaps),o.needsUpdate=!0,e&&e(o,n))}),n,r),o}}class cS extends iS{constructor(t){super(t)}load(t,e,n,r){const i=new Gy,o=new lS(this.manager);return o.setCrossOrigin(this.crossOrigin),o.setPath(this.path),o.load(t,(function(t){i.image=t,i.needsUpdate=!0,void 0!==e&&e(i)}),n,r),i}}class dS extends Xb{constructor(t,e=1){super(),this.isLight=!0,this.type="Light",this.color=new By(t),this.intensity=e}dispose(){}copy(t,e){return super.copy(t,e),this.color.copy(t.color),this.intensity=t.intensity,this}toJSON(t){const e=super.toJSON(t);return e.object.color=this.color.getHex(),e.object.intensity=this.intensity,void 0!==this.groundColor&&(e.object.groundColor=this.groundColor.getHex()),void 0!==this.distance&&(e.object.distance=this.distance),void 0!==this.angle&&(e.object.angle=this.angle),void 0!==this.decay&&(e.object.decay=this.decay),void 0!==this.penumbra&&(e.object.penumbra=this.penumbra),void 0!==this.shadow&&(e.object.shadow=this.shadow.toJSON()),e}}const fS=new Sb,hS=new Ky,pS=new Ky;class mS{constructor(t){this.camera=t,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new Ay(512,512),this.map=null,this.mapPass=null,this.matrix=new Sb,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new iw,this._frameExtents=new Ay(1,1),this._viewportCount=1,this._viewports=[new Hy(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(t){const e=this.camera,n=this.matrix;hS.setFromMatrixPosition(t.matrixWorld),e.position.copy(hS),pS.setFromMatrixPosition(t.target.matrixWorld),e.lookAt(pS),e.updateMatrixWorld(),fS.multiplyMatrices(e.projectionMatrix,e.matrixWorldInverse),this._frustum.setFromProjectionMatrix(fS),n.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),n.multiply(fS)}getViewport(t){return this._viewports[t]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(t){return this.camera=t.camera.clone(),this.bias=t.bias,this.radius=t.radius,this.mapSize.copy(t.mapSize),this}clone(){return(new this.constructor).copy(this)}toJSON(){const t={};return 0!==this.bias&&(t.bias=this.bias),0!==this.normalBias&&(t.normalBias=this.normalBias),1!==this.radius&&(t.radius=this.radius),512===this.mapSize.x&&512===this.mapSize.y||(t.mapSize=this.mapSize.toArray()),t.camera=this.camera.toJSON(!1).object,delete t.camera.matrix,t}}class gS extends mS{constructor(){super(new W_(50,1,.5,500)),this.isSpotLightShadow=!0,this.focus=1}updateMatrices(t){const e=this.camera,n=2*dy*t.angle*this.focus,r=this.mapSize.width/this.mapSize.height,i=t.distance||e.far;n===e.fov&&r===e.aspect&&i===e.far||(e.fov=n,e.aspect=r,e.far=i,e.updateProjectionMatrix()),super.updateMatrices(t)}copy(t){return super.copy(t),this.focus=t.focus,this}}class vS extends dS{constructor(t,e,n=0,r=Math.PI/3,i=0,o=2){super(t,e),this.isSpotLight=!0,this.type="SpotLight",this.position.copy(Xb.DEFAULT_UP),this.updateMatrix(),this.target=new Xb,this.distance=n,this.angle=r,this.penumbra=i,this.decay=o,this.map=null,this.shadow=new gS}get power(){return this.intensity*Math.PI}set power(t){this.intensity=t/Math.PI}dispose(){this.shadow.dispose()}copy(t,e){return super.copy(t,e),this.distance=t.distance,this.angle=t.angle,this.penumbra=t.penumbra,this.decay=t.decay,this.target=t.target.clone(),this.shadow=t.shadow.clone(),this}}const yS=new Sb,bS=new Ky,_S=new Ky;class wS extends mS{constructor(){super(new W_(90,1,.5,500)),this.isPointLightShadow=!0,this._frameExtents=new Ay(4,2),this._viewportCount=6,this._viewports=[new Hy(2,1,1,1),new Hy(0,1,1,1),new Hy(3,1,1,1),new Hy(1,1,1,1),new Hy(3,0,1,1),new Hy(1,0,1,1)],this._cubeDirections=[new Ky(1,0,0),new Ky(-1,0,0),new Ky(0,0,1),new Ky(0,0,-1),new Ky(0,1,0),new Ky(0,-1,0)],this._cubeUps=[new Ky(0,1,0),new Ky(0,1,0),new Ky(0,1,0),new Ky(0,1,0),new Ky(0,0,1),new Ky(0,0,-1)]}updateMatrices(t,e=0){const n=this.camera,r=this.matrix,i=t.distance||n.far;i!==n.far&&(n.far=i,n.updateProjectionMatrix()),bS.setFromMatrixPosition(t.matrixWorld),n.position.copy(bS),_S.copy(n.position),_S.add(this._cubeDirections[e]),n.up.copy(this._cubeUps[e]),n.lookAt(_S),n.updateMatrixWorld(),r.makeTranslation(-bS.x,-bS.y,-bS.z),yS.multiplyMatrices(n.projectionMatrix,n.matrixWorldInverse),this._frustum.setFromProjectionMatrix(yS)}}class AS extends dS{constructor(t,e,n=0,r=2){super(t,e),this.isPointLight=!0,this.type="PointLight",this.distance=n,this.decay=r,this.shadow=new wS}get power(){return 4*this.intensity*Math.PI}set power(t){this.intensity=t/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(t,e){return super.copy(t,e),this.distance=t.distance,this.decay=t.decay,this.shadow=t.shadow.clone(),this}}class ES extends mS{constructor(){super(new yw(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}}class xS extends dS{constructor(t,e){super(t,e),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(Xb.DEFAULT_UP),this.updateMatrix(),this.target=new Xb,this.shadow=new ES}dispose(){this.shadow.dispose()}copy(t){return super.copy(t),this.target=t.target.clone(),this.shadow=t.shadow.clone(),this}}class SS extends dS{constructor(t,e){super(t,e),this.isAmbientLight=!0,this.type="AmbientLight"}}class TS{static decodeText(t){if("undefined"!=typeof TextDecoder)return(new TextDecoder).decode(t);let e="";for(let n=0,r=t.length;n<r;n++)e+=String.fromCharCode(t[n]);try{return decodeURIComponent(escape(e))}catch(t){return e}}static extractUrlBase(t){const e=t.lastIndexOf("/");return-1===e?"./":t.slice(0,e+1)}static resolveURL(t,e){return"string"!=typeof t||""===t?"":(/^https?:\/\//i.test(e)&&/^\//.test(t)&&(e=e.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(t)||/^data:.*,.*$/i.test(t)||/^blob:.*$/i.test(t)?t:e+t)}}class CS extends x_{constructor(){super(),this.isInstancedBufferGeometry=!0,this.type="InstancedBufferGeometry",this.instanceCount=1/0}copy(t){return super.copy(t),this.instanceCount=t.instanceCount,this}toJSON(){const t=super.toJSON();return t.instanceCount=this.instanceCount,t.isInstancedBufferGeometry=!0,t}}class IS extends iS{constructor(t){super(t),this.isImageBitmapLoader=!0,"undefined"==typeof createImageBitmap&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),"undefined"==typeof fetch&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.options={premultiplyAlpha:"none"}}setOptions(t){return this.options=t,this}load(t,e,n,r){void 0===t&&(t=""),void 0!==this.path&&(t=this.path+t),t=this.manager.resolveURL(t);const i=this,o=eS.get(t);if(void 0!==o)return i.manager.itemStart(t),setTimeout((function(){e&&e(o),i.manager.itemEnd(t)}),0),o;const a={};a.credentials="anonymous"===this.crossOrigin?"same-origin":"include",a.headers=this.requestHeader,fetch(t,a).then((function(t){return t.blob()})).then((function(t){return createImageBitmap(t,Object.assign(i.options,{colorSpaceConversion:"none"}))})).then((function(n){eS.add(t,n),e&&e(n),i.manager.itemEnd(t)})).catch((function(e){r&&r(e),i.manager.itemError(t),i.manager.itemEnd(t)})),i.manager.itemStart(t)}}class kS{constructor(t=!0){this.autoStart=t,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=PS(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let t=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){const e=PS();t=(e-this.oldTime)/1e3,this.oldTime=e,this.elapsedTime+=t}return t}}function PS(){return("undefined"==typeof performance?Date:performance).now()}class RS{constructor(t,e,n){let r,i,o;switch(this.binding=t,this.valueSize=n,e){case"quaternion":r=this._slerp,i=this._slerpAdditive,o=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(6*n),this._workIndex=5;break;case"string":case"bool":r=this._select,i=this._select,o=this._setAdditiveIdentityOther,this.buffer=new Array(5*n);break;default:r=this._lerp,i=this._lerpAdditive,o=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(5*n)}this._mixBufferRegion=r,this._mixBufferRegionAdditive=i,this._setIdentity=o,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}accumulate(t,e){const n=this.buffer,r=this.valueSize,i=t*r+r;let o=this.cumulativeWeight;if(0===o){for(let t=0;t!==r;++t)n[i+t]=n[t];o=e}else{o+=e;const t=e/o;this._mixBufferRegion(n,i,0,t,r)}this.cumulativeWeight=o}accumulateAdditive(t){const e=this.buffer,n=this.valueSize,r=n*this._addIndex;0===this.cumulativeWeightAdditive&&this._setIdentity(),this._mixBufferRegionAdditive(e,r,0,t,n),this.cumulativeWeightAdditive+=t}apply(t){const e=this.valueSize,n=this.buffer,r=t*e+e,i=this.cumulativeWeight,o=this.cumulativeWeightAdditive,a=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,i<1){const t=e*this._origIndex;this._mixBufferRegion(n,r,t,1-i,e)}o>0&&this._mixBufferRegionAdditive(n,r,this._addIndex*e,1,e);for(let t=e,i=e+e;t!==i;++t)if(n[t]!==n[t+e]){a.setValue(n,r);break}}saveOriginalState(){const t=this.binding,e=this.buffer,n=this.valueSize,r=n*this._origIndex;t.getValue(e,r);for(let t=n,i=r;t!==i;++t)e[t]=e[r+t%n];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}restoreOriginalState(){const t=3*this.valueSize;this.binding.setValue(this.buffer,t)}_setAdditiveIdentityNumeric(){const t=this._addIndex*this.valueSize,e=t+this.valueSize;for(let n=t;n<e;n++)this.buffer[n]=0}_setAdditiveIdentityQuaternion(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}_setAdditiveIdentityOther(){const t=this._origIndex*this.valueSize,e=this._addIndex*this.valueSize;for(let n=0;n<this.valueSize;n++)this.buffer[e+n]=this.buffer[t+n]}_select(t,e,n,r,i){if(r>=.5)for(let r=0;r!==i;++r)t[e+r]=t[n+r]}_slerp(t,e,n,r){Yy.slerpFlat(t,e,t,e,t,n,r)}_slerpAdditive(t,e,n,r,i){const o=this._workIndex*i;Yy.multiplyQuaternionsFlat(t,o,t,e,t,n),Yy.slerpFlat(t,e,t,e,t,o,r)}_lerp(t,e,n,r,i){const o=1-r;for(let a=0;a!==i;++a){const i=e+a;t[i]=t[i]*o+t[n+a]*r}}_lerpAdditive(t,e,n,r,i){for(let o=0;o!==i;++o){const i=e+o;t[i]=t[i]+t[n+o]*r}}}const OS="\\[\\]\\.:\\/",MS=new RegExp("["+OS+"]","g"),LS="[^"+OS+"]",DS="[^"+OS.replace("\\.","")+"]",NS=new RegExp("^"+/((?:WC+[\/:])*)/.source.replace("WC",LS)+/(WCOD+)?/.source.replace("WCOD",DS)+/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",LS)+/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",LS)+"$"),BS=["material","materials","bones","map"];class jS{constructor(t,e,n){this.path=e,this.parsedPath=n||jS.parseTrackName(e),this.node=jS.findNode(t,this.parsedPath.nodeName)||t,this.rootNode=t,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(t,e,n){return t&&t.isAnimationObjectGroup?new jS.Composite(t,e,n):new jS(t,e,n)}static sanitizeNodeName(t){return t.replace(/\s/g,"_").replace(MS,"")}static parseTrackName(t){const e=NS.exec(t);if(null===e)throw new Error("PropertyBinding: Cannot parse trackName: "+t);const n={nodeName:e[2],objectName:e[3],objectIndex:e[4],propertyName:e[5],propertyIndex:e[6]},r=n.nodeName&&n.nodeName.lastIndexOf(".");if(void 0!==r&&-1!==r){const t=n.nodeName.substring(r+1);-1!==BS.indexOf(t)&&(n.nodeName=n.nodeName.substring(0,r),n.objectName=t)}if(null===n.propertyName||0===n.propertyName.length)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+t);return n}static findNode(t,e){if(void 0===e||""===e||"."===e||-1===e||e===t.name||e===t.uuid)return t;if(t.skeleton){const n=t.skeleton.getBoneByName(e);if(void 0!==n)return n}if(t.children){const n=function(t){for(let r=0;r<t.length;r++){const i=t[r];if(i.name===e||i.uuid===e)return i;const o=n(i.children);if(o)return o}return null},r=n(t.children);if(r)return r}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(t,e){t[e]=this.targetObject[this.propertyName]}_getValue_array(t,e){const n=this.resolvedProperty;for(let r=0,i=n.length;r!==i;++r)t[e++]=n[r]}_getValue_arrayElement(t,e){t[e]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(t,e){this.resolvedProperty.toArray(t,e)}_setValue_direct(t,e){this.targetObject[this.propertyName]=t[e]}_setValue_direct_setNeedsUpdate(t,e){this.targetObject[this.propertyName]=t[e],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(t,e){this.targetObject[this.propertyName]=t[e],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(t,e){const n=this.resolvedProperty;for(let r=0,i=n.length;r!==i;++r)n[r]=t[e++]}_setValue_array_setNeedsUpdate(t,e){const n=this.resolvedProperty;for(let r=0,i=n.length;r!==i;++r)n[r]=t[e++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(t,e){const n=this.resolvedProperty;for(let r=0,i=n.length;r!==i;++r)n[r]=t[e++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(t,e){this.resolvedProperty[this.propertyIndex]=t[e]}_setValue_arrayElement_setNeedsUpdate(t,e){this.resolvedProperty[this.propertyIndex]=t[e],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(t,e){this.resolvedProperty[this.propertyIndex]=t[e],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(t,e){this.resolvedProperty.fromArray(t,e)}_setValue_fromArray_setNeedsUpdate(t,e){this.resolvedProperty.fromArray(t,e),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(t,e){this.resolvedProperty.fromArray(t,e),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(t,e){this.bind(),this.getValue(t,e)}_setValue_unbound(t,e){this.bind(),this.setValue(t,e)}bind(){let t=this.node;const e=this.parsedPath,n=e.objectName,r=e.propertyName;let i=e.propertyIndex;if(t||(t=jS.findNode(this.rootNode,e.nodeName)||this.rootNode,this.node=t),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!t)return void console.error("THREE.PropertyBinding: Trying to update node for track: "+this.path+" but it wasn't found.");if(n){let r=e.objectIndex;switch(n){case"materials":if(!t.material)return void console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);if(!t.material.materials)return void console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);t=t.material.materials;break;case"bones":if(!t.skeleton)return void console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);t=t.skeleton.bones;for(let e=0;e<t.length;e++)if(t[e].name===r){r=e;break}break;case"map":if("map"in t){t=t.map;break}if(!t.material)return void console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);if(!t.material.map)return void console.error("THREE.PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);t=t.material.map;break;default:if(void 0===t[n])return void console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);t=t[n]}if(void 0!==r){if(void 0===t[r])return void console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,t);t=t[r]}}const o=t[r];if(void 0===o){const n=e.nodeName;return void console.error("THREE.PropertyBinding: Trying to update property for track: "+n+"."+r+" but it wasn't found.",t)}let a=this.Versioning.None;this.targetObject=t,void 0!==t.needsUpdate?a=this.Versioning.NeedsUpdate:void 0!==t.matrixWorldNeedsUpdate&&(a=this.Versioning.MatrixWorldNeedsUpdate);let s=this.BindingType.Direct;if(void 0!==i){if("morphTargetInfluences"===r){if(!t.geometry)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);if(!t.geometry.morphAttributes)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);void 0!==t.morphTargetDictionary[i]&&(i=t.morphTargetDictionary[i])}s=this.BindingType.ArrayElement,this.resolvedProperty=o,this.propertyIndex=i}else void 0!==o.fromArray&&void 0!==o.toArray?(s=this.BindingType.HasFromToArray,this.resolvedProperty=o):Array.isArray(o)?(s=this.BindingType.EntireArray,this.resolvedProperty=o):this.propertyName=r;this.getValue=this.GetterByBindingType[s],this.setValue=this.SetterByBindingTypeAndVersioning[s][a]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}jS.Composite=class{constructor(t,e,n){const r=n||jS.parseTrackName(e);this._targetGroup=t,this._bindings=t.subscribe_(e,r)}getValue(t,e){this.bind();const n=this._targetGroup.nCachedObjects_,r=this._bindings[n];void 0!==r&&r.getValue(t,e)}setValue(t,e){const n=this._bindings;for(let r=this._targetGroup.nCachedObjects_,i=n.length;r!==i;++r)n[r].setValue(t,e)}bind(){const t=this._bindings;for(let e=this._targetGroup.nCachedObjects_,n=t.length;e!==n;++e)t[e].bind()}unbind(){const t=this._bindings;for(let e=this._targetGroup.nCachedObjects_,n=t.length;e!==n;++e)t[e].unbind()}},jS.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3},jS.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2},jS.prototype.GetterByBindingType=[jS.prototype._getValue_direct,jS.prototype._getValue_array,jS.prototype._getValue_arrayElement,jS.prototype._getValue_toArray],jS.prototype.SetterByBindingTypeAndVersioning=[[jS.prototype._setValue_direct,jS.prototype._setValue_direct_setNeedsUpdate,jS.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[jS.prototype._setValue_array,jS.prototype._setValue_array_setNeedsUpdate,jS.prototype._setValue_array_setMatrixWorldNeedsUpdate],[jS.prototype._setValue_arrayElement,jS.prototype._setValue_arrayElement_setNeedsUpdate,jS.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[jS.prototype._setValue_fromArray,jS.prototype._setValue_fromArray_setNeedsUpdate,jS.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];class zS{constructor(t,e,n=null,r=e.blendMode){this._mixer=t,this._clip=e,this._localRoot=n,this.blendMode=r;const i=e.tracks,o=i.length,a=new Array(o),s={endingStart:Vv,endingEnd:Vv};for(let t=0;t!==o;++t){const e=i[t].createInterpolant(null);a[t]=e,e.settings=s}this._interpolantSettings=s,this._interpolants=a,this._propertyBindings=new Array(o),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=2201,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}play(){return this._mixer._activateAction(this),this}stop(){return this._mixer._deactivateAction(this),this.reset()}reset(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}isRunning(){return this.enabled&&!this.paused&&0!==this.timeScale&&null===this._startTime&&this._mixer._isActiveAction(this)}isScheduled(){return this._mixer._isActiveAction(this)}startAt(t){return this._startTime=t,this}setLoop(t,e){return this.loop=t,this.repetitions=e,this}setEffectiveWeight(t){return this.weight=t,this._effectiveWeight=this.enabled?t:0,this.stopFading()}getEffectiveWeight(){return this._effectiveWeight}fadeIn(t){return this._scheduleFading(t,0,1)}fadeOut(t){return this._scheduleFading(t,1,0)}crossFadeFrom(t,e,n){if(t.fadeOut(e),this.fadeIn(e),n){const n=this._clip.duration,r=t._clip.duration,i=r/n,o=n/r;t.warp(1,i,e),this.warp(o,1,e)}return this}crossFadeTo(t,e,n){return t.crossFadeFrom(this,e,n)}stopFading(){const t=this._weightInterpolant;return null!==t&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(t)),this}setEffectiveTimeScale(t){return this.timeScale=t,this._effectiveTimeScale=this.paused?0:t,this.stopWarping()}getEffectiveTimeScale(){return this._effectiveTimeScale}setDuration(t){return this.timeScale=this._clip.duration/t,this.stopWarping()}syncWith(t){return this.time=t.time,this.timeScale=t.timeScale,this.stopWarping()}halt(t){return this.warp(this._effectiveTimeScale,0,t)}warp(t,e,n){const r=this._mixer,i=r.time,o=this.timeScale;let a=this._timeScaleInterpolant;null===a&&(a=r._lendControlInterpolant(),this._timeScaleInterpolant=a);const s=a.parameterPositions,l=a.sampleValues;return s[0]=i,s[1]=i+n,l[0]=t/o,l[1]=e/o,this}stopWarping(){const t=this._timeScaleInterpolant;return null!==t&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(t)),this}getMixer(){return this._mixer}getClip(){return this._clip}getRoot(){return this._localRoot||this._mixer._root}_update(t,e,n,r){if(!this.enabled)return void this._updateWeight(t);const i=this._startTime;if(null!==i){const r=(t-i)*n;r<0||0===n?e=0:(this._startTime=null,e=n*r)}e*=this._updateTimeScale(t);const o=this._updateTime(e),a=this._updateWeight(t);if(a>0){const t=this._interpolants,e=this._propertyBindings;if(2501===this.blendMode)for(let n=0,r=t.length;n!==r;++n)t[n].evaluate(o),e[n].accumulateAdditive(a);else for(let n=0,i=t.length;n!==i;++n)t[n].evaluate(o),e[n].accumulate(r,a)}}_updateWeight(t){let e=0;if(this.enabled){e=this.weight;const n=this._weightInterpolant;if(null!==n){const r=n.evaluate(t)[0];e*=r,t>n.parameterPositions[1]&&(this.stopFading(),0===r&&(this.enabled=!1))}}return this._effectiveWeight=e,e}_updateTimeScale(t){let e=0;if(!this.paused){e=this.timeScale;const n=this._timeScaleInterpolant;if(null!==n){e*=n.evaluate(t)[0],t>n.parameterPositions[1]&&(this.stopWarping(),0===e?this.paused=!0:this.timeScale=e)}}return this._effectiveTimeScale=e,e}_updateTime(t){const e=this._clip.duration,n=this.loop;let r=this.time+t,i=this._loopCount;const o=2202===n;if(0===t)return-1===i||!o||1&~i?r:e-r;if(2200===n){-1===i&&(this._loopCount=0,this._setEndings(!0,!0,!1));t:{if(r>=e)r=e;else{if(!(r<0)){this.time=r;break t}r=0}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=r,this._mixer.dispatchEvent({type:"finished",action:this,direction:t<0?-1:1})}}else{if(-1===i&&(t>=0?(i=0,this._setEndings(!0,0===this.repetitions,o)):this._setEndings(0===this.repetitions,!0,o)),r>=e||r<0){const n=Math.floor(r/e);r-=e*n,i+=Math.abs(n);const a=this.repetitions-i;if(a<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,r=t>0?e:0,this.time=r,this._mixer.dispatchEvent({type:"finished",action:this,direction:t>0?1:-1});else{if(1===a){const e=t<0;this._setEndings(e,!e,o)}else this._setEndings(!1,!1,o);this._loopCount=i,this.time=r,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:n})}}else this.time=r;if(o&&!(1&~i))return e-r}return r}_setEndings(t,e,n){const r=this._interpolantSettings;n?(r.endingStart=Qv,r.endingEnd=Qv):(r.endingStart=t?this.zeroSlopeAtStart?Qv:Vv:Wv,r.endingEnd=e?this.zeroSlopeAtEnd?Qv:Vv:Wv)}_scheduleFading(t,e,n){const r=this._mixer,i=r.time;let o=this._weightInterpolant;null===o&&(o=r._lendControlInterpolant(),this._weightInterpolant=o);const a=o.parameterPositions,s=o.sampleValues;return a[0]=i,s[0]=e,a[1]=i+t,s[1]=n,this}}const FS=new Float32Array(1);class US extends sy{constructor(t){super(),this._root=t,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}_bindAction(t,e){const n=t._localRoot||this._root,r=t._clip.tracks,i=r.length,o=t._propertyBindings,a=t._interpolants,s=n.uuid,l=this._bindingsByRootAndName;let u=l[s];void 0===u&&(u={},l[s]=u);for(let t=0;t!==i;++t){const i=r[t],l=i.name;let c=u[l];if(void 0!==c)++c.referenceCount,o[t]=c;else{if(c=o[t],void 0!==c){null===c._cacheIndex&&(++c.referenceCount,this._addInactiveBinding(c,s,l));continue}const r=e&&e._propertyBindings[t].binding.parsedPath;c=new RS(jS.create(n,l,r),i.ValueTypeName,i.getValueSize()),++c.referenceCount,this._addInactiveBinding(c,s,l),o[t]=c}a[t].resultBuffer=c.buffer}}_activateAction(t){if(!this._isActiveAction(t)){if(null===t._cacheIndex){const e=(t._localRoot||this._root).uuid,n=t._clip.uuid,r=this._actionsByClip[n];this._bindAction(t,r&&r.knownActions[0]),this._addInactiveAction(t,n,e)}const e=t._propertyBindings;for(let t=0,n=e.length;t!==n;++t){const n=e[t];0==n.useCount++&&(this._lendBinding(n),n.saveOriginalState())}this._lendAction(t)}}_deactivateAction(t){if(this._isActiveAction(t)){const e=t._propertyBindings;for(let t=0,n=e.length;t!==n;++t){const n=e[t];0==--n.useCount&&(n.restoreOriginalState(),this._takeBackBinding(n))}this._takeBackAction(t)}}_initMemoryManager(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;const t=this;this.stats={actions:{get total(){return t._actions.length},get inUse(){return t._nActiveActions}},bindings:{get total(){return t._bindings.length},get inUse(){return t._nActiveBindings}},controlInterpolants:{get total(){return t._controlInterpolants.length},get inUse(){return t._nActiveControlInterpolants}}}}_isActiveAction(t){const e=t._cacheIndex;return null!==e&&e<this._nActiveActions}_addInactiveAction(t,e,n){const r=this._actions,i=this._actionsByClip;let o=i[e];if(void 0===o)o={knownActions:[t],actionByRoot:{}},t._byClipCacheIndex=0,i[e]=o;else{const e=o.knownActions;t._byClipCacheIndex=e.length,e.push(t)}t._cacheIndex=r.length,r.push(t),o.actionByRoot[n]=t}_removeInactiveAction(t){const e=this._actions,n=e[e.length-1],r=t._cacheIndex;n._cacheIndex=r,e[r]=n,e.pop(),t._cacheIndex=null;const i=t._clip.uuid,o=this._actionsByClip,a=o[i],s=a.knownActions,l=s[s.length-1],u=t._byClipCacheIndex;l._byClipCacheIndex=u,s[u]=l,s.pop(),t._byClipCacheIndex=null;delete a.actionByRoot[(t._localRoot||this._root).uuid],0===s.length&&delete o[i],this._removeInactiveBindingsForAction(t)}_removeInactiveBindingsForAction(t){const e=t._propertyBindings;for(let t=0,n=e.length;t!==n;++t){const n=e[t];0==--n.referenceCount&&this._removeInactiveBinding(n)}}_lendAction(t){const e=this._actions,n=t._cacheIndex,r=this._nActiveActions++,i=e[r];t._cacheIndex=r,e[r]=t,i._cacheIndex=n,e[n]=i}_takeBackAction(t){const e=this._actions,n=t._cacheIndex,r=--this._nActiveActions,i=e[r];t._cacheIndex=r,e[r]=t,i._cacheIndex=n,e[n]=i}_addInactiveBinding(t,e,n){const r=this._bindingsByRootAndName,i=this._bindings;let o=r[e];void 0===o&&(o={},r[e]=o),o[n]=t,t._cacheIndex=i.length,i.push(t)}_removeInactiveBinding(t){const e=this._bindings,n=t.binding,r=n.rootNode.uuid,i=n.path,o=this._bindingsByRootAndName,a=o[r],s=e[e.length-1],l=t._cacheIndex;s._cacheIndex=l,e[l]=s,e.pop(),delete a[i],0===Object.keys(a).length&&delete o[r]}_lendBinding(t){const e=this._bindings,n=t._cacheIndex,r=this._nActiveBindings++,i=e[r];t._cacheIndex=r,e[r]=t,i._cacheIndex=n,e[n]=i}_takeBackBinding(t){const e=this._bindings,n=t._cacheIndex,r=--this._nActiveBindings,i=e[r];t._cacheIndex=r,e[r]=t,i._cacheIndex=n,e[n]=i}_lendControlInterpolant(){const t=this._controlInterpolants,e=this._nActiveControlInterpolants++;let n=t[e];return void 0===n&&(n=new Gx(new Float32Array(2),new Float32Array(2),1,FS),n.__cacheIndex=e,t[e]=n),n}_takeBackControlInterpolant(t){const e=this._controlInterpolants,n=t.__cacheIndex,r=--this._nActiveControlInterpolants,i=e[r];t.__cacheIndex=r,e[r]=t,i.__cacheIndex=n,e[n]=i}clipAction(t,e,n){const r=e||this._root,i=r.uuid;let o="string"==typeof t?Jx.findByName(r,t):t;const a=null!==o?o.uuid:t,s=this._actionsByClip[a];let l=null;if(void 0===n&&(n=null!==o?o.blendMode:Yv),void 0!==s){const t=s.actionByRoot[i];if(void 0!==t&&t.blendMode===n)return t;l=s.knownActions[0],null===o&&(o=l._clip)}if(null===o)return null;const u=new zS(this,o,e,n);return this._bindAction(u,l),this._addInactiveAction(u,a,i),u}existingAction(t,e){const n=e||this._root,r=n.uuid,i="string"==typeof t?Jx.findByName(n,t):t,o=i?i.uuid:t,a=this._actionsByClip[o];return void 0!==a&&a.actionByRoot[r]||null}stopAllAction(){const t=this._actions;for(let e=this._nActiveActions-1;e>=0;--e)t[e].stop();return this}update(t){t*=this.timeScale;const e=this._actions,n=this._nActiveActions,r=this.time+=t,i=Math.sign(t),o=this._accuIndex^=1;for(let a=0;a!==n;++a){e[a]._update(r,t,i,o)}const a=this._bindings,s=this._nActiveBindings;for(let t=0;t!==s;++t)a[t].apply(o);return this}setTime(t){this.time=0;for(let t=0;t<this._actions.length;t++)this._actions[t].time=0;return this.update(t)}getRoot(){return this._root}uncacheClip(t){const e=this._actions,n=t.uuid,r=this._actionsByClip,i=r[n];if(void 0!==i){const t=i.knownActions;for(let n=0,r=t.length;n!==r;++n){const r=t[n];this._deactivateAction(r);const i=r._cacheIndex,o=e[e.length-1];r._cacheIndex=null,r._byClipCacheIndex=null,o._cacheIndex=i,e[i]=o,e.pop(),this._removeInactiveBindingsForAction(r)}delete r[n]}}uncacheRoot(t){const e=t.uuid,n=this._actionsByClip;for(const t in n){const r=n[t].actionByRoot[e];void 0!==r&&(this._deactivateAction(r),this._removeInactiveAction(r))}const r=this._bindingsByRootAndName[e];if(void 0!==r)for(const t in r){const e=r[t];e.restoreOriginalState(),this._removeInactiveBinding(e)}}uncacheAction(t,e){const n=this.existingAction(t,e);null!==n&&(this._deactivateAction(n),this._removeInactiveAction(n))}}class qS{constructor(t,e,n=0,r=1/0){this.ray=new xb(t,e),this.near=n,this.far=r,this.camera=null,this.layers=new Nb,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(t,e){this.ray.set(t,e)}setFromCamera(t,e){e.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(e.matrixWorld),this.ray.direction.set(t.x,t.y,.5).unproject(e).sub(this.ray.origin).normalize(),this.camera=e):e.isOrthographicCamera?(this.ray.origin.set(t.x,t.y,(e.near+e.far)/(e.near-e.far)).unproject(e),this.ray.direction.set(0,0,-1).transformDirection(e.matrixWorld),this.camera=e):console.error("THREE.Raycaster: Unsupported camera type: "+e.type)}intersectObject(t,e=!0,n=[]){return HS(t,this,n,e),n.sort(GS),n}intersectObjects(t,e=!0,n=[]){for(let r=0,i=t.length;r<i;r++)HS(t[r],this,n,e);return n.sort(GS),n}}function GS(t,e){return t.distance-e.distance}function HS(t,e,n,r){if(t.layers.test(e.layers)&&t.raycast(e,n),!0===r){const r=t.children;for(let t=0,i=r.length;t<i;t++)HS(r[t],e,n,!0)}}class VS{constructor(t=1,e=0,n=0){return this.radius=t,this.phi=e,this.theta=n,this}set(t,e,n){return this.radius=t,this.phi=e,this.theta=n,this}copy(t){return this.radius=t.radius,this.phi=t.phi,this.theta=t.theta,this}makeSafe(){const t=1e-6;return this.phi=Math.max(t,Math.min(Math.PI-t,this.phi)),this}setFromVector3(t){return this.setFromCartesianCoords(t.x,t.y,t.z)}setFromCartesianCoords(t,e,n){return this.radius=Math.sqrt(t*t+e*e+n*n),0===this.radius?(this.theta=0,this.phi=0):(this.theta=Math.atan2(t,n),this.phi=Math.acos(hy(e/this.radius,-1,1))),this}clone(){return(new this.constructor).copy(this)}}const QS=new Ay;class WS{constructor(t=new Ay(1/0,1/0),e=new Ay(-1/0,-1/0)){this.isBox2=!0,this.min=t,this.max=e}set(t,e){return this.min.copy(t),this.max.copy(e),this}setFromPoints(t){this.makeEmpty();for(let e=0,n=t.length;e<n;e++)this.expandByPoint(t[e]);return this}setFromCenterAndSize(t,e){const n=QS.copy(e).multiplyScalar(.5);return this.min.copy(t).sub(n),this.max.copy(t).add(n),this}clone(){return(new this.constructor).copy(this)}copy(t){return this.min.copy(t.min),this.max.copy(t.max),this}makeEmpty(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y}getCenter(t){return this.isEmpty()?t.set(0,0):t.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(t){return this.isEmpty()?t.set(0,0):t.subVectors(this.max,this.min)}expandByPoint(t){return this.min.min(t),this.max.max(t),this}expandByVector(t){return this.min.sub(t),this.max.add(t),this}expandByScalar(t){return this.min.addScalar(-t),this.max.addScalar(t),this}containsPoint(t){return!(t.x<this.min.x||t.x>this.max.x||t.y<this.min.y||t.y>this.max.y)}containsBox(t){return this.min.x<=t.min.x&&t.max.x<=this.max.x&&this.min.y<=t.min.y&&t.max.y<=this.max.y}getParameter(t,e){return e.set((t.x-this.min.x)/(this.max.x-this.min.x),(t.y-this.min.y)/(this.max.y-this.min.y))}intersectsBox(t){return!(t.max.x<this.min.x||t.min.x>this.max.x||t.max.y<this.min.y||t.min.y>this.max.y)}clampPoint(t,e){return e.copy(t).clamp(this.min,this.max)}distanceToPoint(t){return QS.copy(t).clamp(this.min,this.max).sub(t).length()}intersect(t){return this.min.max(t.min),this.max.min(t.max),this}union(t){return this.min.min(t.min),this.max.max(t.max),this}translate(t){return this.min.add(t),this.max.add(t),this}equals(t){return t.min.equals(this.min)&&t.max.equals(this.max)}}const YS=new Ky,KS=new Ky,XS=new Ky;class $S extends Xb{constructor(t,e,n){super(),this.light=t,this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1,this.color=n,this.type="DirectionalLightHelper",void 0===e&&(e=1);let r=new x_;r.setAttribute("position",new g_([-e,e,0,e,e,0,e,-e,0,-e,-e,0,-e,e,0],3));const i=new ux({fog:!1,toneMapped:!1});this.lightPlane=new mx(r,i),this.add(this.lightPlane),r=new x_,r.setAttribute("position",new g_([0,0,0,0,0,1],3)),this.targetLine=new mx(r,i),this.add(this.targetLine),this.update()}dispose(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),YS.setFromMatrixPosition(this.light.matrixWorld),KS.setFromMatrixPosition(this.light.target.matrixWorld),XS.subVectors(KS,YS),this.lightPlane.lookAt(KS),void 0!==this.color?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(KS),this.targetLine.scale.z=XS.length()}}class ZS extends yx{constructor(t=1){const e=[0,0,0,t,0,0,0,0,0,0,t,0,0,0,0,0,0,t],n=new x_;n.setAttribute("position",new g_(e,3)),n.setAttribute("color",new g_([1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],3));super(n,new ux({vertexColors:!0,toneMapped:!1})),this.type="AxesHelper"}setColors(t,e,n){const r=new By,i=this.geometry.attributes.color.array;return r.set(t),r.toArray(i,0),r.toArray(i,3),r.set(e),r.toArray(i,6),r.toArray(i,9),r.set(n),r.toArray(i,12),r.toArray(i,15),this.geometry.attributes.color.needsUpdate=!0,this}dispose(){this.geometry.dispose(),this.material.dispose()}}const JS=tT();function tT(){const t=new ArrayBuffer(4),e=new Float32Array(t),n=new Uint32Array(t),r=new Uint32Array(512),i=new Uint32Array(512);for(let t=0;t<256;++t){const e=t-127;e<-27?(r[t]=0,r[256|t]=32768,i[t]=24,i[256|t]=24):e<-14?(r[t]=1024>>-e-14,r[256|t]=1024>>-e-14|32768,i[t]=-e-1,i[256|t]=-e-1):e<=15?(r[t]=e+15<<10,r[256|t]=e+15<<10|32768,i[t]=13,i[256|t]=13):e<128?(r[t]=31744,r[256|t]=64512,i[t]=24,i[256|t]=24):(r[t]=31744,r[256|t]=64512,i[t]=13,i[256|t]=13)}const o=new Uint32Array(2048),a=new Uint32Array(64),s=new Uint32Array(64);for(let t=1;t<1024;++t){let e=t<<13,n=0;for(;!(8388608&e);)e<<=1,n-=8388608;e&=-8388609,n+=947912704,o[t]=e|n}for(let t=1024;t<2048;++t)o[t]=939524096+(t-1024<<13);for(let t=1;t<31;++t)a[t]=t<<23;a[31]=1199570944,a[32]=2147483648;for(let t=33;t<63;++t)a[t]=2147483648+(t-32<<23);a[63]=3347054592;for(let t=1;t<64;++t)32!==t&&(s[t]=1024);return{floatView:e,uint32View:n,baseTable:r,shiftTable:i,mantissaTable:o,exponentTable:a,offsetTable:s}}var eT=Object.freeze({__proto__:null,fromHalfFloat:function(t){const e=t>>10;return JS.uint32View[0]=JS.mantissaTable[JS.offsetTable[e]+(1023&t)]+JS.exponentTable[e],JS.floatView[0]},toHalfFloat:function(t){Math.abs(t)>65504&&console.warn("THREE.DataUtils.toHalfFloat(): Value out of range."),t=hy(t,-65504,65504),JS.floatView[0]=t;const e=JS.uint32View[0],n=e>>23&511;return JS.baseTable[n]+((8388607&e)>>JS.shiftTable[n])}});"undefined"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:Im}})),"undefined"!=typeof window&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=Im);const nT={uniforms:{tDiffuse:{value:null},opacity:{value:1}},vertexShader:"\n\n\t\tvarying vec2 vUv;\n\n\t\tvoid main() {\n\n\t\t\tvUv = uv;\n\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\n\t\t}",fragmentShader:"\n\n\t\tuniform float opacity;\n\n\t\tuniform sampler2D tDiffuse;\n\n\t\tvarying vec2 vUv;\n\n\t\tvoid main() {\n\n\t\t\tgl_FragColor = texture2D( tDiffuse, vUv );\n\t\t\tgl_FragColor.a *= opacity;\n\n\n\t\t}"};class rT{constructor(){this.enabled=!0,this.needsSwap=!0,this.clear=!1,this.renderToScreen=!1}setSize(){}render(){console.error("THREE.Pass: .render() must be implemented in derived pass.")}dispose(){}}const iT=new yw(-1,1,1,-1,0,1),oT=new x_;oT.setAttribute("position",new g_([-1,3,0,-1,-1,0,3,-1,0],3)),oT.setAttribute("uv",new g_([0,2,0,0,2,0],2));class aT{constructor(t){this._mesh=new j_(oT,t)}dispose(){this._mesh.geometry.dispose()}render(t){t.render(this._mesh,iT)}get material(){return this._mesh.material}set material(t){this._mesh.material=t}}class sT extends rT{constructor(t,e){super(),this.textureID=void 0!==e?e:"tDiffuse",t instanceof V_?(this.uniforms=t.uniforms,this.material=t):t&&(this.uniforms=H_.clone(t.uniforms),this.material=new V_({defines:Object.assign({},t.defines),uniforms:this.uniforms,vertexShader:t.vertexShader,fragmentShader:t.fragmentShader})),this.fsQuad=new aT(this.material)}render(t,e,n){this.uniforms[this.textureID]&&(this.uniforms[this.textureID].value=n.texture),this.fsQuad.material=this.material,this.renderToScreen?(t.setRenderTarget(null),this.fsQuad.render(t)):(t.setRenderTarget(e),this.clear&&t.clear(t.autoClearColor,t.autoClearDepth,t.autoClearStencil),this.fsQuad.render(t))}dispose(){this.material.dispose(),this.fsQuad.dispose()}}class lT extends rT{constructor(t,e){super(),this.scene=t,this.camera=e,this.clear=!0,this.needsSwap=!1,this.inverse=!1}render(t,e,n){const r=t.getContext(),i=t.state;let o,a;i.buffers.color.setMask(!1),i.buffers.depth.setMask(!1),i.buffers.color.setLocked(!0),i.buffers.depth.setLocked(!0),this.inverse?(o=0,a=1):(o=1,a=0),i.buffers.stencil.setTest(!0),i.buffers.stencil.setOp(r.REPLACE,r.REPLACE,r.REPLACE),i.buffers.stencil.setFunc(r.ALWAYS,o,4294967295),i.buffers.stencil.setClear(a),i.buffers.stencil.setLocked(!0),t.setRenderTarget(n),this.clear&&t.clear(),t.render(this.scene,this.camera),t.setRenderTarget(e),this.clear&&t.clear(),t.render(this.scene,this.camera),i.buffers.color.setLocked(!1),i.buffers.depth.setLocked(!1),i.buffers.stencil.setLocked(!1),i.buffers.stencil.setFunc(r.EQUAL,1,4294967295),i.buffers.stencil.setOp(r.KEEP,r.KEEP,r.KEEP),i.buffers.stencil.setLocked(!0)}}class uT extends rT{constructor(){super(),this.needsSwap=!1}render(t){t.state.buffers.stencil.setLocked(!1),t.state.buffers.stencil.setTest(!1)}}class cT{constructor(t,e){if(this.renderer=t,void 0===e){const n=t.getSize(new Ay);this._pixelRatio=t.getPixelRatio(),this._width=n.width,this._height=n.height,(e=new Vy(this._width*this._pixelRatio,this._height*this._pixelRatio)).texture.name="EffectComposer.rt1"}else this._pixelRatio=1,this._width=e.width,this._height=e.height;this.renderTarget1=e,this.renderTarget2=e.clone(),this.renderTarget2.texture.name="EffectComposer.rt2",this.writeBuffer=this.renderTarget1,this.readBuffer=this.renderTarget2,this.renderToScreen=!0,this.passes=[],this.copyPass=new sT(nT),this.clock=new kS}swapBuffers(){const t=this.readBuffer;this.readBuffer=this.writeBuffer,this.writeBuffer=t}addPass(t){this.passes.push(t),t.setSize(this._width*this._pixelRatio,this._height*this._pixelRatio)}insertPass(t,e){this.passes.splice(e,0,t),t.setSize(this._width*this._pixelRatio,this._height*this._pixelRatio)}removePass(t){const e=this.passes.indexOf(t);-1!==e&&this.passes.splice(e,1)}isLastEnabledPass(t){for(let e=t+1;e<this.passes.length;e++)if(this.passes[e].enabled)return!1;return!0}render(t){void 0===t&&(t=this.clock.getDelta());const e=this.renderer.getRenderTarget();let n=!1;for(let e=0,r=this.passes.length;e<r;e++){const r=this.passes[e];if(!1!==r.enabled){if(r.renderToScreen=this.renderToScreen&&this.isLastEnabledPass(e),r.render(this.renderer,this.writeBuffer,this.readBuffer,t,n),r.needsSwap){if(n){const e=this.renderer.getContext(),n=this.renderer.state.buffers.stencil;n.setFunc(e.NOTEQUAL,1,4294967295),this.copyPass.render(this.renderer,this.writeBuffer,this.readBuffer,t),n.setFunc(e.EQUAL,1,4294967295)}this.swapBuffers()}void 0!==lT&&(r instanceof lT?n=!0:r instanceof uT&&(n=!1))}}this.renderer.setRenderTarget(e)}reset(t){if(void 0===t){const e=this.renderer.getSize(new Ay);this._pixelRatio=this.renderer.getPixelRatio(),this._width=e.width,this._height=e.height,(t=this.renderTarget1.clone()).setSize(this._width*this._pixelRatio,this._height*this._pixelRatio)}this.renderTarget1.dispose(),this.renderTarget2.dispose(),this.renderTarget1=t,this.renderTarget2=t.clone(),this.writeBuffer=this.renderTarget1,this.readBuffer=this.renderTarget2}setSize(t,e){this._width=t,this._height=e;const n=this._width*this._pixelRatio,r=this._height*this._pixelRatio;this.renderTarget1.setSize(n,r),this.renderTarget2.setSize(n,r);for(let t=0;t<this.passes.length;t++)this.passes[t].setSize(n,r)}setPixelRatio(t){this._pixelRatio=t,this.setSize(this._width,this._height)}dispose(){this.renderTarget1.dispose(),this.renderTarget2.dispose(),this.copyPass.dispose()}}class dT extends rT{constructor(t,e,n,r,i){super(),this.scene=t,this.camera=e,this.overrideMaterial=n,this.clearColor=r,this.clearAlpha=void 0!==i?i:0,this.clear=!0,this.clearDepth=!1,this.needsSwap=!1,this._oldClearColor=new By}render(t,e,n){const r=t.autoClear;let i,o;t.autoClear=!1,void 0!==this.overrideMaterial&&(o=this.scene.overrideMaterial,this.scene.overrideMaterial=this.overrideMaterial),this.clearColor&&(t.getClearColor(this._oldClearColor),i=t.getClearAlpha(),t.setClearColor(this.clearColor,this.clearAlpha)),this.clearDepth&&t.clearDepth(),t.setRenderTarget(this.renderToScreen?null:n),this.clear&&t.clear(t.autoClearColor,t.autoClearDepth,t.autoClearStencil),t.render(this.scene,this.camera),this.clearColor&&t.setClearColor(this._oldClearColor,i),void 0!==this.overrideMaterial&&(this.scene.overrideMaterial=o),t.autoClear=r}}const fT={type:"change"},hT={type:"start"},pT={type:"end"};class mT extends sy{constructor(t,e){super(),this.object=t,this.domElement=e,this.domElement.style.touchAction="none",this.enabled=!0,this.target=new Ky,this.minDistance=0,this.maxDistance=1/0,this.minZoom=0,this.maxZoom=1/0,this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this.minAzimuthAngle=-1/0,this.maxAzimuthAngle=1/0,this.enableDamping=!1,this.dampingFactor=.05,this.enableZoom=!0,this.zoomSpeed=1,this.enableRotate=!0,this.rotateSpeed=1,this.enablePan=!0,this.panSpeed=1,this.screenSpacePanning=!0,this.keyPanSpeed=7,this.autoRotate=!1,this.autoRotateSpeed=2,this.keys={LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",BOTTOM:"ArrowDown"},this.mouseButtons={LEFT:km,MIDDLE:Pm,RIGHT:Rm},this.touches={ONE:Om,TWO:Lm},this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this._domElementKeyEvents=null,this.getPolarAngle=function(){return a.phi},this.getAzimuthalAngle=function(){return a.theta},this.getDistance=function(){return this.object.position.distanceTo(this.target)},this.listenToKeyEvents=function(t){t.addEventListener("keydown",G),this._domElementKeyEvents=t},this.saveState=function(){n.target0.copy(n.target),n.position0.copy(n.object.position),n.zoom0=n.object.zoom},this.reset=function(){n.target.copy(n.target0),n.object.position.copy(n.position0),n.object.zoom=n.zoom0,n.object.updateProjectionMatrix(),n.dispatchEvent(fT),n.update(),i=r.NONE},this.update=function(){const e=new Ky,d=(new Yy).setFromUnitVectors(t.up,new Ky(0,1,0)),f=d.clone().invert(),h=new Ky,p=new Yy,m=2*Math.PI;return function(){const t=n.object.position;e.copy(t).sub(n.target),e.applyQuaternion(d),a.setFromVector3(e),n.autoRotate&&i===r.NONE&&E(2*Math.PI/60/60*n.autoRotateSpeed),n.enableDamping?(a.theta+=s.theta*n.dampingFactor,a.phi+=s.phi*n.dampingFactor):(a.theta+=s.theta,a.phi+=s.phi);let g=n.minAzimuthAngle,v=n.maxAzimuthAngle;return isFinite(g)&&isFinite(v)&&(g<-Math.PI?g+=m:g>Math.PI&&(g-=m),v<-Math.PI?v+=m:v>Math.PI&&(v-=m),a.theta=g<=v?Math.max(g,Math.min(v,a.theta)):a.theta>(g+v)/2?Math.max(g,a.theta):Math.min(v,a.theta)),a.phi=Math.max(n.minPolarAngle,Math.min(n.maxPolarAngle,a.phi)),a.makeSafe(),a.radius*=l,a.radius=Math.max(n.minDistance,Math.min(n.maxDistance,a.radius)),!0===n.enableDamping?n.target.addScaledVector(u,n.dampingFactor):n.target.add(u),e.setFromSpherical(a),e.applyQuaternion(f),t.copy(n.target).add(e),n.object.lookAt(n.target),!0===n.enableDamping?(s.theta*=1-n.dampingFactor,s.phi*=1-n.dampingFactor,u.multiplyScalar(1-n.dampingFactor)):(s.set(0,0,0),u.set(0,0,0)),l=1,!!(c||h.distanceToSquared(n.object.position)>o||8*(1-p.dot(n.object.quaternion))>o)&&(n.dispatchEvent(fT),h.copy(n.object.position),p.copy(n.object.quaternion),c=!1,!0)}}(),this.dispose=function(){n.domElement.removeEventListener("contextmenu",H),n.domElement.removeEventListener("pointerdown",j),n.domElement.removeEventListener("pointercancel",U),n.domElement.removeEventListener("wheel",q),n.domElement.removeEventListener("pointermove",z),n.domElement.removeEventListener("pointerup",F),null!==n._domElementKeyEvents&&n._domElementKeyEvents.removeEventListener("keydown",G)};const n=this,r={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6};let i=r.NONE;const o=1e-6,a=new VS,s=new VS;let l=1;const u=new Ky;let c=!1;const d=new Ay,f=new Ay,h=new Ay,p=new Ay,m=new Ay,g=new Ay,v=new Ay,y=new Ay,b=new Ay,_=[],w={};function A(){return Math.pow(.95,n.zoomSpeed)}function E(t){s.theta-=t}function x(t){s.phi-=t}const S=function(){const t=new Ky;return function(e,n){t.setFromMatrixColumn(n,0),t.multiplyScalar(-e),u.add(t)}}(),T=function(){const t=new Ky;return function(e,r){!0===n.screenSpacePanning?t.setFromMatrixColumn(r,1):(t.setFromMatrixColumn(r,0),t.crossVectors(n.object.up,t)),t.multiplyScalar(e),u.add(t)}}(),C=function(){const t=new Ky;return function(e,r){const i=n.domElement;if(n.object.isPerspectiveCamera){const o=n.object.position;t.copy(o).sub(n.target);let a=t.length();a*=Math.tan(n.object.fov/2*Math.PI/180),S(2*e*a/i.clientHeight,n.object.matrix),T(2*r*a/i.clientHeight,n.object.matrix)}else n.object.isOrthographicCamera?(S(e*(n.object.right-n.object.left)/n.object.zoom/i.clientWidth,n.object.matrix),T(r*(n.object.top-n.object.bottom)/n.object.zoom/i.clientHeight,n.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),n.enablePan=!1)}}();function I(t){n.object.isPerspectiveCamera?l/=t:n.object.isOrthographicCamera?(n.object.zoom=Math.max(n.minZoom,Math.min(n.maxZoom,n.object.zoom*t)),n.object.updateProjectionMatrix(),c=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),n.enableZoom=!1)}function k(t){n.object.isPerspectiveCamera?l*=t:n.object.isOrthographicCamera?(n.object.zoom=Math.max(n.minZoom,Math.min(n.maxZoom,n.object.zoom/t)),n.object.updateProjectionMatrix(),c=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),n.enableZoom=!1)}function P(t){d.set(t.clientX,t.clientY)}function R(t){p.set(t.clientX,t.clientY)}function O(){if(1===_.length)d.set(_[0].pageX,_[0].pageY);else{const t=.5*(_[0].pageX+_[1].pageX),e=.5*(_[0].pageY+_[1].pageY);d.set(t,e)}}function M(){if(1===_.length)p.set(_[0].pageX,_[0].pageY);else{const t=.5*(_[0].pageX+_[1].pageX),e=.5*(_[0].pageY+_[1].pageY);p.set(t,e)}}function L(){const t=_[0].pageX-_[1].pageX,e=_[0].pageY-_[1].pageY,n=Math.sqrt(t*t+e*e);v.set(0,n)}function D(t){if(1==_.length)f.set(t.pageX,t.pageY);else{const e=W(t),n=.5*(t.pageX+e.x),r=.5*(t.pageY+e.y);f.set(n,r)}h.subVectors(f,d).multiplyScalar(n.rotateSpeed);const e=n.domElement;E(2*Math.PI*h.x/e.clientHeight),x(2*Math.PI*h.y/e.clientHeight),d.copy(f)}function N(t){if(1===_.length)m.set(t.pageX,t.pageY);else{const e=W(t),n=.5*(t.pageX+e.x),r=.5*(t.pageY+e.y);m.set(n,r)}g.subVectors(m,p).multiplyScalar(n.panSpeed),C(g.x,g.y),p.copy(m)}function B(t){const e=W(t),r=t.pageX-e.x,i=t.pageY-e.y,o=Math.sqrt(r*r+i*i);y.set(0,o),b.set(0,Math.pow(y.y/v.y,n.zoomSpeed)),I(b.y),v.copy(y)}function j(t){!1!==n.enabled&&(0===_.length&&(n.domElement.setPointerCapture(t.pointerId),n.domElement.addEventListener("pointermove",z),n.domElement.addEventListener("pointerup",F)),function(t){_.push(t)}(t),"touch"===t.pointerType?function(t){switch(Q(t),_.length){case 1:switch(n.touches.ONE){case Om:if(!1===n.enableRotate)return;O(),i=r.TOUCH_ROTATE;break;case Mm:if(!1===n.enablePan)return;M(),i=r.TOUCH_PAN;break;default:i=r.NONE}break;case 2:switch(n.touches.TWO){case Lm:if(!1===n.enableZoom&&!1===n.enablePan)return;n.enableZoom&&L(),n.enablePan&&M(),i=r.TOUCH_DOLLY_PAN;break;case Dm:if(!1===n.enableZoom&&!1===n.enableRotate)return;n.enableZoom&&L(),n.enableRotate&&O(),i=r.TOUCH_DOLLY_ROTATE;break;default:i=r.NONE}break;default:i=r.NONE}i!==r.NONE&&n.dispatchEvent(hT)}(t):function(t){let e;switch(t.button){case 0:e=n.mouseButtons.LEFT;break;case 1:e=n.mouseButtons.MIDDLE;break;case 2:e=n.mouseButtons.RIGHT;break;default:e=-1}switch(e){case Pm:if(!1===n.enableZoom)return;!function(t){v.set(t.clientX,t.clientY)}(t),i=r.DOLLY;break;case km:if(t.ctrlKey||t.metaKey||t.shiftKey){if(!1===n.enablePan)return;R(t),i=r.PAN}else{if(!1===n.enableRotate)return;P(t),i=r.ROTATE}break;case Rm:if(t.ctrlKey||t.metaKey||t.shiftKey){if(!1===n.enableRotate)return;P(t),i=r.ROTATE}else{if(!1===n.enablePan)return;R(t),i=r.PAN}break;default:i=r.NONE}i!==r.NONE&&n.dispatchEvent(hT)}(t))}function z(t){!1!==n.enabled&&("touch"===t.pointerType?function(t){switch(Q(t),i){case r.TOUCH_ROTATE:if(!1===n.enableRotate)return;D(t),n.update();break;case r.TOUCH_PAN:if(!1===n.enablePan)return;N(t),n.update();break;case r.TOUCH_DOLLY_PAN:if(!1===n.enableZoom&&!1===n.enablePan)return;!function(t){n.enableZoom&&B(t),n.enablePan&&N(t)}(t),n.update();break;case r.TOUCH_DOLLY_ROTATE:if(!1===n.enableZoom&&!1===n.enableRotate)return;!function(t){n.enableZoom&&B(t),n.enableRotate&&D(t)}(t),n.update();break;default:i=r.NONE}}(t):function(t){switch(i){case r.ROTATE:if(!1===n.enableRotate)return;!function(t){f.set(t.clientX,t.clientY),h.subVectors(f,d).multiplyScalar(n.rotateSpeed);const e=n.domElement;E(2*Math.PI*h.x/e.clientHeight),x(2*Math.PI*h.y/e.clientHeight),d.copy(f),n.update()}(t);break;case r.DOLLY:if(!1===n.enableZoom)return;!function(t){y.set(t.clientX,t.clientY),b.subVectors(y,v),b.y>0?I(A()):b.y<0&&k(A()),v.copy(y),n.update()}(t);break;case r.PAN:if(!1===n.enablePan)return;!function(t){m.set(t.clientX,t.clientY),g.subVectors(m,p).multiplyScalar(n.panSpeed),C(g.x,g.y),p.copy(m),n.update()}(t)}}(t))}function F(t){V(t),0===_.length&&(n.domElement.releasePointerCapture(t.pointerId),n.domElement.removeEventListener("pointermove",z),n.domElement.removeEventListener("pointerup",F)),n.dispatchEvent(pT),i=r.NONE}function U(t){V(t)}function q(t){!1!==n.enabled&&!1!==n.enableZoom&&i===r.NONE&&(t.preventDefault(),n.dispatchEvent(hT),function(t){t.deltaY<0?k(A()):t.deltaY>0&&I(A()),n.update()}(t),n.dispatchEvent(pT))}function G(t){!1!==n.enabled&&!1!==n.enablePan&&function(t){let e=!1;switch(t.code){case n.keys.UP:t.ctrlKey||t.metaKey||t.shiftKey?x(2*Math.PI*n.rotateSpeed/n.domElement.clientHeight):C(0,n.keyPanSpeed),e=!0;break;case n.keys.BOTTOM:t.ctrlKey||t.metaKey||t.shiftKey?x(-2*Math.PI*n.rotateSpeed/n.domElement.clientHeight):C(0,-n.keyPanSpeed),e=!0;break;case n.keys.LEFT:t.ctrlKey||t.metaKey||t.shiftKey?E(2*Math.PI*n.rotateSpeed/n.domElement.clientHeight):C(n.keyPanSpeed,0),e=!0;break;case n.keys.RIGHT:t.ctrlKey||t.metaKey||t.shiftKey?E(-2*Math.PI*n.rotateSpeed/n.domElement.clientHeight):C(-n.keyPanSpeed,0),e=!0}e&&(t.preventDefault(),n.update())}(t)}function H(t){!1!==n.enabled&&t.preventDefault()}function V(t){delete w[t.pointerId];for(let e=0;e<_.length;e++)if(_[e].pointerId==t.pointerId)return void _.splice(e,1)}function Q(t){let e=w[t.pointerId];void 0===e&&(e=new Ay,w[t.pointerId]=e),e.set(t.pageX,t.pageY)}function W(t){const e=t.pointerId===_[0].pointerId?_[1]:_[0];return w[e.pointerId]}n.domElement.addEventListener("contextmenu",H),n.domElement.addEventListener("pointerdown",j),n.domElement.addEventListener("pointercancel",U),n.domElement.addEventListener("wheel",q,{passive:!1}),this.update()}}var gT=function(){var t=0,e=document.createElement("div");function n(t){return e.appendChild(t.dom),t}function r(n){for(var r=0;r<e.children.length;r++)e.children[r].style.display=r===n?"block":"none";t=n}e.style.cssText="position:fixed;top:0;left:0;cursor:pointer;opacity:0.9;z-index:10000",e.addEventListener("click",(function(n){n.preventDefault(),r(++t%e.children.length)}),!1);var i=(performance||Date).now(),o=i,a=0,s=n(new gT.Panel("FPS","#0ff","#002")),l=n(new gT.Panel("MS","#0f0","#020"));if(self.performance&&self.performance.memory)var u=n(new gT.Panel("MB","#f08","#201"));return r(0),{REVISION:16,dom:e,addPanel:n,showPanel:r,begin:function(){i=(performance||Date).now()},end:function(){a++;var t=(performance||Date).now();if(l.update(t-i,200),t>=o+1e3&&(s.update(1e3*a/(t-o),100),o=t,a=0,u)){var e=performance.memory;u.update(e.usedJSHeapSize/1048576,e.jsHeapSizeLimit/1048576)}return t},update:function(){i=this.end()},domElement:e,setMode:r}};gT.Panel=function(t,e,n){var r=1/0,i=0,o=Math.round,a=o(window.devicePixelRatio||1),s=80*a,l=48*a,u=3*a,c=2*a,d=3*a,f=15*a,h=74*a,p=30*a,m=document.createElement("canvas");m.width=s,m.height=l,m.style.cssText="width:80px;height:48px";var g=m.getContext("2d");return g.font="bold "+9*a+"px Helvetica,Arial,sans-serif",g.textBaseline="top",g.fillStyle=n,g.fillRect(0,0,s,l),g.fillStyle=e,g.fillText(t,u,c),g.fillRect(d,f,h,p),g.fillStyle=n,g.globalAlpha=.9,g.fillRect(d,f,h,p),{dom:m,update:function(l,v){r=Math.min(r,l),i=Math.max(i,l),g.fillStyle=n,g.globalAlpha=1,g.fillRect(0,0,s,f),g.fillStyle=e,g.fillText(o(l)+" "+t+" ("+o(r)+"-"+o(i)+")",u,c),g.drawImage(m,d+a,f,h-a,p,d,f,h-a,p),g.fillRect(d+h-a,f,a,p),g.fillStyle=n,g.globalAlpha=.9,g.fillRect(d+h-a,f,a,o((1-l/v)*p))}}};const vT=gT;function yT(t){return yT="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},yT(t)}function bT(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return _T(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _T(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return a=t.done,t},e:function(t){s=!0,o=t},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function _T(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function wT(){wT=function(){return e};var t,e={},n=Object.prototype,r=n.hasOwnProperty,i=Object.defineProperty||function(t,e,n){t[e]=n.value},o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",s=o.asyncIterator||"@@asyncIterator",l=o.toStringTag||"@@toStringTag";function u(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,n){return t[e]=n}}function c(t,e,n,r){var o=e&&e.prototype instanceof v?e:v,a=Object.create(o.prototype),s=new P(r||[]);return i(a,"_invoke",{value:T(t,n,s)}),a}function d(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}e.wrap=c;var f="suspendedStart",h="suspendedYield",p="executing",m="completed",g={};function v(){}function y(){}function b(){}var _={};u(_,a,(function(){return this}));var w=Object.getPrototypeOf,A=w&&w(w(R([])));A&&A!==n&&r.call(A,a)&&(_=A);var E=b.prototype=v.prototype=Object.create(_);function x(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function S(t,e){function n(i,o,a,s){var l=d(t[i],t,o);if("throw"!==l.type){var u=l.arg,c=u.value;return c&&"object"==yT(c)&&r.call(c,"__await")?e.resolve(c.__await).then((function(t){n("next",t,a,s)}),(function(t){n("throw",t,a,s)})):e.resolve(c).then((function(t){u.value=t,a(u)}),(function(t){return n("throw",t,a,s)}))}s(l.arg)}var o;i(this,"_invoke",{value:function(t,r){function i(){return new e((function(e,i){n(t,r,e,i)}))}return o=o?o.then(i,i):i()}})}function T(e,n,r){var i=f;return function(o,a){if(i===p)throw Error("Generator is already running");if(i===m){if("throw"===o)throw a;return{value:t,done:!0}}for(r.method=o,r.arg=a;;){var s=r.delegate;if(s){var l=C(s,r);if(l){if(l===g)continue;return l}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(i===f)throw i=m,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);i=p;var u=d(e,n,r);if("normal"===u.type){if(i=r.done?m:h,u.arg===g)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(i=m,r.method="throw",r.arg=u.arg)}}}function C(e,n){var r=n.method,i=e.iterator[r];if(i===t)return n.delegate=null,"throw"===r&&e.iterator.return&&(n.method="return",n.arg=t,C(e,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),g;var o=d(i,e.iterator,n.arg);if("throw"===o.type)return n.method="throw",n.arg=o.arg,n.delegate=null,g;var a=o.arg;return a?a.done?(n[e.resultName]=a.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=t),n.delegate=null,g):a:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,g)}function I(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function k(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function P(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(I,this),this.reset(!0)}function R(e){if(e||""===e){var n=e[a];if(n)return n.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var i=-1,o=function n(){for(;++i<e.length;)if(r.call(e,i))return n.value=e[i],n.done=!1,n;return n.value=t,n.done=!0,n};return o.next=o}}throw new TypeError(yT(e)+" is not iterable")}return y.prototype=b,i(E,"constructor",{value:b,configurable:!0}),i(b,"constructor",{value:y,configurable:!0}),y.displayName=u(b,l,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===y||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,b):(t.__proto__=b,u(t,l,"GeneratorFunction")),t.prototype=Object.create(E),t},e.awrap=function(t){return{__await:t}},x(S.prototype),u(S.prototype,s,(function(){return this})),e.AsyncIterator=S,e.async=function(t,n,r,i,o){void 0===o&&(o=Promise);var a=new S(c(t,n,r,i),o);return e.isGeneratorFunction(n)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},x(E),u(E,l,"Generator"),u(E,a,(function(){return this})),u(E,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),n=[];for(var r in e)n.push(r);return n.reverse(),function t(){for(;n.length;){var r=n.pop();if(r in e)return t.value=r,t.done=!1,t}return t.done=!0,t}},e.values=R,P.prototype={constructor:P,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(k),!e)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function i(r,i){return s.type="throw",s.arg=e,n.next=r,i&&(n.method="next",n.arg=t),!!i}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],s=a.completion;if("root"===a.tryLoc)return i("end");if(a.tryLoc<=this.prev){var l=r.call(a,"catchLoc"),u=r.call(a,"finallyLoc");if(l&&u){if(this.prev<a.catchLoc)return i(a.catchLoc,!0);if(this.prev<a.finallyLoc)return i(a.finallyLoc)}else if(l){if(this.prev<a.catchLoc)return i(a.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return i(a.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=t,a.arg=e,o?(this.method="next",this.next=o.finallyLoc,g):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),g},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),k(n),g}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var i=r.arg;k(n)}return i}}throw Error("illegal catch attempt")},delegateYield:function(e,n,r){return this.delegate={iterator:R(e),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=t),g}},e}function AT(t,e,n,r,i,o,a){try{var s=t[o](a),l=s.value}catch(t){return void n(t)}s.done?e(l):Promise.resolve(l).then(r,i)}function ET(t){return function(){var e=this,n=arguments;return new Promise((function(r,i){var o=t.apply(e,n);function a(t){AT(o,r,i,a,s,"next",t)}function s(t){AT(o,r,i,a,s,"throw",t)}a(void 0)}))}}function xT(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,TT(r.key),r)}}function ST(t,e,n){return(e=TT(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function TT(t){var e=function(t,e){if("object"!=yT(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=yT(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==yT(e)?e:e+""}var CT=new URLSearchParams(window.location.search).has("debug"),IT=function(){return t=function t(){var e=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),ST(this,"initClouds",ET(wT().mark((function t(){var n,r,i,o,a,s,l,u,c;return wT().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=new sw(1.44,.9),t.next=3,Promise.all(e.cloudImages.map(function(){var t=ET(wT().mark((function t(n){return wT().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",e.loadCloudTexture(n));case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()));case 3:r=t.sent,i=0,o=bT(r);try{for(o.s();!(a=o.n()).done;)s=a.value,l={uTexture:{value:null},uTime:{value:0},uTimeMultiplier:{value:.1+.1*i},uScaleAnimationMultiplier:{value:.02-.005*i},scale:{value:new Ay(1,1)},uDistortTimeMultiplier:{value:.4},uDistortAmount:{value:.7-.1*i},uScaleMultiplier:{value:1}},u=new V_({uniforms:l,vertexShader:"\n            varying vec2 vUv;\n            void main(){\n                vUv = uv;\n                gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n            }",fragmentShader:"#define GLSLIFY 1\nuniform sampler2D uTexture;\nuniform vec2 scale;\nuniform float uTime;\nuniform float uTimeMultiplier;\nuniform float uScaleAnimationMultiplier;\nuniform float uDistortAmount;\nuniform float uDistortTimeMultiplier;\nuniform float uScaleMultiplier;\nvarying vec2 vUv;\n\nvoid main() {\n  float timeFactor = (0.5 + sin(uTime * uTimeMultiplier)) * uScaleAnimationMultiplier;\n  vec2 newUV = (vUv - vec2(0.5))/(scale * uScaleMultiplier + timeFactor) + vec2(0.5);\n  newUV.xy += (sin(newUV.yx * 10. + uTime * uDistortTimeMultiplier) * .01 + sin(newUV.yx * 40. + uTime * uDistortTimeMultiplier) * .003) * uDistortAmount;\n  gl_FragColor = texture2D(uTexture, newUV);\n}",transparent:!0}),(c=new j_(n,u)).position.z=.01,c.material.uniforms.uTexture.value=s,c.targetPosition=new Ky(0,0,c.position.z),c.lerpAmount=.03+.02*i,e.clouds.push(c),e.planes.push(c),i+=1,e.cloudsGrp.add(c)}catch(t){o.e(t)}finally{o.f()}case 7:case"end":return t.stop()}}),t)})))),ST(this,"loadCloudTexture",function(){var t=ET(wT().mark((function t(n){var r;return wT().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r="".concat("./wp-content/themes/davidwhyte/resources/assets/","img/maps/").concat(n),t.abrupt("return",new Promise((function(t){e.textureLoader.load(r,(function(e){t(e)}))})));case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),ST(this,"open",(function(){var t=ti.timeline({paused:!0}),n=e.openSettings;return e.clouds.forEach((function(e){var r=e.material.uniforms.uDistortAmount.value;t.fromTo(e.material.uniforms.uDistortAmount,{value:1.1*r},{value:r,duration:n.dezoomDuration,ease:"power3.out"},0)})),t.fromTo(e.distortionShader.uniforms.distortion,{value:n.distortionIn},{value:n.distortionOut,duration:n.dezoomDuration,ease:"power3.out"},0),t.fromTo(e.distortionShader.uniforms.zoom,{value:n.zoomIn},{value:n.zoomOut,duration:n.dezoomDuration,ease:"power3.out"},0),t})),ST(this,"initControls",(function(){e.controls=new mT(e.camera,e.renderer.domElement)})),ST(this,"initGUI",(function(){e.gui=new Cm;var t=e.gui.addFolder("Barrel");t.add(e.distortionShader.uniforms.distortion,"value",0,1).name("distortion"),t.add(e.distortionShader.uniforms.zoom,"value",0,1).name("zoom"),e.gui.addFolder("plane").add(e.plane.material.uniforms.blend,"value",0,1).name("blend");var n=e.gui.addFolder("functions"),r={tr0:function(){return e.transition(0)},tr1:function(){return e.transition(1)},tr2:function(){return e.transition(2)}};n.add(r,"tr0").name("transition 0"),n.add(r,"tr1").name("transition 1"),n.add(r,"tr2").name("transition 2")})),ST(this,"transition",function(){var t=ET(wT().mark((function t(n){var r,i,o,a;return wT().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.activeIndex=n,t.next=3,e.loadBackgroundTexture(n);case 3:o=t.sent,e.setTexture(o,"uTexture2"),null===(r=e.transition)||void 0===r||null===(i=r.kill)||void 0===i||i.call(r),e.transitionTl=ti.timeline(),a=e.transitionSettings,e.transitionTl.to(e.distortionShader.uniforms.distortion,{value:a.distortionIn,duration:a.zoomDuration,ease:"power2.inOut"},0),e.transitionTl.to(e.distortionShader.uniforms.zoom,{value:a.zoomIn,duration:a.zoomDuration,ease:"power2.inOut"},0),e.transitionTl.fromTo(e.plane.material.uniforms.blend,{value:0},{value:1,ease:"expo.inOut",duration:a.zoomDuration},0),e.transitionTl.fromTo(e.overlayPlane.material.uniforms.blend,{value:0},{value:1,ease:"expo.inOut",duration:a.zoomDuration},0),e.clouds.forEach((function(t){var n=t.material.uniforms.uDistortAmount.value,r=t.material.uniforms.uScaleMultiplier.value;e.transitionTl.to(t.material.uniforms.uDistortAmount,{value:1.3*n,duration:a.zoomDuration,ease:"power1.inOut"},0),e.transitionTl.to(t.material.uniforms.uScaleMultiplier,{value:1.3*r,duration:a.zoomDuration,ease:"power1.inOut"},0),e.transitionTl.to(t.material.uniforms.uDistortAmount,{value:n,duration:a.dezoomDuration,ease:"power3.inOut"},a.zoomDuration),e.transitionTl.to(t.material.uniforms.uScaleMultiplier,{value:r,duration:a.dezoomDuration,ease:"power3.inOut"},a.zoomDuration)})),e.transitionTl.to(e.distortionShader.uniforms.distortion,{value:a.distortionOut,duration:a.dezoomDuration,ease:"power2.inOut"},a.zoomDuration),e.transitionTl.to(e.distortionShader.uniforms.zoom,{value:a.zoomOut,duration:a.dezoomDuration,ease:"power2.inOut"},a.zoomDuration),e.transitionTl.set(e.plane.material.uniforms.uTexture,{value:o},a.zoomDuration),e.transitionTl.set(e.plane.material.uniforms.blend,{value:0},a.zoomDuration);case 17:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),ST(this,"initMaterial",(function(){var t={uTexture:{value:null},uTexture2:{value:null},blend:{value:0},scale:{value:new Ay(1,1)}},n="\n        varying vec2 vUv;\n        void main(){\n            vUv = uv;\n            gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n        }",r=new V_({uniforms:t,vertexShader:n,fragmentShader:"#define GLSLIFY 1\nuniform sampler2D uTexture;\nuniform sampler2D uTexture2;\nuniform float blend;\nuniform vec2 scale;\nvarying vec2 vUv;\n\nvoid main() {\n  // vec2 newUV = (vUv - vec2(0.5))/scale + vec2(0.5);\n  vec2 newUV = vUv;\n  gl_FragColor = mix(texture2D(uTexture, newUV), texture2D(uTexture2, newUV), blend);\n}"}),i=new V_({uniforms:t,vertexShader:n,fragmentShader:"#define GLSLIFY 1\nuniform sampler2D uTexture;\nuniform sampler2D uTexture2;\nuniform float blend;\nuniform vec2 scale;\nvarying vec2 vUv;\nvoid main()\t{\n    vec2 newUV = (vUv - vec2(0.5))/scale + vec2(0.5);\n\n    float distance = length(newUV - vec2(0.5));\n\n    float centerOpacity = 0.3;\n    float edgeOpacity = 0.5;\n    float opacity = smoothstep(centerOpacity, edgeOpacity, distance);\n    opacity *= 0.6;\n\n    vec4 texel1 = texture2D(uTexture, newUV);\n    vec4 texel2 = texture2D(uTexture2, newUV);\n    //mix texel 1 and 2 \n\n    vec4 color = mix(texel1, texel2, blend);\n\n    gl_FragColor = vec4(color.rgb, opacity * color.a);\n}",transparent:!0});e.plane.material=r,e.overlayPlane.material=i})),ST(this,"loadBackgroundTexture",(function(t){var n="".concat(e.images[t]);return new Promise((function(t){e.textureLoader.load(n,(function(e){t(e)}))}))})),ST(this,"setTexture",(function(t,n){e.plane&&e.plane.material&&e.plane.material.uniforms&&e.plane.material.uniforms[n]?(e.plane.material.uniforms[n].value=t,e.overlayPlane&&e.overlayPlane.material&&e.overlayPlane.material.uniforms&&e.overlayPlane.material.uniforms[n]&&(e.overlayPlane.material.uniforms[n].value=t)):console.warn("Cannot set texture - plane or uniforms not initialized")})),ST(this,"initPlane",(function(){var t=new sw(1.44,.9);e.plane=new j_(t),e.overlayPlane=new j_(t),e.overlayPlane.scale.set(1.05,1.05,1.05),e.planes.push(e.overlayPlane,e.plane),e.mapGrp.add(e.plane)})),ST(this,"initPinnedPoints",(function(){var t=new Px(.01,32,32),n=new c_({color:16711680});e.domPinnedPoints.forEach((function(r){var i=[];r.forEach((function(r){if(r.position&&r.position.left&&r.position.top){var o=new j_(t,n),a=parseFloat(r.position.left.replace("%","")),s=parseFloat(r.position.top.replace("%",""));isNaN(a)||isNaN(s)?console.warn("Skipping point with non-numeric position"):(o.position.x=1.44*(a/100-.5),o.position.y=.9*(-s/100+.5),o.worldPos=new Ky(0,0,0),o.visible=!1,i.push(o),e.mapGrp.add(o))}else console.warn("Skipping point with invalid position data")})),e.pinnedPoints.push(i)}))})),ST(this,"initRenderer",(function(){e.renderer=new zE({canvas:e.canvas}),e.renderer.setSize(e.sizes.width,e.sizes.height),e.renderer.setPixelRatio(Math.min(window.devicePixelRatio,2))})),ST(this,"initCamera",(function(){e.camera=new yw(-1,1,1,-1,.1,3),e.camera.position.z=1,e.scene.add(e.camera)})),ST(this,"initComposer",(function(){e.distortionShader=new V_({uniforms:{tDiffuse:{value:null},distortion:{value:.3},zoom:{value:.9}},vertexShader:"\n                varying vec2 vUv;\n                void main() {\n                    vUv = uv;\n                    gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n                }",fragmentShader:"#define GLSLIFY 1\nuniform sampler2D tDiffuse;\nuniform float distortion;\nuniform float zoom;\n\nvarying vec2 vUv;\n\nvoid main() {\n    vec2 p = vUv - 0.5;\n    float r = length(p) * distortion;\n    float d = 1.0 / (1.0 + r*r);\n    vec2 uv = p * d * zoom + 0.5;\n    gl_FragColor = texture2D(tDiffuse, uv);\n}"}),e.composer=new cT(e.renderer);var t=new dT(e.scene,e.camera);e.composer.addPass(t);var n=new sT(e.distortionShader);e.composer.addPass(n)})),ST(this,"resize",(function(){e.sizes.width=window.innerWidth,e.sizes.height=window.innerHeight;var t=e.sizes.width/e.sizes.height;e.camera.left=-t,e.camera.right=t,e.camera.updateProjectionMatrix(),e.renderer.setSize(e.sizes.width,e.sizes.height),e.renderer.setPixelRatio(Math.min(window.devicePixelRatio,2));var n=1;n=t>1.6?.7+1.4*t:3,e.mapGrp.scale.set(n,n,1),e.cloudsGrp.scale.set(1.3*n,1.3*n,1);var r=1.44*n*.5,i=.9*n*.5;i-=1.05*e.camera.top,r-=1.05*e.camera.right,e.limitVector.set(r,i),e.nLimitVector.set(-r,-i),e.mapGrp.position.set(0,0,e.mapGrp.position.z),e.cloudsGrp.position.set(0,0,e.cloudsGrp.position.z),e.mouseUpPosition.set(0,0),e.dragAndDropPosition.set(0,0)})),ST(this,"mousemove",(function(t){var n=0,r=0;t.clientX&&t.clientY?(n=t.clientX/e.sizes.width*2-1,r=-t.clientY/e.sizes.height*2+1):(t.preventDefault(),n=t.touches[0].clientX/e.sizes.width*2-1,r=-t.touches[0].clientY/e.sizes.height*2+1),e.mouseIsDown&&(e.dragAndDropPosition.set(e.mouseUpPosition.x+.7*(n-e.mouseDownPosition.x),e.mouseUpPosition.y+.7*(r-e.mouseDownPosition.y)),e.dragAndDropPosition.clamp(e.nLimitVector,e.limitVector));var i=e.dragAndDropPosition.x+.02*n,o=e.dragAndDropPosition.y+.02*r;e.planeTargetPosition=new Ky(i,o,e.plane.position.z),e.overlayPlaneTargetPosition=new Ky(1.3*i,1.3*o,e.overlayPlane.position.z),e.clouds.forEach((function(t){t.targetPosition=new Ky(.01*n,.01*r,t.position.z)}))})),ST(this,"mouseDown",(function(t){t.clientX&&t.clientY?e.mouseDownPosition.set(t.clientX/e.sizes.width*2-1,-t.clientY/e.sizes.height*2+1):e.mouseDownPosition.set(t.touches[0].clientX/e.sizes.width*2-1,-t.touches[0].clientY/e.sizes.height*2+1),e.mouseIsDown=!0,e.pageElement.classList.add("grabbing")})),ST(this,"mouseUp",(function(t){e.mouseIsDown=!1,e.mouseUpPosition.set(e.planeTargetPosition.x,e.planeTargetPosition.y),e.pageElement.classList.remove("grabbing")})),ST(this,"tick",(function(){var t,n;e.pinnedPoints[e.activeIndex].forEach((function(t,n){t.getWorldPosition(t.worldPos),t.worldPos.project(e.camera),e.domPinnedPoints[e.activeIndex][n].element.style.transform="translate3d(".concat(.5*t.worldPos.x*e.sizes.width,"px, ").concat(.5*-t.worldPos.y*e.sizes.height,"px, 0)")}));var r=e.clock.getElapsedTime();e.mapGrp.position.lerp(e.planeTargetPosition,.025),e.cloudsGrp.position.lerp(e.overlayPlaneTargetPosition,.025),e.clouds.forEach((function(t){t.position.lerp(t.targetPosition,t.lerpAmount),t.material.uniforms.uTime.value=r})),e.composer.render(),null===(t=e.stats)||void 0===t||t.update(),null===(n=e.controls)||void 0===n||n.update(),e.requestAnimationFrame=requestAnimationFrame(e.tick)})),this.canvas=document.querySelector(".maps-canvas"),this.sizes={width:window.innerWidth,height:window.innerHeight},this.planeTargetPosition=new Ky(0,0,0),this.overlayPlaneTargetPosition=new Ky(0,0,.1),this.angle=0,this.radius=.01,this.originPoint=new Ky(0,0,0),this.pageElement=null,this.transitionSettings={zoomIn:.9,zoomOut:1,distortionIn:.5,distortionOut:0,zoomDuration:1.5,dezoomDuration:3.5},this.openSettings={zoomIn:.9,zoomOut:1,distortionIn:1,distortionOut:0,dezoomDuration:5},this.images=[],this.cloudImages=["clouds.png"],this.clouds=[],this.cloudTargetPositions=[],this.planes=[],this.mouseIsDown=!1,this.mouseDownPosition=new Ay(0,0),this.dragAndDropPosition=new Ay(0,0),this.mouseUpPosition=new Ay(0,0),this.domPinnedPoints=[],this.pinnedPoints=[],this.activeIndex=null,this.limitVector=new Ay(0,0),this.nLimitVector=new Ay(0,0)},e=[{key:"init",value:(r=ET(wT().mark((function t(e){return wT().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.activeIndex=e,this.scene=new UE,this.textureLoader=new cS,this.mapGrp=new OE,this.cloudsGrp=new OE,this.initPlane(),this.initPinnedPoints(),this.initMaterial(),this.initCamera(),this.initRenderer(),this.initComposer(),this.scene.add(this.mapGrp,this.cloudsGrp),t.next=14,this.initClouds();case 14:return t.t0=this,t.next=17,this.loadBackgroundTexture(e);case 17:t.t1=t.sent,t.t0.setTexture.call(t.t0,t.t1,"uTexture"),this.resize(),this.clock=new kS,CT&&(this.initControls(),this.initGUI(),this.stats=new vT,document.body.appendChild(this.stats.dom),document.querySelector("#root").remove()),this.tick();case 23:case"end":return t.stop()}}),t,this)}))),function(t){return r.apply(this,arguments)})},{key:"disposeMesh",value:function(t){t.traverse((function(t){var e,n,r,i,o,a,s,l,u;t.material&&(null===(n=t.material.map)||void 0===n||n.dispose(),null===(r=t.material.normalMap)||void 0===r||r.dispose(),null===(i=t.material.alphaMap)||void 0===i||i.dispose(),null===(o=t.material.aoMap)||void 0===o||o.dispose(),null===(a=t.material.specularMap)||void 0===a||a.dispose(),null===(s=t.material.metalnessMap)||void 0===s||s.dispose(),null===(l=t.material.emissiveMap)||void 0===l||l.dispose(),t.material.dispose(),t.material.uniforms&&Object.values(t.material.uniforms).forEach((function(t){var e;null!==(e=t.value)&&void 0!==e&&e.isTexture&&t.value.dispose()})),null!==(u=t.userData)&&void 0!==u&&u.uniforms&&Object.values(t.userData.uniforms).forEach((function(t){var e;null!==(e=t.value)&&void 0!==e&&e.isTexture&&t.value.dispose()}))),null===(e=t.geometry)||void 0===e||e.dispose()}))}},{key:"attach",value:function(){window.addEventListener("resize",this.resize),window.addEventListener("touchmove",this.mousemove),window.addEventListener("mousemove",this.mousemove),window.addEventListener("mousedown",this.mouseDown),window.addEventListener("touchstart",this.mouseDown),window.addEventListener("touchend",this.mouseUp),window.addEventListener("mouseup",this.mouseUp)}},{key:"detach",value:function(){var t=this;window.removeEventListener("resize",this.resize),window.removeEventListener("touchmove",this.mousemove),window.removeEventListener("mousemove",this.mousemove),this.planes.forEach((function(e){t.disposeMesh(e)})),window.removeEventListener("mousedown",this.mouseDown),window.removeEventListener("mouseup",this.mouseUp),window.removeEventListener("touchstart",this.mouseDown),window.removeEventListener("touchend",this.mouseUp),cancelAnimationFrame(this.requestAnimationFrame)}}],e&&xT(t.prototype,e),n&&xT(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,n,r}();function kT(t){return kT="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},kT(t)}function PT(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,NT(r.key),r)}}function RT(t,e,n){return e=MT(e),function(t,e){if(e&&("object"===kT(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,OT()?Reflect.construct(e,n||[],MT(t).constructor):e.apply(t,n))}function OT(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(OT=function(){return!!t})()}function MT(t){return MT=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},MT(t)}function LT(t,e){return LT=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},LT(t,e)}function DT(t,e,n){return(e=NT(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function NT(t){var e=function(t,e){if("object"!=kT(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=kT(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==kT(e)?e:e+""}var BT=function(t){function e(t,n){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),DT(r=RT(this,e,[t,n]),"open",(function(){r.header.classList.add("visible-bg"),r.setActive(r.urlKey,!0)})),DT(r,"openBreadcrumb",(function(){ti.matchMedia().add("(max-width: 1024px)",(function(){var t,e;null===(t=r.brTl)||void 0===t||null===(e=t.kill)||void 0===e||e.call(t),r.brTl=ti.timeline(),r.brTl.set(r.bgCover,{display:"block",pointerEvents:"all"},0),r.brTl.set(r.breadcrumb,{display:"block"},0),r.brTl.to(r.bgCover,{opacity:1,duration:.9,ease:"none"},0),r.brTl.to(r.breadcrumb,{yPercent:-100,duration:.8,ease:"power3.out"},0)}))})),DT(r,"closeBreadcrumb",(function(){ti.matchMedia().add("(max-width: 1024px)",(function(){var t,e;null===(t=r.brTl)||void 0===t||null===(e=t.kill)||void 0===e||e.call(t),r.brTl=ti.timeline(),r.brTl.set(r.bgCover,{pointerEvents:"none"}),r.brTl.to(r.bgCover,{opacity:0,duration:.5,ease:"none"},0),r.brTl.to(r.breadcrumb,{yPercent:0,duration:.5,ease:"power2.in"},0),r.brTl.set([r.bgCover,r.breadcrumb],{display:"none"})}))})),DT(r,"brItemClick",(function(t){if(!t.currentTarget.classList.contains("coming-soon")){var e=t.currentTarget.dataset.breadcrumbId;e!=r.activeIndex&&(r.setActive(parseInt(e)),r.closeBreadcrumb())}})),DT(r,"arrowClick",(function(t){if(t.currentTarget.classList.contains("right")){for(var e=r.activeIndex+1;e<r.brItems.length&&r.brItems[e].element.classList.contains("coming-soon");)e++;if(e<r.brItems.length)r.setActive(e);else{for(e=0;e<r.activeIndex&&r.brItems[e].element.classList.contains("coming-soon");)e++;e<r.activeIndex&&r.setActive(e)}}else{for(var n=r.activeIndex-1;n>=0&&r.brItems[n].element.classList.contains("coming-soon");)n--;if(n>=0)r.setActive(n);else{for(n=r.brItems.length-1;n>r.activeIndex&&r.brItems[n].element.classList.contains("coming-soon");)n--;n>r.activeIndex&&r.setActive(n)}}})),DT(r,"openWork",(function(t){r.showWorkBg(),r.showPopin(r.workButtons.find((function(e){return e.svg==t.currentTarget})))})),DT(r,"closeWork",(function(){if(r.hidePopin(r.activeWork),r.activeWork.popin){var t=r.activeWork.popin.querySelector(".videoplayer"),e=null;t&&(e=r.components.get(t)),e&&(e.forcePause(),e.onEnded())}r.hideWorkBg()})),DT(r,"showWorkBg",(function(){var t,e;null===(t=r.workTl)||void 0===t||null===(e=t.kill)||void 0===e||e.call(t),r.workTl=ti.timeline(),r.workTl.to(r.placeContents[r.activeIndex].element,{opacity:.2,ease:"none",duration:.7},0),r.workTl.to(r.breadcrumb,{opacity:.2,ease:"none",duration:.7},0),r.workTl.set(r.workCover,{display:"block"},0),r.workTl.to(r.workCover,{xPercent:0,ease:"power3.out",duration:1.5},0),r.workTl.to(r.workCover,{opacity:1,duration:.9,ease:"none"},0),r.workTl.add((function(){return r.closeWorkButton.classList.remove("hidden")}))})),DT(r,"hideWorkBg",(function(){var t,e;null===(t=r.workTl)||void 0===t||null===(e=t.kill)||void 0===e||e.call(t),r.workTl=ti.timeline(),r.workTl.to(r.placeContents[r.activeIndex].element,{opacity:1,ease:"none",duration:.7},0),r.workTl.to(r.breadcrumb,{opacity:1,ease:"none",duration:.7},0),r.workTl.add((function(){return r.closeWorkButton.classList.add("hidden")}),0),r.workTl.to(r.workCover,{opacity:0,duration:1,ease:"none"},0),r.workTl.to(r.workCover,{xPercent:r.workCoverPos,ease:"power4.in",duration:.8},.2),r.workTl.set(r.workCover,{display:"none"})})),DT(r,"showPopin",(function(t){var e,n,i,o;r.activeWork=t,null===(e=r.hPopinTl)||void 0===e||null===(n=e.kill)||void 0===n||n.call(e),null===(i=r.sPopinTl)||void 0===i||null===(o=i.kill)||void 0===o||o.call(i),r.sPopinTl=ti.timeline(),r.sPopinTl.set(t.popin,{display:"block",pointerEvents:"all"},.6),r.sPopinTl.to(t.popin,{opacity:1,duration:.6,ease:"none"},.6),r.sPopinTl.to(t.popin,{xPercent:0,duration:1.2,ease:"power4.out"},.6)})),DT(r,"hidePopin",(function(t){var e,n,i,o;null===(e=r.hPopinTl)||void 0===e||null===(n=e.kill)||void 0===n||n.call(e),null===(i=r.sPopinTl)||void 0===i||null===(o=i.kill)||void 0===o||o.call(i),r.hPopinTl=ti.timeline(),r.hPopinTl.to(t.popin,{opacity:0,duration:.4,ease:"none"},0),r.hPopinTl.to(t.popin,{xPercent:r.popinPos,duration:.8,ease:"power2.in"},0),r.hPopinTl.set(t.popin,{display:"none"}),r.hPopinTl.set(r,{activeWork:null})})),DT(r,"resize",(function(){r.oldDk!==r.viewport.medias.desktop&&r.viewport.medias.desktop&&ti.set(r.breadcrumb,{clearProps:"all"}),r.oldDk=r.viewport.medias.desktop})),r.webgl=new IT,n.components.get(document.querySelector("#header")).closeBanner(),r.bgImgs=Array.from(r.element.querySelectorAll(".bg-img")).map((function(t,e){return{desktopUrl:t.dataset.urlDesktop,mobileUrl:t.dataset.urlMobile}})),r.bgImgs.forEach((function(t){r.webgl.images.push(t.desktopUrl)})),r.webgl.pageElement=r.element,r.breadcrumb=r.element.querySelector(".breadcrumb"),r.brItems=Array.from(r.breadcrumb.querySelectorAll(".b-li")).map((function(t,e){return{element:t,id:e}})),r.placeContents=Array.from(r.element.querySelectorAll(".places-contents-w .content-w")).map((function(t,e){return{element:t,id:e,active:!1,middleTexts:t.querySelectorAll(".single-mid-text"),icons:t.querySelectorAll(".icon-text-w"),labels:t.querySelectorAll(".label"),nextChapterButton:t.querySelector(".m-next-chapter")}})),r.bgCover=r.element.querySelector(".mobile-cover"),r.brCross=r.element.querySelector(".b-cross"),r.mapIcon=r.element.querySelector(".map-icon"),r.activeIndex=null,r.mobileBar=r.element.querySelector(".maps-mobile-bar"),r.mobileBarDate=r.mobileBar.querySelector(".actual-date"),r.mobileBarPlace=r.mobileBar.querySelector(".actual-place"),r.mobileBarTextW=r.mobileBar.querySelector(".actual-w"),r.forwardArrow=r.mobileBar.querySelector(".right"),r.backwardArrow=r.mobileBar.querySelector(".left"),r.legendWrapper=r.element.querySelector(".legend-wrapper"),r.dragIndicator=r.element.querySelector(".drag-indication"),r.header=document.querySelector("#header"),r.workButtons=Array.from(r.element.querySelectorAll("[data-work-button]")).map((function(t){var e={top:"0%",left:"0%"};try{var n=JSON.parse(t.dataset.position);n&&n.top&&n.left&&(e={top:n.top,left:n.left})}catch(e){console.warn("Invalid position data for work button:",t.dataset.workButton)}return{element:t,svg:t.querySelector(".work-icon"),id:t.dataset.workButton,popin:r.element.querySelector('[data-work="'.concat(t.dataset.workButton,'"]')),position:e}})),r.pinnedPoints=Array.from(r.element.querySelectorAll(".map-w")).map((function(t){return Array.from(t.querySelectorAll("[data-position]")).map((function(t){var e={top:"0%",left:"0%"};try{var n=JSON.parse(t.dataset.position);n&&n.top&&n.left&&(e={top:n.top,left:n.left})}catch(t){console.warn("Invalid position data for pinned point")}return{element:t,position:e}}))})),r.webgl.domPinnedPoints=r.pinnedPoints,r.workPopins=r.element.querySelectorAll(".wpopin"),r.workCover=r.element.querySelector(".green-cover"),r.workCoverPos=-20,r.popinPos=-15,r.closeWorkButton=r.element.querySelector(".close-work"),r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&LT(t,e)}(e,t),n=e,r=[{key:"init",value:function(){var t=new URLSearchParams(window.location.search);this.urlKey=0,t.has("key")?this.urlKey=parseInt(t.get("key")):this.bootstrap.mapAnchor&&(this.urlKey=this.bootstrap.mapAnchor,this.bootstrap.mapAnchor=null),this.webgl.init(this.urlKey),ti.set(this.workPopins,{display:"none",xPercent:this.popinPos}),ti.to([this.mobileBar,this.mapIcon,this.legendWrapper,this.dragIndicator],{opacity:1,duration:1.4,ease:"none",delay:2.6}),this.brItems.forEach((function(t,e){ti.to(t.element,{opacity:1,ease:"none",duration:1.8,delay:2.6+.07*e})})),ti.set(this.workCover,{xPercent:this.workCoverPos}),this.positionWorkButtons(),localStorage.getItem("currentSelectedMap")&&this.setActive(parseInt(localStorage.getItem("currentSelectedMap")),!1)}},{key:"positionWorkButtons",value:function(){this.pinnedPoints.forEach((function(t){t.forEach((function(t){t.position.top&&t.position.left&&parseFloat(t.position.left.replace("%",""))>50&&t.element.classList.add("right-side")}))}))}},{key:"setActive",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.locked||(this.locked=!0,t<0&&(t=this.brItems.length-1),t>this.brItems.length-1&&(t=0),this.brItems.forEach((function(e){e.element.classList.toggle("active",e.id==t)})),this.bootstrap.mapAnchor=t,this.activeIndex=t,this.webgl.activeIndex=t,this.viewport.medias.desktop||this.setMobileBarActive(t),localStorage.setItem("currentSelectedMap",t),e?this.webgl.open().play():this.webgl.transition(t),this.setContentActive(t).play())}},{key:"setMobileBarActive",value:function(t){this.mobileBarDate.innerText=this.brItems[t].element.querySelector(".b-date").innerText,this.mobileBarPlace.innerText=this.brItems[t].element.querySelector(".b-place").innerText}},{key:"setContentActive",value:function(t){var e=this,n=this.placeContents.find((function(t){return 1==t.active})),r=ti.timeline({paused:!0}),i=0;return n&&(i=2,r.add(this.hideContent(n))),r.add(this.showContent(this.placeContents[t]),i),r.set(this,{locked:!1}),r.add((function(){e.placeContents[t].icons.forEach((function(t){var n=t.dataset.workButton,r=e.element.querySelector('[data-work="'.concat(n,'"] img'));r&&(r.setAttribute("loading","eager"),r.style.display="block")}))})),r}},{key:"hideContent",value:function(t){var e,n;return null===(e=t.tl)||void 0===e||null===(n=e.kill)||void 0===n||n.call(e),t.tl=ti.timeline(),t.tl.set(t,{active:!1},0),t.tl.to(t.icons,{opacity:0,duration:.8,ease:"none",stagger:{each:.1,from:"end"}},0),t.tl.to(t.labels,{opacity:0,duration:.8,ease:"none",stagger:{each:.1,from:"end"}},0),t.tl.to(t.middleTexts,{opacity:0,duration:.9,ease:"none",stagger:{each:.03,from:"end"}},0),t.tl.set(t.element,{display:"none"}),t.tl}},{key:"showContent",value:function(t){var e,n;return null===(e=t.tl)||void 0===e||null===(n=e.kill)||void 0===n||n.call(e),t.tl=ti.timeline(),t.tl.set(t,{active:!0},0),t.tl.set(t.element,{display:"block"},0),t.tl.to(t.icons,{opacity:1,duration:1.6,ease:"none",stagger:{each:.2,from:"center"}},.6),t.tl.to(t.labels,{opacity:1,duration:1.6,ease:"none",stagger:{each:.2,from:"center"}},.6),t.tl.to(t.middleTexts,{opacity:1,duration:2.2,ease:"power2.inOut",stagger:.2},.15),t.tl}},{key:"attach",value:function(){var t=this;this.mapIcon.addEventListener("click",this.openBreadcrumb),this.bgCover.addEventListener("click",this.closeBreadcrumb),this.brCross.addEventListener("click",this.closeBreadcrumb),this.brItems.forEach((function(e){e.element.addEventListener("click",t.brItemClick)})),this.forwardArrow.addEventListener("click",this.arrowClick),this.backwardArrow.addEventListener("click",this.arrowClick),this.mobileBarTextW.addEventListener("click",this.openBreadcrumb),this.header.classList.add("bg-gradient"),window.addEventListener("resize",this.resize),this.workButtons.forEach((function(e){e.svg.addEventListener("click",t.openWork)})),this.closeWorkButton.addEventListener("click",this.closeWork),this.webgl.attach(),this.placeContents.forEach((function(e){e.nextChapterButton.addEventListener("click",t.arrowClick)}))}},{key:"detach",value:function(){var t=this;this.mapIcon.removeEventListener("click",this.openBreadcrumb),this.bgCover.removeEventListener("click",this.closeBreadcrumb),this.brCross.removeEventListener("click",this.closeBreadcrumb),this.brItems.forEach((function(e){e.element.removeEventListener("click",t.brItemClick)})),this.forwardArrow.addEventListener("click",this.arrowClick),this.backwardArrow.addEventListener("click",this.arrowClick),this.mobileBarTextW.removeEventListener("click",this.openBreadcrumb),this.header.classList.add("bg-gradient"),window.removeEventListener("resize",this.resize),this.workButtons.forEach((function(e){e.svg.removeEventListener("click",t.openWork)})),this.closeWorkButton.removeEventListener("click",this.closeWork),this.webgl.detach(),this.placeContents.forEach((function(e){e.nextChapterButton.addEventListener("click",t.arrowClick)}))}}],r&&PT(n.prototype,r),i&&PT(n,i),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,i}(Yp);function jT(t){return jT="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},jT(t)}function zT(t){return function(t){if(Array.isArray(t))return FT(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return FT(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return FT(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function FT(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function UT(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,WT(r.key),r)}}function qT(t,e,n){return e=HT(e),function(t,e){if(e&&("object"===jT(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,GT()?Reflect.construct(e,n||[],HT(t).constructor):e.apply(t,n))}function GT(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(GT=function(){return!!t})()}function HT(t){return HT=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},HT(t)}function VT(t,e){return VT=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},VT(t,e)}function QT(t,e,n){return(e=WT(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function WT(t){var e=function(t,e){if("object"!=jT(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=jT(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==jT(e)?e:e+""}var YT=function(t){function e(t,n){var r,i,o,a,s,l,u;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),QT(u=qT(this,e,[t,n]),"setViewportHeight",(function(){var t=.01*window.innerHeight;document.documentElement.style.setProperty("--vh","".concat(t,"px"));var e=u.element.querySelector("#mapbox-map");e&&(e.style.height="".concat(window.innerHeight,"px"),u.mapbox&&u.mapbox.resize())})),QT(u,"open",(function(){u.header.classList.add("visible-bg");var t=u.bootstrap.components.get(u.header);t&&t.showHeader&&t.showHeader()})),QT(u,"openBreadcrumb",(function(){u.bgCover&&u.breadcrumb&&ti.matchMedia().add("(max-width: 1024px)",(function(){var t,e;null===(t=u.brTl)||void 0===t||null===(e=t.kill)||void 0===e||e.call(t),u.brTl=ti.timeline(),u.brTl.set(u.bgCover,{display:"block",pointerEvents:"all"},0),u.brTl.set(u.breadcrumb,{display:"block"},0),u.brTl.to(u.bgCover,{opacity:1,duration:.9,ease:"none"},0),u.brTl.to(u.breadcrumb,{yPercent:-100,duration:.8,ease:"power3.out"},0)}))})),QT(u,"closeBreadcrumb",(function(){u.bgCover&&u.breadcrumb&&ti.matchMedia().add("(max-width: 1024px)",(function(){var t,e;null===(t=u.brTl)||void 0===t||null===(e=t.kill)||void 0===e||e.call(t),u.brTl=ti.timeline(),u.brTl.set(u.bgCover,{pointerEvents:"none"}),u.brTl.to(u.bgCover,{opacity:0,duration:.5,ease:"none"},0),u.brTl.to(u.breadcrumb,{yPercent:0,duration:.5,ease:"power2.in"},0),u.brTl.set([u.bgCover,u.breadcrumb],{display:"none"})}))})),QT(u,"onMapDragStart",(function(){var t,e;null===(t=u.dragTl)||void 0===t||null===(e=t.kill)||void 0===e||e.call(t),u.dragTl=ti.timeline();var n=Array.from(u.element.querySelectorAll(".content-w")),r=[].concat(n).filter((function(t){return null!=t}));r.length>0&&!u.shouldHideLabels&&u.dragTl.to(r,{opacity:0,duration:1.2},0)})),QT(u,"onMapDragEnd",(function(){var t,e;null===(t=u.dragTl)||void 0===t||null===(e=t.kill)||void 0===e||e.call(t),u.dragTl=ti.timeline();var n=Array.from(u.element.querySelectorAll(".content-w")),r=[].concat(n).filter((function(t){return null!=t}));r.length>0&&!u.shouldHideLabels&&(u.dragTl.to(r,{opacity:1,duration:1.2},0),u.dragTl.to(u.breadcrumb,{opacity:1,duration:1.2},0))})),QT(u,"onMapZoom",(function(){u.updateCloudOpacity(),u.updateLabelVisibility()})),QT(u,"onMapRotate",(function(){u.updateLabelVisibility()})),QT(u,"updateLabelVisibility",(function(){if(u.mapbox){var t=u.mapbox.getZoom();u.shouldHideLabels=t<4;var e=u.placesListFullscreen&&!u.placesListFullscreen.classList.contains("hidden"),n=u.mapbox.getCenter(),r=u.findClosestPlace(n);r.distance>.1?u.shouldHideLabels=!0:r.index===u.activeIndex||e||u.switchPlaceWithoutJump(r.index),u.shouldHideLabels&&!u.labelsHidden?(u.hideLabels(),u.labelsHidden=!0):!u.shouldHideLabels&&u.labelsHidden&&(u.showLabels(),u.labelsHidden=!1)}})),QT(u,"hideLabels",(function(){var t,e;null===(t=u.labelTl)||void 0===t||null===(e=t.kill)||void 0===e||e.call(t),u.labelTl=ti.timeline();var n=Array.from(u.element.querySelectorAll(".content-w")),r=[].concat(n).filter((function(t){return null!=t}));r.length>0&&u.labelTl.to(r,{opacity:0,duration:1.2},0)})),QT(u,"showLabels",(function(){var t,e;null===(t=u.labelTl)||void 0===t||null===(e=t.kill)||void 0===e||e.call(t),u.labelTl=ti.timeline();var n=Array.from(u.element.querySelectorAll(".content-w")),r=[].concat(n).filter((function(t){return null!=t}));r.length>0&&(u.labelTl.to(r,{opacity:1,duration:1.2},0),u.labelTl.to(u.breadcrumb,{opacity:1,duration:1.2},0))})),QT(u,"brItemClick",(function(t){if(!t.currentTarget.classList.contains("coming-soon")){var e=parseInt(t.currentTarget.dataset.breadcrumbId);if(e!=u.activeIndex)u.setActive(e),u.closeBreadcrumb();else{if(u.mapbox&&u.placeContents[e]){var n,r,i=u.placeContents[e].element,o=parseFloat((null==i||null===(n=i.dataset)||void 0===n?void 0:n.latitude)||"0")||0,a=parseFloat((null==i||null===(r=i.dataset)||void 0===r?void 0:r.longitude)||"0")||0;u.mapbox.jumpTo({center:[a,o],zoom:11}),u.initialPlaceCenter=[a,o]}u.closeBreadcrumb()}}})),QT(u,"arrowClick",(function(t){if(t.currentTarget.classList.contains("right")){for(var e=u.activeIndex+1;e<u.brItems.length&&u.brItems[e].element.classList.contains("coming-soon");)e++;if(e<u.brItems.length)u.setActive(e);else{for(e=0;e<u.activeIndex&&u.brItems[e].element.classList.contains("coming-soon");)e++;e<u.activeIndex&&u.setActive(e)}}else{for(var n=u.activeIndex-1;n>=0&&u.brItems[n].element.classList.contains("coming-soon");)n--;if(n>=0)u.setActive(n);else{for(n=u.brItems.length-1;n>u.activeIndex&&u.brItems[n].element.classList.contains("coming-soon");)n--;n>u.activeIndex&&u.setActive(n)}}})),QT(u,"openWork",(function(t){u.showWorkBg(),u.showPopin(u.workButtons.find((function(e){return e.svg==t.currentTarget})))})),QT(u,"closeWork",(function(){if(u.activeWork){if(u.hidePopin(u.activeWork),u.activeWork.popin){var t=u.activeWork.popin.querySelector(".videoplayer"),e=null;t&&(e=u.components.get(t)),e&&(e.forcePause(),e.onEnded())}u.hideWorkBg()}})),QT(u,"showWorkBg",(function(){var t,e;u.workCover&&(null===(t=u.workTl)||void 0===t||null===(e=t.kill)||void 0===e||e.call(t),u.workTl=ti.timeline(),u.workTl.set(u.workCover,{display:"block"},0),u.workTl.to(u.workCover,{xPercent:0,ease:"power3.out",duration:1.5},0),u.workTl.to(u.workCover,{opacity:1,duration:.9,ease:"none"},0))})),QT(u,"hideWorkBg",(function(){var t,e;u.workCover&&(null===(t=u.workTl)||void 0===t||null===(e=t.kill)||void 0===e||e.call(t),u.workTl=ti.timeline(),u.workTl.to(u.workCover,{opacity:0,duration:1,ease:"none"},0),u.workTl.to(u.workCover,{xPercent:u.workCoverPos,ease:"power4.in",duration:.8},.2),u.workTl.set(u.workCover,{display:"none"}))})),QT(u,"showPopin",(function(t){if(t&&t.popin)if(u.activeWork&&u.activeWork!==t){var e,n,r,i,o=u.activeWork;if(o.popin){var a=o.popin.querySelector(".videoplayer"),s=null;a&&(s=u.components.get(a)),s&&(s.forcePause(),s.onEnded())}null===(e=u.hPopinTl)||void 0===e||null===(n=e.kill)||void 0===n||n.call(e),null===(r=u.sPopinTl)||void 0===r||null===(i=r.kill)||void 0===i||i.call(r);var l=ti.timeline();o.popin&&(l.to(o.popin,{opacity:0,duration:.3,ease:"none"},0),l.to(o.popin,{xPercent:u.popinPos,duration:.6,ease:"power2.in"},0),l.set(o.popin,{display:"none",pointerEvents:"none"})),l.set(t.popin,{display:"block",pointerEvents:"all"},.3),l.to(t.popin,{opacity:1,duration:.6,ease:"none"},.5),l.to(t.popin,{xPercent:0,duration:1.2,ease:"power4.out"},.5),l.set(u,{activeWork:t},.3),u.hPopinTl=l}else{var c,d,f,h;u.activeWork=t,null===(c=u.hPopinTl)||void 0===c||null===(d=c.kill)||void 0===d||d.call(c),null===(f=u.sPopinTl)||void 0===f||null===(h=f.kill)||void 0===h||h.call(f),u.sPopinTl=ti.timeline(),u.sPopinTl.set(t.popin,{display:"block",pointerEvents:"all"},0),u.sPopinTl.to(t.popin,{opacity:1,duration:.6,ease:"none"},.6),u.sPopinTl.to(t.popin,{xPercent:0,duration:1.2,ease:"power4.out"},.6)}})),QT(u,"hidePopin",(function(t){var e,n,r,i;t&&t.popin&&(null===(e=u.hPopinTl)||void 0===e||null===(n=e.kill)||void 0===n||n.call(e),null===(r=u.sPopinTl)||void 0===r||null===(i=r.kill)||void 0===i||i.call(r),u.hPopinTl=ti.timeline(),u.hPopinTl.to(t.popin,{opacity:0,duration:.4,ease:"none"},0),u.hPopinTl.to(t.popin,{xPercent:u.popinPos,duration:.8,ease:"power2.in"},0),u.hPopinTl.set(t.popin,{display:"none",pointerEvents:"none"}),u.hPopinTl.set(u,{activeWork:null}))})),QT(u,"closePlacesListTimeline",(function(){var t,e;if(u.placesListFullscreen){null===(t=u.placesListTl)||void 0===t||null===(e=t.kill)||void 0===e||e.call(t),u.placesListTl=ti.timeline({onStart:function(){u.bootstrap.smoother.stop()},onComplete:function(){u.placesListFullscreen.classList.add("hidden")}});var n=u.placesListFullscreen.querySelectorAll(".places-list-item"),r=u.placesListFullscreen.querySelector(".places-list-header");n.length>0&&u.placesListTl.to(n,{opacity:0,duration:.4},.1),r&&(u.placesListTl.to(r,{opacity:0,duration:.4},0),u.placesListTl.to(r,{y:-30,duration:.4,ease:"power2.in"},0)),u.placesListTl.to(u.placesListFullscreen,{opacity:0,duration:.5,ease:"power2.inOut"},.4),u.placesListTl.set(u.placesListFullscreen,{visibility:"hidden",pointerEvents:"none"});var i=u.element.querySelector("#mapbox-map");return i&&u.placesListTl.call((function(){i.style.height="".concat(window.innerHeight,"px")}),null,.3),u.placesListTl}})),QT(u,"openPlacesListTimeline",(function(){var t,e,n=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(u.placesListFullscreen||n){u.activeWork&&u.closeWork(),null===(t=u.placesListTl)||void 0===t||null===(e=t.kill)||void 0===e||e.call(t),u.placesListTl=ti.timeline({onStart:function(){u.placesListFullscreen.classList.remove("hidden"),u.bootstrap.smoother.start()}});var r=u.placesListFullscreen.querySelectorAll(".places-list-item"),i=u.placesListFullscreen.querySelector(".places-list-header");u.placesListTl.set(u.placesListFullscreen,{visibility:"visible",pointerEvents:"all",opacity:0}),r.length>0&&u.placesListTl.set(r,{opacity:0,y:30}),i&&u.placesListTl.set(i,{opacity:0,y:30});var o=u.element.querySelector("#mapbox-map");return o&&u.placesListTl.set(o,{height:"100%"},0),u.placesListTl.to(u.placesListFullscreen,{opacity:1,duration:.6,ease:"power2.out"},0),i&&(u.placesListTl.to(i,{opacity:1,duration:.4},0),u.placesListTl.to(i,{y:0,duration:.8,ease:"power3.out"},0)),r.length>0&&(u.placesListTl.to(r,{opacity:1,duration:.4,stagger:.1},.1),u.placesListTl.to(r,{y:0,duration:.8,stagger:.1,ease:"power3.out"},.1)),u.placesListTl}})),QT(u,"hidePlacesListFullscreen",(function(){u.closePlacesListTimeline(),u.updateCloudOpacity();var t=u.bootstrap.components.get(u.header);if(t&&t.hideHeader&&t.hideHeader(),u.backgroundCloud&&setTimeout((function(){u.backgroundCloud.classList.remove("hidden")}),1200),u.mapbox){u.mapbox.boxZoom.enable(),u.mapbox.scrollZoom.enable(),u.mapbox.dragPan.enable(),u.mapbox.dragRotate.enable(),u.mapbox.keyboard.enable(),u.mapbox.doubleClickZoom.enable(),u.mapbox.touchZoomRotate.enable();var e=u.mapbox.getContainer();e&&(e.style.pointerEvents="auto")}})),QT(u,"showPlacesListFullscreen",(function(){var t;u.placesListIsOpen=!0,null===(t=u.openPlacesListTimeline())||void 0===t||t.play();var e=u.bootstrap.components.get(u.header);if(e&&e.showHeader&&e.showHeader(),u.backgroundCloud&&u.backgroundCloud.classList.add("hidden"),u.mapbox){u.mapbox.boxZoom.disable(),u.mapbox.scrollZoom.disable(),u.mapbox.dragPan.disable(),u.mapbox.dragRotate.disable(),u.mapbox.keyboard.disable(),u.mapbox.doubleClickZoom.disable(),u.mapbox.touchZoomRotate.disable();var n=u.mapbox.getContainer();n&&(n.style.pointerEvents="none")}})),QT(u,"placeListItemClick",(function(t){if(!t.currentTarget.classList.contains("coming-soon")){var e=parseInt(t.currentTarget.dataset.placeId);u.placesListFullscreen&&ti.to(u.placesListFullscreen,{scrollTop:0,duration:0,ease:"power2.out"},.5),u.bootstrap.smoother&&"function"==typeof u.bootstrap.smoother.scrollTop?ti.call((function(){return u.bootstrap.smoother.scrollTop(0,!0)}),null,.5):setTimeout((function(){ti.to(window,{scrollTo:0,duration:0,ease:"power2.out"},.5)}),500),u.placeContents.forEach((function(t){if(t.active){var e,n;t.active=!1,null===(e=t.tl)||void 0===e||null===(n=e.kill)||void 0===n||n.call(e),t.element&&ti.set(t.element,{display:"none"});var r=[].concat(zT(t.icons||[]),zT(t.labels||[]),zT(t.middleTexts||[])).filter((function(t){return t}));r.length>0&&ti.set(r,{opacity:0})}})),u.hidePlacesListFullscreen(),u.setActive(e,!0,!1)}})),QT(u,"resize",(function(){u.oldDk!==u.viewport.medias.desktop&&u.viewport.medias.desktop&&u.breadcrumb&&ti.set(u.breadcrumb,{clearProps:"all"}),u.oldDk=u.viewport.medias.desktop})),QT(u,"zoomIn",(function(){if(u.mapbox){var t=u.mapbox.getZoom(),e=u.mapbox.getMaxZoom()||16;t<e&&u.mapbox.easeTo({zoom:Math.min(t+1,e),duration:300})}})),QT(u,"zoomOut",(function(){if(u.mapbox){var t=u.mapbox.getZoom(),e=u.mapbox.getMinZoom()||0;t>e&&u.mapbox.easeTo({zoom:Math.max(t-1,e),duration:300})}})),n.components.get(document.querySelector("#header")).closeBanner(),u.bgImgs=Array.from(u.element.querySelectorAll(".bg-img")).map((function(t,e){return{desktopUrl:t.dataset.urlDesktop,mobileUrl:t.dataset.urlMobile}})),u.breadcrumb=u.element.querySelector(".breadcrumb"),u.shouldHideLabels=!1,u.initialPlaceCenter=null,u.brItems=u.breadcrumb?Array.from(u.breadcrumb.querySelectorAll(".b-li")).map((function(t,e){return{element:t,id:e}})):[],u.placeContents=Array.from(u.element.querySelectorAll(".places-contents-w .content-w")).map((function(t,e){return{element:t,id:e,active:!1,middleTexts:t.querySelectorAll(".single-mid-text"),icons:t.querySelectorAll(".icon-text-w"),labels:t.querySelectorAll(".label"),nextChapterButton:t.querySelector(".m-next-chapter")}})),u.bgCover=u.element.querySelector(".mobile-cover"),u.brCross=u.element.querySelector(".b-cross"),u.mapIcon=u.element.querySelector(".map-icon"),u.activeIndex=null,u.mobileBar=u.element.querySelector(".maps-mobile-bar"),u.mobileBarDate=null===(r=u.mobileBar)||void 0===r?void 0:r.querySelector(".actual-date"),u.mobileBarPlace=null===(i=u.mobileBar)||void 0===i?void 0:i.querySelector(".actual-place"),u.mobileBarTextW=null===(o=u.mobileBar)||void 0===o?void 0:o.querySelector(".actual-w"),u.forwardArrow=null===(a=u.mobileBar)||void 0===a?void 0:a.querySelector(".right"),u.backwardArrow=null===(s=u.mobileBar)||void 0===s?void 0:s.querySelector(".left"),u.legendWrapper=u.element.querySelector(".legend-wrapper"),u.dragIndicator=u.element.querySelector(".drag-indication"),u.header=document.querySelector("#header"),u.backgroundCloud=u.element.querySelector(".background-cloud"),u.backgroundCloudWrapper=u.element.querySelector(".background-cloud-wrapper"),u.backgroundCloudImg=null===(l=u.backgroundCloud)||void 0===l?void 0:l.querySelector("img"),u.placesListIsOpen=!1,u.workButtons=Array.from(u.element.querySelectorAll("[data-work-button]")).map((function(t){var e={top:"0%",left:"0%"};try{var n=JSON.parse(t.dataset.position);n&&n.top&&n.left&&(e={top:n.top,left:n.left})}catch(e){console.warn("Invalid position data for work button:",t.dataset.workButton)}return{element:t,svg:t.querySelector(".work-icon"),id:t.dataset.workButton,popin:u.element.querySelector('[data-work="'.concat(t.dataset.workButton,'"]')),position:e}})),u.pinnedPoints=Array.from(u.element.querySelectorAll(".map-w")).map((function(t){return Array.from(t.querySelectorAll("[data-position]")).map((function(t){var e={top:"0%",left:"0%"};try{var n=JSON.parse(t.dataset.position);n&&n.top&&n.left&&(e={top:n.top,left:n.left})}catch(t){console.warn("Invalid position data for pinned point")}return{element:t,position:e}}))})),u.workPopins=u.element.querySelectorAll(".wpopin"),u.workCover=u.element.querySelector(".green-cover"),u.workCoverPos=-20,u.popinPos=-15,u.closeWorkButtons=u.element.querySelectorAll(".wback"),u.mapboxMarkers=[],u.mapboxLabelMarkers=[],u.unclassifiedWorkMarkers=[],u.unclassifiedLabelMarkers=[],u.labelsHidden=!1,u.placesListFullscreen=u.element.querySelector(".places-list-fullscreen"),u.placesListItems=Array.from(u.element.querySelectorAll(".places-list-item")).map((function(t,e){return{element:t,id:parseInt(t.dataset.placeId)}})),u.backToPlacesButton=u.element.querySelector(".back-to-places"),u.zoomInButton=u.element.querySelector(".zoom-in"),u.zoomOutButton=u.element.querySelector(".zoom-out"),u}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&VT(t,e)}(e,t),n=e,r=[{key:"init",value:function(){var t=this,e=new URLSearchParams(window.location.search);this.urlKey=0,this.hasUrlKey=!1,e.has("key")&&(this.urlKey=parseInt(e.get("key")),this.hasUrlKey=!0),this.setViewportHeight(),window.addEventListener("resize",this.setViewportHeight),window.addEventListener("orientationchange",(function(){setTimeout(t.setViewportHeight,100)}));var n=this.element.querySelector("#mapbox-map");n&&(n.style.width="calc(100% + 15px)",n.style.height="".concat(window.innerHeight,"px"));var r=(n.dataset.style||"").trim();if(n&&window.mapboxgl){var i=this.hasUrlKey?this.urlKey:0,o=function(e){var n,r=[0,0];if("number"!=typeof e||e<0||e>=t.placeContents.length)return r;var i=null===(n=t.placeContents[e])||void 0===n?void 0:n.element;if(!i)return r;var o=i.dataset.latitude,a=i.dataset.longitude,s=isNaN(parseFloat(o))?0:parseFloat(o);return[isNaN(parseFloat(a))?0:parseFloat(a),s]}(-1===(i=function(e){if(0===t.brItems.length)return-1;var n="number"==typeof e?e:0;(n<0||n>=t.brItems.length)&&(n=0);for(var r=0;r<t.brItems.length&&t.brItems[n].element.classList.contains("coming-soon");)n=(n+1)%t.brItems.length,r++;return r>=t.brItems.length?-1:n}(i))?0:i),a=-1===i?0:i,s=this.placeContents[a]&&this.placeContents[a].element.dataset.zoom?parseFloat(this.placeContents[a].element.dataset.zoom):11,l=n.dataset.token||"";if(l)try{window.mapboxgl.accessToken=l;var u=function(){if(!r)return"";if(r.startsWith("mapbox://styles/")){var t=r.replace("mapbox://styles/","");return"https://api.mapbox.com/styles/v1/".concat(t,"?access_token=").concat(l)}return r}(),c=function(e){t.mapbox=new window.mapboxgl.Map({container:n,style:e||"mapbox://styles/mapbox/satellite-streets-v12",center:o,zoom:s,maxZoom:16,antialias:!0}),t.mapbox.on("error",(function(t){try{console.error("Mapbox error:",t&&t.error)}catch(t){}})),t.mapbox.on("load",(function(){t.mapbox.setFog({color:"rgb(0, 0, 0)","high-color":"rgb(0, 0, 0)","horizon-blend":.1}),t.initMapboxMarkers()})),t.mapbox.on("dragstart",(function(){t.onMapDragStart()})),t.mapbox.on("dragend",(function(){t.onMapDragEnd(),t.updateLabelVisibility()})),t.mapbox.on("zoom",(function(){t.onMapZoom()})),t.mapbox.on("rotate",(function(){t.onMapRotate()})),t.mapbox.on("rotateend",(function(){t.updateLabelVisibility()}))};if(u)try{fetch(u).then((function(t){return t.ok?t.json():Promise.reject(new Error("Failed to fetch style"))})).then((function(t){t&&null===t.terrain&&delete t.terrain,c(t)})).catch((function(){c(u)}))}catch(t){c(u)}else c("mapbox://styles/mapbox/satellite-streets-v12")}catch(t){}else try{console.warn("Mapbox token missing; map will not load")}catch(t){}}else try{console.warn("Mapbox DOM or library not available")}catch(t){}if(ti.set(this.workPopins,{display:"none",xPercent:this.popinPos}),this.legendWrapper){var d=function(){var e=window.matchMedia("(min-width: 1024px)").matches||window.innerWidth>=1024;t.legendWrapper.style.display=e?"flex":"none"};d(),window.addEventListener("resize",d)}var f=[this.mobileBar,this.mapIcon,this.legendWrapper,this.dragIndicator].filter((function(t){return null!=t}));f.length>0&&ti.to(f,{opacity:1,duration:1.4,ease:"none",delay:2.6}),this.brItems.forEach((function(t,e){ti.to(t.element,{opacity:1,ease:"none",duration:1.8,delay:2.6+.07*e})})),ti.set(this.workCover,{xPercent:this.workCoverPos}),this.positionWorkButtons(),this.hasUrlKey&&this.placesListFullscreen&&(this.placesListFullscreen.classList.add("hidden"),ti.set(this.placesListFullscreen,{visibility:"hidden",opacity:0,pointerEvents:"none"}),this.urlKey>=0&&this.urlKey<this.brItems.length?this.setActive(this.urlKey,!1):console.warn("Invalid URL key:",this.urlKey));var h=this.bootstrap.components.get(this.header);if(h&&h.hideHeader&&ti.set(this.header,{yPercent:-100,opacity:0}),this.mapbox){this.mapbox.boxZoom.disable(),this.mapbox.scrollZoom.disable(),this.mapbox.dragPan.disable(),this.mapbox.doubleClickZoom.disable(),this.mapbox.keyboard.enable(),this.mapbox.dragRotate.enable(),this.mapbox.touchZoomRotate.enable();var p=this.mapbox.getContainer();p&&(p.style.pointerEvents="auto",p.style.cursor="grab"),this.updateCloudOpacity()}}},{key:"updateCloudOpacity",value:function(){if(this.mapbox&&this.backgroundCloudWrapper){var t,e,n,r=this.mapbox.getZoom();t=r<=4?0:r>=11?1:(r-4)/7,r<=8?(e=.8,n=0):r<=11?(e=.8+(r-8)/3*(1-.8),n=0):r<=14?(e=1+(r-11)/3*(1.2-1),n=(r-11)/3*15):(e=1.2,n=15+(r-14)/2*15),this.backgroundCloudWrapper.style.opacity=t,this.backgroundCloudWrapper.style.transform="rotate(".concat(n,"deg) scale(").concat(e,")")}}},{key:"positionWorkButtons",value:function(){this.pinnedPoints.forEach((function(t){t.forEach((function(t){t.position.top&&t.position.left&&parseFloat(t.position.left.replace("%",""))>50&&t.element.classList.add("right-side")}))}))}},{key:"setActive",value:function(t){var e=this,n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(this.activeWork&&this.closeWork(),this.brItems[t]){if(this.brItems[t].element.classList.contains("coming-soon")){for(var r=t,i=!1,o=0;o<this.brItems.length;){if(r=(r+1)%this.brItems.length,!this.brItems[r].element.classList.contains("coming-soon")){i=!0;break}o++}if(!i)return;t=r}this.locked=!0,t<0&&(t=this.brItems.length-1),t>this.brItems.length-1&&(t=0),this.brItems.forEach((function(e){e.element.classList.toggle("active",e.id==t)})),this.bootstrap.mapAnchor=t,this.activeIndex=t;try{if(this.mapbox){var a,s,l,u,c=null===(a=this.placeContents[t])||void 0===a?void 0:a.element,d=parseFloat((null==c||null===(s=c.dataset)||void 0===s?void 0:s.latitude)||"0")||0,f=parseFloat((null==c||null===(l=c.dataset)||void 0===l?void 0:l.longitude)||"0")||0,h=parseFloat((null==c||null===(u=c.dataset)||void 0===u?void 0:u.zoom)||"11")||11;if(n){var p=this.mapbox.getContainer();p?ti.timeline().to(p,{opacity:0,duration:.8,ease:"linear",onComplete:function(){e.mapbox.jumpTo({center:[f,d],zoom:h}),e.updateMapboxMarkers(t)}}).to(p,{opacity:1,duration:.8,ease:"linear"}):(this.mapbox.jumpTo({center:[f,d],zoom:h}),this.updateMapboxMarkers(t))}else this.mapbox.jumpTo({center:[f,d],zoom:h}),this.updateMapboxMarkers(t);this.initialPlaceCenter=[f,d]}}catch(t){}this.viewport.medias.desktop||this.setMobileBarActive(t),this.setContentActive(t).play()}else console.error("Invalid place index:",t,"Total places:",this.brItems.length)}},{key:"setMobileBarActive",value:function(t){if(this.mobileBarDate&&this.mobileBarPlace&&this.brItems[t]){var e=this.brItems[t].element.querySelector(".b-date"),n=this.brItems[t].element.querySelector(".b-place");e&&(this.mobileBarDate.innerText=e.innerText),n&&(this.mobileBarPlace.innerText=n.innerText)}}},{key:"createMarkerSVG",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n="";return"post"===t?n='<path d="m 48.324906,31.011545 c -0.4054,0.0752 -0.8063,0.182707 -1.2029,0.294623 -0.4332,0.122199 -0.8624,0.258779 -1.2871,0.407709 -0.2571,0.09018 -0.5123,0.18535 -0.7658,0.28522 -0.1316,0.052 -0.2629,0.10546 -0.3936,0.1598 -0.09286,0.03848 0.0511,-0.02233 -0.04234,0.01792 -0.0282,0.01204 -0.05669,0.02408 -0.08489,0.03642 -0.07168,0.03084 -0.14305,0.06198 -0.21413,0.0937 -1.21638,0.54019 -2.3746,1.20199 -3.43647,2.00566 -0.05141,0.03878 -0.0026,0.0018 0.0065,-0.0053 -0.01792,0.0141 -0.03584,0.0279 -0.05376,0.042 -0.03231,0.02526 -0.06433,0.05082 -0.09635,0.07637 -0.07138,0.05699 -0.14217,0.11456 -0.21237,0.17302 -0.13777,0.11456 -0.27318,0.23205 -0.40595,0.35249 -0.26466,0.23998 -0.51933,0.49142 -0.76079,0.75432 -0.12366,0.13453 -0.2441,0.2723 -0.36071,0.41271 -0.05728,0.06873 -0.11309,0.13864 -0.1689,0.20885 -0.01175,0.01468 -0.02321,0.02966 -0.03496,0.04464 0.04436,-0.05669 0.01234,-0.01586 0.0032,-0.0041 -0.03407,0.04524 -0.06873,0.09047 -0.10251,0.1363 -0.21884,0.29609 -0.42122,0.60422 -0.60511,0.92322 -0.09458,0.1642 -0.18417,0.33134 -0.26848,0.50112 -0.03936,0.07902 -0.07754,0.15892 -0.11455,0.23911 -0.02057,0.04494 -0.04084,0.08989 -0.06081,0.13483 -0.01058,0.02408 -0.06374,0.14892 -0.03495,0.0796 -0.15216,0.36483 -0.28112,0.73905 -0.38451,1.12033 -0.10575,0.3892 -0.18623,0.78575 -0.23999,1.18557 0.0094,-0.0711 -0.0094,0.0784 -0.01204,0.1022 -0.0056,0.0493 -0.01116,0.099 -0.01586,0.1486 -0.01175,0.1172 -0.02144,0.2344 -0.02879,0.3519 -0.0141,0.2183 -0.02115,0.4371 -0.02144,0.6556 0,0.2271 0.007,0.4539 0.02027,0.6806 0.0091,0.1531 -0.11574,0.3005 -0.25879,0.3399 -0.15627,0.0429 -0.31137,-0.0311 -0.39802,-0.1618 -0.35337,-0.5332 -0.706734,-1.0666 -1.060104,-1.5998 0.214724,-0.0282 0.429444,-0.0561 0.644174,-0.0843 -0.07168,0.2383 -0.12807,0.4818 -0.18183,0.7247 -0.05963,0.2702 -0.112209,0.5422 -0.157445,0.8151 -0.01204,0.0726 -0.0235,0.1451 -0.03466,0.2177 -0.0056,0.0376 -0.01116,0.0752 -0.01675,0.1128 -0.0038,0.0258 -0.02261,0.1639 -0.01145,0.0796 -0.02291,0.1718 -0.04289,0.3443 -0.05963,0.517 -0.07608,0.7807 -0.09106,1.5712 -0.0041,2.3517 0.0053,0.0467 0.01087,0.0931 0.01675,0.1395 0.0073,0.0593 -0.007,-0.0485 0.0015,0.0109 0.0041,0.029 0.0082,0.0578 0.01263,0.0869 0.01586,0.1043 0.03378,0.208 0.05376,0.3117 0.03789,0.1947 0.08342,0.388 0.138057,0.5786 0.05434,0.1895 0.117491,0.3763 0.190641,0.559 0.0085,0.0215 0.01733,0.0429 0.02614,0.064 -0.02291,-0.0543 0.0065,0.0141 0.01234,0.0271 0.01909,0.042 0.03789,0.084 0.05757,0.1254 0.04435,0.0934 0.09194,0.1853 0.14247,0.2755 0.09811,0.1754 0.20738,0.3452 0.32928,0.5053 -0.03496,-0.0459 0.04582,0.0564 0.05258,0.0646 0.02967,0.0358 0.05962,0.0711 0.09047,0.1057 0.042,0.0473 0.08431,0.0955 0.13042,0.139 0.02879,0.0273 0.05963,0.0523 0.08988,0.0778 0.07256,0.0608 -0.03231,-0.0211 0.04054,0.0317 0.03966,0.0288 0.0796,0.0573 0.12014,0.0846 0.09546,0.0641 0.19416,0.1234 0.29521,0.178 0.06256,0.0338 0.12601,0.0658 0.19034,0.0958 0.02996,0.0138 0.06375,0.0256 0.09195,0.0414 0.03054,0.0171 -0.03437,0.0065 -0.0082,0.0141 0.09018,0.0259 0.21178,0.0112 0.30431,0.0071 0.05258,-0.0024 0.10516,-0.0062 0.15774,-0.0112 0.02761,-0.0026 0.05523,-0.0056 0.08284,-0.0088 0.0141,-0.0018 0.0282,-0.0035 0.0423,-0.0053 0.07373,-0.0082 -0.07608,0.0123 -0.007,9e-4 0.28346,-0.0479 0.5628,-0.1055 0.84068,-0.1789 0.68765,-0.1818 1.36061,-0.4195 2.02505,-0.6724 0.34985,-0.1333 0.69764,-0.2723 1.04337,-0.4153 0.08577,-0.0356 0.17154,-0.0714 0.25732,-0.1072 0.0082,-0.0036 0.07108,-0.03 0.03289,-0.0138 -0.04582,0.0193 0.052,-0.0221 0.04759,-0.0203 0.04465,-0.0188 0.08929,-0.0379 0.13365,-0.057 0.16978,-0.0726 0.33927,-0.146 0.50846,-0.22 0.56986,-0.25 1.13561,-0.5085 1.69807,-0.774 0.2941,-0.139 0.5831,-0.2911 0.8795,-0.4242 0.0138,-0.0061 0.027,-0.0132 0.0405,-0.02 0.0594,0.2189 0.1187,0.438 0.178,0.6569 -0.7604,-0.0829 -1.52123,-0.1654 -2.28173,-0.2483 -0.1078,-0.0117 -0.2156,-0.0235 -0.32311,-0.0352 -0.15657,-0.017 -0.29551,-0.0978 -0.33986,-0.2588 -0.03848,-0.1401 0.02203,-0.3337 0.16185,-0.398 0.41594,-0.1912 0.82072,-0.4063 1.20904,-0.6486 0.17918,-0.1116 0.35454,-0.2291 0.52611,-0.3519 0.1938,-0.1389 0.2752,-0.2018 0.4547,-0.3507 0.3067,-0.2544 0.5972,-0.5287 0.8683,-0.821 0.1295,-0.1398 0.2544,-0.2835 0.3748,-0.4312 0.0332,-0.0406 0.0658,-0.0814 0.0981,-0.1225 0.0129,-0.0165 0.0259,-0.0329 0.0385,-0.0494 -0.0085,0.0112 -0.0385,0.0511 0.002,-0.0029 0.0591,-0.0787 0.1178,-0.1577 0.1748,-0.2379 0.2153,-0.3035 0.4124,-0.6201 0.5901,-0.9471 0.0888,-0.1633 0.1731,-0.3289 0.2527,-0.497 0.0364,-0.0766 0.0716,-0.1539 0.106,-0.2314 0.0182,-0.0409 0.0358,-0.082 0.0538,-0.1234 0.0235,-0.0543 -0.0315,0.077 0.0049,-0.012 0.0115,-0.0277 0.023,-0.055 0.0341,-0.0826 0.2691,-0.6624 0.4709,-1.35149 0.6151,-2.05177 0.035,-0.16978 0.0667,-0.33985 0.0949,-0.51081 0.0141,-0.08489 0.0273,-0.16978 0.0399,-0.25497 0.0062,-0.0423 0.0124,-0.08489 0.0183,-0.12748 0.0017,-0.01175 0.0096,-0.07285 0.0032,-0.02379 -0.0068,0.05169 0.0053,-0.04172 0.0064,-0.052 0.0429,-0.33956 0.0741,-0.68059 0.0946,-1.02221 0.0391,-0.65064 0.0397,-1.30333 0.008,-1.95426 -0.015,-0.30608 -0.0371,-0.61215 -0.0658,-0.91735 -0.0133,-0.141 -0.0279,-0.28199 -0.0441,-0.42269 -0.0079,-0.06844 -0.0159,-0.13659 -0.0244,-0.20474 -0.0038,-0.02996 -0.0073,-0.05963 -0.0114,-0.08959 -0.0024,-0.01851 -0.0194,-0.1457 -0.0112,-0.08577 0.0085,0.06227 -0.0068,-0.04876 -0.0085,-0.06198 -0.0041,-0.02879 -0.0082,-0.05728 -0.0123,-0.08607 -0.01,-0.0702 -0.0206,-0.14041 -0.0315,-0.21061 -0.0185,-0.12102 -0.0382,-0.24204 -0.059,-0.36277 -0.0379,-0.22207 -0.0793,-0.44355 -0.1243,-0.66444 -0.1004,-0.49437 -0.2341,-0.976688 -0.3595,-1.464591 -0.0018,-0.0068 -0.0041,-0.01322 -0.0062,-0.01997 -0.0576,-0.181532 0.0676,-0.384507 0.2462,-0.433561 0.1897,-0.05229 0.376,0.06404 0.4335,0.246155 0.1272,0.401543 0.2224,0.814831 0.3117,1.225781 0.2244,1.03602 0.3751,2.09055 0.4482,3.14801 0.0943,1.36237 0.0485,2.73532 -0.1815,4.0827 -0.2497,1.46288 -0.7432,2.90008 -1.5389,4.15818 -0.9027,1.4267 -2.1766,2.5808 -3.66353,3.376 -0.20033,0.1072 -0.40389,0.2074 -0.6101,0.3022 -0.05933,-0.2188 -0.11867,-0.4379 -0.17801,-0.6568 0.7605,0.0829 1.52124,0.1654 2.28174,0.2482 0.1078,0.0118 0.2156,0.0235 0.3232,0.0353 0.1565,0.017 0.2955,0.0978 0.3398,0.2588 0.0394,0.1433 -0.0238,0.329 -0.1618,0.398 -0.7429,0.371 -1.49782,0.7197 -2.25597,1.058 -1.38557,0.6184 -2.79552,1.2205 -4.25394,1.6468 -0.55664,0.1627 -1.14706,0.3195 -1.73131,0.3216 -0.18007,6e-4 -0.33428,-0.0282 -0.5023,-0.0999 -0.23939,-0.1019 -0.4688,-0.2244 -0.68206,-0.3739 -0.27964,-0.1962 -0.49143,-0.4183 -0.6991,-0.69 -1.026921,-1.3436 -1.225198,-3.1659 -1.140013,-4.8044 0.05581,-1.0736 0.208266,-2.1843 0.518162,-3.2177 0.005,-0.017 0.0097,-0.034 0.01469,-0.0511 0.09018,-0.3002 0.477624,-0.3354 0.644174,-0.0843 0.35337,0.5332 0.70673,1.0666 1.0601,1.5997 -0.21883,0.0594 -0.43796,0.1187 -0.6568,0.178 -0.10193,-1.7324 0.2068,-3.46756 0.9761,-5.02761 0.66033,-1.33887 1.64524,-2.50649 2.78496,-3.4632 1.06774,-0.89621 2.26238,-1.63026 3.52047,-2.22744 0.9996,-0.47468 2.03744,-0.872405 3.09754,-1.189644 0.4917,-0.147164 0.9925,-0.290804 1.4983,-0.382745 0.0068,-0.0012 0.0138,-0.0026 0.0206,-0.0038 0.1871,-0.03466 0.3801,0.0517 0.4336,0.246155 0.047,0.171544 -0.0582,0.398606 -0.2462,0.433561 z" fill="white" stroke-width="1" stroke-linecap="round" stroke-linejoin="round"/><path d="m 35.60399,53.247687 c 0.08078,-0.4344 0.184476,-0.8656 0.290516,-1.2945 0.27435,-1.1112 0.59687,-2.2107 0.95818,-3.2969 0.51639,-1.5519 1.11533,-3.0772 1.8021,-4.5618 0.77958,-1.6855 1.67843,-3.3193 2.72679,-4.8529 1.10564,-1.61733 2.37694,-3.13333 3.85003,-4.42931 0.181,-0.15921 0.3648,-0.3146 0.5517,-0.46705 0.1474,-0.12014 0.3542,-0.14422 0.4984,0 0.1243,0.12425 0.1484,0.37746 0,0.49848 -1.496,1.22049 -2.81105,2.68068 -3.91816,4.22076 -1.09007,1.51692 -2.02446,3.14332 -2.83547,4.82502 -0.71438,1.4816 -1.29657,2.9171 -1.83911,4.4915 -0.39273,1.1395 -0.7417,2.2944 -1.04014,3.4624 -0.13306,0.5205 -0.23029,1.0495 -0.36101,1.5697 -0.0018,0.0071 -0.0026,0.0141 -0.0041,0.0212 -0.03495,0.1874 -0.26113,0.2934 -0.43356,0.2461 -0.19651,-0.054 -0.281111,-0.2458 -0.246156,-0.4335 z" fill="white"/>':"films"===t?n='<path d="M46.4444 34h-8.8888C35.5919 34 34 35.5919 34 37.5556v8.8888C34 48.4081 35.5919 50 37.5556 50h8.8888C48.4081 50 50 48.4081 50 46.4444v-8.8888C50 35.5919 48.4081 34 46.4444 34Z" stroke="#fff" stroke-width="1" stroke-linecap="round" stroke-linejoin="round"/><path d="M43.8832 41.1264c.6844.3911.6844 1.3778 0 1.7689l-1.3778.7911-1.3778.7911c-.6844.3911-1.5378-.0978-1.5378-.8889v-3.1822c0-.7911.8534-1.28 1.5378-.8889l1.3778.7911 1.3778.7912v.0266Z" stroke="#fff" stroke-width="1" stroke-linecap="round" stroke-linejoin="round"/>':"courses"===t?n='<path d="M42 36.4822v11.8112m0-11.8112.7701-.289c1.7524-.6576 3.7074-.6576 5.4598 0 .4651.1746.7701.5972.7701 1.0672v9.6954c0 .6454-.6947 1.0866-1.3334.847-1.3908-.522-2.9424-.522-4.3332 0l-1.3238.4967c-.0046.0018-.0096-.0014-.0096-.0061m0-11.8112-.7701-.289c-1.7524-.6576-3.7074-.6576-5.4598 0-.4651.1746-.7701.5972-.7701 1.0672v9.6954c0 .6454.6947 1.0866 1.3334.847 1.3908-.522 2.9424-.522 4.3332 0l1.3238.4967c.0046.0018.0096-.0014.0096-.0061" stroke="#fff" stroke-width="1"/>':"events"===t&&(n='<rect x="33" y="31" width="18.1602" height="22.7002" rx="3" stroke="#fff" stroke-width="1"/><path d="M42.0799 43.2013c1.4472 0 2.62-1.1445 2.62-2.5538 0-1.4093-1.1728-2.5537-2.62-2.5537-1.4471 0-2.6199 1.1444-2.6199 2.5537s1.1728 2.5538 2.6199 2.5538Zm-2.8377 3.4052c1.2721-2.0903 4.3698-2.0998 5.6608-.0237l.0142.0237" stroke="#fff" stroke-width="1" stroke-linecap="round" stroke-linejoin="round"/>'),'<div class="work-icon-single-w">\n            <svg class="work-icon" fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 84 84">\n                <g class="circles-g">\n                    <rect class="in-circle" x="14.5" y="14.5" width="55" height="55" rx="27.5" stroke="none" stroke-opacity="0.42" stroke-width="1.2"/>\n                    <rect class="out-circle" x=".5" y=".5" width="83" height="83" rx="41.5" stroke="#fff" stroke-opacity="0.12" stroke-width="1.2" fill="#A94C21"/>\n                </g>\n                '.concat(n,"\n            </svg>\n            ").concat(e?'<p class="work-t">'.concat(e,"</p>"):"","\n        </div>")}},{key:"createLabelMarker",value:function(t){return'<div class="label-marker">\n            <p class="label-t">'.concat(t,"</p>\n        </div>")}},{key:"initMapboxMarkers",value:function(){var t=this;if(this.mapbox&&window.mapboxgl){var e=this.element.querySelectorAll(".icon-text-w[data-work-lat][data-work-lng]"),n=this.element.querySelectorAll(".label[data-label-lat][data-label-lng]");if(this.element.querySelectorAll(".work-icon-w").forEach((function(t){t.style.display="none"})),this.element.querySelectorAll(".labels-w").forEach((function(t){t.style.display="none"})),this.mapboxMarkers.forEach((function(t){try{t.marker.remove()}catch(t){}})),this.mapboxMarkers=[],this.unclassifiedWorkMarkers=[],this.mapboxLabelMarkers.forEach((function(t){try{t.marker.remove()}catch(t){}})),this.mapboxLabelMarkers=[],this.unclassifiedLabelMarkers=[],0!==e.length){e.forEach((function(e,n){var r=parseFloat(e.dataset.workLat||"0"),i=parseFloat(e.dataset.workLng||"0"),o=e.dataset.workType||"post",a=e.dataset.placeId||"-1",s="unclassified"===a,l=s?-1:parseInt(a),u=e.dataset.workButton,c=e.querySelector(".work-t"),d=c?c.textContent.trim():"";if(0!==r||0!==i||s){s&&console.log("Found unclassified work:",d,"lat:",r,"lng:",i);var f=document.createElement("div");f.innerHTML=t.createMarkerSVG(o,d),f.style.display="block",f.style.pointerEvents="auto",f.style.width="max-content",f.style.height="max-content";var h=new window.mapboxgl.Marker({element:f,anchor:"center"}).setLngLat([i,r]);h.addTo(t.mapbox);var p=h.getElement();if(p){p.style.display="block",p.style.visibility="visible",p.style.opacity="1",p.style.overflow="visible";var m=p.querySelector(".work-icon-single-w");m&&(m.style.overflow="visible")}var g=f.querySelector(".work-icon");g&&g.addEventListener("click",(function(e){e.stopPropagation();var n=t.workButtons.find((function(t){return t.id===u}));n&&(t.showWorkBg(),t.showPopin(n))}));var v={marker:h,placeId:l,workButton:u,isUnclassified:s,visible:!0};t.mapboxMarkers.push(v),s&&t.unclassifiedWorkMarkers.push(v)}})),n.length,n.forEach((function(e,n){var r=parseFloat(e.dataset.labelLat||"0"),i=parseFloat(e.dataset.labelLng||"0"),o=e.dataset.placeId||"-1",a="unclassified"===o,s=a?-1:parseInt(o),l=e.querySelector(".label-t"),u=l?l.textContent.trim():"";if(0!==r||0!==i||a){a&&console.log("Found unclassified label:",u,"lat:",r,"lng:",i);var c=document.createElement("div");c.innerHTML=t.createLabelMarker(u),c.style.display="block",c.style.pointerEvents="auto",c.style.width="max-content",c.style.height="max-content";var d=new window.mapboxgl.Marker({element:c,anchor:"center"}).setLngLat([i,r]);d.addTo(t.mapbox);var f=d.getElement();f&&(f.style.display="block",f.style.visibility="visible",f.style.opacity="1",f.style.overflow="visible");var h={marker:d,placeId:s,isUnclassified:a,visible:!0};t.mapboxLabelMarkers.push(h),a&&t.unclassifiedLabelMarkers.push(h)}}));var r=null!==this.activeIndex?this.activeIndex:0;this.updateMapboxMarkers(r),this.updateLabelVisibility()}}}},{key:"updateMapboxMarkers",value:function(t){if(this.mapbox){if(0===this.mapboxMarkers.length&&0===this.mapboxLabelMarkers.length)return this.mapbox.isStyleLoaded()?void this.initMapboxMarkers():void 0;this.mapboxMarkers.forEach((function(t,e){try{var n=t.marker.getElement();if(n){var r=n.querySelector(".work-icon-single-w")||n.firstElementChild;n.style.display="block",n.style.visibility="visible",n.style.opacity="1",r&&(r.style.display="block",r.style.visibility="visible",r.style.opacity="1")}}catch(e){console.error("Error updating work marker:",e,t)}t.visible=!0})),this.mapboxLabelMarkers.forEach((function(t,e){try{var n=t.marker.getElement();n&&(n.style.display="block",n.style.visibility="visible",n.style.opacity="1")}catch(e){console.error("Error updating label marker:",e,t)}t.visible=!0}))}}},{key:"getDistanceBetweenPoints",value:function(t,e){if(!t||!e)return 0;var n=t[0]||t.lng,r=t[1]||t.lat,i=(e[0]||e.lng)-n,o=(e[1]||e.lat)-r;return Math.sqrt(i*i+o*o)}},{key:"findClosestPlace",value:function(t){var e=this,n=null!==this.activeIndex?this.activeIndex:0,r=1/0;return this.placeContents.forEach((function(i,o){var a,s;if(i&&i.element){var l=parseFloat((null===(a=i.element)||void 0===a||null===(a=a.dataset)||void 0===a?void 0:a.latitude)||"0")||0,u=parseFloat((null===(s=i.element)||void 0===s||null===(s=s.dataset)||void 0===s?void 0:s.longitude)||"0")||0;if(0!==l||0!==u){var c=e.getDistanceBetweenPoints(t,[u,l]);c<r&&(r=c,n=o)}}})),{index:n,distance:r}}},{key:"switchPlaceWithoutJump",value:function(t){var e,n,r;if(this.brItems[t]&&this.placeContents[t]){this.brItems.forEach((function(e){e.element.classList.toggle("active",e.id==t)})),this.bootstrap.mapAnchor=t,this.activeIndex=t;var i=null===(e=this.placeContents[t])||void 0===e?void 0:e.element,o=parseFloat((null==i||null===(n=i.dataset)||void 0===n?void 0:n.latitude)||"0")||0,a=parseFloat((null==i||null===(r=i.dataset)||void 0===r?void 0:r.longitude)||"0")||0;this.initialPlaceCenter=[a,o],this.updateMapboxMarkers(t),this.setContentActive(t).play(),this.viewport.medias.desktop||this.setMobileBarActive(t)}else console.error("Invalid place index in switchPlaceWithoutJump:",t)}},{key:"setContentActive",value:function(t){var e=this,n=this.placeContents.find((function(t){return 1==t.active})),r=this.placeContents[t],i=ti.timeline({paused:!0});if(n&&n!==r){var o=this.hideContent(n);i.add(o,0);var a=this.showContent(r);i.add(a,.5),i.set(n.element,{display:"none"},1.8)}else i.add(this.showContent(r),0);return i.set(this,{locked:!1}),i.add((function(){e.placeContents[t].icons.forEach((function(t){var n=t.dataset.workButton,r=e.element.querySelector('[data-work="'.concat(n,'"] img'));r&&(r.setAttribute("loading","eager"),r.style.display="block")}))})),i}},{key:"hideContent",value:function(t){var e,n;return null===(e=t.tl)||void 0===e||null===(n=e.kill)||void 0===n||n.call(e),t.tl=ti.timeline(),t.tl.set(t,{active:!1},0),t.icons&&t.icons.length>0&&t.tl.to(t.icons,{opacity:0,duration:.8,ease:"none",stagger:{each:.1,from:"end"}},0),t.labels&&t.labels.length>0&&t.tl.to(t.labels,{opacity:0,duration:.8,ease:"none",stagger:{each:.1,from:"end"}},0),t.middleTexts&&t.middleTexts.length>0&&t.tl.to(t.middleTexts,{opacity:0,duration:.9,ease:"none",stagger:{each:.03,from:"end"}},0),t.tl}},{key:"showContent",value:function(t){var e,n;return null===(e=t.tl)||void 0===e||null===(n=e.kill)||void 0===n||n.call(e),t.tl=ti.timeline(),t.tl.set(t,{active:!0},0),t.element&&t.tl.set(t.element,{display:"block"},0),t.icons&&t.icons.length>0&&t.tl.to(t.icons,{opacity:1,duration:1.6,ease:"none",stagger:{each:.2,from:"center"}},.6),t.labels&&t.labels.length>0&&t.tl.to(t.labels,{opacity:1,duration:1.6,ease:"none",stagger:{each:.2,from:"center"}},.6),t.middleTexts&&t.middleTexts.length>0&&t.tl.to(t.middleTexts,{opacity:1,duration:2.2,ease:"power2.inOut",stagger:.2},.15),t.tl}},{key:"attach",value:function(){var t,e,n,r,i,o,a,s,l,u,c,d,f,h,p,m=this;null===(t=this.mapIcon)||void 0===t||t.addEventListener("click",this.openBreadcrumb),null===(e=this.bgCover)||void 0===e||e.addEventListener("click",this.closeBreadcrumb),null===(n=this.brCross)||void 0===n||n.addEventListener("click",this.closeBreadcrumb),null===(r=this.backToPlacesButton)||void 0===r||r.addEventListener("click",this.showPlacesListFullscreen),null===(i=this.brItems)||void 0===i||i.forEach((function(t){var e;null===(e=t.element)||void 0===e||e.addEventListener("click",m.brItemClick)})),null===(o=this.forwardArrow)||void 0===o||o.addEventListener("click",this.arrowClick),null===(a=this.backwardArrow)||void 0===a||a.addEventListener("click",this.arrowClick),null===(s=this.mobileBarTextW)||void 0===s||s.addEventListener("click",this.openBreadcrumb),null===(l=this.header)||void 0===l||l.classList.add("bg-gradient"),window.addEventListener("resize",this.resize),null===(u=this.workButtons)||void 0===u||u.forEach((function(t){var e;null===(e=t.svg)||void 0===e||e.addEventListener("click",m.openWork)})),null===(c=this.closeWorkButtons)||void 0===c||c.forEach((function(t){null==t||t.addEventListener("click",m.closeWork)})),null===(d=this.placeContents)||void 0===d||d.forEach((function(t){var e;null===(e=t.nextChapterButton)||void 0===e||e.addEventListener("click",m.arrowClick)})),null===(f=this.placesListItems)||void 0===f||f.forEach((function(t){var e;null===(e=t.element)||void 0===e||e.addEventListener("click",m.placeListItemClick)})),null===(h=this.zoomInButton)||void 0===h||h.addEventListener("click",this.zoomIn),null===(p=this.zoomOutButton)||void 0===p||p.addEventListener("click",this.zoomOut)}},{key:"detach",value:function(){var t,e,n,r,i,o,a,s,l,u,c,d,f,h,p,m=this;null===(t=this.mapIcon)||void 0===t||t.removeEventListener("click",this.openBreadcrumb),null===(e=this.bgCover)||void 0===e||e.removeEventListener("click",this.closeBreadcrumb),null===(n=this.brCross)||void 0===n||n.removeEventListener("click",this.closeBreadcrumb),null===(r=this.brItems)||void 0===r||r.forEach((function(t){var e;null===(e=t.element)||void 0===e||e.removeEventListener("click",m.brItemClick)})),null===(i=this.backToPlacesButton)||void 0===i||i.removeEventListener("click",this.showPlacesListFullscreen),null===(o=this.forwardArrow)||void 0===o||o.removeEventListener("click",this.arrowClick),null===(a=this.backwardArrow)||void 0===a||a.removeEventListener("click",this.arrowClick),null===(s=this.mobileBarTextW)||void 0===s||s.removeEventListener("click",this.openBreadcrumb),null===(l=this.header)||void 0===l||l.classList.remove("bg-gradient"),window.removeEventListener("resize",this.resize),window.removeEventListener("resize",this.setViewportHeight),window.removeEventListener("orientationchange",this.setViewportHeight),null===(u=this.workButtons)||void 0===u||u.forEach((function(t){var e;null===(e=t.svg)||void 0===e||e.removeEventListener("click",m.openWork)})),null===(c=this.closeWorkButtons)||void 0===c||c.forEach((function(t){null==t||t.removeEventListener("click",m.closeWork)})),null===(d=this.placeContents)||void 0===d||d.forEach((function(t){var e;null===(e=t.nextChapterButton)||void 0===e||e.removeEventListener("click",m.arrowClick)})),null===(f=this.placesListItems)||void 0===f||f.forEach((function(t){var e;null===(e=t.element)||void 0===e||e.removeEventListener("click",m.placeListItemClick)})),null===(h=this.zoomInButton)||void 0===h||h.removeEventListener("click",this.zoomIn),null===(p=this.zoomOutButton)||void 0===p||p.removeEventListener("click",this.zoomOut)}}],r&&UT(n.prototype,r),i&&UT(n,i),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,i}(Yp);function KT(t){return KT="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},KT(t)}function XT(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,$T(r.key),r)}}function $T(t){var e=function(t,e){if("object"!=KT(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=KT(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==KT(e)?e:e+""}function ZT(t,e,n){return e=eC(e),JT(t,tC()?Reflect.construct(e,n||[],eC(t).constructor):e.apply(t,n))}function JT(t,e){if(e&&("object"===KT(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function tC(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(tC=function(){return!!t})()}function eC(t){return eC=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},eC(t)}function nC(t,e){return nC=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},nC(t,e)}var rC=function(t){function e(t,n){var r;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var i=(r=ZT(this,e,[t,n])).element.querySelector("#user_login");i&&(i.placeholder="Email",i.autocomplete="off",i.value="");var o=r.element.querySelector("#user_pass");(o&&(o.placeholder="Password",o.autocomplete="off",o.value="",r.submitButton=r.element.querySelector("#wp-submit"),r.submitButton.value="LOGIN TO ENTER"),r.forgotPasswordButton=r.element.querySelector(".mepr-login-actions"),r.forgotPasswordButton)&&(r.forgotPasswordButton.remove(),r.element.querySelector(".submit").parentNode.insertBefore(r.forgotPasswordButton,r.element.querySelector(".submit")));if(r.mailUsernameInput=r.element.querySelector("#mepr_user_or_email"),r.mailUsernameInput&&(r.mailUsernameInput.placeholder="Email Address",r.element.querySelector(".mp_wrapper h3").remove()),r.element.querySelector(".mepr_user_password")&&(r.element.querySelector(".mepr_user_password").placeholder="Password"),r.element.querySelector(".mepr_user_password_confirm")&&(r.element.querySelector(".mepr_user_password_confirm").placeholder="Confirm your password"),r.wrapper=r.element.querySelector(".form-w"),r.formW=r.element.querySelector(".mp_wrapper"),!r.formW)return JT(r);if(r.element.querySelector(".mepr-forgot-password-confirm")&&(r.element.querySelector(".mepr-forgot-password-confirm").placeholder="Confirm your password"),r.element.querySelector(".mepr-forgot-password")&&(r.element.querySelector(".mepr-forgot-password").placeholder="New password"),r.element.querySelector("#mepr_forgot_password_form")){var a=r.element.querySelector(".back-to-login");a.setAttribute("href",window.location.origin+"/login"),r.element.querySelector(".submit").parentNode.insertBefore(a,r.element.querySelector(".submit").nextSibling)}return r.element.querySelectorAll('input[type="submit"]').forEach((function(t){t.classList.add("form-button")})),r.inputButton=r.element.querySelector(".input-button"),r.originalInput=r.element.querySelector('input[type="submit"]'),r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&nC(t,e)}(e,t),n=e,(r=[{key:"init",value:function(){var t=this;this.formW&&this.inputButton&&this.originalInput&&(this.inputButton.remove(),this.inputButton.querySelectorAll(".button-text").forEach((function(e){e.innerText=t.originalInput.value})),this.originalInput.parentNode.insertBefore(this.inputButton,this.originalInput),this.originalInput.remove())}},{key:"attach",value:function(){this.formW&&ti.fromTo(this.wrapper,{opacity:0},{opacity:1,duration:.6,ease:"none",delay:.5})}},{key:"detach",value:function(){}}])&&XT(n.prototype,r),i&&XT(n,i),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,i}(Yp);function iC(t){return iC="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},iC(t)}function oC(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,fC(r.key),r)}}function aC(t,e,n){return e=uC(e),sC(t,lC()?Reflect.construct(e,n||[],uC(t).constructor):e.apply(t,n))}function sC(t,e){if(e&&("object"===iC(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function lC(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(lC=function(){return!!t})()}function uC(t){return uC=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},uC(t)}function cC(t,e){return cC=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},cC(t,e)}function dC(t,e,n){return(e=fC(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function fC(t){var e=function(t,e){if("object"!=iC(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=iC(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==iC(e)?e:e+""}var hC=function(t){function e(t,n){var r;if(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),dC(r=aC(this,e,[t,n]),"initGiftCouponPriceUpdater",(function(){var t=function(){var t=r.element.querySelector(".mepr_price_cell");if(t){var e=t.textContent||t.innerText||"";(function(){if(r.couponInput&&r.couponInput.value&&0===r.couponInput.value.toUpperCase().indexOf("GIFT-"))return!0;var t=r.element.querySelector(".mepr_price_cell");return!(!t||!(t.textContent||t.innerText||"").match(/GIFT-[\w]+/i))})()&&-1!==e.indexOf("Free forever with coupon")&&(t.textContent="One Year Free")}};t(),r.giftCouponInterval=setInterval(t,1e3);var e=r.element.querySelector(".mepr-form");if(e&&(r.giftCouponObserver=new MutationObserver((function(){t()})),r.giftCouponObserver.observe(e,{childList:!0,subtree:!0,characterData:!0})),r.couponInput){var n=function(){setTimeout(t,500)};r.couponInput.addEventListener("input",n),r.couponInput.addEventListener("change",n),r.couponInput.addEventListener("keyup",n),r.giftCouponHandlers={input:n,change:n,keyup:n}}})),dC(r,"updateBtnStatus",(function(){r.hasReadTermsCheckbox&&(r.registerBtn.classList.toggle("disabled",!r.hasReadTermsCheckbox.checked),r.registerBtn.disabled=!r.hasReadTermsCheckbox.checked)})),dC(r,"checkInputs",(function(){var t=[],e=[];return r.firstNameInput.value.length<2?t.push(r.firstNameInput):e.push(r.firstNameInput),r.lastNameInput.value.length<2?t.push(r.lastNameInput):e.push(r.lastNameInput),r.emailInput&&!r.validateEmail(r.emailInput.value)?t.push(r.emailInput):e.push(r.emailInput),r.passwordInput&&!r.validatePassword(r.passwordInput.value,r.passwordInputConf.value)?t.push(r.passwordInput,r.passwordInputConf):e.push(r.passwordInput,r.passwordInputConf),r.highlightError(e,!1),r.highlightError(t,!0),!(t.length>0)})),dC(r,"highlightError",(function(t,e){t.forEach((function(t){t&&"hidden"!=t.type&&(e?t.classList.add("error"):t.classList.remove("error"))}))})),r.logged="true"==r.element.dataset.logged,r.warningWrapper=r.element.querySelector(".warning-wrapper"),r.meprForm=r.element.querySelector(".mepr-form"),r.logged&&r.warningWrapper)r.warningWrapper.remove();else if(!r.logged&&r.warningWrapper)return r.meprForm.remove(),sC(r);return r.firstNameInput=r.element.querySelector("[name='user_first_name']"),r.firstNameInput&&(r.firstNameInput.placeholder="First name*",r.firstNameInput.tabIndex=1),r.lastNameInput=r.element.querySelector("[name='user_last_name']"),r.lastNameInput&&(r.lastNameInput.placeholder="Last name*",r.lastNameInput.tabIndex=2),r.passwordInput=r.element.querySelector("[name='mepr_user_password']"),r.passwordInput&&(r.passwordInput.placeholder="Create your password*",r.passwordInput.tabIndex=3),r.passwordInputConf=r.element.querySelector("[name='mepr_user_password_confirm']"),r.passwordInputConf&&(r.passwordInputConf.placeholder="Confirm your password*",r.passwordInputConf.tabIndex=4),r.element.querySelector("[name='user_login']")&&(r.element.querySelector("[name='user_login']").placeholder="Username"),r.emailInput=r.element.querySelector("[name='user_email']"),r.emailInput&&(r.emailInput.placeholder="Email*",r.emailInput.tabIndex=5),r.couponInput=r.element.querySelector("[name='mepr_coupon_code']"),r.couponInput&&(r.couponInput.placeholder="Coupon code",r.couponInput.tabIndex=6),r.element.querySelector(".mepr_mepr-address-one")&&r.element.querySelector(".mepr_mepr-address-one").remove(),r.element.querySelector(".mepr_mepr-address-two")&&r.element.querySelector(".mepr_mepr-address-two").remove(),r.element.querySelector(".mepr_mepr-address-city")&&r.element.querySelector(".mepr_mepr-address-city").remove(),r.element.querySelector(".mepr_mepr-address-country")&&r.element.querySelector(".mepr_mepr-address-country").remove(),r.element.querySelector(".mepr_mepr-address-state")&&r.element.querySelector(".mepr_mepr-address-state").remove(),r.element.querySelector(".mepr_mepr-address-zip")&&r.element.querySelector(".mepr_mepr-address-zip").remove(),r.element.querySelector(".mepr_mepr-address-zip")&&r.element.querySelector(".mepr_mepr-address-zip").remove(),r.element.querySelectorAll(".mepr_spacer").length>0&&r.element.querySelectorAll(".mepr_spacer").forEach((function(t){t.remove()})),r.element.querySelector("#user_pass")&&(r.element.querySelector("#user_pass").placeholder="PASSWORD",r.submitButton=r.element.querySelector("#wp-submit"),r.submitButton.value="SIGN UP TO ENTER"),r.inputWrappers=r.element.querySelectorAll(".mp-form-row"),r.selectionW=r.element.querySelector(".selection-w"),r.submitButton=r.element.querySelector(".mepr-submit"),r.loader=r.element.querySelector(".loader"),r.meprForm=r.element.querySelector(".mepr-form"),r.wrapper=r.element.querySelector(".form-w"),r.formW=r.element.querySelector(".mp_wrapper"),r.inputs=r.element.querySelectorAll("input"),r.inputButton=r.element.querySelector(".input-button"),r.originalInput=r.element.querySelector('input[type="submit"]'),r.gifLoader=r.element.querySelector(".mepr-loading-gif"),r.registerBtn=r.element.querySelector("button.mepr-submit"),r.hasReadTermsCheckbox=r.element.querySelector("#mepr_agree_to_terms"),r.updateBtnStatus(),r.initGiftCouponPriceUpdater(),r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&cC(t,e)}(e,t),n=e,(r=[{key:"init",value:function(){var t=this;this.logged&&(this.gifLoader&&this.gifLoader.remove(),this.submitButton&&this.submitButton.classList.add("rect-button","bg-black","white"),this.nextendButtons=this.element.querySelectorAll(".nsl-button"),!this.passwordInput&&this.meprForm&&this.meprForm.classList.add("logged-in"),this.inputButton.remove(),this.inputButton.querySelectorAll(".button-text").forEach((function(e){e.innerText=t.originalInput.value})),this.originalInput.parentNode.insertBefore(this.inputButton,this.originalInput),this.loader.classList.add("mepr-loading-gif"),this.inputButton.insertAdjacentHTML("beforeend",this.loader.outerHTML),this.originalInput.remove())}},{key:"validateEmail",value:function(t){return!!/^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,3})+$/.test(t)}},{key:"validatePassword",value:function(t,e){}},{key:"attach",value:function(){var t=this;this.logged&&(ti.set(this.formW,{display:"flex"}),ti.fromTo(this.wrapper,{opacity:0},{opacity:1,duration:.6,ease:"none",delay:.5}),this.inputs.length>0&&this.inputs.forEach((function(e){return e.addEventListener("blur",t.checkInputs)})),this.hasReadTermsCheckbox.addEventListener("change",this.updateBtnStatus))}},{key:"detach",value:function(){var t=this;this.logged&&(this.inputs.length>0&&this.inputs.forEach((function(e){return e.removeEventListener("blur",t.checkInputs)})),this.hasReadTermsCheckbox.removeEventListener("change",this.updateBtnStatus),this.giftCouponInterval&&clearInterval(this.giftCouponInterval),this.giftCouponObserver&&this.giftCouponObserver.disconnect(),this.couponInput&&this.giftCouponHandlers&&(this.couponInput.removeEventListener("input",this.giftCouponHandlers.input),this.couponInput.removeEventListener("change",this.giftCouponHandlers.change),this.couponInput.removeEventListener("keyup",this.giftCouponHandlers.keyup)))}}])&&oC(n.prototype,r),i&&oC(n,i),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,i}(Yp);function pC(t){return pC="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},pC(t)}function mC(t){return function(t){if(Array.isArray(t))return gC(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return gC(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return gC(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function gC(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function vC(){vC=function(){return e};var t,e={},n=Object.prototype,r=n.hasOwnProperty,i=Object.defineProperty||function(t,e,n){t[e]=n.value},o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",s=o.asyncIterator||"@@asyncIterator",l=o.toStringTag||"@@toStringTag";function u(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,n){return t[e]=n}}function c(t,e,n,r){var o=e&&e.prototype instanceof v?e:v,a=Object.create(o.prototype),s=new P(r||[]);return i(a,"_invoke",{value:T(t,n,s)}),a}function d(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}e.wrap=c;var f="suspendedStart",h="suspendedYield",p="executing",m="completed",g={};function v(){}function y(){}function b(){}var _={};u(_,a,(function(){return this}));var w=Object.getPrototypeOf,A=w&&w(w(R([])));A&&A!==n&&r.call(A,a)&&(_=A);var E=b.prototype=v.prototype=Object.create(_);function x(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function S(t,e){function n(i,o,a,s){var l=d(t[i],t,o);if("throw"!==l.type){var u=l.arg,c=u.value;return c&&"object"==pC(c)&&r.call(c,"__await")?e.resolve(c.__await).then((function(t){n("next",t,a,s)}),(function(t){n("throw",t,a,s)})):e.resolve(c).then((function(t){u.value=t,a(u)}),(function(t){return n("throw",t,a,s)}))}s(l.arg)}var o;i(this,"_invoke",{value:function(t,r){function i(){return new e((function(e,i){n(t,r,e,i)}))}return o=o?o.then(i,i):i()}})}function T(e,n,r){var i=f;return function(o,a){if(i===p)throw Error("Generator is already running");if(i===m){if("throw"===o)throw a;return{value:t,done:!0}}for(r.method=o,r.arg=a;;){var s=r.delegate;if(s){var l=C(s,r);if(l){if(l===g)continue;return l}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(i===f)throw i=m,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);i=p;var u=d(e,n,r);if("normal"===u.type){if(i=r.done?m:h,u.arg===g)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(i=m,r.method="throw",r.arg=u.arg)}}}function C(e,n){var r=n.method,i=e.iterator[r];if(i===t)return n.delegate=null,"throw"===r&&e.iterator.return&&(n.method="return",n.arg=t,C(e,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),g;var o=d(i,e.iterator,n.arg);if("throw"===o.type)return n.method="throw",n.arg=o.arg,n.delegate=null,g;var a=o.arg;return a?a.done?(n[e.resultName]=a.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=t),n.delegate=null,g):a:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,g)}function I(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function k(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function P(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(I,this),this.reset(!0)}function R(e){if(e||""===e){var n=e[a];if(n)return n.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var i=-1,o=function n(){for(;++i<e.length;)if(r.call(e,i))return n.value=e[i],n.done=!1,n;return n.value=t,n.done=!0,n};return o.next=o}}throw new TypeError(pC(e)+" is not iterable")}return y.prototype=b,i(E,"constructor",{value:b,configurable:!0}),i(b,"constructor",{value:y,configurable:!0}),y.displayName=u(b,l,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===y||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,b):(t.__proto__=b,u(t,l,"GeneratorFunction")),t.prototype=Object.create(E),t},e.awrap=function(t){return{__await:t}},x(S.prototype),u(S.prototype,s,(function(){return this})),e.AsyncIterator=S,e.async=function(t,n,r,i,o){void 0===o&&(o=Promise);var a=new S(c(t,n,r,i),o);return e.isGeneratorFunction(n)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},x(E),u(E,l,"Generator"),u(E,a,(function(){return this})),u(E,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),n=[];for(var r in e)n.push(r);return n.reverse(),function t(){for(;n.length;){var r=n.pop();if(r in e)return t.value=r,t.done=!1,t}return t.done=!0,t}},e.values=R,P.prototype={constructor:P,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(k),!e)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function i(r,i){return s.type="throw",s.arg=e,n.next=r,i&&(n.method="next",n.arg=t),!!i}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],s=a.completion;if("root"===a.tryLoc)return i("end");if(a.tryLoc<=this.prev){var l=r.call(a,"catchLoc"),u=r.call(a,"finallyLoc");if(l&&u){if(this.prev<a.catchLoc)return i(a.catchLoc,!0);if(this.prev<a.finallyLoc)return i(a.finallyLoc)}else if(l){if(this.prev<a.catchLoc)return i(a.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return i(a.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=t,a.arg=e,o?(this.method="next",this.next=o.finallyLoc,g):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),g},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),k(n),g}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var i=r.arg;k(n)}return i}}throw Error("illegal catch attempt")},delegateYield:function(e,n,r){return this.delegate={iterator:R(e),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=t),g}},e}function yC(t,e,n,r,i,o,a){try{var s=t[o](a),l=s.value}catch(t){return void n(t)}s.done?e(l):Promise.resolve(l).then(r,i)}function bC(t){return function(){var e=this,n=arguments;return new Promise((function(r,i){var o=t.apply(e,n);function a(t){yC(o,r,i,a,s,"next",t)}function s(t){yC(o,r,i,a,s,"throw",t)}a(void 0)}))}}function _C(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,TC(r.key),r)}}function wC(t,e,n){return e=EC(e),function(t,e){if(e&&("object"===pC(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,AC()?Reflect.construct(e,n||[],EC(t).constructor):e.apply(t,n))}function AC(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(AC=function(){return!!t})()}function EC(t){return EC=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},EC(t)}function xC(t,e){return xC=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},xC(t,e)}function SC(t,e,n){return(e=TC(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function TC(t){var e=function(t,e){if("object"!=pC(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=pC(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==pC(e)?e:e+""}var CC=function(t){function e(t,n){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),SC(r=wC(this,e,[t,n]),"resize",(function(){r.oldDk=r.viewport.medias.desktop})),SC(r,"openSection",function(){var t=bC(vC().mark((function t(e){var n,i,o,a=arguments;return vC().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=a.length>1&&void 0!==a[1]?a[1]:{},!r.sectionSwitchLocked){t.next=3;break}return t.abrupt("return");case 3:return r.sectionSwitchLocked=!0,r.currentComponents=r.element.querySelectorAll("[data-component]").forEach((function(t){r.components.get(t).detach()})),ti.to(r.tabContent,{opacity:0,ease:"none",duration:.4}),r.loader.classList.add("active"),t.prev=7,t.next=10,fetch(ADMIN_AJAX_URL,{method:"POST",credentials:"include",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:new URLSearchParams({action:"david_get_template",template:e.template,params:JSON.stringify(n)}).toString()});case 10:return i=t.sent,t.next=13,i.text();case 13:o=t.sent,r.update(o,e),t.next=20;break;case 17:throw t.prev=17,t.t0=t.catch(7),t.t0;case 20:case"end":return t.stop()}}),t,null,[[7,17]])})));return function(e){return t.apply(this,arguments)}}()),SC(r,"update",(function(t,e){var n,i=e.template,o=e.params;null===(n=r.tl)||void 0===n||n.kill(),r.tl=ti.timeline({delay:.4}),r.tl.add(bC(vC().mark((function e(){var n,a;return vC().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(a=document.querySelectorAll("body > [data-fixed]")).forEach((function(t){return t.remove()})),r.brItems.forEach((function(t){t.element.classList.toggle("active",t.template===i),"partials/account/single-course-listing"===i&&"partials/account/courses"===t.template&&t.element.classList.add("active"),"partials/account/edit-card"===i&&"partials/account/edit-profile"===t.template&&t.element.classList.add("active")})),r.tabContent.innerHTML=t,r.components.setup(),r.followLinkModule.update(),null!=o&&o.keepLoading||r.loader.classList.remove("active"),us.refresh(),a=document.querySelectorAll("[data-fixed]"),(n=document.body).prepend.apply(n,mC(a)),r.sectionSwitchLocked=!1,null!=o&&o.keepLoading||ti.to(r.tabContent,{opacity:1,ease:"none",duration:.4});case 12:case"end":return e.stop()}}),e)}))))})),SC(r,"openMenu",(function(){var t,e,n;r.menu.classList.contains("active")?null!==(n=r.toggleTl)&&void 0!==n&&n.isActive()||r.closeMenu():(r.accountHeader.style.zIndex=6,r.menu.classList.add("active"),r.topBar.classList.add("active"),r.brCover.classList.add("menu"),null===(t=r.toggleTl)||void 0===t||null===(e=t.kill)||void 0===e||e.call(t),r.toggleTl=ti.timeline(),r.toggleTl.to(r.menu,{y:0,ease:"power3.out",duration:1},0),r.toggleTl.set(r.brCover,{display:"block"},0),r.toggleTl.to(r.brCover,{opacity:1,ease:"none",duration:.6},0))})),SC(r,"close",(function(){if(r.menu.classList.contains("active"))r.closeMenu();else{var t=window.location.search,e=new URLSearchParams(t);e.has("tab")&&"single-course-listing"===e.get("tab")?r.bootstrap.router.set("/account/?tab=courses"):r.bootstrap.router.set("/")}})),SC(r,"closeMenu",(function(){var t,e;r.bootstrap.smoother.start(),null===(t=r.toggleTl)||void 0===t||null===(e=t.kill)||void 0===e||e.call(t),r.toggleTl=ti.timeline(),r.toggleTl.to(r.menu,{y:"-100%",ease:"power3.out",duration:.8},0),r.toggleTl.to(r.brCover,{opacity:0,ease:"none",duration:.3},0),r.toggleTl.set(r.brCover,{display:"none"},0),r.toggleTl.add((function(){r.menu.classList.remove("active"),r.topBar.classList.remove("active"),r.brCover.classList.remove("menu"),r.accountHeader.style.zIndex=1}),.7)})),r.breadcrumb=document.querySelector(".account-breadcrumb"),r.brCover=document.querySelector(".breadcrumb-cover"),r.tabContent=r.element.querySelector(".tab-content"),r.loader=r.element.querySelector(".loader"),r.accountHeader=r.element.querySelector(".account-header-mobile"),r.topBar=r.accountHeader.querySelector(".top-infos"),r.menuBtn=r.accountHeader.querySelector(".menu-mobile-btn"),r.menu=r.accountHeader.querySelector(".menu"),r.closeMobile=r.accountHeader.querySelector(".close-icon"),r.brItemsElements=r.breadcrumb.querySelectorAll(".account-tab"),r.brItems=Array.from(r.brItemsElements).map((function(t){return{element:t,template:t.dataset.template,params:t.dataset.params?JSON.parse(t.dataset.params):{},url:t.dataset.url}})),r.needToOpenMenu="true"===r.element.getAttribute("data-need-open-menu"),!r.viewport.medias.tablet&&r.needToOpenMenu&&r.openMenu(),r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&xC(t,e)}(e,t),n=e,(r=[{key:"init",value:function(){var t=this;if(this.id){var e="partials/account/single-course-listing";this.brItems.forEach((function(t){t.element.classList.toggle("active",t.template===e),"partials/account/courses"===t.template&&t.element.classList.add("active")}))}else{var n=this.element.dataset.template;this.brItems.forEach((function(t){t.element.classList.toggle("active",t.template===n),"partials/account/single-course-listing"===n&&"partials/account/courses"===t.template&&t.element.classList.add("active"),"partials/account/edit-card"===n&&"partials/account/edit-profile"===t.template&&t.element.classList.add("active")}))}this.mm=ti.matchMedia(),this.mm.add("(min-width: 1439px)",(function(){ti.set(t.breadcrumb,{clearProps:"all"}),t.st=ti.timeline({scrollTrigger:{trigger:t.element,start:"top top",end:"bottom bottom",pin:t.breadcrumb}})}))}},{key:"attach",value:function(){this.menuBtn.addEventListener("click",this.openMenu),this.closeMobile.addEventListener("click",this.close),this.brCover.addEventListener("click",this.close),this.viewport.on("resize",this.resize)}},{key:"detach",value:function(){this.menuBtn.removeEventListener("click",this.openMenu),this.closeMobile.removeEventListener("click",this.close),this.brCover.removeEventListener("click",this.close),this.viewport.off("resize",this.resize)}}])&&_C(n.prototype,r),i&&_C(n,i),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,i}(Yp);function IC(t){return IC="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},IC(t)}function kC(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,PC(r.key),r)}}function PC(t){var e=function(t,e){if("object"!=IC(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=IC(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==IC(e)?e:e+""}function RC(t,e,n){return e=MC(e),function(t,e){if(e&&("object"===IC(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,OC()?Reflect.construct(e,n||[],MC(t).constructor):e.apply(t,n))}function OC(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(OC=function(){return!!t})()}function MC(t){return MC=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},MC(t)}function LC(t,e){return LC=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},LC(t,e)}var DC=function(t){function e(t,n){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),RC(this,e,[t,n])}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&LC(t,e)}(e,t),n=e,(r=[{key:"open",value:function(){return ti.timeline()}}])&&kC(n.prototype,r),i&&kC(n,i),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,i}(Yp);function NC(t){return NC="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},NC(t)}function BC(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,jC(r.key),r)}}function jC(t){var e=function(t,e){if("object"!=NC(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=NC(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==NC(e)?e:e+""}function zC(t,e,n){return e=UC(e),function(t,e){if(e&&("object"===NC(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,FC()?Reflect.construct(e,n||[],UC(t).constructor):e.apply(t,n))}function FC(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(FC=function(){return!!t})()}function UC(t){return UC=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},UC(t)}function qC(t,e){return qC=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},qC(t,e)}var GC=function(t){function e(t,n){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),zC(this,e,[t,n])}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&qC(t,e)}(e,t),n=e,r=[{key:"open",value:function(){var t=ti.timeline();return this.element.querySelectorAll('[data-animation="zoom-out-open"]').forEach((function(e){t.fromTo(e,{scale:1.1},{scale:1,ease:"immg.zoomOut",duration:2},0)})),this.element.querySelectorAll('[data-animation="reveal-open"]').forEach((function(e){var n=e.dataset.delay?parseFloat(e.dataset.delay):0,r=e.dataset.y?parseFloat(e.dataset.y):30;0==r?(t.set(e,{alpha:0},0),t.fromTo(e,{alpha:0},{alpha:1,duration:1.6},n)):(t.set(e,{y:0,alpha:0},0),t.fromTo(e,{y:r},{y:0,immediateRender:!1,duration:1.3,ease:"immg.expoOut",clearProps:"transform"},n),t.fromTo(e,{alpha:0},{alpha:1,duration:1.6},n))})),this.element.querySelectorAll("[data-animation='fade-open']").forEach((function(e){var n=e.dataset.delay?parseFloat(e.dataset.delay):0;t.set(e,{alpha:0},0),t.fromTo(e,{alpha:0},{alpha:1,duration:.6},n)})),this.element.querySelectorAll("[data-animation='title-open']").forEach((function(e){var n=e.dataset.delay?parseFloat(e.dataset.delay):0,r=new Fs(e,{type:"lines, words",linesClass:"inner-line"});t.fromTo(r.words,{opacity:0},{opacity:1,duration:1.3,ease:"none",stagger:.02},n),t.fromTo(r.words,{y:"80%"},{y:0,duration:.9,ease:"immg.expoOut",stagger:.02},n)})),t}}],r&&BC(n.prototype,r),i&&BC(n,i),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,i}(Yp),HC=n(7334),VC=n.n(HC);function QC(t){return QC="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},QC(t)}function WC(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return YC(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return YC(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return a=t.done,t},e:function(t){s=!0,o=t},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function YC(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function KC(){KC=function(){return e};var t,e={},n=Object.prototype,r=n.hasOwnProperty,i=Object.defineProperty||function(t,e,n){t[e]=n.value},o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",s=o.asyncIterator||"@@asyncIterator",l=o.toStringTag||"@@toStringTag";function u(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,n){return t[e]=n}}function c(t,e,n,r){var o=e&&e.prototype instanceof v?e:v,a=Object.create(o.prototype),s=new P(r||[]);return i(a,"_invoke",{value:T(t,n,s)}),a}function d(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}e.wrap=c;var f="suspendedStart",h="suspendedYield",p="executing",m="completed",g={};function v(){}function y(){}function b(){}var _={};u(_,a,(function(){return this}));var w=Object.getPrototypeOf,A=w&&w(w(R([])));A&&A!==n&&r.call(A,a)&&(_=A);var E=b.prototype=v.prototype=Object.create(_);function x(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function S(t,e){function n(i,o,a,s){var l=d(t[i],t,o);if("throw"!==l.type){var u=l.arg,c=u.value;return c&&"object"==QC(c)&&r.call(c,"__await")?e.resolve(c.__await).then((function(t){n("next",t,a,s)}),(function(t){n("throw",t,a,s)})):e.resolve(c).then((function(t){u.value=t,a(u)}),(function(t){return n("throw",t,a,s)}))}s(l.arg)}var o;i(this,"_invoke",{value:function(t,r){function i(){return new e((function(e,i){n(t,r,e,i)}))}return o=o?o.then(i,i):i()}})}function T(e,n,r){var i=f;return function(o,a){if(i===p)throw Error("Generator is already running");if(i===m){if("throw"===o)throw a;return{value:t,done:!0}}for(r.method=o,r.arg=a;;){var s=r.delegate;if(s){var l=C(s,r);if(l){if(l===g)continue;return l}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(i===f)throw i=m,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);i=p;var u=d(e,n,r);if("normal"===u.type){if(i=r.done?m:h,u.arg===g)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(i=m,r.method="throw",r.arg=u.arg)}}}function C(e,n){var r=n.method,i=e.iterator[r];if(i===t)return n.delegate=null,"throw"===r&&e.iterator.return&&(n.method="return",n.arg=t,C(e,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),g;var o=d(i,e.iterator,n.arg);if("throw"===o.type)return n.method="throw",n.arg=o.arg,n.delegate=null,g;var a=o.arg;return a?a.done?(n[e.resultName]=a.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=t),n.delegate=null,g):a:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,g)}function I(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function k(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function P(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(I,this),this.reset(!0)}function R(e){if(e||""===e){var n=e[a];if(n)return n.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var i=-1,o=function n(){for(;++i<e.length;)if(r.call(e,i))return n.value=e[i],n.done=!1,n;return n.value=t,n.done=!0,n};return o.next=o}}throw new TypeError(QC(e)+" is not iterable")}return y.prototype=b,i(E,"constructor",{value:b,configurable:!0}),i(b,"constructor",{value:y,configurable:!0}),y.displayName=u(b,l,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===y||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,b):(t.__proto__=b,u(t,l,"GeneratorFunction")),t.prototype=Object.create(E),t},e.awrap=function(t){return{__await:t}},x(S.prototype),u(S.prototype,s,(function(){return this})),e.AsyncIterator=S,e.async=function(t,n,r,i,o){void 0===o&&(o=Promise);var a=new S(c(t,n,r,i),o);return e.isGeneratorFunction(n)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},x(E),u(E,l,"Generator"),u(E,a,(function(){return this})),u(E,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),n=[];for(var r in e)n.push(r);return n.reverse(),function t(){for(;n.length;){var r=n.pop();if(r in e)return t.value=r,t.done=!1,t}return t.done=!0,t}},e.values=R,P.prototype={constructor:P,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(k),!e)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function i(r,i){return s.type="throw",s.arg=e,n.next=r,i&&(n.method="next",n.arg=t),!!i}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],s=a.completion;if("root"===a.tryLoc)return i("end");if(a.tryLoc<=this.prev){var l=r.call(a,"catchLoc"),u=r.call(a,"finallyLoc");if(l&&u){if(this.prev<a.catchLoc)return i(a.catchLoc,!0);if(this.prev<a.finallyLoc)return i(a.finallyLoc)}else if(l){if(this.prev<a.catchLoc)return i(a.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return i(a.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=t,a.arg=e,o?(this.method="next",this.next=o.finallyLoc,g):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),g},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),k(n),g}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var i=r.arg;k(n)}return i}}throw Error("illegal catch attempt")},delegateYield:function(e,n,r){return this.delegate={iterator:R(e),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=t),g}},e}function XC(t,e,n,r,i,o,a){try{var s=t[o](a),l=s.value}catch(t){return void n(t)}s.done?e(l):Promise.resolve(l).then(r,i)}function $C(t){return function(){var e=this,n=arguments;return new Promise((function(r,i){var o=t.apply(e,n);function a(t){XC(o,r,i,a,s,"next",t)}function s(t){XC(o,r,i,a,s,"throw",t)}a(void 0)}))}}function ZC(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,oI(r.key),r)}}function JC(t,e,n){return e=nI(e),tI(t,eI()?Reflect.construct(e,n||[],nI(t).constructor):e.apply(t,n))}function tI(t,e){if(e&&("object"===QC(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function eI(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(eI=function(){return!!t})()}function nI(t){return nI=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},nI(t)}function rI(t,e){return rI=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},rI(t,e)}function iI(t,e,n){return(e=oI(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function oI(t){var e=function(t,e){if("object"!=QC(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=QC(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==QC(e)?e:e+""}var aI=function(t){function e(t,n){var r,i,o,a,s;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),iI(s=JC(this,e,[t,n]),"handleCouponTop",(function(){var t;if(s.couponW)if(s.couponInput.value&&(s.couponInput.value=""),(null===(t=s.totalW)||void 0===t?void 0:t.offsetHeight)>10&&s.viewport.medias.tablet&&s.productList&&s.productsWrapper){console.log(s.expressCheckoutButtonSeparator.offsetHeight);var e=s.expressCheckoutW?s.expressCheckoutW.offsetHeight+s.expressCheckoutButtonSeparator.offsetHeight:0;s.couponW.style.top="".concat((s.errorsWrapper?s.errorsWrapper.offsetHeight:0)+s.productList.offsetHeight+s.totalW.offsetHeight+e+parseInt(getComputedStyle(s.productsWrapper).paddingTop),"px"),s.couponError&&(s.couponError.style.top="".concat(s.couponW.offsetTop+s.couponW.offsetHeight,"px"))}else s.couponW.style.top="",s.couponError&&(s.couponError.style.top="")})),iI(s,"onScroll",(function(){var t,e,n;s.smoother.velocity<2&&s.canScroll?null===(n=s.scrollOverlay)||void 0===n||n.classList.add("hidden"):null!==(t=s.scrollOverlay)&&void 0!==t&&t.classList.contains("hidden")&&(null===(e=s.scrollOverlay)||void 0===e||e.classList.remove("hidden"))})),iI(s,"resize",(function(){if(s.productsWrapper&&s.productsWrapper.offsetHeight>0&&s.viewport.medias.tablet){var t,e,n=getComputedStyle(s.productsWrapper),r=s.productsWrapper.offsetHeight-(null===(t=s.totalW)||void 0===t?void 0:t.offsetHeight)-parseInt(n.paddingTop)-parseInt(n.paddingBottom)-(null===(e=s.couponW)||void 0===e?void 0:e.offsetHeight);s.productList&&(s.productList.style.height="".concat(r,"px")),s.scrollOverlay.style.height="".concat(r,"px")}var i,o,a;(s.handleCouponTop(),s.productList&&s.productList.scrollHeight>s.productList.offsetHeight)?(s.canScroll=!0,null===(i=s.productList)||void 0===i||i.setAttribute("data-lenis-prevent","")):(s.canScroll=!1,null!==(o=s.productList)&&void 0!==o&&o.hasAttribute("data-lenis-prevent")&&(null===(a=s.productList)||void 0===a||a.removeAttribute("data-lenis-prevent")));us.refresh()})),iI(s,"redirectToShop",(function(){window.location.href="/store"})),iI(s,"refreshCheckout",(function(){s.resetErrors(),s.checkErrors()})),iI(s,"resetErrors",(function(){s.errors&&s.errors.forEach((function(t){var e=t.closest(".form-row").querySelector("input");e&&(e.classList.remove("error"),e.removeEventListener("input",s.removeError)),t.innerHTML=""}))})),iI(s,"checkErrors",(function(){var t=s.element.querySelector(".woocommerce-NoticeGroup-checkout");0==((null==t?void 0:t.querySelectorAll(".woocommerce-error li"))||[]).length&&(null==t||t.remove())})),iI(s,"removeError",(function(t){var e=t.target;e.classList.remove("error"),e.removeEventListener("input",s.removeError)})),iI(s,"refreshedCheckout",$C(KC().mark((function t(){var e;return KC().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,s.components.setup();case 2:s.followLinkModule.update(),s.errorsWrapper=s.element.querySelector(".woocommerce-NoticeGroup"),s.couponError=s.element.querySelector(".woocommerce-coupon-error"),s.productsWrapper=s.element.querySelector(".products-wrapper"),s.productList=null===(e=s.productsWrapper)||void 0===e?void 0:e.querySelector(".product-list"),s.scrollOverlay=s.element.querySelector(".scroll-overlay"),s.totalW=s.element.querySelector(".total-wrapper"),s.resize();case 10:case"end":return t.stop()}}),t)})))),iI(s,"toggleLenis",(function(){var t=document.querySelector(".select2-results__options");t&&t.setAttribute("data-lenis-prevent","")})),iI(s,"qtyDown",(function(t){var e=t.target.closest(".product-wrapper").querySelector(".quantity input"),n=parseInt(e.value);n>1&&(e.value=n-1,s.qtyChange())})),iI(s,"qtyUp",(function(t){var e=t.target.closest(".product-wrapper").querySelector(".quantity input"),n=parseInt(e.value);e.value=n+1,s.qtyChange()})),iI(s,"qtyChange",(0,HC.debounce)((function(){if(s.formCheckout.checkValidity()){var t={action:"update_order_review",post_data:jQuery("form.checkout").serialize()};jQuery.post(ADMIN_AJAX_URL,t,(function(t){jQuery("body").trigger("update_checkout")}))}}),400)),s.isConfirmOrder=s.element.querySelector(".woocommerce-order-overview"),s.isConfirmOrder?tI(s):(s.countryListingW=s.element.querySelector(".select2-container"),s.selects=s.element.querySelectorAll(".select2-container"),s.formCheckout=s.element.querySelector("form.checkout"),s.orderWrapper=s.element.querySelector(".order-wrapper"),s.productsWrapper=s.element.querySelector(".products-wrapper"),s.productList=null===(r=s.productsWrapper)||void 0===r?void 0:r.querySelector(".product-list"),s.products=null===(i=s.productList)||void 0===i?void 0:i.querySelectorAll(".product-wrapper"),s.couponW=s.element.querySelector(".woocommerce-form-coupon"),s.couponInput=null===(o=s.couponW)||void 0===o?void 0:o.querySelector("input[name='coupon_code']"),s.totalW=s.element.querySelector(".total-wrapper"),s.expressCheckoutW=s.element.querySelector("#wc-stripe-express-checkout-element"),s.expressCheckoutButtonSeparator=s.element.querySelector("#wc-stripe-express-checkout-button-separator"),s.errors=null===(a=s.formCheckout)||void 0===a?void 0:a.querySelectorAll(".error"),s.scrollOverlay=s.element.querySelector(".scroll-overlay"),s.canScroll=!1,s)}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&rI(t,e)}(e,t),n=e,r=[{key:"attach",value:function(){var t=this;if(!this.isConfirmOrder&&(this.selects&&this.selects.length&&this.selects.forEach((function(e){e.addEventListener("click",t.toggleLenis)})),window.addEventListener("scroll",this.onScroll),jQuery("form.checkout").on("click",".quantity-up",this.qtyUp),jQuery("form.checkout").on("click",".quantity-down",this.qtyDown),jQuery("body").on("checkout_error",this.refreshCheckout),jQuery("body").on("update_checkout",this.refreshCheckout),jQuery("body").on("updated_checkout",this.refreshedCheckout),jQuery("body").on("empty_cart",this.redirectToShop),this.viewport.on("resize",this.resize),this.couponW&&(this.couponW.style.opacity=1),this.refreshCheckout(),this.expressCheckoutW)){var e=new ResizeObserver((function(e){var n,r=WC(e);try{for(r.s();!(n=r.n()).done;)n.value,t.handleCouponTop()}catch(t){r.e(t)}finally{r.f()}}));e.observe(this.expressCheckoutW)}}},{key:"detach",value:function(){var t=this;this.isConfirmOrder||(this.selects&&this.selects.length&&this.selects.forEach((function(e){e.removeEventListener("click",t.toggleLenis)})),window.removeEventListener("scroll",this.onScroll),jQuery("form.checkout").off("click",".quantity-up",this.qtyUp),jQuery("form.checkout").off("click",".quantity-down",this.qtyDown),jQuery("body").off("checkout_error",this.refreshCheckout),jQuery("body").off("update_checkout",this.refreshCheckout),jQuery("body").off("updated_checkout",this.refreshedCheckout),jQuery("body").off("empty_cart",this.redirectToShop),this.viewport.off("resize",this.resize))}}],r&&ZC(n.prototype,r),i&&ZC(n,i),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,i}(Yp);function sI(t){return sI="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},sI(t)}function lI(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,uI(r.key),r)}}function uI(t){var e=function(t,e){if("object"!=sI(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=sI(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==sI(e)?e:e+""}function cI(t,e,n){return e=fI(e),function(t,e){if(e&&("object"===sI(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,dI()?Reflect.construct(e,n||[],fI(t).constructor):e.apply(t,n))}function dI(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(dI=function(){return!!t})()}function fI(t){return fI=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},fI(t)}function hI(t,e){return hI=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},hI(t,e)}function pI(t,e,n){!function(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}(t,e),e.set(t,n)}function mI(t,e){return t.get(vI(t,e))}function gI(t,e,n){return t.set(vI(t,e),n),n}function vI(t,e,n){if("function"==typeof t?t===e:t.has(e))return arguments.length<3?e:n;throw new TypeError("Private element is not present on this object")}var yI=new WeakMap,bI=new WeakMap,_I=function(t){function e(t,n){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),pI(r=cI(this,e,[t,n]),yI,null),pI(r,bI,null),r.beforeEvent=t.querySelector(".event-virtual-before"),r.afterEvent=t.querySelector(".event-virtual-passed"),r.startDate=t.dataset.startDate,r.endDate=t.dataset.endDate,r.registrationStartDate=t.dataset.registrationStartDate,r.registrationEndDate=t.dataset.registrationEndDate,r.removeFromLibraryDate=t.dataset.removeFromLibraryDate,r.displayAfterBroadcast="1"==t.dataset.displayAfterBroadcast,r.hasVideo=!!t.dataset.video,r.hasBought=!!t.dataset.bought,r.eventCta=t.querySelector(".internal-module.event-cta"),r.eventCtaCaption=r.eventCta.querySelector(".caption"),r.eventIntro=t.querySelector(".virtual-event-intro"),r.eventIntroGiftCta=r.eventIntro.querySelector(".gift-cta"),r.eventIntroRegisterCta=r.eventIntro.querySelector(".register-cta"),r.eventCountdown=t.querySelector(".internal-module.countdown .countdown-w"),r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&hI(t,e)}(e,t),n=e,(r=[{key:"init",value:function(){gI(yI,this,new Date(this.startDate)),gI(bI,this,new Date(this.endDate));var t=mI(yI,this)-new Date<0,e=mI(bI,this)-new Date<0;this.removeFromLibraryDate&&new Date(this.removeFromLibraryDate)<new Date&&(e=!1);var n=!this.registrationStartDate||new Date(this.registrationStartDate)-new Date<0,r=!!this.registrationEndDate&&new Date(this.registrationEndDate)-new Date<0;t&&e&&this.hasVideo&&this.hasBought&&this.displayAfterBroadcast?this.beforeEvent.remove():t&&!e?((!n||r||this.hasBought)&&(this.eventCta.classList.add("living"),this.eventCta.classList.remove("future"),n&&!r||(this.eventIntroGiftCta.style.display="none"),this.eventIntroRegisterCta&&(this.eventIntroRegisterCta.style.display="none")),this.eventCountdown.style.display="none",this.afterEvent.remove(),this.eventCtaCaption.innerText="In live"):!n||r?(this.removeRegisterButton(e),this.eventIntroGiftCta.style.display="none"):!this.hasBought||t&&!this.hasVideo?this.afterEvent.remove():this.removeRegisterButton(e)}},{key:"removeRegisterButton",value:function(t){t&&this.eventCta.classList.add("finished"),this.eventCta.classList.remove("future"),this.eventIntroRegisterCta&&(this.eventIntroRegisterCta.style.display="none"),this.eventCountdown.style.display="none",this.afterEvent.remove(),t&&"true"!==this.eventCta.dataset.custom&&(this.eventCtaCaption.innerText="Past event")}}])&&lI(n.prototype,r),i&&lI(n,i),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,i}(Yp);function wI(t){return wI="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},wI(t)}function AI(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,II(r.key),r)}}function EI(t,e,n){return e=SI(e),function(t,e){if(e&&("object"===wI(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,xI()?Reflect.construct(e,n||[],SI(t).constructor):e.apply(t,n))}function xI(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(xI=function(){return!!t})()}function SI(t){return SI=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},SI(t)}function TI(t,e){return TI=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},TI(t,e)}function CI(t,e,n){return(e=II(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function II(t){var e=function(t,e){if("object"!=wI(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=wI(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==wI(e)?e:e+""}function kI(t,e,n){!function(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}(t,e),e.set(t,n)}function PI(t,e){return t.get(OI(t,e))}function RI(t,e,n){return t.set(OI(t,e),n),n}function OI(t,e,n){if("function"==typeof t?t===e:t.has(e))return arguments.length<3?e:n;throw new TypeError("Private element is not present on this object")}var MI=new WeakMap,LI=new WeakMap,DI=function(t){function e(t,n){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),kI(r=EI(this,e,[t,n]),MI,null),kI(r,LI,null),CI(r,"onApply",(function(){var t=ti.timeline();r.element.dataset.caption&&(r.heroPretitle.innerText=r.element.dataset.caption),r.element.dataset.title&&(r.heroTitle.innerText=r.element.dataset.title),t.set([r.beforeApplyPage,r.eventCta],{opacity:0,display:"none"},0),t.set(r.applyPage,{display:"block",opacity:1},0),t.add((function(){r.bootstrap.parallax.after(),r.iframe&&(r.resizer=iFrameResize({log:!1},r.iframe),window.addEventListener("scroll",r.onScroll))}),0)})),CI(r,"onScroll",(function(){r.smoother.velocity<2?r.scrollOverlay.classList.add("hidden"):r.scrollOverlay.classList.contains("hidden")&&r.scrollOverlay.classList.remove("hidden")})),r.applyPage=t.querySelector(".apply"),r.beforeApplyPage=t.querySelector(".before-apply"),r.startDate=t.dataset.startDate,r.endDate=t.dataset.endDate,r.eventCta=t.querySelector(".internal-module.event-cta"),r.eventCtaCaption=r.eventCta.querySelector(".caption"),r.hero=t.querySelector(".hero"),r.applyCta=t.querySelector(".walking-tour-text-image-cta .cta"),r.iframe=r.element.querySelector(".wx-embed"),r.scrollOverlay=r.element.querySelector(".scroll-overlay"),r.heroPretitle=r.hero.querySelector(".pretitle"),r.heroTitle=r.hero.querySelector(".title"),r.element.classList.contains("apply-active")&&r.onApply(),r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&TI(t,e)}(e,t),n=e,(r=[{key:"init",value:function(){RI(MI,this,new Date(this.startDate)),RI(LI,this,new Date(this.endDate));var t=PI(MI,this)-new Date<0,e=PI(LI,this)-new Date<0;t&&e?(this.eventCta.classList.add("finished"),this.eventCta.classList.remove("future"),"true"!==this.eventCta.dataset.custom&&(this.eventCtaCaption.innerText="Past event"),this.applyCta.style.display="none"):t&&!e&&(this.eventCta.classList.add("living"),this.eventCta.classList.remove("future"),"true"!==this.eventCta.dataset.custom&&(this.eventCtaCaption.innerText="Ongoing"),this.applyCta.style.display="none")}},{key:"detach",value:function(){this.iframe&&window.removeEventListener("scroll",this.onScroll)}}])&&AI(n.prototype,r),i&&AI(n,i),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,i}(Yp);function NI(t){return NI="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},NI(t)}function BI(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,qI(r.key),r)}}function jI(t,e,n){return e=FI(e),function(t,e){if(e&&("object"===NI(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,zI()?Reflect.construct(e,n||[],FI(t).constructor):e.apply(t,n))}function zI(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(zI=function(){return!!t})()}function FI(t){return FI=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},FI(t)}function UI(t,e){return UI=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},UI(t,e)}function qI(t){var e=function(t,e){if("object"!=NI(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=NI(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==NI(e)?e:e+""}var GI=function(t){function e(t,n){var r,i,o,a;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),r=jI(this,e,[t,n]),i=r,a=function(){r.dateW.remove()},(o=qI(o="handleEventEnd"))in i?Object.defineProperty(i,o,{value:a,enumerable:!0,configurable:!0,writable:!0}):i[o]=a,r.eventCta=t.querySelector(".internal-module.event-cta"),r.dateW=r.eventCta.querySelector(".date-w"),r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&UI(t,e)}(e,t),n=e,(r=[{key:"attach",value:function(){document.addEventListener("eventEnd",this.handleEventEnd)}},{key:"detach",value:function(){document.removeEventListener("eventEnd",this.handleEventEnd)}}])&&BI(n.prototype,r),i&&BI(n,i),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,i}(Yp);n(4126);function HI(t){return HI="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},HI(t)}function VI(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,XI(r.key),r)}}function QI(t,e,n){return e=YI(e),function(t,e){if(e&&("object"===HI(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,WI()?Reflect.construct(e,n||[],YI(t).constructor):e.apply(t,n))}function WI(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(WI=function(){return!!t})()}function YI(t){return YI=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},YI(t)}function KI(t,e){return KI=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},KI(t,e)}function XI(t){var e=function(t,e){if("object"!=HI(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=HI(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==HI(e)?e:e+""}var $I=function(t){function e(t,n){var r,i,o,a;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),r=QI(this,e,[t,n]),i=r,a=function(){r.smoother.velocity<2?r.scrollOverlay.classList.add("hidden"):r.scrollOverlay.classList.contains("hidden")&&r.scrollOverlay.classList.remove("hidden")},(o=XI(o="onScroll"))in i?Object.defineProperty(i,o,{value:a,enumerable:!0,configurable:!0,writable:!0}):i[o]=a,r.iframe=r.element.querySelector(".wx-embed"),r.scrollOverlay=r.element.querySelector(".scroll-overlay"),r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&KI(t,e)}(e,t),n=e,(r=[{key:"init",value:function(){this.iframe&&(this.resizer=iFrameResize({log:!1},this.iframe))}},{key:"attach",value:function(){this.iframe&&window.addEventListener("scroll",this.onScroll)}},{key:"detach",value:function(){this.iframe&&window.removeEventListener("scroll",this.onScroll)}}])&&VI(n.prototype,r),i&&VI(n,i),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,i}(Yp);function ZI(t){return ZI="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ZI(t)}function JI(){JI=function(){return e};var t,e={},n=Object.prototype,r=n.hasOwnProperty,i=Object.defineProperty||function(t,e,n){t[e]=n.value},o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",s=o.asyncIterator||"@@asyncIterator",l=o.toStringTag||"@@toStringTag";function u(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,n){return t[e]=n}}function c(t,e,n,r){var o=e&&e.prototype instanceof v?e:v,a=Object.create(o.prototype),s=new P(r||[]);return i(a,"_invoke",{value:T(t,n,s)}),a}function d(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}e.wrap=c;var f="suspendedStart",h="suspendedYield",p="executing",m="completed",g={};function v(){}function y(){}function b(){}var _={};u(_,a,(function(){return this}));var w=Object.getPrototypeOf,A=w&&w(w(R([])));A&&A!==n&&r.call(A,a)&&(_=A);var E=b.prototype=v.prototype=Object.create(_);function x(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function S(t,e){function n(i,o,a,s){var l=d(t[i],t,o);if("throw"!==l.type){var u=l.arg,c=u.value;return c&&"object"==ZI(c)&&r.call(c,"__await")?e.resolve(c.__await).then((function(t){n("next",t,a,s)}),(function(t){n("throw",t,a,s)})):e.resolve(c).then((function(t){u.value=t,a(u)}),(function(t){return n("throw",t,a,s)}))}s(l.arg)}var o;i(this,"_invoke",{value:function(t,r){function i(){return new e((function(e,i){n(t,r,e,i)}))}return o=o?o.then(i,i):i()}})}function T(e,n,r){var i=f;return function(o,a){if(i===p)throw Error("Generator is already running");if(i===m){if("throw"===o)throw a;return{value:t,done:!0}}for(r.method=o,r.arg=a;;){var s=r.delegate;if(s){var l=C(s,r);if(l){if(l===g)continue;return l}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(i===f)throw i=m,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);i=p;var u=d(e,n,r);if("normal"===u.type){if(i=r.done?m:h,u.arg===g)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(i=m,r.method="throw",r.arg=u.arg)}}}function C(e,n){var r=n.method,i=e.iterator[r];if(i===t)return n.delegate=null,"throw"===r&&e.iterator.return&&(n.method="return",n.arg=t,C(e,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),g;var o=d(i,e.iterator,n.arg);if("throw"===o.type)return n.method="throw",n.arg=o.arg,n.delegate=null,g;var a=o.arg;return a?a.done?(n[e.resultName]=a.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=t),n.delegate=null,g):a:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,g)}function I(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function k(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function P(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(I,this),this.reset(!0)}function R(e){if(e||""===e){var n=e[a];if(n)return n.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var i=-1,o=function n(){for(;++i<e.length;)if(r.call(e,i))return n.value=e[i],n.done=!1,n;return n.value=t,n.done=!0,n};return o.next=o}}throw new TypeError(ZI(e)+" is not iterable")}return y.prototype=b,i(E,"constructor",{value:b,configurable:!0}),i(b,"constructor",{value:y,configurable:!0}),y.displayName=u(b,l,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===y||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,b):(t.__proto__=b,u(t,l,"GeneratorFunction")),t.prototype=Object.create(E),t},e.awrap=function(t){return{__await:t}},x(S.prototype),u(S.prototype,s,(function(){return this})),e.AsyncIterator=S,e.async=function(t,n,r,i,o){void 0===o&&(o=Promise);var a=new S(c(t,n,r,i),o);return e.isGeneratorFunction(n)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},x(E),u(E,l,"Generator"),u(E,a,(function(){return this})),u(E,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),n=[];for(var r in e)n.push(r);return n.reverse(),function t(){for(;n.length;){var r=n.pop();if(r in e)return t.value=r,t.done=!1,t}return t.done=!0,t}},e.values=R,P.prototype={constructor:P,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(k),!e)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function i(r,i){return s.type="throw",s.arg=e,n.next=r,i&&(n.method="next",n.arg=t),!!i}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],s=a.completion;if("root"===a.tryLoc)return i("end");if(a.tryLoc<=this.prev){var l=r.call(a,"catchLoc"),u=r.call(a,"finallyLoc");if(l&&u){if(this.prev<a.catchLoc)return i(a.catchLoc,!0);if(this.prev<a.finallyLoc)return i(a.finallyLoc)}else if(l){if(this.prev<a.catchLoc)return i(a.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return i(a.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=t,a.arg=e,o?(this.method="next",this.next=o.finallyLoc,g):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),g},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),k(n),g}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var i=r.arg;k(n)}return i}}throw Error("illegal catch attempt")},delegateYield:function(e,n,r){return this.delegate={iterator:R(e),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=t),g}},e}function tk(t,e,n,r,i,o,a){try{var s=t[o](a),l=s.value}catch(t){return void n(t)}s.done?e(l):Promise.resolve(l).then(r,i)}function ek(t){return function(){var e=this,n=arguments;return new Promise((function(r,i){var o=t.apply(e,n);function a(t){tk(o,r,i,a,s,"next",t)}function s(t){tk(o,r,i,a,s,"throw",t)}a(void 0)}))}}function nk(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,lk(r.key),r)}}function rk(t,e,n){return e=ok(e),function(t,e){if(e&&("object"===ZI(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,ik()?Reflect.construct(e,n||[],ok(t).constructor):e.apply(t,n))}function ik(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(ik=function(){return!!t})()}function ok(t){return ok=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},ok(t)}function ak(t,e){return ak=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},ak(t,e)}function sk(t,e,n){return(e=lk(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function lk(t){var e=function(t,e){if("object"!=ZI(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=ZI(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==ZI(e)?e:e+""}var uk=function(t){function e(t,n){var r,i,o,a,s;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),sk(s=rk(this,e,[t,n]),"toggleRegister",(function(){var t,e,n=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];null===(t=s.tl)||void 0===t||null===(e=t.kill)||void 0===e||e.call(t),s.tl=ti.timeline(),s.activeTab="register",s.errorsW&&n&&s.errorsW.remove(),s.tl.to(s.loginW,{opacity:0,duration:.4,display:"none"},0),s.tl.set(s.registerW,{display:"grid"},0),s.tl.fromTo(s.registerW,{opacity:0},{opacity:1,duration:.4},.3)})),sk(s,"toggleLogin",(function(){var t,e;null===(t=s.tl)||void 0===t||null===(e=t.kill)||void 0===e||e.call(t),s.tl=ti.timeline(),s.activeTab="login",s.errorsW&&s.errorsW.remove(),s.tl.to(s.registerW,{opacity:0,duration:.4,display:"none"},0),s.tl.fromTo(s.loginW,{display:"flex",opacity:0},{opacity:1,duration:.4},.3)})),sk(s,"displayErrors",(function(){if("login"===s.activeTab&&s.loginW){var t=s.loginW.querySelector("#username"),e=s.loginW.querySelector("#password");s.errors.forEach((function(n){n.textContent.toLowerCase().includes("username")?t.classList.add("error"):n.textContent.toLowerCase().includes("password")&&e.classList.add("error")}))}else if(s.registerW){var n=s.registerW.querySelector("#reg_first_name"),r=s.registerW.querySelector("#reg_last_name"),i=s.registerW.querySelector("#reg_email"),o=s.registerW.querySelector("#reg_password");s.errors.forEach((function(t){t.textContent.toLowerCase().includes("first name")?n.classList.add("error"):t.textContent.toLowerCase().includes("last name")?r.classList.add("error"):t.textContent.toLowerCase().includes("email")?i.classList.add("error"):t.textContent.toLowerCase().includes("password")&&o.classList.add("error")}))}})),sk(s,"checkRegisterForm",function(){var t=ek(JI().mark((function t(e){var n,r,i,o,a;return JI().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.preventDefault(),"register"===s.activeTab){t.next=3;break}return t.abrupt("return");case 3:return null===(n=s.registerSubmitBtn)||void 0===n||n.classList.add("loading"),t.prev=4,t.next=7,hcaptcha.execute(s.captchaId,{async:!0});case 7:if(r=t.sent,i=r.response){t.next=13;break}return console.log("Captcha verification failed or was not completed."),null===(o=s.registerSubmitBtn)||void 0===o||o.classList.remove("loading"),t.abrupt("return");case 13:s.registerAndVerify(i),t.next=20;break;case 16:t.prev=16,t.t0=t.catch(4),null===(a=s.registerSubmitBtn)||void 0===a||a.classList.remove("loading"),console.error("Error during hCaptcha validation:",t.t0);case 20:case"end":return t.stop()}}),t,null,[[4,16]])})));return function(e){return t.apply(this,arguments)}}()),sk(s,"registerAndVerify",function(){var t=ek(JI().mark((function t(e){var n,r,i,o,a,l,u,c,d,f;return JI().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=s.registerForm.querySelector("#reg_email").value,i=s.registerForm.querySelector("#reg_password").value,o=s.registerForm.querySelector("#reg_first_name").value,a=s.registerForm.querySelector("#reg_last_name").value,l=(null===(n=s.registerForm.querySelector('input[name="dw_hp"]'))||void 0===n?void 0:n.value)||"",u={action:"david_register",hcaptchaResponse:e,email:r,password:i,first_name:o,last_name:a,dw_hp:l},t.prev=6,s.errors=[],s.showErrors(),t.next=11,fetch(ADMIN_AJAX_URL,{method:"POST",body:new URLSearchParams(u).toString(),credentials:"include",headers:{"Content-Type":"application/x-www-form-urlencoded"}});case 11:return c=t.sent,t.next=14,c.json();case 14:return(d=t.sent).success?window.location.reload():(console.log("Error while registering:",d),s.errors.push(d.data),null===(f=s.registerSubmitBtn)||void 0===f||f.classList.remove("loading"),s.showErrors()),t.abrupt("return",d);case 19:throw t.prev=19,t.t0=t.catch(6),t.t0;case 22:case"end":return t.stop()}}),t,null,[[6,19]])})));return function(e){return t.apply(this,arguments)}}()),sk(s,"togglePassword",(function(t){t.preventDefault(),t.stopPropagation(),t.stopImmediatePropagation(),s.passwordLogin.showed?(s.passwordLogin.input.type="password",s.passwordLogin.show.classList.remove("display-password"),s.passwordLogin.show.setAttribute("aria-label","Show password")):(s.passwordLogin.input.type="text",s.passwordLogin.show.classList.add("display-password"),s.passwordLogin.show.setAttribute("aria-label","Hide password")),s.passwordLogin.showed=!s.passwordLogin.showed})),s.tl=null,s.loginW=s.element.querySelector(".login-w"),s.loginW&&(s.passwordLogin={input:s.loginW.querySelector(".password-wrapper #password"),show:s.loginW.querySelector(".password-wrapper .show-password-input"),showed:!1}),s.registerW=s.element.querySelector(".register-w"),s.registerBtn=s.element.querySelector(".register-btn"),s.loginBtn=s.element.querySelector(".login-text"),s.errorsW=s.element.querySelector(".woocommerce-error"),s.errors=s.element.querySelectorAll(".woocommerce-error li"),s.wantRegisterTab=!!s.element.dataset.register,s.activeTab=null!==(r=s.loginW)&&void 0!==r&&r.classList.contains("active")?"login":"register",s.registerForm=s.element.querySelector("#register-form"),s.registerSubmitBtn=null===(i=s.registerForm)||void 0===i?void 0:i.querySelector(".register-submit-btn"),s.captcha=null===(o=s.registerForm)||void 0===o?void 0:o.querySelector(".h-captcha-register"),s.errorsWrapper=null===(a=s.registerForm)||void 0===a?void 0:a.querySelector(".errors"),s.errors=[],s}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&ak(t,e)}(e,t),n=e,r=[{key:"init",value:function(){this.errors.length>0&&this.displayErrors(),this.wantRegisterTab&&this.toggleRegister(!1)}},{key:"showErrors",value:function(){this.errorsWrapper.innerHTML=this.errors.map((function(t){return"<p>".concat(t,"</p>")})).join("")}},{key:"attach",value:function(){var t,e,n,r;null===(t=this.registerBtn)||void 0===t||t.addEventListener("click",this.toggleRegister),null===(e=this.loginBtn)||void 0===e||e.addEventListener("click",this.toggleLogin),null===(n=this.registerForm)||void 0===n||n.addEventListener("submit",this.checkRegisterForm),null===(r=this.registerSubmitBtn)||void 0===r||r.addEventListener("click",this.checkRegisterForm),this.passwordLogin&&this.passwordLogin.show&&this.passwordLogin.show.addEventListener("click",this.togglePassword),this.captcha&&hcaptcha&&(this.captcha.classList.add("h-captcha"),this.captchaId=hcaptcha.render(this.captcha,{sitekey:"072e84bc-74bc-4b60-837e-1224b03856c6"}))}},{key:"detach",value:function(){var t,e,n,r;null===(t=this.registerBtn)||void 0===t||t.removeEventListener("click",this.toggleRegister),null===(e=this.loginBtn)||void 0===e||e.removeEventListener("click",this.toggleLogin),null===(n=this.registerForm)||void 0===n||n.removeEventListener("submit",this.checkRegisterForm),null===(r=this.registerSubmitBtn)||void 0===r||r.removeEventListener("click",this.checkRegisterForm),this.passwordLogin&&this.passwordLogin.show&&this.passwordLogin.show.removeEventListener("click",this.togglePassword)}}],r&&nk(n.prototype,r),i&&nk(n,i),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,i}(Yp);function ck(t){return ck="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ck(t)}function dk(){dk=function(){return e};var t,e={},n=Object.prototype,r=n.hasOwnProperty,i=Object.defineProperty||function(t,e,n){t[e]=n.value},o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",s=o.asyncIterator||"@@asyncIterator",l=o.toStringTag||"@@toStringTag";function u(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,n){return t[e]=n}}function c(t,e,n,r){var o=e&&e.prototype instanceof v?e:v,a=Object.create(o.prototype),s=new P(r||[]);return i(a,"_invoke",{value:T(t,n,s)}),a}function d(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}e.wrap=c;var f="suspendedStart",h="suspendedYield",p="executing",m="completed",g={};function v(){}function y(){}function b(){}var _={};u(_,a,(function(){return this}));var w=Object.getPrototypeOf,A=w&&w(w(R([])));A&&A!==n&&r.call(A,a)&&(_=A);var E=b.prototype=v.prototype=Object.create(_);function x(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function S(t,e){function n(i,o,a,s){var l=d(t[i],t,o);if("throw"!==l.type){var u=l.arg,c=u.value;return c&&"object"==ck(c)&&r.call(c,"__await")?e.resolve(c.__await).then((function(t){n("next",t,a,s)}),(function(t){n("throw",t,a,s)})):e.resolve(c).then((function(t){u.value=t,a(u)}),(function(t){return n("throw",t,a,s)}))}s(l.arg)}var o;i(this,"_invoke",{value:function(t,r){function i(){return new e((function(e,i){n(t,r,e,i)}))}return o=o?o.then(i,i):i()}})}function T(e,n,r){var i=f;return function(o,a){if(i===p)throw Error("Generator is already running");if(i===m){if("throw"===o)throw a;return{value:t,done:!0}}for(r.method=o,r.arg=a;;){var s=r.delegate;if(s){var l=C(s,r);if(l){if(l===g)continue;return l}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(i===f)throw i=m,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);i=p;var u=d(e,n,r);if("normal"===u.type){if(i=r.done?m:h,u.arg===g)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(i=m,r.method="throw",r.arg=u.arg)}}}function C(e,n){var r=n.method,i=e.iterator[r];if(i===t)return n.delegate=null,"throw"===r&&e.iterator.return&&(n.method="return",n.arg=t,C(e,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),g;var o=d(i,e.iterator,n.arg);if("throw"===o.type)return n.method="throw",n.arg=o.arg,n.delegate=null,g;var a=o.arg;return a?a.done?(n[e.resultName]=a.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=t),n.delegate=null,g):a:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,g)}function I(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function k(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function P(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(I,this),this.reset(!0)}function R(e){if(e||""===e){var n=e[a];if(n)return n.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var i=-1,o=function n(){for(;++i<e.length;)if(r.call(e,i))return n.value=e[i],n.done=!1,n;return n.value=t,n.done=!0,n};return o.next=o}}throw new TypeError(ck(e)+" is not iterable")}return y.prototype=b,i(E,"constructor",{value:b,configurable:!0}),i(b,"constructor",{value:y,configurable:!0}),y.displayName=u(b,l,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===y||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,b):(t.__proto__=b,u(t,l,"GeneratorFunction")),t.prototype=Object.create(E),t},e.awrap=function(t){return{__await:t}},x(S.prototype),u(S.prototype,s,(function(){return this})),e.AsyncIterator=S,e.async=function(t,n,r,i,o){void 0===o&&(o=Promise);var a=new S(c(t,n,r,i),o);return e.isGeneratorFunction(n)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},x(E),u(E,l,"Generator"),u(E,a,(function(){return this})),u(E,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),n=[];for(var r in e)n.push(r);return n.reverse(),function t(){for(;n.length;){var r=n.pop();if(r in e)return t.value=r,t.done=!1,t}return t.done=!0,t}},e.values=R,P.prototype={constructor:P,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(k),!e)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function i(r,i){return s.type="throw",s.arg=e,n.next=r,i&&(n.method="next",n.arg=t),!!i}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],s=a.completion;if("root"===a.tryLoc)return i("end");if(a.tryLoc<=this.prev){var l=r.call(a,"catchLoc"),u=r.call(a,"finallyLoc");if(l&&u){if(this.prev<a.catchLoc)return i(a.catchLoc,!0);if(this.prev<a.finallyLoc)return i(a.finallyLoc)}else if(l){if(this.prev<a.catchLoc)return i(a.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return i(a.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=t,a.arg=e,o?(this.method="next",this.next=o.finallyLoc,g):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),g},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),k(n),g}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var i=r.arg;k(n)}return i}}throw Error("illegal catch attempt")},delegateYield:function(e,n,r){return this.delegate={iterator:R(e),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=t),g}},e}function fk(t,e,n,r,i,o,a){try{var s=t[o](a),l=s.value}catch(t){return void n(t)}s.done?e(l):Promise.resolve(l).then(r,i)}function hk(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,pk(r.key),r)}}function pk(t){var e=function(t,e){if("object"!=ck(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=ck(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==ck(e)?e:e+""}function mk(t,e,n){return e=vk(e),function(t,e){if(e&&("object"===ck(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,gk()?Reflect.construct(e,n||[],vk(t).constructor):e.apply(t,n))}function gk(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(gk=function(){return!!t})()}function vk(t){return vk=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},vk(t)}function yk(t,e){return yk=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},yk(t,e)}var bk=function(t){function e(t,n){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=mk(this,e,[t,n])).header=document.getElementById("header"),r.companionPages=r.header.querySelectorAll(".companion-pages a"),r.becomeMember=r.header.querySelector(".become-member"),r.signIn=r.header.querySelector(".sign-in"),r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&yk(t,e)}(e,t),n=e,r=[{key:"init",value:(o=function(t){return function(){var e=this,n=arguments;return new Promise((function(r,i){var o=t.apply(e,n);function a(t){fk(o,r,i,a,s,"next",t)}function s(t){fk(o,r,i,a,s,"throw",t)}a(void 0)}))}}(dk().mark((function t(){var e,n;return dk().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:this.companionPages.forEach((function(t){t.classList.remove("hidden")})),null===(e=this.becomeMember)||void 0===e||e.classList.add("hidden"),null===(n=this.signIn)||void 0===n||n.classList.add("hidden");case 3:case"end":return t.stop()}}),t,this)}))),function(){return o.apply(this,arguments)})}],r&&hk(n.prototype,r),i&&hk(n,i),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,i,o}(Yp);function _k(t){return _k="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_k(t)}function wk(t){return function(t){if(Array.isArray(t))return Ak(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return Ak(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Ak(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ak(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Ek(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Pk(r.key),r)}}function xk(t,e,n){return e=Ck(e),Sk(t,Tk()?Reflect.construct(e,n||[],Ck(t).constructor):e.apply(t,n))}function Sk(t,e){if(e&&("object"===_k(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function Tk(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(Tk=function(){return!!t})()}function Ck(t){return Ck=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Ck(t)}function Ik(t,e){return Ik=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Ik(t,e)}function kk(t,e,n){return(e=Pk(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Pk(t){var e=function(t,e){if("object"!=_k(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=_k(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==_k(e)?e:e+""}var Rk=function(t){function e(t,n){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),kk(r=xk(this,e,[t,n]),"closeSearch",(function(t){t.preventDefault(),t.stopPropagation(),t.stopImmediatePropagation(),r.previousPage?history.back():r.bootstrap.router.set("/")})),kk(r,"resize",(function(){r.viewport.medias.desktop&&r.openedFilterBar&&r.closeFilterBar()})),kk(r,"onSearchInput",(function(){r.loadedCount=0,r.categoriesWithNoResults.clear(),r.noResultsDiv&&(r.noResultsDiv.style.display="none"),r.listItems.forEach((function(t){t.style.display=""})),r.toggleLoading(!0),r.bootstrap.smoother.scrollTo(".listing-items.active",{duration:1.6,ease:"power3.out"})})),kk(r,"onEventLoaded",(function(t){r.loadedCount++,r.loadedCount>=r.totalLoadMoreCards&&(r.toggleLoading(!1),r.loadedCount=0)})),kk(r,"onNoResults",(function(t){var e=t.detail.type;r.categoriesWithNoResults.add(e);var n=r.element.querySelector('.listing-items[data-type="'.concat(e,'"]'));n&&(n.style.display="none"),r.categoriesWithNoResults.size>=r.totalLoadMoreCards&&r.noResultsDiv&&(r.noResultsDiv.style.display="flex")})),kk(r,"onFilterClick",(function(t){var e;t.currentTarget.classList.contains("active")||(r.loadedCount=0,r.categoriesWithNoResults.clear(),r.noResultsDiv&&(r.noResultsDiv.style.display="none"),r.listItems.forEach((function(t){t.style.display=""})),r.toggleLoading(!0),null===(e=r.scrollToTl)||void 0===e||e.kill(),r.scrollToTl=ti.timeline(),r.scrollToTl.add((function(){r.bootstrap.smoother.scrollTo(".listing-items.active",{duration:1.6,ease:"power3.out"})}),1.2))})),kk(r,"openFilterBar",(function(){var t;r.bootstrap.smoother.stop(),r.openedFilterBar=!0,null===(t=r.t)||void 0===t||t.kill(),r.t=ti.timeline(),r.t.fromTo(r.mobileBg,{display:"block"},{opacity:1,duration:.3},0),r.t.fromTo(r.filtersBar,{display:"block",y:"100%"},{y:0,duration:.6,ease:"power2.out"},0)})),kk(r,"closeFilterBar",(function(){var t;r.bootstrap.smoother.start(),r.openedFilterBar=!1,null===(t=r.t)||void 0===t||t.kill(),r.t=ti.timeline(),r.t.to(r.mobileBg,{opacity:0,duration:.3},0),r.t.to(r.filtersBar,{y:"100%",duration:.4,ease:"power2.out"},0),r.t.set(r.mobileBg,{display:"none"},">"),r.t.set(r.filtersBar,{display:"none",clearProps:"all"},"<")})),kk(r,"onPostTypeClick",(function(t){var e=t.currentTarget;if(!e.classList.contains("active")){r.postTypeCta.forEach((function(t){t.classList.remove("active")}));var n=-1!==r.postTypeCtaDk.indexOf(e)?r.postTypeCtaDk.indexOf(e):r.postTypeCtaMb.indexOf(e);r.postTypeCtaDk[n].classList.add("active"),r.postTypeCtaMb[n].classList.add("active"),r.currentType=t.currentTarget.dataset.type;var i=Jd.getState(r.listItems);r.listItems.forEach((function(t){"all"==r.currentType||r.currentType==t.dataset.type?t.classList.add("active"):t.classList.remove("active")})),Jd.from(i,{absolute:!0,duration:.6,ease:"power2.out",onEnter:function(t){return ti.fromTo(t,{opacity:0},{opacity:1,duration:.3,overwrite:!0})},onLeave:function(t){return ti.to(t,{opacity:0,duration:.2,overwrite:!0})}})}})),r.header=document.querySelector("#header"),r.searchPageHeader=r.header.querySelector(".page-search"),r.postTypeCtaDk=wk(r.element.querySelectorAll(".filter-bar-header-dk .rect-button.filter")),r.postTypeCtaMb=wk(r.element.querySelectorAll(".filter-bar-header .rect-button.filter")),r.postTypeCta=[].concat(wk(r.postTypeCtaDk),wk(r.postTypeCtaMb)),r.listItems=wk(r.element.querySelectorAll(".listing-items")),r.products=r.element.querySelectorAll(".cards-w .product-card"),r.filtersBar=r.element.querySelector(".filter-bar"),r.filtersBar?(r.filters=r.filtersBar.querySelector(".filters"),r.openFilterBtn=r.element.querySelector(".filter-btn"),r.closeFilterBtn=r.filtersBar.querySelector(".close-w"),r.searchInput=r.element.querySelector('[data-component="SearchInput"]'),r.loading=r.element.querySelector(".loading"),r.loadingTl=null,r.isLoading=!1,r.options=[],r.tl=null,r.open=!1,r.currentType="all",r.openedFilterBar=!1,r.scrollToTl=null,r.totalLoadMoreCards=0,r.loadedCount=0,r.categoriesWithNoResults=new Set,r.noResultsDiv=null,r.filterCtasDk=wk(document.querySelectorAll(".new-filters-w button")),r.filterCtasMb=wk(document.querySelectorAll(".new-filters-w-mb button")),r.filterCtas=[].concat(wk(r.filterCtasDk),wk(r.filterCtasMb)),r.filterResetCtasDk=document.querySelector(".new-filters-w .new-filters-header button"),r.filterResetCtasMb=document.querySelector(".new-filters-w-mb .new-filters-header button"),r.filterResetCtas=[r.filterResetCtasDk,r.filterResetCtasMb],r):Sk(r)}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Ik(t,e)}(e,t),n=e,r=[{key:"init",value:function(){var t=this;this.searchInputComponent=this.components.get(this.searchInput),this.listItemsComponents=this.listItems.map((function(e){return t.components.get(e)})),this.totalLoadMoreCards=this.listItems.length,this.noResultsDiv=this.element.querySelector(".no-results")}},{key:"attach",value:function(){var t,e,n,r,i=this;this.header.classList.add("search-page"),null===(t=this.searchPageHeader)||void 0===t||t.addEventListener("click",this.closeSearch),this.filtersBar&&(this.postTypeCta.forEach((function(t){t.addEventListener("click",i.onPostTypeClick)})),this.openFilterBtn.addEventListener("click",this.openFilterBar),this.closeFilterBtn.addEventListener("click",this.closeFilterBar),this.viewport.on("resize",this.resize),null===(e=this.filterCtas)||void 0===e||e.forEach((function(t){t.addEventListener("click",i.onFilterClick)})),null===(n=this.filterResetCtas)||void 0===n||n.forEach((function(t){null==t||t.addEventListener("click",i.onFilterClick)})),null===(r=this.searchInputComponent)||void 0===r||r.on("search-input",this.onSearchInput),document.addEventListener("noResults",this.onNoResults),document.addEventListener("eventLoaded",this.onEventLoaded))}},{key:"detach",value:function(){var t,e,n,r,i=this;this.header.classList.remove("search-page"),null===(t=this.searchPageHeader)||void 0===t||t.removeEventListener("click",this.closeSearch),this.filtersBar&&(this.postTypeCta.forEach((function(t){t.removeEventListener("click",i.onPostTypeClick)})),this.openFilterBtn.removeEventListener("click",this.openFilterBar),this.closeFilterBtn.removeEventListener("click",this.closeFilterBar),this.viewport.off("resize",this.resize),null===(e=this.filterCtas)||void 0===e||e.forEach((function(t){t.removeEventListener("click",i.onFilterClick)})),null===(n=this.filterResetCtas)||void 0===n||n.forEach((function(t){null==t||t.removeEventListener("click",i.onFilterClick)})),null===(r=this.searchInputComponent)||void 0===r||r.off("search-input",this.onSearchInput),this.toggleLoading(!1),document.removeEventListener("noResults",this.onNoResults),document.removeEventListener("eventLoaded",this.onEventLoaded))}},{key:"toggleLoading",value:function(t){var e;this.loading&&(this.isLoading=void 0!==t?t:!this.isLoading,null===(e=this.loadingTl)||void 0===e||e.kill(),this.loadingTl=ti.timeline(),this.isLoading?(this.loadingTl.set(this.loading,{display:"flex",opacity:0},0),this.loadingTl.to(this.loading,{opacity:1,duration:.6,ease:"none"},0)):(this.loadingTl.to(this.loading,{opacity:0,duration:.3,ease:"none"},0),this.loadingTl.set(this.loading,{display:"none",clearProps:"all"},.3)))}}],r&&Ek(n.prototype,r),i&&Ek(n,i),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,i}(Yp);function Ok(t){return Ok="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ok(t)}function Mk(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Fk(r.key),r)}}function Lk(t,e,n){return e=Bk(e),Dk(t,Nk()?Reflect.construct(e,n||[],Bk(t).constructor):e.apply(t,n))}function Dk(t,e){if(e&&("object"===Ok(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function Nk(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(Nk=function(){return!!t})()}function Bk(t){return Bk=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Bk(t)}function jk(t,e){return jk=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},jk(t,e)}function zk(t,e,n){return(e=Fk(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Fk(t){var e=function(t,e){if("object"!=Ok(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=Ok(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Ok(e)?e:e+""}var Uk=function(t){function e(t,n){var r;if(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),zk(r=Lk(this,e,[t,n]),"updateBtnStatus",(function(){r.hasReadTermsCheckbox&&(r.registerBtn.classList.toggle("disabled",!r.hasReadTermsCheckbox.checked),r.registerBtn.disabled=!r.hasReadTermsCheckbox.checked)})),zk(r,"checkInputs",(function(){var t=[],e=[];return r.firstNameInput.value.length<2?t.push(r.firstNameInput):e.push(r.firstNameInput),r.lastNameInput.value.length<2?t.push(r.lastNameInput):e.push(r.lastNameInput),r.emailInput&&!r.validateEmail(r.emailInput.value)?t.push(r.emailInput):e.push(r.emailInput),r.giftEmailInput&&!r.validateEmail(r.giftEmailInput.value)?t.push(r.giftEmailInput):r.giftEmailInput&&e.push(r.giftEmailInput),r.highlightError(e,!1),r.highlightError(t,!0),!(t.length>0)})),zk(r,"highlightError",(function(t,e){t.forEach((function(t){t&&"hidden"!=t.type&&(e?t.classList.add("error"):t.classList.remove("error"))}))})),r.isLoggedIn="true"===r.element.dataset.logged,r.warningWrapper=r.element.querySelector(".warning-wrapper"),r.meprForm=r.element.querySelector(".mepr-form"),r.isLoggedIn&&r.warningWrapper)r.warningWrapper.remove();else if(!r.isLoggedIn&&r.warningWrapper)return r.meprForm&&r.meprForm.remove(),Dk(r);r.firstNameInput=r.element.querySelector("[name='user_first_name']"),r.firstNameInput&&(r.firstNameInput.placeholder="Your first name*",r.firstNameInput.tabIndex=1),r.lastNameInput=r.element.querySelector("[name='user_last_name']"),r.lastNameInput&&(r.lastNameInput.placeholder="Your last name*",r.lastNameInput.tabIndex=2),r.emailInput=r.element.querySelector("[name='user_email']"),r.emailInput&&(r.emailInput.placeholder="Your email*",r.emailInput.tabIndex=3),r.giftEmailInput=r.element.querySelector("#dw-gift-recipient-email"),r.element.querySelector(".mepr_coupon")&&r.element.querySelector(".mepr_coupon").remove(),r.element.querySelector(".mepr_mepr-address-one")&&r.element.querySelector(".mepr_mepr-address-one").remove(),r.element.querySelector(".mepr_mepr-address-two")&&r.element.querySelector(".mepr_mepr-address-two").remove(),r.element.querySelector(".mepr_mepr-address-city")&&r.element.querySelector(".mepr_mepr-address-city").remove(),r.element.querySelector(".mepr_mepr-address-country")&&r.element.querySelector(".mepr_mepr-address-country").remove(),r.element.querySelector(".mepr_mepr-address-state")&&r.element.querySelector(".mepr_mepr-address-state").remove(),r.element.querySelector(".mepr_mepr-address-zip")&&r.element.querySelector(".mepr_mepr-address-zip").remove(),r.element.querySelector(".mepr_mepr-address-zip")&&r.element.querySelector(".mepr_mepr-address-zip").remove(),r.element.querySelectorAll(".mepr_spacer").length>0&&r.element.querySelectorAll(".mepr_spacer").forEach((function(t){t.remove()})),r.element.querySelector("#user_pass")&&(r.element.querySelector("#user_pass").placeholder="PASSWORD",r.submitButton=r.element.querySelector("#wp-submit"),r.submitButton.value="SIGN UP TO ENTER"),r.inputWrappers=r.element.querySelectorAll(".mp-form-row");var i=r.element.querySelector("[name='mpgft-signup-gift-checkbox'], #mpgft-signup-gift-checkbox");if(i){var o=i.closest(".mp-form-row");o&&o.classList.add("gifted-field-row")}return r.selectionW=r.element.querySelector(".selection-w"),r.submitButton=r.element.querySelector(".mepr-submit"),r.loader=r.element.querySelector(".loader"),r.meprForm=r.element.querySelector(".mepr-form"),r.wrapper=r.element.querySelector(".form-w"),r.formW=r.element.querySelector(".mp_wrapper"),r.inputs=r.element.querySelectorAll("input"),r.inputButton=r.element.querySelector(".input-button"),r.originalInput=r.element.querySelector('input[type="submit"]'),r.gifLoader=r.element.querySelector(".mepr-loading-gif"),r.registerBtn=r.element.querySelector("button.mepr-submit"),r.hasReadTermsCheckbox=r.element.querySelector("#mepr_agree_to_terms"),r.updateBtnStatus(),r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&jk(t,e)}(e,t),n=e,(r=[{key:"init",value:function(){var t=this;this.isLoggedIn&&(this.gifLoader&&this.gifLoader.remove(),this.submitButton&&this.submitButton.classList.add("rect-button","bg-black","white"),this.nextendButtons=this.element.querySelectorAll(".nsl-button"),!this.passwordInput&&this.meprForm&&this.meprForm.classList.add("logged-in"),this.inputButton.remove(),this.inputButton.querySelectorAll(".button-text").forEach((function(e){e.innerText=t.originalInput.value})),this.originalInput.parentNode.insertBefore(this.inputButton,this.originalInput),this.loader.classList.add("mepr-loading-gif"),this.inputButton.insertAdjacentHTML("beforeend",this.loader.outerHTML),this.originalInput.remove())}},{key:"validateEmail",value:function(t){return!!/^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,3})+$/.test(t)}},{key:"attach",value:function(){var t=this;this.isLoggedIn&&(ti.set(this.formW,{display:"flex"}),ti.fromTo(this.wrapper,{opacity:0},{opacity:1,duration:.6,ease:"none",delay:.5}),this.inputs.length>0&&this.inputs.forEach((function(e){return e.addEventListener("blur",t.checkInputs)})),this.hasReadTermsCheckbox.addEventListener("change",this.updateBtnStatus))}},{key:"detach",value:function(){var t=this;this.isLoggedIn&&(this.inputs.length>0&&this.inputs.forEach((function(e){return e.removeEventListener("blur",t.checkInputs)})),this.hasReadTermsCheckbox.removeEventListener("change",this.updateBtnStatus))}}])&&Mk(n.prototype,r),i&&Mk(n,i),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,i}(Yp),qk=/[achlmqstvz]|(-?\d*\.?\d*(?:e[\-+]?\d+)?)[0-9]/gi,Gk=/[\+\-]?\d*\.?\d+e[\+\-]?\d+/gi,Hk=Math.PI/180,Vk=(Math.PI,Math.sin),Qk=Math.cos,Wk=Math.abs,Yk=Math.sqrt,Kk=(Math.atan2,function(t){return"number"==typeof t}),Xk=1e5,$k=function(t){return Math.round(t*Xk)/Xk||0},Zk=function(t){return t.closed=Math.abs(t[0]-t[t.length-2])<.001&&Math.abs(t[1]-t[t.length-1])<.001};function Jk(t,e,n,r,i,o,a,s,l){if(t!==s||e!==l){n=Wk(n),r=Wk(r);var u=i%360*Hk,c=Qk(u),d=Vk(u),f=Math.PI,h=2*f,p=(t-s)/2,m=(e-l)/2,g=c*p+d*m,v=-d*p+c*m,y=g*g,b=v*v,_=y/(n*n)+b/(r*r);_>1&&(n=Yk(_)*n,r=Yk(_)*r);var w=n*n,A=r*r,E=(w*A-w*b-A*y)/(w*b+A*y);E<0&&(E=0);var x=(o===a?-1:1)*Yk(E),S=x*(n*v/r),T=x*(-r*g/n),C=(t+s)/2+(c*S-d*T),I=(e+l)/2+(d*S+c*T),k=(g-S)/n,P=(v-T)/r,R=(-g-S)/n,O=(-v-T)/r,M=k*k+P*P,L=(P<0?-1:1)*Math.acos(k/Yk(M)),D=(k*O-P*R<0?-1:1)*Math.acos((k*R+P*O)/Yk(M*(R*R+O*O)));isNaN(D)&&(D=f),!a&&D>0?D-=h:a&&D<0&&(D+=h),L%=h,D%=h;var N,B=Math.ceil(Wk(D)/(h/4)),j=[],z=D/B,F=4/3*Vk(z/2)/(1+Qk(z/2)),U=c*n,q=d*n,G=d*-r,H=c*r;for(N=0;N<B;N++)g=Qk(i=L+N*z),v=Vk(i),k=Qk(i+=z),P=Vk(i),j.push(g-F*v,v+F*g,k+F*P,P-F*k,k,P);for(N=0;N<j.length;N+=2)g=j[N],v=j[N+1],j[N]=g*U+v*G+C,j[N+1]=g*q+v*H+I;return j[N-2]=s,j[N-1]=l,j}}function tP(t){var e,n,r,i,o,a,s,l,u,c,d,f,h,p,m,g=(t+"").replace(Gk,(function(t){var e=+t;return e<1e-4&&e>-1e-4?0:e})).match(qk)||[],v=[],y=0,b=0,_=2/3,w=g.length,A=0,E="ERROR: malformed path: "+t,x=function(t,e,n,r){c=(n-t)/3,d=(r-e)/3,s.push(t+c,e+d,n-c,r-d,n,r)};if(!t||!isNaN(g[0])||isNaN(g[1]))return console.log(E),v;for(e=0;e<w;e++)if(h=o,isNaN(g[e])?a=(o=g[e].toUpperCase())!==g[e]:e--,r=+g[e+1],i=+g[e+2],a&&(r+=y,i+=b),e||(l=r,u=i),"M"===o)s&&(s.length<8?v.length-=1:A+=s.length,Zk(s)),y=l=r,b=u=i,s=[r,i],v.push(s),e+=2,o="L";else if("C"===o)s||(s=[0,0]),a||(y=b=0),s.push(r,i,y+1*g[e+3],b+1*g[e+4],y+=1*g[e+5],b+=1*g[e+6]),e+=6;else if("S"===o)c=y,d=b,"C"!==h&&"S"!==h||(c+=y-s[s.length-4],d+=b-s[s.length-3]),a||(y=b=0),s.push(c,d,r,i,y+=1*g[e+3],b+=1*g[e+4]),e+=4;else if("Q"===o)c=y+(r-y)*_,d=b+(i-b)*_,a||(y=b=0),y+=1*g[e+3],b+=1*g[e+4],s.push(c,d,y+(r-y)*_,b+(i-b)*_,y,b),e+=4;else if("T"===o)c=y-s[s.length-4],d=b-s[s.length-3],s.push(y+c,b+d,r+(y+1.5*c-r)*_,i+(b+1.5*d-i)*_,y=r,b=i),e+=2;else if("H"===o)x(y,b,y=r,b),e+=1;else if("V"===o)x(y,b,y,b=r+(a?b-y:0)),e+=1;else if("L"===o||"Z"===o)"Z"===o&&(r=l,i=u,s.closed=!0),("L"===o||Wk(y-r)>.5||Wk(b-i)>.5)&&(x(y,b,r,i),"L"===o&&(e+=2)),y=r,b=i;else if("A"===o){if(p=g[e+4],m=g[e+5],c=g[e+6],d=g[e+7],n=7,p.length>1&&(p.length<3?(d=c,c=m,n--):(d=m,c=p.substr(2),n-=2),m=p.charAt(1),p=p.charAt(0)),f=Jk(y,b,+g[e+1],+g[e+2],+g[e+3],+p,+m,(a?y:0)+1*c,(a?b:0)+1*d),e+=n,f)for(n=0;n<f.length;n++)s.push(f[n]);y=s[s.length-2],b=s[s.length-1]}else console.log(E);return(e=s.length)<6?(v.pop(),e=0):Zk(s),v.totalPoints=A+e,v}function eP(t){Kk(t[0])&&(t=[t]);var e,n,r,i,o="",a=t.length;for(n=0;n<a;n++){for(i=t[n],o+="M"+$k(i[0])+","+$k(i[1])+" C",e=i.length,r=2;r<e;r++)o+=$k(i[r++])+","+$k(i[r++])+" "+$k(i[r++])+","+$k(i[r++])+" "+$k(i[r++])+","+$k(i[r])+" ";i.closed&&(o+="z")}return o}var nP,rP,iP=function(){return nP||"undefined"!=typeof window&&(nP=window.gsap)&&nP.registerPlugin&&nP},oP=function(){(nP=iP())?(nP.registerEase("_CE",cP.create),rP=1):console.warn("Please gsap.registerPlugin(CustomEase)")},aP=function(t){return~~(1e3*t+(t<0?-.5:.5))/1e3},sP=/[-+=.]*\d+[.e\-+]*\d*[e\-+]*\d*/gi,lP=/[cLlsSaAhHvVtTqQ]/g,uP=function t(e,n,r,i,o,a,s,l,u,c,d){var f,h=(e+r)/2,p=(n+i)/2,m=(r+o)/2,g=(i+a)/2,v=(o+s)/2,y=(a+l)/2,b=(h+m)/2,_=(p+g)/2,w=(m+v)/2,A=(g+y)/2,E=(b+w)/2,x=(_+A)/2,S=s-e,T=l-n,C=Math.abs((r-s)*T-(i-l)*S),I=Math.abs((o-s)*T-(a-l)*S);return c||(c=[{x:e,y:n},{x:s,y:l}],d=1),c.splice(d||c.length-1,0,{x:E,y:x}),(C+I)*(C+I)>u*(S*S+T*T)&&(f=c.length,t(e,n,h,p,b,_,E,x,u,c,d),t(E,x,w,A,v,y,s,l,u,c,d+1+(c.length-f))),c},cP=function(){function t(t,e,n){rP||oP(),this.id=t,this.setData(e,n)}var e=t.prototype;return e.setData=function(t,e){e=e||{};var n,r,i,o,a,s,l,u,c,d=(t=t||"0,0,1,1").match(sP),f=1,h=[],p=[],m=e.precision||1,g=m<=1;if(this.data=t,(lP.test(t)||~t.indexOf("M")&&t.indexOf("C")<0)&&(d=tP(t)[0]),4===(n=d.length))d.unshift(0,0),d.push(1,1),n=8;else if((n-2)%6)throw"Invalid CustomEase";for(0==+d[0]&&1==+d[n-2]||function(t,e,n){n||0===n||(n=Math.max(+t[t.length-1],+t[1]));var r,i=-1*+t[0],o=-n,a=t.length,s=1/(+t[a-2]+i),l=-e||(Math.abs(+t[a-1]-+t[1])<.01*(+t[a-2]-+t[0])?function(t){var e,n=t.length,r=1e20;for(e=1;e<n;e+=6)+t[e]<r&&(r=+t[e]);return r}(t)+o:+t[a-1]+o);for(l=l?1/l:-s,r=0;r<a;r+=2)t[r]=(+t[r]+i)*s,t[r+1]=(+t[r+1]+o)*l}(d,e.height,e.originY),this.segment=d,o=2;o<n;o+=6)r={x:+d[o-2],y:+d[o-1]},i={x:+d[o+4],y:+d[o+5]},h.push(r,i),uP(r.x,r.y,+d[o],+d[o+1],+d[o+2],+d[o+3],i.x,i.y,1/(2e5*m),h,h.length-1);for(n=h.length,o=0;o<n;o++)l=h[o],u=h[o-1]||l,(l.x>u.x||u.y!==l.y&&u.x===l.x||l===u)&&l.x<=1?(u.cx=l.x-u.x,u.cy=l.y-u.y,u.n=l,u.nx=l.x,g&&o>1&&Math.abs(u.cy/u.cx-h[o-2].cy/h[o-2].cx)>2&&(g=0),u.cx<f&&(u.cx?f=u.cx:(u.cx=.001,o===n-1&&(u.x-=.001,f=Math.min(f,.001),g=0)))):(h.splice(o--,1),n--);if(a=1/(n=1/f+1|0),s=0,l=h[0],g){for(o=0;o<n;o++)c=o*a,l.nx<c&&(l=h[++s]),r=l.y+(c-l.x)/l.cx*l.cy,p[o]={x:c,cx:a,y:r,cy:0,nx:9},o&&(p[o-1].cy=r-p[o-1].y);s=h[h.length-1],p[n-1].cy=s.y-r,p[n-1].cx=s.x-p[p.length-1].x}else{for(o=0;o<n;o++)l.nx<o*a&&(l=h[++s]),p[o]=l;s<h.length-1&&(p[o-1]=h[h.length-2])}return this.ease=function(t){var e=p[t*n|0]||p[n-1];return e.nx<t&&(e=e.n),e.y+(t-e.x)/e.cx*e.cy},this.ease.custom=this,this.id&&nP&&nP.registerEase(this.id,this.ease),this},e.getSVGData=function(e){return t.getSVGData(this,e)},t.create=function(e,n,r){return new t(e,n,r).ease},t.register=function(t){nP=t,oP()},t.get=function(t){return nP.parseEase(t)},t.getSVGData=function(e,n){var r,i,o,a,s,l,u,c,d,f,h=(n=n||{}).width||100,p=n.height||100,m=n.x||0,g=(n.y||0)+p,v=nP.utils.toArray(n.path)[0];if(n.invert&&(p=-p,g=0),"string"==typeof e&&(e=nP.parseEase(e)),e.custom&&(e=e.custom),e instanceof t)r=eP(function(t,e,n,r,i,o,a){for(var s,l,u,c,d,f=t.length;--f>-1;)for(l=(s=t[f]).length,u=0;u<l;u+=2)c=s[u],d=s[u+1],s[u]=c*e+d*r+o,s[u+1]=c*n+d*i+a;return t._dirty=1,t}([e.segment.slice(0)],h,0,0,-p,m,g));else{for(r=[m,g],a=1/(u=Math.max(5,200*(n.precision||1))),c=5/(u+=2),d=aP(m+a*h),i=((f=aP(g+e(a)*-p))-g)/(d-m),o=2;o<u;o++)s=aP(m+o*a*h),l=aP(g+e(o*a)*-p),(Math.abs((l-f)/(s-d)-i)>c||o===u-1)&&(r.push(d,f),i=(l-f)/(s-d)),d=s,f=l;r="M"+r.join(",")}return v&&v.setAttribute("d",r),r},t}();function dP(t){return dP="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},dP(t)}function fP(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,yP(r.key),r)}}function hP(t,e,n){return e=vP(e),function(t,e){if(e&&("object"===dP(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,pP()?Reflect.construct(e,n||[],vP(t).constructor):e.apply(t,n))}function pP(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(pP=function(){return!!t})()}function mP(t,e){return mP=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},mP(t,e)}function gP(){return gP="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=vP(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(arguments.length<3?t:n):i.value}},gP.apply(this,arguments)}function vP(t){return vP=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},vP(t)}function yP(t){var e=function(t,e){if("object"!=dP(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=dP(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==dP(e)?e:e+""}cP.version="3.14.2",cP.headless=!0,iP()&&nP.registerPlugin(cP),ti.registerPlugin(cP),cP.create("immg.zoomIn","0.9, 0.0, 0.4, 1.0"),cP.create("immg.zoomOut","0.4, 0.0, 0.1, 1.0"),cP.create("immg.posIn","0.4, 0.0, 0.1, 1.0"),cP.create("immg.posOut","0.9, 0.0, 0.4, 1.0"),cP.create("immg.expoOut","0.14, 1.0, 0.34, 1.0"),cP.create("immg.expoIn","0.66, 0.0, 0.86, 0.0");var bP=function(t){function e(t){var n,r,i,o,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),n=hP(this,e,[t,a]),r=n,o=function(){gP(vP(e.prototype),"layout",n).call(n),n.emit("layoutChange",n.input.max.x<=0)},(i=yP(i="layout"))in r?Object.defineProperty(r,i,{value:o,enumerable:!0,configurable:!0,writable:!0}):r[i]=o,n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&mP(t,e)}(e,t),n=e,r=[{key:"slideAnimation",value:function(t){var e=new ti.timeline({paused:!0});return e.fromTo(t.element,{x:-t.width-this._scrollLeft},{x:0,ease:"none",duration:1}),e.fromTo(t.element,{x:0},{x:this._scrollRight,ease:"none",duration:1}),e.seek(1),e}},{key:"unlayout",value:function(){gP(vP(e.prototype),"unlayout",this).call(this),this.slides.forEach((function(t){ti.set(t.element,{clearProps:"all"})}))}}],r&&fP(n.prototype,r),i&&fP(n,i),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,i}(Th);function _P(t){return _P="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_P(t)}function wP(){wP=function(){return e};var t,e={},n=Object.prototype,r=n.hasOwnProperty,i=Object.defineProperty||function(t,e,n){t[e]=n.value},o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",s=o.asyncIterator||"@@asyncIterator",l=o.toStringTag||"@@toStringTag";function u(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,n){return t[e]=n}}function c(t,e,n,r){var o=e&&e.prototype instanceof v?e:v,a=Object.create(o.prototype),s=new P(r||[]);return i(a,"_invoke",{value:T(t,n,s)}),a}function d(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}e.wrap=c;var f="suspendedStart",h="suspendedYield",p="executing",m="completed",g={};function v(){}function y(){}function b(){}var _={};u(_,a,(function(){return this}));var w=Object.getPrototypeOf,A=w&&w(w(R([])));A&&A!==n&&r.call(A,a)&&(_=A);var E=b.prototype=v.prototype=Object.create(_);function x(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function S(t,e){function n(i,o,a,s){var l=d(t[i],t,o);if("throw"!==l.type){var u=l.arg,c=u.value;return c&&"object"==_P(c)&&r.call(c,"__await")?e.resolve(c.__await).then((function(t){n("next",t,a,s)}),(function(t){n("throw",t,a,s)})):e.resolve(c).then((function(t){u.value=t,a(u)}),(function(t){return n("throw",t,a,s)}))}s(l.arg)}var o;i(this,"_invoke",{value:function(t,r){function i(){return new e((function(e,i){n(t,r,e,i)}))}return o=o?o.then(i,i):i()}})}function T(e,n,r){var i=f;return function(o,a){if(i===p)throw Error("Generator is already running");if(i===m){if("throw"===o)throw a;return{value:t,done:!0}}for(r.method=o,r.arg=a;;){var s=r.delegate;if(s){var l=C(s,r);if(l){if(l===g)continue;return l}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(i===f)throw i=m,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);i=p;var u=d(e,n,r);if("normal"===u.type){if(i=r.done?m:h,u.arg===g)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(i=m,r.method="throw",r.arg=u.arg)}}}function C(e,n){var r=n.method,i=e.iterator[r];if(i===t)return n.delegate=null,"throw"===r&&e.iterator.return&&(n.method="return",n.arg=t,C(e,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),g;var o=d(i,e.iterator,n.arg);if("throw"===o.type)return n.method="throw",n.arg=o.arg,n.delegate=null,g;var a=o.arg;return a?a.done?(n[e.resultName]=a.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=t),n.delegate=null,g):a:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,g)}function I(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function k(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function P(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(I,this),this.reset(!0)}function R(e){if(e||""===e){var n=e[a];if(n)return n.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var i=-1,o=function n(){for(;++i<e.length;)if(r.call(e,i))return n.value=e[i],n.done=!1,n;return n.value=t,n.done=!0,n};return o.next=o}}throw new TypeError(_P(e)+" is not iterable")}return y.prototype=b,i(E,"constructor",{value:b,configurable:!0}),i(b,"constructor",{value:y,configurable:!0}),y.displayName=u(b,l,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===y||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,b):(t.__proto__=b,u(t,l,"GeneratorFunction")),t.prototype=Object.create(E),t},e.awrap=function(t){return{__await:t}},x(S.prototype),u(S.prototype,s,(function(){return this})),e.AsyncIterator=S,e.async=function(t,n,r,i,o){void 0===o&&(o=Promise);var a=new S(c(t,n,r,i),o);return e.isGeneratorFunction(n)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},x(E),u(E,l,"Generator"),u(E,a,(function(){return this})),u(E,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),n=[];for(var r in e)n.push(r);return n.reverse(),function t(){for(;n.length;){var r=n.pop();if(r in e)return t.value=r,t.done=!1,t}return t.done=!0,t}},e.values=R,P.prototype={constructor:P,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(k),!e)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function i(r,i){return s.type="throw",s.arg=e,n.next=r,i&&(n.method="next",n.arg=t),!!i}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],s=a.completion;if("root"===a.tryLoc)return i("end");if(a.tryLoc<=this.prev){var l=r.call(a,"catchLoc"),u=r.call(a,"finallyLoc");if(l&&u){if(this.prev<a.catchLoc)return i(a.catchLoc,!0);if(this.prev<a.finallyLoc)return i(a.finallyLoc)}else if(l){if(this.prev<a.catchLoc)return i(a.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return i(a.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=t,a.arg=e,o?(this.method="next",this.next=o.finallyLoc,g):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),g},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),k(n),g}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var i=r.arg;k(n)}return i}}throw Error("illegal catch attempt")},delegateYield:function(e,n,r){return this.delegate={iterator:R(e),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=t),g}},e}function AP(t,e,n,r,i,o,a){try{var s=t[o](a),l=s.value}catch(t){return void n(t)}s.done?e(l):Promise.resolve(l).then(r,i)}function EP(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,xP(r.key),r)}}function xP(t){var e=function(t,e){if("object"!=_P(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=_P(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==_P(e)?e:e+""}var SP=function(){return t=function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)},e=[{key:"call",value:(r=function(t){return function(){var e=this,n=arguments;return new Promise((function(r,i){var o=t.apply(e,n);function a(t){AP(o,r,i,a,s,"next",t)}function s(t){AP(o,r,i,a,s,"throw",t)}a(void 0)}))}}(wP().mark((function t(e){var n,r,i,o,a,s,l,u,c,d,f,h,p,m,g,v,y,b;return wP().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.url,r=e.outputFormat,i=void 0===r?"json":r,o=e.tags,a=e.sortBy,s=e.categories,l=e.page,u=e.postsPerPage,c=e.direction,d=e.postType,f=e.tagType,h=e.likes,p=e.searchInput,m=e.bookID,g={method:"POST",body:JSON.stringify({tags:o,sortBy:a,categories:s,page:l,postsPerPage:u,direction:c,postType:d,tagType:f,likes:h,searchInput:p,bookID:m}),credentials:"same-origin"},t.next=4,fetch(n,g);case 4:if(v=t.sent,"json"!=i){t.next=13;break}return t.next=8,v.json();case 8:return(y=t.sent).success||alert(y.errors),t.abrupt("return",y);case 13:return t.next=15,v.text();case 15:return b=t.sent,t.abrupt("return",b);case 17:case"end":return t.stop()}}),t)}))),function(t){return r.apply(this,arguments)})}],e&&EP(t.prototype,e),n&&EP(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,n,r}();new SP;function TP(t){return TP="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},TP(t)}function CP(){CP=function(){return e};var t,e={},n=Object.prototype,r=n.hasOwnProperty,i=Object.defineProperty||function(t,e,n){t[e]=n.value},o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",s=o.asyncIterator||"@@asyncIterator",l=o.toStringTag||"@@toStringTag";function u(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,n){return t[e]=n}}function c(t,e,n,r){var o=e&&e.prototype instanceof v?e:v,a=Object.create(o.prototype),s=new P(r||[]);return i(a,"_invoke",{value:T(t,n,s)}),a}function d(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}e.wrap=c;var f="suspendedStart",h="suspendedYield",p="executing",m="completed",g={};function v(){}function y(){}function b(){}var _={};u(_,a,(function(){return this}));var w=Object.getPrototypeOf,A=w&&w(w(R([])));A&&A!==n&&r.call(A,a)&&(_=A);var E=b.prototype=v.prototype=Object.create(_);function x(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function S(t,e){function n(i,o,a,s){var l=d(t[i],t,o);if("throw"!==l.type){var u=l.arg,c=u.value;return c&&"object"==TP(c)&&r.call(c,"__await")?e.resolve(c.__await).then((function(t){n("next",t,a,s)}),(function(t){n("throw",t,a,s)})):e.resolve(c).then((function(t){u.value=t,a(u)}),(function(t){return n("throw",t,a,s)}))}s(l.arg)}var o;i(this,"_invoke",{value:function(t,r){function i(){return new e((function(e,i){n(t,r,e,i)}))}return o=o?o.then(i,i):i()}})}function T(e,n,r){var i=f;return function(o,a){if(i===p)throw Error("Generator is already running");if(i===m){if("throw"===o)throw a;return{value:t,done:!0}}for(r.method=o,r.arg=a;;){var s=r.delegate;if(s){var l=C(s,r);if(l){if(l===g)continue;return l}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(i===f)throw i=m,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);i=p;var u=d(e,n,r);if("normal"===u.type){if(i=r.done?m:h,u.arg===g)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(i=m,r.method="throw",r.arg=u.arg)}}}function C(e,n){var r=n.method,i=e.iterator[r];if(i===t)return n.delegate=null,"throw"===r&&e.iterator.return&&(n.method="return",n.arg=t,C(e,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),g;var o=d(i,e.iterator,n.arg);if("throw"===o.type)return n.method="throw",n.arg=o.arg,n.delegate=null,g;var a=o.arg;return a?a.done?(n[e.resultName]=a.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=t),n.delegate=null,g):a:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,g)}function I(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function k(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function P(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(I,this),this.reset(!0)}function R(e){if(e||""===e){var n=e[a];if(n)return n.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var i=-1,o=function n(){for(;++i<e.length;)if(r.call(e,i))return n.value=e[i],n.done=!1,n;return n.value=t,n.done=!0,n};return o.next=o}}throw new TypeError(TP(e)+" is not iterable")}return y.prototype=b,i(E,"constructor",{value:b,configurable:!0}),i(b,"constructor",{value:y,configurable:!0}),y.displayName=u(b,l,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===y||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,b):(t.__proto__=b,u(t,l,"GeneratorFunction")),t.prototype=Object.create(E),t},e.awrap=function(t){return{__await:t}},x(S.prototype),u(S.prototype,s,(function(){return this})),e.AsyncIterator=S,e.async=function(t,n,r,i,o){void 0===o&&(o=Promise);var a=new S(c(t,n,r,i),o);return e.isGeneratorFunction(n)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},x(E),u(E,l,"Generator"),u(E,a,(function(){return this})),u(E,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),n=[];for(var r in e)n.push(r);return n.reverse(),function t(){for(;n.length;){var r=n.pop();if(r in e)return t.value=r,t.done=!1,t}return t.done=!0,t}},e.values=R,P.prototype={constructor:P,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(k),!e)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function i(r,i){return s.type="throw",s.arg=e,n.next=r,i&&(n.method="next",n.arg=t),!!i}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],s=a.completion;if("root"===a.tryLoc)return i("end");if(a.tryLoc<=this.prev){var l=r.call(a,"catchLoc"),u=r.call(a,"finallyLoc");if(l&&u){if(this.prev<a.catchLoc)return i(a.catchLoc,!0);if(this.prev<a.finallyLoc)return i(a.finallyLoc)}else if(l){if(this.prev<a.catchLoc)return i(a.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return i(a.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=t,a.arg=e,o?(this.method="next",this.next=o.finallyLoc,g):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),g},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),k(n),g}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var i=r.arg;k(n)}return i}}throw Error("illegal catch attempt")},delegateYield:function(e,n,r){return this.delegate={iterator:R(e),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=t),g}},e}function IP(t,e,n,r,i,o,a){try{var s=t[o](a),l=s.value}catch(t){return void n(t)}s.done?e(l):Promise.resolve(l).then(r,i)}function kP(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,PP(r.key),r)}}function PP(t){var e=function(t,e){if("object"!=TP(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=TP(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==TP(e)?e:e+""}var RP=function(){return t=function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)},e=[{key:"call",value:(r=function(t){return function(){var e=this,n=arguments;return new Promise((function(r,i){var o=t.apply(e,n);function a(t){IP(o,r,i,a,s,"next",t)}function s(t){IP(o,r,i,a,s,"throw",t)}a(void 0)}))}}(CP().mark((function t(e){var n,r,i,o,a,s,l=arguments;return CP().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=l.length>1&&void 0!==l[1]?l[1]:"json",r=l.length>2?l[2]:void 0,i={method:"POST",body:JSON.stringify({tagSlug:r}),credentials:"same-origin"},t.next=5,fetch(e,i);case 5:if(o=t.sent,"json"!=n){t.next=14;break}return t.next=9,o.json();case 9:return(a=t.sent).success||alert(a.errors),t.abrupt("return",a);case 14:return t.next=16,o.text();case 16:return s=t.sent,t.abrupt("return",s);case 18:case"end":return t.stop()}}),t)}))),function(t){return r.apply(this,arguments)})}],e&&kP(t.prototype,e),n&&kP(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,n,r}();const OP=new RP;function MP(t){return MP="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},MP(t)}function LP(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,zP(r.key),r)}}function DP(t,e,n){return e=BP(e),function(t,e){if(e&&("object"===MP(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,NP()?Reflect.construct(e,n||[],BP(t).constructor):e.apply(t,n))}function NP(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(NP=function(){return!!t})()}function BP(t){return BP=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},BP(t)}function jP(t,e){return jP=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},jP(t,e)}function zP(t){var e=function(t,e){if("object"!=MP(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=MP(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==MP(e)?e:e+""}var FP=function(t){function e(t){var n,r,i,o,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),n=DP(this,e,[t,a]),r=n,o=function(t){t.stopPropagation()},(i=zP(i="stopPropagation"))in r?Object.defineProperty(r,i,{value:o,enumerable:!0,configurable:!0,writable:!0}):r[i]=o,n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&jP(t,e)}(e,t),n=e,(r=[{key:"attach",value:function(){this.element.addEventListener("wheel",this.stopPropagation)}},{key:"detach",value:function(){this.element.removeEventListener("wheel",this.stopPropagation)}}])&&LP(n.prototype,r),i&&LP(n,i),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,i}(Yp);function UP(t){return UP="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},UP(t)}function qP(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,WP(r.key),r)}}function GP(t,e,n){return e=VP(e),function(t,e){if(e&&("object"===UP(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,HP()?Reflect.construct(e,n||[],VP(t).constructor):e.apply(t,n))}function HP(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(HP=function(){return!!t})()}function VP(t){return VP=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},VP(t)}function QP(t,e){return QP=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},QP(t,e)}function WP(t){var e=function(t,e){if("object"!=UP(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=UP(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==UP(e)?e:e+""}var YP=function(t){function e(t,n){var r,i,o,a;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),r=GP(this,e,[t,n]),i=r,a=function(){window.innerWidth<1024?r.root.style.setProperty("--full-height-mobile",window.innerHeight+"px"):r.root.style.setProperty("--full-height-mobile","100vh")},(o=WP(o="resize"))in i?Object.defineProperty(i,o,{value:a,enumerable:!0,configurable:!0,writable:!0}):i[o]=a,r.root=document.querySelector(":root"),r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&QP(t,e)}(e,t),n=e,(r=[{key:"init",value:function(){this.resize()}},{key:"attach",value:function(){window.addEventListener("resize",this.resize)}},{key:"detach",value:function(){window.removeEventListener("resize",this.resize)}}])&&qP(n.prototype,r),i&&qP(n,i),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,i}(Yp);function KP(t){return KP="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},KP(t)}function XP(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,nR(r.key),r)}}function $P(t,e,n){return e=JP(e),function(t,e){if(e&&("object"===KP(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,ZP()?Reflect.construct(e,n||[],JP(t).constructor):e.apply(t,n))}function ZP(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(ZP=function(){return!!t})()}function JP(t){return JP=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},JP(t)}function tR(t,e){return tR=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},tR(t,e)}function eR(t,e,n){return(e=nR(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function nR(t){var e=function(t,e){if("object"!=KP(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=KP(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==KP(e)?e:e+""}var rR=function(t){function e(t,n){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),eR(r=$P(this,e,[t,n]),"toggleMenu",(function(){var t,e;null===(t=r.menuTl)||void 0===t||null===(e=t.kill)||void 0===e||e.call(t),r.menuTl=ti.timeline(),r.opened?(r.viewport.medias.desktop||r.mbBack(),r.header.classList.remove("menu-open"),r.header.classList.remove("menu-dark"),r.element.classList.remove("show-afters"),r.menuTl.to(r.element,{backgroundPositionY:"200%",pointerEvents:"none",ease:"power3.in",duration:.6},0),r.menuTl.to(r.titlesEL,{opacity:0,y:-40,ease:"power2.out",duration:.6,stagger:{from:"end",each:.03}},0),r.menuTl.to(r.translateItems,{opacity:0,y:-30,ease:"power2.out",duration:.6,stagger:.02},0),r.menuTl.to(r.element,{opacity:0,duration:.2,ease:"none"},"<75%"),r.menuTl.to(r.contentW,{opacity:0,duration:.6,ease:"none"},0),r.menuTl.call((function(){return r.element.classList.remove("open")}))):(r.header.classList.add("menu-open"),r.header.classList.add("menu-dark"),r.element.classList.add("show-afters"),r.menuTl.to(r.element,{opacity:1,duration:.2,ease:"none"},0),r.menuTl.call((function(){return r.element.classList.add("open")})),r.menuTl.to(r.element,{backgroundPositionY:0,pointerEvents:"all",ease:"expo.out",duration:1.2},0),r.menuTl.to(r.titlesEL,{opacity:1,ease:"none",duration:1.15,stagger:.15},0),r.menuTl.to(r.titlesEL,{y:0,ease:"power3.out",duration:.9,stagger:.15},0),r.menuTl.to(r.translateItems,{opacity:1,ease:"none",duration:1.15,stagger:.02},0),r.menuTl.to(r.translateItems,{y:0,ease:"power3.out",duration:.9,stagger:.02},0),r.menuTl.to(r.contentW,{opacity:1,ease:"none",duration:1.15},0)),r.opened=!r.opened})),eR(r,"openContent",(function(t){var e,n;r.viewport.medias.desktop||(t.preventDefault(),t.stopPropagation(),t.stopImmediatePropagation());var i=r.titles.find((function(e){return e.element==t.currentTarget})).id;r.titles[i].element.classList.add("active"),r.titles.filter((function(t){return t.id!==i})).forEach((function(t){t.element.classList.remove("active")})),r.closeOldContents(i),null===(e=r.contents[i].tl)||void 0===e||null===(n=e.kill)||void 0===n||n.call(e),r.contents[i].tl=ti.timeline(),r.contents[i].tl.set(r.contents[i].element,{display:"block"}),r.contents[i].tl.to(r.contents[i].element,{opacity:1,duration:.6,ease:"none",delay:.2}),r.showMobileBg()})),eR(r,"showMobileBg",(function(){var t,e;r.header.classList.add("menu-light"),r.socialsW.style.color="#FFFFFF",null===(t=r.mbBgTl)||void 0===t||null===(e=t.kill)||void 0===e||e.call(t),r.mbBgTl=ti.timeline(),r.mbBgTl.set(r.mobileBg,{display:"block"}),r.mbBgTl.to(r.mobileBg,{opacity:1,duration:.2,ease:"none"})})),eR(r,"hideMobileBg",(function(){var t,e;r.header.classList.remove("menu-light"),r.socialsW.style.color="",r.header.classList.add("menu-dark"),null===(t=r.mbBgTl)||void 0===t||null===(e=t.kill)||void 0===e||e.call(t),r.mbBgTl=ti.timeline(),r.mbBgTl.to(r.mobileBg,{opacity:0,duration:.2,ease:"none"}),r.mbBgTl.set(r.mobileBg,{display:"none"})})),eR(r,"closeOldContents",(function(t){r.contents.filter((function(e){return e.id!==t})).forEach((function(t){var e,n;null===(e=t.tl)||void 0===e||null===(n=e.kill)||void 0===n||n.call(e),t.tl=ti.timeline(),t.tl.to(t.element,{opacity:0,duration:.2,ease:"none"}),t.tl.set(t.element,{display:"none"})}))})),eR(r,"mbBack",(function(){r.closeOldContents(-1),r.hideMobileBg()})),eR(r,"resetMenu",(function(t){!r.viewport.medias.desktop&&t.currentTarget.classList.contains("title-w")||(r.mbBack(),r.opened&&r.toggleMenu())})),r.opened=!1,r.titlesEL=r.element.querySelectorAll(".title-w"),r.translateItems=r.element.querySelectorAll(".translate-anim"),r.titles=Array.from(r.element.querySelectorAll(".title-w")).map((function(t,e){return{element:t,id:e}})),r.contents=Array.from(r.element.querySelectorAll(".content")).map((function(t,e){return{element:t,id:e,tl:null}})),r.contentW=r.element.querySelector(".content-w"),r.mobileBg=r.element.querySelector(".mobile-bg"),r.mbBackButton=r.element.querySelector(".mobile-back-button"),r.header=document.querySelector("#header"),r.socialsW=r.element.querySelector(".socials"),r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&tR(t,e)}(e,t),n=e,(r=[{key:"init",value:function(){ti.set(this.element,{display:"none",opacity:0,backgroundPositionY:"200%",pointerEvents:"none"}),ti.set(this.contentW,{opacity:0}),ti.set(this.translateItems,{opacity:0,y:-30}),ti.set(this.titlesEL,{opacity:0,y:-40})}},{key:"attach",value:function(){var t=this;this.titles.forEach((function(e){e.element.addEventListener("click",t.openContent),e.element.addEventListener("mouseover",t.openContent)})),this.mbBackButton.addEventListener("click",this.mbBack)}},{key:"detach",value:function(){var t=this;this.titles.forEach((function(e){e.element.removeEventListener("click",t.openContent),e.element.removeEventListener("mouseover",t.openContent)})),this.mbBackButton.removeEventListener("click",this.mbBack)}}])&&XP(n.prototype,r),i&&XP(n,i),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,i}(Yp);function iR(t){return iR="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},iR(t)}function oR(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,dR(r.key),r)}}function aR(t,e,n){return e=lR(e),function(t,e){if(e&&("object"===iR(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,sR()?Reflect.construct(e,n||[],lR(t).constructor):e.apply(t,n))}function sR(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(sR=function(){return!!t})()}function lR(t){return lR=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},lR(t)}function uR(t,e){return uR=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},uR(t,e)}function cR(t,e,n){return(e=dR(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function dR(t){var e=function(t,e){if("object"!=iR(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=iR(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==iR(e)?e:e+""}var fR=function(t){function e(t,n){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),cR(r=aR(this,e,[t,n]),"resize",(function(){(r.selectCurrentRoute(),r.bannerLink)&&(r.bannerLink.offsetWidth-r.bannerLink.querySelector("span").offsetWidth<190?r.bannerLink.classList.add("marquee"):r.bannerLink.classList.remove("marquee"))})),cR(r,"tarteaucitronLoaded",(function(){r.isTarteAuCitronLoaded=!0,setTimeout((function(){var t,e;(r.tarteaucitronRoot=document.querySelector("#tarteaucitronRoot"),r.tarteaucitronRoot)&&(r.tarteaucitronAllow=document.querySelector("#tarteaucitronAllAllowed"),r.tarteaucitronDeny=document.querySelector("#tarteaucitronAllDenied"),r.saveCookieButton=document.querySelector("#tarteaucitronSaveButton"),ti.to(r.tarteaucitronRoot,{opacity:1,duration:.3}),localStorage.getItem("cookieConsent")&&r.tarteaucitronRoot.classList.add("hidden"),null===(t=r.tarteaucitronAllow)||void 0===t||t.addEventListener("click",r.saveCookies),null===(e=r.tarteaucitronDeny)||void 0===e||e.addEventListener("click",r.saveCookies),r.checkIfEventCta())}),200)})),cR(r,"checkIfEventCta",(function(){r.isEventCta=document.querySelector(".event-cta"),r.tarteaucitronRoot&&r.isEventCta?r.tarteaucitronRoot.classList.add("with-floating-button"):r.tarteaucitronRoot&&r.tarteaucitronRoot.classList.remove("with-floating-button")})),cR(r,"checkHeaderProps",(function(){var t=ti.utils.toArray("[data-header-props]").map((function(t){return{el:t,headerprops:t.dataset.headerProps}}));if(r.element.classList.remove("disable","three-sundays-page","sticky-bar","companion-page","disable-courses"),r.homePages.classList.remove("active"),r.threeSundaysPages.classList.remove("active"),r.companionPages.classList.remove("active"),r.accountPages.classList.remove("active"),r.coursePages.classList.remove("active"),r.cpCoursePages.classList.remove("active"),r.cpTalksPages.classList.remove("active"),r.cpFilmsPages.classList.remove("active"),t.length>0)if("disable"===t[0].headerprops)r.element.classList.add("disable"),r.accountPages.classList.add("active");else if("disable-courses"===t[0].headerprops){r.element.classList.add("disable-courses"),r.coursePages.classList.add("active");var e=document.querySelector("#root .page");r.backCourses.href=e.dataset.coursePage}else"disable-courses-cp"===t[0].headerprops?(r.element.classList.add("disable-courses"),r.cpCoursePages.classList.add("active")):"disable-talks"===t[0].headerprops?(r.element.classList.add("disable-courses"),r.cpTalksPages.classList.add("active")):"disable-films"===t[0].headerprops?(r.element.classList.add("disable-courses"),r.cpFilmsPages.classList.add("active")):"three-sundays"===t[0].headerprops?(r.element.classList.add("three-sundays-page"),r.threeSundaysPages.classList.add("active")):"companion"===t[0].headerprops?(r.element.classList.add("companion-page"),r.companionPages.classList.add("active")):"shop"===t[0].headerprops&&(r.element.classList.add("shop-page"),r.homePages.classList.add("active"));else r.homePages.classList.add("active");r.timeline.to(r.element,{opacity:1,duration:.3},0)})),cR(r,"closeBanner",(function(){r.element.classList.add("banner-closed"),setTimeout((function(){r.root.style.setProperty("--banner-current-height","0px")}),1e3)})),cR(r,"hideHeader",(function(){ti.to(r.element,{yPercent:-100,opacity:0,duration:.6,ease:"power3.in"})})),cR(r,"showHeader",(function(){ti.to(r.element,{yPercent:0,opacity:1,duration:.6,ease:"power3.out"}),r.element.classList.contains("banner-closed")&&r.closeBanner()})),cR(r,"onScroll",(function(t){r.element.classList.contains("companion-page")&&r.firstLoad?(r.firstLoad=!1,r.element.dataset.scrollDirection=-1):t.direction?r.element.dataset.scrollDirection=t.direction:r.element.dataset.scrollDirection=-1})),cR(r,"saveCookies",(function(){r.saveCookieButton.click(),localStorage.setItem("cookieConsent","true")})),r.tls=[],r.backgrounds=[],r._theme=null,r.timeline=null,r.homePages=r.element.querySelector(".home-pages"),r.threeSundaysPages=r.element.querySelector(".three-sundays-pages"),r.companionPages=r.element.querySelector(".companion-pages"),r.accountPages=r.element.querySelector(".account-pages"),r.coursePages=r.element.querySelector(".course-pages"),r.cpCoursePages=r.element.querySelector(".cp-course-pages"),r.cpTalksPages=r.element.querySelector(".cp-talks-pages"),r.cpFilmsPages=r.element.querySelector(".cp-films-pages"),r.back=r.element.querySelector(".back"),r.backCourses=r.element.querySelector(".back-courses"),r.banner=r.element.querySelector(".banner"),r.banner&&(r.bannerLink=r.banner.querySelector(".link")),r.root=document.querySelector(":root"),r.footer=document.querySelector("footer"),r.onFooter=!1,r.firstLoad=!0,r.tarteaucitronRoot=document.querySelector("#tarteaucitronRoot"),r.tarteaucitronRoot&&r.tarteaucitronLoaded(),r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&uR(t,e)}(e,t),n=e,r=[{key:"init",value:function(){}},{key:"attach",value:function(){var t,e,n,r=this;this.isTarteAuCitronLoaded||window.addEventListener("tac.root_available",this.tarteaucitronLoaded),this.viewport.on("resize",this.resize),null===(t=this.bootstrap.smoother)||void 0===t||t.on("scroll",this.onScroll),null===(e=this.banner)||void 0===e||e.addEventListener("click",this.closeBanner),null===(n=this.back)||void 0===n||n.addEventListener("click",(function(){var t,e,n,i,o;r.previousPage&&!r.previousPage.classList.contains("account-creation-section")&&"partials/account/courses"!==(null===(t=r.pageMod.current)||void 0===t?void 0:t.dataset.template)&&"partials/account/orders"!==(null===(e=r.pageMod.current)||void 0===e?void 0:e.dataset.template)&&"partials/account/events"!==(null===(n=r.pageMod.current)||void 0===n?void 0:n.dataset.template)&&"partials/account/edit-profile"!==(null===(i=r.pageMod.current)||void 0===i?void 0:i.dataset.template)&&"partials/account/contact"!==(null===(o=r.pageMod.current)||void 0===o?void 0:o.dataset.template)?history.back():r.bootstrap.router.set("/")}))}},{key:"detach",value:function(){var t,e,n,r,i,o=this;window.removeEventListener("tac.root_available",this.tarteaucitronLoaded),this.viewport.off("resize",this.resize),null===(t=this.bootstrap.smoother)||void 0===t||t.off("scroll",this.onScroll),null===(e=this.banner)||void 0===e||e.removeEventListener("click",this.closeBanner),null===(n=this.back)||void 0===n||n.removeEventListener("click",(function(){var t,e,n,r,i;o.previousPage&&!o.previousPage.classList.contains("account-creation-section")&&"partials/account/courses"!==(null===(t=o.pageMod.current)||void 0===t?void 0:t.dataset.template)&&"partials/account/orders"!==(null===(e=o.pageMod.current)||void 0===e?void 0:e.dataset.template)&&"partials/account/events"!==(null===(n=o.pageMod.current)||void 0===n?void 0:n.dataset.template)&&"partials/account/edit-profile"!==(null===(r=o.pageMod.current)||void 0===r?void 0:r.dataset.template)&&"partials/account/contact"!==(null===(i=o.pageMod.current)||void 0===i?void 0:i.dataset.template)?history.back():o.bootstrap.router.set("/")})),this.tarteaucitronRoot&&(null===(r=this.tarteaucitronAllow)||void 0===r||r.removeEventListener("click",this.saveCookies),null===(i=this.tarteaucitronDeny)||void 0===i||i.removeEventListener("click",this.saveCookies))}},{key:"theme",set:function(t){this._theme=t,this.element.setAttribute("data-theme",this._theme)}},{key:"selectCurrentRoute",value:function(){var t,e,n=this,r=document.querySelector("#homepage");this.element.dataset.scrollDirection=-1,this.firstLoad=!0,this.isTarteAuCitronLoaded&&this.checkIfEventCta(),!r&&this.element.classList.contains("with-banner")?this.element.classList.remove("with-banner"):r&&!this.element.classList.contains("with-banner")&&this.element.classList.add("with-banner"),null===(t=this.timeline)||void 0===t||t.kill(),this.timeline=ti.timeline(),this.checkHeaderProps(),this.tls.forEach((function(t){return t.kill()})),this.backgrounds=ti.utils.toArray("[data-header]").map((function(t){return{trigger:t,headercolor:t.dataset.header}})),this.backgrounds.forEach((function(t){n.element.dataset.theme=t.headercolor}));var i=this.element.scrollHeight/2||0;this.backgrounds.forEach((function(t){if(t&&t.trigger&&"none"!==t.trigger.style.display){var e=us.create({trigger:t.trigger,start:"top ".concat(i),end:"bottom ".concat(i),onEnter:function(){n.theme=t.headercolor},onEnterBack:function(){n.theme=t.headercolor},onUpdate:function(e){t.trigger!==n.footer||n.onFooter?t.trigger!==n.footer&&n.onFooter&&(n.onFooter=!1):n.onFooter=!0}});n.tls.push(e)}})),this.theme=null===(e=this.backgrounds[0])||void 0===e?void 0:e.headercolor}}],r&&oR(n.prototype,r),i&&oR(n,i),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,i}(Yp);function hR(t){return hR="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},hR(t)}function pR(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,bR(r.key),r)}}function mR(t,e,n){return e=vR(e),function(t,e){if(e&&("object"===hR(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,gR()?Reflect.construct(e,n||[],vR(t).constructor):e.apply(t,n))}function gR(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(gR=function(){return!!t})()}function vR(t){return vR=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},vR(t)}function yR(t,e){return yR=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},yR(t,e)}function bR(t){var e=function(t,e){if("object"!=hR(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=hR(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==hR(e)?e:e+""}var _R=function(t){function e(t,n){var r,i,o,a;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),r=mR(this,e,[t,n]),i=r,a=function(){r.element.classList.add("closed")},(o=bR(o="close"))in i?Object.defineProperty(i,o,{value:a,enumerable:!0,configurable:!0,writable:!0}):i[o]=a,r.closeButton=r.element.querySelector(".close-w"),r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&yR(t,e)}(e,t),n=e,(r=[{key:"attach",value:function(){this.closeButton.addEventListener("click",this.close)}},{key:"detach",value:function(){this.closeButton.removeEventListener("click",this.close)}}])&&pR(n.prototype,r),i&&pR(n,i),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,i}(Yp);function wR(t){return wR="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},wR(t)}function AR(){AR=function(){return e};var t,e={},n=Object.prototype,r=n.hasOwnProperty,i=Object.defineProperty||function(t,e,n){t[e]=n.value},o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",s=o.asyncIterator||"@@asyncIterator",l=o.toStringTag||"@@toStringTag";function u(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,n){return t[e]=n}}function c(t,e,n,r){var o=e&&e.prototype instanceof v?e:v,a=Object.create(o.prototype),s=new P(r||[]);return i(a,"_invoke",{value:T(t,n,s)}),a}function d(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}e.wrap=c;var f="suspendedStart",h="suspendedYield",p="executing",m="completed",g={};function v(){}function y(){}function b(){}var _={};u(_,a,(function(){return this}));var w=Object.getPrototypeOf,A=w&&w(w(R([])));A&&A!==n&&r.call(A,a)&&(_=A);var E=b.prototype=v.prototype=Object.create(_);function x(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function S(t,e){function n(i,o,a,s){var l=d(t[i],t,o);if("throw"!==l.type){var u=l.arg,c=u.value;return c&&"object"==wR(c)&&r.call(c,"__await")?e.resolve(c.__await).then((function(t){n("next",t,a,s)}),(function(t){n("throw",t,a,s)})):e.resolve(c).then((function(t){u.value=t,a(u)}),(function(t){return n("throw",t,a,s)}))}s(l.arg)}var o;i(this,"_invoke",{value:function(t,r){function i(){return new e((function(e,i){n(t,r,e,i)}))}return o=o?o.then(i,i):i()}})}function T(e,n,r){var i=f;return function(o,a){if(i===p)throw Error("Generator is already running");if(i===m){if("throw"===o)throw a;return{value:t,done:!0}}for(r.method=o,r.arg=a;;){var s=r.delegate;if(s){var l=C(s,r);if(l){if(l===g)continue;return l}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(i===f)throw i=m,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);i=p;var u=d(e,n,r);if("normal"===u.type){if(i=r.done?m:h,u.arg===g)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(i=m,r.method="throw",r.arg=u.arg)}}}function C(e,n){var r=n.method,i=e.iterator[r];if(i===t)return n.delegate=null,"throw"===r&&e.iterator.return&&(n.method="return",n.arg=t,C(e,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),g;var o=d(i,e.iterator,n.arg);if("throw"===o.type)return n.method="throw",n.arg=o.arg,n.delegate=null,g;var a=o.arg;return a?a.done?(n[e.resultName]=a.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=t),n.delegate=null,g):a:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,g)}function I(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function k(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function P(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(I,this),this.reset(!0)}function R(e){if(e||""===e){var n=e[a];if(n)return n.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var i=-1,o=function n(){for(;++i<e.length;)if(r.call(e,i))return n.value=e[i],n.done=!1,n;return n.value=t,n.done=!0,n};return o.next=o}}throw new TypeError(wR(e)+" is not iterable")}return y.prototype=b,i(E,"constructor",{value:b,configurable:!0}),i(b,"constructor",{value:y,configurable:!0}),y.displayName=u(b,l,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===y||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,b):(t.__proto__=b,u(t,l,"GeneratorFunction")),t.prototype=Object.create(E),t},e.awrap=function(t){return{__await:t}},x(S.prototype),u(S.prototype,s,(function(){return this})),e.AsyncIterator=S,e.async=function(t,n,r,i,o){void 0===o&&(o=Promise);var a=new S(c(t,n,r,i),o);return e.isGeneratorFunction(n)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},x(E),u(E,l,"Generator"),u(E,a,(function(){return this})),u(E,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),n=[];for(var r in e)n.push(r);return n.reverse(),function t(){for(;n.length;){var r=n.pop();if(r in e)return t.value=r,t.done=!1,t}return t.done=!0,t}},e.values=R,P.prototype={constructor:P,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(k),!e)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function i(r,i){return s.type="throw",s.arg=e,n.next=r,i&&(n.method="next",n.arg=t),!!i}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],s=a.completion;if("root"===a.tryLoc)return i("end");if(a.tryLoc<=this.prev){var l=r.call(a,"catchLoc"),u=r.call(a,"finallyLoc");if(l&&u){if(this.prev<a.catchLoc)return i(a.catchLoc,!0);if(this.prev<a.finallyLoc)return i(a.finallyLoc)}else if(l){if(this.prev<a.catchLoc)return i(a.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return i(a.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=t,a.arg=e,o?(this.method="next",this.next=o.finallyLoc,g):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),g},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),k(n),g}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var i=r.arg;k(n)}return i}}throw Error("illegal catch attempt")},delegateYield:function(e,n,r){return this.delegate={iterator:R(e),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=t),g}},e}function ER(t,e,n,r,i,o,a){try{var s=t[o](a),l=s.value}catch(t){return void n(t)}s.done?e(l):Promise.resolve(l).then(r,i)}function xR(t){return function(){var e=this,n=arguments;return new Promise((function(r,i){var o=t.apply(e,n);function a(t){ER(o,r,i,a,s,"next",t)}function s(t){ER(o,r,i,a,s,"throw",t)}a(void 0)}))}}function SR(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,RR(r.key),r)}}function TR(t,e,n){return e=IR(e),function(t,e){if(e&&("object"===wR(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,CR()?Reflect.construct(e,n||[],IR(t).constructor):e.apply(t,n))}function CR(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(CR=function(){return!!t})()}function IR(t){return IR=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},IR(t)}function kR(t,e){return kR=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},kR(t,e)}function PR(t,e,n){return(e=RR(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function RR(t){var e=function(t,e){if("object"!=wR(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=wR(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==wR(e)?e:e+""}var OR=function(t){function e(t,n){var r,i;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),PR(i=TR(this,e,[t,n]),"attachProducts",(function(){jQuery("form.woocommerce-cart-form").on("click",".quantity-up",i.qtyUp),jQuery("form.woocommerce-cart-form").on("click",".quantity-down",i.qtyDown)})),PR(i,"refreshCheckout",xR(AR().mark((function t(){var e,n,r,o,a;return AR().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r={action:"david_update_cart"},i.element.classList.contains("loading")||i.element.classList.add("loading"),i.loader.classList.contains("active")||i.loader.classList.add("active"),t.next=5,fetch(ADMIN_AJAX_URL,{method:"POST",credentials:"include",headers:{"Content-type":"application/x-www-form-urlencoded"},body:new URLSearchParams(r).toString()});case 5:return o=t.sent,t.next=8,o.json();case 8:return(a=t.sent)&&a.cart&&(i.wooCommerceWrapper.innerHTML=a.cart),a&&a.count&&(i.productCount.innerHTML="(".concat(a.count,")")),t.next=13,i.components.setup();case 13:i.followLinkModule.update(),i.links=null===(e=i.wooCommerceWrapper)||void 0===e?void 0:e.querySelectorAll("a"),null===(n=i.links)||void 0===n||n.forEach((function(t){t.addEventListener("click",i.toggleCart)})),i.attachProducts(),i.loader.classList.remove("active"),i.element.classList.remove("loading"),i.formCart=i.element.querySelector("form.woocommerce-cart-form");case 20:case"end":return t.stop()}}),t)})))),PR(i,"toggleCart",(function(){var t;i.isOpened=!i.isOpened,i.element.classList.toggle("active",i.isOpened),null===(t=i.tl)||void 0===t||t.kill(),i.tl=ti.timeline(),i.isOpened?(i.bootstrap.smoother.stop(),i.tl.set([i.element,i.overlay],{display:"block"},0),i.tl.add((function(){i.inner.classList.add("active")}),.1),i.tl.to(i.overlay,{opacity:1,ease:"linear",duration:.3},0)):(i.tl.add((function(){i.inner.classList.remove("active")}),0),i.tl.to(i.overlay,{opacity:0,ease:"linear",duration:.3},0),i.tl.add((function(){return i.bootstrap.smoother.start()}),.7),i.tl.set([i.element,i.overlay],{display:"none"},.8))})),PR(i,"openCart",(function(){var t;i.isOpened||(i.isOpened=!0,null===(t=i.tl)||void 0===t||t.kill(),i.tl=ti.timeline(),i.bootstrap.smoother.stop(),i.tl.set([i.element,i.overlay],{display:"block"},0),i.tl.add((function(){i.inner.classList.add("active")}),.1),i.tl.to(i.overlay,{opacity:1,ease:"linear",duration:.3},0))})),PR(i,"qtyDown",(function(t){var e=t.target.closest(".product-wrapper").querySelector(".quantity input"),n=parseInt(e.value);n>1&&(e.value=n-1,i.qtyChange())})),PR(i,"qtyUp",(function(t){var e=t.target.closest(".product-wrapper").querySelector(".quantity input"),n=parseInt(e.value);e.value=n+1,i.qtyChange()})),PR(i,"qtyChange",(0,HC.debounce)((function(){var t;if(null!==(t=i.formCart)&&void 0!==t&&t.checkValidity()){i.element.classList.contains("loading")||i.element.classList.add("loading"),i.loader.classList.contains("active")||i.loader.classList.add("active");var e={action:"update_order_review",post_data:jQuery("form.woocommerce-cart-form").serialize()};jQuery.post(ADMIN_AJAX_URL,e,(function(){jQuery("body").trigger("update_checkout")}))}}),400)),i.header=document.querySelector("#header .cart"),i.cartMobile=document.querySelector("#menu-mobile .cart"),i.inner=i.element.querySelector(".panel"),i.overlay=i.element.querySelector(".cart-overlay"),i.closeCart=i.element.querySelector(".close-cart"),i.wooCommerceWrapper=i.element.querySelector(".cart-content"),i.formCart=i.element.querySelector("form.woocommerce-cart-form"),i.links=null===(r=i.wooCommerceWrapper)||void 0===r?void 0:r.querySelectorAll("a"),i.productCount=i.element.querySelector(".product-count"),i.isOpened=!1,i.loader=i.element.querySelector(".loader"),i}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&kR(t,e)}(e,t),n=e,(r=[{key:"attach",value:function(){var t,e,n,r=this;jQuery("body").on("update_checkout",this.refreshCheckout),this.header.addEventListener("click",this.toggleCart),null===(t=this.cartMobile)||void 0===t||t.addEventListener("click",this.openCart),this.overlay.addEventListener("click",this.toggleCart),null===(e=this.closeCart)||void 0===e||e.addEventListener("click",this.toggleCart),null===(n=this.links)||void 0===n||n.forEach((function(t){t.addEventListener("click",r.toggleCart)})),this.attachProducts()}},{key:"detach",value:function(){var t,e,n,r=this;jQuery("body").off("update_checkout",this.refreshCheckout),this.header.removeEventListener("click",this.toggleCart),null===(t=this.cartMobile)||void 0===t||t.removeEventListener("click",this.openCart),this.overlay.removeEventListener("click",this.toggleCart),null===(e=this.closeCart)||void 0===e||e.removeEventListener("click",this.toggleCart),null===(n=this.links)||void 0===n||n.forEach((function(t){t.removeEventListener("click",r.toggleCart)})),jQuery("form.woocommerce-cart-form").off("click",".quantity-up",this.qtyUp),jQuery("form.woocommerce-cart-form").off("click",".quantity-down",this.qtyDown)}}])&&SR(n.prototype,r),i&&SR(n,i),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,i}(Yp);function MR(t){return MR="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},MR(t)}function LR(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,FR(r.key),r)}}function DR(t,e,n){return e=BR(e),function(t,e){if(e&&("object"===MR(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,NR()?Reflect.construct(e,n||[],BR(t).constructor):e.apply(t,n))}function NR(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(NR=function(){return!!t})()}function BR(t){return BR=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},BR(t)}function jR(t,e){return jR=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},jR(t,e)}function zR(t,e,n){return(e=FR(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function FR(t){var e=function(t,e){if("object"!=MR(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=MR(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==MR(e)?e:e+""}var UR=function(t){function e(t,n){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),zR(r=DR(this,e,[t,n]),"onNavItemClick",(function(t){r.navigationItems.forEach((function(e){var n;e.el.classList.toggle("selected",e.el===t.currentTarget),e.active=e.el===t.currentTarget,null===(n=e.panel)||void 0===n||n.classList.toggle("active",e.active)}))})),zR(r,"resize",(function(){r.isOpen&&r.close()})),zR(r,"toggleMenu",(function(){r.ctaHeader.classList.toggle("active"),r.isOpen=!r.isOpen,r.isOpen?r.open():r.close()})),zR(r,"open",(function(){var t;return r.element.classList.add("active"),r.headerLastTheme=r.header.dataset.theme,r.header.classList.add("menu-mobile-open"),null===(t=r.tl)||void 0===t||t.kill(),r.tl=ti.timeline(),r.tl.to(r.element,{y:0,ease:"power3.out",duration:1},0),r.tl})),zR(r,"close",(function(){var t;return null===(t=r.tl)||void 0===t||t.kill(),r.tl=ti.timeline(),r.tl.to(r.element,{y:"-100%",ease:"power3.out",duration:.8},0),r.tl.add((function(){r.element.classList.remove("active"),r.ctaHeader.classList.remove("active"),r.header.classList.remove("menu-mobile-open")})),r.tl})),r.header=document.querySelector("#header"),r.logoHeader=r.header.querySelector(".logo"),r.ctaHeader=r.header.querySelector(".cta-menu"),r.navigationItems=Array.from(r.element.querySelectorAll(".navigation-item")).map((function(t,e){return{el:t,id:e,active:0===e,panel:r.element.querySelector('.subpages-wrapper[data-page="'.concat(t.dataset.page,'"]'))}})),r.isOpen=!1,r.tl=null,r.links=r.element.querySelectorAll("a"),r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&jR(t,e)}(e,t),n=e,(r=[{key:"attach",value:function(){var t,e=this;this.viewport.on("resize",this.resize),null===(t=this.ctaHeader)||void 0===t||t.addEventListener("click",this.toggleMenu),this.navigationItems.forEach((function(t){t.panel&&t.el.addEventListener("click",e.onNavItemClick)})),this.links.forEach((function(t){t.addEventListener("click",e.toggleMenu)}))}},{key:"detach",value:function(){var t,e=this;this.viewport.off("resize",this.resize),null===(t=this.ctaHeader)||void 0===t||t.removeEventListener("click",this.toggleMenu),this.navigationItems.forEach((function(t){t.panel&&t.el.removeEventListener("click",e.onNavItemClick)})),this.links.forEach((function(t){t.removeEventListener("click",e.toggleMenu)}))}}])&&LR(n.prototype,r),i&&LR(n,i),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,i}(Yp);function qR(t){return qR="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},qR(t)}function GR(){GR=function(){return e};var t,e={},n=Object.prototype,r=n.hasOwnProperty,i=Object.defineProperty||function(t,e,n){t[e]=n.value},o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",s=o.asyncIterator||"@@asyncIterator",l=o.toStringTag||"@@toStringTag";function u(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,n){return t[e]=n}}function c(t,e,n,r){var o=e&&e.prototype instanceof v?e:v,a=Object.create(o.prototype),s=new P(r||[]);return i(a,"_invoke",{value:T(t,n,s)}),a}function d(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}e.wrap=c;var f="suspendedStart",h="suspendedYield",p="executing",m="completed",g={};function v(){}function y(){}function b(){}var _={};u(_,a,(function(){return this}));var w=Object.getPrototypeOf,A=w&&w(w(R([])));A&&A!==n&&r.call(A,a)&&(_=A);var E=b.prototype=v.prototype=Object.create(_);function x(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function S(t,e){function n(i,o,a,s){var l=d(t[i],t,o);if("throw"!==l.type){var u=l.arg,c=u.value;return c&&"object"==qR(c)&&r.call(c,"__await")?e.resolve(c.__await).then((function(t){n("next",t,a,s)}),(function(t){n("throw",t,a,s)})):e.resolve(c).then((function(t){u.value=t,a(u)}),(function(t){return n("throw",t,a,s)}))}s(l.arg)}var o;i(this,"_invoke",{value:function(t,r){function i(){return new e((function(e,i){n(t,r,e,i)}))}return o=o?o.then(i,i):i()}})}function T(e,n,r){var i=f;return function(o,a){if(i===p)throw Error("Generator is already running");if(i===m){if("throw"===o)throw a;return{value:t,done:!0}}for(r.method=o,r.arg=a;;){var s=r.delegate;if(s){var l=C(s,r);if(l){if(l===g)continue;return l}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(i===f)throw i=m,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);i=p;var u=d(e,n,r);if("normal"===u.type){if(i=r.done?m:h,u.arg===g)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(i=m,r.method="throw",r.arg=u.arg)}}}function C(e,n){var r=n.method,i=e.iterator[r];if(i===t)return n.delegate=null,"throw"===r&&e.iterator.return&&(n.method="return",n.arg=t,C(e,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),g;var o=d(i,e.iterator,n.arg);if("throw"===o.type)return n.method="throw",n.arg=o.arg,n.delegate=null,g;var a=o.arg;return a?a.done?(n[e.resultName]=a.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=t),n.delegate=null,g):a:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,g)}function I(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function k(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function P(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(I,this),this.reset(!0)}function R(e){if(e||""===e){var n=e[a];if(n)return n.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var i=-1,o=function n(){for(;++i<e.length;)if(r.call(e,i))return n.value=e[i],n.done=!1,n;return n.value=t,n.done=!0,n};return o.next=o}}throw new TypeError(qR(e)+" is not iterable")}return y.prototype=b,i(E,"constructor",{value:b,configurable:!0}),i(b,"constructor",{value:y,configurable:!0}),y.displayName=u(b,l,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===y||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,b):(t.__proto__=b,u(t,l,"GeneratorFunction")),t.prototype=Object.create(E),t},e.awrap=function(t){return{__await:t}},x(S.prototype),u(S.prototype,s,(function(){return this})),e.AsyncIterator=S,e.async=function(t,n,r,i,o){void 0===o&&(o=Promise);var a=new S(c(t,n,r,i),o);return e.isGeneratorFunction(n)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},x(E),u(E,l,"Generator"),u(E,a,(function(){return this})),u(E,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),n=[];for(var r in e)n.push(r);return n.reverse(),function t(){for(;n.length;){var r=n.pop();if(r in e)return t.value=r,t.done=!1,t}return t.done=!0,t}},e.values=R,P.prototype={constructor:P,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(k),!e)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function i(r,i){return s.type="throw",s.arg=e,n.next=r,i&&(n.method="next",n.arg=t),!!i}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],s=a.completion;if("root"===a.tryLoc)return i("end");if(a.tryLoc<=this.prev){var l=r.call(a,"catchLoc"),u=r.call(a,"finallyLoc");if(l&&u){if(this.prev<a.catchLoc)return i(a.catchLoc,!0);if(this.prev<a.finallyLoc)return i(a.finallyLoc)}else if(l){if(this.prev<a.catchLoc)return i(a.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return i(a.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=t,a.arg=e,o?(this.method="next",this.next=o.finallyLoc,g):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),g},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),k(n),g}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var i=r.arg;k(n)}return i}}throw Error("illegal catch attempt")},delegateYield:function(e,n,r){return this.delegate={iterator:R(e),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=t),g}},e}function HR(t,e,n,r,i,o,a){try{var s=t[o](a),l=s.value}catch(t){return void n(t)}s.done?e(l):Promise.resolve(l).then(r,i)}function VR(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,$R(r.key),r)}}function QR(t,e,n){return e=YR(e),function(t,e){if(e&&("object"===qR(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,WR()?Reflect.construct(e,n||[],YR(t).constructor):e.apply(t,n))}function WR(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(WR=function(){return!!t})()}function YR(t){return YR=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},YR(t)}function KR(t,e){return KR=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},KR(t,e)}function XR(t,e,n){return(e=$R(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function $R(t){var e=function(t,e){if("object"!=qR(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=qR(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==qR(e)?e:e+""}var ZR=function(t){function e(t,n){var r,i;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),XR(i=QR(this,e,[t,n]),"togglePanel",(function(){var t;i.isOpened=!i.isOpened,i.element.classList.toggle("active",i.isOpened),null===(t=i.tl)||void 0===t||t.kill(),i.tl=ti.timeline(),i.isOpened?(i.bootstrap.smoother.stop(),i.tl.set([i.element,i.overlay],{display:"block"},0),i.tl.add((function(){i.inner.classList.add("active")}),.1),i.tl.to(i.overlay,{opacity:1,ease:"linear",duration:.3},0)):(i.tl.add((function(){i.inner.classList.remove("active")}),0),i.tl.to(i.overlay,{opacity:0,ease:"linear",duration:.3},0),i.tl.add((function(){return i.bootstrap.smoother.start()}),.7),i.tl.set([i.element,i.overlay],{display:"none"},.8))})),XR(i,"inputsVerification",(function(){i.tempFormInputsArray=Array.from(i.element.querySelectorAll("input, textarea")),i.tempFormInputsArray.forEach((function(t){t.checkValidity()?"email"===t.type||"text"===t.type?t.parentNode.classList.remove("error"):t.classList.remove("error"):"email"===t.type||"text"===t.type?t.parentNode.classList.add("error"):t.classList.add("error")})),i.formIsValid=i.tempFormInputsArray.every((function(t){return null!==t.getAttribute("data-ignore-check")||"g-recaptcha-response"===t.name||"h-captcha-response"===t.name||t&&t.value.length>0}))})),XR(i,"onSubmit",(function(t){t.preventDefault(),i.inputsVerification(),i.formIsValid?(console.log("form is valid"),i.isCaptchaActive?hcaptcha.execute(i.hCaptchaContactPanelId,{async:!0}).then((function(t){var e=t.response;e&&(i.hCaptchaValue=e,i.sendMessage())})).catch((function(t){console.log("error while validating captcha")})):i.sendMessage()):console.log("form is not valid")})),XR(i,"sendMessage",function(){var t=function(t){return function(){var e=this,n=arguments;return new Promise((function(r,i){var o=t.apply(e,n);function a(t){HR(o,r,i,a,s,"next",t)}function s(t){HR(o,r,i,a,s,"throw",t)}a(void 0)}))}}(GR().mark((function t(e){var n,r,o;return GR().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r={name:i.element.querySelector('input[name="contact-name"]').value,email:i.element.querySelector('input[name="contact-email"]').value,message:i.element.querySelector("textarea").value,hCaptchaValue:i.hCaptchaValue?i.hCaptchaValue:""},null===(n=i.loader)||void 0===n||n.classList.add("active"),ti.to(i.form,{opacity:.8,duration:.3,ease:"none",pointerEvents:"none"}),t.next=5,fetch(window.location.origin+"/wp-json/contact/send-question",{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)});case 5:o=t.sent,i.loader.classList.remove("active"),o.ok?(i.showConfirmation(),i.formIsValid=!1,i.tempFormInputsArray.forEach((function(t){t.value=""}))):ti.to(i.form,{opacity:1,duration:.3,ease:"none",pointerEvents:"all"});case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),XR(i,"showConfirmation",(function(){var t=ti.timeline();t.to(i.form,{opacity:0,duration:.3,ease:"none"});var e=document.createElement("p");e.classList.add("confirmation-text"),e.appendChild(document.createTextNode("Message sent successfully")),t.add((function(){i.form.innerHTML="",i.form.appendChild(e)})),t.to(i.form,{opacity:1,duration:.6,ease:"none"})})),i.contactBtn=document.querySelector("#footer .contact-btn"),i.inner=i.element.querySelector(".panel"),i.overlay=i.element.querySelector(".contact-overlay"),i.closeCart=i.element.querySelector(".close-btn"),i.form=i.element.querySelector(".contact-form"),i.sendButton=i.element.querySelector(".send-button"),i.isOpened=!1,i.isSubmitted=!1,i.loader=i.element.querySelector(".loader"),i.tempFormInputsArray=[],i.hCaptchaContactPanel=i.element.querySelector(".h-captcha-contact-panel"),i.hCaptchaValue="",i.isCaptchaActive="true"===(null===(r=i.form)||void 0===r?void 0:r.getAttribute("data-is-captcha-active"))&&void 0!==hcaptcha&&null!==hcaptcha,i}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&KR(t,e)}(e,t),n=e,(r=[{key:"attach",value:function(){var t,e;this.hCaptchaContactPanel&&this.isCaptchaActive&&(this.hCaptchaContactPanel.classList.add("h-captcha"),this.hCaptchaContactPanelId=hcaptcha.render(this.hCaptchaContactPanel,{sitekey:"072e84bc-74bc-4b60-837e-1224b03856c6"})),null===(t=this.contactBtn)||void 0===t||t.addEventListener("click",this.togglePanel),this.overlay.addEventListener("click",this.togglePanel),null===(e=this.closeCart)||void 0===e||e.addEventListener("click",this.togglePanel),this.sendButton.addEventListener("click",this.onSubmit)}},{key:"detach",value:function(){var t,e;null===(t=this.contactBtn)||void 0===t||t.removeEventListener("click",this.togglePanel),this.overlay.removeEventListener("click",this.togglePanel),null===(e=this.closeCart)||void 0===e||e.removeEventListener("click",this.togglePanel),this.sendButton.removeEventListener("click",this.onSubmit)}}])&&VR(n.prototype,r),i&&VR(n,i),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,i}(Yp);function JR(t,e){t=ti.utils.toArray(t);var n,r,i,o=(e=e||{}).onChange,a=0,s=ti.timeline({repeat:e.repeat,onUpdate:o&&function(){var e=s.closestIndex();a!==e&&(a=e,o(t[e],e))},paused:e.paused,defaults:{ease:"none"},onReverseComplete:function(){return s.totalTime(s.rawTime()+100*s.duration())}}),l=t.length,u=t[0].offsetLeft,c=[],d=[],f=[],h=[],p=0,m=!1,g=e.center,v=30*(e.speed||1),y=!1===e.snap?function(t){return t}:ti.utils.snap(e.snap||1),b=0,_=!0===g?t[0].parentNode:ti.utils.toArray(g)[0]||t[0].parentNode,w=function(){var r,i=_.getBoundingClientRect();t.forEach((function(t,e){d[e]=parseFloat(ti.getProperty(t,"width","px")),h[e]=y(parseFloat(ti.getProperty(t,"x","px"))/d[e]*100+ti.getProperty(t,"xPercent")),r=t.getBoundingClientRect(),f[e]=r.left-(e?i.right:i.left),i=r})),ti.set(t,{xPercent:function(t){return h[t]}}),n=t[l-1].offsetLeft+h[l-1]/100*d[l-1]-u+f[0]+t[l-1].offsetWidth*ti.getProperty(t[l-1],"scaleX")+(parseFloat(e.paddingRight)||0)},A=function(){b=g?s.duration()*(_.offsetWidth/2)/n:0,g&&c.forEach((function(t,e){c[e]=r(s.labels["label"+e]+s.duration()*d[e]/2/n-b)}))},E=function(t,e,n){for(var r,i=t.length,o=1e10,a=0;i--;)(r=Math.abs(t[i]-e))>n/2&&(r=n-r),r<o&&(o=r,a=i);return a},x=function(){var e,i,o,a,p;for(s.clear(),e=0;e<l;e++)i=t[e],o=h[e]/100*d[e],p=(a=i.offsetLeft+o-u+f[0])+d[e]*ti.getProperty(i,"scaleX"),s.to(i,{xPercent:y((o-p)/d[e]*100),duration:p/v},0).fromTo(i,{xPercent:y((o-p+n)/d[e]*100)},{xPercent:h[e],duration:(o-p+n-o)/v,immediateRender:!1},p/v).add("label"+e,a/v),c[e]=a/v;r=ti.utils.wrap(0,s.duration())},S=function(t){var e=s.progress();s.progress(0,!0),w(),t&&x(),A(),t&&s.draggable?s.time(c[p],!0):s.progress(e,!0)};function T(t,e){e=e||{},Math.abs(t-p)>l/2&&(t+=t>p?-l:l);var n=ti.utils.wrap(0,l,t),o=c[n];return o>s.time()!=t>p&&t!==p&&(o+=s.duration()*(t>p?1:-1)),(o<0||o>s.duration())&&(e.modifiers={time:r}),p=n,e.overwrite=!0,ti.killTweensOf(i),0===e.duration?s.time(r(o)):s.tweenTo(o,e)}if(ti.set(t,{x:0}),w(),x(),A(),window.addEventListener("resize",(function(){return S(!0)})),s.toIndex=function(t,e){return T(t,e)},s.closestIndex=function(t){var e=E(c,s.time(),s.duration());return t&&(p=e,m=!1),e},s.current=function(){return m?s.closestIndex(!0):p},s.next=function(t){return T(s.current()+1,t)},s.previous=function(t){return T(s.current()-1,t)},s.times=c,s.progress(1,!0).progress(0,!0),e.reversed&&(s.vars.onReverseComplete(),s.reverse()),e.draggable&&"function"==typeof Du){i=document.createElement("div");var C,I,k,P,R,O=ti.utils.wrap(0,1),M=function(){return s.progress(O(I+(k.startX-k.x)*C))},L=function(){return s.closestIndex(!0)};void 0===Rc&&console.warn("InertiaPlugin required for momentum-based scrolling and snapping. https://greensock.com/club"),k=Du.create(i,{trigger:t[0].parentNode,type:"x",onPressInit:function(){var t=this.x;ti.killTweensOf(s),I=s.progress(),S(),R=I/-(C=1/n)-t,ti.set(i,{x:I/-C})},onDrag:M,onThrowUpdate:M,overshootTolerance:0,inertia:!0,snap:function(t){if(Math.abs(I/-C-this.x)<10)return P+R;var e=-t*C*s.duration(),n=r(e),i=c[E(c,n,s.duration())]-n;return Math.abs(i)>s.duration()/2&&(i+=i<0?s.duration():-s.duration()),P=(e+i)/s.duration()/-C},onRelease:function(){L(),k.isThrowing&&(m=!0)},onThrowComplete:L})[0],s.draggable=k}return s.closestIndex(!0),a=p,o&&o(t[p],p),s}function tO(t){return tO="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},tO(t)}function eO(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,nO(r.key),r)}}function nO(t){var e=function(t,e){if("object"!=tO(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=tO(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==tO(e)?e:e+""}function rO(t,e,n){return e=oO(e),function(t,e){if(e&&("object"===tO(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,iO()?Reflect.construct(e,n||[],oO(t).constructor):e.apply(t,n))}function iO(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(iO=function(){return!!t})()}function oO(t){return oO=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},oO(t)}function aO(t,e){return aO=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},aO(t,e)}var sO=function(t){function e(t,n){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=rO(this,e,[t,n])).slideshowRef=r.element,r.slideshow=r.element.querySelector(".slides-w"),r.slides=r.slideshow.querySelectorAll(".slide"),r.forwardButton=r.element.querySelector(".arrows-w .right"),r.backwardButton=r.element.querySelector(".arrows-w .left"),r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&aO(t,e)}(e,t),n=e,(r=[{key:"init",value:function(){var t=this;this.activeElement,this._slideshow=JR(this.slides,{paused:!0,draggable:!0,center:!0,onChange:function(e,n){t.activeElement&&t.activeElement.classList.remove("active"),e.classList.add("active"),t.activeElement=e}}),this._slideshow.next({duration:0,ease:"none"})}},{key:"attach",value:function(){var t=this;this.forwardButton.addEventListener("click",(function(){return t._slideshow.next({duration:1.2,ease:"power4.out"})})),this.backwardButton.addEventListener("click",(function(){return t._slideshow.previous({duration:1.2,ease:"power4.out"})}))}},{key:"detach",value:function(){var t=this;this.forwardButton.removeEventListener("click",(function(){return t._slideshow.next({duration:1.2,ease:"power4.out"})})),this.backwardButton.removeEventListener("click",(function(){return t._slideshow.previous({duration:1.2,ease:"power4.out"})}))}}])&&eO(n.prototype,r),i&&eO(n,i),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,i}(Yp);function lO(t){return lO="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},lO(t)}function uO(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,mO(r.key),r)}}function cO(t,e,n){return e=fO(e),function(t,e){if(e&&("object"===lO(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,dO()?Reflect.construct(e,n||[],fO(t).constructor):e.apply(t,n))}function dO(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(dO=function(){return!!t})()}function fO(t){return fO=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},fO(t)}function hO(t,e){return hO=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},hO(t,e)}function pO(t,e,n){return(e=mO(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function mO(t){var e=function(t,e){if("object"!=lO(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=lO(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==lO(e)?e:e+""}var gO=function(t){function e(t,n){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),pO(r=cO(this,e,[t,n]),"getFilters",(function(t){r.filters=t,r.refresh()})),pO(r,"getSortBy",(function(t,e){r.sortBy=t,r.direction=e,r.refresh()})),pO(r,"getPostType",(function(t){r.postType=r.postTypeButtons.find((function(e){return e.element==t.currentTarget})).postType,r.postTypeButtons.forEach((function(t){return t.element.classList.toggle("active",t.postType==r.postType)})),r.filters=[],r.refresh(),r.updateTagSlug(),r.emit("post-type-changed",r.postType)})),pO(r,"updateTagSlug",(function(){"all"==r.postType&&(r.tagSlug="all_tags"),null==r.postType&&(r.tagSlug="all_tags"),"post"==r.postType?r.tagSlug="tags":r.tagSlug=r.postType+"_tags"})),pO(r,"refresh",(function(){var t=document.querySelectorAll(".listing-items");if(t.length>1&&!r.accountSection){var e=ti.timeline();e.to(t,{opacity:0,ease:"none",duration:1.2}),e.add((function(){return t.forEach((function(t){t.classList.contains("empty-listing")||t.remove()}))})),e.add((function(){return r.components.setup()})),e.add((function(){return r.showEmptyListing()}))}else if(1==t.length)r.element.hasAttribute("data-poems-listing")&&r.booksViewEl?r.components.get(t[0]).refresh(r.booksViewEl):r.components.get(t[0]).refresh();else if(r.accountSection&&t.length>1&&"all"!==r.postType){r.components.get(t[1]).paused=!0,r.components.get(t[2]).paused=!0;var n=ti.timeline();n.to(t,{opacity:0,ease:"none",duration:1.2}),n.to(r.postTypeTitles,{opacity:0,ease:"none",duration:1.2},"<"),n.to(r.postTypeSeparators,{opacity:0,ease:"none",duration:1.2},"<"),n.set(r.postTypeTitles,{display:"none"}),n.set(t,{display:"none"}),n.add(r.components.get(t[0]).refresh()),n.set(t[0],{display:""})}else if(r.accountSection&&t.length>1&&"all"==r.postType){r.postType=null,r.components.get(t[1]).paused=!1,r.components.get(t[2]).paused=!1;var i=ti.timeline();i.to(t,{opacity:0,ease:"none",duration:1.2}),i.set(t,{display:"none"}),t.forEach((function(t){i.add(r.components.get(t).refresh())})),i.set(t,{display:""}),i.set(r.postTypeTitles,{display:""}),i.to(r.postTypeTitles,{opacity:1,ease:"none",duration:1.2},"<"),i.to(r.postTypeSeparators,{opacity:1,ease:"none",duration:1.2},"<")}})),pO(r,"showEmptyListing",(function(){var t=document.querySelector(".empty-listing");if(r.showEmptyListing){var e=ti.timeline();r.components.get(t).refresh(),e.set(t,{display:"block"}),e.to(t,{opacity:1,duration:1.6,ease:"none"})}})),r.dropdowns=[],r.filters=[],r.sortBy=[],r.postType="",r.direction="ASC",r.tagSlug=null,r.postTypeTitles=document.querySelectorAll(".post-type-title"),r.postTypeSeparators=document.querySelectorAll(".post-type-separator"),r.booksViewEl=document.querySelector(".books-list-view"),r.accountSection=!1,r.element.hasAttribute("data-account-filter-bar")&&(r.accountSection=!0),r.accountSection&&(r.postTypeButtons=Array.from(r.element.querySelectorAll("[data-post-type]")).map((function(t){return{element:t,postType:t.dataset.postType}}))),r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&hO(t,e)}(e,t),n=e,(r=[{key:"attach",value:function(){var t,e=this;this.bootstrap.components.elements.forEach((function(t){t instanceof IO&&e.dropdowns.push(t)})),null===(t=this.dropdowns)||void 0===t||t.forEach((function(t){t.on("ajax-filters",e.getFilters),t.on("ajax-sort-by",e.getSortBy)})),this.accountSection&&this.postTypeButtons.forEach((function(t){t.element.addEventListener("click",e.getPostType)}))}},{key:"detach",value:function(){var t,e=this;null===(t=this.dropdowns)||void 0===t||t.forEach((function(t){t.off("ajax-filters",e.getFilters),t.off("ajax-sort-by",e.getSortBy)})),this.accountSection&&this.postTypeButtons.forEach((function(t){t.element.removeEventListener("click",e.getPostType)}))}}])&&uO(n.prototype,r),i&&uO(n,i),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,i}(Yp);function vO(t){return vO="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},vO(t)}function yO(){yO=function(){return e};var t,e={},n=Object.prototype,r=n.hasOwnProperty,i=Object.defineProperty||function(t,e,n){t[e]=n.value},o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",s=o.asyncIterator||"@@asyncIterator",l=o.toStringTag||"@@toStringTag";function u(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,n){return t[e]=n}}function c(t,e,n,r){var o=e&&e.prototype instanceof v?e:v,a=Object.create(o.prototype),s=new P(r||[]);return i(a,"_invoke",{value:T(t,n,s)}),a}function d(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}e.wrap=c;var f="suspendedStart",h="suspendedYield",p="executing",m="completed",g={};function v(){}function y(){}function b(){}var _={};u(_,a,(function(){return this}));var w=Object.getPrototypeOf,A=w&&w(w(R([])));A&&A!==n&&r.call(A,a)&&(_=A);var E=b.prototype=v.prototype=Object.create(_);function x(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function S(t,e){function n(i,o,a,s){var l=d(t[i],t,o);if("throw"!==l.type){var u=l.arg,c=u.value;return c&&"object"==vO(c)&&r.call(c,"__await")?e.resolve(c.__await).then((function(t){n("next",t,a,s)}),(function(t){n("throw",t,a,s)})):e.resolve(c).then((function(t){u.value=t,a(u)}),(function(t){return n("throw",t,a,s)}))}s(l.arg)}var o;i(this,"_invoke",{value:function(t,r){function i(){return new e((function(e,i){n(t,r,e,i)}))}return o=o?o.then(i,i):i()}})}function T(e,n,r){var i=f;return function(o,a){if(i===p)throw Error("Generator is already running");if(i===m){if("throw"===o)throw a;return{value:t,done:!0}}for(r.method=o,r.arg=a;;){var s=r.delegate;if(s){var l=C(s,r);if(l){if(l===g)continue;return l}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(i===f)throw i=m,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);i=p;var u=d(e,n,r);if("normal"===u.type){if(i=r.done?m:h,u.arg===g)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(i=m,r.method="throw",r.arg=u.arg)}}}function C(e,n){var r=n.method,i=e.iterator[r];if(i===t)return n.delegate=null,"throw"===r&&e.iterator.return&&(n.method="return",n.arg=t,C(e,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),g;var o=d(i,e.iterator,n.arg);if("throw"===o.type)return n.method="throw",n.arg=o.arg,n.delegate=null,g;var a=o.arg;return a?a.done?(n[e.resultName]=a.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=t),n.delegate=null,g):a:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,g)}function I(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function k(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function P(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(I,this),this.reset(!0)}function R(e){if(e||""===e){var n=e[a];if(n)return n.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var i=-1,o=function n(){for(;++i<e.length;)if(r.call(e,i))return n.value=e[i],n.done=!1,n;return n.value=t,n.done=!0,n};return o.next=o}}throw new TypeError(vO(e)+" is not iterable")}return y.prototype=b,i(E,"constructor",{value:b,configurable:!0}),i(b,"constructor",{value:y,configurable:!0}),y.displayName=u(b,l,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===y||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,b):(t.__proto__=b,u(t,l,"GeneratorFunction")),t.prototype=Object.create(E),t},e.awrap=function(t){return{__await:t}},x(S.prototype),u(S.prototype,s,(function(){return this})),e.AsyncIterator=S,e.async=function(t,n,r,i,o){void 0===o&&(o=Promise);var a=new S(c(t,n,r,i),o);return e.isGeneratorFunction(n)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},x(E),u(E,l,"Generator"),u(E,a,(function(){return this})),u(E,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),n=[];for(var r in e)n.push(r);return n.reverse(),function t(){for(;n.length;){var r=n.pop();if(r in e)return t.value=r,t.done=!1,t}return t.done=!0,t}},e.values=R,P.prototype={constructor:P,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(k),!e)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function i(r,i){return s.type="throw",s.arg=e,n.next=r,i&&(n.method="next",n.arg=t),!!i}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],s=a.completion;if("root"===a.tryLoc)return i("end");if(a.tryLoc<=this.prev){var l=r.call(a,"catchLoc"),u=r.call(a,"finallyLoc");if(l&&u){if(this.prev<a.catchLoc)return i(a.catchLoc,!0);if(this.prev<a.finallyLoc)return i(a.finallyLoc)}else if(l){if(this.prev<a.catchLoc)return i(a.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return i(a.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=t,a.arg=e,o?(this.method="next",this.next=o.finallyLoc,g):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),g},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),k(n),g}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var i=r.arg;k(n)}return i}}throw Error("illegal catch attempt")},delegateYield:function(e,n,r){return this.delegate={iterator:R(e),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=t),g}},e}function bO(t,e,n,r,i,o,a){try{var s=t[o](a),l=s.value}catch(t){return void n(t)}s.done?e(l):Promise.resolve(l).then(r,i)}function _O(t){return function(){var e=this,n=arguments;return new Promise((function(r,i){var o=t.apply(e,n);function a(t){bO(o,r,i,a,s,"next",t)}function s(t){bO(o,r,i,a,s,"throw",t)}a(void 0)}))}}function wO(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,CO(r.key),r)}}function AO(t,e,n){return e=xO(e),function(t,e){if(e&&("object"===vO(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,EO()?Reflect.construct(e,n||[],xO(t).constructor):e.apply(t,n))}function EO(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(EO=function(){return!!t})()}function xO(t){return xO=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},xO(t)}function SO(t,e){return SO=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},SO(t,e)}function TO(t,e,n){return(e=CO(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function CO(t){var e=function(t,e){if("object"!=vO(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=vO(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==vO(e)?e:e+""}var IO=function(t){function e(t,n){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),TO(r=AO(this,e,[t,n]),"toggleDropdown",(function(){r.open?r.closeDropdown():r.openDropdown()})),TO(r,"openDropdown",(function(){var t;r.open||(r.mainButton.classList.toggle("active"),r.emit("open-dropdown"),r.dropdown.style.zIndex=6,null===(t=r.tl)||void 0===t||t.kill(),r.tl=ti.timeline(),r.tl.set(r.bgCover,{display:"block"},0),r.tl.set(r.dropdown,{display:"flex"},0),r.tl.to(r.dropdown,{height:"auto",ease:"power2.out",duration:.7},0),r.tl.set(r.bgCover,{pointerEvents:"all"},0),r.tl.to(r.bgCover,{alpha:.4,ease:"none",duration:.5},0),r.tl.to(r.dropdownText,{opacity:1,duration:.7,ease:"power2.out"},0),r.tl.to(r.dropdownItems,{opacity:1,duration:.7,ease:"power3.out",stagger:.02},0),r.tl.to(r.dropdownClose,{opacity:1,duration:.7,ease:"power2.out"},0),r.open=!r.open)})),TO(r,"closeDropdown",(function(){var t;r.open&&(r.mainButton.classList.toggle("active"),r.dropdown.style.zIndex=5,null===(t=r.tl)||void 0===t||t.kill(),r.tl=ti.timeline(),r.tl.to(r.dropdown,{height:0,ease:"power2.out",duration:1.2},0),r.tl.set(r.bgCover,{pointerEvents:"none"},0),r.tl.to(r.bgCover,{alpha:0,ease:"none",duration:.5},0),r.tl.to(r.dropdownText,{opacity:0,duration:.7,ease:"power2.out"},0),r.tl.to(r.dropdownItems,{opacity:0,duration:.7,ease:"power3.out",stagger:.02},0),r.tl.to(r.dropdownClose,{opacity:0,duration:.7,ease:"power2.out"},0),r.tl.set(r.dropdown,{display:"none"}),r.tl.set(r.bgCover,{display:"none"}),r.open=!r.open)})),TO(r,"toggleOption",(function(t){var e=t.currentTarget,n=t.currentTarget.dataset.slug,i=t.currentTarget.dataset.direction;"filters"==e.dataset.type?(e.classList.toggle("active"),r.options.includes(n)?r.options.splice(r.options.indexOf(n),1):r.options.push(t.currentTarget.dataset.slug),r.emit("ajax-filters",r.options)):"sort-by"==e.dataset.type&&(r.dropdownItems.forEach((function(t){t.classList.remove("active")})),e.classList.add("active"),r.emit("ajax-sort-by",n,i))})),TO(r,"changeFilterButtons",function(){var t=_O(yO().mark((function t(e){var n,i,o,a;return yO().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if("filters"===r.dataType){t.next=2;break}return t.abrupt("return");case 2:return r.changeDropdownText(),r.options=[],"all_tags"==r.filterBar.tagSlug?r.mainButton.classList.add("disabled"):r.mainButton.classList.remove("disabled"),t.next=7,r.ajaxRequest();case 7:if(o=t.sent,null===(n=r.changeButtonsTl)||void 0===n||null===(i=n.kill)||void 0===i||i.call(n),r.changeButtonsTl=ti.timeline(),r.footer&&r.changeButtonsTl.to(r.footer,{opacity:0,ease:"none",duration:.4}),!r.searchFiltersW){t.next=23;break}if(ti.to(window,{scrollTo:0,duration:.6,ease:"power4.out"}),a=document.querySelector(".search-section .second-separator"),r.changeButtonsTl.to(r.searchFiltersW,{opacity:0,ease:"none",duration:.4},0),r.changeButtonsTl.set(r.searchFiltersW,{display:"none"}),a&&a.classList.remove("visible"),r.changeButtonsTl.add((function(){r.searchFiltersW.innerHTML=o.split("white").join("black"),r.searchFiltersW.querySelectorAll(".rect-button").forEach((function(t){t.addEventListener("click",r.toggleOption),t.dataset.type="filters"}))}),.31),r.filterBar.postType){t.next=20;break}return t.abrupt("return");case 20:r.changeButtonsTl.set(r.searchFiltersW,{display:""},.4),r.changeButtonsTl.to(r.searchFiltersW,{opacity:1,ease:"none",duration:1.2}),r.changeButtonsTl.add((function(){a&&o.length>3&&a.classList.add("visible")}),"<");case 23:r.footer&&r.changeButtonsTl.to(r.footer,{opacity:1,ease:"none",duration:1.2},3),r.dropdownItems.forEach((function(t){t.removeEventListener("click",r.toggleOption),t.remove()})),r.dropdownItemsW.innerHTML=o,r.dropdownItems=r.dropdown.querySelectorAll(".rect-button"),r.dropdownItems.forEach((function(t){t.addEventListener("click",r.toggleOption),t.dataset.type="filters"}));case 28:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),TO(r,"changeDropdownText",(function(){switch(r.filterBar.tagSlug){case"tags":r.dropdownText.innerHTML="Select one or more themes";break;case"courses_tags":r.dropdownText.innerHTML="Select one or more dates";break;case"talks_tags":r.dropdownText.innerHTML="Select one or more tags"}})),TO(r,"ajaxRequest",_O(yO().mark((function t(){return yO().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,OP.call(ADMIN_AJAX_URL+"?action=david_loadmore_filters","text",r.filterBar.tagSlug);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})))),r.mainButton=r.element.querySelector(".main-button"),r.dropdown=r.element.querySelector(".dropdown-content"),r.closeButton=r.element.querySelector(".dropdown-close"),r.dropdownText=r.dropdown.querySelector(".dropdown-text"),r.dropdownClose=r.dropdown.querySelector(".dropdown-close"),r.dropdownItems=r.dropdown.querySelectorAll(".dropdown-btn"),r.dropdownItemsW=r.dropdown.querySelector(".buttons-w"),r.footer=document.querySelector("#footer"),r.bgCover=r.element.querySelector(".bg-cover-dropdown"),r.options=[],r.otherDropdowns=[],r.open=!1,r.dataType=r.dropdown.querySelector("[data-slug]").dataset.type,r.searchFiltersW=document.querySelector(".search-section .search-filters"),r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&SO(t,e)}(e,t),n=e,(r=[{key:"attach",value:function(){var t,e=this;this.bootstrap.components.elements.forEach((function(t){t instanceof gO&&(e.filterBar=t)})),this.filterBar.on("post-type-changed",this.changeFilterButtons),window.addEventListener("wheel",this.closeDropdown),this.mainButton.addEventListener("click",this.toggleDropdown),this.closeButton.addEventListener("click",this.toggleDropdown),this.dropdownItems.forEach((function(t){t.addEventListener("click",e.toggleOption)})),this.bootstrap.components.elements.forEach((function(t){t.constructor==e.bootstrap.components.registry.get("DropdownButton")&&t.dropdown!==e.dropdown&&e.otherDropdowns.push(t)})),null===(t=this.otherDropdowns)||void 0===t||t.forEach((function(t){t.on("open-dropdown",e.closeDropdown)})),this.bgCover.addEventListener("click",this.closeDropdown)}},{key:"detach",value:function(){var t,e=this;this.filterBar.off("post-type-changed",this.changeFilterButtons),window.removeEventListener("wheel",this.closeDropdown),this.mainButton.removeEventListener("click",this.toggleDropdown),this.closeButton.removeEventListener("click",this.toggleDropdown),this.dropdownItems.forEach((function(t){t.removeEventListener("click",e.toggleOption)})),null===(t=this.otherDropdowns)||void 0===t||t.forEach((function(t){t.off("open-dropdown",e.closeDropdown)})),this.bgCover.removeEventListener("click",this.closeDropdown)}}])&&wO(n.prototype,r),i&&wO(n,i),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,i}(Yp);function kO(t){return kO="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},kO(t)}function PO(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,DO(r.key),r)}}function RO(t,e,n){return e=MO(e),function(t,e){if(e&&("object"===kO(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,OO()?Reflect.construct(e,n||[],MO(t).constructor):e.apply(t,n))}function OO(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(OO=function(){return!!t})()}function MO(t){return MO=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},MO(t)}function LO(t,e){return LO=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},LO(t,e)}function DO(t){var e=function(t,e){if("object"!=kO(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=kO(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==kO(e)?e:e+""}var NO=function(t){function e(t,n){var r,i,o,a;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),r=RO(this,e,[t,n]),i=r,a=function(){var t=0;r.slides.forEach((function(e){t+=e.element.getBoundingClientRect().width})),r.slideshow.getBoundingClientRect().width<t?(r.forwardButton.style.display="",r.backwardButton.style.display=""):(r.forwardButton.style.display="none",r.backwardButton.style.display="none")},(o=DO(o="resize"))in i?Object.defineProperty(i,o,{value:a,enumerable:!0,configurable:!0,writable:!0}):i[o]=a,r.slideshowRef=r.element,r.slideshow=r.element.querySelector(".slides-w"),r.slides=Array.from(r.slideshow.querySelectorAll(".slide")).map((function(t,e){return{element:t,id:e,active:!1}})),r._slideshow=new bP(r.slideshow,{slides:".slide",snapping:!0,reference:r.slideshowRef,inputOptions:{wheel:!1}}),r.forwardButton=r.element.querySelector(".arrows-w .right"),r.backwardButton=r.element.querySelector(".arrows-w .left"),r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&LO(t,e)}(e,t),n=e,(r=[{key:"attach",value:function(){this._slideshow.attach(),this.forwardButton.addEventListener("click",this._slideshow.next),this.backwardButton.addEventListener("click",this._slideshow.previous),this.slideshow.addEventListener("resize",this.resize),window.addEventListener("resize",this.resize),this.resize()}},{key:"detach",value:function(){this._slideshow.detach(),this.forwardButton.addEventListener("click",this._slideshow.next),this.backwardButton.addEventListener("click",this._slideshow.previous),this.slideshow.addEventListener("resize",this.resize),window.addEventListener("resize",this.resize)}}])&&PO(n.prototype,r),i&&PO(n,i),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,i}(Yp);function BO(t){return BO="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},BO(t)}function jO(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,HO(r.key),r)}}function zO(t,e,n){return e=UO(e),function(t,e){if(e&&("object"===BO(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,FO()?Reflect.construct(e,n||[],UO(t).constructor):e.apply(t,n))}function FO(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(FO=function(){return!!t})()}function UO(t){return UO=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},UO(t)}function qO(t,e){return qO=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},qO(t,e)}function GO(t,e,n){return(e=HO(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function HO(t){var e=function(t,e){if("object"!=BO(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=BO(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==BO(e)?e:e+""}var VO=function(t){function e(t,n){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),GO(r=zO(this,e,[t,n]),"openDropdown",(function(){var t;r.open||(r.openedFirstTime||ti.set(r.bgCover,{alpha:0}),r.openedFirstTime=!0,null===(t=r.tl)||void 0===t||t.kill(),r.tl=ti.timeline(),r.tl.set(r.bgCover,{display:"block"},0),r.tl.set(r.dropdown,{display:"flex"},0),r.tl.to(r.dropdown,{height:"auto",ease:"power2.out",duration:.6},0),r.tl.set(r.bgCover,{pointerEvents:"all"},0),r.tl.to(r.bgCover,{alpha:.4,ease:"none",duration:.5},0),r.open=!r.open)})),GO(r,"closeDropdown",(function(){var t;r.open&&(null===(t=r.tl)||void 0===t||t.kill(),r.tl=ti.timeline(),r.tl.to(r.dropdown,{height:0,ease:"power2.out",duration:.6},0),r.tl.set(r.bgCover,{pointerEvents:"none"},0),r.tl.to(r.bgCover,{alpha:0,ease:"none",duration:.5},0),r.tl.set(r.dropdown,{display:"none"}),r.tl.set(r.bgCover,{display:"none"}),r.open=!r.open)})),r.dropdown=document.querySelector(".mobile-bar"),r.bgCover=document.querySelector(".mobile-bg-cover"),r.filtersButton=r.element.querySelector(".magnifying-glass"),r.cross=r.dropdown.querySelector(".close-w"),r.open=!1,r.openedFirstTime=!1,r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&qO(t,e)}(e,t),n=e,(r=[{key:"init",value:function(){}},{key:"attach",value:function(){this.filtersButton.addEventListener("click",this.openDropdown),this.cross.addEventListener("click",this.closeDropdown),this.bgCover.addEventListener("click",this.closeDropdown)}},{key:"detach",value:function(){this.filtersButton.removeEventListener("click",this.openDropdown),this.cross.removeEventListener("click",this.closeDropdown),this.bgCover.removeEventListener("click",this.closeDropdown)}}])&&jO(n.prototype,r),i&&jO(n,i),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,i}(Yp);function QO(t){return QO="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},QO(t)}function WO(){WO=function(){return e};var t,e={},n=Object.prototype,r=n.hasOwnProperty,i=Object.defineProperty||function(t,e,n){t[e]=n.value},o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",s=o.asyncIterator||"@@asyncIterator",l=o.toStringTag||"@@toStringTag";function u(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,n){return t[e]=n}}function c(t,e,n,r){var o=e&&e.prototype instanceof v?e:v,a=Object.create(o.prototype),s=new P(r||[]);return i(a,"_invoke",{value:T(t,n,s)}),a}function d(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}e.wrap=c;var f="suspendedStart",h="suspendedYield",p="executing",m="completed",g={};function v(){}function y(){}function b(){}var _={};u(_,a,(function(){return this}));var w=Object.getPrototypeOf,A=w&&w(w(R([])));A&&A!==n&&r.call(A,a)&&(_=A);var E=b.prototype=v.prototype=Object.create(_);function x(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function S(t,e){function n(i,o,a,s){var l=d(t[i],t,o);if("throw"!==l.type){var u=l.arg,c=u.value;return c&&"object"==QO(c)&&r.call(c,"__await")?e.resolve(c.__await).then((function(t){n("next",t,a,s)}),(function(t){n("throw",t,a,s)})):e.resolve(c).then((function(t){u.value=t,a(u)}),(function(t){return n("throw",t,a,s)}))}s(l.arg)}var o;i(this,"_invoke",{value:function(t,r){function i(){return new e((function(e,i){n(t,r,e,i)}))}return o=o?o.then(i,i):i()}})}function T(e,n,r){var i=f;return function(o,a){if(i===p)throw Error("Generator is already running");if(i===m){if("throw"===o)throw a;return{value:t,done:!0}}for(r.method=o,r.arg=a;;){var s=r.delegate;if(s){var l=C(s,r);if(l){if(l===g)continue;return l}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(i===f)throw i=m,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);i=p;var u=d(e,n,r);if("normal"===u.type){if(i=r.done?m:h,u.arg===g)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(i=m,r.method="throw",r.arg=u.arg)}}}function C(e,n){var r=n.method,i=e.iterator[r];if(i===t)return n.delegate=null,"throw"===r&&e.iterator.return&&(n.method="return",n.arg=t,C(e,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),g;var o=d(i,e.iterator,n.arg);if("throw"===o.type)return n.method="throw",n.arg=o.arg,n.delegate=null,g;var a=o.arg;return a?a.done?(n[e.resultName]=a.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=t),n.delegate=null,g):a:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,g)}function I(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function k(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function P(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(I,this),this.reset(!0)}function R(e){if(e||""===e){var n=e[a];if(n)return n.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var i=-1,o=function n(){for(;++i<e.length;)if(r.call(e,i))return n.value=e[i],n.done=!1,n;return n.value=t,n.done=!0,n};return o.next=o}}throw new TypeError(QO(e)+" is not iterable")}return y.prototype=b,i(E,"constructor",{value:b,configurable:!0}),i(b,"constructor",{value:y,configurable:!0}),y.displayName=u(b,l,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===y||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,b):(t.__proto__=b,u(t,l,"GeneratorFunction")),t.prototype=Object.create(E),t},e.awrap=function(t){return{__await:t}},x(S.prototype),u(S.prototype,s,(function(){return this})),e.AsyncIterator=S,e.async=function(t,n,r,i,o){void 0===o&&(o=Promise);var a=new S(c(t,n,r,i),o);return e.isGeneratorFunction(n)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},x(E),u(E,l,"Generator"),u(E,a,(function(){return this})),u(E,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),n=[];for(var r in e)n.push(r);return n.reverse(),function t(){for(;n.length;){var r=n.pop();if(r in e)return t.value=r,t.done=!1,t}return t.done=!0,t}},e.values=R,P.prototype={constructor:P,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(k),!e)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function i(r,i){return s.type="throw",s.arg=e,n.next=r,i&&(n.method="next",n.arg=t),!!i}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],s=a.completion;if("root"===a.tryLoc)return i("end");if(a.tryLoc<=this.prev){var l=r.call(a,"catchLoc"),u=r.call(a,"finallyLoc");if(l&&u){if(this.prev<a.catchLoc)return i(a.catchLoc,!0);if(this.prev<a.finallyLoc)return i(a.finallyLoc)}else if(l){if(this.prev<a.catchLoc)return i(a.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return i(a.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=t,a.arg=e,o?(this.method="next",this.next=o.finallyLoc,g):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),g},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),k(n),g}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var i=r.arg;k(n)}return i}}throw Error("illegal catch attempt")},delegateYield:function(e,n,r){return this.delegate={iterator:R(e),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=t),g}},e}function YO(t,e,n,r,i,o,a){try{var s=t[o](a),l=s.value}catch(t){return void n(t)}s.done?e(l):Promise.resolve(l).then(r,i)}function KO(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,tM(r.key),r)}}function XO(t,e,n){return e=ZO(e),function(t,e){if(e&&("object"===QO(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,$O()?Reflect.construct(e,n||[],ZO(t).constructor):e.apply(t,n))}function $O(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return($O=function(){return!!t})()}function ZO(t){return ZO=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},ZO(t)}function JO(t,e){return JO=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},JO(t,e)}function tM(t){var e=function(t,e){if("object"!=QO(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=QO(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==QO(e)?e:e+""}var eM=function(t){function e(t,n){var r,i,o,a;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),r=XO(this,e,[t,n]),i=r,o="toggleLike",a=function(){var t=function(t){return function(){var e=this,n=arguments;return new Promise((function(r,i){var o=t.apply(e,n);function a(t){YO(o,r,i,a,s,"next",t)}function s(t){YO(o,r,i,a,s,"throw",t)}a(void 0)}))}}(WO().mark((function t(e){var n;return WO().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.preventDefault(),e.stopPropagation(),e.stopImmediatePropagation(),t.next=5,r.bootstrap.toggleLike(r.postID);case 5:n=t.sent,r.likeButton.classList.toggle("liked",n.liked);case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),(o=tM(o))in i?Object.defineProperty(i,o,{value:a,enumerable:!0,configurable:!0,writable:!0}):i[o]=a,r.likeButton=r.element.querySelector(".like-w"),r.postID=r.element.dataset.postId,r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&JO(t,e)}(e,t),n=e,(r=[{key:"attach",value:function(){this.likeButton&&this.likeButton.addEventListener("click",this.toggleLike)}},{key:"detach",value:function(){this.likeButton&&this.likeButton.removeEventListener("click",this.toggleLike)}}])&&KO(n.prototype,r),i&&KO(n,i),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,i}(Yp),nM=n(8287).hp,rM=n(5606),iM={7267:function(t,e){e.byteLength=function(t){var e=s(t),n=e[0],r=e[1];return 3*(n+r)/4-r},e.toByteArray=function(t){var e,n,o=s(t),a=o[0],l=o[1],u=new i(function(t,e,n){return 3*(e+n)/4-n}(0,a,l)),c=0,d=l>0?a-4:a;for(n=0;n<d;n+=4)e=r[t.charCodeAt(n)]<<18|r[t.charCodeAt(n+1)]<<12|r[t.charCodeAt(n+2)]<<6|r[t.charCodeAt(n+3)],u[c++]=e>>16&255,u[c++]=e>>8&255,u[c++]=255&e;return 2===l&&(e=r[t.charCodeAt(n)]<<2|r[t.charCodeAt(n+1)]>>4,u[c++]=255&e),1===l&&(e=r[t.charCodeAt(n)]<<10|r[t.charCodeAt(n+1)]<<4|r[t.charCodeAt(n+2)]>>2,u[c++]=e>>8&255,u[c++]=255&e),u},e.fromByteArray=function(t){for(var e,r=t.length,i=r%3,o=[],a=16383,s=0,u=r-i;s<u;s+=a)o.push(l(t,s,s+a>u?u:s+a));return 1===i?(e=t[r-1],o.push(n[e>>2]+n[e<<4&63]+"==")):2===i&&(e=(t[r-2]<<8)+t[r-1],o.push(n[e>>10]+n[e>>4&63]+n[e<<2&63]+"=")),o.join("")};for(var n=[],r=[],i="undefined"!=typeof Uint8Array?Uint8Array:Array,o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",a=0;a<64;++a)n[a]=o[a],r[o.charCodeAt(a)]=a;function s(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=t.indexOf("=");return-1===n&&(n=e),[n,n===e?0:4-n%4]}function l(t,e,r){for(var i,o,a=[],s=e;s<r;s+=3)i=(t[s]<<16&16711680)+(t[s+1]<<8&65280)+(255&t[s+2]),a.push(n[(o=i)>>18&63]+n[o>>12&63]+n[o>>6&63]+n[63&o]);return a.join("")}r["-".charCodeAt(0)]=62,r["_".charCodeAt(0)]=63},44:function(t,e,n){var r=n(7267),i=n(7986),o="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):null;e.Buffer=l,e.SlowBuffer=function(t){return+t!=t&&(t=0),l.alloc(+t)},e.INSPECT_MAX_BYTES=50;var a=2147483647;function s(t){if(t>a)throw new RangeError('The value "'+t+'" is invalid for option "size"');var e=new Uint8Array(t);return Object.setPrototypeOf(e,l.prototype),e}function l(t,e,n){if("number"==typeof t){if("string"==typeof e)throw new TypeError('The "string" argument must be of type string. Received type number');return d(t)}return u(t,e,n)}function u(t,e,n){if("string"==typeof t)return function(t,e){if("string"==typeof e&&""!==e||(e="utf8"),!l.isEncoding(e))throw new TypeError("Unknown encoding: "+e);var n=0|m(t,e),r=s(n),i=r.write(t,e);return i!==n&&(r=r.slice(0,i)),r}(t,e);if(ArrayBuffer.isView(t))return function(t){if(U(t,Uint8Array)){var e=new Uint8Array(t);return h(e.buffer,e.byteOffset,e.byteLength)}return f(t)}(t);if(null==t)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof t);if(U(t,ArrayBuffer)||t&&U(t.buffer,ArrayBuffer))return h(t,e,n);if("undefined"!=typeof SharedArrayBuffer&&(U(t,SharedArrayBuffer)||t&&U(t.buffer,SharedArrayBuffer)))return h(t,e,n);if("number"==typeof t)throw new TypeError('The "value" argument must not be of type number. Received type number');var r=t.valueOf&&t.valueOf();if(null!=r&&r!==t)return l.from(r,e,n);var i=function(t){if(l.isBuffer(t)){var e=0|p(t.length),n=s(e);return 0===n.length||t.copy(n,0,0,e),n}return void 0!==t.length?"number"!=typeof t.length||q(t.length)?s(0):f(t):"Buffer"===t.type&&Array.isArray(t.data)?f(t.data):void 0}(t);if(i)return i;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof t[Symbol.toPrimitive])return l.from(t[Symbol.toPrimitive]("string"),e,n);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof t)}function c(t){if("number"!=typeof t)throw new TypeError('"size" argument must be of type number');if(t<0)throw new RangeError('The value "'+t+'" is invalid for option "size"')}function d(t){return c(t),s(t<0?0:0|p(t))}function f(t){for(var e=t.length<0?0:0|p(t.length),n=s(e),r=0;r<e;r+=1)n[r]=255&t[r];return n}function h(t,e,n){if(e<0||t.byteLength<e)throw new RangeError('"offset" is outside of buffer bounds');if(t.byteLength<e+(n||0))throw new RangeError('"length" is outside of buffer bounds');var r;return r=void 0===e&&void 0===n?new Uint8Array(t):void 0===n?new Uint8Array(t,e):new Uint8Array(t,e,n),Object.setPrototypeOf(r,l.prototype),r}function p(t){if(t>=a)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+a.toString(16)+" bytes");return 0|t}function m(t,e){if(l.isBuffer(t))return t.length;if(ArrayBuffer.isView(t)||U(t,ArrayBuffer))return t.byteLength;if("string"!=typeof t)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof t);var n=t.length,r=arguments.length>2&&!0===arguments[2];if(!r&&0===n)return 0;for(var i=!1;;)switch(e){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":return j(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return z(t).length;default:if(i)return r?-1:j(t).length;e=(""+e).toLowerCase(),i=!0}}function g(t,e,n){var r=!1;if((void 0===e||e<0)&&(e=0),e>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if((n>>>=0)<=(e>>>=0))return"";for(t||(t="utf8");;)switch(t){case"hex":return P(this,e,n);case"utf8":case"utf-8":return T(this,e,n);case"ascii":return I(this,e,n);case"latin1":case"binary":return k(this,e,n);case"base64":return S(this,e,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return R(this,e,n);default:if(r)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),r=!0}}function v(t,e,n){var r=t[e];t[e]=t[n],t[n]=r}function y(t,e,n,r,i){if(0===t.length)return-1;if("string"==typeof n?(r=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),q(n=+n)&&(n=i?0:t.length-1),n<0&&(n=t.length+n),n>=t.length){if(i)return-1;n=t.length-1}else if(n<0){if(!i)return-1;n=0}if("string"==typeof e&&(e=l.from(e,r)),l.isBuffer(e))return 0===e.length?-1:b(t,e,n,r,i);if("number"==typeof e)return e&=255,"function"==typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(t,e,n):Uint8Array.prototype.lastIndexOf.call(t,e,n):b(t,[e],n,r,i);throw new TypeError("val must be string, number or Buffer")}function b(t,e,n,r,i){var o,a=1,s=t.length,l=e.length;if(void 0!==r&&("ucs2"===(r=String(r).toLowerCase())||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(t.length<2||e.length<2)return-1;a=2,s/=2,l/=2,n/=2}function u(t,e){return 1===a?t[e]:t.readUInt16BE(e*a)}if(i){var c=-1;for(o=n;o<s;o++)if(u(t,o)===u(e,-1===c?0:o-c)){if(-1===c&&(c=o),o-c+1===l)return c*a}else-1!==c&&(o-=o-c),c=-1}else for(n+l>s&&(n=s-l),o=n;o>=0;o--){for(var d=!0,f=0;f<l;f++)if(u(t,o+f)!==u(e,f)){d=!1;break}if(d)return o}return-1}function _(t,e,n,r){n=Number(n)||0;var i=t.length-n;r?(r=Number(r))>i&&(r=i):r=i;var o=e.length;r>o/2&&(r=o/2);for(var a=0;a<r;++a){var s=parseInt(e.substr(2*a,2),16);if(q(s))return a;t[n+a]=s}return a}function w(t,e,n,r){return F(j(e,t.length-n),t,n,r)}function A(t,e,n,r){return F(function(t){for(var e=[],n=0;n<t.length;++n)e.push(255&t.charCodeAt(n));return e}(e),t,n,r)}function E(t,e,n,r){return F(z(e),t,n,r)}function x(t,e,n,r){return F(function(t,e){for(var n,r,i,o=[],a=0;a<t.length&&!((e-=2)<0);++a)r=(n=t.charCodeAt(a))>>8,i=n%256,o.push(i),o.push(r);return o}(e,t.length-n),t,n,r)}function S(t,e,n){return 0===e&&n===t.length?r.fromByteArray(t):r.fromByteArray(t.slice(e,n))}function T(t,e,n){n=Math.min(t.length,n);for(var r=[],i=e;i<n;){var o,a,s,l,u=t[i],c=null,d=u>239?4:u>223?3:u>191?2:1;if(i+d<=n)switch(d){case 1:u<128&&(c=u);break;case 2:128==(192&(o=t[i+1]))&&(l=(31&u)<<6|63&o)>127&&(c=l);break;case 3:o=t[i+1],a=t[i+2],128==(192&o)&&128==(192&a)&&(l=(15&u)<<12|(63&o)<<6|63&a)>2047&&(l<55296||l>57343)&&(c=l);break;case 4:o=t[i+1],a=t[i+2],s=t[i+3],128==(192&o)&&128==(192&a)&&128==(192&s)&&(l=(15&u)<<18|(63&o)<<12|(63&a)<<6|63&s)>65535&&l<1114112&&(c=l)}null===c?(c=65533,d=1):c>65535&&(c-=65536,r.push(c>>>10&1023|55296),c=56320|1023&c),r.push(c),i+=d}return function(t){var e=t.length;if(e<=C)return String.fromCharCode.apply(String,t);for(var n="",r=0;r<e;)n+=String.fromCharCode.apply(String,t.slice(r,r+=C));return n}(r)}e.kMaxLength=a,l.TYPED_ARRAY_SUPPORT=function(){try{var t=new Uint8Array(1),e={foo:function(){return 42}};return Object.setPrototypeOf(e,Uint8Array.prototype),Object.setPrototypeOf(t,e),42===t.foo()}catch(t){return!1}}(),l.TYPED_ARRAY_SUPPORT||"undefined"==typeof console||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(l.prototype,"parent",{enumerable:!0,get:function(){if(l.isBuffer(this))return this.buffer}}),Object.defineProperty(l.prototype,"offset",{enumerable:!0,get:function(){if(l.isBuffer(this))return this.byteOffset}}),l.poolSize=8192,l.from=function(t,e,n){return u(t,e,n)},Object.setPrototypeOf(l.prototype,Uint8Array.prototype),Object.setPrototypeOf(l,Uint8Array),l.alloc=function(t,e,n){return function(t,e,n){return c(t),t<=0?s(t):void 0!==e?"string"==typeof n?s(t).fill(e,n):s(t).fill(e):s(t)}(t,e,n)},l.allocUnsafe=function(t){return d(t)},l.allocUnsafeSlow=function(t){return d(t)},l.isBuffer=function(t){return null!=t&&!0===t._isBuffer&&t!==l.prototype},l.compare=function(t,e){if(U(t,Uint8Array)&&(t=l.from(t,t.offset,t.byteLength)),U(e,Uint8Array)&&(e=l.from(e,e.offset,e.byteLength)),!l.isBuffer(t)||!l.isBuffer(e))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(t===e)return 0;for(var n=t.length,r=e.length,i=0,o=Math.min(n,r);i<o;++i)if(t[i]!==e[i]){n=t[i],r=e[i];break}return n<r?-1:r<n?1:0},l.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},l.concat=function(t,e){if(!Array.isArray(t))throw new TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return l.alloc(0);var n;if(void 0===e)for(e=0,n=0;n<t.length;++n)e+=t[n].length;var r=l.allocUnsafe(e),i=0;for(n=0;n<t.length;++n){var o=t[n];if(U(o,Uint8Array))i+o.length>r.length?l.from(o).copy(r,i):Uint8Array.prototype.set.call(r,o,i);else{if(!l.isBuffer(o))throw new TypeError('"list" argument must be an Array of Buffers');o.copy(r,i)}i+=o.length}return r},l.byteLength=m,l.prototype._isBuffer=!0,l.prototype.swap16=function(){var t=this.length;if(t%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var e=0;e<t;e+=2)v(this,e,e+1);return this},l.prototype.swap32=function(){var t=this.length;if(t%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var e=0;e<t;e+=4)v(this,e,e+3),v(this,e+1,e+2);return this},l.prototype.swap64=function(){var t=this.length;if(t%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var e=0;e<t;e+=8)v(this,e,e+7),v(this,e+1,e+6),v(this,e+2,e+5),v(this,e+3,e+4);return this},l.prototype.toString=function(){var t=this.length;return 0===t?"":0===arguments.length?T(this,0,t):g.apply(this,arguments)},l.prototype.toLocaleString=l.prototype.toString,l.prototype.equals=function(t){if(!l.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t||0===l.compare(this,t)},l.prototype.inspect=function(){var t="",n=e.INSPECT_MAX_BYTES;return t=this.toString("hex",0,n).replace(/(.{2})/g,"$1 ").trim(),this.length>n&&(t+=" ... "),"<Buffer "+t+">"},o&&(l.prototype[o]=l.prototype.inspect),l.prototype.compare=function(t,e,n,r,i){if(U(t,Uint8Array)&&(t=l.from(t,t.offset,t.byteLength)),!l.isBuffer(t))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof t);if(void 0===e&&(e=0),void 0===n&&(n=t?t.length:0),void 0===r&&(r=0),void 0===i&&(i=this.length),e<0||n>t.length||r<0||i>this.length)throw new RangeError("out of range index");if(r>=i&&e>=n)return 0;if(r>=i)return-1;if(e>=n)return 1;if(this===t)return 0;for(var o=(i>>>=0)-(r>>>=0),a=(n>>>=0)-(e>>>=0),s=Math.min(o,a),u=this.slice(r,i),c=t.slice(e,n),d=0;d<s;++d)if(u[d]!==c[d]){o=u[d],a=c[d];break}return o<a?-1:a<o?1:0},l.prototype.includes=function(t,e,n){return-1!==this.indexOf(t,e,n)},l.prototype.indexOf=function(t,e,n){return y(this,t,e,n,!0)},l.prototype.lastIndexOf=function(t,e,n){return y(this,t,e,n,!1)},l.prototype.write=function(t,e,n,r){if(void 0===e)r="utf8",n=this.length,e=0;else if(void 0===n&&"string"==typeof e)r=e,n=this.length,e=0;else{if(!isFinite(e))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");e>>>=0,isFinite(n)?(n>>>=0,void 0===r&&(r="utf8")):(r=n,n=void 0)}var i=this.length-e;if((void 0===n||n>i)&&(n=i),t.length>0&&(n<0||e<0)||e>this.length)throw new RangeError("Attempt to write outside buffer bounds");r||(r="utf8");for(var o=!1;;)switch(r){case"hex":return _(this,t,e,n);case"utf8":case"utf-8":return w(this,t,e,n);case"ascii":case"latin1":case"binary":return A(this,t,e,n);case"base64":return E(this,t,e,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return x(this,t,e,n);default:if(o)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),o=!0}},l.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var C=4096;function I(t,e,n){var r="";n=Math.min(t.length,n);for(var i=e;i<n;++i)r+=String.fromCharCode(127&t[i]);return r}function k(t,e,n){var r="";n=Math.min(t.length,n);for(var i=e;i<n;++i)r+=String.fromCharCode(t[i]);return r}function P(t,e,n){var r=t.length;(!e||e<0)&&(e=0),(!n||n<0||n>r)&&(n=r);for(var i="",o=e;o<n;++o)i+=G[t[o]];return i}function R(t,e,n){for(var r=t.slice(e,n),i="",o=0;o<r.length-1;o+=2)i+=String.fromCharCode(r[o]+256*r[o+1]);return i}function O(t,e,n){if(t%1!=0||t<0)throw new RangeError("offset is not uint");if(t+e>n)throw new RangeError("Trying to access beyond buffer length")}function M(t,e,n,r,i,o){if(!l.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>i||e<o)throw new RangeError('"value" argument is out of bounds');if(n+r>t.length)throw new RangeError("Index out of range")}function L(t,e,n,r,i,o){if(n+r>t.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function D(t,e,n,r,o){return e=+e,n>>>=0,o||L(t,0,n,4),i.write(t,e,n,r,23,4),n+4}function N(t,e,n,r,o){return e=+e,n>>>=0,o||L(t,0,n,8),i.write(t,e,n,r,52,8),n+8}l.prototype.slice=function(t,e){var n=this.length;(t=~~t)<0?(t+=n)<0&&(t=0):t>n&&(t=n),(e=void 0===e?n:~~e)<0?(e+=n)<0&&(e=0):e>n&&(e=n),e<t&&(e=t);var r=this.subarray(t,e);return Object.setPrototypeOf(r,l.prototype),r},l.prototype.readUintLE=l.prototype.readUIntLE=function(t,e,n){t>>>=0,e>>>=0,n||O(t,e,this.length);for(var r=this[t],i=1,o=0;++o<e&&(i*=256);)r+=this[t+o]*i;return r},l.prototype.readUintBE=l.prototype.readUIntBE=function(t,e,n){t>>>=0,e>>>=0,n||O(t,e,this.length);for(var r=this[t+--e],i=1;e>0&&(i*=256);)r+=this[t+--e]*i;return r},l.prototype.readUint8=l.prototype.readUInt8=function(t,e){return t>>>=0,e||O(t,1,this.length),this[t]},l.prototype.readUint16LE=l.prototype.readUInt16LE=function(t,e){return t>>>=0,e||O(t,2,this.length),this[t]|this[t+1]<<8},l.prototype.readUint16BE=l.prototype.readUInt16BE=function(t,e){return t>>>=0,e||O(t,2,this.length),this[t]<<8|this[t+1]},l.prototype.readUint32LE=l.prototype.readUInt32LE=function(t,e){return t>>>=0,e||O(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},l.prototype.readUint32BE=l.prototype.readUInt32BE=function(t,e){return t>>>=0,e||O(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},l.prototype.readIntLE=function(t,e,n){t>>>=0,e>>>=0,n||O(t,e,this.length);for(var r=this[t],i=1,o=0;++o<e&&(i*=256);)r+=this[t+o]*i;return r>=(i*=128)&&(r-=Math.pow(2,8*e)),r},l.prototype.readIntBE=function(t,e,n){t>>>=0,e>>>=0,n||O(t,e,this.length);for(var r=e,i=1,o=this[t+--r];r>0&&(i*=256);)o+=this[t+--r]*i;return o>=(i*=128)&&(o-=Math.pow(2,8*e)),o},l.prototype.readInt8=function(t,e){return t>>>=0,e||O(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},l.prototype.readInt16LE=function(t,e){t>>>=0,e||O(t,2,this.length);var n=this[t]|this[t+1]<<8;return 32768&n?4294901760|n:n},l.prototype.readInt16BE=function(t,e){t>>>=0,e||O(t,2,this.length);var n=this[t+1]|this[t]<<8;return 32768&n?4294901760|n:n},l.prototype.readInt32LE=function(t,e){return t>>>=0,e||O(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},l.prototype.readInt32BE=function(t,e){return t>>>=0,e||O(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},l.prototype.readFloatLE=function(t,e){return t>>>=0,e||O(t,4,this.length),i.read(this,t,!0,23,4)},l.prototype.readFloatBE=function(t,e){return t>>>=0,e||O(t,4,this.length),i.read(this,t,!1,23,4)},l.prototype.readDoubleLE=function(t,e){return t>>>=0,e||O(t,8,this.length),i.read(this,t,!0,52,8)},l.prototype.readDoubleBE=function(t,e){return t>>>=0,e||O(t,8,this.length),i.read(this,t,!1,52,8)},l.prototype.writeUintLE=l.prototype.writeUIntLE=function(t,e,n,r){t=+t,e>>>=0,n>>>=0,r||M(this,t,e,n,Math.pow(2,8*n)-1,0);var i=1,o=0;for(this[e]=255&t;++o<n&&(i*=256);)this[e+o]=t/i&255;return e+n},l.prototype.writeUintBE=l.prototype.writeUIntBE=function(t,e,n,r){t=+t,e>>>=0,n>>>=0,r||M(this,t,e,n,Math.pow(2,8*n)-1,0);var i=n-1,o=1;for(this[e+i]=255&t;--i>=0&&(o*=256);)this[e+i]=t/o&255;return e+n},l.prototype.writeUint8=l.prototype.writeUInt8=function(t,e,n){return t=+t,e>>>=0,n||M(this,t,e,1,255,0),this[e]=255&t,e+1},l.prototype.writeUint16LE=l.prototype.writeUInt16LE=function(t,e,n){return t=+t,e>>>=0,n||M(this,t,e,2,65535,0),this[e]=255&t,this[e+1]=t>>>8,e+2},l.prototype.writeUint16BE=l.prototype.writeUInt16BE=function(t,e,n){return t=+t,e>>>=0,n||M(this,t,e,2,65535,0),this[e]=t>>>8,this[e+1]=255&t,e+2},l.prototype.writeUint32LE=l.prototype.writeUInt32LE=function(t,e,n){return t=+t,e>>>=0,n||M(this,t,e,4,4294967295,0),this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=255&t,e+4},l.prototype.writeUint32BE=l.prototype.writeUInt32BE=function(t,e,n){return t=+t,e>>>=0,n||M(this,t,e,4,4294967295,0),this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t,e+4},l.prototype.writeIntLE=function(t,e,n,r){if(t=+t,e>>>=0,!r){var i=Math.pow(2,8*n-1);M(this,t,e,n,i-1,-i)}var o=0,a=1,s=0;for(this[e]=255&t;++o<n&&(a*=256);)t<0&&0===s&&0!==this[e+o-1]&&(s=1),this[e+o]=(t/a|0)-s&255;return e+n},l.prototype.writeIntBE=function(t,e,n,r){if(t=+t,e>>>=0,!r){var i=Math.pow(2,8*n-1);M(this,t,e,n,i-1,-i)}var o=n-1,a=1,s=0;for(this[e+o]=255&t;--o>=0&&(a*=256);)t<0&&0===s&&0!==this[e+o+1]&&(s=1),this[e+o]=(t/a|0)-s&255;return e+n},l.prototype.writeInt8=function(t,e,n){return t=+t,e>>>=0,n||M(this,t,e,1,127,-128),t<0&&(t=255+t+1),this[e]=255&t,e+1},l.prototype.writeInt16LE=function(t,e,n){return t=+t,e>>>=0,n||M(this,t,e,2,32767,-32768),this[e]=255&t,this[e+1]=t>>>8,e+2},l.prototype.writeInt16BE=function(t,e,n){return t=+t,e>>>=0,n||M(this,t,e,2,32767,-32768),this[e]=t>>>8,this[e+1]=255&t,e+2},l.prototype.writeInt32LE=function(t,e,n){return t=+t,e>>>=0,n||M(this,t,e,4,2147483647,-2147483648),this[e]=255&t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24,e+4},l.prototype.writeInt32BE=function(t,e,n){return t=+t,e>>>=0,n||M(this,t,e,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t,e+4},l.prototype.writeFloatLE=function(t,e,n){return D(this,t,e,!0,n)},l.prototype.writeFloatBE=function(t,e,n){return D(this,t,e,!1,n)},l.prototype.writeDoubleLE=function(t,e,n){return N(this,t,e,!0,n)},l.prototype.writeDoubleBE=function(t,e,n){return N(this,t,e,!1,n)},l.prototype.copy=function(t,e,n,r){if(!l.isBuffer(t))throw new TypeError("argument should be a Buffer");if(n||(n=0),r||0===r||(r=this.length),e>=t.length&&(e=t.length),e||(e=0),r>0&&r<n&&(r=n),r===n)return 0;if(0===t.length||0===this.length)return 0;if(e<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),t.length-e<r-n&&(r=t.length-e+n);var i=r-n;return this===t&&"function"==typeof Uint8Array.prototype.copyWithin?this.copyWithin(e,n,r):Uint8Array.prototype.set.call(t,this.subarray(n,r),e),i},l.prototype.fill=function(t,e,n,r){if("string"==typeof t){if("string"==typeof e?(r=e,e=0,n=this.length):"string"==typeof n&&(r=n,n=this.length),void 0!==r&&"string"!=typeof r)throw new TypeError("encoding must be a string");if("string"==typeof r&&!l.isEncoding(r))throw new TypeError("Unknown encoding: "+r);if(1===t.length){var i=t.charCodeAt(0);("utf8"===r&&i<128||"latin1"===r)&&(t=i)}}else"number"==typeof t?t&=255:"boolean"==typeof t&&(t=Number(t));if(e<0||this.length<e||this.length<n)throw new RangeError("Out of range index");if(n<=e)return this;var o;if(e>>>=0,n=void 0===n?this.length:n>>>0,t||(t=0),"number"==typeof t)for(o=e;o<n;++o)this[o]=t;else{var a=l.isBuffer(t)?t:l.from(t,r),s=a.length;if(0===s)throw new TypeError('The value "'+t+'" is invalid for argument "value"');for(o=0;o<n-e;++o)this[o+e]=a[o%s]}return this};var B=/[^+/0-9A-Za-z-_]/g;function j(t,e){var n;e=e||1/0;for(var r=t.length,i=null,o=[],a=0;a<r;++a){if((n=t.charCodeAt(a))>55295&&n<57344){if(!i){if(n>56319){(e-=3)>-1&&o.push(239,191,189);continue}if(a+1===r){(e-=3)>-1&&o.push(239,191,189);continue}i=n;continue}if(n<56320){(e-=3)>-1&&o.push(239,191,189),i=n;continue}n=65536+(i-55296<<10|n-56320)}else i&&(e-=3)>-1&&o.push(239,191,189);if(i=null,n<128){if((e-=1)<0)break;o.push(n)}else if(n<2048){if((e-=2)<0)break;o.push(n>>6|192,63&n|128)}else if(n<65536){if((e-=3)<0)break;o.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((e-=4)<0)break;o.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return o}function z(t){return r.toByteArray(function(t){if((t=(t=t.split("=")[0]).trim().replace(B,"")).length<2)return"";for(;t.length%4!=0;)t+="=";return t}(t))}function F(t,e,n,r){for(var i=0;i<r&&!(i+n>=e.length||i>=t.length);++i)e[i+n]=t[i];return i}function U(t,e){return t instanceof e||null!=t&&null!=t.constructor&&null!=t.constructor.name&&t.constructor.name===e.name}function q(t){return t!=t}var G=function(){for(var t="0123456789abcdef",e=new Array(256),n=0;n<16;++n)for(var r=16*n,i=0;i<16;++i)e[r+i]=t[n]+t[i];return e}()},6877:function(t,e){var n={parseBuffer:function(t){return new r(t).parse()},addBoxProcessor:function(t,e){"string"==typeof t&&"function"==typeof e&&(i.prototype._boxProcessors[t]=e)},createFile:function(){return new r},createBox:function(t,e,n){var r=i.create(t);return e&&e.append(r,n),r},createFullBox:function(t,e,r){var i=n.createBox(t,e,r);return i.version=0,i.flags=0,i},Utils:{}};n.Utils.dataViewToString=function(t,e){var n=e||"utf-8";if("undefined"!=typeof TextDecoder)return new TextDecoder(n).decode(t);var r=[],i=0;if("utf-8"===n)for(;i<t.byteLength;){var o=t.getUint8(i++);o<128||(o<224?(o=(31&o)<<6,o|=63&t.getUint8(i++)):o<240?(o=(15&o)<<12,o|=(63&t.getUint8(i++))<<6,o|=63&t.getUint8(i++)):(o=(7&o)<<18,o|=(63&t.getUint8(i++))<<12,o|=(63&t.getUint8(i++))<<6,o|=63&t.getUint8(i++))),r.push(String.fromCharCode(o))}else for(;i<t.byteLength;)r.push(String.fromCharCode(t.getUint8(i++)));return r.join("")},n.Utils.utf8ToByteArray=function(t){var e,n;if("undefined"!=typeof TextEncoder)e=(new TextEncoder).encode(t);else for(e=[],n=0;n<t.length;++n){var r=t.charCodeAt(n);r<128?e.push(r):r<2048?(e.push(192|r>>6),e.push(128|63&r)):r<65536?(e.push(224|r>>12),e.push(128|63&r>>6),e.push(128|63&r)):(e.push(240|r>>18),e.push(128|63&r>>12),e.push(128|63&r>>6),e.push(128|63&r))}return e},n.Utils.appendBox=function(t,e,n){if(e._offset=t._cursor.offset,e._root=t._root?t._root:t,e._raw=t._raw,e._parent=t,-1!==n)if(null!=n){var r,i=-1;if("number"==typeof n)i=n;else{if("string"==typeof n)r=n;else{if("object"!=typeof n||!n.type)return void t.boxes.push(e);r=n.type}for(var o=0;o<t.boxes.length;o++)if(r===t.boxes[o].type){i=o+1;break}}t.boxes.splice(i,0,e)}else t.boxes.push(e)},e.parseBuffer=n.parseBuffer,e.addBoxProcessor=n.addBoxProcessor,e.createFile=n.createFile,e.createBox=n.createBox,e.createFullBox=n.createFullBox,e.Utils=n.Utils,n.Cursor=function(t){this.offset=void 0===t?0:t};var r=function(t){this._cursor=new n.Cursor,this.boxes=[],t&&(this._raw=new DataView(t))};r.prototype.fetch=function(t){var e=this.fetchAll(t,!0);return e.length?e[0]:null},r.prototype.fetchAll=function(t,e){var n=[];return r._sweep.call(this,t,n,e),n},r.prototype.parse=function(){for(this._cursor.offset=0,this.boxes=[];this._cursor.offset<this._raw.byteLength;){var t=i.parse(this);if(void 0===t.type)break;this.boxes.push(t)}return this},r._sweep=function(t,e,n){for(var i in this.type&&this.type==t&&e.push(this),this.boxes){if(e.length&&n)return;r._sweep.call(this.boxes[i],t,e,n)}},r.prototype.write=function(){var t,e=0;for(t=0;t<this.boxes.length;t++)e+=this.boxes[t].getLength(!1);var n=new Uint8Array(e);for(this._rawo=new DataView(n.buffer),this.bytes=n,this._cursor.offset=0,t=0;t<this.boxes.length;t++)this.boxes[t].write();return n.buffer},r.prototype.append=function(t,e){n.Utils.appendBox(this,t,e)};var i=function(){this._cursor=new n.Cursor};i.parse=function(t){var e=new i;return e._offset=t._cursor.offset,e._root=t._root?t._root:t,e._raw=t._raw,e._parent=t,e._parseBox(),t._cursor.offset=e._raw.byteOffset+e._raw.byteLength,e},i.create=function(t){var e=new i;return e.type=t,e.boxes=[],e},i.prototype._boxContainers=["dinf","edts","mdia","meco","mfra","minf","moof","moov","mvex","stbl","strk","traf","trak","tref","udta","vttc","sinf","schi","encv","enca","meta","grpl","prsl"],i.prototype._boxProcessors={},i.prototype._procField=function(t,e,n){this._parsing?this[t]=this._readField(e,n):this._writeField(e,n,this[t])},i.prototype._procFieldArray=function(t,e,n,r){var i;if(this._parsing)for(this[t]=[],i=0;i<e;i++)this[t][i]=this._readField(n,r);else for(i=0;i<this[t].length;i++)this._writeField(n,r,this[t][i])},i.prototype._procFullBox=function(){this._procField("version","uint",8),this._procField("flags","uint",24)},i.prototype._procEntries=function(t,e,n){var r;if(this._parsing)for(this[t]=[],r=0;r<e;r++)this[t].push({}),n.call(this,this[t][r]);else for(r=0;r<e;r++)n.call(this,this[t][r])},i.prototype._procSubEntries=function(t,e,n,r){var i;if(this._parsing)for(t[e]=[],i=0;i<n;i++)t[e].push({}),r.call(this,t[e][i]);else for(i=0;i<n;i++)r.call(this,t[e][i])},i.prototype._procEntryField=function(t,e,n,r){this._parsing?t[e]=this._readField(n,r):this._writeField(n,r,t[e])},i.prototype._procSubBoxes=function(t,e){var n;if(this._parsing)for(this[t]=[],n=0;n<e;n++)this[t].push(i.parse(this));else for(n=0;n<e;n++)this._rawo?this[t][n].write():this.size+=this[t][n].getLength()},i.prototype._readField=function(t,e){switch(t){case"uint":return this._readUint(e);case"int":return this._readInt(e);case"template":return this._readTemplate(e);case"string":return-1===e?this._readTerminatedString():this._readString(e);case"data":return this._readData(e);case"utf8":return this._readUTF8String();case"utf8string":return this._readUTF8TerminatedString();default:return-1}},i.prototype._readInt=function(t){var e=null,n=this._cursor.offset-this._raw.byteOffset;switch(t){case 8:e=this._raw.getInt8(n);break;case 16:e=this._raw.getInt16(n);break;case 32:e=this._raw.getInt32(n);break;case 64:var r=this._raw.getInt32(n),i=this._raw.getInt32(n+4);e=r*Math.pow(2,32)+i}return this._cursor.offset+=t>>3,e},i.prototype._readUint=function(t){var e,n,r=null,i=this._cursor.offset-this._raw.byteOffset;switch(t){case 8:r=this._raw.getUint8(i);break;case 16:r=this._raw.getUint16(i);break;case 24:r=((e=this._raw.getUint16(i))<<8)+(n=this._raw.getUint8(i+2));break;case 32:r=this._raw.getUint32(i);break;case 64:e=this._raw.getUint32(i),n=this._raw.getUint32(i+4),r=e*Math.pow(2,32)+n}return this._cursor.offset+=t>>3,r},i.prototype._readString=function(t){for(var e="",n=0;n<t;n++){var r=this._readUint(8);e+=String.fromCharCode(r)}return e},i.prototype._readTemplate=function(t){return this._readUint(t/2)+this._readUint(t/2)/Math.pow(2,t/2)},i.prototype._readTerminatedString=function(){for(var t="";this._cursor.offset-this._offset<this._raw.byteLength;){var e=this._readUint(8);if(0===e)break;t+=String.fromCharCode(e)}return t},i.prototype._readData=function(t){var e=t>0?t:this._raw.byteLength-(this._cursor.offset-this._offset);if(e>0){var n=new Uint8Array(this._raw.buffer,this._cursor.offset,e);return this._cursor.offset+=e,n}return null},i.prototype._readUTF8String=function(){var t=this._raw.byteLength-(this._cursor.offset-this._offset),e=null;return t>0&&(e=new DataView(this._raw.buffer,this._cursor.offset,t),this._cursor.offset+=t),e?n.Utils.dataViewToString(e):e},i.prototype._readUTF8TerminatedString=function(){var t=this._raw.byteLength-(this._cursor.offset-this._offset),e=null;if(t>0){var r;for(e=new DataView(this._raw.buffer,this._cursor.offset,t),r=0;r<t&&0!==e.getUint8(r);r++);e=new DataView(this._raw.buffer,this._cursor.offset,r),this._cursor.offset+=Math.min(r+1,t)}return e?n.Utils.dataViewToString(e):e},i.prototype._parseBox=function(){if(this._parsing=!0,this._cursor.offset=this._offset,this._offset+8>this._raw.buffer.byteLength)this._root._incomplete=!0;else{switch(this._procField("size","uint",32),this._procField("type","string",4),1===this.size&&this._procField("largesize","uint",64),"uuid"===this.type&&this._procFieldArray("usertype",16,"uint",8),this.size){case 0:this._raw=new DataView(this._raw.buffer,this._offset);break;case 1:this._offset+this.size>this._raw.buffer.byteLength?(this._incomplete=!0,this._root._incomplete=!0):this._raw=new DataView(this._raw.buffer,this._offset,this.largesize);break;default:this._offset+this.size>this._raw.buffer.byteLength?(this._incomplete=!0,this._root._incomplete=!0):this._raw=new DataView(this._raw.buffer,this._offset,this.size)}this._incomplete||(this._boxProcessors[this.type]&&this._boxProcessors[this.type].call(this),-1!==this._boxContainers.indexOf(this.type)?this._parseContainerBox():this._data=this._readData())}},i.prototype._parseFullBox=function(){this.version=this._readUint(8),this.flags=this._readUint(24)},i.prototype._parseContainerBox=function(){for(this.boxes=[];this._cursor.offset-this._raw.byteOffset<this._raw.byteLength;)this.boxes.push(i.parse(this))},i.prototype.append=function(t,e){n.Utils.appendBox(this,t,e)},i.prototype.getLength=function(){if(this._parsing=!1,this._rawo=null,this.size=0,this._procField("size","uint",32),this._procField("type","string",4),1===this.size&&this._procField("largesize","uint",64),"uuid"===this.type&&this._procFieldArray("usertype",16,"uint",8),this._boxProcessors[this.type]&&this._boxProcessors[this.type].call(this),-1!==this._boxContainers.indexOf(this.type))for(var t=0;t<this.boxes.length;t++)this.size+=this.boxes[t].getLength();return this._data&&this._writeData(this._data),this.size},i.prototype.write=function(){switch(this._parsing=!1,this._cursor.offset=this._parent._cursor.offset,this.size){case 0:this._rawo=new DataView(this._parent._rawo.buffer,this._cursor.offset,this.parent._rawo.byteLength-this._cursor.offset);break;case 1:this._rawo=new DataView(this._parent._rawo.buffer,this._cursor.offset,this.largesize);break;default:this._rawo=new DataView(this._parent._rawo.buffer,this._cursor.offset,this.size)}if(this._procField("size","uint",32),this._procField("type","string",4),1===this.size&&this._procField("largesize","uint",64),"uuid"===this.type&&this._procFieldArray("usertype",16,"uint",8),this._boxProcessors[this.type]&&this._boxProcessors[this.type].call(this),-1!==this._boxContainers.indexOf(this.type))for(var t=0;t<this.boxes.length;t++)this.boxes[t].write();return this._data&&this._writeData(this._data),this._parent._cursor.offset+=this.size,this.size},i.prototype._writeInt=function(t,e){if(this._rawo){var n=this._cursor.offset-this._rawo.byteOffset;switch(t){case 8:this._rawo.setInt8(n,e);break;case 16:this._rawo.setInt16(n,e);break;case 32:this._rawo.setInt32(n,e);break;case 64:var r=Math.floor(e/Math.pow(2,32)),i=e-r*Math.pow(2,32);this._rawo.setUint32(n,r),this._rawo.setUint32(n+4,i)}this._cursor.offset+=t>>3}else this.size+=t>>3},i.prototype._writeUint=function(t,e){if(this._rawo){var n,r,i=this._cursor.offset-this._rawo.byteOffset;switch(t){case 8:this._rawo.setUint8(i,e);break;case 16:this._rawo.setUint16(i,e);break;case 24:n=(16776960&e)>>8,r=255&e,this._rawo.setUint16(i,n),this._rawo.setUint8(i+2,r);break;case 32:this._rawo.setUint32(i,e);break;case 64:r=e-(n=Math.floor(e/Math.pow(2,32)))*Math.pow(2,32),this._rawo.setUint32(i,n),this._rawo.setUint32(i+4,r)}this._cursor.offset+=t>>3}else this.size+=t>>3},i.prototype._writeString=function(t,e){for(var n=0;n<t;n++)this._writeUint(8,e.charCodeAt(n))},i.prototype._writeTerminatedString=function(t){if(0!==t.length){for(var e=0;e<t.length;e++)this._writeUint(8,t.charCodeAt(e));this._writeUint(8,0)}},i.prototype._writeTemplate=function(t,e){var n=Math.floor(e),r=(e-n)*Math.pow(2,t/2);this._writeUint(t/2,n),this._writeUint(t/2,r)},i.prototype._writeData=function(t){if(t)if(this._rawo){if(t instanceof Array){for(var e=this._cursor.offset-this._rawo.byteOffset,n=0;n<t.length;n++)this._rawo.setInt8(e+n,t[n]);this._cursor.offset+=t.length}t instanceof Uint8Array&&(this._root.bytes.set(t,this._cursor.offset),this._cursor.offset+=t.length)}else this.size+=t.length},i.prototype._writeUTF8String=function(t){var e=n.Utils.utf8ToByteArray(t);if(this._rawo)for(var r=new DataView(this._rawo.buffer,this._cursor.offset,e.length),i=0;i<e.length;i++)r.setUint8(i,e[i]);else this.size+=e.length},i.prototype._writeField=function(t,e,n){switch(t){case"uint":this._writeUint(e,n);break;case"int":this._writeInt(e,n);break;case"template":this._writeTemplate(e,n);break;case"string":-1==e?this._writeTerminatedString(n):this._writeString(e,n);break;case"data":this._writeData(n);break;case"utf8":this._writeUTF8String(n)}},i.prototype._boxProcessors.ardi=function(){this._procFullBox(),this._procField("audio_rendering_indication","uint",8)},i.prototype._boxProcessors.avc1=i.prototype._boxProcessors.avc2=i.prototype._boxProcessors.avc3=i.prototype._boxProcessors.avc4=i.prototype._boxProcessors.hvc1=i.prototype._boxProcessors.hev1=i.prototype._boxProcessors.encv=function(){this._procFieldArray("reserved1",6,"uint",8),this._procField("data_reference_index","uint",16),this._procField("pre_defined1","uint",16),this._procField("reserved2","uint",16),this._procFieldArray("pre_defined2",3,"uint",32),this._procField("width","uint",16),this._procField("height","uint",16),this._procField("horizresolution","template",32),this._procField("vertresolution","template",32),this._procField("reserved3","uint",32),this._procField("frame_count","uint",16),this._procFieldArray("compressorname",32,"uint",8),this._procField("depth","uint",16),this._procField("pre_defined3","int",16),this._procField("config","data",-1)},i.prototype._boxProcessors.ctts=function(){this._procFullBox(),this._procField("entry_count","uint",32),this._procEntries("entries",this.entry_count,(function(t){this._procEntryField(t,"sample_count","uint",32),this._procEntryField(t,"sample_offset",1===this.version?"int":"uint",32)}))},i.prototype._boxProcessors.dref=function(){this._procFullBox(),this._procField("entry_count","uint",32),this._procSubBoxes("entries",this.entry_count)},i.prototype._boxProcessors.elng=function(){this._procFullBox(),this._procField("extended_language","utf8string")},i.prototype._boxProcessors.elst=function(){this._procFullBox(),this._procField("entry_count","uint",32),this._procEntries("entries",this.entry_count,(function(t){this._procEntryField(t,"segment_duration","uint",1===this.version?64:32),this._procEntryField(t,"media_time","int",1===this.version?64:32),this._procEntryField(t,"media_rate_integer","int",16),this._procEntryField(t,"media_rate_fraction","int",16)}))},i.prototype._boxProcessors.emsg=function(){this._procFullBox(),1==this.version?(this._procField("timescale","uint",32),this._procField("presentation_time","uint",64),this._procField("event_duration","uint",32),this._procField("id","uint",32),this._procField("scheme_id_uri","string",-1),this._procField("value","string",-1)):(this._procField("scheme_id_uri","string",-1),this._procField("value","string",-1),this._procField("timescale","uint",32),this._procField("presentation_time_delta","uint",32),this._procField("event_duration","uint",32),this._procField("id","uint",32)),this._procField("message_data","data",-1)},i.prototype._boxProcessors.free=i.prototype._boxProcessors.skip=function(){this._procField("data","data",-1)},i.prototype._boxProcessors.frma=function(){this._procField("data_format","uint",32)},i.prototype._boxProcessors.ftyp=i.prototype._boxProcessors.styp=function(){this._procField("major_brand","string",4),this._procField("minor_version","uint",32);var t=-1;this._parsing&&(t=(this._raw.byteLength-(this._cursor.offset-this._raw.byteOffset))/4),this._procFieldArray("compatible_brands",t,"string",4)},i.prototype._boxProcessors.hdlr=function(){this._procFullBox(),this._procField("pre_defined","uint",32),this._procField("handler_type","string",4),this._procFieldArray("reserved",3,"uint",32),this._procField("name","string",-1)},i.prototype._boxProcessors.imda=function(){this._procField("imda_identifier","uint",32),this._procField("data","data",-1)},i.prototype._boxProcessors.kind=function(){this._procFullBox(),this._procField("schemeURI","utf8string"),this._procField("value","utf8string")},i.prototype._boxProcessors.labl=function(){this._procFullBox(),this.is_group_label=!!(1&this.flags),this._procField("label_id","uint",16),this._procField("language","utf8string"),this._procField("label","utf8string")},i.prototype._boxProcessors.mdat=function(){this._procField("data","data",-1)},i.prototype._boxProcessors.mdhd=function(){this._procFullBox(),this._procField("creation_time","uint",1==this.version?64:32),this._procField("modification_time","uint",1==this.version?64:32),this._procField("timescale","uint",32),this._procField("duration","uint",1==this.version?64:32),this._parsing||"string"!=typeof this.language||(this.language=this.language.charCodeAt(0)-96<<10|this.language.charCodeAt(1)-96<<5|this.language.charCodeAt(2)-96),this._procField("language","uint",16),this._parsing&&(this.language=String.fromCharCode(96+(this.language>>10&31),96+(this.language>>5&31),96+(31&this.language))),this._procField("pre_defined","uint",16)},i.prototype._boxProcessors.mehd=function(){this._procFullBox(),this._procField("fragment_duration","uint",1==this.version?64:32)},i.prototype._boxProcessors.meta=function(){this._procFullBox()},i.prototype._boxProcessors.mfhd=function(){this._procFullBox(),this._procField("sequence_number","uint",32)},i.prototype._boxProcessors.mfro=function(){this._procFullBox(),this._procField("mfra_size","uint",32)},i.prototype._boxProcessors.mp4a=i.prototype._boxProcessors.enca=function(){this._procFieldArray("reserved1",6,"uint",8),this._procField("data_reference_index","uint",16),this._procFieldArray("reserved2",2,"uint",32),this._procField("channelcount","uint",16),this._procField("samplesize","uint",16),this._procField("pre_defined","uint",16),this._procField("reserved3","uint",16),this._procField("samplerate","template",32),this._procField("esds","data",-1)},i.prototype._boxProcessors.mvhd=function(){this._procFullBox(),this._procField("creation_time","uint",1==this.version?64:32),this._procField("modification_time","uint",1==this.version?64:32),this._procField("timescale","uint",32),this._procField("duration","uint",1==this.version?64:32),this._procField("rate","template",32),this._procField("volume","template",16),this._procField("reserved1","uint",16),this._procFieldArray("reserved2",2,"uint",32),this._procFieldArray("matrix",9,"template",32),this._procFieldArray("pre_defined",6,"uint",32),this._procField("next_track_ID","uint",32)},i.prototype._boxProcessors.payl=function(){this._procField("cue_text","utf8")},i.prototype._boxProcessors.prft=function(){this._procFullBox(),this._procField("reference_track_ID","uint",32),this._procField("ntp_timestamp_sec","uint",32),this._procField("ntp_timestamp_frac","uint",32),this._procField("media_time","uint",1==this.version?64:32)},i.prototype._boxProcessors.prsl=function(){this._procFullBox(),this._procField("group_id","uint",32),this._procField("num_entities_in_group","uint",32),this._procEntries("entities",this.num_entities_in_group,(function(t){this._procEntryField(t,"entity_id","uint",32)})),4096&this.flags&&this._procField("preselection_tag","utf8string"),8192&this.flags&&this._procField("selection_priority","uint",8),16384&this.flags&&this._procField("interleaving_tag","utf8string")},i.prototype._boxProcessors.pssh=function(){this._procFullBox(),this._procFieldArray("SystemID",16,"uint",8),this._procField("DataSize","uint",32),this._procFieldArray("Data",this.DataSize,"uint",8)},i.prototype._boxProcessors.schm=function(){this._procFullBox(),this._procField("scheme_type","uint",32),this._procField("scheme_version","uint",32),1&this.flags&&this._procField("scheme_uri","string",-1)},i.prototype._boxProcessors.sdtp=function(){this._procFullBox();var t=-1;this._parsing&&(t=this._raw.byteLength-(this._cursor.offset-this._raw.byteOffset)),this._procFieldArray("sample_dependency_table",t,"uint",8)},i.prototype._boxProcessors.sidx=function(){this._procFullBox(),this._procField("reference_ID","uint",32),this._procField("timescale","uint",32),this._procField("earliest_presentation_time","uint",1==this.version?64:32),this._procField("first_offset","uint",1==this.version?64:32),this._procField("reserved","uint",16),this._procField("reference_count","uint",16),this._procEntries("references",this.reference_count,(function(t){this._parsing||(t.reference=(1&t.reference_type)<<31,t.reference|=2147483647&t.referenced_size,t.sap=(1&t.starts_with_SAP)<<31,t.sap|=(3&t.SAP_type)<<28,t.sap|=268435455&t.SAP_delta_time),this._procEntryField(t,"reference","uint",32),this._procEntryField(t,"subsegment_duration","uint",32),this._procEntryField(t,"sap","uint",32),this._parsing&&(t.reference_type=t.reference>>31&1,t.referenced_size=2147483647&t.reference,t.starts_with_SAP=t.sap>>31&1,t.SAP_type=t.sap>>28&7,t.SAP_delta_time=268435455&t.sap)}))},i.prototype._boxProcessors.smhd=function(){this._procFullBox(),this._procField("balance","uint",16),this._procField("reserved","uint",16)},i.prototype._boxProcessors.ssix=function(){this._procFullBox(),this._procField("subsegment_count","uint",32),this._procEntries("subsegments",this.subsegment_count,(function(t){this._procEntryField(t,"ranges_count","uint",32),this._procSubEntries(t,"ranges",t.ranges_count,(function(t){this._procEntryField(t,"level","uint",8),this._procEntryField(t,"range_size","uint",24)}))}))},i.prototype._boxProcessors.stsd=function(){this._procFullBox(),this._procField("entry_count","uint",32),this._procSubBoxes("entries",this.entry_count)},i.prototype._boxProcessors.sttg=function(){this._procField("settings","utf8")},i.prototype._boxProcessors.stts=function(){this._procFullBox(),this._procField("entry_count","uint",32),this._procEntries("entries",this.entry_count,(function(t){this._procEntryField(t,"sample_count","uint",32),this._procEntryField(t,"sample_delta","uint",32)}))},i.prototype._boxProcessors.subs=function(){this._procFullBox(),this._procField("entry_count","uint",32),this._procEntries("entries",this.entry_count,(function(t){this._procEntryField(t,"sample_delta","uint",32),this._procEntryField(t,"subsample_count","uint",16),this._procSubEntries(t,"subsamples",t.subsample_count,(function(t){this._procEntryField(t,"subsample_size","uint",1===this.version?32:16),this._procEntryField(t,"subsample_priority","uint",8),this._procEntryField(t,"discardable","uint",8),this._procEntryField(t,"codec_specific_parameters","uint",32)}))}))},i.prototype._boxProcessors.tenc=function(){this._procFullBox(),this._procField("default_IsEncrypted","uint",24),this._procField("default_IV_size","uint",8),this._procFieldArray("default_KID",16,"uint",8)},i.prototype._boxProcessors.tfdt=function(){this._procFullBox(),this._procField("baseMediaDecodeTime","uint",1==this.version?64:32)},i.prototype._boxProcessors.tfhd=function(){this._procFullBox(),this._procField("track_ID","uint",32),1&this.flags&&this._procField("base_data_offset","uint",64),2&this.flags&&this._procField("sample_description_offset","uint",32),8&this.flags&&this._procField("default_sample_duration","uint",32),16&this.flags&&this._procField("default_sample_size","uint",32),32&this.flags&&this._procField("default_sample_flags","uint",32)},i.prototype._boxProcessors.tfra=function(){this._procFullBox(),this._procField("track_ID","uint",32),this._parsing||(this.reserved=0,this.reserved|=(48&this.length_size_of_traf_num)<<4,this.reserved|=(12&this.length_size_of_trun_num)<<2,this.reserved|=3&this.length_size_of_sample_num),this._procField("reserved","uint",32),this._parsing&&(this.length_size_of_traf_num=(48&this.reserved)>>4,this.length_size_of_trun_num=(12&this.reserved)>>2,this.length_size_of_sample_num=3&this.reserved),this._procField("number_of_entry","uint",32),this._procEntries("entries",this.number_of_entry,(function(t){this._procEntryField(t,"time","uint",1===this.version?64:32),this._procEntryField(t,"moof_offset","uint",1===this.version?64:32),this._procEntryField(t,"traf_number","uint",8*(this.length_size_of_traf_num+1)),this._procEntryField(t,"trun_number","uint",8*(this.length_size_of_trun_num+1)),this._procEntryField(t,"sample_number","uint",8*(this.length_size_of_sample_num+1))}))},i.prototype._boxProcessors.tkhd=function(){this._procFullBox(),this._procField("creation_time","uint",1==this.version?64:32),this._procField("modification_time","uint",1==this.version?64:32),this._procField("track_ID","uint",32),this._procField("reserved1","uint",32),this._procField("duration","uint",1==this.version?64:32),this._procFieldArray("reserved2",2,"uint",32),this._procField("layer","uint",16),this._procField("alternate_group","uint",16),this._procField("volume","template",16),this._procField("reserved3","uint",16),this._procFieldArray("matrix",9,"template",32),this._procField("width","template",32),this._procField("height","template",32)},i.prototype._boxProcessors.trex=function(){this._procFullBox(),this._procField("track_ID","uint",32),this._procField("default_sample_description_index","uint",32),this._procField("default_sample_duration","uint",32),this._procField("default_sample_size","uint",32),this._procField("default_sample_flags","uint",32)},i.prototype._boxProcessors.trun=function(){this._procFullBox(),this._procField("sample_count","uint",32),1&this.flags&&this._procField("data_offset","int",32),4&this.flags&&this._procField("first_sample_flags","uint",32),this._procEntries("samples",this.sample_count,(function(t){256&this.flags&&this._procEntryField(t,"sample_duration","uint",32),512&this.flags&&this._procEntryField(t,"sample_size","uint",32),1024&this.flags&&this._procEntryField(t,"sample_flags","uint",32),2048&this.flags&&this._procEntryField(t,"sample_composition_time_offset",1===this.version?"int":"uint",32)}))},i.prototype._boxProcessors["url "]=i.prototype._boxProcessors["urn "]=function(){this._procFullBox(),"urn "===this.type&&this._procField("name","string",-1),this._procField("location","string",-1)},i.prototype._boxProcessors.vlab=function(){this._procField("source_label","utf8")},i.prototype._boxProcessors.vmhd=function(){this._procFullBox(),this._procField("graphicsmode","uint",16),this._procFieldArray("opcolor",3,"uint",16)},i.prototype._boxProcessors.vttC=function(){this._procField("config","utf8")},i.prototype._boxProcessors.vtte=function(){}},9826:function(t){var e,n="object"==typeof Reflect?Reflect:null,r=n&&"function"==typeof n.apply?n.apply:function(t,e,n){return Function.prototype.apply.call(t,e,n)};e=n&&"function"==typeof n.ownKeys?n.ownKeys:Object.getOwnPropertySymbols?function(t){return Object.getOwnPropertyNames(t).concat(Object.getOwnPropertySymbols(t))}:function(t){return Object.getOwnPropertyNames(t)};var i=Number.isNaN||function(t){return t!=t};function o(){o.init.call(this)}t.exports=o,t.exports.once=function(t,e){return new Promise((function(n,r){function i(n){t.removeListener(e,o),r(n)}function o(){"function"==typeof t.removeListener&&t.removeListener("error",i),n([].slice.call(arguments))}m(t,e,o,{once:!0}),"error"!==e&&function(t,e){"function"==typeof t.on&&m(t,"error",e,{once:!0})}(t,i)}))},o.EventEmitter=o,o.prototype._events=void 0,o.prototype._eventsCount=0,o.prototype._maxListeners=void 0;var a=10;function s(t){if("function"!=typeof t)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t)}function l(t){return void 0===t._maxListeners?o.defaultMaxListeners:t._maxListeners}function u(t,e,n,r){var i,o,a,u;if(s(n),void 0===(o=t._events)?(o=t._events=Object.create(null),t._eventsCount=0):(void 0!==o.newListener&&(t.emit("newListener",e,n.listener?n.listener:n),o=t._events),a=o[e]),void 0===a)a=o[e]=n,++t._eventsCount;else if("function"==typeof a?a=o[e]=r?[n,a]:[a,n]:r?a.unshift(n):a.push(n),(i=l(t))>0&&a.length>i&&!a.warned){a.warned=!0;var c=new Error("Possible EventEmitter memory leak detected. "+a.length+" "+String(e)+" listeners added. Use emitter.setMaxListeners() to increase limit");c.name="MaxListenersExceededWarning",c.emitter=t,c.type=e,c.count=a.length,u=c,console&&console.warn&&console.warn(u)}return t}function c(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function d(t,e,n){var r={fired:!1,wrapFn:void 0,target:t,type:e,listener:n},i=c.bind(r);return i.listener=n,r.wrapFn=i,i}function f(t,e,n){var r=t._events;if(void 0===r)return[];var i=r[e];return void 0===i?[]:"function"==typeof i?n?[i.listener||i]:[i]:n?function(t){for(var e=new Array(t.length),n=0;n<e.length;++n)e[n]=t[n].listener||t[n];return e}(i):p(i,i.length)}function h(t){var e=this._events;if(void 0!==e){var n=e[t];if("function"==typeof n)return 1;if(void 0!==n)return n.length}return 0}function p(t,e){for(var n=new Array(e),r=0;r<e;++r)n[r]=t[r];return n}function m(t,e,n,r){if("function"==typeof t.on)r.once?t.once(e,n):t.on(e,n);else{if("function"!=typeof t.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof t);t.addEventListener(e,(function i(o){r.once&&t.removeEventListener(e,i),n(o)}))}}Object.defineProperty(o,"defaultMaxListeners",{enumerable:!0,get:function(){return a},set:function(t){if("number"!=typeof t||t<0||i(t))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+t+".");a=t}}),o.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},o.prototype.setMaxListeners=function(t){if("number"!=typeof t||t<0||i(t))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+t+".");return this._maxListeners=t,this},o.prototype.getMaxListeners=function(){return l(this)},o.prototype.emit=function(t){for(var e=[],n=1;n<arguments.length;n++)e.push(arguments[n]);var i="error"===t,o=this._events;if(void 0!==o)i=i&&void 0===o.error;else if(!i)return!1;if(i){var a;if(e.length>0&&(a=e[0]),a instanceof Error)throw a;var s=new Error("Unhandled error."+(a?" ("+a.message+")":""));throw s.context=a,s}var l=o[t];if(void 0===l)return!1;if("function"==typeof l)r(l,this,e);else{var u=l.length,c=p(l,u);for(n=0;n<u;++n)r(c[n],this,e)}return!0},o.prototype.addListener=function(t,e){return u(this,t,e,!1)},o.prototype.on=o.prototype.addListener,o.prototype.prependListener=function(t,e){return u(this,t,e,!0)},o.prototype.once=function(t,e){return s(e),this.on(t,d(this,t,e)),this},o.prototype.prependOnceListener=function(t,e){return s(e),this.prependListener(t,d(this,t,e)),this},o.prototype.removeListener=function(t,e){var n,r,i,o,a;if(s(e),void 0===(r=this._events))return this;if(void 0===(n=r[t]))return this;if(n===e||n.listener===e)0==--this._eventsCount?this._events=Object.create(null):(delete r[t],r.removeListener&&this.emit("removeListener",t,n.listener||e));else if("function"!=typeof n){for(i=-1,o=n.length-1;o>=0;o--)if(n[o]===e||n[o].listener===e){a=n[o].listener,i=o;break}if(i<0)return this;0===i?n.shift():function(t,e){for(;e+1<t.length;e++)t[e]=t[e+1];t.pop()}(n,i),1===n.length&&(r[t]=n[0]),void 0!==r.removeListener&&this.emit("removeListener",t,a||e)}return this},o.prototype.off=o.prototype.removeListener,o.prototype.removeAllListeners=function(t){var e,n,r;if(void 0===(n=this._events))return this;if(void 0===n.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==n[t]&&(0==--this._eventsCount?this._events=Object.create(null):delete n[t]),this;if(0===arguments.length){var i,o=Object.keys(n);for(r=0;r<o.length;++r)"removeListener"!==(i=o[r])&&this.removeAllListeners(i);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(e=n[t]))this.removeListener(t,e);else if(void 0!==e)for(r=e.length-1;r>=0;r--)this.removeListener(t,e[r]);return this},o.prototype.listeners=function(t){return f(this,t,!0)},o.prototype.rawListeners=function(t){return f(this,t,!1)},o.listenerCount=function(t,e){return"function"==typeof t.listenerCount?t.listenerCount(e):h.call(t,e)},o.prototype.listenerCount=h,o.prototype.eventNames=function(){return this._eventsCount>0?e(this._events):[]}},7316:function(t){t.exports=function t(e,n){if(e===n)return!0;if(e&&n&&"object"==typeof e&&"object"==typeof n){if(e.constructor!==n.constructor)return!1;var r,i,o;if(Array.isArray(e)){if((r=e.length)!=n.length)return!1;for(i=r;0!=i--;)if(!t(e[i],n[i]))return!1;return!0}if(e.constructor===RegExp)return e.source===n.source&&e.flags===n.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===n.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===n.toString();if((r=(o=Object.keys(e)).length)!==Object.keys(n).length)return!1;for(i=r;0!=i--;)if(!Object.prototype.hasOwnProperty.call(n,o[i]))return!1;for(i=r;0!=i--;){var a=o[i];if(!t(e[a],n[a]))return!1}return!0}return e!=e&&n!=n}},7986:function(t,e){e.read=function(t,e,n,r,i){var o,a,s=8*i-r-1,l=(1<<s)-1,u=l>>1,c=-7,d=n?i-1:0,f=n?-1:1,h=t[e+d];for(d+=f,o=h&(1<<-c)-1,h>>=-c,c+=s;c>0;o=256*o+t[e+d],d+=f,c-=8);for(a=o&(1<<-c)-1,o>>=-c,c+=r;c>0;a=256*a+t[e+d],d+=f,c-=8);if(0===o)o=1-u;else{if(o===l)return a?NaN:1/0*(h?-1:1);a+=Math.pow(2,r),o-=u}return(h?-1:1)*a*Math.pow(2,o-r)},e.write=function(t,e,n,r,i,o){var a,s,l,u=8*o-i-1,c=(1<<u)-1,d=c>>1,f=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,h=r?0:o-1,p=r?1:-1,m=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(s=isNaN(e)?1:0,a=c):(a=Math.floor(Math.log(e)/Math.LN2),e*(l=Math.pow(2,-a))<1&&(a--,l*=2),(e+=a+d>=1?f/l:f*Math.pow(2,1-d))*l>=2&&(a++,l/=2),a+d>=c?(s=0,a=c):a+d>=1?(s=(e*l-1)*Math.pow(2,i),a+=d):(s=e*Math.pow(2,d-1)*Math.pow(2,i),a=0));i>=8;t[n+h]=255&s,h+=p,s/=256,i-=8);for(a=a<<i|s,u+=i;u>0;t[n+h]=255&a,h+=p,a/=256,u-=8);t[n+h-p]|=128*m}},5474:function(t,e,n){!function(t){t.parser=function(t,e){return new i(t,e)},t.SAXParser=i,t.SAXStream=a,t.createStream=function(t,e){return new a(t,e)},t.MAX_BUFFER_LENGTH=65536;var e,r=["comment","sgmlDecl","textNode","tagName","doctype","procInstName","procInstBody","entity","attribName","attribValue","cdata","script"];function i(e,n){if(!(this instanceof i))return new i(e,n);var o=this;!function(t){for(var e=0,n=r.length;e<n;e++)t[r[e]]=""}(o),o.q=o.c="",o.bufferCheckPosition=t.MAX_BUFFER_LENGTH,o.opt=n||{},o.opt.lowercase=o.opt.lowercase||o.opt.lowercasetags,o.looseCase=o.opt.lowercase?"toLowerCase":"toUpperCase",o.tags=[],o.closed=o.closedRoot=o.sawRoot=!1,o.tag=o.error=null,o.strict=!!e,o.noscript=!(!e&&!o.opt.noscript),o.state=C.BEGIN,o.strictEntities=o.opt.strictEntities,o.ENTITIES=o.strictEntities?Object.create(t.XML_ENTITIES):Object.create(t.ENTITIES),o.attribList=[],o.opt.xmlns&&(o.ns=Object.create(g)),o.trackPosition=!1!==o.opt.position,o.trackPosition&&(o.position=o.line=o.column=0),k(o,"onready")}t.EVENTS=["text","processinginstruction","sgmldeclaration","doctype","comment","opentagstart","attribute","opentag","closetag","opencdata","cdata","closecdata","error","end","ready","script","opennamespace","closenamespace"],Object.create||(Object.create=function(t){function e(){}return e.prototype=t,new e}),Object.keys||(Object.keys=function(t){var e=[];for(var n in t)t.hasOwnProperty(n)&&e.push(n);return e}),i.prototype={end:function(){L(this)},write:function(e){var n=this;if(this.error)throw this.error;if(n.closed)return M(n,"Cannot write after close. Assign an onready handler.");if(null===e)return L(n);"object"==typeof e&&(e=e.toString());for(var i=0,o="";o=G(e,i++),n.c=o,o;)switch(n.trackPosition&&(n.position++,"\n"===o?(n.line++,n.column=0):n.column++),n.state){case C.BEGIN:if(n.state=C.BEGIN_WHITESPACE,"\ufeff"===o)continue;q(n,o);continue;case C.BEGIN_WHITESPACE:q(n,o);continue;case C.TEXT:if(n.sawRoot&&!n.closedRoot){for(var a=i-1;o&&"<"!==o&&"&"!==o;)(o=G(e,i++))&&n.trackPosition&&(n.position++,"\n"===o?(n.line++,n.column=0):n.column++);n.textNode+=e.substring(a,i-1)}"<"!==o||n.sawRoot&&n.closedRoot&&!n.strict?(!E(s,o)||n.sawRoot&&!n.closedRoot||D(n,"Text data outside of root node."),"&"===o?n.state=C.TEXT_ENTITY:n.textNode+=o):(n.state=C.OPEN_WAKA,n.startTagPosition=n.position);continue;case C.SCRIPT:"<"===o?n.state=C.SCRIPT_ENDING:n.script+=o;continue;case C.SCRIPT_ENDING:"/"===o?n.state=C.CLOSE_TAG:(n.script+="<"+o,n.state=C.SCRIPT);continue;case C.OPEN_WAKA:if("!"===o)n.state=C.SGML_DECL,n.sgmlDecl="";else if(A(s,o));else if(A(v,o))n.state=C.OPEN_TAG,n.tagName=o;else if("/"===o)n.state=C.CLOSE_TAG,n.tagName="";else if("?"===o)n.state=C.PROC_INST,n.procInstName=n.procInstBody="";else{if(D(n,"Unencoded <"),n.startTagPosition+1<n.position){var l=n.position-n.startTagPosition;o=new Array(l).join(" ")+o}n.textNode+="<"+o,n.state=C.TEXT}continue;case C.SGML_DECL:(n.sgmlDecl+o).toUpperCase()===f?(P(n,"onopencdata"),n.state=C.CDATA,n.sgmlDecl="",n.cdata=""):n.sgmlDecl+o==="--"?(n.state=C.COMMENT,n.comment="",n.sgmlDecl=""):(n.sgmlDecl+o).toUpperCase()===h?(n.state=C.DOCTYPE,(n.doctype||n.sawRoot)&&D(n,"Inappropriately located doctype declaration"),n.doctype="",n.sgmlDecl=""):">"===o?(P(n,"onsgmldeclaration",n.sgmlDecl),n.sgmlDecl="",n.state=C.TEXT):A(c,o)?(n.state=C.SGML_DECL_QUOTED,n.sgmlDecl+=o):n.sgmlDecl+=o;continue;case C.SGML_DECL_QUOTED:o===n.q&&(n.state=C.SGML_DECL,n.q=""),n.sgmlDecl+=o;continue;case C.DOCTYPE:">"===o?(n.state=C.TEXT,P(n,"ondoctype",n.doctype),n.doctype=!0):(n.doctype+=o,"["===o?n.state=C.DOCTYPE_DTD:A(c,o)&&(n.state=C.DOCTYPE_QUOTED,n.q=o));continue;case C.DOCTYPE_QUOTED:n.doctype+=o,o===n.q&&(n.q="",n.state=C.DOCTYPE);continue;case C.DOCTYPE_DTD:n.doctype+=o,"]"===o?n.state=C.DOCTYPE:A(c,o)&&(n.state=C.DOCTYPE_DTD_QUOTED,n.q=o);continue;case C.DOCTYPE_DTD_QUOTED:n.doctype+=o,o===n.q&&(n.state=C.DOCTYPE_DTD,n.q="");continue;case C.COMMENT:"-"===o?n.state=C.COMMENT_ENDING:n.comment+=o;continue;case C.COMMENT_ENDING:"-"===o?(n.state=C.COMMENT_ENDED,n.comment=O(n.opt,n.comment),n.comment&&P(n,"oncomment",n.comment),n.comment=""):(n.comment+="-"+o,n.state=C.COMMENT);continue;case C.COMMENT_ENDED:">"!==o?(D(n,"Malformed comment"),n.comment+="--"+o,n.state=C.COMMENT):n.state=C.TEXT;continue;case C.CDATA:"]"===o?n.state=C.CDATA_ENDING:n.cdata+=o;continue;case C.CDATA_ENDING:"]"===o?n.state=C.CDATA_ENDING_2:(n.cdata+="]"+o,n.state=C.CDATA);continue;case C.CDATA_ENDING_2:">"===o?(n.cdata&&P(n,"oncdata",n.cdata),P(n,"onclosecdata"),n.cdata="",n.state=C.TEXT):"]"===o?n.cdata+="]":(n.cdata+="]]"+o,n.state=C.CDATA);continue;case C.PROC_INST:"?"===o?n.state=C.PROC_INST_ENDING:A(s,o)?n.state=C.PROC_INST_BODY:n.procInstName+=o;continue;case C.PROC_INST_BODY:if(!n.procInstBody&&A(s,o))continue;"?"===o?n.state=C.PROC_INST_ENDING:n.procInstBody+=o;continue;case C.PROC_INST_ENDING:">"===o?(P(n,"onprocessinginstruction",{name:n.procInstName,body:n.procInstBody}),n.procInstName=n.procInstBody="",n.state=C.TEXT):(n.procInstBody+="?"+o,n.state=C.PROC_INST_BODY);continue;case C.OPEN_TAG:A(y,o)?n.tagName+=o:(N(n),">"===o?z(n):"/"===o?n.state=C.OPEN_TAG_SLASH:(E(s,o)&&D(n,"Invalid character in tag name"),n.state=C.ATTRIB));continue;case C.OPEN_TAG_SLASH:">"===o?(z(n,!0),F(n)):(D(n,"Forward-slash in opening tag not followed by >"),n.state=C.ATTRIB);continue;case C.ATTRIB:if(A(s,o))continue;">"===o?z(n):"/"===o?n.state=C.OPEN_TAG_SLASH:A(v,o)?(n.attribName=o,n.attribValue="",n.state=C.ATTRIB_NAME):D(n,"Invalid attribute name");continue;case C.ATTRIB_NAME:"="===o?n.state=C.ATTRIB_VALUE:">"===o?(D(n,"Attribute without value"),n.attribValue=n.attribName,j(n),z(n)):A(s,o)?n.state=C.ATTRIB_NAME_SAW_WHITE:A(y,o)?n.attribName+=o:D(n,"Invalid attribute name");continue;case C.ATTRIB_NAME_SAW_WHITE:if("="===o)n.state=C.ATTRIB_VALUE;else{if(A(s,o))continue;D(n,"Attribute without value"),n.tag.attributes[n.attribName]="",n.attribValue="",P(n,"onattribute",{name:n.attribName,value:""}),n.attribName="",">"===o?z(n):A(v,o)?(n.attribName=o,n.state=C.ATTRIB_NAME):(D(n,"Invalid attribute name"),n.state=C.ATTRIB)}continue;case C.ATTRIB_VALUE:if(A(s,o))continue;A(c,o)?(n.q=o,n.state=C.ATTRIB_VALUE_QUOTED):(D(n,"Unquoted attribute value"),n.state=C.ATTRIB_VALUE_UNQUOTED,n.attribValue=o);continue;case C.ATTRIB_VALUE_QUOTED:if(o!==n.q){"&"===o?n.state=C.ATTRIB_VALUE_ENTITY_Q:n.attribValue+=o;continue}j(n),n.q="",n.state=C.ATTRIB_VALUE_CLOSED;continue;case C.ATTRIB_VALUE_CLOSED:A(s,o)?n.state=C.ATTRIB:">"===o?z(n):"/"===o?n.state=C.OPEN_TAG_SLASH:A(v,o)?(D(n,"No whitespace between attributes"),n.attribName=o,n.attribValue="",n.state=C.ATTRIB_NAME):D(n,"Invalid attribute name");continue;case C.ATTRIB_VALUE_UNQUOTED:if(E(d,o)){"&"===o?n.state=C.ATTRIB_VALUE_ENTITY_U:n.attribValue+=o;continue}j(n),">"===o?z(n):n.state=C.ATTRIB;continue;case C.CLOSE_TAG:if(n.tagName)">"===o?F(n):A(y,o)?n.tagName+=o:n.script?(n.script+="</"+n.tagName,n.tagName="",n.state=C.SCRIPT):(E(s,o)&&D(n,"Invalid tagname in closing tag"),n.state=C.CLOSE_TAG_SAW_WHITE);else{if(A(s,o))continue;E(v,o)?n.script?(n.script+="</"+o,n.state=C.SCRIPT):D(n,"Invalid tagname in closing tag."):n.tagName=o}continue;case C.CLOSE_TAG_SAW_WHITE:if(A(s,o))continue;">"===o?F(n):D(n,"Invalid characters in closing tag");continue;case C.TEXT_ENTITY:case C.ATTRIB_VALUE_ENTITY_Q:case C.ATTRIB_VALUE_ENTITY_U:var u,p;switch(n.state){case C.TEXT_ENTITY:u=C.TEXT,p="textNode";break;case C.ATTRIB_VALUE_ENTITY_Q:u=C.ATTRIB_VALUE_QUOTED,p="attribValue";break;case C.ATTRIB_VALUE_ENTITY_U:u=C.ATTRIB_VALUE_UNQUOTED,p="attribValue"}";"===o?(n[p]+=U(n),n.entity="",n.state=u):A(n.entity.length?_:b,o)?n.entity+=o:(D(n,"Invalid character in entity name"),n[p]+="&"+n.entity+o,n.entity="",n.state=u);continue;default:throw new Error(n,"Unknown state: "+n.state)}return n.position>=n.bufferCheckPosition&&function(e){for(var n=Math.max(t.MAX_BUFFER_LENGTH,10),i=0,o=0,a=r.length;o<a;o++){var s=e[r[o]].length;if(s>n)switch(r[o]){case"textNode":R(e);break;case"cdata":P(e,"oncdata",e.cdata),e.cdata="";break;case"script":P(e,"onscript",e.script),e.script="";break;default:M(e,"Max buffer length exceeded: "+r[o])}i=Math.max(i,s)}var l=t.MAX_BUFFER_LENGTH-i;e.bufferCheckPosition=l+e.position}(n),n},resume:function(){return this.error=null,this},close:function(){return this.write(null)},flush:function(){var t;R(t=this),""!==t.cdata&&(P(t,"oncdata",t.cdata),t.cdata=""),""!==t.script&&(P(t,"onscript",t.script),t.script="")}};try{e=n(3515).Stream}catch(t){e=function(){}}var o=t.EVENTS.filter((function(t){return"error"!==t&&"end"!==t}));function a(t,n){if(!(this instanceof a))return new a(t,n);e.apply(this),this._parser=new i(t,n),this.writable=!0,this.readable=!0;var r=this;this._parser.onend=function(){r.emit("end")},this._parser.onerror=function(t){r.emit("error",t),r._parser.error=null},this._decoder=null,o.forEach((function(t){Object.defineProperty(r,"on"+t,{get:function(){return r._parser["on"+t]},set:function(e){if(!e)return r.removeAllListeners(t),r._parser["on"+t]=e,e;r.on(t,e)},enumerable:!0,configurable:!1})}))}a.prototype=Object.create(e.prototype,{constructor:{value:a}}),a.prototype.write=function(t){if("function"==typeof nM&&"function"==typeof nM.isBuffer&&nM.isBuffer(t)){if(!this._decoder){var e=n(748).StringDecoder;this._decoder=new e("utf8")}t=this._decoder.write(t)}return this._parser.write(t.toString()),this.emit("data",t),!0},a.prototype.end=function(t){return t&&t.length&&this.write(t),this._parser.end(),!0},a.prototype.on=function(t,n){var r=this;return r._parser["on"+t]||-1===o.indexOf(t)||(r._parser["on"+t]=function(){var e=1===arguments.length?[arguments[0]]:Array.apply(null,arguments);e.splice(0,0,t),r.emit.apply(r,e)}),e.prototype.on.call(r,t,n)};var s="\r\n\t ",l="0124356789",u="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",c="'\"",d=s+">",f="[CDATA[",h="DOCTYPE",p="http://www.w3.org/XML/1998/namespace",m="http://www.w3.org/2000/xmlns/",g={xml:p,xmlns:m};s=w(s),l=w(l),u=w(u);var v=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,y=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040\.\d-]/,b=/[#:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,_=/[#:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040\.\d-]/;function w(t){return t.split("").reduce((function(t,e){return t[e]=!0,t}),{})}function A(t,e){return function(t){return"[object RegExp]"===Object.prototype.toString.call(t)}(t)?!!e.match(t):t[e]}function E(t,e){return!A(t,e)}c=w(c),d=w(d);var x,S,T,C=0;for(var I in t.STATE={BEGIN:C++,BEGIN_WHITESPACE:C++,TEXT:C++,TEXT_ENTITY:C++,OPEN_WAKA:C++,SGML_DECL:C++,SGML_DECL_QUOTED:C++,DOCTYPE:C++,DOCTYPE_QUOTED:C++,DOCTYPE_DTD:C++,DOCTYPE_DTD_QUOTED:C++,COMMENT_STARTING:C++,COMMENT:C++,COMMENT_ENDING:C++,COMMENT_ENDED:C++,CDATA:C++,CDATA_ENDING:C++,CDATA_ENDING_2:C++,PROC_INST:C++,PROC_INST_BODY:C++,PROC_INST_ENDING:C++,OPEN_TAG:C++,OPEN_TAG_SLASH:C++,ATTRIB:C++,ATTRIB_NAME:C++,ATTRIB_NAME_SAW_WHITE:C++,ATTRIB_VALUE:C++,ATTRIB_VALUE_QUOTED:C++,ATTRIB_VALUE_CLOSED:C++,ATTRIB_VALUE_UNQUOTED:C++,ATTRIB_VALUE_ENTITY_Q:C++,ATTRIB_VALUE_ENTITY_U:C++,CLOSE_TAG:C++,CLOSE_TAG_SAW_WHITE:C++,SCRIPT:C++,SCRIPT_ENDING:C++},t.XML_ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'"},t.ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'",AElig:198,Aacute:193,Acirc:194,Agrave:192,Aring:197,Atilde:195,Auml:196,Ccedil:199,ETH:208,Eacute:201,Ecirc:202,Egrave:200,Euml:203,Iacute:205,Icirc:206,Igrave:204,Iuml:207,Ntilde:209,Oacute:211,Ocirc:212,Ograve:210,Oslash:216,Otilde:213,Ouml:214,THORN:222,Uacute:218,Ucirc:219,Ugrave:217,Uuml:220,Yacute:221,aacute:225,acirc:226,aelig:230,agrave:224,aring:229,atilde:227,auml:228,ccedil:231,eacute:233,ecirc:234,egrave:232,eth:240,euml:235,iacute:237,icirc:238,igrave:236,iuml:239,ntilde:241,oacute:243,ocirc:244,ograve:242,oslash:248,otilde:245,ouml:246,szlig:223,thorn:254,uacute:250,ucirc:251,ugrave:249,uuml:252,yacute:253,yuml:255,copy:169,reg:174,nbsp:160,iexcl:161,cent:162,pound:163,curren:164,yen:165,brvbar:166,sect:167,uml:168,ordf:170,laquo:171,not:172,shy:173,macr:175,deg:176,plusmn:177,sup1:185,sup2:178,sup3:179,acute:180,micro:181,para:182,middot:183,cedil:184,ordm:186,raquo:187,frac14:188,frac12:189,frac34:190,iquest:191,times:215,divide:247,OElig:338,oelig:339,Scaron:352,scaron:353,Yuml:376,fnof:402,circ:710,tilde:732,Alpha:913,Beta:914,Gamma:915,Delta:916,Epsilon:917,Zeta:918,Eta:919,Theta:920,Iota:921,Kappa:922,Lambda:923,Mu:924,Nu:925,Xi:926,Omicron:927,Pi:928,Rho:929,Sigma:931,Tau:932,Upsilon:933,Phi:934,Chi:935,Psi:936,Omega:937,alpha:945,beta:946,gamma:947,delta:948,epsilon:949,zeta:950,eta:951,theta:952,iota:953,kappa:954,lambda:955,mu:956,nu:957,xi:958,omicron:959,pi:960,rho:961,sigmaf:962,sigma:963,tau:964,upsilon:965,phi:966,chi:967,psi:968,omega:969,thetasym:977,upsih:978,piv:982,ensp:8194,emsp:8195,thinsp:8201,zwnj:8204,zwj:8205,lrm:8206,rlm:8207,ndash:8211,mdash:8212,lsquo:8216,rsquo:8217,sbquo:8218,ldquo:8220,rdquo:8221,bdquo:8222,dagger:8224,Dagger:8225,bull:8226,hellip:8230,permil:8240,prime:8242,Prime:8243,lsaquo:8249,rsaquo:8250,oline:8254,frasl:8260,euro:8364,image:8465,weierp:8472,real:8476,trade:8482,alefsym:8501,larr:8592,uarr:8593,rarr:8594,darr:8595,harr:8596,crarr:8629,lArr:8656,uArr:8657,rArr:8658,dArr:8659,hArr:8660,forall:8704,part:8706,exist:8707,empty:8709,nabla:8711,isin:8712,notin:8713,ni:8715,prod:8719,sum:8721,minus:8722,lowast:8727,radic:8730,prop:8733,infin:8734,ang:8736,and:8743,or:8744,cap:8745,cup:8746,int:8747,there4:8756,sim:8764,cong:8773,asymp:8776,ne:8800,equiv:8801,le:8804,ge:8805,sub:8834,sup:8835,nsub:8836,sube:8838,supe:8839,oplus:8853,otimes:8855,perp:8869,sdot:8901,lceil:8968,rceil:8969,lfloor:8970,rfloor:8971,lang:9001,rang:9002,loz:9674,spades:9824,clubs:9827,hearts:9829,diams:9830},Object.keys(t.ENTITIES).forEach((function(e){var n=t.ENTITIES[e],r="number"==typeof n?String.fromCharCode(n):n;t.ENTITIES[e]=r})),t.STATE)t.STATE[t.STATE[I]]=I;function k(t,e,n){t[e]&&t[e](n)}function P(t,e,n){t.textNode&&R(t),k(t,e,n)}function R(t){t.textNode=O(t.opt,t.textNode),t.textNode&&k(t,"ontext",t.textNode),t.textNode=""}function O(t,e){return t.trim&&(e=e.trim()),t.normalize&&(e=e.replace(/\s+/g," ")),e}function M(t,e){return R(t),t.trackPosition&&(e+="\nLine: "+t.line+"\nColumn: "+t.column+"\nChar: "+t.c),e=new Error(e),t.error=e,k(t,"onerror",e),t}function L(t){return t.sawRoot&&!t.closedRoot&&D(t,"Unclosed root tag"),t.state!==C.BEGIN&&t.state!==C.BEGIN_WHITESPACE&&t.state!==C.TEXT&&M(t,"Unexpected end"),R(t),t.c="",t.closed=!0,k(t,"onend"),i.call(t,t.strict,t.opt),t}function D(t,e){if("object"!=typeof t||!(t instanceof i))throw new Error("bad call to strictFail");t.strict&&M(t,e)}function N(t){t.strict||(t.tagName=t.tagName[t.looseCase]());var e=t.tags[t.tags.length-1]||t,n=t.tag={name:t.tagName,attributes:{}};t.opt.xmlns&&(n.ns=e.ns),t.attribList.length=0,P(t,"onopentagstart",n)}function B(t,e){var n=t.indexOf(":")<0?["",t]:t.split(":"),r=n[0],i=n[1];return e&&"xmlns"===t&&(r="xmlns",i=""),{prefix:r,local:i}}function j(t){if(t.strict||(t.attribName=t.attribName[t.looseCase]()),-1!==t.attribList.indexOf(t.attribName)||t.tag.attributes.hasOwnProperty(t.attribName))t.attribName=t.attribValue="";else{if(t.opt.xmlns){var e=B(t.attribName,!0),n=e.prefix,r=e.local;if("xmlns"===n)if("xml"===r&&t.attribValue!==p)D(t,"xml: prefix must be bound to "+p+"\nActual: "+t.attribValue);else if("xmlns"===r&&t.attribValue!==m)D(t,"xmlns: prefix must be bound to "+m+"\nActual: "+t.attribValue);else{var i=t.tag,o=t.tags[t.tags.length-1]||t;i.ns===o.ns&&(i.ns=Object.create(o.ns)),i.ns[r]=t.attribValue}t.attribList.push([t.attribName,t.attribValue])}else t.tag.attributes[t.attribName]=t.attribValue,P(t,"onattribute",{name:t.attribName,value:t.attribValue});t.attribName=t.attribValue=""}}function z(t,e){if(t.opt.xmlns){var n=t.tag,r=B(t.tagName);n.prefix=r.prefix,n.local=r.local,n.uri=n.ns[r.prefix]||"",n.prefix&&!n.uri&&(D(t,"Unbound namespace prefix: "+JSON.stringify(t.tagName)),n.uri=r.prefix);var i=t.tags[t.tags.length-1]||t;n.ns&&i.ns!==n.ns&&Object.keys(n.ns).forEach((function(e){P(t,"onopennamespace",{prefix:e,uri:n.ns[e]})}));for(var o=0,a=t.attribList.length;o<a;o++){var s=t.attribList[o],l=s[0],u=s[1],c=B(l,!0),d=c.prefix,f=c.local,h=""===d?"":n.ns[d]||"",p={name:l,value:u,prefix:d,local:f,uri:h};d&&"xmlns"!==d&&!h&&(D(t,"Unbound namespace prefix: "+JSON.stringify(d)),p.uri=d),t.tag.attributes[l]=p,P(t,"onattribute",p)}t.attribList.length=0}t.tag.isSelfClosing=!!e,t.sawRoot=!0,t.tags.push(t.tag),P(t,"onopentag",t.tag),e||(t.noscript||"script"!==t.tagName.toLowerCase()?t.state=C.TEXT:t.state=C.SCRIPT,t.tag=null,t.tagName=""),t.attribName=t.attribValue="",t.attribList.length=0}function F(t){if(!t.tagName)return D(t,"Weird empty close tag."),t.textNode+="</>",void(t.state=C.TEXT);if(t.script){if("script"!==t.tagName)return t.script+="</"+t.tagName+">",t.tagName="",void(t.state=C.SCRIPT);P(t,"onscript",t.script),t.script=""}var e=t.tags.length,n=t.tagName;t.strict||(n=n[t.looseCase]());for(var r=n;e--&&t.tags[e].name!==r;)D(t,"Unexpected close tag");if(e<0)return D(t,"Unmatched closing tag: "+t.tagName),t.textNode+="</"+t.tagName+">",void(t.state=C.TEXT);t.tagName=n;for(var i=t.tags.length;i-- >e;){var o=t.tag=t.tags.pop();t.tagName=t.tag.name,P(t,"onclosetag",t.tagName);var a={};for(var s in o.ns)a[s]=o.ns[s];var l=t.tags[t.tags.length-1]||t;t.opt.xmlns&&o.ns!==l.ns&&Object.keys(o.ns).forEach((function(e){var n=o.ns[e];P(t,"onclosenamespace",{prefix:e,uri:n})}))}0===e&&(t.closedRoot=!0),t.tagName=t.attribValue=t.attribName="",t.attribList.length=0,t.state=C.TEXT}function U(t){var e,n=t.entity,r=n.toLowerCase(),i="";return t.ENTITIES[n]?t.ENTITIES[n]:t.ENTITIES[r]?t.ENTITIES[r]:("#"===(n=r).charAt(0)&&("x"===n.charAt(1)?(n=n.slice(2),i=(e=parseInt(n,16)).toString(16)):(n=n.slice(1),i=(e=parseInt(n,10)).toString(10))),n=n.replace(/^0+/,""),i.toLowerCase()!==n?(D(t,"Invalid character entity"),"&"+t.entity+";"):String.fromCodePoint(e))}function q(t,e){"<"===e?(t.state=C.OPEN_WAKA,t.startTagPosition=t.position):E(s,e)&&(D(t,"Non-whitespace before first tag."),t.textNode=e,t.state=C.TEXT)}function G(t,e){var n="";return e<t.length&&(n=t.charAt(e)),n}C=t.STATE,String.fromCodePoint||(x=String.fromCharCode,S=Math.floor,T=function(){var t,e,n=[],r=-1,i=arguments.length;if(!i)return"";for(var o="";++r<i;){var a=Number(arguments[r]);if(!isFinite(a)||a<0||a>1114111||S(a)!==a)throw RangeError("Invalid code point: "+a);a<=65535?n.push(a):(t=55296+((a-=65536)>>10),e=a%1024+56320,n.push(t,e)),(r+1===i||n.length>16384)&&(o+=x.apply(null,n),n.length=0)}return o},Object.defineProperty?Object.defineProperty(String,"fromCodePoint",{value:T,configurable:!0,writable:!0}):String.fromCodePoint=T)}(e)},6739:function(t,e,n){!function(t,e,n,r,i){function o(t){if("contents"in t)for(var e=("styleAttrs"in t?t.styleAttrs[r.byName.ruby.qname]:null),n="span"===t.kind&&("container"===e||"textContainer"===e||"baseContainer"===e),i=t.contents.length-1;i>=0;i--)!n||"styleAttrs"in t.contents[i]&&r.byName.ruby.qname in t.contents[i].styleAttrs?o(t.contents[i]):delete t.contents[i]}function a(t,e,n,r){var i=r&&"seq"===r.timeContainer,o=0;r&&(o=i&&n?n.end:r.begin),e.begin=e.explicit_begin?e.explicit_begin+o:o;var s=e.begin,l=null;if("sets"in e)for(var u=0;u<e.sets.length;u++)a(t,e.sets[u],l,e),s="seq"===e.timeContainer?e.sets[u].end:Math.max(s,e.sets[u].end),l=e.sets[u];if("contents"in e){if("contents"in e)for(var c=0;c<e.contents.length;c++)a(t,e.contents[c],l,e),s="seq"===e.timeContainer?e.contents[c].end:Math.max(s,e.contents[c].end),l=e.contents[c]}else s=i?e.begin:Number.POSITIVE_INFINITY;null!==e.explicit_end&&null!==e.explicit_dur?e.end=Math.min(e.begin+e.explicit_dur,o+e.explicit_end):null===e.explicit_end&&null!==e.explicit_dur?e.end=e.begin+e.explicit_dur:null!==e.explicit_end&&null===e.explicit_dur?e.end=o+e.explicit_end:e.end=s,delete e.explicit_begin,delete e.explicit_dur,delete e.explicit_end,t._registerEvent(e)}function s(t){this.node=t}function l(){this.events=[],this.head=new u,this.body=null}function u(){this.styling=new c,this.layout=new h}function c(){this.styles={},this.initials={}}function d(){this.id=null,this.styleAttrs=null,this.styleRefs=null}function f(){this.styleAttrs=null}function h(){this.regions={}}function p(t,e){m.call(this,"image"),this.src=t,this.type=e}function m(t){this.kind=t}function g(t){this.id=t}function v(t){this.regionID=t}function y(t){this.styleAttrs=t}function b(t){this.sets=t}function _(t){this.contents=t}function w(t,e,n){this.explicit_begin=t,this.explicit_end=e,this.explicit_dur=n}function A(){m.call(this,"body")}function E(){m.call(this,"div")}function x(){m.call(this,"p")}function S(){m.call(this,"span")}function T(){m.call(this,"span")}function C(){m.call(this,"br")}function I(){}function k(){}function P(t){return t&&"xml:id"in t.attributes&&t.attributes["xml:id"].value||null}function R(t){return t&&"style"in t.attributes?t.attributes.style.value.split(" "):[]}function O(t,e){var n={};if(null!==t)for(var i in t.attributes){var o=t.attributes[i].uri+" "+t.attributes[i].local,a=r.byQName[o];if(void 0!==a){var s=a.parse(t.attributes[i].value);null!==s?(n[o]=s,a===r.byName.zIndex&&j(e,"zIndex attribute present but not used by IMSC1 since regions do not overlap")):z(e,"Cannot parse styling attribute "+o+" --\x3e "+t.attributes[i].value)}}return n}function M(t,e,n){for(var r in t.attributes)if(t.attributes[r].uri===e&&t.attributes[r].local===n)return t.attributes[r].value;return null}function L(t,e,n){var r,i=null;return null!==(r=/^(\d+(?:\.\d+)?)f$/.exec(n))?null!==e&&(i=parseFloat(r[1])/e):null!==(r=/^(\d+(?:\.\d+)?)t$/.exec(n))?null!==t&&(i=parseFloat(r[1])/t):null!==(r=/^(\d+(?:\.\d+)?)ms$/.exec(n))?i=parseFloat(r[1])/1e3:null!==(r=/^(\d+(?:\.\d+)?)s$/.exec(n))?i=parseFloat(r[1]):null!==(r=/^(\d+(?:\.\d+)?)h$/.exec(n))?i=3600*parseFloat(r[1]):null!==(r=/^(\d+(?:\.\d+)?)m$/.exec(n))?i=60*parseFloat(r[1]):null!==(r=/^(\d{2,}):(\d\d):(\d\d(?:\.\d+)?)$/.exec(n))?i=3600*parseInt(r[1])+60*parseInt(r[2])+parseFloat(r[3]):null!==(r=/^(\d{2,}):(\d\d):(\d\d)\:(\d{2,})$/.exec(n))&&null!==e&&(i=3600*parseInt(r[1])+60*parseInt(r[2])+parseInt(r[3])+(null===r[4]?0:parseInt(r[4])/e)),i}function D(t,e,n){for(;e.styleRefs.length>0;){var r=e.styleRefs.pop();r in t.styles?(D(t,t.styles[r],n),B(t.styles[r].styleAttrs,e.styleAttrs)):z(n,"Non-existant style id referenced")}}function N(t,e,n,r){for(var i=e.length-1;i>=0;i--){var o=e[i];o in t.styles?B(t.styles[o].styleAttrs,n):z(r,"Non-existant style id referenced")}}function B(t,e){for(var n in t)t.hasOwnProperty(n)&&(n in e||(e[n]=t[n]))}function j(t,e){if(t&&t.warn&&t.warn(e))throw e}function z(t,e){if(t&&t.error&&t.error(e))throw e}function F(t,e){throw t&&t.fatal&&t.fatal(e),e}function U(t,e){for(var n,r=0,i=t.length-1;r<=i;){var o=t[n=Math.floor((r+i)/2)];if(o<e)r=n+1;else{if(!(o>e))return{found:!0,index:n};i=n-1}}return{found:!1,index:r}}t.fromXML=function(t,i,m){var g=e.parser(!0,{xmlns:!0}),v=[],y=[],b=[],_=0,w=null;g.onclosetag=function(t){if(v[0]instanceof I)null!==w.head&&null!==w.head.styling&&N(w.head.styling,v[0].styleRefs,v[0].styleAttrs,i),delete v[0].styleRefs;else if(v[0]instanceof c)for(var e in v[0].styles)v[0].styles.hasOwnProperty(e)&&D(v[0],v[0].styles[e],i);else if(v[0]instanceof x||v[0]instanceof S){if(v[0].contents.length>1){var r,o=[v[0].contents[0]];for(r=1;r<v[0].contents.length;r++)v[0].contents[r]instanceof T&&o[o.length-1]instanceof T?o[o.length-1].text+=v[0].contents[r].text:o.push(v[0].contents[r]);v[0].contents=o}v[0]instanceof S&&1===v[0].contents.length&&v[0].contents[0]instanceof T&&(v[0].text=v[0].contents[0].text,delete v[0].contents)}else v[0]instanceof s&&(v[0].node.uri===n.ns_tt&&"metadata"===v[0].node.local?_--:_>0&&m&&"onCloseTag"in m&&m.onCloseTag());b.shift(),y.shift(),v.shift()},g.ontext=function(t){if(void 0===v[0]);else if(v[0]instanceof S||v[0]instanceof x){if(v[0]instanceof S){var e=v[0].styleAttrs[r.byName.ruby.qname];if("container"===e||"textContainer"===e||"baseContainer"===e)return}var n=new T;n.initFromText(w,v[0],t,y[0],b[0],i),v[0].contents.push(n)}else v[0]instanceof s&&_>0&&m&&"onText"in m&&m.onText(t)},g.onopentag=function(t){var e=t.attributes["xml:space"];e?b.unshift(e.value):0===b.length?b.unshift("default"):b.unshift(b[0]);var o=t.attributes["xml:lang"];if(o?y.unshift(o.value):0===y.length?y.unshift(""):y.unshift(y[0]),t.uri===n.ns_tt)if("tt"===t.local)null!==w&&F(i,"Two <tt> elements at ("+this.line+","+this.column+")"),(w=new l).initFromNode(t,y[0],i),v.unshift(w);else if("head"===t.local)v[0]instanceof l||F(i,"Parent of <head> element is not <tt> at ("+this.line+","+this.column+")"),v.unshift(w.head);else if("styling"===t.local)v[0]instanceof u||F(i,"Parent of <styling> element is not <head> at ("+this.line+","+this.column+")"),v.unshift(w.head.styling);else if("style"===t.local){var a;v[0]instanceof c?((a=new d).initFromNode(t,i),a.id?w.head.styling.styles[a.id]=a:z(i,"<style> element missing @id attribute"),v.unshift(a)):v[0]instanceof I?((a=new d).initFromNode(t,i),B(a.styleAttrs,v[0].styleAttrs),v.unshift(a)):F(i,"Parent of <style> element is not <styling> or <region> at ("+this.line+","+this.column+")")}else if("initial"===t.local){var g;if(v[0]instanceof c){for(var T in(g=new f).initFromNode(t,i),g.styleAttrs)g.styleAttrs.hasOwnProperty(T)&&(w.head.styling.initials[T]=g.styleAttrs[T]);v.unshift(g)}else F(i,"Parent of <initial> element is not <styling> at ("+this.line+","+this.column+")")}else if("layout"===t.local)v[0]instanceof u||F(i,"Parent of <layout> element is not <head> at "+this.line+","+this.column+")"),v.unshift(w.head.layout);else if("region"===t.local){v[0]instanceof h||F(i,"Parent of <region> element is not <layout> at "+this.line+","+this.column+")");var P=new I;P.initFromNode(w,t,y[0],i),!P.id||P.id in w.head.layout.regions?z(i,"Ignoring <region> with duplicate or missing @id at "+this.line+","+this.column+")"):w.head.layout.regions[P.id]=P,v.unshift(P)}else if("body"===t.local){v[0]instanceof l||F(i,"Parent of <body> element is not <tt> at "+this.line+","+this.column+")"),null!==w.body&&F(i,"Second <body> element at "+this.line+","+this.column+")");var R=new A;R.initFromNode(w,t,y[0],i),w.body=R,v.unshift(R)}else if("div"===t.local){v[0]instanceof E||v[0]instanceof A||F(i,"Parent of <div> element is not <body> or <div> at "+this.line+","+this.column+")");var O=new E;O.initFromNode(w,v[0],t,y[0],i);var M=O.styleAttrs[r.byName.backgroundImage.qname];M&&(O.contents.push(new p(M)),delete O.styleAttrs[r.byName.backgroundImage.qname]),v[0].contents.push(O),v.unshift(O)}else if("image"===t.local){v[0]instanceof E||F(i,"Parent of <image> element is not <div> at "+this.line+","+this.column+")");var L=new p;L.initFromNode(w,v[0],t,y[0],i),v[0].contents.push(L),v.unshift(L)}else if("p"===t.local){v[0]instanceof E||F(i,"Parent of <p> element is not <div> at "+this.line+","+this.column+")");var D=new x;D.initFromNode(w,v[0],t,y[0],i),v[0].contents.push(D),v.unshift(D)}else if("span"===t.local){v[0]instanceof S||v[0]instanceof x||F(i,"Parent of <span> element is not <span> or <p> at "+this.line+","+this.column+")");var N=new S;N.initFromNode(w,v[0],t,y[0],b[0],i),v[0].contents.push(N),v.unshift(N)}else if("br"===t.local){v[0]instanceof S||v[0]instanceof x||F(i,"Parent of <br> element is not <span> or <p> at "+this.line+","+this.column+")");var j=new C;j.initFromNode(w,v[0],t,y[0],i),v[0].contents.push(j),v.unshift(j)}else if("set"===t.local){v[0]instanceof S||v[0]instanceof x||v[0]instanceof E||v[0]instanceof A||v[0]instanceof I||v[0]instanceof C||F(i,"Parent of <set> element is not a content element or a region at "+this.line+","+this.column+")");var U=new k;U.initFromNode(w,v[0],t,i),v[0].sets.push(U),v.unshift(U)}else v.unshift(new s(t));else v.unshift(new s(t));if(v[0]instanceof s)if(t.uri===n.ns_tt&&"metadata"===t.local)_++;else if(_>0&&m&&"onOpenTag"in m){var q=[];for(var G in t.attributes)q[t.attributes[G].uri+" "+t.attributes[G].local]={uri:t.attributes[G].uri,local:t.attributes[G].local,value:t.attributes[G].value};m.onOpenTag(t.uri,t.local,q)}},g.write(t).close(),delete w.head.styling.styles;var P=!1;for(var R in w.head.layout.regions)if(w.head.layout.regions.hasOwnProperty(R)){P=!0;break}if(!P){var O=I.prototype.createDefaultRegion(w.lang);w.head.layout.regions[O.id]=O}for(var M in w.head.layout.regions)w.head.layout.regions.hasOwnProperty(M)&&a(w,w.head.layout.regions[M],null,null);return w.body&&a(w,w.body,null,null),w.body&&o(w.body),w},l.prototype.initFromNode=function(t,e,r){var o=function(t,e){var r=M(t,n.ns_ttp,"cellResolution"),i=15,o=32;if(null!==r){var a=/(\d+) (\d+)/.exec(r);null!==a?(o=parseInt(a[1]),i=parseInt(a[2])):j(e,"Malformed cellResolution value (using initial value instead)")}return{w:o,h:i}}(t,r);this.cellLength={h:new i.ComputedLength(0,1/o.h),w:new i.ComputedLength(1/o.w,0)};var a=function(t,e){var r,i=M(t,n.ns_ttp,"frameRate"),o=30;null!==i&&(null!==(r=/(\d+)/.exec(i))?o=parseInt(r[1]):j(e,"Malformed frame rate attribute (using initial value instead)"));var a=M(t,n.ns_ttp,"frameRateMultiplier"),s=1;null!==a&&(null!==(r=/(\d+) (\d+)/.exec(a))?s=parseInt(r[1])/parseInt(r[2]):j(e,"Malformed frame rate multiplier attribute (using initial value instead)"));var l=s*o,u=1,c=M(t,n.ns_ttp,"tickRate");return null===c?null!==i&&(u=l):null!==(r=/(\d+)/.exec(c))?u=parseInt(r[1]):j(e,"Malformed tick rate attribute (using initial value instead)"),{effectiveFrameRate:l,tickRate:u}}(t,r);this.effectiveFrameRate=a.effectiveFrameRate,this.tickRate=a.tickRate,this.aspectRatio=function(t,e){var r=M(t,n.ns_ittp,"aspectRatio");null===r&&(r=M(t,n.ns_ttp,"displayAspectRatio"));var i=null;if(null!==r){var o=/(\d+)\s+(\d+)/.exec(r);if(null!==o){var a=parseInt(o[1]),s=parseInt(o[2]);0!==a&&0!==s?i=a/s:z(e,"Illegal aspectRatio values (ignoring)")}else z(e,"Malformed aspectRatio attribute (ignoring)")}return i}(t,r);var s=M(t,n.ns_ttp,"timeBase");null!==s&&"media"!==s&&F(r,"Unsupported time base");var l=function(t,e){var r=M(t,n.ns_tts,"extent");if(null===r)return null;var o=r.split(" ");if(2!==o.length)return j(e,"Malformed extent (ignoring)"),null;var a=i.parseLength(o[0]),s=i.parseLength(o[1]);return s&&a?{h:s,w:a}:(j(e,"Malformed extent values (ignoring)"),null)}(t,r);null===l?this.pxLength={h:null,w:null}:("px"===l.h.unit&&"px"===l.w.unit||F(r,"Extent on TT must be in px or absent"),this.pxLength={h:new i.ComputedLength(0,1/l.h.value),w:new i.ComputedLength(1/l.w.value,0)}),this.dimensions={h:new i.ComputedLength(0,1),w:new i.ComputedLength(1,0)},this.lang=e},l.prototype._registerEvent=function(t){if(!(t.end<=t.begin)){var e=U(this.events,t.begin);if(e.found||this.events.splice(e.index,0,t.begin),t.end!==Number.POSITIVE_INFINITY){var n=U(this.events,t.end);n.found||this.events.splice(n.index,0,t.end)}}},l.prototype.getMediaTimeRange=function(){return[this.events[0],this.events[this.events.length-1]]},l.prototype.getMediaTimeEvents=function(){return this.events},d.prototype.initFromNode=function(t,e){this.id=P(t),this.styleAttrs=O(t,e),this.styleRefs=R(t)},f.prototype.initFromNode=function(t,e){for(var r in this.styleAttrs={},t.attributes)if(t.attributes[r].uri===n.ns_itts||t.attributes[r].uri===n.ns_ebutts||t.attributes[r].uri===n.ns_tts){var i=t.attributes[r].uri+" "+t.attributes[r].local;this.styleAttrs[i]=t.attributes[r].value}},p.prototype.initFromNode=function(t,e,n,r,i){this.src="src"in n.attributes?n.attributes.src.value:null,this.src||z(i,"Invalid image@src attribute"),this.type="type"in n.attributes?n.attributes.type.value:null,this.type||z(i,"Invalid image@type attribute"),y.prototype.initFromNode.call(this,t,e,n,i),w.prototype.initFromNode.call(this,t,e,n,i),b.prototype.initFromNode.call(this,t,e,n,i),v.prototype.initFromNode.call(this,t,e,n,i),this.lang=r},g.prototype.initFromNode=function(t,e,n,r){this.id=P(n)},v.prototype.initFromNode=function(t,e,n,r){this.regionID=function(t){return t&&"region"in t.attributes?t.attributes.region.value:""}(n)},y.prototype.initFromNode=function(t,e,n,r){this.styleAttrs=O(n,r),null!==t.head&&null!==t.head.styling&&N(t.head.styling,R(n),this.styleAttrs,r)},b.prototype.initFromNode=function(t,e,n,r){this.sets=[]},_.prototype.initFromNode=function(t,e,n,r){this.contents=[]},w.prototype.initFromNode=function(t,e,n,r){var i=function(t,e,n,r){var i=null;n&&"begin"in n.attributes&&null===(i=L(t.tickRate,t.effectiveFrameRate,n.attributes.begin.value))&&j(r,"Malformed begin value "+n.attributes.begin.value+" (using 0)");var o=null;n&&"dur"in n.attributes&&null===(o=L(t.tickRate,t.effectiveFrameRate,n.attributes.dur.value))&&j(r,"Malformed dur value "+n.attributes.dur.value+" (ignoring)");var a=null;return n&&"end"in n.attributes&&null===(a=L(t.tickRate,t.effectiveFrameRate,n.attributes.end.value))&&j(r,"Malformed end value (ignoring)"),{explicit_begin:i,explicit_end:a,explicit_dur:o}}(t,0,n,r);this.explicit_begin=i.explicit_begin,this.explicit_end=i.explicit_end,this.explicit_dur=i.explicit_dur,this.timeContainer=function(t,e){var n=t&&"timeContainer"in t.attributes?t.attributes.timeContainer.value:null;return n&&"par"!==n?"seq"===n?"seq":(z(e,"Illegal value of timeContainer (assuming 'par')"),"par"):"par"}(n,r)},A.prototype.initFromNode=function(t,e,n,r){y.prototype.initFromNode.call(this,t,null,e,r),w.prototype.initFromNode.call(this,t,null,e,r),b.prototype.initFromNode.call(this,t,null,e,r),v.prototype.initFromNode.call(this,t,null,e,r),_.prototype.initFromNode.call(this,t,null,e,r),this.lang=n},E.prototype.initFromNode=function(t,e,n,r,i){y.prototype.initFromNode.call(this,t,e,n,i),w.prototype.initFromNode.call(this,t,e,n,i),b.prototype.initFromNode.call(this,t,e,n,i),v.prototype.initFromNode.call(this,t,e,n,i),_.prototype.initFromNode.call(this,t,e,n,i),this.lang=r},x.prototype.initFromNode=function(t,e,n,r,i){y.prototype.initFromNode.call(this,t,e,n,i),w.prototype.initFromNode.call(this,t,e,n,i),b.prototype.initFromNode.call(this,t,e,n,i),v.prototype.initFromNode.call(this,t,e,n,i),_.prototype.initFromNode.call(this,t,e,n,i),this.lang=r},S.prototype.initFromNode=function(t,e,n,r,i,o){y.prototype.initFromNode.call(this,t,e,n,o),w.prototype.initFromNode.call(this,t,e,n,o),b.prototype.initFromNode.call(this,t,e,n,o),v.prototype.initFromNode.call(this,t,e,n,o),_.prototype.initFromNode.call(this,t,e,n,o),this.space=i,this.lang=r},T.prototype.initFromText=function(t,e,n,r,i,o){w.prototype.initFromNode.call(this,t,e,null,o),this.text=n,this.space=i,this.lang=r},C.prototype.initFromNode=function(t,e,n,r,i){v.prototype.initFromNode.call(this,t,e,n,i),w.prototype.initFromNode.call(this,t,e,n,i),this.lang=r},I.prototype.createDefaultRegion=function(t){var e=new I;return g.call(e,""),y.call(e,{}),b.call(e,[]),w.call(e,0,Number.POSITIVE_INFINITY,null),this.lang=t,e},I.prototype.initFromNode=function(t,e,n,r){g.prototype.initFromNode.call(this,t,null,e,r),w.prototype.initFromNode.call(this,t,null,e,r),b.prototype.initFromNode.call(this,t,null,e,r),this.styleAttrs=O(e,r),this.styleRefs=R(e),this.lang=n},k.prototype.initFromNode=function(t,e,n,r){w.prototype.initFromNode.call(this,t,e,n,r);var i=O(n,r);for(var o in this.qname=null,this.value=null,i)if(i.hasOwnProperty(o)){if(this.qname){z(r,"More than one style specified on set");break}this.qname=o,this.value=i[o]}}}(e,"undefined"==typeof sax?n(5474):sax,"undefined"==typeof imscNames?n(977):imscNames,"undefined"==typeof imscStyles?n(1219):imscStyles,"undefined"==typeof imscUtils?n(6404):imscUtils)},1612:function(t,e,n){var r=/firefox/i.test(navigator.userAgent);!function(t,e,n){function i(t,e,d,h){var p;if("region"===d.kind)(p=document.createElement("div")).style.position="absolute";else if("body"===d.kind)p=document.createElement("div");else if("div"===d.kind)p=document.createElement("div");else if("image"===d.kind){if(p=document.createElement("img"),null!==t.imgResolver&&null!==d.src){var v=t.imgResolver(d.src,p);v&&(p.src=v),p.height=t.regionH,p.width=t.regionW}}else if("p"===d.kind)p=document.createElement("p");else if("span"===d.kind)if("container"===d.styleAttrs[n.byName.ruby.qname])p=document.createElement("ruby"),t.ruby=!0;else if("base"===d.styleAttrs[n.byName.ruby.qname])p=document.createElement("span");else if("text"===d.styleAttrs[n.byName.ruby.qname])p=document.createElement("rt");else if("baseContainer"===d.styleAttrs[n.byName.ruby.qname])p=document.createElement("rbc");else if("textContainer"===d.styleAttrs[n.byName.ruby.qname])p=document.createElement("rtc");else{if("delimiter"===d.styleAttrs[n.byName.ruby.qname])return;p=document.createElement("span")}else"br"===d.kind&&(p=document.createElement("br"));if(p){if(d.lang&&("region"!==d.kind&&d.lang===h.lang||(p.lang=d.lang)),e.appendChild(p),p.style.margin="0","region"===d.kind){var _=d.styleAttrs[n.byName.writingMode.qname];"lrtb"===_||"lr"===_?(t.ipd="lr",t.bpd="tb"):"rltb"===_||"rl"===_?(t.ipd="rl",t.bpd="tb"):"tblr"===_?(t.ipd="tb",t.bpd="lr"):"tbrl"!==_&&"tb"!==_||(t.ipd="tb",t.bpd="rl")}else if("p"===d.kind&&"tb"===t.bpd){var w=d.styleAttrs[n.byName.direction.qname];t.ipd="ltr"===w?"lr":"rl"}for(var A=0;A<f.length;A++){var E=f[A],x=d.styleAttrs[E.qname];void 0!==x&&null!==E.map&&E.map(t,p,d,x)}var S=p,T=d.styleAttrs[n.byName.linePadding.qname];if(T&&!T.isZero()){var C=T.toUsedLength(t.w,t.h);if(C>0){var I=Math.ceil(C)+"px";"tb"===t.bpd?(S.style.paddingLeft=I,S.style.paddingRight=I):(S.style.paddingTop=I,S.style.paddingBottom=I),t.lp=T}}var k=d.styleAttrs[n.byName.multiRowAlign.qname];if(k&&"auto"!==k){var P=document.createElement("span");P.style.display="inline-block",P.style.textAlign=k,p.appendChild(P),S=P,t.mra=k}var R=d.styleAttrs[n.byName.rubyReserve.qname];if(R&&"none"!==R[0]&&(t.rubyReserve=R),d.styleAttrs[n.byName.fillLineGap.qname]&&(t.flg=!0),"span"===d.kind&&d.text){var O=d.styleAttrs[n.byName.textEmphasis.qname];if(O&&"none"!==O.style&&(t.textEmphasis=!0),n.byName.textCombine.qname in d.styleAttrs&&"all"===d.styleAttrs[n.byName.textCombine.qname])p.textContent=d.text,p._isd_element=d,O&&c(t,p,0,O);else for(var M="",L=0;L<d.text.length;L++){M+=d.text.charAt(L);var D=d.text.charCodeAt(L);if(D<55296||D>56319||L===d.text.length-1){var N=document.createElement("span");N.textContent=M,O&&c(t,N,0,O),p.appendChild(N),M="",N._isd_element=d}}}if("contents"in d)for(var B=0;B<d.contents.length;B++)i(t,S,d.contents[B],d);var j=[];if("p"===d.kind&&(u(t,S,j,null),t.rubyReserve&&(function(t,e){for(var n=0;n<t.length;n++){var r,i,o=document.createElement("ruby"),a=document.createElement("span");a.textContent="",o.appendChild(a);var s,l=e.rubyReserve[1].toUsedLength(e.w,e.h)+"px";"both"===e.rubyReserve[0]||"outside"===e.rubyReserve[0]&&1==t.length?((r=document.createElement("rtc")).style[g]=m?"after":"under",r.textContent="",r.style.fontSize=l,(i=document.createElement("rtc")).style[g]=m?"before":"over",i.textContent="",i.style.fontSize=l,o.appendChild(r),o.appendChild(i)):((r=document.createElement("rtc")).textContent="",r.style.fontSize=l,s="after"===e.rubyReserve[0]||"outside"===e.rubyReserve[0]&&n>0?m?"after":"tb"===e.bpd||"rl"===e.bpd?"under":"over":m?"before":"tb"===e.bpd||"rl"===e.bpd?"over":"under",r.style[g]=s,o.appendChild(r));for(var u=null,c=0;c<t[n].rbc.length;c++)if("ruby"===t[n].rbc[c].localName){u=t[n].rbc[c];for(var d=0;d<u.style.length;d++)o.style.setProperty(u.style.item(d),u.style.getPropertyValue(u.style.item(d)));break}(u=u||t[n].elements[0].node).parentElement.insertBefore(o,u)}}(j,t),t.rubyReserve=null),(t.ruby||t.rubyReserve)&&(function(t,e){for(var n=0;n<t.length;n++)for(var r=0;r<t[n].rbc.length;r++){var i;t[n].rbc[r].style[g]||(i=m?0===n?"before":"after":"tb"===e.bpd||"rl"===e.bpd?0===n?"over":"under":0===n?"under":"over",t[n].rbc[r].style[g]=i)}}(j,t),t.ruby=null),t.textEmphasis&&(function(t,e){for(var n=0;n<t.length;n++)for(var r=0;r<t[n].te.length;r++){var i;t[n].te[r].style[y]&&"none"!==t[n].te[r].style[y]||(i="tb"===e.bpd?0===n?"left over":"left under":"rl"===e.bpd?0===n?"right under":"left under":0===n?"left under":"right under",t[n].te[r].style[y]=i)}}(j,t),t.textEmphasis=null),t.mra&&(function(t){for(var e=0;e<t.length-1;e++){var n=t[e].elements.length;if(0!==n&&!1===t[e].br){var r=document.createElement("br"),i=t[e].elements[n-1].node;i.parentElement.insertBefore(r,i.nextSibling)}}}(j),t.mra=null),t.lp&&(function(t,e,n){if(null!==t)for(var i=0;i<t.length;i++){var o=t[i].elements.length,a=Math.ceil(e)+"px",s="-"+Math.ceil(e)+"px";if(0!==o){var l=t[i].elements[t[i].start_elem],u=t[i].elements[t[i].end_elem];if(l===u){var c=l.node.getBoundingClientRect();if(0==c.width||0==c.height)continue}"lr"===n.ipd?(l.node.style.marginLeft=s,l.node.style.paddingLeft=a):"rl"===n.ipd?(l.node.style.paddingRight=a,l.node.style.marginRight=s):"tb"===n.ipd&&(l.node.style.paddingTop=a,l.node.style.marginTop=s),"lr"===n.ipd?(r||(u.node.style.marginRight=s),u.node.style.paddingRight=a):"rl"===n.ipd?(u.node.style.paddingLeft=a,r||(u.node.style.marginLeft=s)):"tb"===n.ipd&&(u.node.style.paddingBottom=a,u.node.style.marginBottom=s)}}}(j,t.lp.toUsedLength(t.w,t.h),t),t.lp=null),function(t,e){for(var n=0;n<t.length;n++)for(var r=t[n],i=1;i<r.elements.length;){var s=r.elements[i-1],l=r.elements[i];a(s.node,l.node,e)?r.elements.splice(i,1):i++}for(var u,c,d=[],f=0;f<t.length;f++)for(var h=0;h<t[f].elements.length;h++)(c=o(u=t[f].elements[h].node,d,!1))&&(u.style.backgroundColor=c);for(var p=0;p<d.length;p++)d[p].style.backgroundColor=""}(j,t),t.flg)){var z=l(S.getBoundingClientRect(),t);!function(t,e,n,r){for(var i=Math.sign(n-e),o=0;o<=t.length;o++){var a,s,l,u;if(a=0===o?Math.round(e):o===t.length?Math.round(n):Math.round((t[o-1].after+t[o].before)/2),o>0&&t[o-1])for(l=0;l<t[o-1].elements.length;l++)s=i*(a-(u=t[o-1].elements[l]).after)+"px","lr"===r.bpd?u.node.style.paddingRight=s:"rl"===r.bpd?u.node.style.paddingLeft=s:"tb"===r.bpd&&(u.node.style.paddingBottom=s);if(o<t.length)for(l=0;l<t[o].elements.length;l++)s=i*((u=t[o].elements[l]).before-a)+"px","lr"===r.bpd?u.node.style.paddingLeft=s:"rl"===r.bpd?u.node.style.paddingRight=s:"tb"===r.bpd&&(u.node.style.paddingTop=s)}}(j,z.before,z.after,t),t.flg=null}if("region"===d.kind&&"tb"===t.bpd&&t.enableRollUp&&d.contents.length>0&&"after"===d.styleAttrs[n.byName.displayAlign.qname]){u(t,S,j,null);var F=new s(""===d.id?"_":d.id,j);if(t.currentISDState[F.id]=F,t.previousISDState&&F.id in t.previousISDState&&t.previousISDState[F.id].plist.length>0&&F.plist.length>1&&F.plist[F.plist.length-2].text===t.previousISDState[F.id].plist[t.previousISDState[F.id].plist.length-1].text){var U=p.firstElementChild,q=F.plist[F.plist.length-1].after-F.plist[F.plist.length-1].before;U.style.bottom="-"+q+"px",U.style.transition="transform 0.4s",U.style.position="relative",U.style.transform="translateY(-"+q+"px)"}}}else b(t.errorHandler,"Error processing ISD element kind: "+d.kind)}function o(t,e,n){return t.style.backgroundColor?(n&&!e.includes(t)&&e.push(t),t.style.backgroundColor):"SPAN"===t.parentElement.nodeName||"RUBY"===t.parentElement.nodeName||"RBC"===t.parentElement.nodeName||"RTC"===t.parentElement.nodeName||"RT"===t.parentElement.nodeName?o(t.parentElement,e,!0):void 0}function a(t,e,n){if("SPAN"===t.tagName&&"SPAN"===e.tagName&&t._isd_element===e._isd_element){if(!t._isd_element)return b(n.errorHandler,"Internal error: HTML span is not linked to a source element; cannot merge spans."),!1;t.textContent+=e.textContent;for(var r=0;r<e.style.length;r++){var i=e.style[r];(i.indexOf("border")>=0||i.indexOf("padding")>=0||i.indexOf("margin")>=0)&&(t.style[i]=e.style[i])}return e.parentElement.removeChild(e),!0}return!1}function s(t,e){this.id=t,this.plist=e}function l(t,e){var n={before:null,after:null,start:null,end:null};return"tb"===e.bpd?(n.before=t.top,n.after=t.bottom,"lr"===e.ipd?(n.start=t.left,n.end=t.right):(n.start=t.right,n.end=t.left)):"lr"===e.bpd?(n.before=t.left,n.after=t.right,n.start=t.top,n.end=t.bottom):"rl"===e.bpd&&(n.before=t.right,n.after=t.left,n.start=t.top,n.end=t.bottom),n}function u(t,e,n,r){if("rt"!==e.localName&&"rtc"!==e.localName){var i,o,a,s,c=e.style.backgroundColor||r;if(0===e.childElementCount)if("span"===e.localName||"rb"===e.localName){var d=l(e.getBoundingClientRect(),t);if(0!==n.length&&(i=d.before,o=d.after,a=n[n.length-1].before,o<(s=n[n.length-1].after)&&i>a||s<=o&&a>=i)){var f=Math.sign(d.after-d.before),h=Math.sign(d.end-d.start);f*(d.before-n[n.length-1].before)<0&&(n[n.length-1].before=d.before),f*(d.after-n[n.length-1].after)>0&&(n[n.length-1].after=d.after),h*(d.start-n[n.length-1].start)<0&&(n[n.length-1].start=d.start,n[n.length-1].start_elem=n[n.length-1].elements.length),h*(d.end-n[n.length-1].end)>0&&(n[n.length-1].end=d.end,n[n.length-1].end_elem=n[n.length-1].elements.length)}else n.push({before:d.before,after:d.after,start:d.start,end:d.end,start_elem:0,end_elem:0,elements:[],rbc:[],te:[],text:"",br:!1});n[n.length-1].text+=e.textContent,n[n.length-1].elements.push({node:e,bgcolor:c,before:d.before,after:d.after})}else"br"===e.localName&&0!==n.length&&(n[n.length-1].br=!0);else for(var p=e.firstChild;p;)p.nodeType===Node.ELEMENT_NODE&&(u(t,p,n,c),"ruby"===p.localName||"rtc"===p.localName?n.length>0&&n[n.length-1].rbc.push(p):"span"===p.localName&&p.style[v]&&"none"!==p.style[v]&&n.length>0&&n[n.length-1].te.push(p)),p=p.nextSibling}}function c(t,e,n,r){var i;"none"!==r.style&&("auto"===r.style?e.style[v]="filled":e.style[v]=r.style+" "+r.symbol,("before"===r.position||"after"===r.position)&&(i="tb"===t.bpd?"before"===r.position?"left over":"left under":"rl"===t.bpd?"before"===r.position?"right under":"left under":"before"===r.position?"left under":"right under",e.style[y]=i))}function d(t,e){this.qname=t,this.map=e}t.render=function(t,e,n,r,o,a,s,l,u){var c=r||e.clientHeight,d=o||e.clientWidth;if(null!==t.aspectRatio){var f=c*t.aspectRatio;f>d?c=Math.round(d/t.aspectRatio):d=f}var h=document.createElement("div");h.style.position="relative",h.style.width=d+"px",h.style.height=c+"px",h.style.margin="auto",h.style.top=0,h.style.bottom=0,h.style.left=0,h.style.right=0,h.style.zIndex=0;var p={h:c,w:d,regionH:null,regionW:null,imgResolver:n,displayForcedOnlyMode:a||!1,isd:t,errorHandler:s,previousISDState:l,enableRollUp:u||!1,currentISDState:{},flg:null,lp:null,mra:null,ipd:null,bpd:null,ruby:null,textEmphasis:null,rubyReserve:null};if(e.appendChild(h),"contents"in t)for(var m=0;m<t.contents.length;m++)i(p,h,t.contents[m],t);return p.currentISDState};for(var f=[new d("http://www.w3.org/ns/ttml#styling backgroundColor",(function(t,e,n,r){0!==r[3]&&(e.style.backgroundColor="rgba("+r[0].toString()+","+r[1].toString()+","+r[2].toString()+","+(r[3]/255).toString()+")")})),new d("http://www.w3.org/ns/ttml#styling color",(function(t,e,n,r){e.style.color="rgba("+r[0].toString()+","+r[1].toString()+","+r[2].toString()+","+(r[3]/255).toString()+")"})),new d("http://www.w3.org/ns/ttml#styling direction",(function(t,e,n,r){e.style.direction=r})),new d("http://www.w3.org/ns/ttml#styling display",(function(t,e,n,r){})),new d("http://www.w3.org/ns/ttml#styling displayAlign",(function(t,e,n,r){e.style.display="flex",e.style.flexDirection="column","before"===r?e.style.justifyContent="flex-start":"center"===r?e.style.justifyContent="center":"after"===r&&(e.style.justifyContent="flex-end")})),new d("http://www.w3.org/ns/ttml#styling extent",(function(t,e,n,r){t.regionH=r.h.toUsedLength(t.w,t.h),t.regionW=r.w.toUsedLength(t.w,t.h);var i=0,o=0,a=n.styleAttrs["http://www.w3.org/ns/ttml#styling padding"];a&&(i=a[0].toUsedLength(t.w,t.h)+a[2].toUsedLength(t.w,t.h),o=a[1].toUsedLength(t.w,t.h)+a[3].toUsedLength(t.w,t.h)),e.style.height=t.regionH-i+"px",e.style.width=t.regionW-o+"px"})),new d("http://www.w3.org/ns/ttml#styling fontFamily",(function(t,e,n,r){for(var i=[],o=0;o<r.length;o++)r[o]=r[o].trim(),"monospaceSerif"===r[o]?(i.push("Courier New"),i.push('"Liberation Mono"'),i.push("Courier"),i.push("monospace")):"proportionalSansSerif"===r[o]?(i.push("Arial"),i.push("Helvetica"),i.push('"Liberation Sans"'),i.push("sans-serif")):"monospace"===r[o]?i.push("monospace"):"sansSerif"===r[o]?i.push("sans-serif"):"serif"===r[o]?i.push("serif"):"monospaceSansSerif"===r[o]?(i.push("Consolas"),i.push("monospace")):"proportionalSerif"===r[o]?i.push("serif"):i.push(r[o]);if(i.length>0){for(var a=[i[0]],s=1;s<i.length;s++)-1==a.indexOf(i[s])&&a.push(i[s]);i=a}e.style.fontFamily=i.join(",")})),new d("http://www.w3.org/ns/ttml#styling shear",(function(t,e,n,r){if(0!==r){var i=-.9*r;"tb"===t.bpd?e.style.transform="skewX("+i+"deg)":e.style.transform="skewY("+i+"deg)"}})),new d("http://www.w3.org/ns/ttml#styling fontSize",(function(t,e,n,r){e.style.fontSize=r.toUsedLength(t.w,t.h)+"px"})),new d("http://www.w3.org/ns/ttml#styling fontStyle",(function(t,e,n,r){e.style.fontStyle=r})),new d("http://www.w3.org/ns/ttml#styling fontWeight",(function(t,e,n,r){e.style.fontWeight=r})),new d("http://www.w3.org/ns/ttml#styling lineHeight",(function(t,e,n,r){e.style.lineHeight="normal"===r?"normal":r.toUsedLength(t.w,t.h)+"px"})),new d("http://www.w3.org/ns/ttml#styling opacity",(function(t,e,n,r){e.style.opacity=r})),new d("http://www.w3.org/ns/ttml#styling origin",(function(t,e,n,r){e.style.top=r.h.toUsedLength(t.w,t.h)+"px",e.style.left=r.w.toUsedLength(t.w,t.h)+"px"})),new d("http://www.w3.org/ns/ttml#styling overflow",(function(t,e,n,r){e.style.overflow=r})),new d("http://www.w3.org/ns/ttml#styling padding",(function(t,e,n,r){var i=[];i[0]=r[0].toUsedLength(t.w,t.h)+"px",i[1]=r[3].toUsedLength(t.w,t.h)+"px",i[2]=r[2].toUsedLength(t.w,t.h)+"px",i[3]=r[1].toUsedLength(t.w,t.h)+"px",e.style.padding=i.join(" ")})),new d("http://www.w3.org/ns/ttml#styling position",(function(t,e,n,r){e.style.top=r.h.toUsedLength(t.w,t.h)+"px",e.style.left=r.w.toUsedLength(t.w,t.h)+"px"})),new d("http://www.w3.org/ns/ttml#styling rubyAlign",(function(t,e,n,r){e.style.rubyAlign="spaceAround"===r?"space-around":"center"})),new d("http://www.w3.org/ns/ttml#styling rubyPosition",(function(t,e,n,r){var i;"before"!==r&&"after"!==r||(i=m?r:"tb"===t.bpd||"rl"===t.bpd?"before"===r?"over":"under":"before"===r?"under":"over",e.parentElement.style[g]=i)})),new d("http://www.w3.org/ns/ttml#styling showBackground",null),new d("http://www.w3.org/ns/ttml#styling textAlign",(function(t,e,n,r){var i;i="start"===r?"rl"===t.ipd?"right":"left":"end"===r?"rl"===t.ipd?"left":"right":r,e.style.textAlign=i})),new d("http://www.w3.org/ns/ttml#styling textDecoration",(function(t,e,n,r){e.style.textDecoration=r.join(" ").replace("lineThrough","line-through")})),new d("http://www.w3.org/ns/ttml#styling textOutline",(function(t,e,n,r){})),new d("http://www.w3.org/ns/ttml#styling textShadow",(function(t,e,r,i){var o=r.styleAttrs[n.byName.textOutline.qname];if("none"===i&&"none"===o)e.style.textShadow="";else{var a=[];if("none"!==o){var s="rgba("+o.color[0].toString()+","+o.color[1].toString()+","+o.color[2].toString()+","+(o.color[3]/255).toString()+")";a.push("1px 1px 1px "+s),a.push("-1px 1px 1px "+s),a.push("1px -1px 1px "+s),a.push("-1px -1px 1px "+s)}if("none"!==i)for(var l=0;l<i.length;l++)a.push(i[l].x_off.toUsedLength(t.w,t.h)+"px "+i[l].y_off.toUsedLength(t.w,t.h)+"px "+i[l].b_radius.toUsedLength(t.w,t.h)+"px rgba("+i[l].color[0].toString()+","+i[l].color[1].toString()+","+i[l].color[2].toString()+","+(i[l].color[3]/255).toString()+")");e.style.textShadow=a.join(",")}})),new d("http://www.w3.org/ns/ttml#styling textCombine",(function(t,e,n,r){e.style.textCombineUpright=r})),new d("http://www.w3.org/ns/ttml#styling textEmphasis",(function(t,e,n,r){})),new d("http://www.w3.org/ns/ttml#styling unicodeBidi",(function(t,e,n,r){var i;i="bidiOverride"===r?"bidi-override":r,e.style.unicodeBidi=i})),new d("http://www.w3.org/ns/ttml#styling visibility",(function(t,e,n,r){e.style.visibility=r})),new d("http://www.w3.org/ns/ttml#styling wrapOption",(function(t,e,n,r){"wrap"===r?"preserve"===n.space?e.style.whiteSpace="pre-wrap":e.style.whiteSpace="normal":"preserve"===n.space?e.style.whiteSpace="pre":e.style.whiteSpace="noWrap"})),new d("http://www.w3.org/ns/ttml#styling writingMode",(function(t,e,n,r){"lrtb"===r||"lr"===r||"rltb"===r||"rl"===r?e.style.writingMode="horizontal-tb":"tblr"===r?e.style.writingMode="vertical-lr":"tbrl"!==r&&"tb"!==r||(e.style.writingMode="vertical-rl")})),new d("http://www.w3.org/ns/ttml#styling zIndex",(function(t,e,n,r){e.style.zIndex=r})),new d("http://www.w3.org/ns/ttml/profile/imsc1#styling forcedDisplay",(function(t,e,n,r){t.displayForcedOnlyMode&&!1===r&&(e.style.visibility="hidden")}))],h={},p=0;p<f.length;p++)h[f[p].qname]=f[p];var m="webkitRubyPosition"in window.getComputedStyle(document.documentElement),g=m?"webkitRubyPosition":"rubyPosition",v="webkitTextEmphasisStyle"in window.getComputedStyle(document.documentElement)?"webkitTextEmphasisStyle":"textEmphasisStyle",y="webkitTextEmphasisPosition"in window.getComputedStyle(document.documentElement)?"webkitTextEmphasisPosition":"textEmphasisPosition";function b(t,e){if(t&&t.error&&t.error(e))throw e}}(e,"undefined"==typeof imscNames?n(977):imscNames,"undefined"==typeof imscStyles?n(1219):imscStyles,"undefined"==typeof imscUtils?n(6404):imscUtils)},8905:function(t,e,n){!function(t,e,n,r){t.generateISD=function(t,e,r){var i,a=new l(t),s={},u={},c=t.head.styling.initials[n.byName.showBackground.qname],d=t.head.styling.initials[n.byName.backgroundColor.qname];for(var f in t.head.layout.regions)if(t.head.layout.regions.hasOwnProperty(f)){var h=t.head.layout.regions[f],p=h.styleAttrs[n.byName.showBackground.qname]||c,m=h.styleAttrs[n.byName.backgroundColor.qname]||d;u[h.id]=("always"===p||void 0===p)&&void 0!==m&&!(e<h.begin||e>=h.end)}for(var g in t.body&&t.body.regionID&&(u[t.body.regionID]=!0),i=null!==t.body?function t(e,n){if(n.contents){var r={};for(var i in n)n.hasOwnProperty(i)&&(r[i]=n[i]);return r.contents=[],n.contents.filter((function(t){return!(e<t.begin||e>=t.end)})).forEach((function(n){var i=t(e,n);i.regionID&&(u[i.regionID]=!0),null!==i&&r.contents.push(i)})),r}return n}(e,t.body):null,void 0!==u[""]&&(u[""]=!0),u)if(u[g]){var v=o(t,e,t.head.layout.regions[g],i,null,"",t.head.layout.regions[g],r,s);null!==v&&a.contents.push(v.element)}return a};var i=[n.byName.color.qname,n.byName.textCombine.qname,n.byName.textDecoration.qname,n.byName.textEmphasis.qname,n.byName.textOutline.qname,n.byName.textShadow.qname];function o(t,e,l,d,f,h,p,m,g){if(e<p.begin||e>=p.end)return null;var v="regionID"in p&&""!==p.regionID?p.regionID:h;if(null!==f&&v!==l.id&&(!("contents"in p)||"contents"in p&&0===p.contents.length||""!==v))return null;var y=new u(p);if("sets"in p)for(var b=0;b<p.sets.length;b++)e<p.sets[b].begin||e>=p.sets[b].end||(y.styleAttrs[p.sets[b].qname]=p.sets[b].value);var _={};for(var w in y.styleAttrs)if(y.styleAttrs.hasOwnProperty(w)&&(_[w]=!0,"region"===y.kind&&w===n.byName.writingMode.qname&&!(n.byName.direction.qname in y.styleAttrs))){var A=y.styleAttrs[w];"lrtb"===A||"lr"===A?y.styleAttrs[n.byName.direction.qname]="ltr":"rltb"!==A&&"rl"!==A||(y.styleAttrs[n.byName.direction.qname]="rtl")}if(null!==f)for(var E=0;E<n.all.length;E++){var x=n.all[E];if(x.qname===n.byName.textDecoration.qname){var S=f.styleAttrs[x.qname],T=y.styleAttrs[x.qname],C=[];void 0===T?C=S:-1===T.indexOf("none")?((-1===T.indexOf("noUnderline")&&-1!==S.indexOf("underline")||-1!==T.indexOf("underline"))&&C.push("underline"),(-1===T.indexOf("noLineThrough")&&-1!==S.indexOf("lineThrough")||-1!==T.indexOf("lineThrough"))&&C.push("lineThrough"),(-1===T.indexOf("noOverline")&&-1!==S.indexOf("overline")||-1!==T.indexOf("overline"))&&C.push("overline")):C.push("none"),y.styleAttrs[x.qname]=C}else if(x.qname!==n.byName.fontSize.qname||x.qname in y.styleAttrs||"span"!==y.kind||"textContainer"!==y.styleAttrs[n.byName.ruby.qname])if(x.qname!==n.byName.fontSize.qname||x.qname in y.styleAttrs||"span"!==y.kind||"text"!==y.styleAttrs[n.byName.ruby.qname])x.inherit&&x.qname in f.styleAttrs&&!(x.qname in y.styleAttrs)&&(y.styleAttrs[x.qname]=f.styleAttrs[x.qname]);else{var I=f.styleAttrs[n.byName.fontSize.qname];"textContainer"===f.styleAttrs[n.byName.ruby.qname]?y.styleAttrs[x.qname]=I:y.styleAttrs[x.qname]=new r.ComputedLength(.5*I.rw,.5*I.rh)}else{var k=f.styleAttrs[n.byName.fontSize.qname];y.styleAttrs[x.qname]=new r.ComputedLength(.5*k.rw,.5*k.rh)}}for(var P=0;P<n.all.length;P++){var R=n.all[P];if(!(R.qname in y.styleAttrs)&&!(R.qname===n.byName.position.qname&&n.byName.origin.qname in y.styleAttrs||R.qname===n.byName.origin.qname&&n.byName.position.qname in y.styleAttrs)){var O=t.head.styling.initials[R.qname]||R.initial;if(null!==O&&("region"===y.kind||!1===R.inherit&&null!==O)){var M=R.parse(O);null!==M?(y.styleAttrs[R.qname]=M,_[R.qname]=!0):c(m,"Invalid initial value for '"+R.qname+"' on element '"+y.kind)}}}for(var L=0;L<n.all.length;L++){var D=n.all[L];if(D.qname in _&&null!==D.compute){var N=D.compute(t,f,y,y.styleAttrs[D.qname],g);null!==N?y.styleAttrs[D.qname]=N:(y.styleAttrs[D.qname]=D.compute(t,f,y,D.parse(D.initial),g),c(m,"Style '"+D.qname+"' on element '"+y.kind+"' cannot be computed"))}}if("none"===y.styleAttrs[n.byName.display.qname])return null;var B=null;null===f?B=null===d?[]:[d]:"contents"in p&&(B=p.contents);for(var j=0;null!==B&&j<B.length;j++){var z=o(t,e,l,d,y,v,B[j],m,g);null!==z&&y.contents.push(z.element)}for(var F in y.styleAttrs)if(y.styleAttrs.hasOwnProperty(F)){var U=!1;if("span"===y.kind){var q=y.styleAttrs[n.byName.ruby.qname];(U=("container"===q||"textContainer"===q||"baseContainer"===q)&&-1!==i.indexOf(F))||(U="container"!==q&&F===n.byName.rubyAlign.qname),U||(U=!("textContainer"===q||"text"===q)&&F===n.byName.rubyPosition.qname)}if(!U){var G=n.byQName[F];"applies"in G&&(U=-1===G.applies.indexOf(y.kind))}U&&delete y.styleAttrs[F]}var H=y.styleAttrs[n.byName.ruby.qname];if("p"===y.kind||"span"===y.kind&&("textContainer"===H||"text"===H)){var V=[];a(y,V),function(t){for(var e,n=0;n<t.length;)if("br"!==(e=t[n]).kind&&"preserve"!==e.space){var r=e.text.replace(/[\t\r\n ]+/g," ");/^[ ]/.test(r)&&(0===n||"br"===(i=t[n-1]).kind||/[\r\n\t ]$/.test(i.text))&&(r=r.substring(1)),e.text=r,0===r.length?t.splice(n,1):n++}else n++;var i,o;for(n=0;n<t.length;n++)"br"!==(e=t[n]).kind&&"preserve"!==e.space?/[ ]$/.test(e.text)&&(n===t.length-1||"br"===(o=t[n+1]).kind||"preserve"===o.space&&/^[\r\n]/.test(o.text))&&(e.text=e.text.slice(0,-1)):n++}(V),s(y)}return"div"===y.kind&&n.byName.backgroundImage.qname in y.styleAttrs||"br"===y.kind||"image"===y.kind||"contents"in y&&y.contents.length>0||"span"===y.kind&&null!==y.text||"region"===y.kind&&"always"===y.styleAttrs[n.byName.showBackground.qname]?{region_id:v,element:y}:null}function a(t,e){if("contents"in t)for(var r=0;r<t.contents.length;r++){var i=t.contents[r],o=i.styleAttrs[n.byName.ruby.qname];("span"!==i.kind||"textContainer"!==o&&"text"!==o)&&("contents"in i?a(i,e):("span"===i.kind&&0!==i.text.length||"br"===i.kind)&&e.push(i))}}function s(t){if("br"===t.kind)return!1;if("text"in t)return 0===t.text.length;if("contents"in t){for(var e=t.contents.length;e--;)s(t.contents[e])&&t.contents.splice(e,1);return 0===t.contents.length}}function l(t){this.contents=[],this.aspectRatio=t.aspectRatio,this.lang=t.lang}function u(t){for(var e in this.kind=t.kind||"region",this.lang=t.lang,t.id&&(this.id=t.id),this.styleAttrs={},t.styleAttrs)t.styleAttrs.hasOwnProperty(e)&&(this.styleAttrs[e]=t.styleAttrs[e]);"src"in t&&(this.src=t.src),"type"in t&&(this.type=t.type),"text"in t?this.text=t.text:("region"===this.kind||"contents"in t)&&(this.contents=[]),"space"in t&&(this.space=t.space)}function c(t,e){if(t&&t.error&&t.error(e))throw e}}(e,"undefined"==typeof imscNames?n(977):imscNames,"undefined"==typeof imscStyles?n(1219):imscStyles,"undefined"==typeof imscUtils?n(6404):imscUtils)},7640:function(t,e,n){e.generateISD=n(8905).generateISD,e.fromXML=n(6739).fromXML,e.renderHTML=n(1612).render},977:function(t,e){!function(t){t.ns_tt="http://www.w3.org/ns/ttml",t.ns_tts="http://www.w3.org/ns/ttml#styling",t.ns_ttp="http://www.w3.org/ns/ttml#parameter",t.ns_xml="http://www.w3.org/XML/1998/namespace",t.ns_itts="http://www.w3.org/ns/ttml/profile/imsc1#styling",t.ns_ittp="http://www.w3.org/ns/ttml/profile/imsc1#parameter",t.ns_smpte="http://www.smpte-ra.org/schemas/2052-1/2010/smpte-tt",t.ns_ebutts="urn:ebu:tt:style"}(e)},1219:function(t,e,n){!function(t,e,n){function r(t,e,n,r,i,o,a,s){this.name=e,this.ns=t,this.qname=t+" "+e,this.inherit=i,this.animatable=o,this.initial=n,this.applies=r,this.parse=a,this.compute=s}for(var i in t.all=[new r(e.ns_tts,"backgroundColor","transparent",["body","div","p","region","span"],!1,!0,n.parseColor,null),new r(e.ns_tts,"color","white",["span"],!0,!0,n.parseColor,null),new r(e.ns_tts,"direction","ltr",["p","span"],!0,!0,(function(t){return t}),null),new r(e.ns_tts,"display","auto",["body","div","p","region","span"],!1,!0,(function(t){return t}),null),new r(e.ns_tts,"displayAlign","before",["region"],!1,!0,(function(t){return t}),null),new r(e.ns_tts,"extent","auto",["tt","region"],!1,!0,(function(t){if("auto"===t)return t;var e=t.split(" ");if(2!==e.length)return null;var r=n.parseLength(e[0]),i=n.parseLength(e[1]);return i&&r?{h:i,w:r}:null}),(function(t,e,r,i,o){var a,s;if("auto"===i)a=new n.ComputedLength(0,1);else if(null===(a=n.toComputedLength(i.h.value,i.h.unit,null,t.dimensions.h,null,t.pxLength.h)))return null;if("auto"===i)s=new n.ComputedLength(1,0);else if(null===(s=n.toComputedLength(i.w.value,i.w.unit,null,t.dimensions.w,null,t.pxLength.w)))return null;return{h:a,w:s}})),new r(e.ns_tts,"fontFamily","default",["span","p"],!0,!0,(function(t){for(var e=t.split(","),n=[],r=0;r<e.length;r++)e[r]=e[r].trim(),"'"!==e[r].charAt(0)&&'"'!==e[r].charAt(0)&&"default"===e[r]?n.push("monospaceSerif"):n.push(e[r]);return n}),null),new r(e.ns_tts,"shear","0%",["p"],!0,!0,n.parseLength,(function(t,e,n,r){return"%"!==r.unit?null:Math.abs(r.value)>100?100*Math.sign(r.value):r.value})),new r(e.ns_tts,"fontSize","1c",["span","p"],!0,!0,n.parseLength,(function(e,r,i,o,a){return n.toComputedLength(o.value,o.unit,null!==r?r.styleAttrs[t.byName.fontSize.qname]:e.cellLength.h,null!==r?r.styleAttrs[t.byName.fontSize.qname]:e.cellLength.h,e.cellLength.h,e.pxLength.h)})),new r(e.ns_tts,"fontStyle","normal",["span","p"],!0,!0,(function(t){return t}),null),new r(e.ns_tts,"fontWeight","normal",["span","p"],!0,!0,(function(t){return t}),null),new r(e.ns_tts,"lineHeight","normal",["p"],!0,!0,(function(t){return"normal"===t?t:n.parseLength(t)}),(function(e,r,i,o,a){var s;if("normal"===o)s=o;else if(null===(s=n.toComputedLength(o.value,o.unit,i.styleAttrs[t.byName.fontSize.qname],i.styleAttrs[t.byName.fontSize.qname],e.cellLength.h,e.pxLength.h)))return null;return s})),new r(e.ns_tts,"opacity",1,["region"],!1,!0,parseFloat,null),new r(e.ns_tts,"origin","auto",["region"],!1,!0,(function(t){if("auto"===t)return t;var e=t.split(" ");if(2!==e.length)return null;var r=n.parseLength(e[0]),i=n.parseLength(e[1]);return i&&r?{h:i,w:r}:null}),(function(t,e,r,i,o){var a,s;if("auto"===i)a=new n.ComputedLength(0,0);else if(null===(a=n.toComputedLength(i.h.value,i.h.unit,null,t.dimensions.h,null,t.pxLength.h)))return null;if("auto"===i)s=new n.ComputedLength(0,0);else if(null===(s=n.toComputedLength(i.w.value,i.w.unit,null,t.dimensions.w,null,t.pxLength.w)))return null;return{h:a,w:s}})),new r(e.ns_tts,"overflow","hidden",["region"],!1,!0,(function(t){return t}),null),new r(e.ns_tts,"padding","0px",["region"],!1,!0,(function(t){var e=t.split(" ");if(e.length>4)return null;for(var r=[],i=0;i<e.length;i++){var o=n.parseLength(e[i]);if(!o)return null;r.push(o)}return r}),(function(e,r,i,o,a){var s;if(1===o.length)s=[o[0],o[0],o[0],o[0]];else if(2===o.length)s=[o[0],o[1],o[0],o[1]];else if(3===o.length)s=[o[0],o[1],o[2],o[1]];else{if(4!==o.length)return null;s=[o[0],o[1],o[2],o[3]]}var l=i.styleAttrs[t.byName.writingMode.qname];if("lrtb"===l||"lr"===l)s=[s[0],s[3],s[2],s[1]];else if("rltb"===l||"rl"===l)s=[s[0],s[1],s[2],s[3]];else if("tblr"===l)s=[s[3],s[0],s[1],s[2]];else{if("tbrl"!==l&&"tb"!==l)return null;s=[s[3],s[2],s[1],s[0]]}for(var u=[],c=0;c<s.length;c++)if(0===s[c].value)u[c]=new n.ComputedLength(0,0);else if(u[c]=n.toComputedLength(s[c].value,s[c].unit,i.styleAttrs[t.byName.fontSize.qname],0===c||2===c?i.styleAttrs[t.byName.extent.qname].h:i.styleAttrs[t.byName.extent.qname].w,0===c||2===c?e.cellLength.h:e.cellLength.w,0===c||2===c?e.pxLength.h:e.pxLength.w),null===u[c])return null;return u})),new r(e.ns_tts,"position","top left",["region"],!1,!0,(function(t){return n.parsePosition(t)}),(function(e,r,i,o){var a,s;return null===(a=n.toComputedLength(o.v.offset.value,o.v.offset.unit,null,new n.ComputedLength(-i.styleAttrs[t.byName.extent.qname].h.rw,e.dimensions.h.rh-i.styleAttrs[t.byName.extent.qname].h.rh),null,e.pxLength.h))?null:("bottom"===o.v.edge&&(a=new n.ComputedLength(-a.rw-i.styleAttrs[t.byName.extent.qname].h.rw,e.dimensions.h.rh-a.rh-i.styleAttrs[t.byName.extent.qname].h.rh)),s=n.toComputedLength(o.h.offset.value,o.h.offset.unit,null,new n.ComputedLength(e.dimensions.w.rw-i.styleAttrs[t.byName.extent.qname].w.rw,-i.styleAttrs[t.byName.extent.qname].w.rh),null,e.pxLength.w),null===a?null:("right"===o.h.edge&&(s=new n.ComputedLength(e.dimensions.w.rw-s.rw-i.styleAttrs[t.byName.extent.qname].w.rw,-s.rh-i.styleAttrs[t.byName.extent.qname].w.rh)),{h:a,w:s}))})),new r(e.ns_tts,"ruby","none",["span"],!1,!0,(function(t){return t}),null),new r(e.ns_tts,"rubyAlign","center",["span"],!0,!0,(function(t){return"center"!==t&&"spaceAround"!==t?null:t}),null),new r(e.ns_tts,"rubyPosition","outside",["span"],!0,!0,(function(t){return t}),null),new r(e.ns_tts,"rubyReserve","none",["p"],!0,!0,(function(t){var e=t.split(" "),r=[null,null];if(0===e.length||e.length>2)return null;if("none"!==e[0]&&"both"!==e[0]&&"after"!==e[0]&&"before"!==e[0]&&"outside"!==e[0])return null;if(r[0]=e[0],2===e.length&&"none"!==e[0]){var i=n.parseLength(e[1]);if(!i)return null;r[1]=i}return r}),(function(e,r,i,o,a){return"none"===o[0]?o:null===(s=null===o[1]?new n.ComputedLength(.5*i.styleAttrs[t.byName.fontSize.qname].rw,.5*i.styleAttrs[t.byName.fontSize.qname].rh):n.toComputedLength(o[1].value,o[1].unit,i.styleAttrs[t.byName.fontSize.qname],i.styleAttrs[t.byName.fontSize.qname],e.cellLength.h,e.pxLength.h))?null:[o[0],s];var s})),new r(e.ns_tts,"showBackground","always",["region"],!1,!0,(function(t){return t}),null),new r(e.ns_tts,"textAlign","start",["p"],!0,!0,(function(t){return t}),(function(t,e,n,r,i){return"left"===r?"start":"right"===r?"end":r})),new r(e.ns_tts,"textCombine","none",["span"],!0,!0,(function(t){return"none"===t||"all"===t?t:null}),null),new r(e.ns_tts,"textDecoration","none",["span"],!0,!0,(function(t){return t.split(" ")}),null),new r(e.ns_tts,"textEmphasis","none",["span"],!0,!0,(function(t){for(var e=t.split(" "),r={style:null,symbol:null,color:null,position:null},i=0;i<e.length;i++)if("none"===e[i]||"auto"===e[i])r.style=e[i];else if("filled"===e[i]||"open"===e[i])r.style=e[i];else if("circle"===e[i]||"dot"===e[i]||"sesame"===e[i])r.symbol=e[i];else if("current"===e[i])r.color=e[i];else if("outside"===e[i]||"before"===e[i]||"after"===e[i])r.position=e[i];else if(r.color=n.parseColor(e[i]),null===r.color)return null;return null==r.style&&null==r.symbol?r.style="auto":(r.symbol=r.symbol||"circle",r.style=r.style||"filled"),r.position=r.position||"outside",r.color=r.color||"current",r}),null),new r(e.ns_tts,"textOutline","none",["span"],!0,!0,(function(t){if("none"===t)return t;var e={},r=t.split(" ");if(0===r.length||r.length>2)return null;var i=n.parseColor(r[0]);if(e.color=i,null!==i&&r.shift(),1!==r.length)return null;var o=n.parseLength(r[0]);return o?(e.thickness=o,e):null}),(function(e,r,i,o,a){if("none"===o)return o;var s={};return null===o.color?s.color=i.styleAttrs[t.byName.color.qname]:s.color=o.color,s.thickness=n.toComputedLength(o.thickness.value,o.thickness.unit,i.styleAttrs[t.byName.fontSize.qname],i.styleAttrs[t.byName.fontSize.qname],e.cellLength.h,e.pxLength.h),null===s.thickness?null:s})),new r(e.ns_tts,"textShadow","none",["span"],!0,!0,n.parseTextShadow,(function(e,r,i,o){if("none"===o)return o;for(var a=[],s=0;s<o.length;s++){var l={};if(l.x_off=n.toComputedLength(o[s][0].value,o[s][0].unit,null,i.styleAttrs[t.byName.fontSize.qname],null,e.pxLength.w),null===l.x_off)return null;if(l.y_off=n.toComputedLength(o[s][1].value,o[s][1].unit,null,i.styleAttrs[t.byName.fontSize.qname],null,e.pxLength.h),null===l.y_off)return null;if(null===o[s][2])l.b_radius=0;else if(l.b_radius=n.toComputedLength(o[s][2].value,o[s][2].unit,null,i.styleAttrs[t.byName.fontSize.qname],null,e.pxLength.h),null===l.b_radius)return null;null===o[s][3]?l.color=i.styleAttrs[t.byName.color.qname]:l.color=o[s][3],a.push(l)}return a})),new r(e.ns_tts,"unicodeBidi","normal",["span","p"],!1,!0,(function(t){return t}),null),new r(e.ns_tts,"visibility","visible",["body","div","p","region","span"],!0,!0,(function(t){return t}),null),new r(e.ns_tts,"wrapOption","wrap",["span"],!0,!0,(function(t){return t}),null),new r(e.ns_tts,"writingMode","lrtb",["region"],!1,!0,(function(t){return t}),null),new r(e.ns_tts,"zIndex","auto",["region"],!1,!0,(function(t){var e;return"auto"===t?e=t:(e=parseInt(t),isNaN(e)&&(e=null)),e}),null),new r(e.ns_ebutts,"linePadding","0c",["p"],!0,!1,n.parseLength,(function(t,e,r,i,o){return n.toComputedLength(i.value,i.unit,null,null,t.cellLength.w,null)})),new r(e.ns_ebutts,"multiRowAlign","auto",["p"],!0,!1,(function(t){return t}),null),new r(e.ns_smpte,"backgroundImage",null,["div"],!1,!1,(function(t){return t}),null),new r(e.ns_itts,"forcedDisplay","false",["body","div","p","region","span"],!0,!0,(function(t){return"true"===t}),null),new r(e.ns_itts,"fillLineGap","false",["p"],!0,!0,(function(t){return"true"===t}),null)],t.byQName={},t.all)t.byQName[t.all[i].qname]=t.all[i];for(var o in t.byName={},t.all)t.byName[t.all[o].name]=t.all[o]}(e,"undefined"==typeof imscNames?n(977):imscNames,"undefined"==typeof imscUtils?n(6404):imscUtils)},6404:function(t,e){!function(t){var e=/#([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})?/,n=/rgb\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/,r=/rgba\(\s*(\d+),\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/,i={transparent:[0,0,0,0],black:[0,0,0,255],silver:[192,192,192,255],gray:[128,128,128,255],white:[255,255,255,255],maroon:[128,0,0,255],red:[255,0,0,255],purple:[128,0,128,255],fuchsia:[255,0,255,255],magenta:[255,0,255,255],green:[0,128,0,255],lime:[0,255,0,255],olive:[128,128,0,255],yellow:[255,255,0,255],navy:[0,0,128,255],blue:[0,0,255,255],teal:[0,128,128,255],aqua:[0,255,255,255],cyan:[0,255,255,255]};t.parseColor=function(t){var o,a=null,s=i[t.toLowerCase()];return void 0!==s?a=s:null!==(o=e.exec(t))?a=[parseInt(o[1],16),parseInt(o[2],16),parseInt(o[3],16),void 0!==o[4]?parseInt(o[4],16):255]:null!==(o=n.exec(t))?a=[parseInt(o[1]),parseInt(o[2]),parseInt(o[3]),255]:null!==(o=r.exec(t))&&(a=[parseInt(o[1]),parseInt(o[2]),parseInt(o[3]),parseInt(o[4])]),a};var o=/^((?:\+|\-)?\d*(?:\.\d+)?)(px|em|c|%|rh|rw)$/;t.parseLength=function(t){var e,n=null;return null!==(e=o.exec(t))&&(n={value:parseFloat(e[1]),unit:e[2]}),n},t.parseTextShadow=function(e){for(var n=e.match(/([^\(,\)]|\([^\)]+\))+/g),r=[],i=0;i<n.length;i++){var o=n[i].split(" ");if(1===o.length&&"none"===o[0])return"none";if(o.length>1&&o.length<5){var a=[null,null,null,null],s=t.parseLength(o.shift());if(null===s)return null;if(a[0]=s,null===(s=t.parseLength(o.shift())))return null;if(a[1]=s,0===o.length){r.push(a);continue}if(null!==(s=t.parseLength(o[0]))&&(a[2]=s,o.shift()),0===o.length){r.push(a);continue}var l=t.parseColor(o[0]);if(null===l)return null;a[3]=l,r.push(a)}}return r},t.parsePosition=function(e){var n=e.split(" "),r=function(t){return"center"===t||"left"===t||"top"===t||"bottom"===t||"right"===t};if(n.length>4)return null;for(var i=0;i<n.length;i++)if(!r(n[i])){var o=t.parseLength(n[i]);if(null===o)return null;n[i]=o}for(var a={h:{edge:"left",offset:{value:50,unit:"%"}},v:{edge:"top",offset:{value:50,unit:"%"}}},s=0;s<n.length;){var l=n[s++];if(r(l)){var u={value:0,unit:"%"};2!==n.length&&s<n.length&&!r(n[s])&&(u=n[s++]),"right"===l?(a.h.edge=l,a.h.offset=u):"bottom"===l?(a.v.edge=l,a.v.offset=u):"left"===l?a.h.offset=u:"top"===l&&(a.v.offset=u)}else{if(1!==n.length&&2!==n.length)return null;1===s?a.h.offset=l:a.v.offset=l}}return a},t.ComputedLength=function(t,e){this.rw=t,this.rh=e},t.ComputedLength.prototype.toUsedLength=function(t,e){return t*this.rw+e*this.rh},t.ComputedLength.prototype.isZero=function(){return 0===this.rw&&0===this.rh},t.toComputedLength=function(e,n,r,i,o,a){return"%"===n&&i?new t.ComputedLength(i.rw*e/100,i.rh*e/100):"em"===n&&r?new t.ComputedLength(r.rw*e,r.rh*e):"c"===n&&o?new t.ComputedLength(e*o.rw,e*o.rh):"px"===n&&a?new t.ComputedLength(e*a.rw,e*a.rh):"rh"===n?new t.ComputedLength(0,e/100):"rw"===n?new t.ComputedLength(e/100,0):null}}(e)},7523:function(t){"function"==typeof Object.create?t.exports=function(t,e){e&&(t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}))}:t.exports=function(t,e){if(e){t.super_=e;var n=function(){};n.prototype=e.prototype,t.prototype=new n,t.prototype.constructor=t}}},3282:function(t){function e(t){if("string"!=typeof t)throw new TypeError("Path must be a string. Received "+JSON.stringify(t))}function n(t,e){for(var n,r="",i=0,o=-1,a=0,s=0;s<=t.length;++s){if(s<t.length)n=t.charCodeAt(s);else{if(47===n)break;n=47}if(47===n){if(o===s-1||1===a);else if(o!==s-1&&2===a){if(r.length<2||2!==i||46!==r.charCodeAt(r.length-1)||46!==r.charCodeAt(r.length-2))if(r.length>2){var l=r.lastIndexOf("/");if(l!==r.length-1){-1===l?(r="",i=0):i=(r=r.slice(0,l)).length-1-r.lastIndexOf("/"),o=s,a=0;continue}}else if(2===r.length||1===r.length){r="",i=0,o=s,a=0;continue}e&&(r.length>0?r+="/..":r="..",i=2)}else r.length>0?r+="/"+t.slice(o+1,s):r=t.slice(o+1,s),i=s-o-1;o=s,a=0}else 46===n&&-1!==a?++a:a=-1}return r}var r={resolve:function(){for(var t,r="",i=!1,o=arguments.length-1;o>=-1&&!i;o--){var a;o>=0?a=arguments[o]:(void 0===t&&(t=rM.cwd()),a=t),e(a),0!==a.length&&(r=a+"/"+r,i=47===a.charCodeAt(0))}return r=n(r,!i),i?r.length>0?"/"+r:"/":r.length>0?r:"."},normalize:function(t){if(e(t),0===t.length)return".";var r=47===t.charCodeAt(0),i=47===t.charCodeAt(t.length-1);return 0!==(t=n(t,!r)).length||r||(t="."),t.length>0&&i&&(t+="/"),r?"/"+t:t},isAbsolute:function(t){return e(t),t.length>0&&47===t.charCodeAt(0)},join:function(){if(0===arguments.length)return".";for(var t,n=0;n<arguments.length;++n){var i=arguments[n];e(i),i.length>0&&(void 0===t?t=i:t+="/"+i)}return void 0===t?".":r.normalize(t)},relative:function(t,n){if(e(t),e(n),t===n)return"";if((t=r.resolve(t))===(n=r.resolve(n)))return"";for(var i=1;i<t.length&&47===t.charCodeAt(i);++i);for(var o=t.length,a=o-i,s=1;s<n.length&&47===n.charCodeAt(s);++s);for(var l=n.length-s,u=a<l?a:l,c=-1,d=0;d<=u;++d){if(d===u){if(l>u){if(47===n.charCodeAt(s+d))return n.slice(s+d+1);if(0===d)return n.slice(s+d)}else a>u&&(47===t.charCodeAt(i+d)?c=d:0===d&&(c=0));break}var f=t.charCodeAt(i+d);if(f!==n.charCodeAt(s+d))break;47===f&&(c=d)}var h="";for(d=i+c+1;d<=o;++d)d!==o&&47!==t.charCodeAt(d)||(0===h.length?h+="..":h+="/..");return h.length>0?h+n.slice(s+c):(s+=c,47===n.charCodeAt(s)&&++s,n.slice(s))},_makeLong:function(t){return t},dirname:function(t){if(e(t),0===t.length)return".";for(var n=t.charCodeAt(0),r=47===n,i=-1,o=!0,a=t.length-1;a>=1;--a)if(47===(n=t.charCodeAt(a))){if(!o){i=a;break}}else o=!1;return-1===i?r?"/":".":r&&1===i?"//":t.slice(0,i)},basename:function(t,n){if(void 0!==n&&"string"!=typeof n)throw new TypeError('"ext" argument must be a string');e(t);var r,i=0,o=-1,a=!0;if(void 0!==n&&n.length>0&&n.length<=t.length){if(n.length===t.length&&n===t)return"";var s=n.length-1,l=-1;for(r=t.length-1;r>=0;--r){var u=t.charCodeAt(r);if(47===u){if(!a){i=r+1;break}}else-1===l&&(a=!1,l=r+1),s>=0&&(u===n.charCodeAt(s)?-1==--s&&(o=r):(s=-1,o=l))}return i===o?o=l:-1===o&&(o=t.length),t.slice(i,o)}for(r=t.length-1;r>=0;--r)if(47===t.charCodeAt(r)){if(!a){i=r+1;break}}else-1===o&&(a=!1,o=r+1);return-1===o?"":t.slice(i,o)},extname:function(t){e(t);for(var n=-1,r=0,i=-1,o=!0,a=0,s=t.length-1;s>=0;--s){var l=t.charCodeAt(s);if(47!==l)-1===i&&(o=!1,i=s+1),46===l?-1===n?n=s:1!==a&&(a=1):-1!==n&&(a=-1);else if(!o){r=s+1;break}}return-1===n||-1===i||0===a||1===a&&n===i-1&&n===r+1?"":t.slice(n,i)},format:function(t){if(null===t||"object"!=typeof t)throw new TypeError('The "pathObject" argument must be of type Object. Received type '+typeof t);return function(t,e){var n=e.dir||e.root,r=e.base||(e.name||"")+(e.ext||"");return n?n===e.root?n+r:n+"/"+r:r}(0,t)},parse:function(t){e(t);var n={root:"",dir:"",base:"",ext:"",name:""};if(0===t.length)return n;var r,i=t.charCodeAt(0),o=47===i;o?(n.root="/",r=1):r=0;for(var a=-1,s=0,l=-1,u=!0,c=t.length-1,d=0;c>=r;--c)if(47!==(i=t.charCodeAt(c)))-1===l&&(u=!1,l=c+1),46===i?-1===a?a=c:1!==d&&(d=1):-1!==a&&(d=-1);else if(!u){s=c+1;break}return-1===a||-1===l||0===d||1===d&&a===l-1&&a===s+1?-1!==l&&(n.base=n.name=0===s&&o?t.slice(1,l):t.slice(s,l)):(0===s&&o?(n.name=t.slice(1,a),n.base=t.slice(1,l)):(n.name=t.slice(s,a),n.base=t.slice(s,l)),n.ext=t.slice(a,l)),s>0?n.dir=t.slice(0,s-1):o&&(n.dir="/"),n},sep:"/",delimiter:":",win32:null,posix:null};r.posix=r,t.exports=r},3515:function(t,e,n){t.exports=i;var r=n(9826).EventEmitter;function i(){r.call(this)}n(7523)(i,r),i.Readable=n(2762),i.Writable=n(3726),i.Duplex=n(884),i.Transform=n(6756),i.PassThrough=n(1390),i.finished=n(2896),i.pipeline=n(8460),i.Stream=i,i.prototype.pipe=function(t,e){var n=this;function i(e){t.writable&&!1===t.write(e)&&n.pause&&n.pause()}function o(){n.readable&&n.resume&&n.resume()}n.on("data",i),t.on("drain",o),t._isStdio||e&&!1===e.end||(n.on("end",s),n.on("close",l));var a=!1;function s(){a||(a=!0,t.end())}function l(){a||(a=!0,"function"==typeof t.destroy&&t.destroy())}function u(t){if(c(),0===r.listenerCount(this,"error"))throw t}function c(){n.removeListener("data",i),t.removeListener("drain",o),n.removeListener("end",s),n.removeListener("close",l),n.removeListener("error",u),t.removeListener("error",u),n.removeListener("end",c),n.removeListener("close",c),t.removeListener("close",c)}return n.on("error",u),t.on("error",u),n.on("end",c),n.on("close",c),t.on("close",c),t.emit("pipe",n),t}},1602:function(t){var e={};function n(t,n,r){r||(r=Error);var i=function(t){var e,r;function i(e,r,i){return t.call(this,function(t,e,r){return"string"==typeof n?n:n(t,e,r)}(e,r,i))||this}return r=t,(e=i).prototype=Object.create(r.prototype),e.prototype.constructor=e,e.__proto__=r,i}(r);i.prototype.name=r.name,i.prototype.code=t,e[t]=i}function r(t,e){if(Array.isArray(t)){var n=t.length;return t=t.map((function(t){return String(t)})),n>2?"one of ".concat(e," ").concat(t.slice(0,n-1).join(", "),", or ")+t[n-1]:2===n?"one of ".concat(e," ").concat(t[0]," or ").concat(t[1]):"of ".concat(e," ").concat(t[0])}return"of ".concat(e," ").concat(String(t))}n("ERR_INVALID_OPT_VALUE",(function(t,e){return'The value "'+e+'" is invalid for option "'+t+'"'}),TypeError),n("ERR_INVALID_ARG_TYPE",(function(t,e,n){var i,o,a,s;if("string"==typeof e&&("not ","not "===e.substr(0,4))?(i="must not be",e=e.replace(/^not /,"")):i="must be",function(t,e,n){return(void 0===n||n>t.length)&&(n=t.length)," argument"===t.substring(n-9,n)}(t))o="The ".concat(t," ").concat(i," ").concat(r(e,"type"));else{var l=("number"!=typeof s&&(s=0),s+1>(a=t).length||-1===a.indexOf(".",s)?"argument":"property");o='The "'.concat(t,'" ').concat(l," ").concat(i," ").concat(r(e,"type"))}return o+". Received type ".concat(typeof n)}),TypeError),n("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF"),n("ERR_METHOD_NOT_IMPLEMENTED",(function(t){return"The "+t+" method is not implemented"})),n("ERR_STREAM_PREMATURE_CLOSE","Premature close"),n("ERR_STREAM_DESTROYED",(function(t){return"Cannot call "+t+" after a stream was destroyed"})),n("ERR_MULTIPLE_CALLBACK","Callback called multiple times"),n("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable"),n("ERR_STREAM_WRITE_AFTER_END","write after end"),n("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),n("ERR_UNKNOWN_ENCODING",(function(t){return"Unknown encoding: "+t}),TypeError),n("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event"),t.exports.codes=e},884:function(t,e,n){var r=Object.keys||function(t){var e=[];for(var n in t)e.push(n);return e};t.exports=u;var i=n(2762),o=n(3726);n(7523)(u,i);for(var a=r(o.prototype),s=0;s<a.length;s++){var l=a[s];u.prototype[l]||(u.prototype[l]=o.prototype[l])}function u(t){if(!(this instanceof u))return new u(t);i.call(this,t),o.call(this,t),this.allowHalfOpen=!0,t&&(!1===t.readable&&(this.readable=!1),!1===t.writable&&(this.writable=!1),!1===t.allowHalfOpen&&(this.allowHalfOpen=!1,this.once("end",c)))}function c(){this._writableState.ended||rM.nextTick(d,this)}function d(t){t.end()}Object.defineProperty(u.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(u.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(u.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(u.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&this._readableState.destroyed&&this._writableState.destroyed},set:function(t){void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed=t,this._writableState.destroyed=t)}})},1390:function(t,e,n){t.exports=i;var r=n(6756);function i(t){if(!(this instanceof i))return new i(t);r.call(this,t)}n(7523)(i,r),i.prototype._transform=function(t,e,n){n(null,t)}},2762:function(t,e,n){var r;t.exports=x,x.ReadableState=E,n(9826).EventEmitter;var i,o=function(t,e){return t.listeners(e).length},a=n(2611),s=n(44).Buffer,l=(void 0!==n.g?n.g:"undefined"!=typeof window?window:"undefined"!=typeof self?self:{}).Uint8Array||function(){},u=n(7199);i=u&&u.debuglog?u.debuglog("stream"):function(){};var c,d,f,h=n(3791),p=n(2410),m=n(1749).getHighWaterMark,g=n(1602).codes,v=g.ERR_INVALID_ARG_TYPE,y=g.ERR_STREAM_PUSH_AFTER_EOF,b=g.ERR_METHOD_NOT_IMPLEMENTED,_=g.ERR_STREAM_UNSHIFT_AFTER_END_EVENT;n(7523)(x,a);var w=p.errorOrDestroy,A=["error","close","destroy","pause","resume"];function E(t,e,i){r=r||n(884),t=t||{},"boolean"!=typeof i&&(i=e instanceof r),this.objectMode=!!t.objectMode,i&&(this.objectMode=this.objectMode||!!t.readableObjectMode),this.highWaterMark=m(this,t,"readableHighWaterMark",i),this.buffer=new h,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=!1!==t.emitClose,this.autoDestroy=!!t.autoDestroy,this.destroyed=!1,this.defaultEncoding=t.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,t.encoding&&(c||(c=n(748).StringDecoder),this.decoder=new c(t.encoding),this.encoding=t.encoding)}function x(t){if(r=r||n(884),!(this instanceof x))return new x(t);var e=this instanceof r;this._readableState=new E(t,this,e),this.readable=!0,t&&("function"==typeof t.read&&(this._read=t.read),"function"==typeof t.destroy&&(this._destroy=t.destroy)),a.call(this)}function S(t,e,n,r,o){i("readableAddChunk",e);var a,u=t._readableState;if(null===e)u.reading=!1,function(t,e){if(i("onEofChunk"),!e.ended){if(e.decoder){var n=e.decoder.end();n&&n.length&&(e.buffer.push(n),e.length+=e.objectMode?1:n.length)}e.ended=!0,e.sync?k(t):(e.needReadable=!1,e.emittedReadable||(e.emittedReadable=!0,P(t)))}}(t,u);else if(o||(a=function(t,e){var n,r;return r=e,s.isBuffer(r)||r instanceof l||"string"==typeof e||void 0===e||t.objectMode||(n=new v("chunk",["string","Buffer","Uint8Array"],e)),n}(u,e)),a)w(t,a);else if(u.objectMode||e&&e.length>0)if("string"==typeof e||u.objectMode||Object.getPrototypeOf(e)===s.prototype||(e=function(t){return s.from(t)}(e)),r)u.endEmitted?w(t,new _):T(t,u,e,!0);else if(u.ended)w(t,new y);else{if(u.destroyed)return!1;u.reading=!1,u.decoder&&!n?(e=u.decoder.write(e),u.objectMode||0!==e.length?T(t,u,e,!1):R(t,u)):T(t,u,e,!1)}else r||(u.reading=!1,R(t,u));return!u.ended&&(u.length<u.highWaterMark||0===u.length)}function T(t,e,n,r){e.flowing&&0===e.length&&!e.sync?(e.awaitDrain=0,t.emit("data",n)):(e.length+=e.objectMode?1:n.length,r?e.buffer.unshift(n):e.buffer.push(n),e.needReadable&&k(t)),R(t,e)}Object.defineProperty(x.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(t){this._readableState&&(this._readableState.destroyed=t)}}),x.prototype.destroy=p.destroy,x.prototype._undestroy=p.undestroy,x.prototype._destroy=function(t,e){e(t)},x.prototype.push=function(t,e){var n,r=this._readableState;return r.objectMode?n=!0:"string"==typeof t&&((e=e||r.defaultEncoding)!==r.encoding&&(t=s.from(t,e),e=""),n=!0),S(this,t,e,!1,n)},x.prototype.unshift=function(t){return S(this,t,null,!0,!1)},x.prototype.isPaused=function(){return!1===this._readableState.flowing},x.prototype.setEncoding=function(t){c||(c=n(748).StringDecoder);var e=new c(t);this._readableState.decoder=e,this._readableState.encoding=this._readableState.decoder.encoding;for(var r=this._readableState.buffer.head,i="";null!==r;)i+=e.write(r.data),r=r.next;return this._readableState.buffer.clear(),""!==i&&this._readableState.buffer.push(i),this._readableState.length=i.length,this};var C=1073741824;function I(t,e){return t<=0||0===e.length&&e.ended?0:e.objectMode?1:t!=t?e.flowing&&e.length?e.buffer.head.data.length:e.length:(t>e.highWaterMark&&(e.highWaterMark=function(t){return t>=C?t=C:(t--,t|=t>>>1,t|=t>>>2,t|=t>>>4,t|=t>>>8,t|=t>>>16,t++),t}(t)),t<=e.length?t:e.ended?e.length:(e.needReadable=!0,0))}function k(t){var e=t._readableState;i("emitReadable",e.needReadable,e.emittedReadable),e.needReadable=!1,e.emittedReadable||(i("emitReadable",e.flowing),e.emittedReadable=!0,rM.nextTick(P,t))}function P(t){var e=t._readableState;i("emitReadable_",e.destroyed,e.length,e.ended),e.destroyed||!e.length&&!e.ended||(t.emit("readable"),e.emittedReadable=!1),e.needReadable=!e.flowing&&!e.ended&&e.length<=e.highWaterMark,N(t)}function R(t,e){e.readingMore||(e.readingMore=!0,rM.nextTick(O,t,e))}function O(t,e){for(;!e.reading&&!e.ended&&(e.length<e.highWaterMark||e.flowing&&0===e.length);){var n=e.length;if(i("maybeReadMore read 0"),t.read(0),n===e.length)break}e.readingMore=!1}function M(t){var e=t._readableState;e.readableListening=t.listenerCount("readable")>0,e.resumeScheduled&&!e.paused?e.flowing=!0:t.listenerCount("data")>0&&t.resume()}function L(t){i("readable nexttick read 0"),t.read(0)}function D(t,e){i("resume",e.reading),e.reading||t.read(0),e.resumeScheduled=!1,t.emit("resume"),N(t),e.flowing&&!e.reading&&t.read(0)}function N(t){var e=t._readableState;for(i("flow",e.flowing);e.flowing&&null!==t.read(););}function B(t,e){return 0===e.length?null:(e.objectMode?n=e.buffer.shift():!t||t>=e.length?(n=e.decoder?e.buffer.join(""):1===e.buffer.length?e.buffer.first():e.buffer.concat(e.length),e.buffer.clear()):n=e.buffer.consume(t,e.decoder),n);var n}function j(t){var e=t._readableState;i("endReadable",e.endEmitted),e.endEmitted||(e.ended=!0,rM.nextTick(z,e,t))}function z(t,e){if(i("endReadableNT",t.endEmitted,t.length),!t.endEmitted&&0===t.length&&(t.endEmitted=!0,e.readable=!1,e.emit("end"),t.autoDestroy)){var n=e._writableState;(!n||n.autoDestroy&&n.finished)&&e.destroy()}}function F(t,e){for(var n=0,r=t.length;n<r;n++)if(t[n]===e)return n;return-1}x.prototype.read=function(t){i("read",t),t=parseInt(t,10);var e=this._readableState,n=t;if(0!==t&&(e.emittedReadable=!1),0===t&&e.needReadable&&((0!==e.highWaterMark?e.length>=e.highWaterMark:e.length>0)||e.ended))return i("read: emitReadable",e.length,e.ended),0===e.length&&e.ended?j(this):k(this),null;if(0===(t=I(t,e))&&e.ended)return 0===e.length&&j(this),null;var r,o=e.needReadable;return i("need readable",o),(0===e.length||e.length-t<e.highWaterMark)&&i("length less than watermark",o=!0),e.ended||e.reading?i("reading or ended",o=!1):o&&(i("do read"),e.reading=!0,e.sync=!0,0===e.length&&(e.needReadable=!0),this._read(e.highWaterMark),e.sync=!1,e.reading||(t=I(n,e))),null===(r=t>0?B(t,e):null)?(e.needReadable=e.length<=e.highWaterMark,t=0):(e.length-=t,e.awaitDrain=0),0===e.length&&(e.ended||(e.needReadable=!0),n!==t&&e.ended&&j(this)),null!==r&&this.emit("data",r),r},x.prototype._read=function(t){w(this,new b("_read()"))},x.prototype.pipe=function(t,e){var n=this,r=this._readableState;switch(r.pipesCount){case 0:r.pipes=t;break;case 1:r.pipes=[r.pipes,t];break;default:r.pipes.push(t)}r.pipesCount+=1,i("pipe count=%d opts=%j",r.pipesCount,e);var a=e&&!1===e.end||t===rM.stdout||t===rM.stderr?p:s;function s(){i("onend"),t.end()}r.endEmitted?rM.nextTick(a):n.once("end",a),t.on("unpipe",(function e(o,a){i("onunpipe"),o===n&&a&&!1===a.hasUnpiped&&(a.hasUnpiped=!0,i("cleanup"),t.removeListener("close",f),t.removeListener("finish",h),t.removeListener("drain",l),t.removeListener("error",d),t.removeListener("unpipe",e),n.removeListener("end",s),n.removeListener("end",p),n.removeListener("data",c),u=!0,!r.awaitDrain||t._writableState&&!t._writableState.needDrain||l())}));var l=function(t){return function(){var e=t._readableState;i("pipeOnDrain",e.awaitDrain),e.awaitDrain&&e.awaitDrain--,0===e.awaitDrain&&o(t,"data")&&(e.flowing=!0,N(t))}}(n);t.on("drain",l);var u=!1;function c(e){i("ondata");var o=t.write(e);i("dest.write",o),!1===o&&((1===r.pipesCount&&r.pipes===t||r.pipesCount>1&&-1!==F(r.pipes,t))&&!u&&(i("false write response, pause",r.awaitDrain),r.awaitDrain++),n.pause())}function d(e){i("onerror",e),p(),t.removeListener("error",d),0===o(t,"error")&&w(t,e)}function f(){t.removeListener("finish",h),p()}function h(){i("onfinish"),t.removeListener("close",f),p()}function p(){i("unpipe"),n.unpipe(t)}return n.on("data",c),function(t,e,n){if("function"==typeof t.prependListener)return t.prependListener(e,n);t._events&&t._events[e]?Array.isArray(t._events[e])?t._events[e].unshift(n):t._events[e]=[n,t._events[e]]:t.on(e,n)}(t,"error",d),t.once("close",f),t.once("finish",h),t.emit("pipe",n),r.flowing||(i("pipe resume"),n.resume()),t},x.prototype.unpipe=function(t){var e=this._readableState,n={hasUnpiped:!1};if(0===e.pipesCount)return this;if(1===e.pipesCount)return t&&t!==e.pipes||(t||(t=e.pipes),e.pipes=null,e.pipesCount=0,e.flowing=!1,t&&t.emit("unpipe",this,n)),this;if(!t){var r=e.pipes,i=e.pipesCount;e.pipes=null,e.pipesCount=0,e.flowing=!1;for(var o=0;o<i;o++)r[o].emit("unpipe",this,{hasUnpiped:!1});return this}var a=F(e.pipes,t);return-1===a||(e.pipes.splice(a,1),e.pipesCount-=1,1===e.pipesCount&&(e.pipes=e.pipes[0]),t.emit("unpipe",this,n)),this},x.prototype.on=function(t,e){var n=a.prototype.on.call(this,t,e),r=this._readableState;return"data"===t?(r.readableListening=this.listenerCount("readable")>0,!1!==r.flowing&&this.resume()):"readable"===t&&(r.endEmitted||r.readableListening||(r.readableListening=r.needReadable=!0,r.flowing=!1,r.emittedReadable=!1,i("on readable",r.length,r.reading),r.length?k(this):r.reading||rM.nextTick(L,this))),n},x.prototype.addListener=x.prototype.on,x.prototype.removeListener=function(t,e){var n=a.prototype.removeListener.call(this,t,e);return"readable"===t&&rM.nextTick(M,this),n},x.prototype.removeAllListeners=function(t){var e=a.prototype.removeAllListeners.apply(this,arguments);return"readable"!==t&&void 0!==t||rM.nextTick(M,this),e},x.prototype.resume=function(){var t=this._readableState;return t.flowing||(i("resume"),t.flowing=!t.readableListening,function(t,e){e.resumeScheduled||(e.resumeScheduled=!0,rM.nextTick(D,t,e))}(this,t)),t.paused=!1,this},x.prototype.pause=function(){return i("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(i("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this},x.prototype.wrap=function(t){var e=this,n=this._readableState,r=!1;for(var o in t.on("end",(function(){if(i("wrapped end"),n.decoder&&!n.ended){var t=n.decoder.end();t&&t.length&&e.push(t)}e.push(null)})),t.on("data",(function(o){i("wrapped data"),n.decoder&&(o=n.decoder.write(o)),n.objectMode&&null==o||(n.objectMode||o&&o.length)&&(e.push(o)||(r=!0,t.pause()))})),t)void 0===this[o]&&"function"==typeof t[o]&&(this[o]=function(e){return function(){return t[e].apply(t,arguments)}}(o));for(var a=0;a<A.length;a++)t.on(A[a],this.emit.bind(this,A[a]));return this._read=function(e){i("wrapped _read",e),r&&(r=!1,t.resume())},this},"function"==typeof Symbol&&(x.prototype[Symbol.asyncIterator]=function(){return void 0===d&&(d=n(5857)),d(this)}),Object.defineProperty(x.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(x.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(x.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(t){this._readableState&&(this._readableState.flowing=t)}}),x._fromList=B,Object.defineProperty(x.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}}),"function"==typeof Symbol&&(x.from=function(t,e){return void 0===f&&(f=n(3411)),f(x,t,e)})},6756:function(t,e,n){t.exports=c;var r=n(1602).codes,i=r.ERR_METHOD_NOT_IMPLEMENTED,o=r.ERR_MULTIPLE_CALLBACK,a=r.ERR_TRANSFORM_ALREADY_TRANSFORMING,s=r.ERR_TRANSFORM_WITH_LENGTH_0,l=n(884);function u(t,e){var n=this._transformState;n.transforming=!1;var r=n.writecb;if(null===r)return this.emit("error",new o);n.writechunk=null,n.writecb=null,null!=e&&this.push(e),r(t);var i=this._readableState;i.reading=!1,(i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}function c(t){if(!(this instanceof c))return new c(t);l.call(this,t),this._transformState={afterTransform:u.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,t&&("function"==typeof t.transform&&(this._transform=t.transform),"function"==typeof t.flush&&(this._flush=t.flush)),this.on("prefinish",d)}function d(){var t=this;"function"!=typeof this._flush||this._readableState.destroyed?f(this,null,null):this._flush((function(e,n){f(t,e,n)}))}function f(t,e,n){if(e)return t.emit("error",e);if(null!=n&&t.push(n),t._writableState.length)throw new s;if(t._transformState.transforming)throw new a;return t.push(null)}n(7523)(c,l),c.prototype.push=function(t,e){return this._transformState.needTransform=!1,l.prototype.push.call(this,t,e)},c.prototype._transform=function(t,e,n){n(new i("_transform()"))},c.prototype._write=function(t,e,n){var r=this._transformState;if(r.writecb=n,r.writechunk=t,r.writeencoding=e,!r.transforming){var i=this._readableState;(r.needTransform||i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}},c.prototype._read=function(t){var e=this._transformState;null===e.writechunk||e.transforming?e.needTransform=!0:(e.transforming=!0,this._transform(e.writechunk,e.writeencoding,e.afterTransform))},c.prototype._destroy=function(t,e){l.prototype._destroy.call(this,t,(function(t){e(t)}))}},3726:function(t,e,n){function r(t){var e=this;this.next=null,this.entry=null,this.finish=function(){!function(t,e){var n=t.entry;for(t.entry=null;n;){var r=n.callback;e.pendingcb--,r(void 0),n=n.next}e.corkedRequestsFree.next=t}(e,t)}}var i;t.exports=x,x.WritableState=E;var o,a={deprecate:n(9e3)},s=n(2611),l=n(44).Buffer,u=(void 0!==n.g?n.g:"undefined"!=typeof window?window:"undefined"!=typeof self?self:{}).Uint8Array||function(){},c=n(2410),d=n(1749).getHighWaterMark,f=n(1602).codes,h=f.ERR_INVALID_ARG_TYPE,p=f.ERR_METHOD_NOT_IMPLEMENTED,m=f.ERR_MULTIPLE_CALLBACK,g=f.ERR_STREAM_CANNOT_PIPE,v=f.ERR_STREAM_DESTROYED,y=f.ERR_STREAM_NULL_VALUES,b=f.ERR_STREAM_WRITE_AFTER_END,_=f.ERR_UNKNOWN_ENCODING,w=c.errorOrDestroy;function A(){}function E(t,e,o){i=i||n(884),t=t||{},"boolean"!=typeof o&&(o=e instanceof i),this.objectMode=!!t.objectMode,o&&(this.objectMode=this.objectMode||!!t.writableObjectMode),this.highWaterMark=d(this,t,"writableHighWaterMark",o),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var a=!1===t.decodeStrings;this.decodeStrings=!a,this.defaultEncoding=t.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(t){!function(t,e){var n=t._writableState,r=n.sync,i=n.writecb;if("function"!=typeof i)throw new m;if(function(t){t.writing=!1,t.writecb=null,t.length-=t.writelen,t.writelen=0}(n),e)!function(t,e,n,r,i){--e.pendingcb,n?(rM.nextTick(i,r),rM.nextTick(P,t,e),t._writableState.errorEmitted=!0,w(t,r)):(i(r),t._writableState.errorEmitted=!0,w(t,r),P(t,e))}(t,n,r,e,i);else{var o=I(n)||t.destroyed;o||n.corked||n.bufferProcessing||!n.bufferedRequest||C(t,n),r?rM.nextTick(T,t,n,o,i):T(t,n,o,i)}}(e,t)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!1!==t.emitClose,this.autoDestroy=!!t.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new r(this)}function x(t){var e=this instanceof(i=i||n(884));if(!e&&!o.call(x,this))return new x(t);this._writableState=new E(t,this,e),this.writable=!0,t&&("function"==typeof t.write&&(this._write=t.write),"function"==typeof t.writev&&(this._writev=t.writev),"function"==typeof t.destroy&&(this._destroy=t.destroy),"function"==typeof t.final&&(this._final=t.final)),s.call(this)}function S(t,e,n,r,i,o,a){e.writelen=r,e.writecb=a,e.writing=!0,e.sync=!0,e.destroyed?e.onwrite(new v("write")):n?t._writev(i,e.onwrite):t._write(i,o,e.onwrite),e.sync=!1}function T(t,e,n,r){n||function(t,e){0===e.length&&e.needDrain&&(e.needDrain=!1,t.emit("drain"))}(t,e),e.pendingcb--,r(),P(t,e)}function C(t,e){e.bufferProcessing=!0;var n=e.bufferedRequest;if(t._writev&&n&&n.next){var i=e.bufferedRequestCount,o=new Array(i),a=e.corkedRequestsFree;a.entry=n;for(var s=0,l=!0;n;)o[s]=n,n.isBuf||(l=!1),n=n.next,s+=1;o.allBuffers=l,S(t,e,!0,e.length,o,"",a.finish),e.pendingcb++,e.lastBufferedRequest=null,a.next?(e.corkedRequestsFree=a.next,a.next=null):e.corkedRequestsFree=new r(e),e.bufferedRequestCount=0}else{for(;n;){var u=n.chunk,c=n.encoding,d=n.callback;if(S(t,e,!1,e.objectMode?1:u.length,u,c,d),n=n.next,e.bufferedRequestCount--,e.writing)break}null===n&&(e.lastBufferedRequest=null)}e.bufferedRequest=n,e.bufferProcessing=!1}function I(t){return t.ending&&0===t.length&&null===t.bufferedRequest&&!t.finished&&!t.writing}function k(t,e){t._final((function(n){e.pendingcb--,n&&w(t,n),e.prefinished=!0,t.emit("prefinish"),P(t,e)}))}function P(t,e){var n=I(e);if(n&&(function(t,e){e.prefinished||e.finalCalled||("function"!=typeof t._final||e.destroyed?(e.prefinished=!0,t.emit("prefinish")):(e.pendingcb++,e.finalCalled=!0,rM.nextTick(k,t,e)))}(t,e),0===e.pendingcb&&(e.finished=!0,t.emit("finish"),e.autoDestroy))){var r=t._readableState;(!r||r.autoDestroy&&r.endEmitted)&&t.destroy()}return n}n(7523)(x,s),E.prototype.getBuffer=function(){for(var t=this.bufferedRequest,e=[];t;)e.push(t),t=t.next;return e},function(){try{Object.defineProperty(E.prototype,"buffer",{get:a.deprecate((function(){return this.getBuffer()}),"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(t){}}(),"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(o=Function.prototype[Symbol.hasInstance],Object.defineProperty(x,Symbol.hasInstance,{value:function(t){return!!o.call(this,t)||this===x&&t&&t._writableState instanceof E}})):o=function(t){return t instanceof this},x.prototype.pipe=function(){w(this,new g)},x.prototype.write=function(t,e,n){var r,i=this._writableState,o=!1,a=!i.objectMode&&(r=t,l.isBuffer(r)||r instanceof u);return a&&!l.isBuffer(t)&&(t=function(t){return l.from(t)}(t)),"function"==typeof e&&(n=e,e=null),a?e="buffer":e||(e=i.defaultEncoding),"function"!=typeof n&&(n=A),i.ending?function(t,e){var n=new b;w(t,n),rM.nextTick(e,n)}(this,n):(a||function(t,e,n,r){var i;return null===n?i=new y:"string"==typeof n||e.objectMode||(i=new h("chunk",["string","Buffer"],n)),!i||(w(t,i),rM.nextTick(r,i),!1)}(this,i,t,n))&&(i.pendingcb++,o=function(t,e,n,r,i,o){if(!n){var a=function(t,e,n){return t.objectMode||!1===t.decodeStrings||"string"!=typeof e||(e=l.from(e,n)),e}(e,r,i);r!==a&&(n=!0,i="buffer",r=a)}var s=e.objectMode?1:r.length;e.length+=s;var u=e.length<e.highWaterMark;if(u||(e.needDrain=!0),e.writing||e.corked){var c=e.lastBufferedRequest;e.lastBufferedRequest={chunk:r,encoding:i,isBuf:n,callback:o,next:null},c?c.next=e.lastBufferedRequest:e.bufferedRequest=e.lastBufferedRequest,e.bufferedRequestCount+=1}else S(t,e,!1,s,r,i,o);return u}(this,i,a,t,e,n)),o},x.prototype.cork=function(){this._writableState.corked++},x.prototype.uncork=function(){var t=this._writableState;t.corked&&(t.corked--,t.writing||t.corked||t.bufferProcessing||!t.bufferedRequest||C(this,t))},x.prototype.setDefaultEncoding=function(t){if("string"==typeof t&&(t=t.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((t+"").toLowerCase())>-1))throw new _(t);return this._writableState.defaultEncoding=t,this},Object.defineProperty(x.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(x.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),x.prototype._write=function(t,e,n){n(new p("_write()"))},x.prototype._writev=null,x.prototype.end=function(t,e,n){var r=this._writableState;return"function"==typeof t?(n=t,t=null,e=null):"function"==typeof e&&(n=e,e=null),null!=t&&this.write(t,e),r.corked&&(r.corked=1,this.uncork()),r.ending||function(t,e,n){e.ending=!0,P(t,e),n&&(e.finished?rM.nextTick(n):t.once("finish",n)),e.ended=!0,t.writable=!1}(this,r,n),this},Object.defineProperty(x.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(x.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(t){this._writableState&&(this._writableState.destroyed=t)}}),x.prototype.destroy=c.destroy,x.prototype._undestroy=c.undestroy,x.prototype._destroy=function(t,e){e(t)}},5857:function(t,e,n){var r;function i(t,e,n){return(e=function(t){var e=function(t){if("object"!=typeof t||null===t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==typeof e?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var o=n(2896),a=Symbol("lastResolve"),s=Symbol("lastReject"),l=Symbol("error"),u=Symbol("ended"),c=Symbol("lastPromise"),d=Symbol("handlePromise"),f=Symbol("stream");function h(t,e){return{value:t,done:e}}function p(t){var e=t[a];if(null!==e){var n=t[f].read();null!==n&&(t[c]=null,t[a]=null,t[s]=null,e(h(n,!1)))}}function m(t){rM.nextTick(p,t)}var g=Object.getPrototypeOf((function(){})),v=Object.setPrototypeOf((i(r={get stream(){return this[f]},next:function(){var t=this,e=this[l];if(null!==e)return Promise.reject(e);if(this[u])return Promise.resolve(h(void 0,!0));if(this[f].destroyed)return new Promise((function(e,n){rM.nextTick((function(){t[l]?n(t[l]):e(h(void 0,!0))}))}));var n,r=this[c];if(r)n=new Promise(function(t,e){return function(n,r){t.then((function(){e[u]?n(h(void 0,!0)):e[d](n,r)}),r)}}(r,this));else{var i=this[f].read();if(null!==i)return Promise.resolve(h(i,!1));n=new Promise(this[d])}return this[c]=n,n}},Symbol.asyncIterator,(function(){return this})),i(r,"return",(function(){var t=this;return new Promise((function(e,n){t[f].destroy(null,(function(t){t?n(t):e(h(void 0,!0))}))}))})),r),g);t.exports=function(t){var e,n=Object.create(v,(i(e={},f,{value:t,writable:!0}),i(e,a,{value:null,writable:!0}),i(e,s,{value:null,writable:!0}),i(e,l,{value:null,writable:!0}),i(e,u,{value:t._readableState.endEmitted,writable:!0}),i(e,d,{value:function(t,e){var r=n[f].read();r?(n[c]=null,n[a]=null,n[s]=null,t(h(r,!1))):(n[a]=t,n[s]=e)},writable:!0}),e));return n[c]=null,o(t,(function(t){if(t&&"ERR_STREAM_PREMATURE_CLOSE"!==t.code){var e=n[s];return null!==e&&(n[c]=null,n[a]=null,n[s]=null,e(t)),void(n[l]=t)}var r=n[a];null!==r&&(n[c]=null,n[a]=null,n[s]=null,r(h(void 0,!0))),n[u]=!0})),t.on("readable",m.bind(null,n)),n}},3791:function(t,e,n){function r(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function i(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?r(Object(n),!0).forEach((function(e){o(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function o(t,e,n){return(e=a(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function a(t){var e=function(t){if("object"!=typeof t||null===t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==typeof e?e:String(e)}var s=n(44).Buffer,l=n(3779).inspect,u=l&&l.custom||"inspect";t.exports=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.head=null,this.tail=null,this.length=0}var e,n;return e=t,(n=[{key:"push",value:function(t){var e={data:t,next:null};this.length>0?this.tail.next=e:this.head=e,this.tail=e,++this.length}},{key:"unshift",value:function(t){var e={data:t,next:this.head};0===this.length&&(this.tail=e),this.head=e,++this.length}},{key:"shift",value:function(){if(0!==this.length){var t=this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,t}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(t){if(0===this.length)return"";for(var e=this.head,n=""+e.data;e=e.next;)n+=t+e.data;return n}},{key:"concat",value:function(t){if(0===this.length)return s.alloc(0);for(var e,n,r,i=s.allocUnsafe(t>>>0),o=this.head,a=0;o;)e=o.data,n=i,r=a,s.prototype.copy.call(e,n,r),a+=o.data.length,o=o.next;return i}},{key:"consume",value:function(t,e){var n;return t<this.head.data.length?(n=this.head.data.slice(0,t),this.head.data=this.head.data.slice(t)):n=t===this.head.data.length?this.shift():e?this._getString(t):this._getBuffer(t),n}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(t){var e=this.head,n=1,r=e.data;for(t-=r.length;e=e.next;){var i=e.data,o=t>i.length?i.length:t;if(o===i.length?r+=i:r+=i.slice(0,t),0==(t-=o)){o===i.length?(++n,e.next?this.head=e.next:this.head=this.tail=null):(this.head=e,e.data=i.slice(o));break}++n}return this.length-=n,r}},{key:"_getBuffer",value:function(t){var e=s.allocUnsafe(t),n=this.head,r=1;for(n.data.copy(e),t-=n.data.length;n=n.next;){var i=n.data,o=t>i.length?i.length:t;if(i.copy(e,e.length-t,0,o),0==(t-=o)){o===i.length?(++r,n.next?this.head=n.next:this.head=this.tail=null):(this.head=n,n.data=i.slice(o));break}++r}return this.length-=r,e}},{key:u,value:function(t,e){return l(this,i(i({},e),{},{depth:0,customInspect:!1}))}}])&&function(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,a(r.key),r)}}(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),t}()},2410:function(t){function e(t,e){r(t,e),n(t)}function n(t){t._writableState&&!t._writableState.emitClose||t._readableState&&!t._readableState.emitClose||t.emit("close")}function r(t,e){t.emit("error",e)}t.exports={destroy:function(t,i){var o=this,a=this._readableState&&this._readableState.destroyed,s=this._writableState&&this._writableState.destroyed;return a||s?(i?i(t):t&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,rM.nextTick(r,this,t)):rM.nextTick(r,this,t)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(t||null,(function(t){!i&&t?o._writableState?o._writableState.errorEmitted?rM.nextTick(n,o):(o._writableState.errorEmitted=!0,rM.nextTick(e,o,t)):rM.nextTick(e,o,t):i?(rM.nextTick(n,o),i(t)):rM.nextTick(n,o)})),this)},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)},errorOrDestroy:function(t,e){var n=t._readableState,r=t._writableState;n&&n.autoDestroy||r&&r.autoDestroy?t.destroy(e):t.emit("error",e)}}},2896:function(t,e,n){var r=n(1602).codes.ERR_STREAM_PREMATURE_CLOSE;function i(){}t.exports=function t(e,n,o){if("function"==typeof n)return t(e,null,n);n||(n={}),o=function(t){var e=!1;return function(){if(!e){e=!0;for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];t.apply(this,r)}}}(o||i);var a=n.readable||!1!==n.readable&&e.readable,s=n.writable||!1!==n.writable&&e.writable,l=function(){e.writable||c()},u=e._writableState&&e._writableState.finished,c=function(){s=!1,u=!0,a||o.call(e)},d=e._readableState&&e._readableState.endEmitted,f=function(){a=!1,d=!0,s||o.call(e)},h=function(t){o.call(e,t)},p=function(){var t;return a&&!d?(e._readableState&&e._readableState.ended||(t=new r),o.call(e,t)):s&&!u?(e._writableState&&e._writableState.ended||(t=new r),o.call(e,t)):void 0},m=function(){e.req.on("finish",c)};return function(t){return t.setHeader&&"function"==typeof t.abort}(e)?(e.on("complete",c),e.on("abort",p),e.req?m():e.on("request",m)):s&&!e._writableState&&(e.on("end",l),e.on("close",l)),e.on("end",f),e.on("finish",c),!1!==n.error&&e.on("error",h),e.on("close",p),function(){e.removeListener("complete",c),e.removeListener("abort",p),e.removeListener("request",m),e.req&&e.req.removeListener("finish",c),e.removeListener("end",l),e.removeListener("close",l),e.removeListener("finish",c),e.removeListener("end",f),e.removeListener("error",h),e.removeListener("close",p)}}},3411:function(t){t.exports=function(){throw new Error("Readable.from is not available in the browser")}},8460:function(t,e,n){var r,i=n(1602).codes,o=i.ERR_MISSING_ARGS,a=i.ERR_STREAM_DESTROYED;function s(t){if(t)throw t}function l(t){t()}function u(t,e){return t.pipe(e)}t.exports=function(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];var c,d=function(t){return t.length?"function"!=typeof t[t.length-1]?s:t.pop():s}(e);if(Array.isArray(e[0])&&(e=e[0]),e.length<2)throw new o("streams");var f=e.map((function(t,i){var o=i<e.length-1;return function(t,e,i,o){o=function(t){var e=!1;return function(){e||(e=!0,t.apply(void 0,arguments))}}(o);var s=!1;t.on("close",(function(){s=!0})),void 0===r&&(r=n(2896)),r(t,{readable:e,writable:i},(function(t){if(t)return o(t);s=!0,o()}));var l=!1;return function(e){if(!s&&!l)return l=!0,function(t){return t.setHeader&&"function"==typeof t.abort}(t)?t.abort():"function"==typeof t.destroy?t.destroy():void o(e||new a("pipe"))}}(t,o,i>0,(function(t){c||(c=t),t&&f.forEach(l),o||(f.forEach(l),d(c))}))}));return e.reduce(u)}},1749:function(t,e,n){var r=n(1602).codes.ERR_INVALID_OPT_VALUE;t.exports={getHighWaterMark:function(t,e,n,i){var o=function(t,e,n){return null!=t.highWaterMark?t.highWaterMark:e?t[n]:null}(e,i,n);if(null!=o){if(!isFinite(o)||Math.floor(o)!==o||o<0)throw new r(i?n:"highWaterMark",o);return Math.floor(o)}return t.objectMode?16:16384}}},2611:function(t,e,n){t.exports=n(9826).EventEmitter},748:function(t,e,n){var r=n(4598).Buffer,i=r.isEncoding||function(t){switch((t=""+t)&&t.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function o(t){var e;switch(this.encoding=function(t){var e=function(t){if(!t)return"utf8";for(var e;;)switch(t){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return t;default:if(e)return;t=(""+t).toLowerCase(),e=!0}}(t);if("string"!=typeof e&&(r.isEncoding===i||!i(t)))throw new Error("Unknown encoding: "+t);return e||t}(t),this.encoding){case"utf16le":this.text=l,this.end=u,e=4;break;case"utf8":this.fillLast=s,e=4;break;case"base64":this.text=c,this.end=d,e=3;break;default:return this.write=f,void(this.end=h)}this.lastNeed=0,this.lastTotal=0,this.lastChar=r.allocUnsafe(e)}function a(t){return t<=127?0:t>>5==6?2:t>>4==14?3:t>>3==30?4:t>>6==2?-1:-2}function s(t){var e=this.lastTotal-this.lastNeed,n=function(t,e){if(128!=(192&e[0]))return t.lastNeed=0,"";if(t.lastNeed>1&&e.length>1){if(128!=(192&e[1]))return t.lastNeed=1,"";if(t.lastNeed>2&&e.length>2&&128!=(192&e[2]))return t.lastNeed=2,""}}(this,t);return void 0!==n?n:this.lastNeed<=t.length?(t.copy(this.lastChar,e,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(t.copy(this.lastChar,e,0,t.length),void(this.lastNeed-=t.length))}function l(t,e){if((t.length-e)%2==0){var n=t.toString("utf16le",e);if(n){var r=n.charCodeAt(n.length-1);if(r>=55296&&r<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=t[t.length-2],this.lastChar[1]=t[t.length-1],n.slice(0,-1)}return n}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=t[t.length-1],t.toString("utf16le",e,t.length-1)}function u(t){var e=t&&t.length?this.write(t):"";if(this.lastNeed){var n=this.lastTotal-this.lastNeed;return e+this.lastChar.toString("utf16le",0,n)}return e}function c(t,e){var n=(t.length-e)%3;return 0===n?t.toString("base64",e):(this.lastNeed=3-n,this.lastTotal=3,1===n?this.lastChar[0]=t[t.length-1]:(this.lastChar[0]=t[t.length-2],this.lastChar[1]=t[t.length-1]),t.toString("base64",e,t.length-n))}function d(t){var e=t&&t.length?this.write(t):"";return this.lastNeed?e+this.lastChar.toString("base64",0,3-this.lastNeed):e}function f(t){return t.toString(this.encoding)}function h(t){return t&&t.length?this.write(t):""}e.StringDecoder=o,o.prototype.write=function(t){if(0===t.length)return"";var e,n;if(this.lastNeed){if(void 0===(e=this.fillLast(t)))return"";n=this.lastNeed,this.lastNeed=0}else n=0;return n<t.length?e?e+this.text(t,n):this.text(t,n):e||""},o.prototype.end=function(t){var e=t&&t.length?this.write(t):"";return this.lastNeed?e+"":e},o.prototype.text=function(t,e){var n=function(t,e,n){var r=e.length-1;if(r<n)return 0;var i=a(e[r]);return i>=0?(i>0&&(t.lastNeed=i-1),i):--r<n||-2===i?0:(i=a(e[r]))>=0?(i>0&&(t.lastNeed=i-2),i):--r<n||-2===i?0:(i=a(e[r]))>=0?(i>0&&(2===i?i=0:t.lastNeed=i-3),i):0}(this,t,e);if(!this.lastNeed)return t.toString("utf8",e);this.lastTotal=n;var r=t.length-(n-this.lastNeed);return t.copy(this.lastChar,0,r),t.toString("utf8",e,r)},o.prototype.fillLast=function(t){if(this.lastNeed<=t.length)return t.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);t.copy(this.lastChar,this.lastTotal-this.lastNeed,0,t.length),this.lastNeed-=t.length}},4598:function(t,e,n){var r=n(44),i=r.Buffer;function o(t,e){for(var n in t)e[n]=t[n]}function a(t,e,n){return i(t,e,n)}i.from&&i.alloc&&i.allocUnsafe&&i.allocUnsafeSlow?t.exports=r:(o(r,e),e.Buffer=a),o(i,a),a.from=function(t,e,n){if("number"==typeof t)throw new TypeError("Argument must not be a number");return i(t,e,n)},a.alloc=function(t,e,n){if("number"!=typeof t)throw new TypeError("Argument must be a number");var r=i(t);return void 0!==e?"string"==typeof n?r.fill(e,n):r.fill(e):r.fill(0),r},a.allocUnsafe=function(t){if("number"!=typeof t)throw new TypeError("Argument must be a number");return i(t)},a.allocUnsafeSlow=function(t){if("number"!=typeof t)throw new TypeError("Argument must be a number");return r.SlowBuffer(t)}},8571:function(t,e,n){var r;!function(i,o){var a="function",s="undefined",l="object",u="string",c="major",d="model",f="name",h="type",p="vendor",m="version",g="architecture",v="console",y="mobile",b="tablet",_="smarttv",w="wearable",A="embedded",E="Amazon",x="Apple",S="ASUS",T="BlackBerry",C="Browser",I="Chrome",k="Firefox",P="Google",R="Huawei",O="LG",M="Microsoft",L="Motorola",D="Opera",N="Samsung",B="Sharp",j="Sony",z="Xiaomi",F="Zebra",U="Facebook",q="Chromium OS",G="Mac OS",H=function(t){for(var e={},n=0;n<t.length;n++)e[t[n].toUpperCase()]=t[n];return e},V=function(t,e){return typeof t===u&&-1!==Q(e).indexOf(Q(t))},Q=function(t){return t.toLowerCase()},W=function(t,e){if(typeof t===u)return t=t.replace(/^\s\s*/,""),typeof e===s?t:t.substring(0,500)},Y=function(t,e){for(var n,r,i,s,u,c,d=0;d<e.length&&!u;){var f=e[d],h=e[d+1];for(n=r=0;n<f.length&&!u&&f[n];)if(u=f[n++].exec(t))for(i=0;i<h.length;i++)c=u[++r],typeof(s=h[i])===l&&s.length>0?2===s.length?typeof s[1]==a?this[s[0]]=s[1].call(this,c):this[s[0]]=s[1]:3===s.length?typeof s[1]!==a||s[1].exec&&s[1].test?this[s[0]]=c?c.replace(s[1],s[2]):o:this[s[0]]=c?s[1].call(this,c,s[2]):o:4===s.length&&(this[s[0]]=c?s[3].call(this,c.replace(s[1],s[2])):o):this[s]=c||o;d+=2}},K=function(t,e){for(var n in e)if(typeof e[n]===l&&e[n].length>0){for(var r=0;r<e[n].length;r++)if(V(e[n][r],t))return"?"===n?o:n}else if(V(e[n],t))return"?"===n?o:n;return t},X={ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2e3:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2",8.1:"NT 6.3",10:["NT 6.4","NT 10.0"],RT:"ARM"},$={browser:[[/\b(?:crmo|crios)\/([\w\.]+)/i],[m,[f,"Chrome"]],[/edg(?:e|ios|a)?\/([\w\.]+)/i],[m,[f,"Edge"]],[/(opera mini)\/([-\w\.]+)/i,/(opera [mobiletab]{3,6})\b.+version\/([-\w\.]+)/i,/(opera)(?:.+version\/|[\/ ]+)([\w\.]+)/i],[f,m],[/opios[\/ ]+([\w\.]+)/i],[m,[f,D+" Mini"]],[/\bop(?:rg)?x\/([\w\.]+)/i],[m,[f,D+" GX"]],[/\bopr\/([\w\.]+)/i],[m,[f,D]],[/\bb[ai]*d(?:uhd|[ub]*[aekoprswx]{5,6})[\/ ]?([\w\.]+)/i],[m,[f,"Baidu"]],[/(kindle)\/([\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer)[\/ ]?([\w\.]*)/i,/(avant|iemobile|slim)\s?(?:browser)?[\/ ]?([\w\.]*)/i,/(?:ms|\()(ie) ([\w\.]+)/i,/(flock|rockmelt|midori|epiphany|silk|skyfire|bolt|iron|vivaldi|iridium|phantomjs|bowser|quark|qupzilla|falkon|rekonq|puffin|brave|whale(?!.+naver)|qqbrowserlite|qq|duckduckgo)\/([-\w\.]+)/i,/(heytap|ovi)browser\/([\d\.]+)/i,/(weibo)__([\d\.]+)/i],[f,m],[/\bddg\/([\w\.]+)/i],[m,[f,"DuckDuckGo"]],[/(?:\buc? ?browser|(?:juc.+)ucweb)[\/ ]?([\w\.]+)/i],[m,[f,"UC"+C]],[/microm.+\bqbcore\/([\w\.]+)/i,/\bqbcore\/([\w\.]+).+microm/i,/micromessenger\/([\w\.]+)/i],[m,[f,"WeChat"]],[/konqueror\/([\w\.]+)/i],[m,[f,"Konqueror"]],[/trident.+rv[: ]([\w\.]{1,9})\b.+like gecko/i],[m,[f,"IE"]],[/ya(?:search)?browser\/([\w\.]+)/i],[m,[f,"Yandex"]],[/slbrowser\/([\w\.]+)/i],[m,[f,"Smart Lenovo "+C]],[/(avast|avg)\/([\w\.]+)/i],[[f,/(.+)/,"$1 Secure "+C],m],[/\bfocus\/([\w\.]+)/i],[m,[f,k+" Focus"]],[/\bopt\/([\w\.]+)/i],[m,[f,D+" Touch"]],[/coc_coc\w+\/([\w\.]+)/i],[m,[f,"Coc Coc"]],[/dolfin\/([\w\.]+)/i],[m,[f,"Dolphin"]],[/coast\/([\w\.]+)/i],[m,[f,D+" Coast"]],[/miuibrowser\/([\w\.]+)/i],[m,[f,"MIUI "+C]],[/fxios\/([-\w\.]+)/i],[m,[f,k]],[/\bqihu|(qi?ho?o?|360)browser/i],[[f,"360 "+C]],[/(oculus|sailfish|huawei|vivo)browser\/([\w\.]+)/i],[[f,/(.+)/,"$1 "+C],m],[/samsungbrowser\/([\w\.]+)/i],[m,[f,N+" Internet"]],[/(comodo_dragon)\/([\w\.]+)/i],[[f,/_/g," "],m],[/metasr[\/ ]?([\d\.]+)/i],[m,[f,"Sogou Explorer"]],[/(sogou)mo\w+\/([\d\.]+)/i],[[f,"Sogou Mobile"],m],[/(electron)\/([\w\.]+) safari/i,/(tesla)(?: qtcarbrowser|\/(20\d\d\.[-\w\.]+))/i,/m?(qqbrowser|2345Explorer)[\/ ]?([\w\.]+)/i],[f,m],[/(lbbrowser)/i,/\[(linkedin)app\]/i],[f],[/((?:fban\/fbios|fb_iab\/fb4a)(?!.+fbav)|;fbav\/([\w\.]+);)/i],[[f,U],m],[/(Klarna)\/([\w\.]+)/i,/(kakao(?:talk|story))[\/ ]([\w\.]+)/i,/(naver)\(.*?(\d+\.[\w\.]+).*\)/i,/safari (line)\/([\w\.]+)/i,/\b(line)\/([\w\.]+)\/iab/i,/(alipay)client\/([\w\.]+)/i,/(twitter)(?:and| f.+e\/([\w\.]+))/i,/(chromium|instagram|snapchat)[\/ ]([-\w\.]+)/i],[f,m],[/\bgsa\/([\w\.]+) .*safari\//i],[m,[f,"GSA"]],[/musical_ly(?:.+app_?version\/|_)([\w\.]+)/i],[m,[f,"TikTok"]],[/headlesschrome(?:\/([\w\.]+)| )/i],[m,[f,I+" Headless"]],[/ wv\).+(chrome)\/([\w\.]+)/i],[[f,I+" WebView"],m],[/droid.+ version\/([\w\.]+)\b.+(?:mobile safari|safari)/i],[m,[f,"Android "+C]],[/(chrome|omniweb|arora|[tizenoka]{5} ?browser)\/v?([\w\.]+)/i],[f,m],[/version\/([\w\.\,]+) .*mobile\/\w+ (safari)/i],[m,[f,"Mobile Safari"]],[/version\/([\w(\.|\,)]+) .*(mobile ?safari|safari)/i],[m,f],[/webkit.+?(mobile ?safari|safari)(\/[\w\.]+)/i],[f,[m,K,{"1.0":"/8",1.2:"/1",1.3:"/3","2.0":"/412","2.0.2":"/416","2.0.3":"/417","2.0.4":"/419","?":"/"}]],[/(webkit|khtml)\/([\w\.]+)/i],[f,m],[/(navigator|netscape\d?)\/([-\w\.]+)/i],[[f,"Netscape"],m],[/mobile vr; rv:([\w\.]+)\).+firefox/i],[m,[f,k+" Reality"]],[/ekiohf.+(flow)\/([\w\.]+)/i,/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo browser|minimo|conkeror|klar)[\/ ]?([\w\.\+]+)/i,/(seamonkey|k-meleon|icecat|iceape|firebird|phoenix|palemoon|basilisk|waterfox)\/([-\w\.]+)$/i,/(firefox)\/([\w\.]+)/i,/(mozilla)\/([\w\.]+) .+rv\:.+gecko\/\d+/i,/(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|sleipnir|obigo|mosaic|(?:go|ice|up)[\. ]?browser)[-\/ ]?v?([\w\.]+)/i,/(links) \(([\w\.]+)/i,/panasonic;(viera)/i],[f,m],[/(cobalt)\/([\w\.]+)/i],[f,[m,/master.|lts./,""]]],cpu:[[/(?:(amd|x(?:(?:86|64)[-_])?|wow|win)64)[;\)]/i],[[g,"amd64"]],[/(ia32(?=;))/i],[[g,Q]],[/((?:i[346]|x)86)[;\)]/i],[[g,"ia32"]],[/\b(aarch64|arm(v?8e?l?|_?64))\b/i],[[g,"arm64"]],[/\b(arm(?:v[67])?ht?n?[fl]p?)\b/i],[[g,"armhf"]],[/windows (ce|mobile); ppc;/i],[[g,"arm"]],[/((?:ppc|powerpc)(?:64)?)(?: mac|;|\))/i],[[g,/ower/,"",Q]],[/(sun4\w)[;\)]/i],[[g,"sparc"]],[/((?:avr32|ia64(?=;))|68k(?=\))|\barm(?=v(?:[1-7]|[5-7]1)l?|;|eabi)|(?=atmel )avr|(?:irix|mips|sparc)(?:64)?\b|pa-risc)/i],[[g,Q]]],device:[[/\b(sch-i[89]0\d|shw-m380s|sm-[ptx]\w{2,4}|gt-[pn]\d{2,4}|sgh-t8[56]9|nexus 10)/i],[d,[p,N],[h,b]],[/\b((?:s[cgp]h|gt|sm)-\w+|sc[g-]?[\d]+a?|galaxy nexus)/i,/samsung[- ]([-\w]+)/i,/sec-(sgh\w+)/i],[d,[p,N],[h,y]],[/(?:\/|\()(ip(?:hone|od)[\w, ]*)(?:\/|;)/i],[d,[p,x],[h,y]],[/\((ipad);[-\w\),; ]+apple/i,/applecoremedia\/[\w\.]+ \((ipad)/i,/\b(ipad)\d\d?,\d\d?[;\]].+ios/i],[d,[p,x],[h,b]],[/(macintosh);/i],[d,[p,x]],[/\b(sh-?[altvz]?\d\d[a-ekm]?)/i],[d,[p,B],[h,y]],[/\b((?:ag[rs][23]?|bah2?|sht?|btv)-a?[lw]\d{2})\b(?!.+d\/s)/i],[d,[p,R],[h,b]],[/(?:huawei|honor)([-\w ]+)[;\)]/i,/\b(nexus 6p|\w{2,4}e?-[atu]?[ln][\dx][012359c][adn]?)\b(?!.+d\/s)/i],[d,[p,R],[h,y]],[/\b(poco[\w ]+|m2\d{3}j\d\d[a-z]{2})(?: bui|\))/i,/\b; (\w+) build\/hm\1/i,/\b(hm[-_ ]?note?[_ ]?(?:\d\w)?) bui/i,/\b(redmi[\-_ ]?(?:note|k)?[\w_ ]+)(?: bui|\))/i,/oid[^\)]+; (m?[12][0-389][01]\w{3,6}[c-y])( bui|; wv|\))/i,/\b(mi[-_ ]?(?:a\d|one|one[_ ]plus|note lte|max|cc)?[_ ]?(?:\d?\w?)[_ ]?(?:plus|se|lite)?)(?: bui|\))/i],[[d,/_/g," "],[p,z],[h,y]],[/oid[^\)]+; (2\d{4}(283|rpbf)[cgl])( bui|\))/i,/\b(mi[-_ ]?(?:pad)(?:[\w_ ]+))(?: bui|\))/i],[[d,/_/g," "],[p,z],[h,b]],[/; (\w+) bui.+ oppo/i,/\b(cph[12]\d{3}|p(?:af|c[al]|d\w|e[ar])[mt]\d0|x9007|a101op)\b/i],[d,[p,"OPPO"],[h,y]],[/\b(opd2\d{3}a?) bui/i],[d,[p,"OPPO"],[h,b]],[/vivo (\w+)(?: bui|\))/i,/\b(v[12]\d{3}\w?[at])(?: bui|;)/i],[d,[p,"Vivo"],[h,y]],[/\b(rmx[1-3]\d{3})(?: bui|;|\))/i],[d,[p,"Realme"],[h,y]],[/\b(milestone|droid(?:[2-4x]| (?:bionic|x2|pro|razr))?:?( 4g)?)\b[\w ]+build\//i,/\bmot(?:orola)?[- ](\w*)/i,/((?:moto[\w\(\) ]+|xt\d{3,4}|nexus 6)(?= bui|\)))/i],[d,[p,L],[h,y]],[/\b(mz60\d|xoom[2 ]{0,2}) build\//i],[d,[p,L],[h,b]],[/((?=lg)?[vl]k\-?\d{3}) bui| 3\.[-\w; ]{10}lg?-([06cv9]{3,4})/i],[d,[p,O],[h,b]],[/(lm(?:-?f100[nv]?|-[\w\.]+)(?= bui|\))|nexus [45])/i,/\blg[-e;\/ ]+((?!browser|netcast|android tv)\w+)/i,/\blg-?([\d\w]+) bui/i],[d,[p,O],[h,y]],[/(ideatab[-\w ]+)/i,/lenovo ?(s[56]000[-\w]+|tab(?:[\w ]+)|yt[-\d\w]{6}|tb[-\d\w]{6})/i],[d,[p,"Lenovo"],[h,b]],[/(?:maemo|nokia).*(n900|lumia \d+)/i,/nokia[-_ ]?([-\w\.]*)/i],[[d,/_/g," "],[p,"Nokia"],[h,y]],[/(pixel c)\b/i],[d,[p,P],[h,b]],[/droid.+; (pixel[\daxl ]{0,6})(?: bui|\))/i],[d,[p,P],[h,y]],[/droid.+ (a?\d[0-2]{2}so|[c-g]\d{4}|so[-gl]\w+|xq-a\w[4-7][12])(?= bui|\).+chrome\/(?![1-6]{0,1}\d\.))/i],[d,[p,j],[h,y]],[/sony tablet [ps]/i,/\b(?:sony)?sgp\w+(?: bui|\))/i],[[d,"Xperia Tablet"],[p,j],[h,b]],[/ (kb2005|in20[12]5|be20[12][59])\b/i,/(?:one)?(?:plus)? (a\d0\d\d)(?: b|\))/i],[d,[p,"OnePlus"],[h,y]],[/(alexa)webm/i,/(kf[a-z]{2}wi|aeo[c-r]{2})( bui|\))/i,/(kf[a-z]+)( bui|\)).+silk\//i],[d,[p,E],[h,b]],[/((?:sd|kf)[0349hijorstuw]+)( bui|\)).+silk\//i],[[d,/(.+)/g,"Fire Phone $1"],[p,E],[h,y]],[/(playbook);[-\w\),; ]+(rim)/i],[d,p,[h,b]],[/\b((?:bb[a-f]|st[hv])100-\d)/i,/\(bb10; (\w+)/i],[d,[p,T],[h,y]],[/(?:\b|asus_)(transfo[prime ]{4,10} \w+|eeepc|slider \w+|nexus 7|padfone|p00[cj])/i],[d,[p,S],[h,b]],[/ (z[bes]6[027][012][km][ls]|zenfone \d\w?)\b/i],[d,[p,S],[h,y]],[/(nexus 9)/i],[d,[p,"HTC"],[h,b]],[/(htc)[-;_ ]{1,2}([\w ]+(?=\)| bui)|\w+)/i,/(zte)[- ]([\w ]+?)(?: bui|\/|\))/i,/(alcatel|geeksphone|nexian|panasonic(?!(?:;|\.))|sony(?!-bra))[-_ ]?([-\w]*)/i],[p,[d,/_/g," "],[h,y]],[/droid.+; ([ab][1-7]-?[0178a]\d\d?)/i],[d,[p,"Acer"],[h,b]],[/droid.+; (m[1-5] note) bui/i,/\bmz-([-\w]{2,})/i],[d,[p,"Meizu"],[h,y]],[/; ((?:power )?armor(?:[\w ]{0,8}))(?: bui|\))/i],[d,[p,"Ulefone"],[h,y]],[/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus|dell|meizu|motorola|polytron|infinix|tecno)[-_ ]?([-\w]*)/i,/(hp) ([\w ]+\w)/i,/(asus)-?(\w+)/i,/(microsoft); (lumia[\w ]+)/i,/(lenovo)[-_ ]?([-\w]+)/i,/(jolla)/i,/(oppo) ?([\w ]+) bui/i],[p,d,[h,y]],[/(kobo)\s(ereader|touch)/i,/(archos) (gamepad2?)/i,/(hp).+(touchpad(?!.+tablet)|tablet)/i,/(kindle)\/([\w\.]+)/i,/(nook)[\w ]+build\/(\w+)/i,/(dell) (strea[kpr\d ]*[\dko])/i,/(le[- ]+pan)[- ]+(\w{1,9}) bui/i,/(trinity)[- ]*(t\d{3}) bui/i,/(gigaset)[- ]+(q\w{1,9}) bui/i,/(vodafone) ([\w ]+)(?:\)| bui)/i],[p,d,[h,b]],[/(surface duo)/i],[d,[p,M],[h,b]],[/droid [\d\.]+; (fp\du?)(?: b|\))/i],[d,[p,"Fairphone"],[h,y]],[/(u304aa)/i],[d,[p,"AT&T"],[h,y]],[/\bsie-(\w*)/i],[d,[p,"Siemens"],[h,y]],[/\b(rct\w+) b/i],[d,[p,"RCA"],[h,b]],[/\b(venue[\d ]{2,7}) b/i],[d,[p,"Dell"],[h,b]],[/\b(q(?:mv|ta)\w+) b/i],[d,[p,"Verizon"],[h,b]],[/\b(?:barnes[& ]+noble |bn[rt])([\w\+ ]*) b/i],[d,[p,"Barnes & Noble"],[h,b]],[/\b(tm\d{3}\w+) b/i],[d,[p,"NuVision"],[h,b]],[/\b(k88) b/i],[d,[p,"ZTE"],[h,b]],[/\b(nx\d{3}j) b/i],[d,[p,"ZTE"],[h,y]],[/\b(gen\d{3}) b.+49h/i],[d,[p,"Swiss"],[h,y]],[/\b(zur\d{3}) b/i],[d,[p,"Swiss"],[h,b]],[/\b((zeki)?tb.*\b) b/i],[d,[p,"Zeki"],[h,b]],[/\b([yr]\d{2}) b/i,/\b(dragon[- ]+touch |dt)(\w{5}) b/i],[[p,"Dragon Touch"],d,[h,b]],[/\b(ns-?\w{0,9}) b/i],[d,[p,"Insignia"],[h,b]],[/\b((nxa|next)-?\w{0,9}) b/i],[d,[p,"NextBook"],[h,b]],[/\b(xtreme\_)?(v(1[045]|2[015]|[3469]0|7[05])) b/i],[[p,"Voice"],d,[h,y]],[/\b(lvtel\-)?(v1[12]) b/i],[[p,"LvTel"],d,[h,y]],[/\b(ph-1) /i],[d,[p,"Essential"],[h,y]],[/\b(v(100md|700na|7011|917g).*\b) b/i],[d,[p,"Envizen"],[h,b]],[/\b(trio[-\w\. ]+) b/i],[d,[p,"MachSpeed"],[h,b]],[/\btu_(1491) b/i],[d,[p,"Rotor"],[h,b]],[/(shield[\w ]+) b/i],[d,[p,"Nvidia"],[h,b]],[/(sprint) (\w+)/i],[p,d,[h,y]],[/(kin\.[onetw]{3})/i],[[d,/\./g," "],[p,M],[h,y]],[/droid.+; (cc6666?|et5[16]|mc[239][23]x?|vc8[03]x?)\)/i],[d,[p,F],[h,b]],[/droid.+; (ec30|ps20|tc[2-8]\d[kx])\)/i],[d,[p,F],[h,y]],[/smart-tv.+(samsung)/i],[p,[h,_]],[/hbbtv.+maple;(\d+)/i],[[d,/^/,"SmartTV"],[p,N],[h,_]],[/(nux; netcast.+smarttv|lg (netcast\.tv-201\d|android tv))/i],[[p,O],[h,_]],[/(apple) ?tv/i],[p,[d,x+" TV"],[h,_]],[/crkey/i],[[d,I+"cast"],[p,P],[h,_]],[/droid.+aft(\w+)( bui|\))/i],[d,[p,E],[h,_]],[/\(dtv[\);].+(aquos)/i,/(aquos-tv[\w ]+)\)/i],[d,[p,B],[h,_]],[/(bravia[\w ]+)( bui|\))/i],[d,[p,j],[h,_]],[/(mitv-\w{5}) bui/i],[d,[p,z],[h,_]],[/Hbbtv.*(technisat) (.*);/i],[p,d,[h,_]],[/\b(roku)[\dx]*[\)\/]((?:dvp-)?[\d\.]*)/i,/hbbtv\/\d+\.\d+\.\d+ +\([\w\+ ]*; *([\w\d][^;]*);([^;]*)/i],[[p,W],[d,W],[h,_]],[/\b(android tv|smart[- ]?tv|opera tv|tv; rv:)\b/i],[[h,_]],[/(ouya)/i,/(nintendo) ([wids3utch]+)/i],[p,d,[h,v]],[/droid.+; (shield) bui/i],[d,[p,"Nvidia"],[h,v]],[/(playstation [345portablevi]+)/i],[d,[p,j],[h,v]],[/\b(xbox(?: one)?(?!; xbox))[\); ]/i],[d,[p,M],[h,v]],[/((pebble))app/i],[p,d,[h,w]],[/(watch)(?: ?os[,\/]|\d,\d\/)[\d\.]+/i],[d,[p,x],[h,w]],[/droid.+; (glass) \d/i],[d,[p,P],[h,w]],[/droid.+; (wt63?0{2,3})\)/i],[d,[p,F],[h,w]],[/(quest( \d| pro)?)/i],[d,[p,U],[h,w]],[/(tesla)(?: qtcarbrowser|\/[-\w\.]+)/i],[p,[h,A]],[/(aeobc)\b/i],[d,[p,E],[h,A]],[/droid .+?; ([^;]+?)(?: bui|; wv\)|\) applew).+? mobile safari/i],[d,[h,y]],[/droid .+?; ([^;]+?)(?: bui|\) applew).+?(?! mobile) safari/i],[d,[h,b]],[/\b((tablet|tab)[;\/]|focus\/\d(?!.+mobile))/i],[[h,b]],[/(phone|mobile(?:[;\/]| [ \w\/\.]*safari)|pda(?=.+windows ce))/i],[[h,y]],[/(android[-\w\. ]{0,9});.+buil/i],[d,[p,"Generic"]]],engine:[[/windows.+ edge\/([\w\.]+)/i],[m,[f,"EdgeHTML"]],[/webkit\/537\.36.+chrome\/(?!27)([\w\.]+)/i],[m,[f,"Blink"]],[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m|goanna)\/([\w\.]+)/i,/ekioh(flow)\/([\w\.]+)/i,/(khtml|tasman|links)[\/ ]\(?([\w\.]+)/i,/(icab)[\/ ]([23]\.[\d\.]+)/i,/\b(libweb)/i],[f,m],[/rv\:([\w\.]{1,9})\b.+(gecko)/i],[m,f]],os:[[/microsoft (windows) (vista|xp)/i],[f,m],[/(windows (?:phone(?: os)?|mobile))[\/ ]?([\d\.\w ]*)/i],[f,[m,K,X]],[/windows nt 6\.2; (arm)/i,/windows[\/ ]?([ntce\d\. ]+\w)(?!.+xbox)/i,/(?:win(?=3|9|n)|win 9x )([nt\d\.]+)/i],[[m,K,X],[f,"Windows"]],[/ip[honead]{2,4}\b(?:.*os ([\w]+) like mac|; opera)/i,/(?:ios;fbsv\/|iphone.+ios[\/ ])([\d\.]+)/i,/cfnetwork\/.+darwin/i],[[m,/_/g,"."],[f,"iOS"]],[/(mac os x) ?([\w\. ]*)/i,/(macintosh|mac_powerpc\b)(?!.+haiku)/i],[[f,G],[m,/_/g,"."]],[/droid ([\w\.]+)\b.+(android[- ]x86|harmonyos)/i],[m,f],[/(android|webos|qnx|bada|rim tablet os|maemo|meego|sailfish)[-\/ ]?([\w\.]*)/i,/(blackberry)\w*\/([\w\.]*)/i,/(tizen|kaios)[\/ ]([\w\.]+)/i,/\((series40);/i],[f,m],[/\(bb(10);/i],[m,[f,T]],[/(?:symbian ?os|symbos|s60(?=;)|series60)[-\/ ]?([\w\.]*)/i],[m,[f,"Symbian"]],[/mozilla\/[\d\.]+ \((?:mobile|tablet|tv|mobile; [\w ]+); rv:.+ gecko\/([\w\.]+)/i],[m,[f,k+" OS"]],[/web0s;.+rt(tv)/i,/\b(?:hp)?wos(?:browser)?\/([\w\.]+)/i],[m,[f,"webOS"]],[/watch(?: ?os[,\/]|\d,\d\/)([\d\.]+)/i],[m,[f,"watchOS"]],[/crkey\/([\d\.]+)/i],[m,[f,I+"cast"]],[/(cros) [\w]+(?:\)| ([\w\.]+)\b)/i],[[f,q],m],[/panasonic;(viera)/i,/(netrange)mmh/i,/(nettv)\/(\d+\.[\w\.]+)/i,/(nintendo|playstation) ([wids345portablevuch]+)/i,/(xbox); +xbox ([^\);]+)/i,/\b(joli|palm)\b ?(?:os)?\/?([\w\.]*)/i,/(mint)[\/\(\) ]?(\w*)/i,/(mageia|vectorlinux)[; ]/i,/([kxln]?ubuntu|debian|suse|opensuse|gentoo|arch(?= linux)|slackware|fedora|mandriva|centos|pclinuxos|red ?hat|zenwalk|linpus|raspbian|plan 9|minix|risc os|contiki|deepin|manjaro|elementary os|sabayon|linspire)(?: gnu\/linux)?(?: enterprise)?(?:[- ]linux)?(?:-gnu)?[-\/ ]?(?!chrom|package)([-\w\.]*)/i,/(hurd|linux) ?([\w\.]*)/i,/(gnu) ?([\w\.]*)/i,/\b([-frentopcghs]{0,5}bsd|dragonfly)[\/ ]?(?!amd|[ix346]{1,2}86)([\w\.]*)/i,/(haiku) (\w+)/i],[f,m],[/(sunos) ?([\w\.\d]*)/i],[[f,"Solaris"],m],[/((?:open)?solaris)[-\/ ]?([\w\.]*)/i,/(aix) ((\d)(?=\.|\)| )[\w\.])*/i,/\b(beos|os\/2|amigaos|morphos|openvms|fuchsia|hp-ux|serenityos)/i,/(unix) ?([\w\.]*)/i],[f,m]]},Z=function(t,e){if(typeof t===l&&(e=t,t=o),!(this instanceof Z))return new Z(t,e).getResult();var n=typeof i!==s&&i.navigator?i.navigator:o,r=t||(n&&n.userAgent?n.userAgent:""),v=n&&n.userAgentData?n.userAgentData:o,_=e?function(t,e){var n={};for(var r in t)e[r]&&e[r].length%2==0?n[r]=e[r].concat(t[r]):n[r]=t[r];return n}($,e):$,w=n&&n.userAgent==r;return this.getBrowser=function(){var t,e={};return e[f]=o,e[m]=o,Y.call(e,r,_.browser),e[c]=typeof(t=e[m])===u?t.replace(/[^\d\.]/g,"").split(".")[0]:o,w&&n&&n.brave&&typeof n.brave.isBrave==a&&(e[f]="Brave"),e},this.getCPU=function(){var t={};return t[g]=o,Y.call(t,r,_.cpu),t},this.getDevice=function(){var t={};return t[p]=o,t[d]=o,t[h]=o,Y.call(t,r,_.device),w&&!t[h]&&v&&v.mobile&&(t[h]=y),w&&"Macintosh"==t[d]&&n&&typeof n.standalone!==s&&n.maxTouchPoints&&n.maxTouchPoints>2&&(t[d]="iPad",t[h]=b),t},this.getEngine=function(){var t={};return t[f]=o,t[m]=o,Y.call(t,r,_.engine),t},this.getOS=function(){var t={};return t[f]=o,t[m]=o,Y.call(t,r,_.os),w&&!t[f]&&v&&v.platform&&"Unknown"!=v.platform&&(t[f]=v.platform.replace(/chrome os/i,q).replace(/macos/i,G)),t},this.getResult=function(){return{ua:this.getUA(),browser:this.getBrowser(),engine:this.getEngine(),os:this.getOS(),device:this.getDevice(),cpu:this.getCPU()}},this.getUA=function(){return r},this.setUA=function(t){return r=typeof t===u&&t.length>500?W(t,500):t,this},this.setUA(r),this};Z.VERSION="1.0.38",Z.BROWSER=H([f,m,c]),Z.CPU=H([g]),Z.DEVICE=H([d,p,h,v,y,_,b,w,A]),Z.ENGINE=Z.OS=H([f,m]),typeof e!==s?(t.exports&&(e=t.exports=Z),e.UAParser=Z):n.amdO?(r=function(){return Z}.call(e,n,e,t))===o||(t.exports=r):typeof i!==s&&(i.UAParser=Z);var J=typeof i!==s&&(i.jQuery||i.Zepto);if(J&&!J.ua){var tt=new Z;J.ua=tt.getResult(),J.ua.get=function(){return tt.getUA()},J.ua.set=function(t){tt.setUA(t);var e=tt.getResult();for(var n in e)J.ua[n]=e[n]}}}("object"==typeof window?window:this)},9e3:function(t,e,n){function r(t){try{if(!n.g.localStorage)return!1}catch(t){return!1}var e=n.g.localStorage[t];return null!=e&&"true"===String(e).toLowerCase()}t.exports=function(t,e){if(r("noDeprecation"))return t;var n=!1;return function(){if(!n){if(r("throwDeprecation"))throw new Error(e);r("traceDeprecation")?console.trace(e):console.warn(e),n=!0}return t.apply(this,arguments)}}},3779:function(){},7199:function(){},5393:function(t,e,n){n.r(e),n.d(e,{Debug:function(){return o.default},FactoryMaker:function(){return i.default},MediaPlayer:function(){return r.default}});var r=n(5849),i=n(138),o=n(649),a=n(8986),s="undefined"!=typeof window&&window||global,l=s.dashjs;l||(l=s.dashjs={}),l.MediaPlayer=r.default,l.FactoryMaker=i.default,l.Debug=o.default,l.Version=(0,a.getVersionString)(),e.default=l},649:function(t,e,n){n.r(e);var r=n(8850),i=n(3621),o=n(138);function a(t){t=t||{};const e=this.context,n=(0,r.default)(e).getInstance(),o=t.settings,a=[];let s,l,u,c;function d(t){return t&&t.bind?t.bind(window.console):window.console.log.bind(window.console)}function f(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];v(1,this,...e)}function h(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];v(2,this,...e)}function p(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];v(3,this,...e)}function m(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];v(4,this,...e)}function g(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];v(5,this,...e)}function v(t,e){let r="",s=null;l&&(s=(new Date).getTime(),r+="["+(s-c)+"]"),u&&e&&e.getClassName&&(r+="["+e.getClassName()+"]",e.getType&&(r+="["+e.getType()+"]")),r.length>0&&(r+=" ");for(var d=arguments.length,f=new Array(d>2?d-2:0),h=2;h<d;h++)f[h-2]=arguments[h];Array.apply(null,f).forEach((function(t){r+=t+" "})),a[t]&&o&&o.get().debug.logLevel>=t&&a[t](r),o&&o.get().debug.dispatchEvent&&n.trigger(i.default.LOG,{message:r,level:t})}return s={getLogger:function(t){return{fatal:f.bind(t),error:h.bind(t),warn:p.bind(t),info:m.bind(t),debug:g.bind(t)}},setLogTimestampVisible:function(t){l=t},setCalleeNameVisible:function(t){u=t}},l=!0,u=!0,c=(new Date).getTime(),"undefined"!=typeof window&&window.console&&(a[1]=d(window.console.error),a[2]=d(window.console.error),a[3]=d(window.console.warn),a[4]=d(window.console.info),a[5]=d(window.console.debug)),s}a.__dashjs_factory_name="Debug";const s=o.default.getSingletonFactory(a);s.LOG_LEVEL_NONE=0,s.LOG_LEVEL_FATAL=1,s.LOG_LEVEL_ERROR=2,s.LOG_LEVEL_WARNING=3,s.LOG_LEVEL_INFO=4,s.LOG_LEVEL_DEBUG=5,o.default.updateSingletonFactory(a.__dashjs_factory_name,s),e.default=s},8850:function(t,e,n){n.r(e);var r=n(138),i=n(1191);function o(){let t={};function e(e,n,i){let o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},a=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if(!e)throw new Error("event type cannot be null or undefined");if(!n||"function"!=typeof n)throw new Error("listener must be a function: "+n);let s=o.priority||0;if(r(e,n,i)>=0)return;t[e]=t[e]||[];const l={callback:n,scope:i,priority:s,executeOnlyOnce:a};i&&i.getStreamId&&(l.streamId=i.getStreamId()),i&&i.getType&&(l.mediaType=i.getType()),o&&o.mode&&(l.mode=o.mode),t[e].some(((n,r)=>{if(n&&s>n.priority)return t[e].splice(r,0,l),!0}))||t[e].push(l)}function n(e,n,i){if(!e||!n||!t[e])return;const o=r(e,n,i);o<0||(t[e][o]=null)}function r(e,n,r){let i=-1;return t[e]?(t[e].some(((t,e)=>{if(t&&t.callback===n&&(!r||r===t.scope))return i=e,!0})),i):i}const o={on:function(t,n,r){e(t,n,r,arguments.length>3&&void 0!==arguments[3]?arguments[3]:{})},once:function(t,n,r){e(t,n,r,arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},!0)},off:n,trigger:function(e){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!e||!t[e])return;if(r=r||{},r.hasOwnProperty("type"))throw new Error("'type' is a reserved word for event dispatching");r.type=e,o.streamId&&(r.streamId=o.streamId),o.mediaType&&(r.mediaType=o.mediaType);const a=[];t[e].filter((t=>!(!t||o.streamId&&t.streamId&&t.streamId!==o.streamId||o.mediaType&&t.mediaType&&t.mediaType!==o.mediaType||o.mode&&t.mode&&t.mode!==o.mode||!t.mode&&o.mode&&o.mode===i.default.EVENT_MODE_ON_RECEIVE))).forEach((t=>{t&&t.callback.call(t.scope,r),t.executeOnlyOnce&&a.push(t)})),a.forEach((t=>{n(e,t.callback,t.scope)}))},reset:function(){t={}}};return o}o.__dashjs_factory_name="EventBus";const a=r.default.getSingletonFactory(o);a.EVENT_PRIORITY_LOW=0,a.EVENT_PRIORITY_HIGH=5e3,r.default.updateSingletonFactory(o.__dashjs_factory_name,a),e.default=a},138:function(t,e,n){n.r(e);const r=function(){let t,e=[];const n={},r={};function i(t,n){for(const r in e){const i=e[r];if(i.context===t&&i.name===n)return i.instance}return null}function o(t,e){return e[t]}function a(t,e,n){t in n&&(n[t]=e)}function s(e,n,r){let i;const o=e.__dashjs_factory_name,a=n[o];if(a){let o=a.instance;if(!a.override)return o.apply({context:n,factory:t},r);i=e.apply({context:n},r),o=o.apply({context:n,factory:t,parent:i},r);for(const t in o)i.hasOwnProperty(t)&&(i[t]=o[t])}else i=e.apply({context:n},r);return i.getClassName=function(){return o},i}return t={extend:function(t,e,n,r){!r[t]&&e&&(r[t]={instance:e,override:n})},getSingletonInstance:i,setSingletonInstance:function(t,n,r){for(const i in e){const o=e[i];if(o.context===t&&o.name===n)return void(e[i].instance=r)}e.push({name:n,context:t,instance:r})},deleteSingletonInstances:function(t){e=e.filter((e=>e.context!==t))},getSingletonFactory:function(t){let r=o(t.__dashjs_factory_name,n);return r||(r=function(n){let r;return void 0===n&&(n={}),{getInstance:function(){return r||(r=i(n,t.__dashjs_factory_name)),r||(r=s(t,n,arguments),e.push({name:t.__dashjs_factory_name,context:n,instance:r})),r}}},n[t.__dashjs_factory_name]=r),r},getSingletonFactoryByName:function(t){return o(t,n)},updateSingletonFactory:function(t,e){a(t,e,n)},getClassFactory:function(t){let e=o(t.__dashjs_factory_name,r);return e||(e=function(e){return void 0===e&&(e={}),{create:function(){return s(t,e,arguments)}}},r[t.__dashjs_factory_name]=e),e},getClassFactoryByName:function(t){return o(t,r)},updateClassFactory:function(t,e){a(t,e,r)}},t}();e.default=r},8261:function(t,e,n){n.r(e);var r=n(138),i=n(7263),o=n(649),a=n(5212),s=n(7568),l=n(8850),u=n(3621);function c(){let t;const e=this.context,n=(0,l.default)(e).getInstance(),r={"streaming.delay.liveDelay":u.default.SETTING_UPDATED_LIVE_DELAY,"streaming.delay.liveDelayFragmentCount":u.default.SETTING_UPDATED_LIVE_DELAY_FRAGMENT_COUNT,"streaming.liveCatchup.enabled":u.default.SETTING_UPDATED_CATCHUP_ENABLED,"streaming.liveCatchup.playbackRate.min":u.default.SETTING_UPDATED_PLAYBACK_RATE_MIN,"streaming.liveCatchup.playbackRate.max":u.default.SETTING_UPDATED_PLAYBACK_RATE_MAX,"streaming.abr.rules.throughputRule.active":u.default.SETTING_UPDATED_ABR_ACTIVE_RULES,"streaming.abr.rules.bolaRule.active":u.default.SETTING_UPDATED_ABR_ACTIVE_RULES,"streaming.abr.rules.insufficientBufferRule.active":u.default.SETTING_UPDATED_ABR_ACTIVE_RULES,"streaming.abr.rules.switchHistoryRule.active":u.default.SETTING_UPDATED_ABR_ACTIVE_RULES,"streaming.abr.rules.droppedFramesRule.active":u.default.SETTING_UPDATED_ABR_ACTIVE_RULES,"streaming.abr.rules.abandonRequestsRule.active":u.default.SETTING_UPDATED_ABR_ACTIVE_RULES,"streaming.abr.rules.l2ARule.active":u.default.SETTING_UPDATED_ABR_ACTIVE_RULES,"streaming.abr.rules.loLPRule.active":u.default.SETTING_UPDATED_ABR_ACTIVE_RULES,"streaming.abr.maxBitrate.video":u.default.SETTING_UPDATED_MAX_BITRATE,"streaming.abr.maxBitrate.audio":u.default.SETTING_UPDATED_MAX_BITRATE,"streaming.abr.minBitrate.video":u.default.SETTING_UPDATED_MIN_BITRATE,"streaming.abr.minBitrate.audio":u.default.SETTING_UPDATED_MIN_BITRATE},c={debug:{logLevel:o.default.LOG_LEVEL_WARNING,dispatchEvent:!1},streaming:{abandonLoadTimeout:1e4,wallclockTimeUpdateInterval:100,manifestUpdateRetryInterval:100,liveUpdateTimeThresholdInMilliseconds:0,cacheInitSegments:!1,applyServiceDescription:!0,applyProducerReferenceTime:!0,applyContentSteering:!0,enableManifestDurationMismatchFix:!0,parseInbandPrft:!1,enableManifestTimescaleMismatchFix:!1,capabilities:{filterUnsupportedEssentialProperties:!0,supportedEssentialProperties:[{schemeIdUri:a.default.FONT_DOWNLOAD_DVB_SCHEME},{schemeIdUri:a.default.COLOUR_PRIMARIES_SCHEME_ID_URI,value:/1|5|6|7/},{schemeIdUri:a.default.URL_QUERY_INFO_SCHEME},{schemeIdUri:a.default.EXT_URL_QUERY_INFO_SCHEME},{schemeIdUri:a.default.MATRIX_COEFFICIENTS_SCHEME_ID_URI,value:/0|1|5|6/},{schemeIdUri:a.default.TRANSFER_CHARACTERISTICS_SCHEME_ID_URI,value:/1|6|13|14|15/},...a.default.THUMBNAILS_SCHEME_ID_URIS.map((t=>({schemeIdUri:t})))],useMediaCapabilitiesApi:!0,filterVideoColorimetryEssentialProperties:!1,filterHDRMetadataFormatEssentialProperties:!1},events:{eventControllerRefreshDelay:100,deleteEventMessageDataAfterEventStarted:!0},timeShiftBuffer:{calcFromSegmentTimeline:!1,fallbackToSegmentTimeline:!0},metrics:{maxListDepth:100},delay:{liveDelayFragmentCount:NaN,liveDelay:NaN,useSuggestedPresentationDelay:!0},protection:{keepProtectionMediaKeys:!1,ignoreEmeEncryptedEvent:!1,detectPlayreadyMessageFormat:!0,ignoreKeyStatuses:!1},buffer:{enableSeekDecorrelationFix:!1,fastSwitchEnabled:null,flushBufferAtTrackSwitch:!1,reuseExistingSourceBuffers:!0,bufferPruningInterval:10,bufferToKeep:20,bufferTimeAtTopQuality:30,bufferTimeAtTopQualityLongForm:60,initialBufferLevel:NaN,bufferTimeDefault:18,longFormContentDurationThreshold:600,stallThreshold:.3,useAppendWindow:!0,setStallState:!0,avoidCurrentTimeRangePruning:!1,useChangeType:!0,mediaSourceDurationInfinity:!0,resetSourceBuffersForTrackSwitch:!1,syntheticStallEvents:{enabled:!1,ignoreReadyState:!1}},gaps:{jumpGaps:!0,jumpLargeGaps:!0,smallGapLimit:1.5,threshold:.3,enableSeekFix:!0,enableStallFix:!1,stallSeek:.1},utcSynchronization:{enabled:!0,useManifestDateHeaderTimeSource:!0,backgroundAttempts:2,timeBetweenSyncAttempts:30,maximumTimeBetweenSyncAttempts:600,minimumTimeBetweenSyncAttempts:2,timeBetweenSyncAttemptsAdjustmentFactor:2,maximumAllowedDrift:100,enableBackgroundSyncAfterSegmentDownloadError:!0,defaultTimingSource:{scheme:"urn:mpeg:dash:utc:http-xsdate:2014",value:"https://time.akamai.com/?iso&ms"}},scheduling:{defaultTimeout:500,lowLatencyTimeout:0,scheduleWhilePaused:!0},text:{defaultEnabled:!0,dispatchForManualRendering:!1,extendSegmentedCues:!0,imsc:{displayForcedOnlyMode:!1,enableRollUp:!0},webvtt:{customRenderingEnabled:!1}},liveCatchup:{maxDrift:NaN,playbackRate:{min:NaN,max:NaN},playbackBufferMin:.5,enabled:null,mode:a.default.LIVE_CATCHUP_MODE_DEFAULT},lastBitrateCachingInfo:{enabled:!0,ttl:36e4},lastMediaSettingsCachingInfo:{enabled:!0,ttl:36e4},saveLastMediaSettingsForCurrentStreamingSession:!0,cacheLoadThresholds:{video:10,audio:5},trackSwitchMode:{audio:a.default.TRACK_SWITCH_MODE_ALWAYS_REPLACE,video:a.default.TRACK_SWITCH_MODE_NEVER_REPLACE},selectionModeForInitialTrack:a.default.TRACK_SELECTION_MODE_HIGHEST_SELECTION_PRIORITY,fragmentRequestTimeout:2e4,fragmentRequestProgressTimeout:-1,manifestRequestTimeout:1e4,retryIntervals:{[s.HTTPRequest.MPD_TYPE]:500,[s.HTTPRequest.XLINK_EXPANSION_TYPE]:500,[s.HTTPRequest.MEDIA_SEGMENT_TYPE]:1e3,[s.HTTPRequest.INIT_SEGMENT_TYPE]:1e3,[s.HTTPRequest.BITSTREAM_SWITCHING_SEGMENT_TYPE]:1e3,[s.HTTPRequest.INDEX_SEGMENT_TYPE]:1e3,[s.HTTPRequest.MSS_FRAGMENT_INFO_SEGMENT_TYPE]:1e3,[s.HTTPRequest.LICENSE]:1e3,[s.HTTPRequest.OTHER_TYPE]:1e3,lowLatencyReductionFactor:10},retryAttempts:{[s.HTTPRequest.MPD_TYPE]:3,[s.HTTPRequest.XLINK_EXPANSION_TYPE]:1,[s.HTTPRequest.MEDIA_SEGMENT_TYPE]:3,[s.HTTPRequest.INIT_SEGMENT_TYPE]:3,[s.HTTPRequest.BITSTREAM_SWITCHING_SEGMENT_TYPE]:3,[s.HTTPRequest.INDEX_SEGMENT_TYPE]:3,[s.HTTPRequest.MSS_FRAGMENT_INFO_SEGMENT_TYPE]:3,[s.HTTPRequest.LICENSE]:3,[s.HTTPRequest.OTHER_TYPE]:3,lowLatencyMultiplyFactor:5},abr:{limitBitrateByPortal:!1,usePixelRatioInLimitBitrateByPortal:!1,enableSupplementalPropertyAdaptationSetSwitching:!0,rules:{throughputRule:{active:!0},bolaRule:{active:!0},insufficientBufferRule:{active:!0,parameters:{throughputSafetyFactor:.7,segmentIgnoreCount:2}},switchHistoryRule:{active:!0,parameters:{sampleSize:8,switchPercentageThreshold:.075}},droppedFramesRule:{active:!1,parameters:{minimumSampleSize:375,droppedFramesPercentageThreshold:.15}},abandonRequestsRule:{active:!0,parameters:{abandonDurationMultiplier:1.8,minSegmentDownloadTimeThresholdInMs:500,minThroughputSamplesThreshold:6}},l2ARule:{active:!1},loLPRule:{active:!1}},throughput:{averageCalculationMode:a.default.THROUGHPUT_CALCULATION_MODES.EWMA,lowLatencyDownloadTimeCalculationMode:a.default.LOW_LATENCY_DOWNLOAD_TIME_CALCULATION_MODE.MOOF_PARSING,useResourceTimingApi:!0,useNetworkInformationApi:{xhr:!1,fetch:!1},useDeadTimeLatency:!0,bandwidthSafetyFactor:.9,sampleSettings:{live:3,vod:4,enableSampleSizeAdjustment:!0,decreaseScale:.7,increaseScale:1.3,maxMeasurementsToKeep:20,averageLatencySampleAmount:4},ewma:{throughputSlowHalfLifeSeconds:8,throughputFastHalfLifeSeconds:3,latencySlowHalfLifeCount:2,latencyFastHalfLifeCount:1,weightDownloadTimeMultiplicationFactor:.0015}},maxBitrate:{audio:-1,video:-1},minBitrate:{audio:-1,video:-1},initialBitrate:{audio:-1,video:-1},autoSwitchBitrate:{audio:!0,video:!0}},cmcd:{applyParametersFromMpd:!0,enabled:!1,sid:null,cid:null,rtp:null,rtpSafetyFactor:5,mode:a.default.CMCD_MODE_QUERY,enabledKeys:a.default.CMCD_AVAILABLE_KEYS,includeInRequests:["segment","mpd"],version:1},cmsd:{enabled:!1,abr:{applyMb:!1,etpWeightRatio:0}},defaultSchemeIdUri:{viewpoint:"",audioChannelConfiguration:"urn:mpeg:mpegB:cicp:ChannelConfiguration",role:"urn:mpeg:dash:role:2011",accessibility:"urn:mpeg:dash:role:2011"}},errors:{recoverAttempts:{mediaErrorDecode:5}}};let d=i.default.clone(c);function f(t,e,o){for(let a in t)t.hasOwnProperty(a)&&(e.hasOwnProperty(a)?"object"!=typeof t[a]||t[a]instanceof RegExp||t[a]instanceof Array||null===t[a]?(e[a]=i.default.clone(t[a]),r[o+a]&&n.trigger(r[o+a])):f(t[a],e[a],o.slice()+a+"."):console.error("Settings parameter "+o+a+" is not supported"))}return t={get:function(){return d},update:function(t){"object"==typeof t&&f(t,d,"")},reset:function(){d=i.default.clone(c)}},t}c.__dashjs_factory_name="Settings";let d=r.default.getSingletonFactory(c);e.default=d},7263:function(t,e,n){n.r(e);var r=n(3282),i=n(8571),o=n(5212);class a{static mixin(t,e,n){let r,i={};if(t)for(let o in e)e.hasOwnProperty(o)&&(r=e[o],o in t&&(t[o]===r||o in i&&i[o]===r)||("object"==typeof t[o]&&null!==t[o]?t[o]=a.mixin(t[o],r,n):t[o]=n(r)));return t}static clone(t){if(!t||"object"!=typeof t)return t;if(t instanceof RegExp)return new RegExp(t);let e;if(t instanceof Array){e=[];for(let n=0,r=t.length;n<r;++n)n in t&&e.push(a.clone(t[n]))}else e={};return a.mixin(e,t,a.clone)}static addAdditionalQueryParameterToUrl(t,e){try{if(!e||0===e.length)return t;let n=t;return e.forEach((t=>{let{key:e,value:r}=t;const i=n.includes("?")?"&":"?";n+=`${i}${encodeURIComponent(e)}=${encodeURIComponent(r)}`})),n}catch(e){return t}}static removeQueryParameterFromUrl(t,e){if(!t||!e)return t;const n=new URL(t),r=new URLSearchParams(n.search);return r&&0!==r.size?(r.delete(e),n.search=r.toString(),n.toString()):t}static parseHttpHeaders(t){let e={};if(!t)return e;let n=t.trim().split("\r\n");for(let t=0,r=n.length;t<r;t++){let r=n[t],i=r.indexOf(": ");i>0&&(e[r.substring(0,i)]=r.substring(i+2))}return e}static parseQueryParams(t){const e=[],n=new URLSearchParams(t);for(const[t,r]of n.entries())e.push({key:decodeURIComponent(t),value:decodeURIComponent(r)});return e}static generateUuid(){let t=(new Date).getTime();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){const n=(t+16*Math.random())%16|0;return t=Math.floor(t/16),("x"==e?n:3&n|8).toString(16)}))}static generateHashCode(t){let e=0;if(0===t.length)return e;for(let n=0;n<t.length;n++)e=(e<<5)-e+t.charCodeAt(n),e|=0;return e}static getRelativeUrl(t,e){try{const n=new URL(t),i=new URL(e);if(n.protocol=i.protocol,n.origin!==i.origin)return e;let o=r.relative(n.pathname.substr(0,n.pathname.lastIndexOf("/")),i.pathname.substr(0,i.pathname.lastIndexOf("/")));const a=0===o.length?1:0;return o+=i.pathname.substr(i.pathname.lastIndexOf("/")+a,i.pathname.length-1),i.pathname.length<o.length?i.pathname:o}catch(t){return e}}static getHostFromUrl(t){try{return new URL(t).host}catch(t){return null}}static parseUserAgent(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;try{const e=null===t&&"undefined"!=typeof navigator?navigator.userAgent.toLowerCase():"";return(0,i.UAParser)(e)}catch(t){return{}}}static stringHasProtocol(t){return/(http(s?)):\/\//i.test(t)}static bufferSourceToDataView(t){return a.toDataView(t,DataView)}static bufferSourceToInt8(t){return a.toDataView(t,Uint8Array)}static bufferSourceToHex(t){const e=a.bufferSourceToInt8(t);let n="";for(let t of e)t=t.toString(16),1===t.length&&(t="0"+t),n+=t;return n}static toDataView(t,e){const n=a.getArrayBuffer(t);let r=1;"BYTES_PER_ELEMENT"in DataView&&(r=DataView.BYTES_PER_ELEMENT);const i=((t.byteOffset||0)+t.byteLength)/r,o=(t.byteOffset||0)/r,s=Math.floor(Math.max(0,Math.min(o,i)));return new e(n,s,Math.floor(Math.min(s+Math.max(1/0,0),i))-s)}static getArrayBuffer(t){return t instanceof ArrayBuffer?t:t.buffer}static getCodecFamily(t){const{base:e,profile:n}=a._getCodecParts(t);switch(e){case"mp4a":switch(n){case"69":case"6b":case"40.34":return o.default.CODEC_FAMILIES.MP3;case"66":case"67":case"68":case"40.2":case"40.02":case"40.5":case"40.05":case"40.29":case"40.42":return o.default.CODEC_FAMILIES.AAC;case"a5":return o.default.CODEC_FAMILIES.AC3;case"e6":return o.default.CODEC_FAMILIES.EC3;case"b2":return o.default.CODEC_FAMILIES.DTSX;case"a9":return o.default.CODEC_FAMILIES.DTSC}break;case"avc1":case"avc3":return o.default.CODEC_FAMILIES.AVC;case"hvc1":case"hvc3":return o.default.CODEC_FAMILIES.HEVC;default:return e}return e}static _getCodecParts(t){const[e,...n]=t.split(".");return{base:e,profile:n.join(".")}}}e.default=a},8986:function(t,e,n){n.r(e),n.d(e,{getVersionString:function(){return i}});const r="5.0.0";function i(){return r}},8748:function(t,e,n){n.r(e),e.default=class{extend(t,e){if(!t)return;let n=!!e&&e.override,r=!!e&&e.publicOnly;for(const e in t)!t.hasOwnProperty(e)||this[e]&&!n||r&&-1===t[e].indexOf("public_")||(this[e]=t[e])}}},5734:function(t,e,n){n.r(e);var r=n(7252);class i extends r.default{constructor(){super(),this.ATTEMPT_BACKGROUND_SYNC="attemptBackgroundSync",this.BUFFERING_COMPLETED="bufferingCompleted",this.BUFFER_CLEARED="bufferCleared",this.BYTES_APPENDED_END_FRAGMENT="bytesAppendedEndFragment",this.BUFFER_REPLACEMENT_STARTED="bufferReplacementStarted",this.CHECK_FOR_EXISTENCE_COMPLETED="checkForExistenceCompleted",this.CMSD_STATIC_HEADER="cmsdStaticHeader",this.CURRENT_TRACK_CHANGED="currentTrackChanged",this.DATA_UPDATE_COMPLETED="dataUpdateCompleted",this.INBAND_EVENTS="inbandEvents",this.INITIAL_STREAM_SWITCH="initialStreamSwitch",this.INIT_FRAGMENT_LOADED="initFragmentLoaded",this.INIT_FRAGMENT_NEEDED="initFragmentNeeded",this.INTERNAL_MANIFEST_LOADED="internalManifestLoaded",this.ORIGINAL_MANIFEST_LOADED="originalManifestLoaded",this.LOADING_COMPLETED="loadingCompleted",this.LOADING_PROGRESS="loadingProgress",this.LOADING_DATA_PROGRESS="loadingDataProgress",this.LOADING_ABANDONED="loadingAborted",this.MANIFEST_UPDATED="manifestUpdated",this.MEDIA_FRAGMENT_LOADED="mediaFragmentLoaded",this.MEDIA_FRAGMENT_NEEDED="mediaFragmentNeeded",this.MEDIAINFO_UPDATED="mediaInfoUpdated",this.QUOTA_EXCEEDED="quotaExceeded",this.SEGMENT_LOCATION_BLACKLIST_ADD="segmentLocationBlacklistAdd",this.SEGMENT_LOCATION_BLACKLIST_CHANGED="segmentLocationBlacklistChanged",this.SERVICE_LOCATION_BASE_URL_BLACKLIST_ADD="serviceLocationBlacklistAdd",this.SERVICE_LOCATION_BASE_URL_BLACKLIST_CHANGED="serviceLocationBlacklistChanged",this.SERVICE_LOCATION_LOCATION_BLACKLIST_ADD="serviceLocationLocationBlacklistAdd",this.SERVICE_LOCATION_LOCATION_BLACKLIST_CHANGED="serviceLocationLocationBlacklistChanged",this.SET_FRAGMENTED_TEXT_AFTER_DISABLED="setFragmentedTextAfterDisabled",this.SET_NON_FRAGMENTED_TEXT="setNonFragmentedText",this.SOURCE_BUFFER_ERROR="sourceBufferError",this.STREAMS_COMPOSED="streamsComposed",this.STREAM_BUFFERING_COMPLETED="streamBufferingCompleted",this.STREAM_REQUESTING_COMPLETED="streamRequestingCompleted",this.TEXT_TRACKS_QUEUE_INITIALIZED="textTracksQueueInitialized",this.TIME_SYNCHRONIZATION_COMPLETED="timeSynchronizationComplete",this.UPDATE_TIME_SYNC_OFFSET="updateTimeSyncOffset",this.URL_RESOLUTION_FAILED="urlResolutionFailed",this.VIDEO_CHUNK_RECEIVED="videoChunkReceived",this.WALLCLOCK_TIME_UPDATED="wallclockTimeUpdated",this.XLINK_ELEMENT_LOADED="xlinkElementLoaded",this.XLINK_READY="xlinkReady",this.SEEK_TARGET="seekTarget",this.SETTING_UPDATED_LIVE_DELAY="settingUpdatedLiveDelay",this.SETTING_UPDATED_LIVE_DELAY_FRAGMENT_COUNT="settingUpdatedLiveDelayFragmentCount",this.SETTING_UPDATED_CATCHUP_ENABLED="settingUpdatedCatchupEnabled",this.SETTING_UPDATED_PLAYBACK_RATE_MIN="settingUpdatedPlaybackRateMin",this.SETTING_UPDATED_PLAYBACK_RATE_MAX="settingUpdatedPlaybackRateMax",this.SETTING_UPDATED_ABR_ACTIVE_RULES="settingUpdatedAbrActiveRules",this.SETTING_UPDATED_MAX_BITRATE="settingUpdatedMaxBitrate",this.SETTING_UPDATED_MIN_BITRATE="settingUpdatedMinBitrate"}}e.default=i},3621:function(t,e,n){n.r(e);var r=n(5734);class i extends r.default{}let o=new i;e.default=o},7252:function(t,e,n){n.r(e),e.default=class{extend(t,e){if(!t)return;let n=!!e&&e.override,r=!!e&&e.publicOnly;for(const e in t)!t.hasOwnProperty(e)||this[e]&&!n||r&&-1===t[e].indexOf("public_")||(this[e]=t[e])}}},8854:function(t,e,n){n.r(e),e.default={ACCESSIBILITY:"Accessibility",ADAPTATION_SET:"AdaptationSet",ADAPTATION_SETS:"adaptationSets",ADAPTATION_SET_SWITCHING_SCHEME_ID_URI:"urn:mpeg:dash:adaptation-set-switching:2016",ADD:"add",ASSET_IDENTIFIER:"AssetIdentifier",AUDIO_CHANNEL_CONFIGURATION:"AudioChannelConfiguration",AUDIO_SAMPLING_RATE:"audioSamplingRate",AVAILABILITY_END_TIME:"availabilityEndTime",AVAILABILITY_START_TIME:"availabilityStartTime",AVAILABILITY_TIME_COMPLETE:"availabilityTimeComplete",AVAILABILITY_TIME_OFFSET:"availabilityTimeOffset",BANDWITH:"bandwidth",BASE_URL:"BaseURL",BITSTREAM_SWITCHING:"BitstreamSwitching",BITSTREAM_SWITCHING_MINUS:"bitstreamSwitching",BYTE_RANGE:"byteRange",CAPTION:"caption",CENC_DEFAULT_KID:"cenc:default_KID",CLIENT_DATA_REPORTING:"ClientDataReporting",CLIENT_REQUIREMENT:"clientRequirement",CMCD_PARAMETERS:"CMCDParameters",CODECS:"codecs",CODEC_PRIVATE_DATA:"codecPrivateData",CODING_DEPENDENCY:"codingDependency",CONTENT_COMPONENT:"ContentComponent",CONTENT_PROTECTION:"ContentProtection",CONTENT_STEERING:"ContentSteering",CONTENT_STEERING_RESPONSE:{VERSION:"VERSION",TTL:"TTL",RELOAD_URI:"RELOAD-URI",PATHWAY_PRIORITY:"PATHWAY-PRIORITY",PATHWAY_CLONES:"PATHWAY-CLONES",BASE_ID:"BASE-ID",ID:"ID",URI_REPLACEMENT:"URI-REPLACEMENT",HOST:"HOST",PARAMS:"PARAMS"},CONTENT_TYPE:"contentType",DEFAULT_SERVICE_LOCATION:"defaultServiceLocation",DEPENDENCY_ID:"dependencyId",DURATION:"duration",DVB_PRIORITY:"dvb:priority",DVB_WEIGHT:"dvb:weight",DVB_URL:"dvb:url",DVB_MIMETYPE:"dvb:mimeType",DVB_FONTFAMILY:"dvb:fontFamily",DYNAMIC:"dynamic",ESSENTIAL_PROPERTY:"EssentialProperty",EVENT:"Event",EVENT_STREAM:"EventStream",FORCED_SUBTITLE:"forced-subtitle",FRAMERATE:"frameRate",FRAME_PACKING:"FramePacking",GROUP_LABEL:"GroupLabel",HEIGHT:"height",ID:"id",INBAND:"inband",INBAND_EVENT_STREAM:"InbandEventStream",INDEX:"index",INDEX_RANGE:"indexRange",INITIALIZATION:"Initialization",INITIALIZATION_MINUS:"initialization",LA_URL:"Laurl",LA_URL_LOWER_CASE:"laurl",LABEL:"Label",LANG:"lang",LOCATION:"Location",MAIN:"main",MAXIMUM_SAP_PERIOD:"maximumSAPPeriod",MAX_PLAYOUT_RATE:"maxPlayoutRate",MAX_SEGMENT_DURATION:"maxSegmentDuration",MAX_SUBSEGMENT_DURATION:"maxSubsegmentDuration",MEDIA:"media",MEDIA_PRESENTATION_DURATION:"mediaPresentationDuration",MEDIA_RANGE:"mediaRange",MEDIA_STREAM_STRUCTURE_ID:"mediaStreamStructureId",METRICS:"Metrics",METRICS_MINUS:"metrics",MIME_TYPE:"mimeType",MINIMUM_UPDATE_PERIOD:"minimumUpdatePeriod",MIN_BUFFER_TIME:"minBufferTime",MP4_PROTECTION_SCHEME:"urn:mpeg:dash:mp4protection:2011",MPD:"MPD",MPD_TYPE:"mpd",MPD_PATCH_TYPE:"mpdpatch",ORIGINAL_MPD_ID:"mpdId",ORIGINAL_PUBLISH_TIME:"originalPublishTime",PATCH_LOCATION:"PatchLocation",PERIOD:"Period",PRESENTATION_TIME:"presentationTime",PRESENTATION_TIME_OFFSET:"presentationTimeOffset",PRO:"pro",PRODUCER_REFERENCE_TIME:"ProducerReferenceTime",PRODUCER_REFERENCE_TIME_TYPE:{ENCODER:"encoder",CAPTURED:"captured",APPLICATION:"application"},PROFILES:"profiles",PSSH:"pssh",PUBLISH_TIME:"publishTime",QUALITY_RANKING:"qualityRanking",QUERY_BEFORE_START:"queryBeforeStart",QUERY_PART:"$querypart$",RANGE:"range",RATING:"Rating",REF:"ref",REF_ID:"refId",REMOVE:"remove",REPLACE:"replace",REPORTING:"Reporting",REPRESENTATION:"Representation",REPRESENTATION_INDEX:"RepresentationIndex",ROBUSTNESS:"robustness",ROLE:"Role",S:"S",SAR:"sar",SCAN_TYPE:"scanType",SEGMENT_ALIGNMENT:"segmentAlignment",SEGMENT_BASE:"SegmentBase",SEGMENT_LIST:"SegmentList",SEGMENT_PROFILES:"segmentProfiles",SEGMENT_TEMPLATE:"SegmentTemplate",SEGMENT_TIMELINE:"SegmentTimeline",SEGMENT_TYPE:"segment",SEGMENT_URL:"SegmentURL",SERVICE_DESCRIPTION:"ServiceDescription",SERVICE_DESCRIPTION_LATENCY:"Latency",SERVICE_DESCRIPTION_OPERATING_BANDWIDTH:"OperatingBandwidth",SERVICE_DESCRIPTION_OPERATING_QUALITY:"OperatingQuality",SERVICE_DESCRIPTION_PLAYBACK_RATE:"PlaybackRate",SERVICE_DESCRIPTION_SCOPE:"Scope",SERVICE_LOCATION:"serviceLocation",SERVICE_LOCATIONS:"serviceLocations",SOURCE_URL:"sourceURL",START:"start",START_NUMBER:"startNumber",START_WITH_SAP:"startWithSAP",STATIC:"static",STEERING_TYPE:"steering",SUBSET:"Subset",SUBTITLE:"subtitle",SUB_REPRESENTATION:"SubRepresentation",SUB_SEGMENT_ALIGNMENT:"subsegmentAlignment",SUGGESTED_PRESENTATION_DELAY:"suggestedPresentationDelay",SUPPLEMENTAL_PROPERTY:"SupplementalProperty",SUPPLEMENTAL_CODECS:"scte214:supplementalCodecs",TIMESCALE:"timescale",TIMESHIFT_BUFFER_DEPTH:"timeShiftBufferDepth",TTL:"ttl",TYPE:"type",UTC_TIMING:"UTCTiming",VALUE:"value",VIEWPOINT:"Viewpoint",WALL_CLOCK_TIME:"wallClockTime",WIDTH:"width"}},5717:function(t,e,n){n.r(e),e.default=class{constructor(){this.schemeIdUri="",this.value=""}}},5849:function(t,e,n){n.r(e),n.d(e,{default:function(){return Vs}});class r{constructor(){this.time=null,this.verboseLevel=0}log(t,e){if(this.verboseLevel>=t){const n="function"==typeof e?e():e;console.log(`${this.time} [${t}] ${n}`)}}}class i{constructor(){this.foreground="white",this.underline=!1,this.italics=!1,this.background="black",this.flash=!1}reset(){this.foreground="white",this.underline=!1,this.italics=!1,this.background="black",this.flash=!1}setStyles(t){const e=["foreground","underline","italics","background","flash"];for(let n=0;n<e.length;n++){const r=e[n];Object.prototype.hasOwnProperty.call(t,r)&&(this[r]=t[r])}}isDefault(){return"white"===this.foreground&&!this.underline&&!this.italics&&"black"===this.background&&!this.flash}equals(t){return this.foreground===t.foreground&&this.underline===t.underline&&this.italics===t.italics&&this.background===t.background&&this.flash===t.flash}copy(t){this.foreground=t.foreground,this.underline=t.underline,this.italics=t.italics,this.background=t.background,this.flash=t.flash}}class o{constructor(){this.uchar=" ",this.penState=new i}reset(){this.uchar=" ",this.penState.reset()}setChar(t,e){this.uchar=t,this.penState.copy(e)}setPenState(t){this.penState.copy(t)}equals(t){return this.uchar===t.uchar&&this.penState.equals(t.penState)}copy(t){this.uchar=t.uchar,this.penState.copy(t.penState)}isEmpty(){return" "===this.uchar&&this.penState.isDefault()}}const l=100,u={42:225,92:233,94:237,95:243,96:250,123:231,124:247,125:209,126:241,127:9608,128:174,129:176,130:189,131:191,132:8482,133:162,134:163,135:9834,136:224,137:32,138:232,139:226,140:234,141:238,142:244,143:251,144:193,145:201,146:211,147:218,148:220,149:252,150:8216,151:161,152:42,153:8217,154:9473,155:169,156:8480,157:8226,158:8220,159:8221,160:192,161:194,162:199,163:200,164:202,165:203,166:235,167:206,168:207,169:239,170:212,171:217,172:249,173:219,174:171,175:187,176:195,177:227,178:205,179:204,180:236,181:210,182:242,183:213,184:245,185:123,186:125,187:92,188:94,189:95,190:124,191:8764,192:196,193:228,194:214,195:246,196:223,197:165,198:164,199:9475,200:197,201:229,202:216,203:248,204:9487,205:9491,206:9495,207:9499},c=function(t){return String.fromCharCode(u[t]||t)};class d{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new r;this.chars=[],this.cueStartTime=null,this.pos=0,this.currPenState=new i;for(let t=0;t<l;t++)this.chars.push(new o);this.logger=t}equals(t){for(let e=0;e<l;e++)if(!this.chars[e].equals(t.chars[e]))return!1;return!0}copy(t){for(let e=0;e<l;e++)this.chars[e].copy(t.chars[e])}isEmpty(){let t=!0;for(let e=0;e<l;e++)if(!this.chars[e].isEmpty()){t=!1;break}return t}setCursor(t){this.pos!==t&&(this.pos=t),this.pos<0?(this.logger.log(3,"Negative cursor position "+this.pos),this.pos=0):this.pos>l&&(this.logger.log(3,"Too large cursor position "+this.pos),this.pos=l)}moveCursor(t){const e=this.pos+t;if(t>1)for(let t=this.pos+1;t<e+1;t++)this.chars[t].setPenState(this.currPenState);this.setCursor(e)}backSpace(){this.moveCursor(-1),this.chars[this.pos].setChar(" ",this.currPenState)}insertChar(t){t>=144&&this.backSpace();const e=c(t);this.pos>=l?this.logger.log(0,(()=>"Cannot insert "+t.toString(16)+" ("+e+") at position "+this.pos+". Skipping it!")):(this.chars[this.pos].setChar(e,this.currPenState),this.moveCursor(1))}clearFromPos(t){let e;for(e=t;e<l;e++)this.chars[e].reset()}clear(){this.clearFromPos(0),this.pos=0,this.currPenState.reset()}clearToEndOfRow(){this.clearFromPos(this.pos)}getTextString(){const t=[];let e=!0;for(let n=0;n<l;n++){const r=this.chars[n].uchar;" "!==r&&(e=!1),t.push(r)}return e?"":t.join("")}setPenStyles(t){this.currPenState.setStyles(t),this.chars[this.pos].setPenState(this.currPenState)}}const f=15;class h{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new r;this.rows=[],this.currRow=14,this.nrRollUpRows=null,this.lastOutputScreen=null;for(let e=0;e<f;e++)this.rows.push(new d(t));this.logger=t}reset(){for(let t=0;t<f;t++)this.rows[t].clear();this.currRow=14}equals(t){let e=!0;for(let n=0;n<f;n++)if(!this.rows[n].equals(t.rows[n])){e=!1;break}return e}copy(t){for(let e=0;e<f;e++)this.rows[e].copy(t.rows[e])}isEmpty(){let t=!0;for(let e=0;e<f;e++)if(!this.rows[e].isEmpty()){t=!1;break}return t}backSpace(){this.rows[this.currRow].backSpace()}clearToEndOfRow(){this.rows[this.currRow].clearToEndOfRow()}insertChar(t){this.rows[this.currRow].insertChar(t)}setPen(t){this.rows[this.currRow].setPenStyles(t)}moveCursor(t){this.rows[this.currRow].moveCursor(t)}setCursor(t){this.logger.log(2,"setCursor: "+t),this.rows[this.currRow].setCursor(t)}setPAC(t){this.logger.log(2,(()=>"pacData = "+JSON.stringify(t)));let e=t.row-1;if(this.nrRollUpRows&&e<this.nrRollUpRows-1&&(e=this.nrRollUpRows-1),this.nrRollUpRows&&this.currRow!==e){for(let t=0;t<f;t++)this.rows[t].clear();const t=this.currRow+1-this.nrRollUpRows,n=this.lastOutputScreen;if(n){const r=n.rows[t].cueStartTime,i=this.logger.time;if(null!==r&&null!==i&&r<i)for(let r=0;r<this.nrRollUpRows;r++)this.rows[e-this.nrRollUpRows+r+1].copy(n.rows[t+r])}}this.currRow=e;const n=this.rows[this.currRow];if(null!==t.indent){const e=t.indent,r=Math.max(e-1,0);n.setCursor(t.indent),t.color=n.chars[r].penState.foreground}const r={foreground:t.color,underline:t.underline,italics:t.italics,background:"black",flash:!1};this.setPen(r)}setBkgData(t){this.logger.log(2,(()=>"bkgData = "+JSON.stringify(t))),this.backSpace(),this.setPen(t),this.insertChar(32)}setRollUpRows(t){this.nrRollUpRows=t}rollUp(){if(null===this.nrRollUpRows)return void this.logger.log(3,"roll_up but nrRollUpRows not set yet");this.logger.log(1,(()=>this.getDisplayText()));const t=this.currRow+1-this.nrRollUpRows,e=this.rows.splice(t,1)[0];e.clear(),this.rows.splice(this.currRow,0,e),this.logger.log(2,"Rolling up")}getDisplayText(t){t=t||!1;const e=[];let n="",r=-1;for(let n=0;n<f;n++){const i=this.rows[n].getTextString();i&&(r=n+1,t?e.push("Row "+r+": '"+i+"'"):e.push(i.trim()))}return e.length>0&&(n=t?"["+e.join(" | ")+"]":e.join("\n")),n}getTextAndFormat(){return this.rows}}class p{constructor(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new r;this.chNr=t,this.outputFilter=e,this.mode=null,this.displayedMemory=new h(n),this.nonDisplayedMemory=new h(n),this.lastOutputScreen=new h(n),this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null,this.logger=n,this.logger.log(2,"new Cea608Channel("+this.chNr+")")}reset(){var t,e;this.mode=null,this.displayedMemory.reset(),this.nonDisplayedMemory.reset(),this.lastOutputScreen.reset(),null===(e=null===(t=this.outputFilter)||void 0===t?void 0:t.reset)||void 0===e||e.call(t),this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null}setPAC(t){this.writeScreen.setPAC(t)}setBkgData(t){this.writeScreen.setBkgData(t)}setMode(t){t!==this.mode&&(this.mode=t,this.logger.log(2,(()=>"MODE="+t)),"MODE_POP-ON"===this.mode?this.writeScreen=this.nonDisplayedMemory:(this.writeScreen=this.displayedMemory,this.writeScreen.reset()),"MODE_ROLL-UP"!==this.mode&&(this.displayedMemory.setRollUpRows(null),this.nonDisplayedMemory.setRollUpRows(null)),this.mode=t)}insertChars(t){for(let e=0;e<t.length;e++)this.writeScreen.insertChar(t[e]);const e=this.writeScreen===this.displayedMemory?"DISP":"NON_DISP";this.logger.log(2,(()=>e+": "+this.writeScreen.getDisplayText(!0))),"MODE_PAINT-ON"!==this.mode&&"MODE_ROLL-UP"!==this.mode||(this.logger.log(1,(()=>"DISPLAYED: "+this.displayedMemory.getDisplayText(!0))),this.outputDataUpdate())}ccRCL(){this.logger.log(2,"RCL - Resume Caption Loading"),this.setMode("MODE_POP-ON")}ccBS(){this.logger.log(2,"BS - BackSpace"),"MODE_TEXT"!==this.mode&&(this.writeScreen.backSpace(),this.writeScreen===this.displayedMemory&&this.outputDataUpdate())}ccAOF(){}ccAON(){}ccDER(){this.logger.log(2,"DER- Delete to End of Row"),this.writeScreen.clearToEndOfRow(),this.outputDataUpdate()}ccRU(t){this.logger.log(2,"RU("+t+") - Roll Up"),this.writeScreen=this.displayedMemory,this.setMode("MODE_ROLL-UP"),this.writeScreen.setRollUpRows(t)}ccFON(){this.logger.log(2,"FON - Flash On"),this.writeScreen.setPen({flash:!0})}ccRDC(){this.logger.log(2,"RDC - Resume Direct Captioning"),this.setMode("MODE_PAINT-ON")}ccTR(){this.logger.log(2,"TR"),this.setMode("MODE_TEXT")}ccRTD(){this.logger.log(2,"RTD"),this.setMode("MODE_TEXT")}ccEDM(){this.logger.log(2,"EDM - Erase Displayed Memory"),this.displayedMemory.reset(),this.outputDataUpdate(!0)}ccCR(){this.logger.log(2,"CR - Carriage Return"),this.writeScreen.rollUp(),this.outputDataUpdate(!0)}ccENM(){this.logger.log(2,"ENM - Erase Non-displayed Memory"),this.nonDisplayedMemory.reset()}ccEOC(){if(this.logger.log(2,"EOC - End Of Caption"),"MODE_POP-ON"===this.mode){const t=this.displayedMemory;this.displayedMemory=this.nonDisplayedMemory,this.nonDisplayedMemory=t,this.writeScreen=this.nonDisplayedMemory,this.logger.log(1,(()=>"DISP: "+this.displayedMemory.getDisplayText()))}this.outputDataUpdate(!0)}ccTO(t){this.logger.log(2,"TO("+t+") - Tab Offset"),this.writeScreen.moveCursor(t)}ccMIDROW(t){const e={flash:!1};if(e.underline=t%2==1,e.italics=t>=46,e.italics)e.foreground="white";else{const n=Math.floor(t/2)-16,r=["white","green","blue","cyan","red","yellow","magenta"];e.foreground=r[n]}this.logger.log(2,"MIDROW: "+JSON.stringify(e)),this.writeScreen.setPen(e)}outputDataUpdate(){let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];const e=this.logger.time;null!==e&&this.outputFilter&&(null!==this.cueStartTime||this.displayedMemory.isEmpty()?this.displayedMemory.equals(this.lastOutputScreen)||(this.outputFilter.newCue(this.cueStartTime,e,this.lastOutputScreen),t&&this.outputFilter.dispatchCue&&this.outputFilter.dispatchCue(),this.cueStartTime=this.displayedMemory.isEmpty()?null:e):this.cueStartTime=e,this.lastOutputScreen.copy(this.displayedMemory))}cueSplitAtTime(t){this.outputFilter&&(this.displayedMemory.isEmpty()||(this.outputFilter.newCue&&this.outputFilter.newCue(this.cueStartTime,t,this.displayedMemory),this.cueStartTime=t))}}const m=["white","green","blue","cyan","red","yellow","magenta","black","transparent"];function g(t,e,n){return n.a===t&&n.b===e}const v=function(t){const e=[];for(let n=0;n<t.length;n++)e.push(t[n].toString(16));return e},y={17:2,18:4,21:6,22:8,23:10,19:13,20:15},b={25:2,26:4,29:6,30:8,31:10,27:13,28:15},_={17:1,18:3,21:5,22:7,23:9,16:11,19:12,20:14},w={25:1,26:3,29:5,30:7,31:9,24:11,27:12,28:14};function A(t,e,n){n.a=t,n.b=e}class E{constructor(t,e,n){this.currentChannel=0,this.cmdHistory={a:null,b:null},this.lastTime=null;const i=this.logger=new r;this.channels=[null,new p(t,e,i),new p(t+1,n,i)]}addData(t,e){this.lastTime=t,this.logger.time=t;for(let n=0;n<e.length;n+=2){const r=127&e[n],i=127&e[n+1];let o=!1,a=null;if(null!==this.lastTime&&(t=this.lastTime+.5*n*1001/3e4,this.logger.time=t),0===r&&0===i)continue;this.logger.log(3,(()=>"["+v([e[n],e[n+1]])+"] -> ("+v([r,i])+")"));const s=this.cmdHistory;if(r>=16&&r<=31){if(g(r,i,s)){A(null,null,s),this.logger.log(3,(()=>"Repeated command ("+v([r,i])+") is dropped"));continue}A(r,i,this.cmdHistory),o=this.parseCmd(r,i),o||(o=this.parseMidrow(r,i)),o||(o=this.parsePAC(r,i)),o||(o=this.parseBackgroundAttributes(r,i))}else A(null,null,s);if(!o&&(a=this.parseChars(r,i),a.length)){const t=this.currentChannel;t&&t>0?this.channels[t].insertChars(a):this.logger.log(2,"No channel found yet. TEXT-MODE?")}o||a||this.logger.log(2,(()=>"Couldn't parse cleaned data "+v([r,i])+" orig: "+v([e[n],e[n+1]])))}}parseCmd(t,e){if(!((20===t||28===t||21===t||29===t)&&e>=32&&e<=47||(23===t||31===t)&&e>=33&&e<=35))return!1;const n=20===t||21===t||23===t?1:2,r=this.channels[n];return 20===t||21===t||28===t||29===t?32===e?r.ccRCL():33===e?r.ccBS():34===e?r.ccAOF():35===e?r.ccAON():36===e?r.ccDER():37===e?r.ccRU(2):38===e?r.ccRU(3):39===e?r.ccRU(4):40===e?r.ccFON():41===e?r.ccRDC():42===e?r.ccTR():43===e?r.ccRTD():44===e?r.ccEDM():45===e?r.ccCR():46===e?r.ccENM():47===e&&r.ccEOC():r.ccTO(e-32),this.currentChannel=n,!0}parseMidrow(t,e){let n=0;if((17===t||25===t)&&e>=32&&e<=47){if(n=17===t?1:2,n!==this.currentChannel)return this.logger.log(0,"Mismatch channel in midrow parsing"),!1;const r=this.channels[n];return!!r&&(r.ccMIDROW(e),this.logger.log(3,(()=>"MIDROW ("+v([t,e])+")")),!0)}return!1}parsePAC(t,e){let n;if(!((t>=17&&t<=23||t>=25&&t<=31)&&e>=64&&e<=127||(16===t||24===t)&&e>=64&&e<=95))return!1;const r=t<=23?1:2;n=e>=64&&e<=95?1===r?_[t]:w[t]:1===r?y[t]:b[t];const i=this.channels[r];return!!i&&(i.setPAC(this.interpretPAC(n,e)),this.currentChannel=r,!0)}interpretPAC(t,e){let n;const r={color:null,italics:!1,indent:null,underline:!1,row:t};return n=e>95?e-96:e-64,r.underline=!(1&~n),n<=13?r.color=["white","green","blue","cyan","red","yellow","magenta","white"][Math.floor(n/2)]:n<=15?(r.italics=!0,r.color="white"):r.indent=4*Math.floor((n-16)/2),r}parseChars(t,e){let n,r=[],i=null;if(t>=25?(n=2,i=t-8):(n=1,i=t),i>=17&&i<=19){let t;t=17===i?e+80:18===i?e+112:e+144,this.logger.log(2,(()=>"Special char '"+c(t)+"' in channel "+n)),r=[t]}else t>=32&&t<=127&&(r=0===e?[t]:[t,e]);return r&&this.logger.log(3,(()=>"Char codes =  "+v(r).join(","))),r}parseBackgroundAttributes(t,e){if(!((16===t||24===t)&&e>=32&&e<=47||(23===t||31===t)&&e>=45&&e<=47))return!1;let n;const r={};16===t||24===t?(n=Math.floor((e-32)/2),r.background=m[n],e%2==1&&(r.background=r.background+"_semi")):45===e?r.background="transparent":(r.foreground="black",47===e&&(r.underline=!0));const i=t<=23?1:2;return this.channels[i].setBkgData(r),!0}reset(){for(let t=0;t<Object.keys(this.channels).length;t++){const e=this.channels[t];e&&e.reset()}A(null,null,this.cmdHistory)}cueSplitAtTime(t){for(let e=0;e<this.channels.length;e++){const n=this.channels[e];n&&n.cueSplitAtTime(t)}}}var x=n(5212),S=n(8854),T={TCP_CONNECTION:"TcpList",HTTP_REQUEST:"HttpList",TRACK_SWITCH:"RepSwitchList",BUFFER_LEVEL:"BufferLevel",BUFFER_LOADED:"bufferLoaded",ABANDON_LOAD:"abandonload",ALLOW_LOAD:"allowload",BUFFER_EMPTY:"bufferStalled",BUFFER_STATE:"BufferState",DVR_INFO:"DVRInfo",DROPPED_FRAMES:"DroppedFrames",SCHEDULING_INFO:"SchedulingInfo",REQUESTS_QUEUE:"RequestsQueue",MANIFEST_UPDATE:"ManifestUpdate",MANIFEST_UPDATE_STREAM_INFO:"ManifestUpdatePeriodInfo",MANIFEST_UPDATE_TRACK_INFO:"ManifestUpdateRepresentationInfo",PLAY_LIST:"PlayList",DVB_ERRORS:"DVBErrors",HTTP_REQUEST_DVB_REPORTING_TYPE:"DVBReporting"},C=n(8850),I=n(3621),k=n(138),P=n(649),R=n(1191);function O(){const t=this.context,e=(0,C.default)(t).getInstance();let n,r,i,o,a,s,l,u,c,d,f,h,p,m,g,v,y,b,_,w,A,E,S,k,O;function M(){B(),m=!1,d=0,f=0,y=0,S=!1,b=!0,_=!1,k=!1,w=NaN,v=NaN,l&&(e.off(I.default.DATA_UPDATE_COMPLETED,$,n),e.off(I.default.MANIFEST_UPDATED,_t,n),e.off(I.default.STREAMS_COMPOSED,wt,n),e.off(R.default.PLAYBACK_ENDED,pt,n),e.off(R.default.STREAM_INITIALIZING,yt,n),e.off(R.default.REPRESENTATION_SWITCH,bt,n),e.off(R.default.BUFFER_LEVEL_STATE_CHANGED,tt,n),X(),l.removeEventListener("canplay",Z),l.removeEventListener("canplaythrough",J),l.removeEventListener("play",et),l.removeEventListener("waiting",nt),l.removeEventListener("playing",rt),l.removeEventListener("pause",it),l.removeEventListener("error",mt),l.removeEventListener("seeking",ot),l.removeEventListener("seeked",at),l.removeEventListener("timeupdate",st),l.removeEventListener("progress",lt),l.removeEventListener("ratechange",ut),l.removeEventListener("loadedmetadata",ct),l.removeEventListener("loadeddata",dt),l.removeEventListener("stalled",vt),l.removeEventListener("ended",ft),l.removeEventListener("volumechange",ht)),c=null,l=null,h=null,p=null}function L(){return parseFloat((D(arguments.length>0&&void 0!==arguments[0]?arguments[0]:null)-U()).toFixed(5))}function D(t){const e=t||h;return e.start+e.duration}function N(){let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];h&&l&&l.getElement()?(t&&p&&F(U()),l.play()):m=!0}function B(){h&&l&&l.pause()}function j(t){let e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];h&&l&&l.getElement()&&t!==(isNaN(w)?l.getTime():w)&&(A=!0===n,A||(w=t),r.info("Requesting seek to time: "+t+(A?" (internal)":"")),p&&i&&F(t),l.setCurrentTime(t,e))}function z(){if(!h||!l||!p)return;const t=i&&i.hasVideoTrack()?x.default.VIDEO:x.default.AUDIO,e=a.getCurrentDVRInfo(t);return e&&e.range?e.range.end:0}function F(t){const e=new Date(u.getClientReferenceTime()),n=s.getRegularPeriods()[0],r=u.calcPresentationTimeFromWallTime(e,n);d=r-t}function U(){return h&&l?l.getTime():null}function q(){return h&&l?l.isPaused():null}function G(){return h&&l?l.isSeeking():null}function H(){return h&&l?l.isStalled():null}function V(){return h&&l?l.getPlaybackRate():null}function Q(){return h&&l?l.getEnded():null}function W(){return p}function Y(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;if(q()||!p||0===l.getReadyState()||G()||S)return;t||(t=i.hasVideoTrack()?x.default.VIDEO:x.default.AUDIO);const e=U(),n=function(t,e){const n=a.getCurrentDVRInfo(e),r=n?n.range:null;let i;return r?(i=t>r.end?Math.max(r.end-d,r.start):t>0&&t+.25<r.start&&Math.abs(t-r.start)<31536e4?_?Math.max(r.end-d,r.start):r.start:t,i):NaN}(e,t);!isNaN(n)&&n!==e&&!G()&&(H()||E||1===l.getReadyState())&&(r.debug(`UpdateCurrentTime: Seek to actual time: ${n} from currentTime: ${e}`),j(n,!1,!1))}function K(){null===c&&(c=setInterval((()=>{!function(){if(e.trigger(I.default.WALLCLOCK_TIME_UPDATED,{isDynamic:p,time:new Date}),W()){const t=Date.now();(isNaN(v)||t>v+O.get().streaming.liveUpdateTimeThresholdInMilliseconds)&&(i.addDVRMetric(),q()?function(){const t=Date.now();(!g||t>g+500)&&(g=t,st())}():Y(),v=t)}}()}),O.get().streaming.wallclockTimeUpdateInterval))}function X(){clearInterval(c),c=null}function $(t){const e=t.currentRepresentation,n=e?e.mediaInfo.streamInfo:null;null!==n&&h.id===n.id&&(h=n)}function Z(){e.trigger(I.default.CAN_PLAY)}function J(){e.trigger(I.default.CAN_PLAY_THROUGH)}function tt(t){t.streamId===i.getActiveStreamInfo().id&&(E=t.state===T.BUFFER_EMPTY,O.get().streaming.buffer.setStallState&&l.setStallState(t.mediaType,t.state===T.BUFFER_EMPTY))}function et(){r.info("Native video element event: play"),Y(),K(),e.trigger(I.default.PLAYBACK_STARTED,{startTime:U()})}function nt(){r.info("Native video element event: waiting"),e.trigger(I.default.PLAYBACK_WAITING,{playingTime:U()})}function rt(){r.info("Native video element event: playing"),A=!1,e.trigger(I.default.PLAYBACK_PLAYING,{playingTime:U()})}function it(){r.info("Native video element event: pause"),e.trigger(I.default.PLAYBACK_PAUSED,{ended:Q()})}function ot(){if(A)return;let t=U();isNaN(w)||w===t||(t=w),w=NaN,r.info("Seeking to: "+t),K(),e.trigger(I.default.PLAYBACK_SEEKING,{seekTime:t,streamId:h.id})}function at(){r.info("Native video element event: seeked"),A=!1,e.trigger(I.default.PLAYBACK_SEEKED)}function st(){h&&e.trigger(I.default.PLAYBACK_TIME_UPDATED,{timeToEnd:L(),time:U(),streamId:h.id})}function lt(){e.trigger(I.default.PLAYBACK_PROGRESS,{streamId:h.id})}function ut(){const t=V();r.info("Native video element event: ratechange: ",t),e.trigger(I.default.PLAYBACK_RATE_CHANGED,{playbackRate:t})}function ct(){r.info("Native video element event: loadedmetadata"),e.trigger(I.default.PLAYBACK_METADATA_LOADED),K()}function dt(){r.info("Native video element event: loadeddata"),e.trigger(I.default.PLAYBACK_LOADED_DATA)}function ft(){r.info("Native video element event: ended"),B(),X();const t=i?i.getActiveStreamInfo():null;t&&e.trigger(I.default.PLAYBACK_ENDED,{isLast:t.isLast})}function ht(){e.trigger(I.default.PLAYBACK_VOLUME_CHANGED)}function pt(t){if(c&&t.isLast){r.info("onPlaybackEnded -- PLAYBACK_ENDED but native video element didn't fire ended");const e=t.seekTime?t.seekTime:D();l.setCurrentTime(e),B(),X()}}function mt(t){const n=t.target||t.srcElement;e.trigger(I.default.PLAYBACK_ERROR,{error:n.error})}function gt(){p=!1}function vt(t){e.trigger(I.default.PLAYBACK_STALLED,{e:t})}function yt(t){var e;(e=t.mediaInfo)&&e.supplementalProperties&&e.supplementalProperties.find((t=>t.schemeIdUri===x.default.SUPPLEMENTAL_PROPERTY_DVB_LL_SCHEME))&&(r.debug("Low Latency critical SupplementalProperty set: Enabling low Latency"),_=!0)}function bt(t){const e=i.getActiveStreamInfo();t&&e&&t.currentRepresentation&&t.streamId&&t.streamId===e.id&&t.mediaType&&(t.mediaType===x.default.VIDEO||t.mediaType===x.default.AUDIO)&&(b=t.currentRepresentation.availabilityTimeComplete,_=!b,_&&!k&&(k=!0))}function _t(){S=!0}function wt(){S=!1}return n={computeAndSetLiveDelay:function(t,e){let n,r,i;const a=!isNaN(t)&&isFinite(t)?t:NaN;let l=s.getSuggestedPresentationDelay();const u=o.getServiceDescriptionSettings();return n=isNaN(O.get().streaming.delay.liveDelay)?null===O.get().streaming.delay.liveDelayFragmentCount||isNaN(O.get().streaming.delay.liveDelayFragmentCount)||isNaN(a)?u&&!isNaN(u.liveDelay)&&u.liveDelay>0?u.liveDelay:!0===O.get().streaming.delay.useSuggestedPresentationDelay&&null!==l&&!isNaN(l)&&l>0?l:isNaN(a)?e&&!isNaN(e.minBufferTime)?4*e.minBufferTime:4*h.manifestInfo.minBufferTime:4*a:a*O.get().streaming.delay.liveDelayFragmentCount:O.get().streaming.delay.liveDelay,i=s.getAvailabilityStartTime(),null!==i&&(y=i),r=e&&e.dvrWindowSize>0?Math.min(n,e.dvrWindowSize):n,d=r,f=r,r},getAvailabilityStartTime:function(){return y},getBufferLevel:function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=null;return i.getActiveStreamProcessors().forEach((n=>{if(!t||0===t.length||-1===t.indexOf(n.getType())){const t=n.getBufferLevel();e=null===e?t:Math.min(e,t)}})),e},getCurrentLiveLatency:function(){if(!p||isNaN(y))return NaN;let t=U();if(isNaN(t)||0===t)return 0;const e=(new Date).getTime()+1e3*u.getClientTimeOffset();return Math.max(((e-y-1e3*t)/1e3).toFixed(3),0)},getEnded:Q,getInitialCatchupModeActivated:function(){return k},getIsDynamic:W,getIsManifestUpdateInProgress:function(){return S},getLiveDelay:function(){return d},getLowLatencyModeEnabled:function(){return _},getOriginalLiveDelay:function(){return f},getPlaybackRate:V,getPlaybackStalled:function(){return E},getPlayedRanges:function(){return h&&l?l.getPlayedRanges():null},getStreamController:function(){return i},getStreamEndTime:D,getTime:U,getTimeToStreamEnd:L,initialize:function(t,r){h=t,!0!==r&&(l.addEventListener("canplay",Z),l.addEventListener("canplaythrough",J),l.addEventListener("play",et),l.addEventListener("waiting",nt),l.addEventListener("playing",rt),l.addEventListener("pause",it),l.addEventListener("error",mt),l.addEventListener("seeking",ot),l.addEventListener("seeked",at),l.addEventListener("timeupdate",st),l.addEventListener("progress",lt),l.addEventListener("ratechange",ut),l.addEventListener("loadedmetadata",ct),l.addEventListener("loadeddata",dt),l.addEventListener("stalled",vt),l.addEventListener("ended",ft),l.addEventListener("volumechange",ht),p=h.manifestInfo.isDynamic,E=!1,A=!1,e.on(I.default.DATA_UPDATE_COMPLETED,$,n),e.on(I.default.MANIFEST_UPDATED,_t,n),e.on(I.default.STREAMS_COMPOSED,wt,n),e.on(R.default.PLAYBACK_ENDED,pt,n,{priority:C.default.EVENT_PRIORITY_HIGH}),e.on(R.default.STREAM_INITIALIZING,yt,n),e.on(R.default.REPRESENTATION_SWITCH,bt,n),e.on(R.default.BUFFER_LEVEL_STATE_CHANGED,tt,n),e.on(R.default.DYNAMIC_TO_STATIC,gt,n),m&&(m=!1,N()))},isPaused:q,isProgressing:function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:500;return new Promise((r=>{let i=-1,o=null;const a=t=>{clearTimeout(o),o=null,e.off(R.default.PLAYBACK_TIME_UPDATED,s,n),r(t)},s=t=>{i<0?i=t.time:t.time>i+.1&&a(!0)};o=setTimeout((()=>{a(!1)}),t),e.on(R.default.PLAYBACK_TIME_UPDATED,s,n)}))},isSeeking:G,isStalled:H,pause:B,play:N,reset:M,seek:j,seekToCurrentLive:function(){let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=z();0!==r&&j(r-d,t,e,n)},seekToOriginalLive:function(){let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=z();0!==r&&(d=f,j(r-d,t,e,n))},setConfig:function(t){t&&(t.streamController&&(i=t.streamController),t.serviceDescriptionController&&(o=t.serviceDescriptionController),t.dashMetrics&&(a=t.dashMetrics),t.adapter&&(s=t.adapter),t.videoModel&&(l=t.videoModel),t.timelineConverter&&(u=t.timelineConverter),t.settings&&(O=t.settings))},updateCurrentTime:Y},r=(0,P.default)(t).getInstance().getLogger(n),M(),n}O.__dashjs_factory_name="PlaybackController";var M=k.default.getSingletonFactory(O),L=n(7568);class D{constructor(t){this.action=D.ACTION_DOWNLOAD,this.availabilityEndTime=null,this.availabilityStartTime=null,this.bandwidth=NaN,this.bytesLoaded=NaN,this.bytesTotal=NaN,this.delayLoadingTime=NaN,this.duration=NaN,this.endDate=null,this.firstByteDate=null,this.index=NaN,this.mediaStartTime=NaN,this.mediaType=null,this.quality=NaN,this.range=null,this.representation=null,this.responseType="arraybuffer",this.serviceLocation=null,this.startDate=null,this.startTime=NaN,this.timescale=NaN,this.type=null,this.url=t||null,this.wallStartTime=null}isInitializationRequest(){return this.type&&this.type===L.HTTPRequest.INIT_SEGMENT_TYPE}setInfo(t){this.type=t&&t.init?L.HTTPRequest.INIT_SEGMENT_TYPE:L.HTTPRequest.MEDIA_SEGMENT_TYPE,this.url=t&&t.url?t.url:null,this.range=t&&t.range?t.range.start+"-"+t.range.end:null,this.mediaType=t&&t.mediaType?t.mediaType:null,this.representation=t&&t.representation?t.representation:null}}D.ACTION_DOWNLOAD="download",D.ACTION_COMPLETE="complete";var N=D;const B="loading",j="executed",z="failed";function F(t){const e=(t=t||{}).eventBus,n=t.events,r=t.dashMetrics,i=t.fragmentLoader,o=t.debug,a=t.streamInfo,s=t.type;let l,u,c,d;function f(t){return!!t&&function(e){let n=!1;return e.some((e=>{if(r=t,i=e,!isNaN(r.index)&&r.startTime===i.startTime&&r.adaptationIndex===i.adaptationIndex&&r.type===i.type||function(t,e){return t.representation.id===e.representation.id}(t,e)||function(t,e){return t.action===N.ACTION_COMPLETE&&t.action===e.action}(t,e))return n=!0,n;var r,i})),n}(c)}function h(t){return isNaN(t.duration)?.25:Math.min(t.duration/8,.5)}function p(t){c=c.filter((e=>{const n=h(e);return isNaN(e.startTime)||void 0!==t&&e.startTime>=t-n}))}function m(t,e){e<=t+.5||(c=c.filter((n=>{const r=h(n);return isNaN(n.startTime)||n.startTime>=e-r||isNaN(n.duration)||n.startTime+n.duration<=t+r})))}function g(t,e,n){for(let r=t.length-1;r>=0;r--){const i=t[r],o=i.startTime,a=o+i.duration;if(n=isNaN(n)?h(i):n,!isNaN(o)&&!isNaN(a)&&e+n>=o&&e-n<a||isNaN(o)&&isNaN(e))return i}return null}function v(t,e){r.addSchedulingInfo(t,e),r.addRequestsQueue(t.mediaType,d,c)}function y(t){t.sender===i&&(d.splice(d.indexOf(t.request),1),t.response&&!t.error&&c.push(t.request),v(t.request,t.error?z:j),e.trigger(n.FRAGMENT_LOADING_COMPLETED,{request:t.request,response:t.response,error:t.error,sender:this},{streamId:a.id,mediaType:s}))}function b(t){t.sender===i&&e.trigger(n.FRAGMENT_LOADING_PROGRESS,{request:t.request,response:t.response,error:t.error,sender:this},{streamId:a.id,mediaType:s})}function _(t){t.sender===i&&e.trigger(n.FRAGMENT_LOADING_ABANDONED,{request:t.request},{streamId:a.id,mediaType:s})}function w(){c=[],d=[],i&&i.resetInitialSettings()}return l={abortRequests:function(){u.debug("abort requests"),i.abort(),d=[]},executeRequest:function(t){t.action===N.ACTION_DOWNLOAD?(v(t,B),d.push(t),function(t){e.trigger(n.FRAGMENT_LOADING_STARTED,{request:t},{streamId:a.id,mediaType:s}),i.load(t)}(t)):u.warn("Unknown request action.")},getRequests:function(t){const e=t?t.state instanceof Array?t.state:[t.state]:[];let n=[];return e.forEach((e=>{const r=function(t){let e;switch(t){case B:e=d;break;case j:e=c;break;default:e=[]}return e}(e);n=n.concat(function(t,e){return e.hasOwnProperty("time")?[g(t,e.time,e.threshold)]:t.filter((t=>{for(const n in e)if("state"!==n&&e.hasOwnProperty(n)&&t[n]!=e[n])return!1;return!0}))}(r,t))})),n},getStreamId:function(){return a.id},getType:function(){return s},isFragmentLoaded:f,isFragmentLoadedOrPending:function(t){let e,n=!1,r=0;if(n=f(t),!n)for(r=0;r<d.length;r++)e=d[r],t.url===e.url&&t.startTime===e.startTime&&(n=!0);return n},removeExecutedRequestsAfterTime:function(t){c=c.filter((e=>isNaN(e.startTime)||void 0!==t&&e.startTime<t))},removeExecutedRequestsBeforeTime:p,reset:function(){e.off(n.LOADING_COMPLETED,y,this),e.off(n.LOADING_DATA_PROGRESS,b,this),e.off(n.LOADING_ABANDONED,_,this),i&&i.reset(),w()},resetInitialSettings:w,syncExecutedRequestsWithBufferedRange:function(t,e){if(!t||0===t.length)return void p();let n=0;for(let e=0,r=t.length;e<r;e++)m(n,t.start(e)),n=t.end(e);e>0&&m(n,e)}},u=o.getLogger(l),w(),e.on(n.LOADING_COMPLETED,y,l),e.on(n.LOADING_DATA_PROGRESS,b,l),e.on(n.LOADING_ABANDONED,_,l),l}F.__dashjs_factory_name="FragmentModel";const U=k.default.getClassFactory(F);U.FRAGMENT_MODEL_LOADING=B,U.FRAGMENT_MODEL_EXECUTED=j,U.FRAGMENT_MODEL_CANCELED="canceled",U.FRAGMENT_MODEL_FAILED=z,k.default.updateClassFactory(F.__dashjs_factory_name,U);var q=U,G=n(1944),H=n(8748);class V extends H.default{constructor(){super(),this.MANIFEST_LOADER_PARSING_FAILURE_ERROR_CODE=10,this.MANIFEST_LOADER_LOADING_FAILURE_ERROR_CODE=11,this.XLINK_LOADER_LOADING_FAILURE_ERROR_CODE=12,this.SEGMENT_BASE_LOADER_ERROR_CODE=15,this.TIME_SYNC_FAILED_ERROR_CODE=16,this.FRAGMENT_LOADER_LOADING_FAILURE_ERROR_CODE=17,this.FRAGMENT_LOADER_NULL_REQUEST_ERROR_CODE=18,this.URL_RESOLUTION_FAILED_GENERIC_ERROR_CODE=19,this.APPEND_ERROR_CODE=20,this.REMOVE_ERROR_CODE=21,this.DATA_UPDATE_FAILED_ERROR_CODE=22,this.CAPABILITY_MEDIASOURCE_ERROR_CODE=23,this.CAPABILITY_MEDIAKEYS_ERROR_CODE=24,this.DOWNLOAD_ERROR_ID_MANIFEST_CODE=25,this.DOWNLOAD_ERROR_ID_SIDX_CODE=26,this.DOWNLOAD_ERROR_ID_CONTENT_CODE=27,this.DOWNLOAD_ERROR_ID_INITIALIZATION_CODE=28,this.DOWNLOAD_ERROR_ID_XLINK_CODE=29,this.MANIFEST_ERROR_ID_PARSE_CODE=31,this.MANIFEST_ERROR_ID_NOSTREAMS_CODE=32,this.TIMED_TEXT_ERROR_ID_PARSE_CODE=33,this.MANIFEST_ERROR_ID_MULTIPLEXED_CODE=34,this.MEDIASOURCE_TYPE_UNSUPPORTED_CODE=35,this.NO_SUPPORTED_KEY_IDS=36,this.MANIFEST_LOADER_PARSING_FAILURE_ERROR_MESSAGE="parsing failed for ",this.MANIFEST_LOADER_LOADING_FAILURE_ERROR_MESSAGE="Failed loading manifest: ",this.XLINK_LOADER_LOADING_FAILURE_ERROR_MESSAGE="Failed loading Xlink element: ",this.SEGMENTS_UPDATE_FAILED_ERROR_MESSAGE="Segments update failed",this.SEGMENTS_UNAVAILABLE_ERROR_MESSAGE="no segments are available yet",this.SEGMENT_BASE_LOADER_ERROR_MESSAGE="error loading segment ranges from sidx",this.TIME_SYNC_FAILED_ERROR_MESSAGE="Failed to synchronize client and server time",this.FRAGMENT_LOADER_NULL_REQUEST_ERROR_MESSAGE="request is null",this.URL_RESOLUTION_FAILED_GENERIC_ERROR_MESSAGE="Failed to resolve a valid URL",this.APPEND_ERROR_MESSAGE="chunk is not defined",this.REMOVE_ERROR_MESSAGE="Removing data from the SourceBuffer",this.DATA_UPDATE_FAILED_ERROR_MESSAGE="Data update failed",this.CAPABILITY_MEDIASOURCE_ERROR_MESSAGE="mediasource is not supported",this.CAPABILITY_MEDIAKEYS_ERROR_MESSAGE="mediakeys is not supported",this.TIMED_TEXT_ERROR_MESSAGE_PARSE="parsing error :",this.MEDIASOURCE_TYPE_UNSUPPORTED_MESSAGE="Error creating source buffer of type : ",this.NO_SUPPORTED_KEY_IDS_MESSAGE="All possible Adaptation Sets have an invalid key status"}}var Q=new V,W=n(8261);function Y(t){const e=this.context,n=(0,W.default)(e).getInstance(),r=t.textController,i=t.eventBus;let o,a,s,l,u,c,d=[],f=[],h=!1,p=t.mediaSource,m=null;function g(t){return t.mimeType+';codecs="'+t.codecs+'"'}function v(t){return l=r.getTextSourceBuffer(t),Promise.resolve()}function y(){if("function"==typeof l.addEventListener)try{l.addEventListener("updateend",S,!1),l.addEventListener("error",T,!1),l.addEventListener("abort",T,!1)}catch(t){c=setInterval(S,50)}else c=setInterval(S,50)}function b(){try{"function"==typeof l.removeEventListener&&(l.removeEventListener("updateend",S,!1),l.removeEventListener("error",T,!1),l.removeEventListener("abort",T,!1)),clearInterval(c)}catch(t){s.error(t)}}function _(t){return new Promise((e=>{l&&n.get().streaming.buffer.useAppendWindow?C((()=>{try{if(!l)return void e();let n=p.duration,r=0;t&&!isNaN(t.start)&&!isNaN(t.duration)&&isFinite(t.duration)&&(n=t.start+t.duration),t&&!isNaN(t.start)&&(r=t.start),l.appendWindowEnd===n&&l.appendWindowStart===r||(l.appendWindowStart=0,l.appendWindowEnd=n+.01,l.appendWindowStart=Math.max(r-.1,0),s.debug(`Updated append window for ${u.type}. Set start to ${l.appendWindowStart} and end to ${l.appendWindowEnd}`)),e()}catch(t){s.warn("Failed to set append window"),e()}})):e()}))}function w(t){return new Promise((e=>{l?C((()=>{try{l.timestampOffset===t||isNaN(t)||(l.timestampOffset=t,s.debug(`Set MSE timestamp offset to ${t}`)),e()}catch(t){e()}})):e()}))}function A(){if(!h&&f.length>0){h=!0;const t=f[0];f.splice(0,1);const e=function(){h=!1,f.length>0&&A.call(this),t&&t.data&&t.data.segmentType&&t.data.segmentType!==L.HTTPRequest.INIT_SEGMENT_TYPE&&delete t.data.bytes,t.promise.resolve({chunk:t.data})};try{if(m=t.request,0===t.data.bytes.byteLength)e.call(this);else{try{s.debug(`Appending ${t.data.segmentType} from period ${t.data.streamId} to buffer. Request URL: ${t.request.url}, Representation: ID: ${t.data.representation.id}, bitrate: ${t.data.representation.bitrateInKbit}`)}catch(t){}l.appendBuffer?l.appendBuffer(t.data.bytes):l.append(t.data.bytes,t.data),C(e.bind(this))}}catch(e){s.fatal('SourceBuffer append failed "'+e+'"'),f.length>0?A():h=!1,delete t.data.bytes,t.promise.reject({chunk:t.data,error:new G.default(e.code,e.message)})}}}function E(){d.length>0&&!l.updating&&(d.shift()(),E())}function S(){l.updating||E()}function T(t){const e=t.target||{};!function(t,e){let n=e||{};i.trigger(t,n,{streamId:u.streamInfo.id,mediaType:a})}(I.default.SOURCE_BUFFER_ERROR,{error:e,lastRequestAppended:m})}function C(t){try{d.push(t),l.updating||E()}catch(t){s.error(t)}}return o={abort:function(){return new Promise((t=>{try{f=[],"open"===p.readyState?C((()=>{try{l&&l.abort(),t()}catch(e){t()}})):l&&l.setTextTrack&&"ended"===p.readyState?(l.abort(),t()):t()}catch(e){t()}}))},abortBeforeAppend:function(){return new Promise((t=>{C((()=>{const e=l.appendWindowStart,n=l.appendWindowEnd;l&&(l.abort(),l.appendWindowStart=e,l.appendWindowEnd=n),t()}))}))},append:function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return new Promise(((n,r)=>{t?(f.push({data:t,promise:{resolve:n,reject:r},request:e}),C(A.bind(this))):r({chunk:t,error:new G.default(Q.APPEND_ERROR_CODE,Q.APPEND_ERROR_MESSAGE)})}))},changeType:function(t){const e=g(t);return new Promise((t=>{C((()=>{l.changeType&&(s.debug(`Changing SourceBuffer codec to ${e}`),l.changeType(e)),t()}))}))},getAllBufferRanges:function(){try{return l.buffered}catch(t){return s.error("getAllBufferRanges exception: "+t.message),null}},getBuffer:function(){return l},getType:function(){return a},initializeForFirstUse:function(t,e){u=t;const n=t.streamInfo;a=u.type;const r=e?g(e):t.codec;try{if(r.match(/application\/mp4;\s*codecs="(stpp|wvtt).*"/i))return v(n);l=p.addSourceBuffer(r),y();const t=[];return t.push(_(u.streamInfo)),e&&void 0!==e.mseTimeOffset&&t.push(w(e.mseTimeOffset)),Promise.all(t)}catch(t){return u.type==x.default.TEXT&&!u.isFragmented||-1!==r.indexOf('codecs="stpp')||-1!==r.indexOf('codecs="vtt')||-1!==r.indexOf("text/vtt")?v(n):Promise.reject(t)}},initializeForStreamSwitch:function(t,e,n){u=t,a=u.type,function(t){l=t.getBuffer()}(n),y()},remove:function(t){return new Promise(((e,n)=>{const r=t.start,i=t.end;r>=0&&i>r?C((function(){try{l.remove(r,i),C((function(){e({from:r,to:i,unintended:!1}),t.resolve&&t.resolve()}))}catch(e){n({from:r,to:i,unintended:!1,error:new G.default(Q.REMOVE_ERROR_CODE,Q.REMOVE_ERROR_MESSAGE)}),t.reject&&t.reject(e)}})):e()}))},removeEventListeners:b,reset:function(){if(l){try{d=[],b(),h=!1,f=[],l.getClassName&&"TextSourceBuffer"===l.getClassName()||(s.debug("Removing sourcebuffer from media source"),p.removeSourceBuffer(l))}catch(t){}l=null}m=null},updateAppendWindow:_,updateTimestampOffset:w},s=(0,P.default)(e).getInstance().getLogger(o),o}Y.__dashjs_factory_name="SourceBufferSink";var K=k.default.getClassFactory(Y);function X(t){const e=this.context;let n,r,i,o=[],a=t;function s(t,e){return o=o.filter((n=>!((isNaN(e)||n.start<e)&&(isNaN(t)||n.end>t)))),Promise.resolve()}return n={getAllBufferRanges:function(){let t=[];for(let e=0;e<o.length;e++){let n=o[e];0===t.length||n.start>t[t.length-1].end?t.push({start:n.start,end:n.end}):t[t.length-1].end=n.end}const e={start:function(e){return t[e].start},end:function(e){return t[e].end}};return Object.defineProperty(e,"length",{get:function(){return t.length}}),e},append:function(t){return"InitializationSegment"!==t.segmentType?(o.push(t),o.sort((function(t,e){return t.start-e.start})),i=null):i=t,r.debug("PreBufferSink appended chunk s: "+t.start+"; e: "+t.end),a&&a({chunk:t}),Promise.resolve()},remove:s,abort:function(){return Promise.resolve()},discharge:function(t,e){const n=function(t,e){return o.filter((n=>(isNaN(e)||n.start<e)&&(isNaN(t)||n.end>t)))}(t,e);return i&&(n.push(i),i=null),s(t,e),n},reset:function(){o=[],i=null,a=null},updateTimestampOffset:function(){return Promise.resolve()},waitForUpdateEnd:function(t){t()},getBuffer:function(){return this}},r=(0,P.default)(e).getInstance().getLogger(n),n}X.__dashjs_factory_name="PreBufferSink";var $=k.default.getClassFactory(X);function Z(){let t={};return{save:function(e){const n=e.streamId,r=e.representation.id;t[n]=t[n]||{},t[n][r]=e},extract:function(e,n){return t&&t[e]&&t[e][n]?t[e][n]:null},reset:function(){t={}}}}Z.__dashjs_factory_name="InitCache";var J=k.default.getSingletonFactory(Z);const tt=.01,et="BufferController";function nt(t){const e=(t=t||{}).capabilities,n=this.context,r=(0,C.default)(n).getInstance(),i=t.fragmentModel,o=t.playbackController,a=t.representationController,s=t.settings,l=t.streamInfo,u=t.textController,c=t.type;let d,f,h,p,m,g,v,y,b,_,w,A,E,S,k,O,M,D,N,B,j;function z(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return new Promise(((n,r)=>{g=t,b&&e&&"function"==typeof b.discharge?(_=b,F(e).then((()=>{n()})).catch((t=>{r(t)}))):n()}))}function F(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],i=arguments.length>2?arguments[2]:void 0;return new Promise(((o,s)=>{D&&t?g?(w=!1,function(t,e,i){return new Promise((o=>{b=K(n).create({mediaSource:g,textController:u,eventBus:r}),function(t,e,n){const r=a.getCurrentRepresentation();return e&&e[c]&&(c===x.default.VIDEO||c===x.default.AUDIO)?function(t,e,n,r){b.initializeForStreamSwitch(t,e,n[c]);const i=[];return i.push(b.abortBeforeAppend()),i.push(gt()),i.push(Y(e,r)),e&&void 0!==e.mseTimeOffset&&i.push(mt(e)),Promise.allSettled(i)}(t,r,e,n):function(t,e){return b.initializeForFirstUse(t,e)}(t,r)}(t,e,i).then((()=>mt(a.getCurrentRepresentation()))).then((()=>{o(b)})).catch((t=>{f.warn("Caught error on create SourceBuffer: "+t),o(b)}))}))}(t,e,i).then((t=>{o(t)})).catch((t=>{s(t)}))):(w=!0,function(){return new Promise(((t,e)=>{b=$(n).create(Q.bind(this)),mt(a.getCurrentRepresentation()).then((()=>{t(b)})).catch((()=>{e()}))}))}().then((t=>{o(t)})).catch((t=>{s(t)}))):o(null)}))}function U(t){s.get().streaming.cacheInitSegments&&(f.info("Init fragment finished loading saving to",c+"'s init cache"),D.save(t.chunk)),f.debug("Append Init fragment",c," with representationId:",t.chunk.representation.id," and quality:",t.chunk.quality,", data size:",t.chunk.bytes.byteLength),H(t.chunk)}function G(t){H(t.chunk,t.request)}function H(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;b&&(b.append(t,e).then((t=>{Q(t)})).catch((t=>{Q(t)})),t.representation.mediaInfo.type===x.default.VIDEO&&Et(I.default.VIDEO_CHUNK_RECEIVED,{chunk:t}))}function V(t){if(t&&t.length>0)for(let e=0,n=t.length;e<n;e++)f.debug("Buffered range: "+t.start(e)+" - "+t.end(e)+", currentTime = ",o.getTime())}function Q(t){if(t.error)return 22===t.error.code&&function(){if(M=!0,m=.8*_t(),f.warn("Quota exceeded, Critical Buffer: "+m),m>0){const t=Math.max(.2*m,1),e=m-t,n=Math.min(s.get().streaming.buffer.bufferTimeAtTopQuality,.9*e),r=Math.min(s.get().streaming.buffer.bufferTimeAtTopQualityLongForm,.9*e),i={streaming:{buffer:{bufferToKeep:parseFloat(t.toFixed(5)),bufferTimeAtTopQuality:parseFloat(n.toFixed(5)),bufferTimeAtTopQualityLongForm:parseFloat(r.toFixed(5))}}};s.update(i)}}(),void(22!==t.error.code&&At()||(f.warn("Clearing playback buffer to overcome quota exceed situation"),Et(I.default.QUOTA_EXCEEDED,{criticalBufferLevel:m,quotaExceededTime:t.chunk.start}),ft(dt())));if(!b)return;if(at(),M=!1,S=t.chunk,!S||!S.endFragment)return;S&&!isNaN(S.index)&&(v=Math.max(S.index,v),st());const e=b.getAllBufferRanges();S.segmentType===L.HTTPRequest.MEDIA_SEGMENT_TYPE&&(V(e),nt(),function(){if(isNaN(j)||w)return;if(c!==x.default.AUDIO&&c!==x.default.VIDEO)return void(j=NaN);const t=o.getTime(),e=ot(t,0),n=ot(j,0);if(e&&n&&e.start===n.start)return void(j=NaN);const r=a.getCurrentRepresentation().segmentDuration,i=ot(j,r);i&&(s.get().streaming.buffer.enableSeekDecorrelationFix&&Math.abs(t-j)>r?j<=i.end&&o.seek(Math.max(j,i.start),!1,!0):t<i.start&&o.seek(i.start,!1,!0))}());let n=!1;A&&(A.indexOf(S)>0&&(n=!0),A=null),S&&!n&&Et(I.default.BYTES_APPENDED_END_FRAGMENT,{startTime:S.start,index:S.index,bufferedRanges:e,segmentType:S.segmentType,mediaType:c,representationId:S.representation.id})}function W(t,e){const n=[];return n.push(mt(t)),n.push(b?b.abort():Promise.resolve()),n.push(Y(t,e)),Promise.allSettled(n)}function Y(t,n){return t&&n?t&&n&&t.mimeType===n.mimeType&&t.codecFamily===n.codecFamily?(f.debug(`Switching to new codec ${t.codecs} without changeType as previous codec ${n.codecs} is compatible.`),Promise.resolve()):s.get().streaming.buffer.useChangeType&&e.supportsChangeType()?(f.debug(`Using changeType() to switch from codec ${n.codecs} to ${t.codecs}`),b.changeType(t)):(f.debug("changeType() not available"),Promise.resolve()):(f.warn("BufferController._changeCodec() is missing the information about the Representations. Doing nothing"),Promise.resolve())}function X(){return new Promise(((t,e)=>{let n=Z();if(!n||0===n.length)return nt(),void t();ft(n).then((()=>{t()})).catch((t=>{e(t)}))}))}function Z(t){const e=[],n=b.getAllBufferRanges();if(!n||0===n.length)return e;if(!t&&0!==t||isNaN(t))e.push({start:n.start(0),end:n.end(n.length-1)+.5});else{const r=function(t,e){const n=s.get().streaming.buffer.bufferToKeep,r=e.start(0);if(t-r>n){let e=Math.max(0,t-n);const o=i.getRequests({state:q.FRAGMENT_MODEL_EXECUTED,time:t,threshold:tt})[0];if(o&&(e=Math.min(o.startTime,e)),e>0)return{start:r,end:e}}return null}(t,n),o=function(t,e){const n=e.end(e.length-1)+.5,r=wt(t),o=l.manifestInfo.duration>=s.get().streaming.buffer.longFormContentDurationThreshold?s.get().streaming.buffer.bufferTimeAtTopQualityLongForm:s.get().streaming.buffer.bufferTimeAtTopQuality;let a=isNaN(r)?t:Math.min(r,t+o);if(a>=e.end(e.length-1))return null;const u=i.getRequests({state:q.FRAGMENT_MODEL_EXECUTED,time:t,threshold:tt})[0];if(u&&(a=Math.max(u.startTime+u.duration,a)),s.get().streaming.buffer.avoidCurrentTimeRangePruning)for(let r=0;r<e.length;r++)if(e.start(r)<=t&&t<=e.end(r)&&e.start(r)<=a&&a<=e.end(r)){let i=a;a=r+1<e.length?e.start(r+1):e.end(r)+1,f.debug("Buffered range ["+e.start(r)+", "+e.end(r)+"] overlaps with targetTime "+t+" and range to be pruned ["+i+", "+n+"], using ["+a+", "+n+"] instead"+(a<n?"":" (no actual pruning)"));break}return a<e.end(e.length-1)?{start:a,end:n}:null}(t,n);r&&e.push(r),o&&e.push(o)}return e}function nt(){(!B||c===x.default.TEXT&&u.isTextEnabled())&&at()}function rt(){lt()}function it(){lt(),j=NaN}function ot(t,e){if(!b)return null;const n=b.getAllBufferRanges();let r,i,o=0,a=0,s=null,l=null,u=0;const c=isNaN(e)?.15:e;if(null!=n){for(i=0,r=n.length;i<r;i++)if(o=n.start(i),a=n.end(i),null===s)u=Math.abs(o-t),(t>=o&&t<a||u<=c)&&(s=o,l=a);else{if(u=o-l,!(u<=c))break;l=a}if(null!==s)return{start:s,end:l}}return null}function at(){if(o){let t=o.getTime()||0;w&&(t=isNaN(j)?0:j);const e=s.get().streaming.gaps.jumpGaps&&!isNaN(s.get().streaming.gaps.smallGapLimit)?s.get().streaming.gaps.smallGapLimit:NaN;p=Math.max(function(t,e){let n,r;return s.get().streaming.gaps.jumpGaps&&(e=s.get().streaming.gaps.smallGapLimit),n=ot(t,e),r=null===n?0:n.end-t,r}(t,e),0),Et(I.default.BUFFER_LEVEL_UPDATED,{mediaType:c,bufferLevel:p}),lt()}}function st(){const t=v>=y-1,e=o.getTimeToStreamEnd(l)-p<1e-5;!t&&!e||h||(bt(!0),f.debug(`checkIfBufferingCompleted trigger BUFFERING_COMPLETED for stream id ${l.id} and type ${c}`))}function lt(){c!==x.default.AUDIO&&c!==x.default.VIDEO||((!o.getLowLatencyModeEnabled()&&p<s.get().streaming.buffer.stallThreshold||0===p)&&!h?ut(T.BUFFER_EMPTY):(h||p>=s.get().streaming.buffer.stallThreshold||o.getLowLatencyModeEnabled()&&p>0)&&ut(T.BUFFER_LOADED))}function ut(t){E===t||t===T.BUFFER_EMPTY&&0===o.getTime()||c===x.default.TEXT&&!u.isTextEnabled()||(E=t,Et(I.default.BUFFER_LEVEL_STATE_CHANGED,{state:t}),Et(t===T.BUFFER_LOADED?I.default.BUFFER_LOADED:I.default.BUFFER_EMPTY),f.debug(t===T.BUFFER_LOADED?"Got enough buffer to start":"Waiting for more buffer before starting playback"))}function ct(){b&&c!==x.default.TEXT&&(h||ft(dt()))}function dt(){const t=[],e=b.getAllBufferRanges();if(!e||0===e.length)return t;const n=o.getTime();let r=Math.max(0,n-s.get().streaming.buffer.bufferToKeep);const a=i.getRequests({state:q.FRAGMENT_MODEL_EXECUTED,time:n,threshold:tt})[0];if(a)r=Math.min(a.startTime,r);else if(0===n&&o.getIsDynamic())return[];if(e.start(0)<=r){const n={start:0,end:r};for(let t=0;t<e.length&&e.end(t)<=r;t++)n.end=e.end(t);n.start<n.end&&t.push(n)}return t}function ft(t){return new Promise(((e,n)=>{if(!t||!b||0===t.length)return at(),void e();const r=[];t.forEach((t=>{r.push(function(t){return new Promise(((e,n)=>{t.resolve=e,t.reject=n,N.push(t)}))}(t))})),O||ht(),Promise.all(r).then((()=>{e()})).catch((t=>{n(t)}))}))}function ht(){try{if(0===N.length||!b)return f.debug("Nothing to prune, halt pruning"),N=[],void(O=!1);const t=b.getBuffer();if(!t||!t.buffered||0===t.buffered.length)return f.debug("SourceBuffer is empty (or does not exist), halt pruning"),N=[],void(O=!1);const e=N.shift();f.debug(`${c}: Removing buffer from: ${e.start} to ${e.end}`),O=!0,o.getTime()<e.end&&bt(!1),b.remove(e).then((t=>{pt(t)})).catch((t=>{pt(t)}))}catch(t){O=!1}}function pt(t){f.debug("onRemoved buffer from:",t.from,"to",t.to),b&&(V(b.getAllBufferRanges()),0===N.length&&(O=!1,at()),t.unintended&&(f.warn("Detected unintended removal from:",t.from,"to",t.to,"setting streamprocessor time to",t.from),Et(I.default.SEEK_TARGET,{time:t.from})),O?ht():(B?B=!1:at(),Et(I.default.BUFFER_CLEARED,{from:t.from,to:t.to,unintended:t.unintended,hasEnoughSpaceToAppend:At(),quotaExceeded:M})))}function mt(t){return new Promise((e=>{t&&void 0!==t.mseTimeOffset&&b&&b.updateTimestampOffset?b.updateTimestampOffset(t.mseTimeOffset).then((()=>{e()})).catch((()=>{e()})):e()}))}function gt(){return b&&!h?b.updateAppendWindow(l):Promise.resolve()}function vt(){k++,k*(s.get().streaming.wallclockTimeUpdateInterval/1e3)>=s.get().streaming.buffer.bufferPruningInterval&&(k=0,ct())}function yt(){lt()}function bt(t){h=t,h?Et(I.default.BUFFERING_COMPLETED):y=Number.POSITIVE_INFINITY}function _t(){try{const t=b.getAllBufferRanges();let e,n,r=0;if(!t)return r;for(n=0,e=t.length;n<e;n++)r+=t.end(n)-t.start(n);return r}catch(t){return 0}}function wt(t){try{let e=t;const n=b.getAllBufferRanges();if(!n||0===n.length)return NaN;let r=0;for(;e===t&&r<n.length;){const t=n.start(r),i=n.end(r);e>=t&&e<=i&&(e=i),r+=1}return e===t?NaN:e}catch(t){return NaN}}function At(){const t=_t();return isNaN(t)||t<m}function Et(t,e){let n=e||{};r.trigger(t,n,{streamId:l.id,mediaType:c})}function xt(t,e){if(m=Number.POSITIVE_INFINITY,E=void 0,y=Number.POSITIVE_INFINITY,v=0,S=null,h=!1,O=!1,M=!1,p=0,k=0,N=[],j=NaN,w=!1,b){let n=b;b=null,t||(e?n.removeEventListeners():n.abort().then((()=>{n.reset(e),n=null})))}B=!1}return d={appendInitSegmentFromCache:function(t){const e=D.extract(l.id,t);return!!e&&(f.info("Append Init fragment",c," with representationId:",e.representation.id," and quality:",e.quality,", data size:",e.bytes.byteLength),H(e),!0)},clearBuffers:ft,createBufferSink:F,dischargePreBuffer:function(){if(b&&_&&"function"==typeof _.discharge){const t=_.getAllBufferRanges();if(t.length>0){let e="Beginning "+c+"PreBuffer discharge, adding buffer for:";for(let n=0;n<t.length;n++)e+=" start: "+t.start(n)+", end: "+t.end(n)+";";f.debug(e)}else f.debug("PreBuffer discharge requested, but there were no media segments in the PreBuffer.");A=[];let e=_.discharge(),n=null;for(let t=0;t<e.length;t++){const r=e[t];if(r.segmentType!==L.HTTPRequest.INIT_SEGMENT_TYPE){const t=D.extract(r.streamId,r.representation.id);t&&n!==t&&(A.push(t),b.append(t),n=t)}A.push(r),b.append(r)}_.reset(),_=null}},getAllRangesWithSafetyFactor:Z,getBuffer:function(){return b},getBufferControllerType:function(){return et},getBufferLevel:function(){return p},getContinuousBufferTimeForTargetTime:wt,getIsBufferingCompleted:function(){return h},getIsPruningInProgress:function(){return O},getMediaSource:function(){return g},getRangeAt:ot,getStreamId:function(){return l.id},getType:function(){return c},hasBufferAtTime:function(t){try{const e=b.getAllBufferRanges();if(!e||0===e.length)return!1;let n=0;for(;n<e.length;){const r=e.start(n),i=e.end(n);if(t>=r&&t<=i)return!0;n+=1}return!1}catch(t){return f.error(t),!1}},initialize:function(t){z(t),r.on(I.default.INIT_FRAGMENT_LOADED,U,d),r.on(I.default.MEDIA_FRAGMENT_LOADED,G,d),r.on(I.default.WALLCLOCK_TIME_UPDATED,vt,d),r.on(R.default.PLAYBACK_PLAYING,it,d),r.on(R.default.PLAYBACK_PROGRESS,nt,d),r.on(R.default.PLAYBACK_TIME_UPDATED,nt,d),r.on(R.default.PLAYBACK_RATE_CHANGED,yt,d),r.on(R.default.PLAYBACK_STALLED,rt,d)},prepareForAbandonQualitySwitch:function(t,e){return W(t,e)},prepareForDefaultQualitySwitch:function(t,e){return W(t,e)},prepareForFastQualitySwitch:function(t,e){return W(t,e)},prepareForForceReplacementQualitySwitch:function(t,e){return new Promise((n=>{const r=[];r.push(b.abort()),r.push(gt()),r.push(X()),r.push(mt(t)),r.push(Y(t,e)),Promise.allSettled(r).then((()=>{bt(!1),n()}))}))},prepareForNonReplacementTrackSwitch:function(t,e){return new Promise((n=>{const r=[];r.push(gt()),r.push(Y(t,e)),Promise.allSettled(r).then((()=>{n()}))}))},prepareForPlaybackSeek:function(){return h&&bt(!1),b.abort()},prepareForReplacementTrackSwitch:function(t,e){return new Promise((n=>{const r=[];r.push(b.abort()),r.push(gt()),r.push(Y(t,e)),r.push(X()),r.push(mt(t)),Promise.allSettled(r).then((()=>{bt(!1),n()}))}))},pruneAllSafely:X,pruneBuffer:ct,reset:function(t,e){r.off(I.default.INIT_FRAGMENT_LOADED,U,this),r.off(I.default.MEDIA_FRAGMENT_LOADED,G,this),r.off(I.default.WALLCLOCK_TIME_UPDATED,vt,this),r.off(R.default.PLAYBACK_PLAYING,it,this),r.off(R.default.PLAYBACK_PROGRESS,nt,this),r.off(R.default.PLAYBACK_TIME_UPDATED,nt,this),r.off(R.default.PLAYBACK_RATE_CHANGED,yt,this),r.off(R.default.PLAYBACK_STALLED,rt,this),xt(t,e)},segmentRequestingCompleted:function(t){isNaN(t)||(y=t,st())},setIsBufferingCompleted:bt,setMediaSource:z,setSeekTarget:function(t){j=t},updateAppendWindow:gt,updateBufferTimestampOffset:mt},f=(0,P.default)(n).getInstance().getLogger(d),D=J(n).getInstance(),xt(),d}nt.__dashjs_factory_name=et;var rt=k.default.getClassFactory(nt);const it="NotFragmentedTextBufferController";function ot(t){t=t||{};const e=this.context,n=(0,C.default)(e).getInstance(),r=t.textController,i=t.errHandler,o=t.streamInfo,a=t.type;let s,l,u,c,d,f;function h(t){c=t}function p(t){l!==t&&(l=t,l&&function(t){n.trigger(t,{},{streamId:o.id,mediaType:a})}(I.default.BUFFERING_COMPLETED))}function m(t){t.chunk.bytes&&!l&&(f.save(t.chunk),d.append(t.chunk),p(!0))}return s={initialize:function(t){h(t)},getStreamId:function(){return o.id},getType:function(){return a},getBufferControllerType:function(){return it},createBufferSink:function(t){return new Promise(((o,s)=>{try{d=K(e).create({mediaSource:c,textController:r,eventBus:n}),d.initializeForFirstUse(t),u||(d.getBuffer()&&"function"==typeof d.getBuffer().initialize&&d.getBuffer().initialize(),u=!0),o(d)}catch(t){i.error(new G.default(Q.MEDIASOURCE_TYPE_UNSUPPORTED_CODE,Q.MEDIASOURCE_TYPE_UNSUPPORTED_MESSAGE+a)),s(t)}}))},dischargePreBuffer:function(){},getBuffer:function(){return d},getBufferLevel:function(){return 0},getRangeAt:function(){return null},pruneBuffer:function(){},hasBufferAtTime:function(){return!0},getAllRangesWithSafetyFactor:function(){return[]},getContinuousBufferTimeForTargetTime:function(){return Number.POSITIVE_INFINITY},setMediaSource:h,getMediaSource:function(){return c},appendInitSegmentFromCache:function(t){return null!==f.extract(o.id,t)},getIsBufferingCompleted:function(){return l},setIsBufferingCompleted:p,getIsPruningInProgress:function(){return!1},reset:function(t){n.off(I.default.INIT_FRAGMENT_LOADED,m,s),!t&&d&&(d.abort(),d.reset(),d=null)},clearBuffers:function(){return Promise.resolve()},prepareForPlaybackSeek:function(){return Promise.resolve()},prepareForReplacementTrackSwitch:function(){return l=!1,Promise.resolve()},setSeekTarget:function(){},updateAppendWindow:function(){return Promise.resolve()},pruneAllSafely:function(){return Promise.resolve()},updateBufferTimestampOffset:function(){return Promise.resolve()},segmentRequestingCompleted:function(){}},u=!1,c=null,l=!1,f=J(e).getInstance(),n.on(I.default.INIT_FRAGMENT_LOADED,m,s),s}ot.__dashjs_factory_name=it;var at=k.default.getClassFactory(ot);function st(t){t=t||{};const e=this.context,n=(0,C.default)(e).getInstance(),r=t.dashMetrics,i=t.mediaPlayerModel,o=t.fragmentModel,a=t.abrController,s=t.playbackController,l=t.textController,u=t.type,c=t.bufferController,d=t.representationController,f=t.settings;let h,p,m,g,v,y,b,_,w,A,E,S;function k(){E=!0}function O(){E=!1}function M(t){if(c.getIsBufferingCompleted())return;L();const e=isNaN(t)?0:t;v=setTimeout(D,e)}function L(){v&&(clearTimeout(v),v=null)}function D(){try{if(function(){try{return u===x.default.TEXT&&!l.isTextEnabled()||s.isPaused()&&(!s.getStreamController().getInitialPlayback()||!s.getStreamController().getAutoPlay())&&!f.get().streaming.scheduling.scheduleWhilePaused}catch(t){return!1}}())return void L();if(function(){try{return!!E&&d.getCurrentRepresentation()&&(null==_||w||function(){const t=d.getCurrentRepresentation();if(!u||!t)return!0;let e=t&&t.segmentDuration&&!isNaN(t.segmentDuration)?t.segmentDuration:0;const n=r.getCurrentBufferLevel(u),i=N();return(i<=e||s.getLowLatencyModeEnabled()||u===x.default.AUDIO&&y)&&(e=0),n+e<i}())}catch(t){return!1}}()){let t=!1;S&&(t=a.checkPlaybackQuality(u,p.id)),t||function(){const t=d.getCurrentRepresentation();A||t.id!==_||w?(w?(m.debug("Switch track for "+u+", representation id = "+t.id),w=!1):m.debug("Quality has changed, get init request for representationid = "+t.id),n.trigger(I.default.INIT_FRAGMENT_NEEDED,{representationId:t.id,sender:h},{streamId:p.id,mediaType:u}),S=!1,A=!1):(m.debug(`Media segment needed for ${u} and stream id ${p.id}`),n.trigger(I.default.MEDIA_FRAGMENT_NEEDED,{},{streamId:p.id,mediaType:u}),S=!0)}()}else M(s.getLowLatencyModeEnabled()?f.get().streaming.scheduling.lowLatencyTimeout:f.get().streaming.scheduling.defaultTimeout)}catch(t){M(s.getLowLatencyModeEnabled()?f.get().streaming.scheduling.lowLatencyTimeout:f.get().streaming.scheduling.defaultTimeout)}}function N(){let t=NaN;const e=d.getCurrentRepresentation();return u&&e?(t=u===x.default.TEXT?function(){try{if(l.isTextEnabled()){const t=d.getCurrentRepresentation();if(isNaN(t.fragmentDuration)){const t=r.getCurrentSchedulingInfo(T.SCHEDULING_INFO);return t?t.duration:0}return t.fragmentDuration}return 0}catch(t){return 0}}():u===x.default.AUDIO&&y?function(){try{const t=r.getCurrentBufferLevel(x.default.VIDEO),e=d.getCurrentRepresentation();return isNaN(e.fragmentDuration)?t+1:Math.max(t+1,e.fragmentDuration)}catch(t){return 0}}():function(){try{const t=d.getCurrentRepresentation(),e=t.mediaInfo.streamInfo;return a.isPlayingAtTopQuality(t)?e.manifestInfo.duration>=f.get().streaming.buffer.longFormContentDurationThreshold?f.get().streaming.buffer.bufferTimeAtTopQualityLongForm:f.get().streaming.buffer.bufferTimeAtTopQuality:i.getBufferTimeDefaultUnadjusted()}catch(t){return i.getBufferTimeDefaultUnadjusted()}}(),t):t}function B(){j(!0)}function j(t){if(s&&o){const e=o.getRequests({state:q.FRAGMENT_MODEL_EXECUTED,time:s.getTime(),threshold:0})[0];e&&s.getTime()>=e.startTime&&((!b.representation||e.representation.mediaInfo.type===b.representation.mediaInfo.type&&e.representation.mediaInfo.index!==b.representation.mediaInfo.index)&&t&&(m.debug(`Track change rendered for streamId ${p.id} and type ${u}`),n.trigger(I.default.TRACK_CHANGE_RENDERED,{mediaType:u,oldMediaInfo:b&&b.representation&&b.representation.mediaInfo?b.representation.mediaInfo:null,newMediaInfo:e.representation.mediaInfo,streamId:p.id})),b.representation&&e.representation.id===b.representation.id||!t||(m.debug(`Quality change rendered for streamId ${p.id} and type ${u}`),n.trigger(I.default.QUALITY_CHANGE_RENDERED,{mediaType:u,oldRepresentation:b.representation?b.representation:null,newRepresentation:e.representation,streamId:p.id})),b.representation=e.representation)}}function z(){o.abortRequests(),L()}function F(){f.get().streaming.scheduling.scheduleWhilePaused||M()}function U(t){r.updatePlayListTraceMetrics({playbackspeed:t.playbackRate.toString()})}function G(){S=!0,g=0,_=null,b={representation:null},w=!1,A=!1,E=!0}return h={clearScheduleTimer:L,getBufferTarget:N,getPlaybackController:function(){return s},getStreamId:function(){return p.id},getSwitchTrack:function(){return w},getTimeToLoadDelay:function(){return g},getType:function(){return u},initialize:function(t){y=t,n.on(I.default.URL_RESOLUTION_FAILED,z,h),n.on(R.default.PLAYBACK_STARTED,F,h),n.on(R.default.PLAYBACK_RATE_CHANGED,U,h),n.on(R.default.PLAYBACK_TIME_UPDATED,B,h),n.on(R.default.MANAGED_MEDIA_SOURCE_START_STREAMING,k,h),n.on(R.default.MANAGED_MEDIA_SOURCE_END_STREAMING,O,h)},reset:function(){n.off(I.default.URL_RESOLUTION_FAILED,z,h),n.off(R.default.PLAYBACK_STARTED,F,h),n.off(R.default.PLAYBACK_RATE_CHANGED,U,h),n.off(R.default.PLAYBACK_TIME_UPDATED,B,h),n.off(R.default.MANAGED_MEDIA_SOURCE_START_STREAMING,k,h),n.off(R.default.MANAGED_MEDIA_SOURCE_END_STREAMING,O,h),L(),j(!1),G(),p=null},setCheckPlaybackQuality:function(t){S=t},setInitSegmentRequired:function(t){A=t},setLastInitializedRepresentationId:function(t){_=t},setSwitchTrack:function(t){w=t},setTimeToLoadDelay:function(t){g=t},startScheduleTimer:M},m=(0,P.default)(e).getInstance().getLogger(h),G(),p=t.streamInfo,h}st.__dashjs_factory_name="ScheduleController";var lt=k.default.getClassFactory(st),ut=class{constructor(){this.availabilityEndTime=NaN,this.availabilityStartTime=NaN,this.duration=NaN,this.index=null,this.indexRange=null,this.media=null,this.mediaRange=null,this.mediaStartTime=NaN,this.presentationStartTime=NaN,this.replacementNumber=NaN,this.replacementTime=null,this.representation=null,this.wallStartTime=NaN}};function ct(t,e){for(;t.length<e;)t="0"+t;return t}function dt(t){return t?t.split("$$").join("$"):t}function ft(t,e){if(!e||!t||-1===t.indexOf("$RepresentationID$"))return t;let n=e.toString();return t.split("$RepresentationID$").join(n)}function ht(t,e,n){let r,i,o,a,s,l;const u=e.length;if(!t)return t;for(;;){if(r=t.indexOf("$"+e),r<0)return t;if(i=t.indexOf("$",r+u),i<0)return t;if(o=t.indexOf("%0",r+u),o>r&&o<i)switch(a=t.charAt(i-1),s=parseInt(t.substring(o+2,i-1),10),a){case"d":case"i":case"u":l=ct(n.toString(),s);break;case"x":l=ct(n.toString(16),s);break;case"X":l=ct(n.toString(16),s).toUpperCase();break;case"o":l=ct(n.toString(8),s);break;default:return t}else l=n;t=t.substring(0,r)+l+t.substring(i+1)}}function pt(t,e,n,r,i,o,a,s){let l=new ut;var u;return l.representation=t,l.duration=e,l.presentationStartTime=n,l.mediaStartTime=r,l.availabilityStartTime=i.calcAvailabilityStartTimeFromPresentationTime(o,t,a),l.availabilityEndTime=i.calcAvailabilityEndTimeFromPresentationTime(o+e,t,a),l.wallStartTime=i.calcWallTimeForSegment(l,a),l.replacementNumber=(u=s,l.representation.startNumber+u),l.index=s,l}function mt(t,e,n,r){const i=e.adaptation.period;if(isFinite(i.duration)&&i.start+i.duration<=n.presentationStartTime)return!1;if(r){if("INF"===e.availabilityTimeOffset)return!0;const r=t.getClientReferenceTime();return n.availabilityStartTime.getTime()<=r&&(!isFinite(n.availabilityEndTime)||n.availabilityEndTime.getTime()>=r)}return!0}function gt(t,e,n,r){let i,o,a;i=n.segmentDuration,isNaN(i)&&(i=n.adaptation.period.duration),o=parseFloat((n.adaptation.period.start+r*i).toFixed(5)),a=parseFloat((o+i).toFixed(5));const s=pt(n,i,o,t.calcMediaTimeFromPresentationTime(o,n),t,a,e,r);return mt(t,n,s,e)?s:null}function vt(t,e,n,r,i,o,a,s,l,u){const c=r/o,d=i/o;let f,h,p;return f=t.calcPresentationTimeFromMediaTime(c,n),h=f+d,p=pt(n,d,f,c,t,h,e,l),mt(t,n,p,e)?(p.replacementTime=u||r,a=ht(a,"Number",p.replacementNumber),a=ht(a,"Time",p.replacementTime),p.media=a,p.mediaRange=s,p):null}function yt(t){const e=(t=t||{}).eventBus,n=t.events,r=t.abrController,i=t.dashMetrics,o=t.playbackController,a=t.timelineConverter,s=t.type,l=t.streamInfo,u=t.segmentsController,c=t.isDynamic;let d,f,h;function p(){return s}function m(){return h}function g(){h=null,f=[]}function v(t){return new Promise(((e,n)=>{const r=t.hasInitialization(),o=t.hasSegments(),s=[];s.push(u.updateInitData(t,r)),s.push(u.updateSegmentData(t,o)),Promise.all(s).then((n=>{var r;n[0]&&!n[0].error&&(t=function(t,e){return e&&!e.error&&e.representation?e.representation:t}(t,n[0])),n[1]&&!n[1].error&&(t=function(t,e){if(!e||e.error)return;const n=e.segments,r=[];let i,o,s,l,u=0;for(i=0,o=n?n.length:0;i<o;i++)s=n[i],l=vt(a,c,t,s.startTime,s.duration,s.timescale,s.media,s.mediaRange,u),l&&(r.push(l),l=null,u++);return r.length>0&&(t.segments=r),t}(t,n[1])),t.fragmentDuration=t.segmentDuration?t.segmentDuration:t.segments&&t.segments.length>0?t.segments[0].duration:NaN,(r=t).mediaFinishedInformation=u.getMediaFinishedInformation(r),function(t){let e,n=i.getCurrentManifestUpdate(),r=!1;if(n){for(let i=0;i<n.representationInfo.length;i++)if(e=n.representationInfo[i],e.index===t.index&&e.mediaType===p()){r=!0;break}r||i.addManifestUpdateRepresentationInfo(t,p())}}(t),e()})).catch((t=>{n(t)}))}))}function y(t){if(!f||0===f.length)return null;const e=f.filter((e=>e.id===t));return e.length>0?e[0]:null}function b(t){e.trigger(n.DATA_UPDATE_COMPLETED,{currentRepresentation:h,error:t},{streamId:l.id,mediaType:s})}function _(t){h&&h.id===t.id||function(t){!function(){if(!(r&&i&&o&&a))throw new Error(x.default.MISSING_CONFIG_ERROR)}();const n=new Date,u=1e3*o.getTime();t&&i.addRepresentationSwitch(t.adaptation.type,n,u,t.id),e.trigger(R.default.REPRESENTATION_SWITCH,{mediaType:s,streamId:l.id,currentRepresentation:t},{streamId:l.id,mediaType:s})}(t),h=t}function w(t){if(t.newDuration){const e=m();e&&e.adaptation.period&&(e.adaptation.period.duration=t.newDuration)}}return d={getCurrentRepresentation:m,getRepresentationById:y,getStreamId:function(){return l.id},getType:p,prepareQualityChange:function(t){const e=f.filter((e=>e.id===t.id));e.length>0&&_(e[0])},reset:function(){e.off(R.default.MANIFEST_VALIDITY_CHANGED,w,d),g()},updateData:function(t,e,n){return new Promise(((a,u)=>{if(f=t,_(y(n)),s!==x.default.VIDEO&&s!==x.default.AUDIO&&(s!==x.default.TEXT||!e))return b(),void a();const c=[];for(let t=0,e=f.length;t<e;t++){const e=f[t];c.push(v(e))}Promise.all(c).then((()=>{!function(){r.setPlaybackQuality(s,l,h);const t=i.getCurrentDVRInfo(s);t&&i.updateManifestUpdateInfo({latency:t.range.end-o.getTime()}),b()}(),a()})).catch((t=>{u(t)}))}))}},g(),e.on(R.default.MANIFEST_VALIDITY_CHANGED,w,d),d}yt.__dashjs_factory_name="RepresentationController";var bt=k.default.getClassFactory(yt),_t=n(656);function wt(t){const e=(t=t||{}).eventBus,n=t.debug,r=t.urlUtils,i=t.type,o=t.streamInfo,a=t.segmentsController,s=t.timelineConverter,l=t.baseURLController;let u,c,d,f,h;function p(){return i}function m(){d=null}function g(t,e,n){const i=l.resolve(n.path);let o,a,s={};return i&&e!==i.url&&r.isRelative(e)?(o=i.url,a=i.serviceLocation,s=i.queryParams,e&&(o=r.resolve(e,o))):o=e,!r.isRelative(o)&&(t.url=o,t.serviceLocation=a,t.queryParams=s,!0)}function v(t,e){if(null==e)return null;const n=new N,r=e.representation,i=r.bandwidth;let o=e.media;return o=ht(o,"Number",e.replacementNumber),o=ht(o,"Time",e.replacementTime),o=ht(o,"Bandwidth",i),o=ft(o,r.id),o=dt(o),n.mediaType=p(),n.bandwidth=r.bandwidth,n.type=L.HTTPRequest.MEDIA_SEGMENT_TYPE,n.range=e.mediaRange,n.startTime=e.presentationStartTime,n.mediaStartTime=e.mediaStartTime,n.duration=e.duration,n.timescale=r.timescale,n.availabilityStartTime=e.availabilityStartTime,n.availabilityEndTime=e.availabilityEndTime,n.availabilityTimeComplete=r.availabilityTimeComplete,n.wallStartTime=e.wallStartTime,n.index=e.index,n.adaptationIndex=r.adaptation.index,n.representation=r,g(n,o,r)?n:void 0}function y(t,e,n){let r=null;if(!e||!e.segmentInfoType)return r;const i=a.getSegmentByTime(e,n);return i&&(d=i,c.debug("Index for time "+n+" is "+i.index),r=v(0,i)),r}function b(t,e,n){let r=null;const i=a.getSegmentByIndex(e,n,d?d.mediaStartTime:-1);if(i)r=v(0,i),d=i;else{if(f&&!h)return c.debug(p()+" No segment found at index: "+n+". Wait for next loop"),null;h=!0}return r}function _(){c.debug("Dynamic stream complete"),h=!0}return u={getCurrentIndex:function(){return d?d.index:-1},getInitRequest:function(t,e){return e?function(t,e,n){const r=new N,i=e.adaptation.period,o=i.start;if(r.mediaType=n,r.type=L.HTTPRequest.INIT_SEGMENT_TYPE,r.range=e.range,r.availabilityStartTime=s.calcAvailabilityStartTimeFromPresentationTime(o,e,f),r.availabilityEndTime=s.calcAvailabilityEndTimeFromPresentationTime(o+i.duration,e,f),r.representation=e,g(r,e.initialization,e))return r.url=ht(r.url,"Bandwidth",e.bandwidth),r}(0,e,p()):null},getNextSegmentRequest:function(t,e){return e&&e.segmentInfoType?b(0,e,d?d.index+1:0):null},getNextSegmentRequestIdempotent:function(t,e){let n=null,r=d?d.index+1:0;const i=a.getSegmentByIndex(e,r,d?d.mediaStartTime:-1);return i?(n=v(0,i),n):null},getSegmentRequestForTime:y,getStreamId:function(){return o.id},getStreamInfo:function(){return o},getType:p,getValidTimeAheadOfTargetTime:function(t,e,n,r){try{if(isNaN(t)||!e||!n)return NaN;if(t<0&&(t=0),isNaN(r)&&(r=.5),y(0,n,t))return t;if(n.adaptation.period.start+n.adaptation.period.duration<t)return NaN;const i=isFinite(n.adaptation.period.duration)?n.adaptation.period.start+n.adaptation.period.duration:t+30;let o=Math.min(t+r,i),a=NaN,s=null;for(;o<=i;){let t=null;if(o<=i&&(t=y(0,n,o)),t){a=o,s=t;break}o+=r}if(s){const e=s.startTime+s.duration;return t>s.startTime&&e-t>r?t:!isNaN(s.startTime)&&t<s.startTime&&a>s.startTime?s.startTime+.001:Math.min(e-r,a)}return a}catch(t){return NaN}},initialize:function(t){f=t,h=!1,a.initialize(t)},isLastSegmentRequested:function(t,e){if(!t||!d)return!1;if(h)return!0;if(!isFinite(t.adaptation.period.duration))return!1;if(d.presentationStartTime+d.duration>e)return!1;if(t.mediaFinishedInformation&&!isNaN(t.mediaFinishedInformation.numberOfSegments)&&!isNaN(d.index)&&d.index>=t.mediaFinishedInformation.numberOfSegments-1){if(!f||t.segmentInfoType===S.default.SEGMENT_TEMPLATE)return!0;if(f&&t.segmentInfoType===S.default.SEGMENT_LIST&&t.adaptation.period.nextPeriodId)return!0}return!!(f&&t.adaptation.period.nextPeriodId&&t.segmentInfoType===S.default.SEGMENT_TIMELINE&&t.mediaFinishedInformation&&!isNaN(t.mediaFinishedInformation.mediaTimeOfLastSignaledSegment)&&d&&!isNaN(d.mediaStartTime)&&!isNaN(d.duration)&&d.mediaStartTime+d.duration>=t.mediaFinishedInformation.mediaTimeOfLastSignaledSegment-.05)},repeatSegmentRequest:function(t,e){return e&&e.segmentInfoType?b(0,e,d?d.index:0):null},reset:function(){m(),e.off(R.default.DYNAMIC_TO_STATIC,_,u)}},c=n.getLogger(u),m(),e.on(R.default.DYNAMIC_TO_STATIC,_,u),u}wt.__dashjs_factory_name="DashHandler";var At=k.default.getClassFactory(wt);function Et(){let t;const e=/^[a-z][a-z0-9+\-_.]*:/i,n=/^https?:\/\//i,r=/^https:\/\//i,i=/^([a-z][a-z0-9+\-_.]*:\/\/[^\/]+)\/?/i,o=(t,e)=>{try{return new window.URL(t,e).toString()}catch(e){return t}},a=(t,e)=>{let n=s;if(!e)return t;if(!c(t))return t;d(t)&&(n=l),f(t)&&(n=u);const r=n(e),i="/"!==r.charAt(r.length-1)&&"/"!==t.charAt(0)?"/":"";return[r,t].join(i)};function s(t){const e=t.indexOf("/"),n=t.lastIndexOf("/");return-1!==e?n===e+1?t:(-1!==t.indexOf("?")&&(t=t.substring(0,t.indexOf("?"))),t.substring(0,n+1)):""}function l(t){const e=t.match(i);return e?e[1]:""}function u(t){const n=t.match(e);return n?n[0]:""}function c(t){return!e.test(t)}function d(t){return c(t)&&"/"===t.charAt(0)}function f(t){return 0===t.indexOf("//")}return function(){try{new window.URL("x","http://y"),t=o}catch(t){}finally{t=t||a}}(),{parseBaseUrl:s,parseOrigin:l,parseScheme:u,isRelative:c,isPathAbsolute:d,isSchemeRelative:f,isHTTPURL:function(t){return n.test(t)},isHTTPS:function(t){return r.test(t)},removeHostname:function(t){return/^(?:\w+\:\/\/)?([^\/]+)(.*)$/.exec(t)[2].substring(1)},resolve:function(e,n){return t(e,n)}}}Et.__dashjs_factory_name="DefaultURLUtils";var xt=k.default.getSingletonFactory(Et);function St(){let t,e,n=[];const r=this.context;function i(t,r,i){let o=function(t){let r;for(r=0;r<n.length;r++)if(n[r].regex.test(t))return n[r].utils;return e}(i||r);return o&&"function"==typeof o[t]?o[t](r,i):e[t](r,i)}return e=xt(r).getInstance(),t={registerUrlRegex:function(t,e){n.push({regex:t,utils:e})},parseBaseUrl:function(t){return i("parseBaseUrl",t)},parseOrigin:function(t){return i("parseOrigin",t)},parseScheme:function(t){return i("parseScheme",t)},isRelative:function(t){return i("isRelative",t)},isPathAbsolute:function(t){return i("isPathAbsolute",t)},isSchemeRelative:function(t){return i("isSchemeRelative",t)},isHTTPURL:function(t){return i("isHTTPURL",t)},isHTTPS:function(t){return i("isHTTPS",t)},removeHostname:function(t){return i("removeHostname",t)},resolve:function(t,e){return i("resolve",t,e)}},t}St.__dashjs_factory_name="URLUtils";var Tt=k.default.getSingletonFactory(St);class Ct{constructor(){this.start=null,this.mstart=null,this.starttype=null,this.trace=[]}}Ct.INITIAL_PLAYOUT_START_REASON="initial_playout",Ct.SEEK_START_REASON="seek",Ct.RESUME_FROM_PAUSE_START_REASON="resume",Ct.METRICS_COLLECTION_START_REASON="metrics_collection_start";class It{constructor(){this.representationid=null,this.subreplevel=null,this.start=null,this.mstart=null,this.duration=null,this.playbackspeed=null,this.stopreason=null}}function kt(t,e){const n=(t=t||{}).timelineConverter,r=t.dashMetrics;let i;function o(){if(!n)throw new Error(x.default.MISSING_CONFIG_ERROR)}function a(t,e){const n=t.adaptation.period.mpd.manifest.Period[t.adaptation.period.index].AdaptationSet[t.adaptation.index].Representation[t.index].SegmentTemplate||t.adaptation.period.mpd.manifest.Period[t.adaptation.period.index].AdaptationSet[t.adaptation.index].Representation[t.index].SegmentList,r=n.SegmentTimeline,i=n.SegmentURL;let o,a,l,u,c,d,f,h=0,p=-1;f=t.timescale,o=r.S;let m=!1;for(l=0,u=o.length;l<u&&!m;l++)for(a=o[l],d=0,a.hasOwnProperty("r")&&(d=a.r),a.hasOwnProperty("t")&&(h=a.t),d<0&&(d=s(t,o[l+1],a,f,h/f)),c=0;c<=d&&!m;c++)p++,m=e(h,n,i,a,f,p,l),m&&(t.segmentDuration=a.d/f),h+=a.d}function s(t,e,i,o,a){let s;if(e&&e.hasOwnProperty("t"))s=e.t/o;else try{let e=0;if(isNaN(t.adaptation.period.start)||isNaN(t.adaptation.period.duration)||!isFinite(t.adaptation.period.duration)){const t=r.getCurrentDVRInfo();e=isNaN(t.end)?0:t.end}else e=t.adaptation.period.start+t.adaptation.period.duration;s=n.calcMediaTimeFromPresentationTime(e,t),t.segmentDuration=i.d/o}catch(t){s=0}return Math.max(Math.ceil((s-a)/(i.d/o))-1,0)}return i={getSegmentByIndex:function(t,r,i){if(o(),!t)return null;let s=null,l=!1;return a(t,(function(r,o,a,u,c,d,f){if(l||i<0){let i=o.media,l=u.mediaRange;return a&&(i=a[f].media||"",l=a[f].mediaRange),s=vt(n,e,t,r,u.d,c,i,l,d,u.tManifest),!0}return r>=i*c-.5*u.d&&(l=!0),!1})),s},getSegmentByTime:function(t,r){if(o(),!t)return null;void 0===r&&(r=null);let i=null;const s=n.calcMediaTimeFromPresentationTime(r,t);return a(t,(function(r,o,a,l,u,c,d){const f=parseFloat((s*u).toPrecision(15));if(f<r+l.d&&f>=r){let s=o.media,f=l.mediaRange;return a&&(s=a[d].media||"",f=a[d].mediaRange),i=vt(n,e,t,r,l.d,u,s,f,c,l.tManifest),!0}return!1})),i},getMediaFinishedInformation:function(t){if(!t)return 0;const e=(t.adaptation.period.mpd.manifest.Period[t.adaptation.period.index].AdaptationSet[t.adaptation.index].Representation[t.index].SegmentTemplate||t.adaptation.period.mpd.manifest.Period[t.adaptation.period.index].AdaptationSet[t.adaptation.index].Representation[t.index].SegmentList).SegmentTimeline;let n,r,i,o,a,l,u,c=0,d=0,f=0;for(u=t.timescale,n=e.S,o=n.length,i=0;i<o;i++)for(r=n[i],l=0,r.hasOwnProperty("r")&&(l=r.r),r.hasOwnProperty("t")&&(c=r.t,d=c/u),l<0&&(l=s(t,n[i+1],r,u,d)),a=0;a<=l;a++)f++,c+=r.d,d=c/u;return{numberOfSegments:f,mediaTimeOfLastSignaledSegment:d}}},i}It.REPRESENTATION_SWITCH_STOP_REASON="representation_switch",It.REBUFFERING_REASON="rebuffering",It.USER_REQUEST_STOP_REASON="user_request",It.END_OF_PERIOD_STOP_REASON="end_of_period",It.END_OF_CONTENT_STOP_REASON="end_of_content",It.METRICS_COLLECTION_STOP_REASON="metrics_collection_end",It.FAILURE_STOP_REASON="failure",kt.__dashjs_factory_name="TimelineSegmentsGetter";var Pt=k.default.getClassFactory(kt);function Rt(t,e){const n=(t=t||{}).timelineConverter;let r;function i(){if(!n||!n.hasOwnProperty("calcPeriodRelativeTimeFromMpdRelativeTime"))throw new Error(x.default.MISSING_CONFIG_ERROR)}function o(t,r){if(i(),!t)return null;const o=t.adaptation.period.mpd.manifest.Period[t.adaptation.period.index].AdaptationSet[t.adaptation.index].Representation[t.index].SegmentTemplate;r=Math.max(r,0);const a=gt(n,e,t,r);if(a){a.replacementTime=Math.round(r*t.segmentDuration*t.timescale,10);let e=o.media;e=ht(e,"Number",a.replacementNumber),e=ht(e,"Time",a.replacementTime),a.media=e}return a}return r={getSegmentByIndex:o,getSegmentByTime:function(t,e){if(i(),!t)return null;const r=t.segmentDuration;if(isNaN(r))return null;let a=n.calcPeriodRelativeTimeFromMpdRelativeTime(t,e);return o(t,Math.floor(a/r))},getMediaFinishedInformation:function(t){const e={numberOfSegments:0,mediaTimeOfLastSignaledSegment:NaN};if(!t)return e;const n=t.segmentDuration;return isNaN(n)?e.numberOfSegments=1:e.numberOfSegments=Math.ceil(t.adaptation.period.duration/n),e}},r}Rt.__dashjs_factory_name="TemplateSegmentsGetter";var Ot=k.default.getClassFactory(Rt);function Mt(t,e){const n=(t=t||{}).timelineConverter;let r;function i(){if(!n||!n.hasOwnProperty("calcPeriodRelativeTimeFromMpdRelativeTime"))throw new Error(x.default.MISSING_CONFIG_ERROR)}function o(t,r){if(i(),!t)return null;const o=t.adaptation.period.mpd.manifest.Period[t.adaptation.period.index].AdaptationSet[t.adaptation.index].Representation[t.index].SegmentList,a=o.SegmentURL.length,s=t&&!isNaN(t.startNumber)?t.startNumber:1,l=Math.max(s-1,0),u=Math.max(r-l,0);let c=null;if(u<a){const i=o.SegmentURL[u];c=gt(n,e,t,r),c&&(c.replacementTime=(s+r-1)*t.segmentDuration,c.media=i.media?i.media:"",c.mediaRange=i.mediaRange,c.indexRange=i.indexRange)}return c}return r={getSegmentByIndex:o,getSegmentByTime:function(t,e){if(i(),!t)return null;const r=t.segmentDuration;if(isNaN(r))return null;const a=n.calcPeriodRelativeTimeFromMpdRelativeTime(t,e);return o(t,Math.floor(a/r))},getMediaFinishedInformation:function(t){const e={numberOfSegments:0,mediaTimeOfLastSignaledSegment:NaN};if(!t)return e;const n=t.adaptation.period.mpd.manifest.Period[t.adaptation.period.index].AdaptationSet[t.adaptation.index].Representation[t.index].SegmentList,r=t&&!isNaN(t.startNumber)?t.startNumber:1,i=Math.max(r-1,0);return e.numberOfSegments=i+n.SegmentURL.length,e}},r}Mt.__dashjs_factory_name="ListSegmentsGetter";var Lt=k.default.getClassFactory(Mt);function Dt(t){const e=(t=t||{}).timelineConverter;let n;function r(){if(!e||!e.hasOwnProperty("calcPeriodRelativeTimeFromMpdRelativeTime"))throw new Error(x.default.MISSING_CONFIG_ERROR)}function i(t,e){if(r(),!t)return null;const n=t.segments?t.segments.length:-1;let i;if(e<n&&(i=t.segments[e],i&&i.index===e))return i;for(let r=0;r<n;r++)if(i=t.segments[r],i&&i.index===e)return i;return null}return n={getSegmentByIndex:i,getSegmentByTime:function(t,e){r();const n=function(t,e){if(!t)return-1;const n=t.segments,r=n?n.length:null;let i,o,a,s,l,u=-1;if(n&&r>0)for(l=0;l<r;l++)if(o=n[l],a=o.presentationStartTime,s=o.duration,i=s/2,e+i>=a&&e-i<a+s){u=o.index;break}return u}(t,e);return i(t,n)},getMediaFinishedInformation:function(t){const e={numberOfSegments:0,mediaTimeOfLastSignaledSegment:NaN};return t&&t.segments?(e.numberOfSegments=t.segments.length,e):e}},n}Dt.__dashjs_factory_name="SegmentBaseGetter";var Nt=k.default.getClassFactory(Dt);function Bt(t){t=t||{};const e=this.context,n=t.dashConstants,r=t.type,i=t.segmentBaseController;let o,a;function s(t){return t?t.segments?a[n.SEGMENT_BASE]:a[t.segmentInfoType]:null}return o={initialize:function(r){a[n.SEGMENT_TIMELINE]=Pt(e).create(t,r),a[n.SEGMENT_TEMPLATE]=Ot(e).create(t,r),a[n.SEGMENT_LIST]=Lt(e).create(t,r),a[n.SEGMENT_BASE]=Nt(e).create(t,r)},updateInitData:function(t,e){return e?Promise.resolve():i.getSegmentBaseInitSegment({representation:t,mediaType:r})},updateSegmentData:function(t,e){return e?Promise.resolve():i.getSegmentList({mimeType:t.mimeType,representation:t,mediaType:r})},getSegmentByIndex:function(t,e,n){const r=s(t);return r?r.getSegmentByIndex(t,e,n):null},getSegmentByTime:function(t,e){const n=s(t);return n?n.getSegmentByTime(t,e):null},getMediaFinishedInformation:function(t){const e=s(t);return e?e.getMediaFinishedInformation(t):{numberOfSegments:0,mediaTimeOfLastSignaledSegment:NaN}}},a={},o}Bt.__dashjs_factory_name="SegmentsController";var jt=k.default.getClassFactory(Bt);function zt(){let t;return t={ntpToUTC:function(t){const e=new Date(Date.UTC(1900,0,1,0,0,0));return new Date(e.getTime()+t).getTime()}},t}zt.__dashjs_factory_name="TimeUtils";var Ft=k.default.getSingletonFactory(zt),Ut=class{constructor(t){this.newMediaInfo=t.newMediaInfo,this.previouslySelectedRepresentation=t.previouslySelectedRepresentation,this.newRepresentation=t.newRepresentation}};function qt(t){t=t||{};let e,n,r,i,o,a,s,l,u,c,d,f,h,p,m,g,v=this.context,y=(0,C.default)(v).getInstance(),b=t.abrController,_=t.adapter,w=t.boxParser,A=t.capabilities,E=t.dashMetrics,k=t.errHandler,O=t.fragmentModel,M=t.manifestModel,D=t.mediaController,N=t.mediaPlayerModel,B=t.mimeType,j=t.playbackController,z=t.segmentBlacklistController,F=t.settings,U=t.streamInfo,H=t.textController,V=t.timelineConverter,W=t.type;function Y(){return U.id}function K(){return W}function X(){l=[],r=null,n=0,m=!1,p=!1,c=!1,g=!1,ut()}function $(t){return!isNaN(t)&&!isNaN(U.duration)&&isFinite(U.duration)&&t>=U.start+U.duration}function Z(t){let n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(t.sender)if(j.getIsManifestUpdateInProgress())et();else if((!r.isText||H.isTextEnabled())&&e&&t.representationId&&!e.appendInitSegmentFromCache(t.representationId)){const t=d.getCurrentRepresentation();if(0===t.range)return void J();const e=i?i.getInitRequest(r,t):null;e?O.executeRequest(e):n&&(f.setInitSegmentRequired(!0),et())}}function J(t){let o=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(j.getIsManifestUpdateInProgress()||e.getIsPruningInProgress())return void et();let l=function(){let t;if(isNaN(n)||K()===x.default.TEXT&&!H.isTextEnabled())return null;if(i){const e=Rt();t=m?i.getSegmentRequestForTime(r,e,n):p?i.repeatSegmentRequest(r,e):i.getNextSegmentRequest(r,e)}return t}();l?(m=!1,p=!1,function(t){isNaN(t.startTime+t.duration)||(n=t.startTime+t.duration),t.delayLoadingTime=(new Date).getTime()+f.getTimeToLoadDelay(),f.setTimeToLoadDelay(0),function(t){let e=t.url;return t.range&&(e=e.concat("_",t.range)),z.contains(e)}(t)?(s.warn(`Fragment request url ${t.url} for stream id ${U.id} and media type ${W} is on the ignore list and will be skipped`),et()):(s.debug(`Next fragment request url for stream id ${U.id} and media type ${W} is ${t.url} with request range ${t.range}`),O.executeRequest(t))}(l)):function(t){const e=d.getCurrentRepresentation();try{if(F.get().streaming.gaps.enableSeekFix&&(m||0===j.getTime())){let o;if(a?a&&e.segmentInfoType===S.default.SEGMENT_TIMELINE&&(o=i.getValidTimeAheadOfTargetTime(n,r,e,F.get().streaming.gaps.threshold)):(o=i.getValidTimeAheadOfTargetTime(n,r,e,F.get().streaming.gaps.threshold),isNaN(o)&&n>=e.adaptation.period.mpd.mediaPresentationDuration-e.segmentDuration&&(o=n-.1)),!isNaN(o)&&o!==n)return void(j.isSeeking()||0===j.getTime()?(s.warn(`Adjusting playback time ${o} because of gap in the manifest. Seeking by ${o-n}`),j.seek(o,!1,!1)):(s.warn(`Adjusting buffering time ${o} because of gap in the manifest. Adjusting time by ${o-n}`),zt(o),t&&et()))}}catch(t){s.error(t)}tt()||t&&et()}(o)}function tt(){const t=d.getCurrentRepresentation(),r=i.isLastSegmentRequested(t,n);if(r){const t=i.getCurrentIndex();s.debug(`Segment requesting for stream ${U.id} has finished`),y.trigger(I.default.STREAM_REQUESTING_COMPLETED,{segmentIndex:t},{streamId:U.id,mediaType:W}),e.segmentRequestingCompleted(t),Pt()}return r}function et(){f.startScheduleTimer(j.getLowLatencyModeEnabled()?F.get().streaming.scheduling.lowLatencyTimeout:F.get().streaming.scheduling.defaultTimeout)}function nt(t){E.addBufferState(W,t.state,f.getBufferTarget()),t.state!==T.BUFFER_EMPTY||j.isSeeking()||(s.info("Buffer is empty! Stalling!"),E.pushPlayListTraceMetrics(new Date,It.REBUFFERING_REASON))}function it(t){O.syncExecutedRequestsWithBufferedRange(e.getBuffer().getAllBufferRanges(),U.duration),t.quotaExceeded&&t.from>j.getTime()&&zt(t.from),t.hasEnoughSpaceToAppend&&t.quotaExceeded&&f.startScheduleTimer()}function ot(t){if(!t||!t.lastRequestAppended||!t.lastRequestAppended.url)return;let e=t.lastRequestAppended.url;t.lastRequestAppended.range&&(e=e.concat("_",t.lastRequestAppended.range)),s.warn(`Blacklisting segment with url ${e}`),z.add(e)}function st(t){if(s.debug(`Appended bytes for ${t.mediaType} and stream id ${t.streamId}`),t.segmentType===L.HTTPRequest.INIT_SEGMENT_TYPE){const e=t.representationId;f.setLastInitializedRepresentationId(e),s.info("["+W+"] lastInitializedRepresentationId changed to "+e)}u&&u.enabled?gt(u.newRepresentation,u.oldRepresentation):g||f.startScheduleTimer(0)}function ut(){u={newRepresentation:null,oldRepresentation:null,enabled:!1}}function ct(t){return new Promise((n=>{if(!d)return Promise.resolve();let i=null;var o;i=t.newRepresentation?{selectedRepresentation:(o=t).newRepresentation,currentMediaInfo:o.newMediaInfo}:null!==r&&_.areMediaInfosEqual(r,t.newMediaInfo)?function(t){return{currentMediaInfo:t.newMediaInfo,selectedRepresentation:d.getCurrentRepresentation()}}(t):function(t){let e=NaN;return e=!F.get().streaming.abr.autoSwitchBitrate[t.newMediaInfo.type]&&t.previouslySelectedRepresentation?t.previouslySelectedRepresentation.bitrateInKbit:b.getInitialBitrateFor(W),{selectedRepresentation:b.getOptimalRepresentationForBitrate(t.newMediaInfo,e,!1),currentMediaInfo:t.newMediaInfo}}(t),dt(i.currentMediaInfo),y.trigger();const a=b.getPossibleVoRepresentations(r,!1);return d.updateData(a,r.isFragmented,i.selectedRepresentation.id).then((()=>{!function(){const t=d.getCurrentRepresentation();e.getIsBufferingCompleted()||e.updateBufferTimestampOffset(t)}(),n()})).catch((t=>{s.error(t),n()}))}))}function dt(t){_.areMediaInfosEqual(r,t)||y.trigger(R.default.NEW_TRACK_SELECTED,{value:t}),r=t,b.handleNewMediaInfo(r),y.trigger(I.default.MEDIAINFO_UPDATED,{mediaType:W,streamId:U.id,currentMediaInfo:r})}function ft(t){const n=t.newRepresentation,i=t.oldRepresentation;n&&i||s.warn("_handleDifferentSwitchTypes() is missing the target representations"),t.reason&&t.reason.forceReplace?function(t,n){O.abortRequests(),y.trigger(I.default.BUFFER_REPLACEMENT_STARTED,{mediaType:W,streamId:U.id},{mediaType:W,streamId:U.id}),f.setCheckPlaybackQuality(!1),e.prepareForForceReplacementQualitySwitch(t,n).then((()=>{ht()})).catch((()=>{ht()}))}(n,i):t&&t.reason&&t.reason.forceAbandon?function(t,n){e.prepareForAbandonQualitySwitch(t,n).then((()=>{pt()})).catch((()=>{pt()}))}(n,i):N.getFastSwitchEnabled()?function(t,n){const i=j.getTime();let o=1.5*(isNaN(t.fragmentDuration)?1:t.fragmentDuration);const a=O.getRequests({state:q.FRAGMENT_MODEL_EXECUTED,time:i+o,threshold:0})[0];if(a&&!r.isText){const r=e.getBufferLevel(),s=b.getAbandonmentStateFor(U.id,W);a.bandwidth<t.bandwidth&&r>=o&&s===T.ALLOW_LOAD?e.prepareForFastQualitySwitch(t,n).then((()=>{mt(i,o)})).catch((()=>{mt(i,o)})):gt(t,n)}else gt(t,n)}(n,i):gt(n,i),E.pushPlayListTraceMetrics(new Date,It.REPRESENTATION_SWITCH_STOP_REASON),E.createPlaylistTraceMetrics(n.id,1e3*j.getTime(),j.getPlaybackRate())}function ht(){Dt(),ut(),c=!1}function pt(){O.abortRequests(),p=!0,f.setCheckPlaybackQuality(!1),f.startScheduleTimer(),c=!1}function mt(t,e){O.abortRequests(),zt(t+e),f.setCheckPlaybackQuality(!1),f.startScheduleTimer(),c=!1}function gt(t,n){const r=O.getRequests({state:q.FRAGMENT_MODEL_LOADING});if(r&&r.length>0)return s.debug("Preparing for default quality switch: Waiting for ongoing segment request to be finished before applying switch."),u.newRepresentation=t,u.oldRepresentation=n,void(u.enabled=!0);e.prepareForDefaultQualitySwitch(t,n).then((()=>{vt()})).catch((()=>{vt()}))}function vt(){f.setCheckPlaybackQuality(!1),r.segmentAlignment||r.subSegmentAlignment?f.startScheduleTimer():Nt(),ut(),c=!1}function yt(t){s.info("onFragmentLoadingAbandoned request: "+t.request.url+" has been aborted"),j.isSeeking()||f.getSwitchTrack()||c||(s.info("onFragmentLoadingAbandoned request: "+t.request.url+" has to be downloaded again, origin is not seeking process or switch track call"),t.request&&t.request.isInitializationRequest()?f.setInitSegmentRequired(!0):zt(t.request.startTime+t.request.duration/2),f.startScheduleTimer(0))}function wt(t){s.info("OnFragmentLoadingCompleted for stream id "+U.id+" and media type "+W+" - Url:",t.request?t.request.url:"undefined",t.request.range?", Range:"+t.request.range:""),r.isText&&f.startScheduleTimer(0),t.error&&t.request.serviceLocation&&function(t){s.info("Fragment loading completed with an error"),t&&t.request&&t.request.type&&(t.request.type===L.HTTPRequest.INIT_SEGMENT_TYPE?Z({representationId:t.request.representation.id,sender:{}},!1):t.request.type===L.HTTPRequest.MEDIA_SEGMENT_TYPE&&(zt(t.request.startTime+t.request.duration/2),J({},!1)))}(t)}function Et(){zt(j.getTime()),kt().startScheduleTimer()}function xt(t){const n=t.currentTrackInfo;if(!n)return;const r=l.find((t=>t.index===n.index&&t.lang===n.lang));r&&ct(new Ut({newMediaInfo:r})).then((()=>{e.setIsBufferingCompleted(!1),zt(j.getTime()),f.setInitSegmentRequired(!0),f.startScheduleTimer()}))}function St(t){zt(t.quotaExceededTime),Pt()}function Ct(){return e?e.getBuffer():null}function kt(){return f}function Pt(){f&&f.clearScheduleTimer()}function Rt(){let t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:NaN;return isNaN(e)?t=d?d.getCurrentRepresentation():null:((0,_t.checkInteger)(e),t=d?d.getRepresentationById(e):null),t}function Ot(){return!!e&&e.getIsBufferingCompleted()}function Mt(t){if(!F.get().streaming.enableManifestTimescaleMismatchFix)return;const e=t.chunk,n=e.bytes,r=Rt(e.representation.id);r&&(r.timescale=w.getMediaTimescaleFromMoov(n))}function Lt(t){const e=t.chunk,n=e.bytes,r=Rt(e.representation.id);if(r){let e;if(F.get().streaming.parseInbandPrft&&t.request.type===L.HTTPRequest.MEDIA_SEGMENT_TYPE){e=e||w.parse(n);const t=function(t,e){const n=t.getBoxes("prft"),r=[];return n.forEach((t=>{r.push(function(t,e){let n="unknown";switch(t.flags){case 0:n=S.default.PRODUCER_REFERENCE_TIME_TYPE.ENCODER;break;case 16:n=S.default.PRODUCER_REFERENCE_TIME_TYPE.APPLICATION;break;case 24:n=S.default.PRODUCER_REFERENCE_TIME_TYPE.CAPTURED}let r=1e3*t.ntp_timestamp_sec+t.ntp_timestamp_frac/2**32*1e3;return r=Ft(v).getInstance().ntpToUTC(r),{type:n,ntpTimestamp:r,mediaTime:t.media_time/e}}(t,e))})),r}(e,r.timescale);t&&t.length&&y.trigger(R.default.INBAND_PRFT,{data:t},{streamId:U.id,mediaType:W})}const i=_.getEventsFor(r.mediaInfo,null,U),o=_.getEventsFor(r,r,U);if(i&&i.length>0||o&&o.length>0){const r=t.request;e=e||w.parse(n);const a=function(t,e,n,r){try{const i={},o=[],a=n.concat(r);for(let t=0,e=a.length;t<e;t++)i[a[t].schemeIdUri+"/"+a[t].value]=a[t];const s=t.getBoxes("emsg");if(!s||0===s.length)return o;const l=t.getBox("sidx"),u=!l||isNaN(l.earliest_presentation_time)||isNaN(l.timescale)?e&&!isNaN(e.mediaStartTime)?e.mediaStartTime:0:l.earliest_presentation_time/l.timescale,c=Math.max(u,0),f=d.getCurrentRepresentation();for(let t=0,e=s.length;t<e;t++){const e=_.getEvent(s[t],i,c,f);e&&o.push(e)}return o}catch(t){return[]}}(e,r,i,o);y.trigger(I.default.INBAND_EVENTS,{events:a},{streamId:U.id})}}}function Dt(){const t=j.getTime();F.get().streaming.buffer.flushBufferAtTrackSwitch&&j.seek(t+.001,!1,!0),zt(t),e.setSeekTarget(t),f.startScheduleTimer()}function Nt(){const t=j.getTime(),n=e.getContinuousBufferTimeForTargetTime(t);zt(isNaN(n)?t:n),f.startScheduleTimer()}function Bt(t){t&&!isNaN(t.time)&&(zt(t.time),e.setSeekTarget(t.time))}function zt(t){n=t,m=!0}return o={checkAndHandleCompletedBuffering:tt,clearScheduleTimer:Pt,createBufferSinks:function(t,n){const i=Ct();return i?Promise.resolve(i):e?e.createBufferSink(r,t,n):Promise.resolve(null)},dischargePreBuffer:function(){e.dischargePreBuffer()},finalisePlayList:function(t,e){E.pushPlayListTraceMetrics(t,e)},getAllMediaInfos:function(){return l},getBuffer:Ct,getBufferController:function(){return e},getBufferLevel:function(){return e?e.getBufferLevel():0},getFragmentModel:function(){return O},getMediaInfo:function(){return r},getMediaSource:function(){return e.getMediaSource()},getRepresentation:Rt,getRepresentationController:function(){return d},getScheduleController:kt,getStreamId:Y,getStreamInfo:function(){return U},getType:K,initialize:function(r,s,l){h=jt(v).create({events:I.default,eventBus:y,streamInfo:U,timelineConverter:V,dashConstants:S.default,segmentBaseController:t.segmentBaseController,type:W}),i=At(v).create({streamInfo:U,type:W,timelineConverter:V,dashMetrics:E,mediaPlayerModel:N,baseURLController:t.baseURLController,errHandler:k,segmentsController:h,settings:F,boxParser:w,events:I.default,eventBus:y,errors:Q,debug:(0,P.default)(v).getInstance(),dashConstants:S.default,constants:x.default,urlUtils:Tt(v).getInstance()}),a=U.manifestInfo.isDynamic,i.initialize(a),b.registerStreamType(W,o),d=bt(v).create({streamInfo:U,type:W,abrController:b,dashMetrics:E,playbackController:j,timelineConverter:V,dashConstants:S.default,events:I.default,eventBus:y,errors:Q,isDynamic:a,adapter:_,segmentsController:h}),e=function(t,e){let n=null;return t?(n=t!==x.default.TEXT||e?rt(v).create({abrController:b,capabilities:A,errHandler:k,fragmentModel:O,manifestModel:M,mediaController:D,mediaPlayerModel:N,playbackController:j,representationController:d,settings:F,streamInfo:U,textController:H,type:t}):at(v).create({errHandler:k,fragmentModel:O,mimeType:B,settings:F,streamInfo:U,textController:H,type:t}),n):(k.error(new G.default(Q.MEDIASOURCE_TYPE_UNSUPPORTED_CODE,Q.MEDIASOURCE_TYPE_UNSUPPORTED_MESSAGE+"not properly defined")),null)}(W,l),e&&e.initialize(r),f=lt(v).create({streamInfo:U,type:W,mimeType:B,adapter:_,dashMetrics:E,mediaPlayerModel:N,fragmentModel:O,abrController:b,playbackController:j,textController:H,mediaController:D,bufferController:e,representationController:d,settings:F}),f.initialize(s),n=0,m=!1,p=!1},isBufferingCompleted:Ot,prepareInnerPeriodPlaybackSeeking:function(t){return new Promise((n=>{if(e.hasBufferAtTime(t.seekTime))return e.pruneBuffer(),$(e.getContinuousBufferTimeForTargetTime(t.seekTime))&&e.setIsBufferingCompleted(!0),void n();Pt(),O.abortRequests(),e.prepareForPlaybackSeek().then((()=>{const n=e.getAllRangesWithSafetyFactor(t.seekTime);return e.clearBuffers(n)})).then((()=>{const r=e.getContinuousBufferTimeForTargetTime(t.seekTime);if($(r))e.setIsBufferingCompleted(!0),n();else{const i=isNaN(r)?t.seekTime:r;zt(i),e.setSeekTarget(i);const o=[];o.push(e.updateAppendWindow());const a=Rt();o.push(e.updateBufferTimestampOffset(a)),Promise.all(o).then((()=>{f.setInitSegmentRequired(!0),f.setCheckPlaybackQuality(!1),f.startScheduleTimer(),n()}))}})).catch((t=>{s.error(t)}))}))},prepareOuterPeriodPlaybackSeeking:function(){return new Promise(((t,n)=>{try{Pt(),O.abortRequests(),e.prepareForPlaybackSeek().then((()=>e.pruneAllSafely())).then((()=>{t()}))}catch(t){n(t)}}))},prepareQualityChange:function(t){t.newRepresentation&&(u&&u.enabled&&s.warn(`Canceling queued representation switch to ${u.newRepresentation.id} for ${W}`),t.isAdaptationSetSwitch?(s.debug(`Preparing quality switch to different AdaptationSet for type ${W}`),function(t){const e=t.newRepresentation;c=!0,Pt(),f.setSwitchTrack(!0);const n=e.mediaInfo;dt(n),ct(new Ut({newMediaInfo:n,newRepresentation:e})).then((()=>{ft(t)}))}(t)):(s.debug(`Preparing quality within the same AdaptationSet for type ${W}`),function(t){const e=t.newRepresentation;c=!0,Pt(),d.prepareQualityChange(e),ft(t)}(t)))},prepareTrackSwitch:function(t){let n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return new Promise((r=>{s.debug(`Preparing track switch for type ${W}`);const i=W===x.default.TEXT||n||F.get().streaming.trackSwitchMode[W]===x.default.TRACK_SWITCH_MODE_ALWAYS_REPLACE&&j.getTimeToStreamEnd(U)>F.get().streaming.buffer.stallThreshold;e.getIsBufferingCompleted()&&!i?function(t){return new Promise((n=>{const r=d.getCurrentRepresentation();e.prepareForNonReplacementTrackSwitch(r,t).then((()=>{y.trigger(I.default.BUFFERING_COMPLETED,{},{streamId:U.id,mediaType:W}),n()})).catch((()=>{y.trigger(I.default.BUFFERING_COMPLETED,{},{streamId:U.id,mediaType:W}),n()}))}))}(t).then((()=>{r()})):(f.setSwitchTrack(!0),i?function(t){return new Promise((n=>{y.trigger(I.default.BUFFER_REPLACEMENT_STARTED,{mediaType:W,streamId:U.id},{mediaType:W,streamId:U.id}),O.abortRequests();const r=Rt();e.prepareForReplacementTrackSwitch(r,t).then((()=>{Dt(),n()})).catch((()=>{Dt(),n()}))}))}(t).then((()=>{r()})):function(t){return new Promise((n=>{const r=()=>{const i=O.getRequests({state:q.FRAGMENT_MODEL_LOADING});if(i&&0!==i.length)y.once(R.default.FRAGMENT_LOADING_COMPLETED,r,o);else{const r=Rt();e.prepareForNonReplacementTrackSwitch(r,t).then((()=>{Nt(),n()})).catch((t=>{s.error(t),Nt(),n()}))}};r()}))}(t).then((()=>{r()})))}))},probeNextRequest:function(){const t=Rt();return i.getNextSegmentRequestIdempotent(r,t)},reset:function(t,n){i&&i.reset(),e&&(e.reset(t,n),e=null),f&&(f.reset(),f=null),d&&(d.reset(),d=null),h&&(h=null),b&&b.unRegisterStreamType(Y(),W),y.off(I.default.INIT_FRAGMENT_NEEDED,Z,o),y.off(I.default.MEDIA_FRAGMENT_NEEDED,J,o),y.off(I.default.INIT_FRAGMENT_LOADED,Mt,o),y.off(I.default.MEDIA_FRAGMENT_LOADED,Lt,o),y.off(I.default.BUFFER_LEVEL_STATE_CHANGED,nt,o),y.off(I.default.BUFFER_CLEARED,it,o),y.off(I.default.SEEK_TARGET,Bt,o),y.off(I.default.FRAGMENT_LOADING_ABANDONED,yt,o),y.off(I.default.FRAGMENT_LOADING_COMPLETED,wt,o),y.off(I.default.SET_FRAGMENTED_TEXT_AFTER_DISABLED,Et,o),y.off(I.default.SET_NON_FRAGMENTED_TEXT,xt,o),y.off(I.default.QUOTA_EXCEEDED,St,o),y.off(I.default.SOURCE_BUFFER_ERROR,ot,o),y.off(I.default.BYTES_APPENDED_END_FRAGMENT,st,o),X(),W=null,U=null},selectMediaInfo:ct,setExplicitBufferingTime:zt,setMediaInfoArray:function(t){l=t},setMediaSource:function(t){return e.setMediaSource(t,r)},setTrackSwitchInProgress:function(t){g=t},updateStreamInfo:function(t){return U=t,Ot()?Promise.resolve():e.updateAppendWindow()}},s=(0,P.default)(v).getInstance().getLogger(o),X(),y.on(I.default.INIT_FRAGMENT_NEEDED,Z,o),y.on(I.default.MEDIA_FRAGMENT_NEEDED,J,o),y.on(I.default.INIT_FRAGMENT_LOADED,Mt,o),y.on(I.default.MEDIA_FRAGMENT_LOADED,Lt,o),y.on(I.default.BUFFER_LEVEL_STATE_CHANGED,nt,o),y.on(I.default.BUFFER_CLEARED,it,o),y.on(I.default.SEEK_TARGET,Bt,o),y.on(I.default.FRAGMENT_LOADING_ABANDONED,yt,o),y.on(I.default.FRAGMENT_LOADING_COMPLETED,wt,o),y.on(I.default.QUOTA_EXCEEDED,St,o),y.on(I.default.SET_FRAGMENTED_TEXT_AFTER_DISABLED,Et,o),y.on(I.default.SET_NON_FRAGMENTED_TEXT,xt,o),y.on(I.default.SOURCE_BUFFER_ERROR,ot,o),y.on(I.default.BYTES_APPENDED_END_FRAGMENT,st,o),o}qt.__dashjs_factory_name="StreamProcessor";var Gt=k.default.getClassFactory(qt),Ht=class{constructor(){this.streamId=null,this.segmentType=null,this.quality=NaN,this.index=NaN,this.bytes=null,this.start=NaN,this.end=NaN,this.duration=NaN,this.representation=null,this.endFragment=null}},Vt=n(7263);function Qt(){let t,e;function n(){e&&(e.onloadend=e.onerror=e.onprogress=e.onload=null,e.abort(),e=null)}return t={load:function(t,r){if(e=null,e=new XMLHttpRequest,e.open(t.method,t.url,!0),t.responseType&&(e.responseType=t.responseType),t.headers)for(let n in t.headers){let r=t.headers[n];r&&e.setRequestHeader(n,r)}return e.withCredentials="include"===t.credentials,e.timeout=t.timeout,e.onload=function(){r.url=this.responseURL,r.status=this.status,r.statusText=this.statusText,r.headers=Vt.default.parseHttpHeaders(this.getAllResponseHeaders()),r.data=this.response},e.onloadend=t.customData.onloadend,e.onprogress=t.customData.onprogress,e.onabort=t.customData.onabort,e.ontimeout=t.customData.ontimeout,e.send(),t.customData.abort=n.bind(this),!0},abort:n,getXhr:function(){return e},reset:function(){n(),t=null},resetInitialSettings:function(){n()}},t}Qt.__dashjs_factory_name="XHRLoader";var Wt=k.default.getClassFactory(Qt);function Yt(){const t=this.context,e=(0,W.default)(t).getInstance();let n,r,i;function o(t,e,n){t.customData.reader.read().then(n).catch((function(){a(t)}))}function a(t){t.customData.onloadend&&t.customData.onloadend()}function s(){return"undefined"!=typeof performance&&"function"==typeof performance.now?performance.now():Date.now()}function l(){if(this.customData.abortController)this.customData.abortController.abort();else if(this.customData.reader)try{this.customData.reader.cancel(),this.onabort()}catch(t){}}function u(t,e){try{if((t=t.filter((n=>n.bytes>e/4/t.length))).length>1){let e=0;const n=(t[t.length-1].timestamp-t[0].timestamp)/t.length;return t.forEach(((r,i)=>{const o=t[i+1];if(o){const t=o.timestamp-r.timestamp;e+=t<n?t:0}})),e}return null}catch(t){return null}}function c(t,e){return 8*t/e}return i=(0,P.default)(t).getInstance().getLogger(n),n={abort:l,calculateDownloadedTime:u,load:function(t,n){const d=function(t){const e=new Headers;if(t.headers)for(let n in t.headers){let r=t.headers[n];r&&e.append(n,r)}return e}(t),f=function(t){let e;return"function"==typeof window.AbortController&&(e=new AbortController,t.customData.abortController=e,e.signal.onabort=t.customData.onabort),t.customData.abort=l.bind(t),e}(t),h=function(t,e,n){return new Request(t.url,{method:t.method,headers:e,credentials:t.credentials,signal:n?n.signal:void 0})}(t,d,f);fetch(h).then((a=>{!function(t,n,a){(function(t,e){t.status=e.status,t.statusText=e.statusText,t.url=e.url;const n={};for(const t of e.headers.keys())n[t]=e.headers.get(t);t.headers=n})(a,t),t.ok||n.customData.onloadend();let l=0,d=!1,f=new Uint8Array,h=0;n.customData.reader=t.body.getReader();let p=[],m=[],g=[],v=!0;const y=e.get().streaming.abr.throughput.lowLatencyDownloadTimeCalculationMode,b=t=>{let{value:e,done:_}=t;_?function(){if(f){const t=function(){let t=null;return y===x.default.LOW_LATENCY_DOWNLOAD_TIME_CALCULATION_MODE.MOOF_PARSING?t=function(){const t=function(t,e){try{let n,r;if(n=t.slice(0,-1),r=e.slice(0,-1),n.length!==r.length&&i.warn(`[FetchLoader] Moof and Mdat data arrays have different lengths. Moof: ${n.length}, Mdat: ${r.length}`),n.length<=1)return null;let o=[],a=0,s=0;for(let t=0;t<n.length;t++)if(n[t]&&r[t]){let e=r[t].timestamp-n[t].timestamp;if(e>1){const n=c(r[t].bytes,e);o.push(n),s=0}else{0===s&&(s=n[t].timestamp,a=0);let e=r[t].timestamp-s;if(e>1){a+=r[t].bytes;const n=c(a,e);o.push(n),s=0}else a+=r[t].bytes}}return o.length>0?o.reduce(((t,e)=>t+e),0)/o.length:null}catch(t){return null}}(m,g);return t?8*l/t:null}():y===x.default.LOW_LATENCY_DOWNLOAD_TIME_CALCULATION_MODE.DOWNLOADED_DATA&&(t=u(p,l)),t}();n.customData.onprogress({loaded:l,total:l,lengthComputable:!0,time:t}),a.data=f.buffer}n.customData.onloadend()}():(e&&e.length>0&&function(t){f=function(t,e){if(0===t.length)return e;const n=new Uint8Array(t.length+e.length);return n.set(t),n.set(e,t.length),n}(f,t),l+=t.length,p.push({timestamp:s(),bytes:t.length}),y===x.default.LOW_LATENCY_DOWNLOAD_TIME_CALCULATION_MODE.MOOF_PARSING&&v&&r.findLastTopIsoBoxCompleted(["moof"],f,h).found&&(v=!1,m.push({timestamp:s()}));const e=r.findLastTopIsoBoxCompleted(["moov","mdat"],f,h);e.found?function(t){const e=function(t){let e;return t===f.length?(e=f,f=new Uint8Array):(e=new Uint8Array(f.subarray(0,t)),f=f.subarray(t)),e}(t.startOffsetOfLastFoundTargetBox+t.sizeOfLastFoundTargetBox);y!==x.default.LOW_LATENCY_DOWNLOAD_TIME_CALCULATION_MODE.MOOF_PARSING||v||(v=!0,g.push({timestamp:s(),bytes:e.length})),n.customData.onprogress({data:e.buffer,lengthComputable:!1,noTrace:!0}),h=0}(e):function(t){h=t.startOffsetOfLastCompletedBox+t.sizeOfLastCompletedBox,d||(n.customData.onprogress({lengthComputable:!1,noTrace:!0}),d=!0)}(e)}(e),o(n,0,b))};o(n,0,b)}(a,t,n)})).catch((()=>{a(t)}))},reset:function(){},setConfig:function(t){r=t.boxParser}},n}Yt.__dashjs_factory_name="FetchLoader";var Kt=k.default.getClassFactory(Yt),Xt=n(913),$t=class{constructor(){this.period=null,this.index=-1,this.type=null}};class Zt{constructor(t,e,n,r){this.url=t||"",this.serviceLocation=e||t||"",this.dvbPriority=n||1,this.dvbWeight=r||1,this.availabilityTimeOffset=0,this.availabilityTimeComplete=!0,this.queryParams={}}}Zt.DEFAULT_DVB_PRIORITY=1,Zt.DEFAULT_DVB_WEIGHT=1;var Jt=Zt,te=class{constructor(){this.schemeIdUri=null,this.value=null,this.id=null}init(t){t&&(this.schemeIdUri=t.schemeIdUri?t.schemeIdUri:null,this.value=t.value?t.value.toString():null,this.id=t.id?t.id:null,t[S.default.DVB_URL]&&(this.dvbUrl=t[S.default.DVB_URL]),t[S.default.DVB_MIMETYPE]&&(this.dvbMimeType=t[S.default.DVB_MIMETYPE]),t[S.default.DVB_FONTFAMILY]&&(this.dvbFontFamily=t[S.default.DVB_FONTFAMILY]))}inArray(t){return!!t&&t.some((t=>this.schemeIdUri===t.schemeIdUri&&(this.value?this.value.toString().match(t.value):"".match(t.value))))}},ee=class extends te{constructor(){super(),this.version=null,this.sessionID=null,this.contentID=null,this.mode=null,this.keys=null,this.includeInRequests=null}init(t){super.init(t),t&&(this.version=t.version,this.sessionID=t.sessionID,this.contentID=t.contentID,this.mode=t.mode??"query",this.keys=t.keys?t.keys.split(" "):null,this.includeInRequests=t.includeInRequests?t.includeInRequests.split(" "):["segment"],this.schemeIdUri=t.schemeIdUri)}},ne=class{constructor(){this.adaptationSets=null,this.adaptationSetsArray=[],this.cmcdParameters=null,this.serviceLocations=null,this.serviceLocationsArray=[]}},re=class extends te{constructor(){super(),this.ref=null,this.refId=null,this.robustness=null,this.keyId=null,this.cencDefaultKid=null,this.pssh=null,this.pro=null,this.laUrl=null}init(t){super.init(t),t&&(this.ref=t.hasOwnProperty(S.default.REF)?t[S.default.REF]:null,this.refId=t.hasOwnProperty(S.default.REF_ID)?t[S.default.REF_ID]:null,this.robustness=t.hasOwnProperty(S.default.ROBUSTNESS)?t[S.default.ROBUSTNESS]:null,this.cencDefaultKid=t.hasOwnProperty(S.default.CENC_DEFAULT_KID)?t[S.default.CENC_DEFAULT_KID]:null,this.pssh=t.hasOwnProperty(S.default.PSSH)?t[S.default.PSSH]:null,this.pro=t.hasOwnProperty(S.default.PRO)?t[S.default.PRO]:null,this.laUrl=t.hasOwnProperty(S.default.LA_URL)?t[S.default.LA_URL]:t.hasOwnProperty(S.default.LA_URL_LOWER_CASE)?t[S.default.LA_URL_LOWER_CASE]:null)}mergeAttributesFromReference(t){["schemeIdUri","value","id","robustness","cencDefaultKid","pro","pssh","laUrl"].forEach((e=>{null===this[e]&&(this[e]=t[e])}))}},ie=class{constructor(){this.defaultServiceLocation=null,this.defaultServiceLocationArray=[],this.queryBeforeStart=!1,this.serverUrl=null,this.clientRequirement=!0}},oe=class{constructor(){this.type="",this.duration=NaN,this.presentationTime=NaN,this.id=NaN,this.messageData="",this.eventStream=null,this.presentationTimeDelta=NaN,this.parsedMessageData=null}},ae=class{constructor(){this.adaptionSet=null,this.representation=null,this.period=null,this.timescale=1,this.value="",this.schemeIdUri="",this.presentationTimeOffset=0}},se=class{constructor(){this.availabilityEndTime=Number.POSITIVE_INFINITY,this.availabilityStartTime=null,this.manifest=null,this.maxSegmentDuration=Number.POSITIVE_INFINITY,this.mediaPresentationDuration=NaN,this.minimumUpdatePeriod=NaN,this.publishTime=null,this.suggestedPresentationDelay=0,this.timeShiftBufferDepth=Number.POSITIVE_INFINITY}},le=class{constructor(t,e){this.url=t||"",this.serviceLocation=e||null,this.queryParams={}}},ue=n(7393),ce=class{constructor(t,e,n){this.url=t||"",this.serviceLocation=e||null,this.ttl=n||NaN,this.queryParams={}}};class de{constructor(){this.id=null,this.index=-1,this.duration=NaN,this.start=NaN,this.mpd=null,this.nextPeriodId=null,this.isEncrypted=!1}}de.DEFAULT_ID="defaultId";var fe=de,he=class{constructor(){this.id=null,this.inband=!1,this.type="encoder",this.applicationScheme=null,this.wallClockTime=null,this.presentationTime=NaN,this.UTCTiming=null}},pe=class{constructor(){this.absoluteIndex=NaN,this.adaptation=null,this.availabilityTimeComplete=!0,this.availabilityTimeOffset=0,this.bandwidth=NaN,this.bitrateInKbit=NaN,this.bitsPerPixel=NaN,this.codecFamily=null,this.codecPrivateData=null,this.codecs=null,this.essentialProperties=[],this.fragmentDuration=null,this.frameRate=null,this.height=NaN,this.id=null,this.indexRange=null,this.initialization=null,this.maxPlayoutRate=NaN,this.mediaFinishedInformation={numberOfSegments:0,mediaTimeOfLastSignaledSegment:NaN},this.mediaInfo=null,this.mimeType=null,this.mseTimeOffset=NaN,this.pixelsPerSecond=NaN,this.presentationTimeOffset=0,this.qualityRanking=NaN,this.range=null,this.scanType=null,this.segments=null,this.segmentDuration=NaN,this.segmentInfoType=null,this.supplementalProperties=[],this.startNumber=1,this.timescale=1,this.width=NaN}hasInitialization(){return null!==this.initialization||null!==this.range}hasSegments(){return this.segmentInfoType!==S.default.BASE_URL&&this.segmentInfoType!==S.default.SEGMENT_BASE&&!this.indexRange}},me=n(5717);function ge(){let t,e,n,r;const i=this.context,o=Tt(i).getInstance(),a=Number.isInteger||function(t){return"number"==typeof t&&isFinite(t)&&Math.floor(t)===t};function s(t,e){if(!t)throw new Error("adaptation is not defined");if(!e)throw new Error("type is not defined");if(t.Representation&&t.Representation.length){const n=w(t.Representation[0]);if(n&&n.some((t=>x.default.THUMBNAILS_SCHEME_ID_URIS.indexOf(t.schemeIdUri)>=0)))return e===x.default.IMAGE}if(t.ContentComponent&&t.ContentComponent.length>0){if(t.ContentComponent.length>1)return e===x.default.MUXED;if(t.ContentComponent[0].contentType===e)return!0}const n=e===x.default.TEXT?new RegExp("(ttml|vtt|wvtt|stpp)"):new RegExp(e);if(t.Representation&&t.Representation.length){const e=t.Representation[0].codecs;if(n.test(e))return!0}if(t.hasOwnProperty(S.default.MIME_TYPE))return n.test(t.mimeType);if(t.Representation){let e;for(let r=0;r<t.Representation.length;r++)if(e=t.Representation[r],e.hasOwnProperty(S.default.MIME_TYPE))return n.test(e.mimeType)}return!1}function l(t){if(!t)throw new Error("adaptation is not defined");if(t.hasOwnProperty(S.default.SEGMENT_TEMPLATE)||t.hasOwnProperty(S.default.SEGMENT_TIMELINE)||t.hasOwnProperty(S.default.SEGMENT_LIST)||t.hasOwnProperty(S.default.SEGMENT_BASE))return!0;if(t.Representation&&t.Representation.length>0){const e=t.Representation[0];if(e.hasOwnProperty(S.default.SEGMENT_TEMPLATE)||e.hasOwnProperty(S.default.SEGMENT_TIMELINE)||e.hasOwnProperty(S.default.SEGMENT_LIST)||e.hasOwnProperty(S.default.SEGMENT_BASE))return!0}return!1}function u(t){return s(t,x.default.VIDEO)}function c(t){return s(t,x.default.TEXT)}function d(t){return s(t,x.default.IMAGE)}function f(t){return t&&t.Representation&&t.Representation.sort(((t,e)=>t.bandwidth-e.bandwidth)),t}function h(t,e){return t&&t.Period&&a(e)&&t.Period[e]?t.Period[e].AdaptationSet:[]}function p(t){return t&&t.Period?t.Period:[]}function m(t){const e=g(t);return e&&e.length>0}function g(t){let e=[];if(!t)return e;const n=v(t);return e=e.concat(n),t.hasOwnProperty(S.default.ADAPTATION_SET)&&t[S.default.ADAPTATION_SET].length>0&&t[S.default.ADAPTATION_SET].forEach((t=>{const n=v(t);e=e.concat(n)})),e}function v(t){return t&&t.hasOwnProperty(S.default.CONTENT_PROTECTION)&&0!==t.ContentProtection.length?t[S.default.CONTENT_PROTECTION].map((t=>{const e=new re;return e.init(t),e})):[]}function y(t){let e=!1;return t&&t.hasOwnProperty("type")&&(e=t.type===S.default.DYNAMIC),e}function b(t,e){return e&&e.hasOwnProperty(t)&&e[t].length?e[t].map((t=>{const e=new te;return e.init(t),e})):[]}function _(t,e){if(!e)return[];let n=function(t,e){if(!e||!e.length)return[];let n=e[0][t]||[];return 0===n.length?[]:1===e.length?n:n.filter((n=>e.slice(1).every((e=>e.hasOwnProperty(t)&&e[t].some((t=>t.schemeIdUri===n.schemeIdUri&&t.value===n.value))))))}(t,e[S.default.REPRESENTATION]);return e.hasOwnProperty(t)&&e[t].length&&n.push(...e[t]),n.map((t=>{const e=new te;return e.init(t),e}))}function w(t){return b(S.default.ESSENTIAL_PROPERTY,t)}function A(t){return b(S.default.SUPPLEMENTAL_PROPERTY,t)}function E(t){if(!t||!t.S)return NaN;let e=t.S[0],n=t.S[1];return e.hasOwnProperty("d")?e.d:n.t-e.t}function T(t){const e=t.presentationTimeOffset;return t.adaptation.period.start-e}function C(t,e){if(!t)throw new Error("Period cannot be null or undefined");let n=fe.DEFAULT_ID+"_"+e;return t.hasOwnProperty(S.default.ID)&&t.id.toString().length>0&&"__proto__"!==t.id&&(n=t.id.toString()),n}function I(t,e,n){const r=[];let i;if(!t)return r;for(i=0;i<t.length;i++){const o=new ae;if(o.timescale=1,o.representation=e,!t[i].hasOwnProperty(x.default.SCHEME_ID_URI))throw new Error("Invalid EventStream. SchemeIdUri has to be set");o.schemeIdUri=t[i].schemeIdUri,t[i].hasOwnProperty(S.default.TIMESCALE)&&(o.timescale=t[i].timescale),t[i].hasOwnProperty(S.default.VALUE)&&(o.value=t[i].value),r.push(o),o.period=n}return r}function k(t){const e=[],n=t.BaseURL||[t.baseUri];let r=!1;return n.some((n=>{if(n){const i=new Jt;let a=n.__text||n;return o.isRelative(a)&&(r=!0,t.baseUri&&(a=o.resolve(a,t.baseUri))),i.url=a,n.hasOwnProperty(S.default.SERVICE_LOCATION)&&n.serviceLocation.length?i.serviceLocation=n.serviceLocation:i.serviceLocation=a,n.hasOwnProperty(S.default.DVB_PRIORITY)&&(i.dvbPriority=n[S.default.DVB_PRIORITY]),n.hasOwnProperty(S.default.DVB_WEIGHT)&&(i.dvbWeight=n[S.default.DVB_WEIGHT]),n.hasOwnProperty(S.default.AVAILABILITY_TIME_OFFSET)&&(i.availabilityTimeOffset=n[S.default.AVAILABILITY_TIME_OFFSET]),n.hasOwnProperty(S.default.AVAILABILITY_TIME_COMPLETE)&&(i.availabilityTimeComplete="false"!==n[S.default.AVAILABILITY_TIME_COMPLETE]),e.push(i),r}})),e}function R(t){const e=new ie;return e.serverUrl=t.__text,t.hasOwnProperty(S.default.DEFAULT_SERVICE_LOCATION)&&(e.defaultServiceLocation=t[S.default.DEFAULT_SERVICE_LOCATION],e.defaultServiceLocationArray=e.defaultServiceLocation.split(" ")),t.hasOwnProperty(S.default.QUERY_BEFORE_START)&&(e.queryBeforeStart="true"===t[S.default.QUERY_BEFORE_START].toLowerCase()),t.hasOwnProperty(S.default.CLIENT_REQUIREMENT)&&(e.clientRequirement="false"!==t[S.default.CLIENT_REQUIREMENT].toLowerCase()),e}function O(t){const e=new ne;return t.hasOwnProperty(S.default.CMCD_PARAMETERS)&&t[S.default.CMCD_PARAMETERS].schemeIdUri===x.default.CTA_5004_2023_SCHEME&&(e.cmcdParameters=new ee,e.cmcdParameters.init(t[S.default.CMCD_PARAMETERS])),t.hasOwnProperty(S.default.SERVICE_LOCATIONS)&&""!==t[S.default.SERVICE_LOCATIONS]&&(e.serviceLocations=t[S.default.SERVICE_LOCATIONS],e.serviceLocationsArray=e.serviceLocations.toString().split(" ")),t.hasOwnProperty(S.default.ADAPTATION_SETS)&&""!==t[S.default.ADAPTATION_SETS]&&(e.adaptationSets=t[S.default.ADAPTATION_SETS],e.adaptationSetsArray=e.adaptationSets.toString().split(" ")),e}return t={getAccessibilityForAdaptation:function(t){return t&&t.hasOwnProperty(S.default.ACCESSIBILITY)&&t[S.default.ACCESSIBILITY].length?t[S.default.ACCESSIBILITY].map((t=>{const e=new te;return e.init(t),e})):[]},getAdaptationForId:function(t,e,n){const r=h(e,n);let i,o;for(i=0,o=r.length;i<o;i++)if(r[i].hasOwnProperty(S.default.ID)&&r[i].id===t)return r[i];return null},getAdaptationForIndex:function(t,e,n){const r=h(e,n);return r.length>0&&a(t)?r[t]:null},getAdaptationsForPeriod:function(t){const n=t&&a(t.index)?t.mpd.manifest.Period[t.index]:null,r=[];let i,o,l;if(n&&n.AdaptationSet)for(l=0;l<n.AdaptationSet.length;l++)o=n.AdaptationSet[l],i=new $t,o.hasOwnProperty(S.default.ID)&&(i.id=o.id),i.index=l,i.period=t,s(o,x.default.MUXED)?i.type=x.default.MUXED:s(o,x.default.AUDIO)?i.type=x.default.AUDIO:u(o)?i.type=x.default.VIDEO:c(o)?i.type=x.default.TEXT:d(o)?i.type=x.default.IMAGE:e.warn("Unknown Adaptation stream type"),r.push(i);return r},getAdaptationsForType:function(t,e,n){const r=h(t,e);let i,o;const a=[];for(i=0,o=r.length;i<o;i++)s(r[i],n)&&a.push(f(r[i]));return a},getAudioChannelConfigurationForAdaptation:function(t){return t&&t.hasOwnProperty(S.default.AUDIO_CHANNEL_CONFIGURATION)&&t[S.default.AUDIO_CHANNEL_CONFIGURATION].length?t[S.default.AUDIO_CHANNEL_CONFIGURATION].map((t=>{const e=new te;return e.init(t),e})):[]},getAudioChannelConfigurationForRepresentation:function(t){return t&&t.hasOwnProperty(S.default.AUDIO_CHANNEL_CONFIGURATION)&&t[S.default.AUDIO_CHANNEL_CONFIGURATION].length?t[S.default.AUDIO_CHANNEL_CONFIGURATION].map((t=>{const e=new te;return e.init(t),e})):[]},getAvailabilityStartTime:function(t){return t&&t.hasOwnProperty(S.default.AVAILABILITY_START_TIME)&&null!==t.availabilityStartTime?t.availabilityStartTime.getTime():null},getBandwidth:function(t){return t&&t.bandwidth?t.bandwidth:NaN},getBaseURLsFromElement:k,getBitrateListForAdaptation:function(t){const e=f(t);return(e&&e.Representation?e.Representation:[]).map((t=>({bandwidth:t.bandwidth,width:t.width||0,height:t.height||0,scanType:t.scanType||null,id:t.id||null})))},getCodec:function(t,e,n){let r=null;if(t&&t.Representation&&t.Representation.length>0){const i=a(e)&&e>=0&&e<t.Representation.length?t.Representation[e]:t.Representation[0];i&&(r=i.mimeType+';codecs="'+i.codecs+'"',n&&void 0!==i.width&&(r+=';width="'+i.width+'";height="'+i.height+'"'))}return r&&(r=r.replace(/\sprofiles=[^;]*/g,"")),r},getCombinedEssentialPropertiesForAdaptationSet:function(t){return _(S.default.ESSENTIAL_PROPERTY,t)},getCombinedSupplementalPropertiesForAdaptationSet:function(t){return _(S.default.SUPPLEMENTAL_PROPERTY,t)},getContentProtectionByAdaptation:function(t){return v(t)},getContentProtectionByManifest:function(t){let e=[];if(!t)return e;const n=v(t);return e=e.concat(n),t.hasOwnProperty(S.default.PERIOD)&&t[S.default.PERIOD].length>0&&t[S.default.PERIOD].forEach((t=>{const n=g(t);e=e.concat(n)})),e},getContentProtectionByPeriod:g,getContentSteering:function(t){if(t&&t.hasOwnProperty(S.default.CONTENT_STEERING))return R(t[S.default.CONTENT_STEERING][0])},getDuration:function(t){let e;return e=t&&t.hasOwnProperty(S.default.MEDIA_PRESENTATION_DURATION)?t.mediaPresentationDuration:t&&"dynamic"==t.type?Number.POSITIVE_INFINITY:Number.MAX_SAFE_INTEGER||Number.MAX_VALUE,e},getEssentialPropertiesForAdaptationSet:function(t){return b(S.default.ESSENTIAL_PROPERTY,t)},getEssentialPropertiesForRepresentation:w,getEventStreamForAdaptationSet:function(t,e,n){let r,i,o;return t&&t.Period&&e&&e.period&&a(e.period.index)&&(i=t.Period[e.period.index],i&&i.AdaptationSet&&a(e.index)&&(o=i.AdaptationSet[e.index],o&&(r=o.InbandEventStream))),I(r,null,n)},getEventStreamForRepresentation:function(t,e,n){let r,i,o,s;return t&&t.Period&&e&&e.adaptation&&e.adaptation.period&&a(e.adaptation.period.index)&&(i=t.Period[e.adaptation.period.index],i&&i.AdaptationSet&&a(e.adaptation.index)&&(o=i.AdaptationSet[e.adaptation.index],o&&o.Representation&&a(e.index)&&(s=o.Representation[e.index],s&&(r=s.InbandEventStream)))),I(r,e,n)},getEventsForPeriod:function(t){const e=t&&t.mpd&&t.mpd.manifest?t.mpd.manifest:null,n=e?e.Period:null,i=n&&t&&a(t.index)?n[t.index].EventStream:null,o=[];let s,l;if(i)for(s=0;s<i.length;s++){const e=new ae;if(e.period=t,e.timescale=1,!i[s].hasOwnProperty(x.default.SCHEME_ID_URI))throw new Error("Invalid EventStream. SchemeIdUri has to be set");for(e.schemeIdUri=i[s][x.default.SCHEME_ID_URI],i[s].hasOwnProperty(S.default.TIMESCALE)&&(e.timescale=i[s][S.default.TIMESCALE]),i[s].hasOwnProperty(S.default.VALUE)&&(e.value=i[s][S.default.VALUE]),i[s].hasOwnProperty(S.default.PRESENTATION_TIME_OFFSET)&&(e.presentationTimeOffset=i[s][S.default.PRESENTATION_TIME_OFFSET]),l=0;i[s].Event&&l<i[s].Event.length;l++){const n=i[s].Event[l],a=new oe;a.presentationTime=0,a.eventStream=e,n.hasOwnProperty(S.default.PRESENTATION_TIME)&&(a.presentationTime=n.presentationTime);const u=e.presentationTimeOffset?e.presentationTimeOffset/e.timescale:0;a.calculatedPresentationTime=a.presentationTime/e.timescale+t.start-u,n.hasOwnProperty(S.default.DURATION)&&(a.duration=n.duration/e.timescale),n.hasOwnProperty(S.default.ID)?a.id=parseInt(n.id):a.id=null,n.Signal&&n.Signal.Binary?a.messageData=r.decodeArray(n.Signal.Binary.toString()):a.messageData=n.messageData||n.__cdata||n.__text,o.push(a)}}return o},getId:function(t){return t&&t[S.default.ID]||null},getIndexForAdaptation:function(t,e,n){if(!t)return-1;const r=h(e,n);for(let e=0;e<r.length;e++)if((0,ue.default)(i).getInstance().areEqual(r[e],t))return e;return-1},getIsDynamic:y,getIsFragmented:l,getIsText:c,getIsTypeOf:s,getLabelsForAdaptation:function(t){if(!t||!t.Label)return[];const e=[];for(let n=0;n<t.Label.length;n++)e.push({lang:t.Label[n].lang,text:t.Label[n].__text||t.Label[n]});return e},getLanguageForAdaptation:function(t){let e="";return t&&t.hasOwnProperty(S.default.LANG)&&(e=t.lang),e},getLocation:function(t){return t&&t.hasOwnProperty(S.default.LOCATION)?t[S.default.LOCATION].map((t=>{const e=t.__text||t,n=t.hasOwnProperty(S.default.SERVICE_LOCATION)?t[S.default.SERVICE_LOCATION]:null;return new le(e,n)})):[]},getManifestUpdatePeriod:function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=NaN;return t&&t.hasOwnProperty(S.default.MINIMUM_UPDATE_PERIOD)&&(n=t.minimumUpdatePeriod),isNaN(n)?n:Math.max(n-e,1)},getMimeType:function(t){return t&&t.Representation&&t.Representation.length>0?t.Representation[0].mimeType:null},getMpd:function(t){const e=new se;return t&&(e.manifest=t,t.hasOwnProperty(S.default.AVAILABILITY_START_TIME)?e.availabilityStartTime=new Date(t.availabilityStartTime.getTime()):t.loadedTime&&(e.availabilityStartTime=new Date(t.loadedTime.getTime())),t.hasOwnProperty(S.default.AVAILABILITY_END_TIME)&&(e.availabilityEndTime=new Date(t.availabilityEndTime.getTime())),t.hasOwnProperty(S.default.MINIMUM_UPDATE_PERIOD)&&(e.minimumUpdatePeriod=t.minimumUpdatePeriod),t.hasOwnProperty(S.default.MEDIA_PRESENTATION_DURATION)&&(e.mediaPresentationDuration=t.mediaPresentationDuration),t.hasOwnProperty(S.default.SUGGESTED_PRESENTATION_DELAY)&&(e.suggestedPresentationDelay=t.suggestedPresentationDelay),t.hasOwnProperty(S.default.TIMESHIFT_BUFFER_DEPTH)&&(e.timeShiftBufferDepth=t.timeShiftBufferDepth),t.hasOwnProperty(S.default.MAX_SEGMENT_DURATION)&&(e.maxSegmentDuration=t.maxSegmentDuration),t.hasOwnProperty(S.default.PUBLISH_TIME)&&(e.publishTime=new Date(t.publishTime))),e},getPatchLocation:function(t){return t&&t.hasOwnProperty(S.default.PATCH_LOCATION)?t[S.default.PATCH_LOCATION].map((t=>{const e=t.__text||t,n=t.hasOwnProperty(S.default.SERVICE_LOCATION)?t[S.default.SERVICE_LOCATION]:null;let r=t.hasOwnProperty(S.default.TTL)?1e3*parseFloat(t[S.default.TTL]):NaN;return new ce(e,n,r)})):[]},getProducerReferenceTimesForAdaptation:function(t){const e=t&&t.hasOwnProperty(S.default.PRODUCER_REFERENCE_TIME)?t[S.default.PRODUCER_REFERENCE_TIME]:[];(t&&t.hasOwnProperty(S.default.REPRESENTATION)?t[S.default.REPRESENTATION]:[]).forEach((t=>{t.hasOwnProperty(S.default.PRODUCER_REFERENCE_TIME)&&e.push(...t[S.default.PRODUCER_REFERENCE_TIME])}));const n=[];return e.forEach((t=>{const e=new he;t.hasOwnProperty(S.default.ID)&&(e[S.default.ID]=parseInt(t[S.default.ID]),t.hasOwnProperty(S.default.WALL_CLOCK_TIME)&&(e[S.default.WALL_CLOCK_TIME]=t[S.default.WALL_CLOCK_TIME],t.hasOwnProperty(S.default.PRESENTATION_TIME)&&(e[S.default.PRESENTATION_TIME]=t[S.default.PRESENTATION_TIME],t.hasOwnProperty(S.default.INBAND)&&(e[S.default.INBAND]="false"!==t[S.default.INBAND]),t.hasOwnProperty(S.default.TYPE)&&(e[S.default.TYPE]=t[S.default.TYPE]),n.push(e))))})),n},getPublishTime:function(t){return t&&t.hasOwnProperty(S.default.PUBLISH_TIME)?new Date(t[S.default.PUBLISH_TIME]):null},getRealPeriodForIndex:function(t,e){const n=p(e);return n.length>0&&a(t)?n[t]:null},getRealPeriods:p,getRegularPeriods:function(t){const r=!!t&&y(t.manifest),i=[];let o,a,s=null,l=null,u=null,c=null;for(a=0,o=t&&t.manifest&&t.manifest.Period?t.manifest.Period.length:0;a<o;a++)l=t.manifest.Period[a],l.hasOwnProperty(S.default.START)?(c=new fe,c.start=l.start):null!==s&&s.hasOwnProperty(S.default.DURATION)&&null!==u?(c=new fe,c.start=parseFloat((u.start+u.duration).toFixed(5))):0!==a||r||(c=new fe,c.start=0),null!==u&&isNaN(u.duration)&&(null!==c?u.duration=parseFloat((c.start-u.start).toFixed(5)):e.warn("First period duration could not be calculated because lack of start and duration period properties. This will cause timing issues during playback")),null!==c&&(c.id=C(l,a),c.index=a,c.mpd=t,c.isEncrypted=m(l),l.hasOwnProperty(S.default.DURATION)&&(c.duration=l.duration),u&&(u.nextPeriodId=c.id),i.push(c),s=l,u=c),l=null,c=null;return 0===i.length||null!==u&&isNaN(u.duration)&&(u.duration=parseFloat((function(t){!function(){if(!n||!n.hasOwnProperty("error"))throw new Error(x.default.MISSING_CONFIG_ERROR)}();const e=y(t.mpd.manifest);let r;return t.mpd.manifest.mediaPresentationDuration?r=t.mpd.manifest.mediaPresentationDuration:t.duration?r=t.duration:e?r=Number.POSITIVE_INFINITY:n.error(new G.default(Q.MANIFEST_ERROR_ID_PARSE_CODE,"Must have @mediaPresentationDuration on MPD or an explicit @duration on the last period.",t)),r}(u)-u.start).toFixed(5))),i},getRepresentationCount:function(t){return t&&t.Representation?t.Representation.length:0},getRepresentationFor:function(t,e){return e&&e.Representation&&e.Representation.length>0&&a(t)?e.Representation[t]:null},getRepresentationSortFunction:function(){return(t,e)=>t.bandwidth-e.bandwidth},getRepresentationsForAdaptation:function(t,e){const n=[],r=function(t){if(t&&t.period&&a(t.period.index)){const e=t.period.mpd.manifest.Period[t.period.index];if(e&&e.AdaptationSet&&a(t.index))return f(e.AdaptationSet[t.index])}}(t);let i,o;if(r&&r.Representation){if(t&&t.period&&a(t.period.index)){const e=k(t.period.mpd.manifest);e&&(o=e[0])}for(let a=0,s=r.Representation.length;a<s;++a){const s=r.Representation[a],u=new pe;if(u.index=a,u.adaptation=t,u.mediaInfo=e,s.hasOwnProperty(S.default.ID)&&(u.id=s.id),s.hasOwnProperty(S.default.CODECS)&&(u.codecs=s.codecs,u.codecFamily=Vt.default.getCodecFamily(u.codecs)),s.hasOwnProperty(S.default.MIME_TYPE)&&(u.mimeType=s[S.default.MIME_TYPE]),s.hasOwnProperty(S.default.CODEC_PRIVATE_DATA)&&(u.codecPrivateData=s.codecPrivateData),s.hasOwnProperty(S.default.BANDWITH)&&(u.bandwidth=s.bandwidth,u.bitrateInKbit=s.bandwidth/1e3),s.hasOwnProperty(S.default.WIDTH)&&(u.width=s.width),s.hasOwnProperty(S.default.HEIGHT)&&(u.height=s.height),s.hasOwnProperty(S.default.SCAN_TYPE)&&(u.scanType=s.scanType),s.hasOwnProperty(S.default.FRAMERATE)){const t=s[S.default.FRAMERATE];if(isNaN(t)&&t.includes("/")){const e=t.split("/");if(2===e.length){const t=parseFloat(e[0]),n=parseFloat(e[1]);isNaN(t)||isNaN(n)||0===n||(u.frameRate=t/n)}}else u.frameRate=t}if(s.hasOwnProperty(S.default.QUALITY_RANKING)&&(u.qualityRanking=s[S.default.QUALITY_RANKING]),s.hasOwnProperty(S.default.MAX_PLAYOUT_RATE)&&(u.maxPlayoutRate=s.maxPlayoutRate),s.hasOwnProperty(S.default.SEGMENT_BASE)?(i=s.SegmentBase,u.segmentInfoType=S.default.SEGMENT_BASE):s.hasOwnProperty(S.default.SEGMENT_LIST)?(i=s.SegmentList,i.hasOwnProperty(S.default.SEGMENT_TIMELINE)?u.segmentInfoType=S.default.SEGMENT_TIMELINE:u.segmentInfoType=S.default.SEGMENT_LIST):s.hasOwnProperty(S.default.SEGMENT_TEMPLATE)?(i=s.SegmentTemplate,i.hasOwnProperty(S.default.SEGMENT_TIMELINE)?u.segmentInfoType=S.default.SEGMENT_TIMELINE:u.segmentInfoType=S.default.SEGMENT_TEMPLATE,i.hasOwnProperty(S.default.INITIALIZATION_MINUS)&&(u.initialization=i.initialization.split("$Bandwidth$").join(s.bandwidth).split("$RepresentationID$").join(s.id))):u.segmentInfoType=S.default.BASE_URL,u.essentialProperties=w(s),u.supplementalProperties=A(s),i){if(i.hasOwnProperty(S.default.INITIALIZATION)){const t=i.Initialization;t.hasOwnProperty(S.default.SOURCE_URL)&&(u.initialization=t.sourceURL),t.hasOwnProperty(S.default.RANGE)&&(u.range=t.range)}else c(r)&&l(r)&&r.mimeType&&-1===r.mimeType.indexOf("application/mp4")&&(u.range=0);i.hasOwnProperty(S.default.TIMESCALE)&&(u.timescale=i.timescale),i.hasOwnProperty(S.default.DURATION)?u.segmentDuration=i.duration/u.timescale:s.hasOwnProperty(S.default.SEGMENT_TEMPLATE)&&(i=s.SegmentTemplate,i.hasOwnProperty(S.default.SEGMENT_TIMELINE)&&(u.segmentDuration=E(i.SegmentTimeline)/u.timescale)),i.hasOwnProperty(S.default.MEDIA)&&(u.media=i.media),i.hasOwnProperty(S.default.START_NUMBER)&&(u.startNumber=parseInt(i.startNumber)),i.hasOwnProperty(S.default.INDEX_RANGE)&&(u.indexRange=i.indexRange),i.hasOwnProperty(S.default.PRESENTATION_TIME_OFFSET)&&(u.presentationTimeOffset=i.presentationTimeOffset/u.timescale),i.hasOwnProperty(S.default.AVAILABILITY_TIME_OFFSET)?u.availabilityTimeOffset=i.availabilityTimeOffset:o&&void 0!==o.availabilityTimeOffset&&(u.availabilityTimeOffset=o.availabilityTimeOffset),i.hasOwnProperty(S.default.AVAILABILITY_TIME_COMPLETE)?u.availabilityTimeComplete="false"!==i.availabilityTimeComplete:o&&void 0!==o.availabilityTimeComplete&&(u.availabilityTimeComplete=o.availabilityTimeComplete)}u.mseTimeOffset=T(u),u.path=[t.period.index,t.index,a],isNaN(u.width)||isNaN(u.height)||isNaN(u.frameRate)||(u.pixelsPerSecond=Math.max(1,u.width*u.height*u.frameRate),isNaN(u.bandwidth)||(u.bitsPerPixel=u.bandwidth/u.pixelsPerSecond)),n.push(u)}}return n},getRolesForAdaptation:function(t){return t&&t.hasOwnProperty(S.default.ROLE)&&t[S.default.ROLE].length?t[S.default.ROLE].map((t=>{const e=new te;return e.init(t),e})):[]},getSegmentAlignment:function(t){return!(!t||!t.hasOwnProperty(S.default.SEGMENT_ALIGNMENT))&&"true"===t[S.default.SEGMENT_ALIGNMENT]},getSelectionPriority:function(t){try{const e=t&&void 0!==t.selectionPriority?parseInt(t.selectionPriority):1;return isNaN(e)?1:e}catch(t){return 1}},getServiceDescriptions:function(t){const e=[];if(t&&t.hasOwnProperty(S.default.SERVICE_DESCRIPTION))for(const n of t.ServiceDescription){let t=null,r=null,i=null,o=null,a=null,s=null,l=null,u=null;for(const e in n)if(n.hasOwnProperty(e))if(e===S.default.ID)t=n[e];else if(e===S.default.SERVICE_DESCRIPTION_SCOPE)r=n[e].schemeIdUri;else if(e===S.default.SERVICE_DESCRIPTION_LATENCY)i={target:parseInt(n[e].target),max:parseInt(n[e].max),min:parseInt(n[e].min),referenceId:parseInt(n[e].referenceId)};else if(e===S.default.SERVICE_DESCRIPTION_PLAYBACK_RATE)o={max:parseFloat(n[e].max),min:parseFloat(n[e].min)};else if(e===S.default.SERVICE_DESCRIPTION_OPERATING_QUALITY)a={mediaType:n[e].mediaType,max:parseInt(n[e].max),min:parseInt(n[e].min),target:parseInt(n[e].target),type:n[e].type,maxQualityDifference:parseInt(n[e].maxQualityDifference)};else if(e===S.default.SERVICE_DESCRIPTION_OPERATING_BANDWIDTH)s={mediaType:n[e].mediaType,max:parseInt(n[e].max),min:parseInt(n[e].min),target:parseInt(n[e].target)};else if(e===S.default.CONTENT_STEERING){let t=n[e];t=Array.isArray(t)?t.at(t.length-1):t,l=R(t)}else e===S.default.CLIENT_DATA_REPORTING&&(u=O(n[e]));e.push({id:t,schemeIdUri:r,latency:i,playbackRate:o,operatingQuality:a,operatingBandwidth:s,contentSteering:l,clientDataReporting:u})}return e},getSubSegmentAlignment:function(t){return!(!t||!t.hasOwnProperty(S.default.SUB_SEGMENT_ALIGNMENT))&&"true"===t[S.default.SUB_SEGMENT_ALIGNMENT]},getSuggestedPresentationDelay:function(t){return t&&t.hasOwnProperty(S.default.SUGGESTED_PRESENTATION_DELAY)?t.suggestedPresentationDelay:null},getSupplementalPropertiesForAdaptationSet:function(t){return b(S.default.SUPPLEMENTAL_PROPERTY,t)},getSupplementalPropertiesForRepresentation:A,getUTCTimingSources:function(t){const e=y(t),n=!!t&&t.hasOwnProperty(S.default.AVAILABILITY_START_TIME),r=t?t.UTCTiming:null,i=[];return(e||n)&&r&&r.forEach((function(t){const e=new me.default;t.hasOwnProperty(x.default.SCHEME_ID_URI)&&(e.schemeIdUri=t.schemeIdUri,t.hasOwnProperty(S.default.VALUE)&&(e.value=t.value.toString(),i.push(e)))})),i},getViewpointForAdaptation:function(t){return t&&t.hasOwnProperty(S.default.VIEWPOINT)&&t[S.default.VIEWPOINT].length?t[S.default.VIEWPOINT].map((t=>{const e=new te;return e.init(t),e})):[]},hasProfile:function(t,e){let n=!1;return t&&t.profiles&&t.profiles.length>0&&(n=-1!==t.profiles.indexOf(e)),n},isPeriodEncrypted:m,setConfig:function(t){t&&(t.errHandler&&(n=t.errHandler),t.BASE64&&(r=t.BASE64))}},e=(0,P.default)(i).getInstance().getLogger(t),t}ge.__dashjs_factory_name="DashManifestModel";var ve=k.default.getSingletonFactory(ge);const ye={MANIFEST:"m",AUDIO:"a",VIDEO:"v",MUXED:"av",INIT:"i",CAPTION:"c",TIMED_TEXT:"tt",KEY:"k",OTHER:"o"},be=ye;class _e{constructor(t,e){Array.isArray(t)&&(t=t.map((t=>t instanceof _e?t:new _e(t)))),this.value=t,this.params=e}}const we="Dict";function Ae(t,e,n,r){return new Error(`failed to ${t} "${i=e,Array.isArray(i)?JSON.stringify(i):i instanceof Map?"Map{}":i instanceof Set?"Set{}":"object"==typeof i?JSON.stringify(i):String(i)}" as ${n}`,{cause:r});var i}function Ee(t,e,n){return Ae("serialize",t,e,n)}class xe{constructor(t){this.description=t}}const Se="Bare Item",Te="Boolean",Ce="Byte Sequence",Ie="Integer";function ke(t){return t<-999999999999999||999999999999999<t}function Pe(t){if(ke(t))throw Ee(t,Ie);return t.toString()}function Re(t,e){if(t<0)return-Re(-t,e);const n=Math.pow(10,e);if(Math.abs(t*n%1-.5)<Number.EPSILON){const e=Math.floor(t*n);return(e%2==0?e:e+1)/n}return Math.round(t*n)/n}const Oe="Decimal";function Me(t){const e=Re(t,3);if(Math.floor(Math.abs(e)).toString().length>12)throw Ee(t,Oe);const n=e.toString();return n.includes(".")?n:`${n}.0`}const Le="String",De=/[\x00-\x1f\x7f]+/;function Ne(t){return t.description||t.toString().slice(7,-1)}const Be="Token";function je(t){const e=Ne(t);if(!1===/^([a-zA-Z*])([!#$%&'*+\-.^_`|~\w:/]*)$/.test(e))throw Ee(e,Be);return e}function ze(t){switch(typeof t){case"number":if(!Number.isFinite(t))throw Ee(t,Se);return Number.isInteger(t)?Pe(t):Me(t);case"string":return function(t){if(De.test(t))throw Ee(t,Le);return`"${t.replace(/\\/g,"\\\\").replace(/"/g,'\\"')}"`}(t);case"symbol":return je(t);case"boolean":return function(t){if("boolean"!=typeof t)throw Ee(t,Te);return t?"?1":"?0"}(t);case"object":if(t instanceof Date)return function(t){return`@${Pe(t.getTime()/1e3)}`}(t);if(t instanceof Uint8Array)return function(t){if(!1===ArrayBuffer.isView(t))throw Ee(t,Ce);return`:${e=t,btoa(String.fromCharCode(...e))}:`;var e}(t);if(t instanceof xe)return je(t);default:throw Ee(t,Se)}}const Fe="Key";function Ue(t){if(!1===/^[a-z*][a-z0-9\-_.*]*$/.test(t))throw Ee(t,Fe);return t}function qe(t){return null==t?"":Object.entries(t).map((t=>{let[e,n]=t;return!0===n?`;${Ue(e)}`:`;${Ue(e)}=${ze(n)}`})).join("")}function Ge(t){return t instanceof _e?`${ze(t.value)}${qe(t.params)}`:ze(t)}const He=t=>Math.round(t),Ve=t=>100*He(t/100),Qe={br:He,d:He,bl:Ve,dl:Ve,mtp:Ve,nor:(t,e)=>((null==e?void 0:e.baseUrl)&&(t=function(t,e){const n=new URL(t),r=new URL(e);if(n.origin!==r.origin)return t;const i=n.pathname.split("/").slice(1),o=r.pathname.split("/").slice(1,-1);for(;i[0]===o[0];)i.shift(),o.shift();for(;o.length;)o.shift(),i.unshift("..");return i.join("/")}(t,e.baseUrl)),encodeURIComponent(t)),rtp:Ve,tb:He};function We(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return t?function(t,e){return function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{whitespace:!0};if("object"!=typeof t)throw Ee(t,we);const n=t instanceof Map?t.entries():Object.entries(t),r=(null==e?void 0:e.whitespace)?" ":"";return Array.from(n).map((t=>{let[e,n]=t;n instanceof _e==0&&(n=new _e(n));let r=Ue(e);var i;return!0===n.value?r+=qe(n.params):(r+="=",Array.isArray(n.value)?r+=`(${(i=n).value.map(Ge).join(" ")})${qe(i.params)}`:r+=Ge(n)),r})).join(`,${r}`)}(t,e)}(function(t,e){const n={};if(null==t||"object"!=typeof t)return n;const r=Object.keys(t).sort(),i=Object.assign({},Qe,null==e?void 0:e.formatters),o=null==e?void 0:e.filter;return r.forEach((r=>{if(null==o?void 0:o(r))return;let a=t[r];const s=i[r];s&&(a=s(a,e)),"v"===r&&1===a||"pr"==r&&1===a||function(t){return"number"==typeof t?Number.isFinite(t):null!=t&&""!==t&&!1!==t}(a)&&(function(t){return"ot"===t||"sf"===t||"st"===t}(r)&&"string"==typeof a&&(a=new xe(a)),n[r]=a)})),n}(t,e),Object.assign({whitespace:!1},e)):""}const Ye="CMCD-Object",Ke="CMCD-Request",Xe="CMCD-Session",$e="CMCD-Status",Ze={[Ye]:["br","d","ot","tb"],[Ke]:["bl","dl","mtp","nor","nrr","su"],[Xe]:["cid","pr","sf","sid","st","v"],[$e]:["bs","rtp"]},Je="segment";function tn(){let t,e,n,r,i,o,a,s,l,u,c,d,f,h,p,m,g=this.context,v=(0,C.default)(g).getInstance(),y=(0,W.default)(g).getInstance(),b=(0,P.default)(g).getInstance();function _(){r={pr:1,nor:null,st:null,sf:null,sid:`${Vt.default.generateUuid()}`,cid:null},f={},d={},h={},c=void 0,p=void 0,m=!1,S()}function w(){S()}function A(){p||(p=Date.now())}function E(){p&&!r.msd&&(r.msd=Date.now()-p)}function S(){if(!a)return;const t=a.getStreamController();if(!t)return;if("function"!=typeof t.getActiveStream)return;const e=t.getActiveStream();e&&(u=e.getStreamProcessors())}function T(t){try{const e=k(),n=e.version?e.keys:y.get().streaming.cmcd.enabledKeys;return Object.keys(t).filter((t=>n.includes(t))).reduce(((e,n)=>(e[n]=t[n],e)),{})}catch(e){return t}}function I(){const t=k();return function(t){if(Object.keys(t).length){if(1!==parseInt(t.version))return n.error("version parameter must be defined in 1."),!1;if(!t.keys)return n.error("keys parameter must be defined."),!1}const e=t.version,r=y.get().streaming.cmcd&&y.get().streaming.cmcd.enabled;return e||r}(t)&&function(t){let e=y.get().streaming.cmcd.includeInRequests;t.version&&(e=t.includeInRequests??[Je]);const r=x.default.CMCD_AVAILABLE_REQUESTS,i=e.filter((t=>!r.includes(t)));return i.length===e.length?(n.error("None of the request types are supported."),!1):(i.map((t=>{n.warn(`request type ${t} is not supported.`)})),!0)}(t)&&function(t){const e=x.default.CMCD_AVAILABLE_KEYS,r=x.default.CMCD_V2_AVAILABLE_KEYS,i=t.version?t.keys:y.get().streaming.cmcd.enabledKeys,o=y.get().streaming.cmcd.version,a=i.filter((t=>!(e.includes(t)||2===o&&r.includes(t))));return a.length===i.length&&i.length>0?(n.error(`None of the keys are implemented for CMCD version ${o}.`),!1):(a.map((t=>{n.warn(`key parameter ${t} is not implemented for CMCD version ${o}.`)})),!0)}(t)}function k(){let t={};if(s){const e=s.getServiceDescriptionSettings();y.get().streaming.cmcd.applyParametersFromMpd&&e.clientDataReporting&&e.clientDataReporting.cmcdParameters&&(t=e.clientDataReporting.cmcdParameters)}return t}function O(t){try{let n=null;if(t.type,(e=t.mediaType)!==x.default.VIDEO&&e!==x.default.AUDIO||c&&c!=x.default.AUDIO||(c=e),function(t){const e=k();let n=y.get().streaming.cmcd.includeInRequests;e.version&&(n=e.includeInRequests?e.includeInRequests:[Je]);const r={[L.HTTPRequest.INIT_SEGMENT_TYPE]:"segment",[L.HTTPRequest.MEDIA_SEGMENT_TYPE]:"segment",[L.HTTPRequest.XLINK_EXPANSION_TYPE]:"xlink",[L.HTTPRequest.MPD_TYPE]:"mpd",[L.HTTPRequest.CONTENT_STEERING_TYPE]:"steering",[L.HTTPRequest.OTHER_TYPE]:"other"};return n.some((e=>r[t]===e))}(t.type)){if(t.type===L.HTTPRequest.MPD_TYPE)return function(){const t=N();return t.ot=be.MANIFEST,t}();if(t.type===L.HTTPRequest.MEDIA_SEGMENT_TYPE)return D(t.mediaType),M(t,t.mediaType);if(t.type===L.HTTPRequest.INIT_SEGMENT_TYPE)return function(){const t=N();return t.ot=be.INIT,t.su=!0,t}();if(t.type===L.HTTPRequest.OTHER_TYPE||t.type===L.HTTPRequest.XLINK_EXPANSION_TYPE)return function(){const t=N();return t.ot=be.OTHER,t}();if(t.type===L.HTTPRequest.LICENSE)return function(){const t=N();return t.ot=be.KEY,t}();if(t.type===L.HTTPRequest.CONTENT_STEERING_TYPE)return function(t){const e=c?M(t,c):N();return e.ot=be.OTHER,e}(t)}return n}catch(t){return null}var e}function M(t,e){D(e);const n=N(),s=function(t){try{return parseInt(t.bandwidth/1e3)}catch(t){return null}}(t),c=function(t){try{return isNaN(t.duration)?NaN:Math.round(1e3*t.duration)}catch(t){return null}}(t),p=function(t){try{return 100*parseInt(l.getSafeAverageThroughput(t)/100)}catch(t){return null}}(e),m=function(t){try{const e=r.pr,n=o.getCurrentBufferLevel(t);return isNaN(e)||isNaN(n)?null:100*parseInt(n/e*10)}catch(t){return null}}(e),g=B(e),v=function(t){try{const e=i.getPossibleVoRepresentationsFilteredBySettings(t).map((t=>t.bitrateInKbit));return Math.max(...e)}catch(t){return null}}(t.representation?.mediaInfo),b=r.pr,_=function(t){if(u&&0!==u.length)for(let e of u)if(e.getType()===t)return e.probeNextRequest()}(e);let w;e===x.default.VIDEO&&(w=be.VIDEO),e===x.default.AUDIO&&(w=be.AUDIO),e===x.default.TEXT&&(w="application/mp4"===t.representation.mediaInfo.mimeType?be.TIMED_TEXT:be.CAPTION);let A=y.get().streaming.cmcd.rtp;return A||(A=function(t){try{let e=a.getPlaybackRate();e||(e=1);let{bandwidth:n,mediaType:r,representation:i,duration:o}=t;if(!i.mediaInfo)return NaN;let s=B(r);0===s&&(s=500);let l=n*o/1e3/(s/e/1e3),u=y.get().streaming.cmcd.rtpSafetyFactor&&!isNaN(y.get().streaming.cmcd.rtpSafetyFactor)?y.get().streaming.cmcd.rtpSafetyFactor:5;return 100*(parseInt(l*u/100)+1)}catch(t){return NaN}}(t)),isNaN(A)||(n.rtp=A),_&&(t.url!==_.url?n.nor=encodeURIComponent(Vt.default.getRelativeUrl(t.url,_.url)):_.range&&(n.nrr=_.range)),s&&(n.br=s),w&&(n.ot=w),isNaN(c)||(n.d=c),isNaN(p)||(n.mtp=p),isNaN(m)||(n.dl=m),isNaN(g)||(n.bl=g),isNaN(v)||(n.tb=v),isNaN(b)||1===b||(n.pr=b),f[e]&&(n.bs=!0,f[e]=!1),!d[e]&&h[e]||(n.su=!0,d[e]=!1,h[e]=!0),n}function D(t){h.hasOwnProperty(t)||(h[t]=!1),d.hasOwnProperty(t)||(d[t]=!1),f.hasOwnProperty(t)||(f[t]=!1)}function N(){const t=k(),e={};let n=y.get().streaming.cmcd.cid?y.get().streaming.cmcd.cid:r.cid;if(n=t.contentID?t.contentID:n,e.v=y.get().streaming.cmcd.version??1,e.sid=y.get().streaming.cmcd.sid?y.get().streaming.cmcd.sid:r.sid,e.sid=t.sessionID?t.sessionID:e.sid,e.sid=`${e.sid}`,n&&(e.cid=`${n}`),isNaN(r.pr)||1===r.pr||null===r.pr||(e.pr=r.pr),r.st&&(e.st=r.st),r.sf&&(e.sf=r.sf),2===e.v){let t=1e3*a.getCurrentLiveLatency();isNaN(t)||(e.ltc=t);const n=r.msd;m||isNaN(n)||(e.msd=n,m=!0)}return e}function B(t){try{const e=o.getCurrentBufferLevel(t);return isNaN(e)?null:100*parseInt(10*e)}catch(t){return null}}function j(t){try{r.pr=t.playbackRate}catch(t){}}function z(e){try{const n=t.getIsDynamic(e.data)?"l":"v",i=e.protocol&&"MSS"===e.protocol?"s":"d";r.st=`${n}`,r.sf=`${i}`}catch(t){}}function F(t){try{t.state&&t.mediaType&&t.state===R.default.BUFFER_EMPTY&&(f[t.mediaType]||(f[t.mediaType]=!0),d[t.mediaType]||(d[t.mediaType]=!0))}catch(t){}}function U(){for(let t in f)f.hasOwnProperty(t)&&(f[t]=!0);for(let t in d)d.hasOwnProperty(t)&&(d[t]=!0)}return e={getCmcdData:O,getQueryParameter:function(t){try{if(I()){const e=O(t),n=We(T(e));return v.trigger(Xt.default.CMCD_DATA_GENERATED,{url:t.url,mediaType:t.mediaType,cmcdData:e,cmcdString:n}),{key:"CMCD",value:n}}return null}catch(t){return null}},getHeaderParameters:function(t){try{if(I()){const e=O(t),n=function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n={};if(!t)return n;const r=Object.entries(t),i=Object.entries(Ze).concat(Object.entries((null==e?void 0:e.customHeaderMap)||{})),o=r.reduce(((t,e)=>{var n,r;const[o,a]=e,s=(null===(n=i.find((t=>t[1].includes(o))))||void 0===n?void 0:n[0])||Ke;return null!==(r=t[s])&&void 0!==r||(t[s]={}),t[s][o]=a,t}),{});return Object.entries(o).reduce(((t,n)=>{let[r,i]=n;return t[r]=We(i,e),t}),n)}(T(e),1===y.get().streaming.cmcd.version?{}:{customHeaderMap:{[Ke]:["ltc"],[Xe]:["msd"]}});return v.trigger(Xt.default.CMCD_DATA_GENERATED,{url:t.url,mediaType:t.mediaType,cmcdData:e,headers:n}),n}return null}catch(t){return null}},getCmcdParametersFromManifest:k,setConfig:function(t){t&&(t.abrController&&(i=t.abrController),t.dashMetrics&&(o=t.dashMetrics),t.throughputController&&(l=t.throughputController),t.playbackController&&(a=t.playbackController),t.serviceDescriptionController&&(s=t.serviceDescriptionController))},reset:function(){v.off(R.default.PLAYBACK_RATE_CHANGED,j,this),v.off(R.default.MANIFEST_LOADED,z,this),v.off(R.default.BUFFER_LEVEL_STATE_CHANGED,F,e),v.off(R.default.PLAYBACK_SEEKED,U,e),v.off(R.default.PLAYBACK_STARTED,A,e),v.off(R.default.PLAYBACK_PLAYING,E,e),_()},initialize:function(t){v.on(R.default.PLAYBACK_RATE_CHANGED,j,e),v.on(R.default.MANIFEST_LOADED,z,e),v.on(R.default.BUFFER_LEVEL_STATE_CHANGED,F,e),v.on(R.default.PLAYBACK_SEEKED,U,e),v.on(R.default.PERIOD_SWITCH_COMPLETED,w,e),t?v.on(R.default.MANIFEST_LOADING_STARTED,A,e):v.on(R.default.PLAYBACK_STARTED,A,e),v.on(R.default.PLAYBACK_PLAYING,E,e)},isCmcdEnabled:I},t=ve(g).getInstance(),n=b.getLogger(e),_(),e}tn.__dashjs_factory_name="CmcdModel";var en=k.default.getSingletonFactory(tn);const nn="CMSD-Dynamic",rn="CMSD-Static",on=ye;function an(t,e,n){return Ae("parse",t,e,n)}const sn="List";function ln(t,e){return{value:t,src:e}}const un="Inner List",cn="Date",dn=`${Ie} or ${Oe}`;function fn(t){let e,n=1,r="";const i=an(t,dn);if("-"===t[0]&&(n=-1,t=t.substring(1)),t.length<=0)throw i;const o=/^(\d+)?/g,a=o.exec(t);if(0===a[0].length)throw i;if(r+=a[1],"."===(t=t.substring(o.lastIndex))[0]){if(r.length>12)throw i;const o=/^(\.\d+)?/g,a=o.exec(t);if(t=t.substring(o.lastIndex),0===a[0].length||a[1].length>4)throw i;if(r+=a[1],r.length>16)throw i;e=parseFloat(r)*n}else{if(r.length>15)throw i;if(e=parseInt(r)*n,ke(e))throw an(r,dn)}return ln(e,t)}function hn(t,e){const n=t[0];if('"'===n)return function(t){let e="",n=0;if('"'!==t[n])throw an(t,Le);for(n++;t.length>n;){if("\\"===t[n]){if(t.length<=n+1)throw an(t,Le);if(n++,'"'!==t[n]&&"\\"!==t[n])throw an(t,Le);e+=t[n]}else{if('"'===t[n])return ln(e,t.substring(++n));if(De.test(t[n]))throw an(t,Le);e+=t[n]}n++}throw an(t,Le)}(t);if(/^[-0-9]/.test(n))return fn(t);if("?"===n)return function(t){let e=0;if("?"!==t[e])throw an(t,Te);if(e++,"1"===t[e])return ln(!0,t.substring(++e));if("0"===t[e])return ln(!1,t.substring(++e));throw an(t,Te)}(t);if(":"===n)return function(t){if(":"!==t[0])throw an(t,Ce);if(!1===(t=t.substring(1)).includes(":"))throw an(t,Ce);const e=/(^.*?)(:)/g,n=e.exec(t)[1];return t=t.substring(e.lastIndex),ln(new Uint8Array([...atob(n)].map((t=>t.charCodeAt(0)))),t)}(t);if(/^[a-zA-Z*]/.test(n))return function(t,e){if(!1===/^[a-zA-Z*]$/.test(t[0]))throw an(t,Be);const n=/^([!#$%&'*+\-.^_`|~\w:/]+)/g,r=n.exec(t)[1];return t=t.substring(n.lastIndex),ln(!1===(null==e?void 0:e.useSymbol)?new xe(r):Symbol.for(r),t)}(t,e);if("@"===n)return function(t){let e=0;if("@"!==t[e])throw an(t,cn);e++;const n=fn(t.substring(e));if(!1===Number.isInteger(n.value))throw an(t,cn);return ln(new Date(1e3*n.value),n.src)}(t);throw an(t,Se)}function pn(t){let e=0;if(!1===/^[a-z*]$/.test(t[e]))throw an(t,Fe);let n="";for(;t.length>e;){if(!1===/^[a-z0-9_\-.*]$/.test(t[e]))return ln(n,t.substring(e));n+=t[e],e++}return ln(n,t.substring(e))}function mn(t,e){let n;for(;t.length>0&&";"===t[0];){const r=pn(t=t.substring(1).trim()),i=r.value;let o=!0;if("="===(t=r.src)[0]){const n=hn(t=t.substring(1),e);o=n.value,t=n.src}null==n&&(n={}),n[i]=o}return ln(n,t)}function gn(t,e){const n=hn(t,e),r=mn(t=n.src,e);return t=r.src,ln(new _e(n.value,r.value),t)}function vn(t,e){return"("===t[0]?function(t,e){if("("!==t[0])throw an(t,un);t=t.substring(1);const n=[];for(;t.length>0;){if(")"===(t=t.trim())[0]){const r=mn(t=t.substring(1),e);return ln(new _e(n,r.value),r.src)}const r=gn(t,e);if(n.push(r.value)," "!==(t=r.src)[0]&&")"!==t[0])throw an(t,un)}throw an(t,un)}(t,e):gn(t,e)}const yn=rn.toLowerCase(),bn=nn.toLowerCase(),_n=["mb","st","sf","v"],wn="stream",An={video:on.VIDEO,audio:on.AUDIO,text:on.TIMED_TEXT,stream:wn};function En(){const t=this.context,e=(0,C.default)(t).getInstance();let n,r,i,o;function a(){i={},o={}}function s(t){t&&Object.keys(t).forEach((e=>{_n.includes(e)||delete t[e]}))}function l(t){try{return(e=t)?Object.entries(function(t,e){try{const{src:e,value:n}=function(t,e){const n={};for(;t.length>0;){let r;const i=pn(t),o=i.value;if("="===(t=i.src)[0]){const n=vn(t.substring(1),e);r=n.value,t=n.src}else{const n=mn(t,e);r=new _e(!0,n.value),t=n.src}if(n[o]=r,0===(t=t.trim()).length)return ln(n,t);if(","!==t[0])throw an(t,we);if(0===(t=t.substring(1).trim()).length||","===t[0])throw an(t,we)}return ln(n,t)}(t.trim(),void 0);if(""!==e)throw an(e,we);return n}catch(e){throw an(t,we,e)}}(e)).reduce(((t,e)=>{let[n,r]=e;const{value:i}=r;return t[n]="symbol"==typeof i?Ne(i):i,t}),{}):{}}catch(t){r.error("Failed to parse CMSD-Static response header value:",t)}var e}function u(t){try{const n=(e=t)?function(t,e){try{const{src:e,value:n}=function(t,e){const n=[];for(;t.length>0;){const r=vn(t,e);if(n.push(r.value),0===(t=r.src.trim()).length)return ln(n,t);if(","!==t[0])throw an(t,sn);if(0===(t=t.substring(1).trim()).length||","===t[0])throw an(t,sn)}return ln(n,t)}(t.trim(),void 0);if(""!==e)throw an(e,sn);return n}catch(e){throw an(t,sn,e)}}(e):[],r=n[n.length-1];return r?.params||{}}catch(t){return r.error("Failed to parse CMSD-Dynamic response header value:",t),{}}var e}function c(t){return An[t]||on.OTHER}function d(t,e,n){const r=t===rn?i:o,a=r[e]||{},s=r[wn]||{};return a[n]||s[n]}return n={setConfig:function(){},initialize:function(){},reset:function(){a()},parseResponseHeaders:function(t,n){let r=null,a=null;for(const n in t){const i=t[n];switch(n){case yn:r=l(i),e.trigger(I.default.CMSD_STATIC_HEADER,r);break;case bn:a||(a=u(i))}}let d=wn;return r&&r.ot?d=r.ot:n&&(d=c(n)),s(i[d]),s(o[d]),r&&(i[d]=Object.assign(i[d]||{},r)),a&&(o[d]=Object.assign(o[d]||{},a)),{static:r,dynamic:a}},getMaxBitrate:function(t){let e=c(t);return d(nn,e,"mb")||-1},getEstimatedThroughput:function(t){let e=c(t);return d(nn,e,"etp")||null},getResponseDelay:function(t){let e=c(t);return d(nn,e,"rd")||null},getRoundTripTime:function(t){let e=c(t);return d(nn,e,"rtt")||null}},r=(0,P.default)(t).getInstance().getLogger(n),a(),n}En.__dashjs_factory_name="CmsdModel";var xn=k.default.getSingletonFactory(En),Sn=n(1926);function Tn(){let t,e;function n(){e={}}return t={reset:function(){n()},processResponseHeaders:function(t){if(!(t&&t.headers&&t.request&&t.request.url))return;const n=t.headers[x.default.COMMON_ACCESS_TOKEN_HEADER];if(n){const r=Vt.default.getHostFromUrl(t.request.url);r&&(e[r]=n)}},getCommonAccessTokenForUrl:function(t){if(!t)return null;const n=Vt.default.getHostFromUrl(t);return n?e[n]?e[n]:null:void 0}},n(),t}Tn.__dashjs_factory_name="CommonAccessTokenController";var Cn=k.default.getSingletonFactory(Tn);function In(){let t,e;return t={setConfig:function(t){t&&t.serviceDescriptionController&&(e=t.serviceDescriptionController)},isAdaptationsIncluded:function(t){const{adaptationSetsArray:n}=e?.getServiceDescriptionSettings()?.clientDataReporting??{};return!n||0===n?.length||n.includes(t)},isServiceLocationIncluded:function(t,n){if(t===L.HTTPRequest.CONTENT_STEERING_TYPE)return!0;const{serviceLocationsArray:r}=e?.getServiceDescriptionSettings()?.clientDataReporting??{};return!r||0===r?.length||r.includes(n)}},t}In.__dashjs_factory_name="ClientDataReportingController";var kn=k.default.getSingletonFactory(In);function Pn(){let t,e,n;const r=this.context;function i(t,e,n,r,i){const o=function(t,e){let n=[];return n=e===S.default.PERIOD?t[S.default.SUPPLEMENTAL_PROPERTY]||[]:[...t[S.default.ESSENTIAL_PROPERTY]||[],...t[S.default.SUPPLEMENTAL_PROPERTY]||[]],n.find((t=>t.schemeIdUri===x.default.URL_QUERY_INFO_SCHEME&&t.UrlQueryInfo||t.schemeIdUri===x.default.EXT_URL_QUERY_INFO_SCHEME&&t.ExtUrlQueryInfo))}(e,i);!function(t,e,n,r){n.initialQueryString="";let i="";const o=t?.ExtUrlQueryInfo||t?.UrlQueryInfo;i=o&&o.queryString?e&&e.length>0?e+"&"+o.queryString:o.queryString:e,"true"===o?.useMPDUrlQuery&&r&&(i=i?i+"&"+r:r),n.initialQueryString=i}(o,r.initialQueryString,t,n),function(t,e,n){if(!t)return void(e.finalQueryString=n);const r=t?.ExtUrlQueryInfo?.queryTemplate||t?.UrlQueryInfo?.queryTemplate||"";e.finalQueryString=r===S.default.QUERY_PART?e?.initialQueryString:""}(o,t,r.finalQueryString),t.sameOriginOnly=o?.ExtUrlQueryInfo?.sameOriginOnly,t.queryParams=Vt.default.parseQueryParams(t?.finalQueryString),t.includeInRequests=function(t,e){return t?t.ExtUrlQueryInfo?.includeInRequests?t.ExtUrlQueryInfo.includeInRequests.split(" "):[S.default.SEGMENT_TYPE]:e}(o,r.includeInRequests)}return e=(0,P.default)(r).getInstance().getLogger(t),t={getFinalQueryString:function(t){try{if(!n)return null;if(t.type===L.HTTPRequest.MEDIA_SEGMENT_TYPE||t.type===L.HTTPRequest.INIT_SEGMENT_TYPE){const e=t.representation;if(!e)return null;const r=e.adaptation,i=r.period,o=n.period[i.index].adaptation[r.index].representation[e.index],a=new URL(t.url),s=!o.sameOriginOnly||n.origin===a.origin;if(o.includeInRequests.includes(S.default.SEGMENT_TYPE)&&s)return o.queryParams}else if(t.type===L.HTTPRequest.MPD_TYPE){if([S.default.MPD_TYPE,S.default.MPD_PATCH_TYPE].some((t=>n.includeInRequests.includes(t))))return n.queryParams}else if(t.type===L.HTTPRequest.CONTENT_STEERING_TYPE&&n.includeInRequests.includes(S.default.STEERING_TYPE))return n.queryParams}catch(t){return e.error(t),null}},createFinalQueryStrings:function(t){n={origin:new URL(t.url).origin,period:[]};const e=t.url.split("?")[1];i(n,t,e,{initialQueryString:"",includeInRequests:[]},S.default.MPD),t.Period.forEach((t=>{const r={adaptation:[]};i(r,t,e,n,S.default.PERIOD),t.AdaptationSet.forEach((t=>{const n={representation:[]};i(n,t,e,r,S.default.ADAPTATION_SET),t.Representation.forEach((t=>{const r={};i(r,t,e,n,S.default.REPRESENTATION),n.representation.push(r)})),r.adaptation.push(n)})),n.period.push(r)}))}},t}Pn.__dashjs_factory_name="ExtUrlQueryInfoController";var Rn=k.default.getSingletonFactory(Pn),On=class{constructor(t){this.url=t.url,this.method=t.method,this.responseType=void 0!==t.responseType?t.responseType:null,this.headers=void 0!==t.headers?t.headers:{},this.credentials=void 0!==t.credentials?t.credentials:null,this.mode=void 0!==t.mode?t.mode:null,this.timeout=void 0!==t.timeout?t.timeout:0,this.cmcd=void 0!==t.cmcd?t.cmcd:null,this.customData=void 0!==t.customData?t.customData:null}},Mn=class{constructor(t){this.request=t.request,this.url=void 0!==t.url?t.url:null,this.redirected=void 0!==t.redirected&&t.redirected,this.status=void 0!==t.status?t.status:null,this.statusText=void 0!==t.statusText?t.statusText:"",this.type=void 0!==t.type?t.type:"",this.headers=void 0!==t.headers?t.headers:{},this.data=void 0!==t.data?t.data:null,this.resourceTiming=void 0!==t.resourceTiming?t.resourceTiming:null}};function Ln(t){t=t||{};const e=this.context,n=t.errHandler,r=t.dashMetrics,i=t.mediaPlayerModel,o=t.boxParser,a=t.errors,s=t.requestTimeout||0,l=(0,C.default)(e).getInstance(),u=(0,W.default)(e).getInstance();let c,d,f,h,p,m,g,v,y,b,_,w,A,E;function S(t,a){const c=function(){P()},T=function(e){const n=new Date;j&&(j=!1,(!e.lengthComputable||e.lengthComputable&&e.total!==e.loaded)&&(N.firstByteDate=n,V.resourceTiming.responseStart=n.getTime())),e.lengthComputable&&(N.bytesLoaded=V.length=e.loaded,N.bytesTotal=V.resourceTiming.encodedBodySize=e.total,V.length=e.total,V.resourceTiming.encodedBodySize=e.loaded),e.noTrace||(B.push({s:F,d:e.time?e.time:n.getTime()-F.getTime(),b:[e.loaded?e.loaded-U:0],t:e.throughput}),N.traces=B,F=n,U=e.loaded),q&&(clearTimeout(q),q=null),u.get().streaming.fragmentRequestProgressTimeout>0&&(q=setTimeout((function(){E.warn("Abort request "+H.url+" due to progress timeout"),W.abort(H),c()}),u.get().streaming.fragmentRequestProgressTimeout)),t.progress&&e&&t.progress(e)},C=function(){P(!0)},k=function(t){let e;if(t.lengthComputable){let n=t.loaded/t.total*100;e="Request timeout: loaded: "+t.loaded+", out of: "+t.total+" : "+n.toFixed(3)+"% Completed"}else e="Request timeout: non-computable download size";E.warn(e)},P=function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];-1!==d.indexOf(H)&&d.splice(d.indexOf(H),1),q&&(clearTimeout(q),q=null),_.processResponseHeaders(V),R(),O(),function(t){const e=b.getResponseInterceptors();return e?e.reduce(((t,e)=>t.then((t=>e(t)))),Promise.resolve(t)):Promise.resolve(t)}(V).then((n=>{if(V=n,function(t,e,n){const i=t.customData.request,o=u.get().streaming.cmsd&&u.get().streaming.cmsd.enabled?g.parseResponseHeaders(e.headers,i.mediaType):null;r.addHttpRequest(i,e.url,e.status,e.headers,n,o)}(H,V,B),e)t.abort&&t.abort(N);else if(N.type===L.HTTPRequest.MPD_TYPE&&(r.addManifestUpdate(N),l.trigger(I.default.MANIFEST_LOADING_FINISHED,{requestObject:N})),V.status>=200&&V.status<=299&&V.data)t.success&&t.success(V.data,V.statusText,V.url),t.complete&&t.complete(N,V.statusText);else{try{404===V.status&&u.get().streaming.utcSynchronization.enableBackgroundSyncAfterSegmentDownloadError&&N.type===L.HTTPRequest.MEDIA_SEGMENT_TYPE&&i.getRetryAttemptsForType(L.HTTPRequest.MEDIA_SEGMENT_TYPE)===a&&l.trigger(I.default.ATTEMPT_BACKGROUND_SYNC)}catch(t){}D()}}))},R=function(){N.startDate=z,N.endDate=new Date,N.firstByteDate=N.firstByteDate||z},O=function(){V.resourceTiming.responseEnd=Date.now(),function(t,e){if(!u.get().streaming.abr.throughput.useResourceTimingApi)return;if("undefined"==typeof performance||t.range)return;const n=performance.getEntriesByType("resource");if(void 0===n||n.length<=0)return;let r=0,i=null;for(;r<n.length;){if(n[r].name===t.url){i=n[r];break}r+=1}(function(t){return t&&!isNaN(t.responseStart)&&t.responseStart>0&&!isNaN(t.responseEnd)&&t.responseEnd>0&&!isNaN(t.transferSize)&&t.transferSize>0})(i)&&(t.customData.request.resourceTimingValues=i,e.resourceTiming.startTime=i.startTime,e.resourceTiming.encodedBodySize=i.encodedBodySize,e.resourceTiming.responseStart=i.startTime,e.resourceTiming.responseEnd=i.responseEnd,e.resourceTiming.duration=i.duration)}(H,V)},M=function(t,e,n){return new Promise((r=>{(function(t){const e=b.getRequestInterceptors();return e?e.reduce(((t,e)=>t.then((t=>e(t)))),Promise.resolve(t)):Promise.resolve(t)})(e).then((i=>{(e=i).customData.onloadend=c,e.customData.onprogress=T,e.customData.onabort=C,e.customData.ontimeout=k,n.resourceTiming.startTime=Date.now(),t.load(e,n),r()}))}))},D=function(){if(a>0){a--;let e={config:t};h.push(e),e.timeout=setTimeout((function(){-1!==h.indexOf(e)&&(h.splice(h.indexOf(e),1),S(t,a))}),i.getRetryIntervalsForType(N.type))}else{if(N.type===L.HTTPRequest.MSS_FRAGMENT_INFO_SEGMENT_TYPE)return;n.error(new G.default(p[N.type],N.url+" is not available",{request:N,response:V})),t.error&&t.error(N,"error",V.statusText,V),t.complete&&t.complete(N,V.statusText)}},N=t.request,B=[];let j,z,F,U,q,H,V;if(N.bytesLoaded=NaN,N.bytesTotal=NaN,N.firstByteDate=null,N.traces=[],j=!0,z=new Date,F=z,U=0,q=null,!r||!n)throw new Error("config object is not correct or missing");const Q=function(t){let n,i;return t.hasOwnProperty("availabilityTimeComplete")&&!1===t.availabilityTimeComplete&&window.fetch&&"arraybuffer"===t.responseType&&t.type===L.HTTPRequest.MEDIA_SEGMENT_TYPE?(y||(y=Kt(e).create(),y.setConfig({dashMetrics:r,boxParser:o})),n=y,i=x.default.FILE_LOADER_TYPES.FETCH):(v||(v=Wt(e).create()),n=v,i=x.default.FILE_LOADER_TYPES.XHR),{loader:n,fileLoaderType:i}}(N),W=Q.loader;var Y;N.fileLoaderType=Q.fileLoaderType,N.headers={},function(t){const e=t?.serviceLocation,n=t?.mediaInfo?.id?.toString();if(w.isServiceLocationIncluded(t.type,e)&&w.isAdaptationsIncluded(n)&&m.isCmcdEnabled()){const e=m.getCmcdParametersFromManifest(),n=e.mode?e.mode:u.get().streaming.cmcd.mode;if(n===x.default.CMCD_MODE_QUERY){t.url=Vt.default.removeQueryParameterFromUrl(t.url,x.default.CMCD_QUERY_KEY);const e=function(t){try{const e=[],n=m.getQueryParameter(t);return n&&e.push(n),e}catch(t){return[]}}(t);t.url=Vt.default.addAdditionalQueryParameterToUrl(t.url,e)}else n===x.default.CMCD_MODE_HEADER&&(t.headers=Object.assign(t.headers,m.getHeaderParameters(t)))}}(Y=N),function(t){let e=A.getFinalQueryString(t);e&&(t.url=Vt.default.addAdditionalQueryParameterToUrl(t.url,e))}(Y),function(t){if(t.queryParams){const e=Object.keys(t.queryParams).map((e=>({key:e,value:t.queryParams[e]})));t.url=Vt.default.addAdditionalQueryParameterToUrl(t.url,e)}}(Y),function(t){const e=_.getCommonAccessTokenForUrl(t.url);e&&(t.headers[x.default.COMMON_ACCESS_TOKEN_HEADER]=e)}(Y),N.range&&(N.headers.Range="bytes="+N.range);const K=b.getXHRWithCredentialsForType(N.type);H=new On({url:N.url,method:L.HTTPRequest.GET,responseType:N.responseType,headers:N.headers,credentials:K?"include":"omit",timeout:s,cmcd:m.getCmcdData(N),customData:{request:N}}),V=new Mn({request:H,resourceTiming:{startTime:Date.now(),encodedBodySize:0},status:0});let X=(new Date).getTime();if(isNaN(N.delayLoadingTime)||X>=N.delayLoadingTime)return d.push(H),M(W,H,V);{let t={httpRequest:H,httpResponse:V};return f.push(t),t.delayTimeout=setTimeout((function(){if(-1!==f.indexOf(t)){f.splice(f.indexOf(t),1);try{z=new Date,F=z,d.push(t.httpRequest),M(W,t.httpRequest,t.httpResponse)}catch(e){t.httpRequest.onloadend()}}}),N.delayLoadingTime-X),Promise.resolve()}}return c={abort:function(){h.forEach((t=>{clearTimeout(t.timeout),t.config.request&&t.config.abort&&t.config.abort(t.config.request)})),h=[],f.forEach((t=>clearTimeout(t.delayTimeout))),f=[],d.forEach((t=>{const e=t.customData;e&&(e.request&&e.request.type===L.HTTPRequest.MSS_FRAGMENT_INFO_SEGMENT_TYPE||(e.onloadend=e.onprogress=void 0,e.abort&&e.abort()))})),d=[]},load:function(t){return t.request?S(t,i.getRetryAttemptsForType(t.request.type)):(t.error&&t.error(t.request,"error"),Promise.resolve())},reset:function(){d=[],f=[],h=[],v&&v.reset(),y&&y.reset(),v=null,y=null},resetInitialSettings:function(){v&&v.resetInitialSettings()},setConfig:function(t){t&&(t.commonAccessTokenController&&(_=t.commonAccessTokenController),t.extUrlQueryInfoController&&(A=t.extUrlQueryInfoController))}},E=(0,P.default)(e).getInstance().getLogger(c),d=[],f=[],h=[],m=en(e).getInstance(),w=kn(e).getInstance(),g=xn(e).getInstance(),b=(0,Sn.default)(e).getInstance(),_=Cn(e).getInstance(),A=Rn(e).getInstance(),p={[L.HTTPRequest.MPD_TYPE]:a.DOWNLOAD_ERROR_ID_MANIFEST_CODE,[L.HTTPRequest.XLINK_EXPANSION_TYPE]:a.DOWNLOAD_ERROR_ID_XLINK_CODE,[L.HTTPRequest.INIT_SEGMENT_TYPE]:a.DOWNLOAD_ERROR_ID_INITIALIZATION_CODE,[L.HTTPRequest.MEDIA_SEGMENT_TYPE]:a.DOWNLOAD_ERROR_ID_CONTENT_CODE,[L.HTTPRequest.INDEX_SEGMENT_TYPE]:a.DOWNLOAD_ERROR_ID_CONTENT_CODE,[L.HTTPRequest.BITSTREAM_SWITCHING_SEGMENT_TYPE]:a.DOWNLOAD_ERROR_ID_CONTENT_CODE,[L.HTTPRequest.OTHER_TYPE]:a.DOWNLOAD_ERROR_ID_CONTENT_CODE},c}Ln.__dashjs_factory_name="HTTPLoader";var Dn=k.default.getClassFactory(Ln);function Nn(){let t,e;function n(){e={}}function r(){n()}return r(),t={getLoader:function(t){for(var n in e)if(e.hasOwnProperty(n)&&t.startsWith(n))return e[n];return Dn},registerLoader:function(t,n){e[t]=n},unregisterLoader:function(t){e[t]&&delete e[t]},unregisterAllLoader:n,reset:r},t}Nn.__dashjs_factory_name="SchemeLoaderFactory";var Bn=k.default.getSingletonFactory(Nn);function jn(t){t=t||{};const e=this.context;let n,r,i;return r=Bn(e).getInstance(),n={abort:function(){i&&i.abort()},load:function(n){if(!i){let o=r.getLoader(n&&n.request?n.request.url:null);i=o(e).create({errHandler:t.errHandler,mediaPlayerModel:t.mediaPlayerModel,dashMetrics:t.dashMetrics,boxParser:t.boxParser?t.boxParser:null,constants:t.constants?t.constants:null,dashConstants:t.dashConstants?t.dashConstants:null,urlUtils:t.urlUtils?t.urlUtils:null,requestTimeout:isNaN(t.requestTimeout)?0:t.requestTimeout,errors:t.errors})}i.load(n)},reset:function(){r&&(r.reset(),r=null),i&&"function"==typeof i.reset&&i.reset(),i=null},resetInitialSettings:function(){i&&"function"==typeof i.resetInitialSettings&&i.resetInitialSettings()}},n}jn.__dashjs_factory_name="URLLoader";var zn=k.default.getClassFactory(jn),Fn=class extends N{constructor(t){super(t),this.checkForExistenceOnly=!0}};function Un(t){t=t||{};const e=this.context,n=t.eventBus,r=t.events,i=t.urlUtils,o=t.errors,a=t.streamId;let s,l;return s={abort:function(){l&&l.abort()},checkForExistence:function(t){const e=function(e){n.trigger(r.CHECK_FOR_EXISTENCE_COMPLETED,{request:t,exists:e})};if(t){let n=new Fn(t.url);l.load({request:n,success:function(){e(!0)},error:function(){e(!1)}})}else e(!1)},load:function(t){const e=function(e,i){n.trigger(r.LOADING_COMPLETED,{request:t,response:e||null,error:i||null,sender:s})};t?l.load({request:t,progress:function(e){n.trigger(r.LOADING_PROGRESS,{request:t,stream:e.stream,streamId:a}),e.data&&n.trigger(r.LOADING_DATA_PROGRESS,{request:t,response:e.data||null,error:null,sender:s})},success:function(t){e(t)},error:function(t,n,r){e(void 0,new G.default(o.FRAGMENT_LOADER_LOADING_FAILURE_ERROR_CODE,r,n))},abort:function(t){t&&n.trigger(r.LOADING_ABANDONED,{mediaType:t.mediaType,request:t,sender:s})}}):e(void 0,new G.default(o.FRAGMENT_LOADER_NULL_REQUEST_ERROR_CODE,o.FRAGMENT_LOADER_NULL_REQUEST_ERROR_MESSAGE))},reset:function(){l&&(l.abort(),l.reset(),l=null)},resetInitialSettings:function(){l&&l.resetInitialSettings()}},l=zn(e).create({errHandler:t.errHandler,errors:o,dashMetrics:t.dashMetrics,mediaPlayerModel:t.mediaPlayerModel,urlUtils:i,constants:x.default,boxParser:t.boxParser,dashConstants:t.dashConstants,requestTimeout:t.settings.get().streaming.fragmentRequestTimeout}),s}Un.__dashjs_factory_name="FragmentLoader";var qn=k.default.getClassFactory(Un);function Gn(t){t=t||{};const e=this.context,n=(0,C.default)(e).getInstance(),r=t.errHandler,i=t.mediaPlayerModel,o=t.dashMetrics,a=(0,P.default)(e).getInstance(),s=t.streamInfo;let l,u,c;function d(){return s.id}function f(){for(let t in c)c[t].reset();c={}}function h(t){if(!t.sender)return;const e=t.request,r=t.response,i=e.isInitializationRequest(),o=e.representation.mediaInfo.streamInfo;if(t.error&&(e.mediaType===x.default.AUDIO||e.mediaType===x.default.VIDEO||e.mediaType===x.default.TEXT&&e.representation.mediaInfo.isFragmented)&&n.trigger(I.default.SERVICE_LOCATION_BASE_URL_BLACKLIST_ADD,{entry:t.request.serviceLocation}),!r||!o)return void u.warn("No "+e.mediaType+" bytes to push or stream is inactive.");const a=function(t,e,n,r){const i=new Ht;return i.streamId=n,i.segmentType=e.type,i.start=e.startTime,i.duration=e.duration,i.end=i.start+i.duration,i.bytes=t,i.index=e.index,i.quality=e.quality,i.representation=e.representation,i.endFragment=r,i}(r,e,s.id,t.type!==I.default.FRAGMENT_LOADING_PROGRESS);n.trigger(i?I.default.INIT_FRAGMENT_LOADED:I.default.MEDIA_FRAGMENT_LOADED,{chunk:a,request:e},{streamId:o.id,mediaType:e.mediaType})}return l={getStreamId:d,getModel:function(l){let u=c[l];return u||(u=q(e).create({streamInfo:s,type:l,dashMetrics:o,fragmentLoader:qn(e).create({dashMetrics:o,mediaPlayerModel:i,errHandler:r,settings:t.settings,boxParser:t.boxParser,eventBus:n,events:I.default,errors:Q,dashConstants:t.dashConstants,urlUtils:t.urlUtils,streamId:d()}),debug:a,eventBus:n,events:I.default}),c[l]=u),u},reset:function(){n.off(R.default.FRAGMENT_LOADING_COMPLETED,h,this),n.off(R.default.FRAGMENT_LOADING_PROGRESS,h,this),f()}},u=a.getLogger(l),f(),n.on(R.default.FRAGMENT_LOADING_COMPLETED,h,l),n.on(R.default.FRAGMENT_LOADING_PROGRESS,h,l),l}Gn.__dashjs_factory_name="FragmentController";var Hn=k.default.getClassFactory(Gn),Vn=class{constructor(){this.url=null,this.width=null,this.height=null,this.x=null,this.y=null}},Qn=class{constructor(){this.bitrate=0,this.width=0,this.height=0,this.tilesHor=0,this.tilesVert=0,this.widthPerTile=0,this.heightPerTile=0,this.startNumber=0,this.segmentDuration=0,this.timescale=0,this.templateUrl="",this.id=""}};class Wn{constructor(t){if(this.offset=t._offset,this.type=t.type,this.size=t.size,this.boxes=[],t.boxes)for(let e=0;e<t.boxes.length;e++)this.boxes.push(new Wn(t.boxes[e]));switch(this.isComplete=!0,t.type){case"sidx":if(this.timescale=t.timescale,this.earliest_presentation_time=t.earliest_presentation_time,this.first_offset=t.first_offset,this.references=t.references,t.references){this.references=[];for(let e=0;e<t.references.length;e++){let n={reference_type:t.references[e].reference_type,referenced_size:t.references[e].referenced_size,subsegment_duration:t.references[e].subsegment_duration};this.references.push(n)}}break;case"emsg":this.id=t.id,this.version=1===t.version?1:0,this.value=t.value,this.timescale=t.timescale,this.scheme_id_uri=t.scheme_id_uri,this.presentation_time_delta=1===t.version?t.presentation_time:t.presentation_time_delta,this.event_duration=t.event_duration,this.message_data=t.message_data;break;case"mdhd":this.timescale=t.timescale;break;case"mfhd":this.sequence_number=t.sequence_number;break;case"subs":this.entry_count=t.entry_count,this.entries=t.entries;break;case"tfhd":this.base_data_offset=t.base_data_offset,this.sample_description_index=t.sample_description_index,this.default_sample_duration=t.default_sample_duration,this.default_sample_size=t.default_sample_size,this.default_sample_flags=t.default_sample_flags,this.flags=t.flags;break;case"tfdt":this.version=t.version,this.baseMediaDecodeTime=t.baseMediaDecodeTime,this.flags=t.flags;break;case"trun":if(this.sample_count=t.sample_count,this.first_sample_flags=t.first_sample_flags,this.data_offset=t.data_offset,this.flags=t.flags,this.samples=t.samples,t.samples){this.samples=[];for(let e=0,n=t.samples.length;e<n;e++){let n={sample_size:t.samples[e].sample_size,sample_duration:t.samples[e].sample_duration,sample_composition_time_offset:t.samples[e].sample_composition_time_offset};this.samples.push(n)}}break;case"prft":this.version=t.version,this.reference_track_ID=t.reference_track_ID,this.ntp_timestamp_sec=t.ntp_timestamp_sec,this.ntp_timestamp_frac=t.ntp_timestamp_frac,this.media_time=t.media_time,this.flags=t.flags}}getChildBox(t){for(let e=0;e<this.boxes.length;e++)if(this.boxes[e].type===t)return this.boxes[e]}getChildBoxes(t){let e=[];for(let n=0;n<this.boxes.length;n++)this.boxes[n].type===t&&e.push(this.boxes[n]);return e}}var Yn=Wn;function Kn(){let t,e;function n(t){let n=[];if(!t||!e||"function"!=typeof e.fetchAll)return n;let i,o=e.fetchAll(t);for(let t=0,e=o.length;t<e;t++)i=r(o[t]),i&&n.push(i);return n}function r(t){if(!t)return null;let e=new Yn(t);return t.hasOwnProperty("_incomplete")&&(e.isComplete=!t._incomplete),e}return t={getBox:function(t){return t&&e&&e.boxes&&0!==e.boxes.length&&"function"==typeof e.fetch?r(e.fetch(t)):null},getBoxes:n,setData:function(t){e=t},getLastBox:function(){if(!e||!e.boxes||!e.boxes.length)return null;let t=n(e.boxes[e.boxes.length-1].type);return t.length>0?t[t.length-1]:null}},t}Kn.__dashjs_factory_name="IsoFile";var Xn=k.default.getClassFactory(Kn),$n=n(6877),Zn=class{constructor(t){let{found:e,sizeOfLastCompletedBox:n,sizeOfLastFoundTargetBox:r,startOffsetOfLastCompletedBox:i,startOffsetOfLastFoundTargetBox:o,typeOfLastCompletedBox:a,typeOfLastTargetBox:s}=t;this.found=void 0!==e&&e,this.sizeOfLastCompletedBox=void 0!==n?n:0,this.sizeOfLastFoundTargetBox=void 0!==r?r:0,this.startOffsetOfLastCompletedBox=void 0!==i?i:0,this.startOffsetOfLastFoundTargetBox=void 0!==o?o:0,this.typeOfLastCompletedBox=void 0!==a?a:null,this.typeOfLastTargetBox=void 0!==s?s:null}};function Jn(){let t,e,n=this.context;function r(t){if(!t)return null;void 0===t.fileStart&&(t.fileStart=0);let e=$n.parseBuffer(t),r=Xn(n).create();return r.setData(e),r}function i(t,e){return t[e+3]>>>0|t[e+2]<<8>>>0|t[e+1]<<16>>>0|t[e]<<24>>>0}function o(t,e){return String.fromCharCode(t[e++])+String.fromCharCode(t[e++])+String.fromCharCode(t[e++])+String.fromCharCode(t[e])}return e={findInitRange:function(e){let n,i,o=null;const a=r(e);if(!a)return o;const s=a.getBox("ftyp"),l=a.getBox("moov");return t.debug("Searching for initialization."),l&&l.isComplete&&(n=s?s.offset:l.offset,i=l.offset+l.size-1,o=n+"-"+i,t.debug("Found the initialization.  Range: "+o)),o},findLastTopIsoBoxCompleted:function(t,e,n){if(void 0===n&&(n=0),!e||n+8>=e.byteLength)return new Zn({found:!1});const r=e instanceof ArrayBuffer?new Uint8Array(e):e;let a,s=0,l=0,u=null;for(;n<r.byteLength;){const e=i(r,n),c=o(r,n+4);if(0===e)break;n+e<=r.byteLength&&(t.indexOf(c)>=0?a=new Zn({found:!0,startOffsetOfLastFoundTargetBox:n,sizeOfLastFoundTargetBox:e,typeOfLastTargetBox:c}):(s=n,l=e,u=c)),n+=e}return a||new Zn({found:!1,startOffsetOfLastCompletedBox:s,sizeOfLastCompletedBox:l,typeOfLastCompletedBox:u})},getMediaTimescaleFromMoov:function(t){let e=r(t),n=e?e.getBox("mdhd"):void 0;return n?n.timescale:NaN},getSamplesInfo:function(t){if(!t||0===t.byteLength)return{sampleList:[],lastSequenceNumber:NaN,totalDuration:NaN,numSequences:NaN};let e,n,i,o,a,s,l,u,c,d,f,h,p,m,g,v,y,b=r(t),_=b.getBoxes("moof"),w=b.getBoxes("mfhd");v=b.getBoxes("moof").length,g=w[w.length-1].sequence_number,i=0,s=[];let A=-1,E=-1;for(f=0;f<_.length;f++){let t=_[f],r=t.getChildBoxes("traf");for(c=0;c<r.length;c++){let f=r[c],g=f.getChildBox("tfhd"),v=f.getChildBox("tfdt");a=v.baseMediaDecodeTime;let b=f.getChildBoxes("trun"),_=f.getChildBoxes("subs");for(d=0;d<b.length;d++){let r=b[d];for(i=r.sample_count,m=(g.base_data_offset||0)+(r.data_offset||0),u=0;u<i;u++){l=r.samples[u],e=void 0!==l.sample_duration?l.sample_duration:g.default_sample_duration,o=void 0!==l.sample_size?l.sample_size:g.default_sample_size,n=void 0!==l.sample_composition_time_offset?l.sample_composition_time_offset:0;let i={dts:a,cts:a+n,duration:e,offset:t.offset+m,size:o,subSizes:[o]};if(_)for(h=0;h<_.length;h++){let t=_[h];if(A<t.entry_count-1&&u>E&&(A++,E+=t.entries[A].sample_delta),u==E){i.subSizes=[];let e=t.entries[A];for(p=0;p<e.subsample_count;p++)i.subSizes.push(e.subsamples[p].subsample_size)}}s.push(i),m+=o,a+=e}}y=a-v.baseMediaDecodeTime}}return{sampleList:s,lastSequenceNumber:g,totalDuration:y,numSequences:v}},parse:r},t=(0,P.default)(n).getInstance().getLogger(e),e}Jn.__dashjs_factory_name="BoxParser";var tr=k.default.getSingletonFactory(Jn);function er(t){const e=this.context,n=t.adapter,r=t.baseURLController,i=t.streamInfo,o=t.timelineConverter,a=t.debug,s=t.eventBus,l=t.events,u=t.dashConstants,c=Tt(e).getInstance();let d,f,h,p,m,g,v,y,b;function _(t,e){const i=new Qn;i.id=t.id,i.bitrate=t.bandwidth,i.width=t.width,i.height=t.height,i.tilesHor=1,i.tilesVert=1,t.essentialProperties&&t.essentialProperties.forEach((t=>{if(x.default.THUMBNAILS_SCHEME_ID_URIS.indexOf(t.schemeIdUri)>=0&&t.value){const e=t.value.split("x");2!==e.length||isNaN(e[0])||isNaN(e[1])||(i.tilesHor=parseInt(e[0],10),i.tilesVert=parseInt(e[1],10))}})),e?v.updateSegmentData(t).then((e=>{!function(t,e,i){let a=[];const s=function(t,e){const r=[];let i,a,s,l,u=0;for(i=0,a=t.segments.length;i<a;i++)s=t.segments[i],l=vt(o,n.getIsDynamic(),e,s.startTime,s.duration,s.timescale,s.media,s.mediaRange,u),l&&(r.push(l),l=null,u++);return r}(i,e);e.segments=s,e.fragmentDuration=e.segmentDuration||(e.segments&&e.segments.length>0?e.segments[0].duration:NaN),t.segmentDuration=e.segments[0].duration,t.readThumbnail=function(t,n){let i=null;a.some((e=>{if(e.start<=t&&e.end>t)return i=e.url,!0})),i?n(i):e.segments.some((i=>{if(i.mediaStartTime<=t&&i.mediaStartTime+i.duration>t){const t=r.resolve(e.path);return y.load({method:"get",url:t.url,request:{range:i.mediaRange,responseType:"arraybuffer"},onload:function(t){let e=b.getSamplesInfo(t.target.response),r=new Blob([t.target.response.slice(e.sampleList[0].offset,e.sampleList[0].offset+e.sampleList[0].size)],{type:"image/jpeg"}),o=window.URL.createObjectURL(r);a.push({start:i.mediaStartTime,end:i.mediaStartTime+i.duration,url:o}),n&&n(o)}}),!0}}))}}(i,t,e)})):(i.startNumber=t.startNumber,i.segmentDuration=t.segmentDuration,i.timescale=t.timescale,i.templateUrl=function(t){const e=c.isRelative(t.media)?c.resolve(t.media,r.resolve(t.path).url):t.media;return e?ft(e,t.id):""}(t)),i.tilesHor>0&&i.tilesVert>0&&(i.widthPerTile=i.width/i.tilesHor,i.heightPerTile=i.height/i.tilesVert,f.push(i))}function w(){f=[],h=[],m=-1,g=null,p&&(p.reset(),p=null)}return d={addTracks:function(){if(!i||!n)return;if(g=n.getMediaInfoForType(i,x.default.IMAGE),!g)return;const t=n.getVoRepresentations(g);t&&t.length>0&&t.forEach((t=>{(t.segmentInfoType===S.default.SEGMENT_TEMPLATE&&t.segmentDuration>0&&t.media||t.segmentInfoType===S.default.SEGMENT_TIMELINE)&&_(t),t.segmentInfoType===S.default.SEGMENT_BASE&&_(t,!0),h.push(t)})),f.length>0&&f.sort(((t,e)=>t.bitrate-e.bitrate))},getCurrentTrack:function(){return m<0?null:f[m]},getCurrentTrackIndex:function(){return m},getRepresentations:function(){return h},getThumbnailRequestForTime:function(t){let e;const r=n.getVoRepresentations(g);for(let t=0;t<r.length;t++)if(f[m].id===r[t].id){e=r[t];break}return p.getSegmentRequestForTime(g,e,t)},getTracks:function(){return f},reset:w,setTrackById:function(t){if(!f||0===f.length)return;const e=f.findIndex((e=>e.id===t));-1!==e&&(m=e)},setTrackByIndex:function(t){f&&0!==f.length&&(t>=f.length&&(t=f.length-1),m=t)}},w(),y=Wt(e).create({}),b=tr(e).getInstance(),v=jt(e).create({events:l,eventBus:s,streamInfo:i,timelineConverter:o,dashConstants:u,dashMetrics:t.dashMetrics,segmentBaseController:t.segmentBaseController,type:x.default.IMAGE}),p=At(e).create({streamInfo:i,type:x.default.IMAGE,timelineConverter:o,segmentsController:v,baseURLController:r,debug:a,eventBus:s,events:l,dashConstants:u,urlUtils:c}),p.initialize(!!n&&n.getIsDynamic()),d}er.__dashjs_factory_name="ThumbnailTracks";var nr=k.default.getClassFactory(er);function rr(t){const e=this.context,n=t.streamInfo;let r,i;function o(t){i.setTrackByIndex(t)}function a(){i&&i.reset()}return r={getCurrentTrack:function(){return i.getCurrentTrack()},getCurrentTrackIndex:function(){return i.getCurrentTrackIndex()},getPossibleVoRepresentations:function(){return i.getRepresentations()},getStreamId:function(){return n.id},initialize:function(){i.addTracks();const t=i.getTracks();t&&t.length>0&&o(0)},provide:function(t,e){if("function"!=typeof e)return;const n=i.getCurrentTrack();let r,o;if(!n||n.segmentDuration<=0||null==t)return void e(null);o=i.getThumbnailRequestForTime(t),o&&(n.segmentDuration=o.duration),r=t%n.segmentDuration;const a=Math.floor(r*n.tilesHor*n.tilesVert/n.segmentDuration),s=new Vn;if(s.width=Math.floor(n.widthPerTile),s.height=Math.floor(n.heightPerTile),s.x=Math.floor(a%n.tilesHor)*n.widthPerTile,s.y=Math.floor(a/n.tilesHor)*n.heightPerTile,"readThumbnail"in n)return n.readThumbnail(t,(t=>{s.url=t,e(s)}));if(o)s.url=o.url,n.segmentDuration=NaN;else{const e=Math.floor(t/n.segmentDuration);s.url=function(t,e){const n=e+t.startNumber;let r=ht(t.templateUrl,"Number",n);return r=ht(r,"Time",(n-1)*t.segmentDuration*t.timescale),r=ht(r,"Bandwidth",t.bandwidth),dt(r)}(n,e)}e(s)},reset:a,setTrackByIndex:o,setTrackById:function(t){i.setTrackById(t)}},a(),i=nr(e).create({streamInfo:n,adapter:t.adapter,baseURLController:t.baseURLController,timelineConverter:t.timelineConverter,debug:t.debug,eventBus:t.eventBus,events:t.events,dashConstants:t.dashConstants,dashMetrics:t.dashMetrics,segmentBaseController:t.segmentBaseController}),r}rr.__dashjs_factory_name="ThumbnailController";var ir=k.default.getClassFactory(rr);function or(t){let e;t=t||{};let n=[];const r=(0,C.default)(this.context).getInstance(),i=t.updateEventName,o=t.addBlacklistEventName;function a(t){-1===n.indexOf(t)&&(n.push(t),r.trigger(i,{entry:t}))}function s(t){a(t.entry)}return e={add:a,remove:function(t){const e=n.indexOf(t);-1!==e&&n.splice(e,1)},contains:function(t){return!!(n.length&&t&&t.length)&&-1!==n.indexOf(t)},reset:function(){o&&r.off(o,s,e),n=[]}},o&&r.on(o,s,e),e}or.__dashjs_factory_name="BlackListController";var ar=k.default.getClassFactory(or);const sr=[x.default.VIDEO,x.default.AUDIO,x.default.TEXT,x.default.MUXED,x.default.IMAGE];function lr(t){t=t||{};const e=this.context,n=(0,C.default)(e).getInstance(),r=Tt(e).getInstance(),i=t.manifestModel,o=t.mediaPlayerModel,a=t.dashMetrics,s=t.manifestUpdater,l=t.adapter,u=t.timelineConverter,c=t.capabilities,d=t.errHandler,f=t.abrController,h=t.playbackController,p=t.throughputController,m=t.eventController,g=t.mediaController,v=t.protectionController,y=t.textController,b=t.videoModel;let _=t.streamInfo;const w=t.settings;let A,E,T,k,R,O,M,L,D,N,B,j,z,F,U,q;function H(t,e,n){return new Promise(((r,o)=>{J(),et();let a=b.getElement();const s=[];sr.forEach((e=>{if((e!==x.default.TEXT||t)&&(e!==x.default.VIDEO||!a||a&&/^VIDEO$/i.test(a.nodeName))){const r=n.find((t=>t.mediaInfo.type===e));s.push(V(e,t,r))}})),Promise.all(s).then((()=>{return t=e,new Promise((e=>{const n={},r=T.map((e=>{const n=e.getRepresentation();return e.createBufferSinks(t,n)}));Promise.all(r).then((t=>{t.forEach((t=>{t&&(n[t.getType()]=t)})),e(n)})).catch((()=>{e(n)}))}));var t})).then((e=>{if(0===T.length){const t="No streams to play.";d.error(new G.default(Q.MANIFEST_ERROR_ID_NOSTREAMS_CODE,t,i.getValue())),E.fatal(t)}else ct();t&&y.createTracks(_),r(e)})).catch((t=>{o(t)}))}))}function V(r,a,s){let m,v=l.getAllMediaInfoForType(_,r),b=[],A=null;if(!v||0===v.length)return E.info("No "+r+" data."),Promise.resolve();r===x.default.VIDEO&&(M=!0),r===x.default.AUDIO&&(L=!0);for(let t=0,e=v.length;t<e;t++)A=v[t],r===x.default.TEXT&&A.isEmbedded&&(y.addEmbeddedTrack(_,A),b.push(A)),W(A)&&g.addTrack(A);if(b.length>0&&(g.setInitialMediaSettingsForType(r,_),y.addMediaInfosToBuffer(_,r,b)),v=v.filter((t=>!t.isEmbedded)),0===v.length)return Promise.resolve();if(r===x.default.IMAGE)return N=ir(e).create({streamInfo:_,adapter:l,baseURLController:t.baseURLController,timelineConverter:t.timelineConverter,debug:F,eventBus:n,events:I.default,dashConstants:S.default,dashMetrics:t.dashMetrics,segmentBaseController:t.segmentBaseController}),N.initialize(),Promise.resolve();n.trigger(I.default.STREAM_INITIALIZING,{streamInfo:_,mediaInfo:A}),g.setInitialMediaSettingsForType(r,_);let C=function(n,r){const a=n&&n.length>0?n[0]:null;let s=D.getModel(a?a.type:null);const m=a?a.type:null,v=a?a.mimeType:null,b=a?a.isFragmented:null;let A=Gt(e).create({abrController:f,adapter:l,baseURLController:t.baseURLController,boxParser:z,capabilities:c,dashMetrics:t.dashMetrics,errHandler:d,fragmentModel:s,manifestModel:i,mediaController:g,mediaPlayerModel:o,mimeType:v,playbackController:h,segmentBaseController:t.segmentBaseController,segmentBlacklistController:B,settings:w,streamInfo:_,textController:y,throughputController:p,timelineConverter:u,type:m});return A.initialize(r,M,b),T.push(A),A.setMediaInfoArray(n),m===x.default.TEXT&&y.addMediaInfosToBuffer(_,m,n,s),A}(v,a);if(m=g.getCurrentTrackFor(r,_.id),m){const t=r===x.default.TEXT&&m.isEmbedded?v[0]:m,e=new Ut({newMediaInfo:t,previouslySelectedRepresentation:s});return C.selectMediaInfo(e)}return Promise.resolve()}function W(t){const e=t?t.type:null;let n;return e===x.default.MUXED?(n="Multiplexed representations are intentionally not supported, as they are not compliant with the DASH-AVC/264 guidelines",E.fatal(n),d.error(new G.default(Q.MANIFEST_ERROR_ID_MULTIPLEXED_CODE,n,i.getValue())),!1):!(e!==x.default.TEXT&&e!==x.default.IMAGE&&t.contentProtection&&t.contentProtection.length>0&&!c.supportsEncryptedMedia()&&(d.error(new G.default(Q.CAPABILITY_MEDIAKEYS_ERROR_CODE,Q.CAPABILITY_MEDIAKEYS_ERROR_MESSAGE)),1))}function Y(t){let e=T?T.length:0;for(let n=0;n<e;n++){let e=T[n].getFragmentModel();e.abortRequests(),e.resetInitialSettings(),T[n].reset(!1,t)}y&&y.deactivateStream(_),N&&(N.reset(),N=null),T=[],R=!1,O=!1,dt(!1),X(!1),n.trigger(I.default.STREAM_DEACTIVATED,{streamInfo:_})}function K(t){Y(t),k=!1,M=!1,L=!1,U=!1,q=[]}function X(t){U=t}function $(){return _?_.start:NaN}function Z(){return _?_.id:null}function J(){if(!b||!f)throw new Error(x.default.MISSING_CONFIG_ERROR)}function tt(t){t.error&&(d.error(t.error),E.fatal(t.error.message))}function et(){if(m){const t=l.getEventsFor(_);t&&t.length>0&&m.addInlineEvents(t,_.id)}}function nt(t){let e=rt(t);return e?e.getMediaInfo():null}function rt(t){return t?T.find((e=>e.getType()===t)):null}function it(){let t=lt();const e=t.length;if(0!==e){for(let n=0;n<e;n++)if(!t[n].isBufferingCompleted()&&(t[n].getType()===x.default.AUDIO||t[n].getType()===x.default.VIDEO))return void E.debug("onBufferingCompleted - One streamProcessor has finished but",t[n].getType(),"one is not buffering completed");E.debug("onBufferingCompleted - trigger STREAM_BUFFERING_COMPLETED"),O=!0,n.trigger(I.default.STREAM_BUFFERING_COMPLETED,{streamInfo:_},{streamInfo:_})}else E.warn("onBufferingCompleted - can't trigger STREAM_BUFFERING_COMPLETED because no streamProcessor is defined")}function ot(t){m&&m.addInbandEvents(t.events,_.id)}function at(t){return t&&t.type?st(t.type):null}function st(t){return t?lt().filter((function(e){return e.getType()===t}))[0]:null}function lt(){let t,e,n=[];for(let r=0;r<T.length;r++)e=T[r],t=e.getType(),t!==x.default.AUDIO&&t!==x.default.VIDEO&&t!==x.default.TEXT||n.push(e);return n}function ut(){const t=T.length;for(let e=0;e<t&&T[e];e++)T[e].getScheduleController().startScheduleTimer()}function ct(){const t=T.length;if(v){v.clearMediaInfoArray();for(let e=0;e<t&&T[e];e++){const t=T[e].getType(),n=T[e].getMediaInfo();if(t===x.default.AUDIO||t===x.default.VIDEO||t===x.default.TEXT&&n&&n.isFragmented){let t=T[e].getMediaInfo();t&&v.initializeForMedia(t)}}v.handleKeySystemFromManifest()}k||(k=!0,b.waitForReadyState(x.default.VIDEO_ELEMENT_READY_STATES.HAVE_METADATA,(()=>{n.trigger(I.default.STREAM_INITIALIZED,{streamInfo:_})})))}function dt(t){j=t}function ft(){return j}return A={activate:function(t,e){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];return new Promise(((i,o)=>{if(!R)return ft()?(R=!0,n.trigger(I.default.STREAM_ACTIVATED,{streamInfo:_}),void i(e)):void function(t,e){return H(t,e,arguments.length>2&&void 0!==arguments[2]?arguments[2]:[])}(t,e,r).then((t=>{R=!0,r&&r.length>0&&ut(),n.trigger(I.default.STREAM_ACTIVATED,{streamInfo:_}),i(t)})).catch((t=>{o(t)}));i(e)}))},checkAndHandleCompletedBuffering:function(){O||T.forEach((t=>{t.checkAndHandleCompletedBuffering()}))},deactivate:Y,getAdapter:function(){return l},getCurrentMediaInfoForType:function(t){const e=st(t);return e?e.getMediaInfo():null},getCurrentRepresentationForType:function(t){const e=st(t);return e?e.getRepresentation():null},getDuration:function(){return _?_.duration:NaN},getHasAudioTrack:function(){return L},getHasFinishedBuffering:function(){return O},getHasVideoTrack:function(){return M},getId:Z,getIsActive:function(){return R},getIsEndedEventSignaled:function(){return U},getPreloaded:ft,getRepresentationForTypeById:function(t,e){let n;if(t===x.default.IMAGE){if(!N)return null;n=N.getPossibleVoRepresentations()}else{const e=function(t){let e=rt(t);return e?e.getAllMediaInfos():[]}(t);n=e.flatMap((t=>f.getPossibleVoRepresentationsFilteredBySettings(t,!0)))}if(!n||0===n.length)return null;const r=n.filter((t=>t.id===e));return r&&r.length>0?r[0]:null},getRepresentationForTypeByIndex:function(t,e){let n;if(t===x.default.IMAGE){if(!N)return null;n=N.getPossibleVoRepresentations()}else{const e=nt(t);n=f.getPossibleVoRepresentationsFilteredBySettings(e,!0)}return n[e=Math.max(Math.min(e,n.length-1),0)]},getRepresentationsByType:function(t){if(J(),t===x.default.IMAGE)return N?N.getPossibleVoRepresentations():[];const e=nt(t);return f.getPossibleVoRepresentationsFilteredBySettings(e,!0)},getStartTime:$,getStreamId:function(){return _?_.id:null},getStreamInfo:function(){return _},getStreamProcessors:lt,getThumbnailController:function(){return N},initialize:function(){n.on(I.default.BUFFERING_COMPLETED,it,A),n.on(I.default.INBAND_EVENTS,ot,A),v&&(n.on(I.default.KEY_ERROR,tt,A),n.on(I.default.SERVER_CERTIFICATE_UPDATED,tt,A),n.on(I.default.LICENSE_REQUEST_COMPLETE,tt,A),n.on(I.default.KEY_SYSTEM_SELECTED,tt,A),n.on(I.default.KEY_SESSION_CREATED,tt,A)),y.initializeForStream(_),n.trigger(I.default.STREAM_UPDATED,{streamInfo:_})},initializeForTextWithMediaSource:function(t){return new Promise(((e,n)=>{V(x.default.TEXT,t,null).then((()=>function(){const t=st(x.default.TEXT);return t?t.createBufferSinks():Promise.resolve()}())).then((()=>{y.createTracks(_),e()})).catch((t=>{n(t)}))}))},prepareQualityChange:function(t){const e=st(t.mediaType);e&&e.prepareQualityChange(t)},prepareTrackChange:function(t){if(!R||!_)return;O=!1;let e=t.newMediaInfo,n=i.getValue(),r=at(e);if(!r)return;let o=h.getTime();if(E.info("Stream -  Process track changed at current time "+o),n.refreshManifestOnSwitchTrack)q.push(t),s.getIsUpdating()||(E.debug("Stream -  Refreshing manifest for switch track"),s.refreshManifest());else{r.clearScheduleTimer(),r.setTrackSwitchInProgress(!0);const n=r.getRepresentation();r.selectMediaInfo(new Ut({newMediaInfo:e})).then((()=>{const e=!!(t&&t.options&&t.options.hasOwnProperty("replaceBuffer"))&&t.options.replaceBuffer;return r.prepareTrackSwitch(n,e)})).then((()=>{r.setTrackSwitchInProgress(!1)}))}},reset:function(t){D&&(D.reset(),D=null),f&&_&&f.clearDataForStream(_.id),B&&(B.reset(),B=null),y&&_&&y.clearDataForStream(_.id),g&&_&&g.clearDataForStream(_.id),K(t),_=null,n.off(I.default.BUFFERING_COMPLETED,it,A),n.off(I.default.INBAND_EVENTS,ot,A),v&&(n.off(I.default.KEY_ERROR,tt,A),n.off(I.default.SERVER_CERTIFICATE_UPDATED,tt,A),n.off(I.default.LICENSE_REQUEST_COMPLETE,tt,A),n.off(I.default.KEY_SYSTEM_SELECTED,tt,A),n.off(I.default.KEY_SESSION_CREATED,tt,A))},setIsEndedEventSignaled:X,setMediaSource:function(t){return new Promise(((e,n)=>{const r=[];for(let e=0;e<T.length;)W(T[e].getMediaInfo())?(r.push(T[e].setMediaSource(t)),e++):(T[e].reset(),T.splice(e,1));Promise.all(r).then((()=>{for(let t=0;t<T.length;t++)T[t].dischargePreBuffer();if(0===T.length){const t="No streams to play.";d.error(new G.default(Q.MANIFEST_ERROR_ID_NOSTREAMS_CODE,t+"nostreams",i.getValue())),E.fatal(t)}e()})).catch((t=>{E.error(t),n(t)}))}))},startPreloading:function(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];return new Promise(((r,i)=>{ft()?i():(E.info(`[startPreloading] Preloading next stream with id ${Z()}`),dt(!0),H(t,e,n).then((()=>{for(let t=0;t<T.length&&T[t];t++)T[t].setExplicitBufferingTime($()),T[t].getScheduleController().startScheduleTimer();r()})).catch((()=>{dt(!1),i()})))}))},startScheduleControllers:ut,triggerProtectionError:function(t){tt(t)},updateData:function(t){return new Promise((e=>{_=t,m&&et();let r,i=[];for(let t=0,e=T.length;t<e;t++){let e=T[t];const n=e.getMediaInfo();i.push(e.updateStreamInfo(_));let r=l.getAllMediaInfoForType(_,e.getType());if(r=r.filter((t=>!t.isEmbedded)),e.setMediaInfoArray(r),r)for(let t=0;t<r.length;t++)l.areMediaInfosEqual(n,r[t])&&i.push(e.selectMediaInfo(new Ut({newMediaInfo:r[t]})))}Promise.all(i).then((()=>{let t=[];for(;q.length>0;){let e=q.pop(),n=e.newMediaInfo;if(r=at(e.oldMediaInfo),!r)return;const i=r.getRepresentation();r.setTrackSwitchInProgress(!0),t.push(r.prepareTrackSwitch(i)),t.push(r.selectMediaInfo(new Ut({newMediaInfo:n})))}return Promise.all(t)})).then((()=>{ct(),r&&r.setTrackSwitchInProgress(!1),n.trigger(I.default.STREAM_UPDATED,{streamInfo:_}),e()})).catch((t=>{d.error(t)}))}))}},function(){try{F=(0,P.default)(e).getInstance(),E=F.getLogger(A),K(),z=tr(e).getInstance(),B=ar(e).create({updateEventName:I.default.SEGMENT_LOCATION_BLACKLIST_CHANGED,addBlacklistEventName:I.default.SEGMENT_LOCATION_BLACKLIST_ADD}),D=Hn(e).create({streamInfo:_,mediaPlayerModel:o,dashMetrics:a,errHandler:d,settings:w,boxParser:z,dashConstants:S.default,urlUtils:r})}catch(t){throw t}}(),A}lr.__dashjs_factory_name="Stream";var ur=k.default.getClassFactory(lr),cr=class{constructor(t){this.url=t||null,this.type=L.HTTPRequest.CONTENT_STEERING_TYPE,this.responseType="json"}},dr=class{constructor(){this.version=null,this.ttl=300,this.reloadUri=null,this.pathwayPriority=[],this.pathwayClones=[]}};function fr(){const t=this.context,e=Tt(t).getInstance();let n,r,i,o,a,s,l,u,c,d,f,h,p,m,g;function v(t){_(t,"baseUrl")}function y(t){_(t,"location")}function b(t){var e,n;t&&t.throughputValues&&t.throughputValues.serviceLocation&&(e=t.throughputValues.serviceLocation,n=t.throughputValues,a[e]||(a[e]=[]),a[e].push(n),a[e].length>4&&a[e].shift())}function _(t,e){if(t&&t.request&&t.request.serviceLocation){const n=t.request.serviceLocation;-1===o[e].all.indexOf(n)&&o[e].all.push(n),o[e].current=n}}function w(){const t=f.getValue();let e=g.getContentSteering(t);return e||(e=h.getServiceDescriptionSettings().contentSteering),e}function A(){return new Promise((t=>{try{const n=w();if(!n||!n.serverUrl)return void t();const s=function(t){let n=t.serverUrl;i&&i.reloadUri&&(n=e.isRelative(i.reloadUri)?e.resolve(i.reloadUri,t.serverUrl):i.reloadUri);const r=[],s=o.baseUrl.all.concat(o.location.all);if(s.length>0){const t=s.map((t=>{const e=function(t){if(!t||!a[t]||0===a[t].length)return-1;const e=p.getArithmeticMean(a[t],a[t].length,!0);return parseInt(1e3*e)}(t);return{serviceLocation:t,throughput:e}}));t.sort(((t,e)=>e.throughput-t.throughput));let e="",n="";t.forEach(((t,r)=>{0!==r&&(e=`${e},`,t.throughput>-1&&(n=`${n},`)),e=`${e}${t.serviceLocation}`,t.throughput>-1&&(n=`${n}${t.throughput}`)})),r.push({key:"_DASH_pathway",value:`"${e}"`}),r.push({key:"_DASH_throughput",value:n})}return n=Vt.default.addAdditionalQueryParameterToUrl(n,r),n}(n),u=new cr(s);l.load({request:u,success:e=>{!function(t){t&&t[S.default.CONTENT_STEERING_RESPONSE.VERSION]&&1===parseInt(t[S.default.CONTENT_STEERING_RESPONSE.VERSION])&&(i=new dr,i.version=t[S.default.CONTENT_STEERING_RESPONSE.VERSION],t[S.default.CONTENT_STEERING_RESPONSE.TTL]&&!isNaN(t[S.default.CONTENT_STEERING_RESPONSE.TTL])&&(i.ttl=t[S.default.CONTENT_STEERING_RESPONSE.TTL]),t[S.default.CONTENT_STEERING_RESPONSE.RELOAD_URI]&&(i.reloadUri=t[S.default.CONTENT_STEERING_RESPONSE.RELOAD_URI]),t[S.default.CONTENT_STEERING_RESPONSE.PATHWAY_PRIORITY]&&(i.pathwayPriority=t[S.default.CONTENT_STEERING_RESPONSE.PATHWAY_PRIORITY]),t[S.default.CONTENT_STEERING_RESPONSE.PATHWAY_CLONES]&&(i.pathwayClones=t[S.default.CONTENT_STEERING_RESPONSE.PATHWAY_CLONES],i.pathwayClones=i.pathwayClones.filter((t=>function(t){return t[S.default.CONTENT_STEERING_RESPONSE.BASE_ID]&&t[S.default.CONTENT_STEERING_RESPONSE.ID]&&t[S.default.CONTENT_STEERING_RESPONSE.URI_REPLACEMENT]&&t[S.default.CONTENT_STEERING_RESPONSE.URI_REPLACEMENT][S.default.CONTENT_STEERING_RESPONSE.HOST]}(t)))),T())}(e),m.trigger(R.default.CONTENT_STEERING_REQUEST_COMPLETED,{currentSteeringResponseData:i,url:s}),t()},error:(e,n,o,a)=>{!function(t,e){try{switch(r.warn("Error fetching data from content steering server",t),e.status){case 410:break;case 429:const t=e&&e.getResponseHeader?e.getResponseHeader("retry-after"):null;null!==t&&(i||(i={}),i.ttl=parseInt(t)),T();break;default:T()}}catch(t){r.error(t)}}(e,a),t(e)},complete:()=>{o.baseUrl.all=E(o.baseUrl),o.location.all=E(o.location)}})}catch(e){t(e)}}))}function E(t){return t.all&&0!==t.all.length&&t.current?t.all.filter((e=>e===t.current)):[]}function x(t){try{const e=[];return t&&0!==t.length&&i&&i.pathwayClones&&0!==i.pathwayClones.length?(i.pathwayClones.forEach((n=>{let r=t.filter((t=>n[S.default.CONTENT_STEERING_RESPONSE.BASE_ID]===t.serviceLocation)),i=null;if(r&&r.length>0&&(i=r[0]),i){const t=new URL(i.url);let r=n[S.default.CONTENT_STEERING_RESPONSE.URI_REPLACEMENT][S.default.CONTENT_STEERING_RESPONSE.HOST];r=Vt.default.stringHasProtocol(r)?r:`${t.protocol}//${r}`;const o={synthesizedUrl:`${r}${t.pathname}`,serviceLocation:n[S.default.CONTENT_STEERING_RESPONSE.ID],queryParams:n[S.default.CONTENT_STEERING_RESPONSE.URI_REPLACEMENT][S.default.CONTENT_STEERING_RESPONSE.PARAMS],reference:i};e.push(o)}})),e):e}catch(t){return r.error(t),[]}}function T(){i&&i.ttl&&!isNaN(i.ttl)&&(s&&clearTimeout(s),s=setTimeout((()=>{A()}),1e3*i.ttl))}function C(){s&&clearTimeout(s),s=null}function I(){i=null,a={},o={baseUrl:{current:null,all:[]},location:{current:null,all:[]}},C()}return n={reset:function(){I(),m.off(R.default.FRAGMENT_LOADING_STARTED,v,n),m.off(R.default.MANIFEST_LOADING_STARTED,y,n),m.off(R.default.THROUGHPUT_MEASUREMENT_STORED,b,n)},setConfig:function(t){t&&(t.adapter&&(g=t.adapter),t.errHandler&&(u=t.errHandler),t.dashMetrics&&(c=t.dashMetrics),t.mediaPlayerModel&&(d=t.mediaPlayerModel),t.manifestModel&&(f=t.manifestModel),t.serviceDescriptionController&&(h=t.serviceDescriptionController),t.throughputController&&(p=t.throughputController),t.eventBus&&(m=t.eventBus))},loadSteeringData:A,getCurrentSteeringResponseData:function(){return i},shouldQueryBeforeStart:function(){const t=w();return!!t&&t.queryBeforeStart},getSteeringDataFromManifest:w,stopSteeringRequestTimer:C,getSynthesizedBaseUrlElements:function(t){try{return x(t).map((t=>{const e=new Jt(t.synthesizedUrl,t.serviceLocation);return e.queryParams=t.queryParams,e.dvbPriority=t.reference.dvbPriority,e.dvbWeight=t.reference.dvbWeight,e.availabilityTimeOffset=t.reference.availabilityTimeOffset,e.availabilityTimeComplete=t.reference.availabilityTimeComplete,e}))}catch(t){return r.error(t),[]}},getSynthesizedLocationElements:function(t){try{return x(t).map((t=>{const e=new le(t.synthesizedUrl,t.serviceLocation);return e.queryParams=t.queryParams,e}))}catch(t){return r.error(t),[]}},initialize:function(){l=zn(t).create({errHandler:u,dashMetrics:c,mediaPlayerModel:d,errors:Q}),m.on(R.default.FRAGMENT_LOADING_STARTED,v,n),m.on(R.default.MANIFEST_LOADING_STARTED,y,n),m.on(R.default.THROUGHPUT_MEASUREMENT_STORED,b,n)}},r=(0,P.default)(t).getInstance().getLogger(n),I(),n}fr.__dashjs_factory_name="ContentSteeringController";var hr=k.default.getSingletonFactory(fr);function pr(){const t=this.context,e=(0,W.default)(t).getInstance();let n,r,i;return n={select:function(t){if(!t||0===t.length)return null;let n=null;return e.get().streaming.applyContentSteering&&(n=function(t){const e=i.getCurrentSteeringResponseData();return e&&e.pathwayPriority&&e.pathwayPriority.length>0?function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=0,i=null;for(;n<t.length;){const o=t[n],a=e.findIndex((t=>t.serviceLocation&&t.serviceLocation===o));if(-1!==a&&!r.contains(e[a].serviceLocation)){i=e[a];break}n+=1}return i}(e.pathwayPriority,t):null}(t)),n||(n=function(t){return t[0]}(t)),n},setConfig:function(t){t.blacklistController&&(r=t.blacklistController),t.contentSteeringController&&(i=t.contentSteeringController)},reset:function(){r.reset()}},r=ar(t).create({updateEventName:I.default.SERVICE_LOCATION_LOCATION_BLACKLIST_CHANGED,addBlacklistEventName:I.default.SERVICE_LOCATION_LOCATION_BLACKLIST_ADD}),i=hr(t).getInstance(),n}pr.__dashjs_factory_name="LocationSelector";var mr=k.default.getClassFactory(pr);function gr(){const t=this.context,e=(0,C.default)(t).getInstance(),n=Tt(t).getInstance();let r,i,o,a,s,l,u,c,d,f,h,p,m,g;function v(){o=NaN,u=!1,s=!0,l=!1,y()}function y(){null!==a&&(clearTimeout(a),a=null)}function b(t){y(),l||(isNaN(t)&&!isNaN(o)&&(t=1e3*o),isNaN(t)||(i.debug("Refresh manifest in "+t+" milliseconds."),a=setTimeout(A,t)))}function _(){let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];u=!0;const e=d.getValue();let r=e.url;r&&(r=Vt.default.removeQueryParameterFromUrl(r,x.default.CMCD_QUERY_KEY));let i=null;const o=h.getPatchLocation(e),a=f.select(o);let s=null;if(a&&!t)r=a.url,i=a.serviceLocation,s=a.queryParams;else{const t=function(t){const e=h.getLocation(t),n=m.getSynthesizedLocationElements(e);return e.concat(n)}(e),n=f.select(t);n&&(r=n.url,i=n.serviceLocation,s=n.queryParams)}n.isRelative(r)&&(r=n.resolve(r,e.url)),c.load(r,i,s)}function w(t){if(t){if(h.getIsPatch(t)){let e=t;t=d.getValue();let n=h.isPatchValid(t,e),r=n;if(n){let n=h.getPublishTime(t);h.applyPatchToManifest(t,e);let i=h.getPublishTime(t);r=n.getTime()!==i.getTime()}if(!r)return i.debug("Patch provided is invalid, performing full manifest refresh"),void _(!0);t.loadedTime=new Date}}else(t=d.getValue()).loadedTime=new Date;if(d.getValue()&&d.getValue().type===S.default.DYNAMIC&&t.type===S.default.STATIC)return e.trigger(I.default.DYNAMIC_TO_STATIC),u=!1,void(l=!0);d.setValue(t);const n=new Date,r=(n.getTime()-t.loadedTime.getTime())/1e3;o=h.getManifestUpdatePeriod(t,r),1e3*o>2147483647&&(o=2147483.647),e.trigger(I.default.MANIFEST_UPDATED,{manifest:t}),i.info("Manifest has been refreshed at "+n+"["+n.getTime()/1e3+"] "),s||b()}function A(){s||(u?b(g.get().streaming.manifestUpdateRetryInterval):_())}function E(t){t.error?t.error.code===Q.MANIFEST_LOADER_PARSING_FAILURE_ERROR_CODE&&p.error(t.error):w(t.manifest)}function T(){s=!1,b()}function k(){s=!g.get().streaming.scheduling.scheduleWhilePaused,s&&y()}function O(){u=!1}return r={initialize:function(){v(),e.on(I.default.STREAMS_COMPOSED,O,this),e.on(R.default.PLAYBACK_STARTED,T,this),e.on(R.default.PLAYBACK_PAUSED,k,this),e.on(I.default.INTERNAL_MANIFEST_LOADED,E,this)},setManifest:function(t){w(t)},refreshManifest:_,getIsUpdating:function(){return u},setConfig:function(t){t&&(t.manifestModel&&(d=t.manifestModel),t.adapter&&(h=t.adapter),t.manifestLoader&&(c=t.manifestLoader),t.errHandler&&(p=t.errHandler),t.locationSelector&&(f=t.locationSelector),t.settings&&(g=t.settings),t.contentSteeringController&&(m=t.contentSteeringController))},reset:function(){e.off(R.default.PLAYBACK_STARTED,T,this),e.off(R.default.PLAYBACK_PAUSED,k,this),e.off(I.default.STREAMS_COMPOSED,O,this),e.off(I.default.INTERNAL_MANIFEST_LOADED,E,this),v()}},i=(0,P.default)(t).getInstance().getLogger(r),f=mr(t).create(),r}gr.__dashjs_factory_name="ManifestUpdater";var vr=k.default.getClassFactory(gr);function yr(){const t=this.context,e=(0,C.default)(t).getInstance(),n=Tt(t).getInstance();let r,i,o,a,s,l,u,c,d,f,h,p,m,g,v,y;function b(){c=[],d=[],f=null,h=null,m=null,p=NaN,o=!1,a=!1,g=s.get().streaming.utcSynchronization.timeBetweenSyncAttempts}function _(){s.get().streaming.utcSynchronization.enabled&&!o&&!a&&m&&m.value&&m.schemeIdUri&&!isNaN(p)&&!isNaN(s.get().streaming.utcSynchronization.backgroundAttempts)&&(h&&(Date.now()-h)/1e3<30||(c=[],a=!0,w(isNaN(s.get().streaming.utcSynchronization.backgroundAttempts)?2:s.get().streaming.utcSynchronization.backgroundAttempts)))}function w(t){try{if(t<=0)return void B();const e=Date.now();l[m.schemeIdUri](m.value,(function(n){const r=Date.now(),i=E(e,r,n);c.push(i),w(t-1)}),(function(){B()}))}catch(t){B()}}function A(){let t=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:null)||0;if(!d||0===d.length||t>=d.length)return void x();let e=d[t];if(e)if(l.hasOwnProperty(e.schemeIdUri)){const n=(new Date).getTime();l[e.schemeIdUri](e.value,(function(t){const r=(new Date).getTime(),i=E(n,r,t);m=e,x(i)}),(function(){A(t+1)}))}else A(t+1);else x()}function E(t,e,n){return n-(e-(e-t)/2)}function x(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:NaN,e=isNaN(t);e&&s.get().streaming.utcSynchronization.useManifestDateHeaderTimeSource?function(){let t=u.getLatestMPDRequestHeaderValueByID("Date"),e=null!==t?new Date(t).getTime():Number.NaN;isNaN(e)?N(!0):N(!1,e-Date.now())}():N(e,t)}function S(t){let e=Date.parse(t);return isNaN(e)&&(e=function(t){let e,n,r=/^([0-9]{4})-([0-9]{2})-([0-9]{2})T([0-9]{2}):([0-9]{2})(?::([0-9]*)(\.[0-9]*)?)?(?:([+\-])([0-9]{2})([0-9]{2}))?/.exec(t);return e=Date.UTC(parseInt(r[1],10),parseInt(r[2],10)-1,parseInt(r[3],10),parseInt(r[4],10),parseInt(r[5],10),r[6]&&(parseInt(r[6],10)||0),r[7]&&1e3*parseFloat(r[7])||0),r[9]&&r[10]&&(n=60*parseInt(r[9],10)+parseInt(r[10],10),e+=("+"===r[8]?-1:1)*n*60*1e3),new Date(e).getTime()}(t)),e}function T(t){return Date.parse(t)}function k(t){return Date.parse(t)}function R(t,e,n){n()}function O(t,e,n){let r=S(t);isNaN(r)?n():e(r)}function M(t,e,r,i,o){let a,s,l=!1,u=new XMLHttpRequest,c=o?L.HTTPRequest.HEAD:L.HTTPRequest.GET,d=e.match(/\S+/g);if(e=d.shift(),a=function(){l||(l=!0,d.length?M(t,d.join(" "),r,i,o):i())},s=function(){let e,n;200===u.status&&(e=o?u.getResponseHeader("Date"):u.response,n=t(e),isNaN(n)||(r(n),l=!0))},n.isRelative(e)){const t=y.resolve();t&&(e=n.resolve(e,t.url))}u.open(c,e),u.timeout=5e3,u.onload=s,u.onloadend=a,u.send()}function D(t,e,n){M(k,t,e,n,!0)}function N(t,n){if(isNaN(p)||isNaN(n)||t||function(t){try{const e=j(t),n=isNaN(g)?30:g,r=isNaN(s.get().streaming.utcSynchronization.timeBetweenSyncAttemptsAdjustmentFactor)?2:s.get().streaming.utcSynchronization.timeBetweenSyncAttemptsAdjustmentFactor,o=isNaN(s.get().streaming.utcSynchronization.maximumTimeBetweenSyncAttempts)?600:s.get().streaming.utcSynchronization.maximumTimeBetweenSyncAttempts,a=isNaN(s.get().streaming.utcSynchronization.minimumTimeBetweenSyncAttempts)?2:s.get().streaming.utcSynchronization.minimumTimeBetweenSyncAttempts;let l;e?(l=Math.min(n*r,o),i.debug(`Increasing timeBetweenSyncAttempts to ${l}`)):(l=Math.max(n/r,a),i.debug(`Decreasing timeBetweenSyncAttempts to ${l}`)),g=l}catch(t){}}(n),!t&&!isNaN(n)){f=Date.now(),o=!1;const t=isNaN(p);p=n,t&&_(),i.debug(`Completed UTC sync. Setting client - server offset to ${n}`)}t&&(m=null,o=!1,v.error(new G.default(Q.TIME_SYNC_FAILED_ERROR_CODE,Q.TIME_SYNC_FAILED_ERROR_MESSAGE))),e.trigger(I.default.UPDATE_TIME_SYNC_OFFSET,{offset:n}),e.trigger(I.default.TIME_SYNCHRONIZATION_COMPLETED)}function B(){if(!c||0===c.length)return;const t=c.reduce(((t,e)=>t+e),0)/c.length;j(t)?i.debug("Completed background UTC sync. Offset is within allowed threshold and is not adjusted."):(i.debug(`Completed background UTC sync. Setting client - server offset to ${t}`),p=t,e.trigger(I.default.UPDATE_TIME_SYNC_OFFSET,{offset:p})),a=!1,h=Date.now()}function j(t){try{if(isNaN(p))return!0;const e=s.get().streaming.utcSynchronization.maximumAllowedDrift&&!isNaN(s.get().streaming.utcSynchronization.maximumAllowedDrift)?s.get().streaming.utcSynchronization.maximumAllowedDrift:100;return t>=p-e&&t<=p+e}catch(t){return!0}}return r={initialize:function(){b(),l={"urn:mpeg:dash:utc:http-head:2014":D,"urn:mpeg:dash:utc:http-xsdate:2014":M.bind(null,S),"urn:mpeg:dash:utc:http-iso:2014":M.bind(null,T),"urn:mpeg:dash:utc:direct:2014":O,"urn:mpeg:dash:utc:http-head:2012":D,"urn:mpeg:dash:utc:http-xsdate:2012":M.bind(null,S),"urn:mpeg:dash:utc:http-iso:2012":M.bind(null,T),"urn:mpeg:dash:utc:direct:2012":O,"urn:mpeg:dash:utc:http-ntp:2014":R,"urn:mpeg:dash:utc:ntp:2014":R,"urn:mpeg:dash:utc:sntp:2014":R}},attemptSync:function(t,n){d=t,o||(function(t){try{if(!t||!s.get().streaming.utcSynchronization.enabled)return!1;const e=isNaN(g)?30:g;return!(f&&e&&!isNaN(e))||(Date.now()-f)/1e3>=e}catch(t){return!0}}(n)?(o=!0,A()):e.trigger(I.default.TIME_SYNCHRONIZATION_COMPLETED))},setConfig:function(t){t&&(t.dashMetrics&&(u=t.dashMetrics),t.baseURLController&&(y=t.baseURLController),t.errHandler&&(v=t.errHandler),t.settings&&(s=t.settings))},reset:function(){b(),e.off(I.default.ATTEMPT_BACKGROUND_SYNC,_,r)}},i=(0,P.default)(t).getInstance().getLogger(r),e.on(I.default.ATTEMPT_BACKGROUND_SYNC,_,r),r}yr.__dashjs_factory_name="TimeSyncController";const br=k.default.getSingletonFactory(yr);br.HTTP_TIMEOUT_MS=5e3,k.default.updateSingletonFactory(yr.__dashjs_factory_name,br);var _r=br;function wr(){let t,e,n,r,i;const o=this.context,a=(0,C.default)(o).getInstance();return t={attachMediaSource:function(t){let n=window.URL.createObjectURL(e);return t.setSource(n),"managedMediaSource"===r&&(t.setDisableRemotePlayback(!0),e.addEventListener("startstreaming",(()=>{a.trigger(R.default.MANAGED_MEDIA_SOURCE_START_STREAMING)})),e.addEventListener("endstreaming",(()=>{a.trigger(R.default.MANAGED_MEDIA_SOURCE_END_STREAMING)}))),n},createMediaSource:function(){let t="WebKitMediaSource"in window,n="MediaSource"in window;return"ManagedMediaSource"in window?(e=new ManagedMediaSource,r="managedMediaSource",i.info("Created ManagedMediaSource")):n?(e=new MediaSource,r="mediaSource",i.info("Created MediaSource")):t&&(e=new WebKitMediaSource,i.info("Created WebkitMediaSource")),e},detachMediaSource:function(t){t.setSource(null)},setConfig:function(t){t&&t.settings&&(n=t.settings)},setDuration:function t(r){e&&"open"===e.readyState&&(null===r&&isNaN(r)||e.duration!==r&&(r!==1/0||n.get().streaming.buffer.mediaSourceDurationInfinity||(r=Math.pow(2,32)),function(t){let e=t.sourceBuffers;for(let t=0;t<e.length;t++)if(e[t].updating)return!0;return!1}(e)?setTimeout(t.bind(null,r),50):(i.info("Set MediaSource duration:"+r),e.duration=r)))},setSeekable:function(t,n){e&&"function"==typeof e.setLiveSeekableRange&&"function"==typeof e.clearLiveSeekableRange&&"open"===e.readyState&&t>=0&&t<n&&(e.clearLiveSeekableRange(),e.setLiveSeekableRange(t,n))},signalEndOfStream:function(t){if(!t||"open"!==t.readyState)return;let e=t.sourceBuffers;for(let t=0;t<e.length;t++){if(e[t].updating)return;if(0===e[t].buffered.length)return}i.info("call to mediaSource endOfStream"),t.endOfStream()}},i=(0,P.default)(o).getInstance().getLogger(t),t}wr.__dashjs_factory_name="MediaSourceController";var Ar=k.default.getSingletonFactory(wr);function Er(){const t="urn:mpeg:dash:event:2012",e=1,n="urn:mpeg:dash:event:callback:2015",r=1,i="updated",o="added",a=this.context,s=(0,C.default)(a).getInstance();let l,u,c,d,f,h,p,m,g,v,y;function b(){if(!p||!m)throw new Error("setConfig function has to be called previously")}function _(){y=!1,c={},d={},f=null,v=!1,h=Date.now()/1e3}function w(){try{if(!v){v=!0;const t=m.getTime();let e=t-h;e=h>0?Math.max(0,e):0,A(d,e,t),A(c,e,t),E(d),E(c),h=t,v=!1}}catch(t){v=!1,u.error(t)}}function A(t,e,n){try{const r=function(r){if(void 0!==r){const i=isNaN(r.duration)?0:r.duration;r.calculatedPresentationTime<=n&&r.calculatedPresentationTime+e+i>=n?O(r,R.default.EVENT_MODE_ON_START):(k(n,i+e,r.calculatedPresentationTime)||function(t){try{const e=t.eventStream.period.start+t.eventStream.period.duration;return t.calculatedPresentationTime>e}catch(t){return u.error(t),!1}}(r))&&(u.debug(`Removing event ${r.id} from period ${r.eventStream.period.id} as it is expired or invalid`),function(t,e){try{const n=e.eventStream.schemeIdUri,r=e.eventStream.period.id,i=e.eventStream.value,o=e.id;t[r][n]=t[r][n].filter((t=>i&&t.eventStream.value&&t.eventStream.value!==i||t.id!==o)),0===t[r][n].length&&delete t[r][n]}catch(t){u.error(t)}}(t,r))}};I(t,r)}catch(t){u.error(t)}}function E(t){try{for(const e in t)t.hasOwnProperty(e)&&0===Object.keys(t[e]).length&&delete t[e]}catch(t){u.error(t)}}function x(t,e){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=t.eventStream.schemeIdUri,a=t.eventStream.value,s=t.id;let l="discarded";e[r]||(e[r]=[]);const u=e[r].findIndex((t=>(!a||t.eventStream.value&&t.eventStream.value===a)&&t.id===s));if(-1===u)e[r].push(t),t.triggeredReceivedEvent=!1,t.triggeredStartEvent=!1,l=o;else if(n){const n=e[r][u];t.triggeredReceivedEvent=n.triggeredReceivedEvent,t.triggeredStartEvent=n.triggeredStartEvent,e[r][u]=t,l=i}return l}function S(t){try{if(t.eventStream.value==e){const e=t.calculatedPresentationTime;let n;n=4294967295==t.calculatedPresentationTime?NaN:t.calculatedPresentationTime+t.duration,s.trigger(R.default.MANIFEST_VALIDITY_CHANGED,{id:t.id,validUntil:e,newDuration:n,newManifestValidAfter:NaN},{mode:R.default.EVENT_MODE_ON_START})}}catch(t){u.error(t)}}function T(t){try{const e=m.getTime();I(t,(function(t){const n=t.eventStream&&t.eventStream.period&&!isNaN(t.eventStream.period.duration)?t.eventStream.period.duration:NaN,r=t.eventStream&&t.eventStream.period&&!isNaN(t.eventStream.period.start)?t.eventStream.period.start:NaN;if(isNaN(n)||isNaN(r))return;const i=t.calculatedPresentationTime;Math.abs(i-e)<300&&O(t,R.default.EVENT_MODE_ON_START)}))}catch(t){u.error(t)}}function I(t,e){try{if(t){const n=Object.keys(t);for(let r=0;r<n.length;r++){const i=t[n[r]],o=Object.keys(i);for(let t=0;t<o.length;t++)i[o[t]].forEach((t=>{void 0!==t&&e(t)}))}}}catch(t){u.error(t)}}function k(t,e,n){try{return t-e>n}catch(t){return u.error(t),!1}}function O(i,o){try{const l=m.getTime(),c=i.id;if(o===R.default.EVENT_MODE_ON_RECEIVE&&!i.triggeredReceivedEvent)return u.debug(`Received event ${c}`),i.triggeredReceivedEvent=!0,void s.trigger(i.eventStream.schemeIdUri,{event:JSON.parse(JSON.stringify(i))},{mode:o});i.triggeredStartEvent||(i.eventStream.schemeIdUri===t&&i.eventStream.value==e?0===i.duration&&0===i.presentationTimeDelta||(u.debug(`Starting manifest refresh event ${c} at ${l}`),function(){try{b(),p.refreshManifest()}catch(t){u.error(t)}}()):i.eventStream.schemeIdUri===n&&i.eventStream.value==r?(u.debug(`Starting callback event ${c} at ${l}`),function(t){try{Wt(a).create({}).load({method:"get",url:t,request:{responseType:"arraybuffer"}})}catch(t){u.error(t)}}(i.messageData)):(u.debug(`Starting event ${c} from period ${i.eventStream.period.id} at ${l}`),s.trigger(i.eventStream.schemeIdUri,{event:JSON.parse(JSON.stringify(i))},{mode:o}),g.get().streaming.events.deleteEventMessageDataAfterEventStarted&&(delete i.messageData,delete i.parsedMessageData)),i.triggeredStartEvent=!0)}catch(t){u.error(t)}}return l={addInlineEvents:function(t,e){try{if(b(),c[e]||(c[e]={}),t)for(let n=0;n<t.length;n++){let r=t[n];if(!k(m.getTime(),isNaN(r.duration)?0:r.duration,r.calculatedPresentationTime)){let t=x(r,c[e],!0);t===o?(u.debug(`Added inline event with id ${r.id} from period ${e}`),O(r,R.default.EVENT_MODE_ON_RECEIVE)):t===i&&u.debug(`Updated inline event with id ${r.id} from period ${e}`)}}}catch(t){throw t}},addInbandEvents:function(e,n){try{b(),d[n]||(d[n]={});for(let r=0;r<e.length;r++){let i=e[r];k(m.getTime(),isNaN(i.duration)?0:i.duration,i.calculatedPresentationTime)||(x(i,d[n],!1)===o?(i.eventStream.schemeIdUri===t&&S(i),u.debug(`Added inband event with id ${i.id} from period ${n}`),O(i,R.default.EVENT_MODE_ON_RECEIVE)):u.debug(`Inband event with scheme_id_uri ${i.eventStream.schemeIdUri}, value ${i.eventStream.value}, period id ${n} and event id ${i.id} was ignored because it has been added before.`))}w()}catch(t){throw t}},getInbandEvents:function(){return d},getInlineEvents:function(){return c},start:function(){try{b(),u.debug("Start Event Controller");const t=g.get().streaming.events.eventControllerRefreshDelay;y||isNaN(t)||(y=!0,f=setInterval(w,t))}catch(t){throw t}},setConfig:function(t){try{if(!t)return;t.manifestUpdater&&(p=t.manifestUpdater),t.playbackController&&(m=t.playbackController),t.settings&&(g=t.settings)}catch(t){throw t}},reset:function(){(function(){try{null!==f&&y&&(clearInterval(f),f=null,y=!1,function(){try{T(d),T(c)}catch(t){u.error(t)}}())}catch(t){throw t}})(),_()}},u=(0,P.default)(a).getInstance().getLogger(l),_(),l}Er.__dashjs_factory_name="EventController";var xr=k.default.getSingletonFactory(Er),Sr={LEVELS:{SUGGESTION:"Suggestion",WARNING:"Warning",ERROR:"Error"},EVENTS:{NO_UTC_TIMING_ELEMENT:{key:"NO_UTC_TIMING_ELEMENT",message:"No UTCTiming element is present in the manifest. You may experience playback failures. For a detailed validation use https://conformance.dashif.org/"},NON_COMPLIANT_SMPTE_IMAGE_ATTRIBUTE:{key:"NON_COMPLIANT_SMPTE_IMAGE_ATTRIBUTE",message:'SMPTE 2052-1:2013 defines the attribute name as "imageType" and does not define "imagetype"'},INVALID_DVR_WINDOW:{key:"INVALID_DVR_WINDOW",message:"No valid segment found when applying a specification compliant DVR window calculation. Using SegmentTimeline entries as a fallback."}}},Tr=n(445),Cr=n(1923);function Ir(){const t=this.context,e=(0,C.default)(t).getInstance();let n,r,i,o,a,s,l,u,c,d,f,h,p,m,g,v,y,b,_,w,A,E,S,k,O,M,L,D,N,B,j,z,F,U,q,H,V,W,Y,K,X,$,Z,tt,et,nt,rt,it,ot;function at(){if(!(s&&s.hasOwnProperty("load")&&E&&E.hasOwnProperty("initialize")&&E.hasOwnProperty("reset")&&E.hasOwnProperty("getClientTimeOffset")&&l&&A&&c&&q))throw new Error(x.default.MISSING_CONFIG_ERROR)}function st(){!function(){try{const t=u.getStreamsInfo();if(!k&&0===t.length)throw new Error("There are no periods in the MPD");k&&t.length>0&&c.updateManifestUpdateInfo({currentTime:q.getTime(),buffered:U.getBufferRange(),presentationStartTime:t[0].start,clientTimeOffset:E.getClientTimeOffset()}),S.length>0&&function(t){0!==t.length?S=S.filter((e=>{const n=t.filter((t=>t.id===e.getId())).length>0||e.getId()===k.getId();return n||(r.debug(`Removing stream ${e.getId()}`),e.reset(!0),e=null),n})):r.warn("No periods included in the current manifest. Skipping the filtering of outdated stream objects.")}(t);const n=[];for(let e=0,r=t.length;e<r;e++){const r=t[e];n.push(ut(r)),c.addManifestUpdateStreamInfo(r)}Promise.all(n).then((()=>new Promise(((e,n)=>{k?e():ct(t,e,n)})))).then((()=>{e.trigger(I.default.STREAMS_COMPOSED),Mt()})).catch((t=>{throw t}))}catch(t){A.error(new G.default(Q.MANIFEST_ERROR_ID_NOSTREAMS_CODE,t.message+" nostreamscomposed",l.getValue())),z=!0,te()}}()}function lt(){nt=!0}function ut(e){let n=$t(e.id);return n?n.updateData(e):(n=ur(t).create({manifestModel:l,mediaPlayerModel:V,dashMetrics:c,manifestUpdater:a,adapter:u,timelineConverter:E,capabilities:i,capabilitiesFilter:o,errHandler:A,baseURLController:p,segmentBaseController:m,textController:M,abrController:v,playbackController:q,throughputController:y,eventController:_,mediaController:b,protectionController:O,videoModel:U,streamInfo:e,settings:et}),S.push(n),n.initialize(),Promise.resolve())}function ct(t,n,i){try{Et();const o=c.getCurrentDVRInfo().range;if(o.end<o.start){rt&&clearTimeout(rt);const a=Math.min(1e3*(-1*(o.end-o.start)+2),2147483647);return r.debug(`Waiting for ${a} ms before playback can start`),e.trigger(I.default.AST_IN_FUTURE,{delay:a}),void(rt=setTimeout((()=>{ct(t,n,i)}),a))}et.get().streaming.applyProducerReferenceTime&&H.calculateProducerReferenceTimeOffsets(t);const a=t[0].manifestInfo;if(et.get().streaming.applyServiceDescription&&H.applyServiceDescription(a),u.getIsDynamic()){const t=Ut(0,a);q.computeAndSetLiveDelay(t,a)}(et.get().streaming.applyContentSteering&&h.shouldQueryBeforeStart()?h.loadSteeringData():Promise.resolve()).then((()=>{const t=l.getValue();t&&p.update(t),dt(),n()})).catch((t=>{r.error(t),dt(),n()}))}catch(t){i(t)}}function dt(){const t=function(){let t;if(u.getIsDynamic()){const e=c.getCurrentDVRInfo();t=(e&&e.range?e.range.end:0)-q.getOriginalLiveDelay();const n=e?e.range:null;if(n){if(isNaN(it)&&-1===it.toString().indexOf("posix:")){const e=jt(!0);isNaN(e)||(r.info(`Start time from URI parameters: ${e}`),t=Math.min(t,e))}else{r.info(`Start time provided by the app: ${it}`);const e=zt(!0,it);isNaN(e)||(t=Math.min(t,e))}const e=et.get().streaming.timeShiftBuffer.calcFromSegmentTimeline?.1:0;t=Math.max(t,n.start+e)}}else if(t=ne()[0].getStreamInfo().start,isNaN(it)){const e=jt(!1);isNaN(e)||(r.info(`Start time from URI parameters: ${e}`),t=Math.max(t,e))}else{r.info(`Start time provided by the app: ${it}`);const e=zt(!1,it);isNaN(e)||(t=Math.max(t,e))}return t}();let n=At(t);const i=null!==n?n:S[0];e.trigger(I.default.INITIAL_STREAM_SWITCH,{startTime:t}),ft(i,null,t),$||($=setInterval((function(){!B&&q.getTimeToStreamEnd()<=0&&!q.isSeeking()&&e.trigger(I.default.PLAYBACK_ENDED,{isLast:Xt().isLast})}),200))}function ft(t,n,i){try{if(B||!t||n===t&&t.getIsActive())return;B=!0,e.trigger(I.default.PERIOD_SWITCH_STARTED,{fromStreamInfo:n?n.getStreamInfo():null,toStreamInfo:t.getStreamInfo()});let o=!1,a=[];k=t,n&&(o=_t(t,n),a=mt(n),n.deactivate(o)),i=isNaN(i)?!o&&n?t.getStreamInfo().start:NaN:i,r.info(`Switch to stream ${t.getId()}. Seektime is ${i}, current playback time is ${q.getTime()}. Seamless period switch is set to ${o}`),tt=tt.filter((t=>t.getId()!==k.getId())),q.initialize(Xt(),!!n),U.getElement()?ht({seekTime:i,keepBuffers:o,streamActivated:!1,representationsFromPreviousPeriod:a}):pt({seekTime:i,keepBuffers:o})}catch(t){B=!1}}function ht(t){let e;function n(){if(!F||"open"!==F.readyState)return;r.debug("MediaSource is open!"),window.URL.revokeObjectURL(e),F.removeEventListener("sourceopen",n),F.removeEventListener("webkitsourceopen",n),Bt();const i=c.getCurrentDVRInfo();d.setSeekable(i.range.start,i.range.end),t.streamActivated?(isNaN(t.seekTime)||q.seek(t.seekTime,!0,!0),k.setMediaSource(F).then((()=>{k.initializeForTextWithMediaSource(F)}))):pt(t)}function i(){F.addEventListener("sourceopen",n,!1),F.addEventListener("webkitsourceopen",n,!1),e=d.attachMediaSource(U),r.debug("MediaSource attached to element.  Waiting on open...")}F?t.keepBuffers?pt(t):(d.detachMediaSource(U),i()):(F=d.createMediaSource(),i())}function pt(t){const n=t.representationsFromPreviousPeriod||[];k.activate(F,t.keepBuffers?Z:void 0,n).then((n=>{n&&(Z=n),isNaN(t.seekTime)||(e.trigger(I.default.SEEK_TARGET,{time:t.seekTime},{streamId:k.getId()}),q.seek(t.seekTime,!1,!0),k.startScheduleControllers()),B=!1,e.trigger(I.default.PERIOD_SWITCH_COMPLETED,{toStreamInfo:Xt()})}))}function mt(t){return(t?t.getStreamProcessors():[]).map((t=>t.getRepresentation()))}function gt(t){const e=At(t.seekTime);e&&e!==k?e&&e!==k&&(vt(),function(t,e){const n=t&&!isNaN(t.seekTime)?t.seekTime:NaN,r=k.getStreamProcessors().map((e=>e.prepareOuterPeriodPlaybackSeeking(t)));Promise.all(r).then((()=>{ft(e,k,n)})).catch((t=>{A.error(t)}))}(t,e)):(vt(),function(t){k.getStreamProcessors().forEach((e=>e.prepareInnerPeriodPlaybackSeeking(t))),Vt(It.USER_REQUEST_STOP_REASON)}(t)),Qt(Ct.SEEK_START_REASON)}function vt(){yt()}function yt(){tt&&tt.length>0&&(tt.forEach((t=>{t.deactivate(!0)})),tt=[])}function bt(t){if(t.newMediaInfo.streamInfo.id===k.getId()){if(yt(),et.get().streaming.buffer.resetSourceBuffersForTrackSwitch&&t.oldMediaInfo&&t.oldMediaInfo.codec!==t.newMediaInfo.codec){const t=q.getTime();return k.deactivate(!1),void ht({seekTime:t,keepBuffers:!1,streamActivated:!1})}k.prepareTrackChange(t)}}function _t(t,e){try{return et.get().streaming.buffer.reuseExistingSourceBuffers&&(i.isProtectionCompatible(e.getStreamInfo(),t.getStreamInfo())||nt)&&i.supportsChangeType()&&et.get().streaming.buffer.useChangeType}catch(t){return!1}}function wt(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(F&&!t.getPreloaded()&&_t(t,e)){const n=mt(e);t.startPreloading(F,Z,n).then((()=>{tt.push(t)}))}}function At(t){if(isNaN(t))return null;const e=S.length;for(let n=0;n<e;n++){const e=S[n];if(t<parseFloat((e.getStartTime()+e.getDuration()).toFixed(5)))return e}return null}function Et(){try{const t=u.getIsDynamic(),e=u.getStreamsInfo()[0].manifestInfo,n=q.getTime(),r=E.calcTimeShiftBufferWindow(S,t),i=Dt();if(void 0===r.start||void 0===r.end)return;i&&0!==i.length?i.forEach((t=>{c.addDVRInfo(t.getType(),n,e,r)})):c.addDVRInfo(x.default.VIDEO,n,e,r)}catch(t){}}function xt(t){if(K&&N){const t=V.getInitialBufferLevel(),e=[x.default.TEXT];(isNaN(t)||t<=q.getBufferLevel(e)||u.getIsDynamic()&&t>q.getLiveDelay())&&(K=!1,Qt(Ct.INITIAL_PLAYOUT_START_REASON),q.play())}t&&t.mediaType&&c.addBufferLevel(t.mediaType,new Date,1e3*t.bufferLevel)}function St(t){t.streamInfo.id===k.getId()&&yt(),$t(t.streamInfo.id).prepareQualityChange(t)}function Tt(){if(u.getIsDynamic()&&0!==q.getOriginalLiveDelay()&&k){const t=u.getStreamsInfo();if(t.length>0){const e=t[0].manifestInfo,n=Ut(0,e);q.computeAndSetLiveDelay(n,e)}}}function kt(){if(Gt()){const t=U.getPlaybackQuality();t&&c.addDroppedFrames(t)}}function Pt(){r.debug("[onPlaybackStarted]"),!K&&Y&&Qt(Ct.RESUME_FROM_PAUSE_START_REASON),K&&(K=!1),X&&(X=!1,et.get().streaming.applyContentSteering&&!h.shouldQueryBeforeStart()&&h.loadSteeringData()),Y=!1}function Rt(t){r.debug("[onPlaybackPaused]"),t.ended||(Y=!0,Vt(It.USER_REQUEST_STOP_REASON))}function Ot(t){r.debug(`Stream with id ${t.streamInfo.id} finished buffering`);const e=t.streamInfo.isLast;F&&e?(r.info("[onStreamBufferingCompleted] calls signalEndOfStream of mediaSourceController."),d.signalEndOfStream(F)):Mt()}function Mt(){if(!k)return;if(!k.getHasFinishedBuffering())return void k.checkAndHandleCompletedBuffering();const t=function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;try{const e=t||k||null;if(e){const t=e.getStreamInfo();return S.filter((function(e){const n=e.getStreamInfo();return n.start>t.start&&t.id!==n.id}))}}catch(t){return[]}}(k);let e=0;for(;e<t.length;){const n=t[e],r=0===e?k:t[e-1];!n.getPreloaded()&&r.getHasFinishedBuffering()&&F&&wt(n,r),e+=1}}function Lt(){$&&(clearInterval($),$=null)}function Dt(){return k?k.getStreamProcessors():[]}function Nt(t){if(k&&!k.getIsEndedEventSignaled()){k.setIsEndedEventSignaled(!0);const t=function(){const t=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:null)||k||null;if(!t)return null;const e=t.getStreamInfo(),n=e.start;let r=0,i=-1,o=NaN;for(;r<S.length;){const t=S[r].getStreamInfo(),a=t.start-n;a>0&&(isNaN(o)||a<o)&&e.id!==t.id&&(o=a,i=r),r+=1}return i>=0?S[i]:null}();t?(r.debug(`StreamController onEnded, found next stream with id ${t.getStreamInfo().id}. Switching from ${k.getStreamInfo().id} to ${t.getStreamInfo().id}`),ft(t,k,NaN)):(r.debug("StreamController no next stream found"),k.setIsEndedEventSignaled(!1)),Vt(t?It.END_OF_PERIOD_STOP_REASON:It.END_OF_CONTENT_STOP_REASON)}t&&t.isLast&&(Lt(),h.stopSteeringRequestTimer())}function Bt(t){const e=t||Xt().manifestInfo.duration;d.setDuration(e)}function jt(t){const e=g.getURIFragmentData();if(!e||!e.t)return NaN;const n=ne()[0].getStreamInfo().start;return e.t=e.t.split(",")[0],Ft(t,e.t,n)}function zt(t,e){let n=0;return t||(n=ne()[0].getStreamInfo().start),Ft(t,e,n)}function Ft(t,e,n){const r=u.getRegularPeriods()[0],i=e.toString(),o=-1!==i.indexOf("posix:")?"now"===i.substring(6)?Date.now()/1e3:parseFloat(i.substring(6)):NaN;return t&&!isNaN(o)?E.calcPresentationTimeFromWallTime(new Date(1e3*o),r):parseFloat(i)+n}function Ut(t,e){try{let t=NaN;return e&&!isNaN(e.maxFragmentDuration)&&isFinite(e.maxFragmentDuration)?e.maxFragmentDuration:isFinite(t)?t:NaN}catch(t){return NaN}}function qt(t){if(t.error)z=!0,te();else{r.info("Manifest updated... updating data system wide.");const n=t.manifest;u.updatePeriods(n),o.filterUnsupportedFeatures(n).then((()=>{p.initialize(n);let t=u.getUTCTimingSources();!u.getIsDynamic()||t&&0!==t.length||e.trigger(R.default.CONFORMANCE_VIOLATION,{level:Sr.LEVELS.WARNING,event:Sr.EVENTS.NO_UTC_TIMING_ELEMENT});let r=u.getIsDynamic()?t.concat(W.getUTCTimingSources()):t;f.attemptSync(r,u.getIsDynamic()),D.createFinalQueryStrings(n)}))}}function Gt(){return!!k&&k.getHasVideoTrack()}function Ht(){return!!k&&k.getHasAudioTrack()}function Vt(t,e){e=e||new Date,Dt().forEach((n=>{n.finalisePlayList(e,t)})),c.addPlayList()}function Qt(t){c.createPlaylistMetrics(1e3*q.getTime(),t)}function Wt(t){O.updateKeyStatusesMap(t),function(){const t=Dt();let r=!1;t.forEach((t=>{const e=t.getMediaInfo();!e||i.areKeyIdsUsable(e)?e&&i.areKeyIdsExpired(e)&&function(t){const e=$t(t.getStreamId());e&&e.triggerProtectionError({error:new G.default(Cr.default.KEY_STATUS_CHANGED_EXPIRED_ERROR_CODE,Cr.default.KEY_STATUS_CHANGED_EXPIRED_ERROR_MESSAGE)})}(t):(r=!0,function(t){const e=t.getAllMediaInfos().filter((t=>i.areKeyIdsUsable(t)));if(e&&0!==e.length)b.setTrack(e[0],{replaceBuffer:!0});else{const e=t.getType();A.error(new G.default(Q.NO_SUPPORTED_KEY_IDS,`Type: ${e}: ${Q.NO_SUPPORTED_KEY_IDS_MESSAGE}`))}}(t))})),r&&(0===q.getTime()?e.once(R.default.FRAGMENT_LOADING_COMPLETED,(()=>{Yt()}),n):q.isProgressing(500).then((t=>{t||Yt()})))}()}function Yt(){const t=q.getTime();q.seek(t+.01,!1,!1)}function Kt(t){if(!t.error)return;let e;switch(t.error.code){case 1:e="MEDIA_ERR_ABORTED";break;case 2:e="MEDIA_ERR_NETWORK";break;case 3:e="MEDIA_ERR_DECODE",ot.counts.mediaErrorDecode+=1;break;case 4:e="MEDIA_ERR_SRC_NOT_SUPPORTED";break;case 5:e="MEDIA_ERR_ENCRYPTED";break;default:e="UNKNOWN"}"MEDIA_ERR_DECODE"===e&&et.get().errors.recoverAttempts.mediaErrorDecode>=ot.counts.mediaErrorDecode?function(){r.error("A MEDIA_ERR_DECODE occured: Resetting the MediaSource");const t=q.getTime();k.deactivate(!1),r.info(`MediaSource has been resetted. Resuming playback from time ${t}`),ht({seekTime:t,keepBuffers:!1,streamActivated:!1})}():(j=!0,t.error.message&&(e+=" ("+t.error.message+")"),t.error.msExtendedCode&&(e+=" (0x"+(t.error.msExtendedCode>>>0).toString(16).toUpperCase()+")"),r.fatal("Video Element Error: "+e),t.error&&r.fatal(t.error),A.error(new G.default(t.error.code,e)),te())}function Xt(){return k?k.getStreamInfo():null}function $t(t){for(let e=0,n=S.length;e<n;e++)if(S[e].getId()===t)return S[e];return null}function Zt(t){isNaN(t.newDuration)||Bt(t.newDuration)}function Jt(){S=[],it=NaN,O=null,B=!1,k=null,j=!1,z=!1,K=!0,X=!0,Y=!1,N=!0,$=null,nt=!1,tt=[],rt=null,ot={counts:{mediaErrorDecode:0}}}function te(){at(),f.reset(),Vt(j||z?It.FAILURE_STOP_REASON:It.USER_REQUEST_STOP_REASON);for(let t=0,e=S?S.length:0;t<e;t++)S[t].reset(j);e.off(R.default.PLAYBACK_TIME_UPDATED,kt,n),e.off(R.default.PLAYBACK_SEEKING,gt,n),e.off(R.default.PLAYBACK_ERROR,Kt,n),e.off(R.default.PLAYBACK_STARTED,Pt,n),e.off(R.default.PLAYBACK_PAUSED,Rt,n),e.off(R.default.PLAYBACK_ENDED,Nt,n),e.off(R.default.METRIC_ADDED,ee,n),e.off(R.default.MANIFEST_VALIDITY_CHANGED,Zt,n),e.off(R.default.BUFFER_LEVEL_UPDATED,xt,n),e.off(R.default.QUALITY_CHANGE_REQUESTED,St,n),I.default.KEY_SESSION_UPDATED&&e.off(I.default.KEY_SESSION_UPDATED,lt,n),e.off(I.default.MANIFEST_UPDATED,qt,n),e.off(I.default.STREAM_BUFFERING_COMPLETED,Ot,n),e.off(I.default.TIME_SYNCHRONIZATION_COMPLETED,st,n),e.off(I.default.CURRENT_TRACK_CHANGED,bt,n),e.off(I.default.SETTING_UPDATED_LIVE_DELAY,Tt,n),e.off(I.default.SETTING_UPDATED_LIVE_DELAY_FRAGMENT_COUNT,Tt,n),e.off(Tr.default.INTERNAL_KEY_STATUSES_CHANGED,Wt,n),p.reset(),a.reset(),_.reset(),c.clearAllCurrentMetrics(),l.setValue(null),s.reset(),E.reset(),w.reset(),F&&(d.detachMediaSource(U),F=null),U=null,O&&(O=null,L=null,l.getValue()&&e.trigger(I.default.PROTECTION_DESTROYED,{data:l.getValue().url})),Lt(),e.trigger(I.default.STREAM_TEARDOWN_COMPLETE),Jt()}function ee(t){if(t.metric===T.DVR_INFO){const e=Ht()?x.default.AUDIO:x.default.VIDEO;t.mediaType===e&&d.setSeekable(t.value.range.start,t.value.range.end)}}function ne(){return S}return n={addDVRMetric:Et,getActiveStream:function(){return k},getActiveStreamInfo:Xt,getActiveStreamProcessors:Dt,getAutoPlay:function(){return N},getHasMediaOrInitialisationError:function(){return j||z},getInitialPlayback:function(){return K},getIsStreamSwitchInProgress:function(){return B},getStreamById:$t,getStreamForTime:At,getStreams:ne,getTimeRelativeToStreamId:function(t,e){let n=null,r=0,i=0,o=null;for(let a=0;a<S.length;a++){if(n=S[a],i=n.getStartTime(),o=n.getDuration(),Number.isFinite(i)&&(r=i),n.getId()===e)return t-r;Number.isFinite(o)&&(r+=o)}return null},hasAudioTrack:Ht,hasVideoTrack:Gt,initialize:function(r,i){at(),N=r,L=i,E.initialize(),a=vr(t).create(),a.setConfig({manifestModel:l,adapter:u,manifestLoader:s,errHandler:A,settings:et,contentSteeringController:h}),a.initialize(),_=xr(t).getInstance(),_.setConfig({manifestUpdater:a,playbackController:q,settings:et}),_.start(),D=Rn(t).getInstance(),f.setConfig({dashMetrics:c,baseURLController:p,errHandler:A,settings:et}),f.initialize(),d.setConfig({settings:et}),O&&(e.trigger(I.default.PROTECTION_CREATED,{controller:O}),O.setMediaElement(U.getElement()),L&&O.setProtectionData(L)),e.on(R.default.PLAYBACK_TIME_UPDATED,kt,n),e.on(R.default.PLAYBACK_SEEKING,gt,n),e.on(R.default.PLAYBACK_ERROR,Kt,n),e.on(R.default.PLAYBACK_STARTED,Pt,n),e.on(R.default.PLAYBACK_PAUSED,Rt,n),e.on(R.default.PLAYBACK_ENDED,Nt,n),e.on(R.default.METRIC_ADDED,ee,n),e.on(R.default.MANIFEST_VALIDITY_CHANGED,Zt,n),e.on(R.default.BUFFER_LEVEL_UPDATED,xt,n),e.on(R.default.QUALITY_CHANGE_REQUESTED,St,n),I.default.KEY_SESSION_UPDATED&&e.on(I.default.KEY_SESSION_UPDATED,lt,n),e.on(I.default.MANIFEST_UPDATED,qt,n),e.on(I.default.STREAM_BUFFERING_COMPLETED,Ot,n),e.on(I.default.TIME_SYNCHRONIZATION_COMPLETED,st,n),e.on(I.default.CURRENT_TRACK_CHANGED,bt,n),e.on(I.default.SETTING_UPDATED_LIVE_DELAY,Tt,n),e.on(I.default.SETTING_UPDATED_LIVE_DELAY_FRAGMENT_COUNT,Tt,n),e.on(Tr.default.INTERNAL_KEY_STATUSES_CHANGED,Wt,n)},load:function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:NaN;at(),it=e,s.load(t)},loadWithManifest:function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:NaN;!function(){if(!a||!a.hasOwnProperty("setManifest"))throw new Error("initialize function has to be called previously")}(),it=e,a.setManifest(t)},refreshManifest:function(){a.getIsUpdating()||a.refreshManifest()},reset:te,setConfig:function(t){t&&(t.capabilities&&(i=t.capabilities),t.capabilitiesFilter&&(o=t.capabilitiesFilter),t.manifestLoader&&(s=t.manifestLoader),t.manifestModel&&(l=t.manifestModel),t.mediaPlayerModel&&(V=t.mediaPlayerModel),t.customParametersModel&&(W=t.customParametersModel),t.protectionController&&(O=t.protectionController),t.adapter&&(u=t.adapter),t.dashMetrics&&(c=t.dashMetrics),t.errHandler&&(A=t.errHandler),t.timelineConverter&&(E=t.timelineConverter),t.videoModel&&(U=t.videoModel),t.playbackController&&(q=t.playbackController),t.throughputController&&(y=t.throughputController),t.serviceDescriptionController&&(H=t.serviceDescriptionController),t.contentSteeringController&&(h=t.contentSteeringController),t.textController&&(M=t.textController),t.abrController&&(v=t.abrController),t.mediaController&&(b=t.mediaController),t.settings&&(et=t.settings),t.baseURLController&&(p=t.baseURLController),t.uriFragmentModel&&(g=t.uriFragmentModel),t.segmentBaseController&&(m=t.segmentBaseController),t.manifestUpdater&&(a=t.manifestUpdater))},setProtectionData:function(t){L=t,O&&O.setProtectionData(L)},switchToVideoElement:function(t){k&&(q.initialize(Xt()),ht({seekTime:t,keepBuffers:!1,streamActivated:!0}))}},r=(0,P.default)(t).getInstance().getLogger(n),f=_r(t).getInstance(),d=Ar(t).getInstance(),w=J(t).getInstance(),Jt(),n}Ir.__dashjs_factory_name="StreamController";var kr=k.default.getSingletonFactory(Ir);function Pr(){const t=this.context,e=(0,C.default)(t).getInstance();let n,r,i,o,a,s,l,u,c,d,f,h;function p(){h.debug("Stopping the gap controller"),a&&(clearInterval(a),a=null),function(){e.off(I.default.WALLCLOCK_TIME_UPDATED,b,this),e.off(I.default.INITIAL_STREAM_SWITCH,y,this),e.off(I.default.PLAYBACK_SEEKING,m,this),e.off(I.default.BUFFER_REPLACEMENT_STARTED,g,n),e.off(I.default.TRACK_CHANGE_RENDERED,v,n)}(),a=null,s=NaN,o=0,d=null,f={}}function m(){d&&(clearTimeout(d),d=null)}function g(t){try{if(t.streamId!==u.getActiveStreamInfo().id||t.mediaType!==x.default.VIDEO&&t.mediaType!==x.default.AUDIO)return;t.streamId===u.getActiveStreamInfo().id&&(f[t.mediaType]=!0)}catch(t){h.error(t)}}function v(t){t&&t.mediaType&&(f[t.mediaType]=!1)}function y(){a||function(){try{a||(h.debug("Starting the gap controller"),a=setInterval((()=>{_()&&w(l.getTime())}),100))}catch(t){}}()}function b(){if(_(i.get().streaming.gaps.enableSeekFix)&&(o++,o>=10)){const t=l.getTime();r===t?w(t,!0):(r=t,s=NaN),o=0}}function _(){let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!u.getActiveStream())return!1;const e=Object.keys(f).some((t=>f[t])),n=!!t&&function(){const t=u.getActiveStream(),e=parseFloat((t.getStartTime()+t.getDuration()).toFixed(5));return l.getTime()+i.get().streaming.gaps.threshold>=e}();return!e&&i.get().streaming.gaps.jumpGaps&&u.getActiveStreamProcessors().length>0&&(!l.isSeeking()||n)&&!l.isPaused()&&!u.getIsStreamSwitchInProgress()&&!u.getHasMediaOrInitialisationError()}function w(t){let e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=i.get().streaming.gaps.enableStallFix,r=i.get().streaming.gaps.stallSeek,o=i.get().streaming.gaps.smallGapLimit,a=i.get().streaming.gaps.jumpLargeGaps,f=c.getBufferRange();let p,m=NaN,g=!1;if(p=function(t,e){try{if(!t||t.length<=1&&e>0)return NaN;let n=NaN,r=0;for(;isNaN(n)&&r<t.length;){const o=r>0?t.end(r-1):0;e<t.start(r)&&o-e<i.get().streaming.gaps.threshold&&(n=r),r+=1}return n}catch(t){return null}}(f,t),!isNaN(p)){const e=f.start(p),n=e-t;n>0&&(n<=o||a)&&(m=e)}const v=l.getTimeToStreamEnd();if(isNaN(m)&&e&&isFinite(v)&&!isNaN(v)&&v<o&&(m=parseFloat(l.getStreamEndTime().toFixed(5)),g=!0),n&&isNaN(m)&&e&&isNaN(p)&&function(t,e){for(let n=0,r=t.length;n<r;n++)if(e>=t.start(n)&&e<=t.end(n))return!0;return!1}(f,t)&&(0===r?(h.warn("Toggle play pause to break stall"),c.pause(),c.play()):(h.warn(`Jumping ${r}s to break stall`),m=t+r)),m>0&&s!==m&&m>t&&!d){const e=m-t;if(g){const n=u.getStreamForTime(m),r=n&&!!n.getPreloaded();h.warn(`Jumping to end of stream because of gap from ${t} to ${m}. Gap duration: ${e}`),l.seek(m,!0,r)}else{const n=l.getIsDynamic(),r=p>0?f.end(p-1):t,i=n?1e3*Math.max(0,e-.1):0;d=window.setTimeout((()=>{l.seek(m,!0,!0),h.warn(`Jumping gap occuring in period ${u.getActiveStream().getStreamId()} starting at ${r} and ending at ${m}. Jumping by: ${m-r}`),d=null}),i)}s=m}}return n={reset:p,setConfig:function(t){t&&(t.settings&&(i=t.settings),t.playbackController&&(l=t.playbackController),t.streamController&&(u=t.streamController),t.videoModel&&(c=t.videoModel))},initialize:function(){!function(){e.on(I.default.WALLCLOCK_TIME_UPDATED,b,this),e.on(I.default.INITIAL_STREAM_SWITCH,y,this),e.on(I.default.PLAYBACK_SEEKING,m,this),e.on(I.default.BUFFER_REPLACEMENT_STARTED,g,n),e.on(I.default.TRACK_CHANGE_RENDERED,v,n)}()}},h=(0,P.default)(t).getInstance().getLogger(n),p(),n}Pr.__dashjs_factory_name="GapController";var Rr=k.default.getSingletonFactory(Pr);function Or(){const t=this.context,e=(0,C.default)(t).getInstance();let n,r,i,o,a,s,l,u,c,d;function f(){r=!1;const t=Vt.default.parseUserAgent();i=t&&t.browser&&t.browser.name&&"safari"===t.browser.name.toLowerCase()}function h(){r=!1}function p(t){if(t.streamId!==s.getActiveStreamInfo().id||!c)return;const e=l.getLiveDelay();l.getBufferLevel()>e/2&&(c=!1)}function m(t){t.streamId===s.getActiveStreamInfo().id&&(c=t.state===T.BUFFER_EMPTY)}function g(){u.getCatchupModeEnabled()||o.setPlaybackRate(1)}function v(){l.getIsDynamic()&&u.getCatchupModeEnabled()&&(u.getCatchupPlaybackRates().max>0||u.getCatchupPlaybackRates().min<0)&&!l.isPaused()&&!l.isSeeking()&&function(){try{return!(!l.getTime()>0||r)&&(b()===x.default.LIVE_CATCHUP_MODE_LOLP?function(t,e){try{return Math.abs(y())>0||t<e}catch(t){return!1}}(l.getBufferLevel(),a.get().streaming.liveCatchup.playbackBufferMin):function(){try{return Math.abs(y())>0}catch(t){return!1}}())}catch(t){return!1}}()&&function(){if(!r&&o){let t;const e=o.getPlaybackRate(),n=u.getCatchupPlaybackRates(),s=l.getBufferLevel(),f=y(),h=u.getCatchupMaxDrift();if(!isNaN(h)&&h>0&&f>h)d.info("[CatchupController]: Low Latency catchup mechanism. Latency too high, doing a seek to live point"),r=!0,l.seekToCurrentLive(!0,!1);else{const r=l.getCurrentLiveLatency(),u=l.getLiveDelay();t=b()===x.default.LIVE_CATCHUP_MODE_LOLP?function(t,e,n,r,i){let o;if(i<r){const e=Math.abs(t.min),n=5*(i-r);o=1-e+2*e/(1+Math.pow(Math.E,-n)),d.debug("[LoL+ playback control_buffer-based] bufferLevel: "+i+", newRate: "+o)}else{const r=.02;if(Math.abs(e-n)<=r*n)o=1;else{const r=e-n,i=r<0?Math.abs(t.min):t.max,a=5*r;o=1-i+2*i/(1+Math.pow(Math.E,-a))}d.debug("[LoL+ playback control_latency-based] latency: "+e+", newRate: "+o)}return o}(n,r,u,a.get().streaming.liveCatchup.playbackBufferMin,s):function(t,e,n,r){if(c)return 1;const i=e-n,o=i<0?Math.abs(t.min):t.max,a=5*i;let s=1-o+2*o/(1+Math.pow(Math.E,-a));return l.getPlaybackStalled()&&r<=n/2&&i>0&&(s=1),s}(n,r,u,s);const f=i?.25:.02/(.5/n.max);(t&&Math.abs(e-t)>=f||1==t)&&(d.debug(`[CatchupController]: Setting playback rate to ${t}`),o.setPlaybackRate(t))}}}()}function y(){return l.getCurrentLiveLatency()-l.getLiveDelay()}function b(){const t=a.get().streaming.liveCatchup.playbackBufferMin;return a.get().streaming.liveCatchup.mode!==x.default.LIVE_CATCHUP_MODE_LOLP||null===t||isNaN(t)?x.default.LIVE_CATCHUP_MODE_DEFAULT:x.default.LIVE_CATCHUP_MODE_LOLP}function _(){u.getCatchupPlaybackRates(!0)}return n={reset:function(){e.off(R.default.BUFFER_LEVEL_UPDATED,p,n),e.off(R.default.BUFFER_LEVEL_STATE_CHANGED,m,n),e.off(R.default.PLAYBACK_PROGRESS,v,n),e.off(R.default.PLAYBACK_TIME_UPDATED,v,n),e.off(R.default.PLAYBACK_SEEKED,h,n),e.off(I.default.SETTING_UPDATED_CATCHUP_ENABLED,g,n),e.off(I.default.SETTING_UPDATED_PLAYBACK_RATE_MIN,_,n),e.off(I.default.SETTING_UPDATED_PLAYBACK_RATE_MAX,_,n),e.off(R.default.STREAM_INITIALIZED,_,n),f(),o.setPlaybackRate(1,!0)},setConfig:function(t){t&&(t.settings&&(a=t.settings),t.videoModel&&(o=t.videoModel),t.streamController&&(s=t.streamController),t.playbackController&&(l=t.playbackController),t.mediaPlayerModel&&(u=t.mediaPlayerModel))},initialize:function(){e.on(R.default.BUFFER_LEVEL_UPDATED,p,n),e.on(R.default.BUFFER_LEVEL_STATE_CHANGED,m,n),e.on(R.default.PLAYBACK_PROGRESS,v,n),e.on(R.default.PLAYBACK_TIME_UPDATED,v,n),e.on(R.default.PLAYBACK_SEEKED,h,n),e.on(I.default.SETTING_UPDATED_CATCHUP_ENABLED,g,n),e.on(I.default.SETTING_UPDATED_PLAYBACK_RATE_MIN,_,n),e.on(I.default.SETTING_UPDATED_PLAYBACK_RATE_MAX,_,n),e.on(R.default.STREAM_INITIALIZED,_,n),_()}},d=(0,P.default)(t).getInstance().getLogger(n),f(),n}Or.__dashjs_factory_name="CatchupController";var Mr=k.default.getSingletonFactory(Or);const Lr=[x.default.SERVICE_DESCRIPTION_DVB_LL_SCHEME],Dr="video",Nr="audio";function Br(){const t=this.context;let e,n,r,i,o;function a(){n={liveDelay:NaN,liveCatchup:{maxDrift:NaN,playbackRate:{min:NaN,max:NaN}},minBitrate:{},maxBitrate:{},initialBitrate:{},contentSteering:null,clientDataReporting:null},r=[]}function s(t,e,r){try{n[t][e]=r/1e3}catch(t){i.error(t)}}return e={getServiceDescriptionSettings:function(){return n},getProducerReferenceTimeOffsets:function(){return r},calculateProducerReferenceTimeOffsets:function(t){try{let e=[];if(t&&t.length>0){const n=[x.default.VIDEO,x.default.AUDIO,x.default.TEXT],r=o.getAvailabilityStartTime()/1e3;t.forEach((t=>{const i=n.reduce(((e,n)=>e.concat(o.getAllMediaInfoForType(t,n))),[]).reduce(((e,n)=>(o.getProducerReferenceTimes(t,n).forEach((i=>{const a=o.getVoRepresentations(n);if(a&&a.length>0&&a[0].adaptation&&a[0].segmentInfoType===S.default.SEGMENT_TEMPLATE){const n=a[0],o=new Date(i[S.default.WALL_CLOCK_TIME]).getTime()/1e3-(i[S.default.PRESENTATION_TIME]/n[S.default.TIMESCALE]-n[S.default.PRESENTATION_TIME_OFFSET]+t.start),s=r-o;e.push({id:i[S.default.ID],to:s})}})),e)),[]);e=e.concat(i)}))}r=e}catch(t){i.error(t),r=[]}},applyServiceDescription:function(t){if(!t||!t.serviceDescriptions)return;const e=t.serviceDescriptions.filter((t=>Lr.includes(t.schemeIdUri))),o=t.serviceDescriptions.filter((t=>null==t.schemeIdUri));let a=e.length>0?e[e.length-1]:o[o.length-1];a&&(a.latency&&a.latency.target>0&&function(t){let e;if(t.schemeIdUri,x.default.SERVICE_DESCRIPTION_DVB_LL_SCHEME,e=function(t){return{liveDelay:t.latency.target/1e3,maxDrift:!isNaN(t.latency.max)&&t.latency.max>t.latency.target?(t.latency.max-t.latency.target+500)/1e3:NaN,referenceId:t.latency.referenceId||NaN}}(t),r.length>0){let{to:t,id:o}=function(t){let e,n=0,i=r.filter((e=>e.id===t.referenceId));return 0===i.length?(n=r.length>0?r[0].to:0,e=r[0].id||NaN):(n=i[0].to||0,e=i[0].id||NaN),{to:n,id:e}}(e);n.liveDelay=e.liveDelay-t,n.liveCatchup.maxDrift=e.maxDrift,i.debug(`\n                Found latency properties coming from service description. Applied time offset of ${t} from ProducerReferenceTime element with id ${o}.\n                Live Delay: ${e.liveDelay-t}, Live catchup max drift: ${e.maxDrift}\n            `)}else n.liveDelay=e.liveDelay,n.liveCatchup.maxDrift=e.maxDrift,i.debug(`Found latency properties coming from service description: Live Delay: ${e.liveDelay}, Live catchup max drift: ${e.maxDrift}`)}(a),a.playbackRate&&function(t){const e=t.playbackRate.min?Math.round(1e3*(t.playbackRate.min-1))/1e3:NaN,r=t.playbackRate.max?Math.round(1e3*(t.playbackRate.max-1))/1e3:NaN;n.liveCatchup.playbackRate.min=e,n.liveCatchup.playbackRate.max=r,i.debug(`Found latency properties coming from service description: Live catchup min playback rate: ${e}`),i.debug(`Found latency properties coming from service description: Live catchup max playback rate: ${r}`)}(a),a.operatingQuality,a.operatingBandwidth&&function(t){if(!t||!t.operatingBandwidth||!t.operatingBandwidth.mediaType||"all"===t.operatingBandwidth.mediaType)return;const e={};e.minBandwidth=t.operatingBandwidth.min,e.maxBandwidth=t.operatingBandwidth.max,e.targetBandwidth=t.operatingBandwidth.target;const n=[];t.operatingBandwidth.mediaType===Dr||t.operatingBandwidth.mediaType===Nr?n.push(t.operatingBandwidth.mediaType):"any"===t.operatingBandwidth.mediaType&&(n.push(Nr),n.push(Dr)),n.forEach((t=>{isNaN(e.minBandwidth)||s("minBitrate",t,e.minBandwidth),isNaN(e.maxBandwidth)||s("maxBitrate",t,e.maxBandwidth),isNaN(e.targetBandwidth)||s("initialBitrate",t,e.targetBandwidth)}))}(a),a.contentSteering&&function(t){n.contentSteering=t.contentSteering}(a),a.clientDataReporting&&function(t){n.clientDataReporting=t.clientDataReporting}(a))},reset:function(){a()},setConfig:function(t){t&&t.adapter&&(o=t.adapter)}},i=(0,P.default)(t).getInstance().getLogger(e),a(),e}Br.__dashjs_factory_name="ServiceDescriptionController";var jr=k.default.getSingletonFactory(Br);function zr(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=[];if(t.irregular)return t.irregular;if(t.regular)return t.regular;if(t.language){e=e.concat(t.language,t.extendedLanguageSubtags||[],t.script||[],t.region||[],t.variants||[]);const n=t.extensions||[];let r=-1;for(;++r<n.length;){const t=n[r];t.singleton&&t.extensions&&t.extensions.length>0&&e.push(t.singleton,...t.extensions)}}return t.privateuse&&t.privateuse.length>0&&e.push("x",...t.privateuse),e.join("-")}function Fr(t){const e="string"==typeof t?t.charCodeAt(0):t;return e>=97&&e<=122||e>=65&&e<=90}function Ur(t){const e="string"==typeof t?t.charCodeAt(0):t;return e>=48&&e<=57}function qr(t){return Fr(t)||Ur(t)}const Gr=["art-lojban","cel-gaulish","no-bok","no-nyn","zh-guoyu","zh-hakka","zh-min","zh-min-nan","zh-xiang"],Hr={"en-gb-oed":"en-GB-oxendict","i-ami":"ami","i-bnn":"bnn","i-default":null,"i-enochian":null,"i-hak":"hak","i-klingon":"tlh","i-lux":"lb","i-mingo":null,"i-navajo":"nv","i-pwn":"pwn","i-tao":"tao","i-tay":"tay","i-tsu":"tsu","sgn-be-fr":"sfb","sgn-be-nl":"vgt","sgn-ch-de":"sgg","art-lojban":"jbo","cel-gaulish":null,"no-bok":"nb","no-nyn":"nn","zh-guoyu":"cmn","zh-hakka":"hak","zh-min":null,"zh-min-nan":"nan","zh-xiang":"hsn"},Vr={}.hasOwnProperty;function Qr(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n={language:null,extendedLanguageSubtags:[],script:null,region:null,variants:[],extensions:[],privateuse:[],irregular:null,regular:null},r=String(t),i=r.toLowerCase();let o=0;if(null==t)throw new Error("Expected string, got `"+t+"`");if(Vr.call(Hr,i)){const t=Hr[i];return void 0!==e.normalize&&null!==e.normalize&&!e.normalize||"string"!=typeof t?(n[Gr.includes(i)?"regular":"irregular"]=r,n):Qr(t)}for(;Fr(i.charCodeAt(o))&&o<9;)o++;if(o>1&&o<9){if(n.language=r.slice(0,o),o<4){let t=0;for(;45===i.charCodeAt(o)&&Fr(i.charCodeAt(o+1))&&Fr(i.charCodeAt(o+2))&&Fr(i.charCodeAt(o+3))&&!Fr(i.charCodeAt(o+4));){if(t>2)return a(o,3,"Too many extended language subtags, expected at most 3 subtags");n.extendedLanguageSubtags.push(r.slice(o+1,o+4)),o+=4,t++}}for(45===i.charCodeAt(o)&&Fr(i.charCodeAt(o+1))&&Fr(i.charCodeAt(o+2))&&Fr(i.charCodeAt(o+3))&&Fr(i.charCodeAt(o+4))&&!Fr(i.charCodeAt(o+5))&&(n.script=r.slice(o+1,o+5),o+=5),45===i.charCodeAt(o)&&(Fr(i.charCodeAt(o+1))&&Fr(i.charCodeAt(o+2))&&!Fr(i.charCodeAt(o+3))?(n.region=r.slice(o+1,o+3),o+=3):Ur(i.charCodeAt(o+1))&&Ur(i.charCodeAt(o+2))&&Ur(i.charCodeAt(o+3))&&!Ur(i.charCodeAt(o+4))&&(n.region=r.slice(o+1,o+4),o+=4));45===i.charCodeAt(o);){const t=o+1;let e=t;for(;qr(i.charCodeAt(e));){if(e-t>7)return a(e,1,"Too long variant, expected at most 8 characters");e++}if(!(e-t>4||e-t>3&&Ur(i.charCodeAt(t))))break;n.variants.push(r.slice(t,e)),o=e}for(;45===i.charCodeAt(o)&&120!==i.charCodeAt(o+1)&&qr(i.charCodeAt(o+1))&&45===i.charCodeAt(o+2)&&qr(i.charCodeAt(o+3));){let t=o+2,e=0;for(;45===i.charCodeAt(t)&&qr(i.charCodeAt(t+1))&&qr(i.charCodeAt(t+2));){const n=t+1;for(t=n+2,e++;qr(i.charCodeAt(t));){if(t-n>7)return a(t,2,"Too long extension, expected at most 8 characters");t++}}if(!e)return a(t,4,"Empty extension, extensions must have at least 2 characters of content");n.extensions.push({singleton:r.charAt(o+1),extensions:r.slice(o+3,t).split("-")}),o=t}}else o=0;if(0===o&&120===i.charCodeAt(o)||45===i.charCodeAt(o)&&120===i.charCodeAt(o+1)){o=o?o+2:1;let t=o;for(;45===i.charCodeAt(t)&&qr(i.charCodeAt(t+1));){const e=o+1;for(t=e;qr(i.charCodeAt(t));){if(t-e>7)return a(t,5,"Too long private-use area, expected at most 8 characters");t++}n.privateuse.push(r.slice(o+1,t)),o=t}}return o!==r.length?a(o,6,"Found superfluous content after tag"):n;function a(t,r,i){return e.warning&&e.warning(i,r,t),e.forgiving?n:{language:null,extendedLanguageSubtags:[],script:null,region:null,variants:[],extensions:[],privateuse:[],irregular:null,regular:null}}}function Wr(t,e){return function(n,r){let i=Kr(n,"tag");const o=Kr(null==r?"*":r,"range"),a=[];let s=-1;for(;++s<o.length;){const n=o[s].toLowerCase();if(!e&&"*"===n)continue;let r=-1;const l=[];for(;++r<i.length;)if(t(i[r].toLowerCase(),n)){if(!e)return i[r];a.push(i[r])}else l.push(i[r]);i=l}return e?a:void 0}}Wr((function(t,e){return"*"===e||t===e||t.includes(e+"-")}),!0);const Yr=Wr((function(t,e){const n=t.split("-"),r=e.split("-");let i=0,o=0;if("*"!==r[o]&&n[i]!==r[o])return!1;for(i++,o++;o<r.length;)if("*"!==r[o]){if(!n[i])return!1;if(n[i]!==r[o]){if(1===n[i].length)return!1;i++}else i++,o++}else o++;return!0}),!0);function Kr(t,e){const n=t&&"string"==typeof t?[t]:t;if(!n||"object"!=typeof n||!("length"in n))throw new Error("Invalid "+e+" `"+n+"`, expected non-empty string");return n}Wr((function(t,e){let n=e;for(;;){if("*"===n||t===n)return!0;let e=n.lastIndexOf("-");if(e<0)return!1;"-"===n.charAt(e-2)&&(e-=2),n=n.slice(0,e)}}),!1);const Xr=[{from:"in",to:"id"},{from:"iw",to:"he"},{from:"ji",to:"yi"},{from:"jw",to:"jv"},{from:"mo",to:"ro"},{from:"scc",to:"sr"},{from:"scr",to:"hr"},{from:"aam",to:"aas"},{from:"adp",to:"dz"},{from:"aue",to:"ktz"},{from:"ayx",to:"nun"},{from:"bgm",to:"bcg"},{from:"bjd",to:"drl"},{from:"ccq",to:"rki"},{from:"cjr",to:"mom"},{from:"cka",to:"cmr"},{from:"cmk",to:"xch"},{from:"coy",to:"pij"},{from:"cqu",to:"quh"},{from:"drh",to:"mn"},{from:"drw",to:"fa-af"},{from:"gav",to:"dev"},{from:"gfx",to:"vaj"},{from:"ggn",to:"gvr"},{from:"gti",to:"nyc"},{from:"guv",to:"duz"},{from:"hrr",to:"jal"},{from:"ibi",to:"opa"},{from:"ilw",to:"gal"},{from:"jeg",to:"oyb"},{from:"kgc",to:"tdf"},{from:"kgh",to:"kml"},{from:"koj",to:"kwv"},{from:"krm",to:"bmf"},{from:"ktr",to:"dtp"},{from:"kvs",to:"gdj"},{from:"kwq",to:"yam"},{from:"kxe",to:"tvd"},{from:"kzj",to:"dtp"},{from:"kzt",to:"dtp"},{from:"lii",to:"raq"},{from:"lmm",to:"rmx"},{from:"meg",to:"cir"},{from:"mst",to:"mry"},{from:"mwj",to:"vaj"},{from:"myt",to:"mry"},{from:"nad",to:"xny"},{from:"ncp",to:"kdz"},{from:"nnx",to:"ngv"},{from:"nts",to:"pij"},{from:"oun",to:"vaj"},{from:"pcr",to:"adx"},{from:"pmc",to:"huw"},{from:"pmu",to:"phr"},{from:"ppa",to:"bfy"},{from:"ppr",to:"lcq"},{from:"pry",to:"prt"},{from:"puz",to:"pub"},{from:"sca",to:"hle"},{from:"skk",to:"oyb"},{from:"tdu",to:"dtp"},{from:"thc",to:"tpo"},{from:"thx",to:"oyb"},{from:"tie",to:"ras"},{from:"tkk",to:"twm"},{from:"tlw",to:"weo"},{from:"tmp",to:"tyj"},{from:"tne",to:"kak"},{from:"tnf",to:"fa-af"},{from:"tsf",to:"taj"},{from:"uok",to:"ema"},{from:"xba",to:"cax"},{from:"xia",to:"acn"},{from:"xkh",to:"waw"},{from:"xsj",to:"suj"},{from:"ybd",to:"rki"},{from:"yma",to:"lrr"},{from:"ymt",to:"mtm"},{from:"yos",to:"zom"},{from:"yuu",to:"yug"},{from:"asd",to:"snz"},{from:"dit",to:"dif"},{from:"llo",to:"ngt"},{from:"myd",to:"aog"},{from:"nns",to:"nbr"},{from:"agp",to:"apf"},{from:"ais",to:"ami"},{from:"ajt",to:"aeb"},{from:"baz",to:"nvo"},{from:"bhk",to:"fbl"},{from:"bic",to:"bir"},{from:"bjq",to:"bzc"},{from:"bkb",to:"ebk"},{from:"blg",to:"iba"},{from:"btb",to:"beb"},{from:"daf",to:"dnj"},{from:"dap",to:"njz"},{from:"djl",to:"dze"},{from:"dkl",to:"aqd"},{from:"drr",to:"kzk"},{from:"dud",to:"uth"},{from:"duj",to:"dwu"},{from:"dwl",to:"dbt"},{from:"elp",to:"amq"},{from:"gbc",to:"wny"},{from:"ggo",to:"esg"},{from:"ggr",to:"gtu"},{from:"gio",to:"aou"},{from:"gli",to:"kzk"},{from:"ill",to:"ilm"},{from:"izi",to:"eza"},{from:"jar",to:"jgk"},{from:"kdv",to:"zkd"},{from:"kgd",to:"ncq"},{from:"kpp",to:"jkm"},{from:"kxl",to:"kru"},{from:"kzh",to:"dgl"},{from:"lak",to:"ksp"},{from:"leg",to:"enl"},{from:"mgx",to:"jbk"},{from:"mnt",to:"wnn"},{from:"mof",to:"xnt"},{from:"mwd",to:"dmw"},{from:"nbf",to:"nru"},{from:"nbx",to:"ekc"},{from:"nln",to:"azd"},{from:"nlr",to:"nrk"},{from:"noo",to:"dtd"},{from:"nxu",to:"bpp"},{from:"pat",to:"kxr"},{from:"rmr",to:"emx"},{from:"sap",to:"aqt"},{from:"sgl",to:"isk"},{from:"smd",to:"kmb"},{from:"snb",to:"iba"},{from:"sul",to:"sgd"},{from:"sum",to:"ulw"},{from:"tgg",to:"bjp"},{from:"thw",to:"ola"},{from:"tid",to:"itd"},{from:"unp",to:"wro"},{from:"wgw",to:"wgb"},{from:"wit",to:"nol"},{from:"wiw",to:"nwo"},{from:"xrq",to:"dmw"},{from:"yen",to:"ynq"},{from:"yiy",to:"yrm"},{from:"zir",to:"scv"},{from:"sgn-br",to:"bzs"},{from:"sgn-co",to:"csn"},{from:"sgn-de",to:"gsg"},{from:"sgn-dk",to:"dsl"},{from:"sgn-fr",to:"fsl"},{from:"sgn-gb",to:"bfi"},{from:"sgn-gr",to:"gss"},{from:"sgn-ie",to:"isg"},{from:"sgn-it",to:"ise"},{from:"sgn-jp",to:"jsl"},{from:"sgn-mx",to:"mfs"},{from:"sgn-ni",to:"ncs"},{from:"sgn-nl",to:"dse"},{from:"sgn-no",to:"nsi"},{from:"sgn-pt",to:"psr"},{from:"sgn-se",to:"swl"},{from:"sgn-us",to:"ase"},{from:"sgn-za",to:"sfs"},{from:"sgn-es",to:"ssp"},{from:"zh-cmn",to:"zh"},{from:"zh-cmn-hans",to:"zh-hans"},{from:"zh-cmn-hant",to:"zh-hant"},{from:"zh-gan",to:"gan"},{from:"zh-wuu",to:"wuu"},{from:"zh-yue",to:"yue"},{from:"no-bokmal",to:"nb"},{from:"no-nynorsk",to:"nn"},{from:"aa-saaho",to:"ssy"},{from:"sh",to:"sr-latn"},{from:"cnr",to:"sr-me"},{from:"tl",to:"fil"},{from:"aju",to:"jrb"},{from:"als",to:"sq"},{from:"arb",to:"ar"},{from:"ayr",to:"ay"},{from:"azj",to:"az"},{from:"bcc",to:"bal"},{from:"bcl",to:"bik"},{from:"bxk",to:"luy"},{from:"bxr",to:"bua"},{from:"cld",to:"syr"},{from:"cmn",to:"zh"},{from:"cwd",to:"cr"},{from:"dgo",to:"doi"},{from:"dhd",to:"mwr"},{from:"dik",to:"din"},{from:"diq",to:"zza"},{from:"lbk",to:"bnc"},{from:"ekk",to:"et"},{from:"emk",to:"man"},{from:"esk",to:"ik"},{from:"fat",to:"ak"},{from:"fuc",to:"ff"},{from:"gaz",to:"om"},{from:"gbo",to:"grb"},{from:"gno",to:"gon"},{from:"gug",to:"gn"},{from:"gya",to:"gba"},{from:"hdn",to:"hai"},{from:"hea",to:"hmn"},{from:"ike",to:"iu"},{from:"kmr",to:"ku"},{from:"knc",to:"kr"},{from:"kng",to:"kg"},{from:"knn",to:"kok"},{from:"kpv",to:"kv"},{from:"lvs",to:"lv"},{from:"mhr",to:"chm"},{from:"mup",to:"raj"},{from:"khk",to:"mn"},{from:"npi",to:"ne"},{from:"ojg",to:"oj"},{from:"ory",to:"or"},{from:"pbu",to:"ps"},{from:"pes",to:"fa"},{from:"plt",to:"mg"},{from:"pnb",to:"lah"},{from:"quz",to:"qu"},{from:"rmy",to:"rom"},{from:"spy",to:"kln"},{from:"src",to:"sc"},{from:"swh",to:"sw"},{from:"ttq",to:"tmh"},{from:"tw",to:"ak"},{from:"umu",to:"del"},{from:"uzn",to:"uz"},{from:"xpe",to:"kpe"},{from:"xsl",to:"den"},{from:"ydd",to:"yi"},{from:"zai",to:"zap"},{from:"zsm",to:"ms"},{from:"zyb",to:"za"},{from:"him",to:"srx"},{from:"mnk",to:"man"},{from:"bh",to:"bho"},{from:"prs",to:"fa-af"},{from:"swc",to:"sw-cd"},{from:"aar",to:"aa"},{from:"abk",to:"ab"},{from:"ave",to:"ae"},{from:"afr",to:"af"},{from:"aka",to:"ak"},{from:"amh",to:"am"},{from:"arg",to:"an"},{from:"ara",to:"ar"},{from:"asm",to:"as"},{from:"ava",to:"av"},{from:"aym",to:"ay"},{from:"aze",to:"az"},{from:"bak",to:"ba"},{from:"bel",to:"be"},{from:"bul",to:"bg"},{from:"bih",to:"bho"},{from:"bis",to:"bi"},{from:"bam",to:"bm"},{from:"ben",to:"bn"},{from:"bod",to:"bo"},{from:"bre",to:"br"},{from:"bos",to:"bs"},{from:"cat",to:"ca"},{from:"che",to:"ce"},{from:"cha",to:"ch"},{from:"cos",to:"co"},{from:"cre",to:"cr"},{from:"ces",to:"cs"},{from:"chu",to:"cu"},{from:"chv",to:"cv"},{from:"cym",to:"cy"},{from:"dan",to:"da"},{from:"deu",to:"de"},{from:"div",to:"dv"},{from:"dzo",to:"dz"},{from:"ewe",to:"ee"},{from:"ell",to:"el"},{from:"eng",to:"en"},{from:"epo",to:"eo"},{from:"spa",to:"es"},{from:"est",to:"et"},{from:"eus",to:"eu"},{from:"fas",to:"fa"},{from:"ful",to:"ff"},{from:"fin",to:"fi"},{from:"fij",to:"fj"},{from:"fao",to:"fo"},{from:"fra",to:"fr"},{from:"fry",to:"fy"},{from:"gle",to:"ga"},{from:"gla",to:"gd"},{from:"glg",to:"gl"},{from:"grn",to:"gn"},{from:"guj",to:"gu"},{from:"glv",to:"gv"},{from:"hau",to:"ha"},{from:"heb",to:"he"},{from:"hin",to:"hi"},{from:"hmo",to:"ho"},{from:"hrv",to:"hr"},{from:"hat",to:"ht"},{from:"hun",to:"hu"},{from:"hye",to:"hy"},{from:"her",to:"hz"},{from:"ina",to:"ia"},{from:"ind",to:"id"},{from:"ile",to:"ie"},{from:"ibo",to:"ig"},{from:"iii",to:"ii"},{from:"ipk",to:"ik"},{from:"ido",to:"io"},{from:"isl",to:"is"},{from:"ita",to:"it"},{from:"iku",to:"iu"},{from:"jpn",to:"ja"},{from:"jav",to:"jv"},{from:"kat",to:"ka"},{from:"kon",to:"kg"},{from:"kik",to:"ki"},{from:"kua",to:"kj"},{from:"kaz",to:"kk"},{from:"kal",to:"kl"},{from:"khm",to:"km"},{from:"kan",to:"kn"},{from:"kor",to:"ko"},{from:"kau",to:"kr"},{from:"kas",to:"ks"},{from:"kur",to:"ku"},{from:"kom",to:"kv"},{from:"cor",to:"kw"},{from:"kir",to:"ky"},{from:"lat",to:"la"},{from:"ltz",to:"lb"},{from:"lug",to:"lg"},{from:"lim",to:"li"},{from:"lin",to:"ln"},{from:"lao",to:"lo"},{from:"lit",to:"lt"},{from:"lub",to:"lu"},{from:"lav",to:"lv"},{from:"mlg",to:"mg"},{from:"mah",to:"mh"},{from:"mri",to:"mi"},{from:"mkd",to:"mk"},{from:"mal",to:"ml"},{from:"mon",to:"mn"},{from:"mol",to:"ro"},{from:"mar",to:"mr"},{from:"msa",to:"ms"},{from:"mlt",to:"mt"},{from:"mya",to:"my"},{from:"nau",to:"na"},{from:"nob",to:"nb"},{from:"nde",to:"nd"},{from:"nep",to:"ne"},{from:"ndo",to:"ng"},{from:"nld",to:"nl"},{from:"nno",to:"nn"},{from:"nor",to:"no"},{from:"nbl",to:"nr"},{from:"nav",to:"nv"},{from:"nya",to:"ny"},{from:"oci",to:"oc"},{from:"oji",to:"oj"},{from:"orm",to:"om"},{from:"ori",to:"or"},{from:"oss",to:"os"},{from:"pan",to:"pa"},{from:"pli",to:"pi"},{from:"pol",to:"pl"},{from:"pus",to:"ps"},{from:"por",to:"pt"},{from:"que",to:"qu"},{from:"roh",to:"rm"},{from:"run",to:"rn"},{from:"ron",to:"ro"},{from:"rus",to:"ru"},{from:"kin",to:"rw"},{from:"san",to:"sa"},{from:"srd",to:"sc"},{from:"snd",to:"sd"},{from:"sme",to:"se"},{from:"sag",to:"sg"},{from:"hbs",to:"sr-latn"},{from:"sin",to:"si"},{from:"slk",to:"sk"},{from:"slv",to:"sl"},{from:"smo",to:"sm"},{from:"sna",to:"sn"},{from:"som",to:"so"},{from:"sqi",to:"sq"},{from:"srp",to:"sr"},{from:"ssw",to:"ss"},{from:"sot",to:"st"},{from:"sun",to:"su"},{from:"swe",to:"sv"},{from:"swa",to:"sw"},{from:"tam",to:"ta"},{from:"tel",to:"te"},{from:"tgk",to:"tg"},{from:"tha",to:"th"},{from:"tir",to:"ti"},{from:"tuk",to:"tk"},{from:"tgl",to:"fil"},{from:"tsn",to:"tn"},{from:"ton",to:"to"},{from:"tur",to:"tr"},{from:"tso",to:"ts"},{from:"tat",to:"tt"},{from:"twi",to:"ak"},{from:"tah",to:"ty"},{from:"uig",to:"ug"},{from:"ukr",to:"uk"},{from:"urd",to:"ur"},{from:"uzb",to:"uz"},{from:"ven",to:"ve"},{from:"vie",to:"vi"},{from:"vol",to:"vo"},{from:"wln",to:"wa"},{from:"wol",to:"wo"},{from:"xho",to:"xh"},{from:"yid",to:"yi"},{from:"yor",to:"yo"},{from:"zha",to:"za"},{from:"zho",to:"zh"},{from:"zul",to:"zu"},{from:"alb",to:"sq"},{from:"arm",to:"hy"},{from:"baq",to:"eu"},{from:"bur",to:"my"},{from:"chi",to:"zh"},{from:"cze",to:"cs"},{from:"dut",to:"nl"},{from:"fre",to:"fr"},{from:"geo",to:"ka"},{from:"ger",to:"de"},{from:"gre",to:"el"},{from:"ice",to:"is"},{from:"mac",to:"mk"},{from:"mao",to:"mi"},{from:"may",to:"ms"},{from:"per",to:"fa"},{from:"rum",to:"ro"},{from:"slo",to:"sk"},{from:"tib",to:"bo"},{from:"wel",to:"cy"},{from:"und-aaland",to:"und-ax"},{from:"hy-arevmda",to:"hyw"},{from:"und-arevmda",to:"und"},{from:"und-arevela",to:"und"},{from:"und-lojban",to:"und"},{from:"und-saaho",to:"und"},{from:"und-bokmal",to:"und"},{from:"und-nynorsk",to:"und"},{from:"und-hakka",to:"und"},{from:"und-xiang",to:"und"},{from:"und-hepburn-heploc",to:"und-alalc97"}],$r=[{from:{field:"script",value:"qaai"},to:{field:"script",value:"zinh"}},{from:{field:"region",value:"bu"},to:{field:"region",value:"mm"}},{from:{field:"region",value:"ct"},to:{field:"region",value:"ki"}},{from:{field:"region",value:"dd"},to:{field:"region",value:"de"}},{from:{field:"region",value:"dy"},to:{field:"region",value:"bj"}},{from:{field:"region",value:"fx"},to:{field:"region",value:"fr"}},{from:{field:"region",value:"hv"},to:{field:"region",value:"bf"}},{from:{field:"region",value:"jt"},to:{field:"region",value:"um"}},{from:{field:"region",value:"mi"},to:{field:"region",value:"um"}},{from:{field:"region",value:"nh"},to:{field:"region",value:"vu"}},{from:{field:"region",value:"nq"},to:{field:"region",value:"aq"}},{from:{field:"region",value:"pu"},to:{field:"region",value:"um"}},{from:{field:"region",value:"pz"},to:{field:"region",value:"pa"}},{from:{field:"region",value:"qu"},to:{field:"region",value:"eu"}},{from:{field:"region",value:"rh"},to:{field:"region",value:"zw"}},{from:{field:"region",value:"tp"},to:{field:"region",value:"tl"}},{from:{field:"region",value:"uk"},to:{field:"region",value:"gb"}},{from:{field:"region",value:"vd"},to:{field:"region",value:"vn"}},{from:{field:"region",value:"wk"},to:{field:"region",value:"um"}},{from:{field:"region",value:"yd"},to:{field:"region",value:"ye"}},{from:{field:"region",value:"zr"},to:{field:"region",value:"cd"}},{from:{field:"region",value:"230"},to:{field:"region",value:"et"}},{from:{field:"region",value:"280"},to:{field:"region",value:"de"}},{from:{field:"region",value:"736"},to:{field:"region",value:"sd"}},{from:{field:"region",value:"886"},to:{field:"region",value:"ye"}},{from:{field:"region",value:"958"},to:{field:"region",value:"aa"}},{from:{field:"region",value:"020"},to:{field:"region",value:"ad"}},{from:{field:"region",value:"784"},to:{field:"region",value:"ae"}},{from:{field:"region",value:"004"},to:{field:"region",value:"af"}},{from:{field:"region",value:"028"},to:{field:"region",value:"ag"}},{from:{field:"region",value:"660"},to:{field:"region",value:"ai"}},{from:{field:"region",value:"008"},to:{field:"region",value:"al"}},{from:{field:"region",value:"051"},to:{field:"region",value:"am"}},{from:{field:"region",value:"024"},to:{field:"region",value:"ao"}},{from:{field:"region",value:"010"},to:{field:"region",value:"aq"}},{from:{field:"region",value:"032"},to:{field:"region",value:"ar"}},{from:{field:"region",value:"016"},to:{field:"region",value:"as"}},{from:{field:"region",value:"040"},to:{field:"region",value:"at"}},{from:{field:"region",value:"036"},to:{field:"region",value:"au"}},{from:{field:"region",value:"533"},to:{field:"region",value:"aw"}},{from:{field:"region",value:"248"},to:{field:"region",value:"ax"}},{from:{field:"region",value:"031"},to:{field:"region",value:"az"}},{from:{field:"region",value:"070"},to:{field:"region",value:"ba"}},{from:{field:"region",value:"052"},to:{field:"region",value:"bb"}},{from:{field:"region",value:"050"},to:{field:"region",value:"bd"}},{from:{field:"region",value:"056"},to:{field:"region",value:"be"}},{from:{field:"region",value:"854"},to:{field:"region",value:"bf"}},{from:{field:"region",value:"100"},to:{field:"region",value:"bg"}},{from:{field:"region",value:"048"},to:{field:"region",value:"bh"}},{from:{field:"region",value:"108"},to:{field:"region",value:"bi"}},{from:{field:"region",value:"204"},to:{field:"region",value:"bj"}},{from:{field:"region",value:"652"},to:{field:"region",value:"bl"}},{from:{field:"region",value:"060"},to:{field:"region",value:"bm"}},{from:{field:"region",value:"096"},to:{field:"region",value:"bn"}},{from:{field:"region",value:"068"},to:{field:"region",value:"bo"}},{from:{field:"region",value:"535"},to:{field:"region",value:"bq"}},{from:{field:"region",value:"076"},to:{field:"region",value:"br"}},{from:{field:"region",value:"044"},to:{field:"region",value:"bs"}},{from:{field:"region",value:"064"},to:{field:"region",value:"bt"}},{from:{field:"region",value:"104"},to:{field:"region",value:"mm"}},{from:{field:"region",value:"074"},to:{field:"region",value:"bv"}},{from:{field:"region",value:"072"},to:{field:"region",value:"bw"}},{from:{field:"region",value:"112"},to:{field:"region",value:"by"}},{from:{field:"region",value:"084"},to:{field:"region",value:"bz"}},{from:{field:"region",value:"124"},to:{field:"region",value:"ca"}},{from:{field:"region",value:"166"},to:{field:"region",value:"cc"}},{from:{field:"region",value:"180"},to:{field:"region",value:"cd"}},{from:{field:"region",value:"140"},to:{field:"region",value:"cf"}},{from:{field:"region",value:"178"},to:{field:"region",value:"cg"}},{from:{field:"region",value:"756"},to:{field:"region",value:"ch"}},{from:{field:"region",value:"384"},to:{field:"region",value:"ci"}},{from:{field:"region",value:"184"},to:{field:"region",value:"ck"}},{from:{field:"region",value:"152"},to:{field:"region",value:"cl"}},{from:{field:"region",value:"120"},to:{field:"region",value:"cm"}},{from:{field:"region",value:"156"},to:{field:"region",value:"cn"}},{from:{field:"region",value:"170"},to:{field:"region",value:"co"}},{from:{field:"region",value:"188"},to:{field:"region",value:"cr"}},{from:{field:"region",value:"192"},to:{field:"region",value:"cu"}},{from:{field:"region",value:"132"},to:{field:"region",value:"cv"}},{from:{field:"region",value:"531"},to:{field:"region",value:"cw"}},{from:{field:"region",value:"162"},to:{field:"region",value:"cx"}},{from:{field:"region",value:"196"},to:{field:"region",value:"cy"}},{from:{field:"region",value:"203"},to:{field:"region",value:"cz"}},{from:{field:"region",value:"278"},to:{field:"region",value:"de"}},{from:{field:"region",value:"276"},to:{field:"region",value:"de"}},{from:{field:"region",value:"262"},to:{field:"region",value:"dj"}},{from:{field:"region",value:"208"},to:{field:"region",value:"dk"}},{from:{field:"region",value:"212"},to:{field:"region",value:"dm"}},{from:{field:"region",value:"214"},to:{field:"region",value:"do"}},{from:{field:"region",value:"012"},to:{field:"region",value:"dz"}},{from:{field:"region",value:"218"},to:{field:"region",value:"ec"}},{from:{field:"region",value:"233"},to:{field:"region",value:"ee"}},{from:{field:"region",value:"818"},to:{field:"region",value:"eg"}},{from:{field:"region",value:"732"},to:{field:"region",value:"eh"}},{from:{field:"region",value:"232"},to:{field:"region",value:"er"}},{from:{field:"region",value:"724"},to:{field:"region",value:"es"}},{from:{field:"region",value:"231"},to:{field:"region",value:"et"}},{from:{field:"region",value:"246"},to:{field:"region",value:"fi"}},{from:{field:"region",value:"242"},to:{field:"region",value:"fj"}},{from:{field:"region",value:"238"},to:{field:"region",value:"fk"}},{from:{field:"region",value:"583"},to:{field:"region",value:"fm"}},{from:{field:"region",value:"234"},to:{field:"region",value:"fo"}},{from:{field:"region",value:"250"},to:{field:"region",value:"fr"}},{from:{field:"region",value:"249"},to:{field:"region",value:"fr"}},{from:{field:"region",value:"266"},to:{field:"region",value:"ga"}},{from:{field:"region",value:"826"},to:{field:"region",value:"gb"}},{from:{field:"region",value:"308"},to:{field:"region",value:"gd"}},{from:{field:"region",value:"268"},to:{field:"region",value:"ge"}},{from:{field:"region",value:"254"},to:{field:"region",value:"gf"}},{from:{field:"region",value:"831"},to:{field:"region",value:"gg"}},{from:{field:"region",value:"288"},to:{field:"region",value:"gh"}},{from:{field:"region",value:"292"},to:{field:"region",value:"gi"}},{from:{field:"region",value:"304"},to:{field:"region",value:"gl"}},{from:{field:"region",value:"270"},to:{field:"region",value:"gm"}},{from:{field:"region",value:"324"},to:{field:"region",value:"gn"}},{from:{field:"region",value:"312"},to:{field:"region",value:"gp"}},{from:{field:"region",value:"226"},to:{field:"region",value:"gq"}},{from:{field:"region",value:"300"},to:{field:"region",value:"gr"}},{from:{field:"region",value:"239"},to:{field:"region",value:"gs"}},{from:{field:"region",value:"320"},to:{field:"region",value:"gt"}},{from:{field:"region",value:"316"},to:{field:"region",value:"gu"}},{from:{field:"region",value:"624"},to:{field:"region",value:"gw"}},{from:{field:"region",value:"328"},to:{field:"region",value:"gy"}},{from:{field:"region",value:"344"},to:{field:"region",value:"hk"}},{from:{field:"region",value:"334"},to:{field:"region",value:"hm"}},{from:{field:"region",value:"340"},to:{field:"region",value:"hn"}},{from:{field:"region",value:"191"},to:{field:"region",value:"hr"}},{from:{field:"region",value:"332"},to:{field:"region",value:"ht"}},{from:{field:"region",value:"348"},to:{field:"region",value:"hu"}},{from:{field:"region",value:"360"},to:{field:"region",value:"id"}},{from:{field:"region",value:"372"},to:{field:"region",value:"ie"}},{from:{field:"region",value:"376"},to:{field:"region",value:"il"}},{from:{field:"region",value:"833"},to:{field:"region",value:"im"}},{from:{field:"region",value:"356"},to:{field:"region",value:"in"}},{from:{field:"region",value:"086"},to:{field:"region",value:"io"}},{from:{field:"region",value:"368"},to:{field:"region",value:"iq"}},{from:{field:"region",value:"364"},to:{field:"region",value:"ir"}},{from:{field:"region",value:"352"},to:{field:"region",value:"is"}},{from:{field:"region",value:"380"},to:{field:"region",value:"it"}},{from:{field:"region",value:"832"},to:{field:"region",value:"je"}},{from:{field:"region",value:"388"},to:{field:"region",value:"jm"}},{from:{field:"region",value:"400"},to:{field:"region",value:"jo"}},{from:{field:"region",value:"392"},to:{field:"region",value:"jp"}},{from:{field:"region",value:"404"},to:{field:"region",value:"ke"}},{from:{field:"region",value:"417"},to:{field:"region",value:"kg"}},{from:{field:"region",value:"116"},to:{field:"region",value:"kh"}},{from:{field:"region",value:"296"},to:{field:"region",value:"ki"}},{from:{field:"region",value:"174"},to:{field:"region",value:"km"}},{from:{field:"region",value:"659"},to:{field:"region",value:"kn"}},{from:{field:"region",value:"408"},to:{field:"region",value:"kp"}},{from:{field:"region",value:"410"},to:{field:"region",value:"kr"}},{from:{field:"region",value:"414"},to:{field:"region",value:"kw"}},{from:{field:"region",value:"136"},to:{field:"region",value:"ky"}},{from:{field:"region",value:"398"},to:{field:"region",value:"kz"}},{from:{field:"region",value:"418"},to:{field:"region",value:"la"}},{from:{field:"region",value:"422"},to:{field:"region",value:"lb"}},{from:{field:"region",value:"662"},to:{field:"region",value:"lc"}},{from:{field:"region",value:"438"},to:{field:"region",value:"li"}},{from:{field:"region",value:"144"},to:{field:"region",value:"lk"}},{from:{field:"region",value:"430"},to:{field:"region",value:"lr"}},{from:{field:"region",value:"426"},to:{field:"region",value:"ls"}},{from:{field:"region",value:"440"},to:{field:"region",value:"lt"}},{from:{field:"region",value:"442"},to:{field:"region",value:"lu"}},{from:{field:"region",value:"428"},to:{field:"region",value:"lv"}},{from:{field:"region",value:"434"},to:{field:"region",value:"ly"}},{from:{field:"region",value:"504"},to:{field:"region",value:"ma"}},{from:{field:"region",value:"492"},to:{field:"region",value:"mc"}},{from:{field:"region",value:"498"},to:{field:"region",value:"md"}},{from:{field:"region",value:"499"},to:{field:"region",value:"me"}},{from:{field:"region",value:"663"},to:{field:"region",value:"mf"}},{from:{field:"region",value:"450"},to:{field:"region",value:"mg"}},{from:{field:"region",value:"584"},to:{field:"region",value:"mh"}},{from:{field:"region",value:"807"},to:{field:"region",value:"mk"}},{from:{field:"region",value:"466"},to:{field:"region",value:"ml"}},{from:{field:"region",value:"496"},to:{field:"region",value:"mn"}},{from:{field:"region",value:"446"},to:{field:"region",value:"mo"}},{from:{field:"region",value:"580"},to:{field:"region",value:"mp"}},{from:{field:"region",value:"474"},to:{field:"region",value:"mq"}},{from:{field:"region",value:"478"},to:{field:"region",value:"mr"}},{from:{field:"region",value:"500"},to:{field:"region",value:"ms"}},{from:{field:"region",value:"470"},to:{field:"region",value:"mt"}},{from:{field:"region",value:"480"},to:{field:"region",value:"mu"}},{from:{field:"region",value:"462"},to:{field:"region",value:"mv"}},{from:{field:"region",value:"454"},to:{field:"region",value:"mw"}},{from:{field:"region",value:"484"},to:{field:"region",value:"mx"}},{from:{field:"region",value:"458"},to:{field:"region",value:"my"}},{from:{field:"region",value:"508"},to:{field:"region",value:"mz"}},{from:{field:"region",value:"516"},to:{field:"region",value:"na"}},{from:{field:"region",value:"540"},to:{field:"region",value:"nc"}},{from:{field:"region",value:"562"},to:{field:"region",value:"ne"}},{from:{field:"region",value:"574"},to:{field:"region",value:"nf"}},{from:{field:"region",value:"566"},to:{field:"region",value:"ng"}},{from:{field:"region",value:"558"},to:{field:"region",value:"ni"}},{from:{field:"region",value:"528"},to:{field:"region",value:"nl"}},{from:{field:"region",value:"578"},to:{field:"region",value:"no"}},{from:{field:"region",value:"524"},to:{field:"region",value:"np"}},{from:{field:"region",value:"520"},to:{field:"region",value:"nr"}},{from:{field:"region",value:"570"},to:{field:"region",value:"nu"}},{from:{field:"region",value:"554"},to:{field:"region",value:"nz"}},{from:{field:"region",value:"512"},to:{field:"region",value:"om"}},{from:{field:"region",value:"591"},to:{field:"region",value:"pa"}},{from:{field:"region",value:"604"},to:{field:"region",value:"pe"}},{from:{field:"region",value:"258"},to:{field:"region",value:"pf"}},{from:{field:"region",value:"598"},to:{field:"region",value:"pg"}},{from:{field:"region",value:"608"},to:{field:"region",value:"ph"}},{from:{field:"region",value:"586"},to:{field:"region",value:"pk"}},{from:{field:"region",value:"616"},to:{field:"region",value:"pl"}},{from:{field:"region",value:"666"},to:{field:"region",value:"pm"}},{from:{field:"region",value:"612"},to:{field:"region",value:"pn"}},{from:{field:"region",value:"630"},to:{field:"region",value:"pr"}},{from:{field:"region",value:"275"},to:{field:"region",value:"ps"}},{from:{field:"region",value:"620"},to:{field:"region",value:"pt"}},{from:{field:"region",value:"585"},to:{field:"region",value:"pw"}},{from:{field:"region",value:"600"},to:{field:"region",value:"py"}},{from:{field:"region",value:"634"},to:{field:"region",value:"qa"}},{from:{field:"region",value:"959"},to:{field:"region",value:"qm"}},{from:{field:"region",value:"960"},to:{field:"region",value:"qn"}},{from:{field:"region",value:"962"},to:{field:"region",value:"qp"}},{from:{field:"region",value:"963"},to:{field:"region",value:"qq"}},{from:{field:"region",value:"964"},to:{field:"region",value:"qr"}},{from:{field:"region",value:"965"},to:{field:"region",value:"qs"}},{from:{field:"region",value:"966"},to:{field:"region",value:"qt"}},{from:{field:"region",value:"967"},to:{field:"region",value:"eu"}},{from:{field:"region",value:"968"},to:{field:"region",value:"qv"}},{from:{field:"region",value:"969"},to:{field:"region",value:"qw"}},{from:{field:"region",value:"970"},to:{field:"region",value:"qx"}},{from:{field:"region",value:"971"},to:{field:"region",value:"qy"}},{from:{field:"region",value:"972"},to:{field:"region",value:"qz"}},{from:{field:"region",value:"638"},to:{field:"region",value:"re"}},{from:{field:"region",value:"642"},to:{field:"region",value:"ro"}},{from:{field:"region",value:"688"},to:{field:"region",value:"rs"}},{from:{field:"region",value:"643"},to:{field:"region",value:"ru"}},{from:{field:"region",value:"646"},to:{field:"region",value:"rw"}},{from:{field:"region",value:"682"},to:{field:"region",value:"sa"}},{from:{field:"region",value:"090"},to:{field:"region",value:"sb"}},{from:{field:"region",value:"690"},to:{field:"region",value:"sc"}},{from:{field:"region",value:"729"},to:{field:"region",value:"sd"}},{from:{field:"region",value:"752"},to:{field:"region",value:"se"}},{from:{field:"region",value:"702"},to:{field:"region",value:"sg"}},{from:{field:"region",value:"654"},to:{field:"region",value:"sh"}},{from:{field:"region",value:"705"},to:{field:"region",value:"si"}},{from:{field:"region",value:"744"},to:{field:"region",value:"sj"}},{from:{field:"region",value:"703"},to:{field:"region",value:"sk"}},{from:{field:"region",value:"694"},to:{field:"region",value:"sl"}},{from:{field:"region",value:"674"},to:{field:"region",value:"sm"}},{from:{field:"region",value:"686"},to:{field:"region",value:"sn"}},{from:{field:"region",value:"706"},to:{field:"region",value:"so"}},{from:{field:"region",value:"740"},to:{field:"region",value:"sr"}},{from:{field:"region",value:"728"},to:{field:"region",value:"ss"}},{from:{field:"region",value:"678"},to:{field:"region",value:"st"}},{from:{field:"region",value:"222"},to:{field:"region",value:"sv"}},{from:{field:"region",value:"534"},to:{field:"region",value:"sx"}},{from:{field:"region",value:"760"},to:{field:"region",value:"sy"}},{from:{field:"region",value:"748"},to:{field:"region",value:"sz"}},{from:{field:"region",value:"796"},to:{field:"region",value:"tc"}},{from:{field:"region",value:"148"},to:{field:"region",value:"td"}},{from:{field:"region",value:"260"},to:{field:"region",value:"tf"}},{from:{field:"region",value:"768"},to:{field:"region",value:"tg"}},{from:{field:"region",value:"764"},to:{field:"region",value:"th"}},{from:{field:"region",value:"762"},to:{field:"region",value:"tj"}},{from:{field:"region",value:"772"},to:{field:"region",value:"tk"}},{from:{field:"region",value:"626"},to:{field:"region",value:"tl"}},{from:{field:"region",value:"795"},to:{field:"region",value:"tm"}},{from:{field:"region",value:"788"},to:{field:"region",value:"tn"}},{from:{field:"region",value:"776"},to:{field:"region",value:"to"}},{from:{field:"region",value:"792"},to:{field:"region",value:"tr"}},{from:{field:"region",value:"780"},to:{field:"region",value:"tt"}},{from:{field:"region",value:"798"},to:{field:"region",value:"tv"}},{from:{field:"region",value:"158"},to:{field:"region",value:"tw"}},{from:{field:"region",value:"834"},to:{field:"region",value:"tz"}},{from:{field:"region",value:"804"},to:{field:"region",value:"ua"}},{from:{field:"region",value:"800"},to:{field:"region",value:"ug"}},{from:{field:"region",value:"581"},to:{field:"region",value:"um"}},{from:{field:"region",value:"840"},to:{field:"region",value:"us"}},{from:{field:"region",value:"858"},to:{field:"region",value:"uy"}},{from:{field:"region",value:"860"},to:{field:"region",value:"uz"}},{from:{field:"region",value:"336"},to:{field:"region",value:"va"}},{from:{field:"region",value:"670"},to:{field:"region",value:"vc"}},{from:{field:"region",value:"862"},to:{field:"region",value:"ve"}},{from:{field:"region",value:"092"},to:{field:"region",value:"vg"}},{from:{field:"region",value:"850"},to:{field:"region",value:"vi"}},{from:{field:"region",value:"704"},to:{field:"region",value:"vn"}},{from:{field:"region",value:"548"},to:{field:"region",value:"vu"}},{from:{field:"region",value:"876"},to:{field:"region",value:"wf"}},{from:{field:"region",value:"882"},to:{field:"region",value:"ws"}},{from:{field:"region",value:"973"},to:{field:"region",value:"xa"}},{from:{field:"region",value:"974"},to:{field:"region",value:"xb"}},{from:{field:"region",value:"975"},to:{field:"region",value:"xc"}},{from:{field:"region",value:"976"},to:{field:"region",value:"xd"}},{from:{field:"region",value:"977"},to:{field:"region",value:"xe"}},{from:{field:"region",value:"978"},to:{field:"region",value:"xf"}},{from:{field:"region",value:"979"},to:{field:"region",value:"xg"}},{from:{field:"region",value:"980"},to:{field:"region",value:"xh"}},{from:{field:"region",value:"981"},to:{field:"region",value:"xi"}},{from:{field:"region",value:"982"},to:{field:"region",value:"xj"}},{from:{field:"region",value:"983"},to:{field:"region",value:"xk"}},{from:{field:"region",value:"984"},to:{field:"region",value:"xl"}},{from:{field:"region",value:"985"},to:{field:"region",value:"xm"}},{from:{field:"region",value:"986"},to:{field:"region",value:"xn"}},{from:{field:"region",value:"987"},to:{field:"region",value:"xo"}},{from:{field:"region",value:"988"},to:{field:"region",value:"xp"}},{from:{field:"region",value:"989"},to:{field:"region",value:"xq"}},{from:{field:"region",value:"990"},to:{field:"region",value:"xr"}},{from:{field:"region",value:"991"},to:{field:"region",value:"xs"}},{from:{field:"region",value:"992"},to:{field:"region",value:"xt"}},{from:{field:"region",value:"993"},to:{field:"region",value:"xu"}},{from:{field:"region",value:"994"},to:{field:"region",value:"xv"}},{from:{field:"region",value:"995"},to:{field:"region",value:"xw"}},{from:{field:"region",value:"996"},to:{field:"region",value:"xx"}},{from:{field:"region",value:"997"},to:{field:"region",value:"xy"}},{from:{field:"region",value:"998"},to:{field:"region",value:"xz"}},{from:{field:"region",value:"720"},to:{field:"region",value:"ye"}},{from:{field:"region",value:"887"},to:{field:"region",value:"ye"}},{from:{field:"region",value:"175"},to:{field:"region",value:"yt"}},{from:{field:"region",value:"710"},to:{field:"region",value:"za"}},{from:{field:"region",value:"894"},to:{field:"region",value:"zm"}},{from:{field:"region",value:"716"},to:{field:"region",value:"zw"}},{from:{field:"region",value:"999"},to:{field:"region",value:"zz"}},{from:{field:"variants",value:"polytoni"},to:{field:"variants",value:"polyton"}},{from:{field:"variants",value:"heploc"},to:{field:"variants",value:"alalc97"}}],Zr={region:{172:["ru","am","az","by","ge","kg","kz","md","tj","tm","ua","uz"],200:["cz","sk"],530:["cw","sx","bq"],532:["cw","sx","bq"],536:["sa","iq"],582:["fm","mh","mp","pw"],810:["ru","am","az","by","ee","ge","kz","kg","lv","lt","md","tj","tm","ua","uz"],830:["je","gg"],890:["rs","me","si","hr","mk","ba"],891:["rs","me"],an:["cw","sx","bq"],cs:["rs","me"],fq:["aq","tf"],nt:["sa","iq"],pc:["fm","mh","mp","pw"],su:["ru","am","az","by","ee","ge","kz","kg","lv","lt","md","tj","tm","ua","uz"],yu:["rs","me"],"062":["034","143"],ant:["cw","sx","bq"],scg:["rs","me"],ntz:["sa","iq"],sun:["ru","am","az","by","ee","ge","kz","kg","lv","lt","md","tj","tm","ua","uz"],yug:["rs","me"]}},Jr={aa:"aa-latn-et",aaa:"aaa-latn-ng",aab:"aab-latn-ng",aac:"aac-latn-pg",aad:"aad-latn-pg",aae:"aae-latn-it","aae-grek":"aae-grek-it",aaf:"aaf-mlym-in","aaf-arab":"aaf-arab-in",aag:"aag-latn-pg",aah:"aah-latn-pg",aai:"aai-latn-zz",aak:"aak-latn-zz",aal:"aal-latn-cm",aan:"aan-latn-br",aao:"aao-arab-dz",aap:"aap-latn-br",aaq:"aaq-latn-us",aas:"aas-latn-tz",aat:"aat-grek-gr",aau:"aau-latn-zz",aaw:"aaw-latn-pg",aax:"aax-latn-id",aaz:"aaz-latn-id",ab:"ab-cyrl-ge",aba:"aba-latn-ci",abb:"abb-latn-cm",abc:"abc-latn-ph",abd:"abd-latn-ph",abe:"abe-latn-ca",abf:"abf-latn-my",abg:"abg-latn-pg",abh:"abh-arab-tj",abi:"abi-latn-zz",abl:"abl-rjng-id","abl-latn":"abl-latn-id",abm:"abm-latn-ng",abn:"abn-latn-ng",abo:"abo-latn-ng",abp:"abp-latn-ph",abq:"abq-cyrl-zz",abr:"abr-latn-gh",abs:"abs-latn-id",abt:"abt-latn-zz",abu:"abu-latn-ci",abv:"abv-arab-bh",abw:"abw-latn-pg",abx:"abx-latn-ph",aby:"aby-latn-zz",abz:"abz-latn-id",aca:"aca-latn-co",acb:"acb-latn-ng",acd:"acd-latn-zz",ace:"ace-latn-id",acf:"acf-latn-lc",ach:"ach-latn-ug",acm:"acm-arab-iq",acn:"acn-latn-cn",acp:"acp-latn-ng",acq:"acq-arab-ye",acr:"acr-latn-gt",acs:"acs-latn-br",act:"act-latn-nl",acu:"acu-latn-ec",acv:"acv-latn-us",acw:"acw-arab-sa",acx:"acx-arab-om",acy:"acy-latn-cy","acy-arab":"acy-arab-cy","acy-grek":"acy-grek-cy",acz:"acz-latn-sd",ada:"ada-latn-gh",adb:"adb-latn-tl",add:"add-latn-cm",ade:"ade-latn-zz",adf:"adf-arab-om",adg:"adg-latn-au",adh:"adh-latn-ug",adi:"adi-latn-in","adi-tibt":"adi-tibt-cn",adj:"adj-latn-zz",adl:"adl-latn-in",adn:"adn-latn-id",ado:"ado-latn-pg",adp:"adp-tibt-bt",adq:"adq-latn-gh",adr:"adr-latn-id",adt:"adt-latn-au",adu:"adu-latn-ng",adw:"adw-latn-br",adx:"adx-tibt-cn",ady:"ady-cyrl-ru",adz:"adz-latn-zz",ae:"ae-avst-ir",aea:"aea-latn-au",aeb:"aeb-arab-tn",aec:"aec-arab-eg",aee:"aee-arab-af",aek:"aek-latn-nc",ael:"ael-latn-cm",aem:"aem-latn-vn",aeq:"aeq-arab-pk",aer:"aer-latn-au",aeu:"aeu-latn-cn",aew:"aew-latn-pg",aey:"aey-latn-zz",aez:"aez-latn-pg",af:"af-latn-za",afb:"afb-arab-kw",afd:"afd-latn-pg",afe:"afe-latn-ng",afh:"afh-latn-gh",afi:"afi-latn-pg",afk:"afk-latn-pg",afn:"afn-latn-ng",afo:"afo-latn-ng",afp:"afp-latn-pg",afs:"afs-latn-mx",afu:"afu-latn-gh",afz:"afz-latn-id",aga:"aga-latn-pe",agb:"agb-latn-ng",agc:"agc-latn-zz",agd:"agd-latn-zz",age:"age-latn-pg",agf:"agf-latn-id",agg:"agg-latn-zz",agh:"agh-latn-cd",agi:"agi-deva-in",agj:"agj-ethi-et","agj-arab":"agj-arab-et",agk:"agk-latn-ph",agl:"agl-latn-pg",agm:"agm-latn-zz",agn:"agn-latn-ph",ago:"ago-latn-zz",agq:"agq-latn-cm",agr:"agr-latn-pe",ags:"ags-latn-cm",agt:"agt-latn-ph",agu:"agu-latn-gt",agv:"agv-latn-ph",agw:"agw-latn-sb",agx:"agx-cyrl-ru",agy:"agy-latn-ph",agz:"agz-latn-ph",aha:"aha-latn-zz",ahb:"ahb-latn-vu",ahg:"ahg-ethi-et",ahh:"ahh-latn-id",ahi:"ahi-latn-ci",ahk:"ahk-latn-mm","ahk-mymr":"ahk-mymr-mm","ahk-th":"ahk-latn-th","ahk-thai":"ahk-thai-th",ahl:"ahl-latn-zz",ahm:"ahm-latn-ci",ahn:"ahn-latn-ng",aho:"aho-ahom-in",ahp:"ahp-latn-ci",ahr:"ahr-deva-in",ahs:"ahs-latn-ng",aht:"aht-latn-us",aia:"aia-latn-sb",aib:"aib-arab-cn",aic:"aic-latn-pg",aid:"aid-latn-au",aie:"aie-latn-pg",aif:"aif-latn-pg",aig:"aig-latn-ag",aij:"aij-hebr-il",aik:"aik-latn-ng",ail:"ail-latn-pg",aim:"aim-latn-in",ain:"ain-kana-jp","ain-latn":"ain-latn-jp",aio:"aio-mymr-in",aip:"aip-latn-id",aiq:"aiq-arab-af",air:"air-latn-id",ait:"ait-latn-br",aiw:"aiw-latn-et","aiw-arab":"aiw-arab-et","aiw-ethi":"aiw-ethi-et",aix:"aix-latn-pg",aiy:"aiy-latn-cf",aja:"aja-latn-ss",ajg:"ajg-latn-zz",aji:"aji-latn-nc",ajn:"ajn-latn-au",ajp:"ajp-arab-jo",ajt:"ajt-arab-tn",ajw:"ajw-latn-ng",ajz:"ajz-latn-in",ak:"ak-latn-gh",akb:"akb-latn-id","akb-batk":"akb-batk-id",akc:"akc-latn-id",akd:"akd-latn-ng",ake:"ake-latn-gy",akf:"akf-latn-ng",akg:"akg-latn-id",akh:"akh-latn-pg",aki:"aki-latn-pg",akk:"akk-xsux-iq",akl:"akl-latn-ph",ako:"ako-latn-sr",akp:"akp-latn-gh",akq:"akq-latn-pg",akr:"akr-latn-vu",aks:"aks-latn-tg",akt:"akt-latn-pg",aku:"aku-latn-cm",akv:"akv-cyrl-ru",akw:"akw-latn-cg",akz:"akz-latn-us",ala:"ala-latn-zz",alc:"alc-latn-cl",ald:"ald-latn-ci",ale:"ale-latn-us",alf:"alf-latn-ng",alh:"alh-latn-au",ali:"ali-latn-zz",alj:"alj-latn-ph",alk:"alk-laoo-la",all:"all-mlym-in",alm:"alm-latn-vu",aln:"aln-latn-xk",alo:"alo-latn-id",alp:"alp-latn-id",alq:"alq-latn-ca",alr:"alr-cyrl-ru",alt:"alt-cyrl-ru",alu:"alu-latn-sb",alw:"alw-ethi-et",alx:"alx-latn-pg",aly:"aly-latn-au",alz:"alz-latn-cd",am:"am-ethi-et",ama:"ama-latn-br",amb:"amb-latn-ng",amc:"amc-latn-pe",ame:"ame-latn-pe",amf:"amf-latn-et","amf-ethi":"amf-ethi-et",amg:"amg-latn-au",ami:"ami-latn-tw",amj:"amj-latn-td",amk:"amk-latn-id",amm:"amm-latn-zz",amn:"amn-latn-zz",amo:"amo-latn-ng",amp:"amp-latn-zz",amq:"amq-latn-id",amr:"amr-latn-pe",ams:"ams-jpan-jp",amt:"amt-latn-pg",amu:"amu-latn-mx",amv:"amv-latn-id",amw:"amw-syrc-sy","amw-arab":"amw-arab-sy","amw-armi":"amw-armi-sy","amw-latn":"amw-latn-sy",amx:"amx-latn-au",amy:"amy-latn-au",amz:"amz-latn-au",an:"an-latn-es",ana:"ana-latn-co",anb:"anb-latn-pe",anc:"anc-latn-zz",and:"and-latn-id",ane:"ane-latn-nc",anf:"anf-latn-gh",ang:"ang-latn-gb",anh:"anh-latn-pg",ani:"ani-cyrl-ru",anj:"anj-latn-pg",ank:"ank-latn-zz",anl:"anl-latn-mm",anm:"anm-latn-in",ann:"ann-latn-ng",ano:"ano-latn-co",anp:"anp-deva-in",anr:"anr-deva-in",ans:"ans-latn-co",ant:"ant-latn-au",anu:"anu-ethi-et","anu-arab":"anu-arab-ss","anu-latn":"anu-latn-ss",anv:"anv-latn-cm",anw:"anw-latn-ng",anx:"anx-latn-pg",any:"any-latn-zz",anz:"anz-latn-pg",aoa:"aoa-latn-st",aob:"aob-latn-pg",aoc:"aoc-latn-ve",aod:"aod-latn-pg",aoe:"aoe-latn-pg",aof:"aof-latn-pg",aog:"aog-latn-pg",aoi:"aoi-latn-au",aoj:"aoj-latn-zz",aok:"aok-latn-nc",aol:"aol-latn-id",aom:"aom-latn-zz",aon:"aon-latn-pg",aor:"aor-latn-vu",aos:"aos-latn-id",aot:"aot-beng-bd","aot-latn":"aot-latn-in",aox:"aox-latn-gy",aoz:"aoz-latn-id",apb:"apb-latn-sb",apc:"apc-arab-sy",apd:"apd-arab-tg",ape:"ape-latn-zz",apf:"apf-latn-ph",apg:"apg-latn-id",aph:"aph-deva-np",api:"api-latn-br",apj:"apj-latn-us",apk:"apk-latn-us",apl:"apl-latn-us",apm:"apm-latn-us",apn:"apn-latn-br",apo:"apo-latn-pg",app:"app-latn-vu",apr:"apr-latn-zz",aps:"aps-latn-zz",apt:"apt-latn-in",apu:"apu-latn-br",apv:"apv-latn-br",apw:"apw-latn-us",apx:"apx-latn-id",apy:"apy-latn-br",apz:"apz-latn-zz",aqc:"aqc-cyrl-ru",aqd:"aqd-latn-ml",aqg:"aqg-latn-ng",aqk:"aqk-latn-ng",aqm:"aqm-latn-id",aqn:"aqn-latn-ph",aqr:"aqr-latn-nc",aqt:"aqt-latn-py",aqz:"aqz-latn-br",ar:"ar-arab-eg",arc:"arc-armi-ir","arc-nbat":"arc-nbat-jo","arc-palm":"arc-palm-sy",ard:"ard-latn-au",are:"are-latn-au",arh:"arh-latn-zz",ari:"ari-latn-us",arj:"arj-latn-br",ark:"ark-latn-br",arl:"arl-latn-pe",arn:"arn-latn-cl",aro:"aro-latn-bo",arp:"arp-latn-us",arq:"arq-arab-dz",arr:"arr-latn-br",ars:"ars-arab-sa",aru:"aru-latn-br",arw:"arw-latn-sr",arx:"arx-latn-br",ary:"ary-arab-ma",arz:"arz-arab-eg",as:"as-beng-in",asa:"asa-latn-tz",asb:"asb-latn-ca",asc:"asc-latn-id",ase:"ase-sgnw-us",asg:"asg-latn-zz",ash:"ash-latn-pe",asi:"asi-latn-id",asj:"asj-latn-cm",ask:"ask-arab-af",asl:"asl-latn-id",asn:"asn-latn-br",aso:"aso-latn-zz",ass:"ass-latn-cm",ast:"ast-latn-es",asu:"asu-latn-br",asv:"asv-latn-cd",asx:"asx-latn-pg",asy:"asy-latn-id",asz:"asz-latn-id",ata:"ata-latn-zz",atb:"atb-latn-cn","atb-lisu":"atb-lisu-cn",atc:"atc-latn-pe",atd:"atd-latn-ph",ate:"ate-latn-pg",atg:"atg-latn-zz",ati:"ati-latn-ci",atj:"atj-latn-ca",atk:"atk-latn-ph",atl:"atl-latn-ph",atm:"atm-latn-ph",atn:"atn-arab-ir",ato:"ato-latn-cm",atp:"atp-latn-ph",atq:"atq-latn-id",atr:"atr-latn-br",ats:"ats-latn-us",att:"att-latn-ph",atu:"atu-latn-ss",atv:"atv-cyrl-ru",atw:"atw-latn-us",atx:"atx-latn-br",aty:"aty-latn-vu",atz:"atz-latn-ph",aua:"aua-latn-sb",auc:"auc-latn-ec",aud:"aud-latn-sb",aug:"aug-latn-bj",auh:"auh-latn-zm",aui:"aui-latn-pg",auj:"auj-arab-ly","auj-latn":"auj-latn-ly","auj-tfng":"auj-tfng-ly",auk:"auk-latn-pg",aul:"aul-latn-vu",aum:"aum-latn-ng",aun:"aun-latn-pg",auo:"auo-latn-ng",aup:"aup-latn-pg",auq:"auq-latn-id",aur:"aur-latn-pg",aut:"aut-latn-pf",auu:"auu-latn-id",auw:"auw-latn-id",auy:"auy-latn-zz",auz:"auz-arab-uz",av:"av-cyrl-ru",avb:"avb-latn-pg",avd:"avd-arab-ir",avi:"avi-latn-ci",avk:"avk-latn-001",avl:"avl-arab-zz",avm:"avm-latn-au",avn:"avn-latn-zz",avo:"avo-latn-br",avs:"avs-latn-pe",avt:"avt-latn-zz",avu:"avu-latn-zz",avv:"avv-latn-br",awa:"awa-deva-in",awb:"awb-latn-zz",awc:"awc-latn-ng",awe:"awe-latn-br",awg:"awg-latn-au",awh:"awh-latn-id",awi:"awi-latn-pg",awk:"awk-latn-au",awm:"awm-latn-pg",awn:"awn-ethi-et",awo:"awo-latn-zz",awr:"awr-latn-id",aws:"aws-latn-id",awt:"awt-latn-br",awu:"awu-latn-id",awv:"awv-latn-id",aww:"aww-latn-pg",awx:"awx-latn-zz",awy:"awy-latn-id",axb:"axb-latn-ar",axe:"axe-latn-au",axg:"axg-latn-br",axk:"axk-latn-cf",axl:"axl-latn-au",axm:"axm-armn-am",axx:"axx-latn-nc",ay:"ay-latn-bo",aya:"aya-latn-pg",ayb:"ayb-latn-zz",ayc:"ayc-latn-pe",ayd:"ayd-latn-au",aye:"aye-latn-ng",ayg:"ayg-latn-tg",ayh:"ayh-arab-ye",ayi:"ayi-latn-ng",ayk:"ayk-latn-ng",ayl:"ayl-arab-ly",ayn:"ayn-arab-ye",ayo:"ayo-latn-py",ayp:"ayp-arab-iq",ayq:"ayq-latn-pg",ays:"ays-latn-ph",ayt:"ayt-latn-ph",ayu:"ayu-latn-ng",ayz:"ayz-latn-id",az:"az-latn-az","az-arab":"az-arab-ir","az-iq":"az-arab-iq","az-ir":"az-arab-ir","az-ru":"az-cyrl-ru",azb:"azb-arab-ir","azb-cyrl":"azb-cyrl-az","azb-latn":"azb-latn-az",azd:"azd-latn-mx",azg:"azg-latn-mx",azm:"azm-latn-mx",azn:"azn-latn-mx",azo:"azo-latn-cm",azt:"azt-latn-ph",azz:"azz-latn-mx",ba:"ba-cyrl-ru",baa:"baa-latn-sb",bab:"bab-latn-gw",bac:"bac-latn-id",bae:"bae-latn-ve",baf:"baf-latn-cm",bag:"bag-latn-cm",bah:"bah-latn-bs",baj:"baj-latn-id",bal:"bal-arab-pk",ban:"ban-latn-id",bao:"bao-latn-co",bap:"bap-deva-np",bar:"bar-latn-at",bas:"bas-latn-cm",bau:"bau-latn-ng",bav:"bav-latn-zz",baw:"baw-latn-cm",bax:"bax-bamu-cm",bay:"bay-latn-id",bba:"bba-latn-zz",bbb:"bbb-latn-zz",bbc:"bbc-latn-id",bbd:"bbd-latn-zz",bbe:"bbe-latn-cd",bbf:"bbf-latn-pg",bbg:"bbg-latn-ga",bbi:"bbi-latn-cm",bbj:"bbj-latn-cm",bbk:"bbk-latn-cm",bbl:"bbl-geor-ge",bbm:"bbm-latn-cd",bbn:"bbn-latn-pg",bbo:"bbo-latn-bf",bbp:"bbp-latn-zz",bbq:"bbq-latn-cm",bbr:"bbr-latn-zz",bbs:"bbs-latn-ng",bbt:"bbt-latn-ng",bbu:"bbu-latn-ng",bbv:"bbv-latn-pg",bbw:"bbw-latn-cm",bbx:"bbx-latn-cm",bby:"bby-latn-cm",bca:"bca-latn-cn","bca-hani":"bca-hani-cn",bcb:"bcb-latn-sn",bcd:"bcd-latn-id",bce:"bce-latn-cm",bcf:"bcf-latn-zz",bcg:"bcg-latn-gn",bch:"bch-latn-zz",bci:"bci-latn-ci",bcj:"bcj-latn-au",bck:"bck-latn-au",bcm:"bcm-latn-zz",bcn:"bcn-latn-zz",bco:"bco-latn-zz",bcp:"bcp-latn-cd",bcq:"bcq-ethi-zz",bcr:"bcr-latn-ca",bcs:"bcs-latn-ng",bct:"bct-latn-cd",bcu:"bcu-latn-zz",bcv:"bcv-latn-ng",bcw:"bcw-latn-cm",bcy:"bcy-latn-ng",bcz:"bcz-latn-sn",bda:"bda-latn-sn",bdb:"bdb-latn-id",bdc:"bdc-latn-co",bdd:"bdd-latn-zz",bde:"bde-latn-ng",bdf:"bdf-latn-pg",bdg:"bdg-latn-my",bdh:"bdh-latn-ss",bdi:"bdi-latn-sd",bdj:"bdj-latn-ss",bdk:"bdk-latn-az",bdl:"bdl-latn-id",bdm:"bdm-latn-td",bdn:"bdn-latn-cm",bdo:"bdo-latn-td",bdp:"bdp-latn-tz",bdq:"bdq-latn-vn",bdr:"bdr-latn-my",bds:"bds-latn-tz",bdt:"bdt-latn-cf",bdu:"bdu-latn-cm",bdv:"bdv-orya-in",bdw:"bdw-latn-id",bdx:"bdx-latn-id",bdy:"bdy-latn-au",bdz:"bdz-arab-pk",be:"be-cyrl-by",bea:"bea-latn-ca","bea-cans":"bea-cans-ca",beb:"beb-latn-cm",bec:"bec-latn-cm",bed:"bed-latn-id",bee:"bee-deva-in",bef:"bef-latn-zz",beh:"beh-latn-zz",bei:"bei-latn-id",bej:"bej-arab-sd",bek:"bek-latn-pg",bem:"bem-latn-zm",beo:"beo-latn-pg",bep:"bep-latn-id",beq:"beq-latn-cg",bes:"bes-latn-td",bet:"bet-latn-zz",beu:"beu-latn-id",bev:"bev-latn-ci",bew:"bew-latn-id",bex:"bex-latn-zz",bey:"bey-latn-pg",bez:"bez-latn-tz",bfa:"bfa-latn-ss","bfa-arab":"bfa-arab-ss",bfb:"bfb-deva-in",bfc:"bfc-latn-cn",bfd:"bfd-latn-cm",bfe:"bfe-latn-id",bff:"bff-latn-cf",bfg:"bfg-latn-id",bfh:"bfh-latn-pg",bfj:"bfj-latn-cm",bfl:"bfl-latn-cf",bfm:"bfm-latn-cm",bfn:"bfn-latn-tl",bfo:"bfo-latn-bf",bfp:"bfp-latn-cm",bfq:"bfq-taml-in",bfs:"bfs-latn-cn","bfs-hani":"bfs-hani-cn",bft:"bft-arab-pk",bfu:"bfu-tibt-in","bfu-takr":"bfu-takr-in",bfw:"bfw-orya-in",bfx:"bfx-latn-ph",bfy:"bfy-deva-in",bfz:"bfz-deva-in",bg:"bg-cyrl-bg",bga:"bga-latn-ng",bgb:"bgb-latn-id",bgc:"bgc-deva-in",bgd:"bgd-deva-in",bgf:"bgf-latn-cm",bgg:"bgg-latn-in",bgi:"bgi-latn-ph",bgj:"bgj-latn-cm",bgn:"bgn-arab-pk",bgo:"bgo-latn-gn",bgp:"bgp-arab-pk",bgq:"bgq-deva-in",bgr:"bgr-latn-in",bgs:"bgs-latn-ph",bgt:"bgt-latn-sb",bgu:"bgu-latn-ng",bgv:"bgv-latn-id",bgw:"bgw-deva-in",bgx:"bgx-grek-tr",bgy:"bgy-latn-id",bgz:"bgz-latn-id",bha:"bha-deva-in",bhb:"bhb-deva-in",bhc:"bhc-latn-id",bhd:"bhd-deva-in","bhd-arab":"bhd-arab-in","bhd-takr":"bhd-takr-in",bhe:"bhe-arab-pk",bhf:"bhf-latn-pg",bhg:"bhg-latn-zz",bhh:"bhh-cyrl-il","bhh-hebr":"bhh-hebr-il","bhh-latn":"bhh-latn-il",bhi:"bhi-deva-in",bhj:"bhj-deva-np",bhl:"bhl-latn-zz",bhm:"bhm-arab-om",bhn:"bhn-syrc-ge",bho:"bho-deva-in",bhp:"bhp-latn-id",bhq:"bhq-latn-id",bhr:"bhr-latn-mg",bhs:"bhs-latn-cm",bht:"bht-takr-in","bht-deva":"bht-deva-in","bht-latn":"bht-latn-in",bhu:"bhu-deva-in",bhv:"bhv-latn-id",bhw:"bhw-latn-id",bhy:"bhy-latn-zz",bhz:"bhz-latn-id",bi:"bi-latn-vu",bia:"bia-latn-au",bib:"bib-latn-zz",bid:"bid-latn-td",bie:"bie-latn-pg",bif:"bif-latn-gw",big:"big-latn-zz",bik:"bik-latn-ph",bil:"bil-latn-ng",bim:"bim-latn-zz",bin:"bin-latn-ng",bio:"bio-latn-zz",bip:"bip-latn-cd",biq:"biq-latn-zz",bir:"bir-latn-pg",bit:"bit-latn-pg",biu:"biu-latn-in",biv:"biv-latn-gh",biw:"biw-latn-cm",biy:"biy-deva-in",biz:"biz-latn-cd",bja:"bja-latn-cd",bjb:"bjb-latn-au",bjc:"bjc-latn-pg",bjf:"bjf-syrc-il",bjg:"bjg-latn-gw",bjh:"bjh-latn-zz",bji:"bji-ethi-zz",bjj:"bjj-deva-in",bjk:"bjk-latn-pg",bjl:"bjl-latn-pg",bjm:"bjm-arab-iq",bjn:"bjn-latn-id",bjo:"bjo-latn-zz",bjp:"bjp-latn-pg",bjr:"bjr-latn-zz",bjs:"bjs-latn-bb",bjt:"bjt-latn-sn",bju:"bju-latn-cm",bjv:"bjv-latn-td",bjw:"bjw-latn-ci",bjx:"bjx-latn-ph",bjy:"bjy-latn-au",bjz:"bjz-latn-zz",bka:"bka-latn-ng",bkc:"bkc-latn-zz",bkd:"bkd-latn-ph",bkf:"bkf-latn-cd",bkg:"bkg-latn-cf",bkh:"bkh-latn-cm",bki:"bki-latn-vu",bkj:"bkj-latn-cf",bkl:"bkl-latn-id",bkm:"bkm-latn-cm",bkn:"bkn-latn-id",bko:"bko-latn-cm",bkp:"bkp-latn-cd",bkq:"bkq-latn-zz",bkr:"bkr-latn-id",bks:"bks-latn-ph",bkt:"bkt-latn-cd",bku:"bku-latn-ph",bkv:"bkv-latn-zz",bkw:"bkw-latn-cg",bkx:"bkx-latn-tl",bky:"bky-latn-ng",bkz:"bkz-latn-id",bla:"bla-latn-ca",blb:"blb-latn-sb",blc:"blc-latn-ca",bld:"bld-latn-id",ble:"ble-latn-gw",blf:"blf-latn-id",blg:"blg-latn-my",blh:"blh-latn-lr",bli:"bli-latn-cd",blj:"blj-latn-id",blk:"blk-mymr-mm",blm:"blm-latn-ss",bln:"bln-latn-ph",blo:"blo-latn-bj",blp:"blp-latn-sb",blq:"blq-latn-pg",blr:"blr-latn-cn","blr-tale":"blr-tale-cn","blr-thai":"blr-thai-th",bls:"bls-latn-id",blt:"blt-tavt-vn",blv:"blv-latn-ao",blw:"blw-latn-ph",blx:"blx-latn-ph",bly:"bly-latn-bj",blz:"blz-latn-id",bm:"bm-latn-ml",bma:"bma-latn-ng",bmb:"bmb-latn-cd",bmc:"bmc-latn-pg",bmd:"bmd-latn-gn",bme:"bme-latn-cf",bmf:"bmf-latn-sl",bmg:"bmg-latn-cd",bmh:"bmh-latn-zz",bmi:"bmi-latn-td",bmj:"bmj-deva-np",bmk:"bmk-latn-zz",bml:"bml-latn-cd",bmm:"bmm-latn-mg",bmn:"bmn-latn-pg",bmo:"bmo-latn-cm",bmp:"bmp-latn-pg",bmq:"bmq-latn-ml",bmr:"bmr-latn-co",bms:"bms-latn-ne",bmu:"bmu-latn-zz",bmv:"bmv-latn-cm",bmw:"bmw-latn-cg",bmx:"bmx-latn-pg",bmz:"bmz-latn-pg",bn:"bn-beng-bd",bna:"bna-latn-id",bnb:"bnb-latn-my",bnc:"bnc-latn-ph",bnd:"bnd-latn-id",bne:"bne-latn-id",bnf:"bnf-latn-id",bng:"bng-latn-zz",bni:"bni-latn-cd",bnj:"bnj-latn-ph",bnk:"bnk-latn-vu",bnm:"bnm-latn-zz",bnn:"bnn-latn-tw",bno:"bno-latn-ph",bnp:"bnp-latn-zz",bnq:"bnq-latn-id",bnr:"bnr-latn-vu",bns:"bns-deva-in",bnu:"bnu-latn-id",bnv:"bnv-latn-id",bnw:"bnw-latn-pg",bnx:"bnx-latn-cd",bny:"bny-latn-my",bnz:"bnz-latn-cm",bo:"bo-tibt-cn",boa:"boa-latn-pe",bob:"bob-latn-ke",boe:"boe-latn-cm",bof:"bof-latn-bf",boh:"boh-latn-cd",boj:"boj-latn-zz",bok:"bok-latn-cg",bol:"bol-latn-ng",bom:"bom-latn-zz",bon:"bon-latn-zz",boo:"boo-latn-ml",bop:"bop-latn-pg",boq:"boq-latn-pg",bor:"bor-latn-br",bot:"bot-latn-ss",bou:"bou-latn-tz",bov:"bov-latn-gh",bow:"bow-latn-pg",box:"box-latn-bf",boy:"boy-latn-cf",boz:"boz-latn-ml","boz-arab":"boz-arab-ml",bpa:"bpa-latn-vu",bpc:"bpc-latn-cm",bpd:"bpd-latn-cf",bpe:"bpe-latn-pg",bpg:"bpg-latn-id",bph:"bph-cyrl-ru",bpi:"bpi-latn-pg",bpj:"bpj-latn-cd",bpk:"bpk-latn-nc",bpl:"bpl-latn-au",bpm:"bpm-latn-pg",bpo:"bpo-latn-id",bpp:"bpp-latn-id",bpq:"bpq-latn-id",bpr:"bpr-latn-ph",bps:"bps-latn-ph",bpt:"bpt-latn-au",bpu:"bpu-latn-pg",bpv:"bpv-latn-id",bpw:"bpw-latn-pg",bpx:"bpx-deva-in",bpy:"bpy-beng-in",bpz:"bpz-latn-id",bqa:"bqa-latn-bj",bqb:"bqb-latn-id",bqc:"bqc-latn-zz",bqd:"bqd-latn-cm",bqf:"bqf-latn-gn","bqf-arab":"bqf-arab-gn",bqg:"bqg-latn-tg",bqi:"bqi-arab-ir",bqj:"bqj-latn-sn",bqk:"bqk-latn-cf",bql:"bql-latn-pg",bqm:"bqm-latn-cm",bqo:"bqo-latn-cm",bqp:"bqp-latn-zz",bqq:"bqq-latn-id",bqr:"bqr-latn-id",bqs:"bqs-latn-pg",bqt:"bqt-latn-cm",bqu:"bqu-latn-cd",bqv:"bqv-latn-ci",bqw:"bqw-latn-ng",bqx:"bqx-latn-ng",bqz:"bqz-latn-cm",br:"br-latn-fr",bra:"bra-deva-in",brb:"brb-khmr-kh","brb-laoo":"brb-laoo-la","brb-latn":"brb-latn-vn",brc:"brc-latn-gy",brd:"brd-deva-np",brf:"brf-latn-cd",brg:"brg-latn-bo",brh:"brh-arab-pk",bri:"bri-latn-cm",brj:"brj-latn-vu",brk:"brk-arab-sd",brl:"brl-latn-bw",brm:"brm-latn-cd",brn:"brn-latn-cr",brp:"brp-latn-id",brq:"brq-latn-pg",brr:"brr-latn-sb",brs:"brs-latn-id",brt:"brt-latn-ng",bru:"bru-latn-vn","bru-laoo":"bru-laoo-la","bru-thai":"bru-thai-la",brv:"brv-laoo-la",brx:"brx-deva-in",bry:"bry-latn-pg",brz:"brz-latn-zz",bs:"bs-latn-ba",bsa:"bsa-latn-id",bsb:"bsb-latn-bn",bsc:"bsc-latn-sn",bse:"bse-latn-cm",bsf:"bsf-latn-ng",bsh:"bsh-arab-af",bsi:"bsi-latn-cm",bsj:"bsj-latn-zz",bsk:"bsk-arab-pk","bsk-latn":"bsk-latn-pk",bsl:"bsl-latn-ng",bsm:"bsm-latn-id",bsn:"bsn-latn-co",bso:"bso-latn-td",bsp:"bsp-latn-gn",bsq:"bsq-bass-lr",bsr:"bsr-latn-ng",bss:"bss-latn-cm",bst:"bst-ethi-zz",bsu:"bsu-latn-id",bsv:"bsv-latn-gn","bsv-arab":"bsv-arab-gn",bsw:"bsw-latn-et","bsw-ethi":"bsw-ethi-et",bsx:"bsx-latn-ng",bsy:"bsy-latn-my",bta:"bta-latn-ng",btc:"btc-latn-cm",btd:"btd-batk-id",bte:"bte-latn-ng",btf:"btf-latn-td",btg:"btg-latn-ci",bth:"bth-latn-my",bti:"bti-latn-id",btj:"btj-latn-id",btm:"btm-batk-id",btn:"btn-latn-ph",bto:"bto-latn-ph",btp:"btp-latn-pg",btq:"btq-latn-my",btr:"btr-latn-vu",bts:"bts-latn-id","bts-batk":"bts-batk-id",btt:"btt-latn-zz",btu:"btu-latn-ng",btv:"btv-deva-pk",btw:"btw-latn-ph",btx:"btx-latn-id","btx-batk":"btx-batk-id",bty:"bty-latn-id",btz:"btz-latn-id",bua:"bua-cyrl-ru",bub:"bub-latn-td",buc:"buc-latn-yt",bud:"bud-latn-zz",bue:"bue-latn-ca",buf:"buf-latn-cd",bug:"bug-latn-id",buh:"buh-latn-cn",bui:"bui-latn-cg",buj:"buj-latn-ng",buk:"buk-latn-zz",bum:"bum-latn-cm",bun:"bun-latn-sl",buo:"buo-latn-zz",bup:"bup-latn-id",buq:"buq-latn-pg",bus:"bus-latn-zz",but:"but-latn-pg",buu:"buu-latn-zz",buv:"buv-latn-pg",buw:"buw-latn-ga",bux:"bux-latn-ng",buy:"buy-latn-sl",buz:"buz-latn-ng",bva:"bva-latn-td",bvb:"bvb-latn-gq",bvc:"bvc-latn-sb",bvd:"bvd-latn-sb",bve:"bve-latn-id",bvf:"bvf-latn-td",bvg:"bvg-latn-cm",bvh:"bvh-latn-ng",bvi:"bvi-latn-ss",bvj:"bvj-latn-ng",bvk:"bvk-latn-id",bvm:"bvm-latn-cm",bvn:"bvn-latn-pg",bvo:"bvo-latn-td",bvq:"bvq-latn-cf",bvr:"bvr-latn-au",bvt:"bvt-latn-id",bvu:"bvu-latn-id",bvv:"bvv-latn-ve",bvw:"bvw-latn-ng",bvx:"bvx-latn-cg",bvy:"bvy-latn-ph",bvz:"bvz-latn-id",bwa:"bwa-latn-nc",bwb:"bwb-latn-fj",bwc:"bwc-latn-zm",bwd:"bwd-latn-zz",bwe:"bwe-mymr-mm","bwe-latn":"bwe-latn-mm",bwf:"bwf-latn-pg",bwg:"bwg-latn-mz",bwh:"bwh-latn-cm",bwi:"bwi-latn-ve",bwj:"bwj-latn-bf",bwk:"bwk-latn-pg",bwl:"bwl-latn-cd",bwm:"bwm-latn-pg",bwo:"bwo-latn-et","bwo-ethi":"bwo-ethi-et",bwp:"bwp-latn-id",bwq:"bwq-latn-bf",bwr:"bwr-latn-zz",bws:"bws-latn-cd",bwt:"bwt-latn-cm",bwu:"bwu-latn-gh",bww:"bww-latn-cd",bwx:"bwx-latn-cn",bwy:"bwy-latn-bf",bwz:"bwz-latn-cg",bxa:"bxa-latn-sb",bxb:"bxb-latn-ss",bxc:"bxc-latn-gq",bxf:"bxf-latn-pg",bxg:"bxg-latn-cd",bxh:"bxh-latn-zz",bxi:"bxi-latn-au",bxj:"bxj-latn-au",bxl:"bxl-latn-bf",bxm:"bxm-cyrl-mn","bxm-latn":"bxm-latn-mn","bxm-mong":"bxm-mong-mn",bxn:"bxn-latn-au",bxo:"bxo-latn-ng",bxp:"bxp-latn-cm",bxq:"bxq-latn-ng",bxs:"bxs-latn-cm",bxu:"bxu-mong-cn","bxu-cyrl":"bxu-cyrl-cn","bxu-latn":"bxu-latn-cn",bxv:"bxv-latn-td",bxw:"bxw-latn-ml",bxz:"bxz-latn-pg",bya:"bya-latn-ph",byb:"byb-latn-cm",byc:"byc-latn-ng",byd:"byd-latn-id",bye:"bye-latn-zz",byf:"byf-latn-ng",byh:"byh-deva-np",byi:"byi-latn-cd",byj:"byj-latn-ng",byk:"byk-latn-cn",byl:"byl-latn-id",bym:"bym-latn-au",byn:"byn-ethi-er",byp:"byp-latn-ng",byr:"byr-latn-zz",bys:"bys-latn-zz",byv:"byv-latn-cm",byw:"byw-deva-np",byx:"byx-latn-zz",byz:"byz-latn-pg",bza:"bza-latn-zz",bzb:"bzb-latn-id",bzc:"bzc-latn-mg",bzd:"bzd-latn-cr",bze:"bze-latn-ml",bzf:"bzf-latn-zz",bzh:"bzh-latn-zz",bzi:"bzi-thai-th",bzj:"bzj-latn-bz",bzk:"bzk-latn-ni",bzl:"bzl-latn-id",bzm:"bzm-latn-cd",bzn:"bzn-latn-id",bzo:"bzo-latn-cd",bzp:"bzp-latn-id",bzq:"bzq-latn-id",bzr:"bzr-latn-au",bzt:"bzt-latn-001",bzu:"bzu-latn-id",bzv:"bzv-latn-cm",bzw:"bzw-latn-zz",bzx:"bzx-latn-ml",bzy:"bzy-latn-ng",bzz:"bzz-latn-ng",ca:"ca-latn-es",caa:"caa-latn-gt",cab:"cab-latn-hn",cac:"cac-latn-gt",cad:"cad-latn-us",cae:"cae-latn-sn",caf:"caf-latn-ca","caf-cans":"caf-cans-ca",cag:"cag-latn-py",cah:"cah-latn-pe",caj:"caj-latn-ar",cak:"cak-latn-gt",cal:"cal-latn-mp",cam:"cam-latn-nc",can:"can-latn-zz",cao:"cao-latn-bo",cap:"cap-latn-bo",caq:"caq-latn-in",car:"car-latn-ve",cas:"cas-latn-bo",cav:"cav-latn-bo",caw:"caw-latn-bo",cax:"cax-latn-bo",cay:"cay-latn-ca",caz:"caz-latn-bo",cbb:"cbb-latn-co",cbc:"cbc-latn-co",cbd:"cbd-latn-co",cbg:"cbg-latn-co",cbi:"cbi-latn-ec",cbj:"cbj-latn-zz",cbk:"cbk-latn-ph","cbk-brai":"cbk-brai-ph",cbl:"cbl-latn-mm",cbn:"cbn-thai-th",cbo:"cbo-latn-ng",cbq:"cbq-latn-ng",cbr:"cbr-latn-pe",cbs:"cbs-latn-pe",cbt:"cbt-latn-pe",cbu:"cbu-latn-pe",cbv:"cbv-latn-co",cbw:"cbw-latn-ph",cby:"cby-latn-co",ccc:"ccc-latn-pe",ccd:"ccd-latn-br",cce:"cce-latn-mz",ccg:"ccg-latn-ng",cch:"cch-latn-ng",ccj:"ccj-latn-gw",ccl:"ccl-latn-tz",ccm:"ccm-latn-my",cco:"cco-latn-mx",ccp:"ccp-cakm-bd",ccr:"ccr-latn-sv",cde:"cde-telu-in",cdf:"cdf-latn-in","cdf-beng":"cdf-beng-in",cdh:"cdh-deva-in","cdh-takr":"cdh-takr-in",cdi:"cdi-gujr-in",cdj:"cdj-deva-in",cdm:"cdm-deva-np","cdm-latn":"cdm-latn-np",cdo:"cdo-hans-cn","cdo-hant":"cdo-hant-cn","cdo-latn":"cdo-latn-cn",cdr:"cdr-latn-ng",cdz:"cdz-beng-in",ce:"ce-cyrl-ru",cea:"cea-latn-us",ceb:"ceb-latn-ph",ceg:"ceg-latn-py",cek:"cek-latn-mm",cen:"cen-latn-ng",cet:"cet-latn-ng",cey:"cey-latn-mm",cfa:"cfa-latn-zz",cfd:"cfd-latn-ng",cfg:"cfg-latn-ng",cfm:"cfm-latn-mm","cfm-beng":"cfm-beng-in",cga:"cga-latn-pg",cgc:"cgc-latn-ph",cgg:"cgg-latn-ug",cgk:"cgk-tibt-bt",ch:"ch-latn-gu",chb:"chb-latn-co",chd:"chd-latn-mx",chf:"chf-latn-mx",chg:"chg-arab-tm",chh:"chh-latn-us",chj:"chj-latn-mx",chk:"chk-latn-fm",chl:"chl-latn-us",chm:"chm-cyrl-ru",chn:"chn-latn-us","chn-dupl":"chn-dupl-us",cho:"cho-latn-us",chp:"chp-latn-ca",chq:"chq-latn-mx",chr:"chr-cher-us",cht:"cht-latn-pe",chw:"chw-latn-mz",chx:"chx-deva-np",chy:"chy-latn-us",chz:"chz-latn-mx",cia:"cia-latn-id","cia-arab":"cia-arab-id","cia-hang":"cia-hang-id",cib:"cib-latn-bj",cic:"cic-latn-us",cie:"cie-latn-ng",cih:"cih-deva-in",cim:"cim-latn-it",cin:"cin-latn-br",cip:"cip-latn-mx",cir:"cir-latn-nc",ciw:"ciw-latn-us","ciw-cans":"ciw-cans-us",ciy:"ciy-latn-ve",cja:"cja-arab-kh",cje:"cje-latn-vn",cjh:"cjh-latn-us",cji:"cji-cyrl-ru",cjk:"cjk-latn-ao",cjm:"cjm-cham-vn",cjn:"cjn-latn-pg",cjo:"cjo-latn-pe",cjp:"cjp-latn-cr",cjs:"cjs-latn-ru","cjs-cyrl":"cjs-cyrl-ru",cjv:"cjv-latn-zz",cjy:"cjy-hans-cn","cjy-hant":"cjy-hant-cn",ckb:"ckb-arab-iq",ckl:"ckl-latn-zz",ckm:"ckm-latn-hr","ckm-glag":"ckm-glag-hr",ckn:"ckn-latn-mm",cko:"cko-latn-zz",ckq:"ckq-latn-td",ckr:"ckr-latn-pg",cks:"cks-latn-nc",ckt:"ckt-cyrl-ru",cku:"cku-latn-us",ckv:"ckv-latn-tw",ckx:"ckx-latn-cm",cky:"cky-latn-zz",ckz:"ckz-latn-gt",cla:"cla-latn-zz",clc:"clc-latn-ca",cle:"cle-latn-mx",clh:"clh-arab-pk",cli:"cli-latn-gh",clj:"clj-latn-mm",clk:"clk-latn-in","clk-tibt":"clk-tibt-cn",cll:"cll-latn-gh",clm:"clm-latn-us",clo:"clo-latn-mx",clt:"clt-latn-mm",clu:"clu-latn-ph",clw:"clw-cyrl-ru",cly:"cly-latn-mx",cma:"cma-latn-vn",cme:"cme-latn-zz",cmg:"cmg-soyo-mn",cmi:"cmi-latn-co",cml:"cml-latn-id",cmo:"cmo-latn-vn","cmo-kh":"cmo-latn-kh","cmo-khmr":"cmo-khmr-kh",cmr:"cmr-latn-mm",cms:"cms-latn-it",cmt:"cmt-latn-za",cna:"cna-tibt-in",cnb:"cnb-latn-mm",cnc:"cnc-latn-vn",cng:"cng-latn-cn",cnh:"cnh-latn-mm",cni:"cni-latn-pe",cnk:"cnk-latn-mm",cnl:"cnl-latn-mx",cnp:"cnp-hans-cn","cnp-hant":"cnp-hant-cn",cnq:"cnq-latn-cm",cns:"cns-latn-id",cnt:"cnt-latn-mx",cnw:"cnw-latn-mm",cnx:"cnx-latn-gb",co:"co-latn-fr",coa:"coa-latn-au",cob:"cob-latn-mx",coc:"coc-latn-mx",cod:"cod-latn-pe",coe:"coe-latn-co",cof:"cof-latn-ec",cog:"cog-thai-th",coh:"coh-latn-ke",coj:"coj-latn-mx",cok:"cok-latn-mx",col:"col-latn-us",com:"com-latn-us",coo:"coo-latn-ca",cop:"cop-copt-eg",coq:"coq-latn-us",cot:"cot-latn-pe",cou:"cou-latn-sn",cox:"cox-latn-pe",coz:"coz-latn-mx",cpa:"cpa-latn-mx",cpb:"cpb-latn-pe",cpc:"cpc-latn-pe",cpg:"cpg-grek-gr",cpi:"cpi-latn-nr",cpn:"cpn-latn-gh",cpo:"cpo-latn-bf",cps:"cps-latn-ph",cpu:"cpu-latn-pe",cpx:"cpx-latn-cn",cpy:"cpy-latn-pe",cqd:"cqd-latn-cn",cr:"cr-cans-ca",crb:"crb-latn-vc",crc:"crc-latn-vu",crd:"crd-latn-us",crf:"crf-latn-co",crg:"crg-latn-ca",crh:"crh-cyrl-ua",cri:"cri-latn-st",crj:"crj-cans-ca","crj-latn":"crj-latn-ca",crk:"crk-cans-ca",crl:"crl-cans-ca",crm:"crm-cans-ca",crn:"crn-latn-mx",cro:"cro-latn-us",crq:"crq-latn-ar",crs:"crs-latn-sc",crt:"crt-latn-ar",crv:"crv-latn-in",crw:"crw-latn-vn",crx:"crx-latn-ca","crx-cans":"crx-cans-ca",cry:"cry-latn-ng",crz:"crz-latn-us",cs:"cs-latn-cz",csa:"csa-latn-mx",csb:"csb-latn-pl",csh:"csh-mymr-mm","csh-latn":"csh-latn-mm",csj:"csj-latn-mm",csk:"csk-latn-sn",csm:"csm-latn-us",cso:"cso-latn-mx",csp:"csp-hans-cn","csp-hant":"csp-hant-cn",css:"css-latn-us",cst:"cst-latn-us",csv:"csv-latn-mm",csw:"csw-cans-ca",csy:"csy-latn-mm",csz:"csz-latn-us",cta:"cta-latn-mx",ctc:"ctc-latn-us",ctd:"ctd-pauc-mm",cte:"cte-latn-mx",ctg:"ctg-beng-bd","ctg-arab":"ctg-arab-bd","ctg-latn":"ctg-latn-bd",cth:"cth-latn-mm",ctl:"ctl-latn-mx",ctm:"ctm-latn-us",ctn:"ctn-deva-np",cto:"cto-latn-co",ctp:"ctp-latn-mx",cts:"cts-latn-ph",ctt:"ctt-taml-in",ctu:"ctu-latn-mx",ctz:"ctz-latn-mx",cu:"cu-cyrl-ru","cu-glag":"cu-glag-bg",cua:"cua-latn-vn",cub:"cub-latn-co",cuc:"cuc-latn-mx",cuh:"cuh-latn-ke",cui:"cui-latn-co",cuj:"cuj-latn-pe",cuk:"cuk-latn-pa",cul:"cul-latn-br",cuo:"cuo-latn-ve",cup:"cup-latn-us",cut:"cut-latn-mx",cuu:"cuu-lana-cn",cuv:"cuv-latn-cm",cux:"cux-latn-mx",cv:"cv-cyrl-ru",cvg:"cvg-latn-in","cvg-tibt":"cvg-tibt-in",cvn:"cvn-latn-mx",cwa:"cwa-latn-tz",cwb:"cwb-latn-mz",cwe:"cwe-latn-tz",cwg:"cwg-latn-my",cwt:"cwt-latn-sn",cy:"cy-latn-gb",cya:"cya-latn-mx",cyb:"cyb-latn-bo",cyo:"cyo-latn-ph",czh:"czh-hans-cn","czh-hant":"czh-hant-cn",czk:"czk-hebr-cz",czn:"czn-latn-mx",czt:"czt-latn-mm",da:"da-latn-dk",daa:"daa-latn-td",dac:"dac-latn-pg",dad:"dad-latn-zz",dae:"dae-latn-cm",daf:"daf-latn-ci",dag:"dag-latn-zz",dah:"dah-latn-zz",dai:"dai-latn-td",daj:"daj-latn-sd",dak:"dak-latn-us",dal:"dal-latn-ke",dam:"dam-latn-ng",dao:"dao-latn-mm",daq:"daq-deva-in",dar:"dar-cyrl-ru",das:"das-latn-ci",dau:"dau-latn-td",dav:"dav-latn-ke",daw:"daw-latn-ph",dax:"dax-latn-au",daz:"daz-latn-id",dba:"dba-latn-ml",dbb:"dbb-latn-ng",dbd:"dbd-latn-zz",dbe:"dbe-latn-id",dbf:"dbf-latn-id",dbg:"dbg-latn-ml",dbi:"dbi-latn-ng",dbj:"dbj-latn-my","dbj-arab":"dbj-arab-my",dbl:"dbl-latn-au",dbm:"dbm-latn-ng",dbn:"dbn-latn-id",dbo:"dbo-latn-ng",dbp:"dbp-latn-ng",dbq:"dbq-latn-zz",dbt:"dbt-latn-ml",dbu:"dbu-latn-ml",dbv:"dbv-latn-ng",dbw:"dbw-latn-ml",dby:"dby-latn-pg",dcc:"dcc-arab-in",dcr:"dcr-latn-vi",dda:"dda-latn-au",ddd:"ddd-latn-ss",dde:"dde-latn-cg",ddg:"ddg-latn-tl",ddi:"ddi-latn-pg",ddj:"ddj-latn-au",ddn:"ddn-latn-zz",ddo:"ddo-cyrl-ru",ddr:"ddr-latn-au",dds:"dds-latn-ml",ddw:"ddw-latn-id",de:"de-latn-de",dec:"dec-latn-sd",ded:"ded-latn-zz",dee:"dee-latn-lr",def:"def-arab-ir",deg:"deg-latn-ng",deh:"deh-arab-pk",dei:"dei-latn-id",dek:"dek-latn-cm",del:"del-latn-us",dem:"dem-latn-id",den:"den-latn-ca",deq:"deq-latn-cf",der:"der-beng-in","der-latn":"der-latn-in",des:"des-latn-br",dev:"dev-latn-pg",dez:"dez-latn-cd",dga:"dga-latn-zz",dgb:"dgb-latn-ml",dgc:"dgc-latn-ph",dgd:"dgd-latn-bf",dge:"dge-latn-pg",dgg:"dgg-latn-pg",dgh:"dgh-latn-zz",dgi:"dgi-latn-zz",dgk:"dgk-latn-cf",dgl:"dgl-arab-zz",dgn:"dgn-latn-au",dgr:"dgr-latn-ca",dgs:"dgs-latn-bf",dgt:"dgt-latn-au",dgw:"dgw-latn-au",dgx:"dgx-latn-pg",dgz:"dgz-latn-zz",dhg:"dhg-latn-au",dhi:"dhi-deva-np",dhl:"dhl-latn-au",dhm:"dhm-latn-ao",dhn:"dhn-gujr-in",dho:"dho-deva-in",dhr:"dhr-latn-au",dhs:"dhs-latn-tz",dhu:"dhu-latn-au",dhv:"dhv-latn-nc",dhw:"dhw-deva-np",dhx:"dhx-latn-au",dia:"dia-latn-zz",dib:"dib-latn-ss",dic:"dic-latn-ci",did:"did-latn-ss",dif:"dif-latn-au",dig:"dig-latn-ke",dih:"dih-latn-mx",dii:"dii-latn-cm",dij:"dij-latn-id",dil:"dil-latn-sd",din:"din-latn-ss","din-arab":"din-arab-ss",dio:"dio-latn-ng",dip:"dip-latn-ss",dir:"dir-latn-ng",dis:"dis-latn-in","dis-beng":"dis-beng-in",diu:"diu-latn-na",diw:"diw-latn-ss",dix:"dix-latn-vu",diy:"diy-latn-id",diz:"diz-latn-cd",dja:"dja-latn-au",djb:"djb-latn-au",djc:"djc-latn-td",djd:"djd-latn-au",dje:"dje-latn-ne",djf:"djf-latn-au",dji:"dji-latn-au",djj:"djj-latn-au",djk:"djk-latn-sr",djm:"djm-latn-ml",djn:"djn-latn-au",djo:"djo-latn-id",djr:"djr-latn-au",dju:"dju-latn-pg",djw:"djw-latn-au",dka:"dka-tibt-bt",dkg:"dkg-latn-ng",dkk:"dkk-latn-id",dkr:"dkr-latn-my",dks:"dks-latn-ss",dkx:"dkx-latn-cm",dlg:"dlg-cyrl-ru",dlm:"dlm-latn-hr",dln:"dln-latn-in",dma:"dma-latn-ga",dmb:"dmb-latn-ml",dmc:"dmc-latn-pg",dmd:"dmd-latn-au",dme:"dme-latn-cm",dmf:"dmf-medf-ng",dmg:"dmg-latn-my",dmk:"dmk-arab-pk",dml:"dml-arab-pk",dmm:"dmm-latn-cm",dmo:"dmo-latn-cm",dmr:"dmr-latn-id",dms:"dms-latn-id",dmu:"dmu-latn-id",dmv:"dmv-latn-my",dmw:"dmw-latn-au",dmx:"dmx-latn-mz",dmy:"dmy-latn-id",dna:"dna-latn-id",dnd:"dnd-latn-pg",dne:"dne-latn-tz",dng:"dng-cyrl-kg","dng-arab":"dng-arab-kg",dni:"dni-latn-id",dnj:"dnj-latn-ci",dnk:"dnk-latn-id",dnn:"dnn-latn-bf",dno:"dno-latn-cd",dnr:"dnr-latn-pg",dnt:"dnt-latn-id",dnu:"dnu-mymr-mm",dnv:"dnv-mymr-mm",dnw:"dnw-latn-id",dny:"dny-latn-br",doa:"doa-latn-pg",dob:"dob-latn-zz",doc:"doc-latn-cn",doe:"doe-latn-tz",dof:"dof-latn-pg",doh:"doh-latn-ng",doi:"doi-deva-in",dok:"dok-latn-id",dol:"dol-latn-pg",don:"don-latn-pg",doo:"doo-latn-cd",dop:"dop-latn-zz",dor:"dor-latn-sb",dos:"dos-latn-bf",dot:"dot-latn-ng",dov:"dov-latn-zw",dow:"dow-latn-zz",dox:"dox-ethi-et",doy:"doy-latn-gh",dpp:"dpp-latn-my",drc:"drc-latn-pt",dre:"dre-tibt-np",drg:"drg-latn-my",drh:"drh-mong-cn",dri:"dri-latn-zz",drl:"drl-latn-au",drn:"drn-latn-id",dro:"dro-latn-my",drq:"drq-deva-np",drs:"drs-ethi-zz",drt:"drt-latn-nl",dru:"dru-latn-tw",dry:"dry-deva-np",dsb:"dsb-latn-de",dsh:"dsh-latn-ke",dsi:"dsi-latn-td",dsn:"dsn-latn-id",dso:"dso-orya-in",dsq:"dsq-latn-ml","dsq-arab":"dsq-arab-ml",dta:"dta-latn-cn","dta-cyrl":"dta-cyrl-cn","dta-hans":"dta-hans-cn",dtb:"dtb-latn-my",dtd:"dtd-latn-ca",dth:"dth-latn-au",dti:"dti-latn-ml",dtk:"dtk-latn-ml",dtm:"dtm-latn-ml",dto:"dto-latn-ml",dtp:"dtp-latn-my",dtr:"dtr-latn-my",dts:"dts-latn-zz",dtt:"dtt-latn-ml",dtu:"dtu-latn-ml",dty:"dty-deva-np",dua:"dua-latn-cm",dub:"dub-gujr-in",duc:"duc-latn-zz",dud:"dud-latn-zz",due:"due-latn-ph",duf:"duf-latn-nc",dug:"dug-latn-zz",duh:"duh-deva-in","duh-gujr":"duh-gujr-in",dui:"dui-latn-pg",duk:"duk-latn-pg",dul:"dul-latn-ph",dum:"dum-latn-nl",dun:"dun-latn-id",duo:"duo-latn-ph",dup:"dup-latn-id",duq:"duq-latn-id",dur:"dur-latn-cm",dus:"dus-deva-np",duu:"duu-latn-cn",duv:"duv-latn-id",duw:"duw-latn-id",dux:"dux-latn-ml",duy:"duy-latn-ph",duz:"duz-latn-cm",dv:"dv-thaa-mv",dva:"dva-latn-zz",dwa:"dwa-latn-ng",dwk:"dwk-orya-in",dwr:"dwr-latn-et","dwr-ethi":"dwr-ethi-et",dws:"dws-latn-001",dwu:"dwu-latn-au",dww:"dww-latn-zz",dwy:"dwy-latn-au",dwz:"dwz-deva-np",dya:"dya-latn-bf",dyb:"dyb-latn-au",dyd:"dyd-latn-au",dyg:"dyg-latn-ph",dyi:"dyi-latn-ci",dym:"dym-latn-ml",dyn:"dyn-latn-au",dyo:"dyo-latn-sn",dyu:"dyu-latn-bf",dyy:"dyy-latn-au",dz:"dz-tibt-bt",dza:"dza-latn-ng",dze:"dze-latn-au",dzg:"dzg-latn-zz",dzl:"dzl-tibt-bt",dzn:"dzn-latn-cd",eaa:"eaa-latn-au",ebc:"ebc-latn-id",ebg:"ebg-latn-ng",ebk:"ebk-latn-ph",ebo:"ebo-latn-cg",ebr:"ebr-latn-ci",ebu:"ebu-latn-ke",ecr:"ecr-grek-gr",ecy:"ecy-cprt-cy",ee:"ee-latn-gh",efa:"efa-latn-ng",efe:"efe-latn-cd",efi:"efi-latn-ng",ega:"ega-latn-ci",egl:"egl-latn-it",egm:"egm-latn-tz",ego:"ego-latn-ng",egy:"egy-egyp-eg",ehu:"ehu-latn-ng",eip:"eip-latn-id",eit:"eit-latn-pg",eiv:"eiv-latn-pg",eja:"eja-latn-gw",eka:"eka-latn-zz",eke:"eke-latn-ng",ekg:"ekg-latn-id",eki:"eki-latn-ng",ekl:"ekl-latn-bd",ekm:"ekm-latn-cm",eko:"eko-latn-mz","eko-arab":"eko-arab-mz",ekp:"ekp-latn-ng",ekr:"ekr-latn-ng",eky:"eky-kali-mm",el:"el-grek-gr",ele:"ele-latn-pg",elk:"elk-latn-pg",elm:"elm-latn-ng",elo:"elo-latn-ke",elu:"elu-latn-pg",ema:"ema-latn-zz",emb:"emb-latn-id",eme:"eme-latn-gf",emg:"emg-deva-np",emi:"emi-latn-zz",emm:"emm-latn-mx",emn:"emn-latn-cm",emp:"emp-latn-pa",ems:"ems-latn-us","ems-cyrl":"ems-cyrl-us",emu:"emu-deva-in",emw:"emw-latn-id",emx:"emx-latn-fr",emz:"emz-latn-cm",en:"en-latn-us","en-shaw":"en-shaw-gb",ena:"ena-latn-pg",enb:"enb-latn-ke",enc:"enc-latn-vn",end:"end-latn-id",enf:"enf-cyrl-ru",enh:"enh-cyrl-ru",enl:"enl-latn-py",enm:"enm-latn-gb",enn:"enn-latn-zz",eno:"eno-latn-id",enq:"enq-latn-zz",enr:"enr-latn-id",env:"env-latn-ng",enw:"enw-latn-ng",enx:"enx-latn-py",eo:"eo-latn-001",eot:"eot-latn-ci",epi:"epi-latn-ng",era:"era-taml-in",erg:"erg-latn-vu",erh:"erh-latn-ng",eri:"eri-latn-zz",erk:"erk-latn-vu",err:"err-latn-au",ert:"ert-latn-id",erw:"erw-latn-id",es:"es-latn-es",ese:"ese-latn-bo",esg:"esg-gonm-in",esh:"esh-arab-ir",esi:"esi-latn-us",esm:"esm-latn-ci",ess:"ess-latn-us","ess-cyrl":"ess-cyrl-us",esu:"esu-latn-us",esy:"esy-latn-ph",et:"et-latn-ee",etb:"etb-latn-ng",etn:"etn-latn-vu",eto:"eto-latn-cm",etr:"etr-latn-zz",ets:"ets-latn-ng",ett:"ett-ital-it",etu:"etu-latn-zz",etx:"etx-latn-zz",etz:"etz-latn-id",eu:"eu-latn-es",eve:"eve-cyrl-ru",evh:"evh-latn-ng",evn:"evn-cyrl-ru","evn-latn":"evn-latn-cn","evn-mong":"evn-mong-cn",ewo:"ewo-latn-cm",ext:"ext-latn-es",eya:"eya-latn-us",eyo:"eyo-latn-ke",eza:"eza-latn-zz",eze:"eze-latn-ng",fa:"fa-arab-ir",faa:"faa-latn-zz",fab:"fab-latn-zz",fad:"fad-latn-pg",faf:"faf-latn-sb",fag:"fag-latn-zz",fah:"fah-latn-ng",fai:"fai-latn-zz",faj:"faj-latn-pg",fak:"fak-latn-cm",fal:"fal-latn-cm",fam:"fam-latn-ng",fan:"fan-latn-gq",fap:"fap-latn-sn",far:"far-latn-sb",fau:"fau-latn-id",fax:"fax-latn-es",fay:"fay-arab-ir",faz:"faz-arab-ir",fbl:"fbl-latn-ph",fer:"fer-latn-ss",ff:"ff-latn-sn","ff-adlm":"ff-adlm-gn",ffi:"ffi-latn-zz",ffm:"ffm-latn-ml",fgr:"fgr-latn-td",fi:"fi-latn-fi",fia:"fia-arab-sd",fie:"fie-latn-ng",fif:"fif-latn-sa",fil:"fil-latn-ph",fip:"fip-latn-tz",fir:"fir-latn-ng",fit:"fit-latn-se",fiw:"fiw-latn-pg",fj:"fj-latn-fj",fkk:"fkk-latn-ng",fkv:"fkv-latn-no",fla:"fla-latn-us",flh:"flh-latn-id",fli:"fli-latn-ng",fll:"fll-latn-cm",fln:"fln-latn-au",flr:"flr-latn-zz",fly:"fly-latn-za",fmp:"fmp-latn-zz",fmu:"fmu-deva-in",fnb:"fnb-latn-vu",fng:"fng-latn-za",fni:"fni-latn-td",fo:"fo-latn-fo",fod:"fod-latn-zz",foi:"foi-latn-pg",fom:"fom-latn-cd",fon:"fon-latn-bj",for:"for-latn-zz",fos:"fos-latn-tw",fpe:"fpe-latn-zz",fqs:"fqs-latn-zz",fr:"fr-latn-fr",frc:"frc-latn-us",frd:"frd-latn-id",frk:"frk-latn-de",frm:"frm-latn-fr",fro:"fro-latn-fr",frp:"frp-latn-fr",frq:"frq-latn-pg",frr:"frr-latn-de",frs:"frs-latn-de",frt:"frt-latn-vu",fub:"fub-arab-cm",fud:"fud-latn-wf",fue:"fue-latn-zz",fuf:"fuf-latn-gn",fuh:"fuh-latn-zz",fui:"fui-latn-td",fum:"fum-latn-ng",fun:"fun-latn-br",fuq:"fuq-latn-ne",fur:"fur-latn-it",fut:"fut-latn-vu",fuu:"fuu-latn-cd",fuv:"fuv-latn-ng",fuy:"fuy-latn-zz",fvr:"fvr-latn-sd",fwa:"fwa-latn-nc",fwe:"fwe-latn-na",fy:"fy-latn-nl",ga:"ga-latn-ie",gaa:"gaa-latn-gh",gab:"gab-latn-td",gac:"gac-latn-in","gac-deva":"gac-deva-in",gad:"gad-latn-ph",gae:"gae-latn-ve",gaf:"gaf-latn-zz",gag:"gag-latn-md",gah:"gah-latn-zz",gai:"gai-latn-pg",gaj:"gaj-latn-zz",gak:"gak-latn-id",gal:"gal-latn-tl",gam:"gam-latn-zz",gan:"gan-hans-cn",gao:"gao-latn-pg",gap:"gap-latn-pg",gaq:"gaq-orya-in",gar:"gar-latn-pg",gas:"gas-gujr-in",gat:"gat-latn-pg",gau:"gau-telu-in",gaw:"gaw-latn-zz",gax:"gax-latn-et","gax-ethi":"gax-ethi-et",gay:"gay-latn-id",gba:"gba-latn-zz",gbb:"gbb-latn-au",gbd:"gbd-latn-au",gbe:"gbe-latn-pg",gbf:"gbf-latn-zz",gbg:"gbg-latn-cf",gbh:"gbh-latn-bj",gbi:"gbi-latn-id",gbj:"gbj-orya-in",gbk:"gbk-deva-in","gbk-takr":"gbk-takr-in",gbl:"gbl-gujr-in","gbl-deva":"gbl-deva-in",gbm:"gbm-deva-in",gbn:"gbn-latn-ss",gbp:"gbp-latn-cf",gbq:"gbq-latn-cf",gbr:"gbr-latn-ng",gbs:"gbs-latn-bj",gbu:"gbu-latn-au",gbv:"gbv-latn-cf",gbw:"gbw-latn-au",gbx:"gbx-latn-bj",gby:"gby-latn-zz",gbz:"gbz-arab-ir",gcc:"gcc-latn-pg",gcd:"gcd-latn-au",gcf:"gcf-latn-gp",gcl:"gcl-latn-gd",gcn:"gcn-latn-pg",gcr:"gcr-latn-gf",gct:"gct-latn-ve",gd:"gd-latn-gb",gdb:"gdb-orya-in","gdb-telu":"gdb-telu-in",gdc:"gdc-latn-au",gdd:"gdd-latn-pg",gde:"gde-latn-zz",gdf:"gdf-latn-ng",gdg:"gdg-latn-ph",gdh:"gdh-latn-au",gdi:"gdi-latn-cf",gdj:"gdj-latn-au",gdk:"gdk-latn-td",gdl:"gdl-latn-et","gdl-ethi":"gdl-ethi-et",gdm:"gdm-latn-td",gdn:"gdn-latn-zz",gdo:"gdo-cyrl-ru",gdq:"gdq-latn-ye",gdr:"gdr-latn-zz",gdt:"gdt-latn-au",gdu:"gdu-latn-ng",gdx:"gdx-deva-in",gea:"gea-latn-ng",geb:"geb-latn-zz",gec:"gec-latn-lr",ged:"ged-latn-ng",gef:"gef-latn-id",geg:"geg-latn-ng",geh:"geh-latn-ca",gei:"gei-latn-id",gej:"gej-latn-zz",gek:"gek-latn-ng",gel:"gel-latn-zz",geq:"geq-latn-cf",ges:"ges-latn-id",gev:"gev-latn-ga",gew:"gew-latn-ng",gex:"gex-latn-so",gey:"gey-latn-cd",gez:"gez-ethi-et",gfk:"gfk-latn-zz",gga:"gga-latn-sb",ggb:"ggb-latn-lr",ggd:"ggd-latn-au",gge:"gge-latn-au",ggg:"ggg-arab-pk",ggk:"ggk-latn-au",ggl:"ggl-latn-pg",ggn:"ggn-deva-np",ggt:"ggt-latn-pg",ggu:"ggu-latn-ci",ggw:"ggw-latn-pg",gha:"gha-arab-ly","gha-latn":"gha-latn-ly","gha-tfng":"gha-tfng-ly",ghc:"ghc-latn-gb",ghe:"ghe-deva-np",ghk:"ghk-latn-mm",ghn:"ghn-latn-sb",ghr:"ghr-arab-pk",ghs:"ghs-latn-zz",ght:"ght-tibt-np",gia:"gia-latn-au",gib:"gib-latn-ng",gic:"gic-latn-za",gid:"gid-latn-cm",gie:"gie-latn-ci",gig:"gig-arab-pk",gih:"gih-latn-au",gil:"gil-latn-ki",gim:"gim-latn-zz",gin:"gin-cyrl-ru",gip:"gip-latn-pg",giq:"giq-latn-vn",gir:"gir-latn-vn",gis:"gis-latn-cm",git:"git-latn-ca",gix:"gix-latn-cd",giy:"giy-latn-au",giz:"giz-latn-cm",gjk:"gjk-arab-pk",gjm:"gjm-latn-au",gjn:"gjn-latn-zz",gjr:"gjr-latn-au",gju:"gju-arab-pk",gka:"gka-latn-pg",gkd:"gkd-latn-pg",gke:"gke-latn-cm",gkn:"gkn-latn-zz",gko:"gko-latn-au",gkp:"gkp-latn-zz",gku:"gku-latn-za",gl:"gl-latn-es",glb:"glb-latn-ng",glc:"glc-latn-td",gld:"gld-cyrl-ru",glh:"glh-arab-af",glj:"glj-latn-td",glk:"glk-arab-ir",gll:"gll-latn-au",glo:"glo-latn-ng",glr:"glr-latn-lr",glu:"glu-latn-td",glw:"glw-latn-ng",gma:"gma-latn-au",gmb:"gmb-latn-sb",gmd:"gmd-latn-ng",gmg:"gmg-latn-pg",gmh:"gmh-latn-de",gmm:"gmm-latn-zz",gmn:"gmn-latn-cm",gmr:"gmr-latn-au",gmu:"gmu-latn-pg",gmv:"gmv-ethi-zz",gmx:"gmx-latn-tz",gmy:"gmy-linb-gr",gmz:"gmz-latn-ng",gn:"gn-latn-py",gna:"gna-latn-bf",gnb:"gnb-latn-in",gnc:"gnc-latn-es",gnd:"gnd-latn-zz",gne:"gne-latn-ng",gng:"gng-latn-zz",gnh:"gnh-latn-ng",gni:"gni-latn-au",gnj:"gnj-latn-ci",gnk:"gnk-latn-bw",gnl:"gnl-latn-au",gnm:"gnm-latn-pg",gnn:"gnn-latn-au",gnq:"gnq-latn-my",gnr:"gnr-latn-au",gnt:"gnt-latn-pg",gnu:"gnu-latn-pg",gnw:"gnw-latn-bo",gnz:"gnz-latn-cf",goa:"goa-latn-ci",gob:"gob-latn-co",goc:"goc-latn-pg",god:"god-latn-zz",goe:"goe-tibt-bt",gof:"gof-ethi-zz",gog:"gog-latn-tz",goh:"goh-latn-de",goi:"goi-latn-zz",gok:"gok-deva-in",gol:"gol-latn-lr",gom:"gom-deva-in",gon:"gon-telu-in",goo:"goo-latn-fj",gop:"gop-latn-id",goq:"goq-latn-id",gor:"gor-latn-id",gos:"gos-latn-nl",got:"got-goth-ua",gou:"gou-latn-cm",gov:"gov-latn-ci",gow:"gow-latn-tz",gox:"gox-latn-cd",goy:"goy-latn-td",gpa:"gpa-latn-ng",gpe:"gpe-latn-gh",gpn:"gpn-latn-pg",gqa:"gqa-latn-ng",gqn:"gqn-latn-br",gqr:"gqr-latn-td",gra:"gra-deva-in","gra-gujr":"gra-gujr-in",grb:"grb-latn-zz",grc:"grc-cprt-cy","grc-linb":"grc-linb-gr",grd:"grd-latn-ng",grg:"grg-latn-pg",grh:"grh-latn-ng",gri:"gri-latn-sb",grj:"grj-latn-lr",grm:"grm-latn-my",grq:"grq-latn-pg",grs:"grs-latn-id",grt:"grt-beng-in",gru:"gru-ethi-et","gru-latn":"gru-latn-et",grv:"grv-latn-lr",grw:"grw-latn-zz",grx:"grx-latn-pg",gry:"gry-latn-lr",grz:"grz-latn-pg",gsl:"gsl-latn-sn",gsn:"gsn-latn-pg",gso:"gso-latn-cf",gsp:"gsp-latn-pg",gsw:"gsw-latn-ch",gta:"gta-latn-br",gtu:"gtu-latn-au",gu:"gu-gujr-in",gua:"gua-latn-ng",gub:"gub-latn-br",guc:"guc-latn-co",gud:"gud-latn-zz",gue:"gue-latn-au",guf:"guf-latn-au",guh:"guh-latn-co",gui:"gui-latn-bo",guk:"guk-latn-et","guk-ethi":"guk-ethi-et",gul:"gul-latn-us",gum:"gum-latn-co",gun:"gun-latn-br",guo:"guo-latn-co",gup:"gup-latn-au",guq:"guq-latn-py",gur:"gur-latn-gh",gut:"gut-latn-cr",guu:"guu-latn-ve",guw:"guw-latn-zz",gux:"gux-latn-zz",guz:"guz-latn-ke",gv:"gv-latn-im",gva:"gva-latn-py",gvc:"gvc-latn-br",gve:"gve-latn-pg",gvf:"gvf-latn-zz",gvj:"gvj-latn-br",gvl:"gvl-latn-td",gvm:"gvm-latn-ng",gvn:"gvn-latn-au",gvo:"gvo-latn-br",gvp:"gvp-latn-br",gvr:"gvr-deva-np",gvs:"gvs-latn-zz",gvy:"gvy-latn-au",gwa:"gwa-latn-ci",gwb:"gwb-latn-ng",gwc:"gwc-arab-zz",gwd:"gwd-latn-et",gwe:"gwe-latn-tz",gwf:"gwf-arab-pk",gwg:"gwg-latn-ng",gwi:"gwi-latn-ca",gwj:"gwj-latn-bw",gwm:"gwm-latn-au",gwn:"gwn-latn-ng",gwr:"gwr-latn-ug",gwt:"gwt-arab-zz",gwu:"gwu-latn-au",gww:"gww-latn-au",gwx:"gwx-latn-gh",gxx:"gxx-latn-ci",gyb:"gyb-latn-pg",gyd:"gyd-latn-au",gye:"gye-latn-ng",gyf:"gyf-latn-au",gyg:"gyg-latn-cf",gyi:"gyi-latn-zz",gyl:"gyl-latn-et","gyl-ethi":"gyl-ethi-et",gym:"gym-latn-pa",gyn:"gyn-latn-gy",gyo:"gyo-deva-np",gyr:"gyr-latn-bo",gyy:"gyy-latn-au",gyz:"gyz-latn-ng",gza:"gza-latn-sd",gzi:"gzi-arab-ir",gzn:"gzn-latn-id",ha:"ha-latn-ng","ha-cm":"ha-arab-cm","ha-sd":"ha-arab-sd",haa:"haa-latn-us",hac:"hac-arab-ir",had:"had-latn-id",hae:"hae-latn-et",hag:"hag-latn-zz",hah:"hah-latn-pg",hai:"hai-latn-ca",haj:"haj-latn-in","haj-beng":"haj-beng-in",hak:"hak-hans-cn",hal:"hal-latn-vn",ham:"ham-latn-zz",han:"han-latn-tz",hao:"hao-latn-pg",hap:"hap-latn-id",haq:"haq-latn-tz",har:"har-ethi-et","har-arab":"har-arab-et","har-latn":"har-latn-et",has:"has-latn-ca",hav:"hav-latn-cd",haw:"haw-latn-us",hax:"hax-latn-ca",hay:"hay-latn-tz",haz:"haz-arab-af",hba:"hba-latn-cd",hbb:"hbb-latn-zz",hbn:"hbn-latn-sd",hbo:"hbo-hebr-il",hbu:"hbu-latn-tl",hch:"hch-latn-mx",hdy:"hdy-ethi-zz",he:"he-hebr-il",hed:"hed-latn-td",heg:"heg-latn-id",heh:"heh-latn-tz",hei:"hei-latn-ca",hem:"hem-latn-cd",hgm:"hgm-latn-na",hgw:"hgw-latn-pg",hhi:"hhi-latn-pg",hhr:"hhr-latn-sn",hhy:"hhy-latn-zz",hi:"hi-deva-in","hi-latn":"hi-latn-in",hia:"hia-latn-zz",hib:"hib-latn-pe",hid:"hid-latn-us",hif:"hif-latn-fj",hig:"hig-latn-zz",hih:"hih-latn-zz",hii:"hii-takr-in","hii-deva":"hii-deva-in",hij:"hij-latn-cm",hik:"hik-latn-id",hil:"hil-latn-ph",hio:"hio-latn-bw",hir:"hir-latn-br",hit:"hit-xsux-tr",hiw:"hiw-latn-vu",hix:"hix-latn-br",hji:"hji-latn-id",hka:"hka-latn-tz",hke:"hke-latn-cd",hkh:"hkh-arab-in","hkh-deva":"hkh-deva-in","hkh-latn":"hkh-latn-in",hkk:"hkk-latn-pg",hla:"hla-latn-zz",hlb:"hlb-deva-in",hld:"hld-latn-vn",hlt:"hlt-latn-mm",hlu:"hlu-hluw-tr",hma:"hma-latn-cn",hmb:"hmb-latn-ml",hmd:"hmd-plrd-cn",hmf:"hmf-latn-vn",hmj:"hmj-bopo-cn",hmm:"hmm-latn-cn",hmn:"hmn-latn-cn","hmn-bopo":"hmn-bopo-cn","hmn-hmng":"hmn-hmng-cn",hmp:"hmp-latn-cn",hmq:"hmq-bopo-cn",hmr:"hmr-latn-in",hms:"hms-latn-cn",hmt:"hmt-latn-zz",hmu:"hmu-latn-id",hmv:"hmv-latn-vn",hmw:"hmw-latn-cn",hmy:"hmy-latn-cn",hmz:"hmz-latn-cn","hmz-plrd":"hmz-plrd-cn",hna:"hna-latn-cm",hnd:"hnd-arab-pk",hne:"hne-deva-in",hng:"hng-latn-ao",hnh:"hnh-latn-bw",hni:"hni-latn-cn",hnj:"hnj-hmnp-us","hnj-au":"hnj-laoo-au","hnj-cn":"hnj-laoo-cn","hnj-fr":"hnj-laoo-fr","hnj-gf":"hnj-laoo-gf","hnj-la":"hnj-laoo-la","hnj-laoo":"hnj-laoo-la","hnj-mm":"hnj-laoo-mm","hnj-sr":"hnj-laoo-sr","hnj-th":"hnj-laoo-th","hnj-us":"hnj-hmnp-us","hnj-vn":"hnj-laoo-vn",hnn:"hnn-latn-ph",hno:"hno-arab-pk",hns:"hns-latn-sr",ho:"ho-latn-pg",hoa:"hoa-latn-sb",hob:"hob-latn-pg",hoc:"hoc-deva-in",hod:"hod-latn-ng",hoe:"hoe-latn-ng",hoh:"hoh-arab-om",hoi:"hoi-latn-us",hoj:"hoj-deva-in",hol:"hol-latn-ao",hom:"hom-latn-ss",hoo:"hoo-latn-cd",hop:"hop-latn-us",hor:"hor-latn-td",hot:"hot-latn-zz",hov:"hov-latn-id",how:"how-hani-cn",hoy:"hoy-deva-in",hpo:"hpo-mymr-mm",hr:"hr-latn-hr",hra:"hra-latn-in",hrc:"hrc-latn-pg",hre:"hre-latn-vn",hrk:"hrk-latn-id",hrm:"hrm-latn-cn","hrm-hmng":"hrm-hmng-cn",hro:"hro-latn-vn",hrp:"hrp-latn-au",hrt:"hrt-syrc-tr",hru:"hru-latn-in",hrw:"hrw-latn-pg",hrx:"hrx-latn-br",hrz:"hrz-arab-ir",hsb:"hsb-latn-de",hsn:"hsn-hans-cn",hss:"hss-arab-om",ht:"ht-latn-ht",hti:"hti-latn-id",hto:"hto-latn-co",hts:"hts-latn-tz",htu:"htu-latn-id",htx:"htx-xsux-tr",hu:"hu-latn-hu",hub:"hub-latn-pe",huc:"huc-latn-bw",hud:"hud-latn-id",hue:"hue-latn-mx",huf:"huf-latn-pg",hug:"hug-latn-pe",huh:"huh-latn-cl",hui:"hui-latn-zz",huk:"huk-latn-id",hul:"hul-latn-pg",hum:"hum-latn-cd",hup:"hup-latn-us",hur:"hur-latn-ca",hus:"hus-latn-mx",hut:"hut-deva-np","hut-tibt":"hut-tibt-np",huu:"huu-latn-pe",huv:"huv-latn-mx",huw:"huw-latn-id",hux:"hux-latn-pe",huy:"huy-hebr-il",huz:"huz-cyrl-ru",hvc:"hvc-latn-ht",hve:"hve-latn-mx",hvk:"hvk-latn-nc",hvn:"hvn-latn-id",hvv:"hvv-latn-mx",hwa:"hwa-latn-ci",hwc:"hwc-latn-us",hwo:"hwo-latn-ng",hy:"hy-armn-am",hya:"hya-latn-cm",hyw:"hyw-armn-am",hz:"hz-latn-na",ia:"ia-latn-001",iai:"iai-latn-nc",ian:"ian-latn-zz",iar:"iar-latn-zz",iba:"iba-latn-my",ibb:"ibb-latn-ng",ibd:"ibd-latn-au",ibe:"ibe-latn-ng",ibg:"ibg-latn-ph",ibh:"ibh-latn-vn",ibl:"ibl-latn-ph",ibm:"ibm-latn-ng",ibn:"ibn-latn-ng",ibr:"ibr-latn-ng",ibu:"ibu-latn-id",iby:"iby-latn-zz",ica:"ica-latn-zz",ich:"ich-latn-zz",icr:"icr-latn-co",id:"id-latn-id",ida:"ida-latn-ke",idb:"idb-latn-in",idc:"idc-latn-ng",idd:"idd-latn-zz",ide:"ide-latn-ng",idi:"idi-latn-zz",idr:"idr-latn-ss",ids:"ids-latn-ng",idt:"idt-latn-tl",idu:"idu-latn-zz",ie:"ie-latn-001",ifa:"ifa-latn-ph",ifb:"ifb-latn-ph",ife:"ife-latn-tg",iff:"iff-latn-vu",ifk:"ifk-latn-ph",ifm:"ifm-latn-cg",ifu:"ifu-latn-ph",ify:"ify-latn-ph",ig:"ig-latn-ng",igb:"igb-latn-zz",ige:"ige-latn-zz",igg:"igg-latn-pg",igl:"igl-latn-ng",igm:"igm-latn-pg",ign:"ign-latn-bo",igo:"igo-latn-pg",igs:"igs-latn-001","igs-grek":"igs-grek-001",igw:"igw-latn-ng",ihb:"ihb-latn-id",ihi:"ihi-latn-ng",ihp:"ihp-latn-id",ihw:"ihw-latn-au",ii:"ii-yiii-cn",iin:"iin-latn-au",ijc:"ijc-latn-ng",ije:"ije-latn-ng",ijj:"ijj-latn-zz",ijn:"ijn-latn-ng",ijs:"ijs-latn-ng",ik:"ik-latn-us",iki:"iki-latn-ng",ikk:"ikk-latn-zz",ikl:"ikl-latn-ng",iko:"iko-latn-ng",ikp:"ikp-latn-ng",ikr:"ikr-latn-au",ikt:"ikt-latn-ca","ikt-cans":"ikt-cans-ca",ikv:"ikv-latn-ng",ikw:"ikw-latn-zz",ikx:"ikx-latn-zz",ikz:"ikz-latn-tz",ila:"ila-latn-id",ilb:"ilb-latn-zm",ilg:"ilg-latn-au",ili:"ili-latn-cn","ili-arab":"ili-arab-cn","ili-cyrl":"ili-cyrl-kz",ilk:"ilk-latn-ph",ilm:"ilm-latn-my",ilo:"ilo-latn-ph",ilp:"ilp-latn-ph",ilu:"ilu-latn-id",ilv:"ilv-latn-ng",imi:"imi-latn-pg",iml:"iml-latn-us",imn:"imn-latn-pg",imo:"imo-latn-zz",imr:"imr-latn-id",ims:"ims-latn-it",imt:"imt-latn-ss",imy:"imy-lyci-tr",in:"in-latn-id",inb:"inb-latn-co",ing:"ing-latn-us",inh:"inh-cyrl-ru",inj:"inj-latn-co",inn:"inn-latn-ph",ino:"ino-latn-pg",inp:"inp-latn-pe",int:"int-mymr-mm",io:"io-latn-001",ior:"ior-ethi-et",iou:"iou-latn-zz",iow:"iow-latn-us",ipi:"ipi-latn-pg",ipo:"ipo-latn-pg",iqu:"iqu-latn-pe",iqw:"iqw-latn-ng",ire:"ire-latn-id",irh:"irh-latn-id",iri:"iri-latn-zz",irk:"irk-latn-tz",irn:"irn-latn-br",iru:"iru-taml-in","iru-mlym":"iru-mlym-in",irx:"irx-latn-id",iry:"iry-latn-ph",is:"is-latn-is",isa:"isa-latn-pg",isc:"isc-latn-pe",isd:"isd-latn-ph",ish:"ish-latn-ng",isi:"isi-latn-ng",isk:"isk-arab-af","isk-cyrl":"isk-cyrl-tj",ism:"ism-latn-id",isn:"isn-latn-tz",iso:"iso-latn-ng",ist:"ist-latn-hr",isu:"isu-latn-cm",it:"it-latn-it",itb:"itb-latn-ph",itd:"itd-latn-id",ite:"ite-latn-bo",iti:"iti-latn-ph",itk:"itk-hebr-it",itl:"itl-cyrl-ru",itm:"itm-latn-ng",ito:"ito-latn-bo",itr:"itr-latn-pg",its:"its-latn-ng",itt:"itt-latn-ph",itv:"itv-latn-ph",itw:"itw-latn-ng",itx:"itx-latn-id",ity:"ity-latn-ph",itz:"itz-latn-gt",iu:"iu-cans-ca",ium:"ium-latn-cn","ium-hani":"ium-hani-cn","ium-laoo":"ium-laoo-la","ium-thai":"ium-thai-th",ivb:"ivb-latn-ph",ivv:"ivv-latn-ph",iw:"iw-hebr-il",iwk:"iwk-latn-ph",iwm:"iwm-latn-zz",iwo:"iwo-latn-id",iws:"iws-latn-zz",ixc:"ixc-latn-mx",ixl:"ixl-latn-gt",iya:"iya-latn-ng",iyo:"iyo-latn-cm",iyx:"iyx-latn-cg",izh:"izh-latn-ru",izi:"izi-latn-zz",izr:"izr-latn-ng",izz:"izz-latn-ng",ja:"ja-jpan-jp",jaa:"jaa-latn-br",jab:"jab-latn-zz",jac:"jac-latn-gt",jad:"jad-arab-gn",jae:"jae-latn-pg",jaf:"jaf-latn-ng",jah:"jah-latn-my",jaj:"jaj-latn-sb",jak:"jak-latn-my",jal:"jal-latn-id",jam:"jam-latn-jm",jan:"jan-latn-au",jao:"jao-latn-au",jaq:"jaq-latn-id",jar:"jar-latn-zz",jas:"jas-latn-nc",jat:"jat-arab-af",jau:"jau-latn-id",jax:"jax-latn-id",jay:"jay-latn-au",jaz:"jaz-latn-nc",jbe:"jbe-hebr-il",jbi:"jbi-latn-au",jbj:"jbj-latn-id",jbk:"jbk-latn-pg",jbm:"jbm-latn-ng",jbn:"jbn-arab-ly",jbo:"jbo-latn-001",jbr:"jbr-latn-id",jbt:"jbt-latn-br",jbu:"jbu-latn-zz",jbw:"jbw-latn-au",jct:"jct-cyrl-ua","jct-latn":"jct-latn-ua",jda:"jda-tibt-in",jdg:"jdg-arab-pk",jdt:"jdt-cyrl-ru","jdt-hebr":"jdt-hebr-ru","jdt-latn":"jdt-latn-az",jeb:"jeb-latn-pe",jee:"jee-deva-np",jeh:"jeh-latn-vn","jeh-laoo":"jeh-laoo-la",jei:"jei-latn-id",jek:"jek-latn-ci",jel:"jel-latn-id",jen:"jen-latn-zz",jer:"jer-latn-ng",jet:"jet-latn-pg",jeu:"jeu-latn-td",jgb:"jgb-latn-cd",jge:"jge-geor-ge","jge-hebr":"jge-hebr-il",jgk:"jgk-latn-zz",jgo:"jgo-latn-cm",jhi:"jhi-latn-my",ji:"ji-hebr-ua",jia:"jia-latn-cm",jib:"jib-latn-zz",jic:"jic-latn-hn",jid:"jid-latn-ng",jie:"jie-latn-ng",jig:"jig-latn-au",jil:"jil-latn-pg",jim:"jim-latn-cm",jit:"jit-latn-tz",jiu:"jiu-latn-cn",jiv:"jiv-latn-ec",jiy:"jiy-latn-cn",jje:"jje-hang-kr",jjr:"jjr-latn-ng",jka:"jka-latn-id",jkm:"jkm-mymr-mm","jkm-brai":"jkm-brai-mm","jkm-latn":"jkm-latn-mm",jko:"jko-latn-pg",jku:"jku-latn-ng",jle:"jle-latn-sd",jma:"jma-latn-pg",jmb:"jmb-latn-ng",jmc:"jmc-latn-tz",jmd:"jmd-latn-id",jmi:"jmi-latn-ng",jml:"jml-deva-np",jmn:"jmn-latn-mm",jmr:"jmr-latn-gh",jms:"jms-latn-ng",jmw:"jmw-latn-pg",jmx:"jmx-latn-mx",jna:"jna-takr-in",jnd:"jnd-arab-pk",jng:"jng-latn-au",jni:"jni-latn-ng",jnj:"jnj-latn-et","jnj-ethi":"jnj-ethi-et",jnl:"jnl-deva-in",jns:"jns-deva-in","jns-latn":"jns-latn-in","jns-takr":"jns-takr-in",job:"job-latn-cd",jod:"jod-latn-ci",jog:"jog-arab-pk",jor:"jor-latn-bo",jow:"jow-latn-ml",jpa:"jpa-hebr-ps",jpr:"jpr-hebr-il",jqr:"jqr-latn-pe",jra:"jra-latn-zz",jrr:"jrr-latn-ng",jrt:"jrt-latn-ng",jru:"jru-latn-ve",jua:"jua-latn-br",jub:"jub-latn-ng",jud:"jud-latn-ci",juh:"juh-latn-ng",jui:"jui-latn-au",juk:"juk-latn-ng",jul:"jul-deva-np",jum:"jum-latn-sd",jun:"jun-orya-in",juo:"juo-latn-ng",jup:"jup-latn-br",jur:"jur-latn-br",jut:"jut-latn-dk",juu:"juu-latn-ng",juw:"juw-latn-ng",juy:"juy-orya-in",jv:"jv-latn-id",jvd:"jvd-latn-id",jvn:"jvn-latn-sr",jw:"jw-latn-id",jwi:"jwi-latn-gh",jya:"jya-tibt-cn",jye:"jye-hebr-il",jyy:"jyy-latn-td",ka:"ka-geor-ge",kaa:"kaa-cyrl-uz",kab:"kab-latn-dz",kac:"kac-latn-mm",kad:"kad-latn-zz",kag:"kag-latn-my",kah:"kah-latn-cf",kai:"kai-latn-zz",kaj:"kaj-latn-ng",kak:"kak-latn-ph",kam:"kam-latn-ke",kao:"kao-latn-ml",kap:"kap-cyrl-ru",kaq:"kaq-latn-pe",kav:"kav-latn-br",kaw:"kaw-kawi-id",kax:"kax-latn-id",kay:"kay-latn-br",kba:"kba-latn-au",kbb:"kbb-latn-br",kbc:"kbc-latn-br",kbd:"kbd-cyrl-ru",kbe:"kbe-latn-au",kbh:"kbh-latn-co",kbi:"kbi-latn-id",kbj:"kbj-latn-cd",kbk:"kbk-latn-pg",kbl:"kbl-latn-td",kbm:"kbm-latn-zz",kbn:"kbn-latn-cf",kbo:"kbo-latn-ss",kbp:"kbp-latn-zz",kbq:"kbq-latn-zz",kbr:"kbr-latn-et","kbr-ethi":"kbr-ethi-et",kbs:"kbs-latn-ga",kbt:"kbt-latn-pg",kbu:"kbu-arab-pk",kbv:"kbv-latn-id",kbw:"kbw-latn-pg",kbx:"kbx-latn-zz",kby:"kby-arab-ne",kbz:"kbz-latn-ng",kca:"kca-cyrl-ru",kcb:"kcb-latn-pg",kcc:"kcc-latn-ng",kcd:"kcd-latn-id",kce:"kce-latn-ng",kcf:"kcf-latn-ng",kcg:"kcg-latn-ng",kch:"kch-latn-ng",kci:"kci-latn-ng",kcj:"kcj-latn-gw",kck:"kck-latn-zw",kcl:"kcl-latn-zz",kcm:"kcm-latn-cf",kcn:"kcn-latn-ug",kco:"kco-latn-pg",kcp:"kcp-latn-sd",kcq:"kcq-latn-ng",kcs:"kcs-latn-ng",kct:"kct-latn-zz",kcu:"kcu-latn-tz",kcv:"kcv-latn-cd",kcw:"kcw-latn-cd",kcz:"kcz-latn-tz",kda:"kda-latn-au",kdc:"kdc-latn-tz",kdd:"kdd-latn-au",kde:"kde-latn-tz",kdf:"kdf-latn-pg",kdg:"kdg-latn-cd",kdh:"kdh-latn-tg",kdi:"kdi-latn-ug",kdj:"kdj-latn-ug",kdk:"kdk-latn-nc",kdl:"kdl-latn-zz",kdm:"kdm-latn-ng",kdn:"kdn-latn-zw",kdp:"kdp-latn-ng",kdq:"kdq-beng-in",kdr:"kdr-latn-lt","kdr-cyrl":"kdr-cyrl-ua",kdt:"kdt-thai-th",kdw:"kdw-latn-id",kdx:"kdx-latn-ng",kdy:"kdy-latn-id",kdz:"kdz-latn-cm",kea:"kea-latn-cv",keb:"keb-latn-ga",kec:"kec-latn-sd",ked:"ked-latn-tz",kee:"kee-latn-us",kef:"kef-latn-tg",keg:"keg-latn-sd",keh:"keh-latn-pg",kei:"kei-latn-id",kek:"kek-latn-gt",kel:"kel-latn-cd",kem:"kem-latn-tl",ken:"ken-latn-cm",keo:"keo-latn-ug",ker:"ker-latn-td",kes:"kes-latn-ng",ket:"ket-cyrl-ru",keu:"keu-latn-tg",kew:"kew-latn-pg",kex:"kex-deva-in","kex-gujr":"kex-gujr-in",key:"key-telu-in",kez:"kez-latn-zz",kfa:"kfa-knda-in",kfb:"kfb-deva-in",kfc:"kfc-telu-in",kfd:"kfd-knda-in",kfe:"kfe-taml-in",kff:"kff-latn-in","kff-deva":"kff-deva-in","kff-orya":"kff-orya-in","kff-telu":"kff-telu-in",kfh:"kfh-mlym-in",kfi:"kfi-taml-in","kfi-knda":"kfi-knda-in",kfk:"kfk-deva-in","kfk-takr":"kfk-takr-in",kfl:"kfl-latn-cm",kfm:"kfm-arab-ir",kfn:"kfn-latn-cm",kfo:"kfo-latn-ci",kfp:"kfp-deva-in",kfq:"kfq-deva-in",kfr:"kfr-deva-in",kfs:"kfs-deva-in",kfv:"kfv-latn-in",kfw:"kfw-latn-in",kfx:"kfx-deva-in","kfx-takr":"kfx-takr-in",kfy:"kfy-deva-in",kfz:"kfz-latn-bf",kg:"kg-latn-cd",kga:"kga-latn-ci",kgb:"kgb-latn-id",kge:"kge-latn-id",kgf:"kgf-latn-zz",kgj:"kgj-deva-np",kgk:"kgk-latn-br",kgl:"kgl-latn-au",kgm:"kgm-latn-br",kgo:"kgo-latn-sd",kgp:"kgp-latn-br",kgq:"kgq-latn-id",kgr:"kgr-latn-id",kgs:"kgs-latn-au",kgt:"kgt-latn-ng",kgu:"kgu-latn-pg",kgv:"kgv-latn-id",kgw:"kgw-latn-id",kgx:"kgx-latn-id",kgy:"kgy-deva-np",kha:"kha-latn-in",khb:"khb-talu-cn",khc:"khc-latn-id",khd:"khd-latn-id",khe:"khe-latn-id",khf:"khf-thai-la",khg:"khg-tibt-cn",khh:"khh-latn-id",khj:"khj-latn-ng",khl:"khl-latn-pg",khn:"khn-deva-in",khp:"khp-latn-id",khq:"khq-latn-ml",khr:"khr-latn-in","khr-deva":"khr-deva-in",khs:"khs-latn-zz",kht:"kht-mymr-in",khu:"khu-latn-ao",khv:"khv-cyrl-ru",khw:"khw-arab-pk",khx:"khx-latn-cd",khy:"khy-latn-cd",khz:"khz-latn-zz",ki:"ki-latn-ke",kia:"kia-latn-td",kib:"kib-latn-sd",kic:"kic-latn-us",kid:"kid-latn-cm",kie:"kie-latn-td",kif:"kif-deva-np",kig:"kig-latn-id",kih:"kih-latn-pg",kij:"kij-latn-zz",kil:"kil-latn-ng",kim:"kim-cyrl-ru",kio:"kio-latn-us",kip:"kip-deva-np",kiq:"kiq-latn-id",kis:"kis-latn-pg",kit:"kit-latn-pg",kiu:"kiu-latn-tr",kiv:"kiv-latn-tz",kiw:"kiw-latn-zz",kix:"kix-latn-in",kiy:"kiy-latn-id",kiz:"kiz-latn-tz",kj:"kj-latn-na",kja:"kja-latn-id",kjb:"kjb-latn-gt",kjc:"kjc-latn-id",kjd:"kjd-latn-zz",kje:"kje-latn-id",kjg:"kjg-laoo-la",kjh:"kjh-cyrl-ru",kji:"kji-latn-sb",kjj:"kjj-latn-az",kjk:"kjk-latn-id",kjl:"kjl-deva-np",kjm:"kjm-latn-vn",kjn:"kjn-latn-au",kjo:"kjo-deva-in",kjp:"kjp-mymr-mm","kjp-thai":"kjp-thai-th",kjq:"kjq-latn-us",kjr:"kjr-latn-id",kjs:"kjs-latn-zz",kjt:"kjt-thai-th",kju:"kju-latn-us",kjx:"kjx-latn-pg",kjy:"kjy-latn-zz",kk:"kk-cyrl-kz","kk-af":"kk-arab-af","kk-arab":"kk-arab-cn","kk-cn":"kk-arab-cn","kk-ir":"kk-arab-ir","kk-mn":"kk-arab-mn",kka:"kka-latn-ng",kkb:"kkb-latn-id",kkc:"kkc-latn-zz",kkd:"kkd-latn-ng",kke:"kke-latn-gn","kke-arab":"kke-arab-gn",kkf:"kkf-tibt-in",kkg:"kkg-latn-ph",kkh:"kkh-lana-mm",kki:"kki-latn-tz",kkj:"kkj-latn-cm",kkk:"kkk-latn-sb",kkl:"kkl-latn-id",kkm:"kkm-latn-ng",kko:"kko-latn-sd",kkp:"kkp-latn-au",kkq:"kkq-latn-cd",kkr:"kkr-latn-ng",kks:"kks-latn-ng",kkt:"kkt-deva-np",kku:"kku-latn-ng",kkv:"kkv-latn-id",kkw:"kkw-latn-cg",kkx:"kkx-latn-id",kky:"kky-latn-au",kkz:"kkz-latn-ca",kl:"kl-latn-gl",kla:"kla-latn-us",klb:"klb-latn-mx",klc:"klc-latn-cm",kld:"kld-latn-au",kle:"kle-deva-np",klf:"klf-latn-td",klg:"klg-latn-ph",klh:"klh-latn-pg",kli:"kli-latn-id",klj:"klj-arab-ir",klk:"klk-latn-ng",kll:"kll-latn-ph",klm:"klm-latn-pg",kln:"kln-latn-ke",klo:"klo-latn-ng",klp:"klp-latn-pg",klq:"klq-latn-zz",klr:"klr-deva-np",kls:"kls-latn-pk","kls-arab":"kls-arab-pk",klt:"klt-latn-zz",klu:"klu-latn-lr",klv:"klv-latn-vu",klw:"klw-latn-id",klx:"klx-latn-zz",kly:"kly-latn-id",klz:"klz-latn-id",km:"km-khmr-kh",kma:"kma-latn-gh",kmb:"kmb-latn-ao",kmc:"kmc-latn-cn","kmc-hani":"kmc-hani-cn",kmd:"kmd-latn-ph",kme:"kme-latn-cm",kmf:"kmf-latn-pg",kmg:"kmg-latn-pg",kmh:"kmh-latn-zz",kmi:"kmi-latn-ng",kmj:"kmj-deva-in",kmk:"kmk-latn-ph",kml:"kml-latn-ph",kmm:"kmm-latn-in",kmn:"kmn-latn-pg",kmo:"kmo-latn-zz",kmp:"kmp-latn-cm",kmq:"kmq-latn-et",kms:"kms-latn-zz",kmt:"kmt-latn-id",kmu:"kmu-latn-zz",kmv:"kmv-latn-br",kmw:"kmw-latn-zz",kmx:"kmx-latn-pg",kmy:"kmy-latn-ng",kmz:"kmz-arab-ir",kn:"kn-knda-in",kna:"kna-latn-ng",knb:"knb-latn-ph",knd:"knd-latn-id",kne:"kne-latn-ph",knf:"knf-latn-gw",kni:"kni-latn-ng",knj:"knj-latn-gt",knk:"knk-latn-sl","knk-arab":"knk-arab-sl",knl:"knl-latn-id",knm:"knm-latn-br",kno:"kno-latn-sl",knp:"knp-latn-zz",knq:"knq-latn-my",knr:"knr-latn-pg",kns:"kns-latn-my","kns-thai":"kns-thai-th",knt:"knt-latn-br",knu:"knu-latn-gn",knv:"knv-latn-pg",knw:"knw-latn-na",knx:"knx-latn-id",kny:"kny-latn-cd",knz:"knz-latn-bf",ko:"ko-kore-kr",koa:"koa-latn-pg",koc:"koc-latn-ng",kod:"kod-latn-id",koe:"koe-latn-ss",kof:"kof-latn-ng",kog:"kog-latn-co",koh:"koh-latn-cg",koi:"koi-cyrl-ru",kok:"kok-deva-in",kol:"kol-latn-zz",koo:"koo-latn-ug",kop:"kop-latn-pg",koq:"koq-latn-ga",kos:"kos-latn-fm",kot:"kot-latn-cm",kou:"kou-latn-td",kov:"kov-latn-ng",kow:"kow-latn-ng",koy:"koy-latn-us",koz:"koz-latn-zz",kpa:"kpa-latn-ng",kpc:"kpc-latn-co",kpd:"kpd-latn-id",kpe:"kpe-latn-lr",kpf:"kpf-latn-zz",kpg:"kpg-latn-fm",kph:"kph-latn-gh",kpi:"kpi-latn-id",kpj:"kpj-latn-br",kpk:"kpk-latn-ng",kpl:"kpl-latn-cd",kpm:"kpm-latn-vn",kpn:"kpn-latn-br",kpo:"kpo-latn-zz",kpq:"kpq-latn-id",kpr:"kpr-latn-zz",kps:"kps-latn-id",kpt:"kpt-cyrl-ru",kpu:"kpu-latn-id",kpw:"kpw-latn-pg",kpx:"kpx-latn-zz",kpy:"kpy-cyrl-ru",kpz:"kpz-latn-ug",kqa:"kqa-latn-pg",kqb:"kqb-latn-zz",kqc:"kqc-latn-pg",kqd:"kqd-syrc-iq",kqe:"kqe-latn-ph",kqf:"kqf-latn-zz",kqg:"kqg-latn-bf",kqh:"kqh-latn-tz",kqi:"kqi-latn-pg",kqj:"kqj-latn-pg",kqk:"kqk-latn-bj",kql:"kql-latn-pg",kqm:"kqm-latn-ci",kqn:"kqn-latn-zm",kqo:"kqo-latn-lr",kqp:"kqp-latn-td",kqq:"kqq-latn-br",kqr:"kqr-latn-my",kqs:"kqs-latn-zz",kqt:"kqt-latn-my",kqu:"kqu-latn-za",kqv:"kqv-latn-id",kqw:"kqw-latn-pg",kqx:"kqx-latn-cm",kqy:"kqy-ethi-zz",kqz:"kqz-latn-za",kr:"kr-latn-zz",kra:"kra-deva-np",krb:"krb-latn-us",krc:"krc-cyrl-ru",krd:"krd-latn-tl",kre:"kre-latn-br",krf:"krf-latn-vu",krh:"krh-latn-ng",kri:"kri-latn-sl",krj:"krj-latn-ph",krk:"krk-cyrl-ru",krl:"krl-latn-ru",krn:"krn-latn-lr",krp:"krp-latn-ng",krr:"krr-khmr-kh",krs:"krs-latn-zz",krt:"krt-latn-ne",kru:"kru-deva-in",krv:"krv-khmr-kh",krw:"krw-latn-lr",krx:"krx-latn-sn",kry:"kry-latn-az",krz:"krz-latn-id",ks:"ks-arab-in",ksa:"ksa-latn-ng",ksb:"ksb-latn-tz",ksc:"ksc-latn-ph",ksd:"ksd-latn-zz",kse:"kse-latn-pg",ksf:"ksf-latn-cm",ksg:"ksg-latn-sb",ksh:"ksh-latn-de",ksi:"ksi-latn-pg",ksj:"ksj-latn-zz",ksk:"ksk-latn-us",ksl:"ksl-latn-pg",ksm:"ksm-latn-ng",ksn:"ksn-latn-ph",kso:"kso-latn-ng",ksp:"ksp-latn-cf",ksq:"ksq-latn-ng",ksr:"ksr-latn-zz",kss:"kss-latn-lr",kst:"kst-latn-bf",ksu:"ksu-mymr-in",ksv:"ksv-latn-cd",ksw:"ksw-mymr-mm","ksw-latn":"ksw-latn-mm",ksx:"ksx-latn-id",ksz:"ksz-deva-in",kta:"kta-latn-vn",ktb:"ktb-ethi-zz",ktc:"ktc-latn-ng",ktd:"ktd-latn-au",ktf:"ktf-latn-cd",ktg:"ktg-latn-au",kth:"kth-latn-td",kti:"kti-latn-id",ktj:"ktj-latn-ci",ktk:"ktk-latn-pg",ktl:"ktl-arab-ir",ktm:"ktm-latn-zz",ktn:"ktn-latn-br",kto:"kto-latn-zz",ktp:"ktp-plrd-cn",ktq:"ktq-latn-ph",ktr:"ktr-latn-my",kts:"kts-latn-id",ktt:"ktt-latn-id",ktu:"ktu-latn-cd",ktv:"ktv-latn-vn",ktw:"ktw-latn-us",ktx:"ktx-latn-br",kty:"kty-latn-cd",ktz:"ktz-latn-na",ku:"ku-latn-tr","ku-arab":"ku-arab-iq","ku-lb":"ku-arab-lb","ku-yezi":"ku-yezi-ge",kub:"kub-latn-zz",kuc:"kuc-latn-id",kud:"kud-latn-zz",kue:"kue-latn-zz",kuf:"kuf-laoo-la",kug:"kug-latn-ng",kuh:"kuh-latn-ng",kui:"kui-latn-br",kuj:"kuj-latn-zz",kuk:"kuk-latn-id",kul:"kul-latn-ng",kum:"kum-cyrl-ru",kun:"kun-latn-zz",kuo:"kuo-latn-pg",kup:"kup-latn-zz",kuq:"kuq-latn-br",kus:"kus-latn-zz",kut:"kut-latn-ca",kuu:"kuu-latn-us",kuv:"kuv-latn-id",kuw:"kuw-latn-cf",kux:"kux-latn-au",kuy:"kuy-latn-au",kuz:"kuz-latn-cl",kv:"kv-cyrl-ru",kva:"kva-cyrl-ru",kvb:"kvb-latn-id",kvc:"kvc-latn-pg",kvd:"kvd-latn-id",kve:"kve-latn-my",kvf:"kvf-latn-td",kvg:"kvg-latn-zz",kvh:"kvh-latn-id",kvi:"kvi-latn-td",kvj:"kvj-latn-cm",kvl:"kvl-latn-mm",kvm:"kvm-latn-cm",kvn:"kvn-latn-co",kvo:"kvo-latn-id",kvp:"kvp-latn-id",kvq:"kvq-mymr-mm","kvq-latn":"kvq-latn-mm",kvr:"kvr-latn-id",kvt:"kvt-mymr-mm",kvv:"kvv-latn-id",kvw:"kvw-latn-id",kvx:"kvx-arab-pk",kvy:"kvy-kali-mm",kvz:"kvz-latn-id",kw:"kw-latn-gb",kwa:"kwa-latn-br",kwb:"kwb-latn-ng",kwc:"kwc-latn-cg",kwd:"kwd-latn-sb",kwe:"kwe-latn-id",kwf:"kwf-latn-sb",kwg:"kwg-latn-td",kwh:"kwh-latn-id",kwi:"kwi-latn-co",kwj:"kwj-latn-zz",kwk:"kwk-latn-ca",kwl:"kwl-latn-ng",kwm:"kwm-latn-na",kwn:"kwn-latn-na",kwo:"kwo-latn-zz",kwp:"kwp-latn-ci",kwq:"kwq-latn-zz",kwr:"kwr-latn-id",kws:"kws-latn-cd",kwt:"kwt-latn-id",kwu:"kwu-latn-cm",kwv:"kwv-latn-td",kww:"kww-latn-sr",kwy:"kwy-latn-cd",kwz:"kwz-latn-ao",kxa:"kxa-latn-zz",kxb:"kxb-latn-ci",kxc:"kxc-ethi-zz",kxd:"kxd-latn-bn","kxd-arab":"kxd-arab-bn",kxe:"kxe-latn-zz",kxf:"kxf-mymr-mm","kxf-latn":"kxf-latn-mm",kxi:"kxi-latn-my",kxj:"kxj-latn-td",kxk:"kxk-mymr-mm",kxl:"kxl-deva-in",kxm:"kxm-thai-th",kxn:"kxn-latn-my",kxo:"kxo-latn-br",kxp:"kxp-arab-pk",kxq:"kxq-latn-id",kxr:"kxr-latn-pg",kxt:"kxt-latn-pg",kxv:"kxv-orya-in","kxv-latn":"kxv-latn-in","kxv-telu":"kxv-telu-in",kxw:"kxw-latn-zz",kxx:"kxx-latn-cg",kxy:"kxy-latn-vn",kxz:"kxz-latn-zz",ky:"ky-cyrl-kg","ky-arab":"ky-arab-cn","ky-cn":"ky-arab-cn","ky-latn":"ky-latn-tr","ky-tr":"ky-latn-tr",kya:"kya-latn-tz",kyb:"kyb-latn-ph",kyc:"kyc-latn-pg",kyd:"kyd-latn-id",kye:"kye-latn-zz",kyf:"kyf-latn-ci",kyg:"kyg-latn-pg",kyh:"kyh-latn-us",kyi:"kyi-latn-my",kyj:"kyj-latn-ph",kyk:"kyk-latn-ph",kyl:"kyl-latn-us",kym:"kym-latn-cf",kyn:"kyn-latn-ph",kyo:"kyo-latn-id",kyq:"kyq-latn-td",kyr:"kyr-latn-br",kys:"kys-latn-my",kyt:"kyt-latn-id",kyu:"kyu-kali-mm","kyu-latn":"kyu-latn-mm","kyu-mymr":"kyu-mymr-mm",kyv:"kyv-deva-np",kyw:"kyw-deva-in","kyw-beng":"kyw-beng-in","kyw-orya":"kyw-orya-in",kyx:"kyx-latn-zz",kyy:"kyy-latn-pg",kyz:"kyz-latn-br",kza:"kza-latn-bf",kzb:"kzb-latn-id",kzc:"kzc-latn-ci",kzd:"kzd-latn-id",kze:"kze-latn-pg",kzf:"kzf-latn-id",kzh:"kzh-arab-zz",kzi:"kzi-latn-my",kzj:"kzj-latn-my",kzk:"kzk-latn-sb",kzl:"kzl-latn-id",kzm:"kzm-latn-id",kzn:"kzn-latn-mw",kzo:"kzo-latn-ga",kzp:"kzp-latn-id",kzr:"kzr-latn-zz",kzs:"kzs-latn-my",kzt:"kzt-latn-my",kzu:"kzu-latn-id",kzv:"kzv-latn-id",kzw:"kzw-latn-br",kzx:"kzx-latn-id",kzy:"kzy-latn-cd",kzz:"kzz-latn-id",la:"la-latn-va",laa:"laa-latn-ph",lab:"lab-lina-gr",lac:"lac-latn-mx",lad:"lad-hebr-il",lae:"lae-deva-in","lae-tibt":"lae-tibt-in",lag:"lag-latn-tz",lah:"lah-arab-pk",lai:"lai-latn-mw",laj:"laj-latn-ug",lal:"lal-latn-cd",lam:"lam-latn-zm",lan:"lan-latn-ng",lap:"lap-latn-td",laq:"laq-latn-vn",lar:"lar-latn-gh",las:"las-latn-zz",lau:"lau-latn-id",law:"law-latn-id",lax:"lax-latn-in","lax-beng":"lax-beng-in",laz:"laz-latn-pg",lb:"lb-latn-lu",lbb:"lbb-latn-pg",lbc:"lbc-lisu-cn",lbe:"lbe-cyrl-ru",lbf:"lbf-deva-in","lbf-tibt":"lbf-tibt-cn",lbi:"lbi-latn-cm",lbj:"lbj-tibt-in","lbj-arab":"lbj-arab-in",lbl:"lbl-latn-ph",lbm:"lbm-deva-in",lbn:"lbn-latn-la","lbn-laoo":"lbn-laoo-la",lbo:"lbo-laoo-la","lbo-latn":"lbo-latn-us",lbq:"lbq-latn-pg",lbr:"lbr-deva-np",lbt:"lbt-latn-vn",lbu:"lbu-latn-zz",lbv:"lbv-latn-pg",lbw:"lbw-latn-id",lbx:"lbx-latn-id",lby:"lby-latn-au",lbz:"lbz-latn-au",lcc:"lcc-latn-id",lcd:"lcd-latn-id",lce:"lce-latn-id",lcf:"lcf-latn-id",lch:"lch-latn-ao",lcl:"lcl-latn-id",lcm:"lcm-latn-zz",lcp:"lcp-thai-cn",lcq:"lcq-latn-id",lcs:"lcs-latn-id",lda:"lda-latn-ci",ldb:"ldb-latn-zz",ldd:"ldd-latn-ng",ldg:"ldg-latn-ng",ldh:"ldh-latn-ng",ldi:"ldi-latn-cg",ldj:"ldj-latn-ng",ldk:"ldk-latn-ng",ldl:"ldl-latn-ng",ldm:"ldm-latn-gn",ldn:"ldn-latn-001",ldo:"ldo-latn-ng",ldp:"ldp-latn-ng",ldq:"ldq-latn-ng",lea:"lea-latn-cd",leb:"leb-latn-zm",lec:"lec-latn-bo",led:"led-latn-zz",lee:"lee-latn-zz",lef:"lef-latn-gh",leh:"leh-latn-zm",lei:"lei-latn-pg",lej:"lej-latn-cd",lek:"lek-latn-pg",lel:"lel-latn-cd",lem:"lem-latn-zz",len:"len-latn-hn",leo:"leo-latn-cm",lep:"lep-lepc-in",leq:"leq-latn-zz",ler:"ler-latn-pg",les:"les-latn-cd",let:"let-latn-pg",leu:"leu-latn-zz",lev:"lev-latn-id",lew:"lew-latn-id",lex:"lex-latn-id",ley:"ley-latn-id",lez:"lez-cyrl-ru",lfa:"lfa-latn-cm",lfn:"lfn-latn-001","lfn-cyrl":"lfn-cyrl-001",lg:"lg-latn-ug",lga:"lga-latn-sb",lgb:"lgb-latn-sb",lgg:"lgg-latn-zz",lgh:"lgh-latn-vn",lgi:"lgi-latn-id",lgk:"lgk-latn-vu",lgl:"lgl-latn-sb",lgm:"lgm-latn-cd",lgn:"lgn-latn-et",lgo:"lgo-latn-ss",lgq:"lgq-latn-gh",lgr:"lgr-latn-sb",lgt:"lgt-latn-pg",lgu:"lgu-latn-sb",lgz:"lgz-latn-cd",lha:"lha-latn-vn",lhh:"lhh-latn-id",lhi:"lhi-latn-cn",lhm:"lhm-deva-np",lhn:"lhn-latn-my",lhs:"lhs-syrc-sy",lht:"lht-latn-vu",lhu:"lhu-latn-cn",li:"li-latn-nl",lia:"lia-latn-zz",lib:"lib-latn-pg",lic:"lic-latn-cn",lid:"lid-latn-zz",lie:"lie-latn-cd",lif:"lif-deva-np","lif-limb":"lif-limb-in",lig:"lig-latn-zz",lih:"lih-latn-zz",lij:"lij-latn-it",lik:"lik-latn-cd",lil:"lil-latn-ca",lio:"lio-latn-id",lip:"lip-latn-gh",liq:"liq-latn-et",lir:"lir-latn-lr",lis:"lis-lisu-cn",liu:"liu-latn-sd",liv:"liv-latn-lv",liw:"liw-latn-id",lix:"lix-latn-id",liy:"liy-latn-cf",liz:"liz-latn-cd",lja:"lja-latn-au",lje:"lje-latn-id",lji:"lji-latn-id",ljl:"ljl-latn-id",ljp:"ljp-latn-id",ljw:"ljw-latn-au",ljx:"ljx-latn-au",lka:"lka-latn-tl",lkb:"lkb-latn-ke",lkc:"lkc-latn-vn",lkd:"lkd-latn-br",lke:"lke-latn-ug",lkh:"lkh-tibt-bt",lki:"lki-arab-ir",lkj:"lkj-latn-my",lkl:"lkl-latn-pg",lkm:"lkm-latn-au",lkn:"lkn-latn-vu",lko:"lko-latn-ke",lkr:"lkr-latn-ss",lks:"lks-latn-ke",lkt:"lkt-latn-us",lku:"lku-latn-au",lky:"lky-latn-ss",lla:"lla-latn-ng",llb:"llb-latn-mz",llc:"llc-latn-gn",lld:"lld-latn-it",lle:"lle-latn-zz",llf:"llf-latn-pg",llg:"llg-latn-id",lli:"lli-latn-cg",llj:"llj-latn-au",llk:"llk-latn-my",lll:"lll-latn-pg",llm:"llm-latn-id",lln:"lln-latn-zz",llp:"llp-latn-vu",llq:"llq-latn-id",llu:"llu-latn-sb",llx:"llx-latn-fj",lma:"lma-latn-gn",lmb:"lmb-latn-vu",lmc:"lmc-latn-au",lmd:"lmd-latn-sd",lme:"lme-latn-td",lmf:"lmf-latn-id",lmg:"lmg-latn-pg",lmh:"lmh-deva-np",lmi:"lmi-latn-cd",lmj:"lmj-latn-id",lmk:"lmk-latn-in","lmk-mymr":"lmk-mymr-in",lml:"lml-latn-vu",lmn:"lmn-telu-in",lmo:"lmo-latn-it",lmp:"lmp-latn-zz",lmq:"lmq-latn-id",lmr:"lmr-latn-id",lmu:"lmu-latn-vu",lmv:"lmv-latn-fj",lmw:"lmw-latn-us",lmx:"lmx-latn-cm",lmy:"lmy-latn-id",ln:"ln-latn-cd",lna:"lna-latn-cf",lnb:"lnb-latn-na",lnd:"lnd-latn-id",lnh:"lnh-latn-my",lni:"lni-latn-pg",lnj:"lnj-latn-au",lnl:"lnl-latn-cf",lnm:"lnm-latn-pg",lnn:"lnn-latn-vu",lns:"lns-latn-zz",lnu:"lnu-latn-zz",lnw:"lnw-latn-au",lnz:"lnz-latn-cd",lo:"lo-laoo-la",loa:"loa-latn-id",lob:"lob-latn-bf",loc:"loc-latn-ph",loe:"loe-latn-id",log:"log-latn-cd",loh:"loh-latn-ss",loi:"loi-latn-ci",loj:"loj-latn-zz",lok:"lok-latn-zz",lol:"lol-latn-cd",lom:"lom-latn-lr",lon:"lon-latn-mw",loo:"loo-latn-cd",lop:"lop-latn-ng",loq:"loq-latn-cd",lor:"lor-latn-zz",los:"los-latn-zz",lot:"lot-latn-ss","lot-arab":"lot-arab-ss",lou:"lou-latn-us",low:"low-latn-my",lox:"lox-latn-id",loy:"loy-deva-np","loy-tibt":"loy-tibt-np",loz:"loz-latn-zm",lpa:"lpa-latn-vu",lpe:"lpe-latn-id",lpn:"lpn-latn-mm",lpo:"lpo-plrd-cn","lpo-lisu":"lpo-lisu-cn",lpx:"lpx-latn-ss",lqr:"lqr-latn-ss",lra:"lra-latn-my",lrc:"lrc-arab-ir",lrg:"lrg-latn-au",lri:"lri-latn-ke",lrk:"lrk-arab-pk",lrl:"lrl-arab-ir",lrm:"lrm-latn-ke",lrn:"lrn-latn-id",lro:"lro-latn-sd",lrt:"lrt-latn-id",lrv:"lrv-latn-vu",lrz:"lrz-latn-vu",lsa:"lsa-arab-ir",lsd:"lsd-hebr-il",lse:"lse-latn-cd",lsi:"lsi-latn-mm",lsm:"lsm-latn-ug",lsr:"lsr-latn-pg",lss:"lss-arab-pk",lt:"lt-latn-lt",ltg:"ltg-latn-lv",lth:"lth-latn-ug",lti:"lti-latn-id",ltn:"ltn-latn-br",lto:"lto-latn-ke",lts:"lts-latn-ke",ltu:"ltu-latn-id",lu:"lu-latn-cd",lua:"lua-latn-cd",luc:"luc-latn-ug",lud:"lud-latn-ru",lue:"lue-latn-zm",luf:"luf-latn-pg",lui:"lui-latn-us",luj:"luj-latn-cd",luk:"luk-tibt-bt",lul:"lul-latn-ss",lum:"lum-latn-ao",lun:"lun-latn-zm",luo:"luo-latn-ke",lup:"lup-latn-ga",luq:"luq-latn-cu",lur:"lur-latn-id",lus:"lus-latn-in","lus-beng":"lus-beng-bd","lus-brai":"lus-brai-in",lut:"lut-latn-us",luu:"luu-deva-np",luv:"luv-arab-om",luw:"luw-latn-cm",luy:"luy-latn-ke",luz:"luz-arab-ir",lv:"lv-latn-lv",lva:"lva-latn-tl",lvi:"lvi-latn-la",lvk:"lvk-latn-sb",lvu:"lvu-latn-id",lwa:"lwa-latn-cd",lwe:"lwe-latn-id",lwg:"lwg-latn-ke",lwh:"lwh-latn-vn",lwl:"lwl-thai-th",lwm:"lwm-thai-cn",lwo:"lwo-latn-ss","lwo-za":"lwo-latn-za",lwt:"lwt-latn-id",lww:"lww-latn-vu",lxm:"lxm-latn-pg",lya:"lya-tibt-bt",lyn:"lyn-latn-zm",lzh:"lzh-hans-cn",lzl:"lzl-latn-vu",lzn:"lzn-latn-mm",lzz:"lzz-latn-tr",maa:"maa-latn-mx",mab:"mab-latn-mx",mad:"mad-latn-id",mae:"mae-latn-ng",maf:"maf-latn-cm",mag:"mag-deva-in",mai:"mai-deva-in",maj:"maj-latn-mx",mak:"mak-latn-id",mam:"mam-latn-gt",man:"man-latn-gm","man-gn":"man-nkoo-gn","man-nkoo":"man-nkoo-gn",maq:"maq-latn-mx",mas:"mas-latn-ke",mat:"mat-latn-mx",mau:"mau-latn-mx",mav:"mav-latn-br",maw:"maw-latn-zz",max:"max-latn-id",maz:"maz-latn-mx",mba:"mba-latn-ph",mbb:"mbb-latn-ph",mbc:"mbc-latn-br",mbd:"mbd-latn-ph",mbf:"mbf-latn-sg",mbh:"mbh-latn-zz",mbi:"mbi-latn-ph",mbj:"mbj-latn-br",mbk:"mbk-latn-pg",mbl:"mbl-latn-br",mbm:"mbm-latn-cg",mbn:"mbn-latn-co",mbo:"mbo-latn-zz",mbp:"mbp-latn-co",mbq:"mbq-latn-zz",mbr:"mbr-latn-co",mbs:"mbs-latn-ph",mbt:"mbt-latn-ph",mbu:"mbu-latn-zz",mbv:"mbv-latn-gn",mbw:"mbw-latn-zz",mbx:"mbx-latn-pg",mby:"mby-arab-pk",mbz:"mbz-latn-mx",mca:"mca-latn-py",mcb:"mcb-latn-pe",mcc:"mcc-latn-pg",mcd:"mcd-latn-pe",mce:"mce-latn-mx",mcf:"mcf-latn-pe",mcg:"mcg-latn-ve",mch:"mch-latn-ve",mci:"mci-latn-zz",mcj:"mcj-latn-ng",mck:"mck-latn-ao",mcl:"mcl-latn-co",mcm:"mcm-latn-my",mcn:"mcn-latn-td",mco:"mco-latn-mx",mcp:"mcp-latn-zz",mcq:"mcq-latn-zz",mcr:"mcr-latn-zz",mcs:"mcs-latn-cm",mct:"mct-latn-cm",mcu:"mcu-latn-zz",mcv:"mcv-latn-pg",mcw:"mcw-latn-td",mcx:"mcx-latn-cf",mcy:"mcy-latn-pg",mcz:"mcz-latn-pg",mda:"mda-latn-zz",mdb:"mdb-latn-pg",mdc:"mdc-latn-pg",mdd:"mdd-latn-cm",mde:"mde-arab-zz",mdf:"mdf-cyrl-ru",mdg:"mdg-latn-td",mdh:"mdh-latn-ph",mdi:"mdi-latn-cd",mdj:"mdj-latn-zz",mdk:"mdk-latn-cd",mdm:"mdm-latn-cd",mdn:"mdn-latn-cf",mdp:"mdp-latn-cd",mdq:"mdq-latn-cd",mdr:"mdr-latn-id",mds:"mds-latn-pg",mdt:"mdt-latn-cg",mdu:"mdu-latn-cg",mdv:"mdv-latn-mx",mdw:"mdw-latn-cg",mdx:"mdx-ethi-zz",mdy:"mdy-ethi-et","mdy-latn":"mdy-latn-et",mdz:"mdz-latn-br",mea:"mea-latn-cm",meb:"meb-latn-pg",mec:"mec-latn-au",med:"med-latn-zz",mee:"mee-latn-zz",meh:"meh-latn-mx",mej:"mej-latn-id",mek:"mek-latn-zz",mel:"mel-latn-my",mem:"mem-latn-au",men:"men-latn-sl",meo:"meo-latn-my","meo-arab":"meo-arab-my",mep:"mep-latn-au",meq:"meq-latn-cm",mer:"mer-latn-ke",mes:"mes-latn-td",met:"met-latn-zz",meu:"meu-latn-zz",mev:"mev-latn-lr",mew:"mew-latn-ng",mey:"mey-latn-mr","mey-arab":"mey-arab-mr",mez:"mez-latn-us",mfa:"mfa-arab-th",mfb:"mfb-latn-id",mfc:"mfc-latn-cd",mfd:"mfd-latn-cm",mfe:"mfe-latn-mu",mff:"mff-latn-cm",mfg:"mfg-latn-gn","mfg-arab":"mfg-arab-gn",mfh:"mfh-latn-cm",mfi:"mfi-arab-cm","mfi-latn":"mfi-latn-cm",mfj:"mfj-latn-cm",mfk:"mfk-latn-cm",mfl:"mfl-latn-ng",mfm:"mfm-latn-ng",mfn:"mfn-latn-zz",mfo:"mfo-latn-zz",mfp:"mfp-latn-id",mfq:"mfq-latn-zz",mfr:"mfr-latn-au",mft:"mft-latn-pg",mfu:"mfu-latn-ao",mfv:"mfv-latn-gw",mfw:"mfw-latn-pg",mfx:"mfx-latn-et","mfx-ethi":"mfx-ethi-et",mfy:"mfy-latn-mx",mfz:"mfz-latn-ss",mg:"mg-latn-mg",mgb:"mgb-latn-td",mgc:"mgc-latn-ss",mgd:"mgd-latn-ss","mgd-arab":"mgd-arab-ss",mge:"mge-latn-td",mgf:"mgf-latn-id",mgg:"mgg-latn-cm",mgh:"mgh-latn-mz",mgi:"mgi-latn-ng",mgj:"mgj-latn-ng",mgk:"mgk-latn-id",mgl:"mgl-latn-zz",mgm:"mgm-latn-tl",mgn:"mgn-latn-cf",mgo:"mgo-latn-cm",mgp:"mgp-deva-np",mgq:"mgq-latn-tz",mgr:"mgr-latn-zm",mgs:"mgs-latn-tz",mgt:"mgt-latn-pg",mgu:"mgu-latn-pg",mgv:"mgv-latn-tz",mgw:"mgw-latn-tz",mgy:"mgy-latn-tz",mgz:"mgz-latn-tz",mh:"mh-latn-mh",mhb:"mhb-latn-ga",mhc:"mhc-latn-mx",mhd:"mhd-latn-tz",mhe:"mhe-latn-my",mhf:"mhf-latn-pg",mhg:"mhg-latn-au",mhi:"mhi-latn-zz",mhj:"mhj-arab-af",mhk:"mhk-latn-cm",mhl:"mhl-latn-zz",mhm:"mhm-latn-mz",mhn:"mhn-latn-it",mho:"mho-latn-zm",mhp:"mhp-latn-id",mhq:"mhq-latn-us",mhs:"mhs-latn-id",mht:"mht-latn-ve",mhu:"mhu-latn-in",mhw:"mhw-latn-bw",mhx:"mhx-latn-mm",mhy:"mhy-latn-id",mhz:"mhz-latn-id",mi:"mi-latn-nz",mia:"mia-latn-us",mib:"mib-latn-mx",mic:"mic-latn-ca",mid:"mid-mand-iq",mie:"mie-latn-mx",mif:"mif-latn-zz",mig:"mig-latn-mx",mih:"mih-latn-mx",mii:"mii-latn-mx",mij:"mij-latn-cm",mik:"mik-latn-us",mil:"mil-latn-mx",mim:"mim-latn-mx",min:"min-latn-id",mio:"mio-latn-mx",mip:"mip-latn-mx",miq:"miq-latn-ni",mir:"mir-latn-mx",mit:"mit-latn-mx",miu:"miu-latn-mx",miw:"miw-latn-zz",mix:"mix-latn-mx",miy:"miy-latn-mx",miz:"miz-latn-mx",mjb:"mjb-latn-tl",mjc:"mjc-latn-mx",mjd:"mjd-latn-us",mje:"mje-latn-td",mjg:"mjg-latn-cn",mjh:"mjh-latn-tz",mji:"mji-latn-cn",mjj:"mjj-latn-pg",mjk:"mjk-latn-pg",mjl:"mjl-deva-in","mjl-takr":"mjl-takr-in",mjm:"mjm-latn-pg",mjn:"mjn-latn-pg",mjq:"mjq-mlym-in",mjr:"mjr-mlym-in",mjs:"mjs-latn-ng",mjt:"mjt-deva-in","mjt-beng":"mjt-beng-bd",mju:"mju-telu-in",mjv:"mjv-mlym-in",mjw:"mjw-latn-in",mjx:"mjx-latn-bd","mjx-beng":"mjx-beng-bd",mjy:"mjy-latn-us",mjz:"mjz-deva-np",mk:"mk-cyrl-mk",mka:"mka-latn-ci",mkb:"mkb-deva-in",mkc:"mkc-latn-pg",mke:"mke-deva-in",mkf:"mkf-latn-ng",mki:"mki-arab-zz",mkj:"mkj-latn-fm",mkk:"mkk-latn-cm",mkl:"mkl-latn-zz",mkm:"mkm-thai-th",mkn:"mkn-latn-id",mko:"mko-latn-ng",mkp:"mkp-latn-zz",mkr:"mkr-latn-pg",mks:"mks-latn-mx",mkt:"mkt-latn-nc",mku:"mku-latn-gn",mkv:"mkv-latn-vu",mkw:"mkw-latn-zz",mkx:"mkx-latn-ph",mky:"mky-latn-id",mkz:"mkz-latn-tl",ml:"ml-mlym-in",mla:"mla-latn-vu",mlb:"mlb-latn-cm",mlc:"mlc-latn-vn",mle:"mle-latn-zz",mlf:"mlf-thai-la","mlf-latn":"mlf-latn-la",mlh:"mlh-latn-pg",mli:"mli-latn-id",mlj:"mlj-latn-td",mlk:"mlk-latn-ke",mll:"mll-latn-vu",mln:"mln-latn-sb",mlo:"mlo-latn-sn",mlp:"mlp-latn-zz",mlq:"mlq-latn-sn","mlq-arab":"mlq-arab-sn",mlr:"mlr-latn-cm",mls:"mls-latn-sd",mlu:"mlu-latn-sb",mlv:"mlv-latn-vu",mlw:"mlw-latn-cm",mlx:"mlx-latn-vu",mlz:"mlz-latn-ph",mma:"mma-latn-ng",mmb:"mmb-latn-id",mmc:"mmc-latn-mx",mmd:"mmd-latn-cn","mmd-hans":"mmd-hans-cn","mmd-hant":"mmd-hant-cn",mme:"mme-latn-vu",mmf:"mmf-latn-ng",mmg:"mmg-latn-vu",mmh:"mmh-latn-br",mmi:"mmi-latn-pg",mmm:"mmm-latn-vu",mmn:"mmn-latn-ph",mmo:"mmo-latn-zz",mmp:"mmp-latn-pg",mmq:"mmq-latn-pg",mmr:"mmr-latn-cn",mmt:"mmt-latn-pg",mmu:"mmu-latn-zz",mmv:"mmv-latn-br",mmw:"mmw-latn-vu",mmx:"mmx-latn-zz",mmy:"mmy-latn-td",mmz:"mmz-latn-cd",mn:"mn-cyrl-mn","mn-cn":"mn-mong-cn","mn-mong":"mn-mong-cn",mna:"mna-latn-zz",mnb:"mnb-latn-id",mnd:"mnd-latn-br",mne:"mne-latn-td",mnf:"mnf-latn-zz",mng:"mng-latn-vn",mnh:"mnh-latn-cd",mni:"mni-beng-in",mnj:"mnj-arab-af",mnl:"mnl-latn-vu",mnm:"mnm-latn-pg",mnn:"mnn-latn-vn",mnp:"mnp-latn-cn",mnq:"mnq-latn-my",mnr:"mnr-latn-us",mns:"mns-cyrl-ru",mnu:"mnu-latn-id",mnv:"mnv-latn-sb",mnw:"mnw-mymr-mm",mnx:"mnx-latn-id",mny:"mny-latn-mz",mnz:"mnz-latn-id",mo:"mo-latn-ro",moa:"moa-latn-zz",moc:"moc-latn-ar",mod:"mod-latn-us",moe:"moe-latn-ca",mog:"mog-latn-id",moh:"moh-latn-ca",moi:"moi-latn-ng",moj:"moj-latn-cg",mok:"mok-latn-id",mom:"mom-latn-ni",moo:"moo-latn-vn",mop:"mop-latn-bz",moq:"moq-latn-id",mor:"mor-latn-sd",mos:"mos-latn-bf",mot:"mot-latn-co",mou:"mou-latn-td",mov:"mov-latn-us",mow:"mow-latn-cg",mox:"mox-latn-zz",moy:"moy-latn-et","moy-ethi":"moy-ethi-et",moz:"moz-latn-td",mpa:"mpa-latn-tz",mpb:"mpb-latn-au",mpc:"mpc-latn-au",mpd:"mpd-latn-br",mpe:"mpe-latn-et","mpe-ethi":"mpe-ethi-et",mpg:"mpg-latn-td",mph:"mph-latn-au",mpi:"mpi-latn-cm",mpj:"mpj-latn-au",mpk:"mpk-latn-td",mpl:"mpl-latn-pg",mpm:"mpm-latn-mx",mpn:"mpn-latn-pg",mpo:"mpo-latn-pg",mpp:"mpp-latn-zz",mpq:"mpq-latn-br",mpr:"mpr-latn-sb",mps:"mps-latn-zz",mpt:"mpt-latn-zz",mpu:"mpu-latn-br",mpv:"mpv-latn-pg",mpw:"mpw-latn-br",mpx:"mpx-latn-zz",mpy:"mpy-latn-id",mpz:"mpz-thai-th",mqa:"mqa-latn-id",mqb:"mqb-latn-cm",mqc:"mqc-latn-id",mqe:"mqe-latn-pg",mqf:"mqf-latn-id",mqg:"mqg-latn-id",mqh:"mqh-latn-mx",mqi:"mqi-latn-id",mqj:"mqj-latn-id",mqk:"mqk-latn-ph",mql:"mql-latn-zz",mqm:"mqm-latn-pf",mqn:"mqn-latn-id",mqo:"mqo-latn-id",mqp:"mqp-latn-id",mqq:"mqq-latn-my",mqr:"mqr-latn-id",mqs:"mqs-latn-id",mqu:"mqu-latn-ss",mqv:"mqv-latn-pg",mqw:"mqw-latn-pg",mqx:"mqx-latn-id","mqx-bugi":"mqx-bugi-id",mqy:"mqy-latn-id",mqz:"mqz-latn-pg",mr:"mr-deva-in",mra:"mra-thai-th",mrb:"mrb-latn-vu",mrc:"mrc-latn-us",mrd:"mrd-deva-np",mrf:"mrf-latn-id",mrg:"mrg-latn-in","mrg-beng":"mrg-beng-in","mrg-deva":"mrg-deva-in",mrh:"mrh-latn-in",mrj:"mrj-cyrl-ru",mrk:"mrk-latn-nc",mrl:"mrl-latn-fm",mrm:"mrm-latn-vu",mrn:"mrn-latn-sb",mro:"mro-mroo-bd",mrp:"mrp-latn-vu",mrq:"mrq-latn-pf",mrr:"mrr-deva-in",mrs:"mrs-latn-vu",mrt:"mrt-latn-ng",mru:"mru-latn-cm",mrv:"mrv-latn-pf",mrw:"mrw-latn-ph","mrw-arab":"mrw-arab-ph",mrx:"mrx-latn-id",mry:"mry-latn-ph",mrz:"mrz-latn-id",ms:"ms-latn-my","ms-cc":"ms-arab-cc",msb:"msb-latn-ph",msc:"msc-latn-gn",mse:"mse-latn-td",msf:"msf-latn-id",msg:"msg-latn-id",msh:"msh-latn-mg",msi:"msi-latn-my",msj:"msj-latn-cd",msk:"msk-latn-ph",msl:"msl-latn-id",msm:"msm-latn-ph",msn:"msn-latn-vu",mso:"mso-latn-id",msp:"msp-latn-br",msq:"msq-latn-nc",mss:"mss-latn-id",msu:"msu-latn-pg",msv:"msv-latn-cm",msw:"msw-latn-gw",msx:"msx-latn-pg",msy:"msy-latn-pg",msz:"msz-latn-pg",mt:"mt-latn-mt",mta:"mta-latn-ph",mtb:"mtb-latn-ci",mtc:"mtc-latn-zz",mtd:"mtd-latn-id",mte:"mte-latn-sb",mtf:"mtf-latn-zz",mtg:"mtg-latn-id",mth:"mth-latn-id",mti:"mti-latn-zz",mtj:"mtj-latn-id",mtk:"mtk-latn-cm",mtl:"mtl-latn-ng",mtm:"mtm-cyrl-ru",mtn:"mtn-latn-ni",mto:"mto-latn-mx",mtp:"mtp-latn-bo",mtq:"mtq-latn-vn",mtr:"mtr-deva-in",mts:"mts-latn-pe",mtt:"mtt-latn-vu",mtu:"mtu-latn-mx",mtv:"mtv-latn-pg",mtw:"mtw-latn-ph",mtx:"mtx-latn-mx",mty:"mty-latn-pg",mua:"mua-latn-cm",mub:"mub-latn-td",muc:"muc-latn-cm",mud:"mud-cyrl-ru",mue:"mue-latn-ec",mug:"mug-latn-cm",muh:"muh-latn-ss",mui:"mui-latn-id",muj:"muj-latn-td",muk:"muk-tibt-np",mum:"mum-latn-pg",muo:"muo-latn-cm",muq:"muq-latn-cn",mur:"mur-latn-zz",mus:"mus-latn-us",mut:"mut-deva-in",muu:"muu-latn-ke",muv:"muv-taml-in",mux:"mux-latn-pg",muy:"muy-latn-cm",muz:"muz-ethi-et","muz-latn":"muz-latn-et",mva:"mva-latn-zz",mvd:"mvd-latn-id",mvf:"mvf-mong-cn","mvf-phag":"mvf-phag-cn",mvg:"mvg-latn-mx",mvh:"mvh-latn-td",mvk:"mvk-latn-pg",mvl:"mvl-latn-au",mvn:"mvn-latn-zz",mvo:"mvo-latn-sb",mvp:"mvp-latn-id",mvq:"mvq-latn-pg",mvr:"mvr-latn-id",mvs:"mvs-latn-id",mvt:"mvt-latn-vu",mvu:"mvu-latn-td",mvv:"mvv-latn-my",mvw:"mvw-latn-tz",mvx:"mvx-latn-id",mvy:"mvy-arab-pk",mvz:"mvz-ethi-et","mvz-arab":"mvz-arab-et",mwa:"mwa-latn-pg",mwb:"mwb-latn-pg",mwc:"mwc-latn-pg",mwe:"mwe-latn-tz",mwf:"mwf-latn-au",mwg:"mwg-latn-pg",mwh:"mwh-latn-pg",mwi:"mwi-latn-vu",mwk:"mwk-latn-ml",mwl:"mwl-latn-pt",mwm:"mwm-latn-td",mwn:"mwn-latn-zm",mwo:"mwo-latn-vu",mwp:"mwp-latn-au",mwq:"mwq-latn-mm",mwr:"mwr-deva-in",mws:"mws-latn-ke",mwt:"mwt-mymr-mm","mwt-thai":"mwt-thai-th",mwu:"mwu-latn-ss",mwv:"mwv-latn-id",mww:"mww-hmnp-us",mwz:"mwz-latn-cd",mxa:"mxa-latn-mx",mxb:"mxb-latn-mx",mxc:"mxc-latn-zw",mxd:"mxd-latn-id",mxe:"mxe-latn-vu",mxf:"mxf-latn-cm",mxg:"mxg-latn-ao",mxh:"mxh-latn-cd",mxi:"mxi-latn-es",mxj:"mxj-latn-in",mxk:"mxk-latn-pg",mxl:"mxl-latn-bj",mxm:"mxm-latn-zz",mxn:"mxn-latn-id",mxo:"mxo-latn-zm",mxp:"mxp-latn-mx",mxq:"mxq-latn-mx",mxr:"mxr-latn-my",mxs:"mxs-latn-mx",mxt:"mxt-latn-mx",mxu:"mxu-latn-cm",mxv:"mxv-latn-mx",mxw:"mxw-latn-pg",mxx:"mxx-latn-ci",mxy:"mxy-latn-mx",mxz:"mxz-latn-id",my:"my-mymr-mm",myb:"myb-latn-td",myc:"myc-latn-cd",mye:"mye-latn-ga",myf:"myf-latn-et",myg:"myg-latn-cm",myh:"myh-latn-us",myj:"myj-latn-ss",myk:"myk-latn-zz",myl:"myl-latn-id",mym:"mym-ethi-zz",myp:"myp-latn-br",myr:"myr-latn-pe",myu:"myu-latn-br",myv:"myv-cyrl-ru",myw:"myw-latn-zz",myx:"myx-latn-ug",myy:"myy-latn-co",myz:"myz-mand-ir",mza:"mza-latn-mx",mzd:"mzd-latn-cm",mze:"mze-latn-pg",mzh:"mzh-latn-ar",mzi:"mzi-latn-mx",mzj:"mzj-latn-lr",mzk:"mzk-latn-zz",mzl:"mzl-latn-mx",mzm:"mzm-latn-zz",mzn:"mzn-arab-ir",mzo:"mzo-latn-br",mzp:"mzp-latn-zz",mzq:"mzq-latn-id",mzr:"mzr-latn-br",mzt:"mzt-latn-my",mzu:"mzu-latn-pg",mzv:"mzv-latn-cf",mzw:"mzw-latn-zz",mzx:"mzx-latn-gy",mzz:"mzz-latn-zz",na:"na-latn-nr",naa:"naa-latn-id",nab:"nab-latn-br",nac:"nac-latn-zz",nae:"nae-latn-id",naf:"naf-latn-zz",nag:"nag-latn-in",naj:"naj-latn-gn",nak:"nak-latn-zz",nal:"nal-latn-pg",nam:"nam-latn-au",nan:"nan-hans-cn",nao:"nao-deva-np",nap:"nap-latn-it",naq:"naq-latn-na",nar:"nar-latn-ng",nas:"nas-latn-zz",nat:"nat-latn-ng",naw:"naw-latn-gh",nax:"nax-latn-pg",nay:"nay-latn-au",naz:"naz-latn-mx",nb:"nb-latn-no",nba:"nba-latn-ao",nbb:"nbb-latn-ng",nbc:"nbc-latn-in",nbd:"nbd-latn-cd",nbe:"nbe-latn-in",nbh:"nbh-latn-ng",nbi:"nbi-latn-in",nbj:"nbj-latn-au",nbk:"nbk-latn-pg",nbm:"nbm-latn-cf",nbn:"nbn-latn-id",nbo:"nbo-latn-ng",nbp:"nbp-latn-ng",nbq:"nbq-latn-id",nbr:"nbr-latn-ng",nbt:"nbt-latn-in","nbt-deva":"nbt-deva-in",nbu:"nbu-latn-in",nbv:"nbv-latn-cm",nbw:"nbw-latn-cd",nby:"nby-latn-pg",nca:"nca-latn-zz",ncb:"ncb-latn-in","ncb-deva":"ncb-deva-in",ncc:"ncc-latn-pg",ncd:"ncd-deva-np",nce:"nce-latn-zz",ncf:"ncf-latn-zz",ncg:"ncg-latn-ca",nch:"nch-latn-mx",nci:"nci-latn-mx",ncj:"ncj-latn-mx",nck:"nck-latn-au",ncl:"ncl-latn-mx",ncm:"ncm-latn-pg",ncn:"ncn-latn-pg",nco:"nco-latn-zz",ncq:"ncq-laoo-la","ncq-thai":"ncq-thai-la",ncr:"ncr-latn-cm",nct:"nct-latn-in","nct-beng":"nct-beng-in",ncu:"ncu-latn-zz",ncx:"ncx-latn-mx",ncz:"ncz-latn-us",nd:"nd-latn-zw",nda:"nda-latn-cg",ndb:"ndb-latn-cm",ndc:"ndc-latn-mz",ndd:"ndd-latn-ng",ndf:"ndf-cyrl-ru",ndg:"ndg-latn-tz",ndh:"ndh-latn-tz",ndi:"ndi-latn-ng",ndj:"ndj-latn-tz",ndk:"ndk-latn-cd",ndl:"ndl-latn-cd",ndm:"ndm-latn-td",ndn:"ndn-latn-cg",ndp:"ndp-latn-ug",ndq:"ndq-latn-ao",ndr:"ndr-latn-ng",nds:"nds-latn-de",ndt:"ndt-latn-cd",ndu:"ndu-latn-cm",ndv:"ndv-latn-sn",ndw:"ndw-latn-cd",ndx:"ndx-latn-id",ndy:"ndy-latn-cf","ndy-td":"ndy-latn-td",ndz:"ndz-latn-ss",ne:"ne-deva-np",nea:"nea-latn-id",neb:"neb-latn-zz",nec:"nec-latn-id",ned:"ned-latn-ng",nee:"nee-latn-nc",neg:"neg-cyrl-ru",neh:"neh-tibt-bt",nei:"nei-xsux-tr",nej:"nej-latn-pg",nek:"nek-latn-nc",nem:"nem-latn-nc",nen:"nen-latn-nc",neo:"neo-latn-vn",neq:"neq-latn-mx",ner:"ner-latn-id",net:"net-latn-pg",neu:"neu-latn-001",new:"new-deva-np",nex:"nex-latn-zz",ney:"ney-latn-ci",nez:"nez-latn-us",nfa:"nfa-latn-id",nfd:"nfd-latn-ng",nfl:"nfl-latn-sb",nfr:"nfr-latn-zz",nfu:"nfu-latn-cm",ng:"ng-latn-na",nga:"nga-latn-zz",ngb:"ngb-latn-zz",ngc:"ngc-latn-cd",ngd:"ngd-latn-cf",nge:"nge-latn-cm",ngg:"ngg-latn-cf",ngh:"ngh-latn-za",ngi:"ngi-latn-ng",ngj:"ngj-latn-cm",ngk:"ngk-latn-au",ngl:"ngl-latn-mz",ngm:"ngm-latn-fm",ngn:"ngn-latn-cm",ngp:"ngp-latn-tz",ngq:"ngq-latn-tz",ngr:"ngr-latn-sb",ngs:"ngs-latn-ng",ngt:"ngt-laoo-la",ngu:"ngu-latn-mx",ngv:"ngv-latn-cm",ngw:"ngw-latn-ng",ngx:"ngx-latn-ng",ngy:"ngy-latn-cm",ngz:"ngz-latn-cg",nha:"nha-latn-au",nhb:"nhb-latn-zz",nhc:"nhc-latn-mx",nhd:"nhd-latn-py",nhe:"nhe-latn-mx",nhf:"nhf-latn-au",nhg:"nhg-latn-mx",nhi:"nhi-latn-mx",nhk:"nhk-latn-mx",nhm:"nhm-latn-mx",nhn:"nhn-latn-mx",nho:"nho-latn-pg",nhp:"nhp-latn-mx",nhq:"nhq-latn-mx",nhr:"nhr-latn-bw",nht:"nht-latn-mx",nhu:"nhu-latn-cm",nhv:"nhv-latn-mx",nhw:"nhw-latn-mx",nhx:"nhx-latn-mx",nhy:"nhy-latn-mx",nhz:"nhz-latn-mx",nia:"nia-latn-id",nib:"nib-latn-pg",nid:"nid-latn-au",nie:"nie-latn-td",nif:"nif-latn-zz",nig:"nig-latn-au",nih:"nih-latn-tz",nii:"nii-latn-zz",nij:"nij-latn-id",nil:"nil-latn-id",nim:"nim-latn-tz",nin:"nin-latn-zz",nio:"nio-cyrl-ru",niq:"niq-latn-ke",nir:"nir-latn-id",nis:"nis-latn-pg",nit:"nit-telu-in",niu:"niu-latn-nu",niv:"niv-cyrl-ru","niv-latn":"niv-latn-ru",niw:"niw-latn-pg",nix:"nix-latn-cd",niy:"niy-latn-zz",niz:"niz-latn-zz",nja:"nja-latn-ng",njb:"njb-latn-in",njd:"njd-latn-tz",njh:"njh-latn-in",nji:"nji-latn-au",njj:"njj-latn-cm",njl:"njl-latn-ss",njm:"njm-latn-in",njn:"njn-latn-in",njo:"njo-latn-in",njr:"njr-latn-ng",njs:"njs-latn-id",njt:"njt-latn-sr",nju:"nju-latn-au",njx:"njx-latn-cg",njy:"njy-latn-cm",njz:"njz-latn-in","njz-beng":"njz-beng-in",nka:"nka-latn-zm",nkb:"nkb-latn-in",nkc:"nkc-latn-cm",nkd:"nkd-latn-in",nke:"nke-latn-sb",nkf:"nkf-latn-in",nkg:"nkg-latn-zz",nkh:"nkh-latn-in",nki:"nki-latn-in","nki-beng":"nki-beng-in",nkj:"nkj-latn-id",nkk:"nkk-latn-vu",nkm:"nkm-latn-pg",nkn:"nkn-latn-ao",nko:"nko-latn-zz",nkq:"nkq-latn-gh",nkr:"nkr-latn-fm",nks:"nks-latn-id",nkt:"nkt-latn-tz",nku:"nku-latn-ci",nkv:"nkv-latn-mw",nkw:"nkw-latn-cd",nkx:"nkx-latn-ng",nkz:"nkz-latn-ng",nl:"nl-latn-nl",nla:"nla-latn-cm",nlc:"nlc-latn-id",nle:"nle-latn-ke",nlg:"nlg-latn-sb",nli:"nli-arab-af",nlj:"nlj-latn-cd",nlk:"nlk-latn-id",nlm:"nlm-arab-pk",nlo:"nlo-latn-cd",nlq:"nlq-latn-mm",nlu:"nlu-latn-gh",nlv:"nlv-latn-mx",nlw:"nlw-latn-au",nlx:"nlx-deva-in",nly:"nly-latn-au",nlz:"nlz-latn-sb",nma:"nma-latn-in",nmb:"nmb-latn-vu",nmc:"nmc-latn-td",nmd:"nmd-latn-ga",nme:"nme-latn-in",nmf:"nmf-latn-in",nmg:"nmg-latn-cm",nmh:"nmh-latn-in",nmi:"nmi-latn-ng",nmj:"nmj-latn-cf",nmk:"nmk-latn-vu",nml:"nml-latn-cm",nmm:"nmm-deva-np","nmm-tibt":"nmm-tibt-np",nmn:"nmn-latn-bw",nmo:"nmo-latn-in","nmo-beng":"nmo-beng-in",nmp:"nmp-latn-au",nmq:"nmq-latn-zw",nmr:"nmr-latn-cm",nms:"nms-latn-vu",nmt:"nmt-latn-fm",nmu:"nmu-latn-us",nmv:"nmv-latn-au",nmw:"nmw-latn-pg",nmx:"nmx-latn-pg",nmz:"nmz-latn-zz",nn:"nn-latn-no",nna:"nna-latn-au",nnb:"nnb-latn-cd",nnc:"nnc-latn-td",nnd:"nnd-latn-vu",nne:"nne-latn-ao",nnf:"nnf-latn-zz",nng:"nng-latn-in","nng-beng":"nng-beng-in",nnh:"nnh-latn-cm",nni:"nni-latn-id",nnj:"nnj-latn-et",nnk:"nnk-latn-zz",nnl:"nnl-latn-in",nnm:"nnm-latn-zz",nnn:"nnn-latn-td",nnp:"nnp-wcho-in",nnq:"nnq-latn-tz",nnr:"nnr-latn-au",nnt:"nnt-latn-us",nnu:"nnu-latn-gh",nnv:"nnv-latn-au",nnw:"nnw-latn-bf",nny:"nny-latn-au",nnz:"nnz-latn-cm",no:"no-latn-no",noa:"noa-latn-co",noc:"noc-latn-pg",nod:"nod-lana-th",noe:"noe-deva-in",nof:"nof-latn-pg",nog:"nog-cyrl-ru",noh:"noh-latn-pg",noi:"noi-deva-in",noj:"noj-latn-co",nok:"nok-latn-us",nom:"nom-latn-pe",non:"non-runr-se",nop:"nop-latn-zz",noq:"noq-latn-cd",nos:"nos-yiii-cn",not:"not-latn-pe",nou:"nou-latn-zz",nov:"nov-latn-001",now:"now-latn-tz",noy:"noy-latn-td",npb:"npb-tibt-bt",npg:"npg-latn-mm",nph:"nph-latn-in",npl:"npl-latn-mx",npn:"npn-latn-pg",npo:"npo-latn-in",nps:"nps-latn-id",npu:"npu-latn-in",npx:"npx-latn-sb",npy:"npy-latn-id",nqg:"nqg-latn-bj",nqk:"nqk-latn-bj",nql:"nql-latn-ao",nqm:"nqm-latn-id",nqn:"nqn-latn-pg",nqo:"nqo-nkoo-gn",nqq:"nqq-latn-mm",nqt:"nqt-latn-ng",nqy:"nqy-latn-mm",nr:"nr-latn-za",nra:"nra-latn-ga",nrb:"nrb-latn-zz",nre:"nre-latn-in",nrf:"nrf-latn-je",nrg:"nrg-latn-vu",nri:"nri-latn-in",nrk:"nrk-latn-au",nrl:"nrl-latn-au",nrm:"nrm-latn-my",nrp:"nrp-latn-it",nru:"nru-latn-cn","nru-hans":"nru-hans-cn","nru-hant":"nru-hant-cn",nrx:"nrx-latn-au",nrz:"nrz-latn-pg",nsa:"nsa-latn-in",nsb:"nsb-latn-za",nsc:"nsc-latn-ng",nsd:"nsd-yiii-cn",nse:"nse-latn-zm",nsf:"nsf-yiii-cn",nsg:"nsg-latn-tz",nsh:"nsh-latn-cm",nsk:"nsk-cans-ca",nsm:"nsm-latn-in",nsn:"nsn-latn-zz",nso:"nso-latn-za",nsq:"nsq-latn-us",nss:"nss-latn-zz",nst:"nst-tnsa-in",nsu:"nsu-latn-mx",nsv:"nsv-yiii-cn",nsw:"nsw-latn-vu",nsx:"nsx-latn-ao",nsy:"nsy-latn-id",nsz:"nsz-latn-us",ntd:"ntd-latn-my",nte:"nte-latn-mz",ntg:"ntg-latn-au",nti:"nti-latn-bf",ntj:"ntj-latn-au",ntk:"ntk-latn-tz",ntm:"ntm-latn-zz",nto:"nto-latn-cd",ntp:"ntp-latn-mx",ntr:"ntr-latn-zz",ntu:"ntu-latn-sb",ntx:"ntx-latn-mm",nty:"nty-yiii-vn",ntz:"ntz-arab-ir",nua:"nua-latn-nc",nuc:"nuc-latn-br",nud:"nud-latn-pg",nue:"nue-latn-cd",nuf:"nuf-latn-cn",nug:"nug-latn-au",nuh:"nuh-latn-ng",nui:"nui-latn-zz",nuj:"nuj-latn-ug",nuk:"nuk-latn-ca",num:"num-latn-to",nun:"nun-latn-mm",nuo:"nuo-latn-vn",nup:"nup-latn-zz",nuq:"nuq-latn-pg",nur:"nur-latn-pg",nus:"nus-latn-ss",nut:"nut-latn-vn",nuu:"nuu-latn-cd",nuv:"nuv-latn-zz",nuw:"nuw-latn-fm",nux:"nux-latn-zz",nuy:"nuy-latn-au",nuz:"nuz-latn-mx",nv:"nv-latn-us",nvh:"nvh-latn-vu",nvm:"nvm-latn-pg",nvo:"nvo-latn-cm",nwb:"nwb-latn-zz",nwc:"nwc-newa-np","nwc-brah":"nwc-brah-np","nwc-deva":"nwc-deva-np","nwc-sidd":"nwc-sidd-np",nwe:"nwe-latn-cm",nwg:"nwg-latn-au",nwi:"nwi-latn-vu",nwm:"nwm-latn-ss",nwo:"nwo-latn-au",nwr:"nwr-latn-pg",nww:"nww-latn-tz",nwx:"nwx-deva-np",nxa:"nxa-latn-tl",nxd:"nxd-latn-cd",nxe:"nxe-latn-id",nxg:"nxg-latn-id",nxi:"nxi-latn-tz",nxl:"nxl-latn-id",nxn:"nxn-latn-au",nxo:"nxo-latn-ga",nxq:"nxq-latn-cn",nxr:"nxr-latn-zz",nxx:"nxx-latn-id",ny:"ny-latn-mw",nyb:"nyb-latn-gh",nyc:"nyc-latn-cd",nyd:"nyd-latn-ke",nye:"nye-latn-ao",nyf:"nyf-latn-ke",nyg:"nyg-latn-cd",nyh:"nyh-latn-au",nyi:"nyi-latn-sd",nyj:"nyj-latn-cd",nyk:"nyk-latn-ao",nyl:"nyl-thai-th",nym:"nym-latn-tz",nyn:"nyn-latn-ug",nyo:"nyo-latn-ug",nyp:"nyp-latn-ug",nyq:"nyq-arab-ir",nyr:"nyr-latn-mw",nys:"nys-latn-au",nyt:"nyt-latn-au",nyu:"nyu-latn-mz",nyv:"nyv-latn-au",nyx:"nyx-latn-au",nyy:"nyy-latn-tz",nza:"nza-latn-cm",nzb:"nzb-latn-ga",nzd:"nzd-latn-cd",nzi:"nzi-latn-gh",nzk:"nzk-latn-cf",nzm:"nzm-latn-in",nzu:"nzu-latn-cg",nzy:"nzy-latn-td",nzz:"nzz-latn-ml",oaa:"oaa-cyrl-ru",oac:"oac-cyrl-ru",oar:"oar-syrc-sy",oav:"oav-geor-ge",obi:"obi-latn-us",obk:"obk-latn-ph",obl:"obl-latn-cm",obm:"obm-phnx-jo",obo:"obo-latn-ph",obr:"obr-mymr-mm",obt:"obt-latn-fr",obu:"obu-latn-ng",oc:"oc-latn-fr",oca:"oca-latn-pe",oco:"oco-latn-gb",ocu:"ocu-latn-mx",oda:"oda-latn-ng",odk:"odk-arab-pk",odt:"odt-latn-nl",odu:"odu-latn-ng",ofu:"ofu-latn-ng",ogb:"ogb-latn-ng",ogc:"ogc-latn-zz",ogg:"ogg-latn-ng",ogo:"ogo-latn-ng",ogu:"ogu-latn-ng",oht:"oht-xsux-tr",oia:"oia-latn-id",oie:"oie-latn-ss",oin:"oin-latn-pg",oj:"oj-cans-ca",ojb:"ojb-latn-ca","ojb-cans":"ojb-cans-ca",ojc:"ojc-latn-ca",ojs:"ojs-cans-ca",ojv:"ojv-latn-sb",ojw:"ojw-latn-ca","ojw-cans":"ojw-cans-ca",oka:"oka-latn-ca",okb:"okb-latn-ng",okc:"okc-latn-cd",okd:"okd-latn-ng",oke:"oke-latn-ng",okg:"okg-latn-au",oki:"oki-latn-ke",okk:"okk-latn-pg",okm:"okm-hang-kr",oko:"oko-hani-kr",okr:"okr-latn-zz",oks:"oks-latn-ng",oku:"oku-latn-cm",okv:"okv-latn-zz",okx:"okx-latn-ng",okz:"okz-khmr-kh",ola:"ola-deva-np","ola-tibt":"ola-tibt-cn",old:"old-latn-tz",ole:"ole-tibt-bt",olk:"olk-latn-au",olm:"olm-latn-ng",olo:"olo-latn-ru",olr:"olr-latn-vu",olt:"olt-latn-lt",olu:"olu-latn-ao",om:"om-latn-et",oma:"oma-latn-us",omb:"omb-latn-vu",omc:"omc-latn-pe",omg:"omg-latn-pe",omi:"omi-latn-cd",omk:"omk-cyrl-ru",oml:"oml-latn-cd",omo:"omo-latn-pg",omp:"omp-mtei-in",omr:"omr-modi-in",omt:"omt-latn-ke",omu:"omu-latn-pe",omw:"omw-latn-pg",ona:"ona-latn-ar",one:"one-latn-ca",ong:"ong-latn-zz",oni:"oni-latn-id",onj:"onj-latn-pg",onk:"onk-latn-pg",onn:"onn-latn-zz",ono:"ono-latn-ca",onp:"onp-latn-in","onp-deva":"onp-deva-in",onr:"onr-latn-pg",ons:"ons-latn-zz",ont:"ont-latn-pg",onu:"onu-latn-vu",onx:"onx-latn-id",ood:"ood-latn-us",oon:"oon-deva-in",oor:"oor-latn-za",opa:"opa-latn-ng",opk:"opk-latn-id",opm:"opm-latn-zz",opo:"opo-latn-pg",opt:"opt-latn-mx",opy:"opy-latn-br",or:"or-orya-in",ora:"ora-latn-sb",orc:"orc-latn-ke",ore:"ore-latn-pe",org:"org-latn-ng",orn:"orn-latn-my",oro:"oro-latn-zz",orr:"orr-latn-ng",ors:"ors-latn-my",ort:"ort-telu-in",oru:"oru-arab-zz",orv:"orv-cyrl-ru",orw:"orw-latn-br",orx:"orx-latn-ng",orz:"orz-latn-id",os:"os-cyrl-ge",osa:"osa-osge-us",osc:"osc-ital-it","osc-latn":"osc-latn-it",osi:"osi-java-id",oso:"oso-latn-ng",osp:"osp-latn-es",ost:"ost-latn-cm",osu:"osu-latn-pg",osx:"osx-latn-de",ota:"ota-arab-zz",otb:"otb-tibt-cn",otd:"otd-latn-id",ote:"ote-latn-mx",oti:"oti-latn-br",otk:"otk-orkh-mn",otl:"otl-latn-mx",otm:"otm-latn-mx",otn:"otn-latn-mx",otq:"otq-latn-mx",otr:"otr-latn-sd",ots:"ots-latn-mx",ott:"ott-latn-mx",otu:"otu-latn-br",otw:"otw-latn-ca",otx:"otx-latn-mx",oty:"oty-gran-in",otz:"otz-latn-mx",oub:"oub-latn-lr",oue:"oue-latn-pg",oui:"oui-ougr-143",oum:"oum-latn-pg",ovd:"ovd-latn-se",owi:"owi-latn-pg",owl:"owl-latn-gb",oyd:"oyd-latn-et",oym:"oym-latn-br",oyy:"oyy-latn-pg",ozm:"ozm-latn-zz",pa:"pa-guru-in","pa-arab":"pa-arab-pk","pa-pk":"pa-arab-pk",pab:"pab-latn-br",pac:"pac-latn-vn",pad:"pad-latn-br",pae:"pae-latn-cd",paf:"paf-latn-br",pag:"pag-latn-ph",pah:"pah-latn-br",pai:"pai-latn-ng",pak:"pak-latn-br",pal:"pal-phli-ir","pal-phlp":"pal-phlp-cn",pam:"pam-latn-ph",pao:"pao-latn-us",pap:"pap-latn-cw",paq:"paq-cyrl-tj",par:"par-latn-us",pas:"pas-latn-id",pau:"pau-latn-pw",pav:"pav-latn-br",paw:"paw-latn-us",pax:"pax-latn-br",pay:"pay-latn-hn",paz:"paz-latn-br",pbb:"pbb-latn-co",pbc:"pbc-latn-gy",pbe:"pbe-latn-mx",pbf:"pbf-latn-mx",pbg:"pbg-latn-ve",pbh:"pbh-latn-ve",pbi:"pbi-latn-zz",pbl:"pbl-latn-ng",pbm:"pbm-latn-mx",pbn:"pbn-latn-ng",pbo:"pbo-latn-gw",pbp:"pbp-latn-gn",pbr:"pbr-latn-tz",pbs:"pbs-latn-mx",pbt:"pbt-arab-af",pbv:"pbv-latn-in",pby:"pby-latn-pg",pca:"pca-latn-mx",pcb:"pcb-khmr-kh",pcc:"pcc-latn-cn","pcc-hani":"pcc-hani-cn",pcd:"pcd-latn-fr",pce:"pce-mymr-mm","pce-thai":"pce-thai-th",pcf:"pcf-mlym-in",pcg:"pcg-mlym-in","pcg-knda":"pcg-knda-in","pcg-taml":"pcg-taml-in",pch:"pch-deva-in",pci:"pci-deva-in","pci-orya":"pci-orya-in",pcj:"pcj-telu-in",pck:"pck-latn-in",pcm:"pcm-latn-ng",pcn:"pcn-latn-ng",pcp:"pcp-latn-bo",pcw:"pcw-latn-ng",pda:"pda-latn-pg",pdc:"pdc-latn-us",pdn:"pdn-latn-id",pdo:"pdo-latn-id",pdt:"pdt-latn-ca",pdu:"pdu-latn-mm","pdu-mymr":"pdu-mymr-mm",pea:"pea-latn-id",peb:"peb-latn-us",ped:"ped-latn-zz",pee:"pee-latn-id",peg:"peg-orya-in",pei:"pei-latn-mx",pek:"pek-latn-pg",pel:"pel-latn-id",pem:"pem-latn-cd",peo:"peo-xpeo-ir",pep:"pep-latn-pg",peq:"peq-latn-us",pev:"pev-latn-ve",pex:"pex-latn-zz",pey:"pey-latn-id",pez:"pez-latn-my",pfa:"pfa-latn-fm",pfe:"pfe-latn-cm",pfl:"pfl-latn-de",pga:"pga-latn-ss",pgd:"pgd-khar-pk",pgg:"pgg-deva-in",pgi:"pgi-latn-pg",pgk:"pgk-latn-vu",pgl:"pgl-ogam-ie",pgn:"pgn-ital-it",pgs:"pgs-latn-ng",pgu:"pgu-latn-id",phd:"phd-deva-in",phg:"phg-latn-vn",phh:"phh-latn-vn",phk:"phk-mymr-in",phl:"phl-arab-zz",phm:"phm-latn-mz",phn:"phn-phnx-lb",pho:"pho-laoo-la",phr:"phr-arab-pk",pht:"pht-thai-th",phv:"phv-arab-af",phw:"phw-deva-np",pi:"pi-sinh-in","pi-brah":"pi-brah-in","pi-deva":"pi-deva-in","pi-khar":"pi-khar-in","pi-khmr":"pi-khmr-in","pi-mymr":"pi-mymr-in","pi-thai":"pi-thai-in",pia:"pia-latn-mx",pib:"pib-latn-pe",pic:"pic-latn-ga",pid:"pid-latn-ve",pif:"pif-latn-fm",pig:"pig-latn-pe",pih:"pih-latn-nf",pij:"pij-latn-co",pil:"pil-latn-zz",pim:"pim-latn-us",pin:"pin-latn-pg",pio:"pio-latn-co",pip:"pip-latn-zz",pir:"pir-latn-br",pis:"pis-latn-sb",pit:"pit-latn-au",piu:"piu-latn-au",piv:"piv-latn-sb",piw:"piw-latn-tz",pix:"pix-latn-pg",piy:"piy-latn-ng",piz:"piz-latn-nc",pjt:"pjt-latn-au",pka:"pka-brah-in",pkb:"pkb-latn-ke",pkg:"pkg-latn-pg",pkh:"pkh-latn-bd","pkh-deva":"pkh-deva-bd",pkn:"pkn-latn-au",pko:"pko-latn-ke",pkp:"pkp-latn-ck",pkr:"pkr-mlym-in",pku:"pku-latn-id",pl:"pl-latn-pl",pla:"pla-latn-zz",plb:"plb-latn-vu",plc:"plc-latn-ph",pld:"pld-latn-gb",ple:"ple-latn-id",plg:"plg-latn-ar",plh:"plh-latn-id",plj:"plj-latn-ng",plk:"plk-arab-pk",pll:"pll-mymr-mm",pln:"pln-latn-co",plo:"plo-latn-mx",plr:"plr-latn-ci",pls:"pls-latn-mx",plu:"plu-latn-br",plv:"plv-latn-ph",plw:"plw-latn-ph",plz:"plz-latn-my",pma:"pma-latn-vu",pmb:"pmb-latn-cd",pmd:"pmd-latn-au",pme:"pme-latn-nc",pmf:"pmf-latn-id",pmh:"pmh-brah-in",pmi:"pmi-latn-cn",pmj:"pmj-latn-cn",pml:"pml-latn-tn",pmm:"pmm-latn-cm",pmn:"pmn-latn-cm",pmo:"pmo-latn-id",pmq:"pmq-latn-mx",pmr:"pmr-latn-pg",pms:"pms-latn-it",pmt:"pmt-latn-pf",pmw:"pmw-latn-us",pmx:"pmx-latn-in",pmy:"pmy-latn-id",pmz:"pmz-latn-mx",pna:"pna-latn-my",pnc:"pnc-latn-id",pnd:"pnd-latn-ao",pne:"pne-latn-my",png:"png-latn-zz",pnh:"pnh-latn-ck",pni:"pni-latn-id",pnj:"pnj-latn-au",pnk:"pnk-latn-bo",pnl:"pnl-latn-bf",pnm:"pnm-latn-my",pnn:"pnn-latn-zz",pno:"pno-latn-pe",pnp:"pnp-latn-id",pnq:"pnq-latn-bf",pnr:"pnr-latn-pg",pns:"pns-latn-id",pnt:"pnt-grek-gr",pnv:"pnv-latn-au",pnw:"pnw-latn-au",pny:"pny-latn-cm",pnz:"pnz-latn-cf",poc:"poc-latn-gt",poe:"poe-latn-mx",pof:"pof-latn-cd",pog:"pog-latn-br",poh:"poh-latn-gt",poi:"poi-latn-mx",pok:"pok-latn-br",pom:"pom-latn-us",pon:"pon-latn-fm",poo:"poo-latn-us",pop:"pop-latn-nc",poq:"poq-latn-mx",pos:"pos-latn-mx",pot:"pot-latn-us",pov:"pov-latn-gw",pow:"pow-latn-mx",poy:"poy-latn-tz",ppa:"ppa-deva-in",ppe:"ppe-latn-pg",ppi:"ppi-latn-mx",ppk:"ppk-latn-id",ppl:"ppl-latn-sv",ppm:"ppm-latn-id",ppn:"ppn-latn-pg",ppo:"ppo-latn-zz",ppp:"ppp-latn-cd",ppq:"ppq-latn-pg",pps:"pps-latn-mx",ppt:"ppt-latn-pg",pqa:"pqa-latn-ng",pqm:"pqm-latn-ca",pra:"pra-khar-pk",prc:"prc-arab-af",prd:"prd-arab-ir",pre:"pre-latn-st",prf:"prf-latn-ph",prg:"prg-latn-001",prh:"prh-latn-ph",pri:"pri-latn-nc",prk:"prk-latn-mm",prm:"prm-latn-pg",pro:"pro-latn-fr",prp:"prp-gujr-in",prq:"prq-latn-pe",prr:"prr-latn-br",prt:"prt-thai-th",pru:"pru-latn-id",prw:"prw-latn-pg",prx:"prx-arab-in","prx-tibt":"prx-tibt-in",ps:"ps-arab-af",psa:"psa-latn-id",pse:"pse-latn-id",psh:"psh-arab-af",psi:"psi-arab-af",psm:"psm-latn-bo",psn:"psn-latn-id",psq:"psq-latn-pg",pss:"pss-latn-zz",pst:"pst-arab-pk",psw:"psw-latn-vu",pt:"pt-latn-br",pta:"pta-latn-py",pth:"pth-latn-br",pti:"pti-latn-au",ptn:"ptn-latn-id",pto:"pto-latn-br",ptp:"ptp-latn-zz",ptr:"ptr-latn-vu",ptt:"ptt-latn-id",ptu:"ptu-latn-id",ptv:"ptv-latn-vu",pua:"pua-latn-mx",pub:"pub-latn-in",puc:"puc-latn-id",pud:"pud-latn-id",pue:"pue-latn-ar",puf:"puf-latn-id",pug:"pug-latn-bf",pui:"pui-latn-co",puj:"puj-latn-id",pum:"pum-deva-np",puo:"puo-latn-vn",pup:"pup-latn-pg",puq:"puq-latn-pe",pur:"pur-latn-br",put:"put-latn-id",puu:"puu-latn-ga",puw:"puw-latn-fm",pux:"pux-latn-pg",puy:"puy-latn-us",pwa:"pwa-latn-zz",pwb:"pwb-latn-ng",pwg:"pwg-latn-pg",pwm:"pwm-latn-ph",pwn:"pwn-latn-tw",pwo:"pwo-mymr-mm",pwr:"pwr-deva-in",pww:"pww-thai-th",pxm:"pxm-latn-mx",pye:"pye-latn-ci",pym:"pym-latn-ng",pyn:"pyn-latn-br",pyu:"pyu-latn-tw","pyu-hani":"pyu-hani-tw",pyx:"pyx-mymr-mm",pyy:"pyy-latn-mm",pzh:"pzh-latn-tw",pzn:"pzn-latn-mm",qu:"qu-latn-pe",qua:"qua-latn-us",qub:"qub-latn-pe",quc:"quc-latn-gt",qud:"qud-latn-ec",quf:"quf-latn-pe",qug:"qug-latn-ec",qui:"qui-latn-us",quk:"quk-latn-pe",qul:"qul-latn-bo",qum:"qum-latn-gt",qun:"qun-latn-us",qup:"qup-latn-pe",quq:"quq-latn-es",qur:"qur-latn-pe",qus:"qus-latn-ar",quv:"quv-latn-gt",quw:"quw-latn-ec",qux:"qux-latn-pe",quy:"quy-latn-pe",qva:"qva-latn-pe",qvc:"qvc-latn-pe",qve:"qve-latn-pe",qvh:"qvh-latn-pe",qvi:"qvi-latn-ec",qvj:"qvj-latn-ec",qvl:"qvl-latn-pe",qvm:"qvm-latn-pe",qvn:"qvn-latn-pe",qvo:"qvo-latn-pe",qvp:"qvp-latn-pe",qvs:"qvs-latn-pe",qvw:"qvw-latn-pe",qvz:"qvz-latn-ec",qwa:"qwa-latn-pe",qwc:"qwc-latn-pe",qwh:"qwh-latn-pe",qwm:"qwm-latn-ru","qwm-cyrl":"qwm-cyrl-ru","qwm-runr":"qwm-runr-ru",qws:"qws-latn-pe",qwt:"qwt-latn-us",qxa:"qxa-latn-pe",qxc:"qxc-latn-pe",qxh:"qxh-latn-pe",qxl:"qxl-latn-ec",qxn:"qxn-latn-pe",qxo:"qxo-latn-pe",qxp:"qxp-latn-pe",qxq:"qxq-arab-ir",qxr:"qxr-latn-ec",qxt:"qxt-latn-pe",qxu:"qxu-latn-pe",qxw:"qxw-latn-pe",qya:"qya-latn-001",qyp:"qyp-latn-us",raa:"raa-deva-np",rab:"rab-deva-np",rac:"rac-latn-id",rad:"rad-latn-vn",raf:"raf-deva-np",rag:"rag-latn-ke",rah:"rah-beng-in","rah-latn":"rah-latn-in",rai:"rai-latn-zz",raj:"raj-deva-in",rak:"rak-latn-pg",ram:"ram-latn-br",ran:"ran-latn-id",rao:"rao-latn-zz",rap:"rap-latn-cl",rar:"rar-latn-ck",rav:"rav-deva-np",raw:"raw-latn-mm",rax:"rax-latn-ng",ray:"ray-latn-pf",raz:"raz-latn-id",rbb:"rbb-mymr-mm",rbk:"rbk-latn-ph",rbl:"rbl-latn-ph",rbp:"rbp-latn-au",rcf:"rcf-latn-re",rdb:"rdb-arab-ir",rea:"rea-latn-pg",reb:"reb-latn-id",ree:"ree-latn-my",reg:"reg-latn-tz",rei:"rei-orya-in","rei-telu":"rei-telu-in",rej:"rej-latn-id",rel:"rel-latn-zz",rem:"rem-latn-pe",ren:"ren-latn-vn",res:"res-latn-zz",ret:"ret-latn-id",rey:"rey-latn-bo",rga:"rga-latn-vu",rgn:"rgn-latn-it",rgr:"rgr-latn-pe",rgs:"rgs-latn-vn",rgu:"rgu-latn-id",rhg:"rhg-rohg-mm",rhp:"rhp-latn-pg",ria:"ria-latn-in",rif:"rif-latn-ma",ril:"ril-latn-mm",rim:"rim-latn-tz",rin:"rin-latn-ng",rir:"rir-latn-id",rit:"rit-latn-au",riu:"riu-latn-id",rjg:"rjg-latn-id",rji:"rji-deva-np",rjs:"rjs-deva-np",rka:"rka-khmr-kh",rkb:"rkb-latn-br",rkh:"rkh-latn-ck",rki:"rki-mymr-mm",rkm:"rkm-latn-bf",rkt:"rkt-beng-bd",rkw:"rkw-latn-au",rm:"rm-latn-ch",rma:"rma-latn-ni",rmb:"rmb-latn-au",rmc:"rmc-latn-sk",rmd:"rmd-latn-dk",rme:"rme-latn-gb",rmf:"rmf-latn-fi",rmg:"rmg-latn-no",rmh:"rmh-latn-id",rmi:"rmi-armn-am",rmk:"rmk-latn-pg",rml:"rml-latn-pl","rml-cyrl":"rml-cyrl-by",rmm:"rmm-latn-id",rmn:"rmn-latn-rs","rmn-cyrl":"rmn-cyrl-bg","rmn-grek":"rmn-grek-gr",rmo:"rmo-latn-ch",rmp:"rmp-latn-pg",rmq:"rmq-latn-es",rmt:"rmt-arab-ir",rmu:"rmu-latn-se",rmw:"rmw-latn-gb",rmx:"rmx-latn-vn",rmz:"rmz-mymr-in",rn:"rn-latn-bi",rna:"rna-latn-zz",rnd:"rnd-latn-cd",rng:"rng-latn-mz",rnl:"rnl-latn-in",rnn:"rnn-latn-id",rnr:"rnr-latn-au",rnw:"rnw-latn-tz",ro:"ro-latn-ro",rob:"rob-latn-id",roc:"roc-latn-vn",rod:"rod-latn-ng",roe:"roe-latn-pg",rof:"rof-latn-tz",rog:"rog-latn-vn",rol:"rol-latn-ph",rom:"rom-latn-ro","rom-cyrl":"rom-cyrl-ro",roo:"roo-latn-zz",rop:"rop-latn-au",ror:"ror-latn-id",rou:"rou-latn-td",row:"row-latn-id",rpn:"rpn-latn-vu",rpt:"rpt-latn-pg",rri:"rri-latn-sb",rro:"rro-latn-zz",rrt:"rrt-latn-au",rsk:"rsk-cyrl-rs",rtc:"rtc-latn-mm",rth:"rth-latn-id",rtm:"rtm-latn-fj",rtw:"rtw-deva-in",ru:"ru-cyrl-ru",rub:"rub-latn-ug",ruc:"ruc-latn-ug",rue:"rue-cyrl-ua",ruf:"ruf-latn-tz",rug:"rug-latn-sb",rui:"rui-latn-tz",ruk:"ruk-latn-ng",ruo:"ruo-latn-hr",rup:"rup-latn-ro","rup-grek":"rup-grek-gr",ruq:"ruq-latn-gr",rut:"rut-cyrl-ru","rut-latn":"rut-latn-az",ruu:"ruu-latn-my",ruy:"ruy-latn-ng",ruz:"ruz-latn-ng",rw:"rw-latn-rw",rwa:"rwa-latn-pg",rwk:"rwk-latn-tz",rwl:"rwl-latn-tz",rwm:"rwm-latn-ug",rwo:"rwo-latn-zz",rwr:"rwr-deva-in",rxd:"rxd-latn-au",rxw:"rxw-latn-au",ryu:"ryu-kana-jp",sa:"sa-deva-in",saa:"saa-latn-td",sab:"sab-latn-pa",sac:"sac-latn-us",sad:"sad-latn-tz",sae:"sae-latn-br",saf:"saf-latn-gh",sah:"sah-cyrl-ru",saj:"saj-latn-id",sak:"sak-latn-ga",sam:"sam-samr-ps","sam-hebr":"sam-hebr-ps","sam-syrc":"sam-syrc-ps",sao:"sao-latn-id",saq:"saq-latn-ke",sar:"sar-latn-bo",sas:"sas-latn-id",sat:"sat-olck-in",sau:"sau-latn-id",sav:"sav-latn-sn",saw:"saw-latn-id",sax:"sax-latn-vu",say:"say-latn-ng",saz:"saz-saur-in",sba:"sba-latn-zz",sbb:"sbb-latn-sb",sbc:"sbc-latn-pg",sbd:"sbd-latn-bf",sbe:"sbe-latn-zz",sbg:"sbg-latn-id",sbh:"sbh-latn-pg",sbi:"sbi-latn-pg",sbj:"sbj-latn-td",sbk:"sbk-latn-tz",sbl:"sbl-latn-ph",sbm:"sbm-latn-tz",sbn:"sbn-arab-pk",sbo:"sbo-latn-my",sbp:"sbp-latn-tz",sbq:"sbq-latn-pg",sbr:"sbr-latn-id",sbs:"sbs-latn-na",sbt:"sbt-latn-id",sbu:"sbu-tibt-in","sbu-deva":"sbu-deva-in",sbv:"sbv-latn-it",sbw:"sbw-latn-ga",sbx:"sbx-latn-id",sby:"sby-latn-zm",sbz:"sbz-latn-cf",sc:"sc-latn-it",scb:"scb-latn-vn",sce:"sce-latn-cn","sce-arab":"sce-arab-cn",scf:"scf-latn-pa",scg:"scg-latn-id",sch:"sch-latn-in",sci:"sci-latn-lk",sck:"sck-deva-in",scl:"scl-arab-zz",scn:"scn-latn-it",sco:"sco-latn-gb",scp:"scp-deva-np",scs:"scs-latn-ca","scs-cans":"scs-cans-ca",sct:"sct-laoo-la",scu:"scu-takr-in",scv:"scv-latn-ng",scw:"scw-latn-ng",scx:"scx-grek-it",sd:"sd-arab-pk","sd-deva":"sd-deva-in","sd-in":"sd-deva-in","sd-khoj":"sd-khoj-in","sd-sind":"sd-sind-in",sda:"sda-latn-id",sdb:"sdb-arab-iq",sdc:"sdc-latn-it",sde:"sde-latn-ng",sdf:"sdf-arab-iq",sdg:"sdg-arab-af",sdh:"sdh-arab-ir",sdj:"sdj-latn-cg",sdk:"sdk-latn-pg",sdn:"sdn-latn-it",sdo:"sdo-latn-my",sdq:"sdq-latn-id",sds:"sds-arab-tn",sdu:"sdu-latn-id",sdx:"sdx-latn-my",se:"se-latn-no",sea:"sea-latn-my",seb:"seb-latn-ci",sec:"sec-latn-ca",sed:"sed-latn-vn",see:"see-latn-us",sef:"sef-latn-ci",seg:"seg-latn-tz",seh:"seh-latn-mz",sei:"sei-latn-mx",sej:"sej-latn-pg",sek:"sek-latn-ca","sek-cans":"sek-cans-ca",sel:"sel-cyrl-ru",sen:"sen-latn-bf",seo:"seo-latn-pg",sep:"sep-latn-bf",seq:"seq-latn-bf",ser:"ser-latn-us",ses:"ses-latn-ml",set:"set-latn-id",seu:"seu-latn-id",sev:"sev-latn-ci",sew:"sew-latn-pg",sey:"sey-latn-ec",sez:"sez-latn-mm",sfe:"sfe-latn-ph",sfm:"sfm-plrd-cn",sfw:"sfw-latn-gh",sg:"sg-latn-cf",sga:"sga-ogam-ie",sgb:"sgb-latn-ph",sgc:"sgc-latn-ke",sgd:"sgd-latn-ph",sge:"sge-latn-id",sgh:"sgh-cyrl-tj","sgh-arab":"sgh-arab-af","sgh-latn":"sgh-latn-tj",sgi:"sgi-latn-cm",sgj:"sgj-deva-in",sgm:"sgm-latn-ke",sgp:"sgp-latn-in",sgr:"sgr-arab-ir",sgs:"sgs-latn-lt",sgt:"sgt-tibt-bt",sgu:"sgu-latn-id",sgw:"sgw-ethi-zz",sgy:"sgy-arab-af",sgz:"sgz-latn-zz",sha:"sha-latn-ng",shb:"shb-latn-br",shc:"shc-latn-cd",shd:"shd-arab-pk",she:"she-latn-et",shg:"shg-latn-bw",shh:"shh-latn-us",shi:"shi-tfng-ma",shj:"shj-latn-sd",shk:"shk-latn-zz",shm:"shm-arab-ir",shn:"shn-mymr-mm",sho:"sho-latn-ng",shp:"shp-latn-pe",shq:"shq-latn-zm",shr:"shr-latn-cd",shs:"shs-latn-ca",sht:"sht-latn-us",shu:"shu-arab-zz",shv:"shv-arab-om",shw:"shw-latn-sd",shy:"shy-latn-dz","shy-arab":"shy-arab-dz","shy-tfng":"shy-tfng-dz",shz:"shz-latn-ml",si:"si-sinh-lk",sia:"sia-cyrl-ru",sib:"sib-latn-my",sid:"sid-latn-et",sie:"sie-latn-zm",sif:"sif-latn-bf",sig:"sig-latn-zz",sih:"sih-latn-nc",sii:"sii-latn-in",sij:"sij-latn-pg",sik:"sik-latn-br",sil:"sil-latn-zz",sim:"sim-latn-zz",sip:"sip-tibt-in",siq:"siq-latn-pg",sir:"sir-latn-ng",sis:"sis-latn-us",siu:"siu-latn-pg",siv:"siv-latn-pg",siw:"siw-latn-pg",six:"six-latn-pg",siy:"siy-arab-ir",siz:"siz-arab-eg",sja:"sja-latn-co",sjb:"sjb-latn-id",sjd:"sjd-cyrl-ru",sje:"sje-latn-se",sjg:"sjg-latn-td",sjl:"sjl-latn-in",sjm:"sjm-latn-ph",sjp:"sjp-deva-in","sjp-beng":"sjp-beng-in",sjr:"sjr-latn-zz",sjt:"sjt-cyrl-ru",sju:"sju-latn-se",sjw:"sjw-latn-us",sk:"sk-latn-sk",ska:"ska-latn-us",skb:"skb-thai-th",skc:"skc-latn-zz",skd:"skd-latn-us",ske:"ske-latn-vu",skf:"skf-latn-br",skg:"skg-latn-mg",skh:"skh-latn-id",ski:"ski-latn-id",skj:"skj-deva-np",skm:"skm-latn-pg",skn:"skn-latn-ph",sko:"sko-latn-id",skp:"skp-latn-my",skq:"skq-latn-bf",skr:"skr-arab-pk",sks:"sks-latn-zz",skt:"skt-latn-cd",sku:"sku-latn-vu",skv:"skv-latn-id",skw:"skw-latn-gy",skx:"skx-latn-id",sky:"sky-latn-sb",skz:"skz-latn-id",sl:"sl-latn-si",slc:"slc-latn-co",sld:"sld-latn-zz",slg:"slg-latn-id",slh:"slh-latn-us",sli:"sli-latn-pl",slj:"slj-latn-br",sll:"sll-latn-zz",slm:"slm-latn-ph",sln:"sln-latn-us",slp:"slp-latn-id",slq:"slq-arab-ir",slr:"slr-latn-cn",slu:"slu-latn-id",slw:"slw-latn-pg",slx:"slx-latn-cd",sly:"sly-latn-id",slz:"slz-latn-id",sm:"sm-latn-ws",sma:"sma-latn-se",smb:"smb-latn-pg",smc:"smc-latn-pg",smd:"smd-latn-ao",smf:"smf-latn-pg",smg:"smg-latn-pg",smh:"smh-yiii-cn",smj:"smj-latn-se",smk:"smk-latn-ph",sml:"sml-latn-ph",smn:"smn-latn-fi",smp:"smp-samr-il",smq:"smq-latn-zz",smr:"smr-latn-id",sms:"sms-latn-fi",smt:"smt-latn-in",smu:"smu-khmr-kh",smw:"smw-latn-id",smx:"smx-latn-cd",smy:"smy-arab-ir",smz:"smz-latn-pg",sn:"sn-latn-zw",snb:"snb-latn-my",snc:"snc-latn-zz",sne:"sne-latn-my",snf:"snf-latn-sn",sng:"sng-latn-cd","sng-brai":"sng-brai-cd",sni:"sni-latn-pe",snj:"snj-latn-cf",snk:"snk-latn-ml",snl:"snl-latn-ph",snm:"snm-latn-ug",snn:"snn-latn-co",sno:"sno-latn-us",snp:"snp-latn-zz",snq:"snq-latn-ga",snr:"snr-latn-pg",sns:"sns-latn-vu",snu:"snu-latn-id",snv:"snv-latn-my",snw:"snw-latn-gh",snx:"snx-latn-zz",sny:"sny-latn-zz",snz:"snz-latn-pg",so:"so-latn-so",soa:"soa-tavt-th","soa-thai":"soa-thai-th",sob:"sob-latn-id",soc:"soc-latn-cd",sod:"sod-latn-cd",soe:"soe-latn-cd",sog:"sog-sogd-uz",soi:"soi-deva-np",sok:"sok-latn-zz",sol:"sol-latn-pg",soo:"soo-latn-cd",sop:"sop-latn-cd",soq:"soq-latn-zz",sor:"sor-latn-td",sos:"sos-latn-bf",sou:"sou-thai-th",sov:"sov-latn-pw",sow:"sow-latn-pg",sox:"sox-latn-cm",soy:"soy-latn-zz",soz:"soz-latn-tz",spb:"spb-latn-id",spc:"spc-latn-ve",spd:"spd-latn-zz",spe:"spe-latn-pg",spg:"spg-latn-my",spi:"spi-latn-id",spk:"spk-latn-pg",spl:"spl-latn-zz",spm:"spm-latn-pg",spn:"spn-latn-py",spo:"spo-latn-us",spp:"spp-latn-ml",spq:"spq-latn-pe",spr:"spr-latn-id",sps:"sps-latn-zz",spt:"spt-tibt-in",spv:"spv-orya-in",sq:"sq-latn-al",sqa:"sqa-latn-ng",sqh:"sqh-latn-ng",sqm:"sqm-latn-cf",sqo:"sqo-arab-ir",sqq:"sqq-laoo-la",sqt:"sqt-arab-ye","sqt-latn":"sqt-latn-ye",squ:"squ-latn-ca",sr:"sr-cyrl-rs","sr-me":"sr-latn-me","sr-ro":"sr-latn-ro","sr-ru":"sr-latn-ru","sr-tr":"sr-latn-tr",sra:"sra-latn-pg",srb:"srb-sora-in",sre:"sre-latn-id",srf:"srf-latn-pg",srg:"srg-latn-ph",srh:"srh-arab-cn",sri:"sri-latn-co",srk:"srk-latn-my",srl:"srl-latn-id",srm:"srm-latn-sr",srn:"srn-latn-sr",sro:"sro-latn-it",srq:"srq-latn-bo",srr:"srr-latn-sn",srs:"srs-latn-ca",srt:"srt-latn-id",sru:"sru-latn-br",srv:"srv-latn-ph",srw:"srw-latn-id",srx:"srx-deva-in",sry:"sry-latn-pg",srz:"srz-arab-ir",ss:"ss-latn-za",ssb:"ssb-latn-ph",ssc:"ssc-latn-tz",ssd:"ssd-latn-zz",sse:"sse-latn-ph","sse-arab":"sse-arab-ph",ssf:"ssf-latn-tw",ssg:"ssg-latn-zz",ssh:"ssh-arab-ae",ssj:"ssj-latn-pg",ssl:"ssl-latn-gh",ssm:"ssm-latn-my",ssn:"ssn-latn-ke",sso:"sso-latn-pg",ssq:"ssq-latn-id",sss:"sss-laoo-la","sss-thai":"sss-thai-th",sst:"sst-latn-pg",ssu:"ssu-latn-pg",ssv:"ssv-latn-vu",ssx:"ssx-latn-pg",ssy:"ssy-latn-er",ssz:"ssz-latn-pg",st:"st-latn-za",sta:"sta-latn-zm",stb:"stb-latn-ph",ste:"ste-latn-id",stf:"stf-latn-pg",stg:"stg-latn-vn",sth:"sth-latn-ie",sti:"sti-latn-vn","sti-kh":"sti-latn-kh",stj:"stj-latn-bf",stk:"stk-latn-zz",stl:"stl-latn-nl",stm:"stm-latn-pg",stn:"stn-latn-sb",sto:"sto-latn-ca",stp:"stp-latn-mx",stq:"stq-latn-de",str:"str-latn-ca",sts:"sts-arab-af",stt:"stt-latn-vn",stv:"stv-ethi-et","stv-arab":"stv-arab-et",stw:"stw-latn-fm",sty:"sty-cyrl-ru",su:"su-latn-id",sua:"sua-latn-zz",sub:"sub-latn-cd",suc:"suc-latn-ph",sue:"sue-latn-zz",sug:"sug-latn-pg",sui:"sui-latn-pg",suj:"suj-latn-tz",suk:"suk-latn-tz",suo:"suo-latn-pg",suq:"suq-latn-et","suq-ethi":"suq-ethi-et",sur:"sur-latn-zz",sus:"sus-latn-gn",sut:"sut-latn-ni",suv:"suv-latn-in","suv-beng":"suv-beng-in","suv-deva":"suv-deva-in",suw:"suw-latn-tz",suy:"suy-latn-br",suz:"suz-deva-np",sv:"sv-latn-se",sva:"sva-geor-ge","sva-cyrl":"sva-cyrl-ge","sva-latn":"sva-latn-ge",svb:"svb-latn-pg",svc:"svc-latn-vc",sve:"sve-latn-id",svm:"svm-latn-it",svs:"svs-latn-sb",sw:"sw-latn-tz",swb:"swb-arab-yt",swc:"swc-latn-cd",swf:"swf-latn-cd",swg:"swg-latn-de",swi:"swi-hani-cn",swj:"swj-latn-ga",swk:"swk-latn-mw",swm:"swm-latn-pg",swo:"swo-latn-br",swp:"swp-latn-zz",swq:"swq-latn-cm",swr:"swr-latn-id",sws:"sws-latn-id",swt:"swt-latn-id",swu:"swu-latn-id",swv:"swv-deva-in",sww:"sww-latn-vu",swx:"swx-latn-br",swy:"swy-latn-td",sxb:"sxb-latn-ke",sxe:"sxe-latn-ga",sxn:"sxn-latn-id",sxr:"sxr-latn-tw",sxs:"sxs-latn-ng",sxu:"sxu-latn-de","sxu-runr":"sxu-runr-de",sxw:"sxw-latn-zz",sya:"sya-latn-id",syb:"syb-latn-ph",syc:"syc-syrc-tr",syi:"syi-latn-ga",syk:"syk-latn-ng",syl:"syl-beng-bd",sym:"sym-latn-bf",syn:"syn-syrc-ir",syo:"syo-latn-kh",syr:"syr-syrc-iq",sys:"sys-latn-td",syw:"syw-deva-np",syx:"syx-latn-ga",sza:"sza-latn-my",szb:"szb-latn-id",szc:"szc-latn-my",szd:"szd-latn-my",szg:"szg-latn-cd",szl:"szl-latn-pl",szn:"szn-latn-id",szp:"szp-latn-id",szv:"szv-latn-cm",szw:"szw-latn-id",szy:"szy-latn-tw",ta:"ta-taml-in",taa:"taa-latn-us",tab:"tab-cyrl-ru",tac:"tac-latn-mx",tad:"tad-latn-id",tae:"tae-latn-br",taf:"taf-latn-br",tag:"tag-latn-sd",taj:"taj-deva-np",tak:"tak-latn-ng",tal:"tal-latn-zz",tan:"tan-latn-zz",tao:"tao-latn-tw",tap:"tap-latn-cd",taq:"taq-latn-zz",tar:"tar-latn-mx",tas:"tas-latn-vn",tau:"tau-latn-us",tav:"tav-latn-co",taw:"taw-latn-pg",tax:"tax-latn-td",tay:"tay-latn-tw","tay-hans":"tay-hans-tw","tay-hant":"tay-hant-tw",taz:"taz-latn-sd",tba:"tba-latn-br",tbc:"tbc-latn-zz",tbd:"tbd-latn-zz",tbe:"tbe-latn-sb",tbf:"tbf-latn-zz",tbg:"tbg-latn-zz",tbh:"tbh-latn-au",tbi:"tbi-latn-sd",tbj:"tbj-latn-pg",tbk:"tbk-tagb-ph","tbk-hano":"tbk-hano-ph","tbk-latn":"tbk-latn-ph",tbl:"tbl-latn-ph",tbm:"tbm-latn-cd",tbn:"tbn-latn-co",tbo:"tbo-latn-zz",tbp:"tbp-latn-id",tbs:"tbs-latn-pg",tbt:"tbt-latn-cd",tbu:"tbu-latn-mx",tbv:"tbv-latn-pg",tbw:"tbw-latn-ph",tbx:"tbx-latn-pg",tby:"tby-latn-id",tbz:"tbz-latn-zz",tca:"tca-latn-br",tcb:"tcb-latn-us",tcc:"tcc-latn-tz",tcd:"tcd-latn-gh",tce:"tce-latn-ca",tcf:"tcf-latn-mx",tcg:"tcg-latn-id",tch:"tch-latn-tc",tci:"tci-latn-zz",tck:"tck-latn-ga",tcm:"tcm-latn-id",tcn:"tcn-tibt-np",tco:"tco-mymr-mm",tcp:"tcp-latn-mm",tcq:"tcq-latn-id",tcs:"tcs-latn-au",tcu:"tcu-latn-mx",tcw:"tcw-latn-mx",tcx:"tcx-taml-in",tcy:"tcy-knda-in",tcz:"tcz-latn-in",tda:"tda-tfng-ne","tda-arab":"tda-arab-ne","tda-latn":"tda-latn-ne",tdb:"tdb-deva-in","tdb-beng":"tdb-beng-in","tdb-kthi":"tdb-kthi-in",tdc:"tdc-latn-co",tdd:"tdd-tale-cn",tde:"tde-latn-ml",tdg:"tdg-deva-np",tdh:"tdh-deva-np",tdi:"tdi-latn-id",tdj:"tdj-latn-id",tdk:"tdk-latn-ng",tdl:"tdl-latn-ng",tdm:"tdm-latn-gy",tdn:"tdn-latn-id",tdo:"tdo-latn-ng",tdq:"tdq-latn-ng",tdr:"tdr-latn-vn",tds:"tds-latn-id",tdt:"tdt-latn-tl",tdu:"tdu-latn-my",tdv:"tdv-latn-ng",tdx:"tdx-latn-mg",tdy:"tdy-latn-ph",te:"te-telu-in",tea:"tea-latn-my",teb:"teb-latn-ec",tec:"tec-latn-ke",ted:"ted-latn-zz",tee:"tee-latn-mx",teg:"teg-latn-ga",teh:"teh-latn-ar",tei:"tei-latn-pg",tek:"tek-latn-cd",tem:"tem-latn-sl",ten:"ten-latn-co",teo:"teo-latn-ug",tep:"tep-latn-mx",teq:"teq-latn-sd",ter:"ter-latn-br",tes:"tes-java-id",tet:"tet-latn-tl",teu:"teu-latn-ug",tev:"tev-latn-id",tew:"tew-latn-us",tex:"tex-latn-ss",tey:"tey-latn-sd",tfi:"tfi-latn-zz",tfn:"tfn-latn-us",tfo:"tfo-latn-id",tfr:"tfr-latn-pa",tft:"tft-latn-id",tg:"tg-cyrl-tj","tg-arab":"tg-arab-pk","tg-pk":"tg-arab-pk",tga:"tga-latn-ke",tgb:"tgb-latn-my",tgc:"tgc-latn-zz",tgd:"tgd-latn-ng",tge:"tge-deva-np",tgf:"tgf-tibt-bt",tgh:"tgh-latn-tt",tgi:"tgi-latn-pg",tgj:"tgj-latn-in",tgn:"tgn-latn-ph",tgo:"tgo-latn-zz",tgp:"tgp-latn-vu",tgq:"tgq-latn-my",tgs:"tgs-latn-vu",tgt:"tgt-latn-ph","tgt-hano":"tgt-hano-ph","tgt-tagb":"tgt-tagb-ph",tgu:"tgu-latn-zz",tgv:"tgv-latn-br",tgw:"tgw-latn-ci",tgx:"tgx-latn-ca",tgy:"tgy-latn-ss",tgz:"tgz-latn-au",th:"th-thai-th",thd:"thd-latn-au",the:"the-deva-np",thf:"thf-deva-np",thh:"thh-latn-mx",thi:"thi-tale-la",thk:"thk-latn-ke",thl:"thl-deva-np",thm:"thm-thai-th",thp:"thp-latn-ca","thp-dupl":"thp-dupl-ca",thq:"thq-deva-np",thr:"thr-deva-np",ths:"ths-deva-np",tht:"tht-latn-ca",thu:"thu-latn-ss",thv:"thv-latn-dz","thv-arab":"thv-arab-dz","thv-tfng":"thv-tfng-dz",thy:"thy-latn-ng",thz:"thz-latn-ne","thz-tfng":"thz-tfng-ne",ti:"ti-ethi-et",tic:"tic-latn-sd",tif:"tif-latn-zz",tig:"tig-ethi-er",tih:"tih-latn-my",tii:"tii-latn-cd",tij:"tij-deva-np",tik:"tik-latn-zz",til:"til-latn-us",tim:"tim-latn-zz",tin:"tin-cyrl-ru",tio:"tio-latn-zz",tip:"tip-latn-id",tiq:"tiq-latn-bf",tis:"tis-latn-ph",tit:"tit-latn-co",tiu:"tiu-latn-ph",tiv:"tiv-latn-ng",tiw:"tiw-latn-au",tix:"tix-latn-us",tiy:"tiy-latn-ph",tja:"tja-latn-lr",tjg:"tjg-latn-id",tji:"tji-latn-cn",tjj:"tjj-latn-au",tjl:"tjl-mymr-mm",tjn:"tjn-latn-ci",tjo:"tjo-arab-dz",tjp:"tjp-latn-au",tjs:"tjs-latn-cn",tju:"tju-latn-au",tjw:"tjw-latn-au",tk:"tk-latn-tm",tka:"tka-latn-br",tkb:"tkb-deva-in",tkd:"tkd-latn-tl",tke:"tke-latn-mz",tkf:"tkf-latn-br",tkg:"tkg-latn-mg",tkl:"tkl-latn-tk",tkp:"tkp-latn-sb",tkq:"tkq-latn-ng",tkr:"tkr-latn-az",tks:"tks-arab-ir",tkt:"tkt-deva-np",tku:"tku-latn-mx",tkv:"tkv-latn-pg",tkw:"tkw-latn-sb",tkx:"tkx-latn-id",tkz:"tkz-latn-vn",tl:"tl-latn-ph",tla:"tla-latn-mx",tlb:"tlb-latn-id",tlc:"tlc-latn-mx",tld:"tld-latn-id",tlf:"tlf-latn-zz",tlg:"tlg-latn-id",tli:"tli-latn-us","tli-cyrl":"tli-cyrl-us",tlj:"tlj-latn-ug",tlk:"tlk-latn-id",tll:"tll-latn-cd",tlm:"tlm-latn-vu",tln:"tln-latn-id",tlp:"tlp-latn-mx",tlq:"tlq-latn-mm",tlr:"tlr-latn-sb",tls:"tls-latn-vu",tlt:"tlt-latn-id",tlu:"tlu-latn-id",tlv:"tlv-latn-id",tlx:"tlx-latn-zz",tly:"tly-latn-az",tma:"tma-latn-td",tmb:"tmb-latn-vu",tmc:"tmc-latn-td",tmd:"tmd-latn-pg",tme:"tme-latn-br",tmf:"tmf-latn-py",tmg:"tmg-latn-id",tmh:"tmh-latn-ne",tmi:"tmi-latn-vu",tmj:"tmj-latn-id",tmk:"tmk-deva-np",tml:"tml-latn-id",tmm:"tmm-latn-vn",tmn:"tmn-latn-id",tmo:"tmo-latn-my",tmq:"tmq-latn-pg",tmr:"tmr-syrc-il",tmt:"tmt-latn-vu",tmu:"tmu-latn-id",tmv:"tmv-latn-cd",tmw:"tmw-latn-my",tmy:"tmy-latn-zz",tmz:"tmz-latn-ve",tn:"tn-latn-za",tna:"tna-latn-bo",tnb:"tnb-latn-co",tnc:"tnc-latn-co",tnd:"tnd-latn-co",tng:"tng-latn-td",tnh:"tnh-latn-zz",tni:"tni-latn-id",tnk:"tnk-latn-vu",tnl:"tnl-latn-vu",tnm:"tnm-latn-id",tnn:"tnn-latn-vu",tno:"tno-latn-bo",tnp:"tnp-latn-vu",tnq:"tnq-latn-pr",tnr:"tnr-latn-sn",tns:"tns-latn-pg",tnt:"tnt-latn-id",tnv:"tnv-cakm-bd",tnw:"tnw-latn-id",tnx:"tnx-latn-sb",tny:"tny-latn-tz",to:"to-latn-to",tob:"tob-latn-ar",toc:"toc-latn-mx",tod:"tod-latn-gn",tof:"tof-latn-zz",tog:"tog-latn-mw",toh:"toh-latn-mz",toi:"toi-latn-zm",toj:"toj-latn-mx",tok:"tok-latn-001",tol:"tol-latn-us",tom:"tom-latn-id",too:"too-latn-mx",top:"top-latn-mx",toq:"toq-latn-zz",tor:"tor-latn-cd",tos:"tos-latn-mx",tou:"tou-latn-vn",tov:"tov-arab-ir",tow:"tow-latn-us",tox:"tox-latn-pw",toy:"toy-latn-id",toz:"toz-latn-cm",tpa:"tpa-latn-pg",tpc:"tpc-latn-mx",tpe:"tpe-latn-bd","tpe-beng":"tpe-beng-bd",tpf:"tpf-latn-id",tpg:"tpg-latn-id",tpi:"tpi-latn-pg",tpj:"tpj-latn-py",tpk:"tpk-latn-br",tpl:"tpl-latn-mx",tpm:"tpm-latn-zz",tpn:"tpn-latn-br",tpp:"tpp-latn-mx",tpr:"tpr-latn-br",tpt:"tpt-latn-mx",tpu:"tpu-khmr-kh",tpv:"tpv-latn-mp",tpx:"tpx-latn-mx",tpy:"tpy-latn-br",tpz:"tpz-latn-zz",tqb:"tqb-latn-br",tql:"tql-latn-vu",tqm:"tqm-latn-pg",tqn:"tqn-latn-us",tqo:"tqo-latn-zz",tqp:"tqp-latn-pg",tqt:"tqt-latn-mx",tqu:"tqu-latn-sb",tqw:"tqw-latn-us",tr:"tr-latn-tr",tra:"tra-arab-af",trb:"trb-latn-pg",trc:"trc-latn-mx",tre:"tre-latn-id",trf:"trf-latn-tt",trg:"trg-hebr-il",trh:"trh-latn-pg",tri:"tri-latn-sr",trj:"trj-latn-td",trl:"trl-latn-gb",trm:"trm-arab-af",trn:"trn-latn-bo",tro:"tro-latn-in",trp:"trp-latn-in","trp-beng":"trp-beng-in",trq:"trq-latn-mx",trr:"trr-latn-pe",trs:"trs-latn-mx",trt:"trt-latn-id",tru:"tru-latn-tr",trv:"trv-latn-tw",trw:"trw-arab-pk",trx:"trx-latn-my",try:"try-latn-in",trz:"trz-latn-br",ts:"ts-latn-za",tsa:"tsa-latn-cg",tsb:"tsb-latn-et",tsc:"tsc-latn-mz",tsd:"tsd-grek-gr",tsf:"tsf-deva-np",tsg:"tsg-latn-ph",tsh:"tsh-latn-cm",tsi:"tsi-latn-ca",tsj:"tsj-tibt-bt",tsl:"tsl-latn-vn",tsp:"tsp-latn-bf",tsr:"tsr-latn-vu",tst:"tst-latn-ml",tsu:"tsu-latn-tw",tsv:"tsv-latn-ga",tsw:"tsw-latn-zz",tsx:"tsx-latn-pg",tsz:"tsz-latn-mx",tt:"tt-cyrl-ru",ttb:"ttb-latn-ng",ttc:"ttc-latn-gt",ttd:"ttd-latn-zz",tte:"tte-latn-zz",ttf:"ttf-latn-cm",tth:"tth-laoo-la",tti:"tti-latn-id",ttj:"ttj-latn-ug",ttk:"ttk-latn-co",ttl:"ttl-latn-zm",ttm:"ttm-latn-ca",ttn:"ttn-latn-id",tto:"tto-laoo-la",ttp:"ttp-latn-id",ttr:"ttr-latn-zz",tts:"tts-thai-th",ttt:"ttt-latn-az",ttu:"ttu-latn-pg",ttv:"ttv-latn-pg",ttw:"ttw-latn-my",tty:"tty-latn-id",tua:"tua-latn-pg",tub:"tub-latn-us",tuc:"tuc-latn-pg",tud:"tud-latn-br",tue:"tue-latn-co",tuf:"tuf-latn-co",tug:"tug-latn-td",tuh:"tuh-latn-zz",tui:"tui-latn-cm",tuj:"tuj-latn-id",tul:"tul-latn-zz",tum:"tum-latn-mw",tun:"tun-latn-us",tuo:"tuo-latn-br",tuq:"tuq-latn-zz",tus:"tus-latn-ca",tuu:"tuu-latn-us",tuv:"tuv-latn-ke",tux:"tux-latn-br",tuy:"tuy-latn-ke",tuz:"tuz-latn-bf",tva:"tva-latn-sb",tvd:"tvd-latn-zz",tve:"tve-latn-id",tvk:"tvk-latn-vu",tvl:"tvl-latn-tv",tvm:"tvm-latn-id",tvn:"tvn-mymr-mm",tvo:"tvo-latn-id",tvs:"tvs-latn-ke",tvt:"tvt-latn-in",tvu:"tvu-latn-zz",tvw:"tvw-latn-id",tvx:"tvx-latn-tw",twa:"twa-latn-us",twb:"twb-latn-ph",twd:"twd-latn-nl",twe:"twe-latn-id",twf:"twf-latn-us",twg:"twg-latn-id",twh:"twh-latn-zz",twl:"twl-latn-mz",twm:"twm-deva-in",twn:"twn-latn-cm",two:"two-latn-bw",twp:"twp-latn-pg",twq:"twq-latn-ne",twr:"twr-latn-mx",twt:"twt-latn-br",twu:"twu-latn-id",tww:"tww-latn-pg",twx:"twx-latn-mz",twy:"twy-latn-id",txa:"txa-latn-my",txe:"txe-latn-id",txg:"txg-tang-cn",txi:"txi-latn-br",txj:"txj-latn-ng",txm:"txm-latn-id",txn:"txn-latn-id",txo:"txo-toto-in",txq:"txq-latn-id",txs:"txs-latn-id",txt:"txt-latn-id",txu:"txu-latn-br",txx:"txx-latn-my",txy:"txy-latn-mg",ty:"ty-latn-pf",tya:"tya-latn-zz",tye:"tye-latn-ng",tyh:"tyh-latn-vn",tyi:"tyi-latn-cg",tyj:"tyj-latn-vn",tyl:"tyl-latn-vn",tyn:"tyn-latn-id",typ:"typ-latn-au",tyr:"tyr-tavt-vn",tys:"tys-latn-vn",tyt:"tyt-latn-vn","tyt-tavt":"tyt-tavt-vn",tyu:"tyu-latn-bw",tyv:"tyv-cyrl-ru",tyx:"tyx-latn-cg",tyy:"tyy-latn-ng",tyz:"tyz-latn-vn",tzh:"tzh-latn-mx",tzj:"tzj-latn-gt",tzl:"tzl-latn-001",tzm:"tzm-latn-ma",tzn:"tzn-latn-id",tzo:"tzo-latn-mx",tzx:"tzx-latn-pg",uam:"uam-latn-br",uar:"uar-latn-pg",uba:"uba-latn-ng",ubi:"ubi-latn-td",ubl:"ubl-latn-ph",ubr:"ubr-latn-pg",ubu:"ubu-latn-zz",uda:"uda-latn-ng",ude:"ude-cyrl-ru",udg:"udg-mlym-in",udi:"udi-aghb-ru",udj:"udj-latn-id",udl:"udl-latn-cm",udm:"udm-cyrl-ru",udu:"udu-latn-sd",ues:"ues-latn-id",ufi:"ufi-latn-pg",ug:"ug-arab-cn","ug-cyrl":"ug-cyrl-kz","ug-kz":"ug-cyrl-kz","ug-mn":"ug-cyrl-mn",uga:"uga-ugar-sy",ugb:"ugb-latn-au",uge:"uge-latn-sb",ugh:"ugh-cyrl-ru",ugo:"ugo-thai-th",uha:"uha-latn-ng",uhn:"uhn-latn-id",uis:"uis-latn-pg",uiv:"uiv-latn-cm",uji:"uji-latn-ng",uk:"uk-cyrl-ua",uka:"uka-latn-id",ukg:"ukg-latn-pg",ukh:"ukh-latn-cf",uki:"uki-orya-in",ukk:"ukk-latn-mm",ukp:"ukp-latn-ng",ukq:"ukq-latn-ng",uku:"uku-latn-ng",ukv:"ukv-latn-ss",ukw:"ukw-latn-ng",uky:"uky-latn-au",ula:"ula-latn-ng",ulb:"ulb-latn-ng",ulc:"ulc-cyrl-ru",ule:"ule-latn-ar",ulf:"ulf-latn-id",uli:"uli-latn-fm",ulk:"ulk-latn-au",ulm:"ulm-latn-id",uln:"uln-latn-pg",ulu:"ulu-latn-id",ulw:"ulw-latn-ni",uma:"uma-latn-us",umb:"umb-latn-ao",umd:"umd-latn-au",umg:"umg-latn-au",umi:"umi-latn-my",umm:"umm-latn-ng",umn:"umn-latn-mm",umo:"umo-latn-br",ump:"ump-latn-au",umr:"umr-latn-au",ums:"ums-latn-id",una:"una-latn-pg",und:"en-latn-us","und-002":"en-latn-ng","und-003":"en-latn-us","und-005":"pt-latn-br","und-009":"en-latn-au","und-011":"en-latn-ng","und-013":"es-latn-mx","und-014":"sw-latn-tz","und-015":"ar-arab-eg","und-017":"sw-latn-cd","und-018":"en-latn-za","und-019":"en-latn-us","und-021":"en-latn-us","und-029":"es-latn-cu","und-030":"zh-hans-cn","und-034":"hi-deva-in","und-035":"id-latn-id","und-039":"it-latn-it","und-053":"en-latn-au","und-054":"en-latn-pg","und-057":"en-latn-gu","und-061":"sm-latn-ws","und-142":"zh-hans-cn","und-143":"uz-latn-uz","und-145":"ar-arab-sa","und-150":"ru-cyrl-ru","und-151":"ru-cyrl-ru","und-154":"en-latn-gb","und-155":"de-latn-de","und-202":"en-latn-ng","und-419":"es-latn-419","und-ad":"ca-latn-ad","und-adlm":"ff-adlm-gn","und-ae":"ar-arab-ae","und-af":"fa-arab-af","und-aghb":"udi-aghb-ru","und-ahom":"aho-ahom-in","und-al":"sq-latn-al","und-am":"hy-armn-am","und-ao":"pt-latn-ao","und-aq":"und-latn-aq","und-ar":"es-latn-ar","und-arab":"ar-arab-eg","und-arab-cc":"ms-arab-cc","und-arab-cn":"ug-arab-cn","und-arab-gb":"ur-arab-gb","und-arab-id":"ms-arab-id","und-arab-in":"ur-arab-in","und-arab-kh":"cja-arab-kh","und-arab-mm":"rhg-arab-mm","und-arab-mn":"kk-arab-mn","und-arab-mu":"ur-arab-mu","und-arab-ng":"ha-arab-ng","und-arab-pk":"ur-arab-pk","und-arab-tg":"apd-arab-tg","und-arab-th":"mfa-arab-th","und-arab-tj":"fa-arab-tj","und-arab-tr":"apc-arab-tr","und-arab-yt":"swb-arab-yt","und-armi":"arc-armi-ir","und-armn":"hy-armn-am","und-as":"sm-latn-as","und-at":"de-latn-at","und-avst":"ae-avst-ir","und-aw":"nl-latn-aw","und-ax":"sv-latn-ax","und-az":"az-latn-az","und-ba":"bs-latn-ba","und-bali":"ban-bali-id","und-bamu":"bax-bamu-cm","und-bass":"bsq-bass-lr","und-batk":"bbc-batk-id","und-bd":"bn-beng-bd","und-be":"nl-latn-be","und-beng":"bn-beng-bd","und-bf":"fr-latn-bf","und-bg":"bg-cyrl-bg","und-bh":"ar-arab-bh","und-bhks":"sa-bhks-in","und-bi":"rn-latn-bi","und-bj":"fr-latn-bj","und-bl":"fr-latn-bl","und-bn":"ms-latn-bn","und-bo":"es-latn-bo","und-bopo":"zh-bopo-tw","und-bq":"pap-latn-bq","und-br":"pt-latn-br","und-brah":"pka-brah-in","und-brai":"fr-brai-fr","und-bt":"dz-tibt-bt","und-bugi":"bug-bugi-id","und-buhd":"bku-buhd-ph","und-bv":"und-latn-bv","und-by":"be-cyrl-by","und-cakm":"ccp-cakm-bd","und-cans":"iu-cans-ca","und-cari":"xcr-cari-tr","und-cd":"sw-latn-cd","und-cf":"fr-latn-cf","und-cg":"fr-latn-cg","und-ch":"de-latn-ch","und-cham":"cjm-cham-vn","und-cher":"chr-cher-us","und-chrs":"xco-chrs-uz","und-ci":"fr-latn-ci","und-cl":"es-latn-cl","und-cm":"fr-latn-cm","und-cn":"zh-hans-cn","und-co":"es-latn-co","und-copt":"cop-copt-eg","und-cp":"und-latn-cp","und-cpmn":"und-cpmn-cy","und-cpmn-cy":"und-cpmn-cy","und-cprt":"grc-cprt-cy","und-cr":"es-latn-cr","und-cu":"es-latn-cu","und-cv":"pt-latn-cv","und-cw":"pap-latn-cw","und-cy":"el-grek-cy","und-cyrl":"ru-cyrl-ru","und-cyrl-al":"mk-cyrl-al","und-cyrl-ba":"sr-cyrl-ba","und-cyrl-ge":"ab-cyrl-ge","und-cyrl-gr":"mk-cyrl-gr","und-cyrl-md":"uk-cyrl-md","und-cyrl-ro":"bg-cyrl-ro","und-cyrl-sk":"uk-cyrl-sk","und-cyrl-tr":"kbd-cyrl-tr","und-cyrl-xk":"sr-cyrl-xk","und-cz":"cs-latn-cz","und-de":"de-latn-de","und-deva":"hi-deva-in","und-deva-bt":"ne-deva-bt","und-deva-fj":"hif-deva-fj","und-deva-mu":"bho-deva-mu","und-deva-pk":"btv-deva-pk","und-diak":"dv-diak-mv","und-dj":"aa-latn-dj","und-dk":"da-latn-dk","und-do":"es-latn-do","und-dogr":"doi-dogr-in","und-dupl":"fr-dupl-fr","und-dz":"ar-arab-dz","und-ea":"es-latn-ea","und-ec":"es-latn-ec","und-ee":"et-latn-ee","und-eg":"ar-arab-eg","und-egyp":"egy-egyp-eg","und-eh":"ar-arab-eh","und-elba":"sq-elba-al","und-elym":"arc-elym-ir","und-er":"ti-ethi-er","und-es":"es-latn-es","und-et":"am-ethi-et","und-ethi":"am-ethi-et","und-eu":"en-latn-ie","und-ez":"de-latn-ez","und-fi":"fi-latn-fi","und-fo":"fo-latn-fo","und-fr":"fr-latn-fr","und-ga":"fr-latn-ga","und-ge":"ka-geor-ge","und-geor":"ka-geor-ge","und-gf":"fr-latn-gf","und-gh":"ak-latn-gh","und-gl":"kl-latn-gl","und-glag":"cu-glag-bg","und-gn":"fr-latn-gn","und-gong":"wsg-gong-in","und-gonm":"esg-gonm-in","und-goth":"got-goth-ua","und-gp":"fr-latn-gp","und-gq":"es-latn-gq","und-gr":"el-grek-gr","und-gran":"sa-gran-in","und-grek":"el-grek-gr","und-grek-tr":"bgx-grek-tr","und-gs":"und-latn-gs","und-gt":"es-latn-gt","und-gujr":"gu-gujr-in","und-guru":"pa-guru-in","und-gw":"pt-latn-gw","und-hanb":"zh-hanb-tw","und-hang":"ko-hang-kr","und-hani":"zh-hani-cn","und-hano":"hnn-hano-ph","und-hans":"zh-hans-cn","und-hant":"zh-hant-tw","und-hant-ca":"yue-hant-ca","und-hebr":"he-hebr-il","und-hebr-se":"yi-hebr-se","und-hebr-ua":"yi-hebr-ua","und-hebr-us":"yi-hebr-us","und-hira":"ja-hira-jp","und-hk":"zh-hant-hk","und-hluw":"hlu-hluw-tr","und-hm":"und-latn-hm","und-hmng":"hnj-hmng-la","und-hmnp":"hnj-hmnp-us","und-hn":"es-latn-hn","und-hr":"hr-latn-hr","und-ht":"ht-latn-ht","und-hu":"hu-latn-hu","und-hung":"hu-hung-hu","und-ic":"es-latn-ic","und-id":"id-latn-id","und-il":"he-hebr-il","und-in":"hi-deva-in","und-iq":"ar-arab-iq","und-ir":"fa-arab-ir","und-is":"is-latn-is","und-it":"it-latn-it","und-ital":"ett-ital-it","und-jamo":"ko-jamo-kr","und-java":"jv-java-id","und-jo":"ar-arab-jo","und-jp":"ja-jpan-jp","und-jpan":"ja-jpan-jp","und-kali":"eky-kali-mm","und-kana":"ja-kana-jp","und-kawi":"kaw-kawi-id","und-ke":"sw-latn-ke","und-kg":"ky-cyrl-kg","und-kh":"km-khmr-kh","und-khar":"pra-khar-pk","und-khmr":"km-khmr-kh","und-khoj":"sd-khoj-in","und-kits":"zkt-kits-cn","und-km":"ar-arab-km","und-knda":"kn-knda-in","und-kore":"ko-kore-kr","und-kp":"ko-kore-kp","und-kr":"ko-kore-kr","und-kthi":"bho-kthi-in","und-kw":"ar-arab-kw","und-kz":"ru-cyrl-kz","und-la":"lo-laoo-la","und-lana":"nod-lana-th","und-laoo":"lo-laoo-la","und-laoo-au":"hnj-laoo-au","und-laoo-cn":"hnj-laoo-cn","und-laoo-fr":"hnj-laoo-fr","und-laoo-gf":"hnj-laoo-gf","und-laoo-mm":"hnj-laoo-mm","und-laoo-sr":"hnj-laoo-sr","und-laoo-th":"hnj-laoo-th","und-laoo-us":"hnj-laoo-us","und-laoo-vn":"hnj-laoo-vn","und-latn-af":"tk-latn-af","und-latn-am":"ku-latn-am","und-latn-cn":"za-latn-cn","und-latn-cy":"tr-latn-cy","und-latn-dz":"fr-latn-dz","und-latn-et":"en-latn-et","und-latn-ge":"ku-latn-ge","und-latn-ir":"tk-latn-ir","und-latn-km":"fr-latn-km","und-latn-ma":"fr-latn-ma","und-latn-mk":"sq-latn-mk","und-latn-mm":"kac-latn-mm","und-latn-mo":"pt-latn-mo","und-latn-mr":"fr-latn-mr","und-latn-ru":"krl-latn-ru","und-latn-sy":"fr-latn-sy","und-latn-tn":"fr-latn-tn","und-latn-tw":"trv-latn-tw","und-latn-ua":"pl-latn-ua","und-lb":"ar-arab-lb","und-lepc":"lep-lepc-in","und-li":"de-latn-li","und-limb":"lif-limb-in","und-lina":"lab-lina-gr","und-linb":"grc-linb-gr","und-lisu":"lis-lisu-cn","und-lk":"si-sinh-lk","und-ls":"st-latn-ls","und-lt":"lt-latn-lt","und-lu":"fr-latn-lu","und-lv":"lv-latn-lv","und-ly":"ar-arab-ly","und-lyci":"xlc-lyci-tr","und-lydi":"xld-lydi-tr","und-ma":"ar-arab-ma","und-mahj":"hi-mahj-in","und-maka":"mak-maka-id","und-mand":"myz-mand-ir","und-mani":"xmn-mani-cn","und-marc":"bo-marc-cn","und-mc":"fr-latn-mc","und-md":"ro-latn-md","und-me":"sr-latn-me","und-medf":"dmf-medf-ng","und-mend":"men-mend-sl","und-merc":"xmr-merc-sd","und-mero":"xmr-mero-sd","und-mf":"fr-latn-mf","und-mg":"mg-latn-mg","und-mk":"mk-cyrl-mk","und-ml":"bm-latn-ml","und-mlym":"ml-mlym-in","und-mm":"my-mymr-mm","und-mn":"mn-cyrl-mn","und-mo":"zh-hant-mo","und-modi":"mr-modi-in","und-mong":"mn-mong-cn","und-mq":"fr-latn-mq","und-mr":"ar-arab-mr","und-mroo":"mro-mroo-bd","und-mt":"mt-latn-mt","und-mtei":"mni-mtei-in","und-mu":"mfe-latn-mu","und-mult":"skr-mult-pk","und-mv":"dv-thaa-mv","und-mx":"es-latn-mx","und-my":"ms-latn-my","und-mymr":"my-mymr-mm","und-mymr-in":"kht-mymr-in","und-mymr-th":"mnw-mymr-th","und-mz":"pt-latn-mz","und-na":"af-latn-na","und-nagm":"unr-nagm-in","und-nand":"sa-nand-in","und-narb":"xna-narb-sa","und-nbat":"arc-nbat-jo","und-nc":"fr-latn-nc","und-ne":"ha-latn-ne","und-newa":"new-newa-np","und-ni":"es-latn-ni","und-nkoo":"man-nkoo-gn","und-nl":"nl-latn-nl","und-no":"nb-latn-no","und-np":"ne-deva-np","und-nshu":"zhx-nshu-cn","und-ogam":"sga-ogam-ie","und-olck":"sat-olck-in","und-om":"ar-arab-om","und-orkh":"otk-orkh-mn","und-orya":"or-orya-in","und-osge":"osa-osge-us","und-osma":"so-osma-so","und-ougr":"oui-ougr-143","und-pa":"es-latn-pa","und-palm":"arc-palm-sy","und-pauc":"ctd-pauc-mm","und-pe":"es-latn-pe","und-perm":"kv-perm-ru","und-pf":"fr-latn-pf","und-pg":"tpi-latn-pg","und-ph":"fil-latn-ph","und-phag":"lzh-phag-cn","und-phli":"pal-phli-ir","und-phlp":"pal-phlp-cn","und-phnx":"phn-phnx-lb","und-pk":"ur-arab-pk","und-pl":"pl-latn-pl","und-plrd":"hmd-plrd-cn","und-pm":"fr-latn-pm","und-pr":"es-latn-pr","und-prti":"xpr-prti-ir","und-ps":"ar-arab-ps","und-pt":"pt-latn-pt","und-pw":"pau-latn-pw","und-py":"gn-latn-py","und-qa":"ar-arab-qa","und-qo":"en-latn-dg","und-re":"fr-latn-re","und-rjng":"rej-rjng-id","und-ro":"ro-latn-ro","und-rohg":"rhg-rohg-mm","und-rs":"sr-cyrl-rs","und-ru":"ru-cyrl-ru","und-runr":"non-runr-se","und-rw":"rw-latn-rw","und-sa":"ar-arab-sa","und-samr":"smp-samr-il","und-sarb":"xsa-sarb-ye","und-saur":"saz-saur-in","und-sc":"fr-latn-sc","und-sd":"ar-arab-sd","und-se":"sv-latn-se","und-sgnw":"ase-sgnw-us","und-shaw":"en-shaw-gb","und-shrd":"sa-shrd-in","und-si":"sl-latn-si","und-sidd":"sa-sidd-in","und-sind":"sd-sind-in","und-sinh":"si-sinh-lk","und-sj":"nb-latn-sj","und-sk":"sk-latn-sk","und-sm":"it-latn-sm","und-sn":"fr-latn-sn","und-so":"so-latn-so","und-sogd":"sog-sogd-uz","und-sogo":"sog-sogo-uz","und-sora":"srb-sora-in","und-soyo":"cmg-soyo-mn","und-sr":"nl-latn-sr","und-st":"pt-latn-st","und-sund":"su-sund-id","und-sv":"es-latn-sv","und-sy":"ar-arab-sy","und-sylo":"syl-sylo-bd","und-syrc":"syr-syrc-iq","und-tagb":"tbw-tagb-ph","und-takr":"doi-takr-in","und-tale":"tdd-tale-cn","und-talu":"khb-talu-cn","und-taml":"ta-taml-in","und-tang":"txg-tang-cn","und-tavt":"blt-tavt-vn","und-td":"fr-latn-td","und-telu":"te-telu-in","und-tf":"fr-latn-tf","und-tfng":"zgh-tfng-ma","und-tg":"fr-latn-tg","und-tglg":"fil-tglg-ph","und-th":"th-thai-th","und-thaa":"dv-thaa-mv","und-thai":"th-thai-th","und-thai-cn":"lcp-thai-cn","und-thai-kh":"kdt-thai-kh","und-thai-la":"kdt-thai-la","und-tibt":"bo-tibt-cn","und-tirh":"mai-tirh-in","und-tj":"tg-cyrl-tj","und-tk":"tkl-latn-tk","und-tl":"pt-latn-tl","und-tm":"tk-latn-tm","und-tn":"ar-arab-tn","und-tnsa":"nst-tnsa-in","und-to":"to-latn-to","und-toto":"txo-toto-in","und-tr":"tr-latn-tr","und-tv":"tvl-latn-tv","und-tw":"zh-hant-tw","und-tz":"sw-latn-tz","und-ua":"uk-cyrl-ua","und-ug":"sw-latn-ug","und-ugar":"uga-ugar-sy","und-uy":"es-latn-uy","und-uz":"uz-latn-uz","und-va":"it-latn-va","und-vaii":"vai-vaii-lr","und-ve":"es-latn-ve","und-vith":"sq-vith-al","und-vn":"vi-latn-vn","und-vu":"bi-latn-vu","und-wara":"hoc-wara-in","und-wcho":"nnp-wcho-in","und-wf":"fr-latn-wf","und-ws":"sm-latn-ws","und-xk":"sq-latn-xk","und-xpeo":"peo-xpeo-ir","und-xsux":"akk-xsux-iq","und-ye":"ar-arab-ye","und-yezi":"ku-yezi-ge","und-yiii":"ii-yiii-cn","und-yt":"fr-latn-yt","und-zanb":"cmg-zanb-mn","und-zw":"sn-latn-zw",une:"une-latn-ng",ung:"ung-latn-au",uni:"uni-latn-pg",unk:"unk-latn-br",unm:"unm-latn-us",unn:"unn-latn-au",unr:"unr-beng-in","unr-deva":"unr-deva-np","unr-np":"unr-deva-np",unu:"unu-latn-pg",unx:"unx-beng-in",unz:"unz-latn-id",uok:"uok-latn-zz",uon:"uon-latn-tw",upi:"upi-latn-pg",upv:"upv-latn-vu",ur:"ur-arab-pk",ura:"ura-latn-pe",urb:"urb-latn-br",urc:"urc-latn-au",ure:"ure-latn-bo",urf:"urf-latn-au",urg:"urg-latn-pg",urh:"urh-latn-ng",uri:"uri-latn-zz",urk:"urk-thai-th",urm:"urm-latn-pg",urn:"urn-latn-id",uro:"uro-latn-pg",urp:"urp-latn-br",urr:"urr-latn-vu",urt:"urt-latn-zz",uru:"uru-latn-br",urv:"urv-latn-pg",urw:"urw-latn-zz",urx:"urx-latn-pg",ury:"ury-latn-id",urz:"urz-latn-br",usa:"usa-latn-zz",ush:"ush-arab-pk",usi:"usi-latn-bd","usi-beng":"usi-beng-bd",usk:"usk-latn-cm",usp:"usp-latn-gt",uss:"uss-latn-ng",usu:"usu-latn-pg",uta:"uta-latn-ng",ute:"ute-latn-us",uth:"uth-latn-zz",utp:"utp-latn-sb",utr:"utr-latn-zz",utu:"utu-latn-pg",uum:"uum-grek-ge","uum-cyrl":"uum-cyrl-ge",uur:"uur-latn-vu",uve:"uve-latn-nc",uvh:"uvh-latn-zz",uvl:"uvl-latn-zz",uwa:"uwa-latn-au",uya:"uya-latn-ng",uz:"uz-latn-uz","uz-af":"uz-arab-af","uz-arab":"uz-arab-af","uz-cn":"uz-cyrl-cn",uzs:"uzs-arab-af",vaa:"vaa-taml-in",vae:"vae-latn-cf",vaf:"vaf-arab-ir",vag:"vag-latn-zz",vah:"vah-deva-in",vai:"vai-vaii-lr",vaj:"vaj-latn-na",val:"val-latn-pg",vam:"vam-latn-pg",van:"van-latn-zz",vao:"vao-latn-vu",vap:"vap-latn-in",var:"var-latn-mx",vas:"vas-deva-in","vas-gujr":"vas-gujr-in",vau:"vau-latn-cd",vav:"vav-deva-in","vav-gujr":"vav-gujr-in",vay:"vay-deva-np",vbb:"vbb-latn-id",vbk:"vbk-latn-ph",ve:"ve-latn-za",vec:"vec-latn-it",vem:"vem-latn-ng",veo:"veo-latn-us",vep:"vep-latn-ru",ver:"ver-latn-ng",vgr:"vgr-arab-pk",vi:"vi-latn-vn",vic:"vic-latn-sx",vid:"vid-latn-tz",vif:"vif-latn-cg",vig:"vig-latn-bf",vil:"vil-latn-ar",vin:"vin-latn-tz",vit:"vit-latn-ng",viv:"viv-latn-zz",vka:"vka-latn-au",vkj:"vkj-latn-td",vkk:"vkk-latn-id",vkl:"vkl-latn-id",vkm:"vkm-latn-br",vkn:"vkn-latn-ng",vko:"vko-latn-id",vkp:"vkp-latn-in","vkp-deva":"vkp-deva-in",vkt:"vkt-latn-id",vku:"vku-latn-au",vkz:"vkz-latn-ng",vlp:"vlp-latn-vu",vls:"vls-latn-be",vma:"vma-latn-au",vmb:"vmb-latn-au",vmc:"vmc-latn-mx",vmd:"vmd-knda-in",vme:"vme-latn-id",vmf:"vmf-latn-de",vmg:"vmg-latn-pg",vmh:"vmh-arab-ir",vmi:"vmi-latn-au",vmj:"vmj-latn-mx",vmk:"vmk-latn-mz",vml:"vml-latn-au",vmm:"vmm-latn-mx",vmp:"vmp-latn-mx",vmq:"vmq-latn-mx",vmr:"vmr-latn-mz",vms:"vms-latn-id",vmu:"vmu-latn-au",vmw:"vmw-latn-mz",vmx:"vmx-latn-mx",vmy:"vmy-latn-mx",vmz:"vmz-latn-mx",vnk:"vnk-latn-sb",vnm:"vnm-latn-vu",vnp:"vnp-latn-vu",vo:"vo-latn-001",vor:"vor-latn-ng",vot:"vot-latn-ru",vra:"vra-latn-vu",vro:"vro-latn-ee",vrs:"vrs-latn-sb",vrt:"vrt-latn-vu",vto:"vto-latn-id",vum:"vum-latn-ga",vun:"vun-latn-tz",vut:"vut-latn-zz",vwa:"vwa-latn-cn","vwa-mymr":"vwa-mymr-cn",wa:"wa-latn-be",waa:"waa-latn-us",wab:"wab-latn-pg",wac:"wac-latn-us",wad:"wad-latn-id",wae:"wae-latn-ch",waf:"waf-latn-br",wag:"wag-latn-pg",wah:"wah-latn-id",wai:"wai-latn-id",waj:"waj-latn-zz",wal:"wal-ethi-et",wam:"wam-latn-us",wan:"wan-latn-zz",wap:"wap-latn-gy",waq:"waq-latn-au",war:"war-latn-ph",was:"was-latn-us",wat:"wat-latn-pg",wau:"wau-latn-br",wav:"wav-latn-ng",waw:"waw-latn-br",wax:"wax-latn-pg",way:"way-latn-sr",waz:"waz-latn-pg",wba:"wba-latn-ve",wbb:"wbb-latn-id",wbe:"wbe-latn-id",wbf:"wbf-latn-bf",wbh:"wbh-latn-tz",wbi:"wbi-latn-tz",wbj:"wbj-latn-tz",wbk:"wbk-arab-af",wbl:"wbl-latn-pk","wbl-arab":"wbl-arab-af","wbl-cyrl":"wbl-cyrl-tj",wbm:"wbm-latn-cn",wbp:"wbp-latn-au",wbq:"wbq-telu-in",wbr:"wbr-deva-in",wbt:"wbt-latn-au",wbv:"wbv-latn-au",wbw:"wbw-latn-id",wca:"wca-latn-br",wci:"wci-latn-zz",wdd:"wdd-latn-ga",wdg:"wdg-latn-pg",wdj:"wdj-latn-au",wdk:"wdk-latn-au",wdt:"wdt-latn-ca",wdu:"wdu-latn-au",wdy:"wdy-latn-au",wec:"wec-latn-ci",wed:"wed-latn-pg",weg:"weg-latn-au",weh:"weh-latn-cm",wei:"wei-latn-pg",wem:"wem-latn-bj",weo:"weo-latn-id",wep:"wep-latn-de",wer:"wer-latn-zz",wes:"wes-latn-cm",wet:"wet-latn-id",weu:"weu-latn-mm",wew:"wew-latn-id",wfg:"wfg-latn-id",wga:"wga-latn-au",wgb:"wgb-latn-pg",wgg:"wgg-latn-au",wgi:"wgi-latn-zz",wgo:"wgo-latn-id",wgu:"wgu-latn-au",wgy:"wgy-latn-au",wha:"wha-latn-id",whg:"whg-latn-zz",whk:"whk-latn-id",whu:"whu-latn-id",wib:"wib-latn-zz",wic:"wic-latn-us",wie:"wie-latn-au",wif:"wif-latn-au",wig:"wig-latn-au",wih:"wih-latn-au",wii:"wii-latn-pg",wij:"wij-latn-au",wik:"wik-latn-au",wil:"wil-latn-au",wim:"wim-latn-au",win:"win-latn-us",wir:"wir-latn-br",wiu:"wiu-latn-zz",wiv:"wiv-latn-zz",wiy:"wiy-latn-us",wja:"wja-latn-zz",wji:"wji-latn-zz",wka:"wka-latn-tz",wkd:"wkd-latn-id",wkr:"wkr-latn-au",wkw:"wkw-latn-au",wky:"wky-latn-au",wla:"wla-latn-pg",wlg:"wlg-latn-au",wlh:"wlh-latn-tl",wli:"wli-latn-id",wlm:"wlm-latn-gb",wlo:"wlo-arab-id",wlr:"wlr-latn-vu",wls:"wls-latn-wf",wlu:"wlu-latn-au",wlv:"wlv-latn-ar",wlw:"wlw-latn-id",wlx:"wlx-latn-gh",wma:"wma-latn-ng",wmb:"wmb-latn-au",wmc:"wmc-latn-pg",wmd:"wmd-latn-br",wme:"wme-deva-np",wmh:"wmh-latn-tl",wmi:"wmi-latn-au",wmm:"wmm-latn-id",wmn:"wmn-latn-nc",wmo:"wmo-latn-zz",wms:"wms-latn-id",wmt:"wmt-latn-au",wmw:"wmw-latn-mz","wmw-arab":"wmw-arab-mz",wmx:"wmx-latn-pg",wnb:"wnb-latn-pg",wnc:"wnc-latn-zz",wnd:"wnd-latn-au",wne:"wne-arab-pk",wng:"wng-latn-id",wni:"wni-arab-km",wnk:"wnk-latn-id",wnm:"wnm-latn-au",wnn:"wnn-latn-au",wno:"wno-latn-id",wnp:"wnp-latn-pg",wnu:"wnu-latn-zz",wnw:"wnw-latn-us",wny:"wny-latn-au",wo:"wo-latn-sn",woa:"woa-latn-au",wob:"wob-latn-zz",woc:"woc-latn-pg",wod:"wod-latn-id",woe:"woe-latn-fm",wof:"wof-latn-gm","wof-arab":"wof-arab-gm",wog:"wog-latn-pg",woi:"woi-latn-id",wok:"wok-latn-cm",wom:"wom-latn-ng",won:"won-latn-cd",woo:"woo-latn-id",wor:"wor-latn-id",wos:"wos-latn-zz",wow:"wow-latn-id",wpc:"wpc-latn-ve",wrb:"wrb-latn-au",wrg:"wrg-latn-au",wrh:"wrh-latn-au",wri:"wri-latn-au",wrk:"wrk-latn-au",wrl:"wrl-latn-au",wrm:"wrm-latn-au",wro:"wro-latn-au",wrp:"wrp-latn-id",wrr:"wrr-latn-au",wrs:"wrs-latn-zz",wru:"wru-latn-id",wrv:"wrv-latn-pg",wrw:"wrw-latn-au",wrx:"wrx-latn-id",wrz:"wrz-latn-au",wsa:"wsa-latn-id",wsg:"wsg-gong-in",wsi:"wsi-latn-vu",wsk:"wsk-latn-zz",wsr:"wsr-latn-pg",wss:"wss-latn-gh",wsu:"wsu-latn-br",wsv:"wsv-arab-af",wtf:"wtf-latn-pg",wth:"wth-latn-au",wti:"wti-latn-et",wtk:"wtk-latn-pg",wtm:"wtm-deva-in",wtw:"wtw-latn-id","wtw-bugi":"wtw-bugi-id",wua:"wua-latn-au",wub:"wub-latn-au",wud:"wud-latn-tg",wul:"wul-latn-id",wum:"wum-latn-ga",wun:"wun-latn-tz",wur:"wur-latn-au",wut:"wut-latn-pg",wuu:"wuu-hans-cn",wuv:"wuv-latn-zz",wux:"wux-latn-au",wuy:"wuy-latn-id",wwa:"wwa-latn-zz",wwb:"wwb-latn-au",wwo:"wwo-latn-vu",wwr:"wwr-latn-au",www:"www-latn-cm",wxw:"wxw-latn-au",wyb:"wyb-latn-au",wyi:"wyi-latn-au",wym:"wym-latn-pl",wyn:"wyn-latn-us",wyr:"wyr-latn-br",wyy:"wyy-latn-fj",xaa:"xaa-latn-es",xab:"xab-latn-ng",xai:"xai-latn-br",xaj:"xaj-latn-br",xak:"xak-latn-ve",xal:"xal-cyrl-ru",xam:"xam-latn-za",xan:"xan-ethi-et",xao:"xao-latn-vn",xar:"xar-latn-pg",xas:"xas-cyrl-ru",xat:"xat-latn-br",xau:"xau-latn-id",xav:"xav-latn-br",xaw:"xaw-latn-us",xay:"xay-latn-id",xbb:"xbb-latn-au",xbd:"xbd-latn-au",xbe:"xbe-latn-au",xbg:"xbg-latn-au",xbi:"xbi-latn-zz",xbj:"xbj-latn-au",xbm:"xbm-latn-fr",xbn:"xbn-latn-my",xbp:"xbp-latn-au",xbr:"xbr-latn-id",xbw:"xbw-latn-br",xby:"xby-latn-au",xch:"xch-latn-us",xco:"xco-chrs-uz",xcr:"xcr-cari-tr",xda:"xda-latn-au",xdk:"xdk-latn-au",xdo:"xdo-latn-ao",xdq:"xdq-cyrl-ru",xdy:"xdy-latn-id",xed:"xed-latn-cm",xeg:"xeg-latn-za",xem:"xem-latn-id",xer:"xer-latn-br",xes:"xes-latn-zz",xet:"xet-latn-br",xeu:"xeu-latn-pg",xgb:"xgb-latn-ci",xgd:"xgd-latn-au",xgg:"xgg-latn-au",xgi:"xgi-latn-au",xgm:"xgm-latn-au",xgu:"xgu-latn-au",xgw:"xgw-latn-au",xh:"xh-latn-za",xhe:"xhe-arab-pk",xhm:"xhm-khmr-kh",xhv:"xhv-latn-vn",xii:"xii-latn-za",xin:"xin-latn-gt",xir:"xir-latn-br",xis:"xis-orya-in",xiy:"xiy-latn-br",xjb:"xjb-latn-au",xjt:"xjt-latn-au",xka:"xka-arab-pk",xkb:"xkb-latn-bj",xkc:"xkc-arab-ir",xkd:"xkd-latn-id",xke:"xke-latn-id",xkg:"xkg-latn-ml",xkj:"xkj-arab-ir",xkl:"xkl-latn-id",xkn:"xkn-latn-id",xkp:"xkp-arab-ir",xkq:"xkq-latn-id",xkr:"xkr-latn-br",xks:"xks-latn-id",xkt:"xkt-latn-gh",xku:"xku-latn-cg",xkv:"xkv-latn-bw",xkw:"xkw-latn-id",xkx:"xkx-latn-pg",xky:"xky-latn-my",xkz:"xkz-latn-bt",xla:"xla-latn-zz",xlc:"xlc-lyci-tr",xld:"xld-lydi-tr",xly:"xly-elym-ir",xma:"xma-latn-so",xmb:"xmb-latn-cm",xmc:"xmc-latn-mz",xmd:"xmd-latn-cm",xmf:"xmf-geor-ge",xmg:"xmg-latn-cm",xmh:"xmh-latn-au",xmj:"xmj-latn-cm",xmm:"xmm-latn-id",xmn:"xmn-mani-cn",xmo:"xmo-latn-br",xmp:"xmp-latn-au",xmq:"xmq-latn-au",xmr:"xmr-merc-sd",xmt:"xmt-latn-id",xmu:"xmu-latn-au",xmv:"xmv-latn-mg",xmw:"xmw-latn-mg",xmx:"xmx-latn-id",xmy:"xmy-latn-au",xmz:"xmz-latn-id",xna:"xna-narb-sa",xnb:"xnb-latn-tw",xni:"xni-latn-au",xnj:"xnj-latn-tz",xnk:"xnk-latn-au",xnm:"xnm-latn-au",xnn:"xnn-latn-ph",xnq:"xnq-latn-mz",xnr:"xnr-deva-in",xnt:"xnt-latn-us",xnu:"xnu-latn-au",xny:"xny-latn-au",xnz:"xnz-latn-eg","xnz-arab":"xnz-arab-eg",xoc:"xoc-latn-ng",xod:"xod-latn-id",xog:"xog-latn-ug",xoi:"xoi-latn-pg",xok:"xok-latn-br",xom:"xom-latn-sd","xom-ethi":"xom-ethi-et",xon:"xon-latn-zz",xoo:"xoo-latn-br",xop:"xop-latn-pg",xor:"xor-latn-br",xow:"xow-latn-pg",xpa:"xpa-latn-au",xpb:"xpb-latn-au",xpd:"xpd-latn-au",xpf:"xpf-latn-au",xpg:"xpg-grek-tr",xph:"xph-latn-au",xpi:"xpi-ogam-gb",xpj:"xpj-latn-au",xpk:"xpk-latn-br",xpl:"xpl-latn-au",xpm:"xpm-cyrl-ru",xpn:"xpn-latn-br",xpo:"xpo-latn-mx",xpq:"xpq-latn-us",xpr:"xpr-prti-ir",xpt:"xpt-latn-au",xpv:"xpv-latn-au",xpw:"xpw-latn-au",xpx:"xpx-latn-au",xpz:"xpz-latn-au",xra:"xra-latn-br",xrb:"xrb-latn-zz",xrd:"xrd-latn-au",xre:"xre-latn-br",xrg:"xrg-latn-au",xri:"xri-latn-br",xrm:"xrm-cyrl-ru",xrn:"xrn-cyrl-ru",xrr:"xrr-latn-it",xru:"xru-latn-au",xrw:"xrw-latn-pg",xsa:"xsa-sarb-ye",xsb:"xsb-latn-ph",xse:"xse-latn-id",xsh:"xsh-latn-ng",xsi:"xsi-latn-zz",xsm:"xsm-latn-zz",xsn:"xsn-latn-ng",xsp:"xsp-latn-pg",xsq:"xsq-latn-mz",xsr:"xsr-deva-np",xss:"xss-cyrl-ru",xsu:"xsu-latn-ve",xsy:"xsy-latn-tw",xta:"xta-latn-mx",xtb:"xtb-latn-mx",xtc:"xtc-latn-sd",xtd:"xtd-latn-mx",xte:"xte-latn-id",xth:"xth-latn-au",xti:"xti-latn-mx",xtj:"xtj-latn-mx",xtl:"xtl-latn-mx",xtm:"xtm-latn-mx",xtn:"xtn-latn-mx",xtp:"xtp-latn-mx",xts:"xts-latn-mx",xtt:"xtt-latn-mx",xtu:"xtu-latn-mx",xtv:"xtv-latn-au",xtw:"xtw-latn-br",xty:"xty-latn-mx",xub:"xub-taml-in","xub-knda":"xub-knda-in","xub-mlym":"xub-mlym-in",xud:"xud-latn-au",xuj:"xuj-taml-in",xul:"xul-latn-au",xum:"xum-latn-it","xum-ital":"xum-ital-it",xun:"xun-latn-au",xuo:"xuo-latn-td",xut:"xut-latn-au",xuu:"xuu-latn-na",xve:"xve-ital-it",xvi:"xvi-arab-af",xvn:"xvn-latn-es",xvo:"xvo-latn-it",xvs:"xvs-latn-it",xwa:"xwa-latn-br",xwd:"xwd-latn-au",xwe:"xwe-latn-zz",xwj:"xwj-latn-au",xwk:"xwk-latn-au",xwl:"xwl-latn-bj",xwo:"xwo-cyrl-ru",xwr:"xwr-latn-id",xwt:"xwt-latn-au",xww:"xww-latn-au",xxb:"xxb-latn-gh",xxk:"xxk-latn-id",xxm:"xxm-latn-au",xxr:"xxr-latn-br",xxt:"xxt-latn-id",xya:"xya-latn-au",xyb:"xyb-latn-au",xyj:"xyj-latn-au",xyk:"xyk-latn-au",xyl:"xyl-latn-br",xyt:"xyt-latn-au",xyy:"xyy-latn-au",xzh:"xzh-marc-cn",xzp:"xzp-latn-mx",yaa:"yaa-latn-pe",yab:"yab-latn-br",yac:"yac-latn-id",yad:"yad-latn-pe",yae:"yae-latn-ve",yaf:"yaf-latn-cd",yag:"yag-latn-cl",yai:"yai-cyrl-tj",yaj:"yaj-latn-cf",yak:"yak-latn-us",yal:"yal-latn-gn","yal-arab":"yal-arab-gn",yam:"yam-latn-zz",yan:"yan-latn-ni",yao:"yao-latn-mz",yap:"yap-latn-fm",yaq:"yaq-latn-mx",yar:"yar-latn-ve",yas:"yas-latn-zz",yat:"yat-latn-zz",yau:"yau-latn-ve",yav:"yav-latn-cm",yaw:"yaw-latn-br",yax:"yax-latn-ao",yay:"yay-latn-zz",yaz:"yaz-latn-zz",yba:"yba-latn-zz",ybb:"ybb-latn-cm",ybe:"ybe-latn-cn","ybe-ougr":"ybe-ougr-cn",ybh:"ybh-deva-np",ybi:"ybi-deva-np",ybj:"ybj-latn-ng",ybl:"ybl-latn-ng",ybm:"ybm-latn-pg",ybn:"ybn-latn-br",ybo:"ybo-latn-pg",ybx:"ybx-latn-pg",yby:"yby-latn-zz",ycl:"ycl-latn-cn",ycn:"ycn-latn-co",yda:"yda-latn-au",yde:"yde-latn-pg",ydg:"ydg-arab-pk",ydk:"ydk-latn-pg",yea:"yea-mlym-in","yea-knda":"yea-knda-in",yec:"yec-latn-de",yee:"yee-latn-pg",yei:"yei-latn-cm",yej:"yej-grek-il",yel:"yel-latn-cd",yer:"yer-latn-zz",yes:"yes-latn-ng",yet:"yet-latn-id",yeu:"yeu-telu-in",yev:"yev-latn-pg",yey:"yey-latn-bw",yga:"yga-latn-au",ygi:"ygi-latn-au",ygl:"ygl-latn-pg",ygm:"ygm-latn-pg",ygp:"ygp-plrd-cn",ygr:"ygr-latn-zz",ygu:"ygu-latn-au",ygw:"ygw-latn-zz",yhd:"yhd-hebr-il",yi:"yi-hebr-001",yia:"yia-latn-au",yig:"yig-yiii-cn",yih:"yih-hebr-de",yii:"yii-latn-au",yij:"yij-latn-au",yil:"yil-latn-au",yim:"yim-latn-in",yir:"yir-latn-id",yis:"yis-latn-pg",yiv:"yiv-yiii-cn",yka:"yka-latn-ph","yka-arab":"yka-arab-ph",ykg:"ykg-cyrl-ru",yki:"yki-latn-id",ykk:"ykk-latn-pg",ykm:"ykm-latn-pg",yko:"yko-latn-zz",ykr:"ykr-latn-pg",yky:"yky-latn-cf",yla:"yla-latn-pg",ylb:"ylb-latn-pg",yle:"yle-latn-zz",ylg:"ylg-latn-zz",yli:"yli-latn-id",yll:"yll-latn-zz",ylr:"ylr-latn-au",ylu:"ylu-latn-pg",yly:"yly-latn-nc",ymb:"ymb-latn-pg",yme:"yme-latn-pe",ymg:"ymg-latn-cd",ymk:"ymk-latn-mz","ymk-arab":"ymk-arab-mz",yml:"yml-latn-zz",ymm:"ymm-latn-so",ymn:"ymn-latn-id",ymo:"ymo-latn-pg",ymp:"ymp-latn-pg",yna:"yna-plrd-cn",ynd:"ynd-latn-au",yng:"yng-latn-cd",ynk:"ynk-cyrl-ru",ynl:"ynl-latn-pg",ynq:"ynq-latn-ng",yns:"yns-latn-cd",ynu:"ynu-latn-co",yo:"yo-latn-ng",yob:"yob-latn-pg",yog:"yog-latn-ph",yoi:"yoi-jpan-jp",yok:"yok-latn-us",yol:"yol-latn-gb",yom:"yom-latn-cd",yon:"yon-latn-zz",yot:"yot-latn-ng",yoy:"yoy-thai-th",yra:"yra-latn-pg",yrb:"yrb-latn-zz",yre:"yre-latn-zz",yrk:"yrk-cyrl-ru",yrl:"yrl-latn-br",yrm:"yrm-latn-au",yro:"yro-latn-br",yrs:"yrs-latn-id",yrw:"yrw-latn-pg",yry:"yry-latn-au",ysd:"ysd-yiii-cn",ysn:"ysn-yiii-cn",ysp:"ysp-yiii-cn",ysr:"ysr-cyrl-ru",yss:"yss-latn-zz",ysy:"ysy-plrd-cn",ytw:"ytw-latn-pg",yty:"yty-latn-au",yua:"yua-latn-mx",yub:"yub-latn-au",yuc:"yuc-latn-us",yud:"yud-hebr-il",yue:"yue-hant-hk","yue-cn":"yue-hans-cn","yue-hans":"yue-hans-cn",yuf:"yuf-latn-us",yug:"yug-cyrl-ru",yui:"yui-latn-co",yuj:"yuj-latn-zz",yul:"yul-latn-cf",yum:"yum-latn-us",yun:"yun-latn-ng",yup:"yup-latn-co",yuq:"yuq-latn-bo",yur:"yur-latn-us",yut:"yut-latn-zz",yuw:"yuw-latn-zz",yux:"yux-cyrl-ru",yuz:"yuz-latn-bo",yva:"yva-latn-id",yvt:"yvt-latn-ve",ywa:"ywa-latn-pg",ywg:"ywg-latn-au",ywn:"ywn-latn-br",ywq:"ywq-plrd-cn","ywq-yiii":"ywq-yiii-cn",ywr:"ywr-latn-au",ywu:"ywu-plrd-cn","ywu-yiii":"ywu-yiii-cn",yww:"yww-latn-au",yxa:"yxa-latn-au",yxg:"yxg-latn-au",yxl:"yxl-latn-au",yxm:"yxm-latn-au",yxu:"yxu-latn-au",yxy:"yxy-latn-au",yyr:"yyr-latn-au",yyu:"yyu-latn-pg",za:"za-latn-cn",zaa:"zaa-latn-mx",zab:"zab-latn-mx",zac:"zac-latn-mx",zad:"zad-latn-mx",zae:"zae-latn-mx",zaf:"zaf-latn-mx",zag:"zag-latn-sd",zah:"zah-latn-ng",zaj:"zaj-latn-tz",zak:"zak-latn-tz",zam:"zam-latn-mx",zao:"zao-latn-mx",zap:"zap-latn-mx",zaq:"zaq-latn-mx",zar:"zar-latn-mx",zas:"zas-latn-mx",zat:"zat-latn-mx",zau:"zau-tibt-in","zau-arab":"zau-arab-in",zav:"zav-latn-mx",zaw:"zaw-latn-mx",zax:"zax-latn-mx",zay:"zay-latn-et","zay-ethi":"zay-ethi-et",zaz:"zaz-latn-ng",zba:"zba-arab-001",zbc:"zbc-latn-my",zbe:"zbe-latn-my",zbt:"zbt-latn-id",zbu:"zbu-latn-ng",zbw:"zbw-latn-my",zca:"zca-latn-mx",zch:"zch-hani-cn",zdj:"zdj-arab-km",zea:"zea-latn-nl",zeg:"zeg-latn-pg",zeh:"zeh-hani-cn",zen:"zen-tfng-mr","zen-arab":"zen-arab-mr",zga:"zga-latn-tz",zgb:"zgb-hani-cn",zgh:"zgh-tfng-ma",zgm:"zgm-hani-cn",zgn:"zgn-hani-cn",zgr:"zgr-latn-pg",zh:"zh-hans-cn","zh-au":"zh-hant-au","zh-bn":"zh-hant-bn","zh-bopo":"zh-bopo-tw","zh-gb":"zh-hant-gb","zh-gf":"zh-hant-gf","zh-hanb":"zh-hanb-tw","zh-hant":"zh-hant-tw","zh-hk":"zh-hant-hk","zh-id":"zh-hant-id","zh-mo":"zh-hant-mo","zh-pa":"zh-hant-pa","zh-pf":"zh-hant-pf","zh-ph":"zh-hant-ph","zh-sr":"zh-hant-sr","zh-th":"zh-hant-th","zh-tw":"zh-hant-tw","zh-us":"zh-hant-us","zh-vn":"zh-hant-vn",zhd:"zhd-hani-cn","zhd-latn":"zhd-latn-vn",zhi:"zhi-latn-ng",zhn:"zhn-latn-cn","zhn-hani":"zhn-hani-cn",zhw:"zhw-latn-cm",zhx:"zhx-nshu-cn",zia:"zia-latn-zz",zik:"zik-latn-pg",zil:"zil-latn-gn",zim:"zim-latn-td",zin:"zin-latn-tz",ziw:"ziw-latn-tz",ziz:"ziz-latn-ng",zka:"zka-latn-id",zkb:"zkb-cyrl-ru",zkd:"zkd-latn-mm",zko:"zko-cyrl-ru",zkp:"zkp-latn-br",zkt:"zkt-kits-cn",zku:"zku-latn-au",zkz:"zkz-cyrl-ru",zla:"zla-latn-cd",zlj:"zlj-hani-cn","zlj-latn":"zlj-latn-cn",zlm:"zlm-latn-tg",zln:"zln-hani-cn",zlq:"zlq-hani-cn",zma:"zma-latn-au",zmb:"zmb-latn-cd",zmc:"zmc-latn-au",zmd:"zmd-latn-au",zme:"zme-latn-au",zmf:"zmf-latn-cd",zmg:"zmg-latn-au",zmh:"zmh-latn-pg",zmi:"zmi-latn-my",zmj:"zmj-latn-au",zmk:"zmk-latn-au",zml:"zml-latn-au",zmm:"zmm-latn-au",zmn:"zmn-latn-ga",zmo:"zmo-latn-sd",zmp:"zmp-latn-cd",zmq:"zmq-latn-cd",zmr:"zmr-latn-au",zms:"zms-latn-cd",zmt:"zmt-latn-au",zmu:"zmu-latn-au",zmv:"zmv-latn-au",zmw:"zmw-latn-cd",zmx:"zmx-latn-cg",zmy:"zmy-latn-au",zmz:"zmz-latn-cd",zna:"zna-latn-td",zne:"zne-latn-zz",zng:"zng-latn-vn",znk:"znk-latn-au",zns:"zns-latn-ng",zoc:"zoc-latn-mx",zoh:"zoh-latn-mx",zom:"zom-latn-in",zoo:"zoo-latn-mx",zoq:"zoq-latn-mx",zor:"zor-latn-mx",zos:"zos-latn-mx",zpa:"zpa-latn-mx",zpb:"zpb-latn-mx",zpc:"zpc-latn-mx",zpd:"zpd-latn-mx",zpe:"zpe-latn-mx",zpf:"zpf-latn-mx",zpg:"zpg-latn-mx",zph:"zph-latn-mx",zpi:"zpi-latn-mx",zpj:"zpj-latn-mx",zpk:"zpk-latn-mx",zpl:"zpl-latn-mx",zpm:"zpm-latn-mx",zpn:"zpn-latn-mx",zpo:"zpo-latn-mx",zpp:"zpp-latn-mx",zpq:"zpq-latn-mx",zpr:"zpr-latn-mx",zps:"zps-latn-mx",zpt:"zpt-latn-mx",zpu:"zpu-latn-mx",zpv:"zpv-latn-mx",zpw:"zpw-latn-mx",zpx:"zpx-latn-mx",zpy:"zpy-latn-mx",zpz:"zpz-latn-mx",zqe:"zqe-hani-cn","zqe-latn":"zqe-latn-cn",zrn:"zrn-latn-td",zro:"zro-latn-ec",zrp:"zrp-hebr-fr",zrs:"zrs-latn-id",zsa:"zsa-latn-pg",zsr:"zsr-latn-mx",zsu:"zsu-latn-pg",zte:"zte-latn-mx",ztg:"ztg-latn-mx",ztl:"ztl-latn-mx",ztm:"ztm-latn-mx",ztn:"ztn-latn-mx",ztp:"ztp-latn-mx",ztq:"ztq-latn-mx",zts:"zts-latn-mx",ztt:"ztt-latn-mx",ztu:"ztu-latn-mx",ztx:"ztx-latn-mx",zty:"zty-latn-mx",zu:"zu-latn-za",zua:"zua-latn-ng",zuh:"zuh-latn-pg",zum:"zum-arab-om",zun:"zun-latn-us",zuy:"zuy-latn-cm",zyg:"zyg-hani-cn",zyj:"zyj-latn-cn","zyj-hani":"zyj-hani-cn",zyn:"zyn-hani-cn",zyp:"zyp-latn-mm",zza:"zza-latn-tr",zzj:"zzj-hani-cn"},ti={}.hasOwnProperty;function ei(t){const{language:e,script:n,region:r}=t;let i;var o,a;return n&&r&&(i=Jr[zr({language:e,script:n,region:r})])?(t.script=void 0,t.region=void 0):n&&(i=Jr[zr({language:e,script:n})])?t.script=void 0:r&&(i=Jr[zr({language:e,region:r})])?t.region=void 0:e&&(i=Jr[e]),i&&(t.language=void 0,o=t,a=Qr(i),o.language||(o.language=a.language),o.script||(o.script=a.script),o.region||(o.region=a.region),a.variants&&o.variants.push(...a.variants)),zr(t)}function ni(t,e){const n=e||{},r=Qr(String(t||"").toLowerCase(),n),i=zr(r);if(!i)return i;let o=-1;for(;++o<Xr.length;){let t=Xr[o].from;"und-"===t.slice(0,4)&&r.language&&(t=r.language+t.slice(3)),Yr(i,t).length>0&&ri(r,t,Xr[o].to)}for(o=-1;++o<$r.length;)ii(r,$r[o].from.field,$r[o].from.value)&&oi(r,$r[o].to.field,$r[o].to.value);if(function(t){ei(t);const{language:e,script:n,region:r}=t;if(!e)return t;const i=zr({language:e,script:n,region:r});i===ei(Qr(e))?(t.script=void 0,t.region=void 0):r&&i===ei(Qr(e+"-"+r))?t.script=void 0:n&&i===ei(Qr(e+"-"+n))&&(t.region=void 0)}(r),r.variants.sort(),r.extensions.sort(ai),n.warning){let t;for(t in Zr)if(ti.call(Zr,t)){const e=Zr[t],i=r[t];if(i&&ti.call(e,i)){const r=e[i];n.warning("Deprecated "+t+" `"+i+"`, expected one of `"+r.join("`, `")+"`",-1,7)}}}return r.script&&(r.script=r.script.charAt(0).toUpperCase()+r.script.slice(1)),r.region&&(r.region=r.region.toUpperCase()),zr(r)}function ri(t,e,n){const r=Qr(e),i=Qr(n),o=[],a=r.language;let s;for(s in r)if(ti.call(r,s)){const e=r[s];e&&ii(t,s,e)&&o.push(s)}for(s in i)if(ti.call(i,s)){const e=i[s];a&&e&&(o.includes(s)||!t[s])&&oi(t,s,"language"===s&&"und"===e?a:e)}}function ii(t,e,n){let r,i=!1;if(n){const o=t[e];if(r=o,Array.isArray(o)){r=[];let t=-1;for(;++t<o.length;){const e=o[t];n.includes(e)?i=!0:r.push(e)}}else o===n&&(r=null,i=!0);t[e]=r}return i}function oi(t,e,n){const r=t[e];if(Array.isArray(r)){const t=Array.isArray(n)?n:[n];let e=-1;for(;++e<t.length;){const n=t[e];r.includes(n)||r.push(n)}}else t[e]=n}function ai(t,e){return t.singleton>e.singleton?1:t.singleton<e.singleton?-1:0}function si(){const t=this.context,e=(0,C.default)(t).getInstance();let n,r,i,o,a,s,l,u,c,d,f;function h(t){if(!(t&&t.currentRepresentation&&t.currentRepresentation.mediaInfo&&t.currentRepresentation.mediaInfo.type))return;const e=t.currentRepresentation.mediaInfo.type;l[e]=t.currentRepresentation}function p(t,e){return t&&i[e]&&i[e][t]?i[e][t].list:[]}function m(t,e){return t&&i[e]&&i[e][t]?i[e][t].current:null}function g(t){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!t||!t.streamInfo)return;const r=t.type,a=t.streamInfo.id,l=m(r,a);if(i[a]&&i[a][r]&&(i[a][r].current=t,i[a][r].current&&(r!==x.default.TEXT&&!b(t,l)||r===x.default.TEXT&&t.isFragmented)&&e.trigger(I.default.CURRENT_TRACK_CHANGED,{oldMediaInfo:l,newMediaInfo:t,switchMode:o.get().streaming.trackSwitchMode[r],options:n},{streamId:a}),!n.hasOwnProperty("noSettingsSave")||!n.noSettingsSave)){let e=function(t){const e={lang:t.lang,viewpoint:t.viewpoint,roles:t.roles,accessibility:t.accessibility,audioChannelConfiguration:t.audioChannelConfiguration,codec:t.codec};return e.lang||e.viewpoint||e.role&&e.role.length>0||e.accessibility&&e.accessibility.length>0||e.audioChannelConfiguration&&e.audioChannelConfiguration.length>0?e:null}(t);if(!e||!i[a][r].storeLastSettings)return;e.roles&&(e.role=e.roles[0],delete e.roles),e.accessibility&&(e.accessibility=e.accessibility[0]),e.audioChannelConfiguration&&(e.audioChannelConfiguration=e.audioChannelConfiguration[0]),s[r]=e,f.setSavedMediaSettings(r,e)}}function v(t,e){t&&e&&(a[t]=e)}function y(t){return t?a[t]:null}function b(t,e){if(!t&&!e)return!0;if(!t||!e)return!1;const n=t.id===e.id,r=JSON.stringify(t.viewpoint)===JSON.stringify(e.viewpoint),i=t.lang===e.lang,o=t.codec===e.codec,a=JSON.stringify(t.roles)===JSON.stringify(e.roles),s=JSON.stringify(t.accessibility)===JSON.stringify(e.accessibility),l=JSON.stringify(t.audioChannelConfiguration)===JSON.stringify(e.audioChannelConfiguration);return n&&o&&r&&i&&a&&s&&l}function _(){i={},s={},l={},a={audio:null,video:null,text:null},e.off(R.default.REPRESENTATION_SWITCH,h,n)}function w(t,e,n){let i=[];return t.forEach((function(t){e(n,t)&&i.push(t)})),0!==i.length?i:(r.info("Filter-Function ("+e.name+") resulted in no tracks; setting ignored"),t)}function A(t,e){try{return!t.lang||t.lang instanceof RegExp?e.lang.match(t.lang):""!==e.lang&&Yr(e.lang,ni(t.lang)).length>0}catch(t){return!1}}function E(t,e){return void 0===t.index||null===t.index||e.index===t.index}function T(t,e){return void 0===t.id||null===t.id||e.id===t.id}function k(t,e){return!t.viewpoint||!!e.viewpoint.filter((function(e){return q(e,t.viewpoint)}))[0]}function O(t,e){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return!t.role||!!e.roles.filter((function(e){return q(e,t.role)}))[0]||e.type===x.default.AUDIO&&n}function M(t,e){let n;return n=t.accessibility?!!e.accessibility.filter((function(e){return q(e,t.accessibility)}))[0]:!e.accessibility.length,n}function L(t,e){return!t.audioChannelConfiguration||!!e.audioChannelConfiguration.filter((function(e){return q(e,t.audioChannelConfiguration)}))[0]}function D(t,e){return!t.codec||t.codec===e.codec}function N(t){let e=0,n=[];return t.forEach((t=>{isNaN(t.selectionPriority)||(t.selectionPriority>e?(e=t.selectionPriority,n=[t]):t.selectionPriority===e&&n.push(t))})),n}function B(t){let e,n=0,r=[];return t.forEach((function(t){e=Math.max.apply(Math,t.bitrateList.map((function(t){return t.bandwidth}))),e>n?(n=e,r=[t]):e===n&&r.push(t)})),r}function j(t){let e,n=1/0,r=[];return t.forEach((function(t){const i=t.bitrateList.reduce((function(t,e){const n=Math.max(1,e.width*e.height);return t+e.bandwidth/n}),0);e=i/t.bitrateList.length,e<n?(n=e,r=[t]):e===n&&r.push(t)})),r}function z(t){let e,n=0,r=[];return t.forEach((function(t){e=t.representationCount,e>n?(n=e,r=[t]):e===n&&r.push(t)})),r}function F(t,e){if(t===x.default.TEXT)return function(t){if(!t||0===t.length)return null;const e=t.filter((t=>!(t&&t.roles&&t.roles.length>0)||t.roles.every((t=>t.schemeIdUri!==x.default.DASH_ROLE_SCHEME_ID||t.value!==S.default.FORCED_SUBTITLE))));return e.length>0?e[0]:t[0]}(e);let n;const i=u.getCustomInitialTrackSelectionFunction();if(n=function(t){try{let e;return e=function(t){try{const e=t.filter((t=>{const e=t.type;return t.bitrateList.some((t=>{const n=c.getAbrBitrateParameter("maxBitrate",e),r=c.getAbrBitrateParameter("minBitrate",e);return!(n>-1&&t.bandwidth>1e3*n||r>-1&&t.bandwidth<1e3*r)}))}));return e.length>0?e:t}catch(e){return r.error(e),t}}(t),e=function(t){try{if(!o.get().streaming.abr.limitBitrateByPortal)return t;const{elementWidth:e}=d.getVideoElementSize(),n=t.filter((t=>t.type!==x.default.VIDEO||t.bitrateList.some((t=>t.width<=e))));return n.length>0?n:t}catch(e){return r.error(e),t}}(e),e}catch(e){return r.error(e),t}}(e),i&&"function"==typeof i)n=i(n);else if(l[t])n=function(t,e){if(!t||0===t.length||!e||!l[e])return t;const n=l[e].bandwidth;if(!n||isNaN(n))return t;let r={min:NaN,track:null};return t.forEach((t=>{t.bitrateList.forEach((e=>{const i=Math.abs(e.bandwidth-n);(isNaN(r.min)||i<r.min)&&(r.min=i,r.track=t)}))})),r.track?[r.track]:t}(n,t);else{let t=o.get().streaming.selectionModeForInitialTrack;switch(t){case x.default.TRACK_SELECTION_MODE_HIGHEST_SELECTION_PRIORITY:n=function(t){let e=N(t);return e.length>1&&(e=j(e)),e.length>1&&(e=B(e)),e.length>1&&(e=z(e)),e}(n);break;case x.default.TRACK_SELECTION_MODE_HIGHEST_BITRATE:n=function(t){let e=B(t);return e.length>1&&(e=z(e)),e}(n);break;case x.default.TRACK_SELECTION_MODE_FIRST_TRACK:n=U(n);break;case x.default.TRACK_SELECTION_MODE_HIGHEST_EFFICIENCY:n=function(t){let e=j(t);return e.length>1&&(e=B(e)),e}(n);break;case x.default.TRACK_SELECTION_MODE_WIDEST_RANGE:n=function(t){let e=z(t);return e.length>1&&(e=B(t)),e}(n);break;default:r.warn(`Track selection mode ${t} is not supported. Falling back to TRACK_SELECTION_MODE_FIRST_TRACK`),n=U(n)}}return n.length>0?n[0]:e[0]}function U(t){return t[0]}function q(t,e){return!(!t||!e)&&JSON.stringify({schemeIdUri:t.schemeIdUri,value:t.value})===JSON.stringify({schemeIdUri:e.schemeIdUri,value:e.value})}return n={addTrack:function(t){if(!t)return;const e=t.type;if((n=e)!==x.default.AUDIO&&n!==x.default.VIDEO&&n!==x.default.TEXT&&n!==x.default.IMAGE)return;var n;let r=t.streamInfo.id;i[r]||(i[r]=function(){const t=o.get().streaming.saveLastMediaSettingsForCurrentStreamingSession;return{audio:{list:[],storeLastSettings:t,current:null},video:{list:[],storeLastSettings:t,current:null},text:{list:[],storeLastSettings:t,current:null},image:{list:[],storeLastSettings:t,current:null}}}());const a=i[r][e].list;for(let e=0,n=a.length;e<n;++e)if(b(a[e],t))return;a.push(t)},areTracksEqual:b,clearDataForStream:function(t){i[t]&&delete i[t]},getCurrentTrackFor:m,getInitialSettings:y,getTracksFor:p,getTracksWithHighestSelectionPriority:N,getTracksWithHighestBitrate:B,getTracksWithHighestEfficiency:j,getTracksWithWidestRange:z,initialize:function(){e.on(R.default.REPRESENTATION_SWITCH,h,n)},isCurrentTrack:function(t){if(!t)return!1;const e=t.type,n=t.streamInfo.id;return i[n]&&i[n][e]&&b(i[n][e].current,t)},matchSettings:function(t,e){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];try{let r=!1;if(t.lang){if(t.lang instanceof RegExp)r=e.lang.match(t.lang);else if(""!==e.lang){const n=ni(t.lang);n&&(r=Yr(e.lang,n).length>0)}}else r=!0;const i=void 0===t.index||null===t.index||e.index===t.index,o=!t.viewpoint||!!e.viewpoint.filter((function(e){return q(e,t.viewpoint)}))[0],a=!t.role||!!e.roles.filter((function(e){return q(e,t.role)}))[0];let s=!t.accessibility||!!e.accessibility.filter((function(e){return q(e,t.accessibility)}))[0],l=!t.audioChannelConfiguration||!!e.audioChannelConfiguration.filter((function(e){return q(e,t.audioChannelConfiguration)}))[0];return r&&i&&o&&(a||e.type===x.default.AUDIO&&n)&&s&&l}catch(t){return!1}},matchSettingsAccessibility:M,matchSettingsAudioChannelConfig:L,matchSettingsIndex:E,matchSettingsLang:A,matchSettingsRole:O,matchSettingsViewPoint:k,reset:_,saveTextSettingsDisabled:function(){f.setSavedMediaSettings(x.default.TEXT,null)},selectInitialTrack:F,setConfig:function(t){t&&(t.domStorage&&(f=t.domStorage),t.settings&&(o=t.settings),t.customParametersModel&&(u=t.customParametersModel),t.mediaPlayerModel&&(c=t.mediaPlayerModel),t.videoModel&&(d=t.videoModel))},setInitialMediaSettingsForType:function(t,e){let n=s[t]||y(t);const i=p(t,e.id);let o=[];n&&0!==Object.keys(n).length||(n=f.getSavedMediaSettings(t),n&&delete n.codec,v(t,n)),i&&0!==i.length&&(n&&(o=Array.from(i),r.info("Filtering "+o.length+" "+t+" tracks based on settings"),o=w(o,T,n),o=w(o,A,n),o=w(o,E,n),o=w(o,k,n),t===x.default.AUDIO&&s[t]||(o=w(o,O,n)),o=w(o,M,n),o=w(o,L,n),o=w(o,D,n),r.info("Filtering "+t+" tracks ended, found "+o.length+" matching track(s).")),0===o.length?g(F(t,i)):o.length>1?g(F(t,o)):g(o[0]))},setInitialSettings:v,setTrack:g},r=(0,P.default)(t).getInstance().getLogger(n),_(),n}si.__dashjs_factory_name="MediaController";const li=k.default.getSingletonFactory(si);k.default.updateSingletonFactory(si.__dashjs_factory_name,li);var ui=li;const ci=NaN;class di{constructor(t,e){this.data={baseUrls:t||null,selectedIdx:e||ci},this.children=[]}}function fi(){let t,e,n,r;const i=this.context,o=(0,ue.default)(i).getInstance();function a(t,e,n){const r=s(n);t[e]?o.areEqual(r,t[e].data.baseUrls)||(t[e].data.baseUrls=r,t[e].data.selectedIdx=ci):t[e]=new di(r)}function s(t){let e=n.getBaseURLsFromElement(t);const i=r.getSynthesizedBaseUrlElements(e);return i&&i.length>0&&(e=e.concat(i)),e}function l(t,n){const r=n||e;t(r.data),r.children&&r.children.forEach((e=>l(t,e)))}function u(){e=new di}return t={reset:u,update:function(t){!function(t){!function(){if(!n||!n.hasOwnProperty("getBaseURLsFromElement")||!n.hasOwnProperty("getRepresentationSortFunction"))throw new Error("setConfig function has to be called previously")}();const r=s(t);o.areEqual(r,e.data.baseUrls)||(e.data.baseUrls=r,e.data.selectedIdx=ci),t&&t.Period&&t.Period.forEach(((t,r)=>{a(e.children,r,t),t.AdaptationSet&&t.AdaptationSet.forEach(((t,i)=>{a(e.children[r].children,i,t),t.Representation&&t.Representation.sort(n.getRepresentationSortFunction()).forEach(((t,n)=>{a(e.children[r].children[i].children,n,t)}))}))}))}(t)},getForPath:function(t){let n=e;const r=[n.data];return t&&t.forEach((t=>{n=n.children[t],n&&r.push(n.data)})),r.filter((t=>t.baseUrls.length))},invalidateSelectedIndexes:function(t){l((e=>{isNaN(e.selectedIdx)||t===e.baseUrls[e.selectedIdx].serviceLocation&&(e.selectedIdx=ci)}))},setConfig:function(t){t.adapter&&(n=t.adapter),t.contentSteeringController&&(r=t.contentSteeringController)},getBaseUrls:function(t){return s(t)}},u(),t}fi.__dashjs_factory_name="BaseURLTreeModel";var hi=k.default.getClassFactory(fi);function pi(t){let e;const n=(t=t||{}).blacklistController;return e={select:function(t){return t&&function(t){let e,n,r=0,i=[],o=0;if(n=t.sort((function(t,e){let n=t.dvbPriority-e.dvbPriority;return isNaN(n)?0:n})).filter((function(t,e,n){return!e||n[0].dvbPriority&&t.dvbPriority&&n[0].dvbPriority===t.dvbPriority})),n.length)return n.length>1&&(n.forEach((t=>{r+=t.dvbWeight,i.push(r)})),e=Math.floor(Math.random()*(r-1)),i.every(((t,n)=>(o=n,!(e<t))))),n[o]}(function(t){let e=[];return t.filter((function(t){return!n.contains(t.serviceLocation)||(t.dvbPriority&&e.push(t.dvbPriority),!1)})).filter((function(t){return!e.length||!t.dvbPriority||-1===e.indexOf(t.dvbPriority)}))}(t))}},e}pi.__dashjs_factory_name="DVBSelector";var mi=k.default.getClassFactory(pi);function gi(t){let e;const n=(t=t||{}).blacklistController;return e={select:function(t){let e,r=0;return t&&t.some(((t,e)=>(r=e,!n.contains(t.serviceLocation))))&&(e=t[r]),e}},e}gi.__dashjs_factory_name="BasicSelector";var vi=k.default.getClassFactory(gi);function yi(){const t=this.context,e=(0,C.default)(t).getInstance();let n,r,i,o=[];function a(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=0,r=NaN;for(;n<t.length;){const o=t[n],a=e.findIndex((t=>t.serviceLocation&&t.serviceLocation===o));if(-1!==a&&!i.contains(e[a].serviceLocation)){r=a;break}n+=1}return r}function s(t){const e=r.getCurrentSteeringResponseData();if(!e)return;const n=t.entry,a=setTimeout((()=>{i.remove(n),o.splice(o.indexOf(a,1))}),1e3*e.ttl);o.push(a)}return n={selectBaseUrlIndex:function(t){let e=NaN;if(isNaN(t.selectedIdx)){const n=r.getSteeringDataFromManifest();n&&n.defaultServiceLocationArray.length>0&&(e=a(n.defaultServiceLocationArray,t.baseUrls))}const n=r.getCurrentSteeringResponseData();return t.baseUrls&&t.baseUrls.length&&n&&n.pathwayPriority&&n.pathwayPriority.length&&(e=a(n.pathwayPriority,t.baseUrls)),e},setConfig:function(t){t.blacklistController&&(i=t.blacklistController),t.contentSteeringController&&(r=t.contentSteeringController),e.on(t.addBlacklistEventName,s,n)},reset:function(){o.forEach((t=>clearTimeout(t))),o=[]}},r=hr(t).getInstance(),n}yi.__dashjs_factory_name="ContentSteeringSelector";var bi=k.default.getClassFactory(yi);function _i(){const t=this.context,e=(0,C.default)(t).getInstance(),n=(0,W.default)(t).getInstance();let r,i,o,a,s,l;function u(){s.reset(),i.reset()}return r={chooseSelector:function(t){(0,_t.checkParameterType)(t,"boolean"),l=t?a:o},select:function(t){if(!t)return;if(n.get().streaming.applyContentSteering){const e=s.selectBaseUrlIndex(t);isNaN(e)||-1===e||(t.selectedIdx=e)}if(!isNaN(t.selectedIdx))return t.baseUrls[t.selectedIdx];let r=l.select(t.baseUrls);return r?(t.selectedIdx=t.baseUrls.indexOf(r),r):(e.trigger(I.default.URL_RESOLUTION_FAILED,{error:new G.default(Q.URL_RESOLUTION_FAILED_GENERIC_ERROR_CODE,Q.URL_RESOLUTION_FAILED_GENERIC_ERROR_MESSAGE)}),void(l===o&&u()))},reset:u,setConfig:function(t){t.selector&&(l=t.selector),t.contentSteeringSelector&&(s=t.contentSteeringSelector)}},i=ar(t).create({updateEventName:I.default.SERVICE_LOCATION_BASE_URL_BLACKLIST_CHANGED,addBlacklistEventName:I.default.SERVICE_LOCATION_BASE_URL_BLACKLIST_ADD}),o=vi(t).create({blacklistController:i}),a=mi(t).create({blacklistController:i}),s=bi(t).create(),s.setConfig({blacklistController:i,addBlacklistEventName:I.default.SERVICE_LOCATION_BASE_URL_BLACKLIST_ADD}),l=o,r}_i.__dashjs_factory_name="BaseURLSelector";var wi=k.default.getClassFactory(_i);function Ai(){let t,e;const n=this.context,r=(0,C.default)(n).getInstance(),i=Tt(n).getInstance();let o,a,s;function l(t){o.update(t),a.chooseSelector(e.getIsDVB(t)),r.trigger(R.default.BASE_URLS_UPDATED,{baseUrls:u(t)})}function u(t){return o.getBaseUrls(t)}return t={reset:function(){o.reset(),a.reset()},initialize:function(t){o.setConfig({adapter:e,contentSteeringController:s}),l(t)},resolve:function(t){const e=o.getForPath(t).reduce(((t,e)=>{const n=a.select(e);return n?(i.isRelative(n.url)?t.url=i.resolve(n.url,t.url):(t.url=n.url,t.serviceLocation=n.serviceLocation),t.availabilityTimeOffset=n.availabilityTimeOffset,t.availabilityTimeComplete=n.availabilityTimeComplete,t.queryParams=n.queryParams,t):new Jt}),new Jt);if(!i.isRelative(e.url))return e},setConfig:function(t){t.baseURLTreeModel&&(o=t.baseURLTreeModel),t.baseURLSelector&&(a=t.baseURLSelector),t.adapter&&(e=t.adapter),t.contentSteeringController&&(s=t.contentSteeringController)},getBaseUrls:u,update:l},o=hi(n).create(),a=wi(n).create(),r.on(I.default.SERVICE_LOCATION_BASE_URL_BLACKLIST_CHANGED,(function(t){o.invalidateSelectedIndexes(t.entry)}),t),t}Ai.__dashjs_factory_name="BaseURLController";var Ei=k.default.getClassFactory(Ai),xi=class extends N{constructor(t,e){super(),this.url=t||null,this.type=e||null,this.mediaType=x.default.STREAM,this.responseType=""}};function Si(t){t=t||{};const e=this.context,n=(0,C.default)(e).getInstance();let r,i=zn(e).create({errHandler:t.errHandler,dashMetrics:t.dashMetrics,mediaPlayerModel:t.mediaPlayerModel,errors:Q});return r={load:function(t,e,r){const o=function(i,o){e.resolved=!0,e.resolvedContent=i||null,n.trigger(I.default.XLINK_ELEMENT_LOADED,{element:e,resolveObject:r,error:i||o?null:new G.default(Q.XLINK_LOADER_LOADING_FAILURE_ERROR_CODE,Q.XLINK_LOADER_LOADING_FAILURE_ERROR_MESSAGE+t)})};if("urn:mpeg:dash:resolve-to-zero:2013"===t)o(null,!0);else{const e=new xi(t,L.HTTPRequest.XLINK_EXPANSION_TYPE);i.load({request:e,success:function(t){o(t)},error:function(){o(null)}})}},reset:function(){i&&(i.abort(),i=null)}},r}Si.__dashjs_factory_name="XlinkLoader";var Ti=k.default.getClassFactory(Si);const Ci="onLoad";function Ii(t){t=t||{};let e=this.context,n=(0,C.default)(e).getInstance();const r=Tt(e).getInstance();let i,o,a,s;function l(t,e,n){let i,o,a={};a.elements=t,a.type=e,a.resolveType=n,0===a.elements.length&&c(a);for(let t=0;t<a.elements.length;t++)i=a.elements[t],o=r.isHTTPURL(i.url)?i.url:i.originalContent.BaseURL+i.url,s.load(o,i,a)}function u(t){let e,n,r="";if(e=t.element,n=t.resolveObject,e.resolvedContent){let t=0;0===e.resolvedContent.indexOf("<?xml")&&(t=e.resolvedContent.indexOf("?>")+2),r=e.resolvedContent.substr(0,t)+"<response>"+e.resolvedContent.substr(t)+"</response>",e.resolvedContent=o.parseXml(r).response}(function(t){let e,n;for(e=0;e<t.elements.length;e++)if(n=t.elements[e],!1===n.resolved)return!1;return!0})(n)&&c(n)}function c(t){let e,r,i=[];if(function(t){let e,n,r,i,s,l,u=[];for(i=t.elements.length-1;i>=0;i--){if(e=t.elements[i],n=e.type,e.resolvedContent){if(e.resolvedContent)for(s=0;s<e.resolvedContent[n].length;s++)r=e.resolvedContent[n][s],u.push(r)}else delete e.originalContent["xlink:actuate"],delete e.originalContent["xlink:href"],u.push(e.originalContent);for(e.parentElement[n].splice(e.index,1),l=0;l<u.length;l++)e.parentElement[n].splice(e.index+l,0,u[l]);u=[]}t.elements.length>0&&o.getIron().run(a)}(t),"onActuate"===t.resolveType&&n.trigger(I.default.XLINK_READY,{manifest:a}),t.resolveType===Ci)switch(t.type){case S.default.PERIOD:for(e=0;e<a[S.default.PERIOD].length;e++)r=a[S.default.PERIOD][e],r.hasOwnProperty(S.default.ADAPTATION_SET)&&(i=i.concat(d(r[S.default.ADAPTATION_SET],r,S.default.ADAPTATION_SET,Ci))),r.hasOwnProperty(S.default.EVENT_STREAM)&&(i=i.concat(d(r[S.default.EVENT_STREAM],r,S.default.EVENT_STREAM,Ci)));l(i,S.default.ADAPTATION_SET,Ci);break;case S.default.ADAPTATION_SET:n.trigger(I.default.XLINK_READY,{manifest:a})}}function d(t,e,n,r){let i,o,a,s=[];for(o=t.length-1;o>=0;o--)i=t[o],i.hasOwnProperty("xlink:href")&&"urn:mpeg:dash:resolve-to-zero:2013"===i["xlink:href"]&&t.splice(o,1);for(o=0;o<t.length;o++)i=t[o],i.hasOwnProperty("xlink:href")&&i.hasOwnProperty("xlink:actuate")&&i["xlink:actuate"]===r&&(a=f(i["xlink:href"],e,n,o,r,i),s.push(a));return s}function f(t,e,n,r,i,o){return{url:t,parentElement:e,type:n,index:r,resolveType:i,originalContent:o,resolvedContent:null,resolved:!1}}return i={resolveManifestOnLoad:function(t){let e;a=t,a.Period?(e=d(a.Period,a,S.default.PERIOD,Ci),l(e,S.default.PERIOD,Ci)):n.trigger(I.default.XLINK_READY,{manifest:a})},setParser:function(t){t&&(o=t)},reset:function(){n.off(I.default.XLINK_ELEMENT_LOADED,u,i),s&&(s.reset(),s=null)}},n.on(I.default.XLINK_ELEMENT_LOADED,u,i),s=Ti(e).create({errHandler:t.errHandler,dashMetrics:t.dashMetrics,mediaPlayerModel:t.mediaPlayerModel,settings:t.settings}),i}Ii.__dashjs_factory_name="XlinkController";var ki=k.default.getClassFactory(Ii);function Pi(t){function e(t,e){for(let n in t)e.hasOwnProperty(n)||(e[n]=t[n])}function n(t,n,r){for(let i=0,o=t.length;i<o;++i){const o=t[i];if(n[o.name])if(r[o.name]){if(o.merge){const t=n[o.name],i=r[o.name];"object"==typeof t&&"object"==typeof i?e(t,i):r[o.name]=t+i}}else r[o.name]=n[o.name]}}function r(t,e){for(let i=0,o=t.children.length;i<o;++i){const o=t.children[i],a=e[o.name];if(a)for(let i=0,s=a.length;i<s;++i){const s=a[i];n(t.properties,e,s),r(o,s)}}}return{run:function(e){if(null===e||"object"!=typeof e)return e;if(e.Period&&"period"in t){const n=t.period,i=e.Period;for(let e=0,o=i.length;e<o;++e){const o=i[e];if(r(n,o),"adaptationset"in t){const e=o.AdaptationSet;if(e){const n=t.adaptationset;for(let t=0,i=e.length;t<i;++t)r(n,e[t])}}}}return e}}}Pi.__dashjs_factory_name="ObjectIron";var Ri=k.default.getClassFactory(Pi),Oi=class{constructor(t,e){this._test=t,this._converter=e}get test(){return this._test}get converter(){return this._converter}};const Mi=/^([-])?P(([\d.]*)Y)?(([\d.]*)M)?(([\d.]*)D)?T?(([\d.]*)H)?(([\d.]*)M)?(([\d.]*)S)?/;var Li=class extends Oi{constructor(){super(((t,e,n)=>{const r=[S.default.MIN_BUFFER_TIME,S.default.MEDIA_PRESENTATION_DURATION,S.default.MINIMUM_UPDATE_PERIOD,S.default.TIMESHIFT_BUFFER_DEPTH,S.default.MAX_SEGMENT_DURATION,S.default.MAX_SUBSEGMENT_DURATION,S.default.SUGGESTED_PRESENTATION_DELAY,S.default.START,x.default.START_TIME,S.default.DURATION],i=r.length;for(let t=0;t<i;t++)if(e===r[t])return Mi.test(n);return!1}),(t=>{const e=Mi.exec(t);let n=31536e3*parseFloat(e[3]||0)+2592e3*parseFloat(e[5]||0)+86400*parseFloat(e[7]||0)+3600*parseFloat(e[9]||0)+60*parseFloat(e[11]||0)+parseFloat(e[13]||0);return void 0!==e[1]&&(n=-n),n}))}};const Di=/^([0-9]{4})-([0-9]{2})-([0-9]{2})T([0-9]{2}):([0-9]{2})(?::([0-9]*)(\.[0-9]*)?)?(?:([+-])([0-9]{2})(?::?)([0-9]{2}))?/;var Ni=class extends Oi{constructor(){super(((t,e,n)=>Di.test(n)),(t=>{const e=Di.exec(t);let n;if(n=Date.UTC(parseInt(e[1],10),parseInt(e[2],10)-1,parseInt(e[3],10),parseInt(e[4],10),parseInt(e[5],10),e[6]&&parseInt(e[6],10)||0,e[7]&&1e3*parseFloat(e[7])||0),e[9]&&e[10]){const t=60*parseInt(e[9],10)+parseInt(e[10],10);n+=("+"===e[8]?-1:1)*t*60*1e3}return new Date(n)}))}};const Bi=/^[-+]?[0-9]+[.]?[0-9]*([eE][-+]?[0-9]+)?$/,ji=[S.default.ID];var zi=class extends Oi{constructor(){super(((t,e,n)=>Bi.test(n)&&-1===ji.indexOf(e)),(t=>parseFloat(t)))}},Fi=class extends Oi{constructor(){super(((t,e)=>{const n={[S.default.ADAPTATION_SET]:[S.default.LANG],[S.default.REPRESENTATION]:[S.default.LANG],[S.default.CONTENT_COMPONENT]:[S.default.LANG],[S.default.LABEL]:[S.default.LANG],[S.default.GROUP_LABEL]:[S.default.LANG]};if(n.hasOwnProperty(t)){let r=n[t];return void 0!==r&&r.indexOf(e)>=0}return!1}),(t=>ni(t)||String(t)))}},Ui=class{constructor(t){var e;this._name=t,this._merge=(e=t)&&e.length&&e.charAt(0)===e.charAt(0).toUpperCase()}get name(){return this._name}get merge(){return this._merge}},qi=class{constructor(t,e,n){this._name=t||"",this._properties=[],this._children=n||[],Array.isArray(e)&&e.forEach((t=>{this._properties.push(new Ui(t))}))}get name(){return this._name}get children(){return this._children}get properties(){return this._properties}},Gi=class extends qi{constructor(){const t=[S.default.PROFILES,S.default.WIDTH,S.default.HEIGHT,S.default.SAR,S.default.FRAMERATE,S.default.AUDIO_SAMPLING_RATE,S.default.MIME_TYPE,S.default.SEGMENT_PROFILES,S.default.CODECS,S.default.MAXIMUM_SAP_PERIOD,S.default.START_WITH_SAP,S.default.MAX_PLAYOUT_RATE,S.default.CODING_DEPENDENCY,S.default.SCAN_TYPE,S.default.FRAME_PACKING,S.default.AUDIO_CHANNEL_CONFIGURATION,S.default.CONTENT_PROTECTION,S.default.INBAND_EVENT_STREAM];super(S.default.ADAPTATION_SET,t,[new qi(S.default.REPRESENTATION,t,[new qi(S.default.SUB_REPRESENTATION,t)])])}},Hi=class extends qi{constructor(){const t=[S.default.SEGMENT_BASE,S.default.SEGMENT_TEMPLATE,S.default.SEGMENT_LIST];super(S.default.PERIOD,t,[new qi(S.default.ADAPTATION_SET,t,[new qi(S.default.REPRESENTATION,t)])])}};const Vi={"&amp;":"&","&gt;":">","&lt;":"<","&quot;":'"',"&apos;":"'"};function Qi(t,e){const n=e.split(/(&[#a-zA-Z0-9]+;)/);if(n.length<=1)return e;for(let e=1;e<n.length;e+=2){const r=n[e];if("#"===r.charAt(1)){let t;t="x"===r.charAt(2)?parseInt(r.substring(3,r.length-1),16):parseInt(r.substring(2,r.length-1),10),!isNaN(t)&&t>=0&&t<=1114111&&(n[e]=String.fromCodePoint(t))}else t.hasOwnProperty(r)&&(n[e]=t[r])}return n.join("")}function Wi(t,e){var n=(e=e||{}).pos||0,r=!!e.keepComments,i=!!e.keepWhitespace,o=e.attrMatchers||[],a=e.nodesAsArray||[],s="<",l="<".charCodeAt(0),u=">",c=">".charCodeAt(0),d="-".charCodeAt(0),f="/".charCodeAt(0),h="!".charCodeAt(0),p="'".charCodeAt(0),m='"'.charCodeAt(0),g="[".charCodeAt(0),v="]".charCodeAt(0);function y(e,o){for(var p=[];t[n];)if(t.charCodeAt(n)==l){if(t.charCodeAt(n+1)===f){var m=n+2;if(n=t.indexOf(u,n),-1==t.substring(m,n).indexOf(e)){var y=t.substring(0,n).split("\n");throw new Error("Unexpected close tag\nLine: "+(y.length-1)+"\nColumn: "+(y[y.length-1].length+1)+"\nChar: "+t[n])}return n+1&&(n+=1),p}if(t.charCodeAt(n+1)===h){if(t.charCodeAt(n+2)==d){const e=n;for(;-1!==n&&(t.charCodeAt(n)!==c||t.charCodeAt(n-1)!=d||t.charCodeAt(n-2)!=d||-1==n);)n=t.indexOf(u,n+1);-1===n&&(n=t.length),r&&p.push(t.substring(e,n+1))}else{if(t.charCodeAt(n+2)===g&&t.charCodeAt(n+8)===g&&"cdata"===t.substr(n+3,5).toLowerCase()){var b=t.indexOf("]]>",n);-1==b?(p.push(t.substr(n+9)),n=t.length):(p.push(t.substring(n+9,b)),n=b+3);continue}{const e=n+1;n+=2;for(var _=!1;(t.charCodeAt(n)!==c||!0===_)&&t[n];)t.charCodeAt(n)===g?_=!0:!0===_&&t.charCodeAt(n)===v&&(_=!1),n++;p.push(t.substring(e,n))}}n++;continue}var w=E();if(p.push(w),"?"===w.tagName[0]&&(p.push(...w.children),w.children=[]),o){let t=w.tagName;-1!==a.indexOf(t)?(o[t]||(o[t]=[]),o[t].push(w)):o[t]=w}}else{var A=(void 0,x=n,-2==(n=t.indexOf(s,n)-1)&&(n=t.length),Qi(Vi,t.slice(x,n+1)));i||(A=A.trim()),o?o.__text=A:p.push(A),n++}var x;return p}function b(t,e,n){if("S"===t)return parseInt(n);let r=Qi(Vi,n);return o.forEach((i=>{i.test(t,e,n)&&(r=i.converter(n))})),r}var _="\r\n\t>/= ";function w(){for(var e=n;-1===_.indexOf(t[n])&&t[n];)n++;return t.slice(e,n)}var A=e.noChildNodes||["img","br","input","meta","link","hr"];function E(){n++;const e=w();let r=[],i={tagName:e},o=i.tagName.indexOf(":");for(-1!==o&&(i.__prefix=i.tagName.substr(0,o),i.tagName=i.tagName.substr(o+1));t.charCodeAt(n)!==c&&t[n];){var a=t.charCodeAt(n);if(a>64&&a<91||a>96&&a<123){for(var s=w(),l=t.charCodeAt(n);l&&l!==p&&l!==m&&!(l>64&&l<91||l>96&&l<123)&&l!==c;)n++,l=t.charCodeAt(n);if(l===p||l===m){var u=(void 0,void 0,d=t[n],h=n+1,n=t.indexOf(d,h),t.slice(h,n));if(-1===n)return i}else u=null,n--;u=b(i.tagName,s,u),i[s]=u}n++}var d,h;if(t.charCodeAt(n-1)!==f)if("script"==e){var g=n+1;n=t.indexOf("<\/script>",n),r=[t.slice(g,n)],n+=9}else"style"==e?(g=n+1,n=t.indexOf("</style>",n),r=[t.slice(g,n)],n+=8):-1===A.indexOf(e)?(n++,r=y(e,i)):n++;else n++;return i.__children=r,i}var x,S=null;if(void 0!==e.attrValue)for(e.attrName=e.attrName||"id",S=[];-1!==(x=new RegExp("\\s"+e.attrName+"\\s*=['\"]"+e.attrValue+"['\"]").exec(t),n=x?x.index:-1);)-1!==(n=t.lastIndexOf("<",n))&&S.push(E()),t=t.substr(n),n=0;else S=e.parseNode?E():y("");return e.filter&&(S=Ki(S,e.filter)),e.simplify?Yi(Array.isArray(S)?S:[S]):(e.setPos&&(S.pos=n),S)}function Yi(t){var e={};if(!t.length)return"";if(1===t.length&&"string"==typeof t[0])return t[0];for(var n in t.forEach((function(t){if("object"==typeof t){e[t.tagName]||(e[t.tagName]=[]);var n=Yi(t.children);e[t.tagName].push(n),Object.keys(t.attributes).length&&"string"!=typeof n&&(n._attributes=t.attributes)}})),e)1==e[n].length&&(e[n]=e[n][0]);return e}function Ki(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"";var i=[];return t.forEach((function(t,o){if("object"==typeof t&&e(t,o,n,r)&&i.push(t),t.children){var a=Ki(t.children,e,n+1,(r?r+".":"")+o+"."+t.tagName);i=i.concat(a)}})),i}const Xi=[S.default.PERIOD,S.default.BASE_URL,S.default.ADAPTATION_SET,S.default.REPRESENTATION,S.default.CONTENT_PROTECTION,S.default.ROLE,S.default.ACCESSIBILITY,S.default.AUDIO_CHANNEL_CONFIGURATION,S.default.CONTENT_COMPONENT,S.default.ESSENTIAL_PROPERTY,S.default.LABEL,S.default.S,S.default.SEGMENT_URL,S.default.EVENT,S.default.EVENT_STREAM,S.default.LOCATION,S.default.SERVICE_DESCRIPTION,S.default.SUPPLEMENTAL_PROPERTY,S.default.METRICS,S.default.REPORTING,S.default.PATCH_LOCATION,S.default.REPLACE,S.default.ADD,S.default.REMOVE,S.default.UTC_TIMING,S.default.INBAND_EVENT_STREAM,S.default.PRODUCER_REFERENCE_TIME,S.default.CONTENT_STEERING];function $i(t){t=t||{};const e=this.context,n=t.debug;let r,i,o,a;function s(t){try{let e=Wi(t,{parseNode:!0,attrMatchers:o,nodesAsArray:Xi}),n={};if(-1!==e.tagName.toLowerCase().indexOf("xml"))for(let t in e){if(Array.isArray(e[t])){n[t]=e[t][0];break}if("object"==typeof e[t]){n[t]=e[t];break}}else n[e.tagName]=e,delete e.tagName;return n}catch(t){return null}}return r={getIron:function(){return a},parseXml:s,parse:function(t){let e;const n=window.performance.now();if(e=s(t),!e)throw new Error("failed to parse the manifest");e.Patch?(e=e.Patch,e.add&&e.add.forEach((t=>a.run(t))),e.replace&&e.replace.forEach((t=>a.run(t)))):(e=e.MPD,a.run(e));const r=window.performance.now();return i.info("Parsing complete: "+(r-n).toPrecision(3)+"ms"),e.protocol="DASH",e}},i=n.getLogger(r),o=[new Li,new Ni,new zi,new Fi],a=Ri(e).create({adaptationset:new Gi,period:new Hi}),r}$i.__dashjs_factory_name="DashParser";var Zi=k.default.getClassFactory($i);function Ji(t){t=t||{};const e=this.context,n=t.debug,r=t.settings,i=(0,C.default)(e).getInstance(),o=Tt(e).getInstance();let a,s,l,u,c,d=t.mssHandler,f=t.errHandler;function h(t){i.trigger(I.default.INTERNAL_MANIFEST_LOADED,{manifest:t.manifest})}return a={load:function(t){let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,f=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;const h=new Date,p=new xi(t,L.HTTPRequest.MPD_TYPE);a&&(p.serviceLocation=a),f&&(p.queryParams=f),p.startDate||(p.startDate=h),i.trigger(I.default.MANIFEST_LOADING_STARTED,{request:p}),l.load({request:p,success:function(a,l,f){if(!u)return;let h,p,m;if(f&&f!==t?(p=o.parseBaseUrl(f),h=f):(o.isRelative(t)&&(t=o.resolve(t,window.location.href)),p=o.parseBaseUrl(t)),"No Content"!=l)if(null===c&&(c=function(t){let r=null;return t.indexOf("SmoothStreamingMedia")>-1?(d&&(r=d.createMssParser(),d.createMssFragmentProcessor(),d.registerEvents()),r):t.indexOf("MPD")>-1||t.indexOf("Patch")>-1?Zi(e).create({debug:n}):r}(a)),null!==c){u.setParser(c);try{m=c.parse(a)}catch(e){return void i.trigger(I.default.INTERNAL_MANIFEST_LOADED,{manifest:null,error:new G.default(Q.MANIFEST_LOADER_PARSING_FAILURE_ERROR_CODE,Q.MANIFEST_LOADER_PARSING_FAILURE_ERROR_MESSAGE+`${t}`)})}if(m){if(m.url=h||t,m.originalUrl||(m.originalUrl=m.url),r&&r.get().streaming.enableManifestDurationMismatchFix&&m.mediaPresentationDuration&&m.Period.length>1){const t=m.Period.reduce(((t,e)=>t+e.duration),0);!isNaN(t)&&m.mediaPresentationDuration>t&&(s.warn("Media presentation duration greater than duration of all periods. Setting duration to total period duration"),m.mediaPresentationDuration=t)}m.baseUri=p,m.loadedTime=new Date,u.resolveManifestOnLoad(m),i.trigger(I.default.ORIGINAL_MANIFEST_LOADED,{originalManifest:a})}else i.trigger(I.default.INTERNAL_MANIFEST_LOADED,{manifest:null,error:new G.default(Q.MANIFEST_LOADER_PARSING_FAILURE_ERROR_CODE,Q.MANIFEST_LOADER_PARSING_FAILURE_ERROR_MESSAGE+`${t}`)})}else i.trigger(I.default.INTERNAL_MANIFEST_LOADED,{manifest:null,error:new G.default(Q.MANIFEST_LOADER_PARSING_FAILURE_ERROR_CODE,Q.MANIFEST_LOADER_PARSING_FAILURE_ERROR_MESSAGE+`${t}`)});else i.trigger(I.default.INTERNAL_MANIFEST_LOADED,{manifest:null})},error:function(e,n,r){i.trigger(I.default.INTERNAL_MANIFEST_LOADED,{manifest:null,error:new G.default(Q.MANIFEST_LOADER_LOADING_FAILURE_ERROR_CODE,Q.MANIFEST_LOADER_LOADING_FAILURE_ERROR_MESSAGE+`${t}, ${r}`)})}})},reset:function(){i.off(I.default.XLINK_READY,h,a),d&&d.reset(),u&&(u.reset(),u=null),l&&(l.abort(),l=null)}},s=n.getLogger(a),i.on(I.default.XLINK_READY,h,a),l=zn(e).create({errHandler:t.errHandler,dashMetrics:t.dashMetrics,mediaPlayerModel:t.mediaPlayerModel,urlUtils:o,constants:x.default,dashConstants:S.default,errors:Q,requestTimeout:t.settings.get().streaming.manifestRequestTimeout}),u=ki(e).create({errHandler:f,dashMetrics:t.dashMetrics,mediaPlayerModel:t.mediaPlayerModel,settings:t.settings}),c=null,a}Ji.__dashjs_factory_name="ManifestLoader";var to=k.default.getClassFactory(Ji);function eo(){let t;const e=this.context,n=(0,C.default)(e).getInstance();return t={error:function(t){n.trigger(I.default.ERROR,{error:t})}},t}eo.__dashjs_factory_name="ErrorHandler";var no=k.default.getSingletonFactory(eo),ro=n(559);function io(){const t=this.context,e=(0,C.default)(t).getInstance();let n,r,i,o,a,s,l;function u(t,e,n){const r=d(t,e,n);return i.isCodecSupportedBasedOnTestedConfigurations(r,t)}function c(t,e,n,r,i){const o=d(t,e,n),a=JSON.stringify(o);r.has(a)||(r.add(a),i.push(o))}function d(t,e,n){let r=null;switch(t){case x.default.VIDEO:r=function(t,e){let n={codec:e,width:t.width||null,height:t.height||null,framerate:t.frameRate||null,bitrate:t.bandwidth||null,isSupported:!0};o.get().streaming.capabilities.filterVideoColorimetryEssentialProperties&&Object.assign(n,function(t){let e={colorGamut:null,transferFunction:null,isSupported:!0};for(const n of t.EssentialProperty||[])n.schemeIdUri===x.default.COLOUR_PRIMARIES_SCHEME_ID_URI&&["1","5","6","7"].includes(n.value.toString())?e.colorGamut=x.default.MEDIA_CAPABILITIES_API.COLORGAMUT.SRGB:n.schemeIdUri===x.default.COLOUR_PRIMARIES_SCHEME_ID_URI&&["11","12"].includes(n.value.toString())?e.colorGamut=x.default.MEDIA_CAPABILITIES_API.COLORGAMUT.P3:n.schemeIdUri===x.default.COLOUR_PRIMARIES_SCHEME_ID_URI&&["9"].includes(n.value.toString())?e.colorGamut=x.default.MEDIA_CAPABILITIES_API.COLORGAMUT.REC2020:n.schemeIdUri===x.default.COLOUR_PRIMARIES_SCHEME_ID_URI&&["2"].includes(n.value.toString())?e.colorGamut=null:n.schemeIdUri===x.default.COLOUR_PRIMARIES_SCHEME_ID_URI&&(e.isSupported=!1),n.schemeIdUri===x.default.TRANSFER_CHARACTERISTICS_SCHEME_ID_URI&&["1","6","13","14","15"].includes(n.value.toString())?e.transferFunction=x.default.MEDIA_CAPABILITIES_API.TRANSFERFUNCTION.SRGB:n.schemeIdUri===x.default.TRANSFER_CHARACTERISTICS_SCHEME_ID_URI&&["16"].includes(n.value.toString())?e.transferFunction=x.default.MEDIA_CAPABILITIES_API.TRANSFERFUNCTION.PQ:n.schemeIdUri===x.default.TRANSFER_CHARACTERISTICS_SCHEME_ID_URI&&["18"].includes(n.value.toString())?e.transferFunction=x.default.MEDIA_CAPABILITIES_API.TRANSFERFUNCTION.HLG:n.schemeIdUri===x.default.TRANSFER_CHARACTERISTICS_SCHEME_ID_URI&&["2"].includes(n.value.toString())?e.transferFunction=null:n.schemeIdUri===x.default.TRANSFER_CHARACTERISTICS_SCHEME_ID_URI&&(e.isSupported=!1);return e}(t));let r=n.isSupported;o.get().streaming.capabilities.filterHDRMetadataFormatEssentialProperties&&Object.assign(n,function(t){let e={isSupported:!0,hdrMetadataType:null};for(const n of t.EssentialProperty||[])n.schemeIdUri===x.default.HDR_METADATA_FORMAT_SCHEME_ID_URI&&n.value===x.default.HDR_METADATA_FORMAT_VALUES.ST2094_10?e.hdrMetadataType=x.default.MEDIA_CAPABILITIES_API.HDR_METADATATYPE.SMPTE_ST_2094_10:n.schemeIdUri===x.default.HDR_METADATA_FORMAT_SCHEME_ID_URI&&n.value===x.default.HDR_METADATA_FORMAT_VALUES.SL_HDR2?e.hdrMetadataType=x.default.MEDIA_CAPABILITIES_API.HDR_METADATATYPE.SLHDR2:n.schemeIdUri===x.default.HDR_METADATA_FORMAT_SCHEME_ID_URI&&n.value===x.default.HDR_METADATA_FORMAT_VALUES.ST2094_40?e.hdrMetadataType=x.default.MEDIA_CAPABILITIES_API.HDR_METADATATYPE.SMPTE_ST_2094_40:n.schemeIdUri===x.default.HDR_METADATA_FORMAT_SCHEME_ID_URI&&(e.isSupported=!1);return e}(t));let i=n.isSupported;return r&&i||(n.isSupported=!1),n}(e,n);break;case x.default.AUDIO:r=function(t,e){const n=t.audioSamplingRate||null;return{codec:e,bitrate:t.bandwidth||null,samplerate:n,isSupported:!0}}(e,n);break;default:return r}return function(t,e){return t&&t[S.default.CONTENT_PROTECTION]&&t[S.default.CONTENT_PROTECTION].length>0&&(e.keySystemsMetadata=s.getSupportedKeySystemMetadataFromContentProtection(t[S.default.CONTENT_PROTECTION])),e}(e,r)}function f(t){if(!t||0===t.length)return!0;let e=0;for(;e<t.length;){if(!i.supportsEssentialProperty(t[e]))return l.debug("[Stream] EssentialProperty not supported: "+t[e].schemeIdUri),!1;e+=1}return!0}return n={setConfig:function(t){t&&(t.adapter&&(r=t.adapter),t.capabilities&&(i=t.capabilities),t.settings&&(o=t.settings),t.protectionController&&(s=t.protectionController),t.customParametersModel&&(a=t.customParametersModel))},filterUnsupportedFeatures:function(t){return new Promise((n=>{const s=[x.default.VIDEO,x.default.AUDIO],d=[];s.forEach((e=>{const n=function(t,e){if(!t||!t.Period||0===t.Period.length)return[];const n=new Set,i=[];return t.Period.forEach((t=>{t.AdaptationSet.forEach((t=>{r.getIsTypeOf(t,e)&&t.Representation.forEach(((o,a)=>{const s=r.getCodec(t,a,!1);c(e,o,s,n,i);const l=r.getSupplementalCodecs(o);l.length>0&&c(e,o,l[0],n,i)}))}))})),i}(t,e);n.forEach((t=>{d.push(i.runCodecSupportCheck(t,e))}))})),Promise.allSettled(d).then((()=>(s.forEach((n=>{!function(t,n){n&&n.Period&&0!==n.Period.length&&n.Period.forEach((n=>{!function(t,n){t&&t.AdaptationSet&&0!==t.AdaptationSet.length&&(t.AdaptationSet=t.AdaptationSet.filter((t=>{r.getIsTypeOf(t,n)&&function(t,e){t.Representation&&0!==t.Representation.length&&(t.Representation=t.Representation.filter(((n,i)=>{const o=r.getCodec(t,i,!1),a=u(e,n,o);let s=function(t,e){let n=!1;const i=r.getSupplementalCodecs(t);return i.length>0&&(i.length>1&&l.warn("[CapabilitiesFilter] Multiple supplemental codecs not supported; using the first in list"),n=u(e,t,i[0])),n}(n,e);return s&&(l.debug(`[CapabilitiesFilter] Codec supported. Upgrading codecs string of Representation with ID ${n.id}`),n.codecs=n[S.default.SUPPLEMENTAL_CODECS]),a||s||l.warn(`[CapabilitiesFilter] Codec ${o} not supported. Removing Representation with ID ${n.id}`),a||s})))}(t,n);const i=t.Representation&&t.Representation.length>0;return i||(e.trigger(I.default.ADAPTATION_SET_REMOVED_NO_CAPABILITIES,{adaptationSet:t}),l.warn(`[CapabilitiesFilter] AdaptationSet with ID ${t.id?t.id:"undefined"} and codec ${t.codecs?t.codecs:"undefined"} has been removed because of no supported Representation`)),i})))}(n,t)}))}(n,t)})),o.get().streaming.capabilities.filterUnsupportedEssentialProperties&&function(t){t&&t.Period&&0!==t.Period.length&&t.Period.forEach((t=>{t.AdaptationSet=t.AdaptationSet.filter((t=>!t.Representation||0===t.Representation.length||!!f(r.getEssentialPropertiesForAdaptationSet(t))&&(t.Representation=t.Representation.filter((t=>f(r.getEssentialPropertiesForRepresentation(t)))),t.Representation&&t.Representation.length>0)))}))}(t),function(t){if(!t||!t.Period||0===t.Period.length)return Promise.resolve();const e=[];return t.Period.forEach((t=>{e.push(function(t){return new Promise((e=>{if(!t||!t.AdaptationSet||0===t.AdaptationSet.length)return void e();const n=[];t.AdaptationSet.forEach((t=>{n.push(function(t){return new Promise((e=>{if(!t.Representation||0===t.Representation.length)return void e();const n=[];t.Representation.forEach((t=>{n.push(function(t){const e=[],n=a.getCustomCapabilitiesFilters();return n&&0!==n.length?n.forEach((n=>{e.push(new Promise((e=>e(n(t)))))})):e.push(Promise.resolve(!0)),Promise.all(e)}(t))})),Promise.all(n).then((n=>{t.Representation=t.Representation.filter(((t,e)=>{let r=n[e].every((t=>t));return r||l.debug("[Stream] Representation "+t.id+" has been removed because of unsupported CustomFilter"),r})),e()})).catch((t=>{l.warn("[Stream] at least one promise rejected in CustomFilter with error: ",t),e()}))}))}(t))})),Promise.all(n).then((()=>{t.AdaptationSet=t.AdaptationSet.filter((t=>t.Representation&&t.Representation.length>0)),e()})).catch((()=>{e()}))}))}(t))})),Promise.all(e)}(t)))).then((()=>{n()})).catch((t=>{l.error(t),n()}))}))}},l=(0,P.default)(t).getInstance().getLogger(n),n}io.__dashjs_factory_name="CapabilitiesFilter";var oo=k.default.getSingletonFactory(io),ao=class{constructor(){this.t=null,this.xywh=null,this.track=null,this.id=null,this.s=null,this.r=null}};function so(){let t,e;return t={initialize:function(t){if(e=new ao,!t)return null;const n=t.indexOf("#");if(-1!==n){const r=t.substr(n+1).split("&");for(let t=0,n=r.length;t<n;++t){const n=r[t],i=n.indexOf("=");if(-1!==i){const t=n.substring(0,i);e.hasOwnProperty(t)&&(e[t]=n.substr(i+1))}}}},getURIFragmentData:function(){return e}},t}so.__dashjs_factory_name="URIFragmentModel";var lo=k.default.getSingletonFactory(so);function uo(){let t,e,n=this.context,r=(0,C.default)(n).getInstance();return t={getValue:function(){return e},setValue:function(t){e=t,t&&r.trigger(I.default.MANIFEST_LOADED,{data:t})}},t}uo.__dashjs_factory_name="ManifestModel";var co=k.default.getSingletonFactory(uo);function fo(){let t,e,n,r;const i=this.context,o=(0,W.default)(i).getInstance();function a(t,n){return isNaN(t)?0:t>0?(n&&e.warn("Supplied minimum playback rate is a positive value when it should be negative or 0. The supplied rate will not be applied and set to 0: 100% playback speed."),0):t<-.5?(n&&e.warn("Supplied minimum playback rate is out of range and will be limited to -0.5: -50% playback speed."),-.5):t}function s(t,n){return isNaN(t)?0:t<0?(n&&e.warn("Supplied maximum playback rate is a negative value when it should be negative or 0. The supplied rate will not be applied and set to 0: 100% playback speed."),0):t>1?(n&&e.warn("Supplied maximum playback rate is out of range and will be limited to 1: 200% playback speed."),1):t}function l(){const t=u(),e=n.getLiveDelay();return!isNaN(e)&&e>0?Math.min(t,e):t}function u(){return o.get().streaming.buffer.bufferTimeDefault>0?o.get().streaming.buffer.bufferTimeDefault:c()?20:12}function c(){return null!==o.get().streaming.buffer.fastSwitchEnabled?o.get().streaming.buffer.fastSwitchEnabled:!n.getLowLatencyModeEnabled()}return t={getCatchupMaxDrift:function(){if(!isNaN(o.get().streaming.liveCatchup.maxDrift)&&o.get().streaming.liveCatchup.maxDrift>=0)return o.get().streaming.liveCatchup.maxDrift;const t=r.getServiceDescriptionSettings();return t&&t.liveCatchup&&!isNaN(t.liveCatchup.maxDrift)&&t.liveCatchup.maxDrift>=0?t.liveCatchup.maxDrift:12},getCatchupModeEnabled:function(){return null!==o.get().streaming.liveCatchup.enabled?o.get().streaming.liveCatchup.enabled:n.getInitialCatchupModeActivated()},getBufferTimeDefault:l,getBufferTimeDefaultUnadjusted:u,getFastSwitchEnabled:c,getInitialBufferLevel:function(){const t=o.get().streaming.buffer.initialBufferLevel;return isNaN(t)||t<0?0:Math.min(l(),t)},getRetryAttemptsForType:function(t){const e=isNaN(o.get().streaming.retryAttempts.lowLatencyMultiplyFactor)?5:o.get().streaming.retryAttempts.lowLatencyMultiplyFactor;return n.getLowLatencyModeEnabled()?o.get().streaming.retryAttempts[t]*e:o.get().streaming.retryAttempts[t]},getRetryIntervalsForType:function(t){const e=isNaN(o.get().streaming.retryIntervals.lowLatencyReductionFactor)?10:o.get().streaming.retryIntervals.lowLatencyReductionFactor;return n.getLowLatencyModeEnabled()?o.get().streaming.retryIntervals[t]/e:o.get().streaming.retryIntervals[t]},getCatchupPlaybackRates:function(t){const e=o.get().streaming.liveCatchup.playbackRate;if(!isNaN(e.min)||!isNaN(e.max))return{min:a(e.min,t),max:s(e.max,t)};const n=r.getServiceDescriptionSettings();if(n&&n.liveCatchup&&(!isNaN(n.liveCatchup.playbackRate.min)||!isNaN(n.liveCatchup.playbackRate.max))){const e=n.liveCatchup.playbackRate;return{min:a(e.min,t),max:s(e.max,t)}}return{min:-.5,max:.5}},getAbrBitrateParameter:function(t,e){try{const n=o.get().streaming.abr[t][e];if(!isNaN(n)&&-1!==n)return n;const i=r.getServiceDescriptionSettings();return i&&i[t]&&!isNaN(i[t][e])?i[t][e]:-1}catch(t){return-1}},setConfig:function(t){t.playbackController&&(n=t.playbackController),t.serviceDescriptionController&&(r=t.serviceDescriptionController)},reset:function(){}},e=(0,P.default)(i).getInstance().getLogger(t),t}fo.__dashjs_factory_name="MediaPlayerModel";var ho=k.default.getSingletonFactory(fo);const po={DEFAULT:.5,STRONG:1,WEAK:0};function mo(t,e,n,r){let i,o,a,s,l;return o=void 0===t?null:t,a=function(t){let e=po.DEFAULT;return t!==po.DEFAULT&&t!==po.STRONG&&t!==po.WEAK||(e=t),e}(n),s=void 0===e?null:e,l=void 0===r?null:r,i={representation:o,reason:s,rule:l,priority:a},i}mo.__dashjs_factory_name="SwitchRequest";const go=k.default.getClassFactory(mo);go.NO_CHANGE=null,go.PRIORITY=po,k.default.updateClassFactory(mo.__dashjs_factory_name,go);var vo=go;function yo(t){t=t||{};const e=this.context,n=t.dashMetrics;let r,i;return r={getSwitchRequest:function(t){try{const r=vo(e).create();r.rule=this.getClassName();const i=t.getMediaInfo(),o=t.getMediaType(),a=n.getCurrentBufferState(o),s=t.getScheduleController(),l=t.getAbrController(),u=t.getStreamInfo(),c=u?u.id:null,d=u&&u.manifestInfo?u.manifestInfo.isDynamic:null,f=t.getThroughputController(),h=f.getSafeAverageThroughput(o),p=f.getAverageLatency(o);return isNaN(h)||!a||l.getAbandonmentStateFor(c,o)===T.ALLOW_LOAD&&(a.state===T.BUFFER_LOADED||d)&&(r.representation=l.getOptimalRepresentationForBitrate(i,h,!0),r.reason={throughput:h,latency:p,message:`[ThroughputRule]: Switching to Representation with bitrate ${r.representation?r.representation.bitrateInKbit:"n/a"} kbit/s. Throughput: ${h}`},s.setTimeToLoadDelay(0)),r}catch(t){return i.error(t),vo(e).create()}},reset:function(){}},i=(0,P.default)(e).getInstance().getLogger(r),r}yo.__dashjs_factory_name="ThroughputRule";var bo=k.default.getClassFactory(yo);function _o(t){t=t||{};const e=this.context,n=(0,C.default)(e).getInstance(),r=t.dashMetrics,i=(0,W.default)(e).getInstance();let o,a,s;function l(){const t=i.get().streaming.abr.rules.insufficientBufferRule.parameters.segmentIgnoreCount;s={},s[x.default.VIDEO]={ignoreCount:t},s[x.default.AUDIO]={ignoreCount:t}}function u(){l()}function c(t){isNaN(t.startTime)||t.mediaType!==x.default.AUDIO&&t.mediaType!==x.default.VIDEO||s[t.mediaType].ignoreCount>0&&s[t.mediaType].ignoreCount--}return o={getSwitchRequest:function(t){const n=vo(e).create();if(n.rule=this.getClassName(),!t||!t.hasOwnProperty("getMediaType"))return n;const o=t.getMediaType(),l=r.getCurrentBufferState(o),u=t.getRepresentation().fragmentDuration;if(!function(t,e,n){return!t.getLowLatencyModeEnabled()&&s[e].ignoreCount<=0&&n}(t.getScheduleController().getPlaybackController(),o,u))return n;const c=t.getMediaInfo(),d=t.getAbrController();if(l&&l.state===T.BUFFER_EMPTY)a.debug("["+o+"] Switch to index 0; buffer is empty."),n.representation=d.getOptimalRepresentationForBitrate(c,0,!0),n.reason={message:"[InsufficientBufferRule]: Switching to lowest Representation because buffer is empty"};else{const e=t.getThroughputController(),a=r.getCurrentBufferLevel(o),s=e.getAverageThroughput(o,null,NaN)*i.get().streaming.abr.rules.insufficientBufferRule.parameters.throughputSafetyFactor*a/u;if(isNaN(s)||s<=0)return n;n.representation=d.getOptimalRepresentationForBitrate(c,s,!0),n.reason={message:"[InsufficientBufferRule]: Limiting maximum bitrate to avoid a buffer underrun.",bitrate:s}}return n},reset:function(){l(),n.off(R.default.PLAYBACK_SEEKING,u,o),n.off(I.default.BYTES_APPENDED_END_FRAGMENT,c,o)}},a=(0,P.default)(e).getInstance().getLogger(o),l(),n.on(R.default.PLAYBACK_SEEKING,u,o),n.on(I.default.BYTES_APPENDED_END_FRAGMENT,c,o),o}_o.__dashjs_factory_name="InsufficientBufferRule";var wo=k.default.getClassFactory(_o);function Ao(t){const e=(t=t||{}).mediaPlayerModel,n=t.dashMetrics,r=this.context,i=(0,W.default)(r).getInstance();let o,a,s;function l(){s={}}return o={shouldAbandon:function(t){const o=vo(r).create();o.rule=this.getClassName();try{if(!t)return o;const r=t.getCurrentRequest();if(!isNaN(r.index)){if(null===r.firstByteDate||s.hasOwnProperty(r.index))return o;const a=e.getBufferTimeDefault(),l=t.getMediaType();if(n.getCurrentBufferLevel(l)>a)return o;const u=Date.now()-r.firstByteDate.getTime();if(r.traces.length>=i.get().streaming.abr.rules.abandonRequestsRule.parameters.minThroughputSamplesThreshold&&u>i.get().streaming.abr.rules.abandonRequestsRule.parameters.minSegmentDownloadTimeThresholdInMs&&r.bytesLoaded<r.bytesTotal)return function(t,e,n){const r=t.getMediaInfo(),o=t.getMediaType(),a=e.traces.reduce(((t,e)=>t+e.b[0]),0)-e.traces[0].b[0],l=Math.max(e.traces.reduce(((t,e)=>t+e.d),0)-e.traces[0].d,1),u=Math.round(8*a/l),c=Number(8*e.bytesTotal/u/1e3).toFixed(2),d=t.getRepresentation(),f=t.getAbrController();if(c<e.duration*i.get().streaming.abr.rules.abandonRequestsRule.parameters.abandonDurationMultiplier||f.isPlayingAtLowestQuality(d))return n;if(!s.hasOwnProperty(e.index)){const i=t.getAbrController(),a=e.bytesTotal-e.bytesLoaded,l=i.getOptimalRepresentationForBitrate(r,u,!0),c=e.representation;a>e.bytesTotal*l.bitrateInKbit/c.bitrateInKbit&&(n.representation=l,n.reason={throughputInKbit:u,message:`[AbandonRequestRule][${o} is asking to abandon and switch to quality to ${l.absoluteIndex}. The measured bandwidth was ${u} kbit/s`},s[e.index]=!0)}return n}(t,r,o)}return o}catch(t){return a.error(t),o}},reset:l},a=(0,P.default)(r).getInstance().getLogger(o),l(),o}Ao.__dashjs_factory_name="AbandonRequestsRule";var Eo=k.default.getClassFactory(Ao);function xo(){const t=this.context,e=(0,W.default)(t).getInstance();let n;return n={getSwitchRequest:function(n){const r=vo(t).create();if(r.rule=this.getClassName(),!n||!n.hasOwnProperty("getDroppedFramesHistory"))return r;const i=n.getDroppedFramesHistory();if(!i)return r;const o=n.getStreamInfo().id,a=n.getMediaInfo(),s=n.getAbrController(),l=i.getFrameHistory(o);if(!l||0===Object.keys(l).length)return r;let u=0,c=0;const d=s.getPossibleVoRepresentationsFilteredBySettings(a,!0);let f=null;for(let t=1;t<d.length;t++){const n=d[t];if(n&&l[n.id]&&(u=l[n.id].droppedVideoFrames,c=l[n.id].totalVideoFrames,c>e.get().streaming.abr.rules.droppedFramesRule.parameters.minimumSampleSize&&u/c>e.get().streaming.abr.rules.droppedFramesRule.parameters.droppedFramesPercentageThreshold)){f=d[t-1];break}}return f&&(r.representation=f,r.reason={droppedFrames:u,message:`[DroppedFramesRule]: Switching to index ${f.absoluteIndex}. Dropped Frames: ${u}, Total Frames: ${c}`}),r}},n}xo.__dashjs_factory_name="DroppedFramesRule";var So=k.default.getClassFactory(xo);function To(){const t=this.context,e=(0,W.default)(t).getInstance();let n;return n={getSwitchRequest:function(n){const r=vo(t).create();if(r.rule=this.getClassName(),!n)return r;const i=n.getStreamInfo().id,o=n.getMediaType(),a=n?n.getSwitchRequestHistory():null,s=a?a.getSwitchRequests(i,o):{},l=n.getAbrController(),u=n.getMediaInfo(),c=l.getPossibleVoRepresentationsFilteredBySettings(u,!0);let d=0,f=0;for(let t=0;t<c.length;t++){const n=c[t];if(n&&s[n.id]&&(d+=s[n.id].drops,f+=s[n.id].noDrops,d+f>=e.get().streaming.abr.rules.switchHistoryRule.parameters.sampleSize&&d/f>e.get().streaming.abr.rules.switchHistoryRule.parameters.switchPercentageThreshold)){r.representation=t>0&&s[n.id].drops>0?c[t-1]:n,r.reason={drops:d,noDrops:f,message:`[SwitchHistoryRule]: Switch to index: ${r.representation.absoluteIndex} samples: ${d+f} drops:  ${d}`};break}}return r}},n}To.__dashjs_factory_name="SwitchHistoryRule";var Co=k.default.getClassFactory(To);const Io="BOLA_STATE_ONE_BITRATE",ko="BOLA_STATE_STARTUP",Po="BOLA_STATE_STEADY",Ro=10;function Oo(t){t=t||{};const e=this.context,n=t.dashMetrics,r=t.mediaPlayerModel,i=(0,C.default)(e).getInstance(),o=aa(e).getInstance();let a,s,l;function u(t){const e=t.mediaType,n=t.streamId,r=e===x.default.AUDIO?[x.default.AUDIO]:l[n];for(const t in r)l[n]&&l[n].hasOwnProperty(t)&&l[n][t].state===Po&&(l[n][t].placeholderBuffer=0)}function c(t){const e=t.streamId;for(const t in l[e])if(l[e].hasOwnProperty(t)){const n=l[e][t];n.state!==Io&&(n.state=ko,d(n))}}function d(t){t.placeholderBuffer=0,t.mostAdvancedSegmentStart=NaN,t.lastSegmentWasReplacement=!1,t.lastSegmentStart=NaN,t.lastSegmentDurationS=NaN,t.lastSegmentRequestTimeMs=NaN,t.lastSegmentFinishTimeMs=NaN}function f(t){try{if(t&&t.metric===T.HTTP_REQUEST&&t.value&&t.value.type===L.HTTPRequest.MEDIA_SEGMENT_TYPE&&t.value.trace&&t.value.trace.length){const e=l[t.value._streamId]&&l[t.value._streamId][t.mediaType]?l[t.value._streamId][t.mediaType]:null;e&&e.state!==Io&&(e.lastSegmentRequestTimeMs=t.value.trequest.getTime(),e.lastSegmentFinishTimeMs=t.value._tfinish.getTime(),h(e,t.mediaType))}}catch(t){s.error(t)}}function h(t,e){if(!isNaN(t.lastSegmentStart)&&!isNaN(t.lastSegmentRequestTimeMs)&&!isNaN(t.placeholderBuffer)){if(t.placeholderBuffer*=.99,!isNaN(t.lastSegmentFinishTimeMs)){const r=n.getCurrentBufferLevel(e)+.001*(t.lastSegmentFinishTimeMs-t.lastSegmentRequestTimeMs),i=v(t,t.currentRepresentation),o=Math.max(0,i-r);t.placeholderBuffer=Math.min(o,t.placeholderBuffer)}t.lastSegmentWasReplacement&&!isNaN(t.lastSegmentDurationS)&&(t.placeholderBuffer+=t.lastSegmentDurationS),t.lastSegmentStart=NaN,t.lastSegmentRequestTimeMs=NaN}}function p(t){if(t&&l[t.streamId]&&l[t.streamId][t.mediaType]){const e=l[t.streamId][t.mediaType];e&&e.state!==Io&&(e.currentRepresentation=t.newRepresentation)}}function m(t,e,n){const r=n.reduce(((t,e,r)=>e>n[t]?r:t),0);if(0===r)return null;const i=Math.max(t,Ro+2*e.length),o=(n[r]-1)/(i/Ro-1);return{gp:o,Vp:Ro/o}}function g(t,e){const i=r.getBufferTimeDefault();if(t.bufferTimeDefault!==i){const r=m(i,t.representations,t.utilities);if(r.Vp!==t.Vp||r.gp!==t.gp){const o=n.getCurrentBufferLevel(e);let a=o+t.placeholderBuffer;a-=Ro,a*=r.Vp/t.Vp,a+=Ro,t.bufferTimeDefault=i,t.Vp=r.Vp,t.gp=r.gp,t.placeholderBuffer=Math.max(0,a-o)}}}function v(t,e){return t.Vp*(t.utilities[e.absoluteIndex]+t.gp)}function y(t){if(t&&t.chunk&&t.chunk.representation.mediaInfo&&l[t.streamId]){const e=l[t.streamId][t.chunk.representation.mediaInfo.type];if(e&&e.state!==Io){const n=t.chunk.start;isNaN(e.mostAdvancedSegmentStart)||n>e.mostAdvancedSegmentStart?(e.mostAdvancedSegmentStart=n,e.lastSegmentWasReplacement=!1):e.lastSegmentWasReplacement=!0,e.lastSegmentStart=n,e.lastSegmentDurationS=t.chunk.duration,e.currentRepresentation=t.chunk.representation,h(e,t.chunk.representation.mediaInfo.type)}}}function b(){A()}function _(t,e){const n=e.absoluteIndex,r=e.bandwidth,i=t.utilities[n];let o=0;for(let e=n-1;e>=0;--e)if(t.utilities[e]<t.utilities[n]){const n=t.representations[e].bandwidth,a=t.utilities[e],s=t.Vp*(t.gp+(r*a-n*i)/(r-n));o=Math.max(o,s)}return o}function w(t){if(t&&l[t.streamId]){const e=l[t.streamId][t.mediaType];if(e&&e.state!==Io){const r=n.getCurrentBufferLevel(t.mediaType);let i;i=e.currentRepresentation.absoluteIndex>0?_(e,e.currentRepresentation):Ro;const o=Math.max(0,i-r);e.placeholderBuffer=Math.min(e.placeholderBuffer,o)}}}function A(){l={}}return a={getSwitchRequest:function(t){try{const i=vo(e).create();t.getScheduleController().setTimeToLoadDelay(0),i.rule=this.getClassName(),i.reason=i.reason||{};const a=function(t){const e=t.getMediaType(),n=t.getStreamInfo().id;l[n]||(l={},l[n]={});let i=l[n][e];return i?i.state!==Io&&g(i,e):(i=function(t){const e={},n=t.getMediaInfo(),i=o.getPossibleVoRepresentationsFilteredBySettings(n,!0);let a=i.map((t=>t.bandwidth)).map((t=>Math.log(t)));a=a.map((t=>t-a[0]+1));const s=r.getBufferTimeDefault(),l=m(s,i,a);return l?(e.state=ko,e.representations=i,e.utilities=a,e.bufferTimeDefault=s,e.Vp=l.Vp,e.gp=l.gp,e.currentRepresentation=null,d(e)):e.state=Io,e}(t),l[n][e]=i),i}(t);switch(i.reason.state=a.state,a.state){case Io:break;case ko:!function(t,e,r){const i=e.getMediaType(),a=e.getThroughputController().getSafeAverageThroughput(i);if(isNaN(a))return;const s=e.getMediaInfo(),l=o.getOptimalRepresentationForBitrate(s,a,!0),u=n.getCurrentBufferLevel(i);t.representation=l,t.reason.throughput=a,r.placeholderBuffer=Math.max(0,_(r,l)-u),r.currentRepresentation=l,!isNaN(r.lastSegmentDurationS)&&u>=r.lastSegmentDurationS&&(r.state=Po)}(i,t,a);break;case Po:!function(t,e,r){const i=e.getMediaType(),a=e.getThroughputController(),s=e.getMediaInfo(),l=a.getSafeAverageThroughput(i),u=e.getScheduleController();!function(t,e){const n=Date.now();if(isNaN(t.lastSegmentFinishTimeMs)){if(!isNaN(t.lastCallTimeMs)){const e=.001*(n-t.lastCallTimeMs);t.placeholderBuffer+=Math.max(0,e)}}else{const e=.001*(n-t.lastSegmentFinishTimeMs);t.placeholderBuffer+=Math.max(0,e)}t.lastCallTimeMs=n,t.lastSegmentStart=NaN,t.lastSegmentRequestTimeMs=NaN,t.lastSegmentFinishTimeMs=NaN,g(t,e)}(r,i);const c=n.getCurrentBufferLevel(i);let d=function(t,e){const n=t.representations.length;let r=NaN,i=NaN;for(let o=0;o<n;++o){let n=(t.Vp*(t.utilities[o]-1+t.gp)-e)/t.representations[o].bandwidth;(isNaN(i)||n>=i)&&(i=n,r=o)}return t.representations[r]}(r,c+r.placeholderBuffer);const f=o.getOptimalRepresentationForBitrate(s,l,!0);d.absoluteIndex>r.currentRepresentation.absoluteIndex&&d.absoluteIndex>f.absoluteIndex&&(d=f.absoluteIndex>r.currentRepresentation.absoluteIndex?f:r.currentRepresentation);let h=Math.max(0,c+r.placeholderBuffer-v(r,d));h<=r.placeholderBuffer?(r.placeholderBuffer-=h,h=0):(h-=r.placeholderBuffer,r.placeholderBuffer=0,o.isPlayingAtTopQuality(d)?h=0:u.setTimeToLoadDelay(1e3*h)),t.representation=d,t.reason.throughput=l,t.reason.bufferLevel=c,t.reason.placeholderBuffer=r.placeholderBuffer,t.reason.delay=h,r.currentRepresentation=d}(i,t,a);break;default:!function(t,e,n){s.debug("BOLA ABR rule invoked in bad state.");const r=e.getMediaInfo(),i=e.getMediaType(),a=e.getThroughputController().getSafeAverageThroughput(i);t.representation=o.getOptimalRepresentationForBitrate(r,a,!0),t.reason.state=n.state,t.reason.throughput=a,n.state=ko,d(n)}(i,t,a)}return i}catch(t){return s.error(t),vo(e).create()}},handleNewMediaInfo:function(t){t&&t.streamInfo&&t.type&&l[t.streamInfo.id]&&l[t.streamInfo.id][t.type]&&delete l[t.streamInfo.id][t.type]},reset:function(){A(),i.off(R.default.BUFFER_EMPTY,u,a),i.off(R.default.PLAYBACK_SEEKING,c,a),i.off(R.default.METRIC_ADDED,f,a),i.off(R.default.QUALITY_CHANGE_REQUESTED,p,a),i.off(R.default.FRAGMENT_LOADING_ABANDONED,w,a),i.off(I.default.MEDIA_FRAGMENT_LOADED,y,a),i.off(I.default.SETTING_UPDATED_MAX_BITRATE,b,a),i.off(I.default.SETTING_UPDATED_MIN_BITRATE,b,a)}},s=(0,P.default)(e).getInstance().getLogger(a),A(),i.on(R.default.BUFFER_EMPTY,u,a),i.on(R.default.PLAYBACK_SEEKING,c,a),i.on(R.default.METRIC_ADDED,f,a),i.on(R.default.QUALITY_CHANGE_REQUESTED,p,a),i.on(R.default.FRAGMENT_LOADING_ABANDONED,w,a),i.on(I.default.MEDIA_FRAGMENT_LOADED,y,a),i.on(I.default.SETTING_UPDATED_MAX_BITRATE,b,a),i.on(I.default.SETTING_UPDATED_MIN_BITRATE,b,a),a}Oo.__dashjs_factory_name="BolaRule";var Mo=k.default.getClassFactory(Oo);const Lo="L2A_STATE_ONE_BITRATE",Do="L2A_STATE_STARTUP",No="L2A_STATE_STEADY",Bo=Math.pow(4,.99);function jo(t){t=t||{};const e=this.context,n=t.dashMetrics,r=(0,C.default)(e).getInstance();let i,o,a,s;function l(t){t.placeholderBuffer=0,t.mostAdvancedSegmentStart=NaN,t.lastSegmentWasReplacement=!1,t.lastSegmentStart=NaN,t.lastSegmentDurationS=NaN,t.lastSegmentRequestTimeMs=NaN,t.lastSegmentFinishTimeMs=NaN,t.lastSegmentUrl=""}function u(){for(const t in o)if(o.hasOwnProperty(t)){const e=o[t];e.state!==Lo&&(e.state=Do,l(e))}}function c(t){if(t&&t.chunk&&t.chunk.representation&&t.chunk.representation.mediaInfo){const e=o[t.chunk.representation.mediaInfo.type],n=a[t.chunk.representation.mediaInfo.type];if(e&&e.state!==Lo){const r=t.chunk.start;isNaN(e.mostAdvancedSegmentStart)||r>e.mostAdvancedSegmentStart?(e.mostAdvancedSegmentStart=r,e.lastSegmentWasReplacement=!1):e.lastSegmentWasReplacement=!0,e.lastSegmentStart=r,e.lastSegmentDurationS=t.chunk.duration,e.currentRepresentation=t.chunk.representation,f(e,n)}}}function d(t){if(t&&t.metric===T.HTTP_REQUEST&&t.value&&t.value.type===L.HTTPRequest.MEDIA_SEGMENT_TYPE&&t.value.trace&&t.value.trace.length){const e=o[t.mediaType],n=a[t.mediaType];e&&e.state!==Lo&&(e.lastSegmentRequestTimeMs=t.value.trequest.getTime(),e.lastSegmentFinishTimeMs=t.value._tfinish.getTime(),f(e,n))}}function f(t,e){isNaN(t.lastSegmentStart)||isNaN(t.lastSegmentRequestTimeMs)||(e.segment_request_start_s=.001*t.lastSegmentRequestTimeMs,e.segment_download_finish_s=.001*t.lastSegmentFinishTimeMs,t.lastSegmentStart=NaN,t.lastSegmentRequestTimeMs=NaN)}function h(t,e){if(t.length!==e.length)return-1;let n=0;for(let r=0;r<t.length;r++)n+=t[r]*e[r];return n}function p(){o={},a={}}return i={getSwitchRequest:function(t){try{const r=vo(e).create();r.rule=this.getClassName();const i=t.getMediaType(),s=t.getScheduleController();if(r.reason=r.reason||{},i===x.default.AUDIO)return r;s.setTimeToLoadDelay(0);const u=function(t){const e=t.getMediaType();let n=o[e];return n||(n=function(t){const e={},n=t.getMediaInfo();return e.state=Do,e.currentRepresentation=null,function(t){t&&t.type&&(a[t.type]={},a[t.type].w=[],a[t.type].prev_w=[],a[t.type].Q=0,a[t.type].segment_request_start_s=0,a[t.type].segment_download_finish_s=0,a[t.type].B_target=1.5)}(n),l(e),e}(t),o[e]=n),n}(t);if(!a[i])return r;switch(r.reason.state=u.state,u.state){case Lo:break;case Do:!function(t,e,r){const i=t.getMediaInfo(),o=t.getMediaType(),s=t.getThroughputController().getSafeAverageThroughput(o);if(isNaN(s))return e;const l=t.getAbrController(),u=l.getOptimalRepresentationForBitrate(i,s,!0),c=n.getCurrentBufferLevel(o,!0),d=a[o],f=l.getPossibleVoRepresentationsFilteredBySettings(i,!0);if(e.representation=u,e.reason.throughput=s,r.currentRepresentation=u,!isNaN(r.lastSegmentDurationS)&&c>=d.B_target){r.state=No,d.Q=Bo;for(let t=0;t<f.length;++t)f[t].id===r.currentRepresentation.id?d.prev_w[t]=1:d.prev_w[t]=0}}(t,r,u);break;case No:!function(t,e,r){let i=[];const o=t.getThroughputController(),s=t.getMediaType();let l=o.getAverageThroughput(s,x.default.THROUGHPUT_CALCULATION_MODES.ARITHMETIC_MEAN,1),u=n.getCurrentHttpRequest(s),c=null;const d=a[s];if(l<1&&(l=1),u.url===r.lastSegmentUrl||u.type===L.HTTPRequest.INIT_SEGMENT_TYPE)c=r.currentRepresentation;else{let e=r.lastSegmentDurationS,n=1;const o=t.getAbrController(),a=t.getMediaInfo(),s=o.getPossibleVoRepresentationsFilteredBySettings(a,!0);let f=t.getVideoModel().getPlaybackRate();const p=Math.max(Math.pow(4,1),Bo*Math.sqrt(4));for(let t=0;t<s.length;++t){const r=s[t];f*r.bitrateInKbit>l&&(n=-1),d.w[t]=d.prev_w[t]+n*(e/(2*p))*((d.Q+Bo)*(f*r.bitrateInKbit/l))}d.w=function(t){const e=t.length;let n=!1,r=[];for(let n=0;n<e;++n)r[n]=t[n];let i=t.sort((function(t,e){return e-t})),o=0,a=0,s=[];for(let t=0;t<e-1;++t)if(o+=i[t],a=(o-1)/(t+1),a>=i[t+1]){n=!0;break}n||(a=(o+i[e-1]-1)/e);for(let t=0;t<e;++t)s[t]=Math.max(r[t]-a,0);return s}(d.w);for(let t=0;t<s.length;++t)i[t]=d.w[t]-d.prev_w[t],d.prev_w[t]=d.w[t];const m=s.map((t=>t.bandwidth));d.Q=Math.max(0,d.Q-e+e*f*((h(m,d.prev_w)+h(m,i))/l));let g=[];for(let t=0;t<m.length;++t)g[t]=Math.abs(m[t]-h(d.w,m));const v=g.indexOf(Math.min(...g));c=o.getRepresentationByAbsoluteIndex(v,a,!0),c.absoluteIndex>r.currentRepresentation.absoluteIndex&&m[r.currentRepresentation.absoluteIndex+1]<=l&&(c=o.getRepresentationByAbsoluteIndex(r.currentRepresentation.absoluteIndex+1,a,!0)),c.bitrateInKbit>=l&&(d.Q=2*Math.max(Bo,d.Q)),r.lastSegmentUrl=u.url}e.representation=c,r.currentRepresentation=e.representation}(t,r,u);break;default:!function(t,e,n){const r=t.getAbrController(),i=t.getMediaInfo(),o=t.getMediaType(),a=t.getThroughputController().getSafeAverageThroughput(o);e.representation=r.getOptimalRepresentationForBitrate(i,a,!0),e.reason.throughput=a,n.state=Do,l(n)}(t,r,u)}return r}catch(t){return s.error(t),vo(e).create()}},reset:function(){p(),r.off(I.default.PLAYBACK_SEEKING,u,i),r.off(I.default.MEDIA_FRAGMENT_LOADED,c,i),r.off(I.default.METRIC_ADDED,d,i)}},s=(0,P.default)(e).getInstance().getLogger(i),p(),r.on(I.default.PLAYBACK_SEEKING,u,i),r.on(I.default.MEDIA_FRAGMENT_LOADED,c,i),r.on(I.default.METRIC_ADDED,d,i),i}jo.__dashjs_factory_name="L2ARule";var zo=k.default.getClassFactory(jo);function Fo(){const t=this.context;let e,n,r,i,o,a,s,l,u;function c(){r=null,i=1,o=100,a=0,s=null,l=null,u="dynamic_weight_selection"}function d(){let t=0;if(r)for(let e=0;e<r.length;e++){let n=r[e];n.state.throughput>t&&(t=n.state.throughput)}return t}function f(t,e,n){let r=t.map(((t,r)=>n[r]*Math.pow(t-e[r],2))).reduce(((t,e)=>t+e));return(r<0?-1:1)*Math.sqrt(Math.abs(r))}function h(t,e){return f([t.state.throughput,t.state.latency,t.state.rebuffer,t.state.switch],[e.state.throughput,e.state.latency,e.state.rebuffer,e.state.switch],[1,1,1,1])}function p(t,e){for(let n=0;n<r.length;n++){let i=r[n],o=.1;const a=h(i,t);m(i,e,Math.exp(-1*Math.pow(a,2)/(2*Math.pow(o,2))))}}function m(t,e,n){let r=t.state,i=[.01,.01,.01,.01];r.throughput=r.throughput+(e[0]-r.throughput)*i[0]*n,r.latency=r.latency+(e[1]-r.latency)*i[1]*n,r.rebuffer=r.rebuffer+(e[2]-r.rebuffer)*i[2]*n,r.switch=r.switch+(e[3]-r.switch)*i[3]*n}return e={getNextQuality:function(t,e,c,h,m,g,v,y){let b=h,_=c;!function(t,e){if(!r){r=[];const n=e.getPossibleVoRepresentationsFilteredBySettings(t,!0),o=n.map((t=>t.bandwidth));a=Math.min(...o),i=function(t){const e=t.map((t=>Math.pow(t,2))).reduce(((t,e)=>t+e));return Math.sqrt(e)}(o),n.forEach((t=>{let e={representation:t,state:{throughput:t.bandwidth/i,latency:0,rebuffer:0,switch:0}};r.push(e)})),l=function(t){let e=[],n=function(t){let e=[];for(let n=0;n<t;n++){let t=[Math.random()*d(),Math.random(),Math.random(),Math.random()];e.push(t)}return e}(Math.pow(t.length,2));e.push(n[0]);let r=[1,1,1,1];for(let i=1;i<t.length;i++){let t=null,i=null;for(let o=0;o<n.length;o++){let a=n[o],s=null;for(let t=0;t<e.length;t++){let n=f(a,e[t],r);(null===s||n<s)&&(s=n)}(null===i||s>i)&&(t=a,i=s)}e.push(t)}let i=null,o=null;for(let t=0;t<e.length;t++){let n=0;for(let i=0;i<e.length;i++)t!==i&&(n+=f(e[t],e[i],r));(null===i||n>i)&&(i=n,o=t)}let a=[];for(a.push(e[o]),e.splice(o,1);e.length>0;){let t=null,n=null;for(let i=0;i<e.length;i++){let o=f(a[0],e[i],r);(null===t||o<t)&&(t=o,n=i)}a.push(e[n]),e.splice(n,1)}return a}(r)}}(e,t);let w=c/i;w>1&&(w=d()),h/=o;let A=r.find((t=>t.representation.id===v.id)),E=A.representation.bandwidth*y.getSegmentDuration()/_,x=Math.max(0,E-m);if(m-E<y.getMinBuffer())return n.debug(`Buffer is low for bitrate= ${A.representation.bandwidth} downloadTime=${E} currentBuffer=${m} rebuffer=${x}`),function(t,e){let n=0,i=t;if(r)for(let o=0;o<r.length;o++){let a=r[o];a.representation.bandwidth<t.representation.bandwidth&&a.representation.bandwidth>n&&e>a.representation.bandwidth&&(n=a.representation.bandwidth,i=a)}return i}(A,_).representation;switch(u){case"manual_weight_selection":s=[.4,.4,.4,.4];break;case"random_weight_selection":s=function(t){let e=[],n=Math.sqrt(2/t);for(let t=0;t<4;t++)e.push(Math.random()*n);return s=e,s}(r.length);break;default:!function(t,e,n,i,o,a){s||(s=l[l.length-1]);let u=t.findWeightVector(r,e,n,i,o,a);null!==u&&-1!==u&&(s=u)}(y,b,m,x,_,g)}let S=null,T=null,C=null;for(let t=0;t<r.length;t++){let e=r[t],i=e.state,o=[i.throughput,i.latency,i.rebuffer,i.switch],l=s.slice(),u=y.getNextBufferWithBitrate(e.representation.bandwidth,m,_),d=u<y.getMinBuffer();d&&n.debug(`Buffer is low for bitrate=${e.representation.bandwidth} downloadTime=${E} currentBuffer=${m} nextBuffer=${u}`),(e.representation.bandwidth>c-1e4||d)&&e.representation.bandwidth!==a&&(l[0]=100);let h=f(o,[w,0,0,0],l);(null===S||h<S)&&(S=h,T=e.representation,C=e)}let I=Math.abs(A.representation.bandwidth-C.representation.bandwidth)/i;return p(A,[w,h,x,I]),p(C,[w,0,0,I]),T},reset:function(){c()}},n=(0,P.default)(t).getInstance().getLogger(e),c(),e}Fo.__dashjs_factory_name="LearningAbrController";var Uo=k.default.getClassFactory(Fo),qo=class{constructor(){this.type=null,this.lastBitrate=null,this.weights={},this.weights.bitrateReward=null,this.weights.bitrateSwitchPenalty=null,this.weights.rebufferPenalty=null,this.weights.latencyPenalty=null,this.weights.playbackSpeedPenalty=null,this.bitrateWSum=0,this.bitrateSwitchWSum=0,this.rebufferWSum=0,this.latencyWSum=0,this.playbackSpeedWSum=0,this.totalQoe=0}};function Go(){let t,e,n,r,i;function o(){e=null,n=null,r=null,i=null}function a(t,e,n,r){let i=new qo;return i.type=t,i.weights.bitrateReward=e||1,i.weights.bitrateSwitchPenalty=1,i.weights.rebufferPenalty=n||1e3,i.weights.latencyPenalty=[],i.weights.latencyPenalty.push({threshold:1.1,penalty:.05*r}),i.weights.latencyPenalty.push({threshold:1e8,penalty:.1*n}),i.weights.playbackSpeedPenalty=r||200,i}function s(t,e,n,r,i){i.bitrateWSum+=i.weights.bitrateReward*t,i.lastBitrate&&(i.bitrateSwitchWSum+=i.weights.bitrateSwitchPenalty*Math.abs(t-i.lastBitrate)),i.lastBitrate=t,i.rebufferWSum+=i.weights.rebufferPenalty*e;for(let t=0;t<i.weights.latencyPenalty.length;t++){let e=i.weights.latencyPenalty[t];if(n<=e.threshold){i.latencyWSum+=e.penalty*n;break}}i.playbackSpeedWSum+=i.weights.playbackSpeedPenalty*Math.abs(1-r),i.totalQoe=i.bitrateWSum-i.bitrateSwitchWSum-i.rebufferWSum-i.latencyWSum-i.playbackSpeedWSum}return t={setupPerSegmentQoe:function(t,o,s){e=a("segment",t,o,s),n=t,r=o,i=s},logSegmentMetrics:function(t,n,r,i){e&&s(t,n,r,i,e)},getPerSegmentQoe:function(){return e},calculateSingleUseQoe:function(t,e,o,l){let u=null;return n&&r&&i&&(u=a("segment",n,r,i)),u?(s(t,e,o,l,u),u.totalQoe):0},reset:function(){o()}},o(),t}Go.__dashjs_factory_name="LoLpQoeEvaluator";var Ho=k.default.getClassFactory(Go);function Vo(t){let e,n,r,i,o,a=t.targetLatency,s=t.bufferMin,l=t.segmentDuration,u=t.qoeEvaluator;function c(){return l}function d(t,e){const n=c();let r;return r=e>n?t-n:t+n-e,r}return e={getMinBuffer:function(){return s},getSegmentDuration:c,getNextBufferWithBitrate:function(t,e,n){return d(e,t*l/n)},getNextBuffer:d,findWeightVector:function(t,e,n,r,c,f){let h=null,p=null,m=null,g=Math.abs(e-o);return t.forEach((t=>{i.forEach((r=>{r[0];let i,o=r[1],v=r[2],y=(r[3],t.representation.bandwidth*l/c),b=d(n,y);i=0===v?10:1/v;let _=i*Math.max(1e-5,y-b);i=0===o?10:1/o;let w=i*t.state.latency,A=u.calculateSingleUseQoe(t.representation.bandwidth,_,w,f);(null===h||A>h)&&function(t,e,n){return!(t>a+n)&&e>=s}(e,b,g)&&(h=A,p=r,m=t.representation.bandwidth)}))})),null===p&&null===m&&(p=-1),o=e,p}},n=[.2,.4,.6,.8,1],r=4,i=function(t){let e=t.map((function(t){return[t]})),n=function(e,r,i){if(i===r)return e;let o=e.length;for(let n=0;n<o;n++){let n=e.shift();for(let r=0;r<t.length;r++)e.push(n.concat(t[r]))}return n(e,r,i+1)};return n(e,4,1)}(n),o=0,e}Vo.__dashjs_factory_name="LoLpWeightSelector";var Qo=k.default.getClassFactory(Vo);function Wo(t){let e,n,r,i,o=(t=t||{}).dashMetrics,a=this.context;return n={getSwitchRequest:function(t){try{let n=vo(a).create();n.rule=this.getClassName();let s=t.getMediaInfo().type,l=t.getAbrController();const u=t.getStreamInfo();let c=t.getRepresentation();const d=t.getMediaInfo(),f=o.getCurrentBufferState(s),h=t.getScheduleController(),p=o.getCurrentBufferLevel(s,!0),m=h.getPlaybackController();let g=m.getCurrentLiveLatency();if(s===x.default.AUDIO)return n;g||(g=0);const v=m.getPlaybackRate(),y=t.getThroughputController().getSafeAverageThroughput(s);if(e.debug(`Throughput ${Math.round(y)} kbps`),isNaN(y)||!f)return n;if(l.getAbandonmentStateFor(u.id,s)===T.ABANDON_LOAD)return n;let b=l.getPossibleVoRepresentationsFilteredBySettings(d,!0).map((t=>t.bandwidth)),_=t.getRepresentation().fragmentDuration,w=Math.min(...b)/1e3,A=Math.max(...b)/1e3,E=c.bandwidth/1e3,S=o.getCurrentHttpRequest(s,!0),C=(S.tresponse.getTime()-S.trequest.getTime())/1e3,I=C>_?C-_:0;i.setupPerSegmentQoe(_,A,w),i.logSegmentMetrics(E,I,g,v);let k=Qo(a).create({targetLatency:1.5,bufferMin:.3,segmentDuration:_,qoeEvaluator:i});return n.representation=r.getNextQuality(l,d,1e3*y,g,p,v,c,k),n.reason={throughput:y,latency:g},n.priority=vo.PRIORITY.STRONG,h.setTimeToLoadDelay(0),n}catch(t){throw t}},reset:function(){r.reset(),i.reset()}},e=(0,P.default)(a).getInstance().getLogger(n),r=Uo(a).create(),i=Ho(a).create(),n}Wo.__dashjs_factory_name="LoLPRule";var Yo=k.default.getClassFactory(Wo);function Ko(t){t=t||{};const e=this.context,n=t.mediaPlayerModel,r=t.customParametersModel,i=t.dashMetrics,o=t.settings,a=(0,C.default)(e).getInstance();let s,l,u,c;function d(){Object.values(x.default.QUALITY_SWITCH_RULES).forEach((t=>{l=f(t,l)}));let t=Object.values(x.default.ABANDON_FRAGMENT_RULES);t.forEach((t=>{u=f(t,u)})),r.getAbrCustomRules().forEach((function(n){n.type===x.default.RULES_TYPES.QUALITY_SWITCH_RULES&&l.push(n.rule(e).create()),n.type===x.default.RULES_TYPES.ABANDON_FRAGMENT_RULES&&t.push(n.rule(e).create())})),0===l.length&&(l.push(Mo(e).create({dashMetrics:i,mediaPlayerModel:n,settings:o})),l.push(bo(e).create({dashMetrics:i})))}function f(t,r){const a=t.charAt(0).toLowerCase()+t.slice(1);return o.get().streaming.abr.rules[a].active&&!function(t,e){return t.filter((t=>t.getClassName()===e)).length>0}(r,t)?(r.push(function(t){switch(t){case x.default.QUALITY_SWITCH_RULES.BOLA_RULE:return Mo(e).create({dashMetrics:i,mediaPlayerModel:n,settings:o});case x.default.QUALITY_SWITCH_RULES.THROUGHPUT_RULE:return bo(e).create({dashMetrics:i});case x.default.QUALITY_SWITCH_RULES.INSUFFICIENT_BUFFER_RULE:return wo(e).create({dashMetrics:i,settings:o});case x.default.QUALITY_SWITCH_RULES.SWITCH_HISTORY_RULE:return Co(e).create();case x.default.QUALITY_SWITCH_RULES.DROPPED_FRAMES_RULE:return So(e).create();case x.default.QUALITY_SWITCH_RULES.LEARN_TO_ADAPT_RULE:return zo(e).create({dashMetrics:i,settings:o});case x.default.QUALITY_SWITCH_RULES.LOL_PLUS_RULE:return Yo(e).create({dashMetrics:i});case x.default.ABANDON_FRAGMENT_RULES.ABANDON_REQUEST_RULE:return Eo(e).create({dashMetrics:i,mediaPlayerModel:n,settings:o})}}(t)),r):o.get().streaming.abr.rules[a].active?r:function(t,e){return t.filter((t=>t.getClassName()!==e))}(r,t)}function h(t){return t.filter((t=>t.representation!==vo.NO_CHANGE))}function p(t){const e={};let n,r,i,o=null;if(0!==t.length){for(e[vo.PRIORITY.STRONG]=null,e[vo.PRIORITY.WEAK]=null,e[vo.PRIORITY.DEFAULT]=null,n=0,r=t.length;n<r;n+=1)i=t[n],i.representation!==vo.NO_CHANGE&&(null===e[i.priority]||e[i.priority].representation!==vo.NO_CHANGE&&i.representation.bitrateInKbit<e[i.priority].representation.bitrateInKbit)&&(e[i.priority]=i);return e[vo.PRIORITY.WEAK]&&e[vo.PRIORITY.WEAK].representation!==vo.NO_CHANGE&&(o=e[vo.PRIORITY.WEAK]),e[vo.PRIORITY.DEFAULT]&&e[vo.PRIORITY.DEFAULT].representation!==vo.NO_CHANGE&&(o=e[vo.PRIORITY.DEFAULT]),e[vo.PRIORITY.STRONG]&&e[vo.PRIORITY.STRONG].representation!==vo.NO_CHANGE&&(o=e[vo.PRIORITY.STRONG]),o}}function m(){d()}return s={clearDataForStream:function(t){[l,u].forEach((e=>{e&&e.length&&e.forEach((e=>e.clearDataForStream&&"function"==typeof e.clearDataForStream&&e.clearDataForStream(t)))}))},getAbandonFragmentRules:function(){return u},getBestPossibleSwitchRequest:function(t){return t&&p(h(l.filter((e=>{const n=e.getClassName();if(n!==x.default.QUALITY_SWITCH_RULES.BOLA_RULE&&n!==x.default.QUALITY_SWITCH_RULES.THROUGHPUT_RULE)return!0;const r=t.getMediaType();return c[r]&&n===x.default.QUALITY_SWITCH_RULES.BOLA_RULE||!c[r]&&n===x.default.QUALITY_SWITCH_RULES.THROUGHPUT_RULE})).map((e=>e.getSwitchRequest(t)))))||vo(e).create()},getBolaState:function(t){return c[t]},getMinSwitchRequest:p,getQualitySwitchRules:function(){return l},handleNewMediaInfo:function(t){l.forEach((e=>e.handleNewMediaInfo&&e.handleNewMediaInfo(t))),u.forEach((e=>e.handleNewMediaInfo&&e.handleNewMediaInfo(t)))},initialize:function(){l=[],u=[],c={},d(),a.on(I.default.SETTING_UPDATED_ABR_ACTIVE_RULES,m,s)},reset:function(){[l,u].forEach((t=>{t&&t.length&&t.forEach((t=>t.reset&&t.reset()))})),l=[],u=[],c={},a.off(I.default.SETTING_UPDATED_ABR_ACTIVE_RULES,m,s)},setBolaState:function(t,e){c[t]=e},shouldAbandonFragment:function(t){if(!t)return vo(e).create();const n=p(h(u.map((e=>e.shouldAbandon(t)))));return n&&(n.reason.forceAbandon=!0),n||vo(e).create()}},s}Ko.__dashjs_factory_name="ABRRulesCollection";const Xo=k.default.getClassFactory(Ko);k.default.updateSingletonFactory(Ko.__dashjs_factory_name,Xo);var $o=Xo;function Zo(t){let e;const n=(t=t||{}).abrController,r=t.throughputController,i=t.switchRequestHistory,o=t.droppedFramesHistory,a=t.currentRequest,s=t.streamProcessor?t.streamProcessor.getScheduleController():null,l=t.streamProcessor?t.streamProcessor.getRepresentation():null,u=t.videoModel?t.videoModel:null;function c(){return l?l.mediaInfo:null}return e={getAbrController:function(){return n},getCurrentRequest:function(){return a},getDroppedFramesHistory:function(){return o},getMediaInfo:c,getMediaType:function(){const t=c();return t?t.type:null},getRepresentation:function(){return l},getScheduleController:function(){return s},getStreamInfo:function(){const t=c();return t?t.streamInfo:null},getSwitchRequestHistory:function(){return i},getThroughputController:function(){return r},getVideoModel:function(){return u}},e}Zo.__dashjs_factory_name="RulesContext";var Jo=k.default.getClassFactory(Zo);function ta(){let t={},e={};const n=this.context,r=(0,W.default)(n).getInstance();return{clearForStream:function(n){delete t[n],delete e[n]},getSwitchRequests:function(e,n){return null!=e&&null!=n&&t[e]&&t[e][n]?t[e][n]:{}},push:function(n){const i=n.currentRepresentation,o=n.newRepresentation;if(i.mediaInfo.streamInfo.id!==o.mediaInfo.streamInfo.id||o.mediaInfo.id!==i.mediaInfo.id)return;const a=i.mediaInfo.streamInfo.id;t[a]||function(n){t[n]={},e[n]={}}(a);const s=i.mediaInfo.type;t[a][s]||function(n,r){t[n][r]={},e[n][r]=[]}(a,s);const l=n.currentRepresentation.id;t[a][s][l]||function(e,n,r){t[e][n][r]={noDrops:0,drops:0,dropSize:0}}(a,s,l);let u=n.newRepresentation.absoluteIndex-n.currentRepresentation.absoluteIndex,c=u<0?1:0,d=c?-u:0,f=c?0:1;t[a][s][n.currentRepresentation.id].drops+=c,t[a][s][n.currentRepresentation.id].dropSize+=d,t[a][s][n.currentRepresentation.id].noDrops+=f,e[a][s].push({id:n.currentRepresentation.id,noDrop:f,drop:c,dropSize:d});const h=function(t,n){return e[t][n].length>r.get().streaming.abr.rules.switchHistoryRule.parameters.sampleSize?e[t][n].shift():null}(a,s);h&&function(e,n,r){t[e][n][r.id].drops-=r.drop,t[e][n][r.id].dropSize-=r.dropSize,t[e][n][r.id].noDrops-=r.noDrop}(a,s,h)},reset:function(){t={},e={}}}}ta.__dashjs_factory_name="SwitchRequestHistory";var ea=k.default.getClassFactory(ta);function na(){let t={},e={},n={};return{clearForStream:function(r){delete t[r],delete e[r],delete n[r]},getFrameHistory:function(e){return t[e]},push:function(r,i,o){if(!i)return;t[r]||function(r){t[r]=[],e[r]=0,n[r]=0}(r);let a=o&&o.droppedVideoFrames?o.droppedVideoFrames:0,s=o&&o.totalVideoFrames?o.totalVideoFrames:0,l=a-e[r];e[r]=a;let u=s-n[r];n[r]=s;const c=t[r];c[i]?(c[i].droppedVideoFrames+=l,c[i].totalVideoFrames+=u):c[i]={droppedVideoFrames:l,totalVideoFrames:u}},reset:function(){t={},e={},n={}}}}na.__dashjs_factory_name="DroppedFramesHistory";var ra=k.default.getClassFactory(na);function ia(){const t=this.context,e=(0,P.default)(t).getInstance(),n=(0,C.default)(t).getInstance();let r,i,o,a,s,l,u,c,d,f,h,p,m,g,v,y,b,_,w,A,E;function S(){u={},l={},void 0===d&&(d=!1),_&&_.reset(),b&&b.reset(),y=void 0,_=void 0,b=void 0,clearTimeout(c),c=null}function k(t){let e=O(t,!(arguments.length>1&&void 0!==arguments[1])||arguments[1]);return e=function(t){try{return function(t){try{if(!E.get().streaming.cmsd.enabled||!E.get().streaming.cmsd.abr.applyMb)return t;const e=t.filter((t=>{const e=t.mediaInfo.type;let n=g.getMaxBitrate(e);if(e!==x.default.VIDEO||n<0)return!0;const r=t.mediaInfo.streamInfo.id;return n-=l[r][x.default.AUDIO].getRepresentation().bitrateInKbit||0,t.bitrateInKbit<=n}));return e.length>0?e:t}catch(e){return i.error(e),t}}(t=function(t){try{if(!E.get().streaming.abr.limitBitrateByPortal)return t;const{elementWidth:e}=h.getVideoElementSize(),n=t.filter((t=>t.mediaInfo.type!==x.default.VIDEO||t.width<=e));return n.length>0?n:t}catch(e){return i.error(e),t}}(t=function(t){try{const e=t.filter((t=>{const e=t.mediaInfo.type,n=t.bitrateInKbit,r=p.getAbrBitrateParameter("maxBitrate",e),i=p.getAbrBitrateParameter("minBitrate",e);return!(r>-1&&n>r||i>-1&&n<i)}));return e.length>0?e:t}catch(e){return i.error(e),t}}(t)))}catch(e){return i.error(e),t}}(e),e}function O(t,e){let n=[];if(!t)return n;const r=function(t){try{const e=[];if(t&&e.push(t),!E.get().streaming.abr.enableSupplementalPropertyAdaptationSetSwitching||!t.adaptationSetSwitchingCompatibleIds||0===t.adaptationSetSwitchingCompatibleIds.length)return e;const n=l[t.streamInfo.id][t.type].getAllMediaInfos().filter((e=>t.adaptationSetSwitchingCompatibleIds.includes(e.id)));return e.concat(n)}catch(e){return[t]}}(t);return r.forEach((t=>{let e=f.getVoRepresentations(t);e&&e.length>0&&(n=n.concat(e))})),n=function(t){return function(t){let e=null;return t.filter((t=>(e||(e=t.mediaInfo),!isNaN(t.qualityRanking)&&f.areMediaInfosEqual(e,t.mediaInfo)))).length===t.length}(t)?function(t){return t.sort(((t,e)=>e.qualityRanking-t.qualityRanking)),t}(t):function(t){return t.sort(((t,e)=>f.areMediaInfosEqual(t.mediaInfo,e.mediaInfo)?isNaN(t.pixelsPerSecond)||isNaN(e.pixelsPerSecond)||t.pixelsPerSecond===e.pixelsPerSecond?t.bandwidth-e.bandwidth:t.pixelsPerSecond-e.pixelsPerSecond:isNaN(t.pixelsPerSecond)||isNaN(e.pixelsPerSecond)||t.pixelsPerSecond===e.pixelsPerSecond?isNaN(t.bitsPerPixel)||isNaN(e.bitsPerPixel)?t.bandwidth-e.bandwidth:e.bitsPerPixel-t.bitsPerPixel:t.pixelsPerSecond-e.pixelsPerSecond)),t}(t)}(n),n.forEach(((t,e)=>{t.absoluteIndex=e})),n=n.filter((n=>{const r=!!e||f.areMediaInfosEqual(n.mediaInfo,t),i=!n||!n.mediaInfo||s.areKeyIdsUsable(n.mediaInfo);return r&&i})),n}function M(e){const n=e.request.mediaType,i=e.streamId;if(!(n&&i&&l[i]&&E.get().streaming.abr.autoSwitchBitrate[n]))return;const s=l[i][n];if(!s)return;const d=Jo(t).create({abrController:r,streamProcessor:s,currentRequest:e.request,throughputController:w,adapter:f,videoModel:h}),p=o.shouldAbandonFragment(d);p&&p.representation!==vo.NO_CHANGE&&function(t,e,n,r,i){if(r.getFragmentModel().getRequests({state:q.FRAGMENT_MODEL_LOADING,index:t.request.index})[0]){const t=function(t,e){return u[t]&&u[t][e]?u[t][e]:null}(e,n);t&&(t.state=T.ABANDON_LOAD),b.reset(),N(n,a.getActiveStreamInfo(),i.representation,i.reason),clearTimeout(c),c=setTimeout((()=>{t&&(u[e][n].state=T.ALLOW_LOAD),c=null}),E.get().streaming.abandonLoadTimeout)}}(e,i,n,s,p)}function L(t){t.mediaType===x.default.VIDEO&&(void 0!==y&&_.push(t.streamId,y,h.getPlaybackQuality()),y=t.newRepresentation.id)}function D(t){!j()||t.metric!==T.BUFFER_LEVEL||t.mediaType!==x.default.AUDIO&&t.mediaType!==x.default.VIDEO||function(t,e){try{const n=p.getBufferTimeDefault(),r=n,a=.5*n,s=o.getBolaState(t),l=e>=(s?a:r);o.setBolaState(t,l),l!==s&&(l?i.info("["+t+"] switching from throughput to buffer occupancy ABR rule (buffer: "+e.toFixed(3)+")."):i.info("["+t+"] switching from buffer occupancy to throughput ABR rule (buffer: "+e.toFixed(3)+")."))}catch(t){i.error(t)}}(t.mediaType,.001*t.value.level)}function N(t,e,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};if(!(e&&e.id&&t&&l&&l[e.id]&&l[e.id][t]&&n))return;const i=l[e.id][t].getRepresentation();i&&n.id===i.id||B(i,n,r)}function B(t,e,r){const o=e.mediaInfo.streamInfo.id,a=e.mediaInfo.type;if(a&&l[o]&&l[o][a]){const s=l[o][a].getStreamInfo(),u=A.getCurrentBufferLevel(a),c=null!==t&&!f.areMediaInfosEqual(t.mediaInfo,e.mediaInfo),d=t?t.bitrateInKbit:0;i.info(`[AbrController]: Switching quality in period ${o} for media type ${a}. Switch from bitrate ${d} to bitrate ${e.bitrateInKbit}. Current buffer level: ${u}. Reason:`+(r?JSON.stringify(r):"/")),n.trigger(I.default.QUALITY_CHANGE_REQUESTED,{oldRepresentation:t,newRepresentation:e,reason:r,streamInfo:s,mediaType:a,isAdaptationSetSwitch:c},{streamId:s.id,mediaType:a});const h=w.getAverageThroughput(a);isNaN(h)||v.setSavedBitrateSettings(a,h)}}function j(){return E.get().streaming.abr.rules.bolaRule.active&&E.get().streaming.abr.rules.throughputRule.active}return r={checkPlaybackQuality:function(e,n){try{if(!(e&&l&&l[n]&&l[n][e]))return!1;if(_){const t=h.getPlaybackQuality();t&&_.push(n,y,t)}if(!E.get().streaming.abr.autoSwitchBitrate[e])return!1;const i=l[n][e],a=i.getRepresentation(),s=Jo(t).create({abrController:r,throughputController:w,switchRequestHistory:b,droppedFramesHistory:_,streamProcessor:i,adapter:f,videoModel:h}),c=o.getBestPossibleSwitchRequest(s);if(!c||!c.representation)return!1;let d=c.representation;return b.push({currentRepresentation:a,newRepresentation:d}),d.id!==a.id&&(u[n][e].state===T.ALLOW_LOAD||d.absoluteIndex<a.absoluteIndex)&&(B(a,d,c.reason),!0)}catch(t){return i.error(t),!1}},clearDataForStream:function(t){_&&_.clearForStream(t),l[t]&&delete l[t],b&&b.clearForStream(t),u[t]&&delete u[t],o.clearDataForStream(t)},getAbandonmentStateFor:function(t,e){return u[t]&&u[t][e]?u[t][e].state:null},getInitialBitrateFor:function(t){if(t===x.default.TEXT)return NaN;let e=p.getAbrBitrateParameter("initialBitrate",t);if(e>0)return e;let n=NaN;if(v&&v.hasOwnProperty("getSavedBitrateSettings")&&(n=v.getSavedBitrateSettings(t)),!isNaN(n))return n;const r=w.getAverageThroughput(t);return!isNaN(r)&&r>0?r:t===x.default.VIDEO?1e3:100},getOptimalRepresentationForBitrate:function(t,e){const n=k(t,!(arguments.length>2&&void 0!==arguments[2])||arguments[2]);if(!n||0===n.length)return null;const r=n.reduce(((t,e)=>t.bandwidth<e.bandwidth?t:e));if(e<=0)return r;const i=n.filter((t=>t.bitrateInKbit<=e));return i&&0!==i.length?i.reduce(((t,e)=>e.absoluteIndex>t.absoluteIndex?e:t)):r},getPossibleVoRepresentations:function(t){return O(t,!(arguments.length>1&&void 0!==arguments[1])||arguments[1])},getPossibleVoRepresentationsFilteredBySettings:k,getRepresentationByAbsoluteIndex:function(t,e){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return isNaN(t)||t<0?null:k(e,n).find((e=>e.absoluteIndex===t))},handleNewMediaInfo:function(t){o.handleNewMediaInfo(t)},initialize:function(){_=ra(t).create(),b=ea(t).create(),o=$o(t).create({dashMetrics:A,customParametersModel:m,mediaPlayerModel:p,settings:E}),o.initialize(),n.on(R.default.QUALITY_CHANGE_RENDERED,L,r),n.on(R.default.METRIC_ADDED,D,r),n.on(I.default.LOADING_PROGRESS,M,r)},isPlayingAtLowestQuality:function(t){return k(t.mediaInfo,!0)[0].id===t.id},isPlayingAtTopQuality:function(t){if(!t)return!0;const e=k(t.mediaInfo,!0);return e[e.length-1].id===t.id},registerStreamType:function(t,e){const n=e.getStreamInfo().id;l[n]||(l[n]={}),l[n][t]=e,u[n]||(u[n]={}),u[n][t]={},u[n][t].state=T.ALLOW_LOAD,void 0===o.getBolaState(t)&&o.setBolaState(t,E.get().streaming.abr.rules.bolaRule.active&&!j())},reset:function(){S(),n.off(R.default.QUALITY_CHANGE_RENDERED,L,r),n.off(R.default.METRIC_ADDED,D,r),n.off(I.default.LOADING_PROGRESS,M,r),o&&o.reset()},setConfig:function(t){t&&(t.streamController&&(a=t.streamController),t.throughputController&&(w=t.throughputController),t.domStorage&&(v=t.domStorage),t.mediaPlayerModel&&(p=t.mediaPlayerModel),t.customParametersModel&&(m=t.customParametersModel),t.cmsdModel&&(g=t.cmsdModel),t.dashMetrics&&(A=t.dashMetrics),t.adapter&&(f=t.adapter),t.videoModel&&(h=t.videoModel),t.settings&&(E=t.settings),t.capabilities&&(s=t.capabilities))},setPlaybackQuality:N,setWindowResizeEventCalled:function(t){d=t},unRegisterStreamType:function(t,e){try{l[t]&&l[t][e]&&delete l[t][e],u[t]&&u[t][e]&&delete u[t][e]}catch(t){}}},i=e.getLogger(r),S(),r}ia.__dashjs_factory_name="AbrController";const oa=k.default.getSingletonFactory(ia);k.default.updateSingletonFactory(ia.__dashjs_factory_name,oa);var aa=oa;const sa=new Map([[x.default.VIDEO_ELEMENT_READY_STATES.HAVE_METADATA,"loadedmetadata"],[x.default.VIDEO_ELEMENT_READY_STATES.HAVE_CURRENT_DATA,"loadeddata"],[x.default.VIDEO_ELEMENT_READY_STATES.HAVE_FUTURE_DATA,"canplay"],[x.default.VIDEO_ELEMENT_READY_STATES.HAVE_ENOUGH_DATA,"canplaythrough"]]);function la(){let t,e,n,r,i,o,a,s,l,u,c;const d=this.context,f=(0,C.default)(d).getInstance(),h=[];function p(t){r&&(arguments.length>1&&void 0!==arguments[1]&&arguments[1]?r.playbackRate=t:S(x.default.VIDEO_ELEMENT_READY_STATES.HAVE_FUTURE_DATA,(()=>{r.playbackRate=t})))}function m(){return h.length>0}function g(){if(r&&m()&&0===r.playbackRate){const t=document.createEvent("Event");t.initEvent("waiting",!0,!1),r.dispatchEvent(t)}}function v(t,e){r&&r.addEventListener(t,e)}function y(t,e){r&&r.removeEventListener(t,e)}function b(){return r?r.readyState:NaN}function _(){return r?r.buffered:null}function w(){return r?r.clientWidth:NaN}function A(){return r?r.clientHeight:NaN}function E(t,e,n,i,o){if(r)for(let a=0;a<r.textTracks.length;a++)if(r.textTracks[a].kind===t&&(!e||r.textTracks[a].label==e)&&r.textTracks[a].language===n&&r.textTracks[a].isTTML===i&&r.textTracks[a].isEmbedded===o)return r.textTracks[a];return null}function S(t,e){return t===x.default.VIDEO_ELEMENT_READY_STATES.HAVE_NOTHING||b()>=t?(e(),null):function(t,e){const n=()=>{y(t,n),e(t)};return v(t,n),{func:n,event:t}}(sa.get(t),e)}return t={addEventListener:v,addTextTrack:function(t,e,n,i,o){if(!r)return null;let a=E(t,e,n,i,o);return a||(a=r.addTextTrack(t,e,n),a.isEmbedded=o,a.isTTML=i),a},appendChild:function(t){r&&(r.appendChild(t),void 0!==t.isTTML&&(r.textTracks[r.textTracks.length-1].isTTML=t.isTTML,r.textTracks[r.textTracks.length-1].isEmbedded=t.isEmbedded))},getBufferRange:_,getClientHeight:A,getClientWidth:w,getElement:function(){return r},getEnded:function(){return r?r.ended:null},getPlaybackQuality:function(){if(!r)return null;let t="webkitDroppedFrameCount"in r&&"webkitDecodedFrameCount"in r,e=null;return"getVideoPlaybackQuality"in r?e=r.getVideoPlaybackQuality():t&&(e={droppedVideoFrames:r.webkitDroppedFrameCount,totalVideoFrames:r.webkitDroppedFrameCount+r.webkitDecodedFrameCount,creationTime:new Date}),e},getPlaybackRate:function(){return r?r.playbackRate:null},getPlayedRanges:function(){return r?r.played:null},getReadyState:b,getSource:function(){return r?r.src:null},getTTMLRenderingDiv:function(){return s},getTextTrack:E,getTextTracks:function(){return r?r.textTracks:[]},getTime:function(){return r?isNaN(i)?r.currentTime:i:null},getVideoElementSize:function(){const t=n.get().streaming.abr.usePixelRatioInLimitBitrateByPortal&&window.hasOwnProperty("devicePixelRatio")?window.devicePixelRatio:1;return{elementWidth:w()*t,elementHeight:A()*t}},getVideoHeight:function(){return r?r.videoHeight:NaN},getVideoRelativeOffsetLeft:function(){if(r){const t=r.parentNode.host||r.parentNode;return t?r.getBoundingClientRect().left-t.getBoundingClientRect().left:NaN}return NaN},getVideoRelativeOffsetTop:function(){if(r){const t=r.parentNode.host||r.parentNode;return t?r.getBoundingClientRect().top-t.getBoundingClientRect().top:NaN}return NaN},getVideoWidth:function(){return r?r.videoWidth:NaN},getVttRenderingDiv:function(){return l},initialize:function(){f.on(I.default.PLAYBACK_PLAYING,g,this)},isPaused:function(){return r?r.paused:null},isSeeking:function(){return r?r.seeking||!isNaN(i):null},isStalled:m,pause:function(){r&&(r.pause(),r.autoplay=!1)},play:function(){if(r){r.autoplay=!0;const t=r.play();t&&t.catch&&"undefined"!=typeof Promise&&t.catch((t=>{"NotAllowedError"===t.name&&f.trigger(I.default.PLAYBACK_NOT_ALLOWED),e.warn(`Caught pending play exception - continuing (${t})`)}))}},removeChild:function(t){r&&r.removeChild(t)},removeEventListener:y,reset:function(){clearTimeout(c),f.off(I.default.PLAYBACK_PLAYING,g,this),h.length=0},setConfig:function(t){t&&t.settings&&(n=t.settings)},setCurrentTime:function(t,e){r&&(o&&o.func&&o.event&&y(o.event,o.func),i=t,o=S(x.default.VIDEO_ELEMENT_READY_STATES.HAVE_METADATA,(()=>{if(r)if(r.currentTime!==i)try{i=e?function(t){const e=_();let n=t,r=9999999999;if(e)for(let i=0;i<e.length;i++){const o=e.start(i),a=e.end(i),s=Math.abs(o-t),l=Math.abs(a-t);if(t>=o&&t<=a)return t;s<r&&(r=s,n=o),l<r&&(r=l,n=a)}return n}(i):i,isNaN(i)||(r.currentTime=i),i=NaN}catch(t){0===r.readyState&&t.code===t.INVALID_STATE_ERR&&(c=setTimeout((function(){r.currentTime=i,i=NaN}),400))}else i=NaN})))},setDisableRemotePlayback:function(t){r&&(r.disableRemotePlayback=t)},setElement:function(t){if(!(null==t||t&&/^(VIDEO|AUDIO)$/i.test(t.nodeName)))throw"element is not video or audio DOM type!";r=t,r&&(r.preload="auto")},setPlaybackRate:p,setSource:function(t){r&&(t?r.src=t:(r.removeAttribute("src"),r.load()))},setStallState:function(t,e){!function(t,e){e?function(t){if(null!==t&&r&&!r.seeking&&-1===h.indexOf(t)&&(h.push(t),n.get().streaming.buffer.syntheticStallEvents.enabled&&r&&1===h.length&&(n.get().streaming.buffer.syntheticStallEvents.ignoreReadyState||b()>=x.default.VIDEO_ELEMENT_READY_STATES.HAVE_FUTURE_DATA))){u=r.playbackRate,p(0,!0);const t=document.createEvent("Event");t.initEvent("waiting",!0,!1),r.dispatchEvent(t)}}(t):function(t){let e=h.indexOf(t);if(null!==t&&(-1!==e&&h.splice(e,1),n.get().streaming.buffer.syntheticStallEvents.enabled&&r&&!m())){const t=()=>{if(p(u||1,n.get().streaming.buffer.syntheticStallEvents.ignoreReadyState),!r.paused){const t=document.createEvent("Event");t.initEvent("playing",!0,!1),r.dispatchEvent(t)}};n.get().streaming.buffer.syntheticStallEvents.ignoreReadyState?t():(a&&a.func&&a.event&&y(a.event,a.func),a=S(x.default.VIDEO_ELEMENT_READY_STATES.HAVE_FUTURE_DATA,t))}}(t)}(t,e)},setTTMLRenderingDiv:function(t){s=t,s.style.position="absolute",s.style.display="flex",s.style.overflow="hidden",s.style.pointerEvents="none",s.style.top=0,s.style.left=0},setVttRenderingDiv:function(t){l=t},waitForReadyState:S},e=(0,P.default)(d).getInstance().getLogger(t),n=(0,W.default)(d).getInstance(),i=NaN,t}la.__dashjs_factory_name="VideoModel";var ua=k.default.getSingletonFactory(la);const ca=[{oldKey:"dashjs_vbitrate",newKey:"dashjs_video_bitrate"},{oldKey:"dashjs_abitrate",newKey:"dashjs_audio_bitrate"},{oldKey:"dashjs_vsettings",newKey:"dashjs_video_settings"},{oldKey:"dashjs_asettings",newKey:"dashjs_audio_settings"}],da="dashjs_?_bitrate",fa="dashjs_?_settings",ha="localStorage",pa="lastBitrate",ma="lastMediaSettings";function ga(t){t=t||{};const e=this.context,n=t.settings;let r,i,o;function a(t){if(void 0!==o)return o;let e;o=!1;try{"undefined"!=typeof window&&(e=window[t])}catch(t){return i.warn("DOMStorage access denied: "+t.message),o}if(!e||t!==ha&&"sessionStorage"!==t)return o;try{e.setItem("1","1"),e.removeItem("1"),o=!0}catch(t){i.warn("DOMStorage is supported, but cannot be used: "+t.message)}return o}function s(){const t=6e5;return Math.round((new Date).getTime()/t)*t}function l(t,e){return a(t)&&n.get().streaming[e+"CachingInfo"].enabled}function u(){if(!n)throw new Error(x.default.MISSING_CONFIG_ERROR)}return r={getSavedBitrateSettings:function(t){if(u(),!n.get().streaming.lastBitrateCachingInfo.enabled)return NaN;let e=NaN;if(l(ha,pa)){const r=da.replace(/\?/,t);try{const o=JSON.parse(localStorage.getItem(r))||{},a=(new Date).getTime()-parseInt(o.timestamp,10)>=n.get().streaming.lastBitrateCachingInfo.ttl||!1,s=parseFloat(o.bitrate);isNaN(s)||a?a&&localStorage.removeItem(r):(e=s,i.debug("Last saved bitrate for "+t+" was "+s))}catch(t){return null}}return e},setSavedBitrateSettings:function(t,e){if(l(ha,pa)&&e){const n=da.replace(/\?/,t);try{localStorage.setItem(n,JSON.stringify({bitrate:e.toFixed(3),timestamp:s()}))}catch(t){i.error(t.message)}}},getSavedMediaSettings:function(t){if(u(),!n.get().streaming.lastMediaSettingsCachingInfo.enabled)return null;let e=null;if(l(ha,ma)){const r=fa.replace(/\?/,t);try{const t=JSON.parse(localStorage.getItem(r))||{},i=(new Date).getTime()-parseInt(t.timestamp,10)>=n.get().streaming.lastMediaSettingsCachingInfo.ttl||!1;e=t.settings,i&&(localStorage.removeItem(r),e=null)}catch(t){return null}}return e},setSavedMediaSettings:function(t,e){if(l(ha,ma)){const n=fa.replace(/\?/,t);try{localStorage.setItem(n,JSON.stringify({settings:e,timestamp:s()}))}catch(t){i.error(t.message)}}}},i=(0,P.default)(e).getInstance().getLogger(r),a(ha)&&ca.forEach((t=>{const e=localStorage.getItem(t.oldKey);if(e){localStorage.removeItem(t.oldKey);try{localStorage.setItem(t.newKey,e)}catch(t){i.error(t.message)}}})),r}ga.__dashjs_factory_name="DOMStorage";var va=k.default.getSingletonFactory(ga),ya=n(8986);function ba(){const t=this.context;let e,n,r,i,o,a,s,l,u,c,d,f;function h(t,e,r,o){let a=null;const l=t?f.resolve(t.path):null,u=o||{init:!0,url:l?l.url:void 0,range:{start:0,end:1500},searching:!1,bytesLoaded:0,bytesToLoad:1500,mediaType:e,representation:t};n.debug("Start searching for initialization.");const c=g(u);s.load({request:c,success:function(n){if(u.bytesLoaded=u.range.end,a=i.findInitRange(n),!a)return u.range.end=u.bytesLoaded+u.bytesToLoad,h(t,e,r,u);t.range=a,r(t)},error:function(){r(t)}}),n.debug("Perform init search: "+u.url)}function p(t,e,r,o,a,l){if(r&&(void 0===r.start||void 0===r.end)){const t=r?r.toString().split("-"):null;r=t?{start:parseFloat(t[0]),end:parseFloat(t[1])}:null}a=a||m;let u=null,c=null;const d=!!r,h=t?f.resolve(t.path):null,v={init:!1,url:h?h.url:void 0,range:d?r:{start:0,end:1500},searching:!d,bytesLoaded:l?l.bytesLoaded:0,bytesToLoad:1500,mediaType:e,representation:t},y=g(v);s.load({request:y,success:function(r){const s=v.bytesToLoad,l=r.byteLength;if(v.bytesLoaded=v.range.end-v.range.start,u=i.parse(r),c=u.getBox("sidx"),c&&c.isComplete){const r=c.references;let i,s;if(null!=r&&r.length>0&&(i=1===r[0].reference_type),i){let i,s,l,u,d;n.debug("Initiate multiple SIDX load."),v.range.end=v.range.start+c.size;let f=[],h=0,m=(c.offset||v.range.start)+c.size;const g=function(e){e?(f=f.concat(e),h++,h>=s&&(f.sort((function(t,e){return t.startTime-e.startTime<0?-1:0})),a(f,t,o))):a(null,t,o)};for(i=0,s=r.length;i<s;i++)l=m,u=m+r[i].referenced_size-1,m+=r[i].referenced_size,d={start:l,end:u},p(t,e,d,o,g,v)}else n.debug("Parsing segments from SIDX. representation "+e+" - id: "+t.id+" for range : "+v.range.start+" - "+v.range.end),s=function(t,e){const n=t.references,r=n.length,i=t.timescale;let o=t.earliest_presentation_time,a=e.range.start+t.offset+t.first_offset+t.size;const s=[];let l,u,c,d;for(let t=0;t<r;t++)c=n[t].subsegment_duration,d=n[t].referenced_size,l=new ut,l.duration=c,l.startTime=o,l.timescale=i,u=a+d-1,l.mediaRange=a+"-"+u,s.push(l),o+=c,a+=d;return s}(c,v),a(s,t,o)}else{if(c)v.range.start=c.offset||v.range.start,v.range.end=v.range.start+(c.size||s);else{if(l<v.bytesLoaded)return void a(null,t,o);{const t=u.getLastBox();t&&t.size?(v.range.start=t.offset+t.size,v.range.end=v.range.start+s):v.range.end+=s}}p(t,e,v.range,o,null,v)}},error:function(){a(null,t,o)}}),n.debug(`Perform SIDX load for type ${e} : ${v.url} with range ${v.range.start} - ${v.range.end}`)}function m(t,e,n){n({segments:t,representation:e,error:t?void 0:new G.default(l.SEGMENT_BASE_LOADER_ERROR_CODE,l.SEGMENT_BASE_LOADER_ERROR_MESSAGE)})}function g(t){if(!t.url)return;const e=new N;return e.setInfo(t),e}return e={setConfig:function(t){t.baseURLController&&(f=t.baseURLController),t.dashMetrics&&(o=t.dashMetrics),t.mediaPlayerModel&&(a=t.mediaPlayerModel),t.errHandler&&(r=t.errHandler),t.boxParser&&(i=t.boxParser),t.debug&&(n=t.debug.getLogger(e)),t.errors&&(l=t.errors),t.urlUtils&&(d=t.urlUtils),t.constants&&(u=t.constants),t.dashConstants&&(c=t.dashConstants)},initialize:function(){s=zn(t).create({errHandler:r,dashMetrics:o,mediaPlayerModel:a,boxParser:i,errors:l,urlUtils:d,constants:u,dashConstants:c})},loadInitialization:function(t,e){return new Promise((n=>{h(t,e,n)}))},loadSegments:function(t,e,n){return new Promise((r=>{p(t,e,n,r)}))},reset:function(){s&&(s.abort(),s=null)}},e}ba.__dashjs_factory_name="SegmentBaseLoader";var _a=k.default.getSingletonFactory(ba);function wa(t){let e;t=t||{};let n=new DataView(t.data),r=0;function i(t,e){let i,o,a=!0,s=0;if(void 0===e&&(e=!1),t.tag>16777215?(n.getUint32(r)!==t.tag&&(a=!1),s=4):t.tag>65535?(i=n.getUint16(r),o=n.getUint8(r+2),256*i+o!==t.tag&&(a=!1),s=3):t.tag>255?(n.getUint16(r)!==t.tag&&(a=!1),s=2):(n.getUint8(r)!==t.tag&&(a=!1),s=1),!a&&t.required&&!e)throw new Error("required tag not found");return a&&(r+=s),a}function o(t){let e=1,i=128,o=-1,a=0,s=n.getUint8(r),l=0;for(l=0;l<8;l+=1){if((s&i)===i){a=void 0===t?s&~i:s,o=l;break}i>>=1}for(l=0;l<o;l+=1,e+=1)a=a<<8|255&n.getUint8(r+e);return r+=e,a}return e={getPos:function(){return r},setPos:function(t){r=t},consumeTag:i,consumeTagAndSize:function(t,e){let n=i(t,e);return n&&o(),n},parseTag:function(t){let n;return i(t),n=o(),e[t.parse](n)},skipOverElement:function(t,e){let n,a=i(t,e);return a&&(n=o(),r+=n),a},getMatroskaCodedNum:o,getMatroskaFloat:function(t){let e;switch(t){case 4:e=n.getFloat32(r),r+=4;break;case 8:e=n.getFloat64(r),r+=8}return e},getMatroskaUint:function(t){if(t>4)return function(t){const e=Math.floor(Number.MAX_SAFE_INTEGER/256);let i=0;for(let o=0;o<t;o+=1){if(i>e)throw new Error("Value exceeds safe integer limit");i*=256;const t=n.getUint8(r+o);if(i>Number.MAX_SAFE_INTEGER-t)throw new Error("Value exceeds safe integer limit");i+=t}return r+=t,i}(t);let e=0;for(let i=0;i<t;i+=1)e<<=8,e|=255&n.getUint8(r+i);return r+=t,e>>>0},moreData:function(){return r<n.byteLength}},e}wa.__dashjs_factory_name="EBMLParser";var Aa=k.default.getClassFactory(wa);function Ea(){const t=this.context;let e,n,r,i,o,a,s,l,u;function c(t){const e=new N;return e.setInfo(t),e}return e={setConfig:function(t){if(!(t.baseURLController&&t.dashMetrics&&t.mediaPlayerModel&&t.errHandler))throw new Error(x.default.MISSING_CONFIG_ERROR);u=t.baseURLController,o=t.dashMetrics,a=t.mediaPlayerModel,i=t.errHandler,l=t.errors,n=t.debug.getLogger(e)},initialize:function(){s=zn(t).create({errHandler:i,dashMetrics:o,mediaPlayerModel:a,errors:l})},loadInitialization:function(t,e){return new Promise((r=>{let i=null,o=t?u.resolve(t.path):null,a=t?t.range.split("-"):null,l={range:{start:a?parseFloat(a[0]):null,end:a?parseFloat(a[1]):null},request:i,url:o?o.url:void 0,init:!0,mediaType:e};n.info("Start loading initialization."),i=c(l),s.load({request:i,success:function(){r(t)},error:function(){r(t)}}),n.debug("Perform init load: "+l.url)}))},loadSegments:function(e,i,o){return new Promise((a=>{let d=null,f=e?u.resolve(e.path):null,h=f?f.url:void 0;d=c({bytesLoaded:0,bytesToLoad:8192,range:{start:0,end:8192},request:d,url:h,init:!1,mediaType:i,representation:e}),n.debug("Parsing ebml header"),s.load({request:d,success:function(i){!function(e,i,o,a){if(!e||0===e.byteLength)return void a(null);let l,u,d,f,h=Aa(t).create({data:e}),p=o?o.split("-"):null,m=null,g={url:i,range:{start:p?parseFloat(p[0]):null,end:p?parseFloat(p[1]):null},request:m};for(n.debug("Parse EBML header: "+g.url),h.skipOverElement(r.EBML),h.consumeTag(r.Segment),d=h.getMatroskaCodedNum(),d+=h.getPos(),f=h.getPos();h.moreData()&&!h.consumeTagAndSize(r.Segment.Info,!0);)if(!(h.skipOverElement(r.Segment.SeekHead,!0)||h.skipOverElement(r.Segment.Tracks,!0)||h.skipOverElement(r.Segment.Cues,!0)||h.skipOverElement(r.Void,!0)))throw new Error("no valid top level element found");for(;void 0===l;){let t=h.getMatroskaCodedNum(!0),e=h.getMatroskaCodedNum();t===r.Segment.Info.Duration.tag?l=h[r.Segment.Info.Duration.parse](e):h.setPos(h.getPos()+e)}m=c(g),s.load({request:m,success:function(e){u=function(e,i,o,a){let s,l,u,c,d,f,h,p;for(l=function(e){let n,i,o=[],a=Aa(t).create({data:e});for(a.consumeTagAndSize(r.Segment.Cues);a.moreData()&&a.consumeTagAndSize(r.Segment.Cues.CuePoint,!0);){for(n={},n.CueTime=a.parseTag(r.Segment.Cues.CuePoint.CueTime),n.CueTracks=[];a.moreData()&&a.consumeTag(r.Segment.Cues.CuePoint.CueTrackPositions,!0);){const t=a.getMatroskaCodedNum(),e=a.getPos();if(i={},i.Track=a.parseTag(r.Segment.Cues.CuePoint.CueTrackPositions.CueTrack),0===i.Track)throw new Error("Cue track cannot be 0");i.ClusterPosition=a.parseTag(r.Segment.Cues.CuePoint.CueTrackPositions.CueClusterPosition),n.CueTracks.push(i),a.setPos(e+t)}if(0===n.CueTracks.length)throw new Error("Mandatory cuetrack not found");o.push(n)}if(0===o.length)throw new Error("mandatory cuepoint not found");return o}(e),u=[],d=0,f=l.length;d<f;d+=1)c=new ut,s=0,s=d<l.length-1?l[d+1].CueTime-l[d].CueTime:a-l[d].CueTime,c.duration=s,c.startTime=l[d].CueTime,c.timescale=1e3,h=l[d].CueTracks[0].ClusterPosition+i,p=d<l.length-1?l[d+1].CueTracks[0].ClusterPosition+i-1:o-1,c.mediaRange=h+"-"+p,u.push(c);return n.debug("Parsed cues: "+u.length+" cues."),u}(e,f,d,l),a(u)},error:function(){n.error("Download Error: Cues "+g.url),a(null)}}),n.debug("Perform cues load: "+g.url+" bytes="+g.range.start+"-"+g.range.end)}(i,h,o,(function(t){a({segments:t,representation:e,error:t?void 0:new G.default(l.SEGMENT_BASE_LOADER_ERROR_CODE,l.SEGMENT_BASE_LOADER_ERROR_MESSAGE)})}))},error:function(){a({representation:e,error:new G.default(l.SEGMENT_BASE_LOADER_ERROR_CODE,l.SEGMENT_BASE_LOADER_ERROR_MESSAGE)})}})}))},reset:function(){s&&(s.abort(),s=null)}},r={EBML:{tag:440786851,required:!0},Segment:{tag:408125543,required:!0,SeekHead:{tag:290298740,required:!0},Info:{tag:357149030,required:!0,TimecodeScale:{tag:2807729,required:!0,parse:"getMatroskaUint"},Duration:{tag:17545,required:!0,parse:"getMatroskaFloat"}},Tracks:{tag:374648427,required:!0},Cues:{tag:475249515,required:!0,CuePoint:{tag:187,required:!0,CueTime:{tag:179,required:!0,parse:"getMatroskaUint"},CueTrackPositions:{tag:183,required:!0,CueTrack:{tag:247,required:!0,parse:"getMatroskaUint"},CueClusterPosition:{tag:241,required:!0,parse:"getMatroskaUint"}}}}},Void:{tag:236,required:!0}},e}Ea.__dashjs_factory_name="WebmSegmentBaseLoader";var xa=k.default.getSingletonFactory(Ea);function Sa(t){t=t||{};const e=this.context,n=t.eventBus,r=t.events,i=t.dashMetrics,o=t.mediaPlayerModel,a=t.errHandler,s=t.baseURLController,l=t.debug,u=t.boxParser,c=t.errors;let d,f,h;function p(t){return"webm"===(t?t.split("/")[1]:"").toLowerCase()}return d={initialize:function(){f.initialize(),h.initialize()},getSegmentBaseInitSegment:function(t){return p(t.representation.mimeType)?h.loadInitialization(t.representation,t.mediaType):f.loadInitialization(t.representation,t.mediaType)},getSegmentList:function(t){return p(t.mimeType)?h.loadSegments(t.representation,t.mediaType,t.representation?t.representation.indexRange:null):f.loadSegments(t.representation,t.mediaType,t.representation?t.representation.indexRange:null)},reset:function(){f.reset(),h.reset()}},f=_a(e).getInstance(),h=xa(e).getInstance(),f.setConfig({baseURLController:s,dashMetrics:i,mediaPlayerModel:o,errHandler:a,eventBus:n,events:r,errors:c,debug:l,boxParser:u}),h.setConfig({baseURLController:s,dashMetrics:i,mediaPlayerModel:o,errHandler:a,eventBus:n,events:r,errors:c,debug:l}),d}Sa.__dashjs_factory_name="SegmentBaseController";var Ta=k.default.getSingletonFactory(Sa),Ca=class{constructor(){this.accessibility=null,this.adaptationSetSwitchingCompatibleIds=[],this.audioChannelConfiguration=null,this.bitrateList=null,this.codec=null,this.contentProtection=null,this.essentialProperties=[],this.id=null,this.index=null,this.isEmbedded=null,this.isFragmented=null,this.isText=!1,this.labels=null,this.lang=null,this.mimeType=null,this.normalizedKeyIds=new Set,this.representationCount=0,this.roles=null,this.segmentAlignment=!1,this.selectionPriority=1,this.streamInfo=null,this.subSegmentAlignment=!1,this.supplementalProperties=[],this.type=null,this.viewpoint=null}},Ia=class{constructor(){this.id=null,this.index=null,this.start=NaN,this.duration=NaN,this.manifestInfo=null,this.isLast=!0,this.isEncrypted=!1}},ka=class{constructor(){this.dvrWindowSize=NaN,this.loadedTime=null,this.availableFrom=null,this.minBufferTime=NaN,this.duration=NaN,this.isDynamic=!1,this.maxFragmentDuration=null,this.serviceDescriptions=[],this.protocol=null}},Pa=class{constructor(t){this.valid="/"==t[0],this.path=t.split("/").filter((t=>0!==t.length)).map((t=>{let e={name:t},n=t.indexOf("[");if(-1!=n){e.name=t.substring(0,n);let r=t.substring(n+1,t.length-1);this.valid=this.valid&&-1==r.indexOf("[");let i=r.indexOf("=");-1!=i?(e.attribute={name:r.substring(1,i),value:r.substring(i+1)},-1!=["'",'"'].indexOf(e.attribute.value[0])&&(e.attribute.value=e.attribute.value.substring(1,e.attribute.value.length-1))):e.position=parseInt(r,10)-1}return e}))}isValid(){return this.valid}findsElement(){return!this.findsAttribute()}findsAttribute(){return this.path[this.path.length-1].name.startsWith("@")}findsTextReplace(){return"text()"===this.path[this.path.length-1].name}getMpdTarget(t,e){let n=null,r=t,i=1,o="MPD";for(;i<this.path.length&&null!==r;){n=r;let t=this.path[i];if(o=t.name,i!==this.path.length-1||!o.startsWith("@")&&"text()"!==o){let e=n[o]||[];if(0===e.length&&n[o]&&e.push(n[o]),t.position)r=e[t.position]||null;else if(t.attribute){let n=t.attribute;r=e.filter((t=>t[n.name]==n.value))[0]||null}else r=Array.isArray(e)?e[0]:e}i++}return null===r?null:o.startsWith("@")?{name:o.substring(1),leaf:r,target:r}:"text()"===o?{name:"__text",leaf:r,target:r}:{name:o,leaf:r,target:e?n:r}}},Ra=class{constructor(t,e,n){this.action=t,this.xpath=e,this.value=n,this.position=null}getMpdTarget(t){let e="remove"===this.action||"replace"===this.action||"before"===this.position||"after"===this.position;return this.xpath.getMpdTarget(t,e)}};function Oa(){let t,e;const n=this.context;return t={getIsPatch:function(t){return t&&t.hasOwnProperty(S.default.ORIGINAL_MPD_ID)||!1},getMpdId:function(t){return t&&t[S.default.ORIGINAL_MPD_ID]||null},getOriginalPublishTime:function(t){return t&&t.hasOwnProperty(S.default.ORIGINAL_PUBLISH_TIME)?new Date(t[S.default.ORIGINAL_PUBLISH_TIME]):null},getPatchOperations:function(t){return t?(t.__children||[]).map((t=>{const n=t.tagName;if("add"!==n&&"remove"!==n&&"replace"!==n)return e.warn(`Ignoring node of invalid action: ${n}`),null;let r=t.sel;if("add"===n&&t.type){if(!t.type.startsWith("@"))return e.warn(`Ignoring add action for prefixed namespace declaration: ${t.type}=${t.__text}`),null;r=`${r}/${t.type}`}let i=new Pa(r);if(!i.isValid())return e.warn(`Ignoring action with invalid selector: ${n} - ${r}`),null;let o=null;i.findsAttribute()||i.findsTextReplace()?o=t.__text||"":"remove"!==n&&(o=t.__children.reduce(((t,e)=>{let n=e.tagName;return"#text"!==n&&(t[n]=t[n]||[],t[n].push(e)),t}),{}));let a=new Ra(n,i,o);return"add"===n&&(a.position=t.pos),a})).filter((t=>!!t)):[]},getPublishTime:function(t){return t&&t.hasOwnProperty(S.default.PUBLISH_TIME)?new Date(t[S.default.PUBLISH_TIME]):null}},e=(0,P.default)(n).getInstance().getLogger(t),t}Oa.__dashjs_factory_name="PatchManifestModel";var Ma=k.default.getSingletonFactory(Oa);function La(t){let e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if("undefined"!=typeof TextDecoder){const n=new TextDecoder("utf-8").decode(t);if(e){const t=n.indexOf("\0");return-1!==t?n.substring(0,t):n}return n.replace(/\0/g,"")}const n=t.length;let r,i,o,a="",s=0;for(;s<n;){if(r=t[s++],0===r&&e)return a;if(0!==r&&3!==r)switch(r>>4){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:a+=String.fromCharCode(r);break;case 12:case 13:i=t[s++],a+=String.fromCharCode((31&r)<<6|63&i);break;case 14:i=t[s++],o=t[s++],a+=String.fromCharCode((15&r)<<12|(63&i)<<6|63&o)}}return a}function Da(t){return function(t,e,n,r){const i=(o=t)instanceof ArrayBuffer?o:o.buffer;var o;let a=1;"BYTES_PER_ELEMENT"in r&&(a=r.BYTES_PER_ELEMENT);const s=(d=t)&&d.buffer instanceof ArrayBuffer&&void 0!==d.byteLength&&void 0!==d.byteOffset?t.byteOffset:0,l=(s+t.byteLength)/a,u=(s+e)/a,c=Math.floor(Math.max(0,Math.min(u,l)));var d;return new r(i,c,Math.floor(Math.min(c+Math.max(n,0),l))-c)}(t,arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,arguments.length>2&&void 0!==arguments[2]?arguments[2]:1/0,Uint8Array)}function Na(t){return"PRIV"===t.type?function(t){if(t.size<2)return;const e=La(t.data,!0),n=new Uint8Array(t.data.subarray(e.length+1));return{key:t.type,info:e,data:n.buffer}}(t):"W"===t.type[0]?function(t){if("WXXX"===t.type){if(t.size<2)return;let e=1;const n=La(t.data.subarray(e),!0);e+=n.length+1;const r=La(t.data.subarray(e));return{key:t.type,info:n,data:r}}const e=La(t.data);return{key:t.type,info:"",data:e}}(t):"APIC"===t.type?function(t){const e={key:t.type,description:"",data:"",mimeType:null,pictureType:null};if(t.size<2)return;if(3!==t.data[0])return void console.log("Ignore frame with unrecognized character encoding");const n=t.data.subarray(1).indexOf(0);if(-1===n)return;const r=La(Da(t.data,1,n)),i=t.data[2+n],o=t.data.subarray(3+n).indexOf(0);if(-1===o)return;const a=La(Da(t.data,3+n,o));let s;return s="--\x3e"===r?La(Da(t.data,4+n+o)):(l=t.data.subarray(4+n+o))instanceof ArrayBuffer?l:0==l.byteOffset&&l.byteLength==l.buffer.byteLength?l.buffer:new Uint8Array(l).buffer,e.mimeType=r,e.pictureType=i,e.description=a,e.data=s,e;var l}(t):function(t){if(t.size<2)return;if("TXXX"===t.type){let e=1;const n=La(t.data.subarray(e),!0);e+=n.length+1;const r=La(t.data.subarray(e));return{key:t.type,info:n,data:r}}const e=La(t.data.subarray(1));return{key:t.type,info:"",data:e}}(t)}function Ba(t,e){let n=0;return n=(127&t[e])<<21,n|=(127&t[e+1])<<14,n|=(127&t[e+2])<<7,n|=127&t[e+3],n}function ja(t){const e=String.fromCharCode(t[0],t[1],t[2],t[3]),n=Ba(t,4);return{type:e,size:n,data:t.subarray(10,10+n)}}function za(t,e){return e+10<=t.length&&51===t[e]&&68===t[e+1]&&73===t[e+2]&&t[e+3]<255&&t[e+4]<255&&t[e+6]<128&&t[e+7]<128&&t[e+8]<128&&t[e+9]<128}function Fa(t,e){return e+10<=t.length&&73===t[e]&&68===t[e+1]&&51===t[e+2]&&t[e+3]<255&&t[e+4]<255&&t[e+6]<128&&t[e+7]<128&&t[e+8]<128&&t[e+9]<128}function Ua(){let t,e,n,r,i,o;const a=this.context;function s(t,n){const i=n?n.index:0,o=e.getAdaptationsForType(r[i].mpd.manifest,i,t);if(!o||0===o.length)return null;if(o.length>1&&n)for(let t=0,n=o.length;t<n;t++)if(a=o[t],e.getRolesForAdaptation(a).filter((function(t){return t.value===S.default.MAIN}))[0])return o[t];var a;return o[0]}function l(t,n,r,o,a,s){let l,u,c,d,f,h,p=[];if(!o||0===o.length)return[];const v=e.getAdaptationsForPeriod(n);for(d=0,h=o.length;d<h;d++)if(l=o[d],c=e.getIndexForAdaptation(l,t,r.index),u=m(v[c]),s){let t=u.accessibility.length;for(f=0;f<t;f++){if(!u)continue;let t=u.accessibility[f];if(t.schemeIdUri===i.ACCESSIBILITY_CEA608_SCHEME)if(t.value&&""!==t.value){let e=t.value.split(";");if("CC"===e[0].substring(0,2))for(f=0;f<e.length;f++)u||(u=m.call(this,v[c])),g(u,e[f].substring(0,3),e[f].substring(4)),p.push(u),u=null;else for(f=0;f<e.length;f++)u||(u=m.call(this,v[c])),g(u,"CC"+(f+1),e[f]),p.push(u),u=null}else g(u,i.CC1,"eng"),p.push(u),u=null}}else a===i.IMAGE?(u.type=i.IMAGE,p.push(u),u=null):u&&p.push(u);return p}function u(t){const n=c(t);return e.getRegularPeriods(n)}function c(t){const n=f(t);return e.getMpd(n)}function d(){r=[]}function f(t){return t||(r.length>0?r[0].mpd.manifest:null)}function h(t){try{const n=p(t.streamInfo,r),i=e.getAdaptationsForPeriod(n);return t&&t.streamInfo&&void 0!==t.streamInfo.id&&i?i[t.index]:null}catch(t){return null}}function p(t,e){const n=e.length;for(let r=0;r<n;r++){let n=e[r];if(t&&t.id===n.id)return n}return null}function m(t){if(!t)return null;let n=new Ca;const r=t.period.mpd.manifest.Period[t.period.index].AdaptationSet[t.index];return n.id=t.id,n.index=t.index,n.type=t.type,n.streamInfo=v(t.period),n.representationCount=e.getRepresentationCount(r),n.labels=e.getLabelsForAdaptation(r),n.lang=e.getLanguageForAdaptation(r),n.segmentAlignment=e.getSegmentAlignment(r),n.subSegmentAlignment=e.getSubSegmentAlignment(r),n.viewpoint=e.getViewpointForAdaptation(r),n.accessibility=e.getAccessibilityForAdaptation(r),n.accessibility.filter((function(t){if(t.schemeIdUri&&t.schemeIdUri.search("cea-608")>=0&&void 0!==o)return!0}))[0]&&(n.embeddedCaptions=!0),n.audioChannelConfiguration=e.getAudioChannelConfigurationForAdaptation(r),0===n.audioChannelConfiguration.length&&r.Representation&&r.Representation.length>0&&(n.audioChannelConfiguration=e.getAudioChannelConfigurationForRepresentation(r.Representation[0])),n.roles=e.getRolesForAdaptation(r),n.codec=e.getCodec(r),n.mimeType=e.getMimeType(r),n.contentProtection=e.getContentProtectionByAdaptation(r),n.bitrateList=e.getBitrateListForAdaptation(r),n.selectionPriority=e.getSelectionPriority(r),n.contentProtection&&n.contentProtection.length>0&&(n.contentProtection=function(t,n){if(!t||!t.length||!n)return t;const r=e.getContentProtectionByManifest(n);if(!r||!r.length)return t;const i=r.reduce(((t,e)=>(e.refId&&t.set(e.refId,e),t)),new Map);return t.map((t=>{if(t.ref){const e=i.get(t.ref);e&&t.mergeAttributesFromReference(e)}return t}))}(n.contentProtection,t.period.mpd.manifest),n.contentProtection=function(t){const e=t.map((t=>t.cencDefaultKid)).filter((t=>null!==t));if(e.length){const n=e[0];t.forEach((t=>{t.keyId=n}))}return t}(n.contentProtection),n.normalizedKeyIds=function(t){const e=new Set;return t.forEach((t=>{t.cencDefaultKid&&"string"==typeof t.cencDefaultKid&&e.add(t.cencDefaultKid.replace(/-/g,"").toLowerCase())})),e}(n.contentProtection)),n.isText=e.getIsText(r),n.essentialProperties=e.getCombinedEssentialPropertiesForAdaptationSet(r),n.supplementalProperties=e.getCombinedSupplementalPropertiesForAdaptationSet(r),n.isFragmented=e.getIsFragmented(r),n.isEmbedded=!1,n.adaptationSetSwitchingCompatibleIds=function(t){if(!t||!t.supplementalProperties)return[];let e=[];const n=t.supplementalProperties.filter((t=>t.schemeIdUri===S.default.ADAPTATION_SET_SWITCHING_SCHEME_ID_URI));return n&&n.length>0&&(e=n[0].value.toString().split(",").map((t=>t))),e}(n),n}function g(t,e,n){t.id=e,t.index=100+parseInt(e.substring(2,3)),t.type=i.TEXT,t.codec="cea-608-in-SEI",t.isEmbedded=!0,t.isFragmented=!1,t.lang=ni(n),t.roles=[{schemeIdUri:"urn:mpeg:dash:role:2011",value:"caption"}]}function v(t){let n=new Ia;return n.id=t.id,n.index=t.index,n.start=t.start,n.duration=t.duration,n.manifestInfo=function(t){let n=new ka;return n.dvrWindowSize=t.timeShiftBufferDepth,n.loadedTime=t.manifest.loadedTime,n.availableFrom=t.availabilityStartTime,n.minBufferTime=t.manifest.minBufferTime,n.maxFragmentDuration=t.maxSegmentDuration,n.duration=e.getDuration(t.manifest),n.isDynamic=e.getIsDynamic(t.manifest),n.serviceDescriptions=e.getServiceDescriptions(t.manifest),n.protocol=t.manifest.protocol,n}(t.mpd),n.isLast=1===t.mpd.manifest.Period.length||Math.abs(n.start+n.duration-n.manifestInfo.duration)<1,n.isEncrypted=t.isEncrypted,n}function y(){if(!i)throw new Error("setConfig function has to be called previously")}function b(t){return r.length>0?r[0].mpd.manifest.Period[t]:null}function _(t,e,n){let r,i,o,a,s,l;if(t)for(i=t.AdaptationSet,s=0;s<i.length;s+=1)for(r=i[s],a=r.Representation,l=0;l<a.length;l+=1)if(o=a[l],e===o.id)return n?l:o;return null}return t={applyPatchToManifest:function(t,e){n.getPatchOperations(e).forEach((e=>{let n=e.getMpdTarget(t);if(null===n)return;let{name:r,target:i,leaf:o}=n;if(e.xpath.findsAttribute()||"__text"===r){switch(e.action){case"add":case"replace":i[r]=e.value;break;case"remove":delete i[r]}return}let a=(i[r]||[]).indexOf(o),s="prepend"===e.position||"before"===e.position;if("remove"===e.action||"replace"===e.action)if(Array.isArray(i[r])){if(-1!=a){let t=i[r];t.splice(a,1),t.length>0?i[r]=t:delete i[r]}}else delete i[r];"add"!==e.action&&"replace"!==e.action||Object.keys(e.value).forEach((t=>{let n=e.value[t],o=i[t]||[];if(0===o.length&&i[t]&&o.push(i[t]),0===o.length)o=n;else{let i=o.length;i=t==r&&-1!=a?a+(s?0:1)+("replace"===e.action?-1:0):s?0:o.length,o.splice.apply(o,[i,0].concat(n))}i[t]=o}))}))},areMediaInfosEqual:function(t,e){if(!t||!e)return!1;const n=t.id===e.id,r=t.codec===e.codec,i=JSON.stringify(t.viewpoint)===JSON.stringify(e.viewpoint),o=t.lang===e.lang,a=JSON.stringify(t.roles)===JSON.stringify(e.roles),s=JSON.stringify(t.accessibility)===JSON.stringify(e.accessibility),l=JSON.stringify(t.audioChannelConfiguration)===JSON.stringify(e.audioChannelConfiguration);return n&&r&&i&&o&&a&&s&&l},getAllMediaInfoForType:function(t,n,o){let a=r,s=o,c=[];if(s)y(),a=u(s);else{if(!(r.length>0))return c;s=r[0].mpd.manifest}const d=p(t,a);let f=e.getAdaptationsForType(s,t?t.index:null,n);return c=l(s,d,t,f,n),n===i.TEXT&&(f=e.getAdaptationsForType(s,t?t.index:null,i.VIDEO),c=c.concat(l(s,d,t,f,n,!0))),c},getAvailabilityStartTime:function(t){const n=c(t);return e.getAvailabilityStartTime(n)},getBandwidthForRepresentation:function(t,e){let n;return n=_(b(e),t),n?n.bandwidth:null},getBaseURLsFromElement:function(t){return e.getBaseURLsFromElement(t)},getCodec:function(t,n,r){return e.getCodec(t,n,r)},getContentSteering:function(t){return e.getContentSteering(t)},getDuration:function(t){const n=f(t);return e.getDuration(n)},getEssentialPropertiesForAdaptationSet:function(t){try{return e.getEssentialPropertiesForRepresentation(t)}catch(t){return[]}},getEssentialPropertiesForRepresentation:function(t){try{return e.getEssentialPropertiesForRepresentation(t)}catch(t){return[]}},getEvent:function(t,e,n,r){try{if(!t||!e||isNaN(n)||!r)return null;const i=t.scheme_id_uri,o=t.value;if(!e[i+"/"+o])return null;const a=new oe,s=t.timescale||1,l=r.adaptation.period.start,u=e[i+"/"+o],c=isNaN(r.presentationTimeOffset)?isNaN(u.presentationTimeOffset)?0:u.presentationTimeOffset:r.presentationTimeOffset;let d,f=t.presentation_time_delta/s;d=0===t.version?l+n-c+f:l-c+f;const h=t.event_duration/s,p=t.id,m=t.message_data;return a.eventStream=u,a.eventStream.value=o,a.eventStream.timescale=s,a.duration=h,a.id=p,a.calculatedPresentationTime=d,a.messageData=m,a.presentationTimeDelta=f,a.parsedMessageData=i===x.default.ID3_SCHEME_ID_URI?function(t){let e=0;const n=[];for(;Fa(t,e);){const r=Ba(t,e+6);t[e+5]>>6&1&&(e+=10),e+=10;const i=e+r;for(;e+10<i;){const r=ja(t.subarray(e)),i=Na(r);i&&n.push(i),e+=r.size+10}za(t,e)&&(e+=10)}return n}(m):null,a}catch(t){return null}},getEventsFor:function(t,n,i){let o=[];if(r.length>0){const a=r[0].mpd.manifest;if(t instanceof Ia){const n=p(t,r);o=e.getEventsForPeriod(n)}else if(t instanceof Ca){const n=p(i,r);o=e.getEventStreamForAdaptationSet(a,h(t),n)}else if(t instanceof pe){const t=p(i,r);o=e.getEventStreamForRepresentation(a,n,t)}}return o},getIndexForRepresentation:function(t,e){return function(t,e){const n=_(t,e,!0);return null!==n?n:-1}(b(e),t)},getIsDVB:function(t){return e.hasProfile(t,"urn:dvb:dash:profile:dvb-dash:2014")},getIsDynamic:function(t){const n=f(t);return e.getIsDynamic(n)},getIsPatch:function(t){return n.getIsPatch(t)},getIsTextTrack:function(t){return e.getIsText(t)},getIsTypeOf:function(t,n){return e.getIsTypeOf(t,n)},getLocation:function(t){return e.getLocation(t)},getMainAdaptationForType:s,getManifestUpdatePeriod:function(t){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e.getManifestUpdatePeriod(t,n)},getMediaInfoForType:function(t,n){if(0===r.length||!t)return null;let i=p(t,r);if(!i)return null;const o=e.getAdaptationsForPeriod(i);let a=s(n,t);return a?m(o[e.getIndexForAdaptation(a,r[0].mpd.manifest,t.index)]):null},getMpd:c,getPatchLocation:function(t){const n=e.getPatchLocation(t),r=e.getPublishTime(t);return n&&0!==n.length&&r?n.filter((t=>isNaN(t.ttl)||r.getTime()+t.ttl>(new Date).getTime())):[]},getPeriodById:function(t){if(!t||0===r.length)return null;const e=r.filter((e=>e.id===t));return e&&e.length>0?e[0]:null},getProducerReferenceTimes:function(t,n){let i,o;const a=p(t,r);return i=n?n.id:null,r.length>0&&a&&(o=i?e.getAdaptationForId(i,r[0].mpd.manifest,a.index):e.getAdaptationForIndex(n?n.index:null,r[0].mpd.manifest,a.index)),o?e.getProducerReferenceTimesForAdaptation(o):[]},getPublishTime:function(t){return e.getPublishTime(t)},getRealAdaptation:function(t,n){let i,o;const a=p(t,r);return i=n?n.id:null,r.length>0&&a&&(o=i?e.getAdaptationForId(i,r[0].mpd.manifest,a.index):e.getAdaptationForIndex(n?n.index:null,r[0].mpd.manifest,a.index)),o},getRealPeriodByIndex:function(t){return e.getRealPeriodForIndex(t,r[0].mpd.manifest)},getRegularPeriods:u,getRepresentationSortFunction:function(){return e.getRepresentationSortFunction()},getStreamsInfo:function(t,e){const n=[];let i=r;if(t&&(y(),i=u(t)),i.length>0){(!e||e>i.length)&&(e=i.length);for(let t=0;t<e;t++)n.push(v(i[t]))}return n},getSuggestedPresentationDelay:function(){const t=r.length>0?r[0].mpd:null;return e.getSuggestedPresentationDelay(t)},getSupplementalCodecs:function(t){const e=t[S.default.SUPPLEMENTAL_CODECS];return e?e.split(" ").map((e=>t.mimeType+';codecs="'+e+'"')):[]},getUTCTimingSources:function(){const t=f();return e.getUTCTimingSources(t)},getVoRepresentations:function(t){let n;const r=h(t);return n=e.getRepresentationsForAdaptation(r,t),n},isPatchValid:function(t,r){let i=e.getId(t),o=n.getMpdId(r),a=e.getPublishTime(t),s=n.getPublishTime(r),l=n.getOriginalPublishTime(r);return!!(i&&o&&i==o&&a&&l&&a.getTime()==l.getTime()&&s&&a.getTime()<s.getTime())},reset:d,setConfig:function(t){t&&(t.constants&&(i=t.constants),t.cea608parser&&(o=t.cea608parser),t.errHandler&&e.setConfig({errHandler:t.errHandler}),t.BASE64&&e.setConfig({BASE64:t.BASE64}))},updatePeriods:function(t){if(!t)return null;y(),r=u(t)}},e=ve(a).getInstance(),n=Ma(a).getInstance(),d(),t}Ua.__dashjs_factory_name="DashAdapter";var qa=k.default.getSingletonFactory(Ua);class Ga{static round10(t,e){return function(t,e,n){return void 0===n||0==+n?Math[t](e):(n=+n,null===(e=+e)||isNaN(e)||"number"!=typeof n||n%1!=0?NaN:(e=e.toString().split("e"),+((e=(e=Math[t](+(e[0]+"e"+(e[1]?+e[1]-n:-n)))).toString().split("e"))[0]+"e"+(e[1]?+e[1]+n:n))))}("round",t,e)}}var Ha=class{constructor(){this.TcpList=[],this.HttpList=[],this.RepSwitchList=[],this.BufferLevel=[],this.BufferState=[],this.PlayList=[],this.DroppedFrames=[],this.SchedulingInfo=[],this.DVRInfo=[],this.ManifestUpdate=[],this.RequestsQueue=null,this.DVBErrors=[]}},Va=class{constructor(){this.t=null,this.mt=null,this.to=null,this.lto=null}},Qa=class{constructor(){this.t=null,this.level=null}},Wa=class{constructor(){this.target=null,this.state=T.BUFFER_EMPTY}},Ya=class{constructor(){this.time=null,this.range=null,this.manifestInfo=null}},Ka=class{constructor(){this.time=null,this.droppedFrames=null}};class Xa{constructor(){this.mediaType=null,this.type=null,this.requestTime=null,this.fetchTime=null,this.availabilityStartTime=null,this.presentationStartTime=0,this.clientTimeOffset=0,this.currentTime=null,this.buffered=null,this.latency=0,this.streamInfo=[],this.representationInfo=[]}}class $a{constructor(){this.id=null,this.index=null,this.start=null,this.duration=null}}class Za{constructor(){this.id=null,this.index=null,this.mediaType=null,this.presentationTimeOffset=null,this.startNumber=null}}var Ja=class{constructor(){this.mediaType=null,this.t=null,this.type=null,this.startTime=null,this.availabilityStartTime=null,this.duration=null,this.bandwidth=null,this.range=null,this.state=null}},ts=class{constructor(){this.loadingRequests=[],this.executedRequests=[]}};function es(t){const e=(t=t||{}).settings;let n,r,i=this.context,o=(0,C.default)(i).getInstance();function a(){o.trigger(I.default.METRICS_CHANGED)}function s(t){o.trigger(I.default.METRIC_CHANGED,{mediaType:t}),a()}function l(t,e,n){o.trigger(I.default.METRIC_UPDATED,{mediaType:t,metric:e,value:n}),s(t)}function u(t,e,n){o.trigger(I.default.METRIC_ADDED,{mediaType:t,metric:e,value:n}),s(t)}function c(t,e){let n=null;return t?(r.hasOwnProperty(t)?n=r[t]:e||(n=new Ha,r[t]=n),n):n}function d(t,n,r){let i=c(t);null!==i&&(i[n].push(r),i[n].length>e.get().streaming.metrics.maxListDepth&&i[n].shift())}function f(t,e,n){d(t,e,n),u(t,e,n)}return n={addBufferLevel:function(t,e,n){let r=new Qa;r.t=e,r.level=n,f(t,T.BUFFER_LEVEL,r)},addBufferState:function(t,e,n){let r=new Wa;r.target=n,r.state=e,f(t,T.BUFFER_STATE,r)},addDVBErrors:function(t){f(x.default.STREAM,T.DVB_ERRORS,t)},addDVRInfo:function(t,e,n,r){let i=new Ya;i.time=e,i.range=r,i.manifestInfo=n,f(t,T.DVR_INFO,i)},addDroppedFrames:function(t,e){let n=new Ka,r=c(t).DroppedFrames;e&&(n.time=e.creationTime,n.droppedFrames=e.droppedVideoFrames,r.length>0&&r[r.length-1]==n||f(t,T.DROPPED_FRAMES,n))},addHttpRequest:function t(e,n,r,i){let o=new L.HTTPRequest;n.url&&n.url!==e.url&&(t({mediaType:e.mediaType,type:e.type,url:e.url,quality:e.quality,serviceLocation:null,range:e.range,startDate:e.startDate,firstByteDate:null,endDate:null,duration:e.duration,fileLoaderType:e.fileLoaderType,resourceTimingValues:e.resourceTimingValues},{url:null,status:null,headers:null},null,i),o.actualurl=n.url),o.tcpid=null,o.type=e.type,o.url=e.url,o.range=e.range||null,o.trequest=e.startDate,o.tresponse=e.firstByteDate,o.responsecode=n.status,o.cmsd=i,o._tfinish=e.endDate,o._stream=e.mediaType,o._mediaduration=e.duration,o._quality=e.quality,o._responseHeaders="";for(const t in n.headers)o._responseHeaders+=t+": "+n.headers[t]+"\r\n";o._serviceLocation=e.serviceLocation||null,o._fileLoaderType=e.fileLoaderType,o._resourceTimingValues=e.resourceTimingValues,o._streamId=e&&e.representation&&e.representation.mediaInfo&&e.representation.mediaInfo.streamInfo?e.representation.mediaInfo.streamInfo.id:null,r?r.forEach((t=>{!function(t,e,n,r){let i=new L.HTTPRequestTrace;i.s=e,i.d=n,i.b=r,t.trace.push(i),t.interval||(t.interval=0),t.interval+=n}(o,t.s,t.d,t.b,t.t)})):(delete o.interval,delete o.trace),f(e.mediaType,T.HTTP_REQUEST,o)},addManifestUpdate:function(t,e,n,r){let i=new Xa;i.mediaType=t,i.type=e,i.requestTime=n,i.fetchTime=r,d(x.default.STREAM,T.MANIFEST_UPDATE,i),u(t,T.MANIFEST_UPDATE,i)},addManifestUpdateRepresentationInfo:function(t,e,n){if(t&&t.representationInfo){const r=new Za;r.id=e?e.id:null,r.index=e?e.index:null,r.mediaType=n,r.startNumber=e?e.startNumber:null,r.presentationTimeOffset=e?e.presentationTimeOffset:null,t.representationInfo.push(r),l(t.mediaType,T.MANIFEST_UPDATE_TRACK_INFO,t)}},addManifestUpdateStreamInfo:function(t,e,n,r,i){if(t){let o=new $a;o.id=e,o.index=n,o.start=r,o.duration=i,t.streamInfo.push(o),l(t.mediaType,T.MANIFEST_UPDATE_STREAM_INFO,t)}},addPlayList:function(t){t.trace&&Array.isArray(t.trace)?t.trace.forEach((t=>{t.hasOwnProperty("subreplevel")&&!t.subreplevel&&delete t.subreplevel})):delete t.trace,f(x.default.STREAM,T.PLAY_LIST,t)},addRepresentationSwitch:function(t,e,n,r,i){let o=new Va;o.t=e,o.mt=n,o.to=r,i?o.lto=i:delete o.lto,f(t,T.TRACK_SWITCH,o)},addRequestsQueue:function(t,e,n){let r=new ts;r.loadingRequests=e,r.executedRequests=n,c(t).RequestsQueue=r,u(t,T.REQUESTS_QUEUE,r)},addSchedulingInfo:function(t,e,n,r,i,o,a,s,l){let u=new Ja;u.mediaType=t,u.t=e,u.type=n,u.startTime=r,u.availabilityStartTime=i,u.duration=o,u.bandwidth=a,u.range=s,u.state=l,f(t,T.SCHEDULING_INFO,u)},clearAllCurrentMetrics:function(){r={},a()},clearCurrentMetricsForType:function(t){delete r[t],s(t)},getMetricsFor:c,updateManifestUpdateInfo:function(t,e){if(t){for(let n in e)t[n]=e[n];l(t.mediaType,T.MANIFEST_UPDATE,t)}}},r={},n}es.__dashjs_factory_name="MetricsModel";var ns=k.default.getSingletonFactory(es);function rs(t){t=t||{};const e=this.context;let n,r,i,o,a=t.metricsModel;function s(t){const e=a.getMetricsFor(t,!0);if(!e)return null;const n=e.HttpList;let r,i=null;if(!n||n.length<=0)return null;for(r=n.length-1;r>=0;){if(n[r].responsecode){i=n[r];break}r--}return i}function l(t){const e=a.getMetricsFor(t,!0);return e&&e.HttpList?e.HttpList:[]}function u(t,e){if(!t)return null;const n=t[e];return n&&0!==n.length?n[n.length-1]:null}return n={getCurrentRepresentationSwitch:function(t){return u(a.getMetricsFor(t,!0),T.TRACK_SWITCH)},getCurrentBufferState:function(t){return u(a.getMetricsFor(t,!0),T.BUFFER_STATE)},getCurrentBufferLevel:function(t){const e=u(a.getMetricsFor(t,!0),T.BUFFER_LEVEL);return e?Ga.round10(e.level/1e3,-3):0},getCurrentHttpRequest:s,getHttpRequests:l,getCurrentDroppedFrames:function(){return u(a.getMetricsFor(x.default.VIDEO,!0),T.DROPPED_FRAMES)},getCurrentSchedulingInfo:function(t){return u(a.getMetricsFor(t,!0),T.SCHEDULING_INFO)},getCurrentDVRInfo:function(t){return u(t?a.getMetricsFor(t,!0):a.getMetricsFor(x.default.VIDEO,!0)||a.getMetricsFor(x.default.AUDIO,!0),T.DVR_INFO)},getCurrentManifestUpdate:function(){return u(a.getMetricsFor(x.default.STREAM),T.MANIFEST_UPDATE)},getLatestFragmentRequestHeaderValueByID:function(t,e){if(!e)return null;let n={},r=s(t);r&&(n=Vt.default.parseHttpHeaders(r._responseHeaders));const i=n[e.toLowerCase()];return void 0===i?null:i},getLatestMPDRequestHeaderValueByID:function(t){if(!t)return null;let e,n,r,i={};for(e=l(x.default.STREAM),r=e.length-1;r>=0;r--)if(n=e[r],n.type===L.HTTPRequest.MPD_TYPE){i=Vt.default.parseHttpHeaders(n._responseHeaders);break}const o=i[t.toLowerCase()];return void 0===o?null:o},addRepresentationSwitch:function(t,e,n,r,i){a.addRepresentationSwitch(t,e,n,r,i)},addDVRInfo:function(t,e,n,r){a.addDVRInfo(t,e,n,r)},updateManifestUpdateInfo:function(t){const e=this.getCurrentManifestUpdate();a.updateManifestUpdateInfo(e,t)},addManifestUpdateStreamInfo:function(t){if(t){const e=this.getCurrentManifestUpdate();a.addManifestUpdateStreamInfo(e,t.id,t.index,t.start,t.duration)}},addManifestUpdateRepresentationInfo:function(t,e){if(t){const n=this.getCurrentManifestUpdate();a.addManifestUpdateRepresentationInfo(n,t,e)}},addManifestUpdate:function(t){a.addManifestUpdate(x.default.STREAM,t.type,t.startDate,t.endDate)},addHttpRequest:function(t,e,n,r,i,o){const s={status:n,headers:r,url:e};a.addHttpRequest(t,s,i,o)},addSchedulingInfo:function(t,e){a.addSchedulingInfo(t.mediaType,new Date,t.type,t.startTime,t.availabilityStartTime,t.duration,t.bandwidth,t.range,e)},addRequestsQueue:function(t,e,n){a.addRequestsQueue(t,e,n)},addBufferLevel:function(t,e,n){a.addBufferLevel(t,e,n)},addBufferState:function(t,e,n){a.addBufferState(t,e,n)},addDroppedFrames:function(t){a.addDroppedFrames(x.default.VIDEO,t)},addPlayList:function(){o&&(a.addPlayList(o),o=null)},addDVBErrors:function(t){a.addDVBErrors(t)},createPlaylistMetrics:function(t,e){o=new Ct,o.start=new Date,o.mstart=t,o.starttype=e},createPlaylistTraceMetrics:function(t,e,n){!0===r&&(r=!1,i=new It,i.representationid=t,i.start=new Date,i.mstart=e,i.playbackspeed=null!==n?n.toString():null)},updatePlayListTraceMetrics:function(t){if(i)for(let e in i)i[e]=t[e]},pushPlayListTraceMetrics:function(t,e){if(!1===r&&o&&i&&i.start){const n=i.start;i.duration=t.getTime()-n.getTime(),i.stopreason=e,o.trace.push(i),r=!0}},clearAllCurrentMetrics:function(){a.clearAllCurrentMetrics()}},a=a||ns(e).getInstance({settings:t.settings}),r=!0,i=null,o=null,n}rs.__dashjs_factory_name="DashMetrics";var is=k.default.getSingletonFactory(rs);function os(){const t=this.context,e=(0,C.default)(t).getInstance(),n=(0,W.default)(t).getInstance();let r,i,o,a;function s(t){a=t}function l(t,e,n,r){let i,o=e.adaptation.period.mpd;const a=o.availabilityStartTime;if(r)i=n&&o.timeShiftBufferDepth!==Number.POSITIVE_INFINITY?new Date(a.getTime()+1e3*(t+o.timeShiftBufferDepth)):o.availabilityEndTime;else if(n){const n=e.availabilityTimeOffset;i=new Date(a.getTime()+1e3*(t-n))}else i=a;return i}function u(t,e){return(t.getTime()-e.mpd.availabilityStartTime.getTime()+1e3*a)/1e3}function c(t,e){return t+(e.adaptation.period.start-e.presentationTimeOffset)}function d(t){const e={start:NaN,end:NaN},n=t[0].getAdapter().getRegularPeriods()[0],r=u(new Date,n);if(!t||0===t.length)return{range:e,now:r};t.forEach((t=>{let n=t.getCurrentRepresentationForType(x.default.VIDEO);if(n||(n=t.getCurrentRepresentationForType(x.default.AUDIO)),!n){const e=t.getAdapter(),r=e.getMediaInfoForType(t.getStreamInfo(),x.default.VIDEO)||e.getMediaInfoForType(t.getStreamInfo(),x.default.AUDIO);n=e.getVoRepresentations(r)[0]}let o={start:NaN,end:NaN};if(n)if(n.segmentInfoType===S.default.SEGMENT_TIMELINE)o=function(t){const e=t.adaptation.period.mpd.manifest.Period[t.adaptation.period.index].AdaptationSet[t.adaptation.index],n=i.getRepresentationFor(t.index,e),r=n.SegmentTemplate||n.SegmentList,o=r.SegmentTimeline,a=r.timescale,s=o.S,l={start:0,end:0},u=s[0].t,d=!isNaN(u),f=d?u:0;let h,p,m,g,v=0;for(d&&(l.start=c(f/a,t)),m=0,g=s.length;m<g;m++)h=s[m],p=0,h.hasOwnProperty("r")&&(p=h.r),v+=h.d*(1+p);return l.end=c((f+v)/a,t),l}(n);else{const t=n.adaptation.period;o.start=t.start,o.end=Math.max(r,t.start+t.duration)}!isNaN(o.start)&&(isNaN(e.start)||e.start>o.start)&&(e.start=o.start),!isNaN(o.end)&&(isNaN(e.end)||e.end<o.end)&&(e.end=o.end)})),e.end=Math.min(r,e.end);const o=h(t,e.end,!0);return e.end=isNaN(o)?e.end:o,e.start=n&&n.mpd&&n.mpd.timeShiftBufferDepth&&!isNaN(n.mpd.timeShiftBufferDepth)&&!isNaN(e.end)?Math.max(e.end-n.mpd.timeShiftBufferDepth,e.start):e.start,e.start=h(t,e.start),{range:e,now:r}}function f(t,e){o=t-e.end}function h(t,e){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];try{let r=0,i=!1,o=NaN;for(;!i&&r<t.length;){const a=t[r].getStreamInfo();a.start<=e&&(!isFinite(a.duration)||a.start+a.duration>=e)?(o=e,i=!0):!n&&a.start>e&&(isNaN(o)||a.start<o)?o=a.start:n&&a.start+a.duration<e&&(isNaN(o)||a.start+a.duration>o)&&(o=a.start+a.duration),r+=1}return o}catch(t){return e}}function p(t){void 0===t.offset||isNaN(t.offset)||s(t.offset/1e3)}function m(){a=0,o=0}function g(){e.off(I.default.UPDATE_TIME_SYNC_OFFSET,p,this),m()}return r={initialize:function(){m(),e.on(I.default.UPDATE_TIME_SYNC_OFFSET,p,this)},getClientTimeOffset:function(){return a},setClientTimeOffset:s,getClientReferenceTime:function(){return Date.now()-1e3*o+1e3*a},calcAvailabilityStartTimeFromPresentationTime:function(t,e,n){return l(t,e,n)},calcAvailabilityEndTimeFromPresentationTime:function(t,e,n){return l(t,e,n,!0)},calcPresentationTimeFromWallTime:u,calcPresentationTimeFromMediaTime:c,calcPeriodRelativeTimeFromMpdRelativeTime:function(t,e){return e-t.adaptation.period.start},calcMediaTimeFromPresentationTime:function(t,e){return t-e.adaptation.period.start+e.presentationTimeOffset},calcWallTimeForSegment:function(t,e){let n,r,i;return e&&(n=t.representation.adaptation.period.mpd.suggestedPresentationDelay,r=t.presentationStartTime+n,i=new Date(t.availabilityStartTime.getTime()+1e3*r)),i},calcTimeShiftBufferWindow:function(t,r){if(!r)return function(t){const e={start:NaN,end:NaN};let n=0,r=NaN;return t.forEach((t=>{const e=t.getStreamInfo();n+=e.duration,(isNaN(r)||e.start<r)&&(r=e.start)})),e.start=r,e.end=r+n,e}(t);if(n.get().streaming.timeShiftBuffer.calcFromSegmentTimeline){const e=d(t);return f(e.now,e.range),e.range}return function(t){const r={start:NaN,end:NaN};if(!t||0===t.length)return r;const i=t[0].getAdapter().getRegularPeriods()[0],o=u(new Date,i),a=i.mpd.timeShiftBufferDepth,s=isNaN(a)?0:o-a;if(r.start=h(t,s),r.end=!isNaN(r.start)&&o<r.start?o:h(t,o,!0),!isNaN(a)&&r.end<o-a&&(r.end=NaN),n.get().streaming.timeShiftBuffer.fallbackToSegmentTimeline){const n=d(t);if(n.range.end<r.start)return e.trigger(R.default.CONFORMANCE_VIOLATION,{level:Sr.LEVELS.WARNING,event:Sr.EVENTS.INVALID_DVR_WINDOW}),f(n.now,n.range),n.range}return r}(t)},reset:g},i=ve(t).getInstance(),g(),r}os.__dashjs_factory_name="TimelineConverter";var as,ss,ls,us,cs,ds=k.default.getSingletonFactory(os),fs={};as="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",ss=function(t){for(var e=0,n=[],r=0|t.length/3;0<r--;){var i=(t[e]<<16)+(t[e+1]<<8)+t[e+2];e+=3,n.push(as.charAt(63&i>>18)),n.push(as.charAt(63&i>>12)),n.push(as.charAt(63&i>>6)),n.push(as.charAt(63&i))}return 2==t.length-e?(i=(t[e]<<16)+(t[e+1]<<8),n.push(as.charAt(63&i>>18)),n.push(as.charAt(63&i>>12)),n.push(as.charAt(63&i>>6)),n.push("=")):1==t.length-e&&(i=t[e]<<16,n.push(as.charAt(63&i>>18)),n.push(as.charAt(63&i>>12)),n.push("==")),n.join("")},ls=function(){for(var t=[],e=0;e<64;++e)t[as.charCodeAt(e)]=e;return t["=".charCodeAt(0)]=0,t}(),us=function(t){for(var e=0,n=[],r=0|t.length/4;0<r--;){var i=(ls[t.charCodeAt(e)]<<18)+(ls[t.charCodeAt(e+1)]<<12)+(ls[t.charCodeAt(e+2)]<<6)+ls[t.charCodeAt(e+3)];n.push(255&i>>16),n.push(255&i>>8),n.push(255&i),e+=4}return n&&("="==t.charAt(e-2)?(n.pop(),n.pop()):"="==t.charAt(e-1)&&n.pop()),n},cs={encode:function(t){for(var e=[],n=0;n<t.length;++n)e.push(t.charCodeAt(n));return e},decode:function(t){for(var e=0;e<s.length;++e)a[e]=String.fromCharCode(a[e]);return a.join("")}},fs.decodeArray=function(t){var e=us(t);return new Uint8Array(e)},fs.encodeASCII=function(t){var e=cs.encode(t);return ss(e)},fs.decodeASCII=function(t){var e=us(t);return cs.decode(e)},fs.encode=function(t){var e=function(t){for(var e=[],n=0;n<t.length;++n){var r=t.charCodeAt(n);r<128?e.push(r):r<2048?(e.push(192|r>>6),e.push(128|63&r)):r<65536?(e.push(224|r>>12),e.push(128|63&r>>6),e.push(128|63&r)):(e.push(240|r>>18),e.push(128|63&r>>12),e.push(128|63&r>>6),e.push(128|63&r))}return e}(t);return ss(e)},fs.decode=function(t){return function(t){for(var e=[],n=0;n<t.length;){var r=t[n++];r<128||(r<224?(r=(31&r)<<6,r|=63&t[n++]):r<240?(r=(15&r)<<12,r|=(63&t[n++])<<6,r|=63&t[n++]):(r=(7&r)<<18,r|=(63&t[n++])<<12,r|=(63&t[n++])<<6,r|=63&t[n++])),e.push(String.fromCharCode(r))}return e.join("")}(us(t))},"undefined"!=typeof exports&&(exports.decode=fs.decode,exports.decodeArray=fs.decodeArray,exports.encode=fs.encode,exports.encodeASCII=fs.encodeASCII);var hs=fs,ps=class extends Ca{constructor(){super(),this.captionData=null,this.label=null,this.defaultTrack=!1,this.kind=null,this.isFragmented=!1,this.isEmbedded=!1,this.isTTML=null}},ms=n(7377);function gs(){let t,e=0;function n(t){let e="";for(let n=0;n<t.length;++n)e+=t[n].uchar;return e.length-e.replace(/^\s+/,"").length}function r(t){return"left: "+3.125*t.x+"%; top: "+6.66*t.y1+"%; width: "+(100-3.125*t.x)+"%; height: "+6.66*Math.max(t.y2-1-t.y1,1)+"%; align-items: flex-start; overflow: visible; -webkit-writing-mode: horizontal-tb;"}function i(t){return"red"===t?"rgb(255, 0, 0)":"green"===t?"rgb(0, 255, 0)":"blue"===t?"rgb(0, 0, 255)":"cyan"===t?"rgb(0, 255, 255)":"magenta"===t?"rgb(255, 0, 255)":"yellow"===t?"rgb(255, 255, 0)":"white"===t?"rgb(255, 255, 255)":"black"===t?"rgb(0, 0, 0)":t}function o(t,e){const n=t.videoHeight/15;return e?"font-size: "+n+"px; font-family: Menlo, Consolas, 'Cutive Mono', monospace; color: "+(e.foreground?i(e.foreground):"rgb(255, 255, 255)")+"; font-style: "+(e.italics?"italic":"normal")+"; text-decoration: "+(e.underline?"underline":"none")+"; white-space: pre; background-color: "+(e.background?i(e.background):"transparent")+";":"font-size: "+n+"px; font-family: Menlo, Consolas, 'Cutive Mono', monospace; justify-content: flex-start; text-align: left; color: rgb(255, 255, 255); font-style: normal; white-space: pre; line-height: normal; font-weight: normal; text-decoration: none; width: 100%; display: flex;"}function a(t){return t.replace(/^\s+/g,"")}function s(t){return t.replace(/\s+$/g,"")}return t={createHTMLCaptionsFromScreen:function(t,i,l,u){let c=null,d=null,f=!1,h=-1,p={start:i,end:l,spans:[]},m="style_cea608_white_black";const g={},v={},y=[];let b,_;for(b=0;b<15;++b){const t=u.rows[b];let e="",r=null;if(!1===t.isEmpty()){const o=n(t.chars);null===c&&(c={x:o,y1:b,y2:b+1,p:[]}),o!==h&&f&&(c.p.push(p),p={start:i,end:l,spans:[]},c.y2=b,c.name="region_"+c.x+"_"+c.y1+"_"+c.y2,!1===g.hasOwnProperty(c.name)?(y.push(c),g[c.name]=c):(d=g[c.name],d.p.contat(c.p)),c={x:o,y1:b,y2:b+1,p:[]});for(let n=0;n<t.chars.length;++n){const i=t.chars[n],o=i.penState;if(null===r||!o.equals(r)){e.trim().length>0&&(p.spans.push({name:m,line:e,row:b}),e="");let t="style_cea608_"+o.foreground+"_"+o.background;o.underline&&(t+="_underline"),o.italics&&(t+="_italics"),v.hasOwnProperty(t)||(v[t]=JSON.parse(JSON.stringify(o))),r=o,m=t}e+=i.uchar}e.trim().length>0&&p.spans.push({name:m,line:e,row:b}),f=!0,h=o}else f=!1,h=-1,c&&(c.p.push(p),p={start:i,end:l,spans:[]},c.y2=b,c.name="region_"+c.x+"_"+c.y1+"_"+c.y2,!1===g.hasOwnProperty(c.name)?(y.push(c),g[c.name]=c):(d=g[c.name],d.p.contat(c.p)),c=null)}c&&(c.p.push(p),c.y2=b+1,c.name="region_"+c.x+"_"+c.y1+"_"+c.y2,!1===g.hasOwnProperty(c.name)?(y.push(c),g[c.name]=c):(d=g[c.name],d.p.contat(c.p)),c=null);const w=[];for(b=0;b<y.length;++b){const n=y[b],u="sub_cea608_"+e++,c=document.createElement("div");c.id=u;const d=r(n);c.style.cssText="position: absolute; margin: 0; display: flex; box-sizing: border-box; pointer-events: none;"+d;const f=document.createElement("div");f.className="paragraph bodyStyle",f.style.cssText=o(t);const h=document.createElement("div");h.className="cueUniWrapper",h.style.cssText="unicode-bidi: normal; direction: ltr;";for(let e=0;e<n.p.length;++e){const r=n.p[e];let i=0;for(_=0;_<r.spans.length;++_){let e=r.spans[_];if(e.line.length>0){if(0!==_&&i!=e.row){const t=document.createElement("br");t.className="lineBreak",h.appendChild(t)}let n=!1;i===e.row&&(n=!0),i=e.row;const l=v[e.name],u=document.createElement("span");u.className="spanPadding "+e.name+" customSpanColor",u.style.cssText=o(t,l),0!==_&&n?_===r.spans.length-1?u.textContent=s(e.line):u.textContent=e.line:r.spans.length>1&&_<r.spans.length-1&&e.row===r.spans[_+1].row?u.textContent=a(e.line):u.textContent=e.line.trim(),h.appendChild(u)}}}f.appendChild(h),c.appendChild(f);const p={bodyStyle:["%",90]};for(const t in v)v.hasOwnProperty(t)&&(p[t]=["%",90]);w.push({type:"html",start:i,end:l,cueHTMLElement:c,cueID:u,cellResolution:[32,15],isFromCEA608:!0,fontSize:p,lineHeight:{},linePadding:{}})}return w}},t}gs.__dashjs_factory_name="EmbeddedTextHtmlRender";var vs=k.default.getSingletonFactory(gs);function ys(t,e,n){const r=[];for(let i=e;i<n;i++)i+2<n&&0===t.getUint8(i)&&0===t.getUint8(i+1)&&3===t.getUint8(i+2)?(r.push(0),r.push(0),i+=2):r.push(t.getUint8(i));return new DataView(new Uint8Array(r).buffer)}function bs(t,e,n,r){return!(4!==t||e<8)&&181===n.getUint8(r)&&49===n.getUint16(r+1)&&1195456820===n.getUint32(r+3)&&3===n.getUint8(r+7)}function _s(t,e){return(127&t)>0||(127&e)>0}function ws(t,e){let n=0;for(;n<t.byteLength;){let i,o=0,a=0;do{o+=i=t.getUint8(n++)}while(255===i);do{a+=i=t.getUint8(n++)}while(255===i);if(bs(o,a,t,n)){const i=n+10,o=i+3*(31&t.getUint8(i-2));for(let n=i;n<o;n+=3){const i=t.getUint8(n);if(4&i){const o=3&i;if(0===(r=o)||1===r){const r=t.getUint8(n+1),i=t.getUint8(n+2);_s(r,i)&&e[o].push(r,i)}}}}n+=a}var r}function As(t,e,n){let r=0,i=0;const o=[[],[]];for(let a=e;a<e+n-5&&(r=t.getUint32(a),i=31&t.getUint8(a+4),!(a+5+r>e+n));a++)6===i&&a+5+r<=t.byteLength&&ws(ys(t,a+5,a+5+r),o),a+=r+3;return o}function Es(t){const e=t.errHandler,n=t.manifestModel,r=t.mediaController,i=t.videoModel,o=t.textTracks,a=t.vttParser,s=t.vttCustomRenderingParser,l=t.ttmlParser,u=t.streamInfo,c=t.settings,d=this.context,f=(0,C.default)(d).getInstance();let h,p,m,g,v,y,b,_,w,A,T,k,R,O,M,D,N,B=!1;function j(){y=null,_=NaN,w=[],A=null,b=!1,v=[],g=null}function z(t){const e={};e[S.default.SUBTITLE]="subtitles",e[S.default.CAPTION]="captions",e[S.default.FORCED_SUBTITLE]="subtitles";const n=new ps;for(let e in t)n[e]=t[e];n.defaultTrack=function(t){let e=!1;return k.length>1&&t.isEmbedded?e=t.id&&t.id===x.default.CC1:1===k.length?t.id&&"string"==typeof t.id&&"CC"===t.id.substring(0,2)&&(e=!0):0===k.length&&(e=t.index===v[0].index),e}(t),n.isTTML=function(t){return t.codec&&t.codec.search(x.default.STPP)>=0||t.mimeType&&t.mimeType.search(x.default.TTML)>=0}(t),n.kind=function(t,e){let n=t.roles&&t.roles.length>0?e[t.roles[0].value]:e.caption;return n=Object.values(e).includes(n)?n:e.caption,n}(t,e),o.addTextTrackInfo(n)}function F(t){const e=t.chunk;e.representation.mediaInfo.embeddedCaptions&&q(e.bytes,e)}function U(t){T=t}function q(t,r){const i=r.representation.mediaInfo,s=i.type,l=i.mimeType,u=i.codec||l;u?-1!==i.codec.indexOf("application/mp4")?function(t,e,r){let i,s;if("InitializationSegment"===e.segmentType)b=!0,_=m.getMediaTimescaleFromMoov(t);else{if(!b)return;s=m.getSamplesInfo(t),i=s.sampleList,i.length>0&&(A=i[0].cts-e.start*_),r.search(x.default.STPP)>=0?function(t,e,r){let i,a;for(g=null!==g?g:W(r),i=0;i<e.length;i++){const r=e[i],s=r.cts,l=V(),u=l+s/_,c=u+r.duration/_;h.buffered.add(u,c);const d=new DataView(t,r.offset,r.subSizes[0]);let f=$n.Utils.dataViewToString(d,x.default.UTF8);const m=[];let v=r.offset+r.subSizes[0];for(a=1;a<r.subSizes.length;a++){const e=new Uint8Array(t,v,r.subSizes[a]),n=String.fromCharCode.apply(null,e);m.push(n),v+=r.subSizes[a]}try{const t=n.getValue().ttmlTimeIsRelative?s/_:0,e=g.parse(f,t,s/_,(s+r.duration)/_,m);o.addCaptions(T,l,e)}catch(t){y.removeExecutedRequestsBeforeTime(),this.remove(),p.error("TTML parser error: "+t.message)}}}(t,i,r):function(t,e){let n,r,i;const s=[];for(n=0;n<e.length;n++){const o=e[n];o.cts-=A;const l=V()+o.cts/_,u=l+o.duration/_;h.buffered.add(l,u);const c=t.slice(o.offset,o.offset+o.size),d=$n.parseBuffer(c);for(r=0;r<d.boxes.length;r++){const e=d.boxes[r];if(p.debug("VTT box1: "+e.type),"vtte"!==e.type&&"vttc"===e.type){p.debug("VTT vttc boxes.length = "+e.boxes.length);let n={styles:{}};for(i=0;i<e.boxes.length;i++){const r=e.boxes[i];if(p.debug("VTT box2: "+r.type),"payl"===r.type)n.start=o.cts/_,n.end=(o.cts+o.duration)/_,n.data=r.cue_text;else if("sttg"===r.type&&r.settings&&""!==r.settings)try{const t=r.settings.split(" ");n.styles=a.getCaptionStyles(t)}catch(t){}}n&&n.data&&(s.push(n),p.debug(`VTT  ${n.start} - ${n.end} :  ${n.data}`))}}}s.length>0&&o.addCaptions(T,0,s)}(t,i)}}(t,r,u):s===x.default.VIDEO?function(t,e){let n,r;if(e.segmentType===L.HTTPRequest.INIT_SEGMENT_TYPE)0===R&&(R=m.getMediaTimescaleFromMoov(t));else if(e.segmentType===L.HTTPRequest.MEDIA_SEGMENT_TYPE){if(0===R)return void p.warn("CEA-608: No timescale for embeddedTextTrack yet");r=m.getSamplesInfo(t);const i=r.lastSequenceNumber,a=Math.trunc(e.start),s=Math.trunc(e.end);if(D[0]||D[1]||function(){let t;for(let e=0;e<k.length;e++){if(t=o.getTrackIdxForId(k[e].id),-1===t)return void p.warn("CEA-608: data before track is ready.");const n=H(t);D[e]=new E(e+1,{newCue:n},null)}}(),R){if(function(t,e,n,r,i){return null!==t&&null!==e&&null!==r&&null!==i&&(e===t?r!==i:e!==t+n)}(O,i,r.numSequences,M,a))for(n=0;n<D.length;n++)D[n]&&D[n].reset();const e=function(t,e){if(0===e.length)return null;const n={splits:[],fields:[[],[]]},r=new DataView(t);for(let t=0;t<e.length;t++){const i=e[t],o=As(r,i.offset,i.size);let a=null,s=0;for(let t=0;t<2;t++)if(o[t].length>0){i.cts!==a?s=0:s+=1;const e=V();n.fields[t].push([i.cts+e*R,o[t],s]),a=i.cts}}return n.fields.forEach((function(t){t.sort((function(t,e){return t[0]===e[0]?t[2]-e[2]:t[0]-e[0]}))})),n}(t,r.sampleList);for(let t=0;t<D.length;t++){const r=e.fields[t],i=D[t];if(i)for(n=0;n<r.length;n++)i.addData(r[n][0]/R,r[n][1])}O=i,M=s}}}(t,r):function(t,n,r){let i,a;const s=new DataView(t,0,t.byteLength);a=$n.Utils.dataViewToString(s,x.default.UTF8);try{i=W(r).parse(a,0),o.addCaptions(o.getCurrentTrackIdx(),0,i),h.buffered&&h.buffered.add(n.start,n.end)}catch(t){e.error(new G.default(Q.TIMED_TEXT_ERROR_ID_PARSE_CODE,Q.TIMED_TEXT_ERROR_MESSAGE_PARSE+t.message,a))}}(t,r,u):p.error("No text type defined")}function H(t){return function(e,n,r){let a;a=i.getTTMLRenderingDiv()?N.createHTMLCaptionsFromScreen(i.getElement(),e,n,r):[{start:e,end:n,data:r.getDisplayText(),styles:{}}],a&&o.addCaptions(t,0,a)}}function V(){return isNaN(h.timestampOffset)?0:h.timestampOffset}function W(t){let e;return t.search(x.default.VTT)>=0?e=c.get().streaming.text.webvtt.customRenderingEnabled&&s?s:a:(t.search(x.default.TTML)>=0||t.search(x.default.STPP)>=0)&&(e=l),e}function Y(t){k.forEach((function(e){const n=o.getTrackIdxForId(e.id);n>=0&&o.deleteCuesFromTrackIdx(n,t.from,t.to)}))}return h={initialize:function(){B||(k=[],T=null,R=0,D=[],O=null,M=null,B=!0,N=vs(d).getInstance(),f.on(I.default.VIDEO_CHUNK_RECEIVED,F,h),f.on(I.default.BUFFER_CLEARED,Y,h))},addMediaInfos:function(t,e,n){if(v=v.concat(e),t===x.default.TEXT&&e[0].isFragmented&&!e[0].isEmbedded){y=n,h.buffered=(0,ms.default)(d).create(),w=r.getTracksFor(x.default.TEXT,u.id).filter((t=>t.isFragmented));const t=r.getCurrentTrackFor(x.default.TEXT,u.id);for(let e=0;e<w.length;e++)if(w[e]===t){U(e);break}}for(let t=0;t<e.length;t++)z(e[t])},resetMediaInfos:function(){v=[]},getStreamId:function(){return u.id},append:q,abort:function(){},addEmbeddedTrack:function(t){if(B&&t)if(t.id===x.default.CC1||t.id===x.default.CC3){for(let e=0;e<k.length;e++)if(k[e].id===t.id)return;k.push(t)}else p.warn("Embedded track "+t.id+" not supported!")},resetEmbedded:function(){f.off(I.default.VIDEO_CHUNK_RECEIVED,F,h),f.off(I.default.BUFFER_CLEARED,Y,h),o&&o.deleteAllTextTracks(),B=!1,k=[],D=[null,null],O=null,M=null},getConfig:function(){return{fragmentModel:y,fragmentedTracks:w,videoModel:i}},setCurrentFragmentedTrackIdx:U,remove:function(t,e){void 0===t&&t===e&&(t=h.buffered.start(0),e=h.buffered.end(h.buffered.length-1)),h.buffered.remove(t,e),o.deleteCuesFromTrackIdx(T,t,e)},reset:function(){j(),v=[],m=null}},p=(0,P.default)(d).getInstance().getLogger(h),m=tr(d).getInstance(),j(),h}Es.__dashjs_factory_name="TextSourceBuffer";var xs=k.default.getClassFactory(Es),Ss=n(7640);const Ts=["text","align","fontSize","id","isd","line","lineAlign","lineHeight","linePadding","position","positionAlign","region","size","snapToLines","vertical"];function Cs(t){const e=this.context,n=(0,C.default)(e).getInstance(),r=t.videoModel,i=t.streamInfo,o=t.settings;let a,s,l,u,c,d,f,h,p,m,g,v,y,b,_,w,A,E,S,T;function k(t){const e=t.kind,n=void 0!==t.id?t.id:t.lang,i=t.lang,o=t.isTTML,a=t.isEmbedded;return r.addTextTrack(e,n,i,o,a)}function O(t,e,n,r,i,o){let a=0,s=0;t/e>n/r?(s=e,a=s/r*n):(a=t,s=a/n*r);let l=0,u=0,c=0,d=0;return a/s>i?(d=s,c=s*i):(c=a,d=a/i),l=(t-c)/2,u=(e-d)/2,o?{x:l+.1*c,y:u+.1*d,w:.8*c,h:.8*d}:{x:l,y:u,w:c,h:d}}function M(t,e){const i=r.getClientWidth(),o=r.getClientHeight(),a=r.getVideoWidth(),s=r.getVideoHeight(),l=r.getVideoRelativeOffsetTop(),u=r.getVideoRelativeOffsetLeft();if(0!==a&&0!==s){let r=a/s,c=!1;t.isFromCEA608&&(r=3.5/3,c=!0);const d=O.call(this,i,o,a,s,r,c),v=d.w,y=d.h,w=d.x,E=d.y;if(v!=p||y!=m||w!=f||E!=h||e){if(f=w+u,h=E+l,p=v,m=y,g){const t=g.style;t&&(t.left=f+"px",t.top=h+"px",t.width=p+"px",t.height=m+"px",t.zIndex=b&&document[b]||_?A:null,n.trigger(R.default.CAPTION_CONTAINER_RESIZE))}const e=t.activeCues;if(e){const t=e.length;for(let n=0;n<t;++n){const t=e[n];t.scaleCue(t)}}}}}function L(t){const e=p,n=m;let r,i,o,a,s;if(t.cellResolution){const l=[e/t.cellResolution[0],n/t.cellResolution[1]];if(t.linePadding)for(r in t.linePadding)if(t.linePadding.hasOwnProperty(r)){i=(t.linePadding[r]*l[0]).toString();const e=document.getElementsByClassName("spanPadding");for(let t=0;t<e.length;t++)e[t].style.cssText=e[t].style.cssText.replace(/(padding-left\s*:\s*)[\d.,]+(?=\s*px)/gi,"$1"+i),e[t].style.cssText=e[t].style.cssText.replace(/(padding-right\s*:\s*)[\d.,]+(?=\s*px)/gi,"$1"+i)}if(t.fontSize){for(r in t.fontSize)if(t.fontSize.hasOwnProperty(r)){"%"===t.fontSize[r][0]?o=t.fontSize[r][1]/100:"c"===t.fontSize[r][0]&&(o=t.fontSize[r][1]),i=(o*l[1]).toString(),s="defaultFontSize"!==r?document.getElementsByClassName(r):document.getElementsByClassName("paragraph");for(let t=0;t<s.length;t++)s[t].style.cssText=s[t].style.cssText.replace(/(font-size\s*:\s*)[\d.,]+(?=\s*px)/gi,"$1"+i)}if(t.lineHeight)for(r in t.lineHeight)if(t.lineHeight.hasOwnProperty(r)){"%"===t.lineHeight[r][0]?a=t.lineHeight[r][1]/100:"c"===t.fontSize[r][0]&&(a=t.lineHeight[r][1]),i=(a*l[1]).toString(),s=document.getElementsByClassName(r);for(let t=0;t<s.length;t++)s[t].style.cssText=s[t].style.cssText.replace(/(line-height\s*:\s*)[\d.,]+(?=\s*px)/gi,"$1"+i)}}}if(t.isd){let e=document.getElementById(t.cueID);e&&g.removeChild(e),N(t)}}function D(t,e){const n=/^(urn:)(mpeg:[a-z0-9][a-z0-9-]{0,31}:)(subs:)([0-9]+)$/,r=/^#(.*)$/;if(n.test(e)){const r=n.exec(e),i=parseInt(r[4],10)-1;return"data:image/png;base64,"+btoa(t.images[i])}if(r.test(e)){const n=r.exec(e)[1];return"data:image/png;base64,"+t.embeddedImages[n]}return e}function N(t){if(g){at.call(this);const e=document.createElement("div");g.appendChild(e),w=(0,Ss.renderHTML)(t.isd,e,(function(e){return D(t,e)}),g.clientHeight,g.clientWidth,o.get().streaming.text.imsc.displayForcedOnlyMode,(function(t){s.info("renderCaption :",t)}),w,o.get().streaming.text.imsc.enableRollUp),e.id=t.cueID,n.trigger(R.default.CAPTION_RENDERED,{captionDiv:e,currentTrackIdx:d})}}function B(t,e){return!!e&&e.endTime>=t.startTime}function j(t,e){return!!o.get().streaming.text.extendSegmentedCues&&!!function(t,e,n){for(let r=0;r<n.length;r++){const i=n[r];if(JSON.stringify(t[i])!==JSON.stringify(e[i]))return!1}return!0}(e,t,Ts)&&(e.endTime=Math.max(e.endTime,t.endTime),!0)}function z(t,e){e&&e.forEach((e=>{e.kind&&"image"===e.kind&&(e.src=D(t,e.src)),z(t,e.contents)}))}function F(t,e,n){const i=X(t),a=o.get().streaming.text.dispatchForManualRendering;if(i&&Array.isArray(n)&&0!==n.length)for(let l=0;l<n.length;l++){let u=null;const c=n[l];i.cellResolution=c.cellResolution,i.isFromCEA608=c.isFromCEA608,isNaN(c.start)||isNaN(c.end)||(a?u=U(c,e):Q(c)&&g?u=H(c,e,i):c.data&&(u=V(c,e,i)));try{if(u){if(!J(i,u))if(o.get().streaming.text.webvtt.customRenderingEnabled)i.manualCueList||(i.manualCueList=[]),i.manualCueList.push(u);else{let t;i.cues&&0!==i.cues.length&&(t=i.cues[i.cues.length-1]),B(u,t)?j(u,t)||(t.isd&&(t.onexit=function(){}),i.mode!==x.default.TEXT_DISABLED&&i.addCue(u)):i.mode!==x.default.TEXT_DISABLED&&i.addCue(u)}const t=o.get().streaming.buffer.bufferToKeep;et(i,0,r.getTime()-t)}else s.error("Impossible to display subtitles. You might have missed setting a TTML rendering div via player.attachTTMLRenderingDiv(TTMLRenderingDiv)")}catch(t){throw nt(i),i.addCue(u),t}}}function U(t,e){let n=W(t,e);return n.onenter=function(){Q(t)&&T&&T.cueID!==n.cueID&&G(T),delete n.type,T=n,q(n)},n.onexit=function(){G(n),T=null},n}function q(t){n.trigger(R.default.CUE_ENTER,t)}function G(t){n.trigger(R.default.CUE_EXIT,{cueID:t.cueID})}function H(t,e,r){const i=this;let o=W(t,e);return g.style.left=f+"px",g.style.top=h+"px",g.style.width=p+"px",g.style.height=m+"px",o.onenter=function(){r.mode===x.default.TEXT_SHOWING&&(this.isd?(S?requestAnimationFrame((()=>N(this))):N(this),s.debug("Cue enter id:"+this.cueID)):(g.appendChild(this.cueHTMLElement),L.call(i,this),n.trigger(R.default.CAPTION_RENDERED,{captionDiv:this.cueHTMLElement,currentTrackIdx:d})))},o.onexit=function(){if(g){const t=g.childNodes;for(let e=0;e<t.length;++e)t[e].id===this.cueID&&(s.debug("Cue exit id:"+t[e].id),g.removeChild(t[e]),--e)}},o}function V(t,e,r){let i=W(t,e);if(i.isActive=!1,t.styles)try{void 0!==t.styles.align&&"align"in i&&(i.align=t.styles.align),void 0!==t.styles.line&&"line"in i&&(i.line=t.styles.line),void 0!==t.styles.snapToLines&&"snapToLines"in i&&(i.snapToLines=t.styles.snapToLines),void 0!==t.styles.position&&"position"in i&&(i.position=t.styles.position),void 0!==t.styles.size&&"size"in i&&(i.size=t.styles.size)}catch(t){s.error(t)}return i.onenter=function(){r.mode===x.default.TEXT_SHOWING&&n.trigger(R.default.CAPTION_RENDERED,{currentTrackIdx:d})},i}function Q(t){return"html"===t.type}function W(t,e){return Q(t)?function(t,e){let n=new l(t.start+e,t.end+e,"");return n.cueHTMLElement=t.cueHTMLElement,n.isd=t.isd,n.images=t.images,n.embeddedImages=t.embeddedImages,n.cueID=t.cueID,n.scaleCue=L.bind(self),n.cellResolution=t.cellResolution,n.lineHeight=t.lineHeight,n.linePadding=t.linePadding,n.fontSize=t.fontSize,n.isd&&z(n,n.isd.contents),n}(t,e):function(t,e){let n=new l(t.start-e,t.end-e,t.data);return n.cueID=`${n.startTime}_${n.endTime}`,n}(t,e)}function Y(t){if(v){const e=v.childNodes;for(let n=0;n<e.length;++n)e[n].id===t.cueID&&(v.removeChild(e[n]),--n)}}function K(){const t=r.getTextTracks(),e=[];for(const n of t)n.manualMode===x.default.TEXT_SHOWING&&e.push(n);return e}function X(t){return t>=0&&u[t]?r.getTextTrack(u[t].kind,u[t].id,u[t].lang,u[t].isTTML,u[t].isEmbedded):null}function $(t){if(t===d)return;d=t;const e=X(d);Z.call(this,e),y&&(clearInterval(y),y=null),e&&"html"===e.renderingType&&(M.call(this,e,!0),window.ResizeObserver?(E=new window.ResizeObserver((()=>{M.call(this,e,!0)})),E.observe(r.getElement())):y=setInterval(M.bind(this,e),500))}function Z(t){at.call(this),t&&"html"===t.renderingType?it.call(this):ot.call(this)}function J(t,e){if(!t.cues)return!1;for(let n=0;n<t.cues.length;n++)if(t.cues[n].startTime===e.startTime&&t.cues[n].endTime===e.endTime)return!0;return!1}function tt(t,e,n){let r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];return!!t&&(isNaN(e)||(r?t.startTime:t.endTime)>=e)&&(isNaN(n)||(r?t.endTime:t.startTime)<=n)}function et(t,e,n){if(!(n<e)&&t&&(t.cues||t.manualCueList)){const r=t.cues&&t.cues.length>0?"native":"custom",i="native"===r?t.cues:t.manualCueList;if(!i||0===i.length)return;for(let o=i.length-1;o>=0;o--)tt(i[o],e,n,!0)&&!rt(i[o])&&("native"===r?t.removeCue(i[o]):(Y(i[o]),delete t.manualCueList[o]))}}function nt(t,e,n){let r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];if(t&&(t.cues||t.manualCueList)){const i=t.cues&&t.cues.length>0?"native":"custom",o="native"===i?t.cues:t.manualCueList;if(!o||0===o.length)return;for(let a=o.length-1;a>=0;a--)tt(o[a],e,n,r)&&("native"===i?(o[a].onexit&&o[a].onexit(),t.removeCue(o[a])):(Y(o[a]),delete t.manualCueList[a]))}}function rt(t){const e=r.getTime();return e>=t.startTime&&e<=t.endTime}function it(){let t=document.getElementById("native-cue-style");if(t)return;t=document.createElement("style"),t.id="native-cue-style",document.head.appendChild(t);const e=t.sheet,n=r.getElement();try{n&&(n.id?e.insertRule("#"+n.id+"::cue {background: transparent}",0):0!==n.classList.length?e.insertRule("."+n.className+"::cue {background: transparent}",0):e.insertRule("video::cue {background: transparent}",0))}catch(t){s.info(""+t.message)}}function ot(){const t=document.getElementById("native-cue-style");t&&document.head.removeChild(t)}function at(){if(g)for(;g.firstChild;)g.removeChild(g.firstChild)}return a={addCaptions:F,addTextTrackInfo:function(t){u.push(t)},createTracks:function(){u.sort((function(t,e){return t.index-e.index})),g=r.getTTMLRenderingDiv(),v=r.getVttRenderingDiv();let t=-1;for(let e=0;e<u.length;e++){const r=k(u[e]);c.push(r),u[e].defaultTrack&&(r.default=!0,t=e);const i=X(e);i&&(i.mode=x.default.TEXT_SHOWING,g&&(u[e].isTTML||u[e].isEmbedded)?i.renderingType="html":i.renderingType="default"),F(e,0,u[e].captionData),n.trigger(R.default.TEXT_TRACK_ADDED)}if($.call(this,t),t>=0){let e=function(){const r=X(t);r&&"html"===r.renderingType&&M.call(this,r,!0),n.off(R.default.PLAYBACK_METADATA_LOADED,e,this)};n.on(R.default.PLAYBACK_METADATA_LOADED,e,this);for(let e=0;e<u.length;e++){const n=X(e);if(n){const r=o.get().streaming.text.dispatchForManualRendering;n.mode=e!==t||r?x.default.TEXT_HIDDEN:x.default.TEXT_SHOWING,n.manualMode=e===t?x.default.TEXT_SHOWING:x.default.TEXT_HIDDEN}}}n.trigger(I.default.TEXT_TRACKS_QUEUE_INITIALIZED,{index:d,tracks:u,streamId:i.id})},deleteAllTextTracks:function(){const t=c?c.length:0;for(let e=0;e<t;e++){const t=X(e);t&&nt.call(this,t,i.start,i.start+i.duration,!1)}c=[],u=[],y&&(clearInterval(y),y=null),E&&r&&(E.unobserve(r.getElement()),E=null),d=-1,at.call(this)},deleteCuesFromTrackIdx:function(t,e,n){const r=X(t);r&&nt(r,e,n)},disableManualTracks:function(){const t=K();if(t&&t.length>0){const e=t[0].manualCueList;e&&e.length>0&&e.forEach((t=>{if(t.isActive)if(t.isActive=!1,o.get().streaming.text.dispatchForManualRendering)G(t);else if(v){const e=v.childNodes;for(let n=0;n<e.length;++n)e[n].id===t.cueID&&(v.removeChild(e[n]),--n)}}))}},getCurrentTrackIdx:function(){return d},getCurrentTextTrackInfo:function(){return u[d]},getStreamId:function(){return i.id},getTextTrackInfos:function(){return u},getTrackIdxForId:function(t){let e=-1;for(let n=0;n<u.length;n++)if(u[n].id===t){e=n;break}return e},initialize:function(){"undefined"!=typeof window&&"undefined"!=typeof navigator&&(l=window.VTTCue||window.TextTrackCue,u=[],c=[],d=-1,f=0,h=0,p=0,m=0,g=null,v=null,y=null,_=!1,A=2147483647,w=null,S="requestAnimationFrame"in window,void 0!==document.fullscreenElement?b="fullscreenElement":void 0!==document.webkitIsFullScreen?b="webkitIsFullScreen":document.msFullscreenElement?b="msFullscreenElement":document.mozFullScreen&&(b="mozFullScreen"))},manualCueProcessing:function(t){const e=K();if(e&&e.length>0){const n=e[0].manualCueList;n&&n.length>0&&n.forEach((e=>{e.startTime<=t&&e.endTime>=t&&!e.isActive?(e.isActive=!0,o.get().streaming.text.dispatchForManualRendering?q(e):WebVTT.processCues(window,[e],v,e.cueID)):e.isActive&&(e.startTime>t||e.endTime<t)&&(e.isActive=!1,o.get().streaming.text.dispatchForManualRendering?G(e):Y(e))}))}},setCurrentTrackIdx:$,setModeForTrackIdx:function(t,e){const n=X(t);n&&n.mode!==e&&(n.mode=e),n&&n.manualMode!==e&&(n.manualMode=e)}},s=(0,P.default)(e).getInstance().getLogger(a),a}Cs.__dashjs_factory_name="TextTracks";var Is=k.default.getClassFactory(Cs);function ks(){const t=this.context;let e,n,r,i,o,a;function s(t){const e=t.split(":"),n=e.length-1;return t=60*parseInt(e[n-1],10)+parseFloat(e[n]),2===n&&(t+=3600*parseInt(e[0],10)),t}function l(t){const e=t.split(i),n=e[1].split(a);return n.shift(),e[1]=n[0],n.shift(),{cuePoints:e,styles:u(n)}}function u(t){const e={};return t.forEach((function(t){if(t.split(/:/).length>1){let n=t.split(/:/)[1],r=!1;n&&-1!=n.search(/%/)&&(r=!0,n=parseInt(n.replace(/%/,""),10)),(t.match(/align/)||t.match(/A/))&&(e.align=n),(t.match(/line/)||t.match(/L/))&&(e.line="auto"===n?n:parseInt(n,10),r&&(e.snapToLines=!1)),(t.match(/position/)||t.match(/P/))&&(e.position=n),(t.match(/size/)||t.match(/S/))&&(e.size=n)}})),e}function c(t,e){let n,r=e,o="",a="";for(;""!==t[r]&&r<t.length;)r++;if(n=r-e,n>1)for(let r=0;r<n;r++){if(a=t[e+r],a.match(i)){o="";break}o+=a,r!==n-1&&(o+="\n")}else a=t[e],a.match(i)||(o=a);return o}return e={parse:function(t){const e=[];let a,u;if(!t)return e;a=(t=t.split(r)).length,u=-1;for(let r=0;r<a;r++){let a=t[r];if(a.length>0&&"WEBVTT"!==a&&a.match(i)){const i=l(a),d=i.cuePoints,f=i.styles,h=c(t,r+1),p=s(d[0].replace(o,"")),m=s(d[1].replace(o,""));!isNaN(p)&&!isNaN(m)&&p>=u&&m>p?""!==h?(u=p,e.push({start:p,end:m,data:h,styles:f})):n.error("Skipping cue due to empty/malformed cue text"):n.error("Skipping cue due to incorrect cue timing")}}return e},getCaptionStyles:u},n=(0,P.default)(t).getInstance().getLogger(e),r=/(?:\r\n|\r|\n)/gm,i=/-->/,o=/(^[\s]+|[\s]+$)/g,a=/\s\b/g,e}ks.__dashjs_factory_name="VTTParser";var Ps=k.default.getSingletonFactory(ks);function Rs(){let t,e;return t={parse:function(t){let n=[];return e.oncue=function(t){t.start=t.startTime,t.end=t.endTime,t.data=t.text,t.styles={align:t.align,line:t.line,position:t.position,size:t.size},n.push(t)},e.parse(t),n}},function(){try{window&&window.WebVTT&&window.WebVTT.Parser&&(e=new window.WebVTT.Parser(window,window.vttjs,window.WebVTT.StringDecoder()))}catch(t){}}(),t}Rs.__dashjs_factory_name="VttCustomRenderingParser";var Os=k.default.getSingletonFactory(Rs);function Ms(){const t=this.context,e=(0,C.default)(t).getInstance();let n,r,i=0;function o(){const t="cue_TTML_"+i;return i++,t}return n={parse:function(t,n,i,a,s){let l="";const u=[];let c,d,f;const h={},p={};let m="",g="",v={onOpenTag:function(t,n,i){if(i[" imagetype"]&&!i[" imageType"]&&(e.trigger(R.default.CONFORMANCE_VIOLATION,{level:Sr.LEVELS.ERROR,event:Sr.EVENTS.NON_COMPLIANT_SMPTE_IMAGE_ATTRIBUTE}),i[" imageType"]=i[" imagetype"]),"image"===n&&("http://www.smpte-ra.org/schemas/2052-1/2010/smpte-tt"===t||"http://www.smpte-ra.org/schemas/2052-1/2013/smpte-tt"===t)){if(!i[" imageType"]||"PNG"!==i[" imageType"].value)return void r.warn("smpte-tt imageType != PNG. Discarded");m=i["http://www.w3.org/XML/1998/namespace id"].value}},onCloseTag:function(){m&&(p[m]=g.trim()),g="",m=""},onText:function(t){m&&(g+=t)}};if(!t)throw l="no ttml data to parse",new Error(l);h.data=t,e.trigger(I.default.TTML_TO_PARSE,h);let y=(0,Ss.fromXML)(h.data,(function(t){l=t}),v);e.trigger(I.default.TTML_PARSED,{ttmlString:h.data,ttmlDoc:y});const b=y.getMediaTimeEvents();for(f=0;f<b.length;f++){let t=(0,Ss.generateISD)(y,b[f],(function(t){l=t}));t.contents.some((t=>t.contents.length))&&(c=b[f]+n,d=b[f+1]+n,c<d&&u.push({start:c,end:d,type:"html",cueID:o(),isd:t,images:s,embeddedImages:p}))}if(""!==l)throw r.error(l),new Error(l);return u}},r=(0,P.default)(t).getInstance().getLogger(n),n}Ms.__dashjs_factory_name="TTMLParser";var Ls=k.default.getSingletonFactory(Ms);function Ds(t){let e=this.context;const n=(0,C.default)(e).getInstance(),r=Tt(e).getInstance(),i=t.adapter,o=t.baseURLController;let a,s,l;function u(t,e){let n,a,s=!1;if(o.resolve()){const e=i.getVoRepresentations(t);e&&e.length>0&&(n=o.resolve(e[0].path).url)}const u=t.essentialProperties.filter((t=>t.schemeIdUri&&t.schemeIdUri===x.default.FONT_DOWNLOAD_DVB_SCHEME)),c=t.supplementalProperties.filter((t=>t.schemeIdUri&&t.schemeIdUri===x.default.FONT_DOWNLOAD_DVB_SCHEME));u.length>0?(s=!0,a=u):a=c,a.forEach((i=>{if(function(t){return!(!(t.value&&1===parseInt(t.value)&&t.dvbUrl&&t.dvbUrl.length>0&&t.dvbFontFamily&&t.dvbFontFamily.length>0&&t.dvbMimeType)||t.dvbMimeType!==x.default.OFF_MIMETYPE&&t.dvbMimeType!==x.default.WOFF_MIMETYPE)}(i)){let u=(o=i.dvbUrl,a=n,r.isPathAbsolute(o)?o:r.isRelative(o)?a?r.resolve(o,a):r.resolve(o):o);l.push({fontFamily:i.dvbFontFamily,url:u,mimeType:i.dvbMimeType,trackId:t.id,streamId:e,isEssential:s,status:"unloaded",fontFace:new FontFace(i.dvbFontFamily,`url(${u})`,{display:"swap"})})}var o,a}))}function c(t,e){const n=l[t];l[t]={...n,status:e}}function d(){l=[]}return a={addFontsFromTracks:function(t,e){if(t&&Array.isArray(t)&&e)for(let n=0;n<t.length;n++)u(t[n],e)},downloadFonts:function(){for(let t=0;t<l.length;t++){let e=l[t];document.fonts.add(e.fontFace),n.trigger(R.default.DVB_FONT_DOWNLOAD_ADDED,e),e.fontFace.load().then((()=>{c(t,"loaded"),n.trigger(R.default.DVB_FONT_DOWNLOAD_COMPLETE,e)}),(r=>{c(t,"error"),s.debug("Font download error: ",r),n.trigger(R.default.DVB_FONT_DOWNLOAD_FAILED,e)}))}},getFonts:function(){return l},getFontsForTrackId:function(t){return l.filter((e=>e.trackId&&e.trackId===t))},reset:function(){!function(){for(const t of l){let e=document.fonts.delete(t.fontFace);s.debug(`Removal of fontFamily: ${t.fontFamily} was ${e?"successful":"unsuccessful"}`)}}(),d()}},s=(0,P.default)(e).getInstance().getLogger(a),d(),a}Ds.__dashjs_factory_name="DVBFonts";var Ns=k.default.getClassFactory(Ds);function Bs(t){let e=this.context;const n=t.adapter,r=t.errHandler,i=t.manifestModel,o=t.mediaController,a=t.baseURLController,s=t.videoModel,l=t.settings;let u,c,d,f,h,p,m,g,v,y,b,_,w,A;function E(t){if(A.error(`Could not download ${t.isEssential?"an essential":"a"} font - fontFamily: ${t.fontFamily}, url: ${t.url}`),t.isEssential){let e=f[t.streamId].getTrackIdxForId(t.trackId);f[t.streamId].setModeForTrackIdx(e,x.default.TEXT_DISABLED)}}function T(t){if(A.debug(`Successfully downloaded ${t.isEssential?"an essential":"a"} font - fontFamily: ${t.fontFamily}, url: ${t.url}`),t.isEssential){let e=f[t.streamId].getTrackIdxForId(t.trackId);e===f[t.streamId].getCurrentTrackIdx()?f[t.streamId].setModeForTrackIdx(e,x.default.TEXT_SHOWING):f[t.streamId].setModeForTrackIdx(e,x.default.TEXT_HIDDEN)}}function k(t){let e=t.tracks,n=t.index;const r=t.streamId;if(!1===l.get().streaming.text.defaultEnabled&&!D()||_)N(r,-1);else{const t=o.getCurrentTrackFor(x.default.TEXT,r);if(t){const i={lang:t.lang,role:t.roles[0],index:t.index,codec:t.codec,accessibility:t.accessibility[0]};e.some(((t,e)=>{if(o.matchSettings(i,t))return N(r,e),n=e,!0}))}v=!1}c[r].lastEnabledIndex=n,g.trigger(R.default.TEXT_TRACKS_ADDED,{enabled:D(),index:n,tracks:e,streamId:r}),b=!0,w.addFontsFromTracks(e,r),w.getFonts().forEach((t=>{if(t.isEssential){let e=f[t.streamId].getTrackIdxForId(t.trackId);f[t.streamId].setModeForTrackIdx(e,x.default.TEXT_DISABLED)}})),w.downloadFonts()}function O(t){try{const e=t.streamId;if(!f[e]||isNaN(t.time))return;f[e].manualCueProcessing(t.time)}catch(t){}}function M(t){try{const e=t.streamId;if(!f[e])return;f[e].disableManualTracks()}catch(t){}}function L(t){try{if(!t||!t.mediaType||t.mediaType!==x.default.AUDIO||!t.currentMediaInfo)return;const e=f[t.streamId].getCurrentTextTrackInfo();let n=NaN;v?n=B(t.streamId):j(e)&&t.currentMediaInfo.lang&&t.currentMediaInfo.lang!==e.lang&&(n=B(t.streamId),isNaN(n)&&(n=-1)),isNaN(n)||N(t.streamId,n)}catch(t){A.error(t)}}function D(){let t=!0;return v&&!y&&(t=!1),t}function N(t,e){v=-1===e,v&&o&&o.saveTextSettingsDisabled();let n=z(t);if(n===e||!f[t])return;f[t].disableManualTracks();let r=f[t].getCurrentTextTrackInfo(),i=r?s.getTextTrack(r.kind,r.id,r.lang,r.isTTML,r.isEmbedded):null;i&&i.mode!==x.default.TEXT_DISABLED&&f[t].setModeForTrackIdx(n,x.default.TEXT_HIDDEN),f[t].setCurrentTrackIdx(e),r=f[t].getCurrentTextTrackInfo();const a=l.get().streaming.text.dispatchForManualRendering;if(r&&!a&&r.mode!==x.default.TEXT_DISABLED&&f[t].setModeForTrackIdx(e,x.default.TEXT_SHOWING),r&&r.isFragmented&&!r.isEmbedded)!function(t,e,n){if(!d[t])return;let r=d[t].getConfig().fragmentedTracks;for(let i=0;i<r.length;i++){let a=r[i];if(e.lang===a.lang&&(a.id?e.id===a.id:e.index===a.index)){let e=o.getCurrentTrackFor(x.default.TEXT,t);(a.id?e.id!==a.id:e.index!==a.index)?(f[t].deleteCuesFromTrackIdx(n),d[t].setCurrentFragmentedTrackIdx(i)):-1===n&&g.trigger(I.default.SET_FRAGMENTED_TEXT_AFTER_DISABLED,{},{streamId:t,mediaType:x.default.TEXT})}}}(t,r,n);else if(r&&!r.isFragmented)!function(t,e){g.trigger(I.default.SET_NON_FRAGMENTED_TEXT,{currentTrackInfo:e},{streamId:t,mediaType:x.default.TEXT})}(t,r);else if(!r&&v){const e=B(t);return void(isNaN(e)||N(t,e))}o.setTrack(r)}function B(t){const e=function(t){return f[t].getTextTrackInfos().filter(((t,e)=>(t._indexToSelect=e,!!(t&&t.roles&&t.roles.length>0)&&j(t))))}(t);if(!e||e.length<=0)return NaN;const n=o.getCurrentTrackFor(x.default.AUDIO,t);if(!n)return NaN;const r=e.find((t=>n.lang===t.lang));return r?r._indexToSelect:NaN}function j(t){return!(!t||!t.roles||0===t.roles.length)&&t.roles.some((t=>t.schemeIdUri===x.default.DASH_ROLE_SCHEME_ID&&t.value===S.default.FORCED_SUBTITLE))}function z(t){return f[t].getCurrentTrackIdx()}function F(){d={},f={},c={},v=!0,b=!1,_=!1}return u={addEmbeddedTrack:function(t,e){const n=t.id;d[n]&&d[n].addEmbeddedTrack(e)},addMediaInfosToBuffer:function(t,e,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;const i=t.id;d[i]&&d[i].addMediaInfos(e,n,r)},createTracks:function(t){const e=t.id;f[e]&&f[e].createTracks()},deactivateStream:function(t){if(!t)return;const e=t.id;d[e]&&d[e].resetMediaInfos(),f[e]&&f[e].deleteAllTextTracks()},enableForcedTextStreaming:function(t){return(0,_t.checkParameterType)(t,"boolean"),y=t,!0},enableText:function(t,e){return(0,_t.checkParameterType)(e,"boolean"),D()!==e&&(e&&N(t,c[t].lastEnabledIndex),e||(c[t].lastEnabledIndex=z(t),b?N(t,-1):_=!0)),!0},getAllTracksAreDisabled:function(){return v},getCurrentTrackIdx:z,getTextSourceBuffer:function(t){const e=t.id;if(d&&d[e])return d[e]},initialize:function(){w=Ns(e).create({adapter:n,baseURLController:a}),g.on(I.default.TEXT_TRACKS_QUEUE_INITIALIZED,k,u),g.on(I.default.DVB_FONT_DOWNLOAD_FAILED,E,u),g.on(I.default.DVB_FONT_DOWNLOAD_COMPLETE,T,u),g.on(I.default.MEDIAINFO_UPDATED,L,u),l.get().streaming.text.webvtt.customRenderingEnabled&&(g.on(I.default.PLAYBACK_TIME_UPDATED,O,u),g.on(I.default.PLAYBACK_SEEKING,M,u))},initializeForStream:function(t){const a=t.id,u=Is(e).create({videoModel:s,settings:l,streamInfo:t});u.initialize(),f[a]=u;const g=xs(e).create({errHandler:r,adapter:n,dvbFonts:w,manifestModel:i,mediaController:o,videoModel:s,textTracks:u,vttParser:h,vttCustomRenderingParser:p,ttmlParser:m,streamInfo:t,settings:l});g.initialize(),d[a]=g,c[a]={},c[a].lastEnabledIndex=-1},isTextEnabled:D,reset:function(){Object.keys(d).forEach((t=>{d[t].resetEmbedded(),d[t].reset()})),w.reset(),F(),g.off(I.default.TEXT_TRACKS_QUEUE_INITIALIZED,k,u),g.off(I.default.DVB_FONT_DOWNLOAD_FAILED,E,u),g.off(I.default.DVB_FONT_DOWNLOAD_COMPLETE,T,u),g.off(I.default.MEDIAINFO_UPDATED,L,u),l.get().streaming.text.webvtt.customRenderingEnabled&&(g.off(I.default.PLAYBACK_TIME_UPDATED,O,u),g.off(I.default.PLAYBACK_SEEKING,M,u))},setTextTrack:N,clearDataForStream:function(t){d[t]&&(d[t].resetEmbedded(),d[t].reset(),delete d[t]),f[t]&&(f[t].deleteAllTextTracks(),delete f[t]),c[t]&&delete c[t]}},y=!1,b=!1,_=!1,h=Ps(e).getInstance(),p=Os(e).getInstance(),m=Ls(e).getInstance(),g=(0,C.default)(e).getInstance(),A=(0,P.default)(e).getInstance().getLogger(u),F(),u}Bs.__dashjs_factory_name="TextController";var js=k.default.getClassFactory(Bs);function zs(t){t=t||{};const e=this.context,n=(0,P.default)(e).getInstance(),r=t.settings,i=(0,C.default)(e).getInstance();let o,a,s,l,u,c;function d(){return navigator&&navigator.connection&&!isNaN(navigator.connection.downlink)&&navigator.connection.downlink>0?1e3*navigator.connection.downlink:NaN}function f(t,e,n,r){const i=Math.pow(.5,n/r.fast);t.fastEstimate=(1-i)*e+i*t.fastEstimate;const o=Math.pow(.5,n/r.slow);t.slowEstimate=(1-o)*e+o*t.slowEstimate,t.totalWeight+=n}function h(){o={},a={},s={},l={}}const p={addEntry:function(t,e){try{if(!(t&&e&&e.trace&&e.trace.length))return;!function(t){o[t]=o[t]||[],a[t]=a[t]||[],s[t]=s[t]||{fastEstimate:0,slowEstimate:0,totalWeight:0},l[t]=l[t]||{fastEstimate:0,slowEstimate:0,totalWeight:0}}(t);const n=e.tresponse.getTime()-e.trequest.getTime()||1;let h=function(t,e){return t._fileLoaderType&&t._fileLoaderType===x.default.FILE_LOADER_TYPES.FETCH?function(t){const e=t.trace.reduce(((t,e)=>t+e.b[0]),0),n=t.trace.reduce(((t,e)=>t+e.d),0);let i=NaN;return r.get().streaming.abr.throughput.useNetworkInformationApi.fetch&&(i=d()),isNaN(i)&&(i=Math.round(8*e/n)),{downloadedBytes:e,value:i,downloadTimeInMs:n}}(t):function(t,e){let n=NaN,i=NaN,o=!1;if(r.get().streaming.abr.throughput.useResourceTimingApi&&t._resourceTimingValues)n=t._resourceTimingValues.transferSize,i=t._resourceTimingValues.responseEnd-t._resourceTimingValues.responseStart,o=!0;else{if(t.trace.length<=1)return{throughput:NaN,downloadTimeInMs:NaN};n=t.trace.reduce(((t,e)=>t+e.b[0]),0)-t.trace[0].b[0],i=Math.max(t.trace.reduce(((t,e)=>t+e.d),0)-t.trace[0].d,1)}let a=NaN;if(!o&&r.get().streaming.abr.throughput.useNetworkInformationApi.xhr&&(a=d()),isNaN(a)){const t=r.get().streaming.abr.throughput.useDeadTimeLatency?i:i+e;a=Math.round(8*n/t)}return{downloadedBytes:n,value:a,downloadTimeInMs:i}}(t,e)}(e,n);if(h.latencyInMs=n,isNaN(h.value)||!isFinite(h.value))return;if(e.cmsd){const t=e.cmsd.dynamic&&e.cmsd.dynamic.etp?e.cmsd.dynamic.etp:null;if(t){const e=r.get().streaming.cmsd.abr.etpWeightRatio;e>0&&e<=1&&(h.value=h.value*(1-e)+t*e)}}if(function(t,e,n){return r.get().streaming.abr.throughput.useResourceTimingApi&&n._resourceTimingValues?0===n._resourceTimingValues.transferSize&&n._resourceTimingValues.decodedBodySize>0:!isNaN(e)&&(t===x.default.VIDEO?e<r.get().streaming.cacheLoadThresholds[x.default.VIDEO]:t===x.default.AUDIO?e<r.get().streaming.cacheLoadThresholds[x.default.AUDIO]:void 0)}(t,e._tfinish.getTime()-e.trequest.getTime(),e))return void c.debug(`${t} Assuming segment ${e.url} came from cache, ignoring it for throughput calculation`);c.debug(`Added throughput entry for ${t}: ${h.value} kbit/s`),h.serviceLocation=e._serviceLocation,o[t].push(h),a[t].push({value:n}),function(t){o[t].length>r.get().streaming.abr.throughput.sampleSettings.maxMeasurementsToKeep&&o[t].shift(),a[t].length>r.get().streaming.abr.throughput.sampleSettings.maxMeasurementsToKeep&&a[t].shift()}(t),i.trigger(R.default.THROUGHPUT_MEASUREMENT_STORED,{throughputValues:h}),e.type!==L.HTTPRequest.MPD_TYPE&&(f(s[t],h.value,r.get().streaming.abr.throughput.ewma.weightDownloadTimeMultiplicationFactor*h.downloadTimeInMs,u.bandwidthHalfLife),f(l[t],n,1,u.latencyHalfLife))}catch(t){c.error(t)}},getThroughputDict:function(t){return t?o[t]:o},getEwmaThroughputDict:function(t){return t?s[t]:s},getEwmaLatencyDict:function(t){return t?l[t]:l},getEwmaHalfLife:function(){return u},getLatencyDict:function(t){return t?a[t]:a},reset:h};return c=n.getLogger(p),u={bandwidthHalfLife:{fast:r.get().streaming.abr.throughput.ewma.throughputFastHalfLifeSeconds,slow:r.get().streaming.abr.throughput.ewma.throughputSlowHalfLifeSeconds},latencyHalfLife:{fast:r.get().streaming.abr.throughput.ewma.latencyFastHalfLifeCount,slow:r.get().streaming.abr.throughput.ewma.latencySlowHalfLifeCount}},h(),p}zs.__dashjs_factory_name="ThroughputModel";var Fs=k.default.getClassFactory(zs);function Us(){const t=this.context,e=(0,C.default)(t).getInstance();let n,r,i;function o(){performance.clearResourceTimings()}function a(t){t.metric!==T.HTTP_REQUEST||!t.value||t.value.type!==L.HTTPRequest.MPD_TYPE&&(t.value.type!==L.HTTPRequest.MEDIA_SEGMENT_TYPE||t.mediaType!==x.default.AUDIO&&t.mediaType!==x.default.VIDEO)||n.addEntry(t.mediaType,t.value)}function s(t,e){let o,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:NaN,v=null,y=n.getEwmaHalfLife(),b=null,_=!0;switch(a||(a=i.get().streaming.abr.throughput.averageCalculationMode),t){case x.default.THROUGHPUT_TYPES.BANDWIDTH:v=a===x.default.THROUGHPUT_CALCULATION_MODES.EWMA?n.getEwmaThroughputDict(e):n.getThroughputDict(e),b=y.bandwidthHalfLife,_=!0,s=isNaN(s)?r.getIsDynamic()?i.get().streaming.abr.throughput.sampleSettings.live:i.get().streaming.abr.throughput.sampleSettings.vod:s;break;case x.default.THROUGHPUT_TYPES.LATENCY:v=a===x.default.THROUGHPUT_CALCULATION_MODES.EWMA?n.getEwmaLatencyDict(e):n.getLatencyDict(e),b=y.latencyHalfLife,_=!1,s=isNaN(s)?i.get().streaming.abr.throughput.sampleSettings.averageLatencySampleAmount:s}if(!v||0===v.length)return NaN;switch(a){case x.default.THROUGHPUT_CALCULATION_MODES.ARITHMETIC_MEAN:return o=l(v,s,t),u(v,o);case x.default.THROUGHPUT_CALCULATION_MODES.BYTE_SIZE_WEIGHTED_ARITHMETIC_MEAN:return o=l(v,s,t),c(v,o);case x.default.THROUGHPUT_CALCULATION_MODES.DATE_WEIGHTED_ARITHMETIC_MEAN:return o=l(v,s,t),d(v,o);case x.default.THROUGHPUT_CALCULATION_MODES.HARMONIC_MEAN:return o=l(v,s,t),f(v,o);case x.default.THROUGHPUT_CALCULATION_MODES.BYTE_SIZE_WEIGHTED_HARMONIC_MEAN:return o=l(v,s,t),h(v,o);case x.default.THROUGHPUT_CALCULATION_MODES.DATE_WEIGHTED_HARMONIC_MEAN:return o=l(v,s,t),p(v,o);case x.default.THROUGHPUT_CALCULATION_MODES.EWMA:return m(v,b,_);case x.default.THROUGHPUT_CALCULATION_MODES.ZLEMA:return o=l(v,s,t),g(v,o)}}function l(t,e,n){if(t){if(e>=t.length)e=t.length;else if(n===x.default.THROUGHPUT_TYPES.BANDWIDTH&&i.get().streaming.abr.throughput.sampleSettings.enableSampleSizeAdjustment)for(let n=1;n<e;++n){const r=t[t.length-n].value/t[t.length-n-1].value;if((r>=i.get().streaming.abr.throughput.sampleSettings.increaseScale||r<=i.get().streaming.abr.throughput.sampleSettings.decreaseScale)&&(e+=1)===t.length)break}}else e=0;return e}function u(t,e){let n=t;return 0!==e&&n&&0!==n.length?(n=n.slice(-e),n.reduce(((t,e)=>t+e.value),0)/n.length):NaN}function c(t,e){let n=t;if(0===e||!n||0===n.length)return NaN;n=n.slice(-e);let r=0;return n.reduce(((t,e)=>{let n=Math.sqrt(e.downloadedBytes);return r+=n,t+e.value*n}),0)/r}function d(t,e){let n=t;if(0===e||!n||0===n.length)return NaN;n=n.slice(-e);let r=0;return n.reduce(((t,e,n)=>{let i=n+1;return r+=i,t+e.value*i}),0)/r}function f(t,e){let n=t;if(0===e||!n||0===n.length)return NaN;n=n.slice(-e);const r=n.reduce(((t,e)=>t+1/e.value),0);return n.length/r}function h(t,e){let n=t;if(0===e||!n||0===n.length)return NaN;n=n.slice(-e);let r=0;const i=n.reduce(((t,e)=>{let n=Math.sqrt(e.downloadedBytes);return r+=n,t+1/e.value*n}),0);return r/i}function p(t,e){let n=t;if(0===e||!n||0===n.length)return NaN;n=n.slice(-e);let r=0;const i=n.reduce(((t,e,n)=>{let i=n+1;return r+=i,t+1/e.value*i}),0);return r/i}function m(t,e){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(!t||t.totalWeight<=0)return NaN;const r=t.fastEstimate/(1-Math.pow(.5,t.totalWeight/e.fast)),i=t.slowEstimate/(1-Math.pow(.5,t.totalWeight/e.slow));return n?Math.min(r,i):Math.max(r,i)}function g(t,e){if(0===e||!t||0===t.length)return NaN;let n=t.slice(-e).map((t=>t.value)),r=2/(n.length+1),i=n[n.length-1],o=n[n.length-1];for(let t=0;t<n.length;t++)i=r*n[t]+(1-r)*i,o=r*i+(1-r)*o;return o}function v(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:NaN;const r=s(x.default.THROUGHPUT_TYPES.BANDWIDTH,t,e,n);return Math.round(r)}const y={getArithmeticMean:u,getAverageLatency:function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:NaN;const r=s(x.default.THROUGHPUT_TYPES.LATENCY,t,e,n);return Math.round(r)},getAverageThroughput:v,getByteSizeWeightedArithmeticMean:c,getByteSizeWeightedHarmonicMean:h,getDateWeightedArithmeticMean:d,getDateWeightedHarmonicMean:p,getEwma:m,getHarmonicMean:f,getRawThroughputData:function(t){return t?n.getThroughputDict(t):[]},getSafeAverageThroughput:function(t){let e=v(t,arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,arguments.length>2&&void 0!==arguments[2]?arguments[2]:NaN);return isNaN(e)||(e*=i.get().streaming.abr.throughput.bandwidthSafetyFactor),e},getZlema:g,initialize:function(){n=Fs(t).create({settings:i}),e.on(R.default.METRIC_ADDED,a,y),performance&&performance.addEventListener("resourcetimingbufferfull",o)},reset:function(){n.reset(),e.off(R.default.METRIC_ADDED,a,y),performance&&performance.removeEventListener("resourcetimingbufferfull",o)},setConfig:function(t){t.settings&&(i=t.settings),t.playbackController&&(r=t.playbackController)}};return y}Us.__dashjs_factory_name="ThroughputController";var qs=k.default.getSingletonFactory(Us);function Gs(){const t="You must first call initialize() and set a source before calling this method",e="You must first call initialize() and set a valid source and view before calling this method",n="You must first call attachView() to set the video element before calling this method",r="You must first call attachSource() with a valid source before calling this method",i="MediaPlayer not initialized!",o=this.context,a=(0,C.default)(o).getInstance();let s=(0,W.default)(o).getInstance();const l=(0,P.default)(o).getInstance({settings:s});let u,c,d,f,h,p,m,g,v,y,b,_,w,A,O,D,N,B,j,z,F,U,q,H,V,Y,K,X,$,Z,J,tt,et,nt,rt,it,ot,at,st,lt,ut;function ct(){St(null),Et(null),f=null,O&&(O.reset(),O=null),D&&(D.reset(),D=null),F&&F.reset(),s.reset(),B&&(B.reset(),B=null)}function dt(){return!!d&&!!ot.getElement()}function ft(){return(0,ya.getVersionString)()}function ht(){if(!m)throw e;return $.isPaused()}function pt(){if(!m)throw e;return $.getIsDynamic()}function mt(t){const e=Y&&Y.hasVideoTrack()?x.default.VIDEO:x.default.AUDIO;let n=et.getCurrentDVRInfo(e);return n?gt(n.range.start+t,n):0}function gt(t,e){let n=$.getOriginalLiveDelay();return t>e.range.end-n&&(t=e.range.end-n),t}function vt(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";if(!m)throw e;let n=At().currentTime;return""!==t&&(n=Y.getTimeRelativeToStreamId(n,t)),n}function yt(t){(0,_t.checkParameterType)(t,"boolean"),g=t}function bt(){F.restoreDefaultUTCTimingSources()}function wt(){return et}function At(){if(!ot.getElement())throw n;return ot.getElement()}function Et(t){if(!h)throw i;ot.setElement(t),t&&(Pt(),function(){if(D||"undefined"==typeof dashjs)return;let t=dashjs.MetricsReporting;if("function"==typeof t){let e=t(o).create();D=e.createMetricsReporting({debug:l,eventBus:a,mediaElement:At(),adapter:j,dashMetrics:et,mediaPlayerModel:z,events:I.default,constants:x.default,metricsConstants:T})}}(),function(){if(N||"undefined"==typeof dashjs)return;let t=dashjs.MssHandler;"function"==typeof t&&(Q.extend(t.errors),N=t(o).create({eventBus:a,mediaPlayerModel:z,dashMetrics:et,manifestModel:nt,playbackController:$,streamController:Y,protectionController:O,baseURLController:q,errHandler:U,events:I.default,constants:x.default,debug:l,initSegmentType:L.HTTPRequest.INIT_SEGMENT_TYPE,BASE64:hs,ISOBoxer:$n,settings:s}))}(),Y&&Y.switchToVideoElement(v)),m&&It(),Ot(v)}function xt(e){if(!p)throw t;let n=Y.getActiveStreamInfo();return n?A.getTracksFor(e,n.id).filter((t=>!O||O.areKeyIdsUsable(t.normalizedKeyIds))):[]}function St(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:NaN;if(!h)throw i;"string"==typeof t&&at.initialize(t),null==e&&(e=NaN),isNaN(e)||(e=Math.max(0,e)),v=e,d=t,(p||m)&&It(),dt()&&Ot(v)}function Ct(){if(!p)throw t;let e=Y.getActiveStreamInfo();return e?Y.getStreamById(e.id):null}function It(){m=!1,p=!1,j.reset(),Y.reset(),X.reset(),tt.reset(),$.reset(),Z.reset(),J.reset(),y.reset(),b.reset(),A.reset(),lt.reset(),O&&(s.get().streaming.protection.keepProtectionMediaKeys?O.stop():(O.reset(),O=null,Pt())),K.reset(),rt.reset(),it.reset()}function kt(){return to(o).create({debug:l,errHandler:U,dashMetrics:et,mediaPlayerModel:z,mssHandler:N,settings:s})}function Pt(){if(O)return O;if("undefined"==typeof dashjs)return null;let t=dashjs.Protection;if("function"==typeof t){let e=t(o).create();return I.default.extend(t.events),R.default.extend(t.events,{publicOnly:!0}),Q.extend(t.errors),O=e.createProtectionSystem({debug:l,errHandler:U,videoModel:ot,customParametersModel:F,capabilities:H,eventBus:a,events:I.default,BASE64:hs,constants:x.default,cmcdModel:rt,settings:s}),H||(H=(0,ro.default)(o).getInstance()),H.setProtectionController(O),O}return null}function Rt(){if(!h)throw i;if(B)return B;if("undefined"==typeof dashjs)return null;let t=dashjs.OfflineController;if("function"==typeof t){I.default.extend(t.events),R.default.extend(t.events,{publicOnly:!0}),Q.extend(t.errors);const e=kt(),n=vr(o).create();return n.setConfig({manifestModel:nt,adapter:j,manifestLoader:e,errHandler:U,contentSteeringController:J}),B=t(o).create({debug:l,manifestUpdater:n,baseURLController:q,manifestLoader:e,manifestModel:nt,mediaPlayerModel:z,abrController:y,playbackController:$,adapter:j,errHandler:U,dashMetrics:et,timelineConverter:w,segmentBaseController:lt,schemeLoaderFactory:_,eventBus:a,events:I.default,errors:Q,constants:x.default,settings:s,dashConstants:S.default,urlUtils:Tt(o).getInstance()}),B}return null}function Ot(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:NaN;B&&B.resetRecords(),!p&&d&&(p=!0,c.info("Streaming Initialized"),function(){const t=kt();Y||(Y=kr(o).getInstance()),K||(K=js(o).create({errHandler:U,manifestModel:nt,adapter:j,mediaController:A,baseURLController:q,videoModel:ot,settings:s})),V.setConfig({capabilities:H,customParametersModel:F,adapter:j,settings:s,protectionController:O,manifestModel:nt,errHandler:U}),Y.setConfig({capabilities:H,capabilitiesFilter:V,manifestLoader:t,manifestModel:nt,mediaPlayerModel:z,customParametersModel:F,protectionController:O,textController:K,adapter:j,dashMetrics:et,errHandler:U,timelineConverter:w,videoModel:ot,playbackController:$,serviceDescriptionController:Z,contentSteeringController:J,abrController:y,throughputController:b,mediaController:A,settings:s,baseURLController:q,uriFragmentModel:at,segmentBaseController:lt}),X.setConfig({settings:s,playbackController:$,streamController:Y,videoModel:ot,timelineConverter:w,adapter:j}),$.setConfig({streamController:Y,serviceDescriptionController:Z,dashMetrics:et,adapter:j,videoModel:ot,timelineConverter:w,settings:s}),tt.setConfig({streamController:Y,playbackController:$,mediaPlayerModel:z,videoModel:ot,settings:s}),b.setConfig({settings:s,playbackController:$}),y.setConfig({streamController:Y,capabilities:H,domStorage:st,mediaPlayerModel:z,customParametersModel:F,throughputController:b,cmsdModel:it,dashMetrics:et,adapter:j,videoModel:ot,settings:s}),rt.setConfig({abrController:y,dashMetrics:et,playbackController:$,serviceDescriptionController:Z,throughputController:b}),ut.setConfig({serviceDescriptionController:Z}),it.setConfig({}),A.initialize(),b.initialize(),y.initialize(),Y.initialize(g,f),K.initialize(),X.initialize(),tt.initialize(),rt.initialize(g),it.initialize(),J.initialize(),lt.initialize()}(),"string"==typeof d?Y.load(d,t):Y.loadWithManifest(d,t)),!m&&dt()&&(m=!0,a.trigger(R.default.PLAYBACK_INITIALIZED),c.info("Playback Initialized"))}return u={addABRCustomRule:function(t,e,n){F.addAbrCustomRule(t,e,n)},addRequestInterceptor:function(t){F.addRequestInterceptor(t)},addResponseInterceptor:function(t){F.addResponseInterceptor(t)},addUTCTimingSource:function(t,e){F.addUTCTimingSource(t,e)},attachProtectionController:function(t){O=t},attachSource:St,attachTTMLRenderingDiv:function(t){if(!ot.getElement())throw n;ot.setTTMLRenderingDiv(t)},attachView:Et,attachVttRenderingDiv:function(t){if(!ot.getElement())throw n;ot.setVttRenderingDiv(t)},clearDefaultUTCTimingSources:function(){F.clearDefaultUTCTimingSources()},convertToTimeCode:function(t){t=Math.max(t,0);let e=Math.floor(t/3600),n=Math.floor(t%3600/60),r=Math.floor(t%3600%60);return(0===e?"":e<10?"0"+e.toString()+":":e.toString()+":")+(n<10?"0"+n.toString():n.toString())+":"+(r<10?"0"+r.toString():r.toString())},destroy:function(){ct(),k.default.deleteSingletonInstances(o)},duration:function(){if(!m)throw e;let t=At().duration;if($.getIsDynamic()){const e=Y&&Y.hasVideoTrack()?x.default.VIDEO:x.default.AUDIO;let n=et.getCurrentDVRInfo(e);t=n?n.range.end-n.range.start:0}return t},enableForcedTextStreaming:function(t){return!(!Y.getActiveStreamInfo()||!K)&&K.enableForcedTextStreaming(t)},enableText:function(t){const e=Y.getActiveStreamInfo();return!(!e||!K)&&K.enableText(e.id,t)},extend:function(t,e,n){k.default.extend(t,e,n,o)},formatUTC:function(t,e,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const i=new Date(1e3*t),o=i.toLocaleDateString(e),a=i.toLocaleTimeString(e,{hour12:n});return r?a+" "+o:a},getABRCustomRules:function(){return F.getAbrCustomRules()},getActiveStream:Ct,getAutoPlay:function(){return g},getAvailableBaseUrls:function(){const t=nt.getValue();return t?q.getBaseUrls(t):[]},getAvailableLocations:function(){const t=nt.getValue();if(!t)return[];const e=j.getLocation(t),n=J.getSynthesizedLocationElements(e);return e.concat(n)},getAverageLatency:function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:x.default.VIDEO,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:NaN;return b?b.getAverageLatency(t,e,n):0},getAverageThroughput:function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:x.default.VIDEO,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:NaN;return b?b.getAverageThroughput(t,e,n):0},getBufferLength:function(t){const e=[x.default.VIDEO,x.default.AUDIO,x.default.TEXT];if(t)return-1!==e.indexOf(t)?wt().getCurrentBufferLevel(t)||NaN:(c.warn("getBufferLength requested for invalid type"),NaN);{const t=e.map((t=>xt(t).length>0?wt().getCurrentBufferLevel(t):Number.MAX_VALUE)).reduce(((t,e)=>Math.min(t,e)));return t===Number.MAX_VALUE?NaN:t}},getCurrentLiveLatency:function(){if(!h)throw i;return m?$.getCurrentLiveLatency():NaN},getCurrentRepresentationForType:function(e){if(!p)throw t;if(e!==x.default.IMAGE&&e!==x.default.VIDEO&&e!==x.default.AUDIO)return null;const n=Ct();if(!n)return null;if(e===x.default.IMAGE){const t=n.getThumbnailController();return t?t.getCurrentTrack():-1}return n.getCurrentRepresentationForType(e)},getCurrentSteeringResponseData:function(){if(J)return J.getCurrentSteeringResponseData()},getCurrentTextTrackIndex:function(){let t=NaN;const e=Y.getActiveStreamInfo();if(e&&K)return t=K.getCurrentTrackIdx(e.id),t},getCurrentTrackFor:function(e){if(!p)throw t;let n=Y.getActiveStreamInfo();return n?A.getCurrentTrackFor(e,n.id):null},getDashAdapter:function(){return j},getDashMetrics:wt,getDebug:function(){return l},getDvrSeekOffset:mt,getDvrWindow:function(){if(!m)throw e;const t=Y&&Y.hasVideoTrack()?x.default.VIDEO:x.default.AUDIO;let n=et.getCurrentDVRInfo(t);if(!n)return{};let r=0;const i=$.getIsDynamic();return i&&(r=n.manifestInfo.availableFrom.getTime()/1e3),{start:n.range.start,end:n.range.end,startAsUtc:i?r+n.range.start:NaN,endAsUtc:i?r+n.range.end:NaN,size:n.range.end-n.range.start}},getInitialMediaSettingsFor:function(t){if(!h)throw i;return A.getInitialSettings(t)},getLowLatencyModeEnabled:function(){if(!m)throw e;return $.getLowLatencyModeEnabled()},getManifest:function(){return nt.getValue()},getOfflineController:function(){return Rt()},getPlaybackRate:function(){return At().playbackRate},getProtectionController:function(){return Pt()},getRawThroughputData:function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:x.default.VIDEO;return b?b.getRawThroughputData(t):[]},getRepresentationsByType:function(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(!p)throw t;let r=n?Y.getStreamById(n):Ct();return r?r.getRepresentationsByType(e):[]},getSafeAverageThroughput:function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:x.default.VIDEO,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:NaN;return b?b.getSafeAverageThroughput(t,e,n):0},getSettings:function(){return s.get()},getSource:function(){if(!d)throw r;return d},getStreamsFromManifest:function(e){if(!p)throw t;return j.getStreamsInfo(e)},getTTMLRenderingDiv:function(){return ot?ot.getTTMLRenderingDiv():null},getTargetLiveDelay:function(){if(!m)throw e;return $.getOriginalLiveDelay()},getTracksFor:xt,getTracksForTypeFromManifest:function(e,n,r){if(!p)throw t;return(r=r||j.getStreamsInfo(n,1)[0])?j.getAllMediaInfoForType(r,e,n):[]},getVersion:ft,getVideoElement:At,getVolume:function(){return At().volume},getXHRWithCredentialsForType:function(t){return F.getXHRWithCredentialsForType(t)},initialize:function(t,e,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:NaN;H||(H=(0,ro.default)(o).getInstance(),H.setConfig({settings:s,protectionController:O})),U||(U=no(o).getInstance()),H.supportsMediaSource()?(h||(h=!0,w=ds(o).getInstance(),b||(b=qs(o).getInstance()),y||(y=aa(o).getInstance()),_||(_=Bn(o).getInstance()),$||($=M(o).getInstance()),A||(A=ui(o).getInstance()),Y||(Y=kr(o).getInstance()),X||(X=Rr(o).getInstance()),tt||(tt=Mr(o).getInstance()),Z||(Z=jr(o).getInstance()),J||(J=hr(o).getInstance()),V||(V=oo(o).getInstance()),j=qa(o).getInstance(),nt=co(o).getInstance(),rt=en(o).getInstance(),it=xn(o).getInstance(),ut=kn(o).getInstance(),et=is(o).getInstance({settings:s}),st=va(o).getInstance({settings:s}),j.setConfig({constants:x.default,cea608parser:new E,errHandler:U,BASE64:hs}),q||(q=Ei(o).create()),q.setConfig({adapter:j,contentSteeringController:J}),Z.setConfig({adapter:j}),lt||(lt=Ta(o).getInstance({dashMetrics:et,mediaPlayerModel:z,errHandler:U,baseURLController:q,events:I.default,eventBus:a,debug:l,boxParser:tr(o).getInstance(),errors:Q})),A.setConfig({domStorage:st,settings:s,mediaPlayerModel:z,customParametersModel:F,videoModel:ot}),z.setConfig({playbackController:$,serviceDescriptionController:Z}),J.setConfig({adapter:j,errHandler:U,dashMetrics:et,mediaPlayerModel:z,manifestModel:nt,serviceDescriptionController:Z,throughputController:b,eventBus:a}),bt(),yt(void 0===n||n),Rt()),t&&Et(t),e&&St(e,r),c.info("[dash.js "+ft()+"] MediaPlayer has been initialized")):U.error(new G.default(Q.CAPABILITY_MEDIASOURCE_ERROR_CODE,Q.CAPABILITY_MEDIASOURCE_ERROR_MESSAGE))},isDynamic:pt,isMuted:function(){return At().muted},isPaused:ht,isReady:dt,isSeeking:function(){if(!m)throw e;return $.isSeeking()},isTextEnabled:function(){const t=Y.getActiveStreamInfo();return!(!t||!K)&&K.isTextEnabled(t)},off:function(t,e,n){a.off(t,e,n)},on:function(t,e,n,r){a.on(t,e,n,r)},pause:function(){if(!m)throw e;$.pause()},play:function(){if(!m)throw e;(!g||ht()&&m)&&$.play(!0)},preload:function(){if(!ot.getElement()&&!p){if(!d)throw r;Ot(v)}},provideThumbnail:function(t,e){if("function"!=typeof e)return;if(t<0)return void e(null);const n=$.getIsDynamic()?mt(t):t,r=Y.getStreamForTime(n);if(null===r)return void e(null);const i=r.getThumbnailController();if(i)return i.provide(n,e);e(null)},refreshManifest:function(t){if(!h)throw i;if(!dt())return t(null,r);let e=this;if("function"==typeof t){const n=function(r){a.off(I.default.INTERNAL_MANIFEST_LOADED,n,e),r.error?t(null,r.error):t(r.manifest)};a.on(I.default.INTERNAL_MANIFEST_LOADED,n,e)}Y.refreshManifest()},registerCustomCapabilitiesFilter:function(t){F.registerCustomCapabilitiesFilter(t)},registerLicenseRequestFilter:function(t){F.registerLicenseRequestFilter(t)},registerLicenseResponseFilter:function(t){F.registerLicenseResponseFilter(t)},removeABRCustomRule:function(t){F.removeAbrCustomRule(t)},removeAllABRCustomRule:function(){F.removeAllAbrCustomRule()},removeRequestInterceptor:function(t){F.removeRequestInterceptor(t)},removeResponseInterceptor:function(t){F.removeResponseInterceptor(t)},removeUTCTimingSource:function(t,e){F.removeUTCTimingSource(t,e)},reset:ct,resetCustomInitialTrackSelectionFunction:function(){F.resetCustomInitialTrackSelectionFunction(null)},resetSettings:function(){s.reset()},restoreDefaultUTCTimingSources:bt,retrieveManifest:function(t,e){let n=kt(),r=this;const i=function(t){t.error?e(null,t.error):e(t.manifest),a.off(I.default.INTERNAL_MANIFEST_LOADED,i,r),n.reset()};a.on(I.default.INTERNAL_MANIFEST_LOADED,i,r),at.initialize(t),n.load(t)},seek:function(t){if(!m)throw e;if((0,_t.checkParameterType)(t,"number"),isNaN(t))throw x.default.BAD_ARGUMENT_ERROR;t<0&&(t=0);let n=$.getIsDynamic()?mt(t):t;const r=At();!$.getIsDynamic()&&r.duration&&(n=Math.min(r.duration,n)),$.seek(n,!1,!1,!0)},seekToOriginalLive:function(){m&&pt()&&$.seekToOriginalLive()},seekToPresentationTime:function(t){if(!m)throw e;if((0,_t.checkParameterType)(t,"number"),isNaN(t))throw x.default.BAD_ARGUMENT_ERROR;t<0&&(t=0);const n=At();if(!$.getIsDynamic()&&n.duration&&(t=Math.min(n.duration,t)),$.getIsDynamic()){const e=Y&&Y.hasVideoTrack()?x.default.VIDEO:x.default.AUDIO;let n=et.getCurrentDVRInfo(e);if(!n)return;(t=gt(t,n))<n.range.start&&(t=n.range.start)}$.seek(t,!1,!1,!0)},setAutoPlay:yt,setConfig:function(t){t&&(t.capabilities&&(H=t.capabilities),t.capabilitiesFilter&&(V=t.capabilitiesFilter),t.streamController&&(Y=t.streamController),t.textController&&(K=t.textController),t.gapController&&(X=t.gapController),t.throughputController&&(b=t.throughputController),t.playbackController&&($=t.playbackController),t.serviceDescriptionController&&(Z=t.serviceDescriptionController),t.contentSteeringController&&(J=t.contentSteeringController),t.clientDataReportingController&&(ut=t.clientDataReportingController),t.catchupController&&(tt=t.catchupController),t.mediaPlayerModel&&(z=t.mediaPlayerModel),t.customParametersModel&&(F=t.customParametersModel),t.abrController&&(y=t.abrController),t.schemeLoaderFactory&&(_=t.schemeLoaderFactory),t.mediaController&&(A=t.mediaController),t.settings&&(s=t.settings),t.dashMetrics&&(et=t.dashMetrics))},setCurrentTrack:function(e){let n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!p)throw t;!O||O.areKeyIdsUsable(e.normalizedKeyIds)?A.setTrack(e,{noSettingsSave:n}):c.error(`Can not switch to track with index ${e.index} because key is not usable`)},setCustomInitialTrackSelectionFunction:function(t){F.setCustomInitialTrackSelectionFunction(t)},setInitialMediaSettingsFor:function(t,e){if(!h)throw i;let n=function(t){const e=s.get().streaming.defaultSchemeIdUri;let n={};function r(t,e,n){let r={};if(e){if(e instanceof Array)throw"Array type not supported for settings!";return e instanceof Object?(r.schemeIdUri=e.schemeIdUri?e.schemeIdUri:"",r.value=e.value?e.value:""):(r.schemeIdUri=n,r.value=e,c.warn("No schemeIdUri provided for "+t+', using default "'+n+'"')),r}return null}return t.lang&&(n.lang=t.lang),isNaN(t.index)||(n.index=t.index),t.viewpoint&&(n.viewpoint=r("viewpoint",t.viewpoint,e.viewpoint)),t.audioChannelConfiguration&&(n.audioChannelConfiguration=r("audioChannelConfiguration",t.audioChannelConfiguration,e.audioChannelConfiguration)),t.role&&(n.role=r("role",t.role,e.role)),t.accessibility&&(n.accessibility=r("accessibility",t.accessibility,e.accessibility)),n}(e);A.setInitialSettings(t,n)},setMute:function(t){(0,_t.checkParameterType)(t,"boolean"),At().muted=t},setPlaybackRate:function(t){At().playbackRate=t},setProtectionData:function(t){f=t,Y&&Y.setProtectionData(f)},setRepresentationForTypeById:function(e,n){let r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(e!==x.default.IMAGE&&e!==x.default.VIDEO&&e!==x.default.AUDIO)return;if(!p)throw t;const i=Ct();if(i)if(e===x.default.IMAGE){const t=i.getThumbnailController();t&&t.setTrackById(n)}else{const t=i.getRepresentationForTypeById(e,n);t&&y.setPlaybackQuality(e,Y.getActiveStreamInfo(),t,{forceReplace:r})}},setRepresentationForTypeByIndex:function(e,n){let r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(e!==x.default.IMAGE&&e!==x.default.VIDEO&&e!==x.default.AUDIO)return;if(!p)throw t;const i=Ct();if(i)if(e===x.default.IMAGE){const t=i.getThumbnailController();t&&t.setTrackByIndex(n)}else{const t=i.getRepresentationForTypeByIndex(e,n);t&&y.setPlaybackQuality(e,Y.getActiveStreamInfo(),t,{forceReplace:r})}},setTextTrack:function(t){if(!m)throw e;const n=Y.getActiveStreamInfo();n&&K&&K.setTextTrack(n.id,t)},setVolume:function(t){if("number"!=typeof t||isNaN(t)||t<0||t>1)throw x.default.BAD_ARGUMENT_ERROR;At().volume=t},setXHRWithCredentialsForType:function(t,e){F.setXHRWithCredentialsForType(t,e)},time:vt,timeAsUTC:function(){if(!m)throw e;if(!$.getIsDynamic()||vt()<0)return NaN;const t=Y&&Y.hasVideoTrack()?x.default.VIDEO:x.default.AUDIO;let n,r,i=et.getCurrentDVRInfo(t);return i?(n=i.manifestInfo.availableFrom.getTime()/1e3,r=n+vt(),r):0},timeInDvrWindow:function(){if(!m)throw e;if(!$.getIsDynamic())return vt();let t=At().currentTime;const n=Y&&Y.hasVideoTrack()?x.default.VIDEO:x.default.AUDIO;let r=et.getCurrentDVRInfo(n);return t=null===r||0===t?0:Math.max(0,t-r.range.start),t},trigger:function(t,e,n){a.trigger(t,e,n)},triggerSteeringRequest:function(){if(J)return J.loadSteeringData()},unregisterCustomCapabilitiesFilter:function(t){F.unregisterCustomCapabilitiesFilter(t)},unregisterLicenseRequestFilter:function(t){F.unregisterLicenseRequestFilter(t)},unregisterLicenseResponseFilter:function(t){F.unregisterLicenseResponseFilter(t)},updateSettings:function(t){s.update(t)},updateSource:function(t){d=t,Y.load(d)}},c=l.getLogger(u),h=!1,m=!1,p=!1,g=!0,v=NaN,O=null,B=null,f=null,j=null,lt=null,I.default.extend(R.default),z=ho(o).getInstance(),F=(0,Sn.default)(o).getInstance(),ot=ua(o).getInstance(),at=lo(o).getInstance(),u}Gs.__dashjs_factory_name="MediaPlayer";const Hs=k.default.getClassFactory(Gs);Hs.events=R.default,Hs.errors=Q,k.default.updateClassFactory(Gs.__dashjs_factory_name,Hs);var Vs=Hs},1191:function(t,e,n){n.r(e);var r=n(7252);class i extends r.default{constructor(){super(),this.AST_IN_FUTURE="astInFuture",this.BASE_URLS_UPDATED="baseUrlsUpdated",this.BUFFER_EMPTY="bufferStalled",this.BUFFER_LOADED="bufferLoaded",this.BUFFER_LEVEL_STATE_CHANGED="bufferStateChanged",this.BUFFER_LEVEL_UPDATED="bufferLevelUpdated",this.DVB_FONT_DOWNLOAD_ADDED="dvbFontDownloadAdded",this.DVB_FONT_DOWNLOAD_COMPLETE="dvbFontDownloadComplete",this.DVB_FONT_DOWNLOAD_FAILED="dvbFontDownloadFailed",this.DYNAMIC_TO_STATIC="dynamicToStatic",this.ERROR="error",this.FRAGMENT_LOADING_COMPLETED="fragmentLoadingCompleted",this.FRAGMENT_LOADING_PROGRESS="fragmentLoadingProgress",this.FRAGMENT_LOADING_STARTED="fragmentLoadingStarted",this.FRAGMENT_LOADING_ABANDONED="fragmentLoadingAbandoned",this.LOG="log",this.MANIFEST_LOADING_STARTED="manifestLoadingStarted",this.MANIFEST_LOADING_FINISHED="manifestLoadingFinished",this.MANIFEST_LOADED="manifestLoaded",this.METRICS_CHANGED="metricsChanged",this.METRIC_CHANGED="metricChanged",this.METRIC_ADDED="metricAdded",this.METRIC_UPDATED="metricUpdated",this.PERIOD_SWITCH_STARTED="periodSwitchStarted",this.PERIOD_SWITCH_COMPLETED="periodSwitchCompleted",this.QUALITY_CHANGE_REQUESTED="qualityChangeRequested",this.QUALITY_CHANGE_RENDERED="qualityChangeRendered",this.NEW_TRACK_SELECTED="newTrackSelected",this.TRACK_CHANGE_RENDERED="trackChangeRendered",this.STREAM_INITIALIZING="streamInitializing",this.STREAM_UPDATED="streamUpdated",this.STREAM_ACTIVATED="streamActivated",this.STREAM_DEACTIVATED="streamDeactivated",this.STREAM_INITIALIZED="streamInitialized",this.STREAM_TEARDOWN_COMPLETE="streamTeardownComplete",this.TEXT_TRACKS_ADDED="allTextTracksAdded",this.TEXT_TRACK_ADDED="textTrackAdded",this.CUE_ENTER="cueEnter",this.CUE_EXIT="cueExit",this.THROUGHPUT_MEASUREMENT_STORED="throughputMeasurementStored",this.TTML_PARSED="ttmlParsed",this.TTML_TO_PARSE="ttmlToParse",this.CAPTION_RENDERED="captionRendered",this.CAPTION_CONTAINER_RESIZE="captionContainerResize",this.CAN_PLAY="canPlay",this.CAN_PLAY_THROUGH="canPlayThrough",this.PLAYBACK_ENDED="playbackEnded",this.PLAYBACK_ERROR="playbackError",this.PLAYBACK_INITIALIZED="playbackInitialized",this.PLAYBACK_NOT_ALLOWED="playbackNotAllowed",this.PLAYBACK_METADATA_LOADED="playbackMetaDataLoaded",this.PLAYBACK_LOADED_DATA="playbackLoadedData",this.PLAYBACK_PAUSED="playbackPaused",this.PLAYBACK_PLAYING="playbackPlaying",this.PLAYBACK_PROGRESS="playbackProgress",this.PLAYBACK_RATE_CHANGED="playbackRateChanged",this.PLAYBACK_SEEKED="playbackSeeked",this.PLAYBACK_SEEKING="playbackSeeking",this.PLAYBACK_STALLED="playbackStalled",this.PLAYBACK_STARTED="playbackStarted",this.PLAYBACK_TIME_UPDATED="playbackTimeUpdated",this.PLAYBACK_VOLUME_CHANGED="playbackVolumeChanged",this.PLAYBACK_WAITING="playbackWaiting",this.MANIFEST_VALIDITY_CHANGED="manifestValidityChanged",this.EVENT_MODE_ON_START="eventModeOnStart",this.EVENT_MODE_ON_RECEIVE="eventModeOnReceive",this.CONFORMANCE_VIOLATION="conformanceViolation",this.REPRESENTATION_SWITCH="representationSwitch",this.ADAPTATION_SET_REMOVED_NO_CAPABILITIES="adaptationSetRemovedNoCapabilities",this.CONTENT_STEERING_REQUEST_COMPLETED="contentSteeringRequestCompleted",this.INBAND_PRFT="inbandPrft",this.MANAGED_MEDIA_SOURCE_START_STREAMING="managedMediaSourceStartStreaming",this.MANAGED_MEDIA_SOURCE_END_STREAMING="managedMediaSourceEndStreaming"}}let o=new i;e.default=o},5212:function(t,e,n){n.r(e),e.default={STREAM:"stream",VIDEO:"video",AUDIO:"audio",TEXT:"text",MUXED:"muxed",IMAGE:"image",STPP:"stpp",TTML:"ttml",VTT:"vtt",WVTT:"wvtt",CONTENT_STEERING:"contentSteering",LIVE_CATCHUP_MODE_DEFAULT:"liveCatchupModeDefault",LIVE_CATCHUP_MODE_LOLP:"liveCatchupModeLoLP",MOVING_AVERAGE_SLIDING_WINDOW:"slidingWindow",MOVING_AVERAGE_EWMA:"ewma",BAD_ARGUMENT_ERROR:"Invalid Arguments",MISSING_CONFIG_ERROR:"Missing config parameter(s)",TRACK_SWITCH_MODE_ALWAYS_REPLACE:"alwaysReplace",TRACK_SWITCH_MODE_NEVER_REPLACE:"neverReplace",TRACK_SELECTION_MODE_FIRST_TRACK:"firstTrack",TRACK_SELECTION_MODE_HIGHEST_BITRATE:"highestBitrate",TRACK_SELECTION_MODE_HIGHEST_EFFICIENCY:"highestEfficiency",TRACK_SELECTION_MODE_WIDEST_RANGE:"widestRange",TRACK_SELECTION_MODE_HIGHEST_SELECTION_PRIORITY:"highestSelectionPriority",CMCD_QUERY_KEY:"CMCD",CMCD_MODE_QUERY:"query",CMCD_MODE_HEADER:"header",CMCD_AVAILABLE_KEYS:["br","d","ot","tb","bl","dl","mtp","nor","nrr","su","bs","rtp","cid","pr","sf","sid","st","v"],CMCD_V2_AVAILABLE_KEYS:["msd","ltc"],CMCD_AVAILABLE_REQUESTS:["segment","mpd","xlink","steering","other"],INITIALIZE:"initialize",TEXT_SHOWING:"showing",TEXT_HIDDEN:"hidden",TEXT_DISABLED:"disabled",ACCESSIBILITY_CEA608_SCHEME:"urn:scte:dash:cc:cea-608:2015",CC1:"CC1",CC3:"CC3",UTF8:"utf-8",SCHEME_ID_URI:"schemeIdUri",START_TIME:"starttime",SERVICE_DESCRIPTION_DVB_LL_SCHEME:"urn:dvb:dash:lowlatency:scope:2019",SUPPLEMENTAL_PROPERTY_DVB_LL_SCHEME:"urn:dvb:dash:lowlatency:critical:2019",CTA_5004_2023_SCHEME:"urn:mpeg:dash:cta-5004:2023",THUMBNAILS_SCHEME_ID_URIS:["http://dashif.org/thumbnail_tile","http://dashif.org/guidelines/thumbnail_tile"],FONT_DOWNLOAD_DVB_SCHEME:"urn:dvb:dash:fontdownload:2014",COLOUR_PRIMARIES_SCHEME_ID_URI:"urn:mpeg:mpegB:cicp:ColourPrimaries",URL_QUERY_INFO_SCHEME:"urn:mpeg:dash:urlparam:2014",EXT_URL_QUERY_INFO_SCHEME:"urn:mpeg:dash:urlparam:2016",MATRIX_COEFFICIENTS_SCHEME_ID_URI:"urn:mpeg:mpegB:cicp:MatrixCoefficients",TRANSFER_CHARACTERISTICS_SCHEME_ID_URI:"urn:mpeg:mpegB:cicp:TransferCharacteristics",HDR_METADATA_FORMAT_SCHEME_ID_URI:"urn:dvb:dash:hdr-dmi",HDR_METADATA_FORMAT_VALUES:{ST2094_10:"ST2094-10",SL_HDR2:"SL-HDR2",ST2094_40:"ST2094-40"},MEDIA_CAPABILITIES_API:{COLORGAMUT:{SRGB:"srgb",P3:"p3",REC2020:"rec2020"},TRANSFERFUNCTION:{SRGB:"srgb",PQ:"pq",HLG:"hlg"},HDR_METADATATYPE:{SMPTE_ST_2094_10:"smpteSt2094-10",SLHDR2:"slhdr2",SMPTE_ST_2094_40:"smpteSt2094-40"}},XML:"XML",ARRAY_BUFFER:"ArrayBuffer",DVB_REPORTING_URL:"dvb:reportingUrl",DVB_PROBABILITY:"dvb:probability",OFF_MIMETYPE:"application/font-sfnt",WOFF_MIMETYPE:"application/font-woff",VIDEO_ELEMENT_READY_STATES:{HAVE_NOTHING:0,HAVE_METADATA:1,HAVE_CURRENT_DATA:2,HAVE_FUTURE_DATA:3,HAVE_ENOUGH_DATA:4},FILE_LOADER_TYPES:{FETCH:"fetch_loader",XHR:"xhr_loader"},THROUGHPUT_TYPES:{LATENCY:"throughput_type_latency",BANDWIDTH:"throughput_type_bandwidth"},THROUGHPUT_CALCULATION_MODES:{EWMA:"throughputCalculationModeEwma",ZLEMA:"throughputCalculationModeZlema",ARITHMETIC_MEAN:"throughputCalculationModeArithmeticMean",BYTE_SIZE_WEIGHTED_ARITHMETIC_MEAN:"throughputCalculationModeByteSizeWeightedArithmeticMean",DATE_WEIGHTED_ARITHMETIC_MEAN:"throughputCalculationModeDateWeightedArithmeticMean",HARMONIC_MEAN:"throughputCalculationModeHarmonicMean",BYTE_SIZE_WEIGHTED_HARMONIC_MEAN:"throughputCalculationModeByteSizeWeightedHarmonicMean",DATE_WEIGHTED_HARMONIC_MEAN:"throughputCalculationModeDateWeightedHarmonicMean"},LOW_LATENCY_DOWNLOAD_TIME_CALCULATION_MODE:{MOOF_PARSING:"lowLatencyDownloadTimeCalculationModeMoofParsing",DOWNLOADED_DATA:"lowLatencyDownloadTimeCalculationModeDownloadedData",AAST:"lowLatencyDownloadTimeCalculationModeAast"},RULES_TYPES:{QUALITY_SWITCH_RULES:"qualitySwitchRules",ABANDON_FRAGMENT_RULES:"abandonFragmentRules"},QUALITY_SWITCH_RULES:{BOLA_RULE:"BolaRule",THROUGHPUT_RULE:"ThroughputRule",INSUFFICIENT_BUFFER_RULE:"InsufficientBufferRule",SWITCH_HISTORY_RULE:"SwitchHistoryRule",DROPPED_FRAMES_RULE:"DroppedFramesRule",LEARN_TO_ADAPT_RULE:"L2ARule",LOL_PLUS_RULE:"LoLPRule"},ABANDON_FRAGMENT_RULES:{ABANDON_REQUEST_RULE:"AbandonRequestsRule"},ID3_SCHEME_ID_URI:"https://aomedia.org/emsg/ID3",COMMON_ACCESS_TOKEN_HEADER:"common-access-token",DASH_ROLE_SCHEME_ID:"urn:mpeg:dash:role:2011",CODEC_FAMILIES:{MP3:"mp3",AAC:"aac",AC3:"ac3",EC3:"ec3",DTSX:"dtsx",DTSC:"dtsc",AVC:"avc",HEVC:"hevc"}}},2861:function(t,e,n){n.r(e),e.default={CLEARKEY_KEYSTEM_STRING:"org.w3.clearkey",WIDEVINE_KEYSTEM_STRING:"com.widevine.alpha",PLAYREADY_KEYSTEM_STRING:"com.microsoft.playready",PLAYREADY_RECOMMENDATION_KEYSTEM_STRING:"com.microsoft.playready.recommendation",WIDEVINE_UUID:"edef8ba9-79d6-4ace-a3c8-27dcd51d21ed",PLAYREADY_UUID:"9a04f079-9840-4286-ab92-e65be0885f95",CLEARKEY_UUID:"e2719d58-a985-b3c9-781a-b030af78d30e",W3C_CLEARKEY_UUID:"1077efec-c0b2-4d02-ace3-3c1e52e2fb4b",INITIALIZATION_DATA_TYPE_CENC:"cenc",INITIALIZATION_DATA_TYPE_KEYIDS:"keyids",INITIALIZATION_DATA_TYPE_WEBM:"webm",ENCRYPTION_SCHEME_CENC:"cenc",ENCRYPTION_SCHEME_CBCS:"cbcs",MEDIA_KEY_MESSAGE_TYPES:{LICENSE_REQUEST:"license-request",LICENSE_RENEWAL:"license-renewal",LICENSE_RELEASE:"license-release",INDIVIDUALIZATION_REQUEST:"individualization-request"},ROBUSTNESS_STRINGS:{WIDEVINE:{SW_SECURE_CRYPTO:"SW_SECURE_CRYPTO",SW_SECURE_DECODE:"SW_SECURE_DECODE",HW_SECURE_CRYPTO:"HW_SECURE_CRYPTO",HW_SECURE_DECODE:"HW_SECURE_DECODE",HW_SECURE_ALL:"HW_SECURE_ALL"}},MEDIA_KEY_STATUSES:{USABLE:"usable",EXPIRED:"expired",RELEASED:"released",OUTPUT_RESTRICTED:"output-restricted",OUTPUT_DOWNSCALED:"output-downscaled",STATUS_PENDING:"status-pending",INTERNAL_ERROR:"internal-error"}}},4469:function(t,e,n){n.r(e),n.d(e,{default:function(){return W}});class r{constructor(){this.mpdurl=null,this.errorcode=null,this.terror=null,this.url=null,this.ipaddress=null,this.servicelocation=null}}r.SSL_CONNECTION_FAILED_PREFIX="SSL",r.DNS_RESOLUTION_FAILED="C00",r.HOST_UNREACHABLE="C01",r.CONNECTION_REFUSED="C02",r.CONNECTION_ERROR="C03",r.CORRUPT_MEDIA_ISOBMFF="M00",r.CORRUPT_MEDIA_OTHER="M01",r.BASE_URL_CHANGED="F00",r.BECAME_REPORTER="S00";var i=r,o=n(913),a=n(138);function s(t){let e,n;const r=(t=t||{}).eventBus,a=t.dashMetrics,s=t.metricsConstants,l=t.events;function u(t){let e=new i;if(n){for(const n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.mpdurl||(e.mpdurl=n.originalUrl||n.url),e.terror||(e.terror=new Date),a.addDVBErrors(e)}}function c(t){t.error||(n=t.manifest)}function d(t){u({errorcode:i.BASE_URL_CHANGED,servicelocation:t.entry})}function f(){u({errorcode:i.BECAME_REPORTER})}function h(t){var e;t.metric===s.HTTP_REQUEST&&(0===(e=t.value).responsecode||null==e.responsecode||e.responsecode>=400||e.responsecode<100||e.responsecode>=600)&&u({errorcode:e.responsecode||i.CONNECTION_ERROR,url:e.url,terror:e.tresponse,servicelocation:e._serviceLocation})}function p(t){let e;switch(t.error?t.error.code:0){case MediaError.MEDIA_ERR_NETWORK:e=i.CONNECTION_ERROR;break;case MediaError.MEDIA_ERR_DECODE:e=i.CORRUPT_MEDIA_OTHER;break;default:return}u({errorcode:e})}return e={initialize:function(){r.on(l.MANIFEST_UPDATED,c,e),r.on(l.SERVICE_LOCATION_BASE_URL_BLACKLIST_CHANGED,d,e),r.on(l.METRIC_ADDED,h,e),r.on(l.METRIC_UPDATED,h,e),r.on(l.PLAYBACK_ERROR,p,e),r.on(o.default.BECAME_REPORTING_PLAYER,f,e)},reset:function(){r.off(l.MANIFEST_UPDATED,c,e),r.off(l.SERVICE_LOCATION_BASE_URL_BLACKLIST_CHANGED,d,e),r.off(l.METRIC_ADDED,h,e),r.off(l.METRIC_UPDATED,h,e),r.off(l.PLAYBACK_ERROR,p,e),r.off(o.default.BECAME_REPORTING_PLAYER,f,e)}},e}s.__dashjs_factory_name="DVBErrorsTranslator";var l=a.default.getSingletonFactory(s),u=n(7377);function c(t){t=t||{};let e,n,r=!1,i=this.context,o=t.mediaElement;return e={initialize:function(t){t&&t.length&&(t.forEach((t=>{let e=t.starttime,r=e+t.duration;n.add(e,r)})),r=!!t[0]._useWallClockTime)},reset:function(){n.clear()},isEnabled:function(){let t,e=n.length;if(!e)return!0;t=r?(new Date).getTime()/1e3:o.currentTime;for(let r=0;r<e;r+=1){let e=n.start(r),i=n.end(r);if(e<=t&&t<i)return!0}return!1}},n=(0,u.default)(i).create(),e}c.__dashjs_factory_name="RangeController";var d=a.default.getClassFactory(c);function f(){return{serialise:function t(e){let n,r,i=[],o=[];for(n in e)if(e.hasOwnProperty(n)&&0!==n.indexOf("_")){if(r=e[n],null==r&&(r=""),Array.isArray(r)){if(!r.length)continue;o=[],r.forEach((function(e){let n="Object"!==Object.prototype.toString.call(e).slice(8,-1);o.push(n?e:t(e))})),r=o.map(encodeURIComponent).join(",")}else"string"==typeof r?r=encodeURIComponent(r):r instanceof Date?r=r.toISOString():"number"==typeof r&&(r=Math.round(r));i.push(n+"="+r)}return i.join("&")}}}f.__dashjs_factory_name="MetricSerialiser";var h=a.default.getSingletonFactory(f);function p(){let t,e,n,r=window.crypto||window.msCrypto,i=Uint32Array,o=Math.pow(2,8*i.BYTES_PER_ELEMENT)-1;function a(){r&&(t||(t=new i(10)),r.getRandomValues(t),e=0)}return n={random:function(n,i){let s;return n||(n=0),i||(i=1),r?(e===t.length&&a(),s=t[e]/o,e+=1):s=Math.random(),s*(i-n)+n}},a(),n}p.__dashjs_factory_name="RNG";var m=a.default.getSingletonFactory(p),g=n(1926);function v(t){let e;t=t||{};let n,r,i,o,a,s,l,u=this.context,c=[];const d=t.metricsConstants;function f(){o=!1,a=!1,s=null,l=null}return e={report:function(t,e){Array.isArray(e)||(e=[e]),a&&l.isEnabled()&&e.forEach((function(e){let i=n.serialise(e);t!==d.DVB_ERRORS&&(i=`metricname=${t}&${i}`),i=`${s}?${i}`,function(t,e,n){let i=new XMLHttpRequest;i.withCredentials=r.getXHRWithCredentialsForType(d.HTTP_REQUEST_DVB_REPORTING_TYPE);const o=function(){let t=c.indexOf(i);-1!==t&&(c.splice(t,1),!(i.status>=200&&i.status<300)&&n&&n())};c.push(i);try{i.open("GET",t),i.onloadend=o,i.onerror=o,i.send()}catch(t){i.onerror()}}(i,0,(function(){a=!1}))}))},initialize:function(t,e){let n;if(l=e,s=t.dvbReportingUrl,!s)throw new Error("required parameter missing (dvb:reportingUrl)");o||(n=t.dvbProbability,n&&(1e3===n||n/1e3>=i.random())&&(a=!0),o=!0)},reset:function(){f()}},n=h(u).getInstance(),i=m(u).getInstance(),r=(0,g.default)(u).getInstance(),f(),e}v.__dashjs_factory_name="DVBReporting";var y=a.default.getClassFactory(v);function b(t){t=t||{};const e={"urn:dvb:dash:reporting:2014":y},n=this.context;let r;const i=t.debug?t.debug.getLogger(r):{},o=t.metricsConstants,a=t.mediaPlayerModel||{};return r={create:function(t,r){let s;try{s=e[t.schemeIdUri](n).create({metricsConstants:o,mediaPlayerModel:a}),s.initialize(t,r)}catch(e){s=null,i.error(`ReportingFactory: could not create Reporting with schemeIdUri ${t.schemeIdUri} (${e.message})`)}return s},register:function(t,n){e[t]=n},unregister:function(t){delete e[t]}},r}b.__dashjs_factory_name="ReportingFactory";var _=a.default.getSingletonFactory(b);function w(t){let e,n=[];const r=_(this.context).getInstance(t);return e={initialize:function(t,e){t.some((t=>{let i=r.create(t,e);if(i)return n.push(i),!0}))},reset:function(){n.forEach((t=>t.reset())),n=[]},report:function(t,e){n.forEach((n=>n.report(t,e)))}},e}w.__dashjs_factory_name="ReportingController";var A=a.default.getClassFactory(w);function E(){return{reconstructFullMetricName:function(t,e,n){let r=t;return e&&(r+="("+e,n&&n.length&&(r+=","+n),r+=")"),r},validateN:function(t){if(!t)throw new Error("missing n");if(isNaN(t))throw new Error("n is NaN");if(t<0)throw new Error("n must be positive");return t}}}E.__dashjs_factory_name="HandlerHelpers";var x=a.default.getSingletonFactory(E);function S(t){let e,n,r,i,o,a;t=t||{};let s=this.context,l=x(s).getInstance(),u=[];const c=t.metricsConstants;function d(){let t=function(){try{return Object.keys(u).map((t=>u[t])).reduce(((t,e)=>t.level<e.level?t:e))}catch(t){return}}();t&&a!==t.t&&(a=t.t,n.report(i,t))}return e={initialize:function(t,e,a){e&&(r=l.validateN(a),n=e,i=l.reconstructFullMetricName(t,a),o=setInterval(d,r))},reset:function(){clearInterval(o),o=null,r=0,n=null,a=null},handleNewMetric:function(t,e,n){t===c.BUFFER_LEVEL&&(u[n]=e)}},e}S.__dashjs_factory_name="BufferLevelHandler";var T=a.default.getClassFactory(S),C=a.default.getClassFactory((function(t){let e,n,r=(t=t||{}).eventBus;const i=t.metricsConstants;function a(){r.off(o.default.METRICS_INITIALISATION_COMPLETE,a,this),r.trigger(o.default.BECAME_REPORTING_PLAYER)}return e={initialize:function(t,e){e&&(n=e,r.on(o.default.METRICS_INITIALISATION_COMPLETE,a,this))},reset:function(){n=null},handleNewMetric:function(t,e){t===i.DVB_ERRORS&&n&&n.report(t,e)}},e}));function I(t){let e,n,r,i,o,a;t=t||{};let s=[],l=x(this.context).getInstance();const u=t.metricsConstants;function c(){var t=s;t.length&&n&&n.report(o,t),s=[]}return e={initialize:function(t,e,s,u){e&&(r=l.validateN(s),n=e,u&&u.length&&(i=u),o=l.reconstructFullMetricName(t,s,u),a=setInterval(c,r))},reset:function(){clearInterval(a),a=null,r=null,i=null,s=[],n=null},handleNewMetric:function(t,e){t===u.HTTP_REQUEST&&(i&&i!==e.type||s.push(e))}},e}I.__dashjs_factory_name="HttpListHandler";var k=a.default.getClassFactory(I);function P(){let t,e,n;return t={initialize:function(t,r){e=t,n=r},reset:function(){n=null,e=void 0},handleNewMetric:function(t,r){t===e&&n&&n.report(e,r)}},t}P.__dashjs_factory_name="GenericMetricHandler";var R=a.default.getClassFactory(P);function O(t){let e;const n=(t=t||{}).debug?t.debug.getLogger(e):{};let r=/([a-zA-Z]*)(\(([0-9]*)(\,\s*([a-zA-Z]*))?\))?/;const i=this.context;let o={BufferLevel:T,DVBErrors:C,HttpList:k,PlayList:R,RepSwitchList:R,TcpList:R};return e={create:function(e,a){var s,l=e.match(r);if(l){try{(s=o[l[1]](i).create({eventBus:t.eventBus,metricsConstants:t.metricsConstants})).initialize(l[1],a,l[3],l[5])}catch(t){s=null,n.error(`MetricsHandlerFactory: Could not create handler for type ${l[1]} with args ${l[3]}, ${l[5]} (${t.message})`)}return s}},register:function(t,e){o[t]=e},unregister:function(t){delete o[t]}},e}O.__dashjs_factory_name="MetricsHandlerFactory";var M=a.default.getSingletonFactory(O);function L(t){t=t||{};let e,n=[];const r=this.context,i=t.eventBus,o=t.events;let a=M(r).getInstance({debug:t.debug,eventBus:t.eventBus,metricsConstants:t.metricsConstants});function s(t){n.forEach((e=>{e.handleNewMetric(t.metric,t.value,t.mediaType)}))}return e={initialize:function(t,r){t.split(",").forEach(((t,e,i)=>{let o;if(-1!==t.indexOf("(")&&-1===t.indexOf(")")){let n=i[e+1];n&&-1===n.indexOf("(")&&-1!==n.indexOf(")")&&(t+=","+n,delete i[e+1])}o=a.create(t,r),o&&n.push(o)})),i.on(o.METRIC_ADDED,s,e),i.on(o.METRIC_UPDATED,s,e)},reset:function(){i.off(o.METRIC_ADDED,s,e),i.off(o.METRIC_UPDATED,s,e),n.forEach((t=>t.reset())),n=[]}},e}L.__dashjs_factory_name="MetricsHandlersController";var D=a.default.getClassFactory(L);function N(t){let e,n,r,i;t=t||{};let o=this.context;function a(){e&&e.reset(),n&&n.reset(),r&&r.reset()}return i={initialize:function(i){try{r=d(o).create({mediaElement:t.mediaElement}),r.initialize(i.Range),n=A(o).create({debug:t.debug,metricsConstants:t.metricsConstants,mediaPlayerModel:t.mediaPlayerModel}),n.initialize(i.Reporting,r),e=D(o).create({debug:t.debug,eventBus:t.eventBus,metricsConstants:t.metricsConstants,events:t.events}),e.initialize(i.metrics,n)}catch(t){throw a(),t}},reset:a},i}N.__dashjs_factory_name="MetricsController";var B=a.default.getClassFactory(N),j=class{constructor(){this.metrics="",this.Range=[],this.Reporting=[]}},z=class{constructor(){this.starttime=0,this.duration=1/0,this._useWallClockTime=!1}},F=class{constructor(){this.schemeIdUri="",this.value="",this.dvbReportingUrl="",this.dvbProbability=1e3}};function U(t){let e,n=(t=t||{}).adapter;const r=t.constants;return e={getMetrics:function(t){let e=[];return t&&t.Metrics&&t.Metrics.forEach((i=>{var o=new j,a=n.getIsDynamic(t);i.hasOwnProperty("metrics")&&(o.metrics=i.metrics,i.Range&&i.Range.forEach((e=>{var i=new z;i.starttime=function(t,e,i){let o,a,s=0;return e?s=n.getAvailabilityStartTime(t)/1e3:(o=n.getRegularPeriods(t),o.length&&(s=o[0].start)),a=s,i&&i.hasOwnProperty(r.START_TIME)&&(a+=i.starttime),a}(t,a,e),e.hasOwnProperty("duration")?i.duration=e.duration:i.duration=n.getDuration(t),i._useWallClockTime=a,o.Range.push(i)})),i.Reporting&&(i.Reporting.forEach((t=>{var e=new F;t.hasOwnProperty(r.SCHEME_ID_URI)&&(e.schemeIdUri=t.schemeIdUri,t.hasOwnProperty("value")&&(e.value=t.value),t.hasOwnProperty(r.DVB_REPORTING_URL)&&(e.dvbReportingUrl=t[r.DVB_REPORTING_URL]),t.hasOwnProperty(r.DVB_PROBABILITY)&&(e.dvbProbability=t[r.DVB_PROBABILITY]),o.Reporting.push(e))})),e.push(o)))})),e}},e}U.__dashjs_factory_name="ManifestParsing";var q=a.default.getSingletonFactory(U);function G(t){let e;t=t||{};let n={},r=this.context,i=t.eventBus;const a=t.events;function s(e){if(e.error)return;let a=Object.keys(n);q(r).getInstance({adapter:t.adapter,constants:t.constants}).getMetrics(e.manifest).forEach((e=>{const i=JSON.stringify(e);if(n.hasOwnProperty(i))a.splice(i,1);else try{let o=B(r).create(t);o.initialize(e),n[i]=o}catch(t){}})),a.forEach((t=>{n[t].reset(),delete n[t]})),i.trigger(o.default.METRICS_INITIALISATION_COMPLETE)}function l(){Object.keys(n).forEach((t=>{n[t].reset()})),n={}}return e={reset:function(){i.off(a.MANIFEST_UPDATED,s,e),i.off(a.STREAM_TEARDOWN_COMPLETE,l,e)}},i.on(a.MANIFEST_UPDATED,s,e),i.on(a.STREAM_TEARDOWN_COMPLETE,l,e),e}G.__dashjs_factory_name="MetricsCollectionController";var H=a.default.getClassFactory(G);function V(){let t,e,n=this.context;return t={createMetricsReporting:function(t){return e=l(n).getInstance({eventBus:t.eventBus,dashMetrics:t.dashMetrics,metricsConstants:t.metricsConstants,events:t.events}),e.initialize(),H(n).create(t)},getReportingFactory:function(){return _(n).getInstance()},getMetricsHandlerFactory:function(){return M(n).getInstance()}},t}V.__dashjs_factory_name="MetricsReporting";const Q=dashjs.FactoryMaker.getClassFactory(V);Q.events=o.default,dashjs.FactoryMaker.updateClassFactory(V.__dashjs_factory_name,Q);var W=Q},913:function(t,e,n){n.r(e);var r=n(7252);class i extends r.default{constructor(){super(),this.METRICS_INITIALISATION_COMPLETE="internal_metricsReportingInitialized",this.BECAME_REPORTING_PLAYER="internal_becameReportingPlayer",this.CMCD_DATA_GENERATED="cmcdDataGenerated"}}let o=new i;e.default=o},1926:function(t,e,n){n.r(e);var r=n(5717),i=n(138),o=n(8261),a=n(656),s=n(5212);function l(){let t,e,n,i,l,u,c,d,f,h;const p=this.context,m=(0,o.default)(p).getInstance();function g(){i=[],l=[],u=[],c=[],d=[],h=[],f=null,e=[]}function v(t,e){let n=-1;t.some(((t,r)=>{if(t===e)return n=r,!0})),n<0||t.splice(n,1)}function y(t){let e;for(e=0;e<h.length;e++)if(h[e].rulename===t)return e;return-1}function b(t,n){_(t,n);let i=new r.default;i.schemeIdUri=t,i.value=n,e.push(i)}function _(t,n){(0,a.checkParameterType)(t,"string"),(0,a.checkParameterType)(n,"string"),e.forEach((function(r,i){r.schemeIdUri===t&&r.value===n&&e.splice(i,1)}))}return t={addAbrCustomRule:function(t,e,n){if("string"!=typeof t||t!==s.default.RULES_TYPES.ABANDON_FRAGMENT_RULES&&t!==s.default.RULES_TYPES.QUALITY_SWITCH_RULES||"string"!=typeof e)throw s.default.BAD_ARGUMENT_ERROR;let r=y(e);-1===r?h.push({type:t,rulename:e,rule:n}):(h[r].type=t,h[r].rule=n)},addRequestInterceptor:function(t){i.push(t)},addResponseInterceptor:function(t){l.push(t)},addUTCTimingSource:b,clearDefaultUTCTimingSources:function(){e=[]},getAbrCustomRules:function(){return h},getCustomCapabilitiesFilters:function(){return d},getCustomInitialTrackSelectionFunction:function(){return f},getLicenseRequestFilters:function(){return u},getLicenseResponseFilters:function(){return c},getRequestInterceptors:function(){return i},getResponseInterceptors:function(){return l},getUTCTimingSources:function(){return e},getXHRWithCredentialsForType:function(t){const e=n[t];return void 0===e?n.default:e},registerCustomCapabilitiesFilter:function(t){d.push(t)},registerLicenseRequestFilter:function(t){u.push(t)},registerLicenseResponseFilter:function(t){c.push(t)},removeAbrCustomRule:function(t){if(t){let e=y(t);-1!==e&&h.splice(e,1)}else h=[]},removeAllAbrCustomRule:function(){h=[]},removeRequestInterceptor:function(t){v(i,t)},removeResponseInterceptor:function(t){v(l,t)},removeUTCTimingSource:_,reset:function(){g()},resetCustomInitialTrackSelectionFunction:function(){f=null},restoreDefaultUTCTimingSources:function(){let t=m.get().streaming.utcSynchronization.defaultTimingSource;b(t.scheme,t.value)},setConfig:function(){},setCustomInitialTrackSelectionFunction:function(t){f=t},setXHRWithCredentialsForType:function t(e,r){e?n[e]=!!r:Object.keys(n).forEach((e=>{t(e,r)}))},unregisterCustomCapabilitiesFilter:function(t){v(d,t)},unregisterLicenseRequestFilter:function(t){v(u,t)},unregisterLicenseResponseFilter:function(t){v(c,t)}},n={default:!1},g(),t}l.__dashjs_factory_name="CustomParametersModel",e.default=i.default.getSingletonFactory(l)},3888:function(t,e,n){n.r(e),n.d(e,{default:function(){return pt}});var r=n(8854),i=n(2861);const o={prefixes:["clearkey","dashif","ck"]};class a{static findMp4ProtectionElement(t){let e=null;for(let n=0;n<t.length;++n){let o=t[n];o.schemeIdUri&&o.schemeIdUri.toLowerCase()===r.default.MP4_PROTECTION_SCHEME&&o.value&&(o.value.toLowerCase()===i.default.ENCRYPTION_SCHEME_CENC||o.value.toLowerCase()===i.default.ENCRYPTION_SCHEME_CBCS)&&(e=o)}return e}static getPSSHData(t){let e=8,n=new DataView(t),r=n.getUint8(e);return e+=20,r>0&&(e+=4+16*n.getUint32(e)),e+=4,t.slice(e)}static getPSSHForKeySystem(t,e){let n=a.parsePSSHList(e);return t&&n.hasOwnProperty(t.uuid.toLowerCase())?n[t.uuid.toLowerCase()]:null}static parseInitDataFromContentProtection(t,e){return"pssh"in t&&t.pssh?(t.pssh.__text=t.pssh.__text.replace(/\r?\n|\r/g,"").replace(/\s+/g,""),e.decodeArray(t.pssh.__text).buffer):null}static parsePSSHList(t){if(null==t)return[];let e=new DataView(t.buffer||t),n={},r=0;for(;;){let t,i,o,a,s,l,u=r;if(r>=e.buffer.byteLength)break;if(t=e.getUint32(r),i=r+t,r+=4,1886614376===e.getUint32(r))if(r+=4,o=e.getUint8(r),0===o||1===o){for(r++,r+=3,a="",s=0;s<4;s++)l=e.getUint8(r+s).toString(16),a+=1===l.length?"0"+l:l;for(r+=4,a+="-",s=0;s<2;s++)l=e.getUint8(r+s).toString(16),a+=1===l.length?"0"+l:l;for(r+=2,a+="-",s=0;s<2;s++)l=e.getUint8(r+s).toString(16),a+=1===l.length?"0"+l:l;for(r+=2,a+="-",s=0;s<2;s++)l=e.getUint8(r+s).toString(16),a+=1===l.length?"0"+l:l;for(r+=2,a+="-",s=0;s<6;s++)l=e.getUint8(r+s).toString(16),a+=1===l.length?"0"+l:l;r+=6,a=a.toLowerCase(),r+=4,n[a]=e.buffer.slice(u,i),r=i}else r=i;else r=i}return n}static getLicenseServerUrlFromMediaInfo(t,e){try{if(!t||0===t.length)return null;let n=0,r=null;for(;n<t.length&&!r;){const i=t[n];if(i&&i.contentProtection&&i.contentProtection.length>0){const t=i.contentProtection.filter((t=>t.schemeIdUri&&t.schemeIdUri===e));if(t&&t.length>0){let e=0;for(;e<t.length&&!r;){const n=t[e];n.laUrl&&n.laUrl.__prefix&&o.prefixes.includes(n.laUrl.__prefix)&&n.laUrl.__text&&(r=n.laUrl.__text),e+=1}}}n+=1}return r}catch(t){return null}}static hexKidToBufferSource(t){const e=t.replace(/-/g,"");return new Uint8Array(e.match(/[\da-f]{2}/gi).map((function(t){return parseInt(t,16)}))).buffer}}var s=a,l=class{constructor(t,e){this.contentType=t,this.robustness=e}},u=class{constructor(t,e,n,r,o,a){this.initDataTypes=a&&a.length>0?a:[i.default.INITIALIZATION_DATA_TYPE_CENC],t&&t.length&&(this.audioCapabilities=t),e&&e.length&&(this.videoCapabilities=e),this.distinctiveIdentifier=n,this.persistentState=r,this.sessionTypes=o}},c=n(1923),d=n(1944),f=class{constructor(t,e,n,r,i,o,a,s){this.url=t,this.method=e,this.responseType=n,this.headers=r,this.withCredentials=i,this.messageType=o,this.sessionId=a,this.data=s}},h=class{constructor(t,e,n){this.url=t,this.headers=e,this.data=n}},p=n(7568),m=n(7263),g=n(5212),v=n(138);function y(t){const e=(t=t||{}).BASE64,n=t.cmcdModel,r=t.constants,o=t.customParametersModel,a=t.debug,v=t.eventBus,y=t.events,b=t.protectionKeyController,_=t.settings;let w,A,E,x,S,T,C,I,k,P,R,O,M=t.protectionModel,L=[];function D(){if(!(v&&v.hasOwnProperty("on")&&b&&b.hasOwnProperty("getSupportedKeySystemMetadataFromContentProtection")))throw new Error("Missing config parameter(s)")}function N(t,n){R||x?R&&B():function(t,n){if(x)return;var r;x=!0;const i=function(t){const e=[];for(let n=0;n<t.length;n++){const r=j(t[n]);e.push({ks:t[n].ks,configs:[r],protData:t[n].protData})}return e}(t=(r=t).sort(((t,e)=>(w&&w[t.ks.systemString]&&w[t.ks.systemString].priority>=0?w[t.ks.systemString].priority:r.length)-(w&&w[e.ks.systemString]&&w[e.ks.systemString].priority>=0?w[e.ks.systemString].priority:r.length))));let o;M.requestKeySystemAccess(i).then((t=>(o=t.data,function(t){let e=t&&t.selectedSystemString?t.selectedSystemString:t.keySystem.systemString;return C.info("DRM: KeySystem Access Granted for system string ("+e+")!  Selecting key system..."),M.selectKeySystem(t)}(o)))).then((t=>{!function(t,n){R=t,x=!1,v.trigger(y.KEY_SYSTEM_SELECTED,{data:n});const r=U(R);r&&r.serverCertificate&&r.serverCertificate.length>0&&M.setServerCertificate(e.decodeArray(r.serverCertificate).buffer),B()}(t,o)})).catch((t=>{!function(t,e){R=null,x=!1,e||v.trigger(y.KEY_SYSTEM_SELECTED,{data:null,error:new d.default(c.default.KEY_SYSTEM_ACCESS_DENIED_ERROR_CODE,c.default.KEY_SYSTEM_ACCESS_DENIED_ERROR_MESSAGE+"Error selecting key system! -- "+t.error)})}(t,n)}))}(t,n)}function B(){let t;for(let n=0;n<k.length;n++)for(t=0;t<k[n].length;t++)if(R===k[n][t].ks){e=k[n][t],b.isClearKey(R)&&function(t){if(t.protData&&t.protData.hasOwnProperty("clearkeys")&&0!==Object.keys(t.protData.clearkeys).length){const e={kids:Object.keys(t.protData.clearkeys)};t.initData=(new TextEncoder).encode(JSON.stringify(e))}}(e),e.sessionId?z(e):null!==e.initData&&F(e);break}var e;k=[]}function j(t){const e=t.protData,n=[],o=[],a=e&&e.initDataTypes&&e.initDataTypes.length>0?e.initDataTypes:[i.default.INITIALIZATION_DATA_TYPE_CENC],s=e&&e.audioRobustness&&e.audioRobustness.length>0?e.audioRobustness:P,c=e&&e.videoRobustness&&e.videoRobustness.length>0?e.videoRobustness:P,d=t.sessionType,f=e&&e.distinctiveIdentifier?e.distinctiveIdentifier:"optional",h=e&&e.persistentState?e.persistentState:"temporary"===d?"optional":"required";return I.forEach((t=>{t.type===r.AUDIO?n.push(new l(t.codec,s)):t.type===r.VIDEO&&o.push(new l(t.codec,c))})),new u(n,o,f,h,[d],a)}function z(t){D(),M.loadKeySession(t)}function F(t){if(t&&function(t){if(!t)return!1;try{const e=M.getSessionTokens();for(let n=0;n<e.length;n++)if(e[n].getKeyId()===t)return!0;return!1}catch(t){return!1}}(t.keyId))return;const e=s.getPSSHForKeySystem(R,t?t.initData:null);if(e){if(q(e))return;try{t.initData=e,M.createKeySession(t)}catch(t){v.trigger(y.KEY_SESSION_CREATED,{data:null,error:new d.default(c.default.KEY_SESSION_CREATED_ERROR_CODE,c.default.KEY_SESSION_CREATED_ERROR_MESSAGE+t.message)})}}else t&&t.initData?M.createKeySession(t):v.trigger(y.KEY_SESSION_CREATED,{data:null,error:new d.default(c.default.KEY_SESSION_CREATED_ERROR_CODE,c.default.KEY_SESSION_CREATED_ERROR_MESSAGE+"Selected key system is "+(R?R.systemString:null)+".  needkey/encrypted event contains no initData corresponding to that key system!")})}function U(t){if(t){const e=t.systemString;if(w)return e in w?w[e]:null}return null}function q(t){if(!t)return!1;try{const e=M.getAllInitData();for(let n=0;n<e.length;n++)if(b.initDataEquals(t,e[n]))return C.debug("DRM: Ignoring initData because we have already seen it!"),!0;return!1}catch(t){return!1}}function G(t){D(),t?(M.setMediaElement(t),v.on(y.NEED_KEY,$,A)):null===t&&(M.setMediaElement(t),v.off(y.NEED_KEY,$,A))}function H(t){C.debug("DRM: onKeyMessage");const e=t.data;v.trigger(y.KEY_MESSAGE,{data:e});const n=e.messageType?e.messageType:i.default.MEDIA_KEY_MESSAGE_TYPES.LICENSE_REQUEST,r=e.message,a=e.sessionToken,l=U(R),u=b.getLicenseServerModelInstance(R,l,n),g={sessionToken:a,messageType:n};if(r&&0!==r.byteLength){if(!u)return C.debug("DRM: License server request not required for this message (type = "+t.data.messageType+").  Session ID = "+a.getSessionId()),void V(g);if(b.isClearKey(R)){const t=b.processClearKeyLicenseRequest(R,l,r);if(t&&t.keyPairs&&t.keyPairs.length>0)return C.debug("DRM: ClearKey license request handled by application!"),V(g),void M.updateKeySession(a,t)}!function(t,e,n){const r=t.sessionToken,a=t.messageType?t.messageType:i.default.MEDIA_KEY_MESSAGE_TYPES.LICENSE_REQUEST,l={sessionToken:r,messageType:a},u=R?R.systemString:null;let g=function(t,e,n,r,i){let o=null;const a=r.message;if(t&&t.serverURL){const n=t.serverURL;"string"==typeof n&&""!==n?o=n:"object"==typeof n&&n.hasOwnProperty(e)&&(o=n[e])}else if(t&&t.laURL&&""!==t.laURL)o=t.laURL;else if(o=s.getLicenseServerUrlFromMediaInfo(I,R.schemeIdURI),!o&&!b.isClearKey(R)){const t=s.getPSSHData(n.initData);o=R.getLicenseServerURLFromInitData(t),o||(o=r.laURL)}return o=i.getServerURLFromMessage(o,a,e),o}(n,a,r,t,e);if(!g)return void V(l,new d.default(c.default.MEDIA_KEY_MESSAGE_NO_LICENSE_SERVER_URL_ERROR_CODE,c.default.MEDIA_KEY_MESSAGE_NO_LICENSE_SERVER_URL_ERROR_MESSAGE));const v={};let y=!1;n&&Y(v,n.httpRequestHeaders);const w=t.message;Y(v,R.getRequestHeadersFromMessage(w)),Object.keys(v).forEach((t=>{"authorization"===t.toLowerCase()&&(y=!0)})),n&&"boolean"==typeof n.withCredentials&&(y=n.withCredentials);const A=function(t){if(M)if(t.status>=200&&t.status<=299){const n=m.default.parseHttpHeaders(t.getAllResponseHeaders?t.getAllResponseHeaders():null);let i=new h(t.responseURL,n,t.response);X(o.getLicenseResponseFilters(),i).then((()=>{const n=e.getLicenseMessage(i.data,u,a);null!==n?(V(l),M.updateKeySession(r,n)):K(t,l,u,a,e)}))}else K(t,l,u,a,e)},E=function(t){V(l,new d.default(c.default.MEDIA_KEY_MESSAGE_LICENSER_ERROR_CODE,c.default.MEDIA_KEY_MESSAGE_LICENSER_ERROR_MESSAGE+u+' update, XHR aborted. status is "'+t.statusText+'" ('+t.status+"), readyState is "+t.readyState))},x=function(t){V(l,new d.default(c.default.MEDIA_KEY_MESSAGE_LICENSER_ERROR_CODE,c.default.MEDIA_KEY_MESSAGE_LICENSER_ERROR_MESSAGE+u+' update, XHR error. status is "'+t.statusText+'" ('+t.status+"), readyState is "+t.readyState))},S=R.getLicenseRequestFromMessage(w),T=e.getHTTPMethod(a),C=e.getResponseType(u,a),k=n&&!isNaN(n.httpTimeout)?n.httpTimeout:8e3,P=r.getSessionId()||null;let O=new f(g,T,C,v,y,a,P,S);const L=isNaN(_.get().streaming.retryAttempts[p.HTTPRequest.LICENSE])?3:_.get().streaming.retryAttempts[p.HTTPRequest.LICENSE];X(o.getLicenseRequestFilters(),O).then((()=>{Q(O,L,k,A,E,x)}))}(e,u,l)}else V(g,new d.default(c.default.MEDIA_KEY_MESSAGE_NO_CHALLENGE_ERROR_CODE,c.default.MEDIA_KEY_MESSAGE_NO_CHALLENGE_ERROR_MESSAGE))}function V(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;v.trigger(y.LICENSE_REQUEST_COMPLETE,{data:t,error:e})}function Q(t,e,r,i,o,a){const s=new XMLHttpRequest,l=n.getCmcdParametersFromManifest();if(n.isCmcdEnabled()&&(l.mode?l.mode:_.get().streaming.cmcd.mode)===g.default.CMCD_MODE_QUERY){const e=n.getQueryParameter({url:t.url,type:p.HTTPRequest.LICENSE});e&&(t.url=m.default.addAdditionalQueryParameterToUrl(t.url,[e]))}s.open(t.method,t.url,!0),s.responseType=t.responseType,s.withCredentials=t.withCredentials,r>0&&(s.timeout=r);for(const e in t.headers)s.setRequestHeader(e,t.headers[e]);if(n.isCmcdEnabled()&&(l.mode?l.mode:_.get().streaming.cmcd.mode)===g.default.CMCD_MODE_HEADER){const e=n.getHeaderParameters({url:t.url,type:p.HTTPRequest.LICENSE});if(e)for(const t in e){let n=e[t];n&&s.setRequestHeader(t,n)}}const u=function(){e--;const n=isNaN(_.get().streaming.retryIntervals[p.HTTPRequest.LICENSE])?1e3:_.get().streaming.retryIntervals[p.HTTPRequest.LICENSE];S=setTimeout((function(){Q(t,e,r,i,o,a)}),n)};s.onload=function(){T=null,this.status>=200&&this.status<=299||e<=0?i(this):(C.warn("License request failed ("+this.status+"). Retrying it... Pending retries: "+e),u())},s.ontimeout=s.onerror=function(){T=null,e<=0?a(this):(C.warn("License request network request failed . Retrying it... Pending retries: "+e),u())},s.onabort=function(){o(this)},v.trigger(y.LICENSE_REQUEST_SENDING,{url:t.url,headers:t.headers,payload:t.data,sessionId:t.sessionId}),T=s,s.send(t.data)}function W(){T&&(T.onloadend=T.onerror=T.onprogress=void 0,T.abort(),T=null),S&&(clearTimeout(S),S=null)}function Y(t,e){if(e)for(const n in e)t[n]=e[n]}function K(t,e,n,r,i){let o="NONE",a=null;t.response&&(o=i.getErrorResponse(t.response,n,r),a={serverResponse:t.response||null,responseCode:t.status||null,responseText:t.statusText||null}),V(e,new d.default(c.default.MEDIA_KEY_MESSAGE_LICENSER_ERROR_CODE,c.default.MEDIA_KEY_MESSAGE_LICENSER_ERROR_MESSAGE+n+' update, XHR complete. status is "'+t.statusText+'" ('+t.status+"), readyState is "+t.readyState+".  Response is "+o,a))}function X(t,e){return t?t.reduce(((t,n)=>t.then((()=>n(e)))),Promise.resolve()):Promise.resolve()}function $(t,e){if(!_.get().streaming.protection.ignoreEmeEncryptedEvent){if(C.debug("DRM: onNeedKey"),t.key.initDataType!==i.default.INITIALIZATION_DATA_TYPE_CENC)return void C.warn("DRM:  Only 'cenc' initData is supported!  Ignoring initData of type: "+t.key.initDataType);if(0===I.length&&(C.warn("DRM: onNeedKey called before initializeForMedia, wait until initialized"),(e=void 0===e?1:e+1)<5))return void L.push(setTimeout((()=>{$(t,e)}),500));let r=t.key.initData;if(ArrayBuffer.isView(r)&&(r=r.buffer),R){const t=s.getPSSHForKeySystem(R,r);if(t&&q(t))return}C.debug("DRM: initData:",String.fromCharCode.apply(null,new Uint8Array(r)));const o=b.getSupportedKeySystemsFromSegmentPssh(r,w,O);if(0===o.length)return void C.debug("DRM: Received needkey event with initData, but we don't support any of the key systems!");n=o,k.push(n),N(n,!1)}var n}function Z(t){const e=M.getSessionTokens();if(e&&e.length>0){const n=e.filter((e=>[...t].includes(e.normalizedKeyId)));if(n.some((t=>!t.hasTriggeredKeyStatusMapUpdate))||0===n.length)return!1}return!_.get().streaming.protection.ignoreKeyStatuses&&t&&t.size>0&&E&&E.size>0}return A={areKeyIdsExpired:function(t){try{return!!Z(t)&&[...t].every((t=>E.get(t)===i.default.MEDIA_KEY_STATUSES.EXPIRED))}catch(t){return C.error(t),!1}},areKeyIdsUsable:function(t){try{return!Z(t)||[...t].some((t=>{const e=E.get(t);return e&&e!==i.default.MEDIA_KEY_STATUSES.INTERNAL_ERROR&&e!==i.default.MEDIA_KEY_STATUSES.OUTPUT_RESTRICTED}))}catch(t){return C.error(t),!0}},clearMediaInfoArray:function(){I=[]},closeKeySession:function(t){D(),M.closeKeySession(t)},createKeySession:F,getKeySystems:function(){return b?b.getKeySystems():[]},getSupportedKeySystemMetadataFromContentProtection:function(t){return D(),b.getSupportedKeySystemMetadataFromContentProtection(t,w,O)},handleKeySystemFromManifest:function(){if(!I||0===I.length)return;let t=[];I.forEach((e=>{const n=b.getSupportedKeySystemMetadataFromContentProtection(e.contentProtection,w,O);n.length>0&&(0===t.length&&(t=n),k.push(n))})),t&&t.length>0&&N(t,!0)},initializeForMedia:function(t){if(!t)throw new Error("mediaInfo can not be null or undefined");D(),I.push(t)},loadKeySession:z,removeKeySession:function(t){D(),M.removeKeySession(t)},reset:function(){v.off(y.INTERNAL_KEY_MESSAGE,H,A),D(),W(),G(null),R=null,x=!1,E=new Map,M&&(M.reset(),M=null),L.forEach((t=>clearTimeout(t))),L=[],I=[],k=[]},setKeySystems:function(t){b&&b.setKeySystems(t)},setMediaElement:G,setProtectionData:function(t){w=t,b.setProtectionData(t)},setRobustnessLevel:function(t){P=t},setServerCertificate:function(t){D(),M.setServerCertificate(t)},setSessionType:function(t){O=t},stop:function(){W(),M&&M.stop()},updateKeyStatusesMap:function(t){try{if(!t||!t.sessionToken||!t.parsedKeyStatuses)return;t.sessionToken.hasTriggeredKeyStatusMapUpdate=!0;const e=t.parsedKeyStatuses,n=m.default.parseUserAgent(),r=n&&n.browser&&n.browser.name&&"edge"===n.browser.name.toLowerCase();e.forEach((t=>{r&&R.uuid===i.default.PLAYREADY_UUID&&t.keyId&&16===t.keyId.byteLength&&function(t){const e=m.default.bufferSourceToDataView(t),n=e.getUint32(0,!0),r=e.getUint16(4,!0),i=e.getUint16(6,!0);e.setUint32(0,n,!1),e.setUint16(4,r,!1),e.setUint16(6,i,!1)}(t.keyId);const e=m.default.bufferSourceToHex(t.keyId).slice(0,32);e&&""!==e&&E.set(e,t.status)})),v.trigger(y.KEY_STATUSES_MAP_UPDATED,{keyStatusMap:E})}catch(t){C.error(t)}}},C=a.getLogger(A),k=[],I=[],O="temporary",P="",T=null,S=null,E=new Map,v.on(y.INTERNAL_KEY_MESSAGE,H,A),A}y.__dashjs_factory_name="ProtectionController";var b=v.default.getClassFactory(y),_=class{constructor(t,e){this.keyID=t,this.key=e}},w=class{constructor(t,e){if(e&&"persistent"!==e&&"temporary"!==e)throw new Error("Invalid ClearKey key set type!  Must be one of 'persistent' or 'temporary'");this.keyPairs=t,this.type=e}toJWK(){let t,e=this.keyPairs.length,n={keys:[]};for(t=0;t<e;t++){let e={kty:"oct",alg:"A128KW",kid:this.keyPairs[t].keyID,k:this.keyPairs[t].key};n.keys.push(e)}this.type&&(n.type=this.type);let r=JSON.stringify(n);const i=r.length;let o=new ArrayBuffer(i),a=new Uint8Array(o);for(t=0;t<i;t++)a[t]=r.charCodeAt(t);return o}};const A=i.default.CLEARKEY_UUID,E=i.default.CLEARKEY_KEYSTEM_STRING,x="urn:uuid:"+A;function S(t){let e;const n=(t=t||{}).BASE64;return e={uuid:A,schemeIdURI:x,systemString:E,getInitData:function(t,e){try{let r=s.parseInitDataFromContentProtection(t,n);if(!r&&e){const t={kids:[function(t){try{let e=t.replace(/-/g,"");return e=btoa(e.match(/\w{2}/g).map((t=>String.fromCharCode(parseInt(t,16)))).join("")),e.replace(/=/g,"").replace(/\//g,"_").replace(/\+/g,"-")}catch(t){return null}}(e.cencDefaultKid)]};r=(new TextEncoder).encode(JSON.stringify(t))}return r}catch(t){return null}},getRequestHeadersFromMessage:function(){return{"Content-Type":"application/json"}},getLicenseRequestFromMessage:function(t){return JSON.stringify(JSON.parse(String.fromCharCode.apply(null,new Uint8Array(t))))},getLicenseServerURLFromInitData:function(){return null},getCDMData:function(){return null},getClearKeysFromProtectionData:function(t,e){let n=null;if(t){const r=JSON.parse(String.fromCharCode.apply(null,new Uint8Array(e))),i=[];for(let e=0;e<r.kids.length;e++){const n=r.kids[e],o=t.clearkeys&&t.clearkeys.hasOwnProperty(n)?t.clearkeys[n]:null;if(!o)throw new Error("DRM: ClearKey keyID ("+n+") is not known!");i.push(new _(n,o))}n=new w(i)}return n}},e}S.__dashjs_factory_name="KeySystemClearKey";var T=v.default.getSingletonFactory(S);const C=i.default.W3C_CLEARKEY_UUID,I=i.default.CLEARKEY_KEYSTEM_STRING,k="urn:uuid:"+C;function P(t){let e;const n=t.BASE64,r=t.debug.getLogger(e);return e={uuid:C,schemeIdURI:k,systemString:I,getInitData:function(t){return s.parseInitDataFromContentProtection(t,n)},getRequestHeadersFromMessage:function(){return null},getLicenseRequestFromMessage:function(t){return new Uint8Array(t)},getLicenseServerURLFromInitData:function(){return null},getCDMData:function(){return null},getClearKeysFromProtectionData:function(t,e){let n=null;if(t){const i=JSON.parse(String.fromCharCode.apply(null,new Uint8Array(e))),o=[];for(let e=0;e<i.kids.length;e++){const n=i.kids[e],r=t.clearkeys&&t.clearkeys.hasOwnProperty(n)?t.clearkeys[n]:null;if(!r)throw new Error("DRM: ClearKey keyID ("+n+") is not known!");o.push(new _(n,r))}n=new w(o),r.warn("ClearKey schemeIdURI is using W3C Common PSSH systemID (1077efec-c0b2-4d02-ace3-3c1e52e2fb4b) in Content Protection. See DASH-IF IOP v4.1 section 7.6.2.4")}return n}},e}P.__dashjs_factory_name="KeySystemW3CClearKey";var R=v.default.getSingletonFactory(P);const O=i.default.WIDEVINE_UUID,M=i.default.WIDEVINE_KEYSTEM_STRING,L="urn:uuid:"+O;function D(t){let e;const n=(t=t||{}).BASE64;return e={uuid:O,schemeIdURI:L,systemString:M,getInitData:function(t){return s.parseInitDataFromContentProtection(t,n)},getRequestHeadersFromMessage:function(){return null},getLicenseRequestFromMessage:function(t){return new Uint8Array(t)},getLicenseServerURLFromInitData:function(){return null},getCDMData:function(){return null}},e}D.__dashjs_factory_name="KeySystemWidevine";var N=v.default.getSingletonFactory(D);const B=i.default.PLAYREADY_UUID,j=i.default.PLAYREADY_KEYSTEM_STRING,z="urn:uuid:"+B;function F(t){let e,n="utf-16";const r=(t=t||{}).BASE64,i=t.settings;function o(){if(!r||!r.hasOwnProperty("decodeArray")||!r.hasOwnProperty("decodeArray"))throw new Error("Missing config parameter(s)")}return e={uuid:B,schemeIdURI:z,systemString:j,getInitData:function(t){const e=new Uint8Array([112,115,115,104,0,0,0,0]),n=new Uint8Array([154,4,240,121,152,64,66,134,171,146,230,91,224,136,95,149]);let i,a,l,u,c,d=0,f=null;if(o(),!t)return null;if("pssh"in t&&t.pssh)return s.parseInitDataFromContentProtection(t,r);if("pro"in t&&t.pro)f=r.decodeArray(t.pro.__text);else{if(!("prheader"in t)||!t.prheader)return null;f=r.decodeArray(t.prheader.__text)}return i=f.length,a=4+e.length+n.length+4+i,l=new ArrayBuffer(a),u=new Uint8Array(l),c=new DataView(l),c.setUint32(d,a),d+=4,u.set(e,d),d+=e.length,u.set(n,d),d+=n.length,c.setUint32(d,i),d+=4,u.set(f,d),d+=i,u.buffer},getRequestHeadersFromMessage:function(t){let e,r;const o={},a=new DOMParser;if(i&&i.get().streaming.protection.detectPlayreadyMessageFormat&&"utf-16"===n&&t&&t.byteLength%2==1)return o["Content-Type"]="text/xml; charset=utf-8",o;const s="utf-16"===n?new Uint16Array(t):new Uint8Array(t);e=String.fromCharCode.apply(null,s),r=a.parseFromString(e,"application/xml");const l=r.getElementsByTagName("name"),u=r.getElementsByTagName("value");for(let t=0;t<l.length;t++)o[l[t].childNodes[0].nodeValue]=u[t].childNodes[0].nodeValue;return o.hasOwnProperty("Content")&&(o["Content-Type"]=o.Content,delete o.Content),o.hasOwnProperty("Content-Type")||(o["Content-Type"]="text/xml; charset=utf-8"),o},getLicenseRequestFromMessage:function(t){let e=null;const a=new DOMParser;if(i&&i.get().streaming.protection.detectPlayreadyMessageFormat&&"utf-16"===n&&t&&t.byteLength%2==1)return t;const s="utf-16"===n?new Uint16Array(t):new Uint8Array(t);o();const l=String.fromCharCode.apply(null,s),u=a.parseFromString(l,"application/xml");if(!u.getElementsByTagName("PlayReadyKeyMessage")[0])return t;{const t=u.getElementsByTagName("Challenge")[0].childNodes[0].nodeValue;t&&(e=r.decode(t))}return e},getLicenseServerURLFromInitData:function(t){if(t){const e=new DataView(t),n=e.getUint16(4,!0);let r=6;const i=new DOMParser;for(let o=0;o<n;o++){const n=e.getUint16(r,!0);r+=2;const o=e.getUint16(r,!0);if(r+=2,1!==n){r+=o;continue}const a=t.slice(r,r+o),s=String.fromCharCode.apply(null,new Uint16Array(a)),l=i.parseFromString(s,"application/xml");if(l.getElementsByTagName("LA_URL")[0]){const t=l.getElementsByTagName("LA_URL")[0].childNodes[0].nodeValue;if(t)return t}if(l.getElementsByTagName("LUI_URL")[0]){const t=l.getElementsByTagName("LUI_URL")[0].childNodes[0].nodeValue;if(t)return t}}}return null},getCDMData:function(t){let e,n,i,a;if(o(),!t)return null;for(e=[],a=0;a<t.length;++a)e.push(t.charCodeAt(a)),e.push(0);for(e=String.fromCharCode.apply(null,e),e=r.encode(e),n='<PlayReadyCDMData type="LicenseAcquisition"><LicenseAcquisition version="1.0" Proactive="false"><CustomData encoding="base64encoded">%CUSTOMDATA%</CustomData></LicenseAcquisition></PlayReadyCDMData>'.replace("%CUSTOMDATA%",e),i=[],a=0;a<n.length;++a)i.push(n.charCodeAt(a)),i.push(0);return new Uint8Array(i).buffer},setPlayReadyMessageFormat:function(t){if("utf-8"!==t&&"utf-16"!==t)throw new Error('Specified message format is not one of "utf-8" or "utf-16"');n=t}},e}F.__dashjs_factory_name="KeySystemPlayReady";var U=v.default.getSingletonFactory(F);function q(t){const e=(t=t||{}).BASE64,n={};let r;return n[i.default.WIDEVINE_KEYSTEM_STRING]={responseType:"json",getLicenseMessage:function(t){return e.decodeArray(t.license)},getErrorResponse:function(t){return t}},n[i.default.PLAYREADY_KEYSTEM_STRING]={responseType:"arraybuffer",getLicenseMessage:function(t){return t},getErrorResponse:function(t){return String.fromCharCode.apply(null,new Uint8Array(t))}},r={getServerURLFromMessage:function(t){return t},getHTTPMethod:function(){return"POST"},getResponseType:function(t){return n[t].responseType},getLicenseMessage:function(t,r){return function(){if(!e||!e.hasOwnProperty("decodeArray"))throw new Error("Missing config parameter(s)")}(),n[r].getLicenseMessage(t)},getErrorResponse:function(t,e){return n[e].getErrorResponse(t)}},r}q.__dashjs_factory_name="DRMToday";var G=v.default.getSingletonFactory(q);function H(){let t;const e="http://schemas.xmlsoap.org/soap/envelope/";function n(t){const e=String.fromCharCode.apply(null,new Uint8Array(t));return decodeURIComponent(escape(e))}function r(t){if(window.DOMParser){const r=n(t),i=(new window.DOMParser).parseFromString(r,"text/xml"),o=i?i.getElementsByTagNameNS(e,"Envelope")[0]:null,a=o?o.getElementsByTagNameNS(e,"Body")[0]:null;if(a&&a.getElementsByTagNameNS(e,"Fault")[0])return null}return t}function i(t){let r="",i="",o="",a=-1,s=-1;if(window.DOMParser){const l=n(t),u=(new window.DOMParser).parseFromString(l,"text/xml"),c=u?u.getElementsByTagNameNS(e,"Envelope")[0]:null,d=c?c.getElementsByTagNameNS(e,"Body")[0]:null,f=d?d.getElementsByTagNameNS(e,"Fault")[0]:null,h=f?f.getElementsByTagName("detail")[0]:null,p=h?h.getElementsByTagName("Exception")[0]:null;let m=null;if(null===f)return l;m=f.getElementsByTagName("faultstring")[0].firstChild,r=m?m.nodeValue:null,null!==p&&(m=p.getElementsByTagName("StatusCode")[0],i=m?m.firstChild.nodeValue:null,m=p.getElementsByTagName("Message")[0],o=m?m.firstChild.nodeValue:null,a=o?o.lastIndexOf("[")+1:-1,s=o?o.indexOf("]"):-1,o=o?o.substring(a,s):"")}let l=`code: ${i}, name: ${r}`;return o&&(l+=`, message: ${o}`),l}return t={getServerURLFromMessage:function(t){return t},getHTTPMethod:function(){return"POST"},getResponseType:function(){return"arraybuffer"},getLicenseMessage:function(t){return r.call(this,t)},getErrorResponse:function(t){return i.call(this,t)}},t}H.__dashjs_factory_name="PlayReady";var V=v.default.getSingletonFactory(H);function Q(){let t;return t={getServerURLFromMessage:function(t){return t},getHTTPMethod:function(){return"POST"},getResponseType:function(){return"arraybuffer"},getLicenseMessage:function(t){return t},getErrorResponse:function(t){return String.fromCharCode.apply(null,new Uint8Array(t))}},t}Q.__dashjs_factory_name="Widevine";var W=v.default.getSingletonFactory(Q);function Y(){let t;return t={getServerURLFromMessage:function(t){return t},getHTTPMethod:function(){return"POST"},getResponseType:function(){return"json"},getLicenseMessage:function(t){if(!t.hasOwnProperty("keys"))return null;let e=[];for(let n=0;n<t.keys.length;n++){let r=t.keys[n],i=r.kid.replace(/=/g,""),o=r.k.replace(/=/g,"");e.push(new _(i,o))}return new w(e)},getErrorResponse:function(t){return String.fromCharCode.apply(null,new Uint8Array(t))}},t}Y.__dashjs_factory_name="ClearKey";var K=v.default.getSingletonFactory(Y),X=class{constructor(t){this.ks=t.ks,this.keyId=t.keyId,this.initData=t.initData,this.protData=t.protData,this.cdmData=t.cdmData,this.sessionId=t.sessionId,this.sessionType=t.sessionType}};function $(){let t,e,n,r,o,a,l,u,c=this.context;function d(t,e){return e&&t in e?e[t]:null}function f(t,e){return t&&t.sessionId?t.sessionId:e&&e.sessionId?e.sessionId:null}function h(t,e){return t&&t.sessionType?t.sessionType:e}return t={getKeySystemBySystemString:function(t){for(let e=0;e<r.length;e++)if(r[e].systemString===t)return r[e];return null},getKeySystems:function(){return r},getLicenseServerModelInstance:function(t,e,n){if(n===i.default.MEDIA_KEY_MESSAGE_TYPES.LICENSE_RELEASE||n===i.default.MEDIA_KEY_MESSAGE_TYPES.INDIVIDUALIZATION_REQUEST)return null;let r=null;return e&&e.hasOwnProperty("drmtoday")?r=G(c).getInstance({BASE64:o}):t.systemString===i.default.WIDEVINE_KEYSTEM_STRING?r=W(c).getInstance():t.systemString===i.default.PLAYREADY_KEYSTEM_STRING?r=V(c).getInstance():t.systemString===i.default.CLEARKEY_KEYSTEM_STRING&&(r=K(c).getInstance()),r},getSupportedKeySystemMetadataFromContentProtection:function(t,e,n){let i,o,a,l,u=[];if(!t||!t.length)return u;const c=s.findMp4ProtectionElement(t);for(a=0;a<r.length;a++){o=r[a];const s=d(o.systemString,e);for(l=0;l<t.length;l++)if(i=t[l],i.schemeIdUri.toLowerCase()===o.schemeIdURI){let t=o.getInitData(i,c);const e=new X({ks:r[a],keyId:i.keyId,initData:t,protData:s,cdmData:o.getCDMData(s?s.cdmData:null),sessionId:f(s,i),sessionType:h(s,n)});s?u.unshift(e):u.push(e)}}return u},getSupportedKeySystemsFromSegmentPssh:function(t,e,n){let i,o,a=[],l=s.parsePSSHList(t);for(let t=0;t<r.length;++t){i=r[t],o=i.systemString;const s=d(o,e);i.uuid in l&&a.push({ks:i,initData:l[i.uuid],protData:s,cdmData:i.getCDMData(s?s.cdmData:null),sessionId:f(s),sessionType:h(s,n)})}return a},initDataEquals:function(t,e){if(t.byteLength===e.byteLength){let n=new Uint8Array(t),r=new Uint8Array(e);for(let t=0;t<n.length;t++)if(n[t]!==r[t])return!1;return!0}return!1},initialize:function(){let t;r=[],t=U(c).getInstance({BASE64:o,settings:a}),r.push(t),t=N(c).getInstance({BASE64:o}),r.push(t),t=T(c).getInstance({BASE64:o}),r.push(t),l=t,t=R(c).getInstance({BASE64:o,debug:e}),r.push(t),u=t},isClearKey:function(t){return t===l||t===u},processClearKeyLicenseRequest:function(t,e,r){try{return t.getClearKeysFromProtectionData(e,r)}catch(t){return n.error("Failed to retrieve clearkeys from ProtectionData"),null}},setConfig:function(r){r&&(r.debug&&(e=r.debug,n=e.getLogger(t)),r.BASE64&&(o=r.BASE64),r.settings&&(a=r.settings))},setKeySystems:function(t){r=t},setProtectionData:function(t){for(var e,n,i=0;i<r.length;i++){var o=r[i];o.hasOwnProperty("init")&&o.init((e=o.systemString,n=void 0,n=null,t&&(n=e in t?t[e]:null),n))}}},t}$.__dashjs_factory_name="ProtectionKeyController";var Z=v.default.getSingletonFactory($),J=n(445),tt=class{constructor(t,e){this.initData=t,this.initDataType=e}},et=class{constructor(t,e,n,r){this.sessionToken=t,this.message=e,this.defaultURL=n,this.messageType=r||i.default.MEDIA_KEY_MESSAGE_TYPES.LICENSE_REQUEST}},nt=class{constructor(t,e){this.keySystem=t,this.ksConfiguration=e,this.nativeMediaKeySystemAccessObject=null,this.selectedSystemString=null}};const rt={};function it(t){t=t||{};const e=this.context,n=t.eventBus,r=t.events,o=t.debug;let a,s,l,u,f,h,p,m;function g(t,e,i,o){if(void 0===navigator.requestMediaKeySystemAccess||"function"!=typeof navigator.requestMediaKeySystemAccess){const t="Insecure origins are not allowed";return n.trigger(r.KEY_SYSTEM_ACCESS_COMPLETE,{error:t}),void o({error:t})}const a=t[e].protData&&t[e].protData.systemStringPriority?t[e].protData.systemStringPriority:null,s=t[e].configs,l=t[e].ks;let u=l.systemString;(function(t,e){return new Promise(((n,r)=>{v(t,e,0,n,r)}))})(a||(rt[u]?rt[u]:[u]),s).then((t=>{const e=t&&t.nativeMediaKeySystemAccessObject&&"function"==typeof t.nativeMediaKeySystemAccessObject.getConfiguration?t.nativeMediaKeySystemAccessObject.getConfiguration():null,o=new nt(l,e);o.selectedSystemString=t.selectedSystemString,o.nativeMediaKeySystemAccessObject=t.nativeMediaKeySystemAccessObject,n.trigger(r.KEY_SYSTEM_ACCESS_COMPLETE,{data:o}),i({data:o})})).catch((a=>{if(e+1<t.length)g(t,e+1,i,o);else{const t="Key system access denied! ";n.trigger(r.KEY_SYSTEM_ACCESS_COMPLETE,{error:t+a.message}),o({error:t+a.message})}}))}function v(t,e,n,r,i){const o=t[n];s.debug(`Requesting key system access for system string ${o}`),navigator.requestMediaKeySystemAccess(o,e).then((t=>{r({nativeMediaKeySystemAccessObject:t,selectedSystemString:o})})).catch((o=>{n+1<t.length?v(t,e,n+1,r,i):i(o)}))}function y(t){if(!t||!t.session)return Promise.resolve;const e=t.session;return e.removeEventListener("keystatuseschange",t),e.removeEventListener("message",t),e.close()}function b(t){for(let e=0;e<h.length;e++)if(h[e]===t){h.splice(e,1);break}}function _(t,e){const o={session:t,keyId:e.keyId,normalizedKeyId:e&&e.keyId&&"string"==typeof e.keyId?e.keyId.replace(/-/g,"").toLowerCase():"",initData:e.initData,sessionId:e.sessionId,sessionType:e.sessionType,hasTriggeredKeyStatusMapUpdate:!1,handleEvent:function(t){switch(t.type){case"keystatuseschange":this._onKeyStatusesChange(t);break;case"message":this._onKeyMessage(t)}},_onKeyStatusesChange:function(t){n.trigger(r.KEY_STATUSES_CHANGED,{data:this});const e=[];t.target.keyStatuses.forEach((function(){e.push(w(arguments))})),n.trigger(r.INTERNAL_KEY_STATUSES_CHANGED,{parsedKeyStatuses:e,sessionToken:o})},_onKeyMessage:function(t){let e=ArrayBuffer.isView(t.message)?t.message.buffer:t.message;n.trigger(r.INTERNAL_KEY_MESSAGE,{data:new et(this,e,void 0,t.messageType)})},getKeyId:function(){return this.keyId},getSessionId:function(){return t.sessionId},getSessionType:function(){return this.sessionType},getExpirationTime:function(){return t.expiration},getKeyStatuses:function(){return t.keyStatuses},getUsable:function(){let e=!1;return t.keyStatuses.forEach((function(){w(arguments).status===i.default.MEDIA_KEY_STATUSES.USABLE&&(e=!0)})),e}};return t.addEventListener("keystatuseschange",o),t.addEventListener("message",o),t.closed.then((()=>{b(o),s.debug("DRM: Session closed.  SessionID = "+o.getSessionId()),n.trigger(r.KEY_SESSION_CLOSED,{data:o.getSessionId()})})),h.push(o),o}function w(t){let e,n;return t&&t.length>0&&(t[0]&&("string"==typeof t[0]?e=t[0]:n=t[0]),t[1]&&("string"==typeof t[1]?e=t[1]:n=t[1])),{status:e,keyId:n}}return a={closeKeySession:function(t){y(t).catch((function(e){b(t),n.trigger(r.KEY_SESSION_CLOSED,{data:null,error:"Error closing session ("+t.getSessionId()+") "+e.name})}))},createKeySession:function(t){if(!l||!f)throw new Error("Can not create sessions until you have selected a key system");const e=f.createSession(t.sessionType),o=_(e,t),a=l.systemString===i.default.CLEARKEY_KEYSTEM_STRING&&(t.initData||t.protData&&t.protData.clearkeys)?i.default.INITIALIZATION_DATA_TYPE_KEYIDS:i.default.INITIALIZATION_DATA_TYPE_CENC;e.generateRequest(a,t.initData).then((function(){s.debug("DRM: Session created.  SessionID = "+o.getSessionId()),n.trigger(r.KEY_SESSION_CREATED,{data:o})})).catch((function(t){b(o),n.trigger(r.KEY_SESSION_CREATED,{data:null,error:new d.default(c.default.KEY_SESSION_CREATED_ERROR_CODE,c.default.KEY_SESSION_CREATED_ERROR_MESSAGE+"Error generating key request -- "+t.name)})}))},getAllInitData:function(){const t=[];for(let e=0;e<h.length;e++)h[e].initData&&t.push(h[e].initData);return t},getSessionTokens:function(){return h},loadKeySession:function(t){if(!l||!f)throw new Error("Can not load sessions until you have selected a key system");const e=t.sessionId;for(let t=0;t<h.length;t++)if(e===h[t].sessionId)return void s.warn("DRM: Ignoring session ID because we have already seen it!");const i=f.createSession(t.sessionType),o=_(i,t);o.hasTriggeredKeyStatusMapUpdate=!0,i.load(e).then((function(t){t?(s.debug("DRM: Session loaded.  SessionID = "+o.getSessionId()),n.trigger(r.KEY_SESSION_CREATED,{data:o})):(b(o),n.trigger(r.KEY_SESSION_CREATED,{data:null,error:new d.default(c.default.KEY_SESSION_CREATED_ERROR_CODE,c.default.KEY_SESSION_CREATED_ERROR_MESSAGE+"Could not load session! Invalid Session ID ("+e+")")}))})).catch((function(t){b(o),n.trigger(r.KEY_SESSION_CREATED,{data:null,error:new d.default(c.default.KEY_SESSION_CREATED_ERROR_CODE,c.default.KEY_SESSION_CREATED_ERROR_MESSAGE+"Could not load session ("+e+")! "+t.name)})}))},removeKeySession:function(t){t.session.remove().then((function(){s.debug("DRM: Session removed.  SessionID = "+t.getSessionId()),n.trigger(r.KEY_SESSION_REMOVED,{data:t.getSessionId()})}),(function(e){n.trigger(r.KEY_SESSION_REMOVED,{data:null,error:"Error removing session ("+t.getSessionId()+"). "+e.name})}))},requestKeySystemAccess:function(t){return new Promise(((e,n)=>{g(t,0,e,n)}))},reset:function(){const t=h.length;let e;if(0!==t){const i=function(t){b(t),0===h.length&&(u?(u.removeEventListener("encrypted",p),u.setMediaKeys(null).then((function(){n.trigger(r.TEARDOWN_COMPLETE)}))):n.trigger(r.TEARDOWN_COMPLETE))};for(let n=0;n<t;n++)e=h[n],function(t){y(e),i(t)}(e)}else n.trigger(r.TEARDOWN_COMPLETE)},selectKeySystem:function(t){return new Promise(((e,n)=>{t.nativeMediaKeySystemAccessObject.createMediaKeys().then((e=>(l=t.keySystem,f=e,u?u.setMediaKeys(f):Promise.resolve()))).then((()=>{e(l)})).catch((function(){n({error:"Error selecting keys system ("+t.keySystem.systemString+")! Could not create MediaKeys -- TODO"})}))}))},setMediaElement:function(t){u!==t&&(u&&(u.removeEventListener("encrypted",p),u.setMediaKeys&&u.setMediaKeys(null)),u=t,u&&(u.addEventListener("encrypted",p),u.setMediaKeys&&f&&u.setMediaKeys(f)))},setServerCertificate:function(t){return new Promise(((e,i)=>{f.setServerCertificate(t).then((function(){s.info("DRM: License server certificate successfully updated."),n.trigger(r.SERVER_CERTIFICATE_UPDATED),e()})).catch((t=>{i(t),n.trigger(r.SERVER_CERTIFICATE_UPDATED,{error:new d.default(c.default.SERVER_CERTIFICATE_UPDATED_ERROR_CODE,c.default.SERVER_CERTIFICATE_UPDATED_ERROR_MESSAGE+t.name)})}))}))},stop:function(){let t;for(let e=0;e<h.length;e++)t=h[e],t.getUsable()||(y(t),b(t))},updateKeySession:function(t,e){const i=t.session;m.isClearKey(l)&&(e=e.toJWK()),i.update(e).then((()=>{n.trigger(r.KEY_SESSION_UPDATED)})).catch((function(e){n.trigger(r.KEY_ERROR,{error:new d.default(c.default.MEDIA_KEYERR_CODE,"Error sending update() message! "+e.name,t)})}))}},s=o.getLogger(a),l=null,u=null,f=null,h=[],m=Z(e).getInstance(),p={handleEvent:function(t){if("encrypted"===t.type&&t.initData){let e=ArrayBuffer.isView(t.initData)?t.initData.buffer:t.initData;n.trigger(r.NEED_KEY,{key:new tt(e,t.initDataType)})}}},a}rt[i.default.PLAYREADY_KEYSTEM_STRING]=[i.default.PLAYREADY_KEYSTEM_STRING,i.default.PLAYREADY_RECOMMENDATION_KEYSTEM_STRING],rt[i.default.WIDEVINE_KEYSTEM_STRING]=[i.default.WIDEVINE_KEYSTEM_STRING],rt[i.default.CLEARKEY_KEYSTEM_STRING]=[i.default.CLEARKEY_KEYSTEM_STRING],it.__dashjs_factory_name="DefaultProtectionModel";var ot=v.default.getClassFactory(it);function at(t){t=t||{};const e=this.context,n=t.eventBus,r=t.events,o=t.debug,a=t.api;let s,l,f,h,p,m,g,v,y;function b(){try{for(let t=0;t<g.length;t++)_(g[t]);f&&f.removeEventListener(a.needkey,v),n.trigger(r.TEARDOWN_COMPLETE)}catch(t){n.trigger(r.TEARDOWN_COMPLETE,{error:"Error tearing down key sessions and MediaKeys! -- "+t.message})}}function _(t){const e=t.session;e.removeEventListener(a.error,t),e.removeEventListener(a.message,t),e.removeEventListener(a.ready,t),e.removeEventListener(a.close,t);for(let e=0;e<g.length;e++)if(g[e]===t){g.splice(e,1);break}e[a.release]()}function w(){let t=null;const e=function(){f.removeEventListener("loadedmetadata",t),f[a.setMediaKeys](p),n.trigger(r.VIDEO_ELEMENT_SELECTED)};f.readyState>=1?e():(t=e.bind(this),f.addEventListener("loadedmetadata",t))}return s={getAllInitData:function(){const t=[];for(let e=0;e<g.length;e++)t.push(g[e].initData);return t},getSessionTokens:function(){return g},requestKeySystemAccess:function(t){return new Promise(((e,i)=>{let o=!1;for(let i=0;i<t.length;i++){const s=t[i].ks.systemString,l=t[i].configs;let c=null,d=null;for(let t=0;t<l.length;t++){const i=l[t].audioCapabilities,f=l[t].videoCapabilities;if(i&&0!==i.length){c=[];for(let t=0;t<i.length;t++)window[a.MediaKeys].isTypeSupported(s,i[t].contentType)&&c.push(i[t])}if(f&&0!==f.length){d=[];for(let t=0;t<f.length;t++)window[a.MediaKeys].isTypeSupported(s,f[t].contentType)&&d.push(f[t])}if(!c&&!d||c&&0===c.length||d&&0===d.length)continue;o=!0;const h=new u(c,d),p=y.getKeySystemBySystemString(s),m=new nt(p,h);n.trigger(r.KEY_SYSTEM_ACCESS_COMPLETE,{data:m}),e({data:m});break}}if(!o){const t="Key system access denied! -- No valid audio/video content configurations detected!";n.trigger(r.KEY_SYSTEM_ACCESS_COMPLETE,{error:t}),i({error:t})}}))},selectKeySystem:function(t){return new Promise(((e,n)=>{try{p=t.mediaKeys=new window[a.MediaKeys](t.keySystem.systemString),h=t.keySystem,m=t,f&&w(),e(h)}catch(t){n({error:"Error selecting keys system ("+h.systemString+")! Could not create MediaKeys -- TODO"})}}))},setMediaElement:function(t){f!==t&&(f&&f.removeEventListener(a.needkey,v),f=t,f&&(f.addEventListener(a.needkey,v),p&&w()))},createKeySession:function(t){if(!h||!p||!m)throw new Error("Can not create sessions until you have selected a key system");let e=null;if(m.ksConfiguration.videoCapabilities&&m.ksConfiguration.videoCapabilities.length>0&&(e=m.ksConfiguration.videoCapabilities[0]),null===e&&m.ksConfiguration.audioCapabilities&&m.ksConfiguration.audioCapabilities.length>0&&(e=m.ksConfiguration.audioCapabilities[0]),null===e)throw new Error("Can not create sessions for unknown content types.");const i=e.contentType,o=p.createSession(i,new Uint8Array(t.initData),t.cdmData?new Uint8Array(t.cdmData):null),s=function(t,e){return{session:t,keyId:e.keyId,normalizedKeyId:e&&e.keyId&&"string"==typeof e.keyId?e.keyId.replace(/-/g,"").toLowerCase():"",initData:e.initData,hasTriggeredKeyStatusMapUpdate:!1,getKeyId:function(){return this.keyId},getSessionId:function(){return this.session.sessionId},getExpirationTime:function(){return NaN},getSessionType:function(){return"temporary"},getKeyStatuses:function(){return{size:0,has:()=>!1,get:()=>{}}},handleEvent:function(t){switch(t.type){case a.error:let e="KeyError";n.trigger(r.KEY_ERROR,{error:new d.default(c.default.MEDIA_KEYERR_CODE,e,this)});break;case a.message:let i=ArrayBuffer.isView(t.message)?t.message.buffer:t.message;n.trigger(r.INTERNAL_KEY_MESSAGE,{data:new et(this,i,t.destinationURL)});break;case a.ready:l.debug("DRM: Key added."),n.trigger(r.KEY_ADDED);break;case a.close:l.debug("DRM: Session closed.  SessionID = "+this.getSessionId()),n.trigger(r.KEY_SESSION_CLOSED,{data:this.getSessionId()})}}}}(o,t);o.addEventListener(a.error,s),o.addEventListener(a.message,s),o.addEventListener(a.ready,s),o.addEventListener(a.close,s),g.push(s),l.debug("DRM: Session created.  SessionID = "+s.getSessionId()),n.trigger(r.KEY_SESSION_CREATED,{data:s})},updateKeySession:function(t,e){const i=t.session;y.isClearKey(h)?i.update(new Uint8Array(e.toJWK())):i.update(new Uint8Array(e)),n.trigger(r.KEY_SESSION_UPDATED)},closeKeySession:_,setServerCertificate:function(){},loadKeySession:function(){},removeKeySession:function(){},stop:b,reset:b},l=o.getLogger(s),f=null,h=null,p=null,m=null,g=[],y=Z(e).getInstance(),v={handleEvent:function(t){if(t.type===a.needkey&&t.initData){const e=ArrayBuffer.isView(t.initData)?t.initData.buffer:t.initData;n.trigger(r.NEED_KEY,{key:new tt(e,i.default.INITIALIZATION_DATA_TYPE_CENC)})}}},s}at.__dashjs_factory_name="ProtectionModel_3Feb2014";var st=v.default.getClassFactory(at);function lt(t){t=t||{};const e=this.context,n=t.eventBus,r=t.events,o=t.debug,a=t.api,s=t.errHandler;let l,f,h,p,m,g,v,y,b;function _(){h&&E();for(let t=0;t<v.length;t++)w(v[t]);n.trigger(r.TEARDOWN_COMPLETE)}function w(t){try{h[a.cancelKeyRequest](p.systemString,t.sessionId)}catch(e){n.trigger(r.KEY_SESSION_CLOSED,{data:null,error:"Error closing session ("+t.sessionId+") "+e.message})}}function A(t,e){if(e&&t){const n=t.length;for(let r=0;r<n;r++)if(t[r].sessionId==e)return t[r];return null}return null}function E(){h.removeEventListener(a.keyerror,b),h.removeEventListener(a.needkey,b),h.removeEventListener(a.keymessage,b),h.removeEventListener(a.keyadded,b)}return l={getAllInitData:function(){const t=[];for(let e=0;e<g.length;e++)t.push(g[e].initData);for(let e=0;e<v.length;e++)t.push(v[e].initData);return t},getSessionTokens:function(){return v.concat(g)},requestKeySystemAccess:function(t){return new Promise(((e,i)=>{let o=h;o||(o=document.createElement("video"));let a=!1;for(let i=0;i<t.length;i++){const s=t[i].ks.systemString,l=t[i].configs;let c=null,d=null;for(let t=0;t<l.length;t++){const i=l[t].videoCapabilities;if(i&&0!==i.length){d=[];for(let t=0;t<i.length;t++)""!==o.canPlayType(i[t].contentType,s)&&d.push(i[t])}if(!c&&!d||c&&0===c.length||d&&0===d.length)continue;a=!0;const f=new u(c,d),h=m.getKeySystemBySystemString(s),p=new nt(h,f);n.trigger(r.KEY_SYSTEM_ACCESS_COMPLETE,{data:p}),e({data:p});break}}if(!a){const t="Key system access denied! -- No valid audio/video content configurations detected!";n.trigger(r.KEY_SYSTEM_ACCESS_COMPLETE,{error:t}),i({error:t})}}))},selectKeySystem:function(t){return p=t.keySystem,Promise.resolve(p)},setMediaElement:function(t){if(h!==t){if(h){E();for(var e=0;e<v.length;e++)w(v[e]);v=[]}h=t,h&&(h.addEventListener(a.keyerror,b),h.addEventListener(a.needkey,b),h.addEventListener(a.keymessage,b),h.addEventListener(a.keyadded,b),n.trigger(r.VIDEO_ELEMENT_SELECTED))}},createKeySession:function(t){if(!p)throw new Error("Can not create sessions until you have selected a key system");if(y||0===v.length){const e={sessionId:null,keyId:t.keyId,normalizedKeyId:t&&t.keyId&&"string"==typeof t.keyId?t.keyId.replace(/-/g,"").toLowerCase():"",initData:t.initData,hasTriggeredKeyStatusMapUpdate:!1,getKeyId:function(){return this.keyId},getSessionId:function(){return this.sessionId},getExpirationTime:function(){return NaN},getSessionType:function(){return"temporary"},getKeyStatuses:function(){return{size:0,has:()=>!1,get:()=>{}}}};return g.push(e),h[a.generateKeyRequest](p.systemString,new Uint8Array(t.initData)),e}throw new Error("Multiple sessions not allowed!")},updateKeySession:function(t,e){const i=t.sessionId;if(m.isClearKey(p))for(let t=0;t<e.keyPairs.length;t++)h[a.addKey](p.systemString,e.keyPairs[t].key,e.keyPairs[t].keyID,i);else h[a.addKey](p.systemString,new Uint8Array(e),new Uint8Array(t.initData),i);n.trigger(r.KEY_SESSION_UPDATED)},closeKeySession:w,setServerCertificate:function(){},loadKeySession:function(){},removeKeySession:function(){},stop:_,reset:_},f=o.getLogger(l),h=null,p=null,g=[],v=[],m=Z(e).getInstance(),b={handleEvent:function(t){let e=null;switch(t.type){case a.needkey:let o=ArrayBuffer.isView(t.initData)?t.initData.buffer:t.initData;n.trigger(r.NEED_KEY,{key:new tt(o,i.default.INITIALIZATION_DATA_TYPE_CENC)});break;case a.keyerror:if(e=A(v,t.sessionId),e||(e=A(g,t.sessionId)),e){let i=c.default.MEDIA_KEYERR_CODE,o="";switch(t.errorCode.code){case 1:i=c.default.MEDIA_KEYERR_UNKNOWN_CODE,o+="MEDIA_KEYERR_UNKNOWN - "+c.default.MEDIA_KEYERR_UNKNOWN_MESSAGE;break;case 2:i=c.default.MEDIA_KEYERR_CLIENT_CODE,o+="MEDIA_KEYERR_CLIENT - "+c.default.MEDIA_KEYERR_CLIENT_MESSAGE;break;case 3:i=c.default.MEDIA_KEYERR_SERVICE_CODE,o+="MEDIA_KEYERR_SERVICE - "+c.default.MEDIA_KEYERR_SERVICE_MESSAGE;break;case 4:i=c.default.MEDIA_KEYERR_OUTPUT_CODE,o+="MEDIA_KEYERR_OUTPUT - "+c.default.MEDIA_KEYERR_OUTPUT_MESSAGE;break;case 5:i=c.default.MEDIA_KEYERR_HARDWARECHANGE_CODE,o+="MEDIA_KEYERR_HARDWARECHANGE - "+c.default.MEDIA_KEYERR_HARDWARECHANGE_MESSAGE;break;case 6:i=c.default.MEDIA_KEYERR_DOMAIN_CODE,o+="MEDIA_KEYERR_DOMAIN - "+c.default.MEDIA_KEYERR_DOMAIN_MESSAGE}o+="  System Code = "+t.systemCode,n.trigger(r.KEY_ERROR,{error:new d.default(i,o,e)})}else f.error("No session token found for key error");break;case a.keyadded:e=A(v,t.sessionId),e||(e=A(g,t.sessionId)),e?(f.debug("DRM: Key added."),n.trigger(r.KEY_ADDED,{data:e})):f.debug("No session token found for key added");break;case a.keymessage:if(y=null!==t.sessionId&&void 0!==t.sessionId,y?(e=A(v,t.sessionId),!e&&g.length>0&&(e=g.shift(),v.push(e),e.sessionId=t.sessionId,n.trigger(r.KEY_SESSION_CREATED,{data:e}))):g.length>0&&(e=g.shift(),v.push(e),0!==g.length&&s.error(new d.default(c.default.MEDIA_KEY_MESSAGE_ERROR_CODE,c.default.MEDIA_KEY_MESSAGE_ERROR_MESSAGE))),e){let i=ArrayBuffer.isView(t.message)?t.message.buffer:t.message;e.keyMessage=i,n.trigger(r.INTERNAL_KEY_MESSAGE,{data:new et(e,i,t.defaultURL)})}else f.warn("No session token found for key message")}}},l}lt.__dashjs_factory_name="ProtectionModel_01b";var ut=v.default.getClassFactory(lt);const ct=[{generateKeyRequest:"generateKeyRequest",addKey:"addKey",cancelKeyRequest:"cancelKeyRequest",needkey:"needkey",keyerror:"keyerror",keyadded:"keyadded",keymessage:"keymessage"},{generateKeyRequest:"webkitGenerateKeyRequest",addKey:"webkitAddKey",cancelKeyRequest:"webkitCancelKeyRequest",needkey:"webkitneedkey",keyerror:"webkitkeyerror",keyadded:"webkitkeyadded",keymessage:"webkitkeymessage"}],dt=[{setMediaKeys:"setMediaKeys",MediaKeys:"MediaKeys",release:"close",needkey:"needkey",error:"keyerror",message:"keymessage",ready:"keyadded",close:"keyclose"},{setMediaKeys:"msSetMediaKeys",MediaKeys:"MSMediaKeys",release:"close",needkey:"msneedkey",error:"mskeyerror",message:"mskeymessage",ready:"mskeyadded",close:"mskeyclose"}];function ft(){let t;const e=this.context;function n(t,e){for(let n=0;n<e.length;n++){const r=e[n];if("function"==typeof t[r[Object.keys(r)[0]]])return r}return null}return t={createProtectionSystem:function(r){let i=null;const o=Z(e).getInstance();o.setConfig({debug:r.debug,BASE64:r.BASE64,settings:r.settings}),o.initialize();let a=function(r){const i=r.debug,o=i.getLogger(t),a=r.eventBus,s=r.errHandler,l=r.videoModel?r.videoModel.getElement():null;return l&&void 0===l.onencrypted||l&&void 0===l.mediaKeys?n(l,dt)?(o.info("EME detected on this user agent! (ProtectionModel_3Feb2014)"),st(e).create({debug:i,eventBus:a,events:r.events,api:n(l,dt)})):n(l,ct)?(o.info("EME detected on this user agent! (ProtectionModel_01b)"),ut(e).create({debug:i,eventBus:a,errHandler:s,events:r.events,api:n(l,ct)})):(o.warn("No supported version of EME detected on this user agent! - Attempts to play encrypted content will fail!"),null):(o.info("EME detected on this user agent! (DefaultProtectionModel"),ot(e).create({debug:i,eventBus:a,events:r.events}))}(r);return a&&(i=b(e).create({BASE64:r.BASE64,cmcdModel:r.cmcdModel,constants:r.constants,customParametersModel:r.customParametersModel,debug:r.debug,eventBus:r.eventBus,events:r.events,protectionKeyController:o,protectionModel:a,settings:r.settings}),r.capabilities.setEncryptedMediaSupported(!0)),i}},t}ft.__dashjs_factory_name="Protection";const ht=dashjs.FactoryMaker.getClassFactory(ft);ht.events=J.default,ht.errors=c.default,dashjs.FactoryMaker.updateClassFactory(ft.__dashjs_factory_name,ht);var pt=ht},445:function(t,e,n){n.r(e);var r=n(7252);class i extends r.default{constructor(){super(),this.INTERNAL_KEY_MESSAGE="internalKeyMessage",this.INTERNAL_KEY_STATUSES_CHANGED="internalkeyStatusesChanged",this.KEY_ADDED="public_keyAdded",this.KEY_ERROR="public_keyError",this.KEY_MESSAGE="public_keyMessage",this.KEY_SESSION_CLOSED="public_keySessionClosed",this.KEY_SESSION_CREATED="public_keySessionCreated",this.KEY_SESSION_REMOVED="public_keySessionRemoved",this.KEY_STATUSES_CHANGED="public_keyStatusesChanged",this.KEY_STATUSES_MAP_UPDATED="keyStatusesMapUpdated",this.KEY_SYSTEM_ACCESS_COMPLETE="public_keySystemAccessComplete",this.KEY_SYSTEM_SELECTED="public_keySystemSelected",this.LICENSE_REQUEST_COMPLETE="public_licenseRequestComplete",this.LICENSE_REQUEST_SENDING="public_licenseRequestSending",this.NEED_KEY="needkey",this.PROTECTION_CREATED="public_protectioncreated",this.PROTECTION_DESTROYED="public_protectiondestroyed",this.SERVER_CERTIFICATE_UPDATED="serverCertificateUpdated",this.TEARDOWN_COMPLETE="protectionTeardownComplete",this.VIDEO_ELEMENT_SELECTED="videoElementSelected",this.KEY_SESSION_UPDATED="public_keySessionUpdated"}}let o=new i;e.default=o},1923:function(t,e,n){n.r(e);var r=n(8748);class i extends r.default{constructor(){super(),this.MEDIA_KEYERR_CODE=100,this.MEDIA_KEYERR_UNKNOWN_CODE=101,this.MEDIA_KEYERR_CLIENT_CODE=102,this.MEDIA_KEYERR_SERVICE_CODE=103,this.MEDIA_KEYERR_OUTPUT_CODE=104,this.MEDIA_KEYERR_HARDWARECHANGE_CODE=105,this.MEDIA_KEYERR_DOMAIN_CODE=106,this.MEDIA_KEY_MESSAGE_ERROR_CODE=107,this.MEDIA_KEY_MESSAGE_NO_CHALLENGE_ERROR_CODE=108,this.SERVER_CERTIFICATE_UPDATED_ERROR_CODE=109,this.KEY_STATUS_CHANGED_EXPIRED_ERROR_CODE=110,this.MEDIA_KEY_MESSAGE_NO_LICENSE_SERVER_URL_ERROR_CODE=111,this.KEY_SYSTEM_ACCESS_DENIED_ERROR_CODE=112,this.KEY_SESSION_CREATED_ERROR_CODE=113,this.MEDIA_KEY_MESSAGE_LICENSER_ERROR_CODE=114,this.MEDIA_KEYERR_UNKNOWN_MESSAGE="An unspecified error occurred. This value is used for errors that don't match any of the other codes.",this.MEDIA_KEYERR_CLIENT_MESSAGE="The Key System could not be installed or updated.",this.MEDIA_KEYERR_SERVICE_MESSAGE="The message passed into update indicated an error from the license service.",this.MEDIA_KEYERR_OUTPUT_MESSAGE="There is no available output device with the required characteristics for the content protection system.",this.MEDIA_KEYERR_HARDWARECHANGE_MESSAGE="A hardware configuration change caused a content protection error.",this.MEDIA_KEYERR_DOMAIN_MESSAGE="An error occurred in a multi-device domain licensing configuration. The most common error is a failure to join the domain.",this.MEDIA_KEY_MESSAGE_ERROR_MESSAGE="Multiple key sessions were creates with a user-agent that does not support sessionIDs!! Unpredictable behavior ahead!",this.MEDIA_KEY_MESSAGE_NO_CHALLENGE_ERROR_MESSAGE="DRM: Empty key message from CDM",this.SERVER_CERTIFICATE_UPDATED_ERROR_MESSAGE="Error updating server certificate -- ",this.KEY_STATUS_CHANGED_EXPIRED_ERROR_MESSAGE="DRM: KeyStatusChange error! -- License has expired",this.MEDIA_KEY_MESSAGE_NO_LICENSE_SERVER_URL_ERROR_MESSAGE="DRM: No license server URL specified!",this.KEY_SYSTEM_ACCESS_DENIED_ERROR_MESSAGE="DRM: KeySystem Access Denied! -- ",this.KEY_SESSION_CREATED_ERROR_MESSAGE="DRM: unable to create session! --",this.MEDIA_KEY_MESSAGE_LICENSER_ERROR_MESSAGE="DRM: licenser error! --"}}let o=new i;e.default=o},559:function(t,e,n){n.r(e),n.d(e,{supportsMediaSource:function(){return l}});var r=n(138),i=n(5212),o=n(2861),a=n(7393),s=n(649);function l(){let t="ManagedMediaSource"in window,e="WebKitMediaSource"in window,n="MediaSource"in window;return t||e||n}function u(){let t,e,n,r,u,c;const d=this.context,f=(0,a.default)(d).getInstance();function h(t,e){let n;e===i.default.VIDEO?n=function(t){const e={video:{}};return t?(t.width&&(e.video.width=t.width),t.height&&(e.video.height=t.height),t.framerate&&(e.video.framerate=parseFloat(t.framerate)),t.hdrMetadataType&&(e.video.hdrMetadataType=t.hdrMetadataType),t.colorGamut&&(e.video.colorGamut=t.colorGamut),t.transferFunction&&(e.video.transferFunction=t.transferFunction),e):e}(t):e===i.default.AUDIO&&(n=function(t){const e={audio:{}};return t.samplerate&&(e.audio.samplerate=t.samplerate),e}(t)),n[e].contentType=t.codec,n[e].bitrate=parseInt(t.bitrate),n.type="media-source";let r=t.codec;return t.width&&t.height&&(r+=';width="'+t.width+'";height="'+t.height+'"'),n.mediaSourceCodecString=r,function(t,e,n){return e&&e.keySystemsMetadata&&0!==e.keySystemsMetadata.length?e.keySystemsMetadata.map((e=>{const r={...t};if(e.ks){r.keySystemConfiguration={},e.ks.systemString&&(r.keySystemConfiguration.keySystem=e.ks.systemString);let t="";e.ks.systemString===o.default.WIDEVINE_KEYSTEM_STRING&&(t=o.default.ROBUSTNESS_STRINGS.WIDEVINE.SW_SECURE_CRYPTO);const a=e.protData,s=a&&a.audioRobustness&&a.audioRobustness.length>0?a.audioRobustness:t,l=a&&a.videoRobustness&&a.videoRobustness.length>0?a.videoRobustness:t;n===i.default.AUDIO?r.keySystemConfiguration[n]={robustness:s}:n===i.default.VIDEO&&(r.keySystemConfiguration[n]={robustness:l})}return r})):[t]}(n,t,e)}function p(t){if(r&&0!==r.length&&t)return r.find((e=>{const n=m(t,e,i.default.AUDIO),r=m(t,e,i.default.VIDEO),o=m(t,e,"keySystemConfiguration");return n&&r&&o}))}function m(t,e,n){return!t[n]&&!e[n]||!(!t[n]||!e[n])&&f.areEqual(t[n],e[n])}function g(t,e){return(t=t.filter((t=>!(t.schemeIdUri&&e.some((e=>e.schemeIdUri===t.schemeIdUri)))))).push(...e),t}return t={areKeyIdsExpired:function(t){return!!(n&&t&&t.normalizedKeyIds&&0!==t.normalizedKeyIds.size)&&n.areKeyIdsExpired(t.normalizedKeyIds)},areKeyIdsUsable:function(t){return!(n&&t&&t.normalizedKeyIds&&0!==t.normalizedKeyIds.size)||n.areKeyIdsUsable(t.normalizedKeyIds)},isCodecSupportedBasedOnTestedConfigurations:function(t,e){if(!t||!t.codec||!1===t.isSupported)return!1;const n=h(t,e).map((t=>p(t))).filter((t=>null!=t));return!(n&&n.length>0)||function(t){return t.some((t=>t&&t.decodingInfo&&t.decodingInfo.supported))}(n)},isProtectionCompatible:function(t,e){return!e||!(!t.isEncrypted&&e.isEncrypted)},runCodecSupportCheck:function(t,n){if(n!==i.default.AUDIO&&n!==i.default.VIDEO)return Promise.resolve();const o=h(t,n);return function(t,n){return e.get().streaming.capabilities.useMediaCapabilitiesApi&&navigator.mediaCapabilities&&navigator.mediaCapabilities.decodingInfo&&(t.codec&&n===i.default.AUDIO||n===i.default.VIDEO&&t.codec&&t.width&&t.height&&t.bitrate&&t.framerate)}(t,n)?function(t){return new Promise((e=>{if(!t||0===t.length)return void e();const n=t.map((t=>function(t){return new Promise((e=>{p(t)?e():navigator.mediaCapabilities.decodingInfo(t).then((n=>{t.decodingInfo=n,r.push(t),e()})).catch((n=>{t.decodingInfo={supported:!1},r.push(t),c.error(n),e()}))}))}(t)));Promise.allSettled(n).then((()=>{e()})).catch((t=>{c.error(t),e()}))}))}(o):(function(t){if(!t||!t.length)return;const e=t[0];if(p(e))return;let n={supported:!1};("ManagedMediaSource"in window&&ManagedMediaSource.isTypeSupported(e.mediaSourceCodecString)||"MediaSource"in window&&MediaSource.isTypeSupported(e.mediaSourceCodecString)||"WebKitMediaSource"in window&&WebKitMediaSource.isTypeSupported(e.mediaSourceCodecString))&&(n.supported=!0),e.decodingInfo=n,r.push(e)}(o),Promise.resolve())},setConfig:function(t){t&&(t.settings&&(e=t.settings),t.protectionController&&(n=t.protectionController))},setEncryptedMediaSupported:function(t){u=t},setProtectionController:function(t){n=t},supportsChangeType:function(){return!!window.SourceBuffer&&!!SourceBuffer.prototype&&!!SourceBuffer.prototype.changeType},supportsEncryptedMedia:function(){return u},supportsEssentialProperty:function(t){let n=e.get().streaming.capabilities.supportedEssentialProperties;e.get().streaming.capabilities.useMediaCapabilitiesApi&&e.get().streaming.capabilities.filterVideoColorimetryEssentialProperties&&(n=g(n,[{schemeIdUri:i.default.COLOUR_PRIMARIES_SCHEME_ID_URI},{schemeIdUri:i.default.MATRIX_COEFFICIENTS_SCHEME_ID_URI},{schemeIdUri:i.default.TRANSFER_CHARACTERISTICS_SCHEME_ID_URI}])),e.get().streaming.capabilities.useMediaCapabilitiesApi&&e.get().streaming.capabilities.filterHDRMetadataFormatEssentialProperties&&(n=g(n,[{schemeIdUri:i.default.HDR_METADATA_FORMAT_SCHEME_ID_URI}]));try{return t.inArray(n)}catch(t){return!0}},supportsMediaSource:l},u=!1,r=[],c=(0,s.default)(d).getInstance().getLogger(t),t}u.__dashjs_factory_name="Capabilities",e.default=r.default.getSingletonFactory(u)},7377:function(t,e,n){n.r(e);var r=n(138),i=n(656);function o(){return{customTimeRangeArray:[],length:0,add:function(t,e){let n;for(n=0;n<this.customTimeRangeArray.length&&t>this.customTimeRangeArray[n].start;n++);for(this.customTimeRangeArray.splice(n,0,{start:t,end:e}),n=0;n<this.customTimeRangeArray.length-1;n++)this.mergeRanges(n,n+1)&&n--;this.length=this.customTimeRangeArray.length},clear:function(){this.customTimeRangeArray=[],this.length=0},remove:function(t,e){for(let n=0;n<this.customTimeRangeArray.length;n++)if(t<=this.customTimeRangeArray[n].start&&e>=this.customTimeRangeArray[n].end)this.customTimeRangeArray.splice(n,1),n--;else{if(t>this.customTimeRangeArray[n].start&&e<this.customTimeRangeArray[n].end){this.customTimeRangeArray.splice(n+1,0,{start:e,end:this.customTimeRangeArray[n].end}),this.customTimeRangeArray[n].end=t;break}t>this.customTimeRangeArray[n].start&&t<this.customTimeRangeArray[n].end?this.customTimeRangeArray[n].end=t:e>this.customTimeRangeArray[n].start&&e<this.customTimeRangeArray[n].end&&(this.customTimeRangeArray[n].start=e)}this.length=this.customTimeRangeArray.length},mergeRanges:function(t,e){let n=this.customTimeRangeArray[t],r=this.customTimeRangeArray[e];return n.start<=r.start&&r.start<=n.end&&n.end<=r.end?(n.end=r.end,this.customTimeRangeArray.splice(e,1),!0):r.start<=n.start&&n.start<=r.end&&r.end<=n.end?(n.start=r.start,this.customTimeRangeArray.splice(e,1),!0):r.start<=n.start&&n.start<=r.end&&n.end<=r.end?(this.customTimeRangeArray.splice(t,1),!0):n.start<=r.start&&r.start<=n.end&&r.end<=n.end&&(this.customTimeRangeArray.splice(e,1),!0)},start:function(t){return(0,i.checkInteger)(t),t>=this.customTimeRangeArray.length||t<0?NaN:this.customTimeRangeArray[t].start},end:function(t){return(0,i.checkInteger)(t),t>=this.customTimeRangeArray.length||t<0?NaN:this.customTimeRangeArray[t].end}}}o.__dashjs_factory_name="CustomTimeRanges",e.default=r.default.getClassFactory(o)},7393:function(t,e,n){n.r(e);var r=n(138),i=n(7316);function o(){let t;return t={areEqual:function(t,e){return i(t,e)}},t}o.__dashjs_factory_name="ObjectUtils",e.default=r.default.getSingletonFactory(o)},656:function(t,e,n){n.r(e),n.d(e,{checkInteger:function(){return o},checkIsVideoOrAudioType:function(){return s},checkParameterType:function(){return i},checkRange:function(){return a}});var r=n(5212);function i(t,e){if(typeof t!==e)throw r.default.BAD_ARGUMENT_ERROR}function o(t){if(null===t||isNaN(t)||t%1!=0)throw r.default.BAD_ARGUMENT_ERROR+" : argument is not an integer"}function a(t,e,n){if(t<e||t>n)throw r.default.BAD_ARGUMENT_ERROR+" : argument out of range"}function s(t){if("string"!=typeof t||t!==r.default.AUDIO&&t!==r.default.VIDEO)throw r.default.BAD_ARGUMENT_ERROR}},1944:function(t,e,n){n.r(e),e.default=class{constructor(t,e,n){this.code=t||null,this.message=e||null,this.data=n||null}}},7568:function(t,e,n){n.r(e),n.d(e,{HTTPRequest:function(){return r},HTTPRequestTrace:function(){return i}});class r{constructor(){this.tcpid=null,this.type=null,this.url=null,this.actualurl=null,this.range=null,this.trequest=null,this.tresponse=null,this.responsecode=null,this.interval=null,this.trace=[],this.cmsd=null,this._stream=null,this._tfinish=null,this._mediaduration=null,this._quality=null,this._responseHeaders=null,this._serviceLocation=null,this._fileLoaderType=null,this._resourceTimingValues=null}}class i{constructor(){this.s=null,this.d=null,this.b=[]}}r.GET="GET",r.HEAD="HEAD",r.MPD_TYPE="MPD",r.XLINK_EXPANSION_TYPE="XLinkExpansion",r.INIT_SEGMENT_TYPE="InitializationSegment",r.INDEX_SEGMENT_TYPE="IndexSegment",r.MEDIA_SEGMENT_TYPE="MediaSegment",r.BITSTREAM_SWITCHING_SEGMENT_TYPE="BitstreamSwitchingSegment",r.MSS_FRAGMENT_INFO_SEGMENT_TYPE="FragmentInfoSegment",r.DVB_REPORTING_TYPE="DVBReporting",r.LICENSE="license",r.CONTENT_STEERING_TYPE="ContentSteering",r.OTHER_TYPE="other"}},oM={};function aM(t){var e=oM[t];if(void 0!==e)return e.exports;var n=oM[t]={exports:{}};return iM[t].call(n.exports,n,n.exports,aM),n.exports}aM.amdO={},aM.d=function(t,e){for(var n in e)aM.o(e,n)&&!aM.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})},aM.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),aM.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},aM.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})};var sM={};aM.r(sM),aM.d(sM,{Constants:function(){return gM.default},Debug:function(){return mM.default},MediaPlayer:function(){return lM.MediaPlayer},MediaPlayerFactory:function(){return pM},MetricsReporting:function(){return uM.default},Protection:function(){return cM.default},default:function(){return yM},supportsMediaSource:function(){return vM.supportsMediaSource}});var lM=aM(5393),uM=aM(4469),cM=aM(3888),dM=aM(5849);let fM,hM=function(){const t="application/dash+xml";let e;function n(n,r,i){if(!n||!/^VIDEO$/i.test(n.nodeName))return null;if(n._dashjs_player)return n._dashjs_player;let o,a=n.id||n.name||"video element";if(!(r=r||[].slice.call(n.querySelectorAll("source")).filter((function(e){return e.type==t}))[0])&&n.src)(r=document.createElement("source")).src=n.src;else if(!r&&!n.src)return null;return i=i||{},o=(0,dM.default)(i).create(),o.initialize(n,r.src,n.autoplay),e||(e=o.getDebug().getLogger()),e.debug("Converted "+a+" to dash.js player and added content: "+r.src),n._dashjs_player=o,o}function r(t){return/^VIDEO$/i.test(t.nodeName)?t:r(t.parentNode)}return{create:n,createAll:function(e,i){let o=[];e=e||"[data-dashjs-player]";let a=(i=i||document).querySelectorAll(e);for(let t=0;t<a.length;t++){let e=n(a[t],null);o.push(e)}let s=i.querySelectorAll('source[type="'+t+'"]');for(let t=0;t<s.length;t++){let e=n(r(s[t]),null);o.push(e)}return o}}}();!("undefined"!=typeof window&&window&&window.dashjs&&window.dashjs.skipAutoCreate)&&"undefined"!=typeof window&&window&&window.addEventListener&&("complete"===window.document.readyState?window.dashjs?hM.createAll():fM=window.setInterval((function(){window.dashjs&&(window.clearInterval(fM),hM.createAll())}),500):window.addEventListener("load",(function t(){window.removeEventListener("load",t),hM.createAll()})));var pM=hM,mM=aM(649),gM=aM(5212),vM=aM(559);dashjs.Protection=cM.default,dashjs.MetricsReporting=uM.default,dashjs.MediaPlayerFactory=pM,dashjs.Debug=mM.default,dashjs.supportsMediaSource=vM.supportsMediaSource,dashjs.Constants=gM.default;var yM=dashjs,bM=((sM=sM.default).Constants,sM.Debug,sM.MediaPlayer);sM.MediaPlayerFactory,sM.MetricsReporting,sM.Protection,sM.default,sM.supportsMediaSource;function _M(t){return _M="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_M(t)}function wM(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,CM(r.key),r)}}function AM(t,e,n){return e=xM(e),function(t,e){if(e&&("object"===_M(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,EM()?Reflect.construct(e,n||[],xM(t).constructor):e.apply(t,n))}function EM(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(EM=function(){return!!t})()}function xM(t){return xM=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},xM(t)}function SM(t,e){return SM=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},SM(t,e)}function TM(t,e,n){return(e=CM(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function CM(t){var e=function(t,e){if("object"!=_M(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=_M(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==_M(e)?e:e+""}var IM=function(t){function e(t,n){var r;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),TM(r=AM(this,e,[t,n]),"onResize",(function(){r.viewport.medias.desktop||r.videoController.classList.add("active")})),TM(r,"onMouseEnter",(function(){r.viewport.medias.desktop&&(r.onVideo=!0,r.videoController.classList.add("active"))})),TM(r,"onMouseLeave",(function(t){r.viewport.medias.desktop&&(r.onVideo=!1,r.videoController.classList.remove("active"))})),TM(r,"onMouseMove",(function(t){r.viewport.medias.desktop&&(r.timeout&&clearTimeout(r.timeout),!r.videoController.classList.contains("active")&&r.onVideo&&r.videoController.classList.add("active"),r.timeout=setTimeout((function(){r.videoController.classList.remove("active")}),1500))})),TM(r,"toggleCaption",(function(){r.caption.classList.toggle("active"),r.video.textTracks&&r.video.textTracks.length>0&&("showing"===r.video.textTracks[0].mode?r.video.textTracks[0].mode="hidden":r.video.textTracks[0].mode="showing")})),TM(r,"onClick",(function(){var t=ti.timeline();r.cover&&t.to(r.cover,{alpha:0,display:"none",duration:.4},0),t.add((function(){var t;null===(t=r.player)||void 0===t||t.play(),r.video.textTracks&&r.video.textTracks.length>0&&(r.video.textTracks[0].mode="hidden")}),0)})),TM(r,"togglePlayPause",(function(){r.player&&(r.player.isPaused()?r.player.play():r.player.pause())})),TM(r,"onEnded",(function(){var t=ti.timeline();t.add((function(){r.cover&&(r.cover.style.display="flex",r.video.currentTime=0,r.seekbar.value=0)}),0),r.cover&&t.to(r.cover,{alpha:1},0)})),TM(r,"forcePause",(function(){var t;null===(t=r.player)||void 0===t||t.pause()})),TM(r,"initializeSeekbar",(function(){r.seekbar.max=r.video.duration,r.seekbar.value=0})),TM(r,"updateSeekbar",(function(){var t=r.video.currentTime;r.seekbar.value=t})),TM(r,"onSeekbarKeydown",(function(t){"ArrowRight"===t.key||"ArrowDown"===t.key?r.video.currentTime=Math.min(r.video.currentTime+15,r.video.duration):"ArrowLeft"!==t.key&&"ArrowUp"!==t.key||(r.video.currentTime=Math.max(r.video.currentTime-15,0))})),r.currentIndex=r.element.dataset.index,r.videoW=r.element.querySelector(".video-wrapper"),r.video=r.element.querySelector("video"),r.videoController=r.element.querySelector(".video-controller "),r.caption=r.element.querySelector(".btn-caption"),r.player=null,r.onVideo=!1,r.timeout=null,r.seekbar=r.element.querySelector(".seekbar-input");var i=r.video.dataset.videoLink?decodeURIComponent(r.video.dataset.videoLink):null;if(i){var o,a;r.player=bM().create(),r.player.initialize(r.video,i,!1);var s=new ControlBar(r.player);r.currentIndex&&r.currentIndex>0?s.initialize("_"+r.currentIndex):s.initialize(),r.seekbar&&r.initializeSeekbar(),null===(o=r.seekbar)||void 0===o||o.addEventListener("keydown",r.onSeekbarKeydown),null===(a=r.seekbar)||void 0===a||a.addEventListener("timeupdate",r.updateSeekbar)}return r.cover=r.element.querySelector(".cover-content"),r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&SM(t,e)}(e,t),n=e,(r=[{key:"attach",value:function(){this.cover&&this.cover.addEventListener("click",this.onClick),this.player&&(this.videoW.addEventListener("mousemove",this.onMouseMove),this.video.addEventListener("click",this.togglePlayPause),this.videoW.addEventListener("mouseleave",this.onMouseLeave),this.videoW.addEventListener("mouseenter",this.onMouseEnter),this.caption.addEventListener("click",this.toggleCaption),this.viewport.on("resize",this.onResize),this.onResize())}},{key:"detach",value:function(){var t,e;this.cover&&this.cover.removeEventListener("click",this.onClick),this.player&&(this.videoW.removeEventListener("mousemove",this.onMouseMove),this.video.removeEventListener("click",this.togglePlayPause),this.videoW.removeEventListener("mouseenter",this.onMouseEnter),this.videoW.removeEventListener("mouseleave",this.onMouseLeave),this.caption.removeEventListener("click",this.toggleCaption),null===(t=this.seekbar)||void 0===t||t.removeEventListener("keydown",this.onSeekbarKeydown),null===(e=this.seekbar)||void 0===e||e.removeEventListener("timeupdate",this.updateSeekbar),this.viewport.off("resize",this.onResize))}}])&&wM(n.prototype,r),i&&wM(n,i),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,i}(Yp);function kM(t){return kM="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},kM(t)}function PM(t){return function(t){if(Array.isArray(t))return RM(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return RM(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return RM(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function RM(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function OM(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,BM(r.key),r)}}function MM(t,e,n){return e=DM(e),function(t,e){if(e&&("object"===kM(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,LM()?Reflect.construct(e,n||[],DM(t).constructor):e.apply(t,n))}function LM(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(LM=function(){return!!t})()}function DM(t){return DM=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},DM(t)}function NM(t,e){return NM=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},NM(t,e)}function BM(t){var e=function(t,e){if("object"!=kM(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=kM(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==kM(e)?e:e+""}var jM=function(t){function e(t,n){var r,i,o,a,s;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),i=MM(this,e,[t,n]),o=i,s=function(t){var e=t.currentTarget.dataset.id;if(i.currentId!==e){i.currentId=e,i._currentPlayer&&(i._currentPlayer.player.pause(),i._currentPlayer.player.seek(0),i._currentPlayer.onEnded());var n=ti.timeline();n.to(i.top,{alpha:0,duration:.2},0),n.add((function(){i.itemsGallery.forEach((function(t){t.classList.toggle("active",t.dataset.id==e)})),i.mainVideos.forEach((function(t){t.classList.toggle("active",t.dataset.id==e),t.classList.contains("active")&&(i._currentPlayer=i.components.get(t.querySelector(".videoplayer")))}))}),.2),n.to(i.top,{alpha:1,duration:.2},.2)}},(a=BM(a="onClickItem"))in o?Object.defineProperty(o,a,{value:s,enumerable:!0,configurable:!0,writable:!0}):o[a]=s,i.top=t.querySelector(".top"),i.itemsGallery=PM(t.querySelectorAll(".right .item")),i.mainVideos=PM(t.querySelectorAll(".top .video")),i.currentId=null===(r=i.itemsGallery[0])||void 0===r?void 0:r.dataset.id,i}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&NM(t,e)}(e,t),n=e,(r=[{key:"init",value:function(){this.currentProgress=this.itemsGallery[0].querySelector(".progress-bar .bar"),this._currentPlayer=this.components.get(this.mainVideos[0].querySelector(".videoplayer"))}},{key:"attach",value:function(){var t=this;this.itemsGallery.forEach((function(e){e.addEventListener("click",t.onClickItem)}))}},{key:"detach",value:function(){var t=this;this.itemsGallery.forEach((function(e){e.removeEventListener("click",t.onClickItem)}))}}])&&OM(n.prototype,r),i&&OM(n,i),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,i}(Yp);function zM(t){return zM="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},zM(t)}function FM(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,QM(r.key),r)}}function UM(t,e,n){return e=GM(e),function(t,e){if(e&&("object"===zM(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,qM()?Reflect.construct(e,n||[],GM(t).constructor):e.apply(t,n))}function qM(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(qM=function(){return!!t})()}function GM(t){return GM=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},GM(t)}function HM(t,e){return HM=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},HM(t,e)}function VM(t,e,n){return(e=QM(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function QM(t){var e=function(t,e){if("object"!=zM(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=zM(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==zM(e)?e:e+""}var WM=function(t){function e(t,n){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),VM(r=UM(this,e,[t,n]),"mouseMove",(function(t){window.innerWidth<1024||r.moveEls.forEach((function(e,n){e.xTo((window.innerWidth/2-t.clientX)/(10+10*n)),e.yTo((window.innerHeight/2-t.clientY)/(10+10*n))}))})),VM(r,"resize",(function(){r.moveEls.forEach((function(t){t.xTo(0),t.yTo(0)}))})),VM(r,"clamp",(function(t,e,n){return Math.min(Math.max(t,e),n)})),VM(r,"gyro",(function(t){var e=r.clamp(r.idleBeta-t.beta,-40,40),n=r.clamp(t.gamma,-35,35);e/=15,n=-(n/=14),r.gyroEls.forEach((function(t,r){t.xTo(.05*n*window.innerWidth*(.2*(r+1))),t.yTo(.05*e*window.innerHeight*(.2*(r+1)))}))})),VM(r,"focus",(function(t){var e,n;null===(e=r.focusTl)||void 0===e||null===(n=e.kill)||void 0===n||n.call(e),r.focusTl=ti.timeline();var i="right"==t.currentTarget.dataset.side?-1:1;r.focusTl.to(r.imgsW,{x:2*i+"%",ease:"power1.inOut",duration:1.5},0)})),VM(r,"unfocus",(function(){var t,e;null===(t=r.focusTl)||void 0===t||null===(e=t.kill)||void 0===e||e.call(t),r.focusTl=ti.timeline(),r.focusTl.to(r.imgsW,{x:0,duration:1.5,ease:"power1.inOut"},0)})),VM(r,"open",(function(){var t=ti.timeline();return t.from([r.cLeft.el,r.cRight.el],{opacity:0,duration:1.3,ease:"none",stagger:.2},0),r.itemReveal.forEach((function(e){var n=e.dataset.delay?parseFloat(e.dataset.delay):0,r=e.dataset.y?parseFloat(e.dataset.y):30;0==r?(t.set(e,{alpha:0},0),t.fromTo(e,{alpha:0},{alpha:1,duration:1.4,ease:"none"},n)):(t.set(e,{y:0,alpha:0},0),t.fromTo(e,{y:r},{y:0,duration:2.4,ease:"power4.out"},n),t.fromTo(e,{alpha:0},{alpha:1,duration:1.4,ease:"none"},n))})),t})),r.cLeft={el:r.element.querySelector(".left")},r.cRight={el:r.element.querySelector(".right")},r.sTop={el:r.element.querySelector(".top")},r.sBot={el:r.element.querySelector(".bot")},r.sStat={el:r.element.querySelector(".static")},r.tLeft={el:r.element.querySelector(".c-left .choice")},r.tRight={el:r.element.querySelector(".c-right .choice")},r.moveEls=[r.sTop,r.sBot,r.cLeft,r.cRight],r.active=!1,r.gyroEls=[r.cLeft,r.cRight,r.sTop,r.sBot],r.imgsW=r.element.querySelector(".imgs-w"),r.idleBeta=50,r.itemReveal=r.element.querySelectorAll('[data-animation="reveal-open"]'),r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&HM(t,e)}(e,t),n=e,(r=[{key:"init",value:function(){this.cLeft.xTo=ti.quickTo(this.cLeft.el,"x",{duration:3.8,ease:"power4.out"}),this.cLeft.yTo=ti.quickTo(this.cLeft.el,"y",{duration:3.8,ease:"power4.out"}),this.cRight.xTo=ti.quickTo(this.cRight.el,"x",{duration:3.9,ease:"power4.out"}),this.cRight.yTo=ti.quickTo(this.cRight.el,"y",{duration:3.9,ease:"power4.out"}),this.sTop.xTo=ti.quickTo(this.sTop.el,"x",{duration:4.8,ease:"power4.out"}),this.sTop.yTo=ti.quickTo(this.sTop.el,"y",{duration:4.8,ease:"power4.out"}),this.sBot.xTo=ti.quickTo(this.sBot.el,"x",{duration:5.1,ease:"power4.out"}),this.sBot.yTo=ti.quickTo(this.sBot.el,"y",{duration:5.1,ease:"power4.out"})}},{key:"attach",value:function(){this.element.addEventListener("mousemove",this.mouseMove),this.element.addEventListener("resize",this.resize),this.element.addEventListener("deviceorientation",this.gyro),this.tLeft.el.addEventListener("mouseenter",this.focus),this.tLeft.el.addEventListener("mouseleave",this.unfocus),this.tRight.el.addEventListener("mouseenter",this.focus),this.tRight.el.addEventListener("mouseleave",this.unfocus)}},{key:"detach",value:function(){this.element.removeEventListener("mousemove",this.mouseMove),this.element.removeEventListener("resize",this.resize),this.element.removeEventListener("deviceorientation",this.gyro),this.tLeft.el.removeEventListener("mouseenter",this.focus),this.tLeft.el.removeEventListener("mouseleave",this.unfocus),this.tRight.el.removeEventListener("mouseenter",this.focus),this.tRight.el.removeEventListener("mouseleave",this.unfocus)}}])&&FM(n.prototype,r),i&&FM(n,i),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,i}(Yp);function YM(t){return YM="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},YM(t)}function KM(){KM=function(){return e};var t,e={},n=Object.prototype,r=n.hasOwnProperty,i=Object.defineProperty||function(t,e,n){t[e]=n.value},o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",s=o.asyncIterator||"@@asyncIterator",l=o.toStringTag||"@@toStringTag";function u(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,n){return t[e]=n}}function c(t,e,n,r){var o=e&&e.prototype instanceof v?e:v,a=Object.create(o.prototype),s=new P(r||[]);return i(a,"_invoke",{value:T(t,n,s)}),a}function d(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}e.wrap=c;var f="suspendedStart",h="suspendedYield",p="executing",m="completed",g={};function v(){}function y(){}function b(){}var _={};u(_,a,(function(){return this}));var w=Object.getPrototypeOf,A=w&&w(w(R([])));A&&A!==n&&r.call(A,a)&&(_=A);var E=b.prototype=v.prototype=Object.create(_);function x(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function S(t,e){function n(i,o,a,s){var l=d(t[i],t,o);if("throw"!==l.type){var u=l.arg,c=u.value;return c&&"object"==YM(c)&&r.call(c,"__await")?e.resolve(c.__await).then((function(t){n("next",t,a,s)}),(function(t){n("throw",t,a,s)})):e.resolve(c).then((function(t){u.value=t,a(u)}),(function(t){return n("throw",t,a,s)}))}s(l.arg)}var o;i(this,"_invoke",{value:function(t,r){function i(){return new e((function(e,i){n(t,r,e,i)}))}return o=o?o.then(i,i):i()}})}function T(e,n,r){var i=f;return function(o,a){if(i===p)throw Error("Generator is already running");if(i===m){if("throw"===o)throw a;return{value:t,done:!0}}for(r.method=o,r.arg=a;;){var s=r.delegate;if(s){var l=C(s,r);if(l){if(l===g)continue;return l}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(i===f)throw i=m,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);i=p;var u=d(e,n,r);if("normal"===u.type){if(i=r.done?m:h,u.arg===g)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(i=m,r.method="throw",r.arg=u.arg)}}}function C(e,n){var r=n.method,i=e.iterator[r];if(i===t)return n.delegate=null,"throw"===r&&e.iterator.return&&(n.method="return",n.arg=t,C(e,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),g;var o=d(i,e.iterator,n.arg);if("throw"===o.type)return n.method="throw",n.arg=o.arg,n.delegate=null,g;var a=o.arg;return a?a.done?(n[e.resultName]=a.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=t),n.delegate=null,g):a:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,g)}function I(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function k(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function P(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(I,this),this.reset(!0)}function R(e){if(e||""===e){var n=e[a];if(n)return n.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var i=-1,o=function n(){for(;++i<e.length;)if(r.call(e,i))return n.value=e[i],n.done=!1,n;return n.value=t,n.done=!0,n};return o.next=o}}throw new TypeError(YM(e)+" is not iterable")}return y.prototype=b,i(E,"constructor",{value:b,configurable:!0}),i(b,"constructor",{value:y,configurable:!0}),y.displayName=u(b,l,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===y||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,b):(t.__proto__=b,u(t,l,"GeneratorFunction")),t.prototype=Object.create(E),t},e.awrap=function(t){return{__await:t}},x(S.prototype),u(S.prototype,s,(function(){return this})),e.AsyncIterator=S,e.async=function(t,n,r,i,o){void 0===o&&(o=Promise);var a=new S(c(t,n,r,i),o);return e.isGeneratorFunction(n)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},x(E),u(E,l,"Generator"),u(E,a,(function(){return this})),u(E,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),n=[];for(var r in e)n.push(r);return n.reverse(),function t(){for(;n.length;){var r=n.pop();if(r in e)return t.value=r,t.done=!1,t}return t.done=!0,t}},e.values=R,P.prototype={constructor:P,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(k),!e)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function i(r,i){return s.type="throw",s.arg=e,n.next=r,i&&(n.method="next",n.arg=t),!!i}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],s=a.completion;if("root"===a.tryLoc)return i("end");if(a.tryLoc<=this.prev){var l=r.call(a,"catchLoc"),u=r.call(a,"finallyLoc");if(l&&u){if(this.prev<a.catchLoc)return i(a.catchLoc,!0);if(this.prev<a.finallyLoc)return i(a.finallyLoc)}else if(l){if(this.prev<a.catchLoc)return i(a.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return i(a.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=t,a.arg=e,o?(this.method="next",this.next=o.finallyLoc,g):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),g},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),k(n),g}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var i=r.arg;k(n)}return i}}throw Error("illegal catch attempt")},delegateYield:function(e,n,r){return this.delegate={iterator:R(e),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=t),g}},e}function XM(t){return function(t){if(Array.isArray(t))return $M(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return $M(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return $M(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function $M(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function ZM(t,e,n,r,i,o,a){try{var s=t[o](a),l=s.value}catch(t){return void n(t)}s.done?e(l):Promise.resolve(l).then(r,i)}function JM(t){return function(){var e=this,n=arguments;return new Promise((function(r,i){var o=t.apply(e,n);function a(t){ZM(o,r,i,a,s,"next",t)}function s(t){ZM(o,r,i,a,s,"throw",t)}a(void 0)}))}}function tL(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,aL(r.key),r)}}function eL(t,e,n){return e=rL(e),function(t,e){if(e&&("object"===YM(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,nL()?Reflect.construct(e,n||[],rL(t).constructor):e.apply(t,n))}function nL(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(nL=function(){return!!t})()}function rL(t){return rL=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},rL(t)}function iL(t,e){return iL=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},iL(t,e)}function oL(t,e,n){return(e=aL(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function aL(t){var e=function(t,e){if("object"!=YM(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=YM(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==YM(e)?e:e+""}var sL=function(t){function e(t,n){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),oL(r=eL(this,e,[t,n]),"onResetFilters",(function(){r.filterCtas.forEach((function(t){return t.classList.remove("active")})),r.onToggleFilterDebounced(!0)})),oL(r,"onToggleFilter",(function(t){var e=t.currentTarget,n=-1!==r.filterCtasDk.indexOf(e)?r.filterCtasDk.indexOf(e):r.filterCtasMb.indexOf(e),i=r.selectedFilter;r.selectedFilter=n,i&&(r.filterCtasDk[i].classList.toggle("active",!1),r.filterCtasMb[i].classList.toggle("active",!1)),r.filterCtasDk[r.selectedFilter].classList.toggle("active",!0),r.filterCtasMb[r.selectedFilter].classList.toggle("active",!0),r.onToggleFilterDebounced()})),oL(r,"onToggleFilterDebounced",JM(KM().mark((function t(){var e,n,i,o,a=arguments;return KM().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=a.length>0&&void 0!==a[0]&&a[0],r.selectedFilters=[],r.searchInputComponent&&r.searchInputComponent.searchString&&(r.searchString="",(i=document.querySelector("input.search-input"))&&(i.value="",r.searchInputComponent.searchString="")),XM(document.querySelectorAll(".new-filters-w button.active")).forEach((function(t){r.selectedFilters.push(t.dataset.id)})),r.page=1,t.next=8,r.call();case 8:o=t.sent,document.dispatchEvent(r.customEvtLoaded),o.includes("No content has been found")&&document.dispatchEvent(r.customEvtNoResults),null===(e=r.tl)||void 0===e||e.kill(),r.tl=ti.timeline(),r.tl.add((function(){if(r.cardsWrapper.innerHTML=o,r.components.setup(),r.loadMoreBtn)if(r.cardsWrapper.querySelector(".remove-loadmore-button")){var t=ti.timeline();t.to(r.loadMoreBtn,{alpha:0,pointerEvents:"none"}),t.set(r.loadMoreBtn,{display:"none"})}else{var e=ti.timeline();e.set(r.loadMoreBtn,{display:""}),e.to(r.loadMoreBtn,{alpha:1,pointerEvents:"all"})}}),.5),n?r.tl.to(r.element,{duration:1.2,opacity:1,ease:"none"},.6):(r.tl.fromTo(r.element,{opacity:0},{duration:1.2,opacity:1,ease:"none"},.6),r.emit("toggle-search-filter"));case 15:case"end":return t.stop()}}),t)})))),oL(r,"onSearch",JM(KM().mark((function t(){var e,n,i,o,a,s,l;return KM().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r.searchString="",null===(e=r.filtersBtn)||void 0===e||e.forEach((function(t){t.classList.remove("active")})),r.page=1,r.searchInputComponent&&r.searchInputComponent.searchString&&(r.searchString=r.searchInputComponent.searchString),r.selectedFilter&&(null===(i=r.filterCtasDk[r.selectedFilter])||void 0===i||i.classList.toggle("active",!1),null===(o=r.filterCtasMb[r.selectedFilter])||void 0===o||o.classList.toggle("active",!1),r.selectedFilter=null,r.selectedFilters=[]),null===(n=r.tl)||void 0===n||n.kill(),r.tl=ti.timeline(),r.tl.to(r.element,{opacity:0,ease:"none",duration:.6}),t.next=10,r.call();case 10:a=t.sent,document.dispatchEvent(r.customEvtLoaded),a.includes("No content has been found")&&document.dispatchEvent(r.customEvtNoResults),r.cardsWrapper.innerHTML=a,r.tl.to(r.element,{opacity:1,ease:"none",duration:.6}),r.loadMoreBtn&&(r.cardsWrapper.querySelector(".remove-loadmore-button")?((s=ti.timeline()).to(r.loadMoreBtn,{alpha:0,pointerEvents:"none"}),s.set(r.loadMoreBtn,{display:"none"})):((l=ti.timeline()).set(r.loadMoreBtn,{display:""}),l.to(r.loadMoreBtn,{alpha:1,pointerEvents:"all"})));case 16:case"end":return t.stop()}}),t)})))),oL(r,"loadMore",JM(KM().mark((function t(){var e,n,i,o,a,s;return KM().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(null===(e=r.loadMoreBtn)||void 0===e||!e.classList.contains("disabled")){t.next=2;break}return t.abrupt("return");case 2:return null===(n=r.loadMoreBtn)||void 0===n||n.classList.add("disabled"),r.page++,t.next=6,r.call();case 6:o=t.sent,document.dispatchEvent(r.customEvtLoaded),o.includes("No content has been found")&&document.dispatchEvent(r.customEvtNoResults),a=Array.from(r.cardsWrapper.querySelectorAll(".product-card")),r.cardsWrapper.insertAdjacentHTML("beforeend",o),(s=Array.from(r.cardsWrapper.querySelectorAll(".product-card"))).splice(0,a.length),null===(i=r.tl)||void 0===i||i.kill(),r.tl=ti.timeline(),r.tl.fromTo(s,{opacity:0},{opacity:1,duration:1.6,ease:"none",stagger:.15},0),r.tl.fromTo(s,{y:30},{y:0,duration:1.3,ease:"expo.out",immediateRender:!1,clearProps:"transform",stagger:.15},0),r.tl.add((function(){var t;if(r.components.setup(),null===(t=r.loadMoreBtn)||void 0===t||t.classList.remove("disabled"),r.cardsWrapper.querySelector(".remove-loadmore-button")){var e=ti.timeline();e.to(r.loadMoreBtn,{alpha:0,pointerEvents:"none"}),e.set(r.loadMoreBtn,{display:"none"})}}),.3);case 18:case"end":return t.stop()}}),t)})))),oL(r,"call",JM(KM().mark((function t(){var e,n;return KM().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e={action:"david_search",postType:r.postType,page:r.page},r.selectedFilters.length>0&&(e.themes=r.selectedFilters),r.searchInputComponent&&r.searchInputComponent.searchString&&(e.searchString=r.searchInputComponent.searchString),t.next=5,fetch(ADMIN_AJAX_URL,{method:"POST",credentials:"include",headers:{"Content-type":"application/x-www-form-urlencoded"},body:new URLSearchParams(e).toString()});case 5:return n=t.sent,t.abrupt("return",n.text());case 7:case"end":return t.stop()}}),t)})))),r.searchInput=document.querySelector('[data-component="SearchInput"]'),r.loadMoreBtn=r.element.querySelector(".loadmore-button"),r.cardsWrapper=r.element.querySelector(".cards-w"),r.postType=r.element.dataset.type,r.options=[],r.page=1,r.searchString="",r.filterCtasDk=XM(document.querySelectorAll(".new-filters-w button")),r.filterCtasMb=XM(document.querySelectorAll(".new-filters-w-mb button")),r.filterCtas=[].concat(XM(r.filterCtasDk),XM(r.filterCtasMb)),r.selectedFilter=null,r.selectedFilters=[],r.filterResetCtasDk=document.querySelector(".new-filters-w .new-filters-header button"),r.filterResetCtasMb=document.querySelector(".new-filters-w-mb .new-filters-header button"),r.filterResetCtas=[r.filterResetCtasDk,r.filterResetCtasMb],r.customEvtNoResults=new CustomEvent("noResults",{detail:{type:r.postType}}),r.customEvtLoaded=new CustomEvent("eventLoaded",{detail:{type:r.postType}}),r.onToggleFilterDebounced=VC()(r.onToggleFilterDebounced,800),r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&iL(t,e)}(e,t),n=e,(r=[{key:"init",value:function(){this.searchInputComponent=this.components.get(this.searchInput)}},{key:"attach",value:function(){var t,e,n,r=this;null===(t=this.filterCtas)||void 0===t||t.forEach((function(t){t.addEventListener("click",r.onToggleFilter)})),null===(e=this.filterResetCtas)||void 0===e||e.forEach((function(t){t.addEventListener("click",r.onResetFilters)})),null===(n=this.loadMoreBtn)||void 0===n||n.addEventListener("click",this.loadMore),this.searchInputComponent&&this.searchInputComponent.on("search-input",this.onSearch)}},{key:"detach",value:function(){var t,e,n,r=this;null===(t=this.filterCtas)||void 0===t||t.forEach((function(t){t.removeEventListener("click",r.onToggleFilter)})),null===(e=this.filterResetCtas)||void 0===e||e.forEach((function(t){t.removeEventListener("click",r.onResetFilters)})),null===(n=this.loadMoreBtn)||void 0===n||n.removeEventListener("click",this.loadMore),this.searchInputComponent&&this.searchInputComponent.off("search-input",this.onSearch)}}])&&tL(n.prototype,r),i&&tL(n,i),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,i}(Yp);function lL(t){return lL="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},lL(t)}function uL(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,pL(r.key),r)}}function cL(t,e,n){return e=fL(e),function(t,e){if(e&&("object"===lL(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,dL()?Reflect.construct(e,n||[],fL(t).constructor):e.apply(t,n))}function dL(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(dL=function(){return!!t})()}function fL(t){return fL=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},fL(t)}function hL(t,e){return hL=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},hL(t,e)}function pL(t){var e=function(t,e){if("object"!=lL(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=lL(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==lL(e)?e:e+""}var mL=function(t){function e(t,n){var r,i,o,a;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),r=cL(this,e,[t,n]),i=r,a=function(){r.timeOut&&clearTimeout(r.timeOut),r.searchString=r.element.value,r.timeOut=setTimeout((function(){r.emit("search-input")}),1e3)},(o=pL(o="updateValue"))in i?Object.defineProperty(i,o,{value:a,enumerable:!0,configurable:!0,writable:!0}):i[o]=a,r.searchString=null,r.timeOut=null,r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&hL(t,e)}(e,t),n=e,(r=[{key:"attach",value:function(){this.element.addEventListener("input",this.updateValue)}},{key:"detach",value:function(){this.element.addEventListener("input",this.updateValue)}}])&&uL(n.prototype,r),i&&uL(n,i),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,i}(Yp);function gL(t){return gL="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},gL(t)}function vL(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,EL(r.key),r)}}function yL(t,e,n){return e=_L(e),function(t,e){if(e&&("object"===gL(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,bL()?Reflect.construct(e,n||[],_L(t).constructor):e.apply(t,n))}function bL(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(bL=function(){return!!t})()}function _L(t){return _L=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},_L(t)}function wL(t,e){return wL=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},wL(t,e)}function AL(t,e,n){return(e=EL(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function EL(t){var e=function(t,e){if("object"!=gL(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=gL(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==gL(e)?e:e+""}var xL=function(t){function e(t,n){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),AL(r=yL(this,e,[t,n]),"mouseMove",(function(t){var e,n;(r.xToIn(t.clientX),r.yToIn(t.clientY),r.xToOut(t.clientX),r.yToOut(t.clientY),r.xToText(t.clientX),r.yToText(t.clientY),null!==(e=r.experienceComponent.experienceManager)&&void 0!==e&&e.isOverPoem)?r.hoverWithText():(r.leaveWithText(),null!==(n=r.experienceComponent.experienceManager)&&void 0!==n&&n.isOverPaiting?r.hoverPainting():r.leavePainting())})),AL(r,"mouseDown",(function(t){var e;null!==(e=r.experienceComponent.experienceManager)&&void 0!==e&&e.isOverPaiting?r.longpressOn():r.leave()})),AL(r,"mouseUp",(function(t){r.longpressOff()})),AL(r,"onExperienceStart",(function(){r.loaderComponent.off("start-watercolor-scene",r.onExperienceStart),ti.timeline().add(r.leaveLoading,.5)})),AL(r,"leaveLoading",(function(t){r.isLoading&&(r.isLoading=!0,r.element.classList.remove("loading"))})),AL(r,"hover",(function(t){r.isHover||(r.isHover=!0,r.element.classList.add("hover"),r.leavePainting(),r.leaveWithText())})),AL(r,"leave",(function(){r.isHover&&(r.isHover=!1,r.element.classList.remove("hover"))})),AL(r,"hoverWithText",(function(t){var e;r.isHoverWithText||(r.isHoverWithText=!0,r.element.classList.add("hoverWithText"),null===(e=r.textTl)||void 0===e||e.kill(),r.textTl=ti.timeline(),r.textTl.to(r.splitedText.chars,{opacity:1,duration:.4,stagger:.02}),r.leave(),r.leavePainting())})),AL(r,"leaveWithText",(function(){var t;r.isHoverWithText&&(r.isHoverWithText=!1,r.element.classList.remove("hoverWithText"),null===(t=r.textTl)||void 0===t||t.kill(),r.textTl=ti.timeline(),r.textTl.to(r.splitedText.chars,{opacity:0,duration:.1,stagger:.02}))})),AL(r,"longpressOn",(function(){r.isLongpressed||(r.isLongpressed=!0,r.element.classList.add("longpressed"))})),AL(r,"longpressOff",(function(){r.isLongpressed&&(r.isLongpressed=!1,r.element.classList.remove("longpressed"))})),AL(r,"hoverPainting",(function(){r.isHoverPainting||r.isHover||(r.isHoverPainting=!0,r.element.classList.add("hoverPainting"),r.leave(),r.leaveWithText())})),AL(r,"leavePainting",(function(){r.isHoverPainting&&(r.isHoverPainting=!1,r.element.classList.remove("hoverPainting"))})),r.hoverElements=document.querySelectorAll("[data-hover]"),r.innerCircle=r.element.querySelector(".inner-circle"),r.outerCircle=r.element.querySelector(".outer-circle"),r.hoverTextWrapper=r.element.querySelector(".hover-text"),r.hoverText=r.element.querySelector(".hover-text p"),r.innerCircle.style.willChange="transform",r.outerCircle.style.willChange="transform",r.hoverTextWrapper.style.willChange="transform",r.experienceElement=document.querySelector('[data-component="WatercolorExperience"]'),r.loaderElement=document.querySelector('[data-component="LoaderExperience"]'),r.isLoading=!0,r.isHover=!1,r.isHoverWithText=!1,r.isLongpressed=!1,r.isHoverPainting=!1,r.textTl=null,r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&wL(t,e)}(e,t),n=e,(r=[{key:"init",value:function(){this.experienceComponent=this.components.get(this.experienceElement),this.loaderComponent=this.components.get(this.loaderElement),this.xToIn=ti.quickTo(this.innerCircle,"x",{duration:.2,ease:"power3.out"}),this.yToIn=ti.quickTo(this.innerCircle,"y",{duration:.2,ease:"power3.out"}),this.xToOut=ti.quickTo(this.outerCircle,"x",{duration:.5,ease:"power3.out"}),this.yToOut=ti.quickTo(this.outerCircle,"y",{duration:.5,ease:"power3.out"}),this.xToText=ti.quickTo(this.hoverTextWrapper,"x",{duration:.45,ease:"power3.out"}),this.yToText=ti.quickTo(this.hoverTextWrapper,"y",{duration:.45,ease:"power3.out"}),this.splitedText=new Fs(this.hoverText,{type:"chars",charsClass:"char-anim"})}},{key:"attach",value:function(){var t=this;window.addEventListener("mousemove",this.mouseMove),window.addEventListener("mousedown",this.mouseDown),window.addEventListener("mouseup",this.mouseUp),this.hoverElements.forEach((function(e){e.addEventListener("mouseover",t.hover),e.addEventListener("mouseleave",t.leave)})),this.loaderComponent.on("start-watercolor-scene",this.onExperienceStart)}},{key:"detach",value:function(){var t=this;window.removeEventListener("mousemove",this.mouseMove),window.removeEventListener("mousedown",this.mouseDown),window.removeEventListener("mouseup",this.mouseUp),this.hoverElements.forEach((function(e){e.removeEventListener("mouseover",t.hover),e.removeEventListener("mouseleave",t.leave)})),this.loaderComponent.off("start-watercolor-scene",this.onExperienceStart)}}])&&vL(n.prototype,r),i&&vL(n,i),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,i}(Yp);function SL(t){return SL="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},SL(t)}function TL(){TL=function(){return e};var t,e={},n=Object.prototype,r=n.hasOwnProperty,i=Object.defineProperty||function(t,e,n){t[e]=n.value},o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",s=o.asyncIterator||"@@asyncIterator",l=o.toStringTag||"@@toStringTag";function u(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,n){return t[e]=n}}function c(t,e,n,r){var o=e&&e.prototype instanceof v?e:v,a=Object.create(o.prototype),s=new P(r||[]);return i(a,"_invoke",{value:T(t,n,s)}),a}function d(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}e.wrap=c;var f="suspendedStart",h="suspendedYield",p="executing",m="completed",g={};function v(){}function y(){}function b(){}var _={};u(_,a,(function(){return this}));var w=Object.getPrototypeOf,A=w&&w(w(R([])));A&&A!==n&&r.call(A,a)&&(_=A);var E=b.prototype=v.prototype=Object.create(_);function x(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function S(t,e){function n(i,o,a,s){var l=d(t[i],t,o);if("throw"!==l.type){var u=l.arg,c=u.value;return c&&"object"==SL(c)&&r.call(c,"__await")?e.resolve(c.__await).then((function(t){n("next",t,a,s)}),(function(t){n("throw",t,a,s)})):e.resolve(c).then((function(t){u.value=t,a(u)}),(function(t){return n("throw",t,a,s)}))}s(l.arg)}var o;i(this,"_invoke",{value:function(t,r){function i(){return new e((function(e,i){n(t,r,e,i)}))}return o=o?o.then(i,i):i()}})}function T(e,n,r){var i=f;return function(o,a){if(i===p)throw Error("Generator is already running");if(i===m){if("throw"===o)throw a;return{value:t,done:!0}}for(r.method=o,r.arg=a;;){var s=r.delegate;if(s){var l=C(s,r);if(l){if(l===g)continue;return l}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(i===f)throw i=m,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);i=p;var u=d(e,n,r);if("normal"===u.type){if(i=r.done?m:h,u.arg===g)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(i=m,r.method="throw",r.arg=u.arg)}}}function C(e,n){var r=n.method,i=e.iterator[r];if(i===t)return n.delegate=null,"throw"===r&&e.iterator.return&&(n.method="return",n.arg=t,C(e,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),g;var o=d(i,e.iterator,n.arg);if("throw"===o.type)return n.method="throw",n.arg=o.arg,n.delegate=null,g;var a=o.arg;return a?a.done?(n[e.resultName]=a.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=t),n.delegate=null,g):a:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,g)}function I(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function k(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function P(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(I,this),this.reset(!0)}function R(e){if(e||""===e){var n=e[a];if(n)return n.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var i=-1,o=function n(){for(;++i<e.length;)if(r.call(e,i))return n.value=e[i],n.done=!1,n;return n.value=t,n.done=!0,n};return o.next=o}}throw new TypeError(SL(e)+" is not iterable")}return y.prototype=b,i(E,"constructor",{value:b,configurable:!0}),i(b,"constructor",{value:y,configurable:!0}),y.displayName=u(b,l,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===y||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,b):(t.__proto__=b,u(t,l,"GeneratorFunction")),t.prototype=Object.create(E),t},e.awrap=function(t){return{__await:t}},x(S.prototype),u(S.prototype,s,(function(){return this})),e.AsyncIterator=S,e.async=function(t,n,r,i,o){void 0===o&&(o=Promise);var a=new S(c(t,n,r,i),o);return e.isGeneratorFunction(n)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},x(E),u(E,l,"Generator"),u(E,a,(function(){return this})),u(E,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),n=[];for(var r in e)n.push(r);return n.reverse(),function t(){for(;n.length;){var r=n.pop();if(r in e)return t.value=r,t.done=!1,t}return t.done=!0,t}},e.values=R,P.prototype={constructor:P,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(k),!e)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function i(r,i){return s.type="throw",s.arg=e,n.next=r,i&&(n.method="next",n.arg=t),!!i}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],s=a.completion;if("root"===a.tryLoc)return i("end");if(a.tryLoc<=this.prev){var l=r.call(a,"catchLoc"),u=r.call(a,"finallyLoc");if(l&&u){if(this.prev<a.catchLoc)return i(a.catchLoc,!0);if(this.prev<a.finallyLoc)return i(a.finallyLoc)}else if(l){if(this.prev<a.catchLoc)return i(a.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return i(a.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=t,a.arg=e,o?(this.method="next",this.next=o.finallyLoc,g):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),g},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),k(n),g}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var i=r.arg;k(n)}return i}}throw Error("illegal catch attempt")},delegateYield:function(e,n,r){return this.delegate={iterator:R(e),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=t),g}},e}function CL(t,e,n,r,i,o,a){try{var s=t[o](a),l=s.value}catch(t){return void n(t)}s.done?e(l):Promise.resolve(l).then(r,i)}function IL(t){return function(){var e=this,n=arguments;return new Promise((function(r,i){var o=t.apply(e,n);function a(t){CL(o,r,i,a,s,"next",t)}function s(t){CL(o,r,i,a,s,"throw",t)}a(void 0)}))}}function kL(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,DL(r.key),r)}}function PL(t,e,n){return e=OL(e),function(t,e){if(e&&("object"===SL(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,RL()?Reflect.construct(e,n||[],OL(t).constructor):e.apply(t,n))}function RL(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(RL=function(){return!!t})()}function OL(t){return OL=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},OL(t)}function ML(t,e){return ML=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},ML(t,e)}function LL(t,e,n){return(e=DL(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function DL(t){var e=function(t,e){if("object"!=SL(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=SL(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==SL(e)?e:e+""}var NL=function(t){function e(t,n){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),LL(r=PL(this,e,[t,n]),"showConfirmation",(function(){var t=ti.timeline();t.to(r.sendButton,{opacity:0,duration:.6,ease:"none"}),t.set(r.sendButton,{display:"none"});var e=document.createElement("p");e.classList.add("confirmation-text"),e.style.opacity=0,e.appendChild(document.createTextNode("Message sent successfully")),t.add((function(){r.sendButton.parentNode.insertBefore(e,r.sendButton)})),t.to(e,{opacity:1,duration:.6,ease:"none"})})),LL(r,"onSubmit",(function(t){t.preventDefault(),r.isSubmitted||(r.isCaptchaActive?hcaptcha.execute(r.hCaptchaContactAccountId,{async:!0}).then((function(t){var e=t.response;e&&(r.hCaptchaValue=e,r.sendMessage())})).catch((function(t){console.log("error while validating captcha")})):r.sendMessage())})),LL(r,"sendMessage",IL(TL().mark((function t(){var e,n,i,o;return TL().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!r.isSubmitted){t.next=2;break}return t.abrupt("return");case 2:if(e=r.textArea.value){t.next=5;break}return t.abrupt("return");case 5:return n=r.element.dataset.accountName,i=r.element.dataset.accountEmail,r.sendButton.style.pointerEvents="none",r.textArea.style.pointerEvents="none",r.isSubmitted=!0,o={name:n,email:i,message:e,hCaptchaValue:r.hCaptchaValue?r.hCaptchaValue:""},t.next=13,fetch(window.location.origin+"/wp-json/contact/send-question",{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify(o)});case 13:t.sent,r.showConfirmation();case 15:case"end":return t.stop()}}),t)})))),r.sendButton=r.element.querySelector(".send-button"),r.textArea=r.element.querySelector(".form-textarea"),r.hCaptchaContactAccount=r.element.querySelector(".h-captcha-contact-account"),r.hCaptchaValue="",r.isCaptchaActive="true"===r.element.getAttribute("data-is-captcha-active")&&void 0!==hcaptcha&&null!==hcaptcha,r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&ML(t,e)}(e,t),n=e,(r=[{key:"attach",value:function(){this.hCaptchaContactAccount&&this.isCaptchaActive&&(this.hCaptchaContactAccount.classList.add("h-captcha"),this.hCaptchaContactAccountId=hcaptcha.render(this.hCaptchaContactAccount,{sitekey:"072e84bc-74bc-4b60-837e-1224b03856c6"})),this.sendButton.addEventListener("click",this.onSubmit)}},{key:"detach",value:function(){this.sendButton.removeEventListener("click",this.onSubmit)}}])&&kL(n.prototype,r),i&&kL(n,i),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,i}(Yp);function BL(t){return BL="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},BL(t)}function jL(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,GL(r.key),r)}}function zL(t,e,n){return e=UL(e),function(t,e){if(e&&("object"===BL(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,FL()?Reflect.construct(e,n||[],UL(t).constructor):e.apply(t,n))}function FL(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(FL=function(){return!!t})()}function UL(t){return UL=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},UL(t)}function qL(t,e){return qL=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},qL(t,e)}function GL(t){var e=function(t,e){if("object"!=BL(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=BL(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==BL(e)?e:e+""}var HL=function(t){function e(t,n){var r,i,o,a;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),r=zL(this,e,[t,n]),i=r,a=function(){var t="password"===r.input.getAttribute("type")?"text":"password";r.input.setAttribute("type",t),r.toggleButton.classList.toggle("active")},(o=GL(o="toggleVisibility"))in i?Object.defineProperty(i,o,{value:a,enumerable:!0,configurable:!0,writable:!0}):i[o]=a,r.toggleButton=r.element.querySelector(".toggle-visibility"),r.input=r.element.querySelector("input"),r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&qL(t,e)}(e,t),n=e,(r=[{key:"init",value:function(){}},{key:"attach",value:function(){this.toggleButton.addEventListener("click",this.toggleVisibility)}},{key:"detach",value:function(){this.toggleButton.removeEventListener("click",this.toggleVisibility)}}])&&jL(n.prototype,r),i&&jL(n,i),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,i}(Yp);function VL(t){return VL="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},VL(t)}function QL(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,ZL(r.key),r)}}function WL(t,e,n){return e=KL(e),function(t,e){if(e&&("object"===VL(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,YL()?Reflect.construct(e,n||[],KL(t).constructor):e.apply(t,n))}function YL(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(YL=function(){return!!t})()}function KL(t){return KL=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},KL(t)}function XL(t,e){return XL=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},XL(t,e)}function $L(t,e,n){return(e=ZL(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function ZL(t){var e=function(t,e){if("object"!=VL(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=VL(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==VL(e)?e:e+""}var JL=function(t){function e(t,n){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),$L(r=WL(this,e,[t,n]),"buttonEnter",(function(){r.skiesW.classList.add("hover")})),$L(r,"buttonLeave",(function(){r.skiesW.classList.remove("hover")})),r.sTop={el:r.element.querySelector(".top")},r.sBot={el:r.element.querySelector(".bot")},r.bgMap=r.element.querySelector(".bg-map"),r.button=r.element.querySelector(".see-on-map-button"),r.skiesW=r.element.querySelector(".skies-w"),r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&XL(t,e)}(e,t),n=e,(r=[{key:"init",value:function(){this.st=ti.timeline({scrollTrigger:{trigger:this.element,start:"top bottom",end:"bottom bottom",scrub:3}}),ti.set([this.sTop.el,this.sBot.el],{scale:1.1}),this.st.fromTo(this.sTop.el,{yPercent:4,xPercent:-4},{yPercent:-4,xPercent:4,ease:"none"},0),this.st.fromTo(this.sBot.el,{yPercent:-4,xPercent:4},{yPercent:4,xPercent:-4,ease:"none"},0),this.st.fromTo(this.bgMap,{scale:1.3},{scale:1.05,ease:"none"},0)}},{key:"attach",value:function(){this.button.addEventListener("mouseenter",this.buttonEnter),this.button.addEventListener("mouseleave",this.buttonLeave)}},{key:"detach",value:function(){this.button.removeEventListener("mouseenter",this.buttonEnter),this.button.removeEventListener("mouseleave",this.buttonLeave)}}])&&QL(n.prototype,r),i&&QL(n,i),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,i}(Yp);function tD(t){return tD="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},tD(t)}function eD(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,nD(r.key),r)}}function nD(t){var e=function(t,e){if("object"!=tD(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=tD(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==tD(e)?e:e+""}function rD(t,e,n){return e=oD(e),function(t,e){if(e&&("object"===tD(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,iD()?Reflect.construct(e,n||[],oD(t).constructor):e.apply(t,n))}function iD(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(iD=function(){return!!t})()}function oD(t){return oD=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},oD(t)}function aD(t,e){return aD=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},aD(t,e)}var sD=function(t){function e(t,n){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),rD(this,e,[t,n])}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&aD(t,e)}(e,t),n=e,(r=[{key:"init",value:function(){var t=this;new ti.timeline({scrollTrigger:{trigger:this.element,onEnter:function(){return t.element.play()},onEnterBack:function(){return t.element.play()},onLeave:function(){return t.element.pause()},onLeaveBack:function(){return t.element.pause()}}})}},{key:"attach",value:function(){}},{key:"detach",value:function(){}}])&&eD(n.prototype,r),i&&eD(n,i),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,i}(Yp);function lD(t){return lD="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},lD(t)}function uD(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,mD(r.key),r)}}function cD(t,e,n){return e=fD(e),function(t,e){if(e&&("object"===lD(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,dD()?Reflect.construct(e,n||[],fD(t).constructor):e.apply(t,n))}function dD(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(dD=function(){return!!t})()}function fD(t){return fD=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},fD(t)}function hD(t,e){return hD=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},hD(t,e)}function pD(t,e,n){return(e=mD(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function mD(t){var e=function(t,e){if("object"!=lD(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=lD(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==lD(e)?e:e+""}var gD=function(t){function e(t,n){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),pD(r=cD(this,e,[t,n]),"timelineClick",(function(t){var e=window.getComputedStyle(r.timeline).width,n=t.offsetX/parseInt(e)*r.audio.duration;r.audio.currentTime=n})),pD(r,"volumeSliderClick",(function(t){var e=window.getComputedStyle(r.volumeSlider).width,n=t.offsetX/parseInt(e);r.audio.volume=n,r.element.querySelector(".controls .volume-percentage").style.width=100*n+"%"})),pD(r,"playButtonClick",(function(){r.audio.paused?(r.playBtn.classList.remove("play"),r.playBtn.classList.add("pause"),r.audio.play()):(r.playBtn.classList.remove("pause"),r.playBtn.classList.add("play"),r.audio.pause())})),pD(r,"updateProgress",(function(){var t=100*r.audio.currentTime/r.audio.duration;r.progressBar.style.width=t+"%",r.textCurrent.textContent=r.getTimeCodeFromNum(r.audio.currentTime)})),pD(r,"audioEnd",(function(){r.playBtn.classList.remove("pause"),r.playBtn.classList.add("play")})),pD(r,"loadedData",(function(){r.element.querySelector(".length").textContent=r.getTimeCodeFromNum(r.audio.duration),r.audio.volume=.25})),pD(r,"volumeButtonClick",(function(){r.audio.muted=!r.audio.muted,r.audio.muted?r.volumeButton.classList.add("mute"):r.volumeButton.classList.remove("mute")})),pD(r,"toggleVisibility",(function(){r.closed?(r.element.classList.remove("hidden"),r.audio.paused&&r.playButtonClick()):(r.element.classList.add("hidden"),r.audio.paused||r.playButtonClick()),r.closed=!r.closed})),r.audio=new Audio(r.element.dataset.src),r.timeline=r.element.querySelector(".timeline"),r.volumeSlider=r.element.querySelector(".controls .volume-slider"),r.playBtn=r.element.querySelector(".controls .toggle-play"),r.volumeButton=r.element.querySelector(".volume-button"),r.progressBar=r.element.querySelector(".progress"),r.firstButton=r.element.parentElement.querySelector(".audio-first-button"),r.textCurrent=r.element.querySelector(".current"),r.closed=!0,r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&hD(t,e)}(e,t),n=e,(r=[{key:"getTimeCodeFromNum",value:function(t){var e=parseInt(t),n=parseInt(e/60);e-=60*n;var r=parseInt(n/60);return n-=60*r,0===r?"".concat(n,":").concat(String(e%60).padStart(2,0)):"".concat(String(r).padStart(2,0),":").concat(n,":").concat(String(e%60).padStart(2,0))}},{key:"attach",value:function(){var t;this.audio&&this.audio.addEventListener("loadeddata",this.loadedData),this.volumeButton.addEventListener("click",this.volumeButtonClick),this.timeline.addEventListener("click",this.timelineClick),this.playBtn.addEventListener("click",this.playButtonClick),null===(t=this.firstButton)||void 0===t||t.addEventListener("click",this.toggleVisibility),this.audio.addEventListener("ended",this.audioEnd),this.audio.addEventListener("timeupdate",this.updateProgress)}},{key:"detach",value:function(){var t;this.audio&&this.audio.removeEventListener("loadeddata",this.loadedData),this.volumeButton.removeEventListener("click",this.volumeButtonClick),this.timeline.removeEventListener("click",this.timelineClick),this.playBtn.removeEventListener("click",this.playButtonClick),null===(t=this.firstButton)||void 0===t||t.removeEventListener("click",this.toggleVisibility),this.audio.removeEventListener("ended",this.audioEnd),this.audio.removeEventListener("timeupdate",this.updateProgress),this.audio.src=""}}])&&uD(n.prototype,r),i&&uD(n,i),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,i}(Yp);function vD(t){return vD="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},vD(t)}function yD(){yD=function(){return e};var t,e={},n=Object.prototype,r=n.hasOwnProperty,i=Object.defineProperty||function(t,e,n){t[e]=n.value},o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",s=o.asyncIterator||"@@asyncIterator",l=o.toStringTag||"@@toStringTag";function u(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,n){return t[e]=n}}function c(t,e,n,r){var o=e&&e.prototype instanceof v?e:v,a=Object.create(o.prototype),s=new P(r||[]);return i(a,"_invoke",{value:T(t,n,s)}),a}function d(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}e.wrap=c;var f="suspendedStart",h="suspendedYield",p="executing",m="completed",g={};function v(){}function y(){}function b(){}var _={};u(_,a,(function(){return this}));var w=Object.getPrototypeOf,A=w&&w(w(R([])));A&&A!==n&&r.call(A,a)&&(_=A);var E=b.prototype=v.prototype=Object.create(_);function x(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function S(t,e){function n(i,o,a,s){var l=d(t[i],t,o);if("throw"!==l.type){var u=l.arg,c=u.value;return c&&"object"==vD(c)&&r.call(c,"__await")?e.resolve(c.__await).then((function(t){n("next",t,a,s)}),(function(t){n("throw",t,a,s)})):e.resolve(c).then((function(t){u.value=t,a(u)}),(function(t){return n("throw",t,a,s)}))}s(l.arg)}var o;i(this,"_invoke",{value:function(t,r){function i(){return new e((function(e,i){n(t,r,e,i)}))}return o=o?o.then(i,i):i()}})}function T(e,n,r){var i=f;return function(o,a){if(i===p)throw Error("Generator is already running");if(i===m){if("throw"===o)throw a;return{value:t,done:!0}}for(r.method=o,r.arg=a;;){var s=r.delegate;if(s){var l=C(s,r);if(l){if(l===g)continue;return l}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(i===f)throw i=m,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);i=p;var u=d(e,n,r);if("normal"===u.type){if(i=r.done?m:h,u.arg===g)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(i=m,r.method="throw",r.arg=u.arg)}}}function C(e,n){var r=n.method,i=e.iterator[r];if(i===t)return n.delegate=null,"throw"===r&&e.iterator.return&&(n.method="return",n.arg=t,C(e,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),g;var o=d(i,e.iterator,n.arg);if("throw"===o.type)return n.method="throw",n.arg=o.arg,n.delegate=null,g;var a=o.arg;return a?a.done?(n[e.resultName]=a.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=t),n.delegate=null,g):a:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,g)}function I(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function k(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function P(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(I,this),this.reset(!0)}function R(e){if(e||""===e){var n=e[a];if(n)return n.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var i=-1,o=function n(){for(;++i<e.length;)if(r.call(e,i))return n.value=e[i],n.done=!1,n;return n.value=t,n.done=!0,n};return o.next=o}}throw new TypeError(vD(e)+" is not iterable")}return y.prototype=b,i(E,"constructor",{value:b,configurable:!0}),i(b,"constructor",{value:y,configurable:!0}),y.displayName=u(b,l,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===y||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,b):(t.__proto__=b,u(t,l,"GeneratorFunction")),t.prototype=Object.create(E),t},e.awrap=function(t){return{__await:t}},x(S.prototype),u(S.prototype,s,(function(){return this})),e.AsyncIterator=S,e.async=function(t,n,r,i,o){void 0===o&&(o=Promise);var a=new S(c(t,n,r,i),o);return e.isGeneratorFunction(n)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},x(E),u(E,l,"Generator"),u(E,a,(function(){return this})),u(E,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),n=[];for(var r in e)n.push(r);return n.reverse(),function t(){for(;n.length;){var r=n.pop();if(r in e)return t.value=r,t.done=!1,t}return t.done=!0,t}},e.values=R,P.prototype={constructor:P,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(k),!e)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function i(r,i){return s.type="throw",s.arg=e,n.next=r,i&&(n.method="next",n.arg=t),!!i}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],s=a.completion;if("root"===a.tryLoc)return i("end");if(a.tryLoc<=this.prev){var l=r.call(a,"catchLoc"),u=r.call(a,"finallyLoc");if(l&&u){if(this.prev<a.catchLoc)return i(a.catchLoc,!0);if(this.prev<a.finallyLoc)return i(a.finallyLoc)}else if(l){if(this.prev<a.catchLoc)return i(a.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return i(a.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=t,a.arg=e,o?(this.method="next",this.next=o.finallyLoc,g):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),g},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),k(n),g}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var i=r.arg;k(n)}return i}}throw Error("illegal catch attempt")},delegateYield:function(e,n,r){return this.delegate={iterator:R(e),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=t),g}},e}function bD(t,e,n,r,i,o,a){try{var s=t[o](a),l=s.value}catch(t){return void n(t)}s.done?e(l):Promise.resolve(l).then(r,i)}function _D(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,TD(r.key),r)}}function wD(t,e,n){return e=ED(e),function(t,e){if(e&&("object"===vD(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,AD()?Reflect.construct(e,n||[],ED(t).constructor):e.apply(t,n))}function AD(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(AD=function(){return!!t})()}function ED(t){return ED=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},ED(t)}function xD(t,e){return xD=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},xD(t,e)}function SD(t,e,n){return(e=TD(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function TD(t){var e=function(t,e){if("object"!=vD(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=vD(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==vD(e)?e:e+""}var CD=function(t){function e(t,n){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),SD(r=wD(this,e,[t,n]),"vh",(function(t){return window.innerHeight*(t/100)})),SD(r,"toggleLike",function(){var t=function(t){return function(){var e=this,n=arguments;return new Promise((function(r,i){var o=t.apply(e,n);function a(t){bD(o,r,i,a,s,"next",t)}function s(t){bD(o,r,i,a,s,"throw",t)}a(void 0)}))}}(yD().mark((function t(e){var n;return yD().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.preventDefault(),e.stopPropagation(),e.stopImmediatePropagation(),t.prev=3,t.next=6,r.bootstrap.toggleLike(r.postID);case 6:n=t.sent,r.element.classList.toggle("liked",n.liked),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(3),console.error("err",t.t0);case 13:case"end":return t.stop()}}),t,null,[[3,10]])})));return function(e){return t.apply(this,arguments)}}()),r.postID=r.element.dataset.postId,r.triggerFade=document.querySelector("[data-hide-like]"),r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&xD(t,e)}(e,t),n=e,(r=[{key:"init",value:function(){this.triggerFade?ti.timeline({scrollTrigger:{trigger:this.triggerFade,start:"top bottom",endTrigger:"html",end:"bottom top",toggleClass:{targets:[this.element],className:"hidden"}}}):ti.timeline({scrollTrigger:{trigger:this.element,start:this.vh(100)+"bottom",endTrigger:"html",end:"bottom top",toggleClass:"hidden"}})}},{key:"attach",value:function(){this.element.addEventListener("click",this.toggleLike)}},{key:"detach",value:function(){this.element.removeEventListener("click",this.toggleLike)}}])&&_D(n.prototype,r),i&&_D(n,i),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,i}(Yp);function ID(t){return ID="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ID(t)}function kD(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,LD(r.key),r)}}function PD(t,e,n){return e=OD(e),function(t,e){if(e&&("object"===ID(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,RD()?Reflect.construct(e,n||[],OD(t).constructor):e.apply(t,n))}function RD(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(RD=function(){return!!t})()}function OD(t){return OD=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},OD(t)}function MD(t,e){return MD=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},MD(t,e)}function LD(t){var e=function(t,e){if("object"!=ID(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=ID(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==ID(e)?e:e+""}var DD=function(t){function e(t,n){var r,i,o,a;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),r=PD(this,e,[t,n]),i=r,a=function(){r.bootstrap.lenis.scrollTo(r.element.offsetHeight)},(o=LD(o="scrollTo"))in i?Object.defineProperty(i,o,{value:a,enumerable:!0,configurable:!0,writable:!0}):i[o]=a,r.scrollCta=t.querySelector(".scroll"),r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&MD(t,e)}(e,t),n=e,(r=[{key:"attach",value:function(){this.scrollCta.addEventListener("click",this.scrollTo)}},{key:"detach",value:function(){this.scrollCta.removeEventListener("click",this.scrollTo)}}])&&kD(n.prototype,r),i&&kD(n,i),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,i}(Yp);function ND(t){return ND="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ND(t)}function BD(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,qD(r.key),r)}}function jD(t,e,n){return e=FD(e),function(t,e){if(e&&("object"===ND(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,zD()?Reflect.construct(e,n||[],FD(t).constructor):e.apply(t,n))}function zD(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(zD=function(){return!!t})()}function FD(t){return FD=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},FD(t)}function UD(t,e){return UD=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},UD(t,e)}function qD(t){var e=function(t,e){if("object"!=ND(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=ND(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==ND(e)?e:e+""}var GD=function(t){function e(t,n){var r,i,o,a;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),r=jD(this,e,[t,n]),i=r,a=function(){var t,e;null===(t=r.descriptionSplit)||void 0===t||t.lines.forEach((function(t){var e;null===(e=t.timeline)||void 0===e||e.kill()})),null===(e=r.descriptionSplit)||void 0===e||e.revert(),r.descriptionSplit=new Fs(r.description,{type:"lines, words",linesClass:"line",position:"absolute"}),r.descriptionSplit.lines.forEach((function(t,e){t.timeline=ti.timeline({scrollTrigger:{trigger:t,start:"top 55%",end:"top 65%",toggleActions:"play none none reverse",scrub:2}}),t.timeline.to(t,{opacity:1})})),r.description.style.height="".concat(r.descriptionSplit.lines[0].offsetHeight*r.descriptionSplit.lines.length,"px")},(o=qD(o="onResize"))in i?Object.defineProperty(i,o,{value:a,enumerable:!0,configurable:!0,writable:!0}):i[o]=a,r.description=t.querySelector(".description"),r.descriptionSplit=null,r.sts=null,r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&UD(t,e)}(e,t),n=e,(r=[{key:"attach",value:function(){this.viewport.on("resize",this.onResize)}},{key:"detach",value:function(){this.viewport.off("resize",this.onResize)}}])&&BD(n.prototype,r),i&&BD(n,i),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,i}(Yp);function HD(t){return HD="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},HD(t)}function VD(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,$D(r.key),r)}}function QD(t,e,n){return e=YD(e),function(t,e){if(e&&("object"===HD(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,WD()?Reflect.construct(e,n||[],YD(t).constructor):e.apply(t,n))}function WD(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(WD=function(){return!!t})()}function YD(t){return YD=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},YD(t)}function KD(t,e){return KD=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},KD(t,e)}function XD(t,e,n){return(e=$D(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function $D(t){var e=function(t,e){if("object"!=HD(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=HD(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==HD(e)?e:e+""}function ZD(t,e,n){!function(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}(t,e),e.set(t,n)}function JD(t,e,n){return t.set(eN(t,e),n),n}function tN(t,e){return t.get(eN(t,e))}function eN(t,e,n){if("function"==typeof t?t===e:t.has(e))return arguments.length<3?e:n;throw new TypeError("Private element is not present on this object")}var nN=new WeakMap,rN=new WeakMap,iN=new WeakMap,oN=function(t){function e(t,n){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),ZD(r=QD(this,e,[t,n]),nN,0),ZD(r,rN,null),ZD(r,iN,!1),XD(r,"onResize",(function(){var t,e,n;tN(iN,r)||(r.viewport.medias.desktop?r.slidesW.style.height="":r.slidesW.style.height="".concat(r.slides[tN(nN,r)].scrollHeight,"px"),r.viewport.medias.desktop&&(r.slidesData[tN(nN,r)].scrollbar.style.height="".concat(r.slidesData[tN(nN,r)].description.offsetHeight-10,"px"),r.slidesData[tN(nN,r)].scrollbar.style.top="".concat(r.slidesData[tN(nN,r)].description.offsetTop+10,"px"),r.slidesData[tN(nN,r)].scrollbar.style.left="".concat(r.slidesData[tN(nN,r)].description.offsetLeft-35,"px")),r.viewport.medias.desktop&&(r.slidesData[tN(nN,r)].description.scrollHeight>r.slidesData[tN(nN,r)].description.offsetHeight?(null===(t=r.slidesData[tN(nN,r)].description)||void 0===t||t.setAttribute("data-lenis-prevent",""),r.slidesData[tN(nN,r)].scrollbar.style.display="block",ti.to(r.slidesData[tN(nN,r)].scrollbar,{opacity:1,duration:.4})):(r.slidesData[tN(nN,r)].description&&null!==(e=r.slidesData[tN(nN,r)].description)&&void 0!==e&&e.hasAttribute("data-lenis-prevent")&&(null===(n=r.slidesData[tN(nN,r)].description)||void 0===n||n.removeAttribute("data-lenis-prevent")),ti.to(r.slidesData[tN(nN,r)].scrollbar,{opacity:0,duration:.4,onComplete:function(){return r.slidesData[tN(nN,r)].scrollbar.style.display="none"}}))))})),XD(r,"changeSlide",(function(t){var e;if(!tN(iN,r)){JD(iN,r,!0);var n,i,o,a=t.currentTarget.classList.contains("right")?1:-1,s=1===a?tN(nN,r)+1>r.slides.length-1?0:tN(nN,r)+1:tN(nN,r)-1<0?r.slides.length-1:tN(nN,r)-1;if(r.slidesData[s].el.style.display="flex",r.pictures[s].style.display="block",r.viewport.medias.desktop&&(r.slidesData[s].scrollbar.style.height="".concat(r.slidesData[s].description.offsetHeight-10,"px"),r.slidesData[s].scrollbar.style.top="".concat(r.slidesData[s].description.offsetTop+10,"px"),r.slidesData[s].scrollbar.style.left="".concat(r.slidesData[s].description.offsetLeft-35,"px")),null===(e=tN(rN,r))||void 0===e||e.kill(),JD(rN,r,ti.timeline()),tN(rN,r).fromTo(r.pictures[tN(nN,r)],{x:0},{x:-a*window.innerWidth,duration:1.4,ease:"immg.posIn"},0),tN(rN,r).fromTo(r.imgs[tN(nN,r)],{x:0},{x:-a*-window.innerWidth*.8,duration:1.4,ease:"immg.posIn"},0),tN(rN,r).fromTo(r.pictures[s],{x:-a*-window.innerWidth},{x:0,duration:1.4,ease:"immg.posIn"},0),tN(rN,r).fromTo(r.imgs[s],{x:-a*window.innerWidth*.8,scale:1.1},{x:0,scale:1,duration:1.4,ease:"immg.posIn"},0),tN(rN,r).to(r.slidesData[tN(nN,r)].el,{opacity:0,duration:.4},0),r.viewport.medias.desktop||tN(rN,r).to(r.slidesW,{height:r.slidesData[s].el.offsetHeight,duration:.6,ease:"immg.posIn"},.2),tN(rN,r).fromTo(r.slidesData[s].el,{opacity:0},{opacity:1,duration:.6},.8),tN(rN,r).add((function(){r.slidesData[tN(nN,r)].el.style.display="none",r.pictures[tN(nN,r)].style.display="none",JD(iN,r,!1),JD(nN,r,s)})),r.viewport.medias.desktop)if(r.slidesData[s].description.scrollHeight>r.slidesData[s].description.offsetHeight)null===(n=r.slidesData[s].description)||void 0===n||n.setAttribute("data-lenis-prevent",""),r.slidesData[s].scrollbar.style.display="block",tN(rN,r).to(r.slidesData[s].scrollbar,{opacity:1,duration:.4},.8);else r.slidesData[s].description&&null!==(i=r.slidesData[s].description)&&void 0!==i&&i.hasAttribute("data-lenis-prevent")&&(null===(o=r.slidesData[s].description)||void 0===o||o.removeAttribute("data-lenis-prevent")),tN(rN,r).to(r.slidesData[s].scrollbar,{opacity:0,duration:.4,onComplete:function(){return r.slidesData[s].scrollbar.style.display="none"}},0)}})),XD(r,"onScroll",(function(){var t;(null===(t=r.smoother)||void 0===t?void 0:t.velocity)<2?r.scrollOverlay.classList.add("hidden"):r.scrollOverlay.classList.contains("hidden")&&r.scrollOverlay.classList.remove("hidden")})),XD(r,"onThumbDown",(function(t,e){t.startY=e.clientY,t.startScrollTop=t.description.scrollTop,document.addEventListener("mousemove",t.thumbMove),document.addEventListener("mouseup",t.thumbUp)})),XD(r,"onThumbMove",(function(t,e){e.preventDefault();var n=e.clientY-t.startY,r=t.description.scrollHeight-t.description.offsetHeight,i=n/t.scrollbar.offsetHeight*r;t.description.scrollTop=t.startScrollTop+i})),XD(r,"onThumbUp",(function(t,e){document.removeEventListener("mousemove",t.thumbMove),document.removeEventListener("mouseup",t.thumbUp)})),XD(r,"onContentScroll",(function(t){var e=t.description.scrollTop/(t.description.scrollHeight-t.description.offsetHeight)*(t.scrollbar.offsetHeight-t.thumb.offsetHeight);t.thumb.style.top=e+"px"})),r.pictures=t.querySelectorAll(".picture-w"),r.imgs=t.querySelectorAll(".picture-w img"),r.slidesW=t.querySelector(".slides-w"),r.slides=t.querySelectorAll(".slide"),r.slidesData=[],r.prevCta=t.querySelector(".left"),r.nextCta=t.querySelector(".right"),r.scrollOverlay=r.element.querySelector(".scroll-overlay"),r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&KD(t,e)}(e,t),n=e,(r=[{key:"init",value:function(){var t,e,n,r=this;this.slides.forEach((function(t){r.slidesData.push({el:t,pretitle:t.querySelector(".pretitle"),title:t.querySelector(".title"),description:t.querySelector(".description"),reference:t.querySelector(".reference"),scrollbar:t.querySelector(".scrollbar"),thumb:t.querySelector(".thumb"),startY:0,startScrollTop:0})})),this.viewport.medias.desktop&&(this.slidesData[tN(nN,this)].description.scrollHeight>this.slidesData[tN(nN,this)].description.offsetHeight?(null===(t=this.slidesData[tN(nN,this)].description)||void 0===t||t.setAttribute("data-lenis-prevent",""),this.slidesData[tN(nN,this)].scrollbar.style.display="block",ti.to(this.slidesData[tN(nN,this)].scrollbar,{opacity:1,duration:.4})):(this.slidesData[tN(nN,this)].description&&null!==(e=this.slidesData[tN(nN,this)].description)&&void 0!==e&&e.hasAttribute("data-lenis-prevent")&&(null===(n=this.slidesData[tN(nN,this)].description)||void 0===n||n.removeAttribute("data-lenis-prevent")),ti.to(this.slidesData[tN(nN,this)].scrollbar,{opacity:0,duration:.4,onComplete:function(){return r.slidesData[tN(nN,r)].scrollbar.style.display="none"}})))}},{key:"attach",value:function(){var t=this;this.viewport.on("resize",this.onResize),this.prevCta.addEventListener("click",this.changeSlide),this.nextCta.addEventListener("click",this.changeSlide),window.addEventListener("scroll",this.onScroll),this.slidesData.forEach((function(e){e.descriptionScroll=t.onContentScroll.bind(t,e),e.thumbDown=t.onThumbDown.bind(t,e),e.thumbMove=t.onThumbMove.bind(t,e),e.thumbUp=t.onThumbUp.bind(t,e),e.description.addEventListener("scroll",e.descriptionScroll),e.thumb.addEventListener("mousedown",e.thumbDown)}))}},{key:"detach",value:function(){this.viewport.off("resize",this.onResize),this.prevCta.removeEventListener("click",this.changeSlide),this.nextCta.removeEventListener("click",this.changeSlide),window.removeEventListener("scroll",this.onScroll),this.slidesData.forEach((function(t){t.description.removeEventListener("scroll",t.descriptionScroll),t.thumb.removeEventListener("mousedown",t.thumbDown)}))}}])&&VD(n.prototype,r),i&&VD(n,i),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,i}(Yp);function aN(t){return aN="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},aN(t)}function sN(){sN=function(){return e};var t,e={},n=Object.prototype,r=n.hasOwnProperty,i=Object.defineProperty||function(t,e,n){t[e]=n.value},o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",s=o.asyncIterator||"@@asyncIterator",l=o.toStringTag||"@@toStringTag";function u(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,n){return t[e]=n}}function c(t,e,n,r){var o=e&&e.prototype instanceof v?e:v,a=Object.create(o.prototype),s=new P(r||[]);return i(a,"_invoke",{value:T(t,n,s)}),a}function d(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}e.wrap=c;var f="suspendedStart",h="suspendedYield",p="executing",m="completed",g={};function v(){}function y(){}function b(){}var _={};u(_,a,(function(){return this}));var w=Object.getPrototypeOf,A=w&&w(w(R([])));A&&A!==n&&r.call(A,a)&&(_=A);var E=b.prototype=v.prototype=Object.create(_);function x(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function S(t,e){function n(i,o,a,s){var l=d(t[i],t,o);if("throw"!==l.type){var u=l.arg,c=u.value;return c&&"object"==aN(c)&&r.call(c,"__await")?e.resolve(c.__await).then((function(t){n("next",t,a,s)}),(function(t){n("throw",t,a,s)})):e.resolve(c).then((function(t){u.value=t,a(u)}),(function(t){return n("throw",t,a,s)}))}s(l.arg)}var o;i(this,"_invoke",{value:function(t,r){function i(){return new e((function(e,i){n(t,r,e,i)}))}return o=o?o.then(i,i):i()}})}function T(e,n,r){var i=f;return function(o,a){if(i===p)throw Error("Generator is already running");if(i===m){if("throw"===o)throw a;return{value:t,done:!0}}for(r.method=o,r.arg=a;;){var s=r.delegate;if(s){var l=C(s,r);if(l){if(l===g)continue;return l}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(i===f)throw i=m,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);i=p;var u=d(e,n,r);if("normal"===u.type){if(i=r.done?m:h,u.arg===g)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(i=m,r.method="throw",r.arg=u.arg)}}}function C(e,n){var r=n.method,i=e.iterator[r];if(i===t)return n.delegate=null,"throw"===r&&e.iterator.return&&(n.method="return",n.arg=t,C(e,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),g;var o=d(i,e.iterator,n.arg);if("throw"===o.type)return n.method="throw",n.arg=o.arg,n.delegate=null,g;var a=o.arg;return a?a.done?(n[e.resultName]=a.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=t),n.delegate=null,g):a:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,g)}function I(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function k(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function P(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(I,this),this.reset(!0)}function R(e){if(e||""===e){var n=e[a];if(n)return n.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var i=-1,o=function n(){for(;++i<e.length;)if(r.call(e,i))return n.value=e[i],n.done=!1,n;return n.value=t,n.done=!0,n};return o.next=o}}throw new TypeError(aN(e)+" is not iterable")}return y.prototype=b,i(E,"constructor",{value:b,configurable:!0}),i(b,"constructor",{value:y,configurable:!0}),y.displayName=u(b,l,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===y||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,b):(t.__proto__=b,u(t,l,"GeneratorFunction")),t.prototype=Object.create(E),t},e.awrap=function(t){return{__await:t}},x(S.prototype),u(S.prototype,s,(function(){return this})),e.AsyncIterator=S,e.async=function(t,n,r,i,o){void 0===o&&(o=Promise);var a=new S(c(t,n,r,i),o);return e.isGeneratorFunction(n)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},x(E),u(E,l,"Generator"),u(E,a,(function(){return this})),u(E,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),n=[];for(var r in e)n.push(r);return n.reverse(),function t(){for(;n.length;){var r=n.pop();if(r in e)return t.value=r,t.done=!1,t}return t.done=!0,t}},e.values=R,P.prototype={constructor:P,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(k),!e)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function i(r,i){return s.type="throw",s.arg=e,n.next=r,i&&(n.method="next",n.arg=t),!!i}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],s=a.completion;if("root"===a.tryLoc)return i("end");if(a.tryLoc<=this.prev){var l=r.call(a,"catchLoc"),u=r.call(a,"finallyLoc");if(l&&u){if(this.prev<a.catchLoc)return i(a.catchLoc,!0);if(this.prev<a.finallyLoc)return i(a.finallyLoc)}else if(l){if(this.prev<a.catchLoc)return i(a.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return i(a.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=t,a.arg=e,o?(this.method="next",this.next=o.finallyLoc,g):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),g},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),k(n),g}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var i=r.arg;k(n)}return i}}throw Error("illegal catch attempt")},delegateYield:function(e,n,r){return this.delegate={iterator:R(e),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=t),g}},e}function lN(t,e,n,r,i,o,a){try{var s=t[o](a),l=s.value}catch(t){return void n(t)}s.done?e(l):Promise.resolve(l).then(r,i)}function uN(t){return function(){var e=this,n=arguments;return new Promise((function(r,i){var o=t.apply(e,n);function a(t){lN(o,r,i,a,s,"next",t)}function s(t){lN(o,r,i,a,s,"throw",t)}a(void 0)}))}}function cN(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,gN(r.key),r)}}function dN(t,e,n){return e=hN(e),function(t,e){if(e&&("object"===aN(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,fN()?Reflect.construct(e,n||[],hN(t).constructor):e.apply(t,n))}function fN(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(fN=function(){return!!t})()}function hN(t){return hN=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},hN(t)}function pN(t,e){return pN=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},pN(t,e)}function mN(t,e,n){return(e=gN(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function gN(t){var e=function(t,e){if("object"!=aN(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=aN(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==aN(e)?e:e+""}var vN=function(t){function e(t,n){var r,i;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),mN(i=dN(this,e,[t,n]),"onSubmit",(function(t){t.preventDefault(),i.validateEmail(i.input.value)?(i.inputW.classList.add("loading"),i.isCaptchaActive?hcaptcha.execute(i.hCaptchaNewsletterId,{async:!0}).then((function(t){var e=t.response;e&&(i.hCaptchaValue=e,i.send())})).catch((function(t){console.log("error while validating captcha"),i.inputW.classList.remove("loading")})):i.send()):i.inputW.classList.add("error")})),mN(i,"send",uN(sN().mark((function t(){var e,n,r;return sN().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e={action:"david_subscribe_to_newsletter",email:i.input.value,hcaptchaResponse:i.hCaptchaValue},t.prev=1,t.next=4,fetch(ADMIN_AJAX_URL,{method:"POST",body:new URLSearchParams(e).toString(),credentials:"include",headers:{"Content-Type":"application/x-www-form-urlencoded"}});case 4:return n=t.sent,t.next=7,n.json();case 7:(r=t.sent).success?(i.inputW.classList.remove("api-error"),i.inputW.classList.remove("error"),i.inputW.classList.add("success")):(i.apiErrorText.textContent=r.data,i.inputW.classList.add("api-error")),i.inputW.classList.remove("loading"),t.next=15;break;case 12:throw t.prev=12,t.t0=t.catch(1),t.t0;case 15:case"end":return t.stop()}}),t,null,[[1,12]])})))),i.inputW=t.querySelector(".input-w"),i.apiErrorText=t.querySelector(".api-error-text"),i.input=t.querySelector("input[type=email]"),i.submitCta=t.querySelector("button"),i.form=t.querySelector("#newsletter"),i.hCaptchaNewsletter=i.element.querySelector(".h-captcha-newsletter"),i.hCaptchaValue="",i.isCaptchaActive="true"===(null===(r=i.form)||void 0===r?void 0:r.getAttribute("data-is-captcha-active"))&&void 0!==hcaptcha&&null!==hcaptcha,i}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&pN(t,e)}(e,t),n=e,(r=[{key:"attach",value:function(){this.hCaptchaNewsletter&&this.isCaptchaActive&&(this.hCaptchaNewsletter.classList.add("h-captcha"),this.hCaptchaNewsletterId=hcaptcha.render(this.hCaptchaNewsletter,{sitekey:"072e84bc-74bc-4b60-837e-1224b03856c6"})),this.submitCta.addEventListener("click",this.onSubmit)}},{key:"detach",value:function(){this.submitCta.removeEventListener("click",this.onSubmit)}},{key:"validateEmail",value:function(t){return!!/^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,3})+$/.test(t)}}])&&cN(n.prototype,r),i&&cN(n,i),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,i}(Yp);function yN(t){return yN="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},yN(t)}function bN(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,TN(r.key),r)}}function _N(t,e,n){return e=xN(e),function(t,e){if(e&&("object"===yN(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,wN()?Reflect.construct(e,n||[],xN(t).constructor):e.apply(t,n))}function wN(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(wN=function(){return!!t})()}function AN(t,e){return AN=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},AN(t,e)}function EN(){return EN="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=xN(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(arguments.length<3?t:n):i.value}},EN.apply(this,arguments)}function xN(t){return xN=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},xN(t)}function SN(t,e,n){return(e=TN(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function TN(t){var e=function(t,e){if("object"!=yN(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=yN(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==yN(e)?e:e+""}var CN=function(t){function e(t){var n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),SN(n=_N(this,e,[t,r]),"media",(function(t){n.isMobile=t})),SN(n,"layout",(function(){EN(xN(e.prototype),"layout",n).call(n),n.emit("layoutChange",n.input.max.x<=0)})),n.isMobile=!1,n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&AN(t,e)}(e,t),n=e,r=[{key:"slideAnimation",value:function(t){var e=ti.timeline({paused:!0}),n=t.element;return e.fromTo(n,{x:-t.width-this._scrollLeft},{x:0,ease:"none",duration:1},0),e.fromTo(n,{x:0},{x:this._scrollRight,ease:"none",duration:1},1),e.seek(1),e}}],r&&bN(n.prototype,r),i&&bN(n,i),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,i}(Th);function IN(t){return IN="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},IN(t)}function kN(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,DN(r.key),r)}}function PN(t,e,n){return e=ON(e),function(t,e){if(e&&("object"===IN(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,RN()?Reflect.construct(e,n||[],ON(t).constructor):e.apply(t,n))}function RN(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(RN=function(){return!!t})()}function ON(t){return ON=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},ON(t)}function MN(t,e){return MN=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},MN(t,e)}function LN(t,e,n){return(e=DN(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function DN(t){var e=function(t,e){if("object"!=IN(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=IN(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==IN(e)?e:e+""}function NN(t,e,n){!function(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}(t,e),e.set(t,n)}function BN(t,e){return t.get(zN(t,e))}function jN(t,e,n){return t.set(zN(t,e),n),n}function zN(t,e,n){if("function"==typeof t?t===e:t.has(e))return arguments.length<3?e:n;throw new TypeError("Private element is not present on this object")}var FN=new WeakMap,UN=new WeakMap,qN=new WeakMap,GN=function(t){function e(t,n){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),NN(r=PN(this,e,[t,n]),FN,null),NN(r,UN,0),NN(r,qN,0),LN(r,"onResize",(function(){jN(UN,r,r.progressBar.offsetWidth),jN(qN,r,r.progressIndicator.offsetWidth),r.slideshow.style.height="".concat(r.slides[0].offsetHeight,"px")})),LN(r,"onLayoutChange",(function(t){r.controls.classList.toggle("disabled",t)})),LN(r,"onSlideChange",(function(t){r.prevCta.classList.toggle("disabled",0===t),r.nextCta.classList.toggle("disabled",t===BN(FN,r)._max)})),LN(r,"render",(function(){r.progressIndicator.style.transform="translate3d(".concat(ti.utils.clamp(0,BN(UN,r)-BN(qN,r),BN(FN,r).input.position.x/BN(FN,r).input.max.x*(BN(UN,r)-BN(qN,r))),"px, 0, 0)")})),r.reference=t.querySelector(".reference"),r.slideshow=t.querySelector(".slideshow"),r.slides=t.querySelectorAll(".slide"),r.slidesData=[],r.controls=t.querySelector(".controls"),r.progressBar=t.querySelector(".progress-bar"),r.progressIndicator=t.querySelector(".progress-bar .indicator"),r.prevCta=t.querySelector(".left"),r.nextCta=t.querySelector(".right"),r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&MN(t,e)}(e,t),n=e,(r=[{key:"init",value:function(){jN(FN,this,new CN(this.slideshow,{slides:".slide",snapping:!0,reference:this.reference,inputOptions:{wheel:!1,drag:!0},autoResize:!0})),this.onSlideChange(0)}},{key:"attach",value:function(){this.viewport.on("resize",this.onResize),BN(FN,this).attach(),BN(FN,this).on("layoutChange",this.onLayoutChange),BN(FN,this).on("change",this.onSlideChange),this.prevCta.addEventListener("click",BN(FN,this).previous),this.nextCta.addEventListener("click",BN(FN,this).next),ti.ticker.add(this.render)}},{key:"detach",value:function(){this.viewport.off("resize",this.onResize),BN(FN,this).detach(),BN(FN,this).off("layoutChange",this.onLayoutChange),BN(FN,this).off("change",this.onSlideChange),this.prevCta.removeEventListener("click",BN(FN,this).previous),this.nextCta.removeEventListener("click",BN(FN,this).next),ti.ticker.remove(this.render)}}])&&kN(n.prototype,r),i&&kN(n,i),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,i}(Yp);function HN(t){return"number"==typeof t}function VN(t){return"string"==typeof t}function QN(t){return"boolean"==typeof t}function WN(t){return"[object Object]"===Object.prototype.toString.call(t)}function YN(t){return Math.abs(t)}function KN(t){return Math.sign(t)}function XN(t,e){return YN(t-e)}function $N(t){return nB(t).map(Number)}function ZN(t){return t[JN(t)]}function JN(t){return Math.max(0,t.length-1)}function tB(t,e){return e===JN(t)}function eB(t,e=0){return Array.from(Array(t),((t,n)=>e+n))}function nB(t){return Object.keys(t)}function rB(t,e){return[t,e].reduce(((t,e)=>(nB(e).forEach((n=>{const r=t[n],i=e[n],o=WN(r)&&WN(i);t[n]=o?rB(r,i):i})),t)),{})}function iB(t,e){return void 0!==e.MouseEvent&&t instanceof e.MouseEvent}function oB(){let t=[];const e={add:function(n,r,i,o={passive:!0}){let a;if("addEventListener"in n)n.addEventListener(r,i,o),a=()=>n.removeEventListener(r,i,o);else{const t=n;t.addListener(i),a=()=>t.removeListener(i)}return t.push(a),e},clear:function(){t=t.filter((t=>t()))}};return e}function aB(t,e,n,r){const i=oB(),o=1e3/60;let a=null,s=0,l=0;function u(t){if(!l)return;a||(a=t);const i=t-a;for(a=t,s+=i;s>=o;)n(),s-=o;const c=YN(s/o);r(c),l&&e.requestAnimationFrame(u)}function c(){e.cancelAnimationFrame(l),a=null,s=0,l=0}return{init:function(){i.add(t,"visibilitychange",(()=>{t.hidden&&(a=null,s=0)}))},destroy:function(){c(),i.clear()},start:function(){l||(l=e.requestAnimationFrame(u))},stop:c,update:n,render:r}}function sB(t=0,e=0){const n=YN(t-e);function r(e){return e<t}function i(t){return t>e}function o(t){return r(t)||i(t)}const a={length:n,max:e,min:t,constrain:function(n){return o(n)?r(n)?t:e:n},reachedAny:o,reachedMax:i,reachedMin:r,removeOffset:function(t){return n?t-n*Math.ceil((t-e)/n):t}};return a}function lB(t,e,n){const{constrain:r}=sB(0,t),i=t+1;let o=a(e);function a(t){return n?YN((i+t)%i):r(t)}function s(){return o}function l(){return lB(t,s(),n)}const u={get:s,set:function(t){return o=a(t),u},add:function(t){return l().set(s()+t)},clone:l};return u}function uB(t,e,n,r,i,o,a,s,l,u,c,d,f,h,p,m,g,v,y,b){const{cross:_}=t,w=["INPUT","SELECT","TEXTAREA"],A={passive:!1},E=oB(),x=oB(),S=sB(50,225).constrain(p.measure(20)),T={mouse:300,touch:400},C={mouse:500,touch:600},I=m?43:25;let k=!1,P=0,R=0,O=!1,M=!1,L=!1,D=!1;function N(t){const n=a.readPoint(t),r=a.readPoint(t,_),i=XN(n,P),s=XN(r,R);if(!M&&!D){if(!t.cancelable)return B(t);if(M=i>s,!M)return B(t)}const u=a.pointerMove(t);i>g&&(L=!0),c.useFriction(.3).useDuration(1),l.start(),o.add(e.apply(u)),t.preventDefault()}function B(t){const n=d.byDistance(0,!1).index!==f.get(),r=a.pointerUp(t)*(m?C:T)[D?"mouse":"touch"],i=function(t,e){const n=f.add(-1*KN(t)),r=d.byDistance(t,!m).distance;return m||YN(t)<S?r:v&&e?.5*r:d.byIndex(n.get(),0).distance}(e.apply(r),n),o=function(t,e){if(0===t||0===e)return 0;if(YN(t)<=YN(e))return 0;const n=XN(YN(t),YN(e));return YN(n/t)}(r,i),s=I-10*o,l=y+o/50;M=!1,O=!1,x.clear(),c.useDuration(s).useFriction(l),u.distance(i,!m),D=!1,h.emit("pointerUp")}function j(t){L&&(t.stopPropagation(),t.preventDefault())}return{init:function(t){if(!b)return;function e(e){(QN(b)||b(t,e))&&function(t){const e=iB(t,i);if(D=e,e&&0!==t.button)return;if(function(t){const e=t.nodeName||"";return w.includes(e)}(t.target))return;L=m&&e&&!t.buttons&&k,k=XN(o.get(),s.get())>=2,O=!0,a.pointerDown(t),c.useFriction(0).useDuration(0),o.set(s),function(){const t=D?r:n;x.add(t,"touchmove",N,A).add(t,"touchend",B).add(t,"mousemove",N,A).add(t,"mouseup",B)}(),P=a.readPoint(t),R=a.readPoint(t,_),h.emit("pointerDown")}(e)}const l=n;E.add(l,"dragstart",(t=>t.preventDefault()),A).add(l,"touchmove",(()=>{}),A).add(l,"touchend",(()=>{})).add(l,"touchstart",e).add(l,"mousedown",e).add(l,"touchcancel",B).add(l,"contextmenu",B).add(l,"click",j,!0)},pointerDown:function(){return O},destroy:function(){E.clear(),x.clear()}}}function cB(t,e){let n,r;function i(t){return t.timeStamp}function o(n,r){const i="client"+("x"===(r||t.scroll)?"X":"Y");return(iB(n,e)?n:n.touches[0])[i]}return{pointerDown:function(t){return n=t,r=t,o(t)},pointerMove:function(t){const e=o(t)-o(r),a=i(t)-i(n)>170;return r=t,a&&(n=t),e},pointerUp:function(t){if(!n||!r)return 0;const e=o(r)-o(n),a=i(t)-i(n),s=i(t)-i(r)>170,l=e/a;return a&&!s&&YN(l)>.1?l:0},readPoint:o}}function dB(t,e,n,r,i,o,a){let s,l,u=[],c=!1;function d(t){return i.measureSize(a.measure(t))}return{init:function(i){if(!o)return;l=d(t),u=r.map(d),s=new ResizeObserver((a=>{c||(QN(o)||o(i,a))&&function(o){for(const a of o){const o=a.target===t,s=r.indexOf(a.target),c=o?l:u[s];if(YN(d(o?t:r[s])-c)>=.5){n.requestAnimationFrame((()=>{i.reInit(),e.emit("resize")}));break}}}(a)})),[t].concat(r).forEach((t=>s.observe(t)))},destroy:function(){s&&s.disconnect(),c=!0}}}function fB(t,e,n,r,i){const o=i.measure(10),a=i.measure(50),s=sB(.1,.99);let l=!1;return{constrain:function(i){if(l||!t.reachedAny(n.get())||!t.reachedAny(e.get()))return;const u=t.reachedMin(e.get())?"min":"max",c=YN(t[u]-e.get()),d=n.get()-e.get(),f=s.constrain(c/a);n.subtract(d*f),!i&&YN(d)<o&&(n.set(t.constrain(n.get())),r.useDuration(25).useBaseFriction())},toggleActive:function(t){l=!t}}}function hB(t,e,n,r){const i=e.min+.1,o=e.max+.1,{reachedMin:a,reachedMax:s}=sB(i,o);const l={loop:function(e){if(!function(t){return 1===t?s(n.get()):-1===t&&a(n.get())}(e))return;const i=t*(-1*e);r.forEach((t=>t.add(i)))}};return l}function pB(t,e,n,r,i){const{reachedAny:o,removeOffset:a,constrain:s}=r;function l(t){return t.concat().sort(((t,e)=>YN(t)-YN(e)))[0]}function u(e,r){const i=[e,e+n,e-n];if(!t)return i[0];if(!r)return l(i);const o=i.filter((t=>KN(t)===r));return o.length?l(o):ZN(i)-n}const c={byDistance:function(n,r){const l=i.get()+n,{index:c,distance:d}=function(n){const r=t?a(n):s(n),i=e.map((t=>t-r)).map((t=>u(t,0))).map(((t,e)=>({diff:t,index:e}))).sort(((t,e)=>YN(t.diff)-YN(e.diff))),{index:o}=i[0];return{index:o,distance:r}}(l),f=!t&&o(l);return!r||f?{index:c,distance:n}:{index:c,distance:n+u(e[c]-d,0)}},byIndex:function(t,n){return{index:t,distance:u(e[t]-i.get(),n)}},shortcut:u};return c}function mB(t){let e=t;function n(t){return HN(t)?t:t.get()}const r={get:function(){return e},set:function(t){e=n(t)},add:function(t){e+=n(t)},subtract:function(t){e-=n(t)}};return r}function gB(t,e,n){const r="x"===t.scroll?function(t){return`translate3d(${t}px,0px,0px)`}:function(t){return`translate3d(0px,${t}px,0px)`},i=n.style;let o=!1;return{clear:function(){o||(i.transform="",n.getAttribute("style")||n.removeAttribute("style"))},to:function(t){o||(i.transform=r(e.apply(t)))},toggleActive:function(t){o=!t}}}function vB(t,e,n,r,i,o,a,s,l,u){const c=.5,d=$N(o),f=$N(o).reverse(),h=function(){const t=s[0];return g(m(f,t),r,!1)}().concat(function(){const t=n-s[0]-1;return g(m(d,t),-r,!0)}());function p(t,e){return t.reduce(((t,e)=>t-o[e]),e)}function m(t,e){return t.reduce(((t,n)=>p(t,e)>0?t.concat([n]):t),[])}function g(o,s,d){const f=function(t){return a.map(((e,r)=>({start:e-i[r]+c+t,end:e+n-c+t})))}(s);return o.map((n=>{const i=d?0:-r,o=d?r:0,a=d?"end":"start",s=f[n][a];return{index:n,loopPoint:s,slideLocation:mB(-1),translate:gB(t,e,u[n]),target:()=>l.get()>s?i:o}}))}const v={canLoop:function(){return h.every((({index:t})=>{const e=d.filter((e=>e!==t));return p(e,n)<=.1}))},clear:function(){h.forEach((t=>t.translate.clear()))},loop:function(){h.forEach((t=>{const{target:e,translate:n,slideLocation:r}=t,i=e();i!==r.get()&&(n.to(i),r.set(i))}))},loopPoints:h};return v}function yB(t,e,n){let r,i=!1;return{init:function(o){n&&(r=new MutationObserver((t=>{i||(QN(n)||n(o,t))&&function(t){for(const n of t)if("childList"===n.type){o.reInit(),e.emit("slidesChanged");break}}(t)})),r.observe(t,{childList:!0}))},destroy:function(){r&&r.disconnect(),i=!0}}}function bB(t,e,n,r){const i={};let o,a=null,s=null,l=!1;return{init:function(){o=new IntersectionObserver((t=>{l||(t.forEach((t=>{const n=e.indexOf(t.target);i[n]=t})),a=null,s=null,n.emit("slidesInView"))}),{root:t.parentElement,threshold:r}),e.forEach((t=>o.observe(t)))},destroy:function(){o&&o.disconnect(),l=!0},get:function(t=!0){if(t&&a)return a;if(!t&&s)return s;const e=function(t){return nB(i).reduce(((e,n)=>{const r=parseInt(n),{isIntersecting:o}=i[r];return(t&&o||!t&&!o)&&e.push(r),e}),[])}(t);return t&&(a=e),t||(s=e),e}}}function _B(t,e,n,r,i,o,a,s,l,u){const{startEdge:c,endEdge:d}=t,f=HN(r);const h={groupSlides:function(t){return f?function(t,e){return $N(t).filter((t=>t%e==0)).map((n=>t.slice(n,n+e)))}(t,r):function(t){return t.length?$N(t).reduce(((r,f)=>{const h=ZN(r)||0,p=0===h,m=f===JN(t),g=o[c]-a[h][c],v=o[c]-a[f][d],y=!i&&p?e.apply(s):0;return YN(v-(!i&&m?e.apply(l):0)-(g+y))>n+u&&r.push(f),m&&r.push(t.length),r}),[]).map(((e,n,r)=>{const i=Math.max(r[n-1]||0);return t.slice(i,e)})):[]}(t)}};return h}function wB(t,e,n,r,i,o,a){const{align:s,axis:l,direction:u,startIndex:c,loop:d,duration:f,dragFree:h,dragThreshold:p,inViewThreshold:m,slidesToScroll:g,skipSnaps:v,containScroll:y,watchResize:b,watchSlides:_,watchDrag:w}=o,A={measure:function(t){const{offsetTop:e,offsetLeft:n,offsetWidth:r,offsetHeight:i}=t;return{top:e,right:n+r,bottom:e+i,left:n,width:r,height:i}}},E=A.measure(e),x=n.map(A.measure),S=function(t){const e="rtl"===t?-1:1,n={apply:function(t){return t*e}};return n}(u),T=function(t,e){const n="y"===t?"y":"x";return{scroll:n,cross:"y"===t?"x":"y",startEdge:"y"===n?"top":"rtl"===e?"right":"left",endEdge:"y"===n?"bottom":"rtl"===e?"left":"right",measureSize:function(t){const{width:e,height:r}=t;return"x"===n?e:r}}}(l,u),C=T.measureSize(E),I=function(t){const e={measure:function(e){return t*(e/100)}};return e}(C),k=function(t,e){const n={start:function(){return 0},center:function(t){return r(t)/2},end:r};function r(t){return e-t}const i={measure:function(r,i){return VN(t)?n[t](r):t(e,r,i)}};return i}(s,C),P=!d&&!!y,R=d||!!y,{slideSizes:O,slideSizesWithGaps:M,startGap:L,endGap:D}=function(t,e,n,r,i,o){const{measureSize:a,startEdge:s,endEdge:l}=t,u=n[0]&&i,c=function(){if(!u)return 0;const t=n[0];return YN(e[s]-t[s])}(),d=function(){if(!u)return 0;const t=o.getComputedStyle(ZN(r));return parseFloat(t.getPropertyValue(`margin-${l}`))}(),f=n.map(a),h=n.map(((t,e,n)=>{const r=!e,i=tB(n,e);return r?f[e]+c:i?f[e]+d:n[e+1][s]-t[s]})).map(YN);return{slideSizes:f,slideSizesWithGaps:h,startGap:c,endGap:d}}(T,E,x,n,R,i),N=_B(T,S,C,g,d,E,x,L,D,2),{snaps:B,snapsAligned:j}=function(t,e,n,r,i){const{startEdge:o,endEdge:a}=t,{groupSlides:s}=i,l=s(r).map((t=>ZN(t)[a]-t[0][o])).map(YN).map(e.measure),u=r.map((t=>n[o]-t[o])).map((t=>-YN(t))),c=s(u).map((t=>t[0])).map(((t,e)=>t+l[e]));return{snaps:u,snapsAligned:c}}(T,k,E,x,N),z=-ZN(B)+ZN(M),{snapsContained:F,scrollContainLimit:U}=function(t,e,n,r,i){const o=sB(-e+t,0),a=n.map(((t,e)=>{const{min:r,max:i}=o,a=o.constrain(t),s=!e,l=tB(n,e);return s?i:l||u(r,a)?r:u(i,a)?i:a})).map((t=>parseFloat(t.toFixed(3)))),s=function(){const t=a[0],e=ZN(a);return sB(a.lastIndexOf(t),a.indexOf(e)+1)}(),l=function(){if(e<=t+i)return[o.max];if("keepSnaps"===r)return a;const{min:n,max:l}=s;return a.slice(n,l)}();function u(t,e){return XN(t,e)<1}return{snapsContained:l,scrollContainLimit:s}}(C,z,j,y,2),q=P?F:j,{limit:G}=function(t,e,n){const r=e[0];return{limit:sB(n?r-t:ZN(e),r)}}(z,q,d),H=lB(JN(q),c,d),V=H.clone(),Q=$N(n),W=aB(r,i,(()=>(({dragHandler:t,scrollBody:e,scrollBounds:n,options:{loop:r}})=>{r||n.constrain(t.pointerDown()),e.seek()})(at)),(t=>(({scrollBody:t,translate:e,location:n,offsetLocation:r,scrollLooper:i,slideLooper:o,dragHandler:a,animation:s,eventHandler:l,options:{loop:u}},c)=>{const d=t.velocity(),f=t.settled();f&&!a.pointerDown()&&(s.stop(),l.emit("settle")),f||l.emit("scroll"),r.set(n.get()-d+d*c),u&&(i.loop(t.direction()),o.loop()),e.to(r.get())})(at,t))),Y=q[H.get()],K=mB(Y),X=mB(Y),$=mB(Y),Z=function(t,e,n,r,i){let o=0,a=0,s=r,l=i,u=t.get(),c=0;function d(t){return s=t,h}function f(t){return l=t,h}const h={direction:function(){return a},duration:function(){return s},velocity:function(){return o},seek:function(){const e=n.get()-t.get();let r=0;return s?(o+=e/s,o*=l,u+=o,t.add(o),r=u-c):(o=0,t.set(n),r=e),a=KN(r),c=u,h},settled:function(){return YN(n.get()-e.get())<.001},useBaseFriction:function(){return f(i)},useBaseDuration:function(){return d(r)},useFriction:f,useDuration:d};return h}(K,X,$,f,.68),J=pB(d,q,z,G,$),tt=function(t,e,n,r,i,o,a){function s(i){const s=i.distance,l=i.index!==e.get();o.add(s),s&&(r.duration()?t.start():(t.update(),t.render(1),t.update())),l&&(n.set(e.get()),e.set(i.index),a.emit("select"))}const l={distance:function(t,e){s(i.byDistance(t,e))},index:function(t,n){const r=e.clone().set(t);s(i.byIndex(r.get(),n))}};return l}(W,H,V,Z,J,$,a),et=function(t){const{max:e,length:n}=t,r={get:function(t){return n?(t-e)/-n:0}};return r}(G),nt=oB(),rt=bB(e,n,a,m),{slideRegistry:it}=function(t,e,n,r,i,o){const{groupSlides:a}=i,{min:s,max:l}=r;return{slideRegistry:function(){const r=a(o),i=!t||"keepSnaps"===e;return 1===n.length?[o]:i?r:r.slice(s,l).map(((t,e,n)=>{const r=!e,i=tB(n,e);return r?eB(ZN(n[0])+1):i?eB(JN(o)-ZN(n)[0]+1,ZN(n)[0]):t}))}()}}(P,y,q,U,N,Q),ot=function(t,e,n,r,i,o){let a=0;function s(t){"Tab"===t.code&&(a=(new Date).getTime())}function l(s){o.add(s,"focus",(()=>{if((new Date).getTime()-a>10)return;t.scrollLeft=0;const o=e.indexOf(s),l=n.findIndex((t=>t.includes(o)));HN(l)&&(i.useDuration(0),r.index(l,0))}),{passive:!0,capture:!0})}return{init:function(){o.add(document,"keydown",s,!1),e.forEach(l)}}}(t,n,it,tt,Z,nt),at={ownerDocument:r,ownerWindow:i,eventHandler:a,containerRect:E,slideRects:x,animation:W,axis:T,direction:S,dragHandler:uB(T,S,t,r,i,$,cB(T,i),K,W,tt,Z,J,H,a,I,h,p,v,.68,w),eventStore:nt,percentOfView:I,index:H,indexPrevious:V,limit:G,location:K,offsetLocation:X,options:o,resizeHandler:dB(e,a,i,n,T,b,A),scrollBody:Z,scrollBounds:fB(G,X,$,Z,I),scrollLooper:hB(z,G,X,[K,X,$]),scrollProgress:et,scrollSnapList:q.map(et.get),scrollSnaps:q,scrollTarget:J,scrollTo:tt,slideLooper:vB(T,S,C,z,O,M,B,q,X,n),slideFocus:ot,slidesHandler:yB(e,a,_),slidesInView:rt,slideIndexes:Q,slideRegistry:it,slidesToScroll:N,target:$,translate:gB(T,S,e)};return at}const AB={align:"center",axis:"x",container:null,slides:null,containScroll:"trimSnaps",direction:"ltr",slidesToScroll:1,inViewThreshold:0,breakpoints:{},dragFree:!1,dragThreshold:10,loop:!1,skipSnaps:!1,duration:25,startIndex:0,active:!0,watchDrag:!0,watchResize:!0,watchSlides:!0};function EB(t){function e(t,e){return rB(t,e||{})}const n={mergeOptions:e,optionsAtMedia:function(n){const r=n.breakpoints||{},i=nB(r).filter((e=>t.matchMedia(e).matches)).map((t=>r[t])).reduce(((t,n)=>e(t,n)),{});return e(n,i)},optionsMediaQueries:function(e){return e.map((t=>nB(t.breakpoints||{}))).reduce(((t,e)=>t.concat(e)),[]).map(t.matchMedia)}};return n}function xB(t,e,n){const r=t.ownerDocument,i=r.defaultView,o=EB(i),a=function(t){let e=[];return{init:function(n,r){return e=r.filter((({options:e})=>!1!==t.optionsAtMedia(e).active)),e.forEach((e=>e.init(n,t))),r.reduce(((t,e)=>Object.assign(t,{[e.name]:e})),{})},destroy:function(){e=e.filter((t=>t.destroy()))}}}(o),s=oB(),l=function(){const t={};let e;function n(e){return t[e]||[]}const r={init:function(t){e=t},emit:function(t){return n(t).forEach((n=>n(e,t))),r},off:function(e,i){return t[e]=n(e).filter((t=>t!==i)),r},on:function(e,i){return t[e]=n(e).concat([i]),r}};return r}(),{mergeOptions:u,optionsAtMedia:c,optionsMediaQueries:d}=o,{on:f,off:h,emit:p}=l,m=T;let g,v,y,b,_=!1,w=u(AB,xB.globalOptions),A=u(w),E=[];function x(e){const n=wB(t,y,b,r,i,e,l);if(e.loop&&!n.slideLooper.canLoop()){return x(Object.assign({},e,{loop:!1}))}return n}function S(e,n){_||(w=u(w,e),A=c(w),E=n||E,function(){const{container:e,slides:n}=A,r=VN(e)?t.querySelector(e):e;y=r||t.children[0];const i=VN(n)?y.querySelectorAll(n):n;b=[].slice.call(i||y.children)}(),g=x(A),d([w,...E.map((({options:t})=>t))]).forEach((t=>s.add(t,"change",T))),A.active&&(g.translate.to(g.location.get()),g.animation.init(),g.slidesInView.init(),g.slideFocus.init(),g.eventHandler.init(P),g.resizeHandler.init(P),g.slidesHandler.init(P),g.options.loop&&g.slideLooper.loop(),y.offsetParent&&b.length&&g.dragHandler.init(P),v=a.init(P,E)))}function T(t,e){const n=k();C(),S(u({startIndex:n},t),e),l.emit("reInit")}function C(){g.dragHandler.destroy(),g.eventStore.clear(),g.translate.clear(),g.slideLooper.clear(),g.resizeHandler.destroy(),g.slidesHandler.destroy(),g.slidesInView.destroy(),g.animation.destroy(),a.destroy(),s.clear()}function I(t,e,n){A.active&&!_&&(g.scrollBody.useBaseFriction().useDuration(!0===e?0:A.duration),g.scrollTo.index(t,n||0))}function k(){return g.index.get()}const P={canScrollNext:function(){return g.index.add(1).get()!==k()},canScrollPrev:function(){return g.index.add(-1).get()!==k()},containerNode:function(){return y},internalEngine:function(){return g},destroy:function(){_||(_=!0,s.clear(),C(),l.emit("destroy"))},off:h,on:f,emit:p,plugins:function(){return v},previousScrollSnap:function(){return g.indexPrevious.get()},reInit:m,rootNode:function(){return t},scrollNext:function(t){I(g.index.add(1).get(),t,-1)},scrollPrev:function(t){I(g.index.add(-1).get(),t,1)},scrollProgress:function(){return g.scrollProgress.get(g.location.get())},scrollSnapList:function(){return g.scrollSnapList},scrollTo:I,selectedScrollSnap:k,slideNodes:function(){return b},slidesInView:function(){return g.slidesInView.get()},slidesNotInView:function(){return g.slidesInView.get(!1)}};return S(e,n),setTimeout((()=>l.emit("init")),0),P}function SB(t){return SB="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},SB(t)}function TB(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,OB(r.key),r)}}function CB(t,e,n){return e=kB(e),function(t,e){if(e&&("object"===SB(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,IB()?Reflect.construct(e,n||[],kB(t).constructor):e.apply(t,n))}function IB(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(IB=function(){return!!t})()}function kB(t){return kB=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},kB(t)}function PB(t,e){return PB=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},PB(t,e)}function RB(t,e,n){return(e=OB(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function OB(t){var e=function(t,e){if("object"!=SB(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=SB(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==SB(e)?e:e+""}function MB(t,e,n){!function(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}(t,e),e.set(t,n)}function LB(t,e){return t.get(DB(t,e))}function DB(t,e,n){if("function"==typeof t?t===e:t.has(e))return arguments.length<3?e:n;throw new TypeError("Private element is not present on this object")}xB.globalOptions=void 0;var NB=new WeakMap,BB=function(t){function e(t,n){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),MB(r=CB(this,e,[t,n]),NB,null),RB(r,"onResize",(function(){r.onSlideChange()})),RB(r,"onGrab",(function(){r.element.classList.add("grabbing")})),RB(r,"onUnGrab",(function(){r.element.classList.remove("grabbing")})),RB(r,"onSlideChange",(function(){r.prevCta.classList.toggle("disabled",!LB(NB,r).canScrollPrev()),r.nextCta.classList.toggle("disabled",!LB(NB,r).canScrollNext()),r.controlsW.classList.toggle("hidden",!LB(NB,r).canScrollPrev()&&!LB(NB,r).canScrollNext()),r.emblaC.classList.toggle("center",!LB(NB,r).canScrollPrev()&&!LB(NB,r).canScrollNext())})),RB(r,"applyProgress",(function(){var t=Math.max(0,Math.min(1,LB(NB,r).scrollProgress()));r.progress.style.transform="translate3d(".concat(100*t,"%,0px,0px)")})),r.embla=t.querySelector(".embla"),r.emblaC=t.querySelector(".embla__container"),r.slides=t.querySelectorAll(".slide"),r.controlsW=t.querySelector(".controls-w"),r.ctaW=t.querySelector(".cta-w"),r.prevCta=t.querySelector(".left"),r.nextCta=t.querySelector(".right"),r.progress=t.querySelector(".progress"),r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&PB(t,e)}(e,t),n=e,r=[{key:"init",value:function(){!function(t,e,n){t.set(DB(t,e),n)}(NB,this,xB(this.embla,{dragFree:!0,align:"center"})),this.onResize()}},{key:"attach",value:function(){this.prevCta.addEventListener("click",LB(NB,this).scrollPrev),this.nextCta.addEventListener("click",LB(NB,this).scrollNext),LB(NB,this).on("select",this.onSlideChange),LB(NB,this).on("resize",this.onResize),LB(NB,this).on("scroll",this.applyProgress),LB(NB,this).on("init",this.applyProgress),LB(NB,this).on("reInit",this.applyProgress),LB(NB,this).on("slideFocus",this.applyProgress),this.element.addEventListener("pointerdown",this.onGrab),this.element.addEventListener("pointerup",this.onUnGrab)}},{key:"detach",value:function(){this.prevCta.removeEventListener("click",LB(NB,this).scrollPrev),this.nextCta.removeEventListener("click",LB(NB,this).scrollNext),LB(NB,this).off("select",this.onSlideChange),LB(NB,this).off("resize",this.onResize),LB(NB,this).off("scroll",this.applyProgress),LB(NB,this).off("init",this.applyProgress),LB(NB,this).off("reInit",this.applyProgress),LB(NB,this).off("slideFocus",this.applyProgress),this.element.removeEventListener("pointerdown",this.onGrab),this.element.removeEventListener("pointerup",this.onUnGrab)}}],r&&TB(n.prototype,r),i&&TB(n,i),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,i}(Yp);function jB(t){return jB="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},jB(t)}function zB(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,VB(r.key),r)}}function FB(t,e,n){return e=qB(e),function(t,e){if(e&&("object"===jB(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,UB()?Reflect.construct(e,n||[],qB(t).constructor):e.apply(t,n))}function UB(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(UB=function(){return!!t})()}function qB(t){return qB=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},qB(t)}function GB(t,e){return GB=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},GB(t,e)}function HB(t,e,n){return(e=VB(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function VB(t){var e=function(t,e){if("object"!=jB(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=jB(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==jB(e)?e:e+""}var QB=function(t){function e(t,n){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),HB(r=FB(this,e,[t,n]),"onResize",(function(){var t;ti.set(r.innerWrapper,{clearProps:"maxWidth"}),null===(t=r.quoteSplit)||void 0===t||t.revert(),r.quoteSplit=new Fs(r.quote,{type:"lines",linesClass:"line"}),r.quote.querySelectorAll(".line").forEach((function(t){t.querySelector(".words")&&(r.lineWithWordsWrapper=t)})),ti.set(r.innerWrapper,{maxWidth:"none"}),r.currentIndex=0,r.wordsWrapper=r.element.querySelector(".words"),r.words=r.element.querySelectorAll(".words span"),ti.set(r.wordsWrapper,{width:"".concat(r.words[0].offsetWidth,"px")}),r.words.length>1&&(r.initScrollTrigger(),r.animateWords())})),HB(r,"animateWords",(function(){r.textShadow={a:0},r.tl&&r.tl.kill(),r.tl=ti.timeline({repeat:-1,repeatDelay:4,paused:!0,delay:1}),r.tl.to(r.textShadow,{a:12,duration:.8,ease:"none",onUpdate:r.textShadowElement},0),r.tl.call((function(){r.currentIndex++,r.words.forEach((function(t){t.classList.remove("active")})),r.updateWidth()}),null,.6),r.tl.to(r.textShadow,{a:0,duration:.8,ease:"none",onUpdate:r.textShadowElement},1.2)})),HB(r,"updateWidth",(function(){var t=r.words[r.currentIndex%r.words.length].offsetWidth,e=t>r.wordsWrapper.offsetWidth?0:((r.wordsWrapper.offsetWidth-t)/500+.2).toFixed(3);r.tlWidth&&r.tlWidth.kill(),r.tlWidth=ti.timeline(),r.tlWidth.call((function(){r.words[r.currentIndex%r.words.length].classList.add("active"),ti.to(r.wordsWrapper,{width:"".concat(t,"px"),duration:1.2,ease:"power3.out"})}),null,e)})),HB(r,"textShadowElement",(function(){var t="0 0 ".concat(r.textShadow.a,"px rgba(169, 76, 33, 1)");ti.set(r.wordsWrapper,{textShadow:t})})),r.innerWrapper=r.element.querySelector(".inner"),r.quote=r.element.querySelector(".quote"),r.wordsWrapper=r.element.querySelector(".words"),r.words=r.element.querySelectorAll(".words span"),r.lineWithWordsWrapper=null,r.currentIndex=0,r.quoteSplit=null,r.st=null,r.tl=null,r.tlWidth=null,r.textShadow={a:0},r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&GB(t,e)}(e,t),n=e,(r=[{key:"init",value:function(){this.textShadowElement(),this.words[0].classList.add("active"),this.wordsWrapper.style.width="".concat(this.words[0].offsetWidth,"px"),this.words.length>1&&(this.animateWords(),this.initScrollTrigger())}},{key:"attach",value:function(){this.viewport.on("resize",this.onResize)}},{key:"detach",value:function(){this.viewport.off("resize",this.onResize)}},{key:"initScrollTrigger",value:function(){var t=this;this.st&&this.st.kill(),this.st=us.create(HB({trigger:this.quote,onEnter:function(){t.tl.play()},onLeaveBack:function(){t.tl.pause()},onEnterBack:function(){t.tl.play()}},"onLeaveBack",(function(){t.tl.pause()})))}}])&&zB(n.prototype,r),i&&zB(n,i),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,i}(Yp);function WB(t){return WB="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},WB(t)}function YB(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,tj(r.key),r)}}function KB(t,e,n){return e=$B(e),function(t,e){if(e&&("object"===WB(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,XB()?Reflect.construct(e,n||[],$B(t).constructor):e.apply(t,n))}function XB(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(XB=function(){return!!t})()}function $B(t){return $B=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},$B(t)}function ZB(t,e){return ZB=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},ZB(t,e)}function JB(t,e,n){return(e=tj(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function tj(t){var e=function(t,e){if("object"!=WB(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=WB(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==WB(e)?e:e+""}var ej=function(t){function e(t,n){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),JB(r=KB(this,e,[t,n]),"onResize",(function(){r.isMobile=window.innerWidth<1025,r.initEmbla()})),JB(r,"initEmbla",(function(){r.isMobile&&r.images.length>1?r.embla=xB(r.imagesContainer,{active:!0,breakpoints:{"(min-width: 1025px)":{active:!1}},snap:!0}):r.embla&&(r.embla.destroy(),r.embla=null)})),r.imagesContainer=t.querySelector(".images-container"),r.images=t.querySelectorAll(".image-w"),r.embla=null,r.isMobile=window.innerWidth<1025,r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&ZB(t,e)}(e,t),n=e,(r=[{key:"init",value:function(){this.initEmbla()}},{key:"attach",value:function(){this.viewport.on("resize",this.onResize)}},{key:"detach",value:function(){this.viewport.off("resize",this.onResize)}}])&&YB(n.prototype,r),i&&YB(n,i),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,i}(Yp);function nj(t){return nj="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},nj(t)}function rj(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,uj(r.key),r)}}function ij(t,e,n){return e=aj(e),function(t,e){if(e&&("object"===nj(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,oj()?Reflect.construct(e,n||[],aj(t).constructor):e.apply(t,n))}function oj(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(oj=function(){return!!t})()}function aj(t){return aj=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},aj(t)}function sj(t,e){return sj=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},sj(t,e)}function lj(t,e,n){return(e=uj(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function uj(t){var e=function(t,e){if("object"!=nj(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=nj(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==nj(e)?e:e+""}var cj=function(t){function e(t,n){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),lj(r=ij(this,e,[t,n]),"onResize",(function(){r.initSplitText()})),lj(r,"initSplitText",(function(){r.splitText.length&&r.splitText.forEach((function(t){t.revert()})),r.links.forEach((function(t,e){r.splitText[e]=new Fs(t,{type:"lines",linesClass:"line"})}))})),r.links=r.element.querySelectorAll(".text-w .link"),r.splitText=[],r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&sj(t,e)}(e,t),n=e,(r=[{key:"attach",value:function(){this.viewport.on("resize",this.onResize)}},{key:"detach",value:function(){this.viewport.off("resize",this.onResize)}}])&&rj(n.prototype,r),i&&rj(n,i),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,i}(Yp);function dj(t){return dj="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},dj(t)}function fj(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,yj(r.key),r)}}function hj(t,e,n){return e=mj(e),function(t,e){if(e&&("object"===dj(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,pj()?Reflect.construct(e,n||[],mj(t).constructor):e.apply(t,n))}function pj(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(pj=function(){return!!t})()}function mj(t){return mj=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},mj(t)}function gj(t,e){return gj=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},gj(t,e)}function vj(t,e,n){return(e=yj(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function yj(t){var e=function(t,e){if("object"!=dj(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=dj(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==dj(e)?e:e+""}var bj=function(t){function e(t,n){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),vj(r=hj(this,e,[t,n]),"onResize",(function(){})),vj(r,"plusWapperDisappearAnimation",(function(){r.plusWrapperTl&&r.plusWrapperTl.kill(),r.plusWrapperTl=ti.timeline({onComplete:function(){r.plusWrapper.style.display="none"}}),r.plusWrapperTl.to(r.plusBtn,{scale:0,ease:"power3.inOut",duration:1},0),r.plusWrapperTl.to(r.plusCaption,{opacity:0,ease:"power3.inOut",duration:1},0)})),vj(r,"showNewQuestions",(function(){r.updateQuestionsNumberShown(),r.questionsTl&&r.questionsTl.kill(),r.questionsTl=ti.timeline(),r.questionsTl.set(r.questionsShownTemp,{display:"grid"},0),r.questionsTl.fromTo(r.questionsShownTemp,{clipPath:"polygon(0 0, 0% 0, 0 100%, 0% 100%)",webkitClipPath:"polygon(0 0, 0% 0, 0 100%, 0% 100%)"},{clipPath:"polygon(0 0, 100% 0, 100% 100%, 0 100%)",webkitClipPath:"polygon(0 0, 100% 0, 100% 100%, 0 100%)",clearProps:"all",stagger:.1,duration:1.6,ease:"power3.inOut"},.2),r.questionsShownTemp.forEach((function(t,e){r.questionsTl.fromTo(t.querySelector(".title"),{opacity:0},{opacity:1,duration:1,ease:"power3.inOut"},.6+.1*e),r.questionsTl.fromTo(t.querySelector(".content-trigger"),{opacity:0},{opacity:1,duration:1,ease:"power3.inOut"},.8+.1*e)}))})),vj(r,"updateQuestionsNumberShown",(function(){if(r.questionsHidden.length>0){r.questionsShown=r.questionsShown.concat(r.questionsShownTemp.splice(0,r.questionsShownTemp.length)),r.questionsShowMaxNumberToAdd=r.questionsHidden.length;for(var t=0;t<r.questionsShowMaxNumberToAdd;t++){var e=r.questionsHidden.shift();r.questionsShownTemp.push(e)}r.plusBtnNeeded=0!==r.questionsHidden.length,r.plusBtnNeeded||r.plusWapperDisappearAnimation()}})),r.questionsWrapper=r.element.querySelector(".questions"),r.allQuestions=r.questionsWrapper.querySelectorAll(".question"),r.plusWrapper=r.element.querySelector(".plus-wrapper"),r.plusWrapper&&(r.plusBtn=r.plusWrapper.querySelector(".plus-btn")),r.plusWrapper&&(r.plusCaption=r.plusWrapper.querySelector(".caption")),r.plusBtnNeeded=!1,r.questionsShown=[],r.questionsHidden=[],r.questionsShownTemp=[],r.questionsShownMaxNumber=r.element.dataset.maximum,r.questionsShowMaxNumberToAdd=4,r.allQuestions.forEach((function(t,e){e<r.questionsShownMaxNumber?r.questionsShown.push(t):r.questionsHidden.push(t)})),r.questionsTl=null,r.plusWrapperTl=null,r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&gj(t,e)}(e,t),n=e,(r=[{key:"attach",value:function(){this.viewport.on("resize",this.onResize),this.plusBtn&&this.plusBtn.addEventListener("click",this.showNewQuestions)}},{key:"detach",value:function(){this.viewport.off("resize",this.onResize),this.plusBtn&&this.plusBtn.removeEventListener("click",this.showNewQuestions)}},{key:"init",value:function(){this.questionsHidden.forEach((function(t){t.style.display="none"}))}}])&&fj(n.prototype,r),i&&fj(n,i),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,i}(Yp);function _j(t){return _j="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_j(t)}function wj(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Tj(r.key),r)}}function Aj(t,e,n){return e=xj(e),function(t,e){if(e&&("object"===_j(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,Ej()?Reflect.construct(e,n||[],xj(t).constructor):e.apply(t,n))}function Ej(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(Ej=function(){return!!t})()}function xj(t){return xj=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},xj(t)}function Sj(t,e){return Sj=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Sj(t,e)}function Tj(t){var e=function(t,e){if("object"!=_j(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=_j(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==_j(e)?e:e+""}var Cj=function(t){function e(t,n){var r,i,o,a;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),r=Aj(this,e,[t,n]),i=r,a=function(t){r.target=t.currentTarget,r.open=r.element.classList.toggle("open"),r.tl&&r.tl.kill(),r.tl=ti.timeline({onStart:function(){r.element.style.pointerEvents="none",r.element.classList.add("animate")},onComplete:function(){r.element.style.pointerEvents="auto",r.element.classList.remove("animate")}}),r.tl.to(r.content,{duration:.8,ease:"power3.out",height:r.open?"auto":0},0)},(o=Tj(o="openToggle"))in i?Object.defineProperty(i,o,{value:a,enumerable:!0,configurable:!0,writable:!0}):i[o]=a,r.trigger=r.element.querySelector(".content-trigger"),r.content=r.element.querySelector(".content-wrapper"),r.tl=null,r.open=!1,r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Sj(t,e)}(e,t),n=e,(r=[{key:"attach",value:function(){this.trigger.addEventListener("click",this.openToggle)}},{key:"detach",value:function(){this.trigger.removeEventListener("click",this.openToggle)}}])&&wj(n.prototype,r),i&&wj(n,i),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,i}(Yp);function Ij(t){return Ij="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ij(t)}function kj(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Nj(r.key),r)}}function Pj(t,e,n){return e=Lj(e),function(t,e){if(e&&("object"===Ij(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,Rj()?Reflect.construct(e,n||[],Lj(t).constructor):e.apply(t,n))}function Rj(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(Rj=function(){return!!t})()}function Oj(t,e){return Oj=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Oj(t,e)}function Mj(){return Mj="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Lj(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(arguments.length<3?t:n):i.value}},Mj.apply(this,arguments)}function Lj(t){return Lj=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Lj(t)}function Dj(t,e,n){return(e=Nj(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Nj(t){var e=function(t,e){if("object"!=Ij(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=Ij(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Ij(e)?e:e+""}var Bj=function(t){function e(t){var n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),Dj(n=Pj(this,e,[t,r]),"media",(function(t){n.isMobile=t})),Dj(n,"layout",(function(){Mj(Lj(e.prototype),"layout",n).call(n),n.emit("layoutChange",n.input.max.x<=0)})),n.isMobile=!1,n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Oj(t,e)}(e,t),n=e,r=[{key:"slideAnimation",value:function(t){var e=ti.timeline({paused:!0}),n=t.element;return e.fromTo(n.querySelector(".overlay"),{opacity:1},{opacity:0,ease:"none",duration:1},0),e.fromTo(n.querySelector("img"),{scale:1},{scale:1.2,ease:"none",duration:1},0),e.fromTo(n,{x:0},{x:this._scrollRight,ease:"none",duration:1},1),e.fromTo(n,{scaleX:1},{scaleX:.8,ease:"none",duration:1},1),e.fromTo(n.querySelector("img"),{scaleX:1.2},{scaleX:1.4,ease:"none",duration:1},1),e.seek(1),e}}],r&&kj(n.prototype,r),i&&kj(n,i),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,i}(Th);function jj(t){return jj="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},jj(t)}function zj(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Vj(r.key),r)}}function Fj(t,e,n){return e=qj(e),function(t,e){if(e&&("object"===jj(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,Uj()?Reflect.construct(e,n||[],qj(t).constructor):e.apply(t,n))}function Uj(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(Uj=function(){return!!t})()}function qj(t){return qj=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},qj(t)}function Gj(t,e){return Gj=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Gj(t,e)}function Hj(t,e,n){return(e=Vj(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Vj(t){var e=function(t,e){if("object"!=jj(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=jj(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==jj(e)?e:e+""}function Qj(t,e,n){!function(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}(t,e),e.set(t,n)}function Wj(t,e){return t.get(Kj(t,e))}function Yj(t,e,n){return t.set(Kj(t,e),n),n}function Kj(t,e,n){if("function"==typeof t?t===e:t.has(e))return arguments.length<3?e:n;throw new TypeError("Private element is not present on this object")}var Xj=new WeakMap,$j=new WeakMap,Zj=new WeakMap,Jj=function(t){function e(t,n){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),Qj(r=Fj(this,e,[t,n]),Xj,null),Qj(r,$j,0),Qj(r,Zj,0),Hj(r,"onResize",(function(){Yj($j,r,r.progressBar.offsetWidth),Yj(Zj,r,r.progressIndicator.offsetWidth)})),Hj(r,"onLayoutChange",(function(t){r.controls.classList.toggle("disabled",t)})),Hj(r,"onSlideChange",(function(t){r.prevCta.classList.toggle("disabled",0===t),r.nextCta.classList.toggle("disabled",t===Wj(Xj,r)._max)})),Hj(r,"render",(function(){r.progressIndicator.style.transform="translate3d(".concat(ti.utils.clamp(0,Wj($j,r)-Wj(Zj,r),Wj(Xj,r).input.position.x/Wj(Xj,r).input.max.x*(Wj($j,r)-Wj(Zj,r))),"px, 0, 0)")})),r.reference=t.querySelector(".reference"),r.slideshow=t.querySelector(".slideshow"),r.slides=t.querySelectorAll(".slide"),r.controls=t.querySelector(".controls"),r.progressBar=t.querySelector(".progress-bar"),r.progressIndicator=t.querySelector(".progress-bar .indicator"),r.prevCta=t.querySelector(".left"),r.nextCta=t.querySelector(".right"),r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Gj(t,e)}(e,t),n=e,(r=[{key:"init",value:function(){Yj(Xj,this,new Bj(this.slideshow,{slides:".slide",snapping:!0,reference:this.reference,inputOptions:{wheel:!1,drag:!0},autoResize:!0})),this.onSlideChange(0)}},{key:"attach",value:function(){this.viewport.on("resize",this.onResize),Wj(Xj,this).attach(),Wj(Xj,this).on("layoutChange",this.onLayoutChange),Wj(Xj,this).on("change",this.onSlideChange),this.prevCta.addEventListener("click",Wj(Xj,this).previous),this.nextCta.addEventListener("click",Wj(Xj,this).next),ti.ticker.add(this.render)}},{key:"detach",value:function(){this.viewport.off("resize",this.onResize),Wj(Xj,this).detach(),Wj(Xj,this).off("layoutChange",this.onLayoutChange),Wj(Xj,this).off("change",this.onSlideChange),this.prevCta.removeEventListener("click",Wj(Xj,this).previous),this.nextCta.removeEventListener("click",Wj(Xj,this).next),ti.ticker.remove(this.render)}}])&&zj(n.prototype,r),i&&zj(n,i),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,i}(Yp);function tz(t){return tz="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},tz(t)}function ez(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,sz(r.key),r)}}function nz(t,e,n){return e=iz(e),function(t,e){if(e&&("object"===tz(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,rz()?Reflect.construct(e,n||[],iz(t).constructor):e.apply(t,n))}function rz(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(rz=function(){return!!t})()}function iz(t){return iz=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},iz(t)}function oz(t,e){return oz=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},oz(t,e)}function az(t,e,n){return(e=sz(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function sz(t){var e=function(t,e){if("object"!=tz(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=tz(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==tz(e)?e:e+""}var lz=function(t){function e(t,n){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),az(r=nz(this,e,[t,n]),"toggleOptions",(function(){r.isOpen=!r.isOpen,r.element.classList.toggle("open",r.isOpen),r.tl&&r.tl.kill(),r.tl=ti.timeline(),r.tl.to(r.optionwWrapper,{height:r.isOpen?"auto":0,duration:.6,ease:"immg.zoomOut"})})),az(r,"updateOptions",(function(t){t.classList.contains("selected")||(r.allOptions.forEach((function(t){t.classList.remove("selected")})),t.classList.add("selected"),r.setLabel&&(r.label.innerHTML=t.querySelector(".label").innerHTML),r.toggleOptions(),r.emit("updateFilter",JSON.stringify({value:t.getAttribute("data-value"),title:t.getAttribute("data-title")})))})),r.labelWrapper=r.element.querySelector(".label-w"),r.label=r.labelWrapper.querySelector(".label"),r.optionwWrapper=r.element.querySelector(".options-w"),r.allOptions=r.element.querySelectorAll(".options .option"),r.setLabel=r.element.dataset.setLabel,r.tl=null,r.isOpen=!1,r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&oz(t,e)}(e,t),n=e,(r=[{key:"attach",value:function(){var t=this;this.labelWrapper.addEventListener("click",this.toggleOptions),this.allOptions.forEach((function(e){e.addEventListener("click",(function(){t.updateOptions(e)}))}))}},{key:"detach",value:function(){var t=this;this.labelWrapper.removeEventListener("click",this.toggleOptions),this.allOptions.forEach((function(e){e.removeEventListener("click",(function(){t.updateOptions(e)}))}))}}])&&ez(n.prototype,r),i&&ez(n,i),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,i}(Yp);function uz(t){return uz="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},uz(t)}function cz(t){return function(t){if(Array.isArray(t))return hz(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||fz(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function dz(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=fz(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return a=t.done,t},e:function(t){s=!0,o=t},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function fz(t,e){if(t){if("string"==typeof t)return hz(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?hz(t,e):void 0}}function hz(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function pz(){pz=function(){return e};var t,e={},n=Object.prototype,r=n.hasOwnProperty,i=Object.defineProperty||function(t,e,n){t[e]=n.value},o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",s=o.asyncIterator||"@@asyncIterator",l=o.toStringTag||"@@toStringTag";function u(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,n){return t[e]=n}}function c(t,e,n,r){var o=e&&e.prototype instanceof v?e:v,a=Object.create(o.prototype),s=new P(r||[]);return i(a,"_invoke",{value:T(t,n,s)}),a}function d(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}e.wrap=c;var f="suspendedStart",h="suspendedYield",p="executing",m="completed",g={};function v(){}function y(){}function b(){}var _={};u(_,a,(function(){return this}));var w=Object.getPrototypeOf,A=w&&w(w(R([])));A&&A!==n&&r.call(A,a)&&(_=A);var E=b.prototype=v.prototype=Object.create(_);function x(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function S(t,e){function n(i,o,a,s){var l=d(t[i],t,o);if("throw"!==l.type){var u=l.arg,c=u.value;return c&&"object"==uz(c)&&r.call(c,"__await")?e.resolve(c.__await).then((function(t){n("next",t,a,s)}),(function(t){n("throw",t,a,s)})):e.resolve(c).then((function(t){u.value=t,a(u)}),(function(t){return n("throw",t,a,s)}))}s(l.arg)}var o;i(this,"_invoke",{value:function(t,r){function i(){return new e((function(e,i){n(t,r,e,i)}))}return o=o?o.then(i,i):i()}})}function T(e,n,r){var i=f;return function(o,a){if(i===p)throw Error("Generator is already running");if(i===m){if("throw"===o)throw a;return{value:t,done:!0}}for(r.method=o,r.arg=a;;){var s=r.delegate;if(s){var l=C(s,r);if(l){if(l===g)continue;return l}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(i===f)throw i=m,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);i=p;var u=d(e,n,r);if("normal"===u.type){if(i=r.done?m:h,u.arg===g)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(i=m,r.method="throw",r.arg=u.arg)}}}function C(e,n){var r=n.method,i=e.iterator[r];if(i===t)return n.delegate=null,"throw"===r&&e.iterator.return&&(n.method="return",n.arg=t,C(e,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),g;var o=d(i,e.iterator,n.arg);if("throw"===o.type)return n.method="throw",n.arg=o.arg,n.delegate=null,g;var a=o.arg;return a?a.done?(n[e.resultName]=a.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=t),n.delegate=null,g):a:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,g)}function I(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function k(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function P(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(I,this),this.reset(!0)}function R(e){if(e||""===e){var n=e[a];if(n)return n.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var i=-1,o=function n(){for(;++i<e.length;)if(r.call(e,i))return n.value=e[i],n.done=!1,n;return n.value=t,n.done=!0,n};return o.next=o}}throw new TypeError(uz(e)+" is not iterable")}return y.prototype=b,i(E,"constructor",{value:b,configurable:!0}),i(b,"constructor",{value:y,configurable:!0}),y.displayName=u(b,l,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===y||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,b):(t.__proto__=b,u(t,l,"GeneratorFunction")),t.prototype=Object.create(E),t},e.awrap=function(t){return{__await:t}},x(S.prototype),u(S.prototype,s,(function(){return this})),e.AsyncIterator=S,e.async=function(t,n,r,i,o){void 0===o&&(o=Promise);var a=new S(c(t,n,r,i),o);return e.isGeneratorFunction(n)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},x(E),u(E,l,"Generator"),u(E,a,(function(){return this})),u(E,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),n=[];for(var r in e)n.push(r);return n.reverse(),function t(){for(;n.length;){var r=n.pop();if(r in e)return t.value=r,t.done=!1,t}return t.done=!0,t}},e.values=R,P.prototype={constructor:P,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(k),!e)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function i(r,i){return s.type="throw",s.arg=e,n.next=r,i&&(n.method="next",n.arg=t),!!i}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],s=a.completion;if("root"===a.tryLoc)return i("end");if(a.tryLoc<=this.prev){var l=r.call(a,"catchLoc"),u=r.call(a,"finallyLoc");if(l&&u){if(this.prev<a.catchLoc)return i(a.catchLoc,!0);if(this.prev<a.finallyLoc)return i(a.finallyLoc)}else if(l){if(this.prev<a.catchLoc)return i(a.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return i(a.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=t,a.arg=e,o?(this.method="next",this.next=o.finallyLoc,g):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),g},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),k(n),g}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var i=r.arg;k(n)}return i}}throw Error("illegal catch attempt")},delegateYield:function(e,n,r){return this.delegate={iterator:R(e),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=t),g}},e}function mz(t,e,n,r,i,o,a){try{var s=t[o](a),l=s.value}catch(t){return void n(t)}s.done?e(l):Promise.resolve(l).then(r,i)}function gz(t){return function(){var e=this,n=arguments;return new Promise((function(r,i){var o=t.apply(e,n);function a(t){mz(o,r,i,a,s,"next",t)}function s(t){mz(o,r,i,a,s,"throw",t)}a(void 0)}))}}function vz(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Ez(r.key),r)}}function yz(t,e,n){return e=_z(e),function(t,e){if(e&&("object"===uz(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,bz()?Reflect.construct(e,n||[],_z(t).constructor):e.apply(t,n))}function bz(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(bz=function(){return!!t})()}function _z(t){return _z=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},_z(t)}function wz(t,e){return wz=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},wz(t,e)}function Az(t,e,n){return(e=Ez(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Ez(t){var e=function(t,e){if("object"!=uz(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=uz(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==uz(e)?e:e+""}var xz=function(t){function e(t,n){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),Az(r=yz(this,e,[t,n]),"updateFilter",function(){var t=gz(pz().mark((function t(e){var n,i,o;return pz().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(i=JSON.parse(e),r.currentFilter!==(null==i?void 0:i.value)){t.next=3;break}return t.abrupt("return");case 3:return r.bootstrap.currentFilter=e,r.currentFilter=null==i?void 0:i.value,r.currentFilterTitle=null==i?void 0:i.title,null===(n=r.tl)||void 0===n||n.kill(),r.tl=ti.timeline(),r.tl.to(r.productsWrapper,{opacity:0,duration:.6,ease:"immg.zoomIn"},0),r.tl.to(r.title,{opacity:0,duration:.3,ease:"linear"},0),r.tl.add((function(){r.title.classList.remove("title-animation"),r.title.innerHTML=i.title,r.title.style.opacity=1,r.animationsModule.title([r.title])}),.3),r.loader.classList.add("active"),r.page=1,t.next=15,r.updateListing();case 15:o=t.sent,r.tl.add((function(){var t,e;r.loader.classList.remove("active"),null===(t=r.seeMoreCta)||void 0===t||t.removeEventListener("click",r.seeMore),r.productsWrapper.innerHTML=o,r.productsListing=r.productsWrapper.querySelector(".products"),r.products=r.productsWrapper.querySelectorAll(".product"),r.seeMoreCta=r.element.parentElement.querySelector(".see-more-cta"),null===(e=r.seeMoreCta)||void 0===e||e.addEventListener("click",r.seeMore),r.followLinkModule.update(),us.refresh()})),r.tl.to(r.productsWrapper,{opacity:1,duration:.6,ease:"immg.zoomIn",clearProps:"all"});case 18:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),Az(r,"seeMore",gz(pz().mark((function t(){var e,n,i,o,a,s,l;return pz().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r.seeMoreCta.classList.add("disabled"),r.page++,null===(e=r.tl)||void 0===e||e.kill(),r.tl=ti.timeline(),t.next=6,r.updateListing();case 6:n=t.sent,(i=document.createElement("div")).innerHTML=n,o=i.querySelectorAll(".product"),r.tl.set(o,{autoAlpha:0}),a=dz(o);try{for(a.s();!(s=a.n()).done;)l=s.value,r.productsListing.appendChild(l)}catch(t){a.e(t)}finally{a.f()}r.tl.to(o,{autoAlpha:1,duration:.6,ease:"immg.zoomIn",stagger:.1,clearProps:"all"},0),r.tl.add((function(){r.products=r.productsListing.querySelectorAll(".product"),i.remove(),r.seeMoreCta.classList.remove("disabled"),r.products.length>=r.productsListing.dataset.total&&r.disappearSeeMoreCta(),us.refresh(),r.followLinkModule.update()}),0);case 15:case"end":return t.stop()}}),t)})))),Az(r,"updateListing",gz(pz().mark((function t(){var e,n;return pz().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e={action:"david_products_listing",filter:r.currentFilter||"book",filterTitle:r.currentFilterTitle||"RECORDINGS & OTHER THINGS",page:r.page},t.next=3,fetch(ADMIN_AJAX_URL,{method:"POST",credentials:"include",headers:{"Content-type":"application/x-www-form-urlencoded"},body:new URLSearchParams(e).toString()});case 3:return n=t.sent,t.abrupt("return",n.text());case 5:case"end":return t.stop()}}),t)})))),Az(r,"disappearSeeMoreCta",(function(){r.ctaTl&&r.ctaTl.kill(),r.ctaTl=ti.timeline({onComplete:function(){r.seeMoreCta.style.display="none"}}),r.ctaTl.to(r.seeMoreCta,{autoAlpha:0,duration:.6,ease:"immg.zoomOut"},0)})),r.filtersSelector=r.element.querySelector(".custom-select"),r.loader=r.element.querySelector(".products-loader"),r.productsWrapper=r.element.querySelector(".products-w"),r.productsListing=r.productsWrapper.querySelector(".products"),r.products=r.productsWrapper.querySelectorAll(".product"),r.productsArray=cz(r.products),r.seeMoreCta=r.element.parentElement.querySelector(".see-more-cta"),r.title=r.element.querySelector("#category-title"),r.tl=null,r.currentFilter=null,r.currentFilterTitle=null,r.page=1,r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&wz(t,e)}(e,t),n=e,(r=[{key:"init",value:function(){this.filtersSelectorComponent=this.components.get(this.filtersSelector)}},{key:"attach",value:function(){var t,e;null===(t=this.filtersSelectorComponent)||void 0===t||t.on("updateFilter",this.updateFilter),null===(e=this.seeMoreCta)||void 0===e||e.addEventListener("click",this.seeMore)}},{key:"detach",value:function(){var t,e;null===(t=this.filtersSelectorComponent)||void 0===t||t.off("updateFilter",this.updateFilter),null===(e=this.seeMoreCta)||void 0===e||e.removeEventListener("click",this.seeMore)}}])&&vz(n.prototype,r),i&&vz(n,i),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,i}(Yp);function Sz(t){return Sz="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Sz(t)}function Tz(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Oz(r.key),r)}}function Cz(t,e,n){return e=kz(e),function(t,e){if(e&&("object"===Sz(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,Iz()?Reflect.construct(e,n||[],kz(t).constructor):e.apply(t,n))}function Iz(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(Iz=function(){return!!t})()}function kz(t){return kz=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},kz(t)}function Pz(t,e){return Pz=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Pz(t,e)}function Rz(t,e,n){return(e=Oz(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Oz(t){var e=function(t,e){if("object"!=Sz(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=Sz(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Sz(e)?e:e+""}var Mz=function(t){function e(t,n){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),Rz(r=Cz(this,e,[t,n]),"onResize",(function(){if(r.isMobile=window.innerWidth<768,r.initEmbla(),r.progressBar){var t=100/r.slides.length;r.progressIndicator.style.width="".concat(t,"%")}})),Rz(r,"initEmbla",(function(){r.slides.length>1?(r.embla=xB(r.productsSlideshow,{active:!0,snap:!0,align:"start",containScroll:!1}),r.updateValues()):r.embla&&(r.embla.destroy(),r.embla=null)})),Rz(r,"onClickPrev",(function(){r.embla.canScrollPrev()&&(r.embla.scrollPrev(),r.updateValues())})),Rz(r,"onClickNext",(function(){r.embla.canScrollNext()&&(r.embla.scrollNext(),r.updateValues())})),Rz(r,"onPointerDown",(function(){r.productsSlideshow.classList.add("grabbing")})),Rz(r,"onPointerUp",(function(){r.productsSlideshow.classList.remove("grabbing")})),Rz(r,"updateValues",(function(t){var e=t||r.embla;r.currentSlide=e.selectedScrollSnap(),r.updateProgressBar(),r.updateInformations(),r.btnPrev.classList.toggle("disabled",!e.canScrollPrev()),r.btnNext.classList.toggle("disabled",!e.canScrollNext())})),Rz(r,"updateProgressBar",(function(){var t=r.currentSlide/(r.slides.length-1),e=(r.progressBar.offsetWidth-r.progressIndicator.offsetWidth)*t;ti.to(r.progressIndicator,{x:e,duration:.6,ease:"immg.zoomOut"})})),Rz(r,"updateInformations",(function(){var t=r.slides[r.currentSlide].dataset.title,e=r.slides[r.currentSlide].dataset.description,n=r.slides[r.currentSlide].dataset.productId;r.tlInformations&&r.tlInformations.kill(),r.tlInformations=ti.timeline({onStart:function(){},onComplete:function(){}}),r.tlInformations.to(r.title,{opacity:0,duration:.4,ease:"immg.posIn"},0),r.tlInformations.to(r.description,{opacity:0,duration:.4,ease:"immg.posIn"},.1),r.tlInformations.to(r.btnCart,{opacity:0,duration:.4,ease:"immg.posIn"},.2),r.tlInformations.add((function(){r.title.innerHTML=t,r.btnCart.dataset.product=n}),.4),r.tlInformations.add((function(){r.description.innerHTML=e}),.5),r.tlInformations.to(r.title,{opacity:1,duration:.6,ease:"immg.posIn"},.4),r.tlInformations.to(r.description,{opacity:1,duration:.6,ease:"immg.posIn"},.5),r.tlInformations.to(r.btnCart,{opacity:1,duration:.6,ease:"immg.posIn"},.6)})),r.title=r.element.querySelector(".informations .title"),r.description=r.element.querySelector(".informations .description"),r.btnCart=r.element.querySelector(".informations .cta"),r.productsSlideshow=r.element.querySelector(".products-slideshow"),r.slides=r.productsSlideshow.querySelectorAll(".slide"),r.progressBar=r.element.querySelector(".progress-bar"),r.progressBar&&(r.progressIndicator=r.progressBar.querySelector(".indicator")),r.btnWrapper=r.element.querySelector(".ctas-w"),r.btnWrapper&&(r.btnPrev=r.btnWrapper.querySelector(".rounded-cta.left"),r.btnNext=r.btnWrapper.querySelector(".rounded-cta.right")),r.embla=null,r.canSwipe=!0,r.currentSlide=0,r.isMobile=window.innerWidth<768,r.tlInformations=null,r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Pz(t,e)}(e,t),n=e,(r=[{key:"attach",value:function(){this.viewport.on("resize",this.onResize),this.embla&&(this.embla.on("select",this.updateValues),this.embla.on("pointerDown",this.onPointerDown),this.embla.on("pointerUp",this.onPointerUp),this.btnPrev.addEventListener("click",this.onClickPrev),this.btnNext.addEventListener("click",this.onClickNext))}},{key:"detach",value:function(){this.viewport.off("resize",this.onResize),this.embla&&(this.embla.off("select",this.updateValues),this.embla.off("pointerDown",this.onPointerDown),this.embla.off("pointerUp",this.onPointerUp),this.btnPrev.removeEventListener("click",this.onClickPrev),this.btnNext.removeEventListener("click",this.onClickNext))}},{key:"init",value:function(){this.initEmbla(),this.embla||this.updateInformations()}}])&&Tz(n.prototype,r),i&&Tz(n,i),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,i}(Yp);function Lz(t){return Lz="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Lz(t)}function Dz(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Uz(r.key),r)}}function Nz(t,e,n){return e=jz(e),function(t,e){if(e&&("object"===Lz(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,Bz()?Reflect.construct(e,n||[],jz(t).constructor):e.apply(t,n))}function Bz(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(Bz=function(){return!!t})()}function jz(t){return jz=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},jz(t)}function zz(t,e){return zz=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},zz(t,e)}function Fz(t,e,n){return(e=Uz(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Uz(t){var e=function(t,e){if("object"!=Lz(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=Lz(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Lz(e)?e:e+""}function qz(t,e,n){!function(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}(t,e),e.set(t,n)}function Gz(t,e){return t.get(Vz(t,e))}function Hz(t,e,n){return t.set(Vz(t,e),n),n}function Vz(t,e,n){if("function"==typeof t?t===e:t.has(e))return arguments.length<3?e:n;throw new TypeError("Private element is not present on this object")}var Qz=new WeakMap,Wz=new WeakMap,Yz=function(t){function e(t,n){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),qz(r=Nz(this,e,[t,n]),Qz,null),qz(r,Wz,null),Fz(r,"update",(function(){var t=Gz(Qz,r)-new Date;if(t<0)r.onEnd();else{var e=Math.floor(t/864e5),n=Math.floor(t/36e5)%24,i=Math.floor(t/6e4)%60,o=Math.floor(t/1e3)%60;r.days.innerText=e.toString().padStart(2,"0"),r.hours.innerText=n.toString().padStart(2,"0"),r.minutes.innerText=i.toString().padStart(2,"0"),r.seconds.innerText=o.toString().padStart(2,"0")}})),Fz(r,"onEnd",(function(){clearInterval(Gz(Wz,r)),location.reload()})),Fz(r,"onResize",(function(){})),r.countdown=t.querySelector(".countdown-w"),r.startDate=r.countdown.dataset.date,r.days=r.countdown.querySelector(".days"),r.hours=r.countdown.querySelector(".hours"),r.minutes=r.countdown.querySelector(".minutes"),r.seconds=r.countdown.querySelector(".seconds"),r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&zz(t,e)}(e,t),n=e,(r=[{key:"init",value:function(){Hz(Qz,this,new Date(this.startDate)),Gz(Qz,this)-new Date<0||(this.update(),Hz(Wz,this,setInterval(this.update,1e3)))}},{key:"attach",value:function(){this.viewport.on("resize",this.onResize)}},{key:"detach",value:function(){this.viewport.off("resize",this.onResize),Gz(Wz,this)&&clearInterval(Gz(Wz,this))}}])&&Dz(n.prototype,r),i&&Dz(n,i),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,i}(Yp);function Kz(t){return Kz="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Kz(t)}function Xz(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,nF(r.key),r)}}function $z(t,e,n){return e=Jz(e),function(t,e){if(e&&("object"===Kz(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,Zz()?Reflect.construct(e,n||[],Jz(t).constructor):e.apply(t,n))}function Zz(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(Zz=function(){return!!t})()}function Jz(t){return Jz=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Jz(t)}function tF(t,e){return tF=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},tF(t,e)}function eF(t,e,n){return(e=nF(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function nF(t){var e=function(t,e){if("object"!=Kz(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=Kz(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Kz(e)?e:e+""}var rF=function(t){function e(t,n){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),eF(r=$z(this,e,[t,n]),"onResize",(function(){r.isMobile=window.innerWidth<768,r.initScrollTrigger()})),eF(r,"initEmbla",(function(){(r.btnPrev||r.btnNext)&&(r.embla=xB(r.slideshow,{align:"center",containScroll:"trimSnaps"}),r.onSlideChange())})),eF(r,"initScrollTrigger",(function(){r.informationsWrapper&&(r.st&&r.st.kill(),r.isMobile?r.st=null:r.st=us.create({trigger:r.element,start:"top top",end:"bottom bottom",pin:r.contentWrapper,pinSpacing:!1}))})),eF(r,"onSlideChange",(function(){r.btnPrev.classList.toggle("disabled",!r.embla.canScrollPrev()),r.btnNext.classList.toggle("disabled",!r.embla.canScrollNext())})),eF(r,"scrollTo",(function(){r.bootstrap.lenis.scrollTo(r.slideshow.offsetHeight)})),r.containerWrapper=r.element.querySelector(".container-w"),r.slideshow=r.containerWrapper.querySelector(".slideshow-w"),r.contentWrapper=r.containerWrapper.querySelector(".content-w"),r.btnPrev=r.element.querySelector(".rounded-cta.left"),r.btnNext=r.element.querySelector(".rounded-cta.right"),r.scrollCta=r.element.querySelector("button.scroll"),r.informationsWrapper=r.element.querySelector(".informations-w"),r.embla=null,r.isMobile=!1,r.currentIndex=0,r.st=null,r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&tF(t,e)}(e,t),n=e,(r=[{key:"init",value:function(){this.initEmbla()}},{key:"attach",value:function(){this.viewport.on("resize",this.onResize),this.embla&&this.embla.on("select",this.onSlideChange),this.btnPrev&&this.embla&&this.btnPrev.addEventListener("click",this.embla.scrollPrev),this.btnNext&&this.embla&&this.btnNext.addEventListener("click",this.embla.scrollNext),this.scrollCta.addEventListener("click",this.scrollTo)}},{key:"detach",value:function(){this.viewport.off("resize",this.onResize),this.btnPrev&&this.embla&&this.btnPrev.removeEventListener("click",this.embla.scrollPrev),this.btnNext&&this.embla&&this.btnNext.removeEventListener("click",this.embla.scrollNext),this.scrollCta.removeEventListener("click",this.scrollTo)}}])&&Xz(n.prototype,r),i&&Xz(n,i),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,i}(Yp);function iF(t){return iF="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},iF(t)}function oF(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,dF(r.key),r)}}function aF(t,e,n){return e=lF(e),function(t,e){if(e&&("object"===iF(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,sF()?Reflect.construct(e,n||[],lF(t).constructor):e.apply(t,n))}function sF(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(sF=function(){return!!t})()}function lF(t){return lF=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},lF(t)}function uF(t,e){return uF=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},uF(t,e)}function cF(t,e,n){return(e=dF(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function dF(t){var e=function(t,e){if("object"!=iF(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=iF(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==iF(e)?e:e+""}function fF(t,e,n){!function(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}(t,e),e.set(t,n)}function hF(t,e){return t.get(mF(t,e))}function pF(t,e,n){return t.set(mF(t,e),n),n}function mF(t,e,n){if("function"==typeof t?t===e:t.has(e))return arguments.length<3?e:n;throw new TypeError("Private element is not present on this object")}var gF=new WeakMap,vF=new WeakMap,yF=function(t){function e(t,n){var r,i,o,a,s;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),fF(s=aF(this,e,[t,n]),gF,null),fF(s,vF,null),cF(s,"update",(function(){var t=hF(gF,s)-new Date;if(t<0)s.onEnd();else{var e=Math.floor(t/864e5),n=Math.floor(t/36e5)%24;s.days.innerText=e.toString().padStart(2,"0"),s.hours.innerText=n.toString().padStart(2,"0")}})),cF(s,"onEnd",(function(){clearInterval(hF(vF,s)),document.dispatchEvent(s.customEvt)})),cF(s,"onClick",(function(t){s.bootstrap.lenis.scrollTo(s.anchor)})),s.cta=t.querySelector("button.cta"),s.anchor=null===(r=t.dataset)||void 0===r?void 0:r.anchor,s.dateW=t.querySelector(".date-w"),s.startDate=null===(i=s.dateW)||void 0===i?void 0:i.dataset.date,s.days=null===(o=s.dateW)||void 0===o?void 0:o.querySelector(".days"),s.hours=null===(a=s.dateW)||void 0===a?void 0:a.querySelector(".hours"),s.customEvt=new CustomEvent("eventEnd"),s}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&uF(t,e)}(e,t),n=e,(r=[{key:"init",value:function(){pF(gF,this,new Date(this.startDate)),this.startDate&&(this.update(),pF(vF,this,setInterval(this.update,1e3)))}},{key:"attach",value:function(){var t;null===(t=this.cta)||void 0===t||t.addEventListener("click",this.onClick)}},{key:"detach",value:function(){var t;null===(t=this.cta)||void 0===t||t.removeEventListener("click",this.onClick),hF(vF,this)&&clearInterval(hF(vF,this))}}])&&oF(n.prototype,r),i&&oF(n,i),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,i}(Yp);function bF(t){return bF="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},bF(t)}function _F(){_F=function(){return e};var t,e={},n=Object.prototype,r=n.hasOwnProperty,i=Object.defineProperty||function(t,e,n){t[e]=n.value},o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",s=o.asyncIterator||"@@asyncIterator",l=o.toStringTag||"@@toStringTag";function u(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,n){return t[e]=n}}function c(t,e,n,r){var o=e&&e.prototype instanceof v?e:v,a=Object.create(o.prototype),s=new P(r||[]);return i(a,"_invoke",{value:T(t,n,s)}),a}function d(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}e.wrap=c;var f="suspendedStart",h="suspendedYield",p="executing",m="completed",g={};function v(){}function y(){}function b(){}var _={};u(_,a,(function(){return this}));var w=Object.getPrototypeOf,A=w&&w(w(R([])));A&&A!==n&&r.call(A,a)&&(_=A);var E=b.prototype=v.prototype=Object.create(_);function x(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function S(t,e){function n(i,o,a,s){var l=d(t[i],t,o);if("throw"!==l.type){var u=l.arg,c=u.value;return c&&"object"==bF(c)&&r.call(c,"__await")?e.resolve(c.__await).then((function(t){n("next",t,a,s)}),(function(t){n("throw",t,a,s)})):e.resolve(c).then((function(t){u.value=t,a(u)}),(function(t){return n("throw",t,a,s)}))}s(l.arg)}var o;i(this,"_invoke",{value:function(t,r){function i(){return new e((function(e,i){n(t,r,e,i)}))}return o=o?o.then(i,i):i()}})}function T(e,n,r){var i=f;return function(o,a){if(i===p)throw Error("Generator is already running");if(i===m){if("throw"===o)throw a;return{value:t,done:!0}}for(r.method=o,r.arg=a;;){var s=r.delegate;if(s){var l=C(s,r);if(l){if(l===g)continue;return l}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(i===f)throw i=m,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);i=p;var u=d(e,n,r);if("normal"===u.type){if(i=r.done?m:h,u.arg===g)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(i=m,r.method="throw",r.arg=u.arg)}}}function C(e,n){var r=n.method,i=e.iterator[r];if(i===t)return n.delegate=null,"throw"===r&&e.iterator.return&&(n.method="return",n.arg=t,C(e,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),g;var o=d(i,e.iterator,n.arg);if("throw"===o.type)return n.method="throw",n.arg=o.arg,n.delegate=null,g;var a=o.arg;return a?a.done?(n[e.resultName]=a.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=t),n.delegate=null,g):a:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,g)}function I(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function k(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function P(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(I,this),this.reset(!0)}function R(e){if(e||""===e){var n=e[a];if(n)return n.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var i=-1,o=function n(){for(;++i<e.length;)if(r.call(e,i))return n.value=e[i],n.done=!1,n;return n.value=t,n.done=!0,n};return o.next=o}}throw new TypeError(bF(e)+" is not iterable")}return y.prototype=b,i(E,"constructor",{value:b,configurable:!0}),i(b,"constructor",{value:y,configurable:!0}),y.displayName=u(b,l,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===y||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,b):(t.__proto__=b,u(t,l,"GeneratorFunction")),t.prototype=Object.create(E),t},e.awrap=function(t){return{__await:t}},x(S.prototype),u(S.prototype,s,(function(){return this})),e.AsyncIterator=S,e.async=function(t,n,r,i,o){void 0===o&&(o=Promise);var a=new S(c(t,n,r,i),o);return e.isGeneratorFunction(n)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},x(E),u(E,l,"Generator"),u(E,a,(function(){return this})),u(E,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),n=[];for(var r in e)n.push(r);return n.reverse(),function t(){for(;n.length;){var r=n.pop();if(r in e)return t.value=r,t.done=!1,t}return t.done=!0,t}},e.values=R,P.prototype={constructor:P,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(k),!e)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function i(r,i){return s.type="throw",s.arg=e,n.next=r,i&&(n.method="next",n.arg=t),!!i}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],s=a.completion;if("root"===a.tryLoc)return i("end");if(a.tryLoc<=this.prev){var l=r.call(a,"catchLoc"),u=r.call(a,"finallyLoc");if(l&&u){if(this.prev<a.catchLoc)return i(a.catchLoc,!0);if(this.prev<a.finallyLoc)return i(a.finallyLoc)}else if(l){if(this.prev<a.catchLoc)return i(a.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return i(a.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=t,a.arg=e,o?(this.method="next",this.next=o.finallyLoc,g):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),g},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),k(n),g}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var i=r.arg;k(n)}return i}}throw Error("illegal catch attempt")},delegateYield:function(e,n,r){return this.delegate={iterator:R(e),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=t),g}},e}function wF(t,e,n,r,i,o,a){try{var s=t[o](a),l=s.value}catch(t){return void n(t)}s.done?e(l):Promise.resolve(l).then(r,i)}function AF(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,CF(r.key),r)}}function EF(t,e,n){return e=SF(e),function(t,e){if(e&&("object"===bF(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,xF()?Reflect.construct(e,n||[],SF(t).constructor):e.apply(t,n))}function xF(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(xF=function(){return!!t})()}function SF(t){return SF=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},SF(t)}function TF(t,e){return TF=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},TF(t,e)}function CF(t){var e=function(t,e){if("object"!=bF(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=bF(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==bF(e)?e:e+""}var IF=function(t){function e(t,n){var r,i,o,a;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),r=EF(this,e,[t,n]),i=r,o="toggleLike",a=function(){var t=function(t){return function(){var e=this,n=arguments;return new Promise((function(r,i){var o=t.apply(e,n);function a(t){wF(o,r,i,a,s,"next",t)}function s(t){wF(o,r,i,a,s,"throw",t)}a(void 0)}))}}(_F().mark((function t(e){var n;return _F().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.preventDefault(),e.stopPropagation(),e.stopImmediatePropagation(),t.next=5,r.bootstrap.toggleLike(r.element.dataset.productId);case 5:n=t.sent,r.element.classList.toggle("liked",n.liked);case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),(o=CF(o))in i?Object.defineProperty(i,o,{value:a,enumerable:!0,configurable:!0,writable:!0}):i[o]=a,r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&TF(t,e)}(e,t),n=e,(r=[{key:"attach",value:function(){this.element.addEventListener("click",this.toggleLike)}},{key:"detach",value:function(){this.element.removeEventListener("click",this.toggleLike)}}])&&AF(n.prototype,r),i&&AF(n,i),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,i}(Yp);function kF(t){return kF="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},kF(t)}function PF(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,NF(r.key),r)}}function RF(t,e,n){return e=MF(e),function(t,e){if(e&&("object"===kF(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,OF()?Reflect.construct(e,n||[],MF(t).constructor):e.apply(t,n))}function OF(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(OF=function(){return!!t})()}function MF(t){return MF=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},MF(t)}function LF(t,e){return LF=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},LF(t,e)}function DF(t,e,n){return(e=NF(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function NF(t){var e=function(t,e){if("object"!=kF(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=kF(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==kF(e)?e:e+""}var BF=function(t){function e(t,n){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),DF(r=RF(this,e,[t,n]),"onResize",(function(){r.isMobile=r.viewport.width<768,r.initScrollTrigger()})),DF(r,"initScrollTrigger",(function(){if(r.st&&r.st.kill(),!r.isMobile){var t=r.offerWrapper.offsetHeight,e=r.advantagesWrapper.offsetHeight;e>t&&(r.st=us.create({trigger:r.offerWrapper,start:"top 10%",end:"bottom+=".concat(e-t," 60%"),pin:!0,pinSpacing:!1}))}})),r.offerWrapper=r.element.querySelector(".offer-w"),r.advantagesWrapper=r.element.querySelector(".advantages-w"),r.st=null,r.isMobile=!1,r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&LF(t,e)}(e,t),n=e,(r=[{key:"attach",value:function(){this.viewport.on("resize",this.onResize)}},{key:"detach",value:function(){this.viewport.off("resize",this.onResize)}}])&&PF(n.prototype,r),i&&PF(n,i),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,i}(Yp);function jF(t){return jF="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},jF(t)}function zF(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,VF(r.key),r)}}function FF(t,e,n){return e=qF(e),function(t,e){if(e&&("object"===jF(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,UF()?Reflect.construct(e,n||[],qF(t).constructor):e.apply(t,n))}function UF(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(UF=function(){return!!t})()}function qF(t){return qF=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},qF(t)}function GF(t,e){return GF=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},GF(t,e)}function HF(t,e,n){return(e=VF(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function VF(t){var e=function(t,e){if("object"!=jF(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=jF(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==jF(e)?e:e+""}var QF=function(t){function e(t,n){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),HF(r=FF(this,e,[t,n]),"onResize",(function(){r.isMobile=window.innerWidth<768,r.slideshowWrapper&&r.initEmbla()})),HF(r,"initEmbla",(function(){r.embla&&(r.detachEmblaEvents(),r.embla.destroy(),r.embla=null,r.slideshowWrapper.classList.remove("active"));var t=r.slideshowWrapper.offsetWidth;r.slides[0].offsetWidth*r.slides.length+(r.isMobile?40:28)<t||(r.slideshowWrapper.classList.add("active"),r.embla=xB(r.slideshowWrapper,{snap:!0,align:"center",containScroll:"trimSnaps"}),r.onSlideChange(),r.attachEmblaEvents())})),HF(r,"onSlideChange",(function(){r.btnPrev.classList.toggle("disabled",!r.embla.canScrollPrev()),r.btnNext.classList.toggle("disabled",!r.embla.canScrollNext())})),HF(r,"attachEmblaEvents",(function(){r.embla&&(r.embla.on("select",r.onSlideChange),r.embla.on("pointerDown",r.onPointerDown),r.embla.on("pointerUp",r.onPointerUp),r.btnPrev.addEventListener("click",r.embla.scrollPrev),r.btnNext.addEventListener("click",r.embla.scrollNext))})),HF(r,"detachEmblaEvents",(function(){r.embla&&(r.embla.off("select",r.onSlideChange),r.embla.off("pointerDown",r.onPointerDown),r.embla.off("pointerUp",r.onPointerUp),r.btnPrev.removeEventListener("click",r.embla.scrollPrev),r.btnNext.removeEventListener("click",r.embla.scrollNext))})),HF(r,"onPointerDown",(function(){r.slideshow.classList.add("grabbing")})),HF(r,"onPointerUp",(function(){r.slideshow.classList.remove("grabbing")})),r.slideshowWrapper=r.element.querySelector(".slideshow-w"),r.slideshowWrapper&&(r.slideshow=r.slideshowWrapper.querySelector(".slideshow"),r.slides=r.slideshow.querySelectorAll(".slide")),r.btnWrapper=r.element.querySelector(".ctas-w"),r.btnWrapper&&(r.btnPrev=r.btnWrapper.querySelector(".rounded-cta.left"),r.btnNext=r.btnWrapper.querySelector(".rounded-cta.right")),r.embla=null,r.isMobile=!1,r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&GF(t,e)}(e,t),n=e,(r=[{key:"attach",value:function(){this.viewport.on("resize",this.onResize)}},{key:"detach",value:function(){this.viewport.off("resize",this.onResize)}}])&&zF(n.prototype,r),i&&zF(n,i),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,i}(Yp),WF=n(7707);function YF(t){return YF="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},YF(t)}function KF(t){return function(t){if(Array.isArray(t))return XF(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return XF(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return XF(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function XF(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function $F(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,rU(r.key),r)}}function ZF(t,e,n){return e=tU(e),function(t,e){if(e&&("object"===YF(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,JF()?Reflect.construct(e,n||[],tU(t).constructor):e.apply(t,n))}function JF(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(JF=function(){return!!t})()}function tU(t){return tU=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},tU(t)}function eU(t,e){return eU=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},eU(t,e)}function nU(t,e,n){return(e=rU(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function rU(t){var e=function(t,e){if("object"!=YF(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=YF(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==YF(e)?e:e+""}function iU(t,e,n){!function(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}(t,e),e.set(t,n)}function oU(t,e){return t.get(aU(t,e))}function aU(t,e,n){if("function"==typeof t?t===e:t.has(e))return arguments.length<3?e:n;throw new TypeError("Private element is not present on this object")}var sU={year:"numeric",month:"long"},lU={hour:"numeric",minute:"numeric"},uU=new WeakMap,cU=function(t){function e(t,n){var r,i;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),iU(i=ZF(this,e,[t,n]),uU,0),nU(i,"onCtaClick",(function(t){t.currentTarget.classList.contains("linked")||t.preventDefault(),t.currentTarget.classList.contains("calendar")&&i.addToCalendar(t.currentTarget.dataset.startDate.split(",").map(Number),t.currentTarget.dataset.endDate.split(",").map(Number),t.currentTarget.dataset.title)})),nU(i,"onMouseEnter",(function(){i.onVideo=!0,i.videoController.classList.add("active")})),nU(i,"onMouseLeave",(function(t){i.onVideo=!1,i.videoController.classList.remove("active")})),nU(i,"onMouseMove",(function(t){i.timeout&&clearTimeout(i.timeout),!i.videoController.classList.contains("active")&&i.onVideo&&i.videoController.classList.add("active"),i.timeout=setTimeout((function(){i.videoController.classList.remove("active")}),1500)})),nU(i,"toggleCaption",(function(){i.caption.classList.toggle("active"),i.video.textTracks&&i.video.textTracks.length>0&&("showing"===i.video.textTracks[0].mode?i.video.textTracks[0].mode="hidden":i.video.textTracks[0].mode="showing")})),nU(i,"togglePlayPause",(function(){i.player&&(i.player.isPaused()?i.player.play():i.player.pause())})),nU(i,"onSessionChange",(function(t){var e,n;if(t.currentTarget.classList.contains("watch-replay")&&(i.bootstrap.lenis.scrollTo(i.element,{offset:-150}),oU(uU,i)!==r)){var r=i.sessions.indexOf(t.currentTarget);null===(e=i.sessionsData[oU(uU,i)].cover)||void 0===e||e.classList.remove("active"),null===(n=i.currentCover)||void 0===n||n.removeEventListener("click",i.onClick),function(t,e,n){t.set(aU(t,e),n)}(uU,i,r),i.sessionsData[r].cover&&(i.currentCover=i.sessionsData[r].cover,i.currentCover.addEventListener("click",i.onClick)),i.sessions.forEach((function(t){return t.classList.remove("active")})),t.currentTarget.classList.add("active"),i.player&&(i.player.isPaused()||i.player.pause(),i.player.reset(),i.controlbar.destroy());var o=i.sessionsData[r];o.video&&(i.player=bM().create(),i.player.initialize(i.video,o.video,!1),i.controlbar=new ControlBar(i.player),i.controlbar.initialize(),o.cover&&o.cover.classList.add("active"))}})),nU(i,"onClick",(function(){var t=ti.timeline();i.currentCover&&t.to(i.currentCover,{alpha:0,display:"none",duration:.4,clearProps:"all",onComplete:function(){return i.currentCover.classList.remove("active")}},0),t.add((function(){var t;null===(t=i.player)||void 0===t||t.play(),i.video.textTracks&&i.video.textTracks.length>0&&(i.video.textTracks[0].mode="hidden")}),0)})),nU(i,"getFormattedDate",(function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=new Intl.DateTimeFormat("en-US",sU).format(t),r=t.getDate(),o=i.getDateSuffix(r),a=new Intl.DateTimeFormat("en-US",lU).format(t);return e?"".concat(r).concat(o," ").concat(n," ").concat(a):"".concat(a)})),nU(i,"addToCalendar",(function(t,e,n){var r={start:t,end:e,title:"".concat(i.titleTxt," - ").concat(n),description:i.descriptionTxt?i.descriptionTxt:"Three sundays",location:"Live",url:window.location.href,categories:["Three sundays"],organizer:{name:" ",email:"mrivers@davidwhyte.com"}};WF.lh(r,(function(t,e){if(t)console.log(t);else{var n=new Blob([e],{type:"text/calendar"}),r=window.URL.createObjectURL(n),i=document.createElement("a");i.href=r,i.download="event.ics",document.body.appendChild(i),i.click(),document.body.removeChild(i),window.URL.revokeObjectURL(r)}}))})),i.videoW=t.querySelector(".video-w"),i.video=i.videoW.querySelector("video"),i.videoController=i.videoW.querySelector("#videoController"),i.sessionsW=t.querySelector(".sessions-w"),i.sessions=KF(t.querySelectorAll(".session")),i.coversW=t.querySelector(".covers-w"),i.covers=KF(t.querySelectorAll(".cover-content")),i.caption=i.videoController.querySelector("#captionBtn"),i.titleTxt=document.querySelector(".three-sundays-live h2.title").innerText,i.descriptionTxt=null===(r=t.querySelector(".description-text"))||void 0===r?void 0:r.innerText,i.sessionsData=[],i.player=null,i.onVideo=!1,i.controlbar=null,i.timeout=null,i.currentCover=null,i.sessions.forEach((function(t,e){i.sessionsData.push({el:t,title:t.querySelector(".session-number").innerText,status:t.querySelector(".status"),cta:t.querySelector(".cta"),ctaLabels:KF(t.querySelectorAll(".cta .label-w span")),startDate:t.dataset.startDate,endDate:t.dataset.endDate,video:t.dataset.video?decodeURIComponent(t.dataset.video):null,live:t.dataset.live,cover:i.covers.find((function(t){return parseInt(t.dataset.key)===e}))})})),i.sessionsData[0].video&&(i.player=bM().create(),i.player.initialize(i.video,i.sessionsData[0].video,!1),i.controlbar=new ControlBar(i.player),i.controlbar.initialize(),i.sessionsData[0].cover&&(i.currentCover=i.sessionsData[0].cover)),i}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&eU(t,e)}(e,t),n=e,r=[{key:"init",value:function(){var t=this;this.sessionsData.forEach((function(e){var n=new Date(e.startDate),r=new Date(e.endDate),i=n-new Date<0,o=r-new Date<0;i&&o&&!e.video?(e.el.classList.add("waiting-replay"),e.cta.classList.add("disabled"),e.status.innerText="passed",e.ctaLabels.forEach((function(t){t.innerText="waiting for replay"}))):i&&o&&e.video?(e.el.classList.add("watch-replay"),e.cta.classList.add("button"),e.status.innerText="passed",e.ctaLabels.forEach((function(t){t.innerText="watch replay"}))):i&&!o&&e.live?(e.el.classList.add("watch-live"),e.cta.classList.add("linked"),e.cta.href=e.live,e.status.innerText="in live now",e.ctaLabels.forEach((function(t){t.innerText="watch the live"}))):!i||o||e.live?(e.el.classList.add("save-to-calendar"),e.cta.classList.add("calendar"),e.cta.dataset.title=e.title,e.cta.dataset.startDate=[n.getFullYear(),n.getMonth()+1,n.getDate(),n.getHours(),n.getMinutes()],e.cta.dataset.endDate=[r.getFullYear(),r.getMonth()+1,r.getDate(),r.getHours(),r.getMinutes()],e.status.innerText="".concat(t.getFormattedDate(n,!0)," - ").concat(t.getFormattedDate(r)),e.ctaLabels.forEach((function(t){t.innerText="save to calendar"}))):(e.el.classList.add("waiting-live"),e.cta.classList.add("disabled"),e.cta.href=e.live,e.status.innerText="In live",e.ctaLabels.forEach((function(t){t.innerText="Link not available"})))}))}},{key:"attach",value:function(){var t=this;this.sessionsData.forEach((function(e){return e.cta.addEventListener("click",t.onCtaClick)})),this.sessions.forEach((function(e){return e.addEventListener("click",t.onSessionChange)})),this.player&&(this.videoW.addEventListener("mousemove",this.onMouseMove),this.video.addEventListener("click",this.togglePlayPause),this.videoW.addEventListener("mouseleave",this.onMouseLeave),this.videoW.addEventListener("mouseenter",this.onMouseEnter),this.currentCover&&this.currentCover.addEventListener("click",this.onClick),this.caption.addEventListener("click",this.toggleCaption),ti.matchMedia().add("(min-width: 1025px)",(function(){var e,n;null===(e=t.st)||void 0===e||null===(n=e.kill)||void 0===n||n.call(e),t.st=ti.timeline({scrollTrigger:{trigger:t.element,pin:t.videoW,start:"top top",end:function(){return"bottom-=".concat(t.videoW.scrollHeight,"px top")}}})})))}},{key:"detach",value:function(){var t=this;this.sessionsData.forEach((function(e){return e.cta.removeEventListener("click",t.onCtaClick)})),this.sessions.forEach((function(e){return e.removeEventListener("click",t.onSessionChange)})),this.player&&(this.videoW.removeEventListener("mousemove",this.onMouseMove),this.video.removeEventListener("click",this.togglePlayPause),this.videoW.removeEventListener("mouseenter",this.onMouseEnter),this.videoW.removeEventListener("mouseleave",this.onMouseLeave),this.currentCover&&this.currentCover.removeEventListener("click",this.onClick),this.caption.removeEventListener("click",this.toggleCaption))}},{key:"getDateSuffix",value:function(t){if(t>=11&&t<=13)return"th";switch(t%10){case 1:return"st";case 2:return"nd";case 3:return"rd";default:return"th"}}}],r&&$F(n.prototype,r),i&&$F(n,i),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,i}(Yp);function dU(t){return dU="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},dU(t)}function fU(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return hU(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return hU(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return a=t.done,t},e:function(t){s=!0,o=t},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function hU(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function pU(){pU=function(){return e};var t,e={},n=Object.prototype,r=n.hasOwnProperty,i=Object.defineProperty||function(t,e,n){t[e]=n.value},o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",s=o.asyncIterator||"@@asyncIterator",l=o.toStringTag||"@@toStringTag";function u(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,n){return t[e]=n}}function c(t,e,n,r){var o=e&&e.prototype instanceof v?e:v,a=Object.create(o.prototype),s=new P(r||[]);return i(a,"_invoke",{value:T(t,n,s)}),a}function d(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}e.wrap=c;var f="suspendedStart",h="suspendedYield",p="executing",m="completed",g={};function v(){}function y(){}function b(){}var _={};u(_,a,(function(){return this}));var w=Object.getPrototypeOf,A=w&&w(w(R([])));A&&A!==n&&r.call(A,a)&&(_=A);var E=b.prototype=v.prototype=Object.create(_);function x(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function S(t,e){function n(i,o,a,s){var l=d(t[i],t,o);if("throw"!==l.type){var u=l.arg,c=u.value;return c&&"object"==dU(c)&&r.call(c,"__await")?e.resolve(c.__await).then((function(t){n("next",t,a,s)}),(function(t){n("throw",t,a,s)})):e.resolve(c).then((function(t){u.value=t,a(u)}),(function(t){return n("throw",t,a,s)}))}s(l.arg)}var o;i(this,"_invoke",{value:function(t,r){function i(){return new e((function(e,i){n(t,r,e,i)}))}return o=o?o.then(i,i):i()}})}function T(e,n,r){var i=f;return function(o,a){if(i===p)throw Error("Generator is already running");if(i===m){if("throw"===o)throw a;return{value:t,done:!0}}for(r.method=o,r.arg=a;;){var s=r.delegate;if(s){var l=C(s,r);if(l){if(l===g)continue;return l}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(i===f)throw i=m,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);i=p;var u=d(e,n,r);if("normal"===u.type){if(i=r.done?m:h,u.arg===g)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(i=m,r.method="throw",r.arg=u.arg)}}}function C(e,n){var r=n.method,i=e.iterator[r];if(i===t)return n.delegate=null,"throw"===r&&e.iterator.return&&(n.method="return",n.arg=t,C(e,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),g;var o=d(i,e.iterator,n.arg);if("throw"===o.type)return n.method="throw",n.arg=o.arg,n.delegate=null,g;var a=o.arg;return a?a.done?(n[e.resultName]=a.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=t),n.delegate=null,g):a:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,g)}function I(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function k(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function P(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(I,this),this.reset(!0)}function R(e){if(e||""===e){var n=e[a];if(n)return n.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var i=-1,o=function n(){for(;++i<e.length;)if(r.call(e,i))return n.value=e[i],n.done=!1,n;return n.value=t,n.done=!0,n};return o.next=o}}throw new TypeError(dU(e)+" is not iterable")}return y.prototype=b,i(E,"constructor",{value:b,configurable:!0}),i(b,"constructor",{value:y,configurable:!0}),y.displayName=u(b,l,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===y||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,b):(t.__proto__=b,u(t,l,"GeneratorFunction")),t.prototype=Object.create(E),t},e.awrap=function(t){return{__await:t}},x(S.prototype),u(S.prototype,s,(function(){return this})),e.AsyncIterator=S,e.async=function(t,n,r,i,o){void 0===o&&(o=Promise);var a=new S(c(t,n,r,i),o);return e.isGeneratorFunction(n)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},x(E),u(E,l,"Generator"),u(E,a,(function(){return this})),u(E,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),n=[];for(var r in e)n.push(r);return n.reverse(),function t(){for(;n.length;){var r=n.pop();if(r in e)return t.value=r,t.done=!1,t}return t.done=!0,t}},e.values=R,P.prototype={constructor:P,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(k),!e)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function i(r,i){return s.type="throw",s.arg=e,n.next=r,i&&(n.method="next",n.arg=t),!!i}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],s=a.completion;if("root"===a.tryLoc)return i("end");if(a.tryLoc<=this.prev){var l=r.call(a,"catchLoc"),u=r.call(a,"finallyLoc");if(l&&u){if(this.prev<a.catchLoc)return i(a.catchLoc,!0);if(this.prev<a.finallyLoc)return i(a.finallyLoc)}else if(l){if(this.prev<a.catchLoc)return i(a.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return i(a.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=t,a.arg=e,o?(this.method="next",this.next=o.finallyLoc,g):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),g},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),k(n),g}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var i=r.arg;k(n)}return i}}throw Error("illegal catch attempt")},delegateYield:function(e,n,r){return this.delegate={iterator:R(e),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=t),g}},e}function mU(t,e,n,r,i,o,a){try{var s=t[o](a),l=s.value}catch(t){return void n(t)}s.done?e(l):Promise.resolve(l).then(r,i)}function gU(t){return function(){var e=this,n=arguments;return new Promise((function(r,i){var o=t.apply(e,n);function a(t){mU(o,r,i,a,s,"next",t)}function s(t){mU(o,r,i,a,s,"throw",t)}a(void 0)}))}}function vU(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,EU(r.key),r)}}function yU(t,e,n){return e=_U(e),function(t,e){if(e&&("object"===dU(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,bU()?Reflect.construct(e,n||[],_U(t).constructor):e.apply(t,n))}function bU(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(bU=function(){return!!t})()}function _U(t){return _U=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},_U(t)}function wU(t,e){return wU=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},wU(t,e)}function AU(t,e,n){return(e=EU(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function EU(t){var e=function(t,e){if("object"!=dU(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=dU(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==dU(e)?e:e+""}var xU=function(t){function e(t,n){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),AU(r=yU(this,e,[t,n]),"setup",(function(){r.comments.forEach((function(t){var e;null===(e=t.form)||void 0===e||e.removeEventListener("submit",r.onReplySubmit)})),r.comments=Array.from(r.element.querySelectorAll(".comments-w > .comment-item")).map((function(t){return{el:t,form:t.querySelector(".reply-form"),repliesW:t.querySelector(".replies-w")}})),r.comments.forEach((function(t){var e;null===(e=t.form)||void 0===e||e.addEventListener("submit",r.onReplySubmit)}))})),AU(r,"onFormSubmit",function(){var t=gU(pU().mark((function t(e){var n,i,o,a,s;return pU().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.preventDefault(),r.commentForm.classList.add("loading"),(n=new FormData(r.commentForm)).append("action","david_submit_comment"),t.next=6,fetch(ADMIN_AJAX_URL,{method:"POST",credentials:"include",body:n});case 6:return i=t.sent,t.next=9,i.json();case 9:(o=t.sent)&&o.success?(a=o.data,r.commentsWrapper?r.commentsWrapper.insertAdjacentHTML("afterbegin",a):r.commentsWrapper.innerHTML=a,s=parseInt(r.commentsCount.textContent.match(/\d+/)[0]),r.commentsCount.textContent="(".concat(s+1,")"),r.element.dataset.count=parseInt(r.element.dataset.count)+1,r.element.dataset.total=parseInt(r.element.dataset.total)+1,r.commentForm.reset()):console.error(o),r.commentForm.classList.remove("loading");case 12:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),AU(r,"onReplySubmit",function(){var t=gU(pU().mark((function t(e){var n,i,o,a,s,l,u,c;return pU().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.preventDefault(),n=e.currentTarget,i=n.closest(".comment-item"),o=r.bootstrap.components.get(i),a=i.querySelector(".replies-w"),n.classList.add("loading"),(s=new FormData(n)).append("action","david_submit_comment"),s.set("comment_post_ID",r.postId),t.next=11,fetch(ADMIN_AJAX_URL,{method:"POST",credentials:"include",body:s});case 11:return l=t.sent,t.next=14,l.json();case 14:(u=t.sent)&&u.success?(c=u.data,a?a.insertAdjacentHTML("afterbegin",c):((a=document.createElement("ul")).classList.add("replies-w"),a.insertAdjacentHTML("afterbegin",c),n.closest(".comment-item").appendChild(a)),null==o||o.toggleForm(),n.reset()):console.error(u),n.classList.remove("loading");case 17:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),AU(r,"updateListing",gU(pU().mark((function t(){var e,n,i,o,a,s,l,u;return pU().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r.plusBtn.classList.add("disabled"),r.count=parseInt(r.element.dataset.count),e={action:"david_seemore_comments",count:r.count,total:r.total,postId:r.postId},t.next=5,fetch(ADMIN_AJAX_URL,{method:"POST",credentials:"include",headers:{"Content-type":"application/x-www-form-urlencoded"},body:new URLSearchParams(e).toString()});case 5:return n=t.sent,t.next=8,n.text();case 8:i=t.sent,(o=document.createElement("div")).innerHTML=i,r.tl&&r.tl.kill(),r.tl=ti.timeline(),a=o.querySelectorAll(".comment-classic"),r.tl.set(a,{autoAlpha:0}),s=fU(a);try{for(s.s();!(l=s.n()).done;)u=l.value,r.commentsWrapper.appendChild(u)}catch(t){s.e(t)}finally{s.f()}r.tl.to(a,{autoAlpha:1,duration:.6,ease:"immg.zoomIn",stagger:.1,clearProps:"all"},0),r.tl.add((function(){r.count=parseInt(r.commentsWrapper.querySelectorAll(".comment-item").length),r.element.dataset.count=r.count,o.remove(),r.components.setup(),r.plusBtn.classList.remove("disabled"),r.count>=r.total&&r.plusWapperDisappearAnimation(),r.setup(),us.refresh()}),0);case 19:case"end":return t.stop()}}),t)})))),AU(r,"plusWapperDisappearAnimation",(function(){r.plusWrapperTl&&r.plusWrapperTl.kill(),r.plusWrapperTl=ti.timeline({onComplete:function(){r.plusWrapper.style.display="none"}}),r.plusWrapperTl.to(r.plusBtn,{scale:0,ease:"power3.inOut",duration:1},0),r.plusWrapperTl.to(r.plusCaption,{opacity:0,ease:"power3.inOut",duration:1},0)})),r.commentForm=r.element.querySelector(".custom-comment-form"),r.commentsWrapper=r.element.querySelector(".comments-w"),r.commentsCount=r.element.querySelector(".headings .number"),r.comments=Array.from(r.element.querySelectorAll(".comments-w > .comment-item")).map((function(t){return{el:t,form:t.querySelector(".reply-form"),repliesW:t.querySelector(".replies-w")}})),r.plusWrapper=r.element.querySelector(".plus-wrapper"),r.plusWrapper&&(r.plusBtn=r.plusWrapper.querySelector(".plus-btn")),r.plusWrapper&&(r.plusCaption=r.plusWrapper.querySelector(".caption")),r.plusBtnNeeded=!1,r.tl=null,r.plusWrapperTl=null,r.postId=r.element.dataset.postId,r.count=parseInt(r.element.dataset.count),r.total=parseInt(r.element.dataset.total),r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&wU(t,e)}(e,t),n=e,(r=[{key:"attach",value:function(){var t=this;this.commentForm.addEventListener("submit",this.onFormSubmit),this.comments.forEach((function(e){var n;null===(n=e.form)||void 0===n||n.addEventListener("submit",t.onReplySubmit)})),this.plusBtn&&this.plusBtn.addEventListener("click",this.updateListing)}},{key:"detach",value:function(){var t=this;this.commentForm.removeEventListener("submit",this.onFormSubmit),this.comments.forEach((function(e){var n;null===(n=e.form)||void 0===n||n.removeEventListener("submit",t.onReplySubmit)})),this.plusBtn&&this.plusBtn.addEventListener("click",this.updateListing)}}])&&vU(n.prototype,r),i&&vU(n,i),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,i}(Yp);function SU(t){return SU="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},SU(t)}function TU(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,RU(r.key),r)}}function CU(t,e,n){return e=kU(e),function(t,e){if(e&&("object"===SU(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,IU()?Reflect.construct(e,n||[],kU(t).constructor):e.apply(t,n))}function IU(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(IU=function(){return!!t})()}function kU(t){return kU=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},kU(t)}function PU(t,e){return PU=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},PU(t,e)}function RU(t){var e=function(t,e){if("object"!=SU(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=SU(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==SU(e)?e:e+""}var OU=function(t){function e(t,n){var r,i,o,a;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),r=CU(this,e,[t,n]),i=r,a=function(){r.isOpen=!r.isOpen,r.replyCta.querySelectorAll("span").forEach((function(t){t.innerText=r.isOpen?"Cancel":"Reply"})),r.tl&&r.tl.kill(),r.tl=ti.timeline(),r.tl.to(r.replyForm,{duration:.8,ease:"power3.out",height:r.isOpen?"auto":0},0)},(o=RU(o="toggleForm"))in i?Object.defineProperty(i,o,{value:a,enumerable:!0,configurable:!0,writable:!0}):i[o]=a,r.replyCta=r.element.querySelector(".reply-cta"),r.replyForm=r.element.querySelector(".reply-form-w"),r.tl=null,r.isOpen=!1,r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&PU(t,e)}(e,t),n=e,(r=[{key:"attach",value:function(){this.replyCta&&this.replyCta.addEventListener("click",this.toggleForm)}},{key:"detach",value:function(){this.replyCta&&this.replyCta.removeEventListener("click",this.toggleForm)}}])&&TU(n.prototype,r),i&&TU(n,i),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,i}(Yp);function MU(t){return MU="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},MU(t)}function LU(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,DU(r.key),r)}}function DU(t){var e=function(t,e){if("object"!=MU(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=MU(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==MU(e)?e:e+""}function NU(t,e,n){return e=jU(e),function(t,e){if(e&&("object"===MU(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,BU()?Reflect.construct(e,n||[],jU(t).constructor):e.apply(t,n))}function BU(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(BU=function(){return!!t})()}function jU(t){return jU=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},jU(t)}function zU(t,e){return zU=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},zU(t,e)}var FU=function(t){function e(t,n){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=NU(this,e,[t,n])).contactPanel=document.querySelector(".widget-contact"),r.contactBtn=r.element.querySelector(".contact-btn"),r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&zU(t,e)}(e,t),n=e,(r=[{key:"init",value:function(){this._contactPanel=this.components.get(this.contactPanel)}},{key:"attach",value:function(){this._contactPanel&&this.contactBtn.addEventListener("click",this._contactPanel.togglePanel)}},{key:"detach",value:function(){this._contactPanel&&this.contactBtn.removeEventListener("click",this._contactPanel.toggleCart)}}])&&LU(n.prototype,r),i&&LU(n,i),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,i}(Yp);function UU(t){return UU="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},UU(t)}function qU(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,YU(r.key),r)}}function GU(t,e,n){return e=VU(e),function(t,e){if(e&&("object"===UU(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,HU()?Reflect.construct(e,n||[],VU(t).constructor):e.apply(t,n))}function HU(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(HU=function(){return!!t})()}function VU(t){return VU=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},VU(t)}function QU(t,e){return QU=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},QU(t,e)}function WU(t,e,n){return(e=YU(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function YU(t){var e=function(t,e){if("object"!=UU(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=UU(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==UU(e)?e:e+""}function KU(t,e,n){!function(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}(t,e),e.set(t,n)}function XU(t,e,n){return t.set(ZU(t,e),n),n}function $U(t,e){return t.get(ZU(t,e))}function ZU(t,e,n){if("function"==typeof t?t===e:t.has(e))return arguments.length<3?e:n;throw new TypeError("Private element is not present on this object")}var JU=new WeakMap,tq=new WeakMap,eq=new WeakMap,nq=new WeakMap,rq=new WeakMap,iq=function(t){function e(t,n){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),KU(r=GU(this,e,[t,n]),JU,[]),KU(r,tq,[]),KU(r,eq,""),KU(r,nq,null),KU(r,rq,!1),WU(r,"onRouteChange",(function(){window.removeEventListener("mousemove",r.onMouseMove),window.removeEventListener("pointerdown",r.onPointerDown),window.removeEventListener("pointerup",r.onPointerUp),$U(JU,r).forEach((function(t){t.removeEventListener("mouseenter",r.onEnter),t.removeEventListener("mouseleave",r.onLeave)})),$U(tq,r).forEach((function(t){t.removeEventListener("mouseenter",r.onNoneEnter),t.removeEventListener("mouseleave",r.onNoneLeave)})),window.addEventListener("mousemove",r.onMouseMove),window.addEventListener("pointerdown",r.onPointerDown),window.addEventListener("pointerup",r.onPointerUp),XU(JU,r,document.querySelectorAll("[data-cursor]")),$U(JU,r).forEach((function(t){t.addEventListener("mouseenter",r.onEnter),t.addEventListener("mouseleave",r.onLeave)})),XU(tq,r,document.querySelectorAll("[data-cursor-none]")),$U(tq,r).forEach((function(t){t.addEventListener("mouseenter",r.onNoneEnter),t.addEventListener("mouseleave",r.onNoneLeave)}))})),WU(r,"onMouseMove",(function(t){r.xTo(t.clientX),r.yTo(t.clientY)})),WU(r,"onPointerDown",(function(t){var e;null===(e=$U(nq,r))||void 0===e||e.kill(),XU(nq,r,ti.timeline()),$U(nq,r).to(r.cursor,{scale:.4,duration:.4,ease:"power2.out"},0)})),WU(r,"onPointerUp",(function(t){var e;null===(e=$U(nq,r))||void 0===e||e.kill(),XU(nq,r,ti.timeline()),$U(nq,r).to(r.cursor,{scale:1,duration:.7,ease:"power2.out"},0)})),WU(r,"onEnter",(function(t){XU(rq,r,!0),r.open(t)})),WU(r,"onLeave",(function(t){XU(rq,r,!1),r.close(t)})),WU(r,"onNoneEnter",(function(t){$U(rq,r)&&r.close(t)})),WU(r,"onNoneLeave",(function(t){$U(rq,r)&&r.open(t)})),WU(r,"open",(function(t){var e;r.text.innerHTML=t.currentTarget.dataset.cursor?t.currentTarget.dataset.cursor:$U(eq,r),XU(eq,r,r.text.innerHTML),null===(e=$U(nq,r))||void 0===e||e.kill(),XU(nq,r,ti.timeline()),$U(nq,r).set(r.cursor,{display:"block"},0),$U(nq,r).to(r.cursor,{scale:1,duration:1,ease:"immg.posIn"},0),$U(nq,r).to(r.text,{opacity:1,duration:.7},.2)})),WU(r,"close",(function(t){var e;null===(e=$U(nq,r))||void 0===e||e.kill(),XU(nq,r,ti.timeline()),$U(nq,r).to(r.cursor,{scale:0,duration:.8,ease:"immg.posIn"},0),$U(nq,r).to(r.text,{opacity:0,duration:.6},0),$U(nq,r).set(r.cursor,{display:"none"})})),r.cursor=t,r.text=t.querySelector(".text"),r.xTo=ti.quickTo(t,"x",{duration:.35,ease:"power2.out"}),r.yTo=ti.quickTo(t,"y",{duration:.35,ease:"power2.out"}),r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&QU(t,e)}(e,t),n=e,(r=[{key:"attach",value:function(){nh.device.touch||this.bootstrap.transition.on("routeChange",this.onRouteChange)}},{key:"detach",value:function(){nh.device.touch||this.bootstrap.transition.off("routeChange",this.onRouteChange)}}])&&qU(n.prototype,r),i&&qU(n,i),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,i}(Yp);function oq(t){return oq="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},oq(t)}function aq(){aq=function(){return e};var t,e={},n=Object.prototype,r=n.hasOwnProperty,i=Object.defineProperty||function(t,e,n){t[e]=n.value},o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",s=o.asyncIterator||"@@asyncIterator",l=o.toStringTag||"@@toStringTag";function u(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,n){return t[e]=n}}function c(t,e,n,r){var o=e&&e.prototype instanceof v?e:v,a=Object.create(o.prototype),s=new P(r||[]);return i(a,"_invoke",{value:T(t,n,s)}),a}function d(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}e.wrap=c;var f="suspendedStart",h="suspendedYield",p="executing",m="completed",g={};function v(){}function y(){}function b(){}var _={};u(_,a,(function(){return this}));var w=Object.getPrototypeOf,A=w&&w(w(R([])));A&&A!==n&&r.call(A,a)&&(_=A);var E=b.prototype=v.prototype=Object.create(_);function x(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function S(t,e){function n(i,o,a,s){var l=d(t[i],t,o);if("throw"!==l.type){var u=l.arg,c=u.value;return c&&"object"==oq(c)&&r.call(c,"__await")?e.resolve(c.__await).then((function(t){n("next",t,a,s)}),(function(t){n("throw",t,a,s)})):e.resolve(c).then((function(t){u.value=t,a(u)}),(function(t){return n("throw",t,a,s)}))}s(l.arg)}var o;i(this,"_invoke",{value:function(t,r){function i(){return new e((function(e,i){n(t,r,e,i)}))}return o=o?o.then(i,i):i()}})}function T(e,n,r){var i=f;return function(o,a){if(i===p)throw Error("Generator is already running");if(i===m){if("throw"===o)throw a;return{value:t,done:!0}}for(r.method=o,r.arg=a;;){var s=r.delegate;if(s){var l=C(s,r);if(l){if(l===g)continue;return l}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(i===f)throw i=m,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);i=p;var u=d(e,n,r);if("normal"===u.type){if(i=r.done?m:h,u.arg===g)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(i=m,r.method="throw",r.arg=u.arg)}}}function C(e,n){var r=n.method,i=e.iterator[r];if(i===t)return n.delegate=null,"throw"===r&&e.iterator.return&&(n.method="return",n.arg=t,C(e,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),g;var o=d(i,e.iterator,n.arg);if("throw"===o.type)return n.method="throw",n.arg=o.arg,n.delegate=null,g;var a=o.arg;return a?a.done?(n[e.resultName]=a.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=t),n.delegate=null,g):a:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,g)}function I(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function k(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function P(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(I,this),this.reset(!0)}function R(e){if(e||""===e){var n=e[a];if(n)return n.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var i=-1,o=function n(){for(;++i<e.length;)if(r.call(e,i))return n.value=e[i],n.done=!1,n;return n.value=t,n.done=!0,n};return o.next=o}}throw new TypeError(oq(e)+" is not iterable")}return y.prototype=b,i(E,"constructor",{value:b,configurable:!0}),i(b,"constructor",{value:y,configurable:!0}),y.displayName=u(b,l,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===y||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,b):(t.__proto__=b,u(t,l,"GeneratorFunction")),t.prototype=Object.create(E),t},e.awrap=function(t){return{__await:t}},x(S.prototype),u(S.prototype,s,(function(){return this})),e.AsyncIterator=S,e.async=function(t,n,r,i,o){void 0===o&&(o=Promise);var a=new S(c(t,n,r,i),o);return e.isGeneratorFunction(n)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},x(E),u(E,l,"Generator"),u(E,a,(function(){return this})),u(E,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),n=[];for(var r in e)n.push(r);return n.reverse(),function t(){for(;n.length;){var r=n.pop();if(r in e)return t.value=r,t.done=!1,t}return t.done=!0,t}},e.values=R,P.prototype={constructor:P,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(k),!e)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function i(r,i){return s.type="throw",s.arg=e,n.next=r,i&&(n.method="next",n.arg=t),!!i}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],s=a.completion;if("root"===a.tryLoc)return i("end");if(a.tryLoc<=this.prev){var l=r.call(a,"catchLoc"),u=r.call(a,"finallyLoc");if(l&&u){if(this.prev<a.catchLoc)return i(a.catchLoc,!0);if(this.prev<a.finallyLoc)return i(a.finallyLoc)}else if(l){if(this.prev<a.catchLoc)return i(a.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return i(a.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=t,a.arg=e,o?(this.method="next",this.next=o.finallyLoc,g):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),g},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),k(n),g}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var i=r.arg;k(n)}return i}}throw Error("illegal catch attempt")},delegateYield:function(e,n,r){return this.delegate={iterator:R(e),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=t),g}},e}function sq(t,e,n,r,i,o,a){try{var s=t[o](a),l=s.value}catch(t){return void n(t)}s.done?e(l):Promise.resolve(l).then(r,i)}function lq(t){return function(){var e=this,n=arguments;return new Promise((function(r,i){var o=t.apply(e,n);function a(t){sq(o,r,i,a,s,"next",t)}function s(t){sq(o,r,i,a,s,"throw",t)}a(void 0)}))}}function uq(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,pq(r.key),r)}}function cq(t,e,n){return e=fq(e),function(t,e){if(e&&("object"===oq(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,dq()?Reflect.construct(e,n||[],fq(t).constructor):e.apply(t,n))}function dq(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(dq=function(){return!!t})()}function fq(t){return fq=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},fq(t)}function hq(t,e){return hq=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},hq(t,e)}function pq(t){var e=function(t,e){if("object"!=oq(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=oq(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==oq(e)?e:e+""}function mq(t,e,n){!function(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}(t,e),e.set(t,n)}function gq(t,e){return t.get(vq(t,e))}function vq(t,e,n){if("function"==typeof t?t===e:t.has(e))return arguments.length<3?e:n;throw new TypeError("Private element is not present on this object")}var yq=new WeakMap,bq=function(t){function e(t,n){var r,i,o,a;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),mq(r=cq(this,e,[t,n]),yq,null),i=r,o="onClick",a=lq(aq().mark((function t(){var e,n,i,o;return aq().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r.product=r.element.dataset.product,t.prev=1,null===(e=r.loader)||void 0===e||e.classList.add("active"),n={action:"david_add_to_cart",product:r.product,quantity:1,gift:r.isGift},t.next=6,fetch(ADMIN_AJAX_URL,{method:"POST",credentials:"include",headers:{"Content-type":"application/x-www-form-urlencoded"},body:new URLSearchParams(n).toString()});case 6:return i=t.sent,t.next=9,i.json();case 9:"ok"===t.sent.status&&jQuery("body").trigger("update_checkout"),gq(yq,r).openCart(),t.next=17;break;case 14:throw t.prev=14,t.t0=t.catch(1),t.t0;case 17:return t.prev=17,null===(o=r.loader)||void 0===o||o.classList.remove("active"),t.finish(17);case 20:case"end":return t.stop()}}),t,null,[[1,14,17,20]])}))),(o=pq(o))in i?Object.defineProperty(i,o,{value:a,enumerable:!0,configurable:!0,writable:!0}):i[o]=a,r.checkoutUrl=t.dataset.checkout,r.cart=document.querySelector(".widget-cart"),r.isGift=!!t.dataset.gift,r.loader=document.querySelector(".add-to-cart-loader"),r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&hq(t,e)}(e,t),n=e,r=[{key:"init",value:function(){!function(t,e,n){t.set(vq(t,e),n)}(yq,this,this.components.get(this.cart))}},{key:"attach",value:function(){this.element.addEventListener("click",this.onClick)}},{key:"detach",value:function(){this.element.removeEventListener("click",this.onClick)}}],r&&uq(n.prototype,r),i&&uq(n,i),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,i}(Yp);function _q(t){return _q="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_q(t)}function wq(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Cq(r.key),r)}}function Aq(t,e,n){return e=xq(e),function(t,e){if(e&&("object"===_q(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,Eq()?Reflect.construct(e,n||[],xq(t).constructor):e.apply(t,n))}function Eq(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(Eq=function(){return!!t})()}function xq(t){return xq=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},xq(t)}function Sq(t,e){return Sq=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Sq(t,e)}function Tq(t,e,n){return(e=Cq(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Cq(t){var e=function(t,e){if("object"!=_q(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=_q(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==_q(e)?e:e+""}var Iq=function(t){function e(t,n){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),Tq(r=Aq(this,e,[t,n]),"toggleContent",(function(t){var e,n=r.listItems.find((function(e){return e.topInfos==t.currentTarget}));n.isOpen=!n.isOpen,n.content.classList.toggle("open"),null===(e=n.tl)||void 0===e||e.kill(),n.tl=ti.timeline(),n.tl.to(n.content,{duration:.8,ease:"power3.out",height:n.isOpen?"auto":0},0)})),Tq(r,"onFilter",(function(t){r.filtersBtn.forEach((function(t){t.classList.toggle("active",!1)})),t.currentTarget.classList.toggle("active",!0);var e=t.currentTarget.dataset.status,n=Jd.getState(r.listItems.map((function(t){return t.el})));r.listItems.forEach((function(t){"all"==e||e==t.status?t.el.classList.add("active"):t.el.classList.remove("active")})),Jd.from(n,{absolute:!0,duration:.6,ease:"power2.out",onEnter:function(t){return ti.fromTo(t,{opacity:0},{opacity:1,duration:.3})},onLeave:function(t){return ti.to(t,{opacity:0,duration:.2})}})})),r.filtersBtn=r.element.querySelectorAll(".rect-button.filter"),r.listItems=Array.from(r.element.querySelectorAll(".book-card")).map((function(t){return{el:t,status:t.dataset.status,topInfos:t.querySelector(".top-infos"),content:t.querySelector(".book-content"),isOpen:!1,tl:null}})),r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Sq(t,e)}(e,t),n=e,(r=[{key:"attach",value:function(){var t=this;this.filtersBtn.forEach((function(e){e.addEventListener("click",t.onFilter)})),this.listItems.forEach((function(e){e.topInfos.addEventListener("click",t.toggleContent)}))}},{key:"detach",value:function(){var t=this;this.filtersBtn.forEach((function(e){e.removeEventListener("click",t.onFilter)})),this.listItems.forEach((function(e){e.topInfos.removeEventListener("click",t.toggleContent)}))}}])&&wq(n.prototype,r),i&&wq(n,i),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,i}(Yp);function kq(t){return kq="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},kq(t)}function Pq(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Bq(r.key),r)}}function Rq(t,e,n){return e=Lq(e),Oq(t,Mq()?Reflect.construct(e,n||[],Lq(t).constructor):e.apply(t,n))}function Oq(t,e){if(e&&("object"===kq(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function Mq(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(Mq=function(){return!!t})()}function Lq(t){return Lq=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Lq(t)}function Dq(t,e){return Dq=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Dq(t,e)}function Nq(t,e,n){return(e=Bq(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Bq(t){var e=function(t,e){if("object"!=kq(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=kq(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==kq(e)?e:e+""}var jq=function(t){function e(t,n){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),Nq(r=Rq(this,e,[t,n]),"resize",(function(){r.viewport.medias.desktop&&r.openedFilterBar&&r.closeFilterBar()})),Nq(r,"openFilterBar",(function(){var t;r.bootstrap.smoother.stop(),r.openedFilterBar=!0,null===(t=r.t)||void 0===t||t.kill(),r.t=ti.timeline(),r.t.fromTo(r.mobileBg,{display:"block"},{opacity:1,duration:.3},0),r.t.fromTo(r.likesFiltersBar,{display:"flex",y:"100%"},{y:0,duration:.6,ease:"power2.out"},0)})),Nq(r,"closeFilterBar",(function(){var t;r.bootstrap.smoother.start(),r.openedFilterBar=!1,null===(t=r.t)||void 0===t||t.kill(),r.t=ti.timeline(),r.t.to(r.mobileBg,{opacity:0,duration:.3},0),r.t.to(r.likesFiltersBar,{y:"100%",duration:.4,ease:"power2.out"},0),r.t.set(r.mobileBg,{display:"none"},">"),r.t.set(r.likesFiltersBar,{display:"none",clearProps:"all"},"<")})),Nq(r,"onFilter",(function(t){if(!t.currentTarget.classList.contains("active")){r.filtersBtn.forEach((function(t){t.classList.remove("active")})),t.currentTarget.classList.add("active"),r.currentType=t.currentTarget.dataset.type,r.dropdownFilters.find((function(t){return t.type==r.currentType}))?r.mainButtonFilter.classList.remove("disabled"):r.mainButtonFilter.classList.add("disabled");var e=Jd.getState(r.listItems);r.listItems.forEach((function(t){"all"==r.currentType||r.currentType==t.dataset.type?t.classList.add("active"):t.classList.remove("active")})),Jd.from(e,{absolute:!0,duration:.6,ease:"power2.out",onEnter:function(t){return ti.fromTo(t,{opacity:0},{opacity:1,duration:.3})},onLeave:function(t){return ti.to(t,{opacity:0,duration:.2})},onComplete:r.resetFilters})}})),Nq(r,"toggleDropdown",(function(){r.open?r.closeDropdown():r.openDropdown()})),Nq(r,"resetFilters",(function(){r.options=[],r.products.forEach((function(t){t.classList.remove("disabled")})),r.dropdownFilters.forEach((function(t){t.items.forEach((function(t){t.classList.remove("active")}))}))})),Nq(r,"openDropdown",(function(){var t;r.open||(r.mainButtonFilter.classList.toggle("active"),r.currentDropdown=r.dropdownFilters.find((function(t){return t.type==r.currentType})),r.currentDropdown.el.style.zIndex=6,null===(t=r.tl)||void 0===t||t.kill(),r.tl=ti.timeline(),r.tl.set(r.bgCover,{display:"block"},0),r.tl.set(r.currentDropdown.el,{display:"flex"},0),r.tl.to(r.currentDropdown.el,{height:"auto",ease:"power2.out",duration:.7},0),r.tl.set(r.bgCover,{pointerEvents:"all"},0),r.tl.to(r.bgCover,{alpha:.4,ease:"none",duration:.5},0),r.tl.to(r.currentDropdown.text,{opacity:1,duration:.7,ease:"power2.out"},0),r.tl.to(r.currentDropdown.items,{opacity:1,duration:.7,ease:"power3.out"},0),r.tl.to(r.currentDropdown.close,{opacity:1,duration:.7,ease:"power2.out"},0),r.open=!r.open)})),Nq(r,"closeDropdown",(function(){var t;r.open&&(r.mainButtonFilter.classList.toggle("active"),r.currentDropdown=r.dropdownFilters.find((function(t){return t.type==r.currentType})),null===(t=r.tl)||void 0===t||t.kill(),r.tl=ti.timeline(),r.tl.to(r.currentDropdown.el,{height:0,ease:"power3.out",duration:.8},0),r.tl.set(r.bgCover,{pointerEvents:"none"},0),r.tl.to(r.bgCover,{alpha:0,ease:"none",duration:.5},0),r.tl.to(r.currentDropdown.text,{opacity:0,duration:.7,ease:"power2.out"},0),r.tl.to(r.currentDropdown.items,{opacity:0,duration:.7,ease:"power3.out"},0),r.tl.to(r.currentDropdown.close,{opacity:0,duration:.7,ease:"power2.out"},0),r.tl.set(r.currentDropdown.el,{display:"none"}),r.tl.set(r.bgCover,{display:"none"}),r.tl.add((function(){r.currentDropdown.el.style.zIndex=5})),r.open=!r.open)})),Nq(r,"toggleOption",(function(t){var e=t.currentTarget,n=t.currentTarget.dataset.slug,i=r.element.querySelectorAll(".cards-w.active .product-card");e.classList.toggle("active"),r.options.includes(n)?r.options.splice(r.options.indexOf(n),1):r.options.push(t.currentTarget.dataset.slug);var o=Jd.getState(i),a=!1;0==r.options.length?i.forEach((function(t){t.classList.remove("disabled")})):i.forEach((function(t){var e;a=!1,null===(e=t.dataset.filter)||void 0===e||e.split(",").forEach((function(e){r.options.includes(e)?(t.classList.remove("disabled"),a=!0):a||t.classList.add("disabled")}))})),Jd.from(o,{duration:.6,ease:"power2.out",onEnter:function(t){return ti.fromTo(t,{opacity:0},{opacity:1,duration:.3})},onLeave:function(t){return ti.to(t,{opacity:0,duration:.2})}})})),r.filtersBtn=r.element.querySelectorAll(".rect-button.filter"),r.listItems=r.element.querySelectorAll(".cards-w"),r.products=r.element.querySelectorAll(".cards-w .product-card"),r.bgCover=r.element.querySelector(".bg-cover-dropdown"),r.likesFiltersBar=r.element.querySelector(".likes-filter-bar"),r.likesFiltersBar?(r.filters=r.likesFiltersBar.querySelector(".filters"),r.mainButtonFilter=r.filters.querySelector(".main-button"),r.mobileBg=r.element.querySelector(".mobile-overlay"),r.openFilterBtn=r.element.querySelector(".likes-filter-btn"),r.closeFilterBtn=r.likesFiltersBar.querySelector(".close-w"),r.dropdownFilters=Array.from(r.filters.querySelectorAll(".dropdown-content")).map((function(t){return{el:t,type:t.dataset.type,close:t.querySelector(".dropdown-close"),text:t.querySelector(".dropdown-text"),items:t.querySelectorAll(".rect-button")}})),r.options=[],r.otherDropdowns=[],r.tl=null,r.open=!1,r.currentType="all",r.openedFilterBar=!1,r):Oq(r)}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Dq(t,e)}(e,t),n=e,(r=[{key:"attach",value:function(){var t,e=this;this.likesFiltersBar&&(this.filtersBtn.forEach((function(t){t.addEventListener("click",e.onFilter)})),window.addEventListener("wheel",this.closeDropdown),this.mainButtonFilter.addEventListener("click",this.toggleDropdown),this.dropdownFilters.forEach((function(t){t.close.addEventListener("click",e.closeDropdown),t.items.forEach((function(t){t.addEventListener("click",e.toggleOption)}))})),null===(t=this.bgCover)||void 0===t||t.addEventListener("click",this.closeDropdown),this.openFilterBtn.addEventListener("click",this.openFilterBar),this.closeFilterBtn.addEventListener("click",this.closeFilterBar),this.viewport.on("resize",this.resize),this.mobileBg.addEventListener("click",this.closeFilterBar))}},{key:"detach",value:function(){var t,e=this;this.likesFiltersBar&&(this.filtersBtn.forEach((function(t){t.removeEventListener("click",e.onFilter)})),window.removeEventListener("wheel",this.closeDropdown),this.mainButtonFilter.removeEventListener("click",this.toggleDropdown),this.dropdownFilters.forEach((function(t){t.close.removeEventListener("click",e.closeDropdown),t.items.forEach((function(t){t.removeEventListener("click",e.toggleOption)}))})),null===(t=this.bgCover)||void 0===t||t.removeEventListener("click",this.closeDropdown),this.openFilterBtn.removeEventListener("click",this.openFilterBar),this.closeFilterBtn.removeEventListener("click",this.closeFilterBar),this.viewport.off("resize",this.resize),this.mobileBg.removeEventListener("click",this.closeFilterBar))}}])&&Pq(n.prototype,r),i&&Pq(n,i),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,i}(Yp);function zq(t){return zq="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},zq(t)}function Fq(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Vq(r.key),r)}}function Uq(t,e,n){return e=Gq(e),function(t,e){if(e&&("object"===zq(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,qq()?Reflect.construct(e,n||[],Gq(t).constructor):e.apply(t,n))}function qq(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(qq=function(){return!!t})()}function Gq(t){return Gq=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Gq(t)}function Hq(t,e){return Hq=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Hq(t,e)}function Vq(t){var e=function(t,e){if("object"!=zq(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=zq(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==zq(e)?e:e+""}var Qq=function(t){function e(t,n){var r,i,o,a;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),r=Uq(this,e,[t,n]),i=r,a=function(){r._account.openSection({template:"partials/account/courses"})},(o=Vq(o="goBack"))in i?Object.defineProperty(i,o,{value:a,enumerable:!0,configurable:!0,writable:!0}):i[o]=a,r.backBtn=r.element.querySelector(".back-course"),r.account=document.querySelector(".account-section"),r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Hq(t,e)}(e,t),n=e,(r=[{key:"init",value:function(){this._account=this.components.get(this.account)}},{key:"attach",value:function(){this.backBtn.addEventListener("click",this.goBack)}},{key:"detach",value:function(){this.backBtn.removeEventListener("click",this.goBack)}}])&&Fq(n.prototype,r),i&&Fq(n,i),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,i}(Yp);function Wq(t){return Wq="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Wq(t)}function Yq(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Kq(r.key),r)}}function Kq(t){var e=function(t,e){if("object"!=Wq(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=Wq(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Wq(e)?e:e+""}function Xq(t,e,n){return e=Zq(e),function(t,e){if(e&&("object"===Wq(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,$q()?Reflect.construct(e,n||[],Zq(t).constructor):e.apply(t,n))}function $q(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return($q=function(){return!!t})()}function Zq(t){return Zq=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Zq(t)}function Jq(t,e){return Jq=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Jq(t,e)}var tG,eG=function(t){function e(t,n){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=Xq(this,e,[t,n])).courses=Array.from(r.element.querySelectorAll(".course-wrapper")).map((function(t){return{el:t,link:t.querySelector(".link-btn"),endDate:t.dataset.endDate,finishedLink:t.dataset.finishedLink}})),r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Jq(t,e)}(e,t),n=e,r=[{key:"init",value:function(){var t=this;this.courses.forEach((function(e){new Date(e.endDate)-new Date<0&&(e.link.href=e.finishedLink,e.link.target="_self",e.link.addEventListener("click",(function(n){n.preventDefault(),t.bootstrap.router.set(e.finishedLink)})))}))}}],r&&Yq(n.prototype,r),i&&Yq(n,i),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,i}(Yp),nG="https://js.stripe.com/v3",rG=/^https:\/\/js\.stripe\.com\/v3\/?(\?.*)?$/,iG="loadStripe.setLoadParameters was called but an existing Stripe.js script already exists in the document; existing script parameters will be used",oG=function(t){var e=t&&!t.advancedFraudSignals?"?advancedFraudSignals=false":"",n=document.createElement("script");n.src="".concat(nG).concat(e);var r=document.head||document.body;if(!r)throw new Error("Expected document.body not to be null. Stripe.js requires a <body> element.");return r.appendChild(n),n},aG=null,sG=null,lG=null,uG=function(t){return null!==aG?aG:(aG=new Promise((function(e,n){if("undefined"!=typeof window&&"undefined"!=typeof document)if(window.Stripe&&t&&console.warn(iG),window.Stripe)e(window.Stripe);else try{var r=function(){for(var t=document.querySelectorAll('script[src^="'.concat(nG,'"]')),e=0;e<t.length;e++){var n=t[e];if(rG.test(n.src))return n}return null}();if(r&&t)console.warn(iG);else if(r){if(r&&null!==lG&&null!==sG){var i;r.removeEventListener("load",lG),r.removeEventListener("error",sG),null===(i=r.parentNode)||void 0===i||i.removeChild(r),r=oG(t)}}else r=oG(t);lG=function(t,e){return function(){window.Stripe?t(window.Stripe):e(new Error("Stripe.js not available"))}}(e,n),sG=function(t){return function(){t(new Error("Failed to load Stripe.js"))}}(n),r.addEventListener("load",lG),r.addEventListener("error",sG)}catch(t){return void n(t)}else e(null)})),aG.catch((function(t){return aG=null,Promise.reject(t)})))},cG=!1,dG=function(){return tG||(tG=uG(null).catch((function(t){return tG=null,Promise.reject(t)})),tG)};Promise.resolve().then((function(){return dG()})).catch((function(t){cG||console.warn(t)}));var fG=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];cG=!0;var r=Date.now();return dG().then((function(t){return function(t,e,n){if(null===t)return null;var r=t.apply(void 0,e);return function(t,e){t&&t._registerWrapper&&t._registerWrapper({name:"stripe-js",version:"2.4.0",startTime:e})}(r,n),r}(t,e,r)}))};function hG(t){return hG="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},hG(t)}function pG(){pG=function(){return e};var t,e={},n=Object.prototype,r=n.hasOwnProperty,i=Object.defineProperty||function(t,e,n){t[e]=n.value},o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",s=o.asyncIterator||"@@asyncIterator",l=o.toStringTag||"@@toStringTag";function u(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,n){return t[e]=n}}function c(t,e,n,r){var o=e&&e.prototype instanceof v?e:v,a=Object.create(o.prototype),s=new P(r||[]);return i(a,"_invoke",{value:T(t,n,s)}),a}function d(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}e.wrap=c;var f="suspendedStart",h="suspendedYield",p="executing",m="completed",g={};function v(){}function y(){}function b(){}var _={};u(_,a,(function(){return this}));var w=Object.getPrototypeOf,A=w&&w(w(R([])));A&&A!==n&&r.call(A,a)&&(_=A);var E=b.prototype=v.prototype=Object.create(_);function x(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function S(t,e){function n(i,o,a,s){var l=d(t[i],t,o);if("throw"!==l.type){var u=l.arg,c=u.value;return c&&"object"==hG(c)&&r.call(c,"__await")?e.resolve(c.__await).then((function(t){n("next",t,a,s)}),(function(t){n("throw",t,a,s)})):e.resolve(c).then((function(t){u.value=t,a(u)}),(function(t){return n("throw",t,a,s)}))}s(l.arg)}var o;i(this,"_invoke",{value:function(t,r){function i(){return new e((function(e,i){n(t,r,e,i)}))}return o=o?o.then(i,i):i()}})}function T(e,n,r){var i=f;return function(o,a){if(i===p)throw Error("Generator is already running");if(i===m){if("throw"===o)throw a;return{value:t,done:!0}}for(r.method=o,r.arg=a;;){var s=r.delegate;if(s){var l=C(s,r);if(l){if(l===g)continue;return l}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(i===f)throw i=m,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);i=p;var u=d(e,n,r);if("normal"===u.type){if(i=r.done?m:h,u.arg===g)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(i=m,r.method="throw",r.arg=u.arg)}}}function C(e,n){var r=n.method,i=e.iterator[r];if(i===t)return n.delegate=null,"throw"===r&&e.iterator.return&&(n.method="return",n.arg=t,C(e,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),g;var o=d(i,e.iterator,n.arg);if("throw"===o.type)return n.method="throw",n.arg=o.arg,n.delegate=null,g;var a=o.arg;return a?a.done?(n[e.resultName]=a.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=t),n.delegate=null,g):a:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,g)}function I(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function k(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function P(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(I,this),this.reset(!0)}function R(e){if(e||""===e){var n=e[a];if(n)return n.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var i=-1,o=function n(){for(;++i<e.length;)if(r.call(e,i))return n.value=e[i],n.done=!1,n;return n.value=t,n.done=!0,n};return o.next=o}}throw new TypeError(hG(e)+" is not iterable")}return y.prototype=b,i(E,"constructor",{value:b,configurable:!0}),i(b,"constructor",{value:y,configurable:!0}),y.displayName=u(b,l,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===y||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,b):(t.__proto__=b,u(t,l,"GeneratorFunction")),t.prototype=Object.create(E),t},e.awrap=function(t){return{__await:t}},x(S.prototype),u(S.prototype,s,(function(){return this})),e.AsyncIterator=S,e.async=function(t,n,r,i,o){void 0===o&&(o=Promise);var a=new S(c(t,n,r,i),o);return e.isGeneratorFunction(n)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},x(E),u(E,l,"Generator"),u(E,a,(function(){return this})),u(E,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),n=[];for(var r in e)n.push(r);return n.reverse(),function t(){for(;n.length;){var r=n.pop();if(r in e)return t.value=r,t.done=!1,t}return t.done=!0,t}},e.values=R,P.prototype={constructor:P,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(k),!e)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function i(r,i){return s.type="throw",s.arg=e,n.next=r,i&&(n.method="next",n.arg=t),!!i}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],s=a.completion;if("root"===a.tryLoc)return i("end");if(a.tryLoc<=this.prev){var l=r.call(a,"catchLoc"),u=r.call(a,"finallyLoc");if(l&&u){if(this.prev<a.catchLoc)return i(a.catchLoc,!0);if(this.prev<a.finallyLoc)return i(a.finallyLoc)}else if(l){if(this.prev<a.catchLoc)return i(a.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return i(a.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=t,a.arg=e,o?(this.method="next",this.next=o.finallyLoc,g):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),g},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),k(n),g}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var i=r.arg;k(n)}return i}}throw Error("illegal catch attempt")},delegateYield:function(e,n,r){return this.delegate={iterator:R(e),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=t),g}},e}function mG(t,e,n,r,i,o,a){try{var s=t[o](a),l=s.value}catch(t){return void n(t)}s.done?e(l):Promise.resolve(l).then(r,i)}function gG(t){return function(){var e=this,n=arguments;return new Promise((function(r,i){var o=t.apply(e,n);function a(t){mG(o,r,i,a,s,"next",t)}function s(t){mG(o,r,i,a,s,"throw",t)}a(void 0)}))}}function vG(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,EG(r.key),r)}}function yG(t,e,n){return e=_G(e),function(t,e){if(e&&("object"===hG(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,bG()?Reflect.construct(e,n||[],_G(t).constructor):e.apply(t,n))}function bG(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(bG=function(){return!!t})()}function _G(t){return _G=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},_G(t)}function wG(t,e){return wG=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},wG(t,e)}function AG(t,e,n){return(e=EG(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function EG(t){var e=function(t,e){if("object"!=hG(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=hG(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==hG(e)?e:e+""}var xG=function(t){function e(t,n){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),AG(r=yG(this,e,[t,n]),"retrieveCheckoutSession",gG(pG().mark((function t(){var e,n,i;return pG().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e={action:"david_retrieve_checkout",sessionId:r.checkoutSessionId},t.next=3,fetch(ADMIN_AJAX_URL,{method:"POST",body:new URLSearchParams(e).toString(),credentials:"include",headers:{"Content-Type":"application/x-www-form-urlencoded"}});case 3:return n=t.sent,t.next=6,n.json();case 6:i=t.sent,r.loader.classList.remove("active"),i.error?r.showErrorMessage():r.showSuccessMessage();case 9:case"end":return t.stop()}}),t)})))),AG(r,"showErrorMessage",(function(){r.error.classList.add("active")})),AG(r,"showSuccessMessage",(function(){r.success.classList.add("active")})),r.checkoutSessionId=r.element.dataset.session,r.loader=r.element.querySelector(".card-loader"),r.error=r.element.querySelector(".error-message"),r.success=r.element.querySelector(".success-message"),r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&wG(t,e)}(e,t),n=e,r=[{key:"init",value:(o=gG(pG().mark((function t(){return pG().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.checkoutSessionId){t.next=4;break}return this.loader.classList.remove("active"),this.showErrorMessage(),t.abrupt("return");case 4:return t.next=6,fG("pk_live_51R7khmBMKwxHiwYJlWpC8OAnNi7tRGewsqI1XlhXuyDHTc1NDpJOZzLD7kl7YXO18Ev4NNW4AafK91lAEh4K1BRW00pvd7DK6g");case 6:return this.stripe=t.sent,t.next=9,this.retrieveCheckoutSession();case 9:case"end":return t.stop()}}),t,this)}))),function(){return o.apply(this,arguments)})}],r&&vG(n.prototype,r),i&&vG(n,i),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,i,o}(Yp);function SG(t){return SG="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},SG(t)}function TG(){TG=function(){return e};var t,e={},n=Object.prototype,r=n.hasOwnProperty,i=Object.defineProperty||function(t,e,n){t[e]=n.value},o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",s=o.asyncIterator||"@@asyncIterator",l=o.toStringTag||"@@toStringTag";function u(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,n){return t[e]=n}}function c(t,e,n,r){var o=e&&e.prototype instanceof v?e:v,a=Object.create(o.prototype),s=new P(r||[]);return i(a,"_invoke",{value:T(t,n,s)}),a}function d(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}e.wrap=c;var f="suspendedStart",h="suspendedYield",p="executing",m="completed",g={};function v(){}function y(){}function b(){}var _={};u(_,a,(function(){return this}));var w=Object.getPrototypeOf,A=w&&w(w(R([])));A&&A!==n&&r.call(A,a)&&(_=A);var E=b.prototype=v.prototype=Object.create(_);function x(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function S(t,e){function n(i,o,a,s){var l=d(t[i],t,o);if("throw"!==l.type){var u=l.arg,c=u.value;return c&&"object"==SG(c)&&r.call(c,"__await")?e.resolve(c.__await).then((function(t){n("next",t,a,s)}),(function(t){n("throw",t,a,s)})):e.resolve(c).then((function(t){u.value=t,a(u)}),(function(t){return n("throw",t,a,s)}))}s(l.arg)}var o;i(this,"_invoke",{value:function(t,r){function i(){return new e((function(e,i){n(t,r,e,i)}))}return o=o?o.then(i,i):i()}})}function T(e,n,r){var i=f;return function(o,a){if(i===p)throw Error("Generator is already running");if(i===m){if("throw"===o)throw a;return{value:t,done:!0}}for(r.method=o,r.arg=a;;){var s=r.delegate;if(s){var l=C(s,r);if(l){if(l===g)continue;return l}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(i===f)throw i=m,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);i=p;var u=d(e,n,r);if("normal"===u.type){if(i=r.done?m:h,u.arg===g)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(i=m,r.method="throw",r.arg=u.arg)}}}function C(e,n){var r=n.method,i=e.iterator[r];if(i===t)return n.delegate=null,"throw"===r&&e.iterator.return&&(n.method="return",n.arg=t,C(e,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),g;var o=d(i,e.iterator,n.arg);if("throw"===o.type)return n.method="throw",n.arg=o.arg,n.delegate=null,g;var a=o.arg;return a?a.done?(n[e.resultName]=a.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=t),n.delegate=null,g):a:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,g)}function I(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function k(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function P(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(I,this),this.reset(!0)}function R(e){if(e||""===e){var n=e[a];if(n)return n.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var i=-1,o=function n(){for(;++i<e.length;)if(r.call(e,i))return n.value=e[i],n.done=!1,n;return n.value=t,n.done=!0,n};return o.next=o}}throw new TypeError(SG(e)+" is not iterable")}return y.prototype=b,i(E,"constructor",{value:b,configurable:!0}),i(b,"constructor",{value:y,configurable:!0}),y.displayName=u(b,l,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===y||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,b):(t.__proto__=b,u(t,l,"GeneratorFunction")),t.prototype=Object.create(E),t},e.awrap=function(t){return{__await:t}},x(S.prototype),u(S.prototype,s,(function(){return this})),e.AsyncIterator=S,e.async=function(t,n,r,i,o){void 0===o&&(o=Promise);var a=new S(c(t,n,r,i),o);return e.isGeneratorFunction(n)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},x(E),u(E,l,"Generator"),u(E,a,(function(){return this})),u(E,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),n=[];for(var r in e)n.push(r);return n.reverse(),function t(){for(;n.length;){var r=n.pop();if(r in e)return t.value=r,t.done=!1,t}return t.done=!0,t}},e.values=R,P.prototype={constructor:P,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(k),!e)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function i(r,i){return s.type="throw",s.arg=e,n.next=r,i&&(n.method="next",n.arg=t),!!i}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],s=a.completion;if("root"===a.tryLoc)return i("end");if(a.tryLoc<=this.prev){var l=r.call(a,"catchLoc"),u=r.call(a,"finallyLoc");if(l&&u){if(this.prev<a.catchLoc)return i(a.catchLoc,!0);if(this.prev<a.finallyLoc)return i(a.finallyLoc)}else if(l){if(this.prev<a.catchLoc)return i(a.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return i(a.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=t,a.arg=e,o?(this.method="next",this.next=o.finallyLoc,g):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),g},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),k(n),g}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var i=r.arg;k(n)}return i}}throw Error("illegal catch attempt")},delegateYield:function(e,n,r){return this.delegate={iterator:R(e),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=t),g}},e}function CG(t,e,n,r,i,o,a){try{var s=t[o](a),l=s.value}catch(t){return void n(t)}s.done?e(l):Promise.resolve(l).then(r,i)}function IG(t){return function(){var e=this,n=arguments;return new Promise((function(r,i){var o=t.apply(e,n);function a(t){CG(o,r,i,a,s,"next",t)}function s(t){CG(o,r,i,a,s,"throw",t)}a(void 0)}))}}function kG(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,DG(r.key),r)}}function PG(t,e,n){return e=OG(e),function(t,e){if(e&&("object"===SG(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,RG()?Reflect.construct(e,n||[],OG(t).constructor):e.apply(t,n))}function RG(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(RG=function(){return!!t})()}function OG(t){return OG=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},OG(t)}function MG(t,e){return MG=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},MG(t,e)}function LG(t,e,n){return(e=DG(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function DG(t){var e=function(t,e){if("object"!=SG(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=SG(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==SG(e)?e:e+""}var NG=function(t){function e(t,n){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),LG(r=PG(this,e,[t,n]),"saveChanges",(function(){r.postChanges(r.firstName.value,r.lastName.value,r.email.value)})),LG(r,"postChanges",function(){var t=IG(TG().mark((function t(e,n,i){var o,a,s;return TG().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r.saveButton.style.pointerEvents="none",(o=ti.timeline()).add((function(){r.saveButtonLoader.classList.add("active")}),.3),t.next=5,r.bootstrap.updateMemberInfo({first_name:e,last_name:n,email:i});case 5:return a=t.sent,t.next=8,a.json();case 8:s=t.sent,o.add((function(){r.saveButtonLoader.classList.remove("active")})),o.to(r.saveButton,{opacity:0,duration:.2,ease:"none"}),o.set(r.saveButton,{display:"none"}),o.add((function(){var t=document.createElement("p");t.classList.add("child-4","confirmation-text"),t.appendChild(document.createTextNode(s.success?"Changes saved successfully":"An error occured while saving your changes")),r.saveButton.parentNode.insertBefore(t,r.saveButton)}));case 13:case"end":return t.stop()}}),t)})));return function(e,n,r){return t.apply(this,arguments)}}()),LG(r,"postPasswordRequest",IG(TG().mark((function t(){var e,n,i,o,a;return TG().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r.passwordRequestButton.style.pointerEvents="none",(e=ti.timeline()).to([r.text,r.passwordRequestButton],{opacity:0,duration:.3,ease:"none"}),e.add((function(){r.loader.classList.add("active")}),.3),n=r.passwordW.dataset.email||r.email.value,t.next=7,r.bootstrap.updateMemberInfo({password:"reset",email:n});case 7:return i=t.sent,t.next=10,i.json();case 10:o=t.sent,a=o.success?"An email has been sent to "+n+" to reset your password.":"An error occured while sending your password reset email. Try to refresh the page and try again.",e.add((function(){r.loader.classList.remove("active"),r.text.innerText=a,r.passwordRequestButton.remove()})),e.set(r.text,{maxWidth:"100%"}),e.to([r.text,r.passwordRequestButton],{opacity:1,duration:.3,ease:"none"});case 15:case"end":return t.stop()}}),t)})))),r.accountSection=document.querySelector(".account-section"),r.accountLoader=r.accountSection.querySelector(".loader"),r.accountTabContent=r.accountSection.querySelector(".tab-content"),r.saveButton=r.element.querySelector("[data-save-changes]"),r.saveButtonLoader=r.element.querySelector(".save-loader"),r.firstName=r.element.querySelector("#first-name"),r.lastName=r.element.querySelector("#last-name"),r.email=r.element.querySelector("#email"),r.passwordRequestButton=r.element.querySelector("[data-password-reset]"),r.passwordW=r.element.querySelector(".password-w"),r.loader=r.passwordW.querySelector(".password-loader"),r.text=r.element.querySelector(".password-w .inside-text"),r.subscriptionSection=r.element.querySelector(".subscription-section"),r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&MG(t,e)}(e,t),n=e,r=[{key:"init",value:(o=IG(TG().mark((function t(){return TG().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:this.subscriptionSection||(this.accountLoader.classList.remove("active"),ti.to(this.accountTabContent,{opacity:1,ease:"none",duration:.4}));case 1:case"end":return t.stop()}}),t,this)}))),function(){return o.apply(this,arguments)})},{key:"attach",value:function(){this.saveButton.addEventListener("click",this.saveChanges),this.passwordRequestButton.addEventListener("click",this.postPasswordRequest)}},{key:"detach",value:function(){this.saveButton.removeEventListener("click",this.saveChanges),this.passwordRequestButton.removeEventListener("click",this.postPasswordRequest)}}],r&&kG(n.prototype,r),i&&kG(n,i),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,i,o}(Yp);function BG(t){return BG="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},BG(t)}function jG(){jG=function(){return e};var t,e={},n=Object.prototype,r=n.hasOwnProperty,i=Object.defineProperty||function(t,e,n){t[e]=n.value},o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",s=o.asyncIterator||"@@asyncIterator",l=o.toStringTag||"@@toStringTag";function u(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,n){return t[e]=n}}function c(t,e,n,r){var o=e&&e.prototype instanceof v?e:v,a=Object.create(o.prototype),s=new P(r||[]);return i(a,"_invoke",{value:T(t,n,s)}),a}function d(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}e.wrap=c;var f="suspendedStart",h="suspendedYield",p="executing",m="completed",g={};function v(){}function y(){}function b(){}var _={};u(_,a,(function(){return this}));var w=Object.getPrototypeOf,A=w&&w(w(R([])));A&&A!==n&&r.call(A,a)&&(_=A);var E=b.prototype=v.prototype=Object.create(_);function x(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function S(t,e){function n(i,o,a,s){var l=d(t[i],t,o);if("throw"!==l.type){var u=l.arg,c=u.value;return c&&"object"==BG(c)&&r.call(c,"__await")?e.resolve(c.__await).then((function(t){n("next",t,a,s)}),(function(t){n("throw",t,a,s)})):e.resolve(c).then((function(t){u.value=t,a(u)}),(function(t){return n("throw",t,a,s)}))}s(l.arg)}var o;i(this,"_invoke",{value:function(t,r){function i(){return new e((function(e,i){n(t,r,e,i)}))}return o=o?o.then(i,i):i()}})}function T(e,n,r){var i=f;return function(o,a){if(i===p)throw Error("Generator is already running");if(i===m){if("throw"===o)throw a;return{value:t,done:!0}}for(r.method=o,r.arg=a;;){var s=r.delegate;if(s){var l=C(s,r);if(l){if(l===g)continue;return l}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(i===f)throw i=m,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);i=p;var u=d(e,n,r);if("normal"===u.type){if(i=r.done?m:h,u.arg===g)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(i=m,r.method="throw",r.arg=u.arg)}}}function C(e,n){var r=n.method,i=e.iterator[r];if(i===t)return n.delegate=null,"throw"===r&&e.iterator.return&&(n.method="return",n.arg=t,C(e,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),g;var o=d(i,e.iterator,n.arg);if("throw"===o.type)return n.method="throw",n.arg=o.arg,n.delegate=null,g;var a=o.arg;return a?a.done?(n[e.resultName]=a.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=t),n.delegate=null,g):a:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,g)}function I(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function k(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function P(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(I,this),this.reset(!0)}function R(e){if(e||""===e){var n=e[a];if(n)return n.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var i=-1,o=function n(){for(;++i<e.length;)if(r.call(e,i))return n.value=e[i],n.done=!1,n;return n.value=t,n.done=!0,n};return o.next=o}}throw new TypeError(BG(e)+" is not iterable")}return y.prototype=b,i(E,"constructor",{value:b,configurable:!0}),i(b,"constructor",{value:y,configurable:!0}),y.displayName=u(b,l,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===y||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,b):(t.__proto__=b,u(t,l,"GeneratorFunction")),t.prototype=Object.create(E),t},e.awrap=function(t){return{__await:t}},x(S.prototype),u(S.prototype,s,(function(){return this})),e.AsyncIterator=S,e.async=function(t,n,r,i,o){void 0===o&&(o=Promise);var a=new S(c(t,n,r,i),o);return e.isGeneratorFunction(n)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},x(E),u(E,l,"Generator"),u(E,a,(function(){return this})),u(E,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),n=[];for(var r in e)n.push(r);return n.reverse(),function t(){for(;n.length;){var r=n.pop();if(r in e)return t.value=r,t.done=!1,t}return t.done=!0,t}},e.values=R,P.prototype={constructor:P,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(k),!e)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function i(r,i){return s.type="throw",s.arg=e,n.next=r,i&&(n.method="next",n.arg=t),!!i}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],s=a.completion;if("root"===a.tryLoc)return i("end");if(a.tryLoc<=this.prev){var l=r.call(a,"catchLoc"),u=r.call(a,"finallyLoc");if(l&&u){if(this.prev<a.catchLoc)return i(a.catchLoc,!0);if(this.prev<a.finallyLoc)return i(a.finallyLoc)}else if(l){if(this.prev<a.catchLoc)return i(a.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return i(a.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=t,a.arg=e,o?(this.method="next",this.next=o.finallyLoc,g):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),g},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),k(n),g}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var i=r.arg;k(n)}return i}}throw Error("illegal catch attempt")},delegateYield:function(e,n,r){return this.delegate={iterator:R(e),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=t),g}},e}function zG(t,e,n,r,i,o,a){try{var s=t[o](a),l=s.value}catch(t){return void n(t)}s.done?e(l):Promise.resolve(l).then(r,i)}function FG(t){return function(){var e=this,n=arguments;return new Promise((function(r,i){var o=t.apply(e,n);function a(t){zG(o,r,i,a,s,"next",t)}function s(t){zG(o,r,i,a,s,"throw",t)}a(void 0)}))}}function UG(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,WG(r.key),r)}}function qG(t,e,n){return e=HG(e),function(t,e){if(e&&("object"===BG(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,GG()?Reflect.construct(e,n||[],HG(t).constructor):e.apply(t,n))}function GG(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(GG=function(){return!!t})()}function HG(t){return HG=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},HG(t)}function VG(t,e){return VG=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},VG(t,e)}function QG(t,e,n){return(e=WG(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function WG(t){var e=function(t,e){if("object"!=BG(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=BG(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==BG(e)?e:e+""}var YG=function(t){function e(t,n){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),QG(r=qG(this,e,[t,n]),"createCheckoutSession",FG(jG().mark((function t(){var e,n;return jG().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e={action:"david_create_checkout",customerId:r.customerId,subscriptionId:r.subscriptionId},t.next=3,fetch(ADMIN_AJAX_URL,{method:"POST",body:new URLSearchParams(e).toString(),credentials:"include",headers:{"Content-Type":"application/x-www-form-urlencoded"}});case 3:return n=t.sent,t.next=6,n.json();case 6:r.session=t.sent;case 7:case"end":return t.stop()}}),t)})))),QG(r,"redirectToCheckout",(function(){r.session&&r.session.data&&r.stripe.redirectToCheckout({sessionId:r.session.data.id}).then((function(t){console.error(t.error.message)}))})),QG(r,"askConfirmation",(function(){var t=ti.timeline();t.set(r.cancelSubscriptionW,{pointerEvents:"none"}),t.to([r.cancelSubscriptionW,r.textEl],{opacity:0,duration:.8,ease:"none",stagger:.1}),t.to([r.cancelSubscriptionW,r.textEl],{y:-10,duration:1.2,ease:"power2.out",stagger:.1},"<"),t.set(r.confirmationW,{display:"flex"},.8),t.to(r.confirmationW,{opacity:1,duration:.8,ease:"none"},.8),t.fromTo(r.confirmationW,{y:10},{y:0,duration:1.2,ease:"power2.out"},.8)})),QG(r,"cancelSubscription",FG(jG().mark((function t(){var e,n;return jG().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r.confirmationButton.classList.add("loading"),r.confirmationButtonLoader.classList.add("active"),e={action:"david_cancel_subscription",subscription:r.activeSubscription.id},t.prev=3,t.next=6,fetch(ADMIN_AJAX_URL,{method:"POST",body:new URLSearchParams(e).toString(),credentials:"include",headers:{"Content-Type":"application/x-www-form-urlencoded"}});case 6:return n=t.sent,t.next=9,n.json();case 9:t.sent.success&&r.showConfirmation(),t.next=16;break;case 13:throw t.prev=13,t.t0=t.catch(3),t.t0;case 16:r.confirmationButton.classList.remove("loading"),r.confirmationButtonLoader.classList.remove("active");case 18:case"end":return t.stop()}}),t,null,[[3,13]])})))),QG(r,"showConfirmation",(function(){r.textEl.innerText="Your membership has been succesfully cancelled";var t=ti.timeline();t.to(r.confirmationW,{opacity:0,duration:.8,ease:"none"},0),t.to(r.confirmationW,{y:-10,duration:1.2,ease:"power2.out"},0),t.set([r.cancelSubscriptionW,r.confirmationW],{display:"none"}),t.to(r.textEl,{opacity:1,duration:.8,ease:"none"},.8),t.fromTo(r.textEl,{y:10},{y:0,duration:1.2,ease:"power2.out"},.8)})),r.accountSection=document.querySelector(".account-section"),r.accountLoader=r.accountSection.querySelector(".loader"),r.accountTabContent=r.accountSection.querySelector(".tab-content"),r.wrapper=r.element.querySelector(".has-membership"),r.cancelSubscriptionW=r.wrapper.querySelector(".cancel-subscription"),r.textEl=r.wrapper.querySelector(".inside-text"),r.confirmationW=r.wrapper.querySelector(".confirmation-w"),r.confirmationButton=r.confirmationW.querySelector(".confirm-cancellation"),r.confirmationButtonLoader=r.confirmationW.querySelector(".confirmation-loader"),r.checkoutW=r.element.querySelector(".update-card"),r.checkoutButton=r.element.querySelector(".checkout-button"),r.session=null,r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&VG(t,e)}(e,t),n=e,r=[{key:"init",value:(a=FG(jG().mark((function t(){var e,n,r;return jG().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,this.bootstrap.getMemberInfo();case 3:if(n=t.sent,r=null==n||null===(e=n.data)||void 0===e?void 0:e.recent_subscriptions){t.next=9;break}return this.cancelSubscriptionW.remove(),this.showAccountContent(),t.abrupt("return");case 9:if(this.activeSubscription=this.findSubscriptionByStatus(r,"active"),!this.activeSubscription){t.next=15;break}return t.next=13,this.handleActiveSubscription();case 13:t.next=16;break;case 15:this.handleInactiveSubscription(r);case 16:this.showAccountContent(),t.next=23;break;case 19:t.prev=19,t.t0=t.catch(0),console.error("Failed to initialize subscription:",t.t0),this.showAccountContent();case 23:case"end":return t.stop()}}),t,this,[[0,19]])}))),function(){return a.apply(this,arguments)})},{key:"findSubscriptionByStatus",value:function(t,e){return t.find((function(t){return t.status===e}))}},{key:"handleActiveSubscription",value:(o=FG(jG().mark((function t(){return jG().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.customerId=this.checkoutW.dataset.customerId,this.subscriptionId=this.activeSubscription.subscr_id,this.customerId&&this.subscriptionId){t.next=5;break}return this.checkoutW.remove(),t.abrupt("return");case 5:return t.next=7,fG("pk_live_51R7khmBMKwxHiwYJlWpC8OAnNi7tRGewsqI1XlhXuyDHTc1NDpJOZzLD7kl7YXO18Ev4NNW4AafK91lAEh4K1BRW00pvd7DK6g");case 7:this.stripe=t.sent,this.createCheckoutSession();case 9:case"end":return t.stop()}}),t,this)}))),function(){return o.apply(this,arguments)})},{key:"handleInactiveSubscription",value:function(t){this.cancelSubscriptionW.remove(),this.checkoutW.remove(),this.findSubscriptionByStatus(t,"cancelled")&&(this.textEl.innerText="Your membership has been cancelled, it will expire at the end of your trial period")}},{key:"showAccountContent",value:function(){this.accountLoader.classList.remove("active"),ti.to(this.accountTabContent,{opacity:1,ease:"none",duration:.4})}},{key:"attach",value:function(){this.cancelSubscriptionW.addEventListener("click",this.askConfirmation),this.confirmationButton.addEventListener("click",this.cancelSubscription),this.checkoutButton.addEventListener("click",this.redirectToCheckout)}},{key:"detach",value:function(){this.cancelSubscriptionW.removeEventListener("click",this.askConfirmation),this.confirmationButton.removeEventListener("click",this.cancelSubscription),this.checkoutButton.removeEventListener("click",this.redirectToCheckout)}}],r&&UG(n.prototype,r),i&&UG(n,i),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,i,o,a}(Yp);function KG(t){return KG="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},KG(t)}function XG(){XG=function(){return e};var t,e={},n=Object.prototype,r=n.hasOwnProperty,i=Object.defineProperty||function(t,e,n){t[e]=n.value},o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",s=o.asyncIterator||"@@asyncIterator",l=o.toStringTag||"@@toStringTag";function u(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,n){return t[e]=n}}function c(t,e,n,r){var o=e&&e.prototype instanceof v?e:v,a=Object.create(o.prototype),s=new P(r||[]);return i(a,"_invoke",{value:T(t,n,s)}),a}function d(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}e.wrap=c;var f="suspendedStart",h="suspendedYield",p="executing",m="completed",g={};function v(){}function y(){}function b(){}var _={};u(_,a,(function(){return this}));var w=Object.getPrototypeOf,A=w&&w(w(R([])));A&&A!==n&&r.call(A,a)&&(_=A);var E=b.prototype=v.prototype=Object.create(_);function x(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function S(t,e){function n(i,o,a,s){var l=d(t[i],t,o);if("throw"!==l.type){var u=l.arg,c=u.value;return c&&"object"==KG(c)&&r.call(c,"__await")?e.resolve(c.__await).then((function(t){n("next",t,a,s)}),(function(t){n("throw",t,a,s)})):e.resolve(c).then((function(t){u.value=t,a(u)}),(function(t){return n("throw",t,a,s)}))}s(l.arg)}var o;i(this,"_invoke",{value:function(t,r){function i(){return new e((function(e,i){n(t,r,e,i)}))}return o=o?o.then(i,i):i()}})}function T(e,n,r){var i=f;return function(o,a){if(i===p)throw Error("Generator is already running");if(i===m){if("throw"===o)throw a;return{value:t,done:!0}}for(r.method=o,r.arg=a;;){var s=r.delegate;if(s){var l=C(s,r);if(l){if(l===g)continue;return l}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(i===f)throw i=m,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);i=p;var u=d(e,n,r);if("normal"===u.type){if(i=r.done?m:h,u.arg===g)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(i=m,r.method="throw",r.arg=u.arg)}}}function C(e,n){var r=n.method,i=e.iterator[r];if(i===t)return n.delegate=null,"throw"===r&&e.iterator.return&&(n.method="return",n.arg=t,C(e,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),g;var o=d(i,e.iterator,n.arg);if("throw"===o.type)return n.method="throw",n.arg=o.arg,n.delegate=null,g;var a=o.arg;return a?a.done?(n[e.resultName]=a.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=t),n.delegate=null,g):a:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,g)}function I(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function k(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function P(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(I,this),this.reset(!0)}function R(e){if(e||""===e){var n=e[a];if(n)return n.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var i=-1,o=function n(){for(;++i<e.length;)if(r.call(e,i))return n.value=e[i],n.done=!1,n;return n.value=t,n.done=!0,n};return o.next=o}}throw new TypeError(KG(e)+" is not iterable")}return y.prototype=b,i(E,"constructor",{value:b,configurable:!0}),i(b,"constructor",{value:y,configurable:!0}),y.displayName=u(b,l,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===y||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,b):(t.__proto__=b,u(t,l,"GeneratorFunction")),t.prototype=Object.create(E),t},e.awrap=function(t){return{__await:t}},x(S.prototype),u(S.prototype,s,(function(){return this})),e.AsyncIterator=S,e.async=function(t,n,r,i,o){void 0===o&&(o=Promise);var a=new S(c(t,n,r,i),o);return e.isGeneratorFunction(n)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},x(E),u(E,l,"Generator"),u(E,a,(function(){return this})),u(E,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),n=[];for(var r in e)n.push(r);return n.reverse(),function t(){for(;n.length;){var r=n.pop();if(r in e)return t.value=r,t.done=!1,t}return t.done=!0,t}},e.values=R,P.prototype={constructor:P,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(k),!e)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function i(r,i){return s.type="throw",s.arg=e,n.next=r,i&&(n.method="next",n.arg=t),!!i}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],s=a.completion;if("root"===a.tryLoc)return i("end");if(a.tryLoc<=this.prev){var l=r.call(a,"catchLoc"),u=r.call(a,"finallyLoc");if(l&&u){if(this.prev<a.catchLoc)return i(a.catchLoc,!0);if(this.prev<a.finallyLoc)return i(a.finallyLoc)}else if(l){if(this.prev<a.catchLoc)return i(a.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return i(a.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=t,a.arg=e,o?(this.method="next",this.next=o.finallyLoc,g):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),g},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),k(n),g}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var i=r.arg;k(n)}return i}}throw Error("illegal catch attempt")},delegateYield:function(e,n,r){return this.delegate={iterator:R(e),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=t),g}},e}function $G(t,e,n,r,i,o,a){try{var s=t[o](a),l=s.value}catch(t){return void n(t)}s.done?e(l):Promise.resolve(l).then(r,i)}function ZG(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,rH(r.key),r)}}function JG(t,e,n){return e=eH(e),function(t,e){if(e&&("object"===KG(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,tH()?Reflect.construct(e,n||[],eH(t).constructor):e.apply(t,n))}function tH(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(tH=function(){return!!t})()}function eH(t){return eH=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},eH(t)}function nH(t,e){return nH=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},nH(t,e)}function rH(t){var e=function(t,e){if("object"!=KG(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=KG(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==KG(e)?e:e+""}var iH=function(t){function e(t,n){var r,i,o,a;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),r=JG(this,e,[t,n]),i=r,o="manageSubscription",a=function(){var t=function(t){return function(){var e=this,n=arguments;return new Promise((function(r,i){var o=t.apply(e,n);function a(t){$G(o,r,i,a,s,"next",t)}function s(t){$G(o,r,i,a,s,"throw",t)}a(void 0)}))}}(XG().mark((function t(e){var n,r,i,o;return XG().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.el.classList.add("loading"),n=1==e.status?2:1,r={action:"david_manage_contact_list",acId:e.acId,listId:e.listId,status:n},t.prev=3,t.next=6,fetch(ADMIN_AJAX_URL,{method:"POST",body:new URLSearchParams(r).toString(),credentials:"include",headers:{"Content-Type":"application/x-www-form-urlencoded"}});case 6:return i=t.sent,t.next=9,i.json();case 9:(o=t.sent).success?(e.el.classList.remove("loading"),e.status=n,e.el.dataset.status=n):(e.el.classList.remove("loading"),e.input.checked=!e.input.checked,console.error(o.data)),t.next=16;break;case 13:throw t.prev=13,t.t0=t.catch(3),t.t0;case 16:case"end":return t.stop()}}),t,null,[[3,13]])})));return function(e){return t.apply(this,arguments)}}(),(o=rH(o))in i?Object.defineProperty(i,o,{value:a,enumerable:!0,configurable:!0,writable:!0}):i[o]=a,r.unsubscribeInputs=Array.from(r.element.querySelectorAll(".notif-button")).map((function(t){return{el:t,input:t.querySelector("input"),acId:t.dataset.acId,listId:t.dataset.listId,status:t.dataset.status}})),r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&nH(t,e)}(e,t),n=e,(r=[{key:"attach",value:function(){var t=this;this.unsubscribeInputs.forEach((function(e){e.click=t.manageSubscription.bind(t,e),e.input.addEventListener("click",e.click)}))}},{key:"detach",value:function(){this.unsubscribeInputs.forEach((function(t){t.input.removeEventListener("click",t.click)}))}}])&&ZG(n.prototype,r),i&&ZG(n,i),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,i}(Yp);function oH(t){return oH="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},oH(t)}function aH(t){return function(t){if(Array.isArray(t))return sH(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return sH(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return sH(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function sH(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function lH(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,pH(r.key),r)}}function uH(t,e,n){return e=dH(e),function(t,e){if(e&&("object"===oH(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,cH()?Reflect.construct(e,n||[],dH(t).constructor):e.apply(t,n))}function cH(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(cH=function(){return!!t})()}function dH(t){return dH=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},dH(t)}function fH(t,e){return fH=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},fH(t,e)}function hH(t,e,n){return(e=pH(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function pH(t){var e=function(t,e){if("object"!=oH(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=oH(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==oH(e)?e:e+""}function mH(t,e,n){!function(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}(t,e),e.set(t,n)}function gH(t,e){return t.get(vH(t,e))}function vH(t,e,n){if("function"==typeof t?t===e:t.has(e))return arguments.length<3?e:n;throw new TypeError("Private element is not present on this object")}var yH=new WeakMap,bH=function(t){function e(t,n){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),mH(r=uH(this,e,[t,n]),yH,void 0),hH(r,"onScroll",(function(t){var e=t.internalEngine(),n=t.scrollProgress();t.scrollSnapList().forEach((function(t,i){var o=t-n;e.options.loop&&e.slideLooper.loopPoints.forEach((function(e){var r=e.target();if(i===e.index&&0!==r){var a=Math.sign(r);-1===a&&(o=t-(1+n)),1===a&&(o=t+(1-n))}})),r.slidesImgs[i]&&(r.slidesImgs[i].style.transform="translate3d(".concat(-10*o*(12*r.bootstrap.viewport.width/375)*(2===r.slides.length?.3:1),"px, 0, 0)"))}))})),hH(r,"onSelect",(function(t){r.slides.forEach((function(e,n){return e.classList.toggle("active",t.selectedScrollSnap()===n)})),r.prevCta.classList.toggle("disabled",!gH(yH,r).canScrollPrev()),r.nextCta.classList.toggle("disabled",!gH(yH,r).canScrollNext())})),hH(r,"onResize",(function(){r.slides.length>1&&r.onScroll(gH(yH,r))})),r.slideshowW=t.querySelector(".slideshow-w"),r.slides=aH(t.querySelectorAll(".slide")),r.slidesImgs=t.querySelectorAll(".slide .picture-c"),r.ctaW=t.querySelector(".ctas-w"),r.prevCta=t.querySelector(".rounded-cta.left"),r.nextCta=t.querySelector(".rounded-cta.right"),r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&fH(t,e)}(e,t),n=e,r=[{key:"init",value:function(){var t;this.slides.length>1?(function(t,e,n){t.set(vH(t,e),n)}(yH,this,xB(this.slideshowW,{loop:!0,align:"center",duration:50,containScroll:!1})),this.onSelect(gH(yH,this))):null===(t=this.slideshowW)||void 0===t||t.classList.add("disabled")}},{key:"attach",value:function(){this.viewport.on("resize",this.onResize),gH(yH,this)&&(gH(yH,this).on("scroll",this.onScroll),gH(yH,this).on("select",this.onSelect),this.prevCta.addEventListener("click",gH(yH,this).scrollPrev),this.nextCta.addEventListener("click",gH(yH,this).scrollNext))}},{key:"detach",value:function(){this.viewport.off("resize",this.onResize),gH(yH,this)&&(gH(yH,this).off("scroll",this.onScroll),gH(yH,this).off("select",this.onSelect),this.prevCta.removeEventListener("click",gH(yH,this).scrollPrev),this.nextCta.removeEventListener("click",gH(yH,this).scrollNext))}}],r&&lH(n.prototype,r),i&&lH(n,i),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,i}(Yp);function _H(t){return _H="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_H(t)}function wH(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,CH(r.key),r)}}function AH(t,e,n){return e=xH(e),function(t,e){if(e&&("object"===_H(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,EH()?Reflect.construct(e,n||[],xH(t).constructor):e.apply(t,n))}function EH(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(EH=function(){return!!t})()}function xH(t){return xH=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},xH(t)}function SH(t,e){return SH=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},SH(t,e)}function TH(t,e,n){return(e=CH(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function CH(t){var e=function(t,e){if("object"!=_H(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=_H(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==_H(e)?e:e+""}function IH(t,e,n){!function(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}(t,e),e.set(t,n)}function kH(t,e){return t.get(RH(t,e))}function PH(t,e,n){return t.set(RH(t,e),n),n}function RH(t,e,n){if("function"==typeof t?t===e:t.has(e))return arguments.length<3?e:n;throw new TypeError("Private element is not present on this object")}var OH=new WeakMap,MH=new WeakMap,LH=function(t){function e(t,n){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),IH(r=AH(this,e,[t,n]),OH,!1),IH(r,MH,!1),TH(r,"open",(function(){PH(OH,r,!0);var t=kH(MH,r)?1:-1,e=ti.timeline();e.set(r.element,{display:"block"},0),e.to(r.overlay,{opacity:1,duration:.2},0),e.fromTo(r.dropdown,{y:function(){return r.dropdown.offsetHeight*t}},{y:0,duration:.8,ease:"power2.out"},0),e.fromTo(r.content,{y:function(){return-r.dropdown.offsetHeight*t}},{y:0,duration:.8,ease:"power2.out"},0)})),TH(r,"close",(function(){PH(OH,r,!1);var t=kH(MH,r)?1:-1,e=ti.timeline();e.to(r.dropdown,{y:function(){return r.dropdown.offsetHeight*t},duration:.8,ease:"power2.in"},0),e.fromTo(r.content,{y:0},{y:function(){return-r.dropdown.offsetHeight*t},duration:.8,ease:"power2.in"},0),e.to(r.overlay,{opacity:0,duration:.6},.2),e.set(r.element,{display:"none"})})),TH(r,"onResize",(function(){PH(MH,r,!r.viewport.medias.tablet)})),r.dropdown=t.querySelector(".dropdown"),r.overlay=t.querySelector(".overlay"),r.content=t.querySelector(".content"),r.closeCta=t.querySelector(".close-cta"),r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&SH(t,e)}(e,t),n=e,(r=[{key:"init",value:function(){}},{key:"attach",value:function(){this.viewport.on("resize",this.onResize),this.closeCta.addEventListener("click",this.close),this.overlay.addEventListener("click",this.close)}},{key:"detach",value:function(){this.viewport.off("resize",this.onResize),this.closeCta.removeEventListener("click",this.close),this.overlay.removeEventListener("click",this.close)}}])&&wH(n.prototype,r),i&&wH(n,i),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,i}(Yp);function DH(t){return DH="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},DH(t)}function NH(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,qH(r.key),r)}}function BH(t,e,n){return e=zH(e),function(t,e){if(e&&("object"===DH(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,jH()?Reflect.construct(e,n||[],zH(t).constructor):e.apply(t,n))}function jH(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(jH=function(){return!!t})()}function zH(t){return zH=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},zH(t)}function FH(t,e){return FH=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},FH(t,e)}function UH(t,e,n){return(e=qH(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function qH(t){var e=function(t,e){if("object"!=DH(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=DH(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==DH(e)?e:e+""}function GH(t,e,n){!function(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}(t,e),e.set(t,n)}function HH(t,e){return t.get(VH(t,e))}function VH(t,e,n){if("function"==typeof t?t===e:t.has(e))return arguments.length<3?e:n;throw new TypeError("Private element is not present on this object")}var QH=new WeakMap,WH=function(t){function e(t,n){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),GH(r=BH(this,e,[t,n]),QH,void 0),UH(r,"stickyMenu",(function(){var t;null===(t=r.st)||void 0===t||t.kill(),r.viewport.outerWidth>1024?r.st=us.create({trigger:r.element,start:"top -1px",endTrigger:r.footer,end:"100px bottom",pin:r.element,pinSpacing:!1,onLeave:function(){ti.to(r.element,{opacity:0,duration:.3})},onEnterBack:function(){ti.to(r.element,{opacity:1,duration:.3})},toggleClass:{targets:[r.element,r.header],className:"sticky-bar"}}):r.st=us.create({trigger:r.element,start:"bottom top",endTrigger:r.footer,end:"top bottom",toggleClass:{targets:r.stickyMenuCtasMb,className:"visible"}})})),UH(r,"openMenuDropdownMb",(function(){var t=ti.timeline();t.set(r.stickyMenuMb,{display:"block"},0),t.to(r.stickyMenuCtasMb,{opacity:0,duration:.2},0),t.set(r.stickyMenuCtasMb,{display:"none"},.2),t.set(r.stickyMenuCloseCtaMb,{display:"flex"},.2),t.to(r.stickyMenuCloseCtaMb,{opacity:1,duration:.2},.2),t.to(r.stickyMenuOverlayMb,{opacity:1,duration:.2},0),t.to(r.stickyMenuDropdownMb,{y:0,duration:.8,ease:"power2.out"},0),t.fromTo(r.stickyMenuContentMb,{y:function(){return-r.stickyMenuDropdownMb.offsetHeight}},{y:0,duration:.8,ease:"power2.out"},0)})),UH(r,"closeMenuDropdownMb",(function(){var t=ti.timeline();t.to(r.stickyMenuCloseCtaMb,{opacity:0,duration:.2},.6),t.set(r.stickyMenuCloseCtaMb,{display:"none"},.8),t.set(r.stickyMenuCtasMb,{display:"flex"},.8),t.to(r.stickyMenuCtasMb,{opacity:1,duration:.2,clearProps:!0},.8),t.to(r.stickyMenuDropdownMb,{y:function(){return r.stickyMenuDropdownMb.offsetHeight},duration:.8,ease:"power2.in"},0),t.fromTo(r.stickyMenuContentMb,{y:0},{y:function(){return-r.stickyMenuDropdownMb.offsetHeight},duration:.8,ease:"power2.in"},0),t.to(r.stickyMenuOverlayMb,{opacity:0,duration:.6},.2),t.set(r.stickyMenuMb,{display:"none"})})),UH(r,"onResize",(function(){r.companionPage.style.setProperty("--listing-hero-height","".concat(r.listingSlideshow.offsetHeight+6*r.element.offsetHeight,"px"))})),r.footer=document.querySelector("#footer"),r.header=document.querySelector("#header"),r.companionPage=document.querySelector(".companion-listing-page"),r.listingSlideshow=r.companionPage.querySelector(".listing-slideshow"),r.poems=t.classList.contains("poems"),r.listingW=r.poems?document.querySelector(".poems-essays-listing"):document.querySelector(".listing-w"),r.stickyWMb=t.querySelector(".sticky-ctas-mb"),r.stickyMenuCtaMb=r.stickyWMb.querySelector(".sticky-cta:first-of-type"),r.stickyMenuMb=t.querySelector(".sticky-filters-mb"),r.stickyMenuDropdownMb=r.stickyMenuMb.querySelector(".dropdown"),r.stickyMenuContentMb=r.stickyMenuMb.querySelector(".content"),r.stickyMenuOverlayMb=r.stickyMenuMb.querySelector(".overlay"),r.stickyMenuCtasMb=r.stickyWMb.querySelectorAll(".sticky-cta:not(.close)"),r.stickyMenuCloseCtaMb=r.stickyWMb.querySelector(".sticky-cta.close"),r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&FH(t,e)}(e,t),n=e,r=[{key:"init",value:function(){var t=this;!function(t,e,n){t.set(VH(t,e),n)}(QH,this,new ResizeObserver((function(){t.stickyMenu()}))),HH(QH,this).observe(this.listingW)}},{key:"attach",value:function(){this.viewport.on("resize",this.onResize),this.stickyMenuCtaMb.addEventListener("click",this.openMenuDropdownMb),this.stickyMenuOverlayMb.addEventListener("click",this.closeMenuDropdownMb),this.stickyMenuCloseCtaMb.addEventListener("click",this.closeMenuDropdownMb)}},{key:"detach",value:function(){this.viewport.off("resize",this.onResize),this.stickyMenuCtaMb.removeEventListener("click",this.openMenuDropdownMb),this.stickyMenuOverlayMb.removeEventListener("click",this.closeMenuDropdownMb),this.stickyMenuCloseCtaMb.removeEventListener("click",this.closeMenuDropdownMb),HH(QH,this).unobserve(this.listingW)}}],r&&NH(n.prototype,r),i&&NH(n,i),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,i}(Yp);function YH(t){return YH="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},YH(t)}function KH(t){return function(t){if(Array.isArray(t))return XH(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return XH(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return XH(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function XH(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function $H(){$H=function(){return e};var t,e={},n=Object.prototype,r=n.hasOwnProperty,i=Object.defineProperty||function(t,e,n){t[e]=n.value},o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",s=o.asyncIterator||"@@asyncIterator",l=o.toStringTag||"@@toStringTag";function u(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,n){return t[e]=n}}function c(t,e,n,r){var o=e&&e.prototype instanceof v?e:v,a=Object.create(o.prototype),s=new P(r||[]);return i(a,"_invoke",{value:T(t,n,s)}),a}function d(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}e.wrap=c;var f="suspendedStart",h="suspendedYield",p="executing",m="completed",g={};function v(){}function y(){}function b(){}var _={};u(_,a,(function(){return this}));var w=Object.getPrototypeOf,A=w&&w(w(R([])));A&&A!==n&&r.call(A,a)&&(_=A);var E=b.prototype=v.prototype=Object.create(_);function x(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function S(t,e){function n(i,o,a,s){var l=d(t[i],t,o);if("throw"!==l.type){var u=l.arg,c=u.value;return c&&"object"==YH(c)&&r.call(c,"__await")?e.resolve(c.__await).then((function(t){n("next",t,a,s)}),(function(t){n("throw",t,a,s)})):e.resolve(c).then((function(t){u.value=t,a(u)}),(function(t){return n("throw",t,a,s)}))}s(l.arg)}var o;i(this,"_invoke",{value:function(t,r){function i(){return new e((function(e,i){n(t,r,e,i)}))}return o=o?o.then(i,i):i()}})}function T(e,n,r){var i=f;return function(o,a){if(i===p)throw Error("Generator is already running");if(i===m){if("throw"===o)throw a;return{value:t,done:!0}}for(r.method=o,r.arg=a;;){var s=r.delegate;if(s){var l=C(s,r);if(l){if(l===g)continue;return l}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(i===f)throw i=m,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);i=p;var u=d(e,n,r);if("normal"===u.type){if(i=r.done?m:h,u.arg===g)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(i=m,r.method="throw",r.arg=u.arg)}}}function C(e,n){var r=n.method,i=e.iterator[r];if(i===t)return n.delegate=null,"throw"===r&&e.iterator.return&&(n.method="return",n.arg=t,C(e,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),g;var o=d(i,e.iterator,n.arg);if("throw"===o.type)return n.method="throw",n.arg=o.arg,n.delegate=null,g;var a=o.arg;return a?a.done?(n[e.resultName]=a.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=t),n.delegate=null,g):a:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,g)}function I(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function k(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function P(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(I,this),this.reset(!0)}function R(e){if(e||""===e){var n=e[a];if(n)return n.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var i=-1,o=function n(){for(;++i<e.length;)if(r.call(e,i))return n.value=e[i],n.done=!1,n;return n.value=t,n.done=!0,n};return o.next=o}}throw new TypeError(YH(e)+" is not iterable")}return y.prototype=b,i(E,"constructor",{value:b,configurable:!0}),i(b,"constructor",{value:y,configurable:!0}),y.displayName=u(b,l,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===y||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,b):(t.__proto__=b,u(t,l,"GeneratorFunction")),t.prototype=Object.create(E),t},e.awrap=function(t){return{__await:t}},x(S.prototype),u(S.prototype,s,(function(){return this})),e.AsyncIterator=S,e.async=function(t,n,r,i,o){void 0===o&&(o=Promise);var a=new S(c(t,n,r,i),o);return e.isGeneratorFunction(n)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},x(E),u(E,l,"Generator"),u(E,a,(function(){return this})),u(E,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),n=[];for(var r in e)n.push(r);return n.reverse(),function t(){for(;n.length;){var r=n.pop();if(r in e)return t.value=r,t.done=!1,t}return t.done=!0,t}},e.values=R,P.prototype={constructor:P,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(k),!e)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function i(r,i){return s.type="throw",s.arg=e,n.next=r,i&&(n.method="next",n.arg=t),!!i}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],s=a.completion;if("root"===a.tryLoc)return i("end");if(a.tryLoc<=this.prev){var l=r.call(a,"catchLoc"),u=r.call(a,"finallyLoc");if(l&&u){if(this.prev<a.catchLoc)return i(a.catchLoc,!0);if(this.prev<a.finallyLoc)return i(a.finallyLoc)}else if(l){if(this.prev<a.catchLoc)return i(a.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return i(a.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=t,a.arg=e,o?(this.method="next",this.next=o.finallyLoc,g):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),g},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),k(n),g}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var i=r.arg;k(n)}return i}}throw Error("illegal catch attempt")},delegateYield:function(e,n,r){return this.delegate={iterator:R(e),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=t),g}},e}function ZH(t,e,n,r,i,o,a){try{var s=t[o](a),l=s.value}catch(t){return void n(t)}s.done?e(l):Promise.resolve(l).then(r,i)}function JH(t){return function(){var e=this,n=arguments;return new Promise((function(r,i){var o=t.apply(e,n);function a(t){ZH(o,r,i,a,s,"next",t)}function s(t){ZH(o,r,i,a,s,"throw",t)}a(void 0)}))}}function tV(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,aV(r.key),r)}}function eV(t,e,n){return e=rV(e),function(t,e){if(e&&("object"===YH(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,nV()?Reflect.construct(e,n||[],rV(t).constructor):e.apply(t,n))}function nV(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(nV=function(){return!!t})()}function rV(t){return rV=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},rV(t)}function iV(t,e){return iV=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},iV(t,e)}function oV(t,e,n){return(e=aV(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function aV(t){var e=function(t,e){if("object"!=YH(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=YH(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==YH(e)?e:e+""}function sV(t,e,n){!function(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}(t,e),e.set(t,n)}function lV(t,e,n){return t.set(cV(t,e),n),n}function uV(t,e){return t.get(cV(t,e))}function cV(t,e,n){if("function"==typeof t?t===e:t.has(e))return arguments.length<3?e:n;throw new TypeError("Private element is not present on this object")}var dV=new WeakMap,fV=new WeakMap,hV=new WeakMap,pV=new WeakMap,mV=function(t){function e(t,n){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),sV(r=eV(this,e,[t,n]),dV,1),sV(r,fV,""),sV(r,hV,[]),sV(r,pV,6),oV(r,"onLoadmore",JH($H().mark((function t(){var e,n;return $H().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,r.call(!0);case 2:n=t.sent,r.listingW.insertAdjacentHTML("beforeend",n),lV(pV,r,uV(pV,r)+6),lV(dV,r,(e=uV(dV,r),e++,e)),r.updateDom();case 7:case"end":return t.stop()}}),t)})))),oV(r,"call",JH($H().mark((function t(){var e,n,i,o,a=arguments;return $H().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=a.length>0&&void 0!==a[0]&&a[0],null===(e=r.loadmoreCta)||void 0===e||e.classList.add("disabled"),i={action:"david_get_films",page:n?uV(dV,r)+1:1,taxonomy:uV(fV,r),terms:uV(hV,r)},t.next=5,fetch(ADMIN_AJAX_URL,{method:"POST",credentials:"include",headers:{"Content-type":"application/x-www-form-urlencoded"},body:new URLSearchParams(i).toString()});case 5:return o=t.sent,r.listingW.querySelector(".endpoint-infos").remove(),t.abrupt("return",o.text());case 8:case"end":return t.stop()}}),t)})))),oV(r,"updateDom",(function(){r.loadmoreCta&&(uV(pV,r)>=r.listingW.querySelector(".endpoint-infos").dataset.maxPosts?r.loadmoreCta.style.display="none":(r.loadmoreCta.style.display="block",r.loadmoreCta.classList.remove("disabled")));var t=KH(r.listingW.querySelectorAll(".listing-large-card:not(.visible)")),e=ti.timeline();e.to(t,{opacity:1,duration:1.4,stagger:.1,ease:"linear"},0),e.add((function(){t.forEach((function(t){return t.classList.add("visible")}))}))})),r.loadmoreCta=t.querySelector(".load-more"),r.listingW=t.querySelector(".listing-w"),r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&iV(t,e)}(e,t),n=e,(r=[{key:"attach",value:function(){var t;null===(t=this.loadmoreCta)||void 0===t||t.addEventListener("click",this.onLoadmore)}},{key:"detach",value:function(){var t;null===(t=this.loadmoreCta)||void 0===t||t.removeEventListener("click",this.onLoadmore)}}])&&tV(n.prototype,r),i&&tV(n,i),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,i}(Yp);function gV(t){return gV="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},gV(t)}function vV(t){return function(t){if(Array.isArray(t))return yV(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return yV(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return yV(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function yV(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function bV(){bV=function(){return e};var t,e={},n=Object.prototype,r=n.hasOwnProperty,i=Object.defineProperty||function(t,e,n){t[e]=n.value},o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",s=o.asyncIterator||"@@asyncIterator",l=o.toStringTag||"@@toStringTag";function u(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,n){return t[e]=n}}function c(t,e,n,r){var o=e&&e.prototype instanceof v?e:v,a=Object.create(o.prototype),s=new P(r||[]);return i(a,"_invoke",{value:T(t,n,s)}),a}function d(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}e.wrap=c;var f="suspendedStart",h="suspendedYield",p="executing",m="completed",g={};function v(){}function y(){}function b(){}var _={};u(_,a,(function(){return this}));var w=Object.getPrototypeOf,A=w&&w(w(R([])));A&&A!==n&&r.call(A,a)&&(_=A);var E=b.prototype=v.prototype=Object.create(_);function x(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function S(t,e){function n(i,o,a,s){var l=d(t[i],t,o);if("throw"!==l.type){var u=l.arg,c=u.value;return c&&"object"==gV(c)&&r.call(c,"__await")?e.resolve(c.__await).then((function(t){n("next",t,a,s)}),(function(t){n("throw",t,a,s)})):e.resolve(c).then((function(t){u.value=t,a(u)}),(function(t){return n("throw",t,a,s)}))}s(l.arg)}var o;i(this,"_invoke",{value:function(t,r){function i(){return new e((function(e,i){n(t,r,e,i)}))}return o=o?o.then(i,i):i()}})}function T(e,n,r){var i=f;return function(o,a){if(i===p)throw Error("Generator is already running");if(i===m){if("throw"===o)throw a;return{value:t,done:!0}}for(r.method=o,r.arg=a;;){var s=r.delegate;if(s){var l=C(s,r);if(l){if(l===g)continue;return l}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(i===f)throw i=m,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);i=p;var u=d(e,n,r);if("normal"===u.type){if(i=r.done?m:h,u.arg===g)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(i=m,r.method="throw",r.arg=u.arg)}}}function C(e,n){var r=n.method,i=e.iterator[r];if(i===t)return n.delegate=null,"throw"===r&&e.iterator.return&&(n.method="return",n.arg=t,C(e,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),g;var o=d(i,e.iterator,n.arg);if("throw"===o.type)return n.method="throw",n.arg=o.arg,n.delegate=null,g;var a=o.arg;return a?a.done?(n[e.resultName]=a.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=t),n.delegate=null,g):a:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,g)}function I(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function k(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function P(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(I,this),this.reset(!0)}function R(e){if(e||""===e){var n=e[a];if(n)return n.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var i=-1,o=function n(){for(;++i<e.length;)if(r.call(e,i))return n.value=e[i],n.done=!1,n;return n.value=t,n.done=!0,n};return o.next=o}}throw new TypeError(gV(e)+" is not iterable")}return y.prototype=b,i(E,"constructor",{value:b,configurable:!0}),i(b,"constructor",{value:y,configurable:!0}),y.displayName=u(b,l,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===y||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,b):(t.__proto__=b,u(t,l,"GeneratorFunction")),t.prototype=Object.create(E),t},e.awrap=function(t){return{__await:t}},x(S.prototype),u(S.prototype,s,(function(){return this})),e.AsyncIterator=S,e.async=function(t,n,r,i,o){void 0===o&&(o=Promise);var a=new S(c(t,n,r,i),o);return e.isGeneratorFunction(n)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},x(E),u(E,l,"Generator"),u(E,a,(function(){return this})),u(E,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),n=[];for(var r in e)n.push(r);return n.reverse(),function t(){for(;n.length;){var r=n.pop();if(r in e)return t.value=r,t.done=!1,t}return t.done=!0,t}},e.values=R,P.prototype={constructor:P,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(k),!e)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function i(r,i){return s.type="throw",s.arg=e,n.next=r,i&&(n.method="next",n.arg=t),!!i}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],s=a.completion;if("root"===a.tryLoc)return i("end");if(a.tryLoc<=this.prev){var l=r.call(a,"catchLoc"),u=r.call(a,"finallyLoc");if(l&&u){if(this.prev<a.catchLoc)return i(a.catchLoc,!0);if(this.prev<a.finallyLoc)return i(a.finallyLoc)}else if(l){if(this.prev<a.catchLoc)return i(a.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return i(a.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=t,a.arg=e,o?(this.method="next",this.next=o.finallyLoc,g):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),g},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),k(n),g}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var i=r.arg;k(n)}return i}}throw Error("illegal catch attempt")},delegateYield:function(e,n,r){return this.delegate={iterator:R(e),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=t),g}},e}function _V(t,e,n,r,i,o,a){try{var s=t[o](a),l=s.value}catch(t){return void n(t)}s.done?e(l):Promise.resolve(l).then(r,i)}function wV(t){return function(){var e=this,n=arguments;return new Promise((function(r,i){var o=t.apply(e,n);function a(t){_V(o,r,i,a,s,"next",t)}function s(t){_V(o,r,i,a,s,"throw",t)}a(void 0)}))}}function AV(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,IV(r.key),r)}}function EV(t,e,n){return e=SV(e),function(t,e){if(e&&("object"===gV(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,xV()?Reflect.construct(e,n||[],SV(t).constructor):e.apply(t,n))}function xV(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(xV=function(){return!!t})()}function SV(t){return SV=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},SV(t)}function TV(t,e){return TV=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},TV(t,e)}function CV(t,e,n){return(e=IV(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function IV(t){var e=function(t,e){if("object"!=gV(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=gV(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==gV(e)?e:e+""}function kV(t,e,n){!function(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}(t,e),e.set(t,n)}function PV(t,e,n){return t.set(OV(t,e),n),n}function RV(t,e){return t.get(OV(t,e))}function OV(t,e,n){if("function"==typeof t?t===e:t.has(e))return arguments.length<3?e:n;throw new TypeError("Private element is not present on this object")}var MV=new WeakMap,LV=new WeakMap,DV=new WeakMap,NV=new WeakMap,BV=function(t){function e(t,n){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),kV(r=EV(this,e,[t,n]),MV,1),kV(r,LV,""),kV(r,DV,[]),kV(r,NV,6),CV(r,"onLoadmore",wV(bV().mark((function t(){var e,n;return bV().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,r.call(!0);case 2:n=t.sent,r.listingW.insertAdjacentHTML("beforeend",n),PV(NV,r,RV(NV,r)+6),PV(MV,r,(e=RV(MV,r),e++,e)),r.updateDom();case 7:case"end":return t.stop()}}),t)})))),CV(r,"call",wV(bV().mark((function t(){var e,n,i,o,a=arguments;return bV().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=a.length>0&&void 0!==a[0]&&a[0],null===(e=r.loadmoreCta)||void 0===e||e.classList.add("disabled"),i={action:"david_get_talks",page:n?RV(MV,r)+1:1,taxonomy:RV(LV,r),terms:RV(DV,r)},t.next=5,fetch(ADMIN_AJAX_URL,{method:"POST",credentials:"include",headers:{"Content-type":"application/x-www-form-urlencoded"},body:new URLSearchParams(i).toString()});case 5:return o=t.sent,r.listingW.querySelector(".endpoint-infos").remove(),t.abrupt("return",o.text());case 8:case"end":return t.stop()}}),t)})))),CV(r,"updateDom",(function(){r.loadmoreCta&&(RV(NV,r)>=r.listingW.querySelector(".endpoint-infos").dataset.maxPosts?r.loadmoreCta.style.display="none":(r.loadmoreCta.style.display="block",r.loadmoreCta.classList.remove("disabled")));var t=vV(r.listingW.querySelectorAll(".listing-large-card:not(.visible)")),e=ti.timeline();e.to(t,{opacity:1,duration:1.4,stagger:.1,ease:"linear"},0),e.add((function(){t.forEach((function(t){return t.classList.add("visible")}))}))})),r.loadmoreCta=t.querySelector(".load-more"),r.listingW=t.querySelector(".listing-w"),r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&TV(t,e)}(e,t),n=e,(r=[{key:"attach",value:function(){var t;null===(t=this.loadmoreCta)||void 0===t||t.addEventListener("click",this.onLoadmore)}},{key:"detach",value:function(){var t;null===(t=this.loadmoreCta)||void 0===t||t.removeEventListener("click",this.onLoadmore)}}])&&AV(n.prototype,r),i&&AV(n,i),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,i}(Yp);function jV(t){return jV="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},jV(t)}function zV(t){return function(t){if(Array.isArray(t))return FV(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return FV(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return FV(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function FV(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function UV(){UV=function(){return e};var t,e={},n=Object.prototype,r=n.hasOwnProperty,i=Object.defineProperty||function(t,e,n){t[e]=n.value},o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",s=o.asyncIterator||"@@asyncIterator",l=o.toStringTag||"@@toStringTag";function u(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,n){return t[e]=n}}function c(t,e,n,r){var o=e&&e.prototype instanceof v?e:v,a=Object.create(o.prototype),s=new P(r||[]);return i(a,"_invoke",{value:T(t,n,s)}),a}function d(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}e.wrap=c;var f="suspendedStart",h="suspendedYield",p="executing",m="completed",g={};function v(){}function y(){}function b(){}var _={};u(_,a,(function(){return this}));var w=Object.getPrototypeOf,A=w&&w(w(R([])));A&&A!==n&&r.call(A,a)&&(_=A);var E=b.prototype=v.prototype=Object.create(_);function x(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function S(t,e){function n(i,o,a,s){var l=d(t[i],t,o);if("throw"!==l.type){var u=l.arg,c=u.value;return c&&"object"==jV(c)&&r.call(c,"__await")?e.resolve(c.__await).then((function(t){n("next",t,a,s)}),(function(t){n("throw",t,a,s)})):e.resolve(c).then((function(t){u.value=t,a(u)}),(function(t){return n("throw",t,a,s)}))}s(l.arg)}var o;i(this,"_invoke",{value:function(t,r){function i(){return new e((function(e,i){n(t,r,e,i)}))}return o=o?o.then(i,i):i()}})}function T(e,n,r){var i=f;return function(o,a){if(i===p)throw Error("Generator is already running");if(i===m){if("throw"===o)throw a;return{value:t,done:!0}}for(r.method=o,r.arg=a;;){var s=r.delegate;if(s){var l=C(s,r);if(l){if(l===g)continue;return l}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(i===f)throw i=m,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);i=p;var u=d(e,n,r);if("normal"===u.type){if(i=r.done?m:h,u.arg===g)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(i=m,r.method="throw",r.arg=u.arg)}}}function C(e,n){var r=n.method,i=e.iterator[r];if(i===t)return n.delegate=null,"throw"===r&&e.iterator.return&&(n.method="return",n.arg=t,C(e,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),g;var o=d(i,e.iterator,n.arg);if("throw"===o.type)return n.method="throw",n.arg=o.arg,n.delegate=null,g;var a=o.arg;return a?a.done?(n[e.resultName]=a.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=t),n.delegate=null,g):a:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,g)}function I(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function k(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function P(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(I,this),this.reset(!0)}function R(e){if(e||""===e){var n=e[a];if(n)return n.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var i=-1,o=function n(){for(;++i<e.length;)if(r.call(e,i))return n.value=e[i],n.done=!1,n;return n.value=t,n.done=!0,n};return o.next=o}}throw new TypeError(jV(e)+" is not iterable")}return y.prototype=b,i(E,"constructor",{value:b,configurable:!0}),i(b,"constructor",{value:y,configurable:!0}),y.displayName=u(b,l,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===y||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,b):(t.__proto__=b,u(t,l,"GeneratorFunction")),t.prototype=Object.create(E),t},e.awrap=function(t){return{__await:t}},x(S.prototype),u(S.prototype,s,(function(){return this})),e.AsyncIterator=S,e.async=function(t,n,r,i,o){void 0===o&&(o=Promise);var a=new S(c(t,n,r,i),o);return e.isGeneratorFunction(n)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},x(E),u(E,l,"Generator"),u(E,a,(function(){return this})),u(E,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),n=[];for(var r in e)n.push(r);return n.reverse(),function t(){for(;n.length;){var r=n.pop();if(r in e)return t.value=r,t.done=!1,t}return t.done=!0,t}},e.values=R,P.prototype={constructor:P,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(k),!e)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function i(r,i){return s.type="throw",s.arg=e,n.next=r,i&&(n.method="next",n.arg=t),!!i}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],s=a.completion;if("root"===a.tryLoc)return i("end");if(a.tryLoc<=this.prev){var l=r.call(a,"catchLoc"),u=r.call(a,"finallyLoc");if(l&&u){if(this.prev<a.catchLoc)return i(a.catchLoc,!0);if(this.prev<a.finallyLoc)return i(a.finallyLoc)}else if(l){if(this.prev<a.catchLoc)return i(a.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return i(a.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=t,a.arg=e,o?(this.method="next",this.next=o.finallyLoc,g):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),g},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),k(n),g}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var i=r.arg;k(n)}return i}}throw Error("illegal catch attempt")},delegateYield:function(e,n,r){return this.delegate={iterator:R(e),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=t),g}},e}function qV(t,e,n,r,i,o,a){try{var s=t[o](a),l=s.value}catch(t){return void n(t)}s.done?e(l):Promise.resolve(l).then(r,i)}function GV(t){return function(){var e=this,n=arguments;return new Promise((function(r,i){var o=t.apply(e,n);function a(t){qV(o,r,i,a,s,"next",t)}function s(t){qV(o,r,i,a,s,"throw",t)}a(void 0)}))}}function HV(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,XV(r.key),r)}}function VV(t,e,n){return e=WV(e),function(t,e){if(e&&("object"===jV(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,QV()?Reflect.construct(e,n||[],WV(t).constructor):e.apply(t,n))}function QV(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(QV=function(){return!!t})()}function WV(t){return WV=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},WV(t)}function YV(t,e){return YV=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},YV(t,e)}function KV(t,e,n){return(e=XV(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function XV(t){var e=function(t,e){if("object"!=jV(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=jV(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==jV(e)?e:e+""}function $V(t,e,n){!function(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}(t,e),e.set(t,n)}function ZV(t,e,n){return t.set(tQ(t,e),n),n}function JV(t,e){return t.get(tQ(t,e))}function tQ(t,e,n){if("function"==typeof t?t===e:t.has(e))return arguments.length<3?e:n;throw new TypeError("Private element is not present on this object")}var eQ=new WeakMap,nQ=new WeakMap,rQ=function(t){function e(t,n){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),$V(r=VV(this,e,[t,n]),eQ,1),$V(r,nQ,6),KV(r,"onLoadmore",GV(UV().mark((function t(){var e,n;return UV().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,r.call(!0);case 2:n=t.sent,r.listingW.insertAdjacentHTML("beforeend",n),ZV(nQ,r,JV(nQ,r)+6),ZV(eQ,r,(e=JV(eQ,r),e++,e)),r.updateDom();case 7:case"end":return t.stop()}}),t)})))),KV(r,"call",GV(UV().mark((function t(){var e,n,i;return UV().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return null===(e=r.loadmoreCta)||void 0===e||e.classList.add("disabled"),n={action:"david_get_courses",page:JV(eQ,r)+1},t.next=4,fetch(ADMIN_AJAX_URL,{method:"POST",credentials:"include",headers:{"Content-type":"application/x-www-form-urlencoded"},body:new URLSearchParams(n).toString()});case 4:return i=t.sent,r.listingW.querySelector(".endpoint-infos").remove(),t.abrupt("return",i.text());case 7:case"end":return t.stop()}}),t)})))),KV(r,"updateDom",(function(){r.loadmoreCta&&(JV(nQ,r)>=r.listingW.querySelector(".endpoint-infos").dataset.maxPosts?r.loadmoreCta.style.display="none":(r.loadmoreCta.style.display="block",r.loadmoreCta.classList.remove("disabled")));var t=zV(r.listingW.querySelectorAll(".listing-large-card:not(.visible)")),e=ti.timeline();e.to(t,{opacity:1,duration:1.4,stagger:.1,ease:"linear"},0),e.add((function(){t.forEach((function(t){return t.classList.add("visible")}))}))})),r.loadmoreCta=t.querySelector(".load-more"),r.listingW=t.querySelector(".listing-w"),r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&YV(t,e)}(e,t),n=e,(r=[{key:"attach",value:function(){var t;null===(t=this.loadmoreCta)||void 0===t||t.addEventListener("click",this.onLoadmore)}},{key:"detach",value:function(){var t;null===(t=this.loadmoreCta)||void 0===t||t.removeEventListener("click",this.onLoadmore)}}])&&HV(n.prototype,r),i&&HV(n,i),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,i}(Yp);function iQ(t){return iQ="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},iQ(t)}function oQ(t){return function(t){if(Array.isArray(t))return aQ(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return aQ(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return aQ(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function aQ(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function sQ(){sQ=function(){return e};var t,e={},n=Object.prototype,r=n.hasOwnProperty,i=Object.defineProperty||function(t,e,n){t[e]=n.value},o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",s=o.asyncIterator||"@@asyncIterator",l=o.toStringTag||"@@toStringTag";function u(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,n){return t[e]=n}}function c(t,e,n,r){var o=e&&e.prototype instanceof v?e:v,a=Object.create(o.prototype),s=new P(r||[]);return i(a,"_invoke",{value:T(t,n,s)}),a}function d(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}e.wrap=c;var f="suspendedStart",h="suspendedYield",p="executing",m="completed",g={};function v(){}function y(){}function b(){}var _={};u(_,a,(function(){return this}));var w=Object.getPrototypeOf,A=w&&w(w(R([])));A&&A!==n&&r.call(A,a)&&(_=A);var E=b.prototype=v.prototype=Object.create(_);function x(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function S(t,e){function n(i,o,a,s){var l=d(t[i],t,o);if("throw"!==l.type){var u=l.arg,c=u.value;return c&&"object"==iQ(c)&&r.call(c,"__await")?e.resolve(c.__await).then((function(t){n("next",t,a,s)}),(function(t){n("throw",t,a,s)})):e.resolve(c).then((function(t){u.value=t,a(u)}),(function(t){return n("throw",t,a,s)}))}s(l.arg)}var o;i(this,"_invoke",{value:function(t,r){function i(){return new e((function(e,i){n(t,r,e,i)}))}return o=o?o.then(i,i):i()}})}function T(e,n,r){var i=f;return function(o,a){if(i===p)throw Error("Generator is already running");if(i===m){if("throw"===o)throw a;return{value:t,done:!0}}for(r.method=o,r.arg=a;;){var s=r.delegate;if(s){var l=C(s,r);if(l){if(l===g)continue;return l}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(i===f)throw i=m,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);i=p;var u=d(e,n,r);if("normal"===u.type){if(i=r.done?m:h,u.arg===g)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(i=m,r.method="throw",r.arg=u.arg)}}}function C(e,n){var r=n.method,i=e.iterator[r];if(i===t)return n.delegate=null,"throw"===r&&e.iterator.return&&(n.method="return",n.arg=t,C(e,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),g;var o=d(i,e.iterator,n.arg);if("throw"===o.type)return n.method="throw",n.arg=o.arg,n.delegate=null,g;var a=o.arg;return a?a.done?(n[e.resultName]=a.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=t),n.delegate=null,g):a:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,g)}function I(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function k(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function P(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(I,this),this.reset(!0)}function R(e){if(e||""===e){var n=e[a];if(n)return n.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var i=-1,o=function n(){for(;++i<e.length;)if(r.call(e,i))return n.value=e[i],n.done=!1,n;return n.value=t,n.done=!0,n};return o.next=o}}throw new TypeError(iQ(e)+" is not iterable")}return y.prototype=b,i(E,"constructor",{value:b,configurable:!0}),i(b,"constructor",{value:y,configurable:!0}),y.displayName=u(b,l,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===y||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,b):(t.__proto__=b,u(t,l,"GeneratorFunction")),t.prototype=Object.create(E),t},e.awrap=function(t){return{__await:t}},x(S.prototype),u(S.prototype,s,(function(){return this})),e.AsyncIterator=S,e.async=function(t,n,r,i,o){void 0===o&&(o=Promise);var a=new S(c(t,n,r,i),o);return e.isGeneratorFunction(n)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},x(E),u(E,l,"Generator"),u(E,a,(function(){return this})),u(E,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),n=[];for(var r in e)n.push(r);return n.reverse(),function t(){for(;n.length;){var r=n.pop();if(r in e)return t.value=r,t.done=!1,t}return t.done=!0,t}},e.values=R,P.prototype={constructor:P,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(k),!e)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function i(r,i){return s.type="throw",s.arg=e,n.next=r,i&&(n.method="next",n.arg=t),!!i}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],s=a.completion;if("root"===a.tryLoc)return i("end");if(a.tryLoc<=this.prev){var l=r.call(a,"catchLoc"),u=r.call(a,"finallyLoc");if(l&&u){if(this.prev<a.catchLoc)return i(a.catchLoc,!0);if(this.prev<a.finallyLoc)return i(a.finallyLoc)}else if(l){if(this.prev<a.catchLoc)return i(a.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return i(a.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=t,a.arg=e,o?(this.method="next",this.next=o.finallyLoc,g):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),g},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),k(n),g}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var i=r.arg;k(n)}return i}}throw Error("illegal catch attempt")},delegateYield:function(e,n,r){return this.delegate={iterator:R(e),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=t),g}},e}function lQ(t,e,n,r,i,o,a){try{var s=t[o](a),l=s.value}catch(t){return void n(t)}s.done?e(l):Promise.resolve(l).then(r,i)}function uQ(t){return function(){var e=this,n=arguments;return new Promise((function(r,i){var o=t.apply(e,n);function a(t){lQ(o,r,i,a,s,"next",t)}function s(t){lQ(o,r,i,a,s,"throw",t)}a(void 0)}))}}function cQ(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,gQ(r.key),r)}}function dQ(t,e,n){return e=hQ(e),function(t,e){if(e&&("object"===iQ(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,fQ()?Reflect.construct(e,n||[],hQ(t).constructor):e.apply(t,n))}function fQ(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(fQ=function(){return!!t})()}function hQ(t){return hQ=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},hQ(t)}function pQ(t,e){return pQ=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},pQ(t,e)}function mQ(t,e,n){return(e=gQ(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function gQ(t){var e=function(t,e){if("object"!=iQ(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=iQ(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==iQ(e)?e:e+""}function vQ(t,e,n){!function(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}(t,e),e.set(t,n)}function yQ(t,e){return t.get(bQ(t,e))}function bQ(t,e,n){if("function"==typeof t?t===e:t.has(e))return arguments.length<3?e:n;throw new TypeError("Private element is not present on this object")}var _Q=new WeakMap,wQ=new WeakMap,AQ=new WeakMap,EQ=function(t){function e(t,n){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),vQ(r=dQ(this,e,[t,n]),_Q,""),vQ(r,wQ,[]),vQ(r,AQ,void 0),mQ(r,"onResize",(function(){r.isMobile=!r.viewport.medias.desktop,r.listingLoader.style.top="".concat(r.listingW.offsetTop,"px"),r.listingLoader.style.height="".concat(r.listingW.offsetHeight,"px"),r.poemsList.forEach((function(t){r.isMobile?t.hasAttribute("data-lenis-prevent")&&t.removeAttribute("data-lenis-prevent"):t.hasAttribute("data-lenis-prevent")||t.setAttribute("data-lenis-prevent","")}))})),mQ(r,"updateBookFilter",function(){var t=uQ(sQ().mark((function t(e){var n,i,o,a,s,l;return sQ().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e){t.next=16;break}if(n=JSON.parse(e),!(i=r.element.querySelector('[data-book-id="'.concat(n.value,'"]')))){t.next=8;break}o=r.isMobile?0:-105,r.bootstrap.lenis.scrollTo(i,{offset:o}),t.next=16;break;case 8:if(r.filtered){t.next=16;break}return t.next=11,r.call();case 11:a=t.sent,r.listingW.innerHTML=a,r.updateDom(),(s=r.element.querySelector('[data-book-id="'.concat(n.value,'"]')))&&(l=r.isMobile?0:-105,r.bootstrap.lenis.scrollTo(s,{offset:l}));case 16:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),mQ(r,"onLoadmore",uQ(sQ().mark((function t(){var e;return sQ().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r.loadmoreCta.classList.add("load"),t.next=3,r.call();case 3:e=t.sent,r.listingW.innerHTML=e,r.updateDom();case 6:case"end":return t.stop()}}),t)})))),mQ(r,"call",uQ(sQ().mark((function t(){var e,n,i;return sQ().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r.listingLoader.classList.add("active"),null===(e=r.loadmoreCta)||void 0===e||e.classList.add("disabled"),n={action:"david_get_poems",taxonomy:yQ(_Q,r),terms:yQ(wQ,r),books_ordered:r.booksOrdered},t.next=5,fetch(ADMIN_AJAX_URL,{method:"POST",credentials:"include",headers:{"Content-type":"application/x-www-form-urlencoded"},body:new URLSearchParams(n).toString()});case 5:return i=t.sent,r.listingW.querySelector(".endpoint-infos").remove(),r.filtered=!0,t.abrupt("return",i.text());case 9:case"end":return t.stop()}}),t)})))),mQ(r,"updateDom",(function(){r.listingLoader.classList.remove("active"),r.followLinkModule.update(),r.loadmoreCta&&(r.loadmoreCta.classList.remove("load"),r.listingW.querySelectorAll(".book").length>=r.listingW.querySelector(".endpoint-infos").dataset.maxPosts?r.loadmoreCta.style.display="none":(r.loadmoreCta.style.display="block",r.loadmoreCta.classList.remove("disabled"))),r.cards=oQ(r.listingW.querySelectorAll(".book")),r.cards.length>0?r.noResults.style.display="none":(r.noResults.style.display="block",function(t,e,n){t.set(bQ(t,e),n)}(wQ,r,yQ(wQ,r).filter((function(t){return t!==yQ(AQ,r).name}))),yQ(AQ,r).el.classList.remove("selected"))})),mQ(r,"onClickPoem",(function(){r.bootstrap.anchor=document.documentElement.scrollTop})),r.filtersSelector=r.element.querySelector(".custom-select"),r.loadmoreCta=t.querySelector(".load-more"),r.listingW=t.querySelector(".poems-essays-listing"),r.noResults=t.querySelector(".no-results"),r.bookId=t.dataset.bookId||null,r.currentBook=null,r.bookId&&(r.currentBook=t.querySelector('[data-book-id="'.concat(r.bookId,'"]'))),r.listingLoader=t.querySelector(".loader-overlay"),r.booksOrdered=t.dataset.booksOrdered||[],r.filtered=!1,r.isMobile=!r.viewport.medias.desktop,r.poemsList=oQ(r.element.querySelectorAll(".book .right")),r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&pQ(t,e)}(e,t),n=e,(r=[{key:"init",value:function(){this.filtersSelectorComponent=this.components.get(this.filtersSelector),this.cards=oQ(this.listingW.querySelectorAll(".book")),this.cards.forEach((function(t){return t.classList.add("visible")})),this.listingLoader.style.top="".concat(this.listingW.offsetTop,"px"),this.listingLoader.style.height="".concat(this.listingW.offsetHeight,"px")}},{key:"attach",value:function(){var t,e,n,r=this;null===(t=this.filtersSelectorComponent)||void 0===t||t.on("updateFilter",this.updateBookFilter),null===(e=this.loadmoreCta)||void 0===e||e.addEventListener("click",this.onLoadmore),setTimeout((function(){if(r.currentBook&&!r.bootstrap.anchor){var t=r.isMobile?0:-105;r.bootstrap.lenis.scrollTo(r.currentBook,{offset:t})}}),100),null===(n=this.cards)||void 0===n||n.forEach((function(t){var e=oQ(t.querySelectorAll("a"));null==e||e.forEach((function(t){t.addEventListener("click",r.onClickPoem)}))})),this.bootstrap.viewport.on("resize",this.onResize)}},{key:"detach",value:function(){var t,e,n,r=this;null===(t=this.filtersSelectorComponent)||void 0===t||t.off("updateFilter",this.updateBookFilter),null===(e=this.cards)||void 0===e||e.forEach((function(t){var e=oQ(t.querySelectorAll("a"));null==e||e.forEach((function(t){t.removeEventListener("click",r.onClickPoem)}))})),null===(n=this.loadmoreCta)||void 0===n||n.removeEventListener("click",this.onLoadmore),this.bootstrap.viewport.off("resize",this.onResize)}}])&&cQ(n.prototype,r),i&&cQ(n,i),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,i}(Yp);function xQ(t){return xQ="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},xQ(t)}function SQ(){SQ=function(){return e};var t,e={},n=Object.prototype,r=n.hasOwnProperty,i=Object.defineProperty||function(t,e,n){t[e]=n.value},o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",s=o.asyncIterator||"@@asyncIterator",l=o.toStringTag||"@@toStringTag";function u(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,n){return t[e]=n}}function c(t,e,n,r){var o=e&&e.prototype instanceof v?e:v,a=Object.create(o.prototype),s=new P(r||[]);return i(a,"_invoke",{value:T(t,n,s)}),a}function d(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}e.wrap=c;var f="suspendedStart",h="suspendedYield",p="executing",m="completed",g={};function v(){}function y(){}function b(){}var _={};u(_,a,(function(){return this}));var w=Object.getPrototypeOf,A=w&&w(w(R([])));A&&A!==n&&r.call(A,a)&&(_=A);var E=b.prototype=v.prototype=Object.create(_);function x(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function S(t,e){function n(i,o,a,s){var l=d(t[i],t,o);if("throw"!==l.type){var u=l.arg,c=u.value;return c&&"object"==xQ(c)&&r.call(c,"__await")?e.resolve(c.__await).then((function(t){n("next",t,a,s)}),(function(t){n("throw",t,a,s)})):e.resolve(c).then((function(t){u.value=t,a(u)}),(function(t){return n("throw",t,a,s)}))}s(l.arg)}var o;i(this,"_invoke",{value:function(t,r){function i(){return new e((function(e,i){n(t,r,e,i)}))}return o=o?o.then(i,i):i()}})}function T(e,n,r){var i=f;return function(o,a){if(i===p)throw Error("Generator is already running");if(i===m){if("throw"===o)throw a;return{value:t,done:!0}}for(r.method=o,r.arg=a;;){var s=r.delegate;if(s){var l=C(s,r);if(l){if(l===g)continue;return l}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(i===f)throw i=m,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);i=p;var u=d(e,n,r);if("normal"===u.type){if(i=r.done?m:h,u.arg===g)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(i=m,r.method="throw",r.arg=u.arg)}}}function C(e,n){var r=n.method,i=e.iterator[r];if(i===t)return n.delegate=null,"throw"===r&&e.iterator.return&&(n.method="return",n.arg=t,C(e,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),g;var o=d(i,e.iterator,n.arg);if("throw"===o.type)return n.method="throw",n.arg=o.arg,n.delegate=null,g;var a=o.arg;return a?a.done?(n[e.resultName]=a.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=t),n.delegate=null,g):a:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,g)}function I(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function k(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function P(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(I,this),this.reset(!0)}function R(e){if(e||""===e){var n=e[a];if(n)return n.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var i=-1,o=function n(){for(;++i<e.length;)if(r.call(e,i))return n.value=e[i],n.done=!1,n;return n.value=t,n.done=!0,n};return o.next=o}}throw new TypeError(xQ(e)+" is not iterable")}return y.prototype=b,i(E,"constructor",{value:b,configurable:!0}),i(b,"constructor",{value:y,configurable:!0}),y.displayName=u(b,l,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===y||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,b):(t.__proto__=b,u(t,l,"GeneratorFunction")),t.prototype=Object.create(E),t},e.awrap=function(t){return{__await:t}},x(S.prototype),u(S.prototype,s,(function(){return this})),e.AsyncIterator=S,e.async=function(t,n,r,i,o){void 0===o&&(o=Promise);var a=new S(c(t,n,r,i),o);return e.isGeneratorFunction(n)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},x(E),u(E,l,"Generator"),u(E,a,(function(){return this})),u(E,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),n=[];for(var r in e)n.push(r);return n.reverse(),function t(){for(;n.length;){var r=n.pop();if(r in e)return t.value=r,t.done=!1,t}return t.done=!0,t}},e.values=R,P.prototype={constructor:P,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(k),!e)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function i(r,i){return s.type="throw",s.arg=e,n.next=r,i&&(n.method="next",n.arg=t),!!i}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],s=a.completion;if("root"===a.tryLoc)return i("end");if(a.tryLoc<=this.prev){var l=r.call(a,"catchLoc"),u=r.call(a,"finallyLoc");if(l&&u){if(this.prev<a.catchLoc)return i(a.catchLoc,!0);if(this.prev<a.finallyLoc)return i(a.finallyLoc)}else if(l){if(this.prev<a.catchLoc)return i(a.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return i(a.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=t,a.arg=e,o?(this.method="next",this.next=o.finallyLoc,g):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),g},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),k(n),g}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var i=r.arg;k(n)}return i}}throw Error("illegal catch attempt")},delegateYield:function(e,n,r){return this.delegate={iterator:R(e),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=t),g}},e}function TQ(t,e,n,r,i,o,a){try{var s=t[o](a),l=s.value}catch(t){return void n(t)}s.done?e(l):Promise.resolve(l).then(r,i)}function CQ(t){return function(){var e=this,n=arguments;return new Promise((function(r,i){var o=t.apply(e,n);function a(t){TQ(o,r,i,a,s,"next",t)}function s(t){TQ(o,r,i,a,s,"throw",t)}a(void 0)}))}}function IQ(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,MQ(r.key),r)}}function kQ(t,e,n){return e=RQ(e),function(t,e){if(e&&("object"===xQ(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,PQ()?Reflect.construct(e,n||[],RQ(t).constructor):e.apply(t,n))}function PQ(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(PQ=function(){return!!t})()}function RQ(t){return RQ=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},RQ(t)}function OQ(t,e){return OQ=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},OQ(t,e)}function MQ(t){var e=function(t,e){if("object"!=xQ(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=xQ(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==xQ(e)?e:e+""}var LQ=function(t){function e(t,n){var r,i,o,a;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),r=kQ(this,e,[t,n]),i=r,o="onClick",a=CQ(SQ().mark((function t(){var e,n,i,o,a,s;return SQ().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i={action:"david_remove_from_cart",product:r.productKey},null===(e=r.cart)||void 0===e||e.classList.add("loading"),null===(n=r.loader)||void 0===n||n.classList.add("active"),t.next=5,fetch(ADMIN_AJAX_URL,{method:"POST",credentials:"include",headers:{"Content-type":"application/x-www-form-urlencoded"},body:new URLSearchParams(i).toString()});case 5:return o=t.sent,t.next=8,o.json();case 8:"ok"===t.sent.status?jQuery("body").trigger("update_checkout"):(null===(a=r.cart)||void 0===a||a.classList.remove("loading"),null===(s=r.loader)||void 0===s||s.classList.remove("active"));case 10:case"end":return t.stop()}}),t)}))),(o=MQ(o))in i?Object.defineProperty(i,o,{value:a,enumerable:!0,configurable:!0,writable:!0}):i[o]=a,r.productKey=t.dataset.itemKey,r.removeBtn=r.element.querySelector(".remove-product"),r.cart=document.querySelector(".widget-cart"),r.loader=r.cart.querySelector(".loader"),r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&OQ(t,e)}(e,t),n=e,(r=[{key:"attach",value:function(){this.removeBtn.addEventListener("click",this.onClick)}},{key:"detach",value:function(){this.removeBtn.removeEventListener("click",this.onClick)}}])&&IQ(n.prototype,r),i&&IQ(n,i),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,i}(Yp);function DQ(t){return DQ="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},DQ(t)}function NQ(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,BQ(r.key),r)}}function BQ(t){var e=function(t,e){if("object"!=DQ(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=DQ(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==DQ(e)?e:e+""}function jQ(t,e,n){return e=FQ(e),function(t,e){if(e&&("object"===DQ(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,zQ()?Reflect.construct(e,n||[],FQ(t).constructor):e.apply(t,n))}function zQ(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(zQ=function(){return!!t})()}function FQ(t){return FQ=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},FQ(t)}function UQ(t,e){return UQ=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},UQ(t,e)}var qQ=function(t){function e(t,n){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=jQ(this,e,[t,n])).triggerFade=document.querySelector("[data-hide-like]"),r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&UQ(t,e)}(e,t),n=e,(r=[{key:"init",value:function(){ti.timeline({scrollTrigger:{trigger:this.triggerFade,start:"top bottom",endTrigger:"html",end:"bottom top",toggleClass:{targets:[this.element],className:"hidden"}}})}}])&&NQ(n.prototype,r),i&&NQ(n,i),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,i}(Yp);function GQ(t){return GQ="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},GQ(t)}function HQ(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,VQ(r.key),r)}}function VQ(t){var e=function(t,e){if("object"!=GQ(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=GQ(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==GQ(e)?e:e+""}function QQ(t,e,n){return e=YQ(e),function(t,e){if(e&&("object"===GQ(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,WQ()?Reflect.construct(e,n||[],YQ(t).constructor):e.apply(t,n))}function WQ(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(WQ=function(){return!!t})()}function YQ(t){return YQ=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},YQ(t)}function KQ(t,e){return KQ=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},KQ(t,e)}var XQ=function(t){function e(t,n){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=QQ(this,e,[t,n])).date=r.element.querySelector(".order-date"),r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&KQ(t,e)}(e,t),n=e,(r=[{key:"init",value:function(){var t=this.date.textContent.trim(),e=this.formatUserDate(t);e&&(this.date.textContent=e)}},{key:"formatUserDate",value:function(t){if(!t)return"";try{var e=navigator.language||"en-US",n=new Date(t);return new Intl.DateTimeFormat(e,{year:"numeric",month:"numeric",day:"numeric"}).format(n)}catch(t){return""}}},{key:"attach",value:function(){}},{key:"detach",value:function(){}}])&&HQ(n.prototype,r),i&&HQ(n,i),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,i}(Yp);function $Q(t){return $Q="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},$Q(t)}function ZQ(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,JQ(r.key),r)}}function JQ(t){var e=function(t,e){if("object"!=$Q(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=$Q(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==$Q(e)?e:e+""}function tW(t,e,n){return e=nW(e),function(t,e){if(e&&("object"===$Q(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,eW()?Reflect.construct(e,n||[],nW(t).constructor):e.apply(t,n))}function eW(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(eW=function(){return!!t})()}function nW(t){return nW=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},nW(t)}function rW(t,e){return rW=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},rW(t,e)}var iW=function(t){function e(t,n){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=tW(this,e,[t,n])).eventSlug=t.dataset.eventSlug||null,r.currentEvent=null,r.eventSlug&&(r.currentEvent=t.querySelector('[data-event-slug="'.concat(r.eventSlug,'"]'))),r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&rW(t,e)}(e,t),n=e,(r=[{key:"attach",value:function(){var t=this;setTimeout((function(){if(t.currentEvent){var e=t.viewport.medias.desktop?-105:0;t.bootstrap.lenis.scrollTo(t.currentEvent,{offset:e})}}),100)}}])&&ZQ(n.prototype,r),i&&ZQ(n,i),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,i}(Yp);function oW(t,e,n,r){return new(n||(n=Promise))((function(i,o){function a(t){try{l(r.next(t))}catch(t){o(t)}}function s(t){try{l(r.throw(t))}catch(t){o(t)}}function l(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}l((r=r.apply(t,e||[])).next())}))}"function"==typeof SuppressedError&&SuppressedError;const aW=["geforce 320m","geforce 8600","geforce 8600m gt","geforce 8800 gs","geforce 8800 gt","geforce 9400","geforce 9400m g","geforce 9400m","geforce 9600m gt","geforce 9600m","geforce fx go5200","geforce gt 120","geforce gt 130","geforce gt 330m","geforce gtx 285","google swiftshader","intel g41","intel g45","intel gma 4500mhd","intel gma x3100","intel hd 3000","intel q45","legacy","mali-2","mali-3","mali-4","quadro fx 1500","quadro fx 4","quadro fx 5","radeon hd 2400","radeon hd 2600","radeon hd 4670","radeon hd 4850","radeon hd 4870","radeon hd 5670","radeon hd 5750","radeon hd 6290","radeon hd 6300","radeon hd 6310","radeon hd 6320","radeon hd 6490m","radeon hd 6630m","radeon hd 6750m","radeon hd 6770m","radeon hd 6970m","sgx 543","sgx543"];function sW(t){return t.toLowerCase().replace(/.*angle ?\((.+)\)(?: on vulkan [0-9.]+)?$/i,"$1").replace(/\s(\d{1,2}gb|direct3d.+$)|\(r\)| \([^)]+\)$/g,"").replace(/(?:vulkan|opengl) \d+\.\d+(?:\.\d+)?(?: \((.*)\))?/,"$1")}const lW="undefined"==typeof window,uW=(()=>{if(lW)return;const{userAgent:t,platform:e,maxTouchPoints:n}=window.navigator,r=/(iphone|ipod|ipad)/i.test(t),i="iPad"===e||"MacIntel"===e&&n>0&&!window.MSStream;return{isIpad:i,isMobile:/android/i.test(t)||r||i,isSafari12:/Version\/12.+Safari/.test(t),isFirefox:/Firefox/.test(t)}})();class cW extends Error{constructor(t){super(t),Object.setPrototypeOf(this,new.target.prototype)}}const dW=[],fW=[];function hW(t,e){if(t===e)return 0;const n=t;t.length>e.length&&(t=e,e=n);let r=t.length,i=e.length;for(;r>0&&t.charCodeAt(~-r)===e.charCodeAt(~-i);)r--,i--;let o,a=0;for(;a<r&&t.charCodeAt(a)===e.charCodeAt(a);)a++;if(r-=a,i-=a,0===r)return i;let s,l,u=0,c=0,d=0;for(;c<r;)fW[c]=t.charCodeAt(a+c),dW[c]=++c;for(;d<i;)for(o=e.charCodeAt(a+d),s=d++,u=d,c=0;c<r;c++)l=o===fW[c]?s:s+1,s=dW[c],u=dW[c]=s>u?l>u?u+1:l:l>s?s+1:l;return u}function pW(t){return null!=t}const mW=({mobileTiers:t=[0,15,30,60],desktopTiers:e=[0,15,30,60],override:n={},glContext:r,failIfMajorPerformanceCaveat:i=!1,benchmarksURL:o="https://unpkg.com/detect-gpu@5.0.38/dist/benchmarks"}={})=>oW(void 0,void 0,void 0,(function*(){const a={};if(lW)return{tier:0,type:"SSR"};const{isIpad:s=!!(null==uW?void 0:uW.isIpad),isMobile:l=!!(null==uW?void 0:uW.isMobile),screenSize:u=window.screen,loadBenchmarks:c=(t=>oW(void 0,void 0,void 0,(function*(){const e=yield fetch(`${o}/${t}`).then((t=>t.json()));if(parseInt(e.shift().split(".")[0],10)<4)throw new cW("Detect GPU benchmark data is out of date. Please update to version 4x");return e})))}=n;let{renderer:d}=n;const f=(t,e,n,r,i)=>({device:i,fps:r,gpu:n,isMobile:l,tier:t,type:e});let h,p="";if(d)d=sW(d),h=[d];else{const t=r||function(t,e=!1){const n={alpha:!1,antialias:!1,depth:!1,failIfMajorPerformanceCaveat:e,powerPreference:"high-performance",stencil:!1};t&&delete n.powerPreference;const r=window.document.createElement("canvas"),i=r.getContext("webgl",n)||r.getContext("experimental-webgl",n);return null!=i?i:void 0}(null==uW?void 0:uW.isSafari12,i);if(!t)return f(0,"WEBGL_UNSUPPORTED");const e=(null==uW?void 0:uW.isFirefox)?null:t.getExtension("WEBGL_debug_renderer_info");if(d=e?t.getParameter(e.UNMASKED_RENDERER_WEBGL):t.getParameter(t.RENDERER),!d)return f(1,"FALLBACK");p=d,d=sW(d),h=function(t,e,n){return"apple gpu"===e?function(t,e,n){if(!n)return[e];const r=function(t){const e=t.createShader(35633),n=t.createShader(35632),r=t.createProgram();if(!(n&&e&&r))return;t.shaderSource(e,"\n    precision highp float;\n    attribute vec3 aPosition;\n    varying float vvv;\n    void main() {\n      vvv = 0.31622776601683794;\n      gl_Position = vec4(aPosition, 1.0);\n    }\n  "),t.shaderSource(n,"\n    precision highp float;\n    varying float vvv;\n    void main() {\n      vec4 enc = vec4(1.0, 255.0, 65025.0, 16581375.0) * vvv;\n      enc = fract(enc);\n      enc -= enc.yzww * vec4(1.0 / 255.0, 1.0 / 255.0, 1.0 / 255.0, 0.0);\n      gl_FragColor = enc;\n    }\n  "),t.compileShader(e),t.compileShader(n),t.attachShader(r,e),t.attachShader(r,n),t.linkProgram(r),t.detachShader(r,e),t.detachShader(r,n),t.deleteShader(e),t.deleteShader(n),t.useProgram(r);const i=t.createBuffer();t.bindBuffer(34962,i),t.bufferData(34962,new Float32Array([-1,-1,0,3,-1,0,-1,3,0]),35044);const o=t.getAttribLocation(r,"aPosition");t.vertexAttribPointer(o,3,5126,!1,0,0),t.enableVertexAttribArray(o),t.clearColor(1,1,1,1),t.clear(16384),t.viewport(0,0,1,1),t.drawArrays(4,0,3);const a=new Uint8Array(4);return t.readPixels(0,0,1,1,6408,5121,a),t.deleteProgram(r),t.deleteBuffer(i),a.join("")}(t),i="801621810",o="8016218135",a="80162181161",s=(null==uW?void 0:uW.isIpad)?[["a7",a,12],["a8",o,15],["a8x",o,15],["a9",o,15],["a9x",o,15],["a10",o,15],["a10x",o,15],["a12",i,15],["a12x",i,15],["a12z",i,15],["a14",i,15],["m1",i,15]]:[["a7",a,12],["a8",o,12],["a9",o,15],["a10",o,15],["a11",i,15],["a12",i,15],["a13",i,15],["a14",i,15],["a15",i,15],["a16",i,15],["a17",i,15]];let l;return"80162181255"===r?l=s.filter((([,,t])=>t>=14)):(l=s.filter((([,t])=>t===r)),l.length||(l=s)),l.map((([t])=>`apple ${t} gpu`))}(t,e,n):[e]}(t,d,l)}const m=(yield Promise.all(h.map((function(t){var e;return oW(this,void 0,void 0,(function*(){const n=(t=>{const e=l?["adreno","apple","mali-t","mali","nvidia","powervr","samsung"]:["intel","apple","amd","radeon","nvidia","geforce","adreno"];for(const n of e)if(t.includes(n))return n})(t);if(!n)return;const r=`${l?"m":"d"}-${n}${s?"-ipad":""}.json`,i=a[r]=null!==(e=a[r])&&void 0!==e?e:c(r);let o;try{o=yield i}catch(n){if(n instanceof cW)throw n;return}const d=function(t){var e;const n=(t=t.replace(/\([^)]+\)/,"")).match(/\d+/)||t.match(/(\W|^)([A-Za-z]{1,3})(\W|$)/g);return null!==(e=null==n?void 0:n.join("").replace(/\W|amd/g,""))&&void 0!==e?e:""}(t);let f=o.filter((([,t])=>t===d));f.length||(f=o.filter((([e])=>e.includes(t))));const h=f.length;if(0===h)return;const p=t.split(/[.,()\[\]/\s]/g).sort().filter(((t,e,n)=>0===e||t!==n[e-1])).join(" ");let m,[g,,,,v]=h>1?f.map((t=>[t,hW(p,t[2])])).sort((([,t],[,e])=>t-e))[0][0]:f[0],y=Number.MAX_VALUE;const{devicePixelRatio:b}=window,_=u.width*b*u.height*b;for(const t of v){const[e,n]=t,r=e*n,i=Math.abs(_-r);i<y&&(y=i,m=t)}if(!m)return;const[,,w,A]=m;return[y,w,g,A]}))})))).filter(pW).sort((([t=Number.MAX_VALUE,e],[n=Number.MAX_VALUE,r])=>t===n?e-r:t-n));if(!m.length){const t=aW.find((t=>d.includes(t)));return t?f(0,"BLOCKLISTED",t):f(1,"FALLBACK",`${d} (${p})`)}const[,g,v,y]=m[0];if(-1===g)return f(0,"BLOCKLISTED",v,g,y);const b=l?t:e;let _=0;for(let t=0;t<b.length;t++)g>=b[t]&&(_=t);return f(_,"BENCHMARK",v,g,y)}));function gW(t){return gW="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},gW(t)}function vW(){vW=function(){return e};var t,e={},n=Object.prototype,r=n.hasOwnProperty,i=Object.defineProperty||function(t,e,n){t[e]=n.value},o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",s=o.asyncIterator||"@@asyncIterator",l=o.toStringTag||"@@toStringTag";function u(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,n){return t[e]=n}}function c(t,e,n,r){var o=e&&e.prototype instanceof v?e:v,a=Object.create(o.prototype),s=new P(r||[]);return i(a,"_invoke",{value:T(t,n,s)}),a}function d(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}e.wrap=c;var f="suspendedStart",h="suspendedYield",p="executing",m="completed",g={};function v(){}function y(){}function b(){}var _={};u(_,a,(function(){return this}));var w=Object.getPrototypeOf,A=w&&w(w(R([])));A&&A!==n&&r.call(A,a)&&(_=A);var E=b.prototype=v.prototype=Object.create(_);function x(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function S(t,e){function n(i,o,a,s){var l=d(t[i],t,o);if("throw"!==l.type){var u=l.arg,c=u.value;return c&&"object"==gW(c)&&r.call(c,"__await")?e.resolve(c.__await).then((function(t){n("next",t,a,s)}),(function(t){n("throw",t,a,s)})):e.resolve(c).then((function(t){u.value=t,a(u)}),(function(t){return n("throw",t,a,s)}))}s(l.arg)}var o;i(this,"_invoke",{value:function(t,r){function i(){return new e((function(e,i){n(t,r,e,i)}))}return o=o?o.then(i,i):i()}})}function T(e,n,r){var i=f;return function(o,a){if(i===p)throw Error("Generator is already running");if(i===m){if("throw"===o)throw a;return{value:t,done:!0}}for(r.method=o,r.arg=a;;){var s=r.delegate;if(s){var l=C(s,r);if(l){if(l===g)continue;return l}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(i===f)throw i=m,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);i=p;var u=d(e,n,r);if("normal"===u.type){if(i=r.done?m:h,u.arg===g)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(i=m,r.method="throw",r.arg=u.arg)}}}function C(e,n){var r=n.method,i=e.iterator[r];if(i===t)return n.delegate=null,"throw"===r&&e.iterator.return&&(n.method="return",n.arg=t,C(e,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),g;var o=d(i,e.iterator,n.arg);if("throw"===o.type)return n.method="throw",n.arg=o.arg,n.delegate=null,g;var a=o.arg;return a?a.done?(n[e.resultName]=a.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=t),n.delegate=null,g):a:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,g)}function I(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function k(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function P(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(I,this),this.reset(!0)}function R(e){if(e||""===e){var n=e[a];if(n)return n.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var i=-1,o=function n(){for(;++i<e.length;)if(r.call(e,i))return n.value=e[i],n.done=!1,n;return n.value=t,n.done=!0,n};return o.next=o}}throw new TypeError(gW(e)+" is not iterable")}return y.prototype=b,i(E,"constructor",{value:b,configurable:!0}),i(b,"constructor",{value:y,configurable:!0}),y.displayName=u(b,l,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===y||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,b):(t.__proto__=b,u(t,l,"GeneratorFunction")),t.prototype=Object.create(E),t},e.awrap=function(t){return{__await:t}},x(S.prototype),u(S.prototype,s,(function(){return this})),e.AsyncIterator=S,e.async=function(t,n,r,i,o){void 0===o&&(o=Promise);var a=new S(c(t,n,r,i),o);return e.isGeneratorFunction(n)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},x(E),u(E,l,"Generator"),u(E,a,(function(){return this})),u(E,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),n=[];for(var r in e)n.push(r);return n.reverse(),function t(){for(;n.length;){var r=n.pop();if(r in e)return t.value=r,t.done=!1,t}return t.done=!0,t}},e.values=R,P.prototype={constructor:P,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(k),!e)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function i(r,i){return s.type="throw",s.arg=e,n.next=r,i&&(n.method="next",n.arg=t),!!i}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],s=a.completion;if("root"===a.tryLoc)return i("end");if(a.tryLoc<=this.prev){var l=r.call(a,"catchLoc"),u=r.call(a,"finallyLoc");if(l&&u){if(this.prev<a.catchLoc)return i(a.catchLoc,!0);if(this.prev<a.finallyLoc)return i(a.finallyLoc)}else if(l){if(this.prev<a.catchLoc)return i(a.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return i(a.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=t,a.arg=e,o?(this.method="next",this.next=o.finallyLoc,g):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),g},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),k(n),g}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var i=r.arg;k(n)}return i}}throw Error("illegal catch attempt")},delegateYield:function(e,n,r){return this.delegate={iterator:R(e),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=t),g}},e}function yW(t,e,n,r,i,o,a){try{var s=t[o](a),l=s.value}catch(t){return void n(t)}s.done?e(l):Promise.resolve(l).then(r,i)}function bW(t){return function(){var e=this,n=arguments;return new Promise((function(r,i){var o=t.apply(e,n);function a(t){yW(o,r,i,a,s,"next",t)}function s(t){yW(o,r,i,a,s,"throw",t)}a(void 0)}))}}function _W(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,AW(r.key),r)}}function wW(t,e,n){return(e=AW(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function AW(t){var e=function(t,e){if("object"!=gW(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=gW(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==gW(e)?e:e+""}var EW={BAD:0,LOW:1,GOOD:2,HIGH:3},xW=function(){return t=function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),wW(this,"gpu",{name:null,tier:0,type:null,isMobile:!1,fps:0,gpu:"",device:""}),wW(this,"_initialized",!1),wW(this,"_initializing",!1),wW(this,"_initPromise",null)},e=[{key:"init",value:(i=bW(vW().mark((function t(){var e=this;return vW().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!this._initialized){t.next=2;break}return t.abrupt("return");case 2:return this._initializing||(this._initializing=!0,this._initPromise=new Promise((function(t,n){e._init().then((function(){t()}))}))),t.next=5,this._initPromise;case 5:this._initializing=!1,this._initialized=!0;case 7:case"end":return t.stop()}}),t,this)}))),function(){return i.apply(this,arguments)})},{key:"_init",value:(r=bW(vW().mark((function t(){var e;return vW().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,mW();case 2:e=t.sent,this.gpu={name:Object.keys(EW)[e.tier],tier:e.tier,type:e.type,isMobile:e.isMobile,fps:e.fps,gpu:e.gpu,device:e.device},console.log(" Settings"),console.log("-- gpu",this.gpu),console.log("");case 7:case"end":return t.stop()}}),t,this)}))),function(){return r.apply(this,arguments)})}],e&&_W(t.prototype,e),n&&_W(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,n,r,i}();const SW=new xW;function TW(t){return TW="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},TW(t)}function CW(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,IW(r.key),r)}}function IW(t){var e=function(t,e){if("object"!=TW(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=TW(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==TW(e)?e:e+""}var kW=function(){return t=function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)},e=[{key:"addEventListener",value:function(t,e){void 0===this._listeners&&(this._listeners={});var n=this._listeners;void 0===n[t]&&(n[t]=[]),n[t].includes(e)||n[t].push(e)}},{key:"removeEventListener",value:function(t,e){if(void 0!==this._listeners){var n=this._listeners[t];if(void 0!==n){var r=n.indexOf(e);-1!==r&&n.splice(r,1)}}}},{key:"dispatchEvent",value:function(t,e){if(void 0!==this._listeners){var n=this._listeners[t];if(void 0!==n)for(var r=n.slice(0),i=0,o=r.length;i<o;i++)r[i].call(this,e)}}}],e&&CW(t.prototype,e),n&&CW(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,n}(),PW=!n(5606).browser,RW=new URLSearchParams(PW?void 0:window.location.search),OW=!1,MW=!0,LW=null!==RW.get("debug")&&MW,DW=null!==RW.get("production")&&OW;const NW={isDevelopment:LW&&!DW,isProduction:!LW,isServer:PW,isClient:!PW};function BW(t){return BW="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},BW(t)}function jW(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,zW(r.key),r)}}function zW(t){var e=function(t,e){if("object"!=BW(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=BW(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==BW(e)?e:e+""}function FW(t,e,n){return e=qW(e),function(t,e){if(e&&("object"===BW(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,UW()?Reflect.construct(e,n||[],qW(t).constructor):e.apply(t,n))}function UW(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(UW=function(){return!!t})()}function qW(t){return qW=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},qW(t)}function GW(t,e){return GW=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},GW(t,e)}const HW=new(function(t){function e(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(t=FW(this,e))._bindHandlers(),t._setupEventListeners(),t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&GW(t,e)}(e,t),n=e,(r=[{key:"destroy",value:function(){this._removeEventListeners()}},{key:"_bindHandlers",value:function(){this._visibilityChangeHandler=this._visibilityChangeHandler.bind(this)}},{key:"_setupEventListeners",value:function(){document.addEventListener(this._getChangeEvent(),this._visibilityChangeHandler,!1)}},{key:"_removeEventListeners",value:function(){document.removeEventListener(this._getChangeEvent(),this._visibilityChangeHandler,!1)}},{key:"_getChangeEvent",value:function(){if(NW.isClient){if(void 0!==document.hidden)return"visibilitychange";if(void 0!==document.msHidden)return"msvisibilitychange";if(void 0!==document.webkitHidden)return"webkitvisibilitychange"}}},{key:"_getHiddenEvent",value:function(){if(NW.isClient){if(void 0!==document.hidden)return"hidden";if(void 0!==document.msHidden)return"msHidden";if(void 0!==document.webkitHidden)return"webkitHidden"}}},{key:"_visibilityChangeHandler",value:function(){this.dispatchEvent("change",{isHidden:document[this._getHiddenEvent()]})}}])&&jW(n.prototype,r),i&&jW(n,i),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,i}(kW));function VW(t){return VW="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},VW(t)}function QW(){QW=function(){return e};var t,e={},n=Object.prototype,r=n.hasOwnProperty,i=Object.defineProperty||function(t,e,n){t[e]=n.value},o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",s=o.asyncIterator||"@@asyncIterator",l=o.toStringTag||"@@toStringTag";function u(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,n){return t[e]=n}}function c(t,e,n,r){var o=e&&e.prototype instanceof v?e:v,a=Object.create(o.prototype),s=new P(r||[]);return i(a,"_invoke",{value:T(t,n,s)}),a}function d(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}e.wrap=c;var f="suspendedStart",h="suspendedYield",p="executing",m="completed",g={};function v(){}function y(){}function b(){}var _={};u(_,a,(function(){return this}));var w=Object.getPrototypeOf,A=w&&w(w(R([])));A&&A!==n&&r.call(A,a)&&(_=A);var E=b.prototype=v.prototype=Object.create(_);function x(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function S(t,e){function n(i,o,a,s){var l=d(t[i],t,o);if("throw"!==l.type){var u=l.arg,c=u.value;return c&&"object"==VW(c)&&r.call(c,"__await")?e.resolve(c.__await).then((function(t){n("next",t,a,s)}),(function(t){n("throw",t,a,s)})):e.resolve(c).then((function(t){u.value=t,a(u)}),(function(t){return n("throw",t,a,s)}))}s(l.arg)}var o;i(this,"_invoke",{value:function(t,r){function i(){return new e((function(e,i){n(t,r,e,i)}))}return o=o?o.then(i,i):i()}})}function T(e,n,r){var i=f;return function(o,a){if(i===p)throw Error("Generator is already running");if(i===m){if("throw"===o)throw a;return{value:t,done:!0}}for(r.method=o,r.arg=a;;){var s=r.delegate;if(s){var l=C(s,r);if(l){if(l===g)continue;return l}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(i===f)throw i=m,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);i=p;var u=d(e,n,r);if("normal"===u.type){if(i=r.done?m:h,u.arg===g)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(i=m,r.method="throw",r.arg=u.arg)}}}function C(e,n){var r=n.method,i=e.iterator[r];if(i===t)return n.delegate=null,"throw"===r&&e.iterator.return&&(n.method="return",n.arg=t,C(e,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),g;var o=d(i,e.iterator,n.arg);if("throw"===o.type)return n.method="throw",n.arg=o.arg,n.delegate=null,g;var a=o.arg;return a?a.done?(n[e.resultName]=a.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=t),n.delegate=null,g):a:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,g)}function I(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function k(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function P(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(I,this),this.reset(!0)}function R(e){if(e||""===e){var n=e[a];if(n)return n.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var i=-1,o=function n(){for(;++i<e.length;)if(r.call(e,i))return n.value=e[i],n.done=!1,n;return n.value=t,n.done=!0,n};return o.next=o}}throw new TypeError(VW(e)+" is not iterable")}return y.prototype=b,i(E,"constructor",{value:b,configurable:!0}),i(b,"constructor",{value:y,configurable:!0}),y.displayName=u(b,l,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===y||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,b):(t.__proto__=b,u(t,l,"GeneratorFunction")),t.prototype=Object.create(E),t},e.awrap=function(t){return{__await:t}},x(S.prototype),u(S.prototype,s,(function(){return this})),e.AsyncIterator=S,e.async=function(t,n,r,i,o){void 0===o&&(o=Promise);var a=new S(c(t,n,r,i),o);return e.isGeneratorFunction(n)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},x(E),u(E,l,"Generator"),u(E,a,(function(){return this})),u(E,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),n=[];for(var r in e)n.push(r);return n.reverse(),function t(){for(;n.length;){var r=n.pop();if(r in e)return t.value=r,t.done=!1,t}return t.done=!0,t}},e.values=R,P.prototype={constructor:P,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(k),!e)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function i(r,i){return s.type="throw",s.arg=e,n.next=r,i&&(n.method="next",n.arg=t),!!i}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],s=a.completion;if("root"===a.tryLoc)return i("end");if(a.tryLoc<=this.prev){var l=r.call(a,"catchLoc"),u=r.call(a,"finallyLoc");if(l&&u){if(this.prev<a.catchLoc)return i(a.catchLoc,!0);if(this.prev<a.finallyLoc)return i(a.finallyLoc)}else if(l){if(this.prev<a.catchLoc)return i(a.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return i(a.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=t,a.arg=e,o?(this.method="next",this.next=o.finallyLoc,g):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),g},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),k(n),g}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var i=r.arg;k(n)}return i}}throw Error("illegal catch attempt")},delegateYield:function(e,n,r){return this.delegate={iterator:R(e),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=t),g}},e}function WW(t,e,n,r,i,o,a){try{var s=t[o](a),l=s.value}catch(t){return void n(t)}s.done?e(l):Promise.resolve(l).then(r,i)}function YW(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,KW(r.key),r)}}function KW(t){var e=function(t,e){if("object"!=VW(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=VW(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==VW(e)?e:e+""}var XW=function(){return t=function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._tracks={},this._isMuted=!0,this._wasMuted=!1,this.soundEl=document.querySelector(".xp-section .sound");var e=[].slice.call(document.querySelectorAll(".xp-assets audio"));this._audios=e.map((function(t){return t.volume=0,{$el:t,id:t.className,loaded:!1}})),this._currentThemeId="loop-main",this._bindHandlers(),this._setupEventListeners()},e=[{key:"destroy",value:function(){this._removeEventListeners()}},{key:"muted",get:function(){return this._isMuted}},{key:"currentTheme",get:function(){var t=this;return this._audios.find((function(e){return e.id===t._currentThemeId}))}},{key:"load",value:(r=function(t){return function(){var e=this,n=arguments;return new Promise((function(r,i){var o=t.apply(e,n);function a(t){WW(o,r,i,a,s,"next",t)}function s(t){WW(o,r,i,a,s,"throw",t)}a(void 0)}))}}(QW().mark((function t(){var e=this;return QW().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Promise.all(this._audios.map((function(t,n){return new Promise((function(r,i){t.$el.addEventListener("canplaythrough",(function t(i){i.currentTarget.removeEventListener("canplaythrough",t),e._audios[n].loaded=!0,r(e._audios[n])})),t.$el.load()}))})));case 2:case"end":return t.stop()}}),t,this)}))),function(){return r.apply(this,arguments)})},{key:"start",value:function(){var t=this;ti.timeline().add((function(){t.soundEl.classList.remove("hidden")}),1.5)}},{key:"toggleMute",value:function(){this._isMuted?this.unmute():this.mute()}},{key:"mute",value:function(){var t,e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this._isMuted||(this._isMuted=!0,this.soundEl.classList.toggle("is-off",this._isMuted),this._fadeAudio(null===(t=this.currentTheme)||void 0===t?void 0:t.id,!1,e))}},{key:"unmute",value:function(){var t;this._isMuted&&(this._isMuted=!1,this.soundEl.classList.toggle("is-off",this._isMuted),this._fadeAudio(null===(t=this.currentTheme)||void 0===t?void 0:t.id,!0))}},{key:"switchThemeTo",value:function(t){var e,n=this._audios.find((function(e){return e.id===t}));n&&(this._fadeAudio(null===(e=this.currentTheme)||void 0===e?void 0:e.id,!1),this._fadeAudio(n.id,!0),this._currentThemeId=n.id)}},{key:"playSound",value:function(t){if(!this._isMuted){var e=this._audios.find((function(e){return e.id===t}));if(e){var n=e.$el.cloneNode(!0);n.currentTime=0,n.volume=1,n.play()}}}},{key:"_fadeAudio",value:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this._isMuted,r=this._audios.find((function(e){return e.id===t}));if(r){var i=e&&!this._isMuted?1:0;n?(r.$el.volume=i,e&&!this._isMuted?r.$el.play():r.$el.pause()):(e&&!this._isMuted&&r.$el.play(),ti.killTweensOf(r.$el),ti.to(r.$el,{duration:.8,volume:i,ease:"sine.inOut",onComplete:function(){e||r.$el.pause()}}))}}},{key:"_bindHandlers",value:function(){this._firstTrigger=this._firstTrigger.bind(this),this._visibilityChangeHandler=this._visibilityChangeHandler.bind(this),this.toggleMute=this.toggleMute.bind(this)}},{key:"_setupEventListeners",value:function(){document.addEventListener("click",this._firstTrigger),HW.addEventListener("change",this._visibilityChangeHandler)}},{key:"_removeEventListeners",value:function(){document.removeEventListener("click",this._firstTrigger),this.soundEl.removeEventListener("click",this.toggleMute),HW.removeEventListener("change",this._visibilityChangeHandler)}},{key:"_firstTrigger",value:function(){var t=this;document.removeEventListener("click",this._firstTrigger),this.soundEl.addEventListener("click",this.toggleMute),this.soundEl.style.pointerEvents="all",this.load().then((function(){t.toggleMute()}))}},{key:"_visibilityChangeHandler",value:function(t){t.isHidden?this.mute(!1):this._wasMuted||this.unmute()}}],e&&YW(t.prototype,e),n&&YW(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,n,r}();const $W=Math.PI/180;Math.PI;function ZW(t,e,n){return(1-n)*t+n*e}function JW(t){return t*$W}function tY(t,e,n){return e=nY(e),function(t,e){if(e&&("object"===iY(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,eY()?Reflect.construct(e,n||[],nY(t).constructor):e.apply(t,n))}function eY(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(eY=function(){return!!t})()}function nY(t){return nY=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},nY(t)}function rY(t,e){return rY=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},rY(t,e)}function iY(t){return iY="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},iY(t)}function oY(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function aY(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,lY(r.key),r)}}function sY(t,e,n){return e&&aY(t.prototype,e),n&&aY(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function lY(t){var e=function(t,e){if("object"!=iY(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=iY(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==iY(e)?e:e+""}var uY=function(){return sY((function t(){oY(this,t),this.data={},this.listeners={},this.fireAtStart={},this.instances=[],this.globals={}}),[{key:"on",value:function(t,e){this.listeners[t]=this.listeners[t]||[],this.listeners[t].push(e)}},{key:"off",value:function(t,e){t in this.listeners!=!1&&this.listeners[t].splice(this.listeners[t].indexOf(e),1)}},{key:"register",value:function(t){for(var e in this.instances.push(t),this.fireAtStart)this.fireMethod(t,e)}},{key:"unregister",value:function(t){var e=this.instances.indexOf(t);e>-1&&this.instances.splice(e,1)}},{key:"nameToMethod",value:function(t){return"on".concat(t.charAt(0).toUpperCase()+t.slice(1))}},{key:"fireMethod",value:function(t,e){var n=t[this.nameToMethod(e)];"function"==typeof n&&n.call(t,this.data[e])}},{key:"trigger",value:function(t){var e=this,n=t.name,r=t.fireAtStart,i=void 0!==r&&r,o=t.log,a=void 0!==o&&o,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this.data[n]=s,i&&(this.fireAtStart[n]=!0),a&&console.log(" ".concat(n,"  ").concat(s)),n in this.listeners)for(var l=0;l<this.listeners[n].length;l++)this.listeners[n][l].call(this,s);this.instances.forEach((function(t){return e.fireMethod(t,n)}))}},{key:"registerGlobal",value:function(t,e){this.globals["$".concat(t)]=e}}])}(),cY=new uY,dY=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:sY((function t(){oY(this,t)}));return function(t){function e(){var t,n;oY(this,e);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return n=tY(this,e,[].concat(i)),Object.assign(n,cY.globals),n._args=i,n.init&&(t=n).init.apply(t,i),cY.register(n),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&rY(t,e)}(e,t),sY(e,[{key:"destroy",value:function(){cY.unregister(this)}}])}(t)};const fY=cY;var hY,pY="SHOW_OFFER",mY="HIDE_OFFER",gY=new URLSearchParams(null===(hY=window)||void 0===hY||null===(hY=hY.location)||void 0===hY?void 0:hY.search),vY=gY.has("debug"),yY=gY.get("view"),bY=gY.get("overlay"),_Y=gY.has("noAnim"),wY=gY.has("noIntro"),AY=gY.has("webgl"),EY=gY.has("skipLoader"),xY=gY.has("skipXp"),SY=gY.has("stats"),TY=gY.has("remindScrollY"),CY=gY.get("focusPaper"),IY=gY.has("debugTextures"),kY=gY.has("debugAtlas"),PY=(gY.has("debugStencil"),gY.has("onlyPainting"));function RY(t){return RY="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},RY(t)}function OY(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,MY(r.key),r)}}function MY(t){var e=function(t,e){if("object"!=RY(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=RY(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==RY(e)?e:e+""}function LY(t,e,n){return e=BY(e),DY(t,NY()?Reflect.construct(e,n||[],BY(t).constructor):e.apply(t,n))}function DY(t,e){if(e&&("object"===RY(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function NY(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(NY=function(){return!!t})()}function BY(t){return BY=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},BY(t)}function jY(t,e){return jY=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},jY(t,e)}const zY=new(function(t){function e(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),t=LY(this,e),NW.isServer?DY(t):(t._innerWidth=null,t._innerHeight=null,t._outerHeight=null,t._fullWidth=null,t._fullHeight=null,t._dpr=1,t._maxDpr=1,t._innerGhostElement=t._createGhostElement(),t._bindHandlers(),t._setupEventListeners(),t._updateValues(),SW.init().then((function(){t._maxDpr=SW.gpu.tier<=1?1:1.5,t._updateValues()})),t)}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&jY(t,e)}(e,t),n=e,(r=[{key:"dimensions",get:function(){return{innerWidth:this._innerWidth,innerHeight:this._innerHeight,outerHeight:this._outerHeight,fullWidth:this._fullWidth,fullHeight:this._fullHeight,renderWidth:this._innerWidth*this._dpr,renderHeight:this._innerHeight*this._dpr,dpr:this._dpr}}},{key:"innerWidth",get:function(){return this._innerWidth}},{key:"innerHeight",get:function(){return this._innerHeight}},{key:"fullWidth",get:function(){return this._fullWidth}},{key:"fullHeight",get:function(){return this._fullHeight}},{key:"dpr",get:function(){return this._dpr}},{key:"triggerResize",value:function(){this._updateValues(),this._dispatchResizeEvent()}},{key:"_bindHandlers",value:function(){this._windowResizeHandler=this._windowResizeHandler.bind(this)}},{key:"_setupEventListeners",value:function(){window.addEventListener(this._getResizeEvent(),this._windowResizeHandler)}},{key:"_getResizeEvent",value:function(){return"resize"}},{key:"_createGhostElement",value:function(){var t=document.createElement("div");return t.style.width="100%",t.style.height="100vh",t.style.position="absolute",t.style.top=0,t.style.left=0,t.style.pointerEvents="none",t}},{key:"_updateInnerDimensions",value:function(){document.body.appendChild(this._innerGhostElement),this._fullWidth=this._innerGhostElement.offsetWidth,this._fullHeight=this._innerGhostElement.offsetHeight,document.body.removeChild(this._innerGhostElement)}},{key:"_updateFullDimensions",value:function(){this._innerWidth=window.innerWidth,this._innerHeight=window.innerHeight,this._outerHeight=window.outerHeight}},{key:"_updateDPR",value:function(){this._dpr=Math.min(window.devicePixelRatio,this._maxDpr)}},{key:"_dispatchResizeEvent",value:function(){this.dispatchEvent("resize",{innerWidth:this._innerWidth,innerHeight:this._innerHeight,fullWidth:this._fullWidth,fullHeight:this._fullHeight,dpr:this._dpr})}},{key:"_debounce",value:function(){var t=this;this._debounceTimeout&&clearTimeout(this._debounceTimeout),this._debounceTimeout=setTimeout((function(){t._updateValues(),t._dispatchResizeEvent()}),250)}},{key:"_updateValues",value:function(){this._updateInnerDimensions(),this._updateFullDimensions(),this._updateDPR()}},{key:"_windowResizeHandler",value:function(){this._debounce()}}])&&OY(n.prototype,r),i&&OY(n,i),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,i}(kW));function FY(t){return FY="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},FY(t)}function UY(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,WY(r.key),r)}}function qY(t,e,n){return e=HY(e),function(t,e){if(e&&("object"===FY(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,GY()?Reflect.construct(e,n||[],HY(t).constructor):e.apply(t,n))}function GY(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(GY=function(){return!!t})()}function HY(t){return HY=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},HY(t)}function VY(t,e){return VY=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},VY(t,e)}function QY(t,e,n){return(e=WY(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function WY(t){var e=function(t,e){if("object"!=FY(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=FY(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==FY(e)?e:e+""}var YY=function(t){function e(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return QY(t=qY(this,e,[].concat(r)),"_height",void 0),QY(t,"_scroll",0),QY(t,"_coefLerp",.07),QY(t,"progress",0),QY(t,"targetProgress",0),QY(t,"sectionProgress",0),QY(t,"targetSectionProgress",0),QY(t,"_firstScrollY",0),QY(t,"_textSection",void 0),QY(t,"handleScroll",(function(){t._prevScroll=t._scroll||0,t._scroll=window.scrollY,t.targetProgress=t._scroll/(t._textHeight+t._advantagesHeight),t.targetSectionProgress=t._scroll/t._textHeight,t.scrollDir=t._prevScroll<=t._scroll?1:-1})),QY(t,"resize",(function(){})),QY(t,"handleRaf",(function(){t.progress=ZW(t.progress,t.targetProgress,t._coefLerp),t.sectionProgress=ZW(t.sectionProgress,t.targetSectionProgress,t._coefLerp);var e=-.15*innerHeight;t._scroll-t._height>e&&"SHOW_OFFER"!==t.state?(t.state="SHOW_OFFER",t.dispatchEvent(pY)):t._scroll-t._height<e&&"SHOW_TEXT"!==t.state&&(t.state="SHOW_TEXT",t.dispatchEvent(mY)),t.progress.toFixed(5)!==t.targetProgress.toFixed(5)&&(t._dispatchScrollEvent(),TY&&function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"scrollManager";try{localStorage.setItem(e,JSON.stringify(t))}catch(t){}}({scrollY:t._scroll}))})),t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&VY(t,e)}(e,t),n=e,r=[{key:"scroll",get:function(){return this._scroll}},{key:"height",get:function(){return this._height}},{key:"init",value:function(t){var e=this;if(this._textSection=document.body.querySelector(".xp-section"),this._textElement=document.body.querySelector(".xp-text-w"),this._advantagesSection=document.body.querySelector(".advantages-section"),this._computeScrollHeight(),TY){var n=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"scrollManager";try{return JSON.parse(localStorage.getItem(t))}catch(t){}}();null!=n&&(this._firstScrollY=n.scrollY)}0!==this._firstScrollY&&setTimeout((function(){t.lenis.scrollTo(e._firstScrollY,{duration:0})}),500),this.state="SHOW_TEXT",this.events(!0)}},{key:"_computeScrollHeight",value:function(){this._textHeight=this._textElement.offsetHeight,this._advantagesHeight=this._advantagesSection.offsetHeight,this._height=this._textHeight,this._fullHeight=document.querySelector("body").offsetHeight}},{key:"events",value:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],e=t?"add":"remove";ti.ticker[e](this.handleRaf);var n=t?"addEventListener":"removeEventListener";window[n]("scroll",this.handleScroll,{passive:!0}),zY[n]("resize",this.resize)}},{key:"syncScroll",value:function(){this.handleScroll(),this.progress=this.targetProgress,this.sectionProgress=this.targetSectionProgress,this._dispatchScrollEvent()}},{key:"_dispatchScrollEvent",value:function(){this.dispatchEvent("scroll",{progress:this.progress}),fY.trigger({name:"scroll",fireAtStart:!1},{progress:this.progress,scroll:this._scroll})}},{key:"scrollToProgress",value:function(t){var e=t*this._height;this.targetProgress=t,this.progress=t,window.scrollTo(0,e)}},{key:"destroy",value:function(){document.body.style.height="",this.events(!1)}}],r&&UY(n.prototype,r),i&&UY(n,i),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,i}(kW);const KY=new YY;var XY=n(4100),$Y=n(4204),ZY=n(8712);function JY(t){return JY="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},JY(t)}function tK(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,eK(r.key),r)}}function eK(t){var e=function(t,e){if("object"!=JY(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=JY(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==JY(e)?e:e+""}function nK(t,e,n){return e=iK(e),function(t,e){if(e&&("object"===JY(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,rK()?Reflect.construct(e,n||[],iK(t).constructor):e.apply(t,n))}function rK(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(rK=function(){return!!t})()}function iK(t){return iK=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},iK(t)}function oK(t,e){return oK=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},oK(t,e)}var aK=function(t){function e(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(t=nK(this,e))._tabs=null,t._isHelpersVisible=!1,t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&oK(t,e)}(e,t),n=e,r=[{key:"init",value:function(){this._pane=this._createPane()}},{key:"destroy",value:function(){this._pane.dispose()}},{key:"isHelpersVisible",get:function(){return this._isHelpersVisible},set:function(t){this._isHelpersVisible=t,this.dispatchEvent("helpers-visible",t)}},{key:"pane",get:function(){return this._pane}},{key:"addTab",value:function(t){this._tabs||(this._tabs=this._createTabs()),this._tabs.addPage({title:t}),this._removeTabPlaceholder()}},{key:"gotoTab",value:function(t){this._tabs.pages.forEach((function(e){e.title===t&&(e.selected=!0)}))}},{key:"removeTabs",value:function(){this._tabs.dispose(),this._tabs=null}},{key:"addFolder",value:function(t){var e,n=t.tab,r=JSON.parse(localStorage.getItem("debugger-folder-".concat(t.title,"-expanded")));return t.expanded=null!==r&&r,(e=n?this._getTab(n).addFolder(t):this._pane.addFolder(t)).on("fold",(function(t){var e=t.expanded,n=t.target;localStorage.setItem("debugger-folder-".concat(n.title,"-expanded"),e)})),e}},{key:"_createPane",value:function(){var t=document.createElement("style");t.appendChild(document.createTextNode(".tweakpane {\n    z-index: 100;\n\n    position: fixed;\n    top: 0;\n    right: 0;\n\n    width: 280px;\n    max-height: 100vh;\n    overflow: auto;\n}\n\n/* Tweakpane style override */\n.tp-fldv_c > .tp-cntv {\n    margin-left: 0 !important;\n}\n\n.tp-tabv_c .tp-brkv > .tp-cntv {\n    margin-left: 0 !important;\n}")),document.head.appendChild(t);var e=document.createElement("div");e.classList.add("tweakpane"),document.body.appendChild(e);var n=new XY.Pane({title:"Debugger",container:document.querySelector(".tweakpane"),expanded:JSON.parse(localStorage.getItem("debugger-expanded"))}).on("fold",(function(t){var e=t.expanded;localStorage.setItem("debugger-expanded",e)}));return n.registerPlugin($Y),n.registerPlugin(ZY),n}},{key:"_createTabs",value:function(){var t=this;this._isTabPlaceholderRemoved=!1;var e=this._pane.addTab({pages:[{title:""}]});return e.on("select",(function(e){t.dispatchEvent("tab:change",e.target.pages[e.index].title)})),e}},{key:"_removeTabPlaceholder",value:function(){this._isTabPlaceholderRemoved||(this._tabs.removePage(0),this._isTabPlaceholderRemoved=!0)}},{key:"_getTab",value:function(t){for(var e=this._tabs.pages,n=0,r=e.length;n<r;n++)if(e[n].title===t)return e[n];return null}}],r&&tK(n.prototype,r),i&&tK(n,i),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,i}(kW),sK=null;NW.isClient&&NW.isDevelopment&&(sK=new aK);const lK=sK;function uK(t){return uK="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},uK(t)}function cK(t){return(cK="function"==typeof Symbol&&"symbol"==uK(Symbol.iterator)?function(t){return uK(t)}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":uK(t)})(t)}function dK(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function fK(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function hK(t,e,n){return e&&fK(t.prototype,e),n&&fK(t,n),t}function pK(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function mK(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function gK(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&yK(t,e)}function vK(t){return(vK=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function yK(t,e){return(yK=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function bK(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=vK(t);if(e){var i=vK(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return function(t,e){return!e||"object"!=uK(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}(this,n)}}var _K=function(){function t(){dK(this,t)}return hK(t,[{key:"addEventListener",value:function(t,e){void 0===this._listeners&&(this._listeners={});var n=this._listeners;void 0===n[t]&&(n[t]=[]),n[t].includes(e)||n[t].push(e)}},{key:"removeEventListener",value:function(t,e){if(void 0!==this._listeners){var n=this._listeners[t];if(void 0!==n){var r=n.indexOf(e);-1!==r&&n.splice(r,1)}}}},{key:"dispatchEvent",value:function(t,e){if(void 0!==this._listeners){var n=this._listeners[t];if(void 0!==n)for(var r=n.slice(0),i=0,o=r.length;i<o;i++)r[i].call(this,e)}}}]),t}();function wK(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];if(e.length<2||"object"!==cK(e[0]))throw new Error("Function expects object, method, method etc.");for(var r=e.shift(),i=e,o=0,a=i.length;o<a;o++){var s=i[o];r[s]=r[s].bind(r)}}var AK=function(t){gK(n,_K);var e=bK(n);function n(){var t;return dK(this,n),(t=e.call(this))._progress=0,t._resourcesToPreload=[],t._preloadedResources=0,t._bindAll(),t}return hK(n,[{key:"add",value:function(t){for(var e=t.resources,r=t.namespace,i=t.preload,o=0;o<e.length;o++){var a=Object.assign({},e[o]);r&&(a.namespace&&console.warn('Resource Loader: resource namespace "'.concat(a.namespace,'" will override the original name space for resource "').concat(a.name,'"')),a.namespace=r),void 0!==i&&void 0===a.preload&&(a.preload=i),void 0===a.preload&&(a.preload=n.preloadByDefault),n.resources.push(a)}return n.resources}},{key:"preload",value:function(){var t=[],e=n.resources.filter((function(t){return t.preload}));this._preloadStartHandler(e);for(var r=0,i=e.length;r<i;r++){var o=n.loadResource(e[r]);t.push(o),o.then(this._preloadProgressHandler)}return Promise.all(t).then(this._preloadCompleteHandler,this._preloadErrorHandler)}},{key:"destroy",value:function(){n.cache=[],n.loaders={},n.resources=[],this._progress=null,this._resourcesToPreload=null,this._preloadedResources=null}},{key:"_bindAll",value:function(){wK(this,"_preloadCompleteHandler","_preloadProgressHandler","_preloadErrorHandler")}},{key:"_preloadStartHandler",value:function(t){this._resourcesToPreload=t,this.dispatchEvent("start",this._resourcesToPreload)}},{key:"_preloadProgressHandler",value:function(t){this._preloadedResources++,this._progress=this._preloadedResources/this._resourcesToPreload.length,this.dispatchEvent("progress",this._progress)}},{key:"_preloadCompleteHandler",value:function(t){this.dispatchEvent("complete",t)}},{key:"_preloadErrorHandler",value:function(){console.error("Resource Loader : Something went wrong while preloading resources")}}],[{key:"clearResources",value:function(){n.cache=[],n.resources=[]}},{key:"load",value:function(t){return this.loadResourceByName(t.name,t.path)}},{key:"get",value:function(t){return this.getResourceByName(t).data}},{key:"registerLoader",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};this.loaders[e]=new t(function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?mK(Object(n),!0).forEach((function(e){pK(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):mK(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({type:e},n))}},{key:"getLoader",value:function(t){if(!this.loaders[t])throw new Error('Resource Loader: No loader is available for type "'.concat(t,'"'));return this.loaders[t]}},{key:"registerWorker",value:function(t){this.worker=t}},{key:"loadResourceByName",value:function(t,e){var n=this;return new Promise((function(r,i){for(var o=0,a=n.cache.length;o<a;o++)if(n.cache[o].path===e)return void r(n.cache[o].data);for(var s=null,l=0;l<n.resources.length;l++)n.resources[l].name===t&&(s=n.resources[l]);s||i(new Error("Resource Loader: Resource with name '".concat(t,"' was not found"))),n.loadResource(s).then((function(){r(s.data)}),(function(){i(new Error('Resource Loader : failing to get the resource "'.concat(t,'"')))}))}))}},{key:"getResourceByName",value:function(t){for(var e=0,n=this.cache.length;e<n;e++)if(this.cache[e].name===t)return this.cache[e];throw new Error("Resource Loader: Resource with name '".concat(t,"' was not found"))}},{key:"loadResource",value:function(t){var e=this;if(!t.name)throw new Error("Resource name should be defined");var n=this.loaders[t.type];if(!n)throw new Error('Resource Loader: No loader is available for type "'.concat(t.type,'"'));if(!t.path)throw new Error('Resource Loader: Could not find resource path for "'.concat(t.name,'"'));var r=this.resolvePath(t.path),i=n.load({path:r,name:t.name,type:t.type,basePath:this.basePath,options:t.options});return i.then((function(n){t.data=n;for(var r=0,i=e.cache.length;r<i;r++)if(e.cache[r].name===t.name)return;e.cache.push(t)})),i}},{key:"resolvePath",value:function(t){return function(t){return new RegExp("^(?:[a-z]+:)?//","i").test(t)}(t)?t:"".concat(this.basePath).concat(t)}},{key:"isResourceAdded",value:function(t){for(var e=0;e<n.resources.length;e++)if(n.resources[e].type===t.type&&(n.resources[e].name===t.name||n.resources[e].path===t.path))return!0}}]),n}();pK(AK,"resources",[]),pK(AK,"cache",[]),pK(AK,"basePath",""),pK(AK,"loaders",{}),pK(AK,"worker",null),pK(AK,"preloadByDefault",!1);var EK=function(t){gK(n,_K);var e=bK(n);function n(){var t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return dK(this,n),(t=e.call(this))._progress=0,t._preloadedResources=0,t._isComplete=!1,t._name=r.name,t._namespace=r.namespace,t._resources=t._setupResources(),t._bindAll(),t}return hK(n,[{key:"resources",get:function(){return this._resources}},{key:"isComplete",get:function(){return this._isComplete}},{key:"get",value:function(t){for(var e=0;e<this._resources.length;e++)if(this._resources[e].name===t)return this._resources[e].data;console.error('Resource manager "'.concat(this._namespace,'" : Couln\'t find resource with name "').concat(t,'"'))}},{key:"add",value:function(t){Array.isArray(t)?this._addMultiple(t):this._isResourceAdded(t)?console.warn('Resource manager "'.concat(this._namespace,'" : Resource with same name or path has already been added for "').concat(t.name,'"')):(this._resources.push(t),AK.resources.push(t))}},{key:"addByName",value:function(t){if(Array.isArray(t))this._addByNames(t);else{for(var e=null,n=0;n<AK.resources.length;n++){var r=AK.resources[n];if(t===r.name){if(!this._isResourceAdded(r))return this._resources.push(r),void(e=r);console.warn('Resource manager "'.concat(this._namespace,'" : Resource with name "').concat(r.name,'" has already been added')),e=void 0}}null===e&&console.warn('Resource manager "'.concat(this._namespace,'" : Could not find any resource with name "').concat(t,'"'))}}},{key:"load",value:function(){var t=[];this._preloadStartHandler();for(var e=0;e<this._resources.length;e++){var n=this._resources[e],r=AK.load(n);r.then(this._preloadProgressHandler,this._preloadErrorHandler),t.push(r)}return Promise.all(t).then(this._preloadCompleteHandler)}},{key:"destroy",value:function(){this._progress=null,this._preloadedResources=null,this._name=null,this._namespace=null,this._resources=null}},{key:"_setupResources",value:function(){for(var t=[],e=0;e<AK.resources.length;e++){var n=AK.resources[e];(void 0!==n.namespace&&n.namespace===this._namespace||void 0===this._namespace&&n.preload)&&t.push(n)}return t}},{key:"_addMultiple",value:function(t){for(var e=0;e<t.length;e++){var n=t[e];if(this._isResourceAdded(n))return void console.warn('Resource manager "'.concat(this._namespace,'" : Resource with same name or path has already been added for "').concat(n.name,'"'));this._resources.push(n),AK.resources.push(n)}}},{key:"_addByNames",value:function(t){for(var e=0;e<AK.resources.length;e++){var n=AK.resources[e];if(t.includes(n.name))if(this._isResourceAdded(n)){console.warn('Resource manager "'.concat(this._namespace,'" : Resource with same name or path has already been added for "').concat(n.name,'"'));var r=t.indexOf(n.name);t.splice(r,1)}else{this._resources.push(n);var i=t.indexOf(n.name);t.splice(i,1)}}t.length>0&&console.warn('Resource manager "'.concat(this._namespace,'" : Could not find any resource with following name(s) : ').concat(t.join(", ")))}},{key:"_bindAll",value:function(){wK(this,"_preloadCompleteHandler","_preloadErrorHandler","_preloadProgressHandler")}},{key:"_preloadStartHandler",value:function(){this.dispatchEvent("start",null)}},{key:"_preloadProgressHandler",value:function(t){this._preloadedResources++,this._progress=this._preloadedResources/this._resources.length,this.dispatchEvent("progress",this._progress)}},{key:"_preloadCompleteHandler",value:function(t){this._isComplete=!0,this.dispatchEvent("complete",t)}},{key:"_preloadErrorHandler",value:function(){console.error("Resource manager ".concat(this._namespace," : something went wrong while preloading resources"))}},{key:"_isResourceAdded",value:function(t){for(var e=0;e<this._resources.length;e++)if(this._resources[e].type===t.type&&(this._resources[e].name===t.name||this._resources[e].path===t.path))return!0}}]),n}(),xK=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};dK(this,t),this.type=e.type}return hK(t,[{key:"worker",get:function(){return AK.worker}},{key:"load",value:function(t){return new Promise}}]),t}();const SK=JSON.parse('{"width":400,"height":2304,"fontSize":"30px","lineHeight":48,"paragraphs":[[" "," "," "," "," "," "],[" "," "," "],[" "," "," "," "," "," "," "],[" "," "," "],[" "," "],[" "," "," "],[" "," "]],"color":"rgb(255, 0, 0)","scrollHeight":2304}');function TK(t){return TK="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},TK(t)}function CK(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,IK(r.key),r)}}function IK(t){var e=function(t,e){if("object"!=TK(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=TK(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==TK(e)?e:e+""}function kK(t,e,n){return e=RK(e),function(t,e){if(e&&("object"===TK(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,PK()?Reflect.construct(e,n||[],RK(t).constructor):e.apply(t,n))}function PK(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(PK=function(){return!!t})()}function RK(t){return RK=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},RK(t)}function OK(t,e){return OK=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},OK(t,e)}var MK=4096,LK=function(t){function e(t){var n,r=t.el,i=t.font,o=void 0===i?"Canela Text":i,a=t.weight,s=void 0===a?100:a;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=kK(this,e))._el=r,n._font=o,n._weight=s,n._HTMLData=n._computeHTMLData(),n._dimensions=n._computeDimensions(),n._canvas=n._createCanvas(),n._sizeMultiplier=1,n._resizeCanvas(),n._texture=n._createTexture(),n._ctx=n._createContext(),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&OK(t,e)}(e,t),n=e,r=[{key:"destroy",value:function(){var t;null===(t=this._texture)||void 0===t||t.dispose()}},{key:"canvas",get:function(){return this._canvas}},{key:"effectiveDpr",get:function(){return.05*this._sizeMultiplier}},{key:"canvasPixelHeight",get:function(){return this._HTMLData.height}},{key:"texture",get:function(){return AK.get("poem/texture")}},{key:"fullWidth",get:function(){return this._dimensions.fullSize.max.x}},{key:"fullHeight",get:function(){return this._dimensions.fullSize.max.y}},{key:"uvBoxes",get:function(){return this._dimensions.uv}},{key:"pixelBoxes",get:function(){return this._dimensions.tiles}},{key:"fetchImageDataAtUv",value:function(t){var e=Math.round(t.x*this._canvas.width),n=Math.round(t.y*this._canvas.height);return this._ctx.getImageData(e,n,1,1)}},{key:"_createCanvas",value:function(){var t=document.createElement("canvas");return t}},{key:"_resizeCanvas",value:function(){var t=this.fullHeight*this.effectiveDpr,e=this.fullWidth*this.effectiveDpr,n=Math.max(e,t);n>MK&&(this._sizeMultiplier=MK/n);var r=Math.min(n,MK);this._canvas.width=r,this._canvas.style.width=this.fullWidth,this._canvas.height=r,this._canvas.style.height=this.fullHeight}},{key:"_createContext",value:function(){return this._canvas.getContext("2d")}},{key:"_createTexture",value:function(){var t=new Gy(this._canvas);return t.needsUpdate=!0,t.flipY=!1,t.minFilter=Ug,t.magFilter=Ug,t.generateMipmaps=!1,t}},{key:"_computeHTMLData",value:function(){return SK}},{key:"_computeDimensions",value:function(){var t=this._HTMLData.width,e=this._HTMLData.height,n=t+20,r=4*n,i=e,o=new WS;o.max.set(r,i);for(var a=[],s=[],l=0;l<4;l++){var u=new WS,c=n*l+10;u.min.set(c,0),u.max.set(c+t,e),a.push(u);var d=u.clone();2==l&&(d.min.x+=10,d.max.x+=10);var f=r/i;f<1?(d.min.set(d.min.x/o.max.x*f,d.min.y/o.max.y),d.max.set(d.max.x/o.max.x*f,d.max.y/o.max.y)):(d.min.set(d.min.x/o.max.x,d.min.y/o.max.y/f),d.max.set(d.max.x/o.max.x,d.max.y/o.max.y/f)),s.push(d)}return{tiles:a,fullSize:o,uv:s}}},{key:"update",value:function(){this._draw(),this._texture.needsUpdate=!0,this.dispatchEvent("resize",this._texture)}},{key:"resize",value:function(){this._HTMLData=this._computeHTMLData(),this._dimensions=this._computeDimensions(),this._resizeCanvas(),this.update()}},{key:"_draw",value:function(){this._ctx.setTransform(this.effectiveDpr,0,0,this.effectiveDpr,0,0),this._ctx.clearRect(0,0,this.fullWidth,this.fullHeight),this._ctx.setTransform(this.effectiveDpr,0,0,this.effectiveDpr,0,0),this._drawText(this._dimensions.tiles[3],!0,10)}},{key:"_drawText",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=this._ctx;i.fillStyle=this._HTMLData.color,i.font="normal normal ".concat(this._weight," ").concat(this._HTMLData.fontSize," ").concat(this._font),i.textBaseline="middle";for(var o=t.max.x-t.min.x,a=t.min.y+this._HTMLData.lineHeight/2,s=t.min.x,l=0;l<this._HTMLData.paragraphs.length;l++){for(var u=this._HTMLData.paragraphs[l],c=0;c<u.length;c++){var d=u[c],f=i.measureText(d);if(Math.floor(f.width)>o){for(var h=d.split(" "),p="",m=[],g=0;g<h.length;g++){var v=p+h[g]+" ",y=i.measureText(v);Math.floor(y.width)>o&&g>0?(m.push(p),p=h[g]+" "):p=v,g===h.length-1&&m.push(p)}s=t.min.x,m.forEach((function(o){o.split("").forEach((function(t){var o=i.measureText(t);n?i.fillRect(s-r,a-e._HTMLData.lineHeight/2-r,o.width+2*r,e._HTMLData.lineHeight+2*r):i.fillText(t,s,a),s+=Math.floor(o.width)})),s=t.min.x,a+=e._HTMLData.lineHeight}))}else d.split("").forEach((function(t){var o=i.measureText(t);n?i.fillRect(s-r,a-e._HTMLData.lineHeight/2-r,o.width+2*r,e._HTMLData.lineHeight+2*r):i.fillText(t,s,a),s+=Math.floor(o.width)})),s=t.min.x,a+=this._HTMLData.lineHeight}a+=this._HTMLData.lineHeight}}},{key:"intro",value:function(){var t=ti.timeline();return this.isReady=!0,t}}],r&&CK(n.prototype,r),i&&CK(n,i),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,i}(kW),DK=n(8166),NK=n.n(DK);class BK extends vT.Panel{constructor(t,e="GPU MS"){super(e,"#f90","#210");let n=!0,r=t.getExtension("EXT_disjoint_timer_query_webgl2");null===r&&(n=!1,r=t.getExtension("EXT_disjoint_timer_query"),null===r&&console.warn("GPUStatsPanel: disjoint_time_query extension not available.")),this.context=t,this.extension=r,this.maxTime=30,this.activeQueries=0,this.startQuery=function(){const t=this.context,e=this.extension;if(null===e)return;let r;n?(r=t.createQuery(),t.beginQuery(e.TIME_ELAPSED_EXT,r)):(r=e.createQueryEXT(),e.beginQueryEXT(e.TIME_ELAPSED_EXT,r)),this.activeQueries++;const i=()=>{let o,a,s;n?(o=t.getQueryParameter(r,t.QUERY_RESULT_AVAILABLE),a=t.getParameter(e.GPU_DISJOINT_EXT),s=t.getQueryParameter(r,t.QUERY_RESULT)):(o=e.getQueryObjectEXT(r,e.QUERY_RESULT_AVAILABLE_EXT),a=t.getParameter(e.GPU_DISJOINT_EXT),s=e.getQueryObjectEXT(r,e.QUERY_RESULT_EXT));const l=1e-6*s;o?(a||this.update(l,this.maxTime),this.activeQueries--):!1===t.isContextLost()&&requestAnimationFrame(i)};requestAnimationFrame(i)},this.endQuery=function(){const t=this.extension,e=this.context;null!==t&&(n?e.endQuery(t.TIME_ELAPSED_EXT):t.endQueryEXT(t.TIME_ELAPSED_EXT))}}}const jK={rendering:{},composer:{enabled:!1,samples:1},overlays:{samples:0}};function zK(t){return zK="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},zK(t)}function FK(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,UK(r.key),r)}}function UK(t){var e=function(t,e){if("object"!=zK(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=zK(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==zK(e)?e:e+""}function qK(t,e,n){return e=VK(e),function(t,e){if(e&&("object"===zK(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,GK()?Reflect.construct(e,n||[],VK(t).constructor):e.apply(t,n))}function GK(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(GK=function(){return!!t})()}function HK(){return HK="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=VK(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(arguments.length<3?t:n):i.value}},HK.apply(this,arguments)}function VK(t){return VK=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},VK(t)}function QK(t,e){return QK=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},QK(t,e)}var WK=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),qK(this,e,arguments)}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&QK(t,e)}(e,t),n=e,r=[{key:"init",value:function(){this._exposure=1}},{key:"initDebug",value:function(){this._debug=this._createDebug()}},{key:"destroy",value:function(){HK(VK(e.prototype),"destroy",this).call(this),this._removeDebug()}},{key:"exposure",get:function(){return this._exposure},set:function(t){this._exposure=t,this._triggerEvent()}},{key:"_triggerEvent",value:function(){fY.trigger({name:"exposureChange",fireAtStart:!0},this._exposure)}},{key:"_createDebug",value:function(){if(lK){var t=lK.addFolder({title:"Exposure"});return t.addInput(this,"exposure",{min:0,max:1}),t}}},{key:"_removeDebug",value:function(){var t;null===(t=this._debug)||void 0===t||t.dispose()}}],r&&FK(n.prototype,r),i&&FK(n,i),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,i}(dY());const YK=new WK;const KK=class{static isWebGLAvailable(){try{const t=document.createElement("canvas");return!(!window.WebGLRenderingContext||!t.getContext("webgl")&&!t.getContext("experimental-webgl"))}catch(t){return!1}}static isWebGL2Available(){try{const t=document.createElement("canvas");return!(!window.WebGL2RenderingContext||!t.getContext("webgl2"))}catch(t){return!1}}static getWebGLErrorMessage(){return this.getErrorMessage(1)}static getWebGL2ErrorMessage(){return this.getErrorMessage(2)}static getErrorMessage(t){const e={1:window.WebGLRenderingContext,2:window.WebGL2RenderingContext};let n='Your $0 does not seem to support <a href="http://khronos.org/webgl/wiki/Getting_a_WebGL_Implementation" style="color:#000">$1</a>';const r=document.createElement("div");return r.id="webglmessage",r.style.fontFamily="monospace",r.style.fontSize="13px",r.style.fontWeight="normal",r.style.textAlign="center",r.style.background="#fff",r.style.color="#000",r.style.padding="1.5em",r.style.width="400px",r.style.margin="5em auto 0",n=e[t]?n.replace("$0","graphics card"):n.replace("$0","browser"),n=n.replace("$1",{1:"WebGL",2:"WebGL 2"}[t]),r.innerHTML=n,r}};function XK(t){return XK="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},XK(t)}function $K(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,ZK(r.key),r)}}function ZK(t){var e=function(t,e){if("object"!=XK(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=XK(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==XK(e)?e:e+""}function JK(t,e,n){return e=nX(e),function(t,e){if(e&&("object"===XK(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,tX()?Reflect.construct(e,n||[],nX(t).constructor):e.apply(t,n))}function tX(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(tX=function(){return!!t})()}function eX(){return eX="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=nX(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(arguments.length<3?t:n):i.value}},eX.apply(this,arguments)}function nX(t){return nX=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},nX(t)}function rX(t,e){return rX=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},rX(t,e)}var iX=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),JK(this,e,arguments)}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&rX(t,e)}(e,t),n=e,r=[{key:"init",value:function(t){this._canvas=t.canvas,this._renderScale=zY.dpr,this._width=null,this._height=null,this._debug=this._createDebug(),this._instance=this._createRenderer(),this._debugStats=this._createDebugStats()}},{key:"destroy",value:function(){this._instance.dispose(),this._removeDebug(),eX(nX(e.prototype),"destroy",this).call(this)}},{key:"instance",get:function(){return this._instance}},{key:"width",get:function(){return this._width}},{key:"height",get:function(){return this._height}},{key:"renderScale",get:function(){return this._renderScale},set:function(t){this._renderScale=t,this.$root._resize()}},{key:"updateStats",value:function(){null==lK||lK.pane.refresh(),this._instance.info.reset()}},{key:"_createRenderer",value:function(){var t=new(KK.isWebGL2Available()?zE:FE)({canvas:this._canvas,antialias:!1,powerPreference:"high-performance",stencil:!0}),e=new By(0);if(t.setClearColor(e,1),t.toneMapping=Sg,t.info.autoReset=!1,t.outputEncoding=Xv,this._debug){var n={clearColor:e.getStyle()},r={NoToneMapping:xg,LinearToneMapping:Sg,ReinhardToneMapping:Tg,CineonToneMapping:Cg,ACESFilmicToneMapping:Ig};this._debug.addInput(n,"clearColor").on("change",(function(){t.setClearColor(e.setStyle(n.clearColor),1)})),this._debug.addInput(t,"toneMapping",{options:r}),this._debug.addInput(t,"toneMappingExposure",{min:0,max:10})}return t}},{key:"render",value:function(t,e){this._instance.render(t,e)}},{key:"resize",value:function(t){this._updateDimensions(t),this._resizeCanvas(t),this._resizeRenderer(t)}},{key:"_updateDimensions",value:function(t){var e=t.innerWidth,n=t.fullHeight;this._width=e*this._renderScale,this._height=n*this._renderScale}},{key:"_resizeCanvas",value:function(t){var e=t.innerWidth,n=t.fullHeight;this._instance.domElement.style.width="".concat(e,"px"),this._instance.domElement.style.height="".concat(n,"px")}},{key:"_resizeRenderer",value:function(t){var e=t.innerWidth,n=t.innerHeight;this._instance.setSize(this._width,this._height,!1),this._instance.domElement.style.width=e+"px",this._instance.domElement.style.height=n+"px"}},{key:"onExposureChange",value:function(t){this._instance.toneMappingExposure=t}},{key:"_createDebug",value:function(){var t=this;if(lK){var e=lK.addFolder({title:"Renderer",index:1});return e.addInput(this,"_renderScale",{label:"Render scale",min:.01,max:2}).on("change",(function(){t.$root._resize()})),e}}},{key:"_createDebugStats",value:function(){if(this._debug){var t=this._debug.addFolder({title:"Stats"}),e=t.addFolder({title:"Memory"});e.addMonitor(this._instance.info.memory,"geometries"),e.addMonitor(this._instance.info.memory,"textures");var n=t.addFolder({title:"Render"});return n.addMonitor(this._instance.info.render,"calls"),n.addMonitor(this._instance.info.render,"triangles"),n.addMonitor(this._instance.info.render,"points"),n.addMonitor(this._instance.info.render,"lines"),t}}},{key:"_removeDebug",value:function(){this._debug&&this._debug.dispose()}}],r&&$K(n.prototype,r),i&&$K(n,i),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,i}(dY());function oX(t){return oX="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},oX(t)}function aX(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,sX(r.key),r)}}function sX(t){var e=function(t,e){if("object"!=oX(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=oX(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==oX(e)?e:e+""}function lX(t,e,n){return e=cX(e),function(t,e){if(e&&("object"===oX(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,uX()?Reflect.construct(e,n||[],cX(t).constructor):e.apply(t,n))}function uX(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(uX=function(){return!!t})()}function cX(t){return cX=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},cX(t)}function dX(t,e){return dX=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},dX(t,e)}var fX=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),lX(this,e,arguments)}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&dX(t,e)}(e,t),n=e,r=[{key:"load",value:function(t,e,n,r){var i=this,o=new sS(this.manager);o.setPath(this.path),o.setResponseType("text"),o.load(t,(function(n){try{e(i.parse(n))}catch(e){r?r(e):console.error(e),i.manager.itemError(t)}}),n,r)}},{key:"parse",value:function(t){for(var e=(t=t.replace(/^#.*?(\n|\r)/gm,"").replace(/^\s*?(\n|\r)/gm,"").trim()).split(/[\n\r]+/g),n=e[0].trim().split(/\s+/g).map((function(t){return parseFloat(t)})),r=n.length,i=new Array(r*r*r*4),o=0,a=0,s=1,l=e.length;s<l;s++){var u=e[s].trim().split(/\s/g),c=parseFloat(u[0]),d=parseFloat(u[1]),f=parseFloat(u[2]);a=Math.max(a,c,d,f);var h=o%r*r*r+Math.floor(o/r)%r*r+Math.floor(o/(r*r))%r;i[4*h+0]=c,i[4*h+1]=d,i[4*h+2]=f,i[4*h+3]=1,o+=1}for(var p=Math.ceil(Math.log2(a)),m=Math.pow(2,p),g=0,v=i.length;g<v;g+=4){var y=i[g+0],b=i[g+1],_=i[g+2];i[g+0]=255*y/m,i[g+1]=255*b/m,i[g+2]=255*_/m}var w=new Uint8Array(i),A=new ZE;A.image.data=w,A.image.width=r,A.image.height=r*r,A.format=nv,A.type=Hg,A.magFilter=Ug,A.minFilter=Ug,A.wrapS=Ng,A.wrapT=Ng,A.generateMipmaps=!1,A.needsUpdate=!0;var E=new Wy;return E.image.data=w,E.image.width=r,E.image.height=r,E.image.depth=r,E.format=nv,E.type=Hg,E.magFilter=Ug,E.minFilter=Ug,E.wrapS=Ng,E.wrapT=Ng,E.wrapR=Ng,E.generateMipmaps=!1,E.needsUpdate=!0,{size:r,texture:A,texture3D:E}}}],r&&aX(n.prototype,r),i&&aX(n,i),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,i}(iS);const hX={uniforms:{tDiffuse:{value:null},h:{value:1/512}},vertexShader:"\n\n\t\tvarying vec2 vUv;\n\n\t\tvoid main() {\n\n\t\t\tvUv = uv;\n\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\n\t\t}",fragmentShader:"\n\n\t\tuniform sampler2D tDiffuse;\n\t\tuniform float h;\n\n\t\tvarying vec2 vUv;\n\n\t\tvoid main() {\n\n\t\t\tvec4 sum = vec4( 0.0 );\n\n\t\t\tsum += texture2D( tDiffuse, vec2( vUv.x - 4.0 * h, vUv.y ) ) * 0.051;\n\t\t\tsum += texture2D( tDiffuse, vec2( vUv.x - 3.0 * h, vUv.y ) ) * 0.0918;\n\t\t\tsum += texture2D( tDiffuse, vec2( vUv.x - 2.0 * h, vUv.y ) ) * 0.12245;\n\t\t\tsum += texture2D( tDiffuse, vec2( vUv.x - 1.0 * h, vUv.y ) ) * 0.1531;\n\t\t\tsum += texture2D( tDiffuse, vec2( vUv.x, vUv.y ) ) * 0.1633;\n\t\t\tsum += texture2D( tDiffuse, vec2( vUv.x + 1.0 * h, vUv.y ) ) * 0.1531;\n\t\t\tsum += texture2D( tDiffuse, vec2( vUv.x + 2.0 * h, vUv.y ) ) * 0.12245;\n\t\t\tsum += texture2D( tDiffuse, vec2( vUv.x + 3.0 * h, vUv.y ) ) * 0.0918;\n\t\t\tsum += texture2D( tDiffuse, vec2( vUv.x + 4.0 * h, vUv.y ) ) * 0.051;\n\n\t\t\tgl_FragColor = sum;\n\n\t\t}"},pX={uniforms:{tDiffuse:{value:null},v:{value:1/512}},vertexShader:"\n\n\t\tvarying vec2 vUv;\n\n\t\tvoid main() {\n\n\t\t\tvUv = uv;\n\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\n\t\t}",fragmentShader:"\n\n\t\tuniform sampler2D tDiffuse;\n\t\tuniform float v;\n\n\t\tvarying vec2 vUv;\n\n\t\tvoid main() {\n\n\t\t\tvec4 sum = vec4( 0.0 );\n\n\t\t\tsum += texture2D( tDiffuse, vec2( vUv.x, vUv.y - 4.0 * v ) ) * 0.051;\n\t\t\tsum += texture2D( tDiffuse, vec2( vUv.x, vUv.y - 3.0 * v ) ) * 0.0918;\n\t\t\tsum += texture2D( tDiffuse, vec2( vUv.x, vUv.y - 2.0 * v ) ) * 0.12245;\n\t\t\tsum += texture2D( tDiffuse, vec2( vUv.x, vUv.y - 1.0 * v ) ) * 0.1531;\n\t\t\tsum += texture2D( tDiffuse, vec2( vUv.x, vUv.y ) ) * 0.1633;\n\t\t\tsum += texture2D( tDiffuse, vec2( vUv.x, vUv.y + 1.0 * v ) ) * 0.1531;\n\t\t\tsum += texture2D( tDiffuse, vec2( vUv.x, vUv.y + 2.0 * v ) ) * 0.12245;\n\t\t\tsum += texture2D( tDiffuse, vec2( vUv.x, vUv.y + 3.0 * v ) ) * 0.0918;\n\t\t\tsum += texture2D( tDiffuse, vec2( vUv.x, vUv.y + 4.0 * v ) ) * 0.051;\n\n\t\t\tgl_FragColor = sum;\n\n\t\t}"};function mX(t,e,n){return e=function(t){var e=function(t,e){if("object"!=gX(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=gX(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==gX(e)?e:e+""}(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function gX(t){return gX="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},gX(t)}function vX(t){return t&&"object"===gX(t)&&!Array.isArray(t)}function yX(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];if(!n.length)return t;var i=n.shift();if(vX(t)&&vX(i))for(var o in i)vX(i[o])?(t[o]||Object.assign(t,mX({},o,{})),yX(t[o],i[o])):Object.assign(t,mX({},o,i[o]));return yX.apply(void 0,[t].concat(n))}var bX={shaderID:"luminosityHighPass",uniforms:{tDiffuse:{value:null},luminosityThreshold:{value:1},smoothWidth:{value:1},defaultColor:{value:new By(0)},defaultOpacity:{value:0}},vertexShader:"\n\n        varying vec2 vUv;\n\n        void main() {\n\n            vUv = uv;\n\n            gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\n        }",fragmentShader:"\n\n        uniform sampler2D tDiffuse;\n        uniform vec3 defaultColor;\n        uniform float defaultOpacity;\n        uniform float luminosityThreshold;\n        uniform float smoothWidth;\n\n        varying vec2 vUv;\n\n        void main() {\n\n            vec4 texel = texture2D( tDiffuse, vUv );\n\n            vec3 luma = vec3( 0.299, 0.587, 0.114 );\n\n            float v = dot( texel.xyz, luma );\n\n            vec4 outputColor = vec4( defaultColor.rgb, defaultOpacity );\n\n            float alpha = smoothstep( luminosityThreshold, luminosityThreshold + smoothWidth, v );\n\n            gl_FragColor = mix( outputColor, texel, alpha );\n        }"};const _X="#define GLSLIFY 1\n#define SHADER_NAME BloomOverrideMaterial\n\nvoid main() {\n    // Output\n    gl_FragColor = vec4(0.0, 0.0, 0.0, 1.0);\n}\n",wX="#define GLSLIFY 1\n// Name\n#define SHADER_NAME BloomOverrideMaterial\n\n// Attributes\nattribute vec3 position;\n#ifdef USE_INSTANCING\n    attribute mat4 instanceMatrix;\n#endif\n\n// Uniforms\nuniform mat4 modelViewMatrix;\nuniform mat4 projectionMatrix;\n\nvoid main() {\n    // Output\n    #if defined(USE_INSTANCING)\n        gl_Position = projectionMatrix * modelViewMatrix * instanceMatrix * vec4(position, 1.0);\n    #else\n        gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n    #endif\n}\n";function AX(t){return AX="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},AX(t)}function EX(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,xX(r.key),r)}}function xX(t){var e=function(t,e){if("object"!=AX(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=AX(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==AX(e)?e:e+""}function SX(t,e,n){return e=CX(e),function(t,e){if(e&&("object"===AX(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,TX()?Reflect.construct(e,n||[],CX(t).constructor):e.apply(t,n))}function TX(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(TX=function(){return!!t})()}function CX(t){return CX=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},CX(t)}function IX(t,e){return IX=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},IX(t,e)}var kX=new Ay(1,0),PX=new Ay(0,1),RX="SELECTIVE",OX="LUMINOSITY",MX="TEXTURE",LX=function(t){function e(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(t=SX(this,e))._type=n.type||OX,t._strength=void 0!==n.strength?n.strength:1,t._radius=n.radius||.1,t._threshold=n.threshold||0,t._smoothWidth=n.smoothWidth||1,t._texture=n.texture,t._camera=n.camera,t._scene=n.scene,t._resolutionScale=n.resolutionScale||.5,t._clearColor=new By(0,0,0),t._oldClearColor=new By,t._oldClearAlpha=1,t._renderTargetBright=t._createRenderTargetBright(),t._renderTargetsBlur=t._createRenderTargetsBlur(),t._separableBlurMaterials=t._createSeparableBlurMaterials(),t._compositeMaterial=t._createCompositeMaterial(),t._materialCopy=t._createMaterialCopy(),t._basicMaterial=t._createBasicMaterial(),t._fullscreenQuad=t._createFullscreenQuad(),t._type===OX&&(t._materialHighPassFilter=t._createMaterialHighPassFilter()),t._type===RX&&(t._materialOverride=t._createMaterialOverride(),t._materialInstanceOverride=t._createMaterialIntanceOverride()),t._type===MX&&(t._materialTexture=t._createMaterialTexture()),t.enabled=!0,t.needsSwap=!1,t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&IX(t,e)}(e,t),n=e,r=[{key:"dispose",value:function(){for(var t=0;t<this.horizontal.length;t++)this._renderTargetsBlur.horizontal[t].dispose();for(var e=0;e<this.vertical.length;e++)this._renderTargetsBlur.vertical[e].dispose();this._renderTargetBright.dispose()}},{key:"strength",get:function(){return this._strength},set:function(t){this._strength=t}},{key:"radius",get:function(){return this._radius},set:function(t){this._radius=t}},{key:"threshold",get:function(){return this._threshold},set:function(t){this._threshold=t}},{key:"smoothWidth",get:function(){return this._smoothWidth},set:function(t){this._smoothWidth=t}},{key:"renderTargetBright",get:function(){return this._renderTargetBright}},{key:"renderTargetsBlur",get:function(){return this._renderTargetsBlur}},{key:"camera",get:function(){return this._camera},set:function(t){this._camera=t}},{key:"scene",get:function(){return this._scene},set:function(t){this._scene=t}},{key:"texture",get:function(){return this._texture},set:function(t){this._texture=t}},{key:"_createRenderTargetBright",value:function(){var t=new Vy(0,0);return t.texture.name="CustomUnrealBloomPass.bright",t.texture.minFilter=Ug,t.texture.magFilter=Ug,t.texture.format=nv,t.texture.generateMipmaps=!1,t}},{key:"_createRenderTargetsBlur",value:function(){for(var t=[],e=[],n={minFilter:Ug,magFilter:Ug,format:nv},r=0;r<5;r++){var i=new Vy(0,0,n);i.texture.name="CustomUnrealBloomPass.h"+r,i.texture.generateMipmaps=!1,t.push(i);var o=new Vy(0,0,n);o.texture.name="CustomUnrealBloomPass.v"+r,o.texture.generateMipmaps=!1,e.push(o)}return{horizontal:t,vertical:e}}},{key:"_createMaterialHighPassFilter",value:function(){void 0===bX&&console.error("THREE.CustomUnrealBloomPass relies on LuminosityHighPassShader");var t=H_.clone(bX.uniforms);return t.luminosityThreshold.value=this._threshold,t.smoothWidth.value=this._smoothWidth,new V_({uniforms:t,vertexShader:bX.vertexShader,fragmentShader:bX.fragmentShader})}},{key:"_createSeparableBlurMaterials",value:function(){for(var t=[],e=[3,5,7,9,11],n=0;n<5;n++){var r=e[n],i=new V_({vertexShader:"#define GLSLIFY 1\nvarying vec2 vUv;\n\nvoid main() {\n    vUv = uv;\n    gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}\n",fragmentShader:"#define GLSLIFY 1\n#include <common>\n\nvarying vec2 vUv;\nuniform sampler2D colorTexture;\nuniform vec2 texSize;\nuniform vec2 direction;\n\nfloat gaussianPdf(in float x, in float sigma) {\n    return 0.39894 * exp( -0.5 * x * x/( sigma * sigma))/sigma;\n}\n\nvoid main() {\n    vec2 invSize = 1.0 / texSize;\n    float fSigma = float(SIGMA);\n    float weightSum = gaussianPdf(0.0, fSigma);\n    vec3 diffuseSum = texture2D( colorTexture, vUv).rgb * weightSum;\n    float alphaSum = 0.0;\n    for( int i = 1; i < KERNEL_RADIUS; i ++ ) {\n        float x = float(i);\n        float w = gaussianPdf(x, fSigma);\n        vec2 uvOffset = direction * invSize * x;\n        vec4 sample1 = texture2D( colorTexture, vUv + uvOffset);\n        vec4 sample2 = texture2D( colorTexture, vUv - uvOffset);\n        diffuseSum += (sample1.rgb + sample2.rgb) * w;\n        alphaSum += (sample1.a + sample2.a) * w;\n        weightSum += 2.0 * w;\n    }\n\n    gl_FragColor = vec4(diffuseSum / weightSum, 1.0);\n}\n",uniforms:{colorTexture:{value:null},texSize:{value:new Ay(.5,.5)},direction:{value:new Ay(.5,.5)}},defines:{KERNEL_RADIUS:r,SIGMA:r}});t.push(i)}return t}},{key:"_createCompositeMaterial",value:function(){var t=new V_({vertexShader:"#define GLSLIFY 1\nvarying vec2 vUv;\n\nvoid main() {\n    vUv = uv;\n    gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}\n",fragmentShader:"#define GLSLIFY 1\nvarying vec2 vUv;\nuniform sampler2D blurTexture1;\nuniform sampler2D blurTexture2;\nuniform sampler2D blurTexture3;\nuniform sampler2D blurTexture4;\nuniform sampler2D blurTexture5;\nuniform float bloomStrength;\nuniform float bloomRadius;\nuniform float bloomFactors[NUM_MIPS];\nuniform vec3 bloomTintColors[NUM_MIPS];\n\nfloat lerpBloomFactor(const in float factor) {\n    float mirrorFactor = 1.2 - factor;\n    return mix(factor, mirrorFactor, bloomRadius);\n}\n\nvoid main() {\n    gl_FragColor = bloomStrength * ( lerpBloomFactor(bloomFactors[0]) * vec4(bloomTintColors[0], 1.0) * texture2D(blurTexture1, vUv) +\n        lerpBloomFactor(bloomFactors[1]) * vec4(bloomTintColors[1], 1.0) * texture2D(blurTexture2, vUv) +\n        lerpBloomFactor(bloomFactors[2]) * vec4(bloomTintColors[2], 1.0) * texture2D(blurTexture3, vUv) +\n        lerpBloomFactor(bloomFactors[3]) * vec4(bloomTintColors[3], 1.0) * texture2D(blurTexture4, vUv) +\n        lerpBloomFactor(bloomFactors[4]) * vec4(bloomTintColors[4], 1.0) * texture2D(blurTexture5, vUv) );\n}\n",uniforms:{blurTexture1:{value:null},blurTexture2:{value:null},blurTexture3:{value:null},blurTexture4:{value:null},blurTexture5:{value:null},dirtTexture:{value:null},bloomStrength:{value:1},bloomFactors:{value:null},bloomTintColors:{value:null},bloomRadius:{value:0}},defines:{NUM_MIPS:5}});t.uniforms.blurTexture1.value=this._renderTargetsBlur.vertical[0].texture,t.uniforms.blurTexture2.value=this._renderTargetsBlur.vertical[1].texture,t.uniforms.blurTexture3.value=this._renderTargetsBlur.vertical[2].texture,t.uniforms.blurTexture4.value=this._renderTargetsBlur.vertical[3].texture,t.uniforms.blurTexture5.value=this._renderTargetsBlur.vertical[4].texture,t.uniforms.bloomStrength.value=this._strength,t.uniforms.bloomRadius.value=this._radius,t.needsUpdate=!0,t.uniforms.bloomFactors.value=[1,.8,.6,.4,.2];var e=[new Ky(1,1,1),new Ky(1,1,1),new Ky(1,1,1),new Ky(1,1,1),new Ky(1,1,1)];return t.uniforms.bloomTintColors.value=e,t}},{key:"_createMaterialCopy",value:function(){void 0===nT&&console.error("THREE.CustomUnrealBloomPass relies on CopyShader");var t=H_.clone(nT.uniforms);return t.opacity.value=1,new V_({uniforms:t,vertexShader:nT.vertexShader,fragmentShader:nT.fragmentShader,blending:Wm,depthTest:!1,depthWrite:!1,transparent:!0})}},{key:"_createBasicMaterial",value:function(){return new c_}},{key:"_createFullscreenQuad",value:function(){return new aT(null)}},{key:"_createMaterialOverride",value:function(){return new Rx({vertexShader:wX,fragmentShader:_X})}},{key:"_createMaterialIntanceOverride",value:function(){return new Rx({vertexShader:wX,fragmentShader:_X,defines:{USE_INSTANCING:""}})}},{key:"_createMaterialTexture",value:function(){return new V_({uniforms:{uTexture:{value:this._texture}},vertexShader:"#define GLSLIFY 1\nvarying vec2 vUv;\n\nvoid main() {\n    gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n\n    vUv = uv;\n}\n",fragmentShader:"#define GLSLIFY 1\nvarying vec2 vUv;\n\nuniform sampler2D uTexture;\n\nvoid main() {\n    vec4 color = texture2D(uTexture, vUv);\n    gl_FragColor = color;\n}\n"})}},{key:"render",value:function(t,e,n,r,i){t.getClearColor(this._oldClearColor),this._oldClearAlpha=t.getClearAlpha();var o=t.autoClear;t.autoClear=!1,t.setClearColor(this._clearColor,0),i&&t.state.buffers.stencil.setTest(!1),this._renderInput(t,n),this._type===OX&&this._renderBright(t,n),this._type===RX&&this._renderSelective(t),this._type===MX&&this._renderTexture(t),this._renderBlur(t),this._renderComposite(t),this._renderOutput(t,n,i),t.setClearColor(this._oldClearColor,this._oldClearAlpha),t.autoClear=o}},{key:"_renderInput",value:function(t,e){this.renderToScreen&&(this._fullscreenQuad.material=this._basicMaterial,this._basicMaterial.map=e.texture,t.setRenderTarget(null),this._fullscreenQuad.render(t))}},{key:"_renderBright",value:function(t,e){this._materialHighPassFilter.uniforms.tDiffuse.value=e.texture,this._materialHighPassFilter.uniforms.luminosityThreshold.value=this._threshold,this._materialHighPassFilter.uniforms.smoothWidth.value=this._smoothWidth,this._fullscreenQuad.material=this._materialHighPassFilter,t.setRenderTarget(this._renderTargetBright),this._fullscreenQuad.render(t)}},{key:"_renderSelective",value:function(t){var e=this;t.setRenderTarget(this._renderTargetBright),this._scene.traverse((function(t){"Mesh"!==t.type&&"SkinnedMesh"!==t.type&&"Points"!==t.type||(t.userData&&void 0!==t.userData.renderBloom&&t.visible?(t.userData.originalVisibilityState=t.visible,t.visible=t.userData.renderBloom,t.userData.renderingBloom=!0,t.userData.bloomMaterial&&(t.userData.originalMaterial=t.material,t.material=t.userData.bloomMaterial)):t.visible&&(t.userData.material=t.material,t.userData.originalVisibilityState=!0,t.instanceMatrix?t.material=e._materialInstanceOverride:t.material=e._materialOverride,t.userData.invisibleForBloom=!0))})),t.clear(),t.render(this._scene,this._camera),this._scene.traverse((function(t){t.userData&&(t.userData.renderingBloom&&(t.userData.renderingBloom=!1),t.userData.originalVisibilityState&&(t.visible=t.userData.originalVisibilityState,t.userData.originalVisibilityState=null),t.userData.invisibleForBloom&&(t.material=t.userData.material,t.userData.invisibleForBloom=!1),t.userData.bloomMaterial&&(t.material=t.userData.originalMaterial))}))}},{key:"_renderTexture",value:function(t){this._fullscreenQuad.material=this._materialTexture,t.setRenderTarget(this._renderTargetBright),this._fullscreenQuad.render(t)}},{key:"_renderBlur",value:function(t){for(var e=this._renderTargetBright,n=0;n<5;n++)this._fullscreenQuad.material=this._separableBlurMaterials[n],this._separableBlurMaterials[n].uniforms.colorTexture.value=e.texture,this._separableBlurMaterials[n].uniforms.direction.value=kX,t.setRenderTarget(this._renderTargetsBlur.horizontal[n]),this._fullscreenQuad.render(t),this._separableBlurMaterials[n].uniforms.colorTexture.value=this._renderTargetsBlur.horizontal[n].texture,this._separableBlurMaterials[n].uniforms.direction.value=PX,t.setRenderTarget(this._renderTargetsBlur.vertical[n]),this._fullscreenQuad.render(t),e=this._renderTargetsBlur.vertical[n]}},{key:"_renderComposite",value:function(t){this._fullscreenQuad.material=this._compositeMaterial,this._compositeMaterial.uniforms.bloomStrength.value=this._strength,this._compositeMaterial.uniforms.bloomRadius.value=this._radius,t.setRenderTarget(this._renderTargetsBlur.horizontal[0]),t.clear(),this._fullscreenQuad.render(t)}},{key:"_renderOutput",value:function(t,e,n){this._fullscreenQuad.material=this._materialCopy,this._materialCopy.uniforms.tDiffuse.value=this._renderTargetsBlur.horizontal[0].texture,n&&t.state.buffers.stencil.setTest(!0),this.renderToScreen?(t.setRenderTarget(null),this._fullscreenQuad.render(t)):(t.setRenderTarget(e),this._fullscreenQuad.render(t))}},{key:"setSize",value:function(t,e){this._width=t,this._height=e;var n=Math.round(t*this._resolutionScale),r=Math.round(e*this._resolutionScale);this._renderTargetBright.setSize(n,r);for(var i=0;i<5;i++)this._renderTargetsBlur.horizontal[i].setSize(n,r),this._renderTargetsBlur.vertical[i].setSize(n,r),this._separableBlurMaterials[i].uniforms.texSize.value=new Ay(n,r),n=Math.round(n/2),r=Math.round(r/2)}}],r&&EX(n.prototype,r),i&&EX(n,i),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,i}(rT);function DX(t){return DX="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},DX(t)}function NX(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,BX(r.key),r)}}function BX(t){var e=function(t,e){if("object"!=DX(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=DX(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==DX(e)?e:e+""}function jX(t,e,n){return e=FX(e),function(t,e){if(e&&("object"===DX(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,zX()?Reflect.construct(e,n||[],FX(t).constructor):e.apply(t,n))}function zX(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(zX=function(){return!!t})()}function FX(t){return FX=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},FX(t)}function UX(t,e){return UX=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},UX(t,e)}var qX=function(t){function e(t){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),jX(this,e,[{vertexShader:"#define GLSLIFY 1\n// Varyings\nvarying vec2 vUv;\n\nvoid main() {\n    gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n\n    vUv = uv;\n}\n",fragmentShader:"#define GLSLIFY 1\n// Varyings\nvarying vec2 vUv;\n\n// Uniforms\nuniform sampler2D tDiffuse;\n\n// Chromatic aberration\nuniform float uCAMaxDistortion;\nuniform float uCAScale;\nuniform float uCASize;\n\nconst int CAIterations = 3;\nconst float CAReciIterations = 1.0 / float(CAIterations);\n\nfloat sat(float t) {\n    return clamp( t, 0.0, 1.0 );\n}\n\nfloat linterp(float t) {\n    return sat(1.0 - abs(2.0 * t - 1.0));\n}\n\nfloat remap(float t, float a, float b) {\n    return sat((t - a) / (b - a));\n}\n\nvec4 spectrumOffset( float t ) {\n    vec4 ret;\n    float lo = step(t, 0.5);\n    float hi = 1.0 - lo;\n    float w = linterp(remap(t, 1.0 / 6.0, 5.0 / 6.0));\n    ret = vec4(lo,1.0,hi, 1.) * vec4(1.0 - w, w, 1.0 - w, 1.);\n\n    return pow(ret, vec4(1.0 / 2.2));\n}\n\nvec2 barrelDistortion(vec2 coord, float amt) {\n    vec2 cc = coord - 0.5;\n    float dist = dot(cc, cc);\n    return coord + cc * dist * amt;\n}\n\nvoid main() {\n    // Chromatic aberration\n    vec2 caUv = (vUv * uCAScale) + (1.0 - uCAScale) * 0.5;\n    vec4 sumCol = vec4(0.0);\n    vec4 sumW = vec4(0.0);\n    for (int i = 0; i < CAIterations; ++i) {\n        float t = float(i) * CAReciIterations;\n        vec4 w = spectrumOffset(t);\n        sumW += w;\n        sumCol += w * texture2D(tDiffuse, barrelDistortion(caUv, uCASize * uCAMaxDistortion * t));\n    }\n    vec4 color = sumCol / sumW;\n\n    // Output\n    gl_FragColor = color;\n}\n",uniforms:{tDiffuse:{value:null},uCAMaxDistortion:{value:t.maxDistortion},uCAScale:{value:t.scale},uCASize:{value:t.size}}}])}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&UX(t,e)}(e,t),n=e,r&&NX(n.prototype,r),i&&NX(n,i),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,i}(dY(sT));function GX(t){return GX="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},GX(t)}function HX(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,VX(r.key),r)}}function VX(t){var e=function(t,e){if("object"!=GX(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=GX(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==GX(e)?e:e+""}function QX(t,e,n){return e=YX(e),function(t,e){if(e&&("object"===GX(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,WX()?Reflect.construct(e,n||[],YX(t).constructor):e.apply(t,n))}function WX(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(WX=function(){return!!t})()}function YX(t){return YX=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},YX(t)}function KX(t,e){return KX=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},KX(t,e)}var XX=function(t){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var n=AK.get("noise/rgb-fractal");return n.wrapS=n.wrapT=Dg,QX(this,e,[{vertexShader:"#define GLSLIFY 1\n// Varyings\nvarying vec2 vUv;\n\nvoid main() {\n    gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n\n    vUv = uv;\n}\n",fragmentShader:"#define GLSLIFY 1\n// Varyings\nvarying vec2 vUv;\n\n// Uniforms\nuniform sampler2D tDiffuse;\nuniform sampler2D tDepth;\nuniform sampler2D tNoiseTexture;\n\nuniform mat4 uProjectionInverse;\nuniform mat4 uViewMatrixInv;\nuniform float uCameraNear;\nuniform float uCameraFar;\n\nuniform float uTime;\n\nuniform float uNoiseStrength;\nuniform float uNoiseSpeed;\nuniform vec2 uNoiseScale;\n\nuniform vec2 uFogAmountRangeZ;\nuniform vec2 uFogDensityRangeZ;\n\nuniform vec2 uFogAmountRangeY;\nuniform vec2 uFogDensityRangeY;\n\nuniform vec3 uMainSdf;\nuniform vec2 uSdfRemap;\n\nuniform vec2 uResolution;\nuniform vec2 uFogState;\n\nfloat cremap(float value, float start1, float stop1, float start2, float stop2) {\n  float r = start2 + (stop2 - start2) * ((value - start1) / (stop1 - start1));\n  return clamp(r, min(start2, stop2), max(start2, stop2));\n}\n\nfloat remap(float value, float start1, float stop1, float start2, float stop2) {\n  return start2 + (stop2 - start2) * ((value - start1) / (stop1 - start1));\n}\n\nfloat quarticInOut(float t) {\n  return t < 0.5\n    ? +8.0 * pow(t, 4.0)\n    : -8.0 * pow(t - 1.0, 4.0) + 1.0;\n}\n\nfloat sdCircle(vec2 p, float r) {\n  return length(p) - r;\n}\n\nvec3 getFogColor(float time, float depth, vec2 uv, vec2 resolution, vec3 worldPosition, vec3 color, sampler2D noiseTexture, vec3 fogColor, float noiseSpeed, vec2 noiseScale, float noiseStrength, vec2 fogAmountRangeY, vec2 fogDensityRangeY, vec2 fogAmountRangeZ, vec2 fogDensityRangeZ, vec3 mainSdf, vec2 sdfRemap) {\n  worldPosition.z -= time * noiseSpeed * .1;\n\n  vec2 noiseUv = worldPosition.yz;\n  noiseUv *= 0.05 * noiseScale;\n\n  float noise = texture2D(noiseTexture, noiseUv).r;\n  noise = quarticInOut(noise);\n  if(worldPosition.y < 0.01)\n    noise = 1.;\n  if(worldPosition.x > 900.)\n    noise = 1.;\n\n  float screenRatio = resolution.x / resolution.y;\n  vec2 adjustedUvs = ((uv - 0.5) / vec2(1., screenRatio)) + 0.5;\n  adjustedUvs.x += step(screenRatio, 1.) * -.5; // on portrait only\n  float sdf = sdCircle(adjustedUvs - mainSdf.xy, mainSdf.z);\n  sdf = smoothstep(sdfRemap.x, sdfRemap.y, sdf);\n\n  float noiseSdf = sdf * remap(noise, 0., 1., 1. - noiseStrength, 1.);\n\n  float fogAmountZ = mix(fogAmountRangeZ.x, fogAmountRangeZ.y, noiseSdf);\n  // float fogDensityZ = mix(fogDensityRangeZ.x, fogDensityRangeZ.y, noiseSdf) / 1000.;\n  float fogDensityZ = mix(fogDensityRangeZ.x, fogDensityRangeZ.y, noiseSdf);\n  float fogFactorZ = 1.0 - exp(-fogDensityZ * fogDensityZ * depth * depth);\n\n  float fogPosY = worldPosition.y;\n  float fogDensityY = mix(fogDensityRangeY.y, fogDensityRangeY.x, noiseSdf);\n  float fogAmountY = mix(fogAmountRangeY.x, fogAmountRangeY.y, noiseSdf);\n  float fogFactorY = exp(-fogDensityY * fogDensityY * fogPosY * fogPosY);\n\n  float fogAmount = clamp(fogFactorZ * fogAmountZ, 0.0, 1.0);\n  fogAmount = max(fogAmount, clamp(fogFactorY * fogAmountY, 0.0, 1.0));\n  fogAmount = clamp(fogAmount + sdf * 0.2, 0., 1.);\n\n  return mix(color, fogColor, fogAmount);\n}\n\nstruct FogSettings {\n    float noiseSpeed;\n    vec2 noiseScale;\n    float noiseStrength;\n    vec2 fogAmountRangeY;\n    vec2 fogDensityRangeY;\n    vec2 fogAmountRangeZ;\n    vec2 fogDensityRangeZ;\n    vec3 mainSdf;\n    vec2 sdfRemap;\n    vec3 fogColor;\n};\n\nFogSettings mixFogSettings(FogSettings from, FogSettings to, float ratio) {\n    FogSettings settings;\n    settings.noiseSpeed = mix(from.noiseSpeed, to.noiseSpeed, ratio);\n    settings.noiseScale = mix(from.noiseScale, to.noiseScale, ratio);\n    settings.noiseStrength = mix(from.noiseStrength, to.noiseStrength, ratio);\n    settings.fogAmountRangeY = mix(from.fogAmountRangeY, to.fogAmountRangeY, ratio);\n    settings.fogDensityRangeY = mix(from.fogDensityRangeY, to.fogDensityRangeY, ratio);\n    settings.fogAmountRangeZ = mix(from.fogAmountRangeZ, to.fogAmountRangeZ, ratio);\n    settings.fogDensityRangeZ = mix(from.fogDensityRangeZ, to.fogDensityRangeZ, ratio);\n    settings.mainSdf = mix(from.mainSdf, to.mainSdf, ratio);\n    settings.sdfRemap = mix(from.sdfRemap, to.sdfRemap, ratio);\n    settings.fogColor = mix(from.fogColor, to.fogColor, ratio);\n    return settings;\n}\n\nFogSettings getBaseSettings() {\n    FogSettings baseSettings;\n    baseSettings.noiseSpeed = 3.;\n    baseSettings.noiseScale = vec2(0.6, 0.2);\n    baseSettings.noiseStrength = 0.88;\n    baseSettings.fogAmountRangeY = vec2(0.1, 1.39);\n    baseSettings.fogDensityRangeY = vec2(0.01, 0.81);\n    baseSettings.fogAmountRangeZ = vec2(0.01, 0.99);\n    baseSettings.fogDensityRangeZ = vec2(20.0, 277.42);\n    baseSettings.mainSdf = vec3(0.79, 0.63, 0.85);\n    baseSettings.sdfRemap = vec2(-0.48, -0.06);\n    baseSettings.fogColor = vec3(0.796, 0.796, 0.761);\n    return baseSettings;\n}\n\nFogSettings getOccultedSettings(FogSettings baseSettings) {\n    FogSettings occultedSettings;\n    occultedSettings.noiseSpeed = baseSettings.noiseSpeed;\n    occultedSettings.noiseScale = baseSettings.noiseScale;\n    occultedSettings.noiseStrength = baseSettings.noiseStrength;\n    occultedSettings.fogAmountRangeY = vec2(0.65, 1.16);\n    occultedSettings.fogDensityRangeY = vec2(0.65, 0.81);\n    occultedSettings.fogAmountRangeZ = baseSettings.fogAmountRangeZ;\n    occultedSettings.fogDensityRangeZ = vec2(20.0, 161.29);\n    occultedSettings.mainSdf = vec3(0.64, 0.62, 0.84);\n    occultedSettings.sdfRemap = vec2(-0.84, -0.45);\n    occultedSettings.fogColor = vec3(0.796, 0.796, 0.761);\n    return occultedSettings;\n}\n\nFogSettings getOpaqueSettings(FogSettings baseSettings) {\n    FogSettings opaqueSettings;\n    opaqueSettings.noiseSpeed = baseSettings.noiseSpeed;\n    opaqueSettings.noiseScale = baseSettings.noiseScale;\n    opaqueSettings.noiseStrength = baseSettings.noiseStrength;\n    opaqueSettings.fogAmountRangeY = vec2(0.65, 1.16);\n    opaqueSettings.fogDensityRangeY = vec2(0.65, 0.81);\n    opaqueSettings.fogAmountRangeZ = vec2(1, 1.3);\n    opaqueSettings.fogDensityRangeZ = vec2(100, 300);\n    opaqueSettings.mainSdf = vec3(0.5, 0.5, 0);\n    opaqueSettings.sdfRemap = baseSettings.sdfRemap;\n    opaqueSettings.fogColor = vec3(0.714, 0.714, 0.714);\n    return opaqueSettings;\n}\n\nvec3 getFogColorWithRatio(float time, float depth, vec2 uv, vec2 resolution, vec3 worldPosition, vec3 color, sampler2D noiseTexture, float opaqueRatio, float occultedRatio) {\n\n    FogSettings baseSettings = getBaseSettings();\n    FogSettings opaqueSettings = getOpaqueSettings(baseSettings);\n    FogSettings occultedSettings = getOccultedSettings(baseSettings);\n\n    FogSettings settings = baseSettings;\n    settings = mixFogSettings(settings, occultedSettings, occultedRatio);\n    settings = mixFogSettings(settings, opaqueSettings, opaqueRatio);\n\n    return getFogColor(time, depth, uv, resolution, worldPosition, color, noiseTexture, settings.fogColor, settings.noiseSpeed, settings.noiseScale, settings.noiseStrength, settings.fogAmountRangeY, settings.fogDensityRangeY, settings.fogAmountRangeZ, settings.fogDensityRangeZ, settings.mainSdf, settings.sdfRemap);\n}\n\nfloat perspectiveDepthToViewZ(const in float depth, const in float near, const in float far) {\n    return (near * far) / ((far - near) * depth - far);\n}\n\nfloat viewZToOrthographicDepth(const in float viewZ, const in float near, const in float far) {\n    return (viewZ + near) / (near - far);\n}\n\nfloat readDepth(sampler2D depthSampler, vec2 coord) {\n    float fragCoordZ = texture2D(depthSampler, coord).x;\n    float viewZ = perspectiveDepthToViewZ(fragCoordZ, uCameraNear, uCameraFar);\n    return viewZToOrthographicDepth(viewZ, uCameraNear, uCameraFar);\n}\n\nvec3 worldPosFromDepth(float depth) {\n    float z = depth * 2.0 - 1.0;\n\n    vec4 clipSpacePosition = vec4(vUv * 2.0 - 1.0, z, 1.0);\n    vec4 viewSpacePosition = uProjectionInverse * clipSpacePosition;\n\n    // Perspective division\n    viewSpacePosition /= viewSpacePosition.w;\n\n    vec4 worldSpacePosition = uViewMatrixInv * viewSpacePosition;\n\n    return worldSpacePosition.xyz;\n}\n\nvoid main() {\n    float depth = readDepth(tDepth, vUv);\n    vec3 color = texture2D(tDiffuse, vUv).xyz;\n\n    float depthSample = texture2D(tDepth, vUv).x;\n    vec3 worldPosition = worldPosFromDepth(depthSample);\n\n    color = getFogColorWithRatio(uTime, depth, vUv, uResolution, worldPosition, color, tNoiseTexture, uFogState.x, uFogState.y);\n\n    gl_FragColor = vec4(color, 1.0);\n\n    // Alpha correction\n    gl_FragColor = LinearTosRGB(gl_FragColor);\n}\n",uniforms:{tDiffuse:{value:null},tDepth:{value:null},uTime:{value:null},tNoiseTexture:{value:n},uProjectionInverse:{value:0},uViewMatrixInv:{value:0},uCameraNear:{value:.1},uCameraFar:{value:1e3},uResolution:{value:new Ay},uFogState:{value:new Ay}}}])}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&KX(t,e)}(e,t),n=e,(r=[{key:"render",value:function(t,e,n){var r,i;this.uniforms[this.textureID]&&(this.uniforms[this.textureID].value=n.texture),this.uniforms.uFogState.value.set(null===(r=this.$experienceManager)||void 0===r?void 0:r.fogState.opaque,null===(i=this.$experienceManager)||void 0===i?void 0:i.fogState.occulted),this.fsQuad.material=this.material,t.setRenderTarget(null),this.fsQuad.render(t)}},{key:"setSize",value:function(t,e){this.uniforms.uResolution.value.set(t,e)}}])&&HX(n.prototype,r),i&&HX(n,i),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,i}(dY(sT));function $X(t){return $X="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},$X(t)}function ZX(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,JX(r.key),r)}}function JX(t){var e=function(t,e){if("object"!=$X(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=$X(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==$X(e)?e:e+""}function t$(t,e,n){return e=n$(e),function(t,e){if(e&&("object"===$X(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,e$()?Reflect.construct(e,n||[],n$(t).constructor):e.apply(t,n))}function e$(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(e$=function(){return!!t})()}function n$(t){return n$=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},n$(t)}function r$(t,e){return r$=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},r$(t,e)}var i$=function(t){function e(t,n,r,i,o){var a;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(a=t$(this,e))._scene=t,a._camera=n,a._overrideMaterial=r,a._clearColor=i,a._clearAlpha=void 0!==o?o:0,a._oldClearColor=new By,a._renderTarget=a._createRenderTarget(),a._material=a._createMaterial(),a._fsQuad=new aT(a._material),a.clear=!0,a.clearDepth=!1,a.needsSwap=!1,a}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&r$(t,e)}(e,t),n=e,(r=[{key:"renderTarget",get:function(){return this._renderTarget}},{key:"camera",get:function(){return this._camera},set:function(t){this._camera=t}},{key:"scene",get:function(){return this._scene},set:function(t){this._scene=t}},{key:"_createRenderTarget",value:function(){var t=new Vy(0,0);return t.samples=jK.composer.samples,t.texture.format=nv,t.texture.encoding=Xv,t.texture.minFilter=Ug,t.texture.magFilter=Ug,t.texture.generateMipmaps=!1,t.texture.depthBuffer=!0,t.depthTexture=new DE,t}},{key:"_createMaterial",value:function(){var t=nT,e=H_.clone(t.uniforms);return e.tDiffuse.value=this._renderTarget.texture,new V_({uniforms:e,vertexShader:t.vertexShader,fragmentShader:t.fragmentShader})}},{key:"render",value:function(t,e,n){var r,i,o=t.autoClear;t.autoClear=!1,void 0!==this._overrideMaterial&&(i=this._scene.overrideMaterial,this._scene.overrideMaterial=this._overrideMaterial),this._clearColor&&(t.getClearColor(this._oldClearColor),r=t.getClearAlpha(),t.setClearColor(this._clearColor,this._clearAlpha)),this.clearDepth&&t.clearDepth(),t.setRenderTarget(this._renderTarget),this.clear&&t.clear(t.autoClearColor,t.autoClearDepth,t.autoClearStencil),t.render(this._scene,this._camera),t.setRenderTarget(this.renderToScreen?null:n),this._fsQuad.render(t),this._clearColor&&t.setClearColor(this._oldClearColor,r),void 0!==this._overrideMaterial&&(this._scene.overrideMaterial=i),t.autoClear=o}},{key:"setSize",value:function(t,e){this._renderTarget.setSize(t,e)}}])&&ZX(n.prototype,r),i&&ZX(n,i),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,i}(rT);function o$(t){return o$="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o$(t)}function a$(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,s$(r.key),r)}}function s$(t){var e=function(t,e){if("object"!=o$(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=o$(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==o$(e)?e:e+""}function l$(t,e,n){return e=c$(e),function(t,e){if(e&&("object"===o$(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,u$()?Reflect.construct(e,n||[],c$(t).constructor):e.apply(t,n))}function u$(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(u$=function(){return!!t})()}function c$(t){return c$=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},c$(t)}function d$(t,e){return d$=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},d$(t,e)}var f$=function(t){function e(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(t=l$(this,e,[new Rx({vertexShader:"// Precision\nprecision highp float;\nprecision highp int;\n#define GLSLIFY 1\n\n// Attributes\nattribute vec3 position;\nattribute vec2 uv;\n\n// Varying\nvarying vec2 vUv;\n\n// Uniforms\nuniform mat4 modelViewMatrix;\nuniform mat4 projectionMatrix;\n\nvoid main() {\n    // Varyings\n    vUv = uv;\n\n    // Output\n    gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n}\n",fragmentShader:"// Precision\nprecision highp float;\nprecision highp int;\n#define GLSLIFY 1\n\n// Varying\nvarying vec2 vUv;\n\n// Uniforms\nuniform sampler2D tDiffuse;\nuniform sampler2D tBlur;\nuniform sampler2D tDepth;\nuniform sampler2D tDepthCurve;\nuniform float uCameraNear;\nuniform float uCameraFar;\nuniform mat4 uProjectionInverse;\nuniform mat4 uViewMatrixInv;\nuniform float uDepthOffset;\nuniform bool uShowBottom;\nuniform vec2 uBottom;\n// uniform vec2 uFar;\n\n// Includes\n#include <packing>\n\nfloat readDepth(float depthSample) {\n    float viewZ = perspectiveDepthToViewZ(depthSample, uCameraNear, uCameraFar);\n    return viewZToOrthographicDepth(viewZ, uCameraNear, uCameraFar);\n}\n\n// https://stackoverflow.com/questions/32227283/getting-world-position-from-depth-buffer-value\nvec3 worldPosFromDepth(float depth) {\n    float z = depth * 2.0 - 1.0;\n\n    vec4 clipSpacePosition = vec4(vUv * 2.0 - 1.0, z, 1.0);\n    vec4 viewSpacePosition = uProjectionInverse * clipSpacePosition;\n\n    // Perspective division\n    viewSpacePosition /= viewSpacePosition.w;\n\n    vec4 worldSpacePosition = uViewMatrixInv * viewSpacePosition;\n\n    return worldSpacePosition.xyz;\n}\n\nvoid main() {\n    // Base sample\n    vec4 base = texture2D(tDiffuse, vUv);\n\n    // Blur sample\n    vec4 blur = texture2D(tBlur, vUv);\n\n    // Depth\n    float depthSample = texture2D(tDepth, vUv).x;\n    float depth = readDepth(depthSample);\n\n    // Depth\n    float zDepth = clamp(depth + uDepthOffset, 0.0, 1.0);\n    float depthCurve = texture2D(tDepthCurve, clamp(vec2(zDepth, 0.5), 0.0, 1.0)).r;\n\n    // World position\n    vec3 worldPosition = worldPosFromDepth(depthSample);\n\n    // Bottom\n    if (uShowBottom) {\n        float bottom = smoothstep(uBottom.x, uBottom.y, worldPosition.y);\n        depthCurve += bottom;\n    }\n\n    // float dd = distance(vec3(0.0, 0.0, 0.0), worldPosition);\n    // depthCurve = 1.0 - smoothstep(uFar.x, uFar.x + uFar.y, dd);\n    depthCurve = clamp(depthCurve, 0.0, 1.0);\n\n    // // Output\n    gl_FragColor = mix(base, blur, depthCurve);\n}\n",uniforms:{tDepth:{value:null},tDepthCurve:{value:null},tDiffuse:{value:null},tBlur:{value:null},uCameraNear:{value:null},uCameraFar:{value:null},uDepthOffset:{value:0},uProjectionInverse:{value:0},uViewMatrixInv:{value:0},uShowBottom:{value:!1},uBottom:{value:new Ay(0,0)}}})])).needsSwap=!0,t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&d$(t,e)}(e,t),n=e,(r=[{key:"depthOffset",get:function(){return this.material.uniforms.uDepthOffset.value},set:function(t){this.material.uniforms.uDepthOffset.value=t}},{key:"render",value:function(t,e,n){this.fsQuad.material=this.material,this.uniforms.tDiffuse.value=n.texture,this.renderToScreen?(t.setRenderTarget(null),this.fsQuad.render(t)):(t.setRenderTarget(e),this.clear&&t.clear(t.autoClearColor,t.autoClearDepth,t.autoClearStencil),this.fsQuad.render(t))}}])&&a$(n.prototype,r),i&&a$(n,i),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,i}(sT);const h$={shaderID:"luminosityHighPass",uniforms:{tDiffuse:{value:null},luminosityThreshold:{value:1},smoothWidth:{value:1},defaultColor:{value:new By(0)},defaultOpacity:{value:0}},vertexShader:"\n\n\t\tvarying vec2 vUv;\n\n\t\tvoid main() {\n\n\t\t\tvUv = uv;\n\n\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\n\t\t}",fragmentShader:"\n\n\t\tuniform sampler2D tDiffuse;\n\t\tuniform vec3 defaultColor;\n\t\tuniform float defaultOpacity;\n\t\tuniform float luminosityThreshold;\n\t\tuniform float smoothWidth;\n\n\t\tvarying vec2 vUv;\n\n\t\tvoid main() {\n\n\t\t\tvec4 texel = texture2D( tDiffuse, vUv );\n\n\t\t\tvec3 luma = vec3( 0.299, 0.587, 0.114 );\n\n\t\t\tfloat v = dot( texel.xyz, luma );\n\n\t\t\tvec4 outputColor = vec4( defaultColor.rgb, defaultOpacity );\n\n\t\t\tfloat alpha = smoothstep( luminosityThreshold, luminosityThreshold + smoothWidth, v );\n\n\t\t\tgl_FragColor = mix( outputColor, texel, alpha );\n\n\t\t}"};function p$(t){return p$="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},p$(t)}function m$(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,g$(r.key),r)}}function g$(t){var e=function(t,e){if("object"!=p$(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=p$(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==p$(e)?e:e+""}function v$(t,e,n){return e=b$(e),function(t,e){if(e&&("object"===p$(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,y$()?Reflect.construct(e,n||[],b$(t).constructor):e.apply(t,n))}function y$(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(y$=function(){return!!t})()}function b$(t){return b$=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},b$(t)}function _$(t,e){return _$=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},_$(t,e)}var w$=function(t){function e(t,n,r,i,o,a){var s;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(s=v$(this,e)).renderer=t,s.strength=void 0!==r?r:1,s.radius=i,s.threshold=o,s.resolution=void 0!==n?new Ay(n.x,n.y):new Ay(256,256),s.resolutionScale=a||.25,s.inputTexture=null,s.clearColor=new By(0,0,0);var l={minFilter:Ug,magFilter:Ug,format:nv};s.renderTargetsHorizontal=[],s.renderTargetsVertical=[],s.nMips=5;var u=Math.round(s.resolution.x/2),c=Math.round(s.resolution.y/2);s.renderTargetBright=new Vy(u,c,l),s.renderTargetBright.texture.name="UnrealBloomPass.bright",s.renderTargetBright.texture.generateMipmaps=!1;for(var d=0;d<s.nMips;d++){var f=new Vy(u,c,l);f.texture.name="UnrealBloomPass.h"+d,f.texture.generateMipmaps=!1,s.renderTargetsHorizontal.push(f);var h=new Vy(u,c,l);h.texture.name="UnrealBloomPass.v"+d,h.texture.generateMipmaps=!1,s.renderTargetsVertical.push(h),u=Math.round(u/2),c=Math.round(c/2)}void 0===h$&&console.error("THREE.UnrealBloomPass relies on LuminosityHighPassShader");var p=h$;s.highPassUniforms=H_.clone(p.uniforms),s.highPassUniforms.luminosityThreshold.value=o,s.highPassUniforms.smoothWidth.value=.01,s.materialHighPassFilter=new V_({uniforms:s.highPassUniforms,vertexShader:p.vertexShader,fragmentShader:p.fragmentShader,defines:{}}),s.separableBlurMaterials=[];var m=[3,5,7,9,11];u=Math.round(s.resolution.x/2),c=Math.round(s.resolution.y/2);for(var g=0;g<s.nMips;g++)s.separableBlurMaterials.push(s.getSeperableBlurMaterial(m[g])),s.separableBlurMaterials[g].uniforms.texSize.value=new Ay(u,c),u=Math.round(u/2),c=Math.round(c/2);s.compositeMaterial=s.getCompositeMaterial(s.nMips),s.compositeMaterial.uniforms.blurTexture1.value=s.renderTargetsVertical[0].texture,s.compositeMaterial.uniforms.blurTexture2.value=s.renderTargetsVertical[1].texture,s.compositeMaterial.uniforms.blurTexture3.value=s.renderTargetsVertical[2].texture,s.compositeMaterial.uniforms.blurTexture4.value=s.renderTargetsVertical[3].texture,s.compositeMaterial.uniforms.blurTexture5.value=s.renderTargetsVertical[4].texture,s.compositeMaterial.uniforms.bloomStrength.value=r,s.compositeMaterial.uniforms.bloomRadius.value=.1,s.compositeMaterial.needsUpdate=!0;s.compositeMaterial.uniforms.bloomFactors.value=[1,.8,.6,.4,.2],s.enabled=!0,s.needsSwap=!1,s._oldClearColor=new By,s.oldClearAlpha=1,s.fsQuad=new aT(null);for(var v=0;v<s.nMips;v++)s.fsQuad.material=s.separableBlurMaterials[v];return s.fsQuad.material=s.compositeMaterial,s}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&_$(t,e)}(e,t),n=e,r=[{key:"dispose",value:function(){for(var t=0;t<this.renderTargetsHorizontal.length;t++)this.renderTargetsHorizontal[t].dispose();for(var e=0;e<this.renderTargetsVertical.length;e++)this.renderTargetsVertical[e].dispose();this.renderTargetBright.dispose()}},{key:"setSize",value:function(t,e){var n=Math.round(t*this.resolutionScale),r=Math.round(e*this.resolutionScale);this.renderTargetBright.setSize(n,r);for(var i=0;i<this.nMips;i++)this.renderTargetsHorizontal[i].setSize(n,r),this.renderTargetsVertical[i].setSize(n,r),this.separableBlurMaterials[i].uniforms.texSize.value=new Ay(n,r),n=Math.round(n/2),r=Math.round(r/2)}},{key:"render",value:function(t,n,r,i,o){t.getClearColor(this._oldClearColor),this.oldClearAlpha=t.getClearAlpha();var a=t.autoClear;t.autoClear=!1,o&&t.state.buffers.stencil.setTest(!1);for(var s=r,l=0;l<this.nMips;l++)this.fsQuad.material=this.separableBlurMaterials[l],this.separableBlurMaterials[l].uniforms.colorTexture.value=s.texture,this.separableBlurMaterials[l].uniforms.direction.value=e.BlurDirectionX,t.setRenderTarget(this.renderTargetsHorizontal[l]),this.fsQuad.render(t),this.separableBlurMaterials[l].uniforms.colorTexture.value=this.renderTargetsHorizontal[l].texture,this.separableBlurMaterials[l].uniforms.direction.value=e.BlurDirectionY,t.setRenderTarget(this.renderTargetsVertical[l]),this.fsQuad.render(t),s=this.renderTargetsVertical[l];this.fsQuad.material=this.compositeMaterial,this.compositeMaterial.uniforms.bloomStrength.value=this.strength,this.compositeMaterial.uniforms.bloomRadius.value=this.radius,t.setRenderTarget(this.renderTargetsHorizontal[0]),this.fsQuad.render(t),t.setClearColor(this._oldClearColor,this.oldClearAlpha),t.autoClear=a}},{key:"getSeperableBlurMaterial",value:function(t){return new Rx({type:"SeperableBlurMaterial",defines:{KERNEL_RADIUS:t,SIGMA:t},uniforms:{colorTexture:{value:null},texSize:{value:new Ay(.5,.5)},direction:{value:new Ay(.5,.5)}},vertexShader:"precision highp float;\n                precision highp int;\n\n                attribute vec3 position;\n                attribute vec2 uv;\n\n                uniform mat4 modelViewMatrix;\n                uniform mat4 projectionMatrix;\n\n                varying vec2 vUv;\n                void main() {\n                    vUv = uv;\n                    gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n                }",fragmentShader:"precision highp float;\n                precision highp int;\n\n                #include <common>\n                varying vec2 vUv;\n                uniform sampler2D colorTexture;\n                uniform vec2 texSize;\n                uniform vec2 direction;\n\n                float gaussianPdf(in float x, in float sigma) {\n                    return 0.39894 * exp( -0.5 * x * x/( sigma * sigma))/sigma;\n                }\n                void main() {\n                    vec2 invSize = 1.0 / texSize;\n                    float fSigma = float(SIGMA);\n                    float weightSum = gaussianPdf(0.0, fSigma);\n                    vec3 diffuseSum = texture2D( colorTexture, vUv).rgb * weightSum;\n                    for( int i = 1; i < KERNEL_RADIUS; i ++ ) {\n                        float x = float(i);\n                        float w = gaussianPdf(x, fSigma);\n                        vec2 uvOffset = direction * invSize * x;\n                        vec3 sample1 = texture2D( colorTexture, vUv + uvOffset).rgb;\n                        vec3 sample2 = texture2D( colorTexture, vUv - uvOffset).rgb;\n                        diffuseSum += (sample1 + sample2) * w;\n                        weightSum += 2.0 * w;\n                    }\n                    gl_FragColor = vec4(diffuseSum/weightSum, 1.0);\n                }"})}},{key:"getCompositeMaterial",value:function(t){return new Rx({defines:{NUM_MIPS:t},uniforms:{blurTexture1:{value:null},blurTexture2:{value:null},blurTexture3:{value:null},blurTexture4:{value:null},blurTexture5:{value:null},bloomStrength:{value:1},bloomFactors:{value:null},bloomRadius:{value:0}},vertexShader:"precision highp float;\n                precision highp int;\n\n                attribute vec3 position;\n                attribute vec2 uv;\n\n                uniform mat4 modelViewMatrix;\n                uniform mat4 projectionMatrix;\n\n                varying vec2 vUv;\n                void main() {\n                    vUv = uv;\n                    gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n                }",fragmentShader:"precision highp float;\n                precision highp int;\n\n                varying vec2 vUv;\n                uniform sampler2D blurTexture1;\n                uniform sampler2D blurTexture2;\n                uniform sampler2D blurTexture3;\n                uniform sampler2D blurTexture4;\n                uniform sampler2D blurTexture5;\n                uniform float bloomStrength;\n                uniform float bloomRadius;\n                uniform float bloomFactors[NUM_MIPS];\n\n                float lerpBloomFactor(const in float factor) {\n                    float mirrorFactor = 1.2 - factor;\n                    return mix(factor, mirrorFactor, bloomRadius);\n                }\n\n                void main() {\n                    gl_FragColor = bloomStrength * (\n                        lerpBloomFactor(bloomFactors[0]) * texture2D(blurTexture1, vUv) +\n                        lerpBloomFactor(bloomFactors[1]) * texture2D(blurTexture2, vUv) +\n                        lerpBloomFactor(bloomFactors[2]) * texture2D(blurTexture3, vUv) +\n                        lerpBloomFactor(bloomFactors[3]) * texture2D(blurTexture4, vUv) +\n                        lerpBloomFactor(bloomFactors[4]) * texture2D(blurTexture5, vUv)\n                    );\n                    // gl_FragColor = vec4(1.0, 0.0, 0.0, 1.0);\n                }"})}}],r&&m$(n.prototype,r),i&&m$(n,i),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,i}(rT);w$.BlurDirectionX=new Ay(1,0),w$.BlurDirectionY=new Ay(0,1);const A$={uniforms:{damp:{value:.96},tOld:{value:null},tNew:{value:null}},vertexShader:"\n\n\t\tvarying vec2 vUv;\n\n\t\tvoid main() {\n\n\t\t\tvUv = uv;\n\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\n\t\t}",fragmentShader:"\n\n\t\tuniform float damp;\n\n\t\tuniform sampler2D tOld;\n\t\tuniform sampler2D tNew;\n\n\t\tvarying vec2 vUv;\n\n\t\tvec4 when_gt( vec4 x, float y ) {\n\n\t\t\treturn max( sign( x - y ), 0.0 );\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvec4 texelOld = texture2D( tOld, vUv );\n\t\t\tvec4 texelNew = texture2D( tNew, vUv );\n\n\t\t\ttexelOld *= damp * when_gt( texelOld, 0.1 );\n\n\t\t\tgl_FragColor = max(texelNew, texelOld);\n\n\t\t}"};function E$(t){return E$="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},E$(t)}function x$(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,S$(r.key),r)}}function S$(t){var e=function(t,e){if("object"!=E$(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=E$(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==E$(e)?e:e+""}function T$(t,e,n){return e=I$(e),function(t,e){if(e&&("object"===E$(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,C$()?Reflect.construct(e,n||[],I$(t).constructor):e.apply(t,n))}function C$(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(C$=function(){return!!t})()}function I$(t){return I$=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},I$(t)}function k$(t,e){return k$=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},k$(t,e)}var P$=function(t){function e(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:.96;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(t=T$(this,e)).shader=A$,t.uniforms=H_.clone(t.shader.uniforms),t.uniforms.damp.value=n,t.textureComp=new Vy(window.innerWidth,window.innerHeight,{magFilter:jg}),t.textureComp.texture.format=nv,t.textureComp.texture.encoding=Xv,t.textureOld=new Vy(window.innerWidth,window.innerHeight,{magFilter:jg}),t.textureOld.texture.format=nv,t.textureOld.texture.encoding=Xv,t.compFsMaterial=new V_({uniforms:t.uniforms,vertexShader:t.shader.vertexShader,fragmentShader:t.shader.fragmentShader}),t.compFsQuad=new aT(t.compFsMaterial),t.copyFsMaterial=new c_,t.copyFsMaterial.toneMapped=!1,t.copyFsQuad=new aT(t.copyFsMaterial),t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&k$(t,e)}(e,t),n=e,(r=[{key:"render",value:function(t,e,n){this.uniforms.tOld.value=this.textureOld.texture,this.uniforms.tNew.value=n.texture,t.setRenderTarget(this.textureComp),this.compFsQuad.render(t),this.copyFsQuad.material.map=this.textureComp.texture,this.renderToScreen?(t.setRenderTarget(null),this.copyFsQuad.render(t)):(t.setRenderTarget(e),this.clear&&t.clear(),this.copyFsQuad.render(t));var r=this.textureOld;this.textureOld=this.textureComp,this.textureComp=r}},{key:"setSize",value:function(t,e){this.textureComp.setSize(t,e),this.textureOld.setSize(t,e)}},{key:"dispose",value:function(){this.textureComp.dispose(),this.textureOld.dispose(),this.compFsMaterial.dispose(),this.copyFsMaterial.dispose(),this.compFsQuad.dispose(),this.copyFsQuad.dispose()}}])&&x$(n.prototype,r),i&&x$(n,i),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,i}(rT);function R$(t){return R$="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},R$(t)}function O$(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,M$(r.key),r)}}function M$(t){var e=function(t,e){if("object"!=R$(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=R$(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==R$(e)?e:e+""}function L$(t,e,n){return e=N$(e),function(t,e){if(e&&("object"===R$(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,D$()?Reflect.construct(e,n||[],N$(t).constructor):e.apply(t,n))}function D$(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(D$=function(){return!!t})()}function N$(t){return N$=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},N$(t)}function B$(t,e){return B$=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},B$(t,e)}var j$={defines:{USE_3DTEXTURE:1},uniforms:{lut3d1:{value:null},lut3d2:{value:null},lut1:{value:null},lut2:{value:null},lutSize:{value:0},tDiffuse:{value:null},intensity:{value:1},progress:{value:0},exposure:{value:1}},vertexShader:"\n\n        varying vec2 vUv;\n\n        void main() {\n\n            vUv = uv;\n            gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\n        }\n\n    ",fragmentShader:"\n\n        uniform float lutSize;\n        #if USE_3DTEXTURE\n        precision highp sampler3D;\n        uniform sampler3D lut3d1;\n        uniform sampler3D lut3d2;\n        #else\n        uniform sampler2D lut1;\n        uniform sampler2D lut2;\n\n        vec3 lutLookup( sampler2D tex, float size, vec3 rgb ) {\n\n            float sliceHeight = 1.0 / size;\n            float yPixelHeight = 1.0 / ( size * size );\n\n            // Get the slices on either side of the sample\n            float slice = rgb.b * size;\n            float interp = fract( slice );\n            float slice0 = slice - interp;\n            float centeredInterp = interp - 0.5;\n\n            float slice1 = slice0 + sign( centeredInterp );\n\n            // Pull y sample in by half a pixel in each direction to avoid color\n            // bleeding from adjacent slices.\n            float greenOffset = clamp( rgb.g * sliceHeight, yPixelHeight * 0.5, sliceHeight - yPixelHeight * 0.5 );\n\n            vec2 uv0 = vec2(\n                rgb.r,\n                slice0 * sliceHeight + greenOffset\n            );\n            vec2 uv1 = vec2(\n                rgb.r,\n                slice1 * sliceHeight + greenOffset\n            );\n\n            vec3 sample0 = texture2D( tex, uv0 ).rgb;\n            vec3 sample1 = texture2D( tex, uv1 ).rgb;\n\n            return mix( sample0, sample1, abs( centeredInterp ) );\n\n        }\n        #endif\n\n        varying vec2 vUv;\n        uniform float intensity;\n        uniform sampler2D tDiffuse;\n        uniform float progress;\n        uniform float exposure;\n\n        void main() {\n\n            vec4 val = texture2D( tDiffuse, vUv );\n            vec4 lutVal;\n\n            // pull the sample in by half a pixel so the sample begins\n            // at the center of the edge pixels.\n            float pixelWidth = 1.0 / lutSize;\n            float halfPixelWidth = 0.5 / lutSize;\n            vec3 uvw = vec3( halfPixelWidth ) + val.rgb * ( 1.0 - pixelWidth );\n\n            #if USE_3DTEXTURE\n\n            lutVal = mix(vec4( texture( lut3d1, uvw ).rgb, val.a ), vec4( texture( lut3d2, uvw ).rgb, val.a ), progress);\n\n            #else\n\n            lutVal = mix(vec4( lutLookup( lut1, lutSize, uvw ), val.a ), vec4( lutLookup( lut2, lutSize, uvw ), val.a ), progress);\n\n            #endif\n\n            gl_FragColor = vec4( mix( val, lutVal, intensity * exposure ) );\n\n        }\n\n    "},z$=function(t){function e(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(t=L$(this,e,[j$])).lut=n.lut||null,t.intensity="intensity"in n?n.intensity:1,t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&B$(t,e)}(e,t),n=e,r=[{key:"lut1",get:function(){return this.material.uniforms.lut1.value||this.material.uniforms.lut3d1.value},set:function(t){var e=this.material;if(t!==this.lut1&&(e.uniforms.lut3d1.value=null,e.uniforms.lut1.value=null,t)){var n=t.isData3DTexture?1:0;n!==e.defines.USE_3DTEXTURE&&(e.defines.USE_3DTEXTURE=n,e.needsUpdate=!0),e.uniforms.lutSize.value=t.image.width,t.isData3DTexture?e.uniforms.lut3d1.value=t:e.uniforms.lut1.value=t}}},{key:"lut2",get:function(){return this.material.uniforms.lut2.value||this.material.uniforms.lut3d2.value},set:function(t){var e=this.material;if(t!==this.lut2&&(e.uniforms.lut3d2.value=null,e.uniforms.lut2.value=null,t)){var n=t.isData3DTexture?1:0;n!==e.defines.USE_3DTEXTURE&&(e.defines.USE_3DTEXTURE=n,e.needsUpdate=!0),e.uniforms.lutSize.value=t.image.width,t.isData3DTexture?e.uniforms.lut3d2.value=t:e.uniforms.lut2.value=t}}},{key:"intensity",get:function(){return this.material.uniforms.intensity.value},set:function(t){this.material.uniforms.intensity.value=t}},{key:"progress",get:function(){return this.material.uniforms.progress.value},set:function(t){this.material.uniforms.progress.value=t}},{key:"exposure",get:function(){return this.material.uniforms.exposure.value},set:function(t){this.material.uniforms.exposure.value=t}},{key:"swap",value:function(t,e){var n=t.composer.lut,r=e.composer.lut;this.enabled=!0,this.lut1=AK.get(n.resource).texture3D,this.lut2=AK.get(r.resource).texture3D}},{key:"setTransitionProgress",value:function(t){this.progress=t}}],r&&O$(n.prototype,r),i&&O$(n,i),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,i}(sT);const F$={uniforms:{tDiffuse:{value:null}},vertexShader:"\n\n\t\tvarying vec2 vUv;\n\n\t\tvoid main() {\n\n\t\t\tvUv = uv;\n\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\n\t\t}",fragmentShader:"\n\n\t\tuniform sampler2D tDiffuse;\n\n\t\tvarying vec2 vUv;\n\n\t\tvoid main() {\n\n\t\t\tvec4 tex = texture2D( tDiffuse, vUv );\n\n\t\t\tgl_FragColor = LinearTosRGB( tex );\n\n\t\t}"};function U$(t){return U$="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},U$(t)}function q$(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,G$(r.key),r)}}function G$(t){var e=function(t,e){if("object"!=U$(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=U$(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==U$(e)?e:e+""}function H$(t,e,n){return e=W$(e),function(t,e){if(e&&("object"===U$(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,V$()?Reflect.construct(e,n||[],W$(t).constructor):e.apply(t,n))}function V$(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(V$=function(){return!!t})()}function Q$(){return Q$="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=W$(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(arguments.length<3?t:n):i.value}},Q$.apply(this,arguments)}function W$(t){return W$=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},W$(t)}function Y$(t,e){return Y$=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Y$(t,e)}var K$={gammaCorrection:{enabled:!1},final:{enabled:!0}},X$=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),H$(this,e,arguments)}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Y$(t,e)}(e,t),n=e,r=[{key:"init",value:function(){this._scenes={},this._blurStrength=0,this._debug=this._createDebug(),this._renderTarget=this._createRenderTarget(),this._composer=this._createComposer()}},{key:"setup",value:function(){this._passes=this._createPasses()}},{key:"destroy",value:function(){Q$(W$(e.prototype),"destroy",this).call(this),this._removeDebug()}},{key:"passes",get:function(){return this._passes}},{key:"renderTarget",get:function(){return this._renderTarget}},{key:"prepare",value:function(t){this.updateSettings({gammaCorrection:{enabled:!0},final:{enabled:!0}}),this._passes.final.forceRenderToScreen=!1,this.render(t),this._passes.final.forceRenderToScreen=!0,this.updateSettings({})}},{key:"render",value:function(t){var e,n=null===(e=this.$root._drs)||void 0===e?void 0:e.hasRenderScaleChanged;this._passes.render.scene=t.scene,this._passes.render.camera=t.camera,n?this._passes.render.render(this.$renderer.instance,null,this._composer.renderTarget1):(this._passes.ssms&&(this._passes.ssms.uniforms.tBlur.value=this._passes.fogBloom.renderTargetsHorizontal[0].texture,this._passes.ssms.uniforms.uCameraNear.value=t.camera.near,this._passes.ssms.uniforms.uCameraFar.value=t.camera.far,this._passes.ssms.uniforms.uProjectionInverse.value=t.camera.projectionMatrixInverse,this._passes.ssms.uniforms.uViewMatrixInv.value=t.camera.matrixWorld),this._passes.bloom&&this._passes.bloom.enabled&&(this._passes.bloom.scene=t.scene,this._passes.bloom.camera=t.camera),this._passes.final&&this._passes.final.enabled&&(this._passes.final.uniforms.tDepth.value=this.passes.render.renderTarget.depthTexture,this._passes.final.uniforms.uTime.value+=.001,this._passes.final.uniforms.uProjectionInverse.value=t.camera.projectionMatrixInverse,this._passes.final.uniforms.uViewMatrixInv.value=t.camera.matrixWorld),this._composer.render())}},{key:"updateSettings",value:function(t){t=yX(JSON.parse(JSON.stringify(K$)),t),this._passes.gammaCorrection&&(this._passes.gammaCorrection.enabled=t.gammaCorrection.enabled),this._passes.bloom&&(this._passes.bloom.enabled=t.bloom.enabled,this._passes.bloom.threshold=t.bloom.threshold,this._passes.bloom.smoothWidth=t.bloom.smoothWidth,this._passes.bloom.strength=t.bloom.strength,this._passes.bloom.radius=t.bloom.radius),this._passes.chromaticAberration&&(this._passes.chromaticAberration.enabled=t.chromaticAberration.enabled,this._passes.chromaticAberration.material.uniforms.uCAMaxDistortion.value=t.chromaticAberration.maxDistortion,this._passes.chromaticAberration.material.uniforms.uCAScale.value=t.chromaticAberration.scale,this._passes.chromaticAberration.material.uniforms.uCASize.value=t.chromaticAberration.size),this._passes.final&&(this._passes.final.enabled=t.final.enabled),this._passes.lut&&(this._passes.lut.enabled=t.lut.enabled)}},{key:"_createRenderTarget",value:function(){var t=new Vy(0,0);return t.samples=jK.composer.samples,t.texture.format=nv,t.texture.encoding=Xv,t.texture.minFilter=Ug,t.texture.magFilter=Ug,t.texture.generateMipmaps=!1,t}},{key:"_createComposer",value:function(){return new cT(this.$renderer.instance,this._renderTarget)}},{key:"_createPasses",value:function(){var t={};return t.render=this._createRenderPass(),t.gammaCorrection=this._createGammaCorrectionPass(),t.final=this._createFinalPass(),t}},{key:"_createRenderPass",value:function(){var t=new i$(null,null);return this._composer.addPass(t),t}},{key:"_createFogBloomPass",value:function(){var t=this,e=new w$(this._renderer,new Ay,.42,0,0);if(e.enabled=!0,e.resolutionScale=.5,this._composer.addPass(e),this._debug){var n=this._debug.addFolder({title:"Fog bloom",expanded:!1});n.addInput(e,"resolutionScale",{label:"resolution",options:{1:1,.5:.5,.25:.25,.2:.2,.1:.1,.05:.05}}).on("change",(function(){e.setSize(t._width,t._height)})),n.addInput(e,"strength",{min:0,max:3}),n.addInput(e,"radius",{min:0,max:1})}return e}},{key:"_createSSMSPass",value:function(){var t=this,e=AK.get("curve-linear");e.minFilter=Ug;var n=AK.get("curve-non-linear-1");n.minFilter=Ug;var r=AK.get("curve-non-linear-2");r.minFilter=Ug;var i=AK.get("curve-non-linear-3");i.minFilter=Ug;var o,a,s=new f$;if(s.enabled=!0,s.uniforms.tDepthCurve.value=r,s.uniforms.tDepth.value=this._renderTarget.depthTexture,s.uniforms.uDepthOffset.value=-.085,s.uniforms.uShowBottom.value=!1,s.uniforms.uBottom.value=new Ay(31,-16),this._composer.addPass(s),this._debug){var l={bottom:{min:s.uniforms.uBottom.value.y,max:s.uniforms.uBottom.value.x}},u={"curve-linear":e,"curve-non-linear-1":n,"curve-non-linear-2":r,"curve-non-linear-3":i},c={};for(var d in u)c[d]=d;var f=this._debug.addFolder({title:"SSMS",expanded:!1});f.addInput(s,"enabled").on("change",(function(){t._passes.fogBloom.enabled=s.enabled})),f.addBlade({view:"list",label:"curve",value:(o=u,a=s.uniforms.tDepthCurve.value,Object.keys(o).find((function(t){return o[t]===a}))),options:c}).on("change",(function(t){var e=t.value;s.uniforms.tDepthCurve.value=u[e]})),f.addInput(s.uniforms.uDepthOffset,"value",{label:"depthOffset"}),f.addInput(s.uniforms.uShowBottom,"value",{label:"bottom"}),f.addInput(l,"bottom",{min:-100,max:100}).on("change",(function(){s.uniforms.uBottom.value.y=l.bottom.min,s.uniforms.uBottom.value.x=l.bottom.max}))}return s}},{key:"_createAfterimagePass",value:function(){var t=new P$;if(t.uniforms.damp.value=0,this._composer.addPass(t),this._debug){var e=this._debug.addFolder({title:"Afterimage",expanded:!1});e.addInput(t,"enabled"),e.addInput(t.uniforms.damp,"value",{label:"damp",min:0,max:1})}return t}},{key:"_createLUTPass",value:function(){var t=new z$;if(t.enabled=!1,this._composer.addPass(t),this._debug){var e=this._debug.addFolder({title:"LUT",expanded:!1});e.addInput(t,"enabled"),e.addInput(t,"intensity"),e.addInput(t,"progress",{min:0,max:1});var n=new fX;e.addButton({title:"Upload LUT"}).on("click",(function(){var e=document.createElement("input");e.setAttribute("type","file"),e.style.opacity="0",e.style.position="fixed",document.body.appendChild(e),e.addEventListener("input",(function(r){var i=e.files[0];document.body.removeChild(e);var o=new FileReader;o.onload=function(e){var r=n.parse(e.target.result);t.lut1=r.texture3D,t.lut2=r.texture3D},o.readAsText(i)}),{once:!0}),e.click()}))}return t}},{key:"_createGammaCorrectionPass",value:function(){var t=new sT(F$);return t.enabled=K$.gammaCorrection.enabled,this._composer.addPass(t),t}},{key:"_createBlurPass",value:function(){var t=this,e={enabled:!1},n=new sT(hX);n.enabled=e.enabled;var r=new sT(pX);if(r.enabled=e.enabled,this._composer.addPass(n),this._composer.addPass(r),this._resizeBlurPass(this._width,this._height),this._debug){var i=this._debug.addFolder({title:"Blur",expanded:!1});i.addInput(e,"enabled").on("change",(function(){n.enabled=e.enabled,r.enabled=e.enabled})),i.addInput(this,"_blurStrength",{label:"strength",min:0,max:1}).on("change",(function(){t._resizeBlurPass(t._width,t._height)}))}return{horizontalPass:n,verticalPass:r}}},{key:"_createCromaticAberrationPass",value:function(){var t=new qX({maxDistortion:-60,scale:.9,size:.2});if(this._composer.addPass(t),this._debug){var e=this._debug.addFolder({title:"Chromatic aberration",expanded:!1});e.addInput(t,"enabled"),e.addInput(t.material.uniforms.uCAMaxDistortion,"value",{label:"max distortion"}),e.addInput(t.material.uniforms.uCAScale,"value",{label:"scale"}),e.addInput(t.material.uniforms.uCASize,"value",{label:"size"})}return t}},{key:"_createBloomPass",value:function(){var t=new LX({type:OX,threshold:.15,smoothWidth:.29,strength:2.22,radius:1});if(t.enabled=!0,this._composer.addPass(t),this._debug){var e=this._debug.addFolder({title:"Bloom",expanded:!1});e.addInput(t,"enabled"),e.addInput(t,"strength",{min:0,max:3,step:.01}),e.addInput(t,"radius",{min:0,max:1,step:.01}),e.addInput(t,"threshold",{min:0,max:1,step:.01}),e.addInput(t,"smoothWidth",{min:0,max:1,step:.01})}return t}},{key:"_createFinalPass",value:function(){var t=new XX;return this._composer.addPass(t),this._debug&&this._debug.addFolder({title:"Final",expanded:!1}).addInput(t,"enabled"),t}},{key:"onWindowResize",value:function(t){this._resize(t)}},{key:"_resize",value:function(t){this._width=t.renderWidth,this._height=t.renderHeight,this._resizeComposers(t),this._resizeBlurPass(t.renderWidth,t.renderHeight)}},{key:"_resizeComposers",value:function(t){var e=t.renderWidth,n=t.renderHeight;this._composer.setSize(e,n)}},{key:"_resizeBlurPass",value:function(t,e){var n;null!==(n=this._passes)&&void 0!==n&&n.blur&&(this._passes.blur.horizontalPass.uniforms.h.value=1/(t/2)*this._blurStrength,this._passes.blur.verticalPass.uniforms.v.value=1/(e/2)*this._blurStrength)}},{key:"onExposureChange",value:function(t){this._passes.lut&&(this._passes.lut.exposure=t)}},{key:"_createDebug",value:function(){if(lK)return lK.addFolder({title:"Composer",index:2})}},{key:"_removeDebug",value:function(){this._debug&&this._debug.dispose()}}],r&&q$(n.prototype,r),i&&q$(n,i),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,i}(dY());const $$={brush:{depthInfluence:20,sizeMultiplier:.5,intensityVariation:.06,damping:8},hover:{mouseForce:50,deceleration:.98,attenuation:.96,cursorSize:400,dt:.008},mousedown:{mouseForce:.3,deceleration:1,attenuation:.98,cursorSize:500,dt:.008},advection:{randomDirection:.8,firstNoiseScale:1,secondNoiseScale:2,gapVelocityBoost:3,velocityThreshold:.05,intensityDim:.001,gapAmount:{min:.468,max:.51}},pressure:{iterations:1}};function Z$(t){return Z$="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Z$(t)}function J$(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,tZ(r.key),r)}}function tZ(t){var e=function(t,e){if("object"!=Z$(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=Z$(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Z$(e)?e:e+""}function eZ(t,e,n){return e=rZ(e),function(t,e){if(e&&("object"===Z$(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,nZ()?Reflect.construct(e,n||[],rZ(t).constructor):e.apply(t,n))}function nZ(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(nZ=function(){return!!t})()}function rZ(t){return rZ=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},rZ(t)}function iZ(t,e){return iZ=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},iZ(t,e)}var oZ=function(t){function e(t){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=eZ(this,e))._config=t.config,n._renderer=t.renderer,n._scene=t.scene,n._cameras=t.cameras,n._active=null,n._isEnabled=!1,n._debug=n._createDebug(),n._cameras=n._createCameras(),n._setupDebugTypes(),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&iZ(t,e)}(e,t),n=e,(r=[{key:"destroy",value:function(){this._destroyCameras()}},{key:"active",get:function(){return this._active}},{key:"get",value:function(t){return this._getCamera(t)}},{key:"enable",value:function(){var t;this._isEnabled=!0,null===(t=this._active)||void 0===t||t.enable()}},{key:"disable",value:function(){var t;this._isEnabled=!1,null===(t=this._active)||void 0===t||t.disable()}},{key:"activate",value:function(t){var e,n;if(!this._active||this._active.name!==t){null===(e=this._active)||void 0===e||e.hide(),null===(n=this._active)||void 0===n||n.disable();var r=this.get(t);r&&(this._active=r,this._active.enable(),this._active.show(),this.dispatchEvent("change",r)),this._updateDebugCamera(this._active)}}},{key:"_createCameras",value:function(){var t=this,e=[];return this._cameras.forEach((function(n){var r=Object.assign({debug:t._debug,renderer:t._renderer,scene:t._scene},n.options),i=new n.camera(r);i.name=n.name,e.push(i)})),e}},{key:"_getCamera",value:function(t){return this._cameras.find((function(e){return e.name===t}))}},{key:"_destroyCameras",value:function(){this._cameras.forEach((function(t){"function"==typeof t.destroy&&t.destroy()})),this._cameras=null}},{key:"update",value:function(t){var e=t.time,n=t.delta;this._isEnabled&&this._cameras.forEach((function(t){"function"==typeof t.update&&t.update({time:e,delta:n})}))}},{key:"resize",value:function(t,e){this._cameras.forEach((function(n){return n.resize(t,e)}))}},{key:"_createDebug",value:function(){if(lK)return lK.addFolder({title:"Cameras",tab:this._config.name})}},{key:"_setupDebugTypes",value:function(){var t=this;if(this._debug){var e={};this._cameras.forEach((function(t){e[t.name]=t.name})),this._debug.addBlade({view:"list",label:"camera",value:null,options:e}).on("change",(function(e){var n=e.value;t.activate(n)}))}}},{key:"_updateDebugCamera",value:function(t){this._debug&&(this._debug.children.find((function(t){return"camera"===t.label})).value=t.name)}}])&&J$(n.prototype,r),i&&J$(n,i),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,i}(kW);function aZ(t){return aZ="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},aZ(t)}function sZ(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,lZ(r.key),r)}}function lZ(t){var e=function(t,e){if("object"!=aZ(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=aZ(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==aZ(e)?e:e+""}var uZ=function(){return t=function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._debugContainer=e.debug,this._name=null,this._isEnabled=!1,this._instance=this._createInstance()},(e=[{key:"name",get:function(){return this._name},set:function(t){this._name=t}},{key:"instance",get:function(){return this._instance}},{key:"enable",value:function(){this._isEnabled=!0}},{key:"disable",value:function(){this._isEnabled=!1}},{key:"show",value:function(){this._showDebug()}},{key:"hide",value:function(){this._hideDebug()}},{key:"_createInstance",value:function(){var t=new W_(100,1,.1,1e3);return t.position.z=5,t}},{key:"resize",value:function(t,e){this._instance.aspect=t/e,this._instance.updateProjectionMatrix()}},{key:"_showDebug",value:function(){var t=this;if(this._debugContainer){var e=this,n={frustum:{min:this._instance.near,max:this._instance.far}};this._debug=this._debugContainer.addFolder({title:"Default"}),this._debug.addInput(n,"frustum",{min:.01,max:1e3,step:1}).on("change",(function(){t._instance.near=n.frustum.min,t._instance.far=n.frustum.max,r()})),this._debug.addInput(this._instance,"fov",{min:1,max:180}).on("change",r),this._debug.addInput(this._instance,"position",{min:1,max:180})}function r(){e._instance.updateProjectionMatrix()}}},{key:"_hideDebug",value:function(){var t;null===(t=this._debug)||void 0===t||t.dispose()}}])&&sZ(t.prototype,e),n&&sZ(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,n}();function cZ(t){return cZ="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},cZ(t)}function dZ(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,fZ(r.key),r)}}function fZ(t){var e=function(t,e){if("object"!=cZ(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=cZ(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==cZ(e)?e:e+""}var hZ=new Ky(50,20,0),pZ=function(){return t=function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._debugContainer=e.debug,this._renderer=e.renderer,this._near=e.near||.1,this._far=e.far||100,this._fov=e.fov||50,this._name=null,this._isEnabled=!1,this._instance=this._createInstance(),this._controls=this._createControls()},(e=[{key:"name",get:function(){return this._name},set:function(t){this._name=t}},{key:"instance",get:function(){return this._instance}},{key:"enable",value:function(){this._isEnabled=!0,this._controls.enabled=!0}},{key:"disable",value:function(){this._isEnabled=!0,this._controls.enabled=!1}},{key:"show",value:function(){this._showDebug()}},{key:"hide",value:function(){this._hideDebug()}},{key:"_createInstance",value:function(){var t=new W_(this._fov,1,this._near,this._far),e=JSON.parse(localStorage.getItem("camera-orbit-position"));return e?(t.position.x=e.x,t.position.y=e.y,t.position.z=e.z):t.position.copy(hZ),t}},{key:"_createControls",value:function(t){var e=new mT(this._instance,this._renderer.domElement);e.screenSpacePanning=!0,e.enabled=!1;var n=JSON.parse(localStorage.getItem("camera-orbit-target"));return n&&(e.target.x=n.x,e.target.y=n.y,e.target.z=n.z),e.update(),e}},{key:"resize",value:function(t,e){this._instance&&(this._instance.aspect=t/e,this._instance.updateProjectionMatrix())}},{key:"_showDebug",value:function(){var t=this;if(this._debugContainer){var e=this,n={frustum:{min:this._instance.near,max:this._instance.far}};this._debug=this._debugContainer.addFolder({title:"Orbit"}),this._debug.addInput(n,"frustum",{min:.01,max:5e3,step:1}).on("change",(function(){t._instance.near=n.frustum.min,t._instance.far=n.frustum.max,r()})),this._debug.addInput(this._instance,"fov",{min:1,max:180}).on("change",r),this._debug.addInput(this._instance,"zoom").on("change",r),this._debug.addButton({title:"Save position"}).on("click",(function(){localStorage.setItem("camera-orbit-position",JSON.stringify(t._instance.position)),localStorage.setItem("camera-orbit-target",JSON.stringify(t._controls.target))})),this._debug.addButton({title:"Reset position"}).on("click",(function(){localStorage.removeItem("camera-orbit-position"),localStorage.removeItem("camera-orbit-target"),t._instance.position.copy(hZ),t._controls.target.set(0,0,0),t._controls.update()}))}function r(){e._instance.updateProjectionMatrix()}}},{key:"_hideDebug",value:function(){var t;null===(t=this._debug)||void 0===t||t.dispose()}}])&&dZ(t.prototype,e),n&&dZ(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,n}();function mZ(t){return mZ="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},mZ(t)}function gZ(t,e,n){return e=function(t){var e=function(t,e){if("object"!=mZ(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=mZ(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==mZ(e)?e:e+""}(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var vZ=[{name:"tree_1",startAt:0,ground:{texture:"watercolor/ground/soft_green",color:"#8ba167",edges:-1.7,depth:4.1},sdf:{min:-.1},leaves:{color:"#ffffff",size:1.35,amplitude:3.07,duration:1.02},castShadow:!0,hasHole:!0,hasGround:!0,hasHoverEffect:!0,revealType:"default",sceneIndex:1,title:"Dales with Cows",cta:"Open the landscape"},{name:"cow_1",startAt:1.25,ground:{texture:"watercolor/ground/soft_green",color:"#8ba167",edges:.7,depth:2.19},sdf:{min:-.1},castShadow:!0,hasHole:!0,hasGround:!0,hasHoverEffect:!0,revealType:"default",sceneIndex:1},{name:"cow_2",startAt:2,ground:{texture:"watercolor/ground/soft_green",color:"#8ba167",edges:.59,depth:2.59},sdf:{min:-.1},castShadow:!0,hasHole:!0,hasGround:!0,hasHoverEffect:!0,revealType:"default",sceneIndex:1},{name:"cow_3",startAt:7,ground:{texture:"watercolor/ground/soft_green",color:"#8ba167",edges:1.2,depth:3.4},sdf:{min:-.1},castShadow:!0,hasHole:!0,hasGround:!0,hasHoverEffect:!0,revealType:"default",sceneIndex:1},{name:"land_back_1",startAt:8.25,ground:{texture:"watercolor/ground/brownish_green",color:"#8ba167",edges:1.2,depth:7},sdf:{min:-.1},leaves:{color:"#4f4f4f",size:.7,amplitude:1.11,duration:1.03},castShadow:!0,hasHole:!0,hasGround:!0,hasHoverEffect:!0,revealType:"default",sceneIndex:2,title:"Nidderdale Farm",cta:"Open the landscape"},{name:"walker_1",startAt:7.5,ground:{texture:"watercolor/ground/soft_green",edges:.7,depth:2.9,color:"#b8c7b1"},sdf:{min:-.1},castShadow:!0,hasHole:!0,hasGround:!0,hasHoverEffect:!0,revealType:"default",sceneIndex:2},{name:"land_front_1",startAt:9.25,ground:{texture:"watercolor/ground/brownish_green",color:"#8ba167",edges:.7,depth:2.69},sdf:{min:-.1},leaves:{color:"#4f4f4f",size:.85,amplitude:1.11,duration:1.03},castShadow:!0,hasHole:!0,hasGround:!0,hasHoverEffect:!0,revealType:"default",sceneIndex:2},{name:"land_back_2",startAt:15.5,ground:{texture:"watercolor/ground/brown",color:"#8ba167",edges:1.2,depth:6},sdf:{min:-.1},leaves:{color:"#efefef",size:1.15,amplitude:3,duration:1.025},castShadow:!0,hasHole:!0,hasGround:!0,hasHoverEffect:!0,revealType:"default",sceneIndex:3,title:"North York Moors",cta:"Open the landscape"},{name:"sheep_2",startAt:14,ground:{texture:"watercolor/ground/soft_green",color:"#8ba167",edges:1.2,depth:5},sdf:{min:-.1},castShadow:!0,hasHole:!0,hasGround:!0,hasHoverEffect:!0,revealType:"default",sceneIndex:3},{name:"sheep_1",startAt:14.5,ground:{texture:"watercolor/ground/soft_green",color:"#8ba167",edges:.7,depth:3.69},sdf:{min:-.1},castShadow:!0,hasHole:!0,hasGround:!0,hasHoverEffect:!0,revealType:"default",sceneIndex:3},{name:"land_front_2",startAt:14,ground:{texture:"watercolor/ground/brown",color:"#8ba167",edges:1.2,depth:3.59},sdf:{min:-.1},castShadow:!0,hasHole:!0,hasGround:!0,hasHoverEffect:!0,revealType:"default",sceneIndex:3},{name:"land_front_4",startAt:15,ground:{texture:"watercolor/ground/contrasted_green",color:"#8ba167",edges:.39,depth:4.39},sdf:{min:-.1},leaves:{color:"#a83232",size:1.02,amplitude:3,duration:1.025},castShadow:!0,hasHole:!0,hasGround:!0,hasHoverEffect:!0,revealType:"default",sceneIndex:3},{name:"land_back_3",startAt:20,ground:{texture:"watercolor/ground/brownish_green",color:"#8ba167",edges:1.2,depth:4.2},sdf:{min:-.1},leaves:{color:"#7c7c7c",size:.75,amplitude:3,duration:1.025},castShadow:!0,hasHole:!0,hasGround:!0,hasHoverEffect:!0,revealType:"default",sceneIndex:4,title:"Dales near Aysgarth",cta:"Open the landscape"},{name:"land_front_3",startAt:22,ground:{texture:"watercolor/ground/brownish_green",color:"#8ba167",edges:1.09,depth:3.9},sdf:{min:-.1},leaves:{color:"#7c7c7c",size:.6,amplitude:3,duration:1.025},castShadow:!0,hasHole:!0,hasGround:!0,hasHoverEffect:!0,revealType:"default",sceneIndex:4},{name:"land_front_5",startAt:23.5,ground:{texture:"watercolor/ground/contrasted_green",color:"#8ba167",edges:1.2,depth:3.4},sdf:{min:-.1},castShadow:!0,hasHole:!0,hasGround:!0,hasHoverEffect:!0,revealType:"default",sceneIndex:4},{name:"land_back_4",startAt:33,ground:{texture:"watercolor/ground/soft_green",color:"#8ba167",edges:1.2,depth:4},sdf:{min:-.1},leaves:{color:"#eb6262",size:1.26,amplitude:3,duration:1.025},castShadow:!0,hasHole:!0,hasGround:!0,hasHoverEffect:!0,revealType:"default",sceneIndex:5,title:"Dales with Sheep",cta:"Open the landscape"},{name:"sheep_6",startAt:32,ground:{texture:"watercolor/ground/soft_green",color:"#8ba167",edges:.7,depth:2.69},sdf:{min:-.1},castShadow:!0,hasHole:!0,hasGround:!0,hasHoverEffect:!0,revealType:"default",sceneIndex:5},{name:"sheep_3",startAt:32.5,ground:{texture:"watercolor/ground/soft_green",color:"#8ba167",edges:.29,depth:2.09},sdf:{min:-.1},castShadow:!0,hasHole:!0,hasGround:!0,hasHoverEffect:!0,revealType:"default",sceneIndex:5},{name:"sheep_4",startAt:31.5,ground:{texture:"watercolor/ground/soft_green",color:"#8ba167",edges:.39,depth:2.59},sdf:{min:-.1},castShadow:!0,hasHole:!0,hasGround:!0,hasHoverEffect:!0,revealType:"default",sceneIndex:5},{name:"sheep_5",startAt:33.5,ground:{texture:"watercolor/ground/soft_green",color:"#8ba167",edges:.39,depth:3},sdf:{min:-.1},castShadow:!0,hasHole:!0,hasGround:!0,hasHoverEffect:!0,revealType:"default",sceneIndex:5},{name:"sheep_7",startAt:34,ground:{texture:"watercolor/ground/soft_green",color:"#8ba167",edges:.7,depth:3},sdf:{min:-.1},castShadow:!0,hasHole:!0,hasGround:!0,hasHoverEffect:!0,revealType:"default",sceneIndex:5},{name:"land_back_5",startAt:16,hasHole:!1,hasGround:!1,castShadow:!1,ground:{texture:"watercolor/ground/soft_green",color:"#8ba167",edges:.7,depth:3},sdf:{min:-.1},hasHoverEffect:!0,revealType:"default",sceneIndex:6},gZ(gZ(gZ({name:"land_front_6",startAt:39,castShadow:!0,hasHole:!0,hasGround:!0,hasHoverEffect:!0,ground:{texture:"watercolor/ground/contrasted_green",color:"#8ba167",edges:.7,depth:7},leaves:{color:"#E5C459",size:1.15,amplitude:3,duration:1.025},sdf:{min:-.1}},"hasHoverEffect",!0),"revealType","default"),"sceneIndex",6),gZ(gZ(gZ(gZ(gZ({name:"land_front_7",startAt:39.5,castShadow:!0,hasHole:!0,hasGround:!0,hasHoverEffect:!0,ground:{texture:"watercolor/ground/brownish_green",color:"#8ba167",edges:.7,depth:7.5},leaves:{color:"#A6502A",size:1.15,amplitude:3,duration:1.025},sdf:{min:-.1}},"hasHoverEffect",!0),"revealType","default"),"sceneIndex",6),"title","Ribblehead Viaduct"),"cta","Open the landscape"),{name:"background_2",startAt:40,revealType:"fade",transparency:!0,hasHole:!1,hasGround:!1,castShadow:!1,ground:{texture:"watercolor/ground/soft_green",color:"#8ba167",edges:.7,depth:3},sdf:{min:-.1},hasHoverEffect:!0,sceneIndex:6},{name:"viaduc_1",startAt:40.5,hasGround:!1,ground:{texture:"watercolor/ground/soft_green",color:"#93aa5f",edges:.7,depth:6},sdf:{min:-.1},castShadow:!0,hasHole:!0,hasHoverEffect:!0,revealType:"default",sceneIndex:6}];function yZ(){return"ontouchstart"in window||navigator.maxTouchPoints>0}function bZ(t){return bZ="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},bZ(t)}function _Z(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,TZ(r.key),r)}}function wZ(t,e,n){return e=EZ(e),function(t,e){if(e&&("object"===bZ(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,AZ()?Reflect.construct(e,n||[],EZ(t).constructor):e.apply(t,n))}function AZ(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(AZ=function(){return!!t})()}function EZ(t){return EZ=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},EZ(t)}function xZ(t,e){return xZ=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},xZ(t,e)}function SZ(t,e,n){return(e=TZ(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function TZ(t){var e=function(t,e){if("object"!=bZ(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=bZ(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==bZ(e)?e:e+""}function CZ(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,i,o,a,s=[],l=!0,u=!1;try{if(o=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=o.call(n)).done)&&(s.push(r.value),s.length!==e);l=!0);}catch(t){u=!0,i=t}finally{try{if(!l&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(u)throw i}}return s}}(t,e)||kZ(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function IZ(t){return function(t){if(Array.isArray(t))return PZ(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||kZ(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function kZ(t,e){if(t){if("string"==typeof t)return PZ(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?PZ(t,e):void 0}}function PZ(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var RZ,OZ=new Map,MZ=function(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=kZ(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return a=t.done,t},e:function(t){s=!0,o=t},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}(vZ);try{for(MZ.s();!(RZ=MZ.n()).done;){var LZ=RZ.value,DZ=LZ.name,NZ=LZ.startAt,BZ=OZ.get(NZ||0)||[];BZ.push(DZ),OZ.set(NZ||0,BZ)}}catch(t){MZ.e(t)}finally{MZ.f()}var jZ=IZ(OZ.entries()).map((function(t){var e=CZ(t,2);return{frame:e[0],items:e[1]}})).sort((function(t,e){return t.frame-e.frame})),zZ=function(t){function e(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return SZ(t=wZ(this,e,[].concat(r)),"manualProgress",(function(){for(var e,n=0;n<jZ.length;n++)jZ[n].frame<=t._progress&&(e=n);null!=e&&(t.index=e)})),SZ(t,"update",(function(e){var n,r,i=e.delta;if(!vY){t.manualProgress(),t._action.time=t._progress,null===(n=t._mixer)||void 0===n||n.update(0),yZ()||t.mouseMoveCamera(i);var o=null===(r=jZ[t.index])||void 0===r?void 0:r.items;if(t._startPaperReveal&&o)for(var a=0;a<o.length;a++){var s;null===(s=t._papersContainer)||void 0===s||s.show(o[a],a)}}})),t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&xZ(t,e)}(e,t),n=e,r=[{key:"init",value:function(t){this._scene=AK.get("watercolor/scene").scene,this._debugContainer=t.debug,this._progress=0,this._rotateForceX=2.55,this._rotateForceY=9.2,this._coefRotate=.3,this._targetRotateX=0,this._targetRotateY=0,this._goingTo=!1,this.index=0,this._startPaperReveal=!1,this._startPaperRevealDuration=null,this._name=null,this._isEnabled=!1,this._instance=this._createInstance()}},{key:"name",get:function(){return this._name},set:function(t){this._name=t}},{key:"startPaperReveal",value:function(){var t,e=this;this.onScroll(),this.manualProgress();var n=ti.timeline();((null===(t=jZ[this.index])||void 0===t?void 0:t.items)||[]).forEach((function(t,r){var i;n.add(null===(i=e._papersContainer)||void 0===i?void 0:i.show(t,r),0)}));var r=ti.timeline(),i=[];return jZ.filter((function(t,n){return function(t){if(null==t)throw new TypeError("Cannot destructure "+t)}(t),n<e.index})).forEach((function(t){var e=t.items;return i.push.apply(i,IZ(e))})),i.forEach((function(t,n){var i;r.add(null===(i=e._papersContainer)||void 0===i?void 0:i.show(t,n),0)})),r.timeScale(100),n.add(r,0),this._startPaperReveal=!0,n}},{key:"stopPaperReveal",value:function(){this._startPaperReveal=!1}},{key:"instance",get:function(){return this._instance}},{key:"enable",value:function(){this._isEnabled=!0}},{key:"disable",value:function(){this._isEnabled=!1}},{key:"show",value:function(){}},{key:"hide",value:function(){this._hideDebug()}},{key:"_createInstance",value:function(){var t=zY.dimensions,e=t.innerWidth,n=t.innerHeight;this._cameraBaked=this._scene.getObjectByName("Camera_Animation_Baked"),this._cameraBaked.aspectRatio=e/n;var r=new W_(this._cameraBaked.fov,this._cameraBaked.aspectRatio,this._cameraBaked.nearPlane,this._cameraBaked.farPlane);r.updateProjectionMatrix(),this._container=new Xb,this._container.add(r),this._mixer=new US(this._container);var i=AK.get("watercolor/scene").animations,o=Jx.findByName(i,"Camera_Action_Baked");return this._duration=o.duration,this._action=this._mixer.clipAction(o),this.playClip(),this._scene.add(this._container),window.scrollTo(0,10),r}},{key:"playClip",value:function(){this._action.reset(),this._action.timeScale=1,this._action.setLoop(2200),this._action.clampWhenFinished=!0,this._action.play()}},{key:"loaderAnimation",value:function(){var t=ti.timeline();return t.fromTo(this._instance.position,{z:-.85},{z:.4,duration:5,ease:"sine.out"},0),t.fromTo(this._instance.position,{x:.25},{x:0,duration:5,ease:"sine.out"},0),t.fromTo(this._instance.rotation,{y:.037*-Math.PI},{y:0,duration:5,ease:"sine.out"},0),t}},{key:"addPapersContainer",value:function(t){this._papersContainer=t}},{key:"onMousemove",value:function(t){var e=t.ndc,n=e.x,r=e.y;if(!yZ()){var i=this._rotateForceX,o=this._rotateForceY;this._targetRotateX=JW(r*i),this._targetRotateY=JW(-n*o)}}},{key:"onScroll",value:function(){this._goingTo||(this._progress=Math.min(1,KY.sectionProgress)*(this._duration-10),KY.sectionProgress>=1&&(this._progress+=10*(KY.sectionProgress-1)))}},{key:"zoomOut",value:function(){var t,e;null===(t=this._zoomInTimeline)||void 0===t||t.kill(),null===(e=this._zoomOutTimeline)||void 0===e||e.kill();var n=ti.timeline();return n.to(this._instance.position,{z:2.5,ease:"power1.inOut",duration:1},0),this._zoomInTimeline=n,this._zoomInTimeline}},{key:"zoomIn",value:function(){var t,e;null===(t=this._zoomInTimeline)||void 0===t||t.kill(),null===(e=this._zoomOutTimeline)||void 0===e||e.kill();var n=ti.timeline();return n.to(this._instance.position,{z:0,ease:"power1.inOut",duration:2.25},0),this._zoomOutTimeline=n,this._zoomOutTimeline}},{key:"quickZoomIn",value:function(){var t,e;null===(t=this._zoomInTimeline)||void 0===t||t.kill(),null===(e=this._zoomOutTimeline)||void 0===e||e.kill();var n=ti.timeline();return n.fromTo(this._instance.position,{z:1},{z:0,ease:"power2.out",duration:1.5},0),this._zoomOutTimeline=n,this._zoomOutTimeline}},{key:"resize",value:function(t,e){this._instance&&(this._instance.aspect=t/e,this._instance.updateProjectionMatrix())}},{key:"mouseMoveCamera",value:function(t){var e=this._coefRotate,n=1-Math.exp(-e*t);this._instance.rotation.x!==this._targetRotateX&&(this._instance.rotation.x=ZW(this._instance.rotation.x,this._targetRotateX,n)),this._instance.rotation.y!==this._targetRotateY&&(this._instance.rotation.y=ZW(this._instance.rotation.y,this._targetRotateY,n))}},{key:"_showDebug",value:function(){this._debugContainer}},{key:"_hideDebug",value:function(){var t;null===(t=this._debug)||void 0===t||t.dispose()}}],r&&_Z(n.prototype,r),i&&_Z(n,i),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,i}(dY());function FZ(t){let e=0,n=0;for(const r of t)e+=r.w*r.h,n=Math.max(n,r.w);t.sort(((t,e)=>e.h-t.h));const r=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(e/.95)),n),h:1/0}];let i=0,o=0;for(const e of t)for(let t=r.length-1;t>=0;t--){const n=r[t];if(!(e.w>n.w||e.h>n.h)){if(e.x=n.x,e.y=n.y,o=Math.max(o,e.y+e.h),i=Math.max(i,e.x+e.w),e.w===n.w&&e.h===n.h){const e=r.pop();t<r.length&&(r[t]=e)}else e.h===n.h?(n.x+=e.w,n.w-=e.w):e.w===n.w?(n.y+=e.h,n.h-=e.h):(r.push({x:n.x+e.w,y:n.y,w:n.w-e.w,h:e.h}),n.y+=e.h,n.h-=e.h);break}}return{w:i,h:o,fill:e/(i*o)||0}}const UZ=function(t){return Math.pow(2,Math.ceil(Math.log(t)/Math.log(2)))};function qZ(t,e,n,r,i,o,a,s,l){for(var u=[0,0,n-1],c=[0,0,r-1],d=[1,n,1],f=[1,r,1],h=[0,i,n*l+i],p=[0,o,r*l+o],m=[i,n*l,i],g=[o,r*l,o],v=0;v<9;v++){var y=v%3,b=Math.floor(v/3);t.drawImage(e,u[y],c[b],d[y],f[b],h[y]+a,p[b]+s,m[y],g[b])}}const GZ=function(t){var e=t.textures,n=t.margin,r=void 0===n?0:n,i=t.debugDownload,o=void 0!==i&&i,a=t.encoding,s=void 0===a?Kv:a,l=t.powerOfTwo,u=void 0!==l&&l,c=t.square,d=void 0!==c&&c,f=t.scale,h=void 0===f?1:f,p=document.createElement("canvas"),m=p.getContext("2d"),g=e.map((function(t){return{w:t.image.width*h+2*r,h:t.image.height*h+2*r,texture:t}})),v=FZ(g),y=v.w,b=v.h,_=v.fill,w=new Ay(y,b);if(u&&(w.x=UZ(w.x),w.y=UZ(w.y)),d){var A=Math.max(w.x,w.y);w.x=A,w.y=A}m.clearRect(0,0,p.width,p.height),p.width=w.x,p.height=w.y;for(var E=[],x=0;x<g.length;x++){var S=g[x],T=S.texture.name,C=new Ay(S.x+r,S.y+r),I=new Ay(S.w-2*r,S.h-2*r);qZ(m,S.texture.image,I.x/h,I.y/h,r,r,S.x,S.y,h),I.divide(w),C.divide(w),E.push({name:T,offset:C,size:I})}var k=new Gy(p);if(k.encoding=s,k.flipY=!1,k.needsUpdate=!0,o){var P=document.createElement("a");P.href=p.toDataURL("image/png"),P.download="string"==typeof o?"".concat(o,".png"):"atlas.png",P.click()}return{texture:k,data:E,fill:_}},HZ="#define GLSLIFY 1\nvarying vec2 vUv;\n\nvoid main() {\n  gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n\n  vUv = uv;\n}";function VZ(t){return VZ="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},VZ(t)}function QZ(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function WZ(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,eJ(r.key),r)}}function YZ(t,e,n){return e&&WZ(t.prototype,e),n&&WZ(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function KZ(t,e,n){return e=$Z(e),function(t,e){if(e&&("object"===VZ(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,XZ()?Reflect.construct(e,n||[],$Z(t).constructor):e.apply(t,n))}function XZ(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(XZ=function(){return!!t})()}function $Z(t){return $Z=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},$Z(t)}function ZZ(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&JZ(t,e)}function JZ(t,e){return JZ=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},JZ(t,e)}function tJ(t,e,n){return(e=eJ(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function eJ(t){var e=function(t,e){if("object"!=VZ(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=VZ(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==VZ(e)?e:e+""}var nJ=function(t){function e(){return QZ(this,e),KZ(this,e,arguments)}return ZZ(e,t),YZ(e,[{key:"init",value:function(){var t=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};console.log("init"),e.instance=this,this._config=n.config,this._debug=this._createDebug(),e.textures.length>0&&e.textures.forEach((function(e,n){t.addTexture(e,n,e.focusArea)}))}},{key:"addTexture",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(t&&!(this.children.length>=this.MAX))if(null!=e&&this.children[e])this.children[e].uniforms.uTexture.value=t;else{var r=new rJ({texture:t,focusArea:n});this.add(r),this.onWindowResize()}}},{key:"reset",value:function(){var t=this;this.children.forEach((function(e){var n;null===(n=e.uniforms.uTexture.value)||void 0===n||n.dispose(),t.remove(e)}))}},{key:"_createDebug",value:function(){if(lK){var t=lK.addFolder({title:"Debug textures",expanded:!1});return t.addInput(this,"visible"),t}}},{key:"onWindowResize",value:function(){var t=this,e=zY.dimensions,n=e.innerWidth,r=e.innerHeight;this.baseWidth=n,this.baseHeight=r;var i=this.children.length,o=Math.ceil(2*Math.sqrt(i)),a=2*Math.ceil(i/o);this.children.forEach((function(e,n){var r=t.baseWidth/o,i=t.baseHeight/a,s=Math.floor(n/o),l=n%o;e.mesh.scale.set(r-5,i-5,1),e.mesh.position.x=l*r+.5*r,e.mesh.position.y=s*i+.5*i})),this.position.x=.5*-n,this.position.y=.5*-r}}],[{key:"addTexture",value:function(t){var n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;t&&(e.textures.length>=this.MAX||(null!=r&&e.textures[r]?e.textures[r]=t:e.textures.push(t),t.focusArea=i,null===(n=e.instance)||void 0===n||n.addTexture(t,r,i)))}},{key:"reset",value:function(){var t;null===(t=e.instance)||void 0===t||t.reset(),e.textures=[]}},{key:"scale",set:function(t){e.instance&&(e.instance.scale.x=t,e.instance.scale.y=t)}}])}(dY(Xb));tJ(nJ,"MAX",12),tJ(nJ,"instance",void 0),tJ(nJ,"textures",[]);var rJ=function(t){function e(){return QZ(this,e),KZ(this,e,arguments)}return ZZ(e,t),YZ(e,[{key:"init",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.texture,n=t.focusArea;this.uniforms={uTexture:{value:e},uFocusArea:{value:n||new Hy(0,0,1,1)}},this._createPlane()}},{key:"_createPlane",value:function(){this._material=new V_({uniforms:this.uniforms,vertexShader:HZ,fragmentShader:"#define GLSLIFY 1\nuniform sampler2D uTexture;\nuniform vec4 uFocusArea;\n\nvarying vec2 vUv;\n\nvoid main() {\n    vec2 uv = vec2(vUv.x, 1.-vUv.y);\n\n    uv.x *= uFocusArea.z;\n    uv.y *= uFocusArea.w;\n    uv.x += uFocusArea.x;\n    uv.y += uFocusArea.y;\n\n    vec4 color = texture2D(uTexture, uv);\n    color.a = 1.;\n\tgl_FragColor = color;\n}",transparent:!0}),this._material.needUpdates=!1;var t=new sw(1,1,1,1);this.mesh=new j_(t,this._material),this.mesh.renderOrder=1200,this.add(this.mesh)}}])}(dY(Xb));function iJ(t){return iJ="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},iJ(t)}function oJ(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,aJ(r.key),r)}}function aJ(t){var e=function(t,e){if("object"!=iJ(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=iJ(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==iJ(e)?e:e+""}function sJ(t,e,n){return e=cJ(e),function(t,e){if(e&&("object"===iJ(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,lJ()?Reflect.construct(e,n||[],cJ(t).constructor):e.apply(t,n))}function lJ(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(lJ=function(){return!!t})()}function uJ(){return uJ="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=cJ(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(arguments.length<3?t:n):i.value}},uJ.apply(this,arguments)}function cJ(t){return cJ=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},cJ(t)}function dJ(t,e){return dJ=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},dJ(t,e)}var fJ=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),sJ(this,e,arguments)}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&dJ(t,e)}(e,t),n=e,(r=[{key:"init",value:function(t){var e,n;this.props=t,this.uniforms=null===(e=this.props.material)||void 0===e?void 0:e.uniforms,this.forceRenderAll=!1,this.scene=new UE,this.camera=new Q_,null!==(n=this.props.material)&&void 0!==n&&null!==(n=n.defines)&&void 0!==n&&n.DEBUG_ATLAS||this._createStencilMesh(),this._createMesh()}},{key:"output",get:function(){return this.props.output}},{key:"_createMesh",value:function(){this.material=new Rx(this.props.material),this.material.depthTest=!1,this.material.defines.INSTANCE_COUNT=this.props.instances.length,this.stencilPlane&&(this.material.stencilWrite=!0,this.material.stencilRef=1,this.material.stencilFunc=514),this.material.uniforms.wasActive={value:new Array(this.props.instances.length).fill(0)},this.geometry=this.props.geometry,this.plane=new lx(this.geometry,this.material,this.props.instances.length),this.plane.renderOrder=-1,this.scene.add(this.plane)}},{key:"_createStencilMesh",value:function(){this.stencilPlane=new lx(this.props.geometry,new Rx({vertexShader:"\n\nfloat remap(float value, float start1, float stop1, float start2, float stop2) {\n  return start2 + (stop2 - start2) * ((value - start1) / (stop1 - start1));\n}\n\nattribute vec4 atlasRange;\nattribute float instance;\nattribute vec3 position;\nattribute vec2 uv;\n\nuniform bool active[INSTANCE_COUNT];\n\nprecision highp float;\n#define GLSLIFY 1\n\nvoid main(){\n    vec3 pos = position;\n\n    pos.x = (pos.x + 0.5) * atlasRange.z + atlasRange.x;\n    pos.y = (pos.y + 0.5) * atlasRange.w + atlasRange.y;\n\n    pos.x = remap(pos.x, 0., 1., -1., 1.);\n    pos.y = remap(pos.y, 0., 1., -1., 1.);\n\n    bool isActive = active[int(instance)];\n\n    if (!isActive) {\n      pos *= 0.;\n    }\n\n    gl_Position = vec4(pos, 1.0);\n}\n",fragmentShader:"precision highp float;\n#define GLSLIFY 1\n\nvoid main(){\n    gl_FragColor = vec4(1., 0., 0., 1.);\n}\n",depthWrite:!1,depthTest:!1,colorWrite:!1,stencilWrite:!0,stencilRef:1,stencilFunc:519,stencilZPass:7681,uniforms:{active:{value:new Array(this.props.instances.length).fill(!1)}},defines:{INSTANCE_COUNT:this.props.instances.length}}),this.props.instances.length),this.stencilPlane.renderOrder=-1,this.scene.add(this.stencilPlane)}},{key:"setForceRenderAll",value:function(t){this.forceRenderAll=t}},{key:"update",value:function(t){var e=t.stencil;if(t.last,this.$renderer.instance.setRenderTarget(this.props.output),this.stencilPlane){for(var n=0;n<this.props.instances.length;n++){var r=this.props.instances[n],i=this.forceRenderAll||r.active&&(r.active!==r.wasActive||r.wasActive!==r.wasActive2)||!r.active&&(r.active!==r.wasActive||r.wasActive!==r.wasActive2||r.wasActive2!==r.wasActive3||r.wasActive3!==r.wasActive4);(e||i)&&(e=!0,this.stencilPlane.material.uniforms.active.value[n]=r.active||r.wasActive||r.wasActive2||this.forceRenderAll,this.material.uniforms.wasActive.value[n]=r.active||this.forceRenderAll?1:0)}this.stencilPlane.visible=e,e&&this.$renderer.instance.clearStencil()}this.$renderer.instance.render(this.scene,this.camera),this.$renderer.instance.setRenderTarget(null)}},{key:"destroy",value:function(){this.material.dispose(),this.stencilPlane.dispose(),uJ(cJ(e.prototype),"destroy",this).call(this)}}])&&oJ(n.prototype,r),i&&oJ(n,i),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,i}(dY());function hJ(t){return hJ="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},hJ(t)}function pJ(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,mJ(r.key),r)}}function mJ(t){var e=function(t,e){if("object"!=hJ(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=hJ(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==hJ(e)?e:e+""}function gJ(t,e,n){return e=bJ(e),function(t,e){if(e&&("object"===hJ(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,vJ()?Reflect.construct(e,n||[],bJ(t).constructor):e.apply(t,n))}function vJ(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(vJ=function(){return!!t})()}function yJ(){return yJ="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=bJ(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(arguments.length<3?t:n):i.value}},yJ.apply(this,arguments)}function bJ(t){return bJ=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},bJ(t)}function _J(t,e){return _J=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},_J(t,e)}var wJ=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),gJ(this,e,arguments)}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&_J(t,e)}(e,t),n=e,r=[{key:"init",value:function(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};yJ(bJ(e.prototype),"init",this).call(this,{instances:t,geometry:n,material:{vertexShader:"\n\nfloat remap(float value, float start1, float stop1, float start2, float stop2) {\n  return start2 + (stop2 - start2) * ((value - start1) / (stop1 - start1));\n}\n\nattribute vec4 atlasRange;\nattribute float instance;\nattribute vec3 position;\nattribute vec2 uv;\n\nvarying vec2 vSimulationUv;\nvarying vec2 vUv;\n\nvarying float vAttenuation;\nvarying float vInstance;\nvarying float vWasActive;\n\nuniform float attenuation[INSTANCE_COUNT];\nuniform float wasActive[INSTANCE_COUNT];\n\nprecision highp float;\n#define GLSLIFY 1\n\nvoid main(){\n    vec3 pos = position;\n    vUv = pos.xy + 0.5;\n\n    pos.x = (pos.x + 0.5) * atlasRange.z + atlasRange.x;\n    pos.y = (pos.y + 0.5) * atlasRange.w + atlasRange.y;\n\n    vSimulationUv = pos.xy;\n\n    pos.x = remap(pos.x, 0., 1., -1., 1.);\n    pos.y = remap(pos.y, 0., 1., -1., 1.);\n\n    vAttenuation = attenuation[int(instance)];\n    vWasActive = wasActive[int(instance)];\n    vInstance = instance;\n\n    gl_Position = vec4(pos, 1.0);\n}\n",fragmentShader:"\nprecision highp float;\n#define GLSLIFY 1\n\nfloat cremap(float value, float start1, float stop1, float start2, float stop2) {\n  float r = start2 + (stop2 - start2) * ((value - start1) / (stop1 - start1));\n  return clamp(r, min(start2, stop2), max(start2, stop2));\n}\n\nvarying float vAttenuation;\n\nuniform sampler2D velocity;\nuniform sampler2D accumulation;\n\nvarying vec2 vSimulationUv;\nvarying float vInstance;\nvarying float vWasActive;\n\nvoid main(){\n    vec4 velocityData = texture2D(velocity, vSimulationUv);\n    vec2 srcDir = velocityData.xy;\n    float srcVel = length(velocityData.xy);\n\tfloat intensity = velocityData.z;\n\n    vec4 previousData = texture2D(accumulation, vSimulationUv);\n    float previousVel = previousData.b * vAttenuation;\n    vec2 previousDir = previousData.rg;\n\n    float vel = max(smoothstep(srcVel, 0., 0.01), previousVel);\n    vec2 dir = srcVel > 0.001 ? srcDir : previousDir;\n    gl_FragColor = vec4(dir, vel, intensity);\n\n    if (vWasActive == 0.) {\n        gl_FragColor = vec4(0.);\n    }\n\n    #ifdef DEBUG_ATLAS\n        gl_FragColor = vec4(vec3(.2 + .6 * vInstance / float(INSTANCE_COUNT)), 1.);\n    #endif\n}\n",defines:r,uniforms:{velocity:{value:null},accumulation:{value:null},attenuation:{value:new Array(t.length).fill(0)}}}})}},{key:"update",value:function(t){var n=t.input_velocity,r=t.input_accumulation,i=t.output,o=t.instances,a=t.stencil;this.uniforms.velocity.value=n.texture,this.uniforms.accumulation.value=r.texture,this.props.output=i;for(var s=0;s<o.length;s++){var l=o[s];this.uniforms.attenuation.value[s]=l.attenuation}yJ(bJ(e.prototype),"update",this).call(this,{stencil:a,last:!0})}}],r&&pJ(n.prototype,r),i&&pJ(n,i),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,i}(fJ);function AJ(t){return AJ="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},AJ(t)}function EJ(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,xJ(r.key),r)}}function xJ(t){var e=function(t,e){if("object"!=AJ(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=AJ(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==AJ(e)?e:e+""}function SJ(t,e,n){return e=IJ(e),function(t,e){if(e&&("object"===AJ(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,TJ()?Reflect.construct(e,n||[],IJ(t).constructor):e.apply(t,n))}function TJ(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(TJ=function(){return!!t})()}function CJ(){return CJ="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=IJ(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(arguments.length<3?t:n):i.value}},CJ.apply(this,arguments)}function IJ(t){return IJ=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},IJ(t)}function kJ(t,e){return kJ=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},kJ(t,e)}var PJ=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),SJ(this,e,arguments)}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&kJ(t,e)}(e,t),n=e,r=[{key:"init",value:function(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=AK.get("noise/rgb-fractal");i.wrapS=Dg,i.wrapT=Dg,CJ(IJ(e.prototype),"init",this).call(this,{instances:t,geometry:n,material:{vertexShader:"\n\nfloat remap(float value, float start1, float stop1, float start2, float stop2) {\n  return start2 + (stop2 - start2) * ((value - start1) / (stop1 - start1));\n}\n\nattribute vec4 atlasRange;\nattribute float instance;\nattribute vec3 position;\nattribute vec2 uv;\n\nvarying vec4 vRemap;\nvarying vec2 vSimulationUv;\nvarying vec2 vUv;\n\nuniform vec2 fboSize[INSTANCE_COUNT];\nuniform float deceleration[INSTANCE_COUNT];\nuniform float dt[INSTANCE_COUNT];\n\nvarying vec2 vFboSize;\nvarying float vDeceleration;\nvarying float vDt;\n\nprecision highp float;\n#define GLSLIFY 1\n\nvoid main(){\n    vec3 pos = position;\n    vUv = pos.xy + 0.5;\n\n    pos.x = (pos.x + 0.5) * atlasRange.z + atlasRange.x;\n    pos.y = (pos.y + 0.5) * atlasRange.w + atlasRange.y;\n\n    vSimulationUv = pos.xy;\n    vRemap = atlasRange;\n\n    pos.x = remap(pos.x, 0., 1., -1., 1.);\n    pos.y = remap(pos.y, 0., 1., -1., 1.);\n\n    vFboSize = fboSize[int(instance)];\n    vDeceleration = deceleration[int(instance)];\n    vDt = dt[int(instance)];\n\n    gl_Position = vec4(pos, 1.0);\n}\n",fragmentShader:"precision highp float;\n#define GLSLIFY 1\nuniform sampler2D velocity;\nuniform sampler2D noise;\n\nuniform float randomDirection;\nuniform float firstNoiseScale;\nuniform float secondNoiseScale;\nuniform float velocityThreshold;\nuniform float gapVelocityBoost;\nuniform vec2 gapAmount;\nuniform float intensityDim;\n\nvarying float vDt;\nvarying float vDeceleration;\nvarying vec2 vFboSize;\n\nvarying vec4 vRemap;\nvarying vec2 vSimulationUv;\nvarying vec2 vUv;\n\nfloat cubicInOut(float t) {\n  return t < 0.5\n    ? 4.0 * t * t * t\n    : 0.5 * pow(2.0 * t - 2.0, 3.0) + 1.0;\n}\n\nvoid main(){\n    vec2 ratio = max(vFboSize.x, vFboSize.y) / vFboSize;\n\n    vec4 baseData = texture2D(velocity, vSimulationUv);\n    vec2 vel = baseData.xy;\n\tfloat intensity = baseData.z;\n\n    float speed = length(vel);\n    vec3 noiseData = texture2D(noise, vUv * firstNoiseScale).rgb;\n    vec3 noiseData2 = texture2D(noise, vUv * secondNoiseScale).rgb;\n    vec2 noiseDirection = normalize((noiseData.gb - 0.5) * 2.);\n    float threshold = cubicInOut(noiseData.r) * velocityThreshold;\n    bool isAboveThreshold = speed < threshold;\n\n    if (isAboveThreshold) vel *= smoothstep(gapAmount.x, gapAmount.y, noiseData2.r);\n\n    vec2 nextVelOffset = mix(vel, noiseDirection * length(vel), randomDirection) * vDt * ratio; // Should depend on size ?\n    if (isAboveThreshold) nextVelOffset *= mix(0., gapVelocityBoost, noiseData.r);\n\n    vec2 uv2 = vSimulationUv - nextVelOffset;\n    uv2.x = clamp(uv2.x, vRemap.x, vRemap.z + vRemap.x);\n    uv2.y = clamp(uv2.y, vRemap.y, vRemap.w + vRemap.y);\n\n\tvec3 newData = texture2D(velocity, uv2).xyz;\n\tfloat newIntensity = newData.z;\n    vel = newData.xy;\n\n    float dimFactor = 1. + smoothstep(0.001, 0., length(nextVelOffset)) * 3.;\n    newIntensity = max(max(newIntensity, intensity) - intensityDim * dimFactor, 0.);\n\n\t/** v1 **/\n\n    gl_FragColor = vec4(vel * vDeceleration, newIntensity, 0.0);\n\n\t/** v2 **\n\n\tvel *= noiseData2.r * 3.;\n\n\t// back trace\n\tvec2 spot_new = vSimulationUv;\n\tvec2 spot_old = spot_new - vel * vDt * ratio;\n\tvel = texture2D(velocity, spot_old).xy;\n\n\tvel *= noiseData2.r * 2.;\n\n\t// forward trace\n\tvec2 spot_new2 = spot_old + vel * vDt * ratio;\n\tvec2 error = spot_new2 - spot_new;\n\tvec2 spot_new3 = spot_new - error / 2.0;\n\tvel = texture2D(velocity, spot_new3).xy;\n\n\tvel *= noiseData2.r * 1.;\n\n\t// back trace 2\n\tvec2 spot_old2 = spot_new3 - vel * vDt * ratio;\n\tvel = texture2D(velocity, spot_old2).xy;\n\n\tgl_FragColor = vec4(vel * vDeceleration, newIntensity, 0.0);\n\n\t/** base simulation **\n\n\t// back trace\n\tvec2 spot_new = vSimulationUv;\n\tvec2 spot_old = spot_new - vel * vDt * ratio;\n\tvel = texture2D(velocity, spot_old).xy;\n\n\t// forward trace\n\tvec2 spot_new2 = spot_old + vel * vDt * ratio;\n\tvec2 error = spot_new2 - spot_new;\n\tvec2 spot_new3 = spot_new - error / 2.0;\n\tvel = texture2D(velocity, spot_new3).xy;\n\n\t// back trace 2\n\tvec2 spot_old2 = spot_new3 - vel * vDt * ratio;\n\tvel = texture2D(velocity, spot_old2).xy;\n\n\tgl_FragColor = vec4(vel * vDeceleration, 0.0, 0.0);\n\n\t/**/\n}\n",defines:r,uniforms:{fboSize:{value:new Array(t.length).fill(null).map((function(){return new Ay}))},velocity:{value:null},noise:{value:i},randomDirection:{value:$$.advection.randomDirection},firstNoiseScale:{value:$$.advection.firstNoiseScale},secondNoiseScale:{value:$$.advection.secondNoiseScale},gapVelocityBoost:{value:$$.advection.gapVelocityBoost},velocityThreshold:{value:$$.advection.velocityThreshold},intensityDim:{value:$$.advection.intensityDim},gapAmount:{value:new Ay($$.advection.gapAmount.min,$$.advection.gapAmount.max)},deceleration:{value:new Array(t.length).fill(0)},dt:{value:new Array(t.length).fill(0)}}},output:null})}},{key:"update",value:function(t){var n=t.input,r=t.output,i=t.instances,o=t.stencil;this.props.output=r,this.uniforms.velocity.value=n.texture,this.uniforms.randomDirection.value=$$.advection.randomDirection,this.uniforms.firstNoiseScale.value=$$.advection.firstNoiseScale,this.uniforms.secondNoiseScale.value=$$.advection.secondNoiseScale,this.uniforms.gapVelocityBoost.value=$$.advection.gapVelocityBoost,this.uniforms.velocityThreshold.value=$$.advection.velocityThreshold,this.uniforms.intensityDim.value=$$.advection.intensityDim,this.uniforms.gapAmount.value.set($$.advection.gapAmount.min,$$.advection.gapAmount.max);for(var a=0;a<i.length;a++){var s=i[a];this.uniforms.fboSize.value[a].copy(s.fboSize),this.uniforms.deceleration.value[a]=s.deceleration,this.uniforms.dt.value[a]=s.dt}CJ(IJ(e.prototype),"update",this).call(this,{stencil:o})}}],r&&EJ(n.prototype,r),i&&EJ(n,i),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,i}(fJ);function RJ(t){return RJ="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},RJ(t)}function OJ(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,MJ(r.key),r)}}function MJ(t){var e=function(t,e){if("object"!=RJ(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=RJ(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==RJ(e)?e:e+""}function LJ(t,e,n){return e=BJ(e),function(t,e){if(e&&("object"===RJ(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,DJ()?Reflect.construct(e,n||[],BJ(t).constructor):e.apply(t,n))}function DJ(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(DJ=function(){return!!t})()}function NJ(){return NJ="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=BJ(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(arguments.length<3?t:n):i.value}},NJ.apply(this,arguments)}function BJ(t){return BJ=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},BJ(t)}function jJ(t,e){return jJ=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},jJ(t,e)}var zJ=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),LJ(this,e,arguments)}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&jJ(t,e)}(e,t),n=e,r=[{key:"init",value:function(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};NJ(BJ(e.prototype),"init",this).call(this,{instances:t,geometry:n,material:{vertexShader:"\n\nfloat remap(float value, float start1, float stop1, float start2, float stop2) {\n  return start2 + (stop2 - start2) * ((value - start1) / (stop1 - start1));\n}\n\nattribute vec4 atlasRange;\nattribute float instance;\nattribute vec3 position;\nattribute vec2 uv;\n\nvarying vec4 vRemap;\nvarying vec2 vSimulationUv;\nvarying vec2 vUv;\n\nuniform float dt[INSTANCE_COUNT];\nuniform vec2 px[INSTANCE_COUNT];\n\nvarying float vDt;\nvarying vec2 vPx;\n\nprecision highp float;\n#define GLSLIFY 1\n\nvoid main(){\n    vec3 pos = position;\n    vUv = pos.xy + 0.5;\n\n    pos.x = (pos.x + 0.5) * atlasRange.z + atlasRange.x;\n    pos.y = (pos.y + 0.5) * atlasRange.w + atlasRange.y;\n\n    vSimulationUv = pos.xy;\n    vRemap = atlasRange;\n\n    vDt = dt[int(instance)];\n    vPx = px[int(instance)];\n\n    pos.x = remap(pos.x, 0., 1., -1., 1.);\n    pos.y = remap(pos.y, 0., 1., -1., 1.);\n\n    gl_Position = vec4(pos, 1.0);\n}\n",fragmentShader:"precision highp float;\n#define GLSLIFY 1\nuniform sampler2D velocity;\n\nvarying float vDt;\nvarying vec2 vPx;\n\nvarying vec4 vRemap;\nvarying vec2 vSimulationUv;\n\nvoid main(){\n    vec2 clampMin = vec2(vRemap.x + vPx.x, vRemap.y + vPx.y);\n    vec2 clampMax = vec2(vRemap.z + vRemap.x - vPx.x, vRemap.w + vRemap.y - vPx.y);\n\n    float x0 = texture2D(velocity, clamp(vSimulationUv-vec2(vPx.x, 0), clampMin, clampMax)).x;\n    float x1 = texture2D(velocity, clamp(vSimulationUv+vec2(vPx.x, 0), clampMin, clampMax)).x;\n    float y0 = texture2D(velocity, clamp(vSimulationUv-vec2(0, vPx.y), clampMin, clampMax)).y;\n    float y1 = texture2D(velocity, clamp(vSimulationUv+vec2(0, vPx.y), clampMin, clampMax)).y;\n    float divergence = (x1-x0 + y1-y0) / 2.;\n\n    gl_FragColor = vec4(divergence / vDt);\n}\n",defines:r,uniforms:{velocity:{value:null},px:{value:new Array(t.length).fill(null).map((function(){return new Ay}))},dt:{value:new Array(t.length).fill(0)}}}})}},{key:"update",value:function(t){var n=t.input,r=t.output,i=t.instances,o=t.stencil;this.uniforms.velocity.value=n.texture,this.props.output=r;for(var a=0;a<i.length;a++){var s=i[a];this.uniforms.dt.value[a]=s.dt,this.uniforms.px.value[a].copy(s.cellScale)}NJ(BJ(e.prototype),"update",this).call(this,{stencil:o})}}],r&&OJ(n.prototype,r),i&&OJ(n,i),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,i}(fJ);function FJ(t){return FJ="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},FJ(t)}function UJ(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,qJ(r.key),r)}}function qJ(t){var e=function(t,e){if("object"!=FJ(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=FJ(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==FJ(e)?e:e+""}var GJ=function(){return t=function t(){var e,n,r;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),e=this,r=1,(n=qJ(n="longpressTriggerTime"))in e?Object.defineProperty(e,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[n]=r,this._viewportWidth=zY.innerWidth,this._viewportHeight=zY.fullHeight,this._position=new Ay,this._diff=new Ay,this._normalized=new Ay,this._ndc=new Ay,this._longpressProgress=0,this._state={mouseDown:!1,mouseMoving:!1,downTime:0,longpressOn:!1,htmlTarget:null},this._bindAll(),this._setupEventListeners(!0)},e=[{key:"destroy",value:function(){this._setupEventListeners(!1)}},{key:"_bindAll",value:function(){this._mousedownHandler=this._mousedownHandler.bind(this),this._mousemoveHandler=this._mousemoveHandler.bind(this),this._mouseupHandler=this._mouseupHandler.bind(this),this._resizeHandler=this._resizeHandler.bind(this),this._update=this._update.bind(this)}},{key:"_setupEventListeners",value:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],e=t?"addEventListener":"removeEventListener";window[e]("pointerdown",this._mousedownHandler),yZ()?(window[e]("touchmove",this._mousemoveHandler),window[e]("touchend",this._mouseupHandler)):(window[e]("mousemove",this._mousemoveHandler),window[e]("pointerup",this._mouseupHandler)),zY[e]("resize",this._resizeHandler),t?this._frameRef=requestAnimationFrame(this._update):this._frameRef&&cancelAnimationFrame(this._frameRef)}},{key:"_resize",value:function(t){var e=t.innerWidth,n=t.fullHeight;this._viewportWidth=e,this._viewportHeight=n}},{key:"_updatePosition",value:function(t,e){0!=this._position.x&&0!=this._position.y&&this._state.mouseMoving&&(this._diff.x=Math.abs(this._position.x-t),this._diff.y=Math.abs(this._position.y-e)),this._position.x=t,this._position.y=e,this._updateNormalized(t,e),this._updateNdc(t,e)}},{key:"_updateNormalized",value:function(t,e){this._normalized.x=t/this._viewportWidth,this._normalized.y=e/this._viewportHeight}},{key:"_updateNdc",value:function(t,e){this._ndc.x=t/this._viewportWidth*2-1,this._ndc.y=-e/this._viewportHeight*2+1}},{key:"_triggerEvent",value:function(t){fY.trigger({name:t,fireAtStart:!1},{position:this._position,normalized:this._normalized,ndc:this._ndc,longpressProgress:this._longpressProgress,htmlTarget:this._state.htmlTarget})}},{key:"_mousedownHandler",value:function(t){0===t.button&&(this._state.mouseDown=!0,this._state.mouseMoving=!1,this._state.downTime=0,this._state.downStartTime=Date.now(),this._state.longpressOn=!1,this._diff.set(0,0),this._state.htmlTarget=t.target,this._mouseEventHandler(t,"mousedown"))}},{key:"_mousemoveHandler",value:function(t){this._state.mouseMoving=!0,this._mouseEventHandler(t,"mousemove")}},{key:"_mouseupHandler",value:function(t){this._state.mouseMoving=!1,this._state.mouseDown=!1,this._mouseEventHandler(t,"mouseup"),this._state.longpressOn&&(this._state.longpressOn=!1,this._longpressProgress=0,this._mouseEventHandler(null,"longpressing"),this._mouseEventHandler(null,"longpressOff"))}},{key:"_mouseEventHandler",value:function(t,e){if(null!=t){var n,r,i={x:t.clientX||t.touches&&(null===(n=t.touches[0])||void 0===n?void 0:n.clientX),y:t.clientY||t.touches&&(null===(r=t.touches[0])||void 0===r?void 0:r.clientY)};null!=i.x&&null!=i.y&&this._updatePosition(i.x,i.y)}this._triggerEvent(e)}},{key:"_resizeHandler",value:function(t){this._resize(t)}},{key:"_update",value:function(){var t=this._state,e=t.mouseDown,n=t.longpressOn;e&&(this._state.downTime=(Date.now()-this._state.downStartTime)/1e3,this._longpressProgress=Math.min(1,this._state.downTime/this.longpressTriggerTime),Math.max(this._diff.x,this._diff.y)>15&&(this._state.downStartTime=Date.now()),n||this._mouseEventHandler(null,"longpressing"),1!=this._longpressProgress||n||(this._state.longpressOn=!0,this._mouseEventHandler(null,"longpressOn"))),this._frameRef=requestAnimationFrame(this._update)}}],e&&UJ(t.prototype,e),n&&UJ(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,n}();const HJ=new GJ;function VJ(t){return VJ="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},VJ(t)}function QJ(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,WJ(r.key),r)}}function WJ(t){var e=function(t,e){if("object"!=VJ(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=VJ(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==VJ(e)?e:e+""}function YJ(t,e,n){return e=$J(e),function(t,e){if(e&&("object"===VJ(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,KJ()?Reflect.construct(e,n||[],$J(t).constructor):e.apply(t,n))}function KJ(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(KJ=function(){return!!t})()}function XJ(){return XJ="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=$J(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(arguments.length<3?t:n):i.value}},XJ.apply(this,arguments)}function $J(t){return $J=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},$J(t)}function ZJ(t,e){return ZJ=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},ZJ(t,e)}var JJ=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),YJ(this,e,arguments)}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&ZJ(t,e)}(e,t),n=e,r=[{key:"init",value:function(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};XJ($J(e.prototype),"init",this).call(this,{instances:t,geometry:n,material:{vertexShader:"\n\nfloat remap(float value, float start1, float stop1, float start2, float stop2) {\n  return start2 + (stop2 - start2) * ((value - start1) / (stop1 - start1));\n}\n\nattribute vec4 atlasRange;\nattribute float instance;\nattribute vec3 position;\nattribute vec2 uv;\n\nvarying vec2 vSimulationUv;\nvarying vec2 vUv;\n\nuniform vec2 force[INSTANCE_COUNT];\nuniform vec2 center[INSTANCE_COUNT];\nuniform vec2 lastCenter[INSTANCE_COUNT];\nuniform float scale[INSTANCE_COUNT];\nuniform float lastScale[INSTANCE_COUNT];\nuniform bool isMouseDown[INSTANCE_COUNT];\nuniform vec2 fboSize[INSTANCE_COUNT];\nuniform float intensity[INSTANCE_COUNT];\nuniform float ratio[INSTANCE_COUNT];\nuniform float wasActive[INSTANCE_COUNT];\n\nvarying vec2 vForce;\nvarying vec2 vCenter;\nvarying vec2 vLastCenter;\nvarying float vScale;\nvarying float vLastScale;\nvarying float vIsMouseDown;\nvarying vec2 vFboSize;\nvarying float vIntensity;\nvarying float vRatio;\nvarying float vWasActive;\n\nprecision highp float;\n#define GLSLIFY 1\n\nvoid main(){\n    vec3 pos = position;\n    vUv = pos.xy + 0.5;\n\n    pos.x = (pos.x + 0.5) * atlasRange.z + atlasRange.x;\n    pos.y = (pos.y + 0.5) * atlasRange.w + atlasRange.y;\n\n    vSimulationUv = pos.xy;\n\n    pos.x = remap(pos.x, 0., 1., -1., 1.);\n    pos.y = remap(pos.y, 0., 1., -1., 1.);\n\n    vForce = force[int(instance)];\n    vCenter = center[int(instance)];\n    vLastCenter = lastCenter[int(instance)];\n    vScale = scale[int(instance)];\n    vLastScale = lastScale[int(instance)];\n    vIsMouseDown = isMouseDown[int(instance)] ? 1. : 0.;\n    vFboSize = fboSize[int(instance)];\n    vIntensity = intensity[int(instance)];\n    vRatio = ratio[int(instance)];\n    vWasActive = wasActive[int(instance)];\n    \n    gl_Position = vec4(pos, 1.0);\n}\n",fragmentShader:"precision highp float;\n#define GLSLIFY 1\n\nvarying vec2 vForce;\nvarying vec2 vCenter;\nvarying vec2 vLastCenter;\nvarying float vScale;\nvarying float vLastScale;\nvarying float vIsMouseDown;\nvarying vec2 vFboSize;\nvarying float vIntensity;\nvarying float vRatio;\n\nuniform sampler2D src;\n\nvarying vec2 vSimulationUv;\nvarying vec2 vUv;\nvarying float vWasActive;\n\nfloat cro(in vec2 a, in vec2 b ) { return a.x*b.y - a.y*b.x; }\n    \nfloat sdUnevenCapsule( in vec2 p, in vec2 pa, in vec2 pb, in float ra, in float rb )\n{\n    p  -= pa;\n    pb -= pa;\n    float h = dot(pb,pb);\n    vec2  q = vec2( dot(p,vec2(pb.y,-pb.x)), dot(p,pb) )/h;\n    \n    //-----------\n    \n    q.x = abs(q.x);\n    \n    float b = ra-rb;\n    vec2  c = vec2(sqrt(h-b*b),b);\n    \n    float k = cro(c,q);\n    float m = dot(c,q);\n    float n = dot(q,q);\n    \n         if( k < 0.0 ) return sqrt(h*(n            )) - ra;\n    else if( k > c.x ) return sqrt(h*(n+1.0-2.0*q.y)) - rb;\n                       return m                       - ra;\n}\n\nfloat sdCircle( vec2 p, float r ) {\n    return length(p) - r;\n}\n\nfloat sdEllipse( in vec2 p, in vec2 ab )\n{\n    p = abs(p); if( p.x > p.y ) {p=p.yx;ab=ab.yx;}\n    float l = ab.y*ab.y - ab.x*ab.x;\n    float m = ab.x*p.x/l;      float m2 = m*m; \n    float n = ab.y*p.y/l;      float n2 = n*n; \n    float c = (m2+n2-1.0)/3.0; float c3 = c*c*c;\n    float q = c3 + m2*n2*2.0;\n    float d = c3 + m2*n2;\n    float g = m + m*n2;\n    float co;\n    if( d<0.0 )\n    {\n        float h = acos(q/c3)/3.0;\n        float s = cos(h);\n        float t = sin(h)*sqrt(3.0);\n        float rx = sqrt( -c*(s + t + 2.0) + m2 );\n        float ry = sqrt( -c*(s - t + 2.0) + m2 );\n        co = (ry+sign(l)*rx+abs(g)/(rx*ry)- m)/2.0;\n    }\n    else\n    {\n        float h = 2.0*m*n*sqrt( d );\n        float s = sign(q+h)*pow(abs(q+h), 1.0/3.0);\n        float u = sign(q-h)*pow(abs(q-h), 1.0/3.0);\n        float rx = -s - u - c*4.0 + 2.0*m2;\n        float ry = (s - u)*sqrt(3.0);\n        float rm = sqrt( rx*rx + ry*ry );\n        co = (ry/sqrt(rm-rx)+2.0*g/rm-m)/2.0;\n    }\n    vec2 r = ab * vec2(co, sqrt(1.0-co*co));\n    return length(r-p) * sign(p.y-r.y);\n}\n\nvoid main(){\n    vec2 ratio = max(vFboSize.x, vFboSize.y) / vFboSize;\n    float planeRatio = vRatio;\n    float df = length(vForce);\n\n    vec2 uv = vUv;\n    vec3 prevData = texture2D(src, vSimulationUv).xyz;\n\n    /** v1 : circle > capsule to avoid gap between points **\n\n    float useCircle, cr;\n    vec2 cp;\n    if (vLastScale - vScale > length(vLastCenter - vCenter)) {\n\t\tcr = vLastScale;\n        cp = vLastCenter;\n        useCircle = 1.;\n    }\n    if (vScale - vLastScale > length(vLastCenter - vCenter)) {\n\t\tcr = vScale;\n        cp = vCenter;\n        useCircle = 1.;\n    }\n\n    float sdCir = sdCircle(uv - cp, cr);\n    float sdCap = sdUnevenCapsule(uv, vLastCenter, vCenter, vLastScale, vScale);\n    float sdf = mix(sdCap, sdCir, useCircle);\n\n    /** v2 : ellipse to fix plane ratio (not possible with circle & capsule) **/\n\n    float sdf = sdEllipse(uv - vCenter, vec2(vScale, vScale * (1. + (planeRatio-1.) * .5)));\n\n    /**/\n\n    sdf = -sdf / (max(vLastScale, vScale));\n    sdf = max(0., sdf);\n\n    vec2 dir = normalize((uv - vCenter) / vScale) * df;\n    \n    float shouldUpdateIntensity = step(0.0001, sdf) * step(0.0001, df);\n    float inputIntensity = min(prevData.z + vIntensity, 1.);\n    float newIntensity = mix(prevData.z, inputIntensity, shouldUpdateIntensity);\n\n    vec2 newVelocity;\n    if (vIsMouseDown > 0.5) {\n        newVelocity = dir * sdf * vForce.x;\n    } else {\n        newVelocity = mix(vForce, dir, 0.2) * sdf;\n    }\n\n    gl_FragColor = vec4(prevData.xy + newVelocity, newIntensity, 1.);\n\n    if (vWasActive == 0.) {\n        gl_FragColor = vec4(0.);\n    }\n}\n",defines:r,uniforms:{force:{value:new Array(t.length).fill(null).map((function(){return new Ay}))},center:{value:new Array(t.length).fill(null).map((function(){return new Ay}))},lastCenter:{value:new Array(t.length).fill(null).map((function(){return new Ay}))},scale:{value:new Array(t.length).fill(0)},lastScale:{value:new Array(t.length).fill(0)},isMouseDown:{value:new Array(t.length).fill(!1)},intensity:{value:new Array(t.length).fill(1)},ratio:{value:new Array(t.length).fill(1)},fboSize:{value:new Array(t.length).fill(null).map((function(){return new Ay}))},src:{value:null}}}})}},{key:"update",value:function(t){var n=t.output,r=t.input,i=t.instances,o=t.ndcVelocity,a=t.stencil;this.props.output=n,this.uniforms.src.value=r.texture;for(var s=0;s<i.length;s++){var l=i[s],u=l.mouseForce,c=l.mousePosition,d=l.cursorSize,f=l.isMouseDown,h=l.fboSize,p=l.ratio,m=l.intensity,g=l.lastCursorSize,v=l.lastMousePosition,y=f?u:o.x/2*u,b=f?u:-o.y/2*u,_=(null==c?void 0:c.x)||0,w=(null==c?void 0:c.y)||0;this.uniforms.force.value[s].set(y,b),this.uniforms.center.value[s].set((_+1)/2,(w+1)/2),this.uniforms.lastCenter.value[s].set((v.x+1)/2,(v.y+1)/2),this.uniforms.lastCenter.value[s].y+=.001,this.uniforms.scale.value[s]=d/2,this.uniforms.lastScale.value[s]=g/2,this.uniforms.isMouseDown.value[s]=f,this.uniforms.fboSize.value[s].copy(h),this.uniforms.intensity.value[s]=m,this.uniforms.ratio.value[s]=p}XJ($J(e.prototype),"update",this).call(this,{stencil:a})}}],r&&QJ(n.prototype,r),i&&QJ(n,i),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,i}(fJ);function t0(t){return t0="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},t0(t)}function e0(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,n0(r.key),r)}}function n0(t){var e=function(t,e){if("object"!=t0(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=t0(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==t0(e)?e:e+""}function r0(t,e,n){return e=a0(e),function(t,e){if(e&&("object"===t0(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,i0()?Reflect.construct(e,n||[],a0(t).constructor):e.apply(t,n))}function i0(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(i0=function(){return!!t})()}function o0(){return o0="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=a0(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(arguments.length<3?t:n):i.value}},o0.apply(this,arguments)}function a0(t){return a0=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},a0(t)}function s0(t,e){return s0=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},s0(t,e)}var l0=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),r0(this,e,arguments)}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&s0(t,e)}(e,t),n=e,r=[{key:"init",value:function(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};o0(a0(e.prototype),"init",this).call(this,{instances:t,geometry:n,material:{vertexShader:"\n\nfloat remap(float value, float start1, float stop1, float start2, float stop2) {\n  return start2 + (stop2 - start2) * ((value - start1) / (stop1 - start1));\n}\n\nattribute vec4 atlasRange;\nattribute float instance;\nattribute vec3 position;\nattribute vec2 uv;\n\nvarying vec4 vRemap;\nvarying vec2 vSimulationUv;\nvarying vec2 vUv;\n\nuniform vec2 px[INSTANCE_COUNT];\n\nvarying vec2 vPx;\n\nprecision highp float;\n#define GLSLIFY 1\n\nvoid main(){\n    vec3 pos = position;\n    vUv = pos.xy + 0.5;\n\n    pos.x = (pos.x + 0.5) * atlasRange.z + atlasRange.x;\n    pos.y = (pos.y + 0.5) * atlasRange.w + atlasRange.y;\n\n    vSimulationUv = pos.xy;\n    vRemap = atlasRange;\n\n    pos.x = remap(pos.x, 0., 1., -1., 1.);\n    pos.y = remap(pos.y, 0., 1., -1., 1.);\n\n    vPx = px[int(instance)];\n\n    gl_Position = vec4(pos, 1.0);\n}\n",fragmentShader:"precision highp float;\n#define GLSLIFY 1\nuniform sampler2D pressure;\nuniform sampler2D divergence;\n\nvarying vec2 vPx;\n\nvarying vec4 vRemap;\nvarying vec2 vSimulationUv;\n\nvoid main(){\n    vec2 clampMin = vec2(vRemap.x + vPx.x, vRemap.y + vPx.y);\n    vec2 clampMax = vec2(vRemap.z + vRemap.x - vPx.x, vRemap.w + vRemap.y - vPx.y);\n\n    // poisson equation\n    float p0 = texture2D(pressure, clamp(vSimulationUv+vec2(vPx.x * 2.0, 0), clampMin, clampMax)).r;\n    float p1 = texture2D(pressure, clamp(vSimulationUv-vec2(vPx.x * 2.0, 0), clampMin, clampMax)).r;\n    float p2 = texture2D(pressure, clamp(vSimulationUv+vec2(0, vPx.y * 2.0), clampMin, clampMax)).r;\n    float p3 = texture2D(pressure, clamp(vSimulationUv-vec2(0, vPx.y * 2.0), clampMin, clampMax)).r;\n    float div = texture2D(divergence, vSimulationUv).r;\n\n    float newP = (p0 + p1 + p2 + p3) / 4.0 - div;\n    gl_FragColor = vec4(newP);\n}\n",defines:r,uniforms:{pressure:{value:null},divergence:{value:null},px:{value:new Array(t.length).fill(null).map((function(){return new Ay}))}}}})}},{key:"update",value:function(t){for(var n=t.input_divergence,r=t.input_pressure,i=t.output,o=t.instances,a=t.stencil,s=0;s<o.length;s++){var l=o[s];this.uniforms.px.value[s].copy(l.cellScale)}this.uniforms.divergence.value=n.texture,this.uniforms.pressure.value=null==r?void 0:r.texture,this.props.output=i,o0(a0(e.prototype),"update",this).call(this,{stencil:a})}}],r&&e0(n.prototype,r),i&&e0(n,i),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,i}(fJ);function u0(t){return u0="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},u0(t)}function c0(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,d0(r.key),r)}}function d0(t){var e=function(t,e){if("object"!=u0(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=u0(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==u0(e)?e:e+""}function f0(t,e,n){return e=m0(e),function(t,e){if(e&&("object"===u0(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,h0()?Reflect.construct(e,n||[],m0(t).constructor):e.apply(t,n))}function h0(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(h0=function(){return!!t})()}function p0(){return p0="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=m0(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(arguments.length<3?t:n):i.value}},p0.apply(this,arguments)}function m0(t){return m0=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},m0(t)}function g0(t,e){return g0=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},g0(t,e)}var v0=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),f0(this,e,arguments)}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&g0(t,e)}(e,t),n=e,r=[{key:"init",value:function(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};p0(m0(e.prototype),"init",this).call(this,{instances:t,geometry:n,material:{vertexShader:"\n\nfloat remap(float value, float start1, float stop1, float start2, float stop2) {\n  return start2 + (stop2 - start2) * ((value - start1) / (stop1 - start1));\n}\n\nattribute vec4 atlasRange;\nattribute float instance;\nattribute vec3 position;\nattribute vec2 uv;\n\nvarying vec2 vSimulationUv;\nvarying vec2 vUv;\nvarying vec4 vRemap;\n\nuniform float dt[INSTANCE_COUNT];\nuniform vec2 px[INSTANCE_COUNT];\n\nvarying float vDt;\nvarying vec2 vPx;\n\nprecision highp float;\n#define GLSLIFY 1\n\nvoid main(){\n    vec3 pos = position;\n    vUv = pos.xy + 0.5;\n\n    pos.x = (pos.x + 0.5) * atlasRange.z + atlasRange.x;\n    pos.y = (pos.y + 0.5) * atlasRange.w + atlasRange.y;\n\n    vSimulationUv = pos.xy;\n    vRemap = atlasRange;\n\n    vDt = dt[int(instance)];\n    vPx = px[int(instance)];\n\n    pos.x = remap(pos.x, 0., 1., -1., 1.);\n    pos.y = remap(pos.y, 0., 1., -1., 1.);\n\n    gl_Position = vec4(pos, 1.0);\n}\n",fragmentShader:"precision highp float;\n#define GLSLIFY 1\nuniform sampler2D pressure;\nuniform sampler2D velocity;\n\nvarying float vDt;\nvarying vec2 vPx;\n\nvarying vec2 vSimulationUv;\nvarying vec4 vRemap;\n\nvoid main(){\n    float step = 1.;\n\n    vec2 clampMin = vec2(vRemap.x + vPx.x, vRemap.y + vPx.y);\n    vec2 clampMax = vec2(vRemap.z + vRemap.x - vPx.x, vRemap.w + vRemap.y - vPx.y);\n\n    float p0 = texture2D(pressure, clamp(vSimulationUv+vec2(vPx.x * step, 0), clampMin, clampMax)).r;\n    float p1 = texture2D(pressure, clamp(vSimulationUv-vec2(vPx.x * step, 0), clampMin, clampMax)).r;\n    float p2 = texture2D(pressure, clamp(vSimulationUv+vec2(0, vPx.y * step), clampMin, clampMax)).r;\n    float p3 = texture2D(pressure, clamp(vSimulationUv-vec2(0, vPx.y * step), clampMin, clampMax)).r;\n\n    vec3 d = texture2D(velocity, vSimulationUv).xyz;\n    vec2 v = d.xy;\n    vec2 gradP = vec2(p0 - p1, p2 - p3) * 0.5;\n    v = v - gradP * vDt;\n    gl_FragColor = vec4(v, d.z, 1.0);\n}\n",defines:r,uniforms:{pressure:{value:null},velocity:{value:null},px:{value:new Array(t.length).fill(null).map((function(){return new Ay}))},dt:{value:new Array(t.length).fill(0)}}},output:null})}},{key:"update",value:function(t){var n=t.input_velocity,r=t.input_pressure,i=t.output,o=t.instances,a=t.stencil;this.props.output=i,this.uniforms.velocity.value=n.texture,this.uniforms.pressure.value=null==r?void 0:r.texture;for(var s=0;s<o.length;s++){var l=o[s];this.uniforms.px.value[s].copy(l.cellScale),this.uniforms.dt.value[s]=l.dt}p0(m0(e.prototype),"update",this).call(this,{stencil:a})}}],r&&c0(n.prototype,r),i&&c0(n,i),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,i}(fJ),y0=n(9853),b0=n.n(y0);function _0(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,i,o,a,s=[],l=!0,u=!1;try{if(o=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=o.call(n)).done)&&(s.push(r.value),s.length!==e);l=!0);}catch(t){u=!0,i=t}finally{try{if(!l&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(u)throw i}}return s}}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return w0(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return w0(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function w0(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function A0(t,e,n){var r=_0(e,2),i=r[0],o=r[1],a=_0(n,2),s=a[0];return s+(t-i)/(o-i)*(a[1]-s)}function E0(t){return function(t){if(Array.isArray(t))return x0(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return x0(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return x0(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function x0(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function S0(t,e,n){return function(t,e,n){return Math.min(Math.max(t,e),n)}(A0(t,e,n),Math.min.apply(Math,E0(n)),Math.max.apply(Math,E0(n)))}function T0(t){return T0="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},T0(t)}function C0(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,I0(r.key),r)}}function I0(t){var e=function(t,e){if("object"!=T0(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=T0(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==T0(e)?e:e+""}function k0(t,e,n){return e=O0(e),function(t,e){if(e&&("object"===T0(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,P0()?Reflect.construct(e,n||[],O0(t).constructor):e.apply(t,n))}function P0(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(P0=function(){return!!t})()}function R0(){return R0="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=O0(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(arguments.length<3?t:n):i.value}},R0.apply(this,arguments)}function O0(t){return O0=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},O0(t)}function M0(t,e){return M0=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},M0(t,e)}var L0=new Ay,D0=new Ay;var N0=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),k0(this,e,arguments)}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&M0(t,e)}(e,t),n=e,r=[{key:"init",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.width,n=void 0===e?512:e,r=t.height,i=void 0===r?512:r,o=t.paper,a=t.index;this._paper=o,this._index=a,this._distanceTraveled=0,this._intensityEasing=b0()(.64,0,.34,1),this._size=new Ay(n,i),this._position=new Ay,this._totalSize=new Ay,this._intensity=1,this._screenSpaceSize=1,this._mousePosition=new Ay(0,0),this._isMouseDown=!1,this._wasActive=!1,this._over=!1,this._overDelayed=!1,this._overTimeout=null,this._lastCursorSize=new Ay,this._lastMousePosition=new Ay,this._bindHandlers(),this._setupEventListeners()}},{key:"destroy",value:function(){clearTimeout(this._overTimeout),this._removeEventListeners(),R0(O0(e.prototype),"destroy",this).call(this)}},{key:"w",get:function(){return this._size.x},set:function(t){this._size.x=t}},{key:"h",get:function(){return this._size.y},set:function(t){this._size.y=t}},{key:"x",get:function(){return this._position.x},set:function(t){this._position.x=t}},{key:"y",get:function(){return this._position.y},set:function(t){this._position.y=t}},{key:"totalSize",set:function(t){this._totalSize=t}},{key:"screenSpaceSize",get:function(){return this._screenSpaceSize}},{key:"mousePosition",get:function(){return this._mousePosition}},{key:"lastMousePosition",get:function(){return this._lastMousePosition}},{key:"mouseForce",get:function(){var t=this._isMouseDown?$$.mousedown.mouseForce:$$.hover.mouseForce;return this._mousePosition?t:0}},{key:"isMouseDown",get:function(){return this._isMouseDown}},{key:"deceleration",get:function(){return this._isMouseDown?$$.mousedown.deceleration:$$.hover.deceleration}},{key:"attenuation",get:function(){return this._isMouseDown?$$.mousedown.attenuation:$$.hover.attenuation}},{key:"cursorSize",get:function(){var t=this._isMouseDown?$$.mousedown.cursorSize:$$.hover.cursorSize;t=t/this._screenSpaceSize*(this._size.x/512)/this._size.x;var e=this.$paintManager.ndcVelocity.length()/this.screenSpaceSize;return t*=this._isMouseDown?.2:A0(e,[0,.08],[.2,1.8])}},{key:"lastCursorSize",get:function(){return this._lastCursorSize}},{key:"dt",get:function(){return(this._isMouseDown?$$.mousedown.dt:$$.hover.dt)*(this._size.x/this._totalSize.x)}},{key:"cellScale",get:function(){return L0.set(1/this._totalSize.x,1/this._totalSize.y)}},{key:"fboSize",get:function(){return D0.set(this._totalSize.x,this._totalSize.y)}},{key:"intensity",get:function(){return this._intensity}},{key:"active",get:function(){return this._overDelayed&&this._paper.isInFrustum&&!this.$experienceManager.fullPaintManager.isVisible}},{key:"visible",get:function(){return this._paper.isInFrustum&&!this.$experienceManager.fullPaintManager.isVisible}},{key:"wasActive",get:function(){return this._wasActive},set:function(t){this._wasActive=t}},{key:"meshName",get:function(){return this._paper.meshName}},{key:"ratio",get:function(){return this._paper._simulationTileRatio}},{key:"getNormalizedDimensions",value:function(){return{x:S0(this.x,[0,this._totalSize.x],[0,1]),y:S0(this.y,[0,this._totalSize.y],[0,1]),w:S0(this.w,[0,this._totalSize.x],[0,1]),h:S0(this.h,[0,this._totalSize.y],[0,1])}}},{key:"updateParameters",value:function(){var t=this.$viewManager.active.camera,e=this.$paintManager,n=e.hasMouseMoved,r=e.groundIntersection,i=e.paintIntersection,o=e.instanceIndex,a=o==this._index?null==r?void 0:r.uv:null,s=o==this._index?null==i?void 0:i.uv:null,l=this._paper.computeScreenspaceSize(t);this._lastCursorSize=this.cursorSize,this._mousePosition?this._lastMousePosition.copy(this._mousePosition):this._lastMousePosition.set(0,0);var u=!this._mousePosition;if(this._paper.isInFrustum){n&&(s||a?(this._onOverOut(!0),a?(a.y=1-a.y,this._mousePosition=this._transformCoordinates(a,this._paper.groundBox)):(s.x=1-s.x,this._mousePosition=this._transformCoordinates(s,this._paper.paperBox)),this._mousePosition.x=2*(this._mousePosition.x-.5),this._mousePosition.y=2*(this._mousePosition.y-.5),u&&(this._lastMousePosition.copy(this._mousePosition),this._lastCursorSize=0)):(this._onOverOut(!1),this._mousePosition=null,this._lastMousePosition.set(0,0),this._isMouseDown=!1));var c=1;if(this._mousePosition){var d=l.x,f=l.y,h=l.z,p=$$.brush,m=p.depthInfluence,g=p.sizeMultiplier;c=ZW(Math.max(d,f),1,.5)*Math.sqrt(-h/m)/g,this._lastMousePosition&&(this._distanceTraveled+=this._mousePosition.distanceTo(this._lastMousePosition)/c),this._intensity=$$.brush.intensityVariation}this._screenSpaceSize=c}}},{key:"_onOverOut",value:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];if(this._over!==t){this._over=t;var e=t?0:5;clearTimeout(this._overTimeout),0==e?this._onOverOutDelayed(t):this._overTimeout=setTimeout(this._onOverOutDelayed.bind(this,t),1e3*e)}}},{key:"_onOverOutDelayed",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];clearTimeout(this._overTimeout),this._overDelayed!=t&&(this._overDelayed=t)}},{key:"_bindHandlers",value:function(){this._mouseDownHandler=this._mouseDownHandler.bind(this),this._mouseUpHandler=this._mouseUpHandler.bind(this)}},{key:"_setupEventListeners",value:function(){window.addEventListener("mousedown",this._mouseDownHandler),window.addEventListener("mouseup",this._mouseUpHandler)}},{key:"_removeEventListeners",value:function(){window.removeEventListener("mousedown",this._mouseDownHandler),window.removeEventListener("mouseup",this._mouseUpHandler)}},{key:"_mouseDownHandler",value:function(t){this._mousePosition&&0===t.button&&(this._isMouseDown=!0)}},{key:"_mouseUpHandler",value:function(t){this._isMouseDown=!1}},{key:"_transformCoordinates",value:function(t,e){return t.x=A0(t.x,[0,1],[e.min.x,e.max.x]),t.y=A0(t.y,[0,1],[e.min.y,e.max.y]),t}}],r&&C0(n.prototype,r),i&&C0(n,i),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,i}(dY());function B0(t){return B0="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},B0(t)}function j0(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,z0(r.key),r)}}function z0(t){var e=function(t,e){if("object"!=B0(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=B0(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==B0(e)?e:e+""}function F0(t,e,n){return e=G0(e),function(t,e){if(e&&("object"===B0(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,U0()?Reflect.construct(e,n||[],G0(t).constructor):e.apply(t,n))}function U0(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(U0=function(){return!!t})()}function q0(){return q0="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=G0(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(arguments.length<3?t:n):i.value}},q0.apply(this,arguments)}function G0(t){return G0=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},G0(t)}function H0(t,e){return H0=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},H0(t,e)}var V0=new Ay,Q0=new Ay,W0=new Ay;var Y0=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),F0(this,e,arguments)}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&H0(t,e)}(e,t),n=e,r=[{key:"init",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.width,n=void 0===e?512:e,r=t.height,i=void 0===r?512:r;this._distanceTraveled=0,this._intensityEasing=b0()(.64,0,.34,1),this._size=new Ay(n,i),this._position=new Ay,this._totalSize=new Ay,this._intensity=1,this._mockedMeshScreenSpaceSize=new Ky(20,20,-1),this._screenSpaceSize=1,this._mousePosition=new Ay(0,0),this._lastCursorSize=new Ay,this._lastMousePosition=new Ay,this._bindHandlers(),this._setupEventListeners()}},{key:"destroy",value:function(){this._removeEventListeners(),q0(G0(e.prototype),"destroy",this).call(this)}},{key:"w",get:function(){return this._size.x}},{key:"h",get:function(){return this._size.y}},{key:"x",get:function(){return this._position.x},set:function(t){this._position.x=t}},{key:"y",get:function(){return this._position.y},set:function(t){this._position.y=t}},{key:"totalSize",set:function(t){this._totalSize=t}},{key:"screenSpaceSize",get:function(){return this._screenSpaceSize}},{key:"mousePosition",get:function(){return this._mousePosition}},{key:"lastMousePosition",get:function(){return this._lastMousePosition}},{key:"mouseForce",get:function(){var t=$$.hover.mouseForce;return this._mousePosition?t:0}},{key:"isMouseDown",get:function(){return!1}},{key:"deceleration",get:function(){return $$.hover.deceleration}},{key:"attenuation",get:function(){return $$.hover.attenuation}},{key:"cursorSize",get:function(){var t=$$.hover.cursorSize;return t=t/this._screenSpaceSize*(this._size.x/512)/this._size.x}},{key:"lastCursorSize",get:function(){return this._lastCursorSize}},{key:"dt",get:function(){return(this.isMouseDown?$$.mousedown.dt:$$.hover.dt)*(this._size.x/this._totalSize.x)}},{key:"cellScale",get:function(){return V0.set(1/this._totalSize.x,1/this._totalSize.y)}},{key:"fboSize",get:function(){return Q0.set(this._totalSize.x,this._totalSize.y)}},{key:"intensity",get:function(){return this._intensity}},{key:"ratio",get:function(){return this._size.x/this._size.y}},{key:"active",get:function(){var t;return"Poem"===(null===(t=this.$viewManager.active)||void 0===t?void 0:t._config.name)||this.$experienceManager.fullPaintManager.isVisible}},{key:"visible",get:function(){return this.active}},{key:"meshName",get:function(){return"fullScreen"}},{key:"getNormalizedDimensions",value:function(){return{x:S0(this.x,[0,this._totalSize.x],[0,1]),y:S0(this.y,[0,this._totalSize.y],[0,1]),w:S0(this.w,[0,this._totalSize.x],[0,1]),h:S0(this.h,[0,this._totalSize.y],[0,1])}}},{key:"updateParameters",value:function(){var t=this.$paintManager,e=t.hasMouseMoved,n=t.ndc,r=this._mockedMeshScreenSpaceSize;if(this._lastCursorSize=this.cursorSize,this._mousePosition?this._lastMousePosition.copy(this._mousePosition):this._lastMousePosition.set(0,0),this.active){if(e){var i=n.x,o=n.y;this._mousePosition=W0.set((i+1)/2,(1-o)/2),this._mousePosition.x=2*(this._mousePosition.x-.5),this._mousePosition.y=2*(this._mousePosition.y-.5)}var a=1;if(this._mousePosition){var s=r.x,l=r.y,u=r.z,c=$$.brush,d=c.depthInfluence,f=c.sizeMultiplier,h=d;a=ZW(Math.max(s,l),1,.5)*Math.sqrt(-u/h)/f,this._lastMousePosition&&(this._distanceTraveled+=this._mousePosition.distanceTo(this._lastMousePosition)/a);var p=$$.brush.intensityVariation;this._intensity=this._intensityEasing(function(t){return((Math.sin(t)+Math.sin(2.2*t+5.52)+Math.sin(2.9*t+.93)+Math.sin(4.6*t+8.94))/4+1)/2}(this._distanceTraveled*p))}this._screenSpaceSize=a}}},{key:"_bindHandlers",value:function(){}},{key:"_setupEventListeners",value:function(){}},{key:"_removeEventListeners",value:function(){}}],r&&j0(n.prototype,r),i&&j0(n,i),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,i}(dY());function K0(t){return K0="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},K0(t)}function X0(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function $0(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?X0(Object(n),!0).forEach((function(e){Z0(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):X0(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function Z0(t,e,n){return(e=t1(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function J0(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,t1(r.key),r)}}function t1(t){var e=function(t,e){if("object"!=K0(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=K0(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==K0(e)?e:e+""}function e1(t,e,n){return e=i1(e),function(t,e){if(e&&("object"===K0(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,n1()?Reflect.construct(e,n||[],i1(t).constructor):e.apply(t,n))}function n1(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(n1=function(){return!!t})()}function r1(){return r1="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=i1(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(arguments.length<3?t:n):i.value}},r1.apply(this,arguments)}function i1(t){return i1=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},i1(t)}function o1(t,e){return o1=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},o1(t,e)}var a1=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),e1(this,e,arguments)}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&o1(t,e)}(e,t),n=e,r=[{key:"init",value:function(){var t=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).papers,e=void 0===t?[]:t;this._papers=e,this.fbos={velocity_0:null,velocity_1:null,divergence:null,pressure_0:null,pressure_1:null,accumulation_0:null,accumulation_1:null};var n=SW.gpu.tier<=1||SW.gpu.isMobile;this._config={instanceSize:{maxSize:n?1024:1200,coef:n?5:26},fullscreenSize:n?512:1024};var r=new URLSearchParams("undefined"!=typeof window?window.location.search:"");this._pressureIterations=r.has("iterations")?Math.max(0,parseInt(r.get("iterations"))):null,this._framesWithStencilEnabled=0,this._activeInstances=[],this._instances=this._createInstances();var i=this._setupLayout(),o=i.size,a=i.fill;this._size=o,this._instancedGeometry=this._createGeometry(),this._createAllFBO(),this._createShaderPasses(),this._bindHandlers(),this._setupEventListeners(),console.log("BatchInkSimulation",$0($0({atlasSize:this._size,atlasFill:Math.round(100*a)/100},this._config),{},{instances:this._instances.length-1}))}},{key:"instances",get:function(){return this._instances}},{key:"output",get:function(){return this.fbos.accumulation_0.texture}},{key:"fullScreenInstance",get:function(){return this._fullScreenInstance}},{key:"prepare",value:function(){this.advection.setForceRenderAll(!0),this.externalForce.setForceRenderAll(!0),this.divergence.setForceRenderAll(!0),this.pressure.setForceRenderAll(!0),this.gradientSubtract.setForceRenderAll(!0),this.accumulation.setForceRenderAll(!0),this._updatePasses(),this.advection.setForceRenderAll(!1),this.externalForce.setForceRenderAll(!1),this.divergence.setForceRenderAll(!1),this.pressure.setForceRenderAll(!1),this.gradientSubtract.setForceRenderAll(!1),this.accumulation.setForceRenderAll(!1)}},{key:"_createInstances",value:function(){var t=[];if(!SW.gpu.isMobile){var e=this._config.instanceSize,n=e.maxSize,r=e.coef;t=this._papers.map((function(t,e){var i=Math.max(128,Math.min(n,t._fullSize.x*r)),o=t._simulationTileRatio||1;return new N0({width:i,height:i/o,paper:t,index:e})}))}var i=zY.dimensions,o=i.innerWidth/i.innerHeight,a=0,s=0;return o>1?(a=this._config.fullscreenSize,s=Math.round(a/o)):(s=this._config.fullscreenSize,a=Math.round(s*o)),this._fullScreenInstance=new Y0({width:a,height:s}),t.push(this._fullScreenInstance),t}},{key:"_createAllFBO",value:function(){var t=$g;for(var e in this.fbos)this.fbos[e]=new Vy(this._size,this._size,{type:t,stencilBuffer:!0});var n=null,r="fullscreen"==CY?this._instances[this._instances.length-1]:this._instances.find((function(t){var e;return(null===(e=t._paper)||void 0===e?void 0:e.meshName)===CY}));if(r){var i=r.getNormalizedDimensions();n=new Hy(i.x,i.y,i.w,i.h)}var o=this.fbos;nJ.addTexture(null==o?void 0:o.accumulation_0.texture,null,n)}},{key:"_setupLayout",value:function(){var t=this._instances.map((function(t,e){return{w:t.w,h:t.h,index:e}}));t.sort((function(t,e){return e.h-t.h}));var e=t.concat([]),n=FZ(e),r=n.w,i=n.h,o=n.fill,a=Math.max(r,i),s=UZ(a);return this._instances.forEach((function(n,r){var i=t.findIndex((function(t){return t.index===r})),o=e[i];n.x=o.x,n.y=o.y,n.totalSize=new Ay(s,s)})),{size:s,fill:o}}},{key:"_createGeometry",value:function(){var t=new CS;t.copy(new sw(1,1));for(var e=this._instances.length,n=new Float32Array(4*e),r=new Float32Array(e),i=0;i<e;i++){var o=this._instances[i].getNormalizedDimensions();n[4*i+0]=o.x,n[4*i+1]=o.y,n[4*i+2]=o.w,n[4*i+3]=o.h,r[i]=i}return t.setAttribute("atlasRange",new nx(n,4)),t.setAttribute("instance",new nx(r,1)),t}},{key:"_createShaderPasses",value:function(){var t={DEBUG_ATLAS:kY};this.advection=new PJ(this._instances,this._instancedGeometry,t),this.externalForce=new JJ(this._instances,this._instancedGeometry,t),this.divergence=new zJ(this._instances,this._instancedGeometry,t),this.pressure=new l0(this._instances,this._instancedGeometry,t),this.gradientSubtract=new v0(this._instances,this._instancedGeometry,t),this.accumulation=new wJ(this._instances,this._instancedGeometry,t)}},{key:"_updatePasses",value:function(){var t=this.$renderer.instance.autoClear;this.$renderer.instance.autoClear=!1;var e,n,r=this.$paintManager.ndcVelocity,i=this.fbos,o=i.velocity_0,a=i.velocity_1,s=i.divergence,l=i.accumulation_0,u=i.accumulation_1;this.externalForce.update({input:o,output:a,instances:this._instances,stencil:!!this._framesWithStencilEnabled,ndcVelocity:r}),this.advection.update({input:a,output:o,instances:this._instances,stencil:!!this._framesWithStencilEnabled}),this.divergence.update({input:o,output:s,instances:this._instances,stencil:!!this._framesWithStencilEnabled});for(var c=null!=this._pressureIterations?this._pressureIterations:$$.pressure.iterations,d=0;d<c;d++){var f=this.fbos;e=f.pressure_0,n=f.pressure_1,this.fbos.pressure_0=n,this.fbos.pressure_1=e,this.pressure.update({input_divergence:s,input_pressure:1==c?null:n,output:e,instances:this._instances,stencil:!!this._framesWithStencilEnabled})}this.gradientSubtract.update({input_velocity:o,input_pressure:e,output:a,instances:this._instances,stencil:!!this._framesWithStencilEnabled}),this.accumulation.update({input_velocity:a,input_accumulation:u,output:l,instances:this._instances,stencil:!!this._framesWithStencilEnabled}),this.$renderer.instance.autoClear=t,this.fbos.velocity_0=a,this.fbos.velocity_1=o,this.fbos.accumulation_0=u,this.fbos.accumulation_1=l,this._framesWithStencilEnabled=Math.max(this._framesWithStencilEnabled-1,0),this.instances.forEach((function(t){t.wasActive4=t.wasActive3,t.wasActive3=t.wasActive2,t.wasActive2=t.wasActive,t.wasActive=t.active}))}},{key:"_bindHandlers",value:function(){this._visibilityChangeHandler=this._visibilityChangeHandler.bind(this)}},{key:"_setupEventListeners",value:function(){HW.addEventListener("change",this._visibilityChangeHandler)}},{key:"_removeEventListeners",value:function(){HW.removeEventListener("change",this._visibilityChangeHandler)}},{key:"_visibilityChangeHandler",value:function(){this._framesWithStencilEnabled=2}},{key:"update",value:function(t){t.time,t.delta,this._instances.forEach((function(t,e){t.updateParameters()}));var e=this._instances.filter((function(t){return t.active})),n=e.map((function(t){return t.meshName})).join("-")!==this._activeInstances.map((function(t){return t.meshName})).join("-");this._activeInstances=e,n&&e.forEach((function(t,e){t.w,t.h})),this._updatePasses()}},{key:"destroy",value:function(){for(var t in this._removeEventListeners(),this.fbos){var n;null===(n=this.fbos[t])||void 0===n||n.dispose()}this.advection.destroy(),this.externalForce.destroy(),this.divergence.destroy(),this.pressure.destroy(),this.gradientSubtract.destroy(),this.accumulation.destroy(),this._instances.forEach((function(t){return t.destroy()})),this._instancedGeometry.dispose(),r1(i1(e.prototype),"destroy",this).call(this)}}],r&&J0(n.prototype,r),i&&J0(n,i),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,i}(dY());function s1(t){return s1="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},s1(t)}function l1(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,u1(r.key),r)}}function u1(t){var e=function(t,e){if("object"!=s1(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=s1(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==s1(e)?e:e+""}var c1=function(){return t=function t(e){var n=e.loadedMesh,r=e.index,i=e.config,o=void 0===i?{}:i,a=e.debugContainer,s=e.container;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._loadedMesh=n,this._index=r,this._config=o,this._name="paper_".concat(r),this._meshName=n.name,this._hasRevealStarted=!1,this._isInFrustum=!1,this._parentContainer=s,this._config.startAt||(this._config.startAt=0),this._config.sceneIndex||(this._config.sceneIndex=0),this._config.simulation||(this._config.simulation={}),this._config.ground||(this._config.ground={}),this._config.ground.edges||(this._config.ground.edges=1.2),this._config.ground.depth||(this._config.ground.depth=7),this._config.ground.texture||(this._config.ground.texture="watercolor/ground/soft_green"),this._config.ground.color||(this._config.ground.color="#b8c7b1"),this._config.ground.title||(this._config.ground.title=!1),this._config.sdf||(this._config.sdf={}),null==this._config.sdf.min&&(this._config.sdf.min=-.1),null==this._config.sdf.inacurate&&(this._config.sdf.inacurate=!1),this._config.castShadow=0!=this._config.castShadow,this._config.hasHole=0!=this._config.hasHole,this._config.hasGround=0!=this._config.hasGround,this._config.hasHoverEffect=0!=this._config.hasHoverEffect,this._config.revealType=this._config.revealType||"default",this._config.transparency=!!this._config.transparency,this._isVisible=!1,this._animationTimeline=null,this._instanceTween={uAlpha:0,uRevealProgress:0,uCurveCoef:1,rotationZ:-Math.PI/2},this._computeSizes(),this._container=this._createContainer(),this._material=this._createMaterial(),this._mesh=this._createMesh(),this._debug=this._createDebug(a),this._simulationInstance=null,_Y&&this._revealAnimation().timeScale(30)},e=[{key:"config",get:function(){return this._config}},{key:"index",get:function(){return this._index}},{key:"isInFrustum",get:function(){return this._isInFrustum}},{key:"mesh",get:function(){return this._mesh}},{key:"meshName",get:function(){return this._meshName}},{key:"meshSize",get:function(){return this._meshSize}},{key:"paperBox",get:function(){return this._paperBox}},{key:"groundSize",get:function(){return this._groundSize}},{key:"groundBox",get:function(){return this._groundBox}},{key:"container",get:function(){return this._container}},{key:"debug",get:function(){return this._debug}},{key:"isVisible",get:function(){return this._isVisible}},{key:"isAnimated",get:function(){var t;return!(null===(t=this._animationTimeline)||void 0===t||!t.isActive())}},{key:"hasRevealStarted",get:function(){return this._hasRevealStarted},set:function(t){this._hasRevealStarted=t}},{key:"simulationInstance",set:function(t){this._simulationInstance=t}},{key:"getSimulationRemapValues",value:function(){var t;return null===(t=this._simulationInstance)||void 0===t?void 0:t.getNormalizedDimensions()}},{key:"updateConfig",value:function(){return JSON.parse(JSON.stringify(this._config)),this._config}},{key:"getData",value:function(){return JSON.parse(JSON.stringify(this._config))}},{key:"show",value:function(){return this._revealAnimation()}},{key:"hide",value:function(){return this._hideAnimation()}},{key:"_createMaterial",value:function(){return new c_({color:16711680,depthTest:!1,transparent:!0,wireframe:!0})}},{key:"_createContainer",value:function(){var t=new Xb;return this._loadedMesh.getWorldPosition(t.position),this._loadedMesh.getWorldScale(t.scale),this._loadedMesh.getWorldQuaternion(t.quaternion),t.name=this._meshName,t.visible=!1,t}},{key:"_createMesh",value:function(){var t=new j_(this._loadedMesh.geometry,this._material);return t.userData.name=this._meshName,t.name=this._name,this._container.add(t),t}},{key:"_computeSizes",value:function(){this._loadedMesh.geometry.computeBoundingBox();var t=this._loadedMesh.geometry.boundingBox.getSize(new Ky),e=new Ay(t.z,t.y),n=new Ay(e.x+2*this._config.ground.edges,this._config.ground.depth);this._config.hasGround||n.multiplyScalar(0);var r=new Ay(Math.max(n.x,e.x),n.y+e.y),i=new Ay((r.x-e.x)/2,0),o=new WS(i,i.clone().add(e)),a=new Ay((r.x-n.x)/2,e.y),s=new WS(a,a.clone().add(n));o.min.divide(r),o.max.divide(r),s.min.divide(r),s.max.divide(r),t.set(t.z,t.y,1),this._meshSize=t,this._fullSize=r,this._simulationTileRatio=r.x/r.y,this._groundBox=s,this._paperBox=o,this._groundSize=n}},{key:"computeIsInFrustum",value:function(t){this._isInFrustum=t.intersectsObject(this._mesh)}},{key:"computeScreenspaceSize",value:function(t){var e=new Zy;e.copy(this._mesh.geometry.boundingBox),e.applyMatrix4(this._mesh.matrixWorld).applyMatrix4(t.matrixWorldInverse);var n=e.min.z;e.applyMatrix4(t.projectionMatrix);var r=Math.abs(e.max.x-e.min.x),i=Math.abs(e.max.y-e.min.y);return this._screen={x:r,y:i,z:n},this._box=e.clone(),{x:r,y:i,z:n}}},{key:"updateSize",value:function(){this._computeSizes()}},{key:"_revealAnimation",value:function(){var t,e=this;null===(t=this._animationTimeline)||void 0===t||t.kill(),this._hasRevealStarted=!0;var n=lK?{onUpdate:function(){return lK.pane.refresh()},onComplete:function(){return lK.pane.refresh()}}:{},r=new ti.timeline(n);return r.call((function(){e._isVisible=!0})),"fade"==this.config.revealType?(r.set(this._instanceTween,{rotationZ:0},0),r.fromTo(this._instanceTween,{uAlpha:0},{uAlpha:1,duration:3,ease:"sine.inOut"},0)):(r.fromTo(this._instanceTween,{uAlpha:0},{uAlpha:1,duration:.01,ease:"sine.inOut"},0),r.fromTo(this._instanceTween,{uCurveCoef:0},{uCurveCoef:1,duration:10,ease:"quart.out"},0),r.fromTo(this._instanceTween,{rotationZ:-Math.PI/2},{rotationZ:0,duration:7,ease:"back.out"},0)),r.fromTo(this._instanceTween,{uRevealProgress:0},{uRevealProgress:15,ease:"linear",duration:15},0),this._animationTimeline=r,r}},{key:"_hideAnimation",value:function(){var t,e=this;null===(t=this._animationTimeline)||void 0===t||t.kill();var n=new ti.timeline;return n.to(this._instanceTween,{uAlpha:0,duration:.5,ease:"sine.inOut"},0),n.add((function(){e._isVisible=!1,e._hasRevealStarted=!1})),this._animationTimeline=n,n}},{key:"_createDebug",value:function(t){if(t){var e,n=t.addFolder({title:"Paper ".concat(this._meshName),expanded:!1}),r=this._instanceTween;n.addInput(r,"uCurveCoef",{label:"Curve coef",min:0,max:1,step:.001});var i=this._revealAnimation.bind(this);n.addButton({title:"Reveal"}).on("click",(function(){return i()}));var o=n.addFolder({title:"Ink",expanded:!1});return o.addInput(r,"uRevealProgress",{label:"Progress",min:0,max:15,step:.001}),o.addButton({title:"Animate"}).on("click",(function(){if(e){if(e.isActive())return void e.pause();e.kill()}ti.killTweensOf(r),e=ti.fromTo(r,{uRevealProgress:0},{uRevealProgress:15,ease:"linear",duration:15,onUpdate:function(){return lK.pane.refresh()},onComplete:function(){return lK.pane.refresh()}})})),n}}},{key:"update",value:function(t){t.delta,t.time}},{key:"destroy",value:function(){this._material.dispose()}}],e&&l1(t.prototype,e),n&&l1(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,n}();function d1(t){return d1="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},d1(t)}function f1(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,h1(r.key),r)}}function h1(t){var e=function(t,e){if("object"!=d1(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=d1(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==d1(e)?e:e+""}var p1=function(){return t=function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.object=e,this.prop=n},(e=[{key:"value",get:function(){return"#".concat(this.object[this.prop].getHexString())},set:function(t){this.object[this.prop].set(t)}}])&&f1(t.prototype,e),n&&f1(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,n}();const m1={uLighterColor:"#e4e4ea",uNormalMapStrength:13,uNormalMapScale:3,uDisplacementStrength:.01,uPaintIntensity:{min:.8,max:1.4}},g1={uLightColor:"#ececec",uShadowColor:"#b6b6b6",uDepth:.03,uShadowSize:.5,uCutoutShadowIntensity:.4,uPaperShadowIntensity:1.7,uNoise:.005},v1={uNoise:0,uShadowSpread:3,uShadowAttenuation:15,uShadowSkew:.4},y1={},b1={color:"#000000",scale:.09,noiseScale:.05,cursorDamping:2.5,blur:{inputRange:{min:0,max:.55},outputRange:{min:0,max:0}},alpha:{inputRange:{min:.08,max:.653},outputRange:{min:1.5,max:2}},mouse:{noise:{inputRange:{min:.82,max:.33},outputRange:{min:.68,max:.93}},global:{inputRange:{min:0,max:.35},outputRange:{min:1.3,max:2.6}}}};function _1(t){return _1="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_1(t)}function w1(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,A1(r.key),r)}}function A1(t){var e=function(t,e){if("object"!=_1(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=_1(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==_1(e)?e:e+""}function E1(t,e,n){return e=T1(e),function(t,e){if(e&&("object"===_1(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,x1()?Reflect.construct(e,n||[],T1(t).constructor):e.apply(t,n))}function x1(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(x1=function(){return!!t})()}function S1(){return S1="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=T1(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(arguments.length<3?t:n):i.value}},S1.apply(this,arguments)}function T1(t){return T1=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},T1(t)}function C1(t,e){return C1=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},C1(t,e)}var I1=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),E1(this,e,arguments)}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&C1(t,e)}(e,t),n=e,r=[{key:"init",value:function(t){var e=this,n=t.papers,r=t.shadowMap,i=t.paintsComponent,o=t.debugContainer;this._config=g1,this._papers=n,this._shadowMap=r,this._paintsComponent=i,this._debugContainer=o,this._count=this._papers.length,this._geometry=this._createGeometry(),this._material=this._createMaterial(),this._mesh=this._createMesh(),this._createDebug(),this._instancesTweens=this._papers.map((function(){return{uAlpha:0}})),vY&&this._papers.forEach((function(t,n){return e.show(t)}))}},{key:"mesh",get:function(){return this._mesh}},{key:"destroy",value:function(){this._material.dispose(),this._geometry.dispose(),S1(T1(e.prototype),"destroy",this).call(this)}},{key:"show",value:function(t){var e=this,n=this._papers.indexOf(t);if(!(n<0)){var r=ti.timeline();return r.fromTo(this._instancesTweens[n],{uAlpha:0},{uAlpha:1,duration:.4,ease:"sine.inOut"},0),r.call((function(n){e._uniforms.uVisible.value[n]=!!t.config.hasHole}),[n],0),r}}},{key:"hideAll",value:function(){var t=ti.timeline();return this._instancesTweens.forEach((function(e){ti.killTweensOf(e),t.to(e,{uAlpha:0,duration:.5,ease:"sine.inOut"},0)})),t}},{key:"_createGeometry",value:function(){var t=new sw(1,1,1,1);t.computeTangents(),t.computeVertexNormals(),t.translate(0,-.5,0);var e=new CS;e.copy(t);for(var n=new Float32Array(this._count),r=0;r<this._count;r++)n[r]=r;return e.setAttribute("instance",new nx(n,1)),e}},{key:"_createMaterial",value:function(){var t=AK.get("noise/rgb-fractal");return t.wrapS=t.wrapT=Dg,this._uniforms={uTime:{value:0},uResolution:{value:new Ay},tNoiseTexture:{value:t},uLightColor:{value:new By(this._config.uLightColor)},uShadowColor:{value:new By(this._config.uShadowColor)},uDepth:{value:this._config.uDepth},uShadowSize:{value:this._config.uShadowSize},uCutoutShadowIntensity:{value:this._config.uCutoutShadowIntensity},uPaperShadowIntensity:{value:this._config.uPaperShadowIntensity},uNoise:{value:this._config.uNoise},uShadowMap:{value:this._shadowMap},uSdfTexture:{value:this._paintsComponent.sdfAtlasTexture},uSdfData:{value:this._paintsComponent.sdfDatas},uVisible:{value:new Array(this._count).fill(!1)},uAlpha:{value:new Array(this._count).fill(0)},uFogState:{value:new Ay}},new V_({vertexShader:"#define GLSLIFY 1\n\nstruct SDFData {\n    vec2 pixelSize;\n    vec2 planeSize;\n    vec2 scale;\n    vec2 originSize;\n    vec4 atlasRemap;\n};\n\n// Coordinates\nvarying vec2 vUv;\nvarying vec3 vTangentViewPos;\nvarying vec3 vTangentFragPos;\nvarying vec3 vWorldPosition;\nvarying float vFogDepth;\n\nattribute vec4 tangent;\nattribute float instance;\n\nuniform bool uVisible[INSTANCE_COUNT];\n\n// Params \nuniform float uDepth;\nuniform float uAlpha[INSTANCE_COUNT];\nvarying float vAlpha;\n\n// SDFData\nuniform SDFData uSdfData[INSTANCE_COUNT];\n\nvarying vec2 vSdfPixelSize;\nvarying vec2 vSdfPlaneSize;\nvarying vec2 vSdfScale;\nvarying vec2 vSdfOriginSize;\nvarying vec4 vSdfAtlasRemap;\n\nvoid main() {\n  mat4 worldMatrix = modelMatrix * instanceMatrix;\n  vec4 worldPosition = worldMatrix * vec4(position, 1.0);\n\n  vWorldPosition = worldPosition.xyz;\n\n  if(!uVisible[int(instance)])\n    worldPosition *= 0.;\n  gl_Position = projectionMatrix * viewMatrix * worldPosition;\n\n  vAlpha = uAlpha[int(instance)];\n\n  SDFData sdfData = uSdfData[int(instance)];\n  vSdfPixelSize = sdfData.pixelSize;\n  vSdfPlaneSize = sdfData.planeSize;\n  vSdfScale = sdfData.scale;\n  vSdfOriginSize = sdfData.originSize;\n  vSdfAtlasRemap = sdfData.atlasRemap;\n\n  // Possible to calculate that cpu side\n  vec3 transformedNormal = normalize(mat3(worldMatrix) * -normal.xyz);\n\n  vec3 transformedTangent = normalize(mat3(worldMatrix) * -tangent.xyz);\n\n  vec3 bitangent = normalize(cross(transformedNormal, transformedTangent) * tangent.w);\n\n  mat3 tangentMatrix = mat3(transformedTangent, bitangent, transformedNormal);\n  tangentMatrix = transpose(tangentMatrix);\n\n  vTangentViewPos = tangentMatrix * cameraPosition;\n  vTangentFragPos = tangentMatrix * worldPosition.xyz;\n\n  vUv = uv;\n\n  vec4 mvPosition = viewMatrix * worldPosition;\n  vFogDepth = -mvPosition.z;\n\n//   vec3 viewDir = normalize(vTangentViewPos - vTangentFragPos);\n//   vec2 offset = viewDir.xy / viewDir.z * uDepth * vec2(-1, 1);\n}",fragmentShader:"#define GLSLIFY 1\n\nstruct SDFData {\n    vec2 pixelSize;\n    vec2 planeSize;\n    vec2 scale;\n    vec2 originSize;\n    vec4 atlasRemap;\n};\n\nfloat remap(float value, float start1, float stop1, float start2, float stop2) {\n  return start2 + (stop2 - start2) * ((value - start1) / (stop1 - start1));\n}\n\nfloat rand(vec2 co){\n\treturn fract(sin(dot(co, vec2(12.9898, 78.233))) * 43758.5453);\n}\n\nvec2 remapAtlasUv(vec2 uv, vec4 atlasRemap) {\n    vec2 _uv = uv;\n    _uv.x = remap(_uv.x, 0., 1., atlasRemap.x, atlasRemap.x + atlasRemap.z);\n    _uv.y = remap(_uv.y, 0., 1., atlasRemap.y, atlasRemap.y + atlasRemap.w);\n    return _uv;\n}\n\nvec2 remapAtlasUv(vec2 uv, vec4 boxSize, vec4 atlasRemap) {\n    vec2 _uv = uv;\n    _uv.x = remap(_uv.x, 0., 1., boxSize.x, boxSize.z);\n    _uv.y = remap(_uv.y, 1., 0., boxSize.y, boxSize.w);\n    _uv.x = remap(_uv.x, 0., 1., atlasRemap.x, atlasRemap.x + atlasRemap.z);\n    _uv.y = remap(_uv.y, 0., 1., atlasRemap.y, atlasRemap.y + atlasRemap.w);\n    return _uv;\n}\n\nconst float BASE = 255.;\nconst float BASE_2_1460171947 = BASE * BASE;\nconst float BASE_3_1460171947 = BASE * BASE * BASE;\n\nfloat getSdfFromAtlas(vec2 uv, SDFData sdfData, sampler2D sdfTexture) {\n    vec2 center = sdfData.atlasRemap.xy + sdfData.atlasRemap.zw / 2.;\n    uv = 1. - uv;\n    uv = remapAtlasUv(uv, sdfData.atlasRemap);\n    uv = ((uv - center) / sdfData.scale) + center;\n    float planeRatio = sdfData.planeSize.x / sdfData.planeSize.y;\n    vec4 value = texture2D(sdfTexture, uv) * BASE;\n    float pixelDistance = ((value.x * BASE_2_1460171947 + value.y * BASE + value.z) - (BASE_3_1460171947 / 2.)) / 1000.;\n    float compensatedDist = pixelDistance / (max(sdfData.originSize.x, sdfData.originSize.y) * 0.5);\n    return compensatedDist;\n}\n\nfloat exponentialOut(float t) {\n  return t == 1.0 ? t : 1.0 - pow(2.0, -10.0 * t);\n}\n\nfloat cremap(float value, float start1, float stop1, float start2, float stop2) {\n  float r = start2 + (stop2 - start2) * ((value - start1) / (stop1 - start1));\n  return clamp(r, min(start2, stop2), max(start2, stop2));\n}\n\nfloat quarticInOut(float t) {\n  return t < 0.5\n    ? +8.0 * pow(t, 4.0)\n    : -8.0 * pow(t - 1.0, 4.0) + 1.0;\n}\n\nfloat sdCircle(vec2 p, float r) {\n  return length(p) - r;\n}\n\nvec3 getFogColor(float time, float depth, vec2 uv, vec2 resolution, vec3 worldPosition, vec3 color, sampler2D noiseTexture, vec3 fogColor, float noiseSpeed, vec2 noiseScale, float noiseStrength, vec2 fogAmountRangeY, vec2 fogDensityRangeY, vec2 fogAmountRangeZ, vec2 fogDensityRangeZ, vec3 mainSdf, vec2 sdfRemap) {\n  worldPosition.z -= time * noiseSpeed * .1;\n\n  vec2 noiseUv = worldPosition.yz;\n  noiseUv *= 0.05 * noiseScale;\n\n  float noise = texture2D(noiseTexture, noiseUv).r;\n  noise = quarticInOut(noise);\n  if(worldPosition.y < 0.01)\n    noise = 1.;\n  if(worldPosition.x > 900.)\n    noise = 1.;\n\n  float screenRatio = resolution.x / resolution.y;\n  vec2 adjustedUvs = ((uv - 0.5) / vec2(1., screenRatio)) + 0.5;\n  adjustedUvs.x += step(screenRatio, 1.) * -.5; // on portrait only\n  float sdf = sdCircle(adjustedUvs - mainSdf.xy, mainSdf.z);\n  sdf = smoothstep(sdfRemap.x, sdfRemap.y, sdf);\n\n  float noiseSdf = sdf * remap(noise, 0., 1., 1. - noiseStrength, 1.);\n\n  float fogAmountZ = mix(fogAmountRangeZ.x, fogAmountRangeZ.y, noiseSdf);\n  // float fogDensityZ = mix(fogDensityRangeZ.x, fogDensityRangeZ.y, noiseSdf) / 1000.;\n  float fogDensityZ = mix(fogDensityRangeZ.x, fogDensityRangeZ.y, noiseSdf);\n  float fogFactorZ = 1.0 - exp(-fogDensityZ * fogDensityZ * depth * depth);\n\n  float fogPosY = worldPosition.y;\n  float fogDensityY = mix(fogDensityRangeY.y, fogDensityRangeY.x, noiseSdf);\n  float fogAmountY = mix(fogAmountRangeY.x, fogAmountRangeY.y, noiseSdf);\n  float fogFactorY = exp(-fogDensityY * fogDensityY * fogPosY * fogPosY);\n\n  float fogAmount = clamp(fogFactorZ * fogAmountZ, 0.0, 1.0);\n  fogAmount = max(fogAmount, clamp(fogFactorY * fogAmountY, 0.0, 1.0));\n  fogAmount = clamp(fogAmount + sdf * 0.2, 0., 1.);\n\n  return mix(color, fogColor, fogAmount);\n}\n\nstruct FogSettings {\n    float noiseSpeed;\n    vec2 noiseScale;\n    float noiseStrength;\n    vec2 fogAmountRangeY;\n    vec2 fogDensityRangeY;\n    vec2 fogAmountRangeZ;\n    vec2 fogDensityRangeZ;\n    vec3 mainSdf;\n    vec2 sdfRemap;\n    vec3 fogColor;\n};\n\nFogSettings mixFogSettings(FogSettings from, FogSettings to, float ratio) {\n    FogSettings settings;\n    settings.noiseSpeed = mix(from.noiseSpeed, to.noiseSpeed, ratio);\n    settings.noiseScale = mix(from.noiseScale, to.noiseScale, ratio);\n    settings.noiseStrength = mix(from.noiseStrength, to.noiseStrength, ratio);\n    settings.fogAmountRangeY = mix(from.fogAmountRangeY, to.fogAmountRangeY, ratio);\n    settings.fogDensityRangeY = mix(from.fogDensityRangeY, to.fogDensityRangeY, ratio);\n    settings.fogAmountRangeZ = mix(from.fogAmountRangeZ, to.fogAmountRangeZ, ratio);\n    settings.fogDensityRangeZ = mix(from.fogDensityRangeZ, to.fogDensityRangeZ, ratio);\n    settings.mainSdf = mix(from.mainSdf, to.mainSdf, ratio);\n    settings.sdfRemap = mix(from.sdfRemap, to.sdfRemap, ratio);\n    settings.fogColor = mix(from.fogColor, to.fogColor, ratio);\n    return settings;\n}\n\nFogSettings getBaseSettings() {\n    FogSettings baseSettings;\n    baseSettings.noiseSpeed = 3.;\n    baseSettings.noiseScale = vec2(0.6, 0.2);\n    baseSettings.noiseStrength = 0.88;\n    baseSettings.fogAmountRangeY = vec2(0.1, 1.39);\n    baseSettings.fogDensityRangeY = vec2(0.01, 0.81);\n    baseSettings.fogAmountRangeZ = vec2(0.01, 0.99);\n    baseSettings.fogDensityRangeZ = vec2(20.0, 277.42);\n    baseSettings.mainSdf = vec3(0.79, 0.63, 0.85);\n    baseSettings.sdfRemap = vec2(-0.48, -0.06);\n    baseSettings.fogColor = vec3(0.796, 0.796, 0.761);\n    return baseSettings;\n}\n\nFogSettings getOccultedSettings(FogSettings baseSettings) {\n    FogSettings occultedSettings;\n    occultedSettings.noiseSpeed = baseSettings.noiseSpeed;\n    occultedSettings.noiseScale = baseSettings.noiseScale;\n    occultedSettings.noiseStrength = baseSettings.noiseStrength;\n    occultedSettings.fogAmountRangeY = vec2(0.65, 1.16);\n    occultedSettings.fogDensityRangeY = vec2(0.65, 0.81);\n    occultedSettings.fogAmountRangeZ = baseSettings.fogAmountRangeZ;\n    occultedSettings.fogDensityRangeZ = vec2(20.0, 161.29);\n    occultedSettings.mainSdf = vec3(0.64, 0.62, 0.84);\n    occultedSettings.sdfRemap = vec2(-0.84, -0.45);\n    occultedSettings.fogColor = vec3(0.796, 0.796, 0.761);\n    return occultedSettings;\n}\n\nFogSettings getOpaqueSettings(FogSettings baseSettings) {\n    FogSettings opaqueSettings;\n    opaqueSettings.noiseSpeed = baseSettings.noiseSpeed;\n    opaqueSettings.noiseScale = baseSettings.noiseScale;\n    opaqueSettings.noiseStrength = baseSettings.noiseStrength;\n    opaqueSettings.fogAmountRangeY = vec2(0.65, 1.16);\n    opaqueSettings.fogDensityRangeY = vec2(0.65, 0.81);\n    opaqueSettings.fogAmountRangeZ = vec2(1, 1.3);\n    opaqueSettings.fogDensityRangeZ = vec2(100, 300);\n    opaqueSettings.mainSdf = vec3(0.5, 0.5, 0);\n    opaqueSettings.sdfRemap = baseSettings.sdfRemap;\n    opaqueSettings.fogColor = vec3(0.714, 0.714, 0.714);\n    return opaqueSettings;\n}\n\nvec3 getFogColorWithRatio(float time, float depth, vec2 uv, vec2 resolution, vec3 worldPosition, vec3 color, sampler2D noiseTexture, float opaqueRatio, float occultedRatio) {\n\n    FogSettings baseSettings = getBaseSettings();\n    FogSettings opaqueSettings = getOpaqueSettings(baseSettings);\n    FogSettings occultedSettings = getOccultedSettings(baseSettings);\n\n    FogSettings settings = baseSettings;\n    settings = mixFogSettings(settings, occultedSettings, occultedRatio);\n    settings = mixFogSettings(settings, opaqueSettings, opaqueRatio);\n\n    return getFogColor(time, depth, uv, resolution, worldPosition, color, noiseTexture, settings.fogColor, settings.noiseSpeed, settings.noiseScale, settings.noiseStrength, settings.fogAmountRangeY, settings.fogDensityRangeY, settings.fogAmountRangeZ, settings.fogDensityRangeZ, settings.mainSdf, settings.sdfRemap);\n}\n\n// Global\nuniform float uTime;\nuniform sampler2D tNoiseTexture;\nvarying vec3 vWorldPosition;\nvarying float vFogDepth;\n\n// Sdf\nvarying vec2 vSdfPixelSize;\nvarying vec2 vSdfPlaneSize;\nvarying vec2 vSdfScale;\nvarying vec2 vSdfOriginSize;\nvarying vec4 vSdfAtlasRemap;\nuniform sampler2D uSdfTexture;\n\n// Params \nvarying float vAlpha;\nuniform float uDepth;\nuniform float uShadowSize;\nuniform float uCutoutShadowIntensity;\nuniform float uPaperShadowIntensity;\nuniform float uNoise;\nuniform vec3 uLightColor;\nuniform vec3 uShadowColor;\n\n// Coordinates\nvarying vec2 vUv;\nvarying vec3 vTangentViewPos;\nvarying vec3 vTangentFragPos;\n\nuniform vec2 uResolution;\nuniform sampler2D uShadowMap;\nuniform vec2 uFogState;\n\nvoid main() {\n\tSDFData sdfData;\n\tsdfData.pixelSize = vSdfPixelSize;\n\tsdfData.planeSize = vSdfPlaneSize;\n\tsdfData.scale = vSdfScale;\n\tsdfData.originSize = vSdfOriginSize;\n\tsdfData.atlasRemap = vSdfAtlasRemap;\n\n\tvec2 screenUv = gl_FragCoord.xy / uResolution;\n\n\t// TODO : Same lighting as ground\n\tvec3 viewDir = normalize(vTangentViewPos - vTangentFragPos);\n\n\tfloat planeRatio = vSdfPlaneSize.x / vSdfPlaneSize.y;\n\n\tvec2 offset = viewDir.xy / viewDir.z * uDepth * vec2(-1, 1);\n\toffset.x *= planeRatio;\n\tvec2 layerUv = vUv + offset / vSdfPlaneSize.x;\n\tvec2 random = vec2(rand(layerUv), rand(layerUv + 1.));\n\n\tfloat shadowDist = getSdfFromAtlas(layerUv + (random - 0.5) * uNoise, sdfData, uSdfTexture);\n\tfloat compensatedDist = shadowDist * max(vSdfPlaneSize.x, vSdfPlaneSize.y);\n\n\tfloat shadowFromCutout = smoothstep(uShadowSize, -uShadowSize, compensatedDist);\n\n\tvec2 shadowUvs = gl_FragCoord.xy / uResolution;\n\tfloat shadowFromMap = texture2D(uShadowMap, shadowUvs).r;\n\tfloat shadow = min(mix(1., shadowFromCutout, uCutoutShadowIntensity), mix(1., shadowFromMap, uPaperShadowIntensity));\n\n\tfloat dist = getSdfFromAtlas(vUv, sdfData, uSdfTexture);\n\tfloat distAlpha = clamp(dist / fwidth(dist) + 0.5, 0.0, 1.0);\n\n\tvec3 color = uLightColor - (1. - shadow);\n\n\tcolor = getFogColorWithRatio(uTime, vFogDepth, screenUv, uResolution, vWorldPosition, color, tNoiseTexture, uFogState.x, uFogState.y);\n\n\tfloat alpha = (1. - distAlpha) * vAlpha;\n\n\tgl_FragColor = vec4(color, alpha);\n\tgl_FragColor = LinearTosRGB(gl_FragColor);\n}",uniforms:this._uniforms,defines:{INSTANCE_COUNT:this._count},transparent:!0,depthTest:!1})}},{key:"_createMesh",value:function(){var t=new lx(this._geometry,this._material,this._count);t.renderOrder=-1;for(var e=new Xb,n=0;n<this._papers.length;n++){var r=this._papers[n];e.position.copy(r.container.position),e.position.y+=.012,e.scale.copy(r.meshSize),e.rotation.x=.5*-Math.PI,e.rotation.z=.5*Math.PI,e.rotation.z+=r.container.rotation.y,e.updateMatrix(),t.setMatrixAt(n,e.matrix)}return this.add(t),t}},{key:"update",value:function(t){t.delta;for(var e,n,r=t.time,i=0;i<this._count;i++){var o=this._instancesTweens[i];this._uniforms.uAlpha.value[i]=o.uAlpha}this._uniforms.uTime.value=r,this._uniforms.uFogState.value.set(null===(e=this.$experienceManager)||void 0===e?void 0:e.fogState.opaque,null===(n=this.$experienceManager)||void 0===n?void 0:n.fogState.occulted)}},{key:"onWindowResize",value:function(t){this._uniforms.uResolution.value.set(t.renderWidth,t.renderHeight)}},{key:"_createDebug",value:function(){if(lK){var t=this._debugContainer;t.addInput(this._uniforms.uDepth,"value",{label:"Depth",step:.01}),t.addInput(this._uniforms.uShadowSize,"value",{label:"Shadow spread",step:.01}),t.addInput(this._uniforms.uCutoutShadowIntensity,"value",{label:"Cutout shadow",step:.01,min:0,max:3}),t.addInput(this._uniforms.uPaperShadowIntensity,"value",{label:"Paper shadow",step:.01,min:0,max:3}),t.addInput(this._uniforms.uNoise,"value",{label:"Noise",step:.001}),t.addInput(new p1(this._uniforms.uLightColor,"value"),"value",{label:"Light Color"}),t.addInput(new p1(this._uniforms.uShadowColor,"value"),"value",{label:"Shadow Color"})}}},{key:"updateConfig",value:function(){return this._config.uLightColor="#"+this._uniforms.uLightColor.value.getHexString(),this._config.uShadowColor="#"+this._uniforms.uShadowColor.value.getHexString(),this._config.uDepth=this._uniforms.uDepth.value,this._config.uShadowSize=this._uniforms.uShadowSize.value,this._config.uNoise=this._uniforms.uNoise.value,this._config}}],r&&w1(n.prototype,r),i&&w1(n,i),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,i}(dY(Xb));const k1=JSON.parse('[{"name":"watercolor/ground/bright_green","offset":{"x":0.00048828125,"y":0.00048828125},"size":{"x":0.3515625,"y":0.19775390625}},{"name":"watercolor/ground/brown","offset":{"x":0.00048828125,"y":0.19921875},"size":{"x":0.3515625,"y":0.19775390625}},{"name":"watercolor/ground/brownish_green","offset":{"x":0.00048828125,"y":0.39794921875},"size":{"x":0.3515625,"y":0.19775390625}},{"name":"watercolor/ground/contrasted_green","offset":{"x":0.00048828125,"y":0.5966796875},"size":{"x":0.3515625,"y":0.19775390625}},{"name":"watercolor/ground/soft_green","offset":{"x":0.00048828125,"y":0.79541015625},"size":{"x":0.3515625,"y":0.19775390625}}]');function P1(t){return P1="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},P1(t)}function R1(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return O1(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return O1(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return a=t.done,t},e:function(t){s=!0,o=t},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function O1(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function M1(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,L1(r.key),r)}}function L1(t){var e=function(t,e){if("object"!=P1(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=P1(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==P1(e)?e:e+""}function D1(t,e,n){return e=j1(e),function(t,e){if(e&&("object"===P1(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,N1()?Reflect.construct(e,n||[],j1(t).constructor):e.apply(t,n))}function N1(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(N1=function(){return!!t})()}function B1(){return B1="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=j1(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(arguments.length<3?t:n):i.value}},B1.apply(this,arguments)}function j1(t){return j1=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},j1(t)}function z1(t,e){return z1=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},z1(t,e)}var F1=["watercolor/ground/bright_green","watercolor/ground/brown","watercolor/ground/brownish_green","watercolor/ground/contrasted_green","watercolor/ground/soft_green"],U1=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),D1(this,e,arguments)}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&z1(t,e)}(e,t),n=e,r=[{key:"init",value:function(t){var e=this,n=t.papers,r=t.shadowMap,i=t.debugContainer;this._config=y1,this._papers=n,this._shadowMap=r,this._debugContainer=i,this._count=this._papers.length,this._atlas=this._createGroundAtlas(),console.log(this._atlas),this._geometry=this._createGeometry(),this._material=this._createMaterial(),this._mesh=this._createMesh(),this._instancesTweens=this._papers.map((function(){return{uAlpha:0}})),this._updateInstanceMatrices(),this._setAtlastUniform(),this._createDebug(),vY&&this._papers.forEach((function(t,n){return e.show(t)}))}},{key:"mesh",get:function(){return this._mesh}},{key:"destroy",value:function(){this._material.dispose(),this._geometry.dispose(),this._atlas.texture.dispose(),B1(j1(e.prototype),"destroy",this).call(this)}},{key:"show",value:function(t){var e=this,n=this._papers.indexOf(t);if(!(n<0)){var r=ti.timeline();return r.fromTo(this._instancesTweens[n],{uAlpha:0},{uAlpha:1,duration:.4,ease:"sine.inOut"},0),r.call((function(n){e._uniforms.uVisible.value[n]=!!t.config.hasGround}),[n],0),r}}},{key:"hideAll",value:function(){var t=ti.timeline();return this._instancesTweens.forEach((function(e){ti.killTweensOf(e),t.to(e,{uAlpha:0,duration:.5,ease:"sine.inOut"},0)})),t}},{key:"_createGroundAtlas",value:function(){var t=AK.get("watercolor/ground");return t.flipY=!1,{data:k1,fill:1,texture:t}}},{key:"_createGeometry",value:function(){var t=new sw(1,1,1,1);t.translate(0,-.5,0);var e=new CS;e.copy(t);var n=new Float32Array(this._count),r=new Float32Array(2*this._count),i=new Float32Array(4*this._count),o=new Float32Array(4*this._count);return this._fillAttributesArray(n,r,i,o),e.setAttribute("instance",new nx(n,1)),e.setAttribute("size",new nx(r,2)),e.setAttribute("simulationBox",new nx(i,4)),e.setAttribute("simulationRemap",new nx(o,4)),e}},{key:"_updateAttributes",value:function(){var t=this._geometry.getAttribute("instance"),e=this._geometry.getAttribute("size"),n=this._geometry.getAttribute("simulationBox"),r=this._geometry.getAttribute("simulationRemap");this._fillAttributesArray(t.array,e.array,n.array,r.array),e.needsUpdate=!0,n.needsUpdate=!0,r.needsUpdate=!0}},{key:"_fillAttributesArray",value:function(t,e,n,r){for(var i=0;i<this._count;i++){var o=this._papers[i],a=o.getSimulationRemapValues();t[i]=i,e[2*i+0]=o.groundSize.x,e[2*i+1]=o.groundSize.y,n[4*i+0]=o.groundBox.min.x,n[4*i+1]=o.groundBox.min.y,n[4*i+2]=o.groundBox.max.x,n[4*i+3]=o.groundBox.max.y,r[4*i+0]=null==a?void 0:a.x,r[4*i+1]=null==a?void 0:a.y,r[4*i+2]=null==a?void 0:a.w,r[4*i+3]=null==a?void 0:a.h}}},{key:"_createMaterial",value:function(){var t=AK.get("noise/greyscale-fractal");t.wrapS=t.wrapT=Dg;var e=AK.get("noise/rgb-fractal");return e.wrapS=e.wrapT=Dg,this._uniforms={uNoise:{value:t},uShadowMap:{value:this._shadowMap},uResolution:{value:new Ay},uAtlasTexture:{value:this._atlas.texture},uAtlasRemap:{value:new Array(this._count).fill(null).map((function(){return new Hy}))},uVisible:{value:new Array(this._count).fill(!1)},uAlpha:{value:new Array(this._count).fill(0)},uSimulation:{value:null},uNoiseIntensity:{value:1.31},uNoiseScale:{value:.4},uDimSlope:{value:1.46},uShadowIntensity:{value:.2},uSimulationIntensity:{value:1},uTime:{value:0},uFogState:{value:new Ay},tNoiseTexture:{value:e}},new V_({vertexShader:"#define GLSLIFY 1\n\nfloat remap(float value, float start1, float stop1, float start2, float stop2) {\n  return start2 + (stop2 - start2) * ((value - start1) / (stop1 - start1));\n}\n\nvec2 remapAtlasUv(vec2 uv, vec4 atlasRemap) {\n    vec2 _uv = uv;\n    _uv.x = remap(_uv.x, 0., 1., atlasRemap.x, atlasRemap.x + atlasRemap.z);\n    _uv.y = remap(_uv.y, 0., 1., atlasRemap.y, atlasRemap.y + atlasRemap.w);\n    return _uv;\n}\n\nvec2 remapAtlasUv(vec2 uv, vec4 boxSize, vec4 atlasRemap) {\n    vec2 _uv = uv;\n    _uv.x = remap(_uv.x, 0., 1., boxSize.x, boxSize.z);\n    _uv.y = remap(_uv.y, 1., 0., boxSize.y, boxSize.w);\n    _uv.x = remap(_uv.x, 0., 1., atlasRemap.x, atlasRemap.x + atlasRemap.z);\n    _uv.y = remap(_uv.y, 0., 1., atlasRemap.y, atlasRemap.y + atlasRemap.w);\n    return _uv;\n}\n\nattribute vec4 simulationBox;\nattribute vec4 simulationRemap;\nattribute vec2 size;\nattribute float instance;\n\nvarying vec2 vUv;\nvarying vec4 vAtlasRemap;\nvarying vec2 vBoxSize;\nvarying vec2 vSimulationUv;\nvarying vec3 vWorldPosition;\n\nuniform bool uVisible[INSTANCE_COUNT];\nuniform vec4 uAtlasRemap[INSTANCE_COUNT];\n\nuniform float uAlpha[INSTANCE_COUNT];\nvarying float vAlpha;\n\nvarying float vFogDepth;\n\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\n}\n\nvoid main() {\n    vec4 worldPosition = modelMatrix * instanceMatrix * vec4(position, 1.0);\n    if (!uVisible[int(instance)]) worldPosition *= 0.;\n    vec4 mvPosition = viewMatrix * worldPosition;\n\n    vWorldPosition = worldPosition.xyz;\n    vFogDepth = -mvPosition.z;\n\n    vAtlasRemap = uAtlasRemap[int(instance)];\n    vAlpha = uAlpha[int(instance)];\n\n    vBoxSize = size;\n\n    vUv = uv;\n    vSimulationUv = remapAtlasUv(uv, simulationBox, simulationRemap);\n\n    gl_Position = projectionMatrix * mvPosition;\n}",fragmentShader:"#define GLSLIFY 1\n\nfloat remap(float value, float start1, float stop1, float start2, float stop2) {\n  return start2 + (stop2 - start2) * ((value - start1) / (stop1 - start1));\n}\n\nfloat cremap(float value, float start1, float stop1, float start2, float stop2) {\n  float r = start2 + (stop2 - start2) * ((value - start1) / (stop1 - start1));\n  return clamp(r, min(start2, stop2), max(start2, stop2));\n}\n\nfloat quarticInOut(float t) {\n  return t < 0.5\n    ? +8.0 * pow(t, 4.0)\n    : -8.0 * pow(t - 1.0, 4.0) + 1.0;\n}\n\nfloat sdCircle(vec2 p, float r) {\n  return length(p) - r;\n}\n\nvec3 getFogColor(float time, float depth, vec2 uv, vec2 resolution, vec3 worldPosition, vec3 color, sampler2D noiseTexture, vec3 fogColor, float noiseSpeed, vec2 noiseScale, float noiseStrength, vec2 fogAmountRangeY, vec2 fogDensityRangeY, vec2 fogAmountRangeZ, vec2 fogDensityRangeZ, vec3 mainSdf, vec2 sdfRemap) {\n  worldPosition.z -= time * noiseSpeed * .1;\n\n  vec2 noiseUv = worldPosition.yz;\n  noiseUv *= 0.05 * noiseScale;\n\n  float noise = texture2D(noiseTexture, noiseUv).r;\n  noise = quarticInOut(noise);\n  if(worldPosition.y < 0.01)\n    noise = 1.;\n  if(worldPosition.x > 900.)\n    noise = 1.;\n\n  float screenRatio = resolution.x / resolution.y;\n  vec2 adjustedUvs = ((uv - 0.5) / vec2(1., screenRatio)) + 0.5;\n  adjustedUvs.x += step(screenRatio, 1.) * -.5; // on portrait only\n  float sdf = sdCircle(adjustedUvs - mainSdf.xy, mainSdf.z);\n  sdf = smoothstep(sdfRemap.x, sdfRemap.y, sdf);\n\n  float noiseSdf = sdf * remap(noise, 0., 1., 1. - noiseStrength, 1.);\n\n  float fogAmountZ = mix(fogAmountRangeZ.x, fogAmountRangeZ.y, noiseSdf);\n  // float fogDensityZ = mix(fogDensityRangeZ.x, fogDensityRangeZ.y, noiseSdf) / 1000.;\n  float fogDensityZ = mix(fogDensityRangeZ.x, fogDensityRangeZ.y, noiseSdf);\n  float fogFactorZ = 1.0 - exp(-fogDensityZ * fogDensityZ * depth * depth);\n\n  float fogPosY = worldPosition.y;\n  float fogDensityY = mix(fogDensityRangeY.y, fogDensityRangeY.x, noiseSdf);\n  float fogAmountY = mix(fogAmountRangeY.x, fogAmountRangeY.y, noiseSdf);\n  float fogFactorY = exp(-fogDensityY * fogDensityY * fogPosY * fogPosY);\n\n  float fogAmount = clamp(fogFactorZ * fogAmountZ, 0.0, 1.0);\n  fogAmount = max(fogAmount, clamp(fogFactorY * fogAmountY, 0.0, 1.0));\n  fogAmount = clamp(fogAmount + sdf * 0.2, 0., 1.);\n\n  return mix(color, fogColor, fogAmount);\n}\n\nstruct FogSettings {\n    float noiseSpeed;\n    vec2 noiseScale;\n    float noiseStrength;\n    vec2 fogAmountRangeY;\n    vec2 fogDensityRangeY;\n    vec2 fogAmountRangeZ;\n    vec2 fogDensityRangeZ;\n    vec3 mainSdf;\n    vec2 sdfRemap;\n    vec3 fogColor;\n};\n\nFogSettings mixFogSettings(FogSettings from, FogSettings to, float ratio) {\n    FogSettings settings;\n    settings.noiseSpeed = mix(from.noiseSpeed, to.noiseSpeed, ratio);\n    settings.noiseScale = mix(from.noiseScale, to.noiseScale, ratio);\n    settings.noiseStrength = mix(from.noiseStrength, to.noiseStrength, ratio);\n    settings.fogAmountRangeY = mix(from.fogAmountRangeY, to.fogAmountRangeY, ratio);\n    settings.fogDensityRangeY = mix(from.fogDensityRangeY, to.fogDensityRangeY, ratio);\n    settings.fogAmountRangeZ = mix(from.fogAmountRangeZ, to.fogAmountRangeZ, ratio);\n    settings.fogDensityRangeZ = mix(from.fogDensityRangeZ, to.fogDensityRangeZ, ratio);\n    settings.mainSdf = mix(from.mainSdf, to.mainSdf, ratio);\n    settings.sdfRemap = mix(from.sdfRemap, to.sdfRemap, ratio);\n    settings.fogColor = mix(from.fogColor, to.fogColor, ratio);\n    return settings;\n}\n\nFogSettings getBaseSettings() {\n    FogSettings baseSettings;\n    baseSettings.noiseSpeed = 3.;\n    baseSettings.noiseScale = vec2(0.6, 0.2);\n    baseSettings.noiseStrength = 0.88;\n    baseSettings.fogAmountRangeY = vec2(0.1, 1.39);\n    baseSettings.fogDensityRangeY = vec2(0.01, 0.81);\n    baseSettings.fogAmountRangeZ = vec2(0.01, 0.99);\n    baseSettings.fogDensityRangeZ = vec2(20.0, 277.42);\n    baseSettings.mainSdf = vec3(0.79, 0.63, 0.85);\n    baseSettings.sdfRemap = vec2(-0.48, -0.06);\n    baseSettings.fogColor = vec3(0.796, 0.796, 0.761);\n    return baseSettings;\n}\n\nFogSettings getOccultedSettings(FogSettings baseSettings) {\n    FogSettings occultedSettings;\n    occultedSettings.noiseSpeed = baseSettings.noiseSpeed;\n    occultedSettings.noiseScale = baseSettings.noiseScale;\n    occultedSettings.noiseStrength = baseSettings.noiseStrength;\n    occultedSettings.fogAmountRangeY = vec2(0.65, 1.16);\n    occultedSettings.fogDensityRangeY = vec2(0.65, 0.81);\n    occultedSettings.fogAmountRangeZ = baseSettings.fogAmountRangeZ;\n    occultedSettings.fogDensityRangeZ = vec2(20.0, 161.29);\n    occultedSettings.mainSdf = vec3(0.64, 0.62, 0.84);\n    occultedSettings.sdfRemap = vec2(-0.84, -0.45);\n    occultedSettings.fogColor = vec3(0.796, 0.796, 0.761);\n    return occultedSettings;\n}\n\nFogSettings getOpaqueSettings(FogSettings baseSettings) {\n    FogSettings opaqueSettings;\n    opaqueSettings.noiseSpeed = baseSettings.noiseSpeed;\n    opaqueSettings.noiseScale = baseSettings.noiseScale;\n    opaqueSettings.noiseStrength = baseSettings.noiseStrength;\n    opaqueSettings.fogAmountRangeY = vec2(0.65, 1.16);\n    opaqueSettings.fogDensityRangeY = vec2(0.65, 0.81);\n    opaqueSettings.fogAmountRangeZ = vec2(1, 1.3);\n    opaqueSettings.fogDensityRangeZ = vec2(100, 300);\n    opaqueSettings.mainSdf = vec3(0.5, 0.5, 0);\n    opaqueSettings.sdfRemap = baseSettings.sdfRemap;\n    opaqueSettings.fogColor = vec3(0.714, 0.714, 0.714);\n    return opaqueSettings;\n}\n\nvec3 getFogColorWithRatio(float time, float depth, vec2 uv, vec2 resolution, vec3 worldPosition, vec3 color, sampler2D noiseTexture, float opaqueRatio, float occultedRatio) {\n\n    FogSettings baseSettings = getBaseSettings();\n    FogSettings opaqueSettings = getOpaqueSettings(baseSettings);\n    FogSettings occultedSettings = getOccultedSettings(baseSettings);\n\n    FogSettings settings = baseSettings;\n    settings = mixFogSettings(settings, occultedSettings, occultedRatio);\n    settings = mixFogSettings(settings, opaqueSettings, opaqueRatio);\n\n    return getFogColor(time, depth, uv, resolution, worldPosition, color, noiseTexture, settings.fogColor, settings.noiseSpeed, settings.noiseScale, settings.noiseStrength, settings.fogAmountRangeY, settings.fogDensityRangeY, settings.fogAmountRangeZ, settings.fogDensityRangeZ, settings.mainSdf, settings.sdfRemap);\n}\n\nvarying vec2 vUv;\nvarying vec4 vAtlasRemap;\nvarying vec2 vBoxSize;\nvarying vec2 vSimulationUv;\nvarying float vAlpha;\nvarying vec3 vWorldPosition;\n\nuniform sampler2D uAtlasTexture;\nuniform sampler2D uSimulation;\nuniform sampler2D uNoise;\n\nuniform float uNoiseIntensity; // 0.1\nuniform float uNoiseScale; // 1\nuniform float uDimSlope; // 0.4\nuniform float uShadowIntensity; // 0.2\nuniform float uSimulationIntensity; // 2\n\nuniform vec2 uResolution;\nuniform sampler2D uShadowMap;\n\nuniform float uTime;\nuniform vec2 uFogState;\nuniform sampler2D tNoiseTexture;\nvarying float vFogDepth;\n\nfloat sdBox( in vec2 p, in vec2 b ) {\n    vec2 d = abs(p)-b;\n    return length(max(d,0.0)) + min(max(d.x,d.y),0.0);\n}\n\nvoid main() {\n    float geometryRatio = vBoxSize.x / vBoxSize.y;\n\tvec2 screenUv = gl_FragCoord.xy / uResolution;\n\n    vec4 data = texture2D(uSimulation, vSimulationUv);\n\n    vec2 groundUv = vUv;\n    groundUv *= vBoxSize * 0.1;\n    groundUv.x /= (vAtlasRemap.z / vAtlasRemap.w);\n    groundUv = fract(groundUv);\n\n    groundUv.x = remap(groundUv.x, 0., 1., vAtlasRemap.x + 0.01, vAtlasRemap.x + vAtlasRemap.z - 0.01);\n    groundUv.y = remap(groundUv.y, 0., 1., vAtlasRemap.y + 0.01, vAtlasRemap.y + vAtlasRemap.w - 0.01);\n    vec4 texel = texture2D(uAtlasTexture, groundUv);\n\n    // float blend = smoothstep(0., 0.01, vel);\n    float blend = smoothstep(0., 0.1, data.b) * uSimulationIntensity;\n\n    vec2 noiseUv = vUv * vec2(geometryRatio, 1.) * uNoiseScale;\n    vec4 noiseValue = texture2D(uNoise, noiseUv);\n\n    vec2 sdfUv = vUv;\n    sdfUv.y = 1. - sdfUv.y;\n    sdfUv -= 0.5;\n    sdfUv.x *= geometryRatio;\n    sdfUv += 0.5;\n    float boxDist = sdBox(sdfUv - 0.5, vec2(geometryRatio, 1.) / 2.);\n    boxDist = min(boxDist, sdBox(sdfUv - vec2(0.5, 0.), vec2(geometryRatio, 2.) / 2.));\n    boxDist += (noiseValue.r - 0.5) * uNoiseIntensity;\n    boxDist = smoothstep(0., -uDimSlope, boxDist);\n\n    vec2 shadowUvs = gl_FragCoord.xy / uResolution;\n    float shadow = texture2D(uShadowMap, shadowUvs).r;\n\n    vec3 color = texel.rgb - (1. - shadow) * uShadowIntensity;\n\n\tcolor = getFogColorWithRatio(uTime, vFogDepth, screenUv, uResolution, vWorldPosition, color, tNoiseTexture, uFogState.x, uFogState.y);\n    \n    gl_FragColor = vec4(color, blend * boxDist * vAlpha);\n\n\tgl_FragColor = LinearTosRGB(gl_FragColor);\n}",uniforms:this._uniforms,defines:{INSTANCE_COUNT:this._count},transparent:!0,depthTest:!1})}},{key:"_setAtlastUniform",value:function(){for(var t=this,e=function(){var e=t._papers[n],r=t._uniforms.uAtlasRemap.value[n],i=e.config.ground.texture,o=t._atlas.data.find((function(t){return t.name===i}));r.set(o.offset.x,o.offset.y,o.size.x,o.size.y)},n=0;n<this._papers.length;n++)e()}},{key:"_createMesh",value:function(){var t=new lx(this._geometry,this._material,this._count);return t.renderOrder=-1,this.add(t),t}},{key:"_updateInstanceMatrices",value:function(){for(var t=new Xb,e=0;e<this._papers.length;e++){var n=this._papers[e];t.position.copy(n.container.position),t.position.y+=.01,t.scale.set(n.groundSize.x,n.groundSize.y,1),t.rotation.x=1.5*Math.PI,t.rotation.z=.5*-Math.PI,t.rotation.z+=n.container.rotation.y,t.updateMatrix(),this._mesh.setMatrixAt(e,t.matrix)}this._mesh.instanceMatrix.needsUpdate=!0}},{key:"onWindowResize",value:function(t){this._uniforms.uResolution.value.set(t.renderWidth,t.renderHeight)}},{key:"update",value:function(t){t.delta;for(var e,n,r=t.time,i=0;i<this._count;i++){var o=this._instancesTweens[i];this._uniforms.uAlpha.value[i]=o.uAlpha}this._uniforms.uTime.value=r,this._uniforms.uFogState.value.set(null===(e=this.$experienceManager)||void 0===e?void 0:e.fogState.opaque,null===(n=this.$experienceManager)||void 0===n?void 0:n.fogState.occulted)}},{key:"updateSimulationTexture",value:function(t){this._uniforms.uSimulation.value=t}},{key:"_createDebug",value:function(){var t=this;if(lK){var e=this._debugContainer;e.addInput(this._uniforms.uNoiseIntensity,"value",{label:"NoiseIntensity"}),e.addInput(this._uniforms.uNoiseScale,"value",{label:"NoiseScale"}),e.addInput(this._uniforms.uDimSlope,"value",{label:"DimSlope"}),e.addInput(this._uniforms.uShadowIntensity,"value",{label:"ShadowIntensity",min:0,max:2}),e.addInput(this._uniforms.uSimulationIntensity,"value",{label:"SimulationIntensity",min:0,max:2});var n,r=F1.map((function(t){var e=t.split("/");return{value:t,text:e[e.length-1]}})),i=R1(this._papers);try{var o=function(){var e=n.value,i=e._debug.addFolder({title:"Ground",expanded:!1});i.addInput(e.config.ground,"edges",{step:.1,label:"Edges"}).on("change",(function(){e.updateSize(),t._updateInstanceMatrices(),t._updateAttributes()})),i.addInput(e.config.ground,"depth",{step:.1,label:"Depth"}).on("change",(function(){e.updateSize(),t._updateInstanceMatrices(),t._updateAttributes()})),i.addBlade({view:"list",label:"Texture",options:r,value:e.config.ground.texture}).on("change",(function(n){var r=n.value;e.config.ground.texture=r,t._setAtlastUniform()}))};for(i.s();!(n=i.n()).done;)o()}catch(t){i.e(t)}finally{i.f()}}}},{key:"updateConfig",value:function(){return this._config}}],r&&M1(n.prototype,r),i&&M1(n,i),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,i}(dY(Xb));function q1(t){return q1="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},q1(t)}function G1(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,H1(r.key),r)}}function H1(t){var e=function(t,e){if("object"!=q1(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=q1(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==q1(e)?e:e+""}var V1=function(){return t=function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.vector2=e},(e=[{key:"value",get:function(){return this}},{key:"min",get:function(){return this.vector2.x},set:function(t){this.vector2.x=t}},{key:"max",get:function(){return this.vector2.y},set:function(t){this.vector2.y=t}}])&&G1(t.prototype,e),n&&G1(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,n}();function Q1(t){return Q1="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Q1(t)}function W1(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function Y1(t,e,n){return(e=X1(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function K1(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,X1(r.key),r)}}function X1(t){var e=function(t,e){if("object"!=Q1(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=Q1(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Q1(e)?e:e+""}function $1(t,e,n){return e=t2(e),function(t,e){if(e&&("object"===Q1(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,Z1()?Reflect.construct(e,n||[],t2(t).constructor):e.apply(t,n))}function Z1(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(Z1=function(){return!!t})()}function J1(){return J1="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=t2(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(arguments.length<3?t:n):i.value}},J1.apply(this,arguments)}function t2(t){return t2=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},t2(t)}function e2(t,e){return e2=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},e2(t,e)}var n2=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),$1(this,e,arguments)}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&e2(t,e)}(e,t),n=e,r=[{key:"init",value:function(t){var e=this,n=t.papers,r=t.sdfAtlasMap,i=t.textureAtlasMap,o=t.debugContainer,a=t.backgroundUniforms;this._config=m1,this._papers=n,this._debugContainer=o,this._backgroundUniforms=a,this._count=this._papers.length,this._paintDatas=this._papers.map((function(t){return i.get(t.meshName)})),this._paintAtlasTexture=this._paintDatas[0].texture,this._sdfDatas=this._papers.map((function(t){return r.get(t.meshName)})),this._sdfAtlasTexture=this._sdfDatas[0].texture;var s=n.map((function(t){return!t.config.sdf.inacurate}));this._defines={INSTANCE_COUNT:this._count,RENDER_PAINT:!0,SDF_ALPHA:"bool[INSTANCE_COUNT](".concat(s.join(","),")")},this._geometry=this._createGeometry(),this._material=this._createMaterial(),this._mesh=this._createMesh(),this._instancesBaseMatrices=this._prepareInstanceMatrices(),this._updateInstanceMatrices(),this._createDebug(),vY&&this._papers.forEach((function(t){return t.show()})),setTimeout((function(){return e._updateAttributes()}),0)}},{key:"mesh",get:function(){return this._mesh}},{key:"sdfAtlasTexture",get:function(){return this._sdfAtlasTexture}},{key:"sdfDatas",get:function(){return this._sdfDatas}},{key:"destroy",value:function(){this._material.dispose(),this._geometry.dispose(),J1(t2(e.prototype),"destroy",this).call(this)}},{key:"_createGeometry",value:function(){var t=new sw(1,1,10,10);t.translate(0,-.5,0),t.rotateY(-.5*Math.PI);var e=new CS;e.copy(t);var n=new Float32Array(this._count),r=new Float32Array(4*this._count),i=new Float32Array(4*this._count),o=new Float32Array(this._count);return this._fillAttributesArray(n,r,i,o),e.setAttribute("instance",new nx(n,1)),e.setAttribute("simulationBox",new nx(r,4)),e.setAttribute("simulationRemap",new nx(i,4)),e.setAttribute("transparency",new nx(o,1)),e}},{key:"_createMaterial",value:function(){var t=AK.get("noise/greyscale-fractal");t.wrapS=t.wrapT=Dg;var e=AK.get("noise/rgb-generated");e.wrapS=e.wrapT=Bg;var n=AK.get("watercolor/paper/normal");n.wrapS=n.wrapT=Dg;var r=AK.get("atlas/texture_mask");r.flipY=!1;var i=AK.get("lut/ink").texture3D,o=AK.get("lut/dry").texture3D,a=this._paintDatas.map((function(t){return t.atlasRemap})),s=this._computeRevealPoints(this._sdfDatas),l=AK.get("noise/rgb-fractal");return l.wrapS=l.wrapT=Dg,this._uniforms=function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?W1(Object(n),!0).forEach((function(e){Y1(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):W1(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({uTime:{value:0},uResolution:{value:new Ay},tNoiseTexture:{value:l},uVisible:{value:new Array(this._count).fill(!1)},uLighterColor:{value:new By(this._config.uLighterColor)},uNormalMapStrength:{value:this._config.uNormalMapStrength},uNormalMapScale:{value:this._config.uNormalMapScale},uDisplacementStrength:{value:this._config.uDisplacementStrength},uPaintIntensity:{value:new Ay(this._config.uPaintIntensity.min,this._config.uPaintIntensity.max)},uAlpha:{value:new Array(this._count).fill(1)},uCurveCoef:{value:new Array(this._count).fill(0)},uRevealProgress:{value:new Array(this._count).fill(1)},uRevealPoints:{value:s.infos},uRevealPointsPos:{value:s.positions},uPaintAtlasRemap:{value:a},uSdfData:{value:this._sdfDatas},uNoiseTexture:{value:t},uNoiseFinalTexture:{value:e},uNormalMapTexture:{value:n},uPaintAtlasTexture:{value:this._paintAtlasTexture},uSdfAtlasTexture:{value:this._sdfAtlasTexture},uMaskAtlasTexture:{value:r},uSimulationTexture:{value:null},uInkLut3d:{value:i},uDryLut3d:{value:o},uLutSize:{value:i.image.width},uLutEnable:{value:1},uFogState:{value:new Ay}},this._backgroundUniforms),new V_({vertexShader:"#define GLSLIFY 1\n\nstruct SDFData {\n    vec2 pixelSize;\n    vec2 planeSize;\n    vec2 scale;\n    vec2 originSize;\n    vec4 atlasRemap;\n};\n\nfloat remap(float value, float start1, float stop1, float start2, float stop2) {\n  return start2 + (stop2 - start2) * ((value - start1) / (stop1 - start1));\n}\n\nvec2 remapAtlasUv(vec2 uv, vec4 atlasRemap) {\n    vec2 _uv = uv;\n    _uv.x = remap(_uv.x, 0., 1., atlasRemap.x, atlasRemap.x + atlasRemap.z);\n    _uv.y = remap(_uv.y, 0., 1., atlasRemap.y, atlasRemap.y + atlasRemap.w);\n    return _uv;\n}\n\nvec2 remapAtlasUv(vec2 uv, vec4 boxSize, vec4 atlasRemap) {\n    vec2 _uv = uv;\n    _uv.x = remap(_uv.x, 0., 1., boxSize.x, boxSize.z);\n    _uv.y = remap(_uv.y, 1., 0., boxSize.y, boxSize.w);\n    _uv.x = remap(_uv.x, 0., 1., atlasRemap.x, atlasRemap.x + atlasRemap.z);\n    _uv.y = remap(_uv.y, 0., 1., atlasRemap.y, atlasRemap.y + atlasRemap.w);\n    return _uv;\n}\n\nvec3 computeInstanceNormal(vec3 transformedNormal, mat4 instanceMatrix) {\n    mat3 m = mat3( instanceMatrix );\n    transformedNormal /= vec3( dot( m[ 0 ], m[ 0 ] ), dot( m[ 1 ], m[ 1 ] ), dot( m[ 2 ], m[ 2 ] ) );\n    transformedNormal = m * transformedNormal;\n    return transformedNormal;\n}\n\n#define PI 3.141592\n\nattribute float instance;\n\n// Global\nvarying vec2 vUv;\nuniform float uAlpha[INSTANCE_COUNT];\nvarying float vAlpha;\nuniform float uCurveCoef[INSTANCE_COUNT];\nvarying vec3 vNormal;\nvarying vec4 vMvPosition;\nvarying float vFogDepth;\nvarying vec3 vWorldPosition;\n\n// Paint\nuniform vec4 uPaintAtlasRemap[INSTANCE_COUNT];\nvarying vec4 vPaintAtlasRemap;\n\n// Sdf\nuniform SDFData uSdfData[INSTANCE_COUNT];\nvarying vec2 vSdfPlaneSize;\nvarying vec2 vSdfScale;\nvarying vec2 vSdfOriginSize;\nvarying vec4 vSdfAtlasRemap;\nvarying float vSdfAlpha;\n\n// Reveal\n#define REVEAL_POINTS_COUNT 4\nuniform float uRevealProgress[INSTANCE_COUNT];\nvarying float vRevealProgress;\nuniform mat4 uRevealPoints[INSTANCE_COUNT];\nvarying vec4 vRevealPoints[REVEAL_POINTS_COUNT];\nuniform mat4 uRevealPointsPos[INSTANCE_COUNT];\nvarying vec2 vRevealPointsPos[REVEAL_POINTS_COUNT];\n\n// Simulation\nattribute float transparency;\nvarying float vTransparency;\nattribute vec4 simulationBox;\nattribute vec4 simulationRemap;\nvarying vec2 vSimulationUv;\n\nvoid main() {\n\n    vUv = uv;\n\n    int INDEX = int(instance);\n    vAlpha = uAlpha[INDEX];\n    vPaintAtlasRemap = uPaintAtlasRemap[INDEX];\n    vRevealProgress = uRevealProgress[INDEX];\n\n    vTransparency = transparency;\n\n    SDFData sdfData = uSdfData[INDEX];\n    vSdfPlaneSize = sdfData.planeSize;\n    vSdfScale = sdfData.scale;\n    vSdfOriginSize = sdfData.originSize;\n    vSdfAtlasRemap = sdfData.atlasRemap;\n\n    mat4 revealPoints = uRevealPoints[INDEX];\n    vRevealPoints[0] = revealPoints[0];\n    vRevealPoints[1] = revealPoints[1];\n    vRevealPoints[2] = revealPoints[2];\n    vRevealPoints[3] = revealPoints[3];\n\n    mat4 revealPointsPos = uRevealPointsPos[INDEX];\n    vRevealPointsPos[0] = revealPointsPos[0].xy;\n    vRevealPointsPos[1] = revealPointsPos[1].xy;\n    vRevealPointsPos[2] = revealPointsPos[2].xy;\n    vRevealPointsPos[3] = revealPointsPos[3].xy;\n\n    vec4 _simulationBox = simulationBox;\n    // _simulationBox.w *= vSdfPlaneSize.x / vSdfPlaneSize.y;\n    vSimulationUv = remapAtlasUv(1. - uv, _simulationBox, simulationRemap);\n\n    vec3 _position = position;\n\n    vec2 _uv = uv;\n    _uv.y = (_uv.y + .5) * .5;\n    float _coef = uCurveCoef[INDEX];\n\n    ///// debug coef curve\n    // _coef = uv.y;\n    // _coef = cos(_coef * PI * 2. - PI * .5);\n    // _position.x += _coef * 2.;\n\n    ///// final coef curve\n    _coef = cos(_coef * PI * 2. - PI * .5);\n    _position.x += cos(_uv.y * PI * 2.) * .2 * _coef;\n    // _position.y += - abs(_coef) * .05 * (1. - uv.y);\n\n    vNormal = computeInstanceNormal(normal, instanceMatrix);\n\n    vSdfAlpha = SDF_ALPHA[int(instance)] ? 1. : 0.;\n\n    vec4 worldPosition = modelMatrix * instanceMatrix * vec4(_position, 1.0);\n    vWorldPosition = worldPosition.xyz;\n    vMvPosition = viewMatrix * worldPosition;\n    vFogDepth = -vMvPosition.z;\n\n    gl_Position = projectionMatrix * vMvPosition;\n}",fragmentShader:"precision highp float;\nprecision mediump sampler3D;\n#define GLSLIFY 1\n\nstruct SDFData {\n    vec2 pixelSize;\n    vec2 planeSize;\n    vec2 scale;\n    vec2 originSize;\n    vec4 atlasRemap;\n};\n\nfloat cremap(float value, float start1, float stop1, float start2, float stop2) {\n  float r = start2 + (stop2 - start2) * ((value - start1) / (stop1 - start1));\n  return clamp(r, min(start2, stop2), max(start2, stop2));\n}\n\nfloat remap(float value, float start1, float stop1, float start2, float stop2) {\n  return start2 + (stop2 - start2) * ((value - start1) / (stop1 - start1));\n}\n\nvec2 remapAtlasUv(vec2 uv, vec4 atlasRemap) {\n    vec2 _uv = uv;\n    _uv.x = remap(_uv.x, 0., 1., atlasRemap.x, atlasRemap.x + atlasRemap.z);\n    _uv.y = remap(_uv.y, 0., 1., atlasRemap.y, atlasRemap.y + atlasRemap.w);\n    return _uv;\n}\n\nvec2 remapAtlasUv(vec2 uv, vec4 boxSize, vec4 atlasRemap) {\n    vec2 _uv = uv;\n    _uv.x = remap(_uv.x, 0., 1., boxSize.x, boxSize.z);\n    _uv.y = remap(_uv.y, 1., 0., boxSize.y, boxSize.w);\n    _uv.x = remap(_uv.x, 0., 1., atlasRemap.x, atlasRemap.x + atlasRemap.z);\n    _uv.y = remap(_uv.y, 0., 1., atlasRemap.y, atlasRemap.y + atlasRemap.w);\n    return _uv;\n}\n\nconst float BASE = 255.;\nconst float BASE_2_3903765079 = BASE * BASE;\nconst float BASE_3_3903765079 = BASE * BASE * BASE;\n\nfloat getSdfFromAtlas(vec2 uv, SDFData sdfData, sampler2D sdfTexture) {\n    vec2 center = sdfData.atlasRemap.xy + sdfData.atlasRemap.zw / 2.;\n    uv = 1. - uv;\n    uv = remapAtlasUv(uv, sdfData.atlasRemap);\n    uv = ((uv - center) / sdfData.scale) + center;\n    float planeRatio = sdfData.planeSize.x / sdfData.planeSize.y;\n    vec4 value = texture2D(sdfTexture, uv) * BASE;\n    float pixelDistance = ((value.x * BASE_2_3903765079 + value.y * BASE + value.z) - (BASE_3_3903765079 / 2.)) / 1000.;\n    float compensatedDist = pixelDistance / (max(sdfData.originSize.x, sdfData.originSize.y) * 0.5);\n    return compensatedDist;\n}\n\nvec2 rotateUV(vec2 uv, float rotation)\n{\n    float mid = 0.5;\n    return vec2(\n        cos(rotation) * (uv.x - mid) + sin(rotation) * (uv.y - mid) + mid,\n        cos(rotation) * (uv.y - mid) - sin(rotation) * (uv.x - mid) + mid\n    );\n}\n\nvec2 rotateUV(vec2 uv, float rotation, vec2 mid)\n{\n    return vec2(\n      cos(rotation) * (uv.x - mid.x) + sin(rotation) * (uv.y - mid.y) + mid.x,\n      cos(rotation) * (uv.y - mid.y) - sin(rotation) * (uv.x - mid.x) + mid.y\n    );\n}\n\nvec2 rotateUV(vec2 uv, float rotation, float mid)\n{\n    return vec2(\n      cos(rotation) * (uv.x - mid) + sin(rotation) * (uv.y - mid) + mid,\n      cos(rotation) * (uv.y - mid) - sin(rotation) * (uv.x - mid) + mid\n    );\n}\n\n// #pragma glslify: easeQuartOut = require(glsl-easings/quartic-out)\n// Fix to avoid negative x in pow(x, y) which doesnt work on mac hardware\nfloat easeQuartOut(float t) {\n\tfloat invT = t - 1.0;\n\treturn invT * invT * invT * (1.0 - t) + 1.0;\n}\n\n#define PI 3.141592653589793\n#define REVEAL_POINTS_COUNT 4\n\nfloat if_gt_870892966(float value1, float value2, float result1, float result2) {\n\tfloat coef = (1.0 - step(value1, value2));\n\treturn mix(result2, result1, coef);\n}\n\nfloat circle(vec2 diff, float radius) {\n\treturn length(diff) - radius;\n}\n\nfloat getInkMask(float noise, vec2 pos, vec2 startPoint, float progress, float power, float sharpRatioMin, float sharpRatioMax) {\n\tfloat sdf = -circle(pos + startPoint, 1.) + progress;\n\tfloat baseSdf = sdf;\n\tfloat intensity = pow(sdf, power) * noise;\n\tif(baseSdf < 0.)\n\t\tintensity = 0.;\n\tintensity = cremap(intensity, sharpRatioMin, sharpRatioMax, 0.0, 1.0);\n\treturn intensity;\n}\n\nfloat getInkIntensity(vec2 pos, vec2 startPoint, float progressMask, float progressIntensity) {\n\tfloat sdf = -circle(pos + startPoint, 0.) + progressMask;\n\tfloat dist = max(0., 1. - sdf);\n\tdist = cremap(dist, .6, 1., 0., 1.) * (1. - progressIntensity);\n\tdist = (.8 + 1.2 * pow(dist, 4.));\n\treturn dist;\n}\n\nvec4 computeInkReveal(vec3 bgColor, vec3 paintColor, vec2 uv, float progress, float planeRatio, sampler2D noiseTexture, vec4 points[REVEAL_POINTS_COUNT], vec2 pointsPos[REVEAL_POINTS_COUNT], float progressMax) {\n\tvec2 pos_0 = uv;\n\tpos_0.x *= planeRatio;\n\tpos_0.x -= planeRatio * .5 - .5;\n\n\tfloat _progress = progress;\n\t// _progress = .3; /// debug\n\n\tif(planeRatio >= 1.)\n\t\t_progress *= planeRatio * 1.;\n\t// _progress *= 1.4;\n\n\tvec2 uv1 = pos_0 * 10.;\n\tvec2 uv2 = rotateUV(pos_0, PI * .3) * 12.;\n\tvec2 uv3 = rotateUV(pos_0, PI * .6) * 14.;\n\n\t/** noise texture **/\n\tvec4 noiseColor = texture2D(noiseTexture, pos_0);\n\tfloat noise1 = noiseColor.x;\n\tfloat noise2 = noiseColor.y;\n\tfloat noise3 = noiseColor.z;\n\t/**/\n\n\tfloat power = 5.0;\n\tfloat sharpRatioMin = .90;\n\tfloat sharpRatioMax = 1.0;\n\n\tvec3 inkColor = bgColor;\n\tfloat globalIntensity = 0.;\n\n\tfor(int i = 0; i < REVEAL_POINTS_COUNT; ++i) {\n\t\tvec4 point = points[i];\n\t\tvec2 startPoint = -pointsPos[i];\n\t\tstartPoint.x *= planeRatio;\n\t\tstartPoint.x += planeRatio * .5 - .5;\n\n\t\tfloat scale = point.x;\n\t\tfloat startTime = point.y;\n\t\tfloat stepDuration = point.z;\n\n\t\tfloat _progressMask = cremap(progress, startTime, startTime + stepDuration, 0., progressMax);\n\t\t_progressMask = easeQuartOut(_progressMask / progressMax) * progressMax;\n\t\t_progressMask *= scale;\n\n\t\tfloat impairCoef = mod(float(i), 2.);\n\t\tfloat _noise1 = mix(noise1, noise2, impairCoef);\n\t\tfloat _noise2 = mix(noise2, noise3, impairCoef);\n\t\tfloat _progress2Coef = mix(.85, .92, impairCoef);\n\n\t\tfloat intensity1 = getInkMask(_noise1, pos_0, startPoint, _progressMask, power, sharpRatioMin, sharpRatioMax);\n\t\tfloat intensity2 = getInkMask(_noise2, pos_0, startPoint, _progressMask * _progress2Coef, power, sharpRatioMin, sharpRatioMax);\n\n\t\tfloat _progressIntensity = cremap(progress, startTime + stepDuration * .5, startTime + stepDuration, 0., 1.);\n\t\tintensity1 *= getInkIntensity(pos_0, startPoint, _progressMask, _progressIntensity);\n\t\tintensity2 *= getInkIntensity(pos_0, startPoint, _progressMask, _progressIntensity);\n\n\t\tfloat alpha = .5 + .5 * float(i) / float(REVEAL_POINTS_COUNT);\n\t\tinkColor = mix(inkColor, paintColor, intensity1 * alpha);\n\t\tinkColor = mix(inkColor, paintColor, intensity2 * alpha);\n\n\t\tfloat _intensity = (intensity1 + intensity2) * alpha;\n\n\t\tglobalIntensity = if_gt_870892966(_intensity, globalIntensity, _intensity, globalIntensity);\n\t}\n\n\t// inkColor = vec3(noise1, noise2, noise3);\n\n\treturn vec4(inkColor.xyz, globalIntensity);\n}\n\nfloat quarticInOut(float t) {\n  return t < 0.5\n    ? +8.0 * pow(t, 4.0)\n    : -8.0 * pow(t - 1.0, 4.0) + 1.0;\n}\n\nfloat sdCircle(vec2 p, float r) {\n  return length(p) - r;\n}\n\nvec3 getFogColor(float time, float depth, vec2 uv, vec2 resolution, vec3 worldPosition, vec3 color, sampler2D noiseTexture, vec3 fogColor, float noiseSpeed, vec2 noiseScale, float noiseStrength, vec2 fogAmountRangeY, vec2 fogDensityRangeY, vec2 fogAmountRangeZ, vec2 fogDensityRangeZ, vec3 mainSdf, vec2 sdfRemap) {\n  worldPosition.z -= time * noiseSpeed * .1;\n\n  vec2 noiseUv = worldPosition.yz;\n  noiseUv *= 0.05 * noiseScale;\n\n  float noise = texture2D(noiseTexture, noiseUv).r;\n  noise = quarticInOut(noise);\n  if(worldPosition.y < 0.01)\n    noise = 1.;\n  if(worldPosition.x > 900.)\n    noise = 1.;\n\n  float screenRatio = resolution.x / resolution.y;\n  vec2 adjustedUvs = ((uv - 0.5) / vec2(1., screenRatio)) + 0.5;\n  adjustedUvs.x += step(screenRatio, 1.) * -.5; // on portrait only\n  float sdf = sdCircle(adjustedUvs - mainSdf.xy, mainSdf.z);\n  sdf = smoothstep(sdfRemap.x, sdfRemap.y, sdf);\n\n  float noiseSdf = sdf * remap(noise, 0., 1., 1. - noiseStrength, 1.);\n\n  float fogAmountZ = mix(fogAmountRangeZ.x, fogAmountRangeZ.y, noiseSdf);\n  // float fogDensityZ = mix(fogDensityRangeZ.x, fogDensityRangeZ.y, noiseSdf) / 1000.;\n  float fogDensityZ = mix(fogDensityRangeZ.x, fogDensityRangeZ.y, noiseSdf);\n  float fogFactorZ = 1.0 - exp(-fogDensityZ * fogDensityZ * depth * depth);\n\n  float fogPosY = worldPosition.y;\n  float fogDensityY = mix(fogDensityRangeY.y, fogDensityRangeY.x, noiseSdf);\n  float fogAmountY = mix(fogAmountRangeY.x, fogAmountRangeY.y, noiseSdf);\n  float fogFactorY = exp(-fogDensityY * fogDensityY * fogPosY * fogPosY);\n\n  float fogAmount = clamp(fogFactorZ * fogAmountZ, 0.0, 1.0);\n  fogAmount = max(fogAmount, clamp(fogFactorY * fogAmountY, 0.0, 1.0));\n  fogAmount = clamp(fogAmount + sdf * 0.2, 0., 1.);\n\n  return mix(color, fogColor, fogAmount);\n}\n\nstruct FogSettings {\n    float noiseSpeed;\n    vec2 noiseScale;\n    float noiseStrength;\n    vec2 fogAmountRangeY;\n    vec2 fogDensityRangeY;\n    vec2 fogAmountRangeZ;\n    vec2 fogDensityRangeZ;\n    vec3 mainSdf;\n    vec2 sdfRemap;\n    vec3 fogColor;\n};\n\nFogSettings mixFogSettings(FogSettings from, FogSettings to, float ratio) {\n    FogSettings settings;\n    settings.noiseSpeed = mix(from.noiseSpeed, to.noiseSpeed, ratio);\n    settings.noiseScale = mix(from.noiseScale, to.noiseScale, ratio);\n    settings.noiseStrength = mix(from.noiseStrength, to.noiseStrength, ratio);\n    settings.fogAmountRangeY = mix(from.fogAmountRangeY, to.fogAmountRangeY, ratio);\n    settings.fogDensityRangeY = mix(from.fogDensityRangeY, to.fogDensityRangeY, ratio);\n    settings.fogAmountRangeZ = mix(from.fogAmountRangeZ, to.fogAmountRangeZ, ratio);\n    settings.fogDensityRangeZ = mix(from.fogDensityRangeZ, to.fogDensityRangeZ, ratio);\n    settings.mainSdf = mix(from.mainSdf, to.mainSdf, ratio);\n    settings.sdfRemap = mix(from.sdfRemap, to.sdfRemap, ratio);\n    settings.fogColor = mix(from.fogColor, to.fogColor, ratio);\n    return settings;\n}\n\nFogSettings getBaseSettings() {\n    FogSettings baseSettings;\n    baseSettings.noiseSpeed = 3.;\n    baseSettings.noiseScale = vec2(0.6, 0.2);\n    baseSettings.noiseStrength = 0.88;\n    baseSettings.fogAmountRangeY = vec2(0.1, 1.39);\n    baseSettings.fogDensityRangeY = vec2(0.01, 0.81);\n    baseSettings.fogAmountRangeZ = vec2(0.01, 0.99);\n    baseSettings.fogDensityRangeZ = vec2(20.0, 277.42);\n    baseSettings.mainSdf = vec3(0.79, 0.63, 0.85);\n    baseSettings.sdfRemap = vec2(-0.48, -0.06);\n    baseSettings.fogColor = vec3(0.796, 0.796, 0.761);\n    return baseSettings;\n}\n\nFogSettings getOccultedSettings(FogSettings baseSettings) {\n    FogSettings occultedSettings;\n    occultedSettings.noiseSpeed = baseSettings.noiseSpeed;\n    occultedSettings.noiseScale = baseSettings.noiseScale;\n    occultedSettings.noiseStrength = baseSettings.noiseStrength;\n    occultedSettings.fogAmountRangeY = vec2(0.65, 1.16);\n    occultedSettings.fogDensityRangeY = vec2(0.65, 0.81);\n    occultedSettings.fogAmountRangeZ = baseSettings.fogAmountRangeZ;\n    occultedSettings.fogDensityRangeZ = vec2(20.0, 161.29);\n    occultedSettings.mainSdf = vec3(0.64, 0.62, 0.84);\n    occultedSettings.sdfRemap = vec2(-0.84, -0.45);\n    occultedSettings.fogColor = vec3(0.796, 0.796, 0.761);\n    return occultedSettings;\n}\n\nFogSettings getOpaqueSettings(FogSettings baseSettings) {\n    FogSettings opaqueSettings;\n    opaqueSettings.noiseSpeed = baseSettings.noiseSpeed;\n    opaqueSettings.noiseScale = baseSettings.noiseScale;\n    opaqueSettings.noiseStrength = baseSettings.noiseStrength;\n    opaqueSettings.fogAmountRangeY = vec2(0.65, 1.16);\n    opaqueSettings.fogDensityRangeY = vec2(0.65, 0.81);\n    opaqueSettings.fogAmountRangeZ = vec2(1, 1.3);\n    opaqueSettings.fogDensityRangeZ = vec2(100, 300);\n    opaqueSettings.mainSdf = vec3(0.5, 0.5, 0);\n    opaqueSettings.sdfRemap = baseSettings.sdfRemap;\n    opaqueSettings.fogColor = vec3(0.714, 0.714, 0.714);\n    return opaqueSettings;\n}\n\nvec3 getFogColorWithRatio(float time, float depth, vec2 uv, vec2 resolution, vec3 worldPosition, vec3 color, sampler2D noiseTexture, float opaqueRatio, float occultedRatio) {\n\n    FogSettings baseSettings = getBaseSettings();\n    FogSettings opaqueSettings = getOpaqueSettings(baseSettings);\n    FogSettings occultedSettings = getOccultedSettings(baseSettings);\n\n    FogSettings settings = baseSettings;\n    settings = mixFogSettings(settings, occultedSettings, occultedRatio);\n    settings = mixFogSettings(settings, opaqueSettings, opaqueRatio);\n\n    return getFogColor(time, depth, uv, resolution, worldPosition, color, noiseTexture, settings.fogColor, settings.noiseSpeed, settings.noiseScale, settings.noiseStrength, settings.fogAmountRangeY, settings.fogDensityRangeY, settings.fogAmountRangeZ, settings.fogDensityRangeZ, settings.mainSdf, settings.sdfRemap);\n}\n\n// Global\nvarying vec2 vUv;\nvarying float vTransparency;\nvarying float vAlpha;\nvarying vec3 vNormal;\nvarying vec4 vMvPosition;\nvarying float vFogDepth;\nvarying vec3 vWorldPosition;\nuniform float uTime;\nuniform vec2 uResolution;\nuniform sampler2D tNoiseTexture;\n\nuniform vec3 uLighterColor;\nuniform float uNormalMapStrength;\nuniform float uNormalMapScale;\n\n// Blending\nuniform float uDisplacementStrength;\nuniform sampler3D uInkLut3d;\nuniform sampler3D uDryLut3d;\nuniform float uLutEnable;\nuniform float uLutSize;\n\n// Paint\nvarying vec4 vPaintAtlasRemap;\nuniform sampler2D uPaintAtlasTexture;\nuniform sampler2D uMaskAtlasTexture;\nuniform vec2 uPaintIntensity;\n\n// Sdf\nvarying vec2 vSdfPlaneSize;\nvarying vec2 vSdfScale;\nvarying vec2 vSdfOriginSize;\nvarying vec4 vSdfAtlasRemap;\nuniform sampler2D uSdfAtlasTexture;\nvarying float vSdfAlpha;\n\n// Light\nuniform sampler2D uNormalMapTexture;\n\nstruct Lighting {\n    vec2 groundSpecularScale;\n    vec2 groundSpecularOffset;\n    float groundSpecularStrength;\n    vec2 specularCenter;\n    vec2 specularScale;\n    vec2 specularOffset;\n    float specularStrength;\n};\n\nuniform Lighting uLighting;\n\nstruct Background {\n    vec3 groundColor;\n    vec3 skyColor;\n    vec2 progressRemap;\n};\n\nuniform Background uBackground;\n\n#ifndef PI\n#define PI 3.141592653589793\n#endif\n\nfloat sineInOut(float t) {\n  return -0.5 * (cos(PI * t) - 1.0);\n}\n\n// WITH ground specular\nfloat computeLighting(Lighting lightingConfig, float screenRatio, vec2 screenUv, vec3 worldPosFromCamera) {\n    vec2 specularVector = (screenUv - (lightingConfig.specularCenter + lightingConfig.specularOffset)) / lightingConfig.specularScale;\n    specularVector.x *= screenRatio;\n    float specular = 1.0-min(length(specularVector), 1.0);\n    specular = sineInOut(specular);\n    float lighting = lightingConfig.specularStrength * specular;\n\n    vec2 groundSpecularVector = (worldPosFromCamera.xz - lightingConfig.groundSpecularOffset) / lightingConfig.groundSpecularScale;\n    float groundSpecular = 1.0-min(length(groundSpecularVector), 1.0);\n    groundSpecular = sineInOut(groundSpecular);\n    lighting += lightingConfig.groundSpecularStrength * groundSpecular;\n\n    return lighting;\n}\n\n// WITHOUT ground specular\nfloat computeLighting(Lighting lightingConfig, float screenRatio, vec2 screenUv) {\n    vec2 specularVector = (screenUv - (lightingConfig.specularCenter + lightingConfig.specularOffset)) / lightingConfig.specularScale;\n    specularVector.x *= screenRatio;\n    float specular = 1.0-min(length(specularVector), 1.0);\n    specular = sineInOut(specular);\n    float lighting = lightingConfig.specularStrength * specular;\n\n    return lighting;\n}\n\nvec3 computeBackground(Background backgroundConfig, vec2 screenUv) {\n    float baseProgress = cremap(screenUv.y, backgroundConfig.progressRemap.x, backgroundConfig.progressRemap.y, 0., 1.);\n    float progress = 1. - abs((baseProgress - 0.5) * 2.);\n    progress = sineInOut(progress);\n\n    return mix(backgroundConfig.groundColor, backgroundConfig.skyColor, progress);\n}\n\n// Reveal\n#define REVEAL_POINTS_COUNT 4\nuniform sampler2D uNoiseTexture;\nuniform sampler2D uNoiseFinalTexture;\nvarying float vRevealProgress;\nvarying vec4 vRevealPoints[REVEAL_POINTS_COUNT];\nvarying vec2 vRevealPointsPos[REVEAL_POINTS_COUNT];\n\n// Simulation\nuniform sampler2D uSimulationTexture;\nvarying vec2 vSimulationUv;\n\n// Fog\nuniform vec2 uFogState;\n\nvec3 packNormalToRGB(const in vec3 normal) {\n\treturn normalize(normal) * 0.5 + 0.5;\n}\n\nfloat getColorIntensity(vec3 color) {\n\treturn color.r * .3 + color.g * .59 + color.b * .11;\n}\n\nvec4 getSdfFromAtlas2(vec2 uv, SDFData sdfData, sampler2D sdfTexture) {\n\tvec2 center = sdfData.atlasRemap.xy + sdfData.atlasRemap.zw / 2.;\n\tuv = 1. - uv;\n\tuv = remapAtlasUv(uv, sdfData.atlasRemap);\n\tuv = ((uv - center) / sdfData.scale) + center;\n\tfloat planeRatio = sdfData.planeSize.x / sdfData.planeSize.y;\n\tvec4 value = texture2D(sdfTexture, uv);\n\treturn value;\n}\n\nmat3 getTangentFrame(vec3 eye_pos, vec3 surf_norm, vec2 uv) {\n\tvec3 q0 = dFdx(eye_pos.xyz);\n\tvec3 q1 = dFdy(eye_pos.xyz);\n\tvec2 st0 = dFdx(uv.st);\n\tvec2 st1 = dFdy(uv.st);\n\tvec3 N = surf_norm;\n\tvec3 q1perp = cross(q1, N);\n\tvec3 q0perp = cross(N, q0);\n\tvec3 T = q1perp * st0.x + q0perp * st1.x;\n\tvec3 B = q1perp * st0.y + q0perp * st1.y;\n\tfloat det = max(dot(T, T), dot(B, B));\n\tfloat scale = (det == 0.0) ? 0.0 : inversesqrt(det);\n\treturn mat3(T * scale, B * scale, N);\n}\n\nvoid main() {\n\n\tSDFData sdfData;\n\tsdfData.planeSize = vSdfPlaneSize;\n\tsdfData.scale = vSdfScale;\n\tsdfData.originSize = vSdfOriginSize;\n\tsdfData.atlasRemap = vSdfAtlasRemap;\n\n\tvec2 uv = vUv;\n\tvec3 normal = vNormal;\n\n\t// TODO: fix the border right uv issue properly\n\t// float patchOffsetX = .001;\n\t// uv.x = uv.x * (1. - patchOffsetX) + patchOffsetX;\n\t//\n\n\t//// global\n\n\tfloat planeRatio = sdfData.planeSize.y / sdfData.planeSize.x;\n\tfloat dist = getSdfFromAtlas(uv, sdfData, uSdfAtlasTexture);\n\n\t//// normal map\n\n\tvec2 normalMapUv = uNormalMapScale * uv;\n\tnormalMapUv.x *= planeRatio;\n\tnormalMapUv *= sdfData.planeSize.x * .1;\n\n\tfloat baseNormalRiseProgress = dot(normal, vec3(0., 1., 0.));\n\n\tmat3 tbn = getTangentFrame(vMvPosition.xyz, normal, normalMapUv);\n\n\tvec3 mapN = texture2D(uNormalMapTexture, normalMapUv).xyz * 2.0 - 1.0;\n\tmapN.xy *= mix(uNormalMapStrength, 0., baseNormalRiseProgress * baseNormalRiseProgress);\n\tnormal = normalize(tbn * mapN);\n\n\t//// ground lighting\n\n\tfloat transformedNormalRiseProgress = dot(normal, vec3(0., 1., 0.));\n\n\tvec2 screenUv = gl_FragCoord.xy / uResolution;\n\tfloat ratio = uResolution.x / uResolution.y;\n\tvec3 background = computeBackground(uBackground, screenUv);\n\tfloat lighting = computeLighting(uLighting, ratio, screenUv, vWorldPosition - cameraPosition);\n\n\tvec3 color = mix(uLighterColor, background + lighting, transformedNormalRiseProgress);\n\n\t#ifdef RENDER_PAINT\n\n\t//// simulation\n\n\tvec2 simulationUv = vSimulationUv;\n\tvec4 data = texture2D(uSimulationTexture, simulationUv);\n\tvec2 dir = -data.rg;\n\tfloat vel = data.b;\n\tfloat intensity = data.a;\n\tfloat blend = smoothstep(0., 0.1, vel);\n\tfloat offset = smoothstep(0.05, 0.15, vel);\n\n\tvec2 paintOffsetUv = uv;\n\n\tvec2 _vel = -dir;\n    float velLength = length(_vel);\n    _vel = _vel * .5 + .5;\n\n\t// paintOffsetUv += normalize(_vel) * 0.01;\n\t// paintOffsetUv -= 0.01 * .5;\n\n\tfloat textureEdge = min(smoothstep(0., -0.05, dist), smoothstep(1., 0.95, vUv.y));\n\tpaintOffsetUv += normalize(dir) * smoothstep(0.001, 0.05, vel) * 0.01 * textureEdge;\n\n\tpaintOffsetUv.x = 1. - paintOffsetUv.x;\n\tpaintOffsetUv = remapAtlasUv(paintOffsetUv, vPaintAtlasRemap);\n\n\tvec2 paintUv = uv;\n\tpaintUv.x = 1. - paintUv.x;\n\tpaintUv = remapAtlasUv(paintUv, vPaintAtlasRemap);\n\n\tvec4 texelOffset = texture2D(uPaintAtlasTexture, paintOffsetUv);\n\tvec4 texel = texture2D(uPaintAtlasTexture, paintUv);\n\ttexel = mix(texel, texelOffset, offset);\n\tfloat mixValue = mix(uPaintIntensity.x, uPaintIntensity.y, intensity) * blend;\n\t// float mixValue = max(vel, min(1., velLength)) * .5 + min(1., velLength) * .5;\n\tvec3 baseColor = texel.rgb;\n\n\tfloat maxProgress = 0.55;\n\tif(vTransparency > 0.5)\n\t\tmaxProgress = 0.4;\n\t// REVEAL\n\tvec4 inkReveal = computeInkReveal(color, baseColor, uv, vRevealProgress, planeRatio, uNoiseFinalTexture, vRevealPoints, vRevealPointsPos, maxProgress);\n\t// vec4 inkReveal = vec4(baseColor, 1.);\n\tvec3 inkColor = inkReveal.xyz;\n\n\t// BLENDING\n\tfloat pixelWidth = 1.0 / uLutSize;\n\tfloat halfPixelWidth = 0.5 / uLutSize;\n\tcolor = mix(inkColor, baseColor, mixValue);\n\tvec3 uvw = vec3(halfPixelWidth) + color * (1.0 - pixelWidth);\n\tvec3 lutColor = mix(texture(uDryLut3d, uvw).rgb, texture(uInkLut3d, uvw).rgb, mixValue);\n\tcolor = mix(color, lutColor, uLutEnable);\n\t// BLENDING - END\n\n\t#endif\n\n\t// SDF MASK\n\t// float edgeAlpha = mix(1. - texel.a, dist, vSdfAlpha);\n\t// float distAlpha = 1. - clamp(edgeAlpha / fwidth(edgeAlpha) + 0.5, 0.0, 1.0);\n\t// SDF MASK - END\n\n\t// IMAGE MASK\n\tfloat distAlpha = texture2D(uMaskAtlasTexture, paintUv).r;\n\t// IMAGE MASK - END\n\n\t// ANTIALIASING\n\tfloat uvY = 1. - vUv.y;\n\tfloat uvAlpha = clamp(uvY / fwidth(uvY) + 0.5, 0.0, 1.0);\n\t// ANTIALIASING - END\n\n\tcolor = getFogColorWithRatio(uTime, vFogDepth, screenUv, uResolution, vWorldPosition, color, tNoiseTexture, uFogState.x, uFogState.y);\n\n\tfloat alpha = distAlpha * uvAlpha * vAlpha;\n\tif(vTransparency > 0.5)\n\t\talpha *= inkReveal.a;\n\n\t//// FINAL COLOR\n\tgl_FragColor = vec4(color, alpha);\n\tgl_FragColor = LinearTosRGB(gl_FragColor);\n\n\t//// DEBUG\n\t// gl_FragColor = getSdfFromAtlas2(vUv, sdfData, uSdfAtlasTexture);\n\t// gl_FragColor = vec4(vec3(1. - distAlpha), 1.);\n\t// gl_FragColor = vec4(texel.rgb, 1.);\n\t// gl_FragColor = vec4(vec3(distAlpha), 1.);\n\n\t// gl_FragColor = vec4(vec3(uvAlpha), 1.);\n\t// gl_FragColor = vec4(inkColor, step(dist, 0.) * vAlpha);\n\t// gl_FragColor = vec4(vec3(data.a * blend), step(dist, 0.));\n\t// gl_FragColor = vec4(paperColor, step(dist, 0.));\n    // gl_FragColor = vec4(packNormalToRGB(normal), step(dist, 0.));\n    // gl_FragColor = vec4(normalColor.rgb, step(dist, 0.));\n\t// gl_FragColor = vec4(matcapColor, step(dist, 0.));\n\t// gl_FragColor.rgb = vec3(data.a);\n\t// gl_FragColor.rgb = vec3(abs(dot(normal, vec3(0., 1., 0.)) - dot(vNormal, vec3(0., 1., 0.))));\n\t// gl_FragColor.rgb = vec3(downProgress);\n\n\t/** debug simulation **/\n\n\t// float opacity = max(data.z, min(1., velLength)) * 1. + min(1., velLength) * 1.;\n\t// gl_FragColor = vec4(mix(vec3(1.), baseColor, opacity), 1.);\n\n\t#ifdef DEBUG_SIMULATION\n\n    color = vec3(_vel.x, _vel.y, 1.0);\n    color = mix(vec3(1.0), color, velLength);\n\n    gl_FragColor = vec4(color,  1.0);\n\n\t#endif\n\n\t/**/\n\n\tif(gl_FragColor.a < 0.01)\n\t\tdiscard;\n}",uniforms:this._uniforms,defines:this._defines,transparent:!0})}},{key:"_computeRevealPoints",value:function(t){var e=[],n=[];return this._papers.map((function(r,i){var o=t[i].planeSize,a=r2(o.y/o.x,1),s=a.positions,l=a.infos;e.push(s),n.push(l)})),{positions:e,infos:n}}},{key:"_createMesh",value:function(){var t=new lx(this._geometry,this._material,this._count);return t.instanceMatrix.setUsage(iy),this.add(t),t}},{key:"_fillAttributesArray",value:function(t,e,n,r){for(var i=0;i<this._count;i++){var o=this._papers[i],a=o.getSimulationRemapValues();r[i]=o.config.transparency?1:0,t[i]=i,e[4*i+0]=o.paperBox.min.x,e[4*i+1]=o.paperBox.min.y,e[4*i+2]=o.paperBox.max.x,e[4*i+3]=o.paperBox.max.y,n[4*i+0]=null==a?void 0:a.x,n[4*i+1]=null==a?void 0:a.y,n[4*i+2]=null==a?void 0:a.w,n[4*i+3]=null==a?void 0:a.h}}},{key:"_updateAttributes",value:function(){var t=this._geometry.getAttribute("instance"),e=this._geometry.getAttribute("simulationBox"),n=this._geometry.getAttribute("simulationRemap"),r=this._geometry.getAttribute("transparency");this._fillAttributesArray(t.array,e.array,n.array,r.array),e.needsUpdate=!0,n.needsUpdate=!0}},{key:"_prepareInstanceMatrices",value:function(){return this._papers.map((function(t){var e=t._loadedMesh,n=e.geometry.boundingBox,r=Math.abs(n.min.z)+Math.abs(n.max.z),i=Math.abs(n.min.y)+Math.abs(n.max.y),o=new Xb;return o.position.add(e.position),o.position.add(e.parent.position),o.scale.set(1,i,r),o.rotation.y=-t.container.rotation.y,o.rotation.x-=Math.PI,o.updateMatrix(),o}))}},{key:"_updateInstanceMatrices",value:function(){var t=this._papers.some((function(t){return t.isAnimated}));if(t){for(var e=0;e<this._count;e++){var n=this._papers[e]._instanceTween,r=this._instancesBaseMatrices[e];r.rotation.z=-n.rotationZ,r.updateMatrix(),this._mesh.setMatrixAt(e,r.matrix)}this._mesh.instanceMatrix.needsUpdate=!0}}},{key:"updateSimulationTexture",value:function(t){this._uniforms.uSimulationTexture.value=t}},{key:"update",value:function(t){t.delta;for(var e,n,r=t.time,i=0;i<this._count;i++){var o=this._papers[i]._instanceTween;this._uniforms.uAlpha.value[i]=o.uAlpha,this._uniforms.uCurveCoef.value[i]=o.uCurveCoef,this._uniforms.uRevealProgress.value[i]=o.uRevealProgress}this._uniforms.uTime.value=r,this._uniforms.uFogState.value.set(null===(e=this.$experienceManager)||void 0===e?void 0:e.fogState.opaque,null===(n=this.$experienceManager)||void 0===n?void 0:n.fogState.occulted),this._updateInstanceMatrices()}},{key:"onWindowResize",value:function(t){this._uniforms.uResolution.value.set(t.renderWidth,t.renderHeight)}},{key:"_createDebug",value:function(){var t=this;if(lK){var e=this._debugContainer;e.addInput(this._defines,"RENDER_PAINT",{label:"Render paint"}).on("change",(function(){t._material.needsUpdate=!0})),e.addInput(new p1(this._uniforms.uLighterColor,"value"),"value",{label:"Lighter Color"});var n=e.addFolder({title:"Normal map"});n.addInput(this._uniforms.uNormalMapStrength,"value",{label:"Strength",min:0,max:30}),n.addInput(this._uniforms.uNormalMapScale,"value",{label:"Scale",min:0,max:5});var r=e.addFolder({title:"Ink"});r.addInput(this._uniforms.uDisplacementStrength,"value",{label:"Displacement Strength",min:0,step:.001}),r.addInput(new V1(this._uniforms.uPaintIntensity.value),"value",{label:"Paint Intensity",min:-.5,max:2.5,step:.001});var i={value:1==this._uniforms.uLutEnable.value};r.addInput(i,"value",{label:"Enable lut"}).on("change",(function(e){var n=e.value;t._uniforms.uLutEnable.value=n?1:0}));var o={inkLut:"",dryLut:""},a="uInkLut3d",s=function(e){var n=e.texture3D;t._uniforms[a].value=n,t._uniforms.uLutSize.value=n.image.width},l=new FileReader,u=new fX;l.addEventListener("load",(function(){return u.load(l.result,(function(t){return s(t)}))}),!1),r.addInput(o,"inkLut",{view:"file-input",lineCount:1,filetypes:[".3DL",".3dl"],label:"Ink LUT"}).on("change",(function(t){var e=t.value;a="uInkLut3d",l.abort(),e?l.readAsDataURL(e):s(AK.get("lut/ink"))})),r.addInput(o,"dryLut",{view:"file-input",lineCount:1,filetypes:[".3DL",".3dl"],label:"Dry LUT"}).on("change",(function(t){var e=t.value;a="uDryLut3d",l.abort(),e?l.readAsDataURL(e):s(AK.get("lut/dry"))}))}}},{key:"updateConfig",value:function(){return this._config.uLighterColor="#"+this._uniforms.uLighterColor.value.getHexString(),this._config.uNormalMapStrength=this._uniforms.uNormalMapStrength.value,this._config.uNormalMapScale=this._uniforms.uNormalMapScale.value,this._config.uDisplacementStrength=this._uniforms.uDisplacementStrength.value,this._config.uPaintIntensity={min:this._uniforms.uPaintIntensity.value.x,max:this._uniforms.uPaintIntensity.value.y},this._config}}],r&&K1(n.prototype,r),i&&K1(n,i),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,i}(dY(Xb));function r2(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=[new Ay,new Ay,new Ay,new Ay],r=[new Hy,new Hy,new Hy,new Hy],i=[0,.2,.4,.6],o=Math.max(0,A0(t,[1,4],[0,1])),a=[];r.map((function(t,s){var l=n[s];if(s==r.length-1)l.x=.5,l.y=.5,t.x=.95*(1+2.5*o),t.x*=e,t.y=1.5*i[i.length-1],t.z=4,t.z*=1+1*o,t.z=Math.min(8,t.y+t.z)-t.y;else{l.x=.1+.9*s/(r.length-1),l.x+=.2*Math.random()-.1;var u=.4+.3*o;l.y=u+(1-u)*Math.random(),t.x=.6+.4*Math.random(),t.x*=1+1*o;do{t.y=i[Math.floor(Math.random()*i.length)]}while(a.includes(t.y));a.push(t.y),t.z=2.4,t.z*=1+1*o,t.z=Math.min(5,t.y+t.z)-t.y}}));var s=new Sb;s.set(n[0].x,n[1].x,n[2].x,n[3].x,n[0].y,n[1].y,n[2].y,n[3].y,0,0,0,0,0,0,0,0);var l=new Sb;return l.set(r[0].x,r[1].x,r[2].x,r[3].x,r[0].y,r[1].y,r[2].y,r[3].y,r[0].z,r[1].z,r[2].z,r[3].z,r[0].w,r[1].w,r[2].w,r[3].w),{positions:s,infos:l}}function i2(t){return i2="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},i2(t)}function o2(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,a2(r.key),r)}}function a2(t){var e=function(t,e){if("object"!=i2(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=i2(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==i2(e)?e:e+""}function s2(t,e,n){return e=c2(e),function(t,e){if(e&&("object"===i2(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,l2()?Reflect.construct(e,n||[],c2(t).constructor):e.apply(t,n))}function l2(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(l2=function(){return!!t})()}function u2(){return u2="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=c2(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(arguments.length<3?t:n):i.value}},u2.apply(this,arguments)}function c2(t){return c2=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},c2(t)}function d2(t,e){return d2=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},d2(t,e)}var f2=new Xb,h2=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),s2(this,e,arguments)}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&d2(t,e)}(e,t),n=e,r=[{key:"init",value:function(t){var e=this,n=t.papers,r=t.paintsComponent,i=t.debugContainer;this._config=v1,this._papers=n,this._paintsComponent=r,this._debugContainer=i,this._scene=this._createScene(),this._renderTarget=new Vy(0,0,{depthBuffer:!1}),this._count=this._papers.length,this._geometry=this._createGeometry(),this._material=this._createMaterial(),this._mesh=this._createMesh(),this._createDebug(),this._instancesTweens=this._papers.map((function(){return{uAlpha:0}})),vY&&this._papers.forEach((function(t,n){return e.show(t)}))}},{key:"mesh",get:function(){return this._mesh}},{key:"map",get:function(){return this._renderTarget.texture}},{key:"destroy",value:function(){this._material.dispose(),this._geometry.dispose(),this._renderTarget.dispose(),u2(c2(e.prototype),"destroy",this).call(this)}},{key:"show",value:function(t){var e=this,n=this._papers.indexOf(t);if(!(n<0)){var r=ti.timeline();return r.fromTo(this._instancesTweens[n],{uAlpha:0},{uAlpha:1,duration:1,ease:"sine.out"},0),r.call((function(n){e._uniforms.uVisible.value[n]=!!t.config.castShadow}),[n],0),r}}},{key:"hideAll",value:function(){var t=ti.timeline();return this._instancesTweens.forEach((function(e){ti.killTweensOf(e),t.to(e,{uAlpha:0,duration:.5,ease:"sine.inOut"},0)})),t}},{key:"_createScene",value:function(){var t=new UE;return t.background=new By(16777215),t}},{key:"_createGeometry",value:function(){var t=new sw(1,1,5,5);t.translate(0,-.5,0),t.rotateX(Math.PI),t.rotateY(Math.PI/2);var e=new CS;e.copy(t);for(var n=new Float32Array(this._count),r=0;r<this._count;r++)n[r]=r;return e.setAttribute("instance",new nx(n,1)),e}},{key:"_createMaterial",value:function(){return this._uniforms={uNoise:{value:this._config.uNoise},uShadowSpread:{value:this._config.uShadowSpread},uShadowAttenuation:{value:this._config.uShadowAttenuation},uShadowSkew:{value:this._config.uShadowSkew},uSdfTexture:{value:this._paintsComponent.sdfAtlasTexture},uSdfData:{value:this._paintsComponent.sdfDatas},uVisible:{value:new Array(this._count).fill(!1)},uAlpha:{value:new Array(this._count).fill(0)},uLightDirection:{value:new Ky}},new V_({vertexShader:"#define GLSLIFY 1\n\nstruct SDFData {\n    vec2 pixelSize;\n    vec2 planeSize;\n    vec2 scale;\n    vec2 originSize;\n    vec4 atlasRemap;\n};\n\nattribute float instance;\n\nuniform bool uVisible[INSTANCE_COUNT];\n\n// SDFData\nuniform SDFData uSdfData[INSTANCE_COUNT];\n\nvarying vec2 vSdfPixelSize;\nvarying vec2 vSdfPlaneSize;\nvarying vec2 vSdfScale;\nvarying vec2 vSdfOriginSize;\nvarying vec4 vSdfAtlasRemap;\n\nuniform vec3 uLightDirection;\n\nuniform float uAlpha[INSTANCE_COUNT];\nvarying float vAlpha;\n\nvarying vec2 vUv;\nvarying float vDistanceFromFloor;\n\n// Implementation from https://gist.github.com/TimSC/8c25ca941d614bf48ebba6b473747d72\nvec3 projectToGround(vec3 planeNormal, vec3 planePoint, vec3 rayDirection, vec3 rayPoint ) {\n    float ndotu = dot(planeNormal, rayDirection);\n    vec3 w = rayPoint - planePoint;\n    float si = -dot(planeNormal, w) / ndotu;\n    vec3 Psi = w + si * rayDirection + planePoint;\n    return Psi;\n}\n\nvoid main() {\n    SDFData sdfData = uSdfData[int(instance)];\n    vSdfPixelSize = sdfData.pixelSize;\n    vSdfPlaneSize = sdfData.planeSize;\n    vSdfScale = sdfData.scale;\n    vSdfOriginSize = sdfData.originSize;\n    vSdfAtlasRemap = sdfData.atlasRemap;\n\n    vAlpha = uAlpha[int(instance)];\n\n\tvec3 transformedPosition = position;\n\ttransformedPosition.z *= sdfData.scale.x;\n\n\tvec4 worldPosition = modelMatrix * instanceMatrix * vec4(transformedPosition, 1.0);\n  \tif (!uVisible[int(instance)]) worldPosition *= 0.;\n\tvec4 projectedPosition = vec4(projectToGround(vec3(0., 1., 0.), vec3(0., 0., 0.), uLightDirection, worldPosition.xyz), worldPosition.w);\n\tprojectedPosition.y += 0.01;\n\n\tgl_Position = projectionMatrix * viewMatrix * projectedPosition;\n\t\n\tvDistanceFromFloor = abs((instanceMatrix * vec4(position, 1.0)).y);\n\tvUv = uv;\n}",fragmentShader:"#define GLSLIFY 1\n\nstruct SDFData {\n    vec2 pixelSize;\n    vec2 planeSize;\n    vec2 scale;\n    vec2 originSize;\n    vec4 atlasRemap;\n};\n\nfloat cremap(float value, float start1, float stop1, float start2, float stop2) {\n  float r = start2 + (stop2 - start2) * ((value - start1) / (stop1 - start1));\n  return clamp(r, min(start2, stop2), max(start2, stop2));\n}\n\nfloat remap(float value, float start1, float stop1, float start2, float stop2) {\n  return start2 + (stop2 - start2) * ((value - start1) / (stop1 - start1));\n}\n\nfloat rand(vec2 co){\n\treturn fract(sin(dot(co, vec2(12.9898, 78.233))) * 43758.5453);\n}\n\nvec2 remapAtlasUv(vec2 uv, vec4 atlasRemap) {\n    vec2 _uv = uv;\n    _uv.x = remap(_uv.x, 0., 1., atlasRemap.x, atlasRemap.x + atlasRemap.z);\n    _uv.y = remap(_uv.y, 0., 1., atlasRemap.y, atlasRemap.y + atlasRemap.w);\n    return _uv;\n}\n\nvec2 remapAtlasUv(vec2 uv, vec4 boxSize, vec4 atlasRemap) {\n    vec2 _uv = uv;\n    _uv.x = remap(_uv.x, 0., 1., boxSize.x, boxSize.z);\n    _uv.y = remap(_uv.y, 1., 0., boxSize.y, boxSize.w);\n    _uv.x = remap(_uv.x, 0., 1., atlasRemap.x, atlasRemap.x + atlasRemap.z);\n    _uv.y = remap(_uv.y, 0., 1., atlasRemap.y, atlasRemap.y + atlasRemap.w);\n    return _uv;\n}\n\nconst float BASE = 255.;\nconst float BASE_2_2315452051 = BASE * BASE;\nconst float BASE_3_2315452051 = BASE * BASE * BASE;\n\nfloat getSdfFromAtlas(vec2 uv, SDFData sdfData, sampler2D sdfTexture) {\n    vec2 center = sdfData.atlasRemap.xy + sdfData.atlasRemap.zw / 2.;\n    uv = 1. - uv;\n    uv = remapAtlasUv(uv, sdfData.atlasRemap);\n    uv = ((uv - center) / sdfData.scale) + center;\n    float planeRatio = sdfData.planeSize.x / sdfData.planeSize.y;\n    vec4 value = texture2D(sdfTexture, uv) * BASE;\n    float pixelDistance = ((value.x * BASE_2_2315452051 + value.y * BASE + value.z) - (BASE_3_2315452051 / 2.)) / 1000.;\n    float compensatedDist = pixelDistance / (max(sdfData.originSize.x, sdfData.originSize.y) * 0.5);\n    return compensatedDist;\n}\n\nfloat exponentialOut(float t) {\n  return t == 1.0 ? t : 1.0 - pow(2.0, -10.0 * t);\n}\n\n// Sdf\nvarying vec2 vSdfPixelSize;\nvarying vec2 vSdfPlaneSize;\nvarying vec2 vSdfScale;\nvarying vec2 vSdfOriginSize;\nvarying vec4 vSdfAtlasRemap;\n\nuniform sampler2D uSdfTexture;\n\n// Params\nvarying float vAlpha;\nuniform float uNoise; // 0.3\nuniform float uShadowSpread; // 0.05\nuniform float uShadowAttenuation; // 1\nuniform float uShadowSkew; // 0.3\n\nvarying vec2 vUv;\nvarying float vDistanceFromFloor;\n\nfloat getShadow(vec2 st, float distFromFloor, SDFData sdfData) {\n\tvec2 random = vec2(rand(st), rand(st + 1.));\n\tvec2 uv = ((st - 0.5) * vec2(sdfData.scale.x, 1.)) + 0.5;\n\trandom = (random - 0.5) * uNoise * distFromFloor / sdfData.atlasRemap.zw;\n\tuv = uv + random;\n\tfloat dist = getSdfFromAtlas(uv, sdfData, uSdfTexture);\n\tif (uv.x < 0. || uv.x > 1.) dist = 1000.;\n\tif (uv.y < 0. || uv.y > 1.) dist = 1000.;\n\tfloat shadow = smoothstep(uShadowSpread * distFromFloor, -uShadowSpread * distFromFloor, dist);\n\tfloat attenuation = distFromFloor;\n\tshadow = 1. - (shadow - attenuation); \n\treturn shadow;\n}\n\nvoid main() {\n\tSDFData sdfData;\n    sdfData.pixelSize = vSdfPixelSize;\n    sdfData.planeSize = vSdfPlaneSize;\n    sdfData.scale = vSdfScale;\n    sdfData.originSize = vSdfOriginSize;\n    sdfData.atlasRemap = vSdfAtlasRemap;\n\n\tfloat distFromFloor = cremap(vDistanceFromFloor, 0., uShadowAttenuation, 0., 1.);\n\tdistFromFloor = exponentialOut(distFromFloor);\n\n\tfloat planeRatio = vSdfOriginSize.x / vSdfOriginSize.y;\n\tfloat skew = uShadowSkew / (vSdfPlaneSize.x * planeRatio);\n\tvec2 uv1 = vUv + vec2(distFromFloor, 0.) * skew;\n\tvec2 uv2 = vUv - vec2(distFromFloor, 0.) * skew;\n\n\tfloat shadow1 = getShadow(uv1, distFromFloor, sdfData);\n\tfloat shadow2 = getShadow(uv2, distFromFloor, sdfData);\n\t\n\tfloat alpha = 1. - (shadow1 + shadow2) / 2.;\n\talpha *= vAlpha;\n\n\tif (alpha < 0.01) discard;\n\n\tgl_FragColor = vec4(vec3(0.), alpha);\n}",uniforms:this._uniforms,defines:{INSTANCE_COUNT:this._count},transparent:!0,depthTest:!1})}},{key:"_createMesh",value:function(){for(var t=new lx(this._geometry,this._material,this._count),e=0;e<this._papers.length;e++){var n=this._papers[e];f2.position.copy(n.container.position),f2.scale.set(n.meshSize.z,n.meshSize.y,n.meshSize.x),f2.rotation.y=-n.container.rotation.y,f2.updateMatrix(),t.setMatrixAt(e,f2.matrix)}return t.instanceMatrix.setUsage(iy),this._scene.add(t),t}},{key:"onWindowResize",value:function(t){this._renderTarget.setSize(t.renderWidth,t.renderHeight)}},{key:"render",value:function(t){this._uniforms.uLightDirection.value.copy(t._components.lights.direction),this._updateInstanceMatrices();for(var e=0;e<this._papers.length;e++){var n=this._instancesTweens[e];this._uniforms.uAlpha.value[e]=n.uAlpha}this._mesh.instanceMatrix.needsUpdate=!0;var r=t.camera,i=this.$renderer.instance.getRenderTarget();this.$renderer.instance.setRenderTarget(this._renderTarget),this.$renderer.instance.render(this._scene,r),this.$renderer.instance.setRenderTarget(i)}},{key:"_updateInstanceMatrices",value:function(){var t=this._papers.some((function(t){return t.isAnimated}));if(t){for(var e=0;e<this._papers.length;e++){var n=this._papers[e],r=this._instancesTweens[e];this._uniforms.uAlpha.value[e]=r.uAlpha,f2.position.copy(n.container.position),f2.scale.set(n.meshSize.z,n.meshSize.y,n.meshSize.x),f2.rotation.copy(n.container.rotation),f2.rotation.z=this._papers[e]._instanceTween.rotationZ,f2.updateMatrix(),this._mesh.setMatrixAt(e,f2.matrix)}this._mesh.instanceMatrix.needsUpdate=!0}}},{key:"_createDebug",value:function(){if(lK){var t=this._debugContainer;t.addInput(this._uniforms.uNoise,"value",{label:"Noise",step:.01,min:0,max:1}),t.addInput(this._uniforms.uShadowSpread,"value",{label:"Spread",step:.01}),t.addInput(this._uniforms.uShadowAttenuation,"value",{label:"Attenuation",step:.01}),t.addInput(this._uniforms.uShadowSkew,"value",{label:"Skew",step:.01})}}},{key:"updateConfig",value:function(){return this._config.uNoise=this._uniforms.uNoise.value,this._config.uShadowSpread=this._uniforms.uShadowSpread.value,this._config.uShadowAttenuation=this._uniforms.uShadowAttenuation.value,this._config.uShadowSkew=this._uniforms.uShadowSkew.value,this._config}}],r&&o2(n.prototype,r),i&&o2(n,i),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,i}(dY(Xb));const p2=JSON.parse('[["background_2",{"pixelSize":{"x":1949,"y":540},"scale":{"x":1.0155775613329634,"y":1.0043609059579839},"planeSize":{"x":64.19490051269531,"y":229.31015014648438},"originSize":{"x":1920,"y":538},"texture":null,"atlasRemap":{"x":0.005859375,"y":0.26346679687499996,"z":0.39969726562499996,"w":0.11074218749999999}}],["cow_1",{"pixelSize":{"x":827,"y":447},"scale":{"x":1.7722013664616454,"y":1.501021441064487},"planeSize":{"x":1.2949990034104257,"y":1.995922565460205},"originSize":{"x":467,"y":298},"texture":null,"atlasRemap":{"x":0.005859375,"y":0.38592773437499994,"z":0.169599609375,"w":0.09166992187499999}}],["cow_2",{"pixelSize":{"x":1124,"y":503},"scale":{"x":1.6068272814632074,"y":1.3237235044396263},"planeSize":{"x":1.6479153633118775,"y":3.089055895805359},"originSize":{"x":700,"y":380},"texture":null,"atlasRemap":{"x":0.41727539062499996,"y":0.26346679687499996,"z":0.2305078125,"w":0.103154296875}}],["cow_3",{"pixelSize":{"x":1103,"y":484},"scale":{"x":1.8389374788855142,"y":1.4692800485849782},"planeSize":{"x":1.1919839382172426,"y":2.1309237480163574},"originSize":{"x":600,"y":330},"texture":null,"atlasRemap":{"x":0.6595019531249999,"y":0.26346679687499996,"z":0.226201171875,"w":0.0992578125}}],["land_back_1",{"pixelSize":{"x":2242,"y":429},"scale":{"x":1.1678729509197323,"y":1.03697214409918},"planeSize":{"x":5.956885814666748,"y":27.04738998413086},"originSize":{"x":1920,"y":414},"texture":null,"atlasRemap":{"x":0.005859375,"y":0.5900390624999999,"z":0.45978515625,"w":0.087978515625}}],["land_back_2",{"pixelSize":{"x":2205,"y":402},"scale":{"x":1.1484802095252957,"y":1.0303711118525933},"planeSize":{"x":6.7349042892456055,"y":32.926025390625},"originSize":{"x":1920,"y":391},"texture":null,"atlasRemap":{"x":0.005859375,"y":0.689736328125,"z":0.45219726562499996,"w":0.08244140625}}],["land_back_3",{"pixelSize":{"x":2492,"y":439},"scale":{"x":1.298261448100154,"y":1.0643213989236868},"planeSize":{"x":3.3527631759643555,"y":15.54692554473877},"originSize":{"x":1920,"y":413},"texture":null,"atlasRemap":{"x":0.187177734375,"y":0.38592773437499994,"z":0.5110546874999999,"w":0.090029296875}}],["land_back_4",{"pixelSize":{"x":1443,"y":386},"scale":{"x":1.1277942141874446,"y":1.0373382961240352},"planeSize":{"x":7.825080394744873,"y":26.782154083251953},"originSize":{"x":1280,"y":373},"texture":null,"atlasRemap":{"x":0.47736328125,"y":0.5900390624999999,"z":0.295927734375,"w":0.07916015625}}],["land_back_5",{"pixelSize":{"x":2015,"y":320},"scale":{"x":1.0495379860547802,"y":1.0082399767496262},"planeSize":{"x":20.1865291595459,"y":121.35956573486328},"originSize":{"x":1920,"y":318},"texture":null,"atlasRemap":{"x":0.005859375,"y":0.8653417968749999,"z":0.413232421875,"w":0.065625}}],["land_front_1",{"pixelSize":{"x":1611,"y":389},"scale":{"x":1.3426762628674025,"y":1.104005292230961},"planeSize":{"x":2.918206214904785,"y":9.614895343780518},"originSize":{"x":1200,"y":353},"texture":null,"atlasRemap":{"x":0.46977539062499996,"y":0.689736328125,"z":0.330380859375,"w":0.079775390625}}],["land_front_2",{"pixelSize":{"x":2316,"y":141},"scale":{"x":1.8685044009606668,"y":1.096959501975898},"planeSize":{"x":1.151404643308524,"y":10.313584327697754},"originSize":{"x":1240,"y":129},"texture":null,"atlasRemap":{"x":0.005859375,"y":0.942685546875,"z":0.47496093749999996,"w":0.028916015625}}],["land_front_3",{"pixelSize":{"x":2125,"y":808},"scale":{"x":1.6606006273518608,"y":1.31750640038637},"planeSize":{"x":1.5137739181518555,"y":3.149542808532715},"originSize":{"x":1280,"y":614},"texture":null,"atlasRemap":{"x":0.40335937499999996,"y":0.005859375,"z":0.435791015625,"w":0.165703125}}],["land_front_4",{"pixelSize":{"x":1268,"y":287},"scale":{"x":1.585996092776476,"y":1.18647609248775},"planeSize":{"x":1.706496019899987,"y":5.36261773109436},"originSize":{"x":800,"y":242},"texture":null,"atlasRemap":{"x":0.430810546875,"y":0.8653417968749999,"z":0.2600390625,"w":0.058857421874999996}}],["land_front_5",{"pixelSize":{"x":2205,"y":434},"scale":{"x":1.7228193953459092,"y":1.2035527326186986},"planeSize":{"x":1.3834714541956146,"y":4.912731885910034},"originSize":{"x":1280,"y":361},"texture":null,"atlasRemap":{"x":0.005859375,"y":0.48931640624999995,"z":0.45219726562499996,"w":0.08900390625}}],["land_front_6",{"pixelSize":{"x":1077,"y":340},"scale":{"x":1.3474429200822478,"y":1.130586227395727},"planeSize":{"x":2.8781706064503396,"y":7.657775402069092},"originSize":{"x":800,"y":301},"texture":null,"atlasRemap":{"x":0.005859375,"y":0.7838964843749999,"z":0.220869140625,"w":0.06972656249999999}}],["land_front_7",{"pixelSize":{"x":1713,"y":352},"scale":{"x":1.3385999139756906,"y":1.0858708999821882},"planeSize":{"x":2.9533380214378724,"y":11.64538860321045},"originSize":{"x":1280,"y":325},"texture":null,"atlasRemap":{"x":0.46977539062499996,"y":0.48931640624999995,"z":0.35129882812499996,"w":0.0721875}}],["sheep_1",{"pixelSize":{"x":660,"y":286},"scale":{"x":1.690398586970454,"y":1.4048643131990197},"planeSize":{"x":1.4484386539493244,"y":2.469963312149048},"originSize":{"x":391,"y":204},"texture":null,"atlasRemap":{"x":0.702568359375,"y":0.8653417968749999,"z":0.1353515625,"w":0.05865234375}}],["sheep_2",{"pixelSize":{"x":957,"y":195},"scale":{"x":1.5958551166786379,"y":1.1688137068082656},"planeSize":{"x":1.6782603220294732,"y":5.923689603805542},"originSize":{"x":600,"y":167},"texture":null,"atlasRemap":{"x":0.40335937499999996,"y":0.18328125,"z":0.196259765625,"w":0.039990234374999996}}],["sheep_3",{"pixelSize":{"x":876,"y":346},"scale":{"x":1.7346635431424593,"y":1.3709687490768465},"planeSize":{"x":1.361167311668396,"y":2.6956448554992676},"originSize":{"x":505,"y":253},"texture":null,"atlasRemap":{"x":0.7099511718749999,"y":0.38592773437499994,"z":0.17964843749999998,"w":0.07095703125}}],["sheep_4",{"pixelSize":{"x":780,"y":332},"scale":{"x":1.6372021288361527,"y":1.3352992028707333},"planeSize":{"x":1.5693607330322266,"y":2.9824109077453613},"originSize":{"x":477,"y":249},"texture":null,"atlasRemap":{"x":0.238447265625,"y":0.7838964843749999,"z":0.15996093749999998,"w":0.0680859375}}],["sheep_5",{"pixelSize":{"x":515,"y":137},"scale":{"x":2.146803677079499,"y":1.4608592754364702},"planeSize":{"x":0.871988832950592,"y":2.169859766960144},"originSize":{"x":240,"y":94},"texture":null,"atlasRemap":{"x":0.49253906249999996,"y":0.942685546875,"z":0.10561523437499999,"w":0.028095703124999996}}],["sheep_6",{"pixelSize":{"x":502,"y":127},"scale":{"x":1.984859874858601,"y":1.3698090516416692},"planeSize":{"x":1.0153728723526,"y":2.7040982246398926},"originSize":{"x":253,"y":93},"texture":null,"atlasRemap":{"x":0.609873046875,"y":0.942685546875,"z":0.10294921875,"w":0.026044921875}}],["sheep_7",{"pixelSize":{"x":469,"y":77},"scale":{"x":2.322904153961762,"y":1.3863927745182025},"planeSize":{"x":0.7559126615524292,"y":2.5880401134490967},"originSize":{"x":202,"y":56},"texture":null,"atlasRemap":{"x":0.724541015625,"y":0.942685546875,"z":0.096181640625,"w":0.015791015624999998}}],["tree_1",{"pixelSize":{"x":1410,"y":1141},"scale":{"x":1.1021569781262543,"y":1.0836846243301574},"planeSize":{"x":9.788856506347656,"y":11.949626445770264},"originSize":{"x":1280,"y":1053},"texture":null,"atlasRemap":{"x":0.10248046875,"y":0.005859375,"z":0.28916015624999997,"w":0.23399414062499999}}],["viaduc_1",{"pixelSize":{"x":2169,"y":324},"scale":{"x":1.1298047486897294,"y":1.0127805919721518},"planeSize":{"x":7.703878402709961,"y":78.24363708496094},"originSize":{"x":1920,"y":320},"texture":null,"atlasRemap":{"x":0.41012695312499997,"y":0.7838964843749999,"z":0.444814453125,"w":0.06644531249999999}}],["walker_1",{"pixelSize":{"x":414,"y":1199},"scale":{"x":1.6310735771085962,"y":2.267511809723217},"planeSize":{"x":1.5846012830733973,"y":0.7889472842216492},"originSize":{"x":254,"y":529},"texture":null,"atlasRemap":{"x":0.005859375,"y":0.005859375,"z":0.08490234375,"w":0.24588867187499996}}]]'),m2=JSON.parse('[["tree_1",{"texture":null,"atlasRemap":{"x":0.0048828125,"y":0.0048828125,"z":0.3125,"w":0.257080078125}}],["land_front_3",{"texture":null,"atlasRemap":{"x":0.3271484375,"y":0.0048828125,"z":0.3125,"w":0.14990234375}}],["background_2",{"texture":null,"atlasRemap":{"x":0.0048828125,"y":0.271728515625,"z":0.46875,"w":0.13134765625}}],["walker_1",{"texture":null,"atlasRemap":{"x":0.4833984375,"y":0.271728515625,"z":0.06201171875,"w":0.129150390625}}],["land_back_1",{"texture":null,"atlasRemap":{"x":0.0048828125,"y":0.412841796875,"z":0.46875,"w":0.10107421875}}],["land_back_3",{"texture":null,"atlasRemap":{"x":0.0048828125,"y":0.523681640625,"z":0.46875,"w":0.100830078125}}],["land_back_2",{"texture":null,"atlasRemap":{"x":0.3271484375,"y":0.16455078125,"z":0.46875,"w":0.095458984375}}],["cow_2",{"texture":null,"atlasRemap":{"x":0.4833984375,"y":0.523681640625,"z":0.1708984375,"w":0.0927734375}}],["land_back_4",{"texture":null,"atlasRemap":{"x":0.4833984375,"y":0.412841796875,"z":0.3125,"w":0.091064453125}}],["land_front_5",{"texture":null,"atlasRemap":{"x":0.0048828125,"y":0.63427734375,"z":0.3125,"w":0.088134765625}}],["land_front_1",{"texture":null,"atlasRemap":{"x":0.3271484375,"y":0.63427734375,"z":0.29296875,"w":0.086181640625}}],["cow_3",{"texture":null,"atlasRemap":{"x":0.6298828125,"y":0.63427734375,"z":0.146484375,"w":0.08056640625}}],["land_front_7",{"texture":null,"atlasRemap":{"x":0.0048828125,"y":0.732177734375,"z":0.3125,"w":0.079345703125}}],["viaduc_1",{"texture":null,"atlasRemap":{"x":0.3271484375,"y":0.732177734375,"z":0.46875,"w":0.078125}}],["land_back_5",{"texture":null,"atlasRemap":{"x":0.0048828125,"y":0.8212890625,"z":0.46875,"w":0.07763671875}}],["land_front_6",{"texture":null,"atlasRemap":{"x":0.4833984375,"y":0.8212890625,"z":0.1953125,"w":0.073486328125}}],["cow_1",{"texture":null,"atlasRemap":{"x":0.6884765625,"y":0.8212890625,"z":0.114013671875,"w":0.07275390625}}],["sheep_3",{"texture":null,"atlasRemap":{"x":0.6640625,"y":0.523681640625,"z":0.123291015625,"w":0.061767578125}}],["sheep_4",{"texture":null,"atlasRemap":{"x":0.55517578125,"y":0.271728515625,"z":0.116455078125,"w":0.060791015625}}],["land_front_4",{"texture":null,"atlasRemap":{"x":0.6494140625,"y":0.0048828125,"z":0.1953125,"w":0.05908203125}}],["sheep_1",{"texture":null,"atlasRemap":{"x":0.681396484375,"y":0.271728515625,"z":0.095458984375,"w":0.0498046875}}],["sheep_2",{"texture":null,"atlasRemap":{"x":0.55517578125,"y":0.34228515625,"z":0.146484375,"w":0.040771484375}}],["land_front_2",{"texture":null,"atlasRemap":{"x":0.0048828125,"y":0.90869140625,"z":0.302734375,"w":0.031494140625}}],["sheep_5",{"texture":null,"atlasRemap":{"x":0.3173828125,"y":0.90869140625,"z":0.05859375,"w":0.02294921875}}],["sheep_6",{"texture":null,"atlasRemap":{"x":0.3857421875,"y":0.90869140625,"z":0.061767578125,"w":0.022705078125}}],["sheep_7",{"texture":null,"atlasRemap":{"x":0.457275390625,"y":0.90869140625,"z":0.04931640625,"w":0.013671875}}]]');function g2(t){return g2="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},g2(t)}function v2(t){return function(t){if(Array.isArray(t))return x2(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||E2(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function y2(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function b2(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?y2(Object(n),!0).forEach((function(e){_2(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):y2(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function _2(t,e,n){return(e=T2(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function w2(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,i,o,a,s=[],l=!0,u=!1;try{if(o=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=o.call(n)).done)&&(s.push(r.value),s.length!==e);l=!0);}catch(t){u=!0,i=t}finally{try{if(!l&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(u)throw i}}return s}}(t,e)||E2(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function A2(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=E2(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return a=t.done,t},e:function(t){s=!0,o=t},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function E2(t,e){if(t){if("string"==typeof t)return x2(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?x2(t,e):void 0}}function x2(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function S2(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,T2(r.key),r)}}function T2(t){var e=function(t,e){if("object"!=g2(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=g2(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==g2(e)?e:e+""}function C2(t,e,n){return e=P2(e),function(t,e){if(e&&("object"===g2(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,I2()?Reflect.construct(e,n||[],P2(t).constructor):e.apply(t,n))}function I2(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(I2=function(){return!!t})()}function k2(){return k2="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=P2(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(arguments.length<3?t:n):i.value}},k2.apply(this,arguments)}function P2(t){return P2=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},P2(t)}function R2(t,e){return R2=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},R2(t,e)}var O2=!1,M2=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),C2(this,e,arguments)}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&R2(t,e)}(e,t),n=e,r=[{key:"init",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this._config=e.config,this._backgroundUniforms=e.backgroundUniforms,this._debug=this._createDebug();var n=AK.get("watercolor/scene").scene.getObjectByName("layers").children,r=this._createAtlases(n),i=r.sdfAtlasMap,o=r.textureAtlasMap;this._sdfAtlasMap=i,this._textureAtlasMap=o,this._papersMeshes=vZ.map((function(t){return n.find((function(e){return e.name===t.name}))})).filter((function(t){return null!=t})),this._papersMeshes.sort((function(t,e){return e.position.x-t.position.x})),this._papers=this._createPapers(this._papersMeshes),this._batchSimulation=this._createSimulation(),this._batchSimulation&&this._papers.forEach((function(e,n){return e.simulationInstance=t._batchSimulation.instances[n]})),this._paints=this._createPaints(),this._shadows=this._createShadows(),this._cutouts=this._createCutouts(),this._grounds=this._createGrounds(),this.$paintManager.papersArray=this._papers,this.$paintManager.groundsMesh=this._grounds.mesh,this._papersMeshes.map((function(t){return t.parent.remove(t)}))}},{key:"papers",get:function(){return this._papers}},{key:"shadows",get:function(){return this._shadows}},{key:"batchSimulation",get:function(){return this._batchSimulation}},{key:"prepare",value:function(){var t;null===(t=this._batchSimulation)||void 0===t||t.prepare()}},{key:"destroy",value:function(){var t,n,r=A2(this._papers);try{for(r.s();!(n=r.n()).done;)n.value.destroy()}catch(t){r.e(t)}finally{r.f()}this._shadows.destroy(),this._cutouts.destroy(),this._grounds.destroy(),null===(t=this._batchSimulation)||void 0===t||t.destroy(),this._paints.destroy(),w2(this._sdfAtlasMap.values(),1)[0].texture.dispose(),w2(this._textureAtlasMap.values(),1)[0].texture.dispose(),k2(P2(e.prototype),"destroy",this).call(this)}},{key:"show",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=this._papers.findIndex((function(e){return e.meshName==t})),r=this._papers[n];if(r&&!r.hasRevealStarted){var i=0!=n||wY?0:1.5;i+=.3*e;var o=ti.timeline();return o.add(r.show(),0),o.add(this._cutouts.show(r),0),o.add(this._shadows.show(r),0),o.add(this._grounds.show(r),0),o.delay(i),_Y&&o.timeScale(30),o}}},{key:"hideAll",value:function(){var t=ti.timeline();return this._papers.forEach((function(e){return t.add(e.hide(),0)})),t.add(this._cutouts.hideAll(),0),t.add(this._shadows.hideAll(),0),t.add(this._grounds.hideAll(),0),t}},{key:"getPaperByName",value:function(t){return this._papers.find((function(e){return e.container.name===t}))}},{key:"_generateAtlases",value:function(t){var e=new Map,n=new Ky;this.$sdfGenerator.open();var r,i=[],o=A2(t);try{for(o.s();!(r=o.n()).done;){var a=r.value;a.geometry.boundingBox.getSize(n);var s=a.material.map,l=new Ay(s.image.width,s.image.height),u=n.y,c=n.z,d=new Ay((u+1)/u,(c+1)/c),f=this.$sdfGenerator.generate(this.$renderer,s,{resizeToNormal:!1,paddingScale:d}),h=f.output,p=f.pixelSize;h.name=a.name,i.push(h),e.set(a.name,{pixelSize:p,scale:d,planeSize:new Ay(u,c),originSize:l})}}catch(t){o.e(t)}finally{o.f()}this.$sdfGenerator.close(),this.$renderer.resize(zY.dimensions);var m,g=GZ({textures:i,margin:6,powerOfTwo:!0,square:!0,debugDownload:O2,scale:.21}),v=t.map((function(t){return t.material.map.name=t.name,t.material.map})),y=GZ({textures:v,margin:20,encoding:Xv,powerOfTwo:!0,square:!0,debugDownload:O2}),b=A2(g.data);try{for(b.s();!(m=b.n()).done;){var _=m.value,w=e.get(_.name);w.texture=null,w.texture=g.texture,w.atlasRemap=new Hy(_.offset.x,_.offset.y,_.size.x,_.size.y)}}catch(t){b.e(t)}finally{b.f()}for(var A=new Map(y.data.map((function(t){return[t.name,{texture:y.texture,atlasRemap:new Hy(t.offset.x,t.offset.y,t.size.x,t.size.y)}]}))),E=0,x=i;E<x.length;E++)x[E].dispose();return{sdfAtlasMap:e,textureAtlasMap:A}}},{key:"_exportAtlasesData",value:function(t){var e=function(t){return[t[0],b2(b2({},t[1]),{},{texture:null})]},n=document.createElement("a"),r=JSON.stringify(v2(t.sdfAtlasMap.entries()).map(e)),i=new Blob([r],{type:"text/plain"});n.href=URL.createObjectURL(i),n.download="sdf.json",n.click();var o=JSON.stringify(v2(t.textureAtlasMap.entries()).map(e)),a=new Blob([o],{type:"text/plain"});n.href=URL.createObjectURL(a),n.download="texture.json",n.click()}},{key:"_importBakedAtlases",value:function(){var t=AK.get("atlas/sdf");t.flipY=!1;var e=AK.get("atlas/texture");e.encoding=Xv,e.flipY=!1;var n=JSON.parse(JSON.stringify(p2),(function(e,n){return"texture"===e?t:"pixelSize"===e||"scale"===e||"planeSize"===e||"originSize"===e?(new Ay).copy(n):"atlasRemap"===e?(new Hy).copy(n):n})),r=JSON.parse(JSON.stringify(m2),(function(t,n){return"texture"===t?e:"atlasRemap"===t?(new Hy).copy(n):n}));return{sdfAtlasMap:new Map(n),textureAtlasMap:new Map(r)}}},{key:"_exportImageWithoutAlpha",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=t.source.data,r=document.createElement("canvas");r.width=n.width,r.height=n.height;var i=r.getContext("2d");i.drawImage(n,0,0);for(var o=i.getImageData(0,0,r.width,r.height),a=o.data,s=0;s<a.length;s+=4)a[s]=a[s],a[s+1]=a[s+1],a[s+2]=a[s+2],a[s+3]=255;i.putImageData(o,0,0);var l=document.createElement("a");l.href=r.toDataURL("image/jpeg"),l.download="".concat(e||"atlas",".jpg"),l.click()}},{key:"_createAtlases",value:function(t){return this._importBakedAtlases()}},{key:"_createPapers",value:function(t){var e=this;return t.map((function(t,n){var r=vZ.find((function(e){return t.name===e.name}));t.visible=!1,t.material.map&&(t.material.map.dispose(),t.material.map=null);var i=new c1({loadedMesh:t,index:n,config:r,debugContainer:e._debugPapersFolder,container:e});return e.add(i.container),i}))}},{key:"_createPaints",value:function(){var t=new n2({sdfAtlasMap:this._sdfAtlasMap,textureAtlasMap:this._textureAtlasMap,papers:this._papers,debugContainer:this._debugPaintFolder,backgroundUniforms:this._backgroundUniforms});return this.add(t),t}},{key:"_createSimulation",value:function(){return new a1({papers:this._papers})}},{key:"_createCutouts",value:function(){var t=new I1({papers:this._papers,shadowMap:this._shadows.map,paintsComponent:this._paints,debugContainer:this._debugCutoutFolder});return this.add(t),t}},{key:"_createShadows",value:function(){return new h2({papers:this._papers,paintsComponent:this._paints,debugContainer:this._debugShadowFolder})}},{key:"_createGrounds",value:function(){var t=new U1({papers:this._papers,shadowMap:this._shadows.map,debugContainer:this._debugGroundFolder});return this.add(t),t}},{key:"update",value:function(t){var e,n=t.delta,r=t.time;this._paints.update({delta:n,time:r}),null===(e=this._batchSimulation)||void 0===e||e.update({delta:n,time:r}),this._cutouts.update({delta:n,time:r}),this._grounds.update({delta:n,time:r}),this._batchSimulation&&(this._paints.updateSimulationTexture(this._batchSimulation.output),this._grounds.updateSimulationTexture(this._batchSimulation.output))}},{key:"_createDebug",value:function(){var t=this;if(lK){var e=lK.addFolder({title:"Papers",tab:this._config.name,expanded:!1});return e.addButton({title:"Save to clipboard"}).on("click",(function(){var e={};e.paint=t._paints.updateConfig(),e.cutout=t._cutouts.updateConfig(),e.shadow=t._shadows.updateConfig(),e.ground=t._grounds.updateConfig();var n=JSON.stringify(e,null,"\t");navigator.clipboard.writeText(n)})),this._debugPaintFolder=e.addFolder({title:"Paint",expanded:!1}),this._debugGroundFolder=e.addFolder({title:"Ground",expanded:!1}),this._debugShadowFolder=e.addFolder({title:"Shadow",expanded:!1}),this._debugCutoutFolder=e.addFolder({title:"Cutout",expanded:!1}),this._debugPapersFolder=e.addFolder({title:"Elements",expanded:!1}),this._debugPapersFolder.addButton({title:"Save to clipboard"}).on("click",(function(){var e=t._papers.map((function(t){return t.getData()})),n=JSON.stringify(e,null,"\t");navigator.clipboard.writeText(n)})),e}}}],r&&S2(n.prototype,r),i&&S2(n,i),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,i}(dY(Xb));function L2(t){return L2="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},L2(t)}function D2(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function N2(t,e,n){return(e=j2(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function B2(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,j2(r.key),r)}}function j2(t){var e=function(t,e){if("object"!=L2(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=L2(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==L2(e)?e:e+""}function z2(t,e,n){return e=U2(e),function(t,e){if(e&&("object"===L2(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,F2()?Reflect.construct(e,n||[],U2(t).constructor):e.apply(t,n))}function F2(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(F2=function(){return!!t})()}function U2(t){return U2=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},U2(t)}function q2(t,e){return q2=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},q2(t,e)}var G2=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),z2(this,e,arguments)}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&q2(t,e)}(e,t),n=e,r=[{key:"init",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this._config=t.config,this._shadowMap=t.shadowMap,this._backgroundUniforms=t.backgroundUniforms,this._material=this._createMaterial();var e=AK.get("watercolor/scene").scene.getObjectByName("Ground");e.parent.remove(e),this._mesh=this._createMesh(e),this._debug=this._createDebug(),this._planes=[]}},{key:"_createMaterial",value:function(){var t=AK.get("watercolor/paper/normal");t.wrapS=t.wrapT=Dg;var e=AK.get("watercolor/paper/matcap");e.wrapS=e.wrapT=Dg;var n=AK.get("noise/rgb-fractal");return n.wrapS=n.wrapT=Dg,this._uniforms=function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?D2(Object(n),!0).forEach((function(e){N2(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):D2(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({uTime:{value:0},uResolution:{value:new Ay},tNoiseTexture:{value:n},uShadowMap:{value:this._shadowMap},uShadowStrength:{value:.9},uFogState:{value:new Ay}},this._backgroundUniforms),new V_({fragmentShader:"precision highp float;\nprecision mediump sampler3D;\n#define GLSLIFY 1\n\nvarying vec2 vUv;\n\nvarying vec3 vWorldPosition;\nvarying float vFogDepth;\n\nuniform vec3 uLightColor;\nuniform sampler2D uShadowMap;\nuniform float uShadowStrength;\n\nuniform float uTime;\nuniform vec2 uResolution;\nuniform sampler2D tNoiseTexture;\nuniform vec2 uFogState;\n\nstruct Lighting {\n    vec2 groundSpecularScale;\n    vec2 groundSpecularOffset;\n    float groundSpecularStrength;\n    vec2 specularCenter;\n    vec2 specularScale;\n    vec2 specularOffset;\n    float specularStrength;\n};\n\nuniform Lighting uLighting;\n\nstruct Background {\n    vec3 groundColor;\n    vec3 skyColor;\n    vec2 progressRemap;\n};\n\nuniform Background uBackground;\n\n#ifndef PI\n#define PI 3.141592653589793\n#endif\n\nfloat sineInOut(float t) {\n  return -0.5 * (cos(PI * t) - 1.0);\n}\n\n// WITH ground specular\nfloat computeLighting(Lighting lightingConfig, float screenRatio, vec2 screenUv, vec3 worldPosFromCamera) {\n    vec2 specularVector = (screenUv - (lightingConfig.specularCenter + lightingConfig.specularOffset)) / lightingConfig.specularScale;\n    specularVector.x *= screenRatio;\n    float specular = 1.0-min(length(specularVector), 1.0);\n    specular = sineInOut(specular);\n    float lighting = lightingConfig.specularStrength * specular;\n\n    vec2 groundSpecularVector = (worldPosFromCamera.xz - lightingConfig.groundSpecularOffset) / lightingConfig.groundSpecularScale;\n    float groundSpecular = 1.0-min(length(groundSpecularVector), 1.0);\n    groundSpecular = sineInOut(groundSpecular);\n    lighting += lightingConfig.groundSpecularStrength * groundSpecular;\n\n    return lighting;\n}\n\n// WITHOUT ground specular\nfloat computeLighting(Lighting lightingConfig, float screenRatio, vec2 screenUv) {\n    vec2 specularVector = (screenUv - (lightingConfig.specularCenter + lightingConfig.specularOffset)) / lightingConfig.specularScale;\n    specularVector.x *= screenRatio;\n    float specular = 1.0-min(length(specularVector), 1.0);\n    specular = sineInOut(specular);\n    float lighting = lightingConfig.specularStrength * specular;\n\n    return lighting;\n}\n\nfloat cremap(float value, float start1, float stop1, float start2, float stop2) {\n  float r = start2 + (stop2 - start2) * ((value - start1) / (stop1 - start1));\n  return clamp(r, min(start2, stop2), max(start2, stop2));\n}\n\nvec3 computeBackground(Background backgroundConfig, vec2 screenUv) {\n    float baseProgress = cremap(screenUv.y, backgroundConfig.progressRemap.x, backgroundConfig.progressRemap.y, 0., 1.);\n    float progress = 1. - abs((baseProgress - 0.5) * 2.);\n    progress = sineInOut(progress);\n\n    return mix(backgroundConfig.groundColor, backgroundConfig.skyColor, progress);\n}\n\nfloat remap(float value, float start1, float stop1, float start2, float stop2) {\n  return start2 + (stop2 - start2) * ((value - start1) / (stop1 - start1));\n}\n\nfloat quarticInOut(float t) {\n  return t < 0.5\n    ? +8.0 * pow(t, 4.0)\n    : -8.0 * pow(t - 1.0, 4.0) + 1.0;\n}\n\nfloat sdCircle(vec2 p, float r) {\n  return length(p) - r;\n}\n\nvec3 getFogColor(float time, float depth, vec2 uv, vec2 resolution, vec3 worldPosition, vec3 color, sampler2D noiseTexture, vec3 fogColor, float noiseSpeed, vec2 noiseScale, float noiseStrength, vec2 fogAmountRangeY, vec2 fogDensityRangeY, vec2 fogAmountRangeZ, vec2 fogDensityRangeZ, vec3 mainSdf, vec2 sdfRemap) {\n  worldPosition.z -= time * noiseSpeed * .1;\n\n  vec2 noiseUv = worldPosition.yz;\n  noiseUv *= 0.05 * noiseScale;\n\n  float noise = texture2D(noiseTexture, noiseUv).r;\n  noise = quarticInOut(noise);\n  if(worldPosition.y < 0.01)\n    noise = 1.;\n  if(worldPosition.x > 900.)\n    noise = 1.;\n\n  float screenRatio = resolution.x / resolution.y;\n  vec2 adjustedUvs = ((uv - 0.5) / vec2(1., screenRatio)) + 0.5;\n  adjustedUvs.x += step(screenRatio, 1.) * -.5; // on portrait only\n  float sdf = sdCircle(adjustedUvs - mainSdf.xy, mainSdf.z);\n  sdf = smoothstep(sdfRemap.x, sdfRemap.y, sdf);\n\n  float noiseSdf = sdf * remap(noise, 0., 1., 1. - noiseStrength, 1.);\n\n  float fogAmountZ = mix(fogAmountRangeZ.x, fogAmountRangeZ.y, noiseSdf);\n  // float fogDensityZ = mix(fogDensityRangeZ.x, fogDensityRangeZ.y, noiseSdf) / 1000.;\n  float fogDensityZ = mix(fogDensityRangeZ.x, fogDensityRangeZ.y, noiseSdf);\n  float fogFactorZ = 1.0 - exp(-fogDensityZ * fogDensityZ * depth * depth);\n\n  float fogPosY = worldPosition.y;\n  float fogDensityY = mix(fogDensityRangeY.y, fogDensityRangeY.x, noiseSdf);\n  float fogAmountY = mix(fogAmountRangeY.x, fogAmountRangeY.y, noiseSdf);\n  float fogFactorY = exp(-fogDensityY * fogDensityY * fogPosY * fogPosY);\n\n  float fogAmount = clamp(fogFactorZ * fogAmountZ, 0.0, 1.0);\n  fogAmount = max(fogAmount, clamp(fogFactorY * fogAmountY, 0.0, 1.0));\n  fogAmount = clamp(fogAmount + sdf * 0.2, 0., 1.);\n\n  return mix(color, fogColor, fogAmount);\n}\n\nstruct FogSettings {\n    float noiseSpeed;\n    vec2 noiseScale;\n    float noiseStrength;\n    vec2 fogAmountRangeY;\n    vec2 fogDensityRangeY;\n    vec2 fogAmountRangeZ;\n    vec2 fogDensityRangeZ;\n    vec3 mainSdf;\n    vec2 sdfRemap;\n    vec3 fogColor;\n};\n\nFogSettings mixFogSettings(FogSettings from, FogSettings to, float ratio) {\n    FogSettings settings;\n    settings.noiseSpeed = mix(from.noiseSpeed, to.noiseSpeed, ratio);\n    settings.noiseScale = mix(from.noiseScale, to.noiseScale, ratio);\n    settings.noiseStrength = mix(from.noiseStrength, to.noiseStrength, ratio);\n    settings.fogAmountRangeY = mix(from.fogAmountRangeY, to.fogAmountRangeY, ratio);\n    settings.fogDensityRangeY = mix(from.fogDensityRangeY, to.fogDensityRangeY, ratio);\n    settings.fogAmountRangeZ = mix(from.fogAmountRangeZ, to.fogAmountRangeZ, ratio);\n    settings.fogDensityRangeZ = mix(from.fogDensityRangeZ, to.fogDensityRangeZ, ratio);\n    settings.mainSdf = mix(from.mainSdf, to.mainSdf, ratio);\n    settings.sdfRemap = mix(from.sdfRemap, to.sdfRemap, ratio);\n    settings.fogColor = mix(from.fogColor, to.fogColor, ratio);\n    return settings;\n}\n\nFogSettings getBaseSettings() {\n    FogSettings baseSettings;\n    baseSettings.noiseSpeed = 3.;\n    baseSettings.noiseScale = vec2(0.6, 0.2);\n    baseSettings.noiseStrength = 0.88;\n    baseSettings.fogAmountRangeY = vec2(0.1, 1.39);\n    baseSettings.fogDensityRangeY = vec2(0.01, 0.81);\n    baseSettings.fogAmountRangeZ = vec2(0.01, 0.99);\n    baseSettings.fogDensityRangeZ = vec2(20.0, 277.42);\n    baseSettings.mainSdf = vec3(0.79, 0.63, 0.85);\n    baseSettings.sdfRemap = vec2(-0.48, -0.06);\n    baseSettings.fogColor = vec3(0.796, 0.796, 0.761);\n    return baseSettings;\n}\n\nFogSettings getOccultedSettings(FogSettings baseSettings) {\n    FogSettings occultedSettings;\n    occultedSettings.noiseSpeed = baseSettings.noiseSpeed;\n    occultedSettings.noiseScale = baseSettings.noiseScale;\n    occultedSettings.noiseStrength = baseSettings.noiseStrength;\n    occultedSettings.fogAmountRangeY = vec2(0.65, 1.16);\n    occultedSettings.fogDensityRangeY = vec2(0.65, 0.81);\n    occultedSettings.fogAmountRangeZ = baseSettings.fogAmountRangeZ;\n    occultedSettings.fogDensityRangeZ = vec2(20.0, 161.29);\n    occultedSettings.mainSdf = vec3(0.64, 0.62, 0.84);\n    occultedSettings.sdfRemap = vec2(-0.84, -0.45);\n    occultedSettings.fogColor = vec3(0.796, 0.796, 0.761);\n    return occultedSettings;\n}\n\nFogSettings getOpaqueSettings(FogSettings baseSettings) {\n    FogSettings opaqueSettings;\n    opaqueSettings.noiseSpeed = baseSettings.noiseSpeed;\n    opaqueSettings.noiseScale = baseSettings.noiseScale;\n    opaqueSettings.noiseStrength = baseSettings.noiseStrength;\n    opaqueSettings.fogAmountRangeY = vec2(0.65, 1.16);\n    opaqueSettings.fogDensityRangeY = vec2(0.65, 0.81);\n    opaqueSettings.fogAmountRangeZ = vec2(1, 1.3);\n    opaqueSettings.fogDensityRangeZ = vec2(100, 300);\n    opaqueSettings.mainSdf = vec3(0.5, 0.5, 0);\n    opaqueSettings.sdfRemap = baseSettings.sdfRemap;\n    opaqueSettings.fogColor = vec3(0.714, 0.714, 0.714);\n    return opaqueSettings;\n}\n\nvec3 getFogColorWithRatio(float time, float depth, vec2 uv, vec2 resolution, vec3 worldPosition, vec3 color, sampler2D noiseTexture, float opaqueRatio, float occultedRatio) {\n\n    FogSettings baseSettings = getBaseSettings();\n    FogSettings opaqueSettings = getOpaqueSettings(baseSettings);\n    FogSettings occultedSettings = getOccultedSettings(baseSettings);\n\n    FogSettings settings = baseSettings;\n    settings = mixFogSettings(settings, occultedSettings, occultedRatio);\n    settings = mixFogSettings(settings, opaqueSettings, opaqueRatio);\n\n    return getFogColor(time, depth, uv, resolution, worldPosition, color, noiseTexture, settings.fogColor, settings.noiseSpeed, settings.noiseScale, settings.noiseStrength, settings.fogAmountRangeY, settings.fogDensityRangeY, settings.fogAmountRangeZ, settings.fogDensityRangeZ, settings.mainSdf, settings.sdfRemap);\n}\n\nvoid main() {\n    vec2 uv = vUv;\n\n    //// shadow\n\n    vec2 screenUv = gl_FragCoord.xy / uResolution;\n    float shadow = 1. - texture2D(uShadowMap, screenUv).r;\n\n    //// background color\n\n    float ratio = uResolution.x / uResolution.y;\n\n    vec3 background = computeBackground(uBackground, screenUv);\n\n    float lighting = computeLighting(uLighting, ratio, screenUv, vWorldPosition - cameraPosition);\n\n    float shadowAmount = shadow * uShadowStrength;\n    vec3 paperColor = background;\n    vec3 color = paperColor - shadowAmount;\n\n    color += lighting;\n\n    color = getFogColorWithRatio(uTime, vFogDepth, screenUv, uResolution, vWorldPosition, color, tNoiseTexture, uFogState.x, uFogState.y);\n\n    gl_FragColor = vec4(color, 1.);\n    gl_FragColor = LinearTosRGB(gl_FragColor);\n}",vertexShader:"#define GLSLIFY 1\nvarying vec2 vUv;\nvarying float vFogDepth;\n\nvarying vec3 vWorldPosition;\n\nvoid main() {\n    vec4 worldPosition = modelMatrix * vec4(position, 1.0);\n\n    vec4 mvPosition = modelViewMatrix * vec4(position, 1.0);\n\n    gl_Position = projectionMatrix * mvPosition;\n    vFogDepth = -mvPosition.z;\n\n    vWorldPosition = worldPosition.xyz;\n    vUv = uv;\n}",uniforms:this._uniforms,transparent:!0,defines:{LIGHT_GROUND:!0}})}},{key:"_createMesh",value:function(t){var e=new sw(2e3,2e3,1,1);e.rotateX(.5*-Math.PI);var n=new j_(e,this._material);return n.renderOrder=-3,n.receiveShadow=!0,t.getWorldPosition(n.position),t.getWorldScale(n.scale),t.getWorldQuaternion(n.quaternion),this.add(n),n}},{key:"onWindowResize",value:function(t){this._uniforms.uResolution.value.set(t.renderWidth,t.renderHeight)}},{key:"update",value:function(t){t.delta;var e,n,r=t.time;this._uniforms.uTime.value=r,this._uniforms.uFogState.value.set(null===(e=this.$experienceManager)||void 0===e?void 0:e.fogState.opaque,null===(n=this.$experienceManager)||void 0===n?void 0:n.fogState.occulted)}},{key:"_createDebug",value:function(){if(lK){var t=lK.addFolder({title:"Ground",tab:this._config.name});return t.addFolder({title:"Light"}).addInput(this._uniforms.uShadowStrength,"value",{label:"Shadow Strength",min:0,max:20}),t}}}],r&&B2(n.prototype,r),i&&B2(n,i),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,i}(dY(Xb)),H2=n(5966),V2=n.n(H2);const Q2=JSON.parse('[{"name":"blade-1","offset":{"x":0.0078125,"y":0.0078125},"size":{"x":0.0703125,"y":0.984375}},{"name":"blade-7","offset":{"x":0.09375,"y":0.0078125},"size":{"x":0.0625,"y":0.953125}},{"name":"blade-6","offset":{"x":0.171875,"y":0.0078125},"size":{"x":0.09375,"y":0.8828125}},{"name":"blade-2","offset":{"x":0.28125,"y":0.0078125},"size":{"x":0.0625,"y":0.8515625}},{"name":"blade-10","offset":{"x":0.359375,"y":0.0078125},"size":{"x":0.0625,"y":0.84375}},{"name":"blade-4","offset":{"x":0.4375,"y":0.0078125},"size":{"x":0.0703125,"y":0.8125}},{"name":"blade-8","offset":{"x":0.5234375,"y":0.0078125},"size":{"x":0.0703125,"y":0.8125}},{"name":"blade-9","offset":{"x":0.609375,"y":0.0078125},"size":{"x":0.0546875,"y":0.8125}},{"name":"blade-3","offset":{"x":0.6796875,"y":0.0078125},"size":{"x":0.0625,"y":0.8046875}},{"name":"blade-5","offset":{"x":0.7578125,"y":0.0078125},"size":{"x":0.0546875,"y":0.7890625}}]');function W2(t){return W2="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},W2(t)}function Y2(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function K2(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Y2(Object(n),!0).forEach((function(e){X2(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Y2(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function X2(t,e,n){return(e=t3(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function $2(t){return function(t){if(Array.isArray(t))return Z2(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return Z2(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Z2(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Z2(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function J2(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,t3(r.key),r)}}function t3(t){var e=function(t,e){if("object"!=W2(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=W2(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==W2(e)?e:e+""}function e3(t,e,n){return e=r3(e),function(t,e){if(e&&("object"===W2(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,n3()?Reflect.construct(e,n||[],r3(t).constructor):e.apply(t,n))}function n3(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(n3=function(){return!!t})()}function r3(t){return r3=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},r3(t)}function i3(t,e){return i3=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},i3(t,e)}var o3=new Ky,a3=new Sb,s3=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),e3(this,e,arguments)}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&i3(t,e)}(e,t),n=e,r=[{key:"init",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this._config=t.config,this._paper=t.paper,this._globalUniforms=t.globalUniforms,this._material=this._createMaterial(),this._points=this._createPoints(),this._params={count:this._points.length},this._delta=1/60,this._previousNeedsUpdate=!1,this._animationState=new Array(this._params.count).map((function(t){return"none"})),this._attributes=this._setAttributes();var e=this._createGeometry();this._grassMesh=this._createGrassMesh(e)}},{key:"_createPoints",value:function(){for(var t=this._paper._groundSize,e=[.6,.4],n=new(V2())({shape:[Math.max(t.x-2*e[0],.1),Math.max(t.y-2*e[1])],minDistance:1.8,maxDistance:2.8,tries:7}).fill(),r=[],i=0;i<n.length;i++){var o=n[i];o[0]+=e[0],o[1]+=e[1];for(var a=Math.floor(A0(Math.random(),[0,1],[7,25])),s=Math.floor(8*Math.random()),l=0;l<a;l++){var u=Math.random(),c=A0(u,[0,1],[.05*e[0],e[0]]),d=A0(u,[0,1],[.05*e[1],e[1]]),f=A0(Math.random(),[0,1],[0,2*Math.PI]),h=Math.sqrt(c*c+d*d)/Math.sqrt(e[0]*e[0]+e[1]*e[1]),p=ZW(1,.2,ZW(1-Math.pow(1-h,3),Math.random(),(1-h+Math.random())/2)),m=Math.cos(f)*c,g=Math.sin(f)*d;r.push([o[0]+m,o[1]+g,p,s])}var v=ZW(1,.2,ZW(1,Math.random(),(1+Math.random())/2));r.push([].concat($2(o),[v,s]))}return r}},{key:"_setAttributes",value:function(){for(var t=this,e=this._paper._groundSize,n=new Float32Array(3*this._params.count),r=new Float32Array(3*this._params.count),i=new Float32Array(2*this._params.count),o=new Float32Array(1*this._params.count).fill(0),a=new Float32Array(1*this._params.count),s=new Float32Array(1*this._params.count),l=new Float32Array(4*this._params.count),u=function(){var o=Math.floor(10*Math.random()),u=Q2.find((function(t){return t.name==="blade-".concat(o+1)})),f=u.size.x/u.size.y,h=t._points[c],p=h[0]/e.x,m=h[1]/e.y;n[d+0]=-e.y*m,n[d+1]=0,n[d+2]=ZW(.5*-e.x,.5*e.x,p),r[d+0]=Math.random()-.5,r[d+1]=0,r[d+2]=0,i[2*c+0]=h[2]*f*3,i[2*c+1]=h[2],a[c]=c;var g=Math.floor(3*Math.random());s[c]=(3*h[3]+g+.5)/24,l[4*c+0]=u.offset.x,l[4*c+1]=1-u.offset.y,l[4*c+2]=u.size.x,l[4*c+3]=-u.size.y},c=0,d=0;c<this._params.count;c++,d+=3)u();return{positions:n,rotations:r,scale:i,indices:a,grassTextureRemap:l,gradient:s,revealProgress:o}}},{key:"_createGeometry",value:function(){var t=new sw(.1,.1,1,8);t.rotateY(.5*-Math.PI),t.translate(0,.05,0);var e=new CS;e.index=t.index,e.attributes.position=t.attributes.position,e.attributes.normal=t.attributes.normal,e.attributes.uv=t.attributes.uv,e.setAttribute("aRevealProgress",new nx(this._attributes.revealProgress,1).setUsage(iy)),e.setAttribute("aInstance",new nx(this._attributes.indices,1)),e.setAttribute("aGrassTextureRemap",new nx(this._attributes.grassTextureRemap,4)),e.setAttribute("aGradient",new nx(this._attributes.gradient,1));var n=this._paper._groundSize;return e.computeBoundingBox=function(){e.boundingBox=new Zy(new Ky(-n.y,0,.5*-n.x),new Ky(0,5,.5*n.x))},e.computeBoundingSphere=function(){e.boundingSphere=new gb(new Ky(.5*-n.y,2.5,0),Math.max(n.x,2.5,n.y))},e}},{key:"_createMaterial",value:function(){var t=AK.get("grass/noise");t.wrapS=t.wrapT=Bg,AK.get("grass/texture").encoding=Xv;var e=AK.get("grass/blade-atlas");e.flipY=!0;var n=AK.get("grass/color-gradients");n.encoding=Xv;var r=AK.get("noise/rgb-fractal");return r.wrapS=r.wrapT=Dg,new V_({vertexShader:"#define GLSLIFY 1\n\nfloat remap(float value, float start1, float stop1, float start2, float stop2) {\n  return start2 + (stop2 - start2) * ((value - start1) / (stop1 - start1));\n}\n\nvec2 remapAtlasUv(vec2 uv, vec4 atlasRemap) {\n    vec2 _uv = uv;\n    _uv.x = remap(_uv.x, 0., 1., atlasRemap.x, atlasRemap.x + atlasRemap.z);\n    _uv.y = remap(_uv.y, 0., 1., atlasRemap.y, atlasRemap.y + atlasRemap.w);\n    return _uv;\n}\n\nvec2 remapAtlasUv(vec2 uv, vec4 boxSize, vec4 atlasRemap) {\n    vec2 _uv = uv;\n    _uv.x = remap(_uv.x, 0., 1., boxSize.x, boxSize.z);\n    _uv.y = remap(_uv.y, 1., 0., boxSize.y, boxSize.w);\n    _uv.x = remap(_uv.x, 0., 1., atlasRemap.x, atlasRemap.x + atlasRemap.z);\n    _uv.y = remap(_uv.y, 0., 1., atlasRemap.y, atlasRemap.y + atlasRemap.w);\n    return _uv;\n}\n\nattribute vec4 aGrassTextureRemap;\nattribute float aGradient;\nattribute float aRevealProgress;\n\nuniform float uTime;\nuniform float uWindDisplacement;\nuniform float uWindIntensity;\nuniform float uWindSpeed;\nuniform float uScale;\nuniform sampler2D tNoise;\n\nvarying vec2 vUv;\nvarying float vGradient;\nvarying vec3 vWorldPosition;\nvarying float vFogDepth;\n\n//\tClassic Perlin 2D Noise \n//\tby Stefan Gustavson\n//\nvec4 permute(vec4 x) {\n    return mod(((x * 34.0) + 1.0) * x, 289.0);\n}\nvec2 fade(vec2 t) {\n    return t * t * t * (t * (t * 6.0 - 15.0) + 10.0);\n}\n\nfloat cnoise(vec2 P) {\n    vec4 Pi = floor(P.xyxy) + vec4(0.0, 0.0, 1.0, 1.0);\n    vec4 Pf = fract(P.xyxy) - vec4(0.0, 0.0, 1.0, 1.0);\n    Pi = mod(Pi, 289.0); // To avoid truncation effects in permutation\n    vec4 ix = Pi.xzxz;\n    vec4 iy = Pi.yyww;\n    vec4 fx = Pf.xzxz;\n    vec4 fy = Pf.yyww;\n    vec4 i = permute(permute(ix) + iy);\n    vec4 gx = 2.0 * fract(i * 0.0243902439) - 1.0; // 1/41 = 0.024...\n    vec4 gy = abs(gx) - 0.5;\n    vec4 tx = floor(gx + 0.5);\n    gx = gx - tx;\n    vec2 g00 = vec2(gx.x, gy.x);\n    vec2 g10 = vec2(gx.y, gy.y);\n    vec2 g01 = vec2(gx.z, gy.z);\n    vec2 g11 = vec2(gx.w, gy.w);\n    vec4 norm = 1.79284291400159 - 0.85373472095314 * vec4(dot(g00, g00), dot(g01, g01), dot(g10, g10), dot(g11, g11));\n    g00 *= norm.x;\n    g01 *= norm.y;\n    g10 *= norm.z;\n    g11 *= norm.w;\n    float n00 = dot(g00, vec2(fx.x, fy.x));\n    float n10 = dot(g10, vec2(fx.y, fy.y));\n    float n01 = dot(g01, vec2(fx.z, fy.z));\n    float n11 = dot(g11, vec2(fx.w, fy.w));\n    vec2 fade_xy = fade(Pf.xy);\n    vec2 n_x = mix(vec2(n00, n01), vec2(n10, n11), fade_xy.x);\n    float n_xy = mix(n_x.x, n_x.y, fade_xy.y);\n    return 2.3 * n_xy;\n}\n\nmat4 rotate3d(vec3 axis, float angle) {\n    axis = normalize(axis);\n    float s = sin(angle);\n    float c = cos(angle);\n    float oc = 1.0 - c;\n    return mat4(oc * axis.x * axis.x + c, oc * axis.x * axis.y - axis.z * s, oc * axis.z * axis.x + axis.y * s, 0.0, oc * axis.x * axis.y + axis.z * s, oc * axis.y * axis.y + c, oc * axis.y * axis.z - axis.x * s, 0.0, oc * axis.z * axis.x - axis.y * s, oc * axis.y * axis.z + axis.x * s, oc * axis.z * axis.z + c, 0.0, 0.0, 0.0, 0.0, 1.0);\n}\n\nvoid main() {\n    float time = uTime * uWindSpeed;\n\n    vUv = remapAtlasUv(vec2(uv.x, 1. - uv.y), aGrassTextureRemap);\n    vGradient = aGradient;\n    \n    vec4 center = modelMatrix * instanceMatrix * vec4(0., 0., 0., 1.);\n\n    float reveal = aRevealProgress;\n    // float reveal = 1.;\n\n    float wind = cnoise(center.xz * uWindDisplacement + time) * reveal;\n    float centerDist = (1. / wind) * 1. / uWindIntensity;\n\n    mat4 rotationMatrix = rotate3d(vec3(1., 0., 0.), -0.5 * uv.y / centerDist);\n\n    vec4 transformed = vec4(position, 1.0);\n    transformed.xyz *= uScale;\n    transformed.z *= reveal;\n\n    transformed.z *= mix(1., 0.2, uv.y);\n    transformed.z -= centerDist;\n    transformed = rotationMatrix * transformed;\n    transformed.z += centerDist;\n\n    vec4 worldPosition = modelMatrix * instanceMatrix * vec4(transformed.xyz, 1.0);\n    vWorldPosition = worldPosition.xyz;\n\n    vec4 mvPosition = viewMatrix * worldPosition;\n    vFogDepth = -mvPosition.z;\n\n    gl_Position = projectionMatrix * modelViewMatrix * instanceMatrix * transformed;\n}",fragmentShader:"precision highp float;\n#define GLSLIFY 1\n\nuniform float uTime;\nuniform sampler2D tNoiseTexture;\nvarying vec3 vWorldPosition;\nvarying float vFogDepth;\nuniform vec2 uResolution;\n\nvarying vec2 vUv;\nvarying float vGradient;\n\nuniform sampler2D tGrass;\nuniform sampler2D tGradient;\nuniform vec2 uFogState;\n\nfloat cremap(float value, float start1, float stop1, float start2, float stop2) {\n  float r = start2 + (stop2 - start2) * ((value - start1) / (stop1 - start1));\n  return clamp(r, min(start2, stop2), max(start2, stop2));\n}\n\nfloat remap(float value, float start1, float stop1, float start2, float stop2) {\n  return start2 + (stop2 - start2) * ((value - start1) / (stop1 - start1));\n}\n\nfloat quarticInOut(float t) {\n  return t < 0.5\n    ? +8.0 * pow(t, 4.0)\n    : -8.0 * pow(t - 1.0, 4.0) + 1.0;\n}\n\nfloat sdCircle(vec2 p, float r) {\n  return length(p) - r;\n}\n\nvec3 getFogColor(float time, float depth, vec2 uv, vec2 resolution, vec3 worldPosition, vec3 color, sampler2D noiseTexture, vec3 fogColor, float noiseSpeed, vec2 noiseScale, float noiseStrength, vec2 fogAmountRangeY, vec2 fogDensityRangeY, vec2 fogAmountRangeZ, vec2 fogDensityRangeZ, vec3 mainSdf, vec2 sdfRemap) {\n  worldPosition.z -= time * noiseSpeed * .1;\n\n  vec2 noiseUv = worldPosition.yz;\n  noiseUv *= 0.05 * noiseScale;\n\n  float noise = texture2D(noiseTexture, noiseUv).r;\n  noise = quarticInOut(noise);\n  if(worldPosition.y < 0.01)\n    noise = 1.;\n  if(worldPosition.x > 900.)\n    noise = 1.;\n\n  float screenRatio = resolution.x / resolution.y;\n  vec2 adjustedUvs = ((uv - 0.5) / vec2(1., screenRatio)) + 0.5;\n  adjustedUvs.x += step(screenRatio, 1.) * -.5; // on portrait only\n  float sdf = sdCircle(adjustedUvs - mainSdf.xy, mainSdf.z);\n  sdf = smoothstep(sdfRemap.x, sdfRemap.y, sdf);\n\n  float noiseSdf = sdf * remap(noise, 0., 1., 1. - noiseStrength, 1.);\n\n  float fogAmountZ = mix(fogAmountRangeZ.x, fogAmountRangeZ.y, noiseSdf);\n  // float fogDensityZ = mix(fogDensityRangeZ.x, fogDensityRangeZ.y, noiseSdf) / 1000.;\n  float fogDensityZ = mix(fogDensityRangeZ.x, fogDensityRangeZ.y, noiseSdf);\n  float fogFactorZ = 1.0 - exp(-fogDensityZ * fogDensityZ * depth * depth);\n\n  float fogPosY = worldPosition.y;\n  float fogDensityY = mix(fogDensityRangeY.y, fogDensityRangeY.x, noiseSdf);\n  float fogAmountY = mix(fogAmountRangeY.x, fogAmountRangeY.y, noiseSdf);\n  float fogFactorY = exp(-fogDensityY * fogDensityY * fogPosY * fogPosY);\n\n  float fogAmount = clamp(fogFactorZ * fogAmountZ, 0.0, 1.0);\n  fogAmount = max(fogAmount, clamp(fogFactorY * fogAmountY, 0.0, 1.0));\n  fogAmount = clamp(fogAmount + sdf * 0.2, 0., 1.);\n\n  return mix(color, fogColor, fogAmount);\n}\n\nstruct FogSettings {\n    float noiseSpeed;\n    vec2 noiseScale;\n    float noiseStrength;\n    vec2 fogAmountRangeY;\n    vec2 fogDensityRangeY;\n    vec2 fogAmountRangeZ;\n    vec2 fogDensityRangeZ;\n    vec3 mainSdf;\n    vec2 sdfRemap;\n    vec3 fogColor;\n};\n\nFogSettings mixFogSettings(FogSettings from, FogSettings to, float ratio) {\n    FogSettings settings;\n    settings.noiseSpeed = mix(from.noiseSpeed, to.noiseSpeed, ratio);\n    settings.noiseScale = mix(from.noiseScale, to.noiseScale, ratio);\n    settings.noiseStrength = mix(from.noiseStrength, to.noiseStrength, ratio);\n    settings.fogAmountRangeY = mix(from.fogAmountRangeY, to.fogAmountRangeY, ratio);\n    settings.fogDensityRangeY = mix(from.fogDensityRangeY, to.fogDensityRangeY, ratio);\n    settings.fogAmountRangeZ = mix(from.fogAmountRangeZ, to.fogAmountRangeZ, ratio);\n    settings.fogDensityRangeZ = mix(from.fogDensityRangeZ, to.fogDensityRangeZ, ratio);\n    settings.mainSdf = mix(from.mainSdf, to.mainSdf, ratio);\n    settings.sdfRemap = mix(from.sdfRemap, to.sdfRemap, ratio);\n    settings.fogColor = mix(from.fogColor, to.fogColor, ratio);\n    return settings;\n}\n\nFogSettings getBaseSettings() {\n    FogSettings baseSettings;\n    baseSettings.noiseSpeed = 3.;\n    baseSettings.noiseScale = vec2(0.6, 0.2);\n    baseSettings.noiseStrength = 0.88;\n    baseSettings.fogAmountRangeY = vec2(0.1, 1.39);\n    baseSettings.fogDensityRangeY = vec2(0.01, 0.81);\n    baseSettings.fogAmountRangeZ = vec2(0.01, 0.99);\n    baseSettings.fogDensityRangeZ = vec2(20.0, 277.42);\n    baseSettings.mainSdf = vec3(0.79, 0.63, 0.85);\n    baseSettings.sdfRemap = vec2(-0.48, -0.06);\n    baseSettings.fogColor = vec3(0.796, 0.796, 0.761);\n    return baseSettings;\n}\n\nFogSettings getOccultedSettings(FogSettings baseSettings) {\n    FogSettings occultedSettings;\n    occultedSettings.noiseSpeed = baseSettings.noiseSpeed;\n    occultedSettings.noiseScale = baseSettings.noiseScale;\n    occultedSettings.noiseStrength = baseSettings.noiseStrength;\n    occultedSettings.fogAmountRangeY = vec2(0.65, 1.16);\n    occultedSettings.fogDensityRangeY = vec2(0.65, 0.81);\n    occultedSettings.fogAmountRangeZ = baseSettings.fogAmountRangeZ;\n    occultedSettings.fogDensityRangeZ = vec2(20.0, 161.29);\n    occultedSettings.mainSdf = vec3(0.64, 0.62, 0.84);\n    occultedSettings.sdfRemap = vec2(-0.84, -0.45);\n    occultedSettings.fogColor = vec3(0.796, 0.796, 0.761);\n    return occultedSettings;\n}\n\nFogSettings getOpaqueSettings(FogSettings baseSettings) {\n    FogSettings opaqueSettings;\n    opaqueSettings.noiseSpeed = baseSettings.noiseSpeed;\n    opaqueSettings.noiseScale = baseSettings.noiseScale;\n    opaqueSettings.noiseStrength = baseSettings.noiseStrength;\n    opaqueSettings.fogAmountRangeY = vec2(0.65, 1.16);\n    opaqueSettings.fogDensityRangeY = vec2(0.65, 0.81);\n    opaqueSettings.fogAmountRangeZ = vec2(1, 1.3);\n    opaqueSettings.fogDensityRangeZ = vec2(100, 300);\n    opaqueSettings.mainSdf = vec3(0.5, 0.5, 0);\n    opaqueSettings.sdfRemap = baseSettings.sdfRemap;\n    opaqueSettings.fogColor = vec3(0.714, 0.714, 0.714);\n    return opaqueSettings;\n}\n\nvec3 getFogColorWithRatio(float time, float depth, vec2 uv, vec2 resolution, vec3 worldPosition, vec3 color, sampler2D noiseTexture, float opaqueRatio, float occultedRatio) {\n\n    FogSettings baseSettings = getBaseSettings();\n    FogSettings opaqueSettings = getOpaqueSettings(baseSettings);\n    FogSettings occultedSettings = getOccultedSettings(baseSettings);\n\n    FogSettings settings = baseSettings;\n    settings = mixFogSettings(settings, occultedSettings, occultedRatio);\n    settings = mixFogSettings(settings, opaqueSettings, opaqueRatio);\n\n    return getFogColor(time, depth, uv, resolution, worldPosition, color, noiseTexture, settings.fogColor, settings.noiseSpeed, settings.noiseScale, settings.noiseStrength, settings.fogAmountRangeY, settings.fogDensityRangeY, settings.fogAmountRangeZ, settings.fogDensityRangeZ, settings.mainSdf, settings.sdfRemap);\n}\n\nvoid main() {\n    vec4 text = texture2D(tGrass, vUv);\n\n    vec2 screenUv = gl_FragCoord.xy / uResolution;\n\n    vec3 color = texture2D(tGradient, vec2(vGradient, text.r)).rgb;\n\n    color = getFogColorWithRatio(uTime, vFogDepth, screenUv, uResolution, vWorldPosition, color, tNoiseTexture, uFogState.x, uFogState.y);\n\n    // gl_FragColor = text;\n    gl_FragColor = vec4(color, text.a);\n\n\tif (gl_FragColor.a < 0.01) discard;\n\n    // gl_FragColor = vec4(vUv, 1., 1.);\n\n\tgl_FragColor = LinearTosRGB(gl_FragColor);\n}",uniforms:K2({uTime:{value:0},uResolution:{value:new Ay},tNoiseTexture:{value:r},uFogState:{value:new Ay},tNoise:{value:t},tGrass:{value:e},tGradient:{value:n}},this._globalUniforms),transparent:!0,depthWrite:!1,defines:{BASE_WIDTH:.1,BASE_HEIGHT:.1}})}},{key:"_createGrassMesh",value:function(t){var e=new lx(t,this._material,this._params.count);e.renderOrder=200,e.frustumCulled=!0,this.add(e),e.quaternion.copy(this._paper._container.quaternion),e.rotation.copy(this._paper._container.rotation),e.position.copy(this._paper._container.position);for(var n=new Xb,r=this._attributes,i=r.positions,o=r.rotations,a=r.scale,s=0;s<this._params.count;s++)n.scale.set(1,a[2*s+1],a[2*s+0]),n.position.set(i[3*s+0],i[3*s+1],i[3*s+2]),n.rotation.set(o[3*s+0],o[3*s+1],o[3*s+2]),n.updateMatrix(),e.setMatrixAt(s,n.matrix);return e.onBeforeRender=this._updateRevealProgress.bind(this),e}},{key:"_updateRevealProgress",value:function(){var t,e;if((this.$paintManager.instanceIndex===this._paper.index||this._previousNeedsUpdate)&&(this.$paintManager.groundIntersection||this._previousNeedsUpdate)&&this._paper.isInFrustum){for(var n=this._attributes.positions,r=this._attributes.revealProgress,i=!1,o=4*(null===(t=this._paper._simulationInstance)||void 0===t?void 0:t.cursorSize),a=o*o,s=null===(e=this.$paintManager.groundIntersection)||void 0===e?void 0:e.point,l=0;l<this._params.count;l++){var u=1e4;if(s){var c=n[3*l+0],d=n[3*l+1],f=n[3*l+2];o3.set(c,d,f),this._grassMesh.getMatrixAt(l,a3),o3.applyMatrix4(this._grassMesh.matrixWorld);var h=s.x-o3.x,p=s.z-o3.z;u=h*h+p*p}var m=r[l];m<=0&&(this._animationState[l]="none"),u<a&&(this._animationState[l]="rise"),m>=1&&(this._animationState[l]="fall");var g=this._animationState[l];i=i||"none"!==g,"rise"===g&&(r[l]=Math.min(m+this._delta/1,1)),"fall"===g&&(r[l]=Math.max(m-this._delta/3,0))}this._grassMesh.geometry.getAttribute("aRevealProgress").needsUpdate=i,this._previousNeedsUpdate=i}}},{key:"update",value:function(t){var e,n,r=t.delta,i=t.time;this._delta=r,this._material.uniforms.uTime.value=i,this._material.uniforms.uFogState.value.set(null===(e=this.$experienceManager)||void 0===e?void 0:e.fogState.opaque,null===(n=this.$experienceManager)||void 0===n?void 0:n.fogState.occulted)}},{key:"onWindowResize",value:function(t){this._material.uniforms.uResolution.value.set(t.renderWidth,t.renderHeight)}}],r&&J2(n.prototype,r),i&&J2(n,i),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,i}(dY(Xb));function l3(t){return l3="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},l3(t)}function u3(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return c3(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return c3(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return a=t.done,t},e:function(t){s=!0,o=t},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function c3(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function d3(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,f3(r.key),r)}}function f3(t){var e=function(t,e){if("object"!=l3(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=l3(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==l3(e)?e:e+""}function h3(t,e,n){return e=g3(e),function(t,e){if(e&&("object"===l3(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,p3()?Reflect.construct(e,n||[],g3(t).constructor):e.apply(t,n))}function p3(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(p3=function(){return!!t})()}function m3(){return m3="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=g3(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(arguments.length<3?t:n):i.value}},m3.apply(this,arguments)}function g3(t){return g3=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},g3(t)}function v3(t,e){return v3=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},v3(t,e)}var y3=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),h3(this,e,arguments)}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&v3(t,e)}(e,t),n=e,r=[{key:"init",value:function(t){this._config=t.config,this._papers=t.papers,this._globalUniforms={uScale:{value:5},uWindDisplacement:{value:3e3},uWindIntensity:{value:3},uWindSpeed:{value:.5}},this._grassComponents=this._createGrassComponents(),this._debug=this._createDebug()}},{key:"destroy",value:function(){m3(g3(e.prototype),"destroy",this).call(this);var t,n=u3(this._grassComponents);try{for(n.s();!(t=n.n()).done;)t.value.destroy()}catch(t){n.e(t)}finally{n.f()}}},{key:"update",value:function(t){var e,n=t.time,r=t.delta,i=u3(this._grassComponents);try{for(i.s();!(e=i.n()).done;)e.value.update({time:n,delta:r})}catch(t){i.e(t)}finally{i.f()}}},{key:"_createGrassComponents",value:function(){for(var t=[],e=0;e<this._papers.length;e++){var n=new s3({config:this._config,paper:this._papers[e],globalUniforms:this._globalUniforms});this.add(n),t.push(n)}return t}},{key:"_createDebug",value:function(){if(lK){var t=lK.addFolder({title:"Grass",tab:this._config.name});return t.addInput(this._globalUniforms.uScale,"value",{label:"Global Scale"}),t.addInput(this._globalUniforms.uWindDisplacement,"value",{label:"Wind Displacement"}),t.addInput(this._globalUniforms.uWindIntensity,"value",{label:"Wind Intensity",min:0,max:3,step:.01}),t.addInput(this._globalUniforms.uWindSpeed,"value",{label:"Wind Speed",min:0,max:2,step:.01}),t}}}],r&&d3(n.prototype,r),i&&d3(n,i),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,i}(dY(Xb));function b3(t){return b3="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},b3(t)}function _3(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,w3(r.key),r)}}function w3(t){var e=function(t,e){if("object"!=b3(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=b3(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==b3(e)?e:e+""}function A3(t,e,n){return e=S3(e),function(t,e){if(e&&("object"===b3(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,E3()?Reflect.construct(e,n||[],S3(t).constructor):e.apply(t,n))}function E3(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(E3=function(){return!!t})()}function x3(){return x3="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=S3(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(arguments.length<3?t:n):i.value}},x3.apply(this,arguments)}function S3(t){return S3=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},S3(t)}function T3(t,e){return T3=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},T3(t,e)}var C3=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),A3(this,e,arguments)}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&T3(t,e)}(e,t),n=e,r=[{key:"init",value:function(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.size,r=e.material;this._props={size:n,material:r},this._uniforms=null===(t=this._props.material)||void 0===t?void 0:t.uniforms,this._uniforms.uTime={value:0},this._uniforms.uSize={value:n},this._uniforms.uInputTexture={value:null},this._startTime=Date.now(),this._scene=new UE,this._camera=new Q_;var i=/(iPad|iPhone|iPod)/g.test(navigator.userAgent)?$g:Xg;this._renderTargetA=new Vy(n,n,{wrapS:Dg,wrapT:Dg,minFilter:jg,magFilter:jg,format:nv,type:i}),this._renderTargetB=this._renderTargetA.clone(),this._createMesh(),this.update()}},{key:"_createMesh",value:function(){var t=this._props,e=t.material;t.size,this._material=new Rx(e),this._geometry=new sw(2,2,1,1),this._mesh=new j_(this._geometry,this._material),this._scene.add(this._mesh)}},{key:"outputTexture",get:function(){return this._renderTargetB.texture}},{key:"update",value:function(){var t=this._renderTargetA;this._renderTargetA=this._renderTargetB,this._renderTargetB=t,this._uniforms.uTime.value=Date.now()-this._startTime,this._uniforms.uInputTexture.value=this._renderTargetA.texture,this.$renderer.instance.setRenderTarget(this._renderTargetB),this.$renderer.instance.render(this._scene,this._camera),this.$renderer.instance.setRenderTarget(null)}},{key:"destroy",value:function(){this._material.dispose(),x3(S3(e.prototype),"destroy",this).call(this)}}],r&&_3(n.prototype,r),i&&_3(n,i),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,i}(dY());function I3(t){return I3="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},I3(t)}function k3(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,P3(r.key),r)}}function P3(t){var e=function(t,e){if("object"!=I3(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=I3(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==I3(e)?e:e+""}function R3(t,e,n){return e=L3(e),function(t,e){if(e&&("object"===I3(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,O3()?Reflect.construct(e,n||[],L3(t).constructor):e.apply(t,n))}function O3(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(O3=function(){return!!t})()}function M3(){return M3="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=L3(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(arguments.length<3?t:n):i.value}},M3.apply(this,arguments)}function L3(t){return L3=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},L3(t)}function D3(t,e){return D3=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},D3(t,e)}var N3=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),R3(this,e,arguments)}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&D3(t,e)}(e,t),n=e,r=[{key:"init",value:function(t){var n=t.size,r=function(t,e){for(var n=t*e,r=new Float32Array(4*n),i=0;i<n;i++){var o=Math.random()+.5;r[4*i+0]=0,r[4*i+1]=0,r[4*i+2]=1,r[4*i+3]=o}return r}(n,n),i=new ZE(r,n,n,nv,Xg);i.needsUpdate=!0,this._uniforms={uCurrentIndex:{value:-1},uVelocity:{value:0},uAngle:{value:0},uBaseTexture:{value:i},uMaxForce:{value:.0045},uTime:{value:0},uDelta:{value:0}},M3(L3(e.prototype),"init",this).call(this,{size:n,material:{vertexShader:"precision highp float;\n#define GLSLIFY 1\n\nattribute vec3 position;\nattribute vec2 uv;\n\nvarying vec2 vUv;\n\nvoid main() {\n    vUv = uv;\n\n    gl_Position = vec4(position, 1.0);\n}",fragmentShader:"precision highp float;\n#define GLSLIFY 1\n\nvarying vec2 vUv;\n\nuniform float uTime;\nuniform float uDelta;\nuniform float uSize;\nuniform float uCurrentIndex;\nuniform float uAngle;\nuniform float uVelocity;\nuniform float uMaxForce;\n\nuniform sampler2D uInputTexture;\nuniform sampler2D uBaseTexture;\n\nvoid main() {\n    vec2 uv = vUv;\n\n    float index = floor((uv.x - .5) * uSize) + floor(uv.y * uSize * uSize);\n\n    vec4 baseData = texture2D(uBaseTexture, uv);\n    vec4 data = texture2D(uInputTexture, uv);\n\n    float speed = data.r;\n    float angle = data.g;\n\n    float lifetime = data.b;\n\n    if(uTime == 0.) {\n        lifetime += baseData.b;\n    }\n\n    lifetime += uDelta * baseData.a;\n\n    if(uCurrentIndex == index) { // Initialize this particle\n        speed = clamp(uVelocity, 0.0, uMaxForce);\n        angle = uAngle;\n        lifetime = 0.;\n    }\n\n    gl_FragColor = vec4(speed, angle, lifetime, 1.0);\n}",uniforms:this._uniforms}})}},{key:"update",value:function(){M3(L3(e.prototype),"update",this).call(this)}}],r&&k3(n.prototype,r),i&&k3(n,i),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,i}(C3);function B3(t){return B3="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},B3(t)}function j3(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,z3(r.key),r)}}function z3(t){var e=function(t,e){if("object"!=B3(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=B3(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==B3(e)?e:e+""}function F3(t,e,n){return e=q3(e),function(t,e){if(e&&("object"===B3(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,U3()?Reflect.construct(e,n||[],q3(t).constructor):e.apply(t,n))}function U3(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(U3=function(){return!!t})()}function q3(t){return q3=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},q3(t)}function G3(t,e){return G3=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},G3(t,e)}var H3=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),F3(this,e,arguments)}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&G3(t,e)}(e,t),n=e,r=[{key:"init",value:function(t){var e=t.count,n=t.papers;this._count=e,this._papers=n,this._size=Math.ceil(Math.sqrt(this._count));var r=AK.get("leave/texture"),i=AK.get("noise/rgb-fractal");i.wrapS=i.wrapT=Dg,this._tintColor=new By("#000000"),this._uniforms={uTime:{value:0},uResolution:{value:new Ay},tNoiseTexture:{value:i},uSize:{value:this._size},uParticleSize:{value:1},uAmplitude:{value:2},uDuration:{value:1.04},uRotationSpeed:{value:2.5},uMovementForce:{value:10},uLifeTime:{value:35},uSpeedReveal:{value:52.5},uTintColor:{value:this._tintColor},uPass1Texture:{value:null},uTexture:{value:r},uFogState:{value:new Ay}},this._geometry=this._createGeometry(),this._material=this._createMaterial(),this._mesh=this._createMesh()}},{key:"_updateInstanceMatrices",value:function(t,e){var n=new Xb,r=this.$paintManager.instanceIndex;if(n.position.x=e.x-.2,n.position.y=e.y,n.position.z=e.z,r>=0){var i,o=null===(i=this._papers[r]._config.leaves)||void 0===i?void 0:i.size;n.scale.set(o,o,o)}n.updateMatrix(),this._mesh.setMatrixAt(t,n.matrix),this._mesh.instanceMatrix.needsUpdate=!0}},{key:"setPassTexture",value:function(t){this._uniforms.uPass1Texture.value=t}},{key:"_createGeometry",value:function(){var t=new sw(.5,.5,1,1);t.rotateY(-.5*Math.PI);var e=new CS;e.copy(t);var n=new Float32Array(1*this._count),r=new Float32Array(1*this._count),i=new Float32Array(1*this._count),o=new Float32Array(3*this._count);return this._fillAttributesArray(n,r,i,o),e.setAttribute("aIndices",new nx(n,1)),e.setAttribute("aRandomScale",new nx(r,1)),e.setAttribute("aRandomTexture",new nx(i,1)),e.setAttribute("aRandomRotate",new nx(o,3)),e}},{key:"_fillAttributesArray",value:function(t,e,n,r){for(var i=0;i<this._count;i++)t[1*i+0]=i,e[1*i+0]=Math.random()+.75,n[i+0]=Math.trunc(5*Math.random())/5,r[3*i+0]=Math.random()*Math.PI*2,r[3*i+1]=Math.random()*Math.PI*2,r[3*i+2]=Math.random()*Math.PI*2}},{key:"_createMaterial",value:function(){return new V_({vertexShader:"#define GLSLIFY 1\nattribute float aIndices;\nattribute float aRandomScale;\nattribute float aRandomTexture;\nattribute vec3 aRandomRotate;\n\nvarying float vRandomTexture;\nvarying float vFadeOut;\nvarying vec2 vUv;\nvarying vec3 vWorldPosition;\nvarying float vFogDepth;\n\nuniform float uParticleSize;\nuniform float uDuration;\nuniform float uAmplitude;\nuniform float uSize;\nuniform float uRotationSpeed;\nuniform float uLifeTime;\nuniform float uSpeedReveal;\nuniform sampler2D uPass1Texture;\n\n#define PI 3.141592\n\nmat4 rotate3d(vec3 axis, float angle) {\n    axis = normalize(axis);\n    float s = sin(angle);\n    float c = cos(angle);\n    float oc = 1.0 - c;\n    return mat4(oc * axis.x * axis.x + c, oc * axis.x * axis.y - axis.z * s, oc * axis.z * axis.x + axis.y * s, 0.0, oc * axis.x * axis.y + axis.z * s, oc * axis.y * axis.y + c, oc * axis.y * axis.z - axis.x * s, 0.0, oc * axis.z * axis.x - axis.y * s, oc * axis.y * axis.z + axis.x * s, oc * axis.z * axis.z + c, 0.0, 0.0, 0.0, 0.0, 1.0);\n}\n\nvoid main() {\n    vec2 pass1Uv = uv;\n    pass1Uv.y = 1. - pass1Uv.y;\n    pass1Uv.x = mod(aIndices, uSize) / uSize;\n    pass1Uv.y = floor(aIndices / uSize) / uSize;\n\n    vec4 data = texture2D(uPass1Texture, pass1Uv);\n\n    float speedReveal = data.r * uSpeedReveal;\n    float angle = data.g;\n    float lifetime = data.b * uLifeTime;\n\n    float projection = (1.0 - pow(uDuration, -lifetime)) * uAmplitude;\n\n    float posX = projection * cos(angle);\n    float posY = projection * sin(angle);\n\n    mat4 rotationMatrix = rotate3d(vec3(aRandomRotate.x, aRandomRotate.y, aRandomRotate.z), projection * aRandomScale * uRotationSpeed);\n\n    vec4 _position = rotationMatrix * vec4(position * uParticleSize, 1.0);\n    _position *= aRandomScale * speedReveal;\n\n    _position.y -= posY;\n    _position.z -= posX;\n\n    vec4 worldPosition = modelMatrix * instanceMatrix * vec4(_position.xyz, 1.0);\n    vWorldPosition = worldPosition.xyz;\n\n    vec4 mvPosition = viewMatrix * worldPosition;\n    vFogDepth = -mvPosition.z;\n\n    vRandomTexture = aRandomTexture;\n    vFadeOut = 1.0 - projection;\n    vUv = uv;\n\n    gl_Position = projectionMatrix * mvPosition;\n}",fragmentShader:"#define GLSLIFY 1\n// varying float vInstance;\nuniform float uTime;\nuniform sampler2D tNoiseTexture;\nvarying vec3 vWorldPosition;\nvarying float vFogDepth;\nuniform vec2 uResolution;\n\nvarying float vRandomTexture;\nvarying float vFadeOut;\nvarying vec2 vUv;\n\nuniform vec3 uTintColor;\nuniform sampler2D uTexture;\nuniform vec2 uFogState;\n\nfloat cremap(float value, float start1, float stop1, float start2, float stop2) {\n  float r = start2 + (stop2 - start2) * ((value - start1) / (stop1 - start1));\n  return clamp(r, min(start2, stop2), max(start2, stop2));\n}\n\nfloat remap(float value, float start1, float stop1, float start2, float stop2) {\n  return start2 + (stop2 - start2) * ((value - start1) / (stop1 - start1));\n}\n\nfloat quarticInOut(float t) {\n  return t < 0.5\n    ? +8.0 * pow(t, 4.0)\n    : -8.0 * pow(t - 1.0, 4.0) + 1.0;\n}\n\nfloat sdCircle(vec2 p, float r) {\n  return length(p) - r;\n}\n\nvec3 getFogColor(float time, float depth, vec2 uv, vec2 resolution, vec3 worldPosition, vec3 color, sampler2D noiseTexture, vec3 fogColor, float noiseSpeed, vec2 noiseScale, float noiseStrength, vec2 fogAmountRangeY, vec2 fogDensityRangeY, vec2 fogAmountRangeZ, vec2 fogDensityRangeZ, vec3 mainSdf, vec2 sdfRemap) {\n  worldPosition.z -= time * noiseSpeed * .1;\n\n  vec2 noiseUv = worldPosition.yz;\n  noiseUv *= 0.05 * noiseScale;\n\n  float noise = texture2D(noiseTexture, noiseUv).r;\n  noise = quarticInOut(noise);\n  if(worldPosition.y < 0.01)\n    noise = 1.;\n  if(worldPosition.x > 900.)\n    noise = 1.;\n\n  float screenRatio = resolution.x / resolution.y;\n  vec2 adjustedUvs = ((uv - 0.5) / vec2(1., screenRatio)) + 0.5;\n  adjustedUvs.x += step(screenRatio, 1.) * -.5; // on portrait only\n  float sdf = sdCircle(adjustedUvs - mainSdf.xy, mainSdf.z);\n  sdf = smoothstep(sdfRemap.x, sdfRemap.y, sdf);\n\n  float noiseSdf = sdf * remap(noise, 0., 1., 1. - noiseStrength, 1.);\n\n  float fogAmountZ = mix(fogAmountRangeZ.x, fogAmountRangeZ.y, noiseSdf);\n  // float fogDensityZ = mix(fogDensityRangeZ.x, fogDensityRangeZ.y, noiseSdf) / 1000.;\n  float fogDensityZ = mix(fogDensityRangeZ.x, fogDensityRangeZ.y, noiseSdf);\n  float fogFactorZ = 1.0 - exp(-fogDensityZ * fogDensityZ * depth * depth);\n\n  float fogPosY = worldPosition.y;\n  float fogDensityY = mix(fogDensityRangeY.y, fogDensityRangeY.x, noiseSdf);\n  float fogAmountY = mix(fogAmountRangeY.x, fogAmountRangeY.y, noiseSdf);\n  float fogFactorY = exp(-fogDensityY * fogDensityY * fogPosY * fogPosY);\n\n  float fogAmount = clamp(fogFactorZ * fogAmountZ, 0.0, 1.0);\n  fogAmount = max(fogAmount, clamp(fogFactorY * fogAmountY, 0.0, 1.0));\n  fogAmount = clamp(fogAmount + sdf * 0.2, 0., 1.);\n\n  return mix(color, fogColor, fogAmount);\n}\n\nstruct FogSettings {\n    float noiseSpeed;\n    vec2 noiseScale;\n    float noiseStrength;\n    vec2 fogAmountRangeY;\n    vec2 fogDensityRangeY;\n    vec2 fogAmountRangeZ;\n    vec2 fogDensityRangeZ;\n    vec3 mainSdf;\n    vec2 sdfRemap;\n    vec3 fogColor;\n};\n\nFogSettings mixFogSettings(FogSettings from, FogSettings to, float ratio) {\n    FogSettings settings;\n    settings.noiseSpeed = mix(from.noiseSpeed, to.noiseSpeed, ratio);\n    settings.noiseScale = mix(from.noiseScale, to.noiseScale, ratio);\n    settings.noiseStrength = mix(from.noiseStrength, to.noiseStrength, ratio);\n    settings.fogAmountRangeY = mix(from.fogAmountRangeY, to.fogAmountRangeY, ratio);\n    settings.fogDensityRangeY = mix(from.fogDensityRangeY, to.fogDensityRangeY, ratio);\n    settings.fogAmountRangeZ = mix(from.fogAmountRangeZ, to.fogAmountRangeZ, ratio);\n    settings.fogDensityRangeZ = mix(from.fogDensityRangeZ, to.fogDensityRangeZ, ratio);\n    settings.mainSdf = mix(from.mainSdf, to.mainSdf, ratio);\n    settings.sdfRemap = mix(from.sdfRemap, to.sdfRemap, ratio);\n    settings.fogColor = mix(from.fogColor, to.fogColor, ratio);\n    return settings;\n}\n\nFogSettings getBaseSettings() {\n    FogSettings baseSettings;\n    baseSettings.noiseSpeed = 3.;\n    baseSettings.noiseScale = vec2(0.6, 0.2);\n    baseSettings.noiseStrength = 0.88;\n    baseSettings.fogAmountRangeY = vec2(0.1, 1.39);\n    baseSettings.fogDensityRangeY = vec2(0.01, 0.81);\n    baseSettings.fogAmountRangeZ = vec2(0.01, 0.99);\n    baseSettings.fogDensityRangeZ = vec2(20.0, 277.42);\n    baseSettings.mainSdf = vec3(0.79, 0.63, 0.85);\n    baseSettings.sdfRemap = vec2(-0.48, -0.06);\n    baseSettings.fogColor = vec3(0.796, 0.796, 0.761);\n    return baseSettings;\n}\n\nFogSettings getOccultedSettings(FogSettings baseSettings) {\n    FogSettings occultedSettings;\n    occultedSettings.noiseSpeed = baseSettings.noiseSpeed;\n    occultedSettings.noiseScale = baseSettings.noiseScale;\n    occultedSettings.noiseStrength = baseSettings.noiseStrength;\n    occultedSettings.fogAmountRangeY = vec2(0.65, 1.16);\n    occultedSettings.fogDensityRangeY = vec2(0.65, 0.81);\n    occultedSettings.fogAmountRangeZ = baseSettings.fogAmountRangeZ;\n    occultedSettings.fogDensityRangeZ = vec2(20.0, 161.29);\n    occultedSettings.mainSdf = vec3(0.64, 0.62, 0.84);\n    occultedSettings.sdfRemap = vec2(-0.84, -0.45);\n    occultedSettings.fogColor = vec3(0.796, 0.796, 0.761);\n    return occultedSettings;\n}\n\nFogSettings getOpaqueSettings(FogSettings baseSettings) {\n    FogSettings opaqueSettings;\n    opaqueSettings.noiseSpeed = baseSettings.noiseSpeed;\n    opaqueSettings.noiseScale = baseSettings.noiseScale;\n    opaqueSettings.noiseStrength = baseSettings.noiseStrength;\n    opaqueSettings.fogAmountRangeY = vec2(0.65, 1.16);\n    opaqueSettings.fogDensityRangeY = vec2(0.65, 0.81);\n    opaqueSettings.fogAmountRangeZ = vec2(1, 1.3);\n    opaqueSettings.fogDensityRangeZ = vec2(100, 300);\n    opaqueSettings.mainSdf = vec3(0.5, 0.5, 0);\n    opaqueSettings.sdfRemap = baseSettings.sdfRemap;\n    opaqueSettings.fogColor = vec3(0.714, 0.714, 0.714);\n    return opaqueSettings;\n}\n\nvec3 getFogColorWithRatio(float time, float depth, vec2 uv, vec2 resolution, vec3 worldPosition, vec3 color, sampler2D noiseTexture, float opaqueRatio, float occultedRatio) {\n\n    FogSettings baseSettings = getBaseSettings();\n    FogSettings opaqueSettings = getOpaqueSettings(baseSettings);\n    FogSettings occultedSettings = getOccultedSettings(baseSettings);\n\n    FogSettings settings = baseSettings;\n    settings = mixFogSettings(settings, occultedSettings, occultedRatio);\n    settings = mixFogSettings(settings, opaqueSettings, opaqueRatio);\n\n    return getFogColor(time, depth, uv, resolution, worldPosition, color, noiseTexture, settings.fogColor, settings.noiseSpeed, settings.noiseScale, settings.noiseStrength, settings.fogAmountRangeY, settings.fogDensityRangeY, settings.fogAmountRangeZ, settings.fogDensityRangeZ, settings.mainSdf, settings.sdfRemap);\n}\n\nvoid main() {\n    vec2 rUvs = vec2(vUv.x * 0.2 + vRandomTexture, vUv.y);\n    vec4 baseColor = texture2D(uTexture, rUvs);\n\n    vec2 screenUv = gl_FragCoord.xy / uResolution;\n\n    vec3 color = baseColor.rgb;\n    color *= uTintColor;\n    color = getFogColorWithRatio(uTime, vFogDepth, screenUv, uResolution, vWorldPosition, color, tNoiseTexture, uFogState.x, uFogState.y);\n\n    float alpha = baseColor.a;\n    alpha *= vFadeOut * 0.625 + 0.6;\n\n    gl_FragColor = vec4(color, alpha);\n\tgl_FragColor = LinearTosRGB(gl_FragColor);\n}",uniforms:this._uniforms,transparent:!0,depthWrite:!1,side:Hm})}},{key:"_createMesh",value:function(){var t=new lx(this._geometry,this._material,this._count);return t.frustumCulled=!1,this.add(t),t}},{key:"_update",value:function(t){this._uniforms.uTime.value=t;var e,n,r,i=this.$paintManager.instanceIndex;null!=i&&i>=0&&(this._material.uniforms.uFogState.value.set(null===(e=this.$experienceManager)||void 0===e?void 0:e.fogState.opaque,null===(n=this.$experienceManager)||void 0===n?void 0:n.fogState.occulted),this._material.uniforms.uTintColor.value.lerp(new By(null===(r=this._papers[i]._config.leaves)||void 0===r?void 0:r.color),.1))}},{key:"onWindowResize",value:function(t){this._uniforms.uResolution.value.set(t.renderWidth,t.renderHeight)}}],r&&j3(n.prototype,r),i&&j3(n,i),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,i}(dY(Xb));function V3(t){return V3="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},V3(t)}function Q3(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,W3(r.key),r)}}function W3(t){var e=function(t,e){if("object"!=V3(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=V3(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==V3(e)?e:e+""}function Y3(t,e,n){return e=X3(e),function(t,e){if(e&&("object"===V3(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,K3()?Reflect.construct(e,n||[],X3(t).constructor):e.apply(t,n))}function K3(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(K3=function(){return!!t})()}function X3(t){return X3=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},X3(t)}function $3(t,e){return $3=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},$3(t,e)}var Z3=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),Y3(this,e,arguments)}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&$3(t,e)}(e,t),n=e,r=[{key:"init",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this._papers=t.papers,this._config=t.config,this._count=1024,this._passSize=Math.ceil(Math.sqrt(this._count)),this._mouse=new Ky,this._paintInfosIntersection=null,this._mousePosition=new Ay,this._previousMousePosition=new Ay,this._velocity=new Ay,this._previousMouseVelocity=new Ay,this._acceleration=new Ay,this.onMousemoveDelay=(0,HC.debounce)(this.onMousemoveDelay,20,!1),this._particles=this._createParticules(),this._lastIndex=-1,this._particleQueueCount=0,this._particleQueueDelay=.02,this._passes=this._createPasses(),this._debug=this._createDebug()}},{key:"setPaintInfosIntersection",value:function(t){this._paintInfosIntersection=t}},{key:"_createParticules",value:function(){var t=new H3({count:this._count,papers:this._papers});return this.add(t),t}},{key:"_createPasses",value:function(){return{positionPass:new N3({size:this._passSize})}}},{key:"update",value:function(t){var e,n,r,i=t.time,o=t.delta;this._time=i,this._velocity.subVectors(this._previousMousePosition,this._mousePosition),this._velocity.multiplyScalar(60*o),this._previousMousePosition.copy(this._mousePosition),this._acceleration.subVectors(this._previousMouseVelocity,this._velocity),this._acceleration.multiplyScalar(60*o),this._previousMouseVelocity.copy(this._velocity),this._particles._update(i),this._paintInfosIntersection&&this._mouseMoving&&(this._mouse=this._paintInfosIntersection.point,(null===(r=this._paintInfosIntersection.uv2)||void 0===r?void 0:r.x)>0&&(this._particleQueueCount+=o,this._particleQueueCount>=this._particleQueueDelay&&(this._particleQueueCount=0,this._addParticle(this._mouse,i,o))));var a=this.$renderer.instance.autoClear;this.$renderer.instance.autoClear=!1,null===(e=this._passes)||void 0===e||null===(e=e.positionPass)||void 0===e||e.update(),this.$renderer.instance.autoClear=a,null!==(n=this._passes)&&void 0!==n&&n.positionPass&&this._particles.setPassTexture(this._passes.positionPass.outputTexture)}},{key:"onMousemove",value:function(t){this._mouseMoving=!0,this.onMousemoveDelay(),this._mousePosition=t.ndc}},{key:"onMousemoveDelay",value:function(){this._mouseMoving=!1}},{key:"_addParticle",value:function(t,e,n){var r=this;this._lastIndex++,this._lastIndex>this._count-1&&(this._lastIndex=0),this._particles._updateInstanceMatrices(this._lastIndex,t,this._time,this._velocity.angle(),4*this._velocity.length()),this._passes.positionPass._uniforms.uCurrentIndex.value=this._lastIndex,this._passes.positionPass._uniforms.uVelocity.value=this._velocity.length(),this._passes.positionPass._uniforms.uAngle.value=this._velocity.angle(),this._passes.positionPass._uniforms.uDelta.value=n,this._passes.positionPass._uniforms.uTime.value=e,requestAnimationFrame((function(){r._passes.positionPass._uniforms.uCurrentIndex.value=-1}))}},{key:"_createDebug",value:function(){if(lK){var t=lK.addFolder({title:"Leaves",tab:this._config.name}),e=this._particles._material.uniforms,n=this._passes.positionPass._uniforms;t.addInput(new p1(e.uTintColor,"value"),"value",{label:"Tint Color"}),t.addInput(this,"_particleQueueDelay",{label:"Reveal delay",min:0,max:.2,step:.01}),t.addInput(e.uLifeTime,"value",{label:"Life Time",min:0,max:120,step:.01}),t.addInput(e.uAmplitude,"value",{label:"Amplitude",min:0,max:6,step:.01}),t.addInput(e.uDuration,"value",{label:"Duration",min:1,max:1.5,step:.01}),t.addInput(e.uParticleSize,"value",{label:"Size",min:.5,max:3,step:.01}),t.addInput(e.uSpeedReveal,"value",{label:"Reveal Speed",min:0,max:100,step:.01}),t.addInput(n.uMaxForce,"value",{label:"Max Force",min:0,max:.015,step:1e-4}),t.addInput(e.uRotationSpeed,"value",{label:"Rotation Speed",min:0,max:10,step:.01})}}}],r&&Q3(n.prototype,r),i&&Q3(n,i),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,i}(dY(Xb));function J3(t){return J3="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},J3(t)}function t4(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,e4(r.key),r)}}function e4(t){var e=function(t,e){if("object"!=J3(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=J3(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==J3(e)?e:e+""}function n4(t,e,n){return e=i4(e),function(t,e){if(e&&("object"===J3(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,r4()?Reflect.construct(e,n||[],i4(t).constructor):e.apply(t,n))}function r4(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(r4=function(){return!!t})()}function i4(t){return i4=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},i4(t)}function o4(t,e){return o4=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},o4(t,e)}var a4=300,s4=new Ky,l4=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),n4(this,e,arguments)}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&o4(t,e)}(e,t),n=e,r=[{key:"init",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this._config=t.config,this._guiObj={ambientColor:"#adadad",dirColor:"#8d7f68",dirX:-1.16,dirY:.41,dirZ:-.34,offsetX:0,offsetY:0,offsetZ:90.3,shadowRadius:1.5,shadowBlurSamples:1,pointX:-27,pointY:55,pointZ:0,pointInt:1.45,pointDist:0,pointColor:"#383838"},this._ambientLight=this._createAmbientLight(),this._directionalLight=this._createDirectionalLight(),this._directionalLightHelper=this._createDirectionalLightHelper(),this._debug=this._createDebug()}},{key:"direction",get:function(){return s4.subVectors(this._directionalLight.target.position,this._directionalLight.position).normalize()}},{key:"_createAmbientLight",value:function(){var t=new SS(new By(this._guiObj.ambientColor));return this.add(t),t}},{key:"_createDirectionalLight",value:function(){var t=new xS(new By(this._guiObj.dirColor),1);return t.position.set(this._guiObj.dirX*a4,this._guiObj.dirY*a4,this._guiObj.dirZ*a4),t.target.position.set(this._guiObj.offsetX,this._guiObj.offsetY,this._guiObj.offsetZ),this.add(t),this.add(t.target),t}},{key:"_createDirectionalLightHelper",value:function(){var t=new $S(this._directionalLight,5);return t.color="red",t.update(),t.visible=!1,this.add(t),t}},{key:"update",value:function(t){t.delta,t.time}},{key:"_createDebug",value:function(){var t=this;if(lK){var e=lK.addFolder({title:"Ligths",tab:this._config.name}),n=function(){var e;t._ambientLight&&(t._ambientLight.color=new By(t._guiObj.ambientColor)),t._directionalLight&&(t._directionalLight.color=new By(t._guiObj.dirColor),t._directionalLight.shadow.radius=t._guiObj.shadowRadius,t._directionalLight.shadow.blurSamples=t._guiObj.shadowBlurSamples,t._directionalLight.position.set(t._guiObj.dirX*a4+t._guiObj.offsetX,t._guiObj.dirY*a4+t._guiObj.offsetY,t._guiObj.dirZ*a4+t._guiObj.offsetZ),t._directionalLight.target.position.set(t._guiObj.offsetX,t._guiObj.offsetY,t._guiObj.offsetZ)),null===(e=t.helperDirectionnal)||void 0===e||e.update()};return e.addInput(this._guiObj,"ambientColor").on("change",n),e.addInput(this._guiObj,"dirColor").on("change",n),e.addInput(this._guiObj,"dirX",{min:-3.14,max:3.14}).on("change",n),e.addInput(this._guiObj,"dirY",{min:-3.14,max:3.14}).on("change",n),e.addInput(this._guiObj,"dirZ",{min:-3.14,max:3.14}).on("change",n),e.addInput(this._guiObj,"offsetX",{step:.1}).on("change",n),e.addInput(this._guiObj,"offsetY",{step:.1}).on("change",n),e.addInput(this._guiObj,"offsetZ",{step:.1}).on("change",n),e.addInput(this._guiObj,"shadowRadius",{min:0,max:100}).on("change",n),e}}}],r&&t4(n.prototype,r),i&&t4(n,i),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,i}(dY(Xb)),u4=n(207),c4=n.n(u4);function d4(t){return d4="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},d4(t)}function f4(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,h4(r.key),r)}}function h4(t){var e=function(t,e){if("object"!=d4(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=d4(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==d4(e)?e:e+""}var p4=["x","e","a","o","n","s","r","c","u","m","v","w","z"],m4=["m","w"],g4=["H","I","N","E","F","K","L","T","U","V","W","X","Y","Z"],v4="\t".charCodeAt(0),y4=" ".charCodeAt(0),b4=function(){return t=function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.glyphs=[],this._measure=this.computeMetrics.bind(this),this.update(e)},e=[{key:"width",get:function(){return this._width}},{key:"height",get:function(){return this._height}},{key:"descender",get:function(){return this._descender}},{key:"ascender",get:function(){return this._ascender}},{key:"xHeight",get:function(){return this._xHeight}},{key:"baseline",get:function(){return this._baseline}},{key:"capHeight",get:function(){return this._capHeight}},{key:"lineHeight",get:function(){return this._lineHeight}},{key:"linesTotal",get:function(){return this._linesTotal}},{key:"lettersTotal",get:function(){return this._lettersTotal}},{key:"wordsTotal",get:function(){return this._wordsTotal}},{key:"update",value:function(t){var e=this;if(t=Object.assign({measure:this._measure},t),this._options=t,this._options.tabSize=E4(this._options.tabSize,4),!t.font)throw new Error("must provide a valid bitmap font");var n=this.glyphs,r=t.text||"",i=t.font;this._setupSpaceGlyphs(i);var o=c4().lines(r,t),a=t.width||0,s=r.split(" ").filter((function(t){return"\n"!==t})).length,l=r.split("").filter((function(t){return"\n"!==t&&" "!==t})).length;n.length=0;var u=o.reduce((function(t,e){return Math.max(t,e.width,a)}),0),c=0,d=0,f=E4(t.lineHeight,i.common.lineHeight),h=i.common.base,p=f-h,m=t.letterSpacing||0,g=f*o.length-p,v=function(t){return"center"===t?1:"right"===t?2:0}(this._options.align);d-=g,this._width=u,this._height=g,this._descender=f-h,this._baseline=h,this._xHeight=function(t){for(var e=0;e<p4.length;e++){var n=p4[e].charCodeAt(0),r=A4(t.chars,n);if(r>=0)return t.chars[r].height}return 0}(i),this._capHeight=function(t){for(var e=0;e<g4.length;e++){var n=g4[e].charCodeAt(0),r=A4(t.chars,n);if(r>=0)return t.chars[r].height}return 0}(i),this._lineHeight=f,this._ascender=f-p-this._xHeight;var y=0,b=0;o.forEach((function(t,a){for(var h,p=t.start,g=t.end,_=t.width,w=r.slice(p,g).split(" ").filter((function(t){return""!==t})).length,A=r.slice(p,g).split(" ").join("").length,E=0,x=0,S=p;S<g;S++){var T=r.charCodeAt(S),C=e.getGlyph(i,T);if(C){var I;h&&(c+=w4(i,h.id,C.id));var k=c;1===v?k+=(u-_)/2:2===v&&(k+=u-_),n.push({position:[k,d],data:C,index:S,linesTotal:o.length,lineIndex:a,lineLettersTotal:A,lineLetterIndex:E,lineWordsTotal:w,lineWordIndex:x,wordsTotal:s,wordIndex:y,lettersTotal:l,letterIndex:b}),C.id===y4&&(null===(I=h)||void 0===I?void 0:I.id)!==y4&&(x++,y++),C.id!==y4&&(E++,b++),c+=C.xadvance+m,h=C}}d+=f,c=0})),this._lettersTotal=l,this._wordsTotal=s,this._linesTotal=o.length}},{key:"getGlyph",value:function(t,e){var n=_4(t,e);return n||(e===v4?this._fallbackTabGlyph:e===y4?this._fallbackSpaceGlyph:null)}},{key:"computeMetrics",value:function(t,e,n,r){var i,o,a=this._options.letterSpacing||0,s=this._options.font,l=0,u=0,c=0;if(!s.chars||0===s.chars.length)return{start:e,end:e,width:0};n=Math.min(t.length,n);for(var d=e;d<n;d++){var f=t.charCodeAt(d);if(i=this.getGlyph(s,f)){i.char=t[d],i.xoffset;var h=(l+=o?w4(s,o.id,i.id):0)+i.xadvance+a,p=l+i.width;if(p>=r||h>=r)break;l=h,u=p,o=i}c++}return o&&(u+=o.xoffset),{start:e,end:e+c,width:u}}},{key:"_setupSpaceGlyphs",value:function(t){if(this._fallbackSpaceGlyph=null,this._fallbackTabGlyph=null,t.chars&&0!==t.chars.length){var e=_4(t,y4)||function(t){for(var e=0;e<m4.length;e++){var n=m4[e].charCodeAt(0),r=A4(t.chars,n);if(r>=0)return t.chars[r]}return 0}(t)||t.chars[0],n=this._options.tabSize*e.xadvance;this._fallbackSpaceGlyph=e;var r=Object.assign({},e);this._fallbackTabGlyph=Object.assign(r,{x:0,y:0,xadvance:n,id:v4,xoffset:0,yoffset:0,width:0,height:0})}}}],e&&f4(t.prototype,e),n&&f4(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,n}();function _4(t,e){if(!t.chars||0===t.chars.length)return null;var n=A4(t.chars,e);return n>=0?t.chars[n]:null}function w4(t,e,n){if(!t.kernings||0===t.kernings.length)return 0;for(var r=t.kernings,i=0;i<r.length;i++){var o=r[i];if(o.first===e&&o.second===n)return o.amount}return 0}function A4(t,e,n){for(var r=n=n||0;r<t.length;r++)if(t[r].id===e)return r;return-1}function E4(t,e){return"number"==typeof t?t:"number"==typeof e?e:0}var x4=2,S4={min:[0,0],max:[0,0]};function T4(t){var e=t.length/x4;S4.min[0]=t[0],S4.min[1]=t[1],S4.max[0]=t[0],S4.max[1]=t[1];for(var n=0;n<e;n++){var r=t[n*x4+0],i=t[n*x4+1];S4.min[0]=Math.min(r,S4.min[0]),S4.min[1]=Math.min(i,S4.min[1]),S4.max[0]=Math.max(r,S4.max[0]),S4.max[1]=Math.max(i,S4.max[1])}}const C4={computeBox:function(t,e){return T4(t),e.min.set(S4.min[0],S4.min[1],0),e.max.set(S4.max[0],S4.max[1],0),e},computeSphere:function(t,e){T4(t);var n=S4.min[0],r=S4.min[1],i=S4.max[0]-n,o=S4.max[1]-r,a=Math.sqrt(i*i+o*o);e.center.set(n+i/2,r+o/2,0),e.radius=a/2}};function I4(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,i,o,a,s=[],l=!0,u=!1;try{if(o=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=o.call(n)).done)&&(s.push(r.value),s.length!==e);l=!0);}catch(t){u=!0,i=t}finally{try{if(!l&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(u)throw i}}return s}}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return k4(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return k4(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function k4(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}const P4={pages:function(t){var e=new Float32Array(4*t.length*1),n=0;return t.forEach((function(t){var r=t.data.page||0;e[n++]=r,e[n++]=r,e[n++]=r,e[n++]=r})),e},attributes:function(t,e,n,r,i){var o=new Float32Array(4*t.length*2),a=new Float32Array(4*t.length*2),s=new Float32Array(4*t.length*3),l=new Float32Array(4*t.length*2),u=new Float32Array(4*t.length*4),c=0,d=0,f=0,h=0,p=0;return t.forEach((function(t){var i=t.data,m=function(t,e){var r=t.x+t.width,i=t.y+t.height,o=t.x/e.width,a=t.y/e.height,s=r/e.width,l=i/e.height;return n&&(a=(e.height-t.y)/e.height,l=(e.height-i)/e.height),[o,s,l,a]}(i,e),g=I4(m,4),v=g[0],y=g[1],b=g[2],_=g[3];o[c++]=v,o[c++]=_,o[c++]=v,o[c++]=b,o[c++]=y,o[c++]=b,o[c++]=y,o[c++]=_,u[p++]=v,u[p++]=b,u[p++]=y,u[p++]=_,u[p++]=v,u[p++]=b,u[p++]=y,u[p++]=_,u[p++]=v,u[p++]=b,u[p++]=y,u[p++]=_,u[p++]=v,u[p++]=b,u[p++]=y,u[p++]=_,a[h++]=t.position[0]/r.width,a[h++]=(t.position[1]+r.height)/r.height,a[h++]=t.position[0]/r.width,a[h++]=(t.position[1]+r.height+i.height)/r.height,a[h++]=(t.position[0]+i.width)/r.width,a[h++]=(t.position[1]+r.height+i.height)/r.height,a[h++]=(t.position[0]+i.width)/r.width,a[h++]=(t.position[1]+r.height)/r.height;var w=t.position[0]+i.xoffset,A=t.position[1]+i.yoffset,E=i.width,x=i.height;s[d++]=w,s[d++]=A,s[d++]=0,s[d++]=w,s[d++]=A+x,s[d++]=0,s[d++]=w+E,s[d++]=A+x,s[d++]=0,s[d++]=w+E,s[d++]=A,s[d++]=0,l[f++]=w+E/2,l[f++]=A+x/2,l[f++]=w+E/2,l[f++]=A+x/2,l[f++]=w+E/2,l[f++]=A+x/2,l[f++]=w+E/2,l[f++]=A+x/2})),{uvs:o,layoutUvs:a,positions:s,centers:l,bounds:u}},infos:function(t,e){for(var n=new Float32Array(4*t.length),r=new Float32Array(4*t.length),i=new Float32Array(4*t.length),o=new Float32Array(4*t.length),a=new Float32Array(4*t.length),s=new Float32Array(4*t.length),l=new Float32Array(4*t.length),u=new Float32Array(4*t.length),c=new Float32Array(4*t.length),d=new Float32Array(4*t.length),f=0,h=0,p=0,m=0,g=0,v=0,y=0,b=0,_=0,w=0,A=0;A<t.length;A++){var E=t[A];n[f++]=E.linesTotal,n[f++]=E.linesTotal,n[f++]=E.linesTotal,n[f++]=E.linesTotal,r[h++]=E.lineIndex,r[h++]=E.lineIndex,r[h++]=E.lineIndex,r[h++]=E.lineIndex,i[p++]=E.lineLettersTotal,i[p++]=E.lineLettersTotal,i[p++]=E.lineLettersTotal,i[p++]=E.lineLettersTotal,o[m++]=E.lineLetterIndex,o[m++]=E.lineLetterIndex,o[m++]=E.lineLetterIndex,o[m++]=E.lineLetterIndex,a[g++]=E.lineWordsTotal,a[g++]=E.lineWordsTotal,a[g++]=E.lineWordsTotal,a[g++]=E.lineWordsTotal,s[v++]=E.lineWordIndex,s[v++]=E.lineWordIndex,s[v++]=E.lineWordIndex,s[v++]=E.lineWordIndex,l[y++]=E.wordsTotal,l[y++]=E.wordsTotal,l[y++]=E.wordsTotal,l[y++]=E.wordsTotal,u[b++]=E.wordIndex,u[b++]=E.wordIndex,u[b++]=E.wordIndex,u[b++]=E.wordIndex,c[_++]=E.lettersTotal,c[_++]=E.lettersTotal,c[_++]=E.lettersTotal,c[_++]=E.lettersTotal,d[w++]=E.letterIndex,d[w++]=E.letterIndex,d[w++]=E.letterIndex,d[w++]=E.letterIndex}return{linesTotal:n,lineIndex:r,lineLettersTotal:i,lineLetterIndex:o,lineWordsTotal:a,lineWordIndex:s,wordsTotal:l,wordIndex:u,lettersTotal:c,letterIndex:d}}};var R4=n(7554),O4=n.n(R4);function M4(t){return M4="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},M4(t)}function L4(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,D4(r.key),r)}}function D4(t){var e=function(t,e){if("object"!=M4(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=M4(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==M4(e)?e:e+""}function N4(t,e,n){return e=j4(e),function(t,e){if(e&&("object"===M4(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,B4()?Reflect.construct(e,n||[],j4(t).constructor):e.apply(t,n))}function B4(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(B4=function(){return!!t})()}function j4(t){return j4=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},j4(t)}function z4(t,e){return z4=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},z4(t,e)}var F4=function(t){function e(t){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),"string"==typeof t&&(t={text:t}),(n=N4(this,e))._options=Object.assign({},t),n._layout=null,n._visibleGlyphs=[],n.update(n._options),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&z4(t,e)}(e,t),n=e,r=[{key:"layout",get:function(){return this._layout}},{key:"visibleGlyphs",get:function(){return this._visibleGlyphs}},{key:"update",value:function(t){if(t=this._validateOptions(t)){this._layout=function(t){return new b4(t)}(t);var e=!1!==t.flipY,n=t.font,r=(n.common.scaleW,n.common.scaleH,this._layout.glyphs.filter((function(t){var e=t.data;return e.width*e.height>0})));this._visibleGlyphs=r;var i=P4.attributes(r,{width:n.common.scaleW,height:n.common.scaleH},e,this._layout),o=P4.infos(r,this._layout),a=O4()([],{clockwise:!0,type:"uint16",count:r.length});if(this.setIndex(a),this.setAttribute("position",new h_(i.positions,3)),this.setAttribute("center",new h_(i.centers,2)),this.setAttribute("uv",new h_(i.uvs,2)),this.setAttribute("layoutUv",new h_(i.layoutUvs,2)),this.setAttribute("bounds",new h_(i.bounds,4)),this.setAttribute("lineIndex",new h_(o.lineIndex,1)),this.setAttribute("lineLettersTotal",new h_(o.lineLettersTotal,1)),this.setAttribute("lineLetterIndex",new h_(o.lineLetterIndex,1)),this.setAttribute("lineWordsTotal",new h_(o.lineWordsTotal,1)),this.setAttribute("lineWordIndex",new h_(o.lineWordIndex,1)),this.setAttribute("wordIndex",new h_(o.wordIndex,1)),this.setAttribute("letterIndex",new h_(o.letterIndex,1)),!t.multipage&&"page"in this.attributes)this.deleteAttribute("page");else if(t.multipage){var s=P4.pages(r);this.setAttribute("page",new h_(s,1))}}}},{key:"computeBoundingSphere",value:function(){null===this.boundingSphere&&(this.boundingSphere=new gb);var t=this.attributes.position.array,e=this.attributes.position.itemSize;if(!t||!e||t.length<2)return this.boundingSphere.radius=0,void this.boundingSphere.center.set(0,0,0);C4.computeSphere(t,this.boundingSphere),isNaN(this.boundingSphere.radius)&&console.error('BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.')}},{key:"computeBoundingBox",value:function(){null===this.boundingBox&&(this.boundingBox=new Zy);var t=this.boundingBox,e=this.attributes.position.array,n=this.attributes.position.itemSize;if(e&&n&&!(e.length<2))return C4.computeBox(e,t);t.makeEmpty()}},{key:"_validateOptions",value:function(t){if("string"==typeof t&&(t={text:t}),!(t=Object.assign({},this._options,t)).font)throw new TypeError("must specify a { font } in options");return t}}],r&&L4(n.prototype,r),i&&L4(n,i),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,i}(x_);function U4(t){return U4="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},U4(t)}function q4(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,G4(r.key),r)}}function G4(t){var e=function(t,e){if("object"!=U4(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=U4(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==U4(e)?e:e+""}function H4(t,e,n){return e=Q4(e),function(t,e){if(e&&("object"===U4(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,V4()?Reflect.construct(e,n||[],Q4(t).constructor):e.apply(t,n))}function V4(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(V4=function(){return!!t})()}function Q4(t){return Q4=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Q4(t)}function W4(t,e){return W4=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},W4(t,e)}var Y4=1/1600,K4=new c_({side:Gm,color:"red",transparent:!0,opacity:0,depthWrite:!1}),X4=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),H4(this,e,arguments)}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&W4(t,e)}(e,t),n=e,r=[{key:"init",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.index,n=t.text,r=t.sceneIndex;this._index=e||0,this._text=n,this._sceneIndex=r,this._font=AK.get("canela-font"),this._fogNoise=AK.get("noise/rgb-fractal"),this._fogNoise.wrapS=Dg,this._fogNoise.wrapT=Dg,this._uTime={value:0},this._uAlpha={value:0},this._uDotAlpha={value:1},this._uResolution={value:new Ay},this._uFogState={value:new Ay},this._uAlphaOutputRange={value:new Ay(b1.alpha.outputRange.min,b1.alpha.outputRange.max)},this._uAlphaInputRange={value:new Ay(b1.alpha.inputRange.min,b1.alpha.inputRange.max)},this._mesh=this._createMesh(),this._lineMesh=this._createLineMesh(),this._dotMesh=this._createDotMesh(),this._raycastProxy=this._createRaycastProxy(),this._isRendered=!1;var i=document.querySelector('[data-component="Cursor"]');this.cursorComponent=this.$watercolorExperience.components.get(i)}},{key:"isRendered",get:function(){return this._isRendered}},{key:"text",get:function(){return this._text}},{key:"mesh",get:function(){return this._mesh}},{key:"raycastProxy",get:function(){return this._raycastProxy}},{key:"isClickable",get:function(){return this._uAlpha.value>.8}},{key:"sceneIndex",get:function(){return this._sceneIndex}},{key:"show",value:function(){return ti.to(this._uAlpha,{value:1,duration:2,ease:"sine.inOut",overwrite:!0})}},{key:"hide",value:function(){return ti.to(this._uAlpha,{value:0,duration:.8,ease:"sine.inOut",overwrite:!0})}},{key:"_createMesh",value:function(){var t=this,e=new F4({font:this._font,text:this._text,align:"center"});e.translate(-e.layout.width/2,0,0),e.scale(-1,-1,1),e.scale(Y4,Y4,Y4);var n=e.layout.width/e.layout.height,r=new V_({uniforms:{uTime:this._uTime,uResolution:this._uResolution,uFogState:this._uFogState,uAlpha:this._uAlpha,map:{value:AK.get("canela-atlas")},uNoise:{value:this._fogNoise},uColor:{value:new By(b1.color)},uLayoutRatio:{value:n},uBlurInputRange:{value:new Ay(b1.blur.inputRange.min,b1.blur.inputRange.max)},uBlurOutputRange:{value:new Ay(b1.blur.outputRange.min,b1.blur.outputRange.max)},uNoiseScale:{value:b1.noiseScale},uAlphaInputRange:this._uAlphaInputRange,uAlphaOutputRange:this._uAlphaOutputRange,uMouseNdc:{value:new Ay(-1e3,-1e3)},uMouseNoiseOutputRange:{value:new Ay(b1.mouse.noise.outputRange.min,b1.mouse.noise.outputRange.max)},uMouseNoiseInputRange:{value:new Ay(b1.mouse.noise.inputRange.min,b1.mouse.noise.inputRange.max)},uMouseGlobalOutputRange:{value:new Ay(b1.mouse.global.outputRange.min,b1.mouse.global.outputRange.max)},uMouseGlobalInputRange:{value:new Ay(b1.mouse.global.inputRange.min,b1.mouse.global.inputRange.max)}},fragmentShader:"#define GLSLIFY 1\nvarying vec2 vUv;\nvarying vec2 vLayoutUv;\nvarying vec2 vNdcCenter;\nvarying vec2 vNdcVertex;\n\nuniform float uTime;\nuniform vec2 uResolution;\nvarying vec3 vWorldPosition;\nvarying float vFogDepth;\n\nuniform sampler2D map;\nuniform sampler2D uNoise;\nuniform vec3 uColor;\nuniform float uAlpha;\nuniform float uLayoutRatio;\n\nuniform vec2 uAlphaOutputRange;\nuniform vec2 uAlphaInputRange; // 1.3, 0.1\n\nuniform vec2 uMouseNoiseOutputRange; // 0.9, 1.3\nuniform vec2 uMouseNoiseInputRange; // 0.0, 0.08\n\nuniform vec2 uMouseGlobalOutputRange; // 0.6, 1.\nuniform vec2 uMouseGlobalInputRange; // 0.0, 0.8\n\nuniform vec2 uBlurOutputRange;\nuniform vec2 uBlurInputRange; // 1.3, 0.3\nuniform float uNoiseScale;\n\nuniform vec2 uMouseNdc;\nuniform vec2 uFogState;\n\nfloat cremap(float value, float start1, float stop1, float start2, float stop2) {\n  float r = start2 + (stop2 - start2) * ((value - start1) / (stop1 - start1));\n  return clamp(r, min(start2, stop2), max(start2, stop2));\n}\n\n#ifndef PI\n#define PI 3.141592653589793\n#endif\n\nfloat sineInOut(float t) {\n  return -0.5 * (cos(PI * t) - 1.0);\n}\n\nfloat remap(float value, float start1, float stop1, float start2, float stop2) {\n  return start2 + (stop2 - start2) * ((value - start1) / (stop1 - start1));\n}\n\nfloat quarticInOut(float t) {\n  return t < 0.5\n    ? +8.0 * pow(t, 4.0)\n    : -8.0 * pow(t - 1.0, 4.0) + 1.0;\n}\n\nfloat sdCircle(vec2 p, float r) {\n  return length(p) - r;\n}\n\nvec3 getFogColor(float time, float depth, vec2 uv, vec2 resolution, vec3 worldPosition, vec3 color, sampler2D noiseTexture, vec3 fogColor, float noiseSpeed, vec2 noiseScale, float noiseStrength, vec2 fogAmountRangeY, vec2 fogDensityRangeY, vec2 fogAmountRangeZ, vec2 fogDensityRangeZ, vec3 mainSdf, vec2 sdfRemap) {\n  worldPosition.z -= time * noiseSpeed * .1;\n\n  vec2 noiseUv = worldPosition.yz;\n  noiseUv *= 0.05 * noiseScale;\n\n  float noise = texture2D(noiseTexture, noiseUv).r;\n  noise = quarticInOut(noise);\n  if(worldPosition.y < 0.01)\n    noise = 1.;\n  if(worldPosition.x > 900.)\n    noise = 1.;\n\n  float screenRatio = resolution.x / resolution.y;\n  vec2 adjustedUvs = ((uv - 0.5) / vec2(1., screenRatio)) + 0.5;\n  adjustedUvs.x += step(screenRatio, 1.) * -.5; // on portrait only\n  float sdf = sdCircle(adjustedUvs - mainSdf.xy, mainSdf.z);\n  sdf = smoothstep(sdfRemap.x, sdfRemap.y, sdf);\n\n  float noiseSdf = sdf * remap(noise, 0., 1., 1. - noiseStrength, 1.);\n\n  float fogAmountZ = mix(fogAmountRangeZ.x, fogAmountRangeZ.y, noiseSdf);\n  // float fogDensityZ = mix(fogDensityRangeZ.x, fogDensityRangeZ.y, noiseSdf) / 1000.;\n  float fogDensityZ = mix(fogDensityRangeZ.x, fogDensityRangeZ.y, noiseSdf);\n  float fogFactorZ = 1.0 - exp(-fogDensityZ * fogDensityZ * depth * depth);\n\n  float fogPosY = worldPosition.y;\n  float fogDensityY = mix(fogDensityRangeY.y, fogDensityRangeY.x, noiseSdf);\n  float fogAmountY = mix(fogAmountRangeY.x, fogAmountRangeY.y, noiseSdf);\n  float fogFactorY = exp(-fogDensityY * fogDensityY * fogPosY * fogPosY);\n\n  float fogAmount = clamp(fogFactorZ * fogAmountZ, 0.0, 1.0);\n  fogAmount = max(fogAmount, clamp(fogFactorY * fogAmountY, 0.0, 1.0));\n  fogAmount = clamp(fogAmount + sdf * 0.2, 0., 1.);\n\n  return mix(color, fogColor, fogAmount);\n}\n\nstruct FogSettings {\n    float noiseSpeed;\n    vec2 noiseScale;\n    float noiseStrength;\n    vec2 fogAmountRangeY;\n    vec2 fogDensityRangeY;\n    vec2 fogAmountRangeZ;\n    vec2 fogDensityRangeZ;\n    vec3 mainSdf;\n    vec2 sdfRemap;\n    vec3 fogColor;\n};\n\nFogSettings mixFogSettings(FogSettings from, FogSettings to, float ratio) {\n    FogSettings settings;\n    settings.noiseSpeed = mix(from.noiseSpeed, to.noiseSpeed, ratio);\n    settings.noiseScale = mix(from.noiseScale, to.noiseScale, ratio);\n    settings.noiseStrength = mix(from.noiseStrength, to.noiseStrength, ratio);\n    settings.fogAmountRangeY = mix(from.fogAmountRangeY, to.fogAmountRangeY, ratio);\n    settings.fogDensityRangeY = mix(from.fogDensityRangeY, to.fogDensityRangeY, ratio);\n    settings.fogAmountRangeZ = mix(from.fogAmountRangeZ, to.fogAmountRangeZ, ratio);\n    settings.fogDensityRangeZ = mix(from.fogDensityRangeZ, to.fogDensityRangeZ, ratio);\n    settings.mainSdf = mix(from.mainSdf, to.mainSdf, ratio);\n    settings.sdfRemap = mix(from.sdfRemap, to.sdfRemap, ratio);\n    settings.fogColor = mix(from.fogColor, to.fogColor, ratio);\n    return settings;\n}\n\nFogSettings getBaseSettings() {\n    FogSettings baseSettings;\n    baseSettings.noiseSpeed = 3.;\n    baseSettings.noiseScale = vec2(0.6, 0.2);\n    baseSettings.noiseStrength = 0.88;\n    baseSettings.fogAmountRangeY = vec2(0.1, 1.39);\n    baseSettings.fogDensityRangeY = vec2(0.01, 0.81);\n    baseSettings.fogAmountRangeZ = vec2(0.01, 0.99);\n    baseSettings.fogDensityRangeZ = vec2(20.0, 277.42);\n    baseSettings.mainSdf = vec3(0.79, 0.63, 0.85);\n    baseSettings.sdfRemap = vec2(-0.48, -0.06);\n    baseSettings.fogColor = vec3(0.796, 0.796, 0.761);\n    return baseSettings;\n}\n\nFogSettings getOccultedSettings(FogSettings baseSettings) {\n    FogSettings occultedSettings;\n    occultedSettings.noiseSpeed = baseSettings.noiseSpeed;\n    occultedSettings.noiseScale = baseSettings.noiseScale;\n    occultedSettings.noiseStrength = baseSettings.noiseStrength;\n    occultedSettings.fogAmountRangeY = vec2(0.65, 1.16);\n    occultedSettings.fogDensityRangeY = vec2(0.65, 0.81);\n    occultedSettings.fogAmountRangeZ = baseSettings.fogAmountRangeZ;\n    occultedSettings.fogDensityRangeZ = vec2(20.0, 161.29);\n    occultedSettings.mainSdf = vec3(0.64, 0.62, 0.84);\n    occultedSettings.sdfRemap = vec2(-0.84, -0.45);\n    occultedSettings.fogColor = vec3(0.796, 0.796, 0.761);\n    return occultedSettings;\n}\n\nFogSettings getOpaqueSettings(FogSettings baseSettings) {\n    FogSettings opaqueSettings;\n    opaqueSettings.noiseSpeed = baseSettings.noiseSpeed;\n    opaqueSettings.noiseScale = baseSettings.noiseScale;\n    opaqueSettings.noiseStrength = baseSettings.noiseStrength;\n    opaqueSettings.fogAmountRangeY = vec2(0.65, 1.16);\n    opaqueSettings.fogDensityRangeY = vec2(0.65, 0.81);\n    opaqueSettings.fogAmountRangeZ = vec2(1, 1.3);\n    opaqueSettings.fogDensityRangeZ = vec2(100, 300);\n    opaqueSettings.mainSdf = vec3(0.5, 0.5, 0);\n    opaqueSettings.sdfRemap = baseSettings.sdfRemap;\n    opaqueSettings.fogColor = vec3(0.714, 0.714, 0.714);\n    return opaqueSettings;\n}\n\nvec3 getFogColorWithRatio(float time, float depth, vec2 uv, vec2 resolution, vec3 worldPosition, vec3 color, sampler2D noiseTexture, float opaqueRatio, float occultedRatio) {\n\n    FogSettings baseSettings = getBaseSettings();\n    FogSettings opaqueSettings = getOpaqueSettings(baseSettings);\n    FogSettings occultedSettings = getOccultedSettings(baseSettings);\n\n    FogSettings settings = baseSettings;\n    settings = mixFogSettings(settings, occultedSettings, occultedRatio);\n    settings = mixFogSettings(settings, opaqueSettings, opaqueRatio);\n\n    return getFogColor(time, depth, uv, resolution, worldPosition, color, noiseTexture, settings.fogColor, settings.noiseSpeed, settings.noiseScale, settings.noiseStrength, settings.fogAmountRangeY, settings.fogDensityRangeY, settings.fogAmountRangeZ, settings.fogDensityRangeZ, settings.mainSdf, settings.sdfRemap);\n}\n\nfloat median(float r, float g, float b) {\n    return max(min(r, g), min(max(r, g), b));\n}\n\nvec2 msdf(sampler2D tex, vec2 uv) {\n    vec3 texel = texture2D(tex, uv).rgb;\n    float sigDist = median(texel.r, texel.g, texel.b) - 0.5;\n    return vec2(clamp(sigDist / fwidth(sigDist) + 0.5, 0.0, 1.0), sigDist);\n}\n\nvoid main() {\n    vec2 noiseUvs = vLayoutUv * uNoiseScale;\n    noiseUvs.x *= uLayoutRatio;\n    vec4 noiseTexel = texture2D(uNoise, noiseUvs);\n\n    vec2 sdf = msdf(map, vUv);\n    float sharpSDF = sdf.x;\n    float dist = sdf.y;\n    float blurredSDF = cremap(dist, 1., -0.5, 1., 0.);\n\n    float ndcVisibility = abs(-vNdcCenter.x * .7 + 0.3);\n\n    float distToMouse = length(uMouseNdc - vNdcVertex);\n    float mouseGlobalAlphaFactor = cremap(distToMouse, uMouseGlobalInputRange.x, uMouseGlobalInputRange.y, uMouseGlobalOutputRange.y, uMouseGlobalOutputRange.x);\n    float mouseNoiseAlphaFactor = cremap(distToMouse, uMouseNoiseInputRange.x, uMouseNoiseInputRange.y, uMouseNoiseOutputRange.y, uMouseNoiseOutputRange.x);\n\n    vec2 alphaRange = uAlphaOutputRange;\n    alphaRange *= smoothstep(uAlphaInputRange.y, uAlphaInputRange.x, ndcVisibility);\n    alphaRange *= mouseNoiseAlphaFactor;\n    alphaRange *= uAlpha;\n\n    vec2 blurRange = uBlurOutputRange;\n    blurRange *= smoothstep(uBlurInputRange.y, uBlurInputRange.x, ndcVisibility);\n    blurRange *= uBlurInputRange.x;\n    blurRange *= mouseNoiseAlphaFactor;\n    blurRange *= uAlpha;\n\n    float blur = sineInOut(noiseTexel.r);\n    blur = cremap(blur, blurRange.x, blurRange.y, 0., 1.);\n\n    float alphaNoise = sineInOut(noiseTexel.g);\n    float alpha = uAlpha;\n    alpha *= cremap(alphaNoise, alphaRange.x, alphaRange.y, 1., 0.);\n    alpha *= mouseGlobalAlphaFactor;\n\n    vec2 screenUv = gl_FragCoord.xy / uResolution;\n\n    vec3 color = uColor;\n\n    color = getFogColorWithRatio(uTime, vFogDepth, screenUv, uResolution, vWorldPosition, color, uNoise, uFogState.x, uFogState.y);\n\n    alpha *= mix(sharpSDF, blurredSDF, blur);\n    alpha *= 1. - max(uFogState.x, uFogState.y);\n    gl_FragColor = vec4(color, alpha);\n\n}",vertexShader:"#define GLSLIFY 1\nattribute vec2 layoutUv;\n\nvarying vec2 vUv;\nvarying vec2 vLayoutUv;\nvarying vec2 vNdcCenter;\nvarying vec2 vNdcVertex;\n\nvarying vec3 vWorldPosition;\nvarying float vFogDepth;\n\nvoid main() {\n  vec4 ndcCenter = modelViewMatrix * vec4(vec3(0.), 1.0);\n  vec3 transformed = position;\n\n  ndcCenter = projectionMatrix * ndcCenter;\n\n  vec4 worldPosition = modelMatrix * vec4(transformed, 1.0);\n  vWorldPosition = worldPosition.xyz;\n\n  vec4 mvPosition = modelViewMatrix * vec4(transformed, 1.0);\n  vFogDepth = -mvPosition.z;\n\n  gl_Position = projectionMatrix * modelViewMatrix * vec4(transformed, 1.0);\n\n  vUv = uv;\n  vLayoutUv = layoutUv;\n  vNdcCenter = ndcCenter.xy / ndcCenter.w;\n  vNdcVertex = gl_Position.xy / gl_Position.w;\n}",transparent:!0,depthWrite:!1}),i=new j_(e,r);i.geometry.computeBoundingBox();var o=new Sb,a=new Ky;return i.onBeforeRender=function(e,n,r){a.set(0,0,0),o.copy(r.matrixWorldInverse).multiply(t.matrixWorld),a.applyMatrix4(o),t.scale.setScalar(b1.scale*-a.z),clearTimeout(t._afterRenderTimeout),t._isRendered||(t._isRendered=!0,t.show()),t._isRendered=!0},i.onAfterRender=function(){clearTimeout(t._afterRenderTimeout),t._afterRenderTimeout=setTimeout((function(){t._isRendered&&t.hide(),t._isRendered=!1}),50)},i.renderOrder=3,this.add(i),i}},{key:"_createLineMesh",value:function(){this._mesh.geometry.computeBoundingBox();var t=this._mesh.geometry.layout.width*Y4,e=new sw(t,.024,1,1),n=new V_({vertexShader:"#define GLSLIFY 1\nvarying vec2 vUv;\nvarying vec3 vWorldPosition;\nvarying vec2 vNdcCenter;\nvarying float vFogDepth;\n\nvoid main() {\n  vec4 ndcCenter = modelViewMatrix * vec4(vec3(0.), 1.0);\n  vec3 transformed = position;\n\n  ndcCenter = projectionMatrix * ndcCenter;\n\n  vec4 worldPosition = modelMatrix * vec4(transformed, 1.0);\n  vWorldPosition = worldPosition.xyz;\n\n  vec4 mvPosition = modelViewMatrix * vec4(transformed, 1.0);\n  vFogDepth = -mvPosition.z;\n\n  gl_Position = projectionMatrix * modelViewMatrix * vec4(transformed, 1.0);\n\n  vUv = uv;\n  vNdcCenter = ndcCenter.xy / ndcCenter.w;\n}",fragmentShader:"#define GLSLIFY 1\nvarying vec2 vUv;\nuniform float uProgress;\nuniform bool uFirstPartAnimation;\nuniform float uAlpha;\n\nuniform float uTime;\nuniform vec2 uResolution;\nuniform sampler2D tNoiseTexture;\nvarying vec3 vWorldPosition;\nvarying float vFogDepth;\nuniform vec2 uFogState;\n\nvarying vec2 vNdcCenter;\nuniform vec2 uAlphaOutputRange;\nuniform vec2 uAlphaInputRange;\n\nfloat cremap(float value, float start1, float stop1, float start2, float stop2) {\n  float r = start2 + (stop2 - start2) * ((value - start1) / (stop1 - start1));\n  return clamp(r, min(start2, stop2), max(start2, stop2));\n}\n\nfloat remap(float value, float start1, float stop1, float start2, float stop2) {\n  return start2 + (stop2 - start2) * ((value - start1) / (stop1 - start1));\n}\n\nfloat quarticInOut(float t) {\n  return t < 0.5\n    ? +8.0 * pow(t, 4.0)\n    : -8.0 * pow(t - 1.0, 4.0) + 1.0;\n}\n\nfloat sdCircle(vec2 p, float r) {\n  return length(p) - r;\n}\n\nvec3 getFogColor(float time, float depth, vec2 uv, vec2 resolution, vec3 worldPosition, vec3 color, sampler2D noiseTexture, vec3 fogColor, float noiseSpeed, vec2 noiseScale, float noiseStrength, vec2 fogAmountRangeY, vec2 fogDensityRangeY, vec2 fogAmountRangeZ, vec2 fogDensityRangeZ, vec3 mainSdf, vec2 sdfRemap) {\n  worldPosition.z -= time * noiseSpeed * .1;\n\n  vec2 noiseUv = worldPosition.yz;\n  noiseUv *= 0.05 * noiseScale;\n\n  float noise = texture2D(noiseTexture, noiseUv).r;\n  noise = quarticInOut(noise);\n  if(worldPosition.y < 0.01)\n    noise = 1.;\n  if(worldPosition.x > 900.)\n    noise = 1.;\n\n  float screenRatio = resolution.x / resolution.y;\n  vec2 adjustedUvs = ((uv - 0.5) / vec2(1., screenRatio)) + 0.5;\n  adjustedUvs.x += step(screenRatio, 1.) * -.5; // on portrait only\n  float sdf = sdCircle(adjustedUvs - mainSdf.xy, mainSdf.z);\n  sdf = smoothstep(sdfRemap.x, sdfRemap.y, sdf);\n\n  float noiseSdf = sdf * remap(noise, 0., 1., 1. - noiseStrength, 1.);\n\n  float fogAmountZ = mix(fogAmountRangeZ.x, fogAmountRangeZ.y, noiseSdf);\n  // float fogDensityZ = mix(fogDensityRangeZ.x, fogDensityRangeZ.y, noiseSdf) / 1000.;\n  float fogDensityZ = mix(fogDensityRangeZ.x, fogDensityRangeZ.y, noiseSdf);\n  float fogFactorZ = 1.0 - exp(-fogDensityZ * fogDensityZ * depth * depth);\n\n  float fogPosY = worldPosition.y;\n  float fogDensityY = mix(fogDensityRangeY.y, fogDensityRangeY.x, noiseSdf);\n  float fogAmountY = mix(fogAmountRangeY.x, fogAmountRangeY.y, noiseSdf);\n  float fogFactorY = exp(-fogDensityY * fogDensityY * fogPosY * fogPosY);\n\n  float fogAmount = clamp(fogFactorZ * fogAmountZ, 0.0, 1.0);\n  fogAmount = max(fogAmount, clamp(fogFactorY * fogAmountY, 0.0, 1.0));\n  fogAmount = clamp(fogAmount + sdf * 0.2, 0., 1.);\n\n  return mix(color, fogColor, fogAmount);\n}\n\nstruct FogSettings {\n    float noiseSpeed;\n    vec2 noiseScale;\n    float noiseStrength;\n    vec2 fogAmountRangeY;\n    vec2 fogDensityRangeY;\n    vec2 fogAmountRangeZ;\n    vec2 fogDensityRangeZ;\n    vec3 mainSdf;\n    vec2 sdfRemap;\n    vec3 fogColor;\n};\n\nFogSettings mixFogSettings(FogSettings from, FogSettings to, float ratio) {\n    FogSettings settings;\n    settings.noiseSpeed = mix(from.noiseSpeed, to.noiseSpeed, ratio);\n    settings.noiseScale = mix(from.noiseScale, to.noiseScale, ratio);\n    settings.noiseStrength = mix(from.noiseStrength, to.noiseStrength, ratio);\n    settings.fogAmountRangeY = mix(from.fogAmountRangeY, to.fogAmountRangeY, ratio);\n    settings.fogDensityRangeY = mix(from.fogDensityRangeY, to.fogDensityRangeY, ratio);\n    settings.fogAmountRangeZ = mix(from.fogAmountRangeZ, to.fogAmountRangeZ, ratio);\n    settings.fogDensityRangeZ = mix(from.fogDensityRangeZ, to.fogDensityRangeZ, ratio);\n    settings.mainSdf = mix(from.mainSdf, to.mainSdf, ratio);\n    settings.sdfRemap = mix(from.sdfRemap, to.sdfRemap, ratio);\n    settings.fogColor = mix(from.fogColor, to.fogColor, ratio);\n    return settings;\n}\n\nFogSettings getBaseSettings() {\n    FogSettings baseSettings;\n    baseSettings.noiseSpeed = 3.;\n    baseSettings.noiseScale = vec2(0.6, 0.2);\n    baseSettings.noiseStrength = 0.88;\n    baseSettings.fogAmountRangeY = vec2(0.1, 1.39);\n    baseSettings.fogDensityRangeY = vec2(0.01, 0.81);\n    baseSettings.fogAmountRangeZ = vec2(0.01, 0.99);\n    baseSettings.fogDensityRangeZ = vec2(20.0, 277.42);\n    baseSettings.mainSdf = vec3(0.79, 0.63, 0.85);\n    baseSettings.sdfRemap = vec2(-0.48, -0.06);\n    baseSettings.fogColor = vec3(0.796, 0.796, 0.761);\n    return baseSettings;\n}\n\nFogSettings getOccultedSettings(FogSettings baseSettings) {\n    FogSettings occultedSettings;\n    occultedSettings.noiseSpeed = baseSettings.noiseSpeed;\n    occultedSettings.noiseScale = baseSettings.noiseScale;\n    occultedSettings.noiseStrength = baseSettings.noiseStrength;\n    occultedSettings.fogAmountRangeY = vec2(0.65, 1.16);\n    occultedSettings.fogDensityRangeY = vec2(0.65, 0.81);\n    occultedSettings.fogAmountRangeZ = baseSettings.fogAmountRangeZ;\n    occultedSettings.fogDensityRangeZ = vec2(20.0, 161.29);\n    occultedSettings.mainSdf = vec3(0.64, 0.62, 0.84);\n    occultedSettings.sdfRemap = vec2(-0.84, -0.45);\n    occultedSettings.fogColor = vec3(0.796, 0.796, 0.761);\n    return occultedSettings;\n}\n\nFogSettings getOpaqueSettings(FogSettings baseSettings) {\n    FogSettings opaqueSettings;\n    opaqueSettings.noiseSpeed = baseSettings.noiseSpeed;\n    opaqueSettings.noiseScale = baseSettings.noiseScale;\n    opaqueSettings.noiseStrength = baseSettings.noiseStrength;\n    opaqueSettings.fogAmountRangeY = vec2(0.65, 1.16);\n    opaqueSettings.fogDensityRangeY = vec2(0.65, 0.81);\n    opaqueSettings.fogAmountRangeZ = vec2(1, 1.3);\n    opaqueSettings.fogDensityRangeZ = vec2(100, 300);\n    opaqueSettings.mainSdf = vec3(0.5, 0.5, 0);\n    opaqueSettings.sdfRemap = baseSettings.sdfRemap;\n    opaqueSettings.fogColor = vec3(0.714, 0.714, 0.714);\n    return opaqueSettings;\n}\n\nvec3 getFogColorWithRatio(float time, float depth, vec2 uv, vec2 resolution, vec3 worldPosition, vec3 color, sampler2D noiseTexture, float opaqueRatio, float occultedRatio) {\n\n    FogSettings baseSettings = getBaseSettings();\n    FogSettings opaqueSettings = getOpaqueSettings(baseSettings);\n    FogSettings occultedSettings = getOccultedSettings(baseSettings);\n\n    FogSettings settings = baseSettings;\n    settings = mixFogSettings(settings, occultedSettings, occultedRatio);\n    settings = mixFogSettings(settings, opaqueSettings, opaqueRatio);\n\n    return getFogColor(time, depth, uv, resolution, worldPosition, color, noiseTexture, settings.fogColor, settings.noiseSpeed, settings.noiseScale, settings.noiseStrength, settings.fogAmountRangeY, settings.fogDensityRangeY, settings.fogAmountRangeZ, settings.fogDensityRangeZ, settings.mainSdf, settings.sdfRemap);\n}\n\n#define PI 3.141592\n\nvoid main() {\n    float stepX;\n    vec2 uv = vUv;\n\n    if(uFirstPartAnimation) {\n        stepX = 1.0 - step(uProgress, uv.x);\n    } else {\n        stepX = step(uProgress, uv.x);\n    }\n\n    vec2 screenUv = gl_FragCoord.xy / uResolution;\n\n    float ndcVisibility = abs(-vNdcCenter.x * .7 + 0.3);\n\n    vec2 alphaRange = uAlphaOutputRange;\n    alphaRange *= smoothstep(uAlphaInputRange.y, uAlphaInputRange.x, ndcVisibility);\n    alphaRange *= uAlpha;\n\n    float alpha = uAlpha * stepX;\n    alpha *= cremap(alpha, alphaRange.x, alphaRange.y, 1., 0.);\n\n    float opacity = pow(sin(uv.y * PI), 6.);\n\n    vec3 color = vec3(1. - opacity);\n\n    color = getFogColorWithRatio(uTime, vFogDepth, screenUv, uResolution, vWorldPosition, color, tNoiseTexture, uFogState.x, uFogState.y);\n    \n    alpha *= opacity;\n    alpha *= 1. - max(uFogState.x, uFogState.y);\n\n    gl_FragColor = vec4(color, alpha);\n\n}",uniforms:{uTime:this._uTime,uResolution:this._uResolution,uFogState:this._uFogState,tNoiseTexture:{value:this._fogNoise},uAlpha:this._uAlpha,uAlphaInputRange:this._uAlphaInputRange,uAlphaOutputRange:this._uAlphaOutputRange,uFirstPartAnimation:{value:!1},uProgress:{value:1}},side:Gm,transparent:!0,depthWrite:!1}),r=new j_(e,n);return r.position.y-=.02,this.add(r),r.renderOrder=3,r}},{key:"_createDotMesh",value:function(){this._mesh.geometry.computeBoundingBox();var t=this._mesh.geometry.layout,e=t.width*Y4*.04,n=new sw(e,e,1,1),r=new V_({vertexShader:"#define GLSLIFY 1\nvarying vec2 vUv;\nvarying vec3 vWorldPosition;\nvarying vec2 vNdcCenter;\nvarying float vFogDepth;\n\nvoid main() {\n  vec4 ndcCenter = modelViewMatrix * vec4(vec3(0.), 1.0);\n  vec3 transformed = position;\n\n  ndcCenter = projectionMatrix * ndcCenter;\n\n  vec4 worldPosition = modelMatrix * vec4(transformed, 1.0);\n  vWorldPosition = worldPosition.xyz;\n\n  vec4 mvPosition = modelViewMatrix * vec4(transformed, 1.0);\n  vFogDepth = -mvPosition.z;\n\n  gl_Position = projectionMatrix * modelViewMatrix * vec4(transformed, 1.0);\n\n  vUv = uv;\n  vNdcCenter = ndcCenter.xy / ndcCenter.w;\n}",fragmentShader:"#define GLSLIFY 1\nvarying vec2 vUv;\nuniform float uAlpha;\nuniform float uDotAlpha;\n\nuniform float uTime;\nuniform vec2 uResolution;\nuniform sampler2D tNoiseTexture;\nvarying vec3 vWorldPosition;\nvarying float vFogDepth;\nuniform vec2 uFogState;\n\nvarying vec2 vNdcCenter;\nuniform vec2 uAlphaOutputRange;\nuniform vec2 uAlphaInputRange;\n\nfloat cremap(float value, float start1, float stop1, float start2, float stop2) {\n  float r = start2 + (stop2 - start2) * ((value - start1) / (stop1 - start1));\n  return clamp(r, min(start2, stop2), max(start2, stop2));\n}\n\nfloat remap(float value, float start1, float stop1, float start2, float stop2) {\n  return start2 + (stop2 - start2) * ((value - start1) / (stop1 - start1));\n}\n\nfloat quarticInOut(float t) {\n  return t < 0.5\n    ? +8.0 * pow(t, 4.0)\n    : -8.0 * pow(t - 1.0, 4.0) + 1.0;\n}\n\nfloat sdCircle(vec2 p, float r) {\n  return length(p) - r;\n}\n\nvec3 getFogColor(float time, float depth, vec2 uv, vec2 resolution, vec3 worldPosition, vec3 color, sampler2D noiseTexture, vec3 fogColor, float noiseSpeed, vec2 noiseScale, float noiseStrength, vec2 fogAmountRangeY, vec2 fogDensityRangeY, vec2 fogAmountRangeZ, vec2 fogDensityRangeZ, vec3 mainSdf, vec2 sdfRemap) {\n  worldPosition.z -= time * noiseSpeed * .1;\n\n  vec2 noiseUv = worldPosition.yz;\n  noiseUv *= 0.05 * noiseScale;\n\n  float noise = texture2D(noiseTexture, noiseUv).r;\n  noise = quarticInOut(noise);\n  if(worldPosition.y < 0.01)\n    noise = 1.;\n  if(worldPosition.x > 900.)\n    noise = 1.;\n\n  float screenRatio = resolution.x / resolution.y;\n  vec2 adjustedUvs = ((uv - 0.5) / vec2(1., screenRatio)) + 0.5;\n  adjustedUvs.x += step(screenRatio, 1.) * -.5; // on portrait only\n  float sdf = sdCircle(adjustedUvs - mainSdf.xy, mainSdf.z);\n  sdf = smoothstep(sdfRemap.x, sdfRemap.y, sdf);\n\n  float noiseSdf = sdf * remap(noise, 0., 1., 1. - noiseStrength, 1.);\n\n  float fogAmountZ = mix(fogAmountRangeZ.x, fogAmountRangeZ.y, noiseSdf);\n  // float fogDensityZ = mix(fogDensityRangeZ.x, fogDensityRangeZ.y, noiseSdf) / 1000.;\n  float fogDensityZ = mix(fogDensityRangeZ.x, fogDensityRangeZ.y, noiseSdf);\n  float fogFactorZ = 1.0 - exp(-fogDensityZ * fogDensityZ * depth * depth);\n\n  float fogPosY = worldPosition.y;\n  float fogDensityY = mix(fogDensityRangeY.y, fogDensityRangeY.x, noiseSdf);\n  float fogAmountY = mix(fogAmountRangeY.x, fogAmountRangeY.y, noiseSdf);\n  float fogFactorY = exp(-fogDensityY * fogDensityY * fogPosY * fogPosY);\n\n  float fogAmount = clamp(fogFactorZ * fogAmountZ, 0.0, 1.0);\n  fogAmount = max(fogAmount, clamp(fogFactorY * fogAmountY, 0.0, 1.0));\n  fogAmount = clamp(fogAmount + sdf * 0.2, 0., 1.);\n\n  return mix(color, fogColor, fogAmount);\n}\n\nstruct FogSettings {\n    float noiseSpeed;\n    vec2 noiseScale;\n    float noiseStrength;\n    vec2 fogAmountRangeY;\n    vec2 fogDensityRangeY;\n    vec2 fogAmountRangeZ;\n    vec2 fogDensityRangeZ;\n    vec3 mainSdf;\n    vec2 sdfRemap;\n    vec3 fogColor;\n};\n\nFogSettings mixFogSettings(FogSettings from, FogSettings to, float ratio) {\n    FogSettings settings;\n    settings.noiseSpeed = mix(from.noiseSpeed, to.noiseSpeed, ratio);\n    settings.noiseScale = mix(from.noiseScale, to.noiseScale, ratio);\n    settings.noiseStrength = mix(from.noiseStrength, to.noiseStrength, ratio);\n    settings.fogAmountRangeY = mix(from.fogAmountRangeY, to.fogAmountRangeY, ratio);\n    settings.fogDensityRangeY = mix(from.fogDensityRangeY, to.fogDensityRangeY, ratio);\n    settings.fogAmountRangeZ = mix(from.fogAmountRangeZ, to.fogAmountRangeZ, ratio);\n    settings.fogDensityRangeZ = mix(from.fogDensityRangeZ, to.fogDensityRangeZ, ratio);\n    settings.mainSdf = mix(from.mainSdf, to.mainSdf, ratio);\n    settings.sdfRemap = mix(from.sdfRemap, to.sdfRemap, ratio);\n    settings.fogColor = mix(from.fogColor, to.fogColor, ratio);\n    return settings;\n}\n\nFogSettings getBaseSettings() {\n    FogSettings baseSettings;\n    baseSettings.noiseSpeed = 3.;\n    baseSettings.noiseScale = vec2(0.6, 0.2);\n    baseSettings.noiseStrength = 0.88;\n    baseSettings.fogAmountRangeY = vec2(0.1, 1.39);\n    baseSettings.fogDensityRangeY = vec2(0.01, 0.81);\n    baseSettings.fogAmountRangeZ = vec2(0.01, 0.99);\n    baseSettings.fogDensityRangeZ = vec2(20.0, 277.42);\n    baseSettings.mainSdf = vec3(0.79, 0.63, 0.85);\n    baseSettings.sdfRemap = vec2(-0.48, -0.06);\n    baseSettings.fogColor = vec3(0.796, 0.796, 0.761);\n    return baseSettings;\n}\n\nFogSettings getOccultedSettings(FogSettings baseSettings) {\n    FogSettings occultedSettings;\n    occultedSettings.noiseSpeed = baseSettings.noiseSpeed;\n    occultedSettings.noiseScale = baseSettings.noiseScale;\n    occultedSettings.noiseStrength = baseSettings.noiseStrength;\n    occultedSettings.fogAmountRangeY = vec2(0.65, 1.16);\n    occultedSettings.fogDensityRangeY = vec2(0.65, 0.81);\n    occultedSettings.fogAmountRangeZ = baseSettings.fogAmountRangeZ;\n    occultedSettings.fogDensityRangeZ = vec2(20.0, 161.29);\n    occultedSettings.mainSdf = vec3(0.64, 0.62, 0.84);\n    occultedSettings.sdfRemap = vec2(-0.84, -0.45);\n    occultedSettings.fogColor = vec3(0.796, 0.796, 0.761);\n    return occultedSettings;\n}\n\nFogSettings getOpaqueSettings(FogSettings baseSettings) {\n    FogSettings opaqueSettings;\n    opaqueSettings.noiseSpeed = baseSettings.noiseSpeed;\n    opaqueSettings.noiseScale = baseSettings.noiseScale;\n    opaqueSettings.noiseStrength = baseSettings.noiseStrength;\n    opaqueSettings.fogAmountRangeY = vec2(0.65, 1.16);\n    opaqueSettings.fogDensityRangeY = vec2(0.65, 0.81);\n    opaqueSettings.fogAmountRangeZ = vec2(1, 1.3);\n    opaqueSettings.fogDensityRangeZ = vec2(100, 300);\n    opaqueSettings.mainSdf = vec3(0.5, 0.5, 0);\n    opaqueSettings.sdfRemap = baseSettings.sdfRemap;\n    opaqueSettings.fogColor = vec3(0.714, 0.714, 0.714);\n    return opaqueSettings;\n}\n\nvec3 getFogColorWithRatio(float time, float depth, vec2 uv, vec2 resolution, vec3 worldPosition, vec3 color, sampler2D noiseTexture, float opaqueRatio, float occultedRatio) {\n\n    FogSettings baseSettings = getBaseSettings();\n    FogSettings opaqueSettings = getOpaqueSettings(baseSettings);\n    FogSettings occultedSettings = getOccultedSettings(baseSettings);\n\n    FogSettings settings = baseSettings;\n    settings = mixFogSettings(settings, occultedSettings, occultedRatio);\n    settings = mixFogSettings(settings, opaqueSettings, opaqueRatio);\n\n    return getFogColor(time, depth, uv, resolution, worldPosition, color, noiseTexture, settings.fogColor, settings.noiseSpeed, settings.noiseScale, settings.noiseStrength, settings.fogAmountRangeY, settings.fogDensityRangeY, settings.fogAmountRangeZ, settings.fogDensityRangeZ, settings.mainSdf, settings.sdfRemap);\n}\n\n#define PI 3.141592\n\nfloat circle(vec2 diff, float radius)\n{\n\treturn length(diff) - radius;\n}\n\nvoid main() {\n    float stepX;\n    vec2 uv = vUv;\n\n    vec2 screenUv = gl_FragCoord.xy / uResolution;\n\n    float ndcVisibility = abs(-vNdcCenter.x * .7 + 0.3);\n\n    vec2 alphaRange = uAlphaOutputRange;\n    alphaRange *= smoothstep(uAlphaInputRange.y, uAlphaInputRange.x, ndcVisibility);\n    alphaRange *= uAlpha;\n\n    float alpha = uAlpha * uDotAlpha;\n    alpha *= cremap(alpha, alphaRange.x, alphaRange.y, 1., 0.);\n\n    float opacity = 1. - pow(circle(uv * 2. - 1., 0.), 10.);\n\n    vec3 color = vec3(1. - opacity);\n\n    color = getFogColorWithRatio(uTime, vFogDepth, screenUv, uResolution, vWorldPosition, color, tNoiseTexture, uFogState.x, uFogState.y);\n\n    opacity *= .2 + .8 * (1. - pow(sin(uTime * PI * .5), 6.)) * .5;\n    alpha *= 1. - max(uFogState.x, uFogState.y);\n    \n    gl_FragColor = vec4(color, opacity * alpha);\n\n}",uniforms:{uTime:this._uTime,uResolution:this._uResolution,uFogState:this._uFogState,tNoiseTexture:{value:this._fogNoise},uAlpha:this._uAlpha,uAlphaInputRange:this._uAlphaInputRange,uAlphaOutputRange:this._uAlphaOutputRange,uDotAlpha:this._uDotAlpha},side:Gm,transparent:!0,depthWrite:!1}),i=new j_(n,r);return i.position.x+=t.width*Y4*.5+2.5*e,i.position.y+=t.height*Y4*.25,this.add(i),i.renderOrder=4,i}},{key:"_createRaycastProxy",value:function(){this._mesh.geometry.computeBoundingBox();var t=this._mesh.geometry.layout,e=t.width*Y4,n=t.height*Y4,r=new j_(new sw(e+.15,n+.09),K4);return r.position.y+=.02,r.renderOrder=3,r.userData.text=this._text,r.userData.instance=this,this.add(r),r}},{key:"update",value:function(t){t.delta;var e,n,r=t.time;this._uTime.value=r,this._uFogState.value.set(null===(e=this.$experienceManager)||void 0===e?void 0:e.fogState.opaque,null===(n=this.$experienceManager)||void 0===n?void 0:n.fogState.occulted)}},{key:"onOverOut",value:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],e=ti.timeline();e.to(this._lineMesh.material.uniforms.uFirstPartAnimation,{value:!t,duration:0},0),e.fromTo(this._lineMesh.material.uniforms.uProgress,{value:1},{value:0,duration:.8,ease:"expo.inOut"},0),e.to(this._uDotAlpha,{value:t?0:1,duration:.5,ease:"sine.out"},0),document.body.style.cursor=t?"pointer":"inherit",t&&this.$audioManager.playSound("over-cta-painting"),t?this.cursorComponent.hover():this.cursorComponent.leave()}},{key:"onWindowResize",value:function(t){var e=t.innerWidth;this._uResolution.value.set(t.renderWidth,t.renderHeight),this._uAlphaInputRange.value.x=b1.alpha.inputRange.min+S0(e,[800,1920],[.3,0])}},{key:"onMousemove",value:function(){}}],r&&q4(n.prototype,r),i&&q4(n,i),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,i}(dY(Xb));function $4(t,e){e.position.copy(t.position),e.scale.copy(t.scale),e.quaternion.copy(t.quaternion)}function Z4(t){return Z4="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Z4(t)}function J4(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,i,o,a,s=[],l=!0,u=!1;try{if(o=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=o.call(n)).done)&&(s.push(r.value),s.length!==e);l=!0);}catch(t){u=!0,i=t}finally{try{if(!l&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(u)throw i}}return s}}(t,e)||e5(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function t5(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=e5(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return a=t.done,t},e:function(t){s=!0,o=t},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function e5(t,e){if(t){if("string"==typeof t)return n5(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?n5(t,e):void 0}}function n5(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function r5(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,i5(r.key),r)}}function i5(t){var e=function(t,e){if("object"!=Z4(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=Z4(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Z4(e)?e:e+""}function o5(t,e,n){return e=l5(e),function(t,e){if(e&&("object"===Z4(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,a5()?Reflect.construct(e,n||[],l5(t).constructor):e.apply(t,n))}function a5(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(a5=function(){return!!t})()}function s5(){return s5="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=l5(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(arguments.length<3?t:n):i.value}},s5.apply(this,arguments)}function l5(t){return l5=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},l5(t)}function u5(t,e){return u5=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},u5(t,e)}var c5=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),o5(this,e,arguments)}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&u5(t,e)}(e,t),n=e,r=[{key:"init",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this._config=t.config,this._titles=this._createTitles(),this._previousNdc=null,this._debug=this._createDebug(),this._raycaster=new qS}},{key:"destroy",value:function(){var t,n=t5(this._titles);try{for(n.s();!(t=n.n()).done;)t.value.destroy()}catch(t){n.e(t)}finally{n.f()}s5(l5(e.prototype),"destroy",this).call(this)}},{key:"raycastProxies",get:function(){return this._titles.filter((function(t){return t.isRendered})).map((function(t){return t.raycastProxy}))}},{key:"getTitleOverInstance",value:function(t){if(t&&0!=this.raycastProxies.length){this._raycaster.setFromCamera(HJ._ndc,t);var e=J4(this._raycaster.intersectObjects(this.raycastProxies),1)[0];if(e){var n=e.object.userData.instance;if(n.isClickable)return n}}}},{key:"getByText",value:function(t){return this._titles.find((function(e){return e.text===t}))}},{key:"checkIfTitleOver",value:function(t){var e=this.getTitleOverInstance(t);e?!this._titleOverInstance&&e.isClickable&&(this._titleOverInstance=e,e.onOverOut(!0)):this._titleOverInstance&&(this._titleOverInstance.onOverOut(!1),this._titleOverInstance=null)}},{key:"_createTitles",value:function(){var t=this,e=AK.get("watercolor/scene").scene.getObjectByName("titles");$4(e,this);var n,r=e.children,i=[],o=0,a=t5(r);try{var s=function(){var e=n.value,r=e.name.replaceAll("_"," "),a=vZ.find((function(t){return t.title===r})),s=(null==a?void 0:a.sceneIndex)||0,l=new X4({index:o,text:a.cta,sceneIndex:s});$4(e,l),l.rotateY(Math.PI/2),t.add(l),i.push(l),o++};for(a.s();!(n=a.n()).done;)s()}catch(t){a.e(t)}finally{a.f()}return i}},{key:"update",value:function(t){var e=t.time,n=t.delta;this._previousNdc||(this._previousNdc=HJ._ndc.clone());var r=1-Math.exp(-b1.cursorDamping*n);this._previousNdc.lerp(HJ._ndc,r);var i,o=t5(this._titles);try{for(o.s();!(i=o.n()).done;){var a=i.value;a._mesh.material.uniforms.uMouseNdc.value.copy(this._previousNdc),a.update({time:e,delta:n})}}catch(t){o.e(t)}finally{o.f()}}},{key:"_createDebug",value:function(){var t=this;if(lK){var e=lK.addFolder({title:"Painting Titles",tab:this._config.name,expanded:!1});e.addInput(b1,"color",{label:"Color"}).on("change",(function(e){var n,r=e.value,i=t5(t._titles);try{for(i.s();!(n=i.n()).done;)n.value._mesh.material.uniforms.uColor.value.set(r)}catch(t){i.e(t)}finally{i.f()}})),e.addInput(b1,"scale",{label:"Scale"}).on("change",(function(e){var n,r=e.value,i=t5(t._titles);try{for(i.s();!(n=i.n()).done;)n.value._mesh.scale.setScalar(r)}catch(t){i.e(t)}finally{i.f()}})),e.addInput(b1,"noiseScale",{label:"Noise Scale"}).on("change",(function(e){var n,r=e.value,i=t5(t._titles);try{for(i.s();!(n=i.n()).done;)n.value._mesh.material.uniforms.uNoiseScale.value=r}catch(t){i.e(t)}finally{i.f()}})),e.addInput(b1,"cursorDamping",{label:"Cursor Damping"});var n=e.addFolder({title:"Alpha",expanded:!1});n.addInput(b1.alpha,"inputRange",{label:"Input Range",min:0,max:1.5}).on("change",(function(e){var n,r=e.value,i=t5(t._titles);try{for(i.s();!(n=i.n()).done;)n.value._mesh.material.uniforms.uAlphaInputRange.value.set(r.min,r.max)}catch(t){i.e(t)}finally{i.f()}})),n.addInput(b1.alpha,"outputRange",{label:"Output Range",min:0,max:2}).on("change",(function(e){var n,r=e.value,i=t5(t._titles);try{for(i.s();!(n=i.n()).done;)n.value._mesh.material.uniforms.uAlphaOutputRange.value.set(r.min,r.max)}catch(t){i.e(t)}finally{i.f()}}));var r=e.addFolder({title:"Blur",expanded:!1});r.addInput(b1.blur,"inputRange",{label:"Input Range",min:0,max:1.5}).on("change",(function(e){var n,r=e.value,i=t5(t._titles);try{for(i.s();!(n=i.n()).done;)n.value._mesh.material.uniforms.uBlurInputRange.value.set(r.min,r.max)}catch(t){i.e(t)}finally{i.f()}})),r.addInput(b1.blur,"outputRange",{label:"Output Range",min:0,max:2}).on("change",(function(e){var n,r=e.value,i=t5(t._titles);try{for(i.s();!(n=i.n()).done;)n.value._mesh.material.uniforms.uBlurOutputRange.value.set(r.min,r.max)}catch(t){i.e(t)}finally{i.f()}}));var i=e.addFolder({title:"Mouse",expanded:!1});i.addInput(b1.mouse.noise,"inputRange",{label:"Noise Input Range",min:0,max:1.5}).on("change",(function(e){var n,r=e.value,i=t5(t._titles);try{for(i.s();!(n=i.n()).done;)n.value._mesh.material.uniforms.uMouseNoiseInputRange.value.set(r.min,r.max)}catch(t){i.e(t)}finally{i.f()}})),i.addInput(b1.mouse.noise,"outputRange",{label:"Noise Output Range",min:0,max:1.5}).on("change",(function(e){var n,r=e.value,i=t5(t._titles);try{for(i.s();!(n=i.n()).done;)n.value._mesh.material.uniforms.uMouseNoiseOutputRange.value.set(r.min,r.max)}catch(t){i.e(t)}finally{i.f()}})),i.addInput(b1.mouse.global,"inputRange",{label:"Global Input Range",min:0,max:1.5}).on("change",(function(e){var n,r=e.value,i=t5(t._titles);try{for(i.s();!(n=i.n()).done;)n.value._mesh.material.uniforms.uMouseGlobalInputRange.value.set(r.min,r.max)}catch(t){i.e(t)}finally{i.f()}})),i.addInput(b1.mouse.global,"outputRange",{label:"Global Output Range",min:0,max:3}).on("change",(function(e){var n,r=e.value,i=t5(t._titles);try{for(i.s();!(n=i.n()).done;)n.value._mesh.material.uniforms.uMouseGlobalOutputRange.value.set(r.min,r.max)}catch(t){i.e(t)}finally{i.f()}}))}}}],r&&r5(n.prototype,r),i&&r5(n,i),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,i}(dY(Xb));function d5(t){return d5="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},d5(t)}function f5(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function h5(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?f5(Object(n),!0).forEach((function(e){p5(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):f5(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function p5(t,e,n){return(e=g5(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function m5(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,g5(r.key),r)}}function g5(t){var e=function(t,e){if("object"!=d5(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=d5(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==d5(e)?e:e+""}function v5(t,e,n){return e=b5(e),function(t,e){if(e&&("object"===d5(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,y5()?Reflect.construct(e,n||[],b5(t).constructor):e.apply(t,n))}function y5(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(y5=function(){return!!t})()}function b5(t){return b5=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},b5(t)}function _5(t,e){return _5=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},_5(t,e)}var w5=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),v5(this,e,arguments)}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&_5(t,e)}(e,t),n=e,r=[{key:"init",value:function(t){this._config=t.config,this._camera=t.camera,console.log(this._camera),this._uniforms=this._createUniforms(),this._mesh=this._createMesh(),this._debug=this._createDebug()}},{key:"uniforms",get:function(){return this._uniforms}},{key:"_createUniforms",value:function(){return{uLighting:{value:{groundSpecularScale:new Ay(27.5,10.7),groundSpecularOffset:new Ay(8.12,.38),groundSpecularStrength:.47,specularCenter:new Ay(1.2,.7),specularScale:new Ay(.82,.67),specularOffset:new Ay(0,0),specularStrength:.18}},uBackground:{value:{groundColor:new By("#b4b4b4"),skyColor:new By("#e4e4e4"),progressRemap:new Ay(.5,1)}},uFogState:{value:new Ay}}}},{key:"_createMesh",value:function(){var t=new sw(2,2),e=AK.get("noise/rgb-fractal");e.wrapS=e.wrapT=Dg;var n=new V_({uniforms:h5({uRatio:{value:1},uTime:{value:0},uResolution:{value:new Ay},tNoiseTexture:{value:e},uProjectionInverse:{value:new Sb},uViewMatrixInv:{value:new Sb}},this._uniforms),fragmentShader:"#define GLSLIFY 1\nuniform float uTime;\nuniform vec2 uResolution;\nuniform sampler2D tNoiseTexture;\nvarying float vFogDepth;\nvarying vec3 vWorldPosition;\nuniform vec2 uFogState;\n\nvarying vec2 vUv;\nuniform float uRatio;\n\nstruct Lighting {\n    vec2 groundSpecularScale;\n    vec2 groundSpecularOffset;\n    float groundSpecularStrength;\n    vec2 specularCenter;\n    vec2 specularScale;\n    vec2 specularOffset;\n    float specularStrength;\n};\n\nuniform Lighting uLighting;\n\nstruct Background {\n    vec3 groundColor;\n    vec3 skyColor;\n    vec2 progressRemap;\n};\n\nuniform Background uBackground;\n\n#ifndef PI\n#define PI 3.141592653589793\n#endif\n\nfloat sineInOut(float t) {\n  return -0.5 * (cos(PI * t) - 1.0);\n}\n\n// WITH ground specular\nfloat computeLighting(Lighting lightingConfig, float screenRatio, vec2 screenUv, vec3 worldPosFromCamera) {\n    vec2 specularVector = (screenUv - (lightingConfig.specularCenter + lightingConfig.specularOffset)) / lightingConfig.specularScale;\n    specularVector.x *= screenRatio;\n    float specular = 1.0-min(length(specularVector), 1.0);\n    specular = sineInOut(specular);\n    float lighting = lightingConfig.specularStrength * specular;\n\n    vec2 groundSpecularVector = (worldPosFromCamera.xz - lightingConfig.groundSpecularOffset) / lightingConfig.groundSpecularScale;\n    float groundSpecular = 1.0-min(length(groundSpecularVector), 1.0);\n    groundSpecular = sineInOut(groundSpecular);\n    lighting += lightingConfig.groundSpecularStrength * groundSpecular;\n\n    return lighting;\n}\n\n// WITHOUT ground specular\nfloat computeLighting(Lighting lightingConfig, float screenRatio, vec2 screenUv) {\n    vec2 specularVector = (screenUv - (lightingConfig.specularCenter + lightingConfig.specularOffset)) / lightingConfig.specularScale;\n    specularVector.x *= screenRatio;\n    float specular = 1.0-min(length(specularVector), 1.0);\n    specular = sineInOut(specular);\n    float lighting = lightingConfig.specularStrength * specular;\n\n    return lighting;\n}\n\nfloat cremap(float value, float start1, float stop1, float start2, float stop2) {\n  float r = start2 + (stop2 - start2) * ((value - start1) / (stop1 - start1));\n  return clamp(r, min(start2, stop2), max(start2, stop2));\n}\n\nvec3 computeBackground(Background backgroundConfig, vec2 screenUv) {\n    float baseProgress = cremap(screenUv.y, backgroundConfig.progressRemap.x, backgroundConfig.progressRemap.y, 0., 1.);\n    float progress = 1. - abs((baseProgress - 0.5) * 2.);\n    progress = sineInOut(progress);\n\n    return mix(backgroundConfig.groundColor, backgroundConfig.skyColor, progress);\n}\n\nfloat remap(float value, float start1, float stop1, float start2, float stop2) {\n  return start2 + (stop2 - start2) * ((value - start1) / (stop1 - start1));\n}\n\nfloat quarticInOut(float t) {\n  return t < 0.5\n    ? +8.0 * pow(t, 4.0)\n    : -8.0 * pow(t - 1.0, 4.0) + 1.0;\n}\n\nfloat sdCircle(vec2 p, float r) {\n  return length(p) - r;\n}\n\nvec3 getFogColor(float time, float depth, vec2 uv, vec2 resolution, vec3 worldPosition, vec3 color, sampler2D noiseTexture, vec3 fogColor, float noiseSpeed, vec2 noiseScale, float noiseStrength, vec2 fogAmountRangeY, vec2 fogDensityRangeY, vec2 fogAmountRangeZ, vec2 fogDensityRangeZ, vec3 mainSdf, vec2 sdfRemap) {\n  worldPosition.z -= time * noiseSpeed * .1;\n\n  vec2 noiseUv = worldPosition.yz;\n  noiseUv *= 0.05 * noiseScale;\n\n  float noise = texture2D(noiseTexture, noiseUv).r;\n  noise = quarticInOut(noise);\n  if(worldPosition.y < 0.01)\n    noise = 1.;\n  if(worldPosition.x > 900.)\n    noise = 1.;\n\n  float screenRatio = resolution.x / resolution.y;\n  vec2 adjustedUvs = ((uv - 0.5) / vec2(1., screenRatio)) + 0.5;\n  adjustedUvs.x += step(screenRatio, 1.) * -.5; // on portrait only\n  float sdf = sdCircle(adjustedUvs - mainSdf.xy, mainSdf.z);\n  sdf = smoothstep(sdfRemap.x, sdfRemap.y, sdf);\n\n  float noiseSdf = sdf * remap(noise, 0., 1., 1. - noiseStrength, 1.);\n\n  float fogAmountZ = mix(fogAmountRangeZ.x, fogAmountRangeZ.y, noiseSdf);\n  // float fogDensityZ = mix(fogDensityRangeZ.x, fogDensityRangeZ.y, noiseSdf) / 1000.;\n  float fogDensityZ = mix(fogDensityRangeZ.x, fogDensityRangeZ.y, noiseSdf);\n  float fogFactorZ = 1.0 - exp(-fogDensityZ * fogDensityZ * depth * depth);\n\n  float fogPosY = worldPosition.y;\n  float fogDensityY = mix(fogDensityRangeY.y, fogDensityRangeY.x, noiseSdf);\n  float fogAmountY = mix(fogAmountRangeY.x, fogAmountRangeY.y, noiseSdf);\n  float fogFactorY = exp(-fogDensityY * fogDensityY * fogPosY * fogPosY);\n\n  float fogAmount = clamp(fogFactorZ * fogAmountZ, 0.0, 1.0);\n  fogAmount = max(fogAmount, clamp(fogFactorY * fogAmountY, 0.0, 1.0));\n  fogAmount = clamp(fogAmount + sdf * 0.2, 0., 1.);\n\n  return mix(color, fogColor, fogAmount);\n}\n\nstruct FogSettings {\n    float noiseSpeed;\n    vec2 noiseScale;\n    float noiseStrength;\n    vec2 fogAmountRangeY;\n    vec2 fogDensityRangeY;\n    vec2 fogAmountRangeZ;\n    vec2 fogDensityRangeZ;\n    vec3 mainSdf;\n    vec2 sdfRemap;\n    vec3 fogColor;\n};\n\nFogSettings mixFogSettings(FogSettings from, FogSettings to, float ratio) {\n    FogSettings settings;\n    settings.noiseSpeed = mix(from.noiseSpeed, to.noiseSpeed, ratio);\n    settings.noiseScale = mix(from.noiseScale, to.noiseScale, ratio);\n    settings.noiseStrength = mix(from.noiseStrength, to.noiseStrength, ratio);\n    settings.fogAmountRangeY = mix(from.fogAmountRangeY, to.fogAmountRangeY, ratio);\n    settings.fogDensityRangeY = mix(from.fogDensityRangeY, to.fogDensityRangeY, ratio);\n    settings.fogAmountRangeZ = mix(from.fogAmountRangeZ, to.fogAmountRangeZ, ratio);\n    settings.fogDensityRangeZ = mix(from.fogDensityRangeZ, to.fogDensityRangeZ, ratio);\n    settings.mainSdf = mix(from.mainSdf, to.mainSdf, ratio);\n    settings.sdfRemap = mix(from.sdfRemap, to.sdfRemap, ratio);\n    settings.fogColor = mix(from.fogColor, to.fogColor, ratio);\n    return settings;\n}\n\nFogSettings getBaseSettings() {\n    FogSettings baseSettings;\n    baseSettings.noiseSpeed = 3.;\n    baseSettings.noiseScale = vec2(0.6, 0.2);\n    baseSettings.noiseStrength = 0.88;\n    baseSettings.fogAmountRangeY = vec2(0.1, 1.39);\n    baseSettings.fogDensityRangeY = vec2(0.01, 0.81);\n    baseSettings.fogAmountRangeZ = vec2(0.01, 0.99);\n    baseSettings.fogDensityRangeZ = vec2(20.0, 277.42);\n    baseSettings.mainSdf = vec3(0.79, 0.63, 0.85);\n    baseSettings.sdfRemap = vec2(-0.48, -0.06);\n    baseSettings.fogColor = vec3(0.796, 0.796, 0.761);\n    return baseSettings;\n}\n\nFogSettings getOccultedSettings(FogSettings baseSettings) {\n    FogSettings occultedSettings;\n    occultedSettings.noiseSpeed = baseSettings.noiseSpeed;\n    occultedSettings.noiseScale = baseSettings.noiseScale;\n    occultedSettings.noiseStrength = baseSettings.noiseStrength;\n    occultedSettings.fogAmountRangeY = vec2(0.65, 1.16);\n    occultedSettings.fogDensityRangeY = vec2(0.65, 0.81);\n    occultedSettings.fogAmountRangeZ = baseSettings.fogAmountRangeZ;\n    occultedSettings.fogDensityRangeZ = vec2(20.0, 161.29);\n    occultedSettings.mainSdf = vec3(0.64, 0.62, 0.84);\n    occultedSettings.sdfRemap = vec2(-0.84, -0.45);\n    occultedSettings.fogColor = vec3(0.796, 0.796, 0.761);\n    return occultedSettings;\n}\n\nFogSettings getOpaqueSettings(FogSettings baseSettings) {\n    FogSettings opaqueSettings;\n    opaqueSettings.noiseSpeed = baseSettings.noiseSpeed;\n    opaqueSettings.noiseScale = baseSettings.noiseScale;\n    opaqueSettings.noiseStrength = baseSettings.noiseStrength;\n    opaqueSettings.fogAmountRangeY = vec2(0.65, 1.16);\n    opaqueSettings.fogDensityRangeY = vec2(0.65, 0.81);\n    opaqueSettings.fogAmountRangeZ = vec2(1, 1.3);\n    opaqueSettings.fogDensityRangeZ = vec2(100, 300);\n    opaqueSettings.mainSdf = vec3(0.5, 0.5, 0);\n    opaqueSettings.sdfRemap = baseSettings.sdfRemap;\n    opaqueSettings.fogColor = vec3(0.714, 0.714, 0.714);\n    return opaqueSettings;\n}\n\nvec3 getFogColorWithRatio(float time, float depth, vec2 uv, vec2 resolution, vec3 worldPosition, vec3 color, sampler2D noiseTexture, float opaqueRatio, float occultedRatio) {\n\n    FogSettings baseSettings = getBaseSettings();\n    FogSettings opaqueSettings = getOpaqueSettings(baseSettings);\n    FogSettings occultedSettings = getOccultedSettings(baseSettings);\n\n    FogSettings settings = baseSettings;\n    settings = mixFogSettings(settings, occultedSettings, occultedRatio);\n    settings = mixFogSettings(settings, opaqueSettings, opaqueRatio);\n\n    return getFogColor(time, depth, uv, resolution, worldPosition, color, noiseTexture, settings.fogColor, settings.noiseSpeed, settings.noiseScale, settings.noiseStrength, settings.fogAmountRangeY, settings.fogDensityRangeY, settings.fogAmountRangeZ, settings.fogDensityRangeZ, settings.mainSdf, settings.sdfRemap);\n}\n\nvoid main() {\n    vec2 screenUv = gl_FragCoord.xy / uResolution;\n\n    vec3 background = computeBackground(uBackground, vUv);\n\n    float lighting = computeLighting(uLighting, uRatio, vUv);\n\n    vec3 color = background;\n    color += lighting;\n\n    color = getFogColorWithRatio(uTime, vFogDepth, screenUv, uResolution, vWorldPosition, color, tNoiseTexture, uFogState.x, uFogState.y);\n\n    gl_FragColor = vec4(color, 1.);\n    gl_FragColor = LinearTosRGB(gl_FragColor);\n}",vertexShader:"#define GLSLIFY 1\nvarying vec2 vUv;\nvarying vec3 vWorldPosition;\nvarying float vFogDepth;\n\nuniform mat4 uProjectionInverse;\nuniform mat4 uViewMatrixInv;\n\nvec3 worldPosFromDepth(float depth) {\n    float z = depth * 2.0 - 1.0;\n\n    vec4 clipSpacePosition = vec4(vUv * 2.0 - 1.0, z, 1.0);\n    vec4 viewSpacePosition = uProjectionInverse * clipSpacePosition;\n\n    // Perspective division\n    viewSpacePosition /= viewSpacePosition.w;\n\n    vec4 worldSpacePosition = uViewMatrixInv * viewSpacePosition;\n\n    return worldSpacePosition.xyz;\n}\n\nvoid main() {\n    vec4 mvPosition = vec4(position, 1.0);\n    mvPosition = modelViewMatrix * mvPosition;\n\n    gl_Position = vec4(position, 1.);\n    vUv = uv;\n\n    vFogDepth = -mvPosition.z;\n    vWorldPosition = worldPosFromDepth(1.0);\n}",depthWrite:!1}),r=new j_(t,n);return r.renderOrder=-10,r.frustumCulled=!1,r.onBeforeRender=function(t,e,n){},this.add(r),r}},{key:"update",value:function(t){t.delta;var e,n,r=t.time;this._mesh.material.uniforms.uTime.value=r,this._mesh.material.uniforms.uProjectionInverse.value=this._camera.projectionMatrixInverse,this._mesh.material.uniforms.uViewMatrixInv.value=this._camera.matrixWorld,this._uniforms.uFogState.value.set(null===(e=this.$experienceManager)||void 0===e?void 0:e.fogState.opaque,null===(n=this.$experienceManager)||void 0===n?void 0:n.fogState.occulted)}},{key:"onWindowResize",value:function(t){this._mesh.material.uniforms.uRatio.value=t.renderWidth/t.renderHeight,this._mesh.material.uniforms.uResolution.value.set(t.renderWidth,t.renderHeight)}},{key:"_createDebug",value:function(){var t=this;if(lK){var e=lK.addFolder({title:"Background",tab:this._config.name,expanded:!1});e.addInput(new p1(this._uniforms.uBackground.value,"groundColor"),"value",{label:"Ground Color"}),e.addInput(new p1(this._uniforms.uBackground.value,"skyColor"),"value",{label:"Sky Color"});var n=e.addFolder({title:"Sky Specular"});n.addInput(this._uniforms.uLighting.value,"specularCenter",{label:"Specular Center",x:{step:.01,min:-.3,max:1.3},y:{step:.01,min:-.3,max:1.3}}),n.addInput(this._uniforms.uLighting.value,"specularScale",{label:"Specular Scale",x:{step:.01,min:0,max:1},y:{step:.01,min:0,max:1}}),n.addInput(this._uniforms.uLighting.value,"specularStrength",{label:"Specular Strength",step:.01,min:0,max:1});var r=e.addFolder({title:"Ground Specular"});return r.addInput(this._uniforms.uLighting.value,"groundSpecularScale",{label:"Specular Scale"}),r.addInput(this._uniforms.uLighting.value,"groundSpecularOffset",{label:"Specular Offset"}),r.addInput(this._uniforms.uLighting.value,"groundSpecularStrength",{label:"Specular Strength",min:0,max:1}),e.addButton({title:"Save to clipboard"}).on("click",(function(){var e=JSON.stringify(t._mesh.material.uniforms,null,"\t");navigator.clipboard.writeText(e)})),e}}}],r&&m5(n.prototype,r),i&&m5(n,i),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,i}(dY(Xb));function A5(t){return A5="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},A5(t)}function E5(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,x5(r.key),r)}}function x5(t){var e=function(t,e){if("object"!=A5(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=A5(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==A5(e)?e:e+""}function S5(t,e,n){return e=I5(e),function(t,e){if(e&&("object"===A5(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,T5()?Reflect.construct(e,n||[],I5(t).constructor):e.apply(t,n))}function T5(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(T5=function(){return!!t})()}function C5(){return C5="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=I5(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(arguments.length<3?t:n):i.value}},C5.apply(this,arguments)}function I5(t){return I5=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},I5(t)}function k5(t,e){return k5=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},k5(t,e)}var P5=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),S5(this,e,arguments)}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&k5(t,e)}(e,t),n=e,r=[{key:"init",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this._config=t.config,this._debug=this._createDebug(),this._resourceManager=this._createResourceManager(),this._scene=this._createScene(),this._cameraManager=this._createCameraManager(),this._components=null,AK.get("watercolor/scene").scene.visible=!1}},{key:"destroy",value:function(){C5(I5(e.prototype),"destroy",this).call(this),this._cameraManager.destroy(),this._destroyComponents()}},{key:"scene",get:function(){return this._scene}},{key:"camera",get:function(){var t;return null===(t=this._cameraManager.active)||void 0===t?void 0:t.instance}},{key:"scrollCamera",get:function(){return this._cameraManager.get("scroll")}},{key:"prepare",value:function(){var t;if(this._components=this._createComponents(),null===(t=this._components.papersContainer)||void 0===t||t.prepare(),this.$composer){this.$renderer.instance.compile(this._scene,this._cameraManager.active.instance);var e=this.$renderer.instance.getRenderTarget(),n=this.$composer.renderTarget;this.$renderer.instance.setRenderTarget(n),this.$renderer.render(this._scene,this._cameraManager.active.instance),this.$renderer.instance.setRenderTarget(e)}}},{key:"show",value:function(){var t=this;if(this._components){this.scrollCamera.addPapersContainer(this._components.papersContainer);var e=ti.timeline();if(e.call((function(){return t._cameraManager.enable()}),null,0),"hidePoem"===this.$experienceManager.transitionState.meta)e.add((function(){return t.scrollCamera.startPaperReveal()}),0),e.add(this.$experienceManager.switchFogToBase(1.5,"power2.out"),0),e.add(this.scrollCamera.zoomIn(),0);else if("poemToOffers"===this.$experienceManager.transitionState.meta)e.add((function(){return t.scrollCamera.startPaperReveal()}),0),e.add(this.$experienceManager.switchFogToBase(1.5,"power2.out"),0),e.add(this.scrollCamera.zoomIn(),0);else{e.add(this.$experienceManager.switchFogToOpaque(0),0),e.add(this.scrollCamera.loaderAnimation(),0);var n="restart"===this.$experienceManager.transitionState.meta?0:1.5;e.add((function(){return t.scrollCamera.startPaperReveal()}),n),e.add(this.$experienceManager.switchFogToBase(.5,"power2.out"),1),(_Y||wY)&&e.timeScale(100)}return e}this._resourceManager.load().then((function(){t._components=t._createComponents(),t.show()}))}},{key:"hide",value:function(t){var e=this,n=ti.timeline({onComplete:t});return n.add(this.$experienceManager.switchFogToOpaque(1.5,"power1.inOut"),0),"restart"===this.$experienceManager.transitionState.meta&&n.add(this._components.papersContainer.hideAll(),0),n.add(this.scrollCamera.zoomOut(),0),n.call((function(){return e._cameraManager.disable()})),n}},{key:"_createResourceManager",value:function(){return new EK({namespace:this._config.name})}},{key:"_createScene",value:function(){return new UE}},{key:"_createCameraManager",value:function(){var t=new oZ({config:this._config,renderer:this.$renderer.instance,scene:this._scene,cameras:[{name:"orbit",camera:pZ,options:{near:1,far:4e3,fov:50}},{name:"default",camera:uZ},{name:"scroll",camera:zZ}]});return t.activate("scroll"),vY&&t.activate("orbit"),t}},{key:"_createComponents",value:function(){var t={};return this._scene.add(AK.get("watercolor/scene").scene),t.background=this._createGradientBackgroundComponent(),t.papersContainer=this._createPapersContainerComponent({background:t.background}),t.ground=this._createGroundComponent({shadows:t.papersContainer.shadows,background:t.background}),SW.gpu.isMobile||(PY||(t.titles=this._createTitlesContainerComponent()),t.grass=this._createGrassComponent(t.papersContainer.papers),t.leaves=this._createLeavesComponent(t.papersContainer.papers)),t.lights=this._createLightsComponent(),vY&&(t.axesHelper=new ZS(7),this.scene.add(t.axesHelper)),t}},{key:"_createGradientBackgroundComponent",value:function(){var t=new w5({config:this._config,camera:this.camera});return this._scene.add(t),t}},{key:"_createPapersContainerComponent",value:function(t){var e=t.background,n=new M2({config:this._config,backgroundUniforms:e.uniforms});return this._scene.add(n),n}},{key:"_createGroundComponent",value:function(t){var e=this,n=t.shadows,r=t.background,i=new G2({config:this._config,shadowMap:n.map,backgroundUniforms:r.uniforms});return i._mesh.onBeforeRender=function(){n.render(e)},this._scene.add(i),i}},{key:"_createGrassComponent",value:function(t){var e=new y3({config:this._config,camera:this.camera,papers:t});return this._scene.add(e),e}},{key:"_createLeavesComponent",value:function(t){var e=new Z3({config:this._config,papers:t});return this._scene.add(e),e}},{key:"_createLightsComponent",value:function(){var t=new l4({config:this._config});return this._scene.add(t),t}},{key:"_createTitlesContainerComponent",value:function(){var t=new c5({config:this._config});return this._scene.add(t),t}},{key:"_destroyComponents",value:function(){if(this._components)for(var t in this._components)"function"==typeof this._components[t].destroy&&this._components[t].destroy()}},{key:"update",value:function(t){var e,n,r=t.time,i=t.delta;this._updateComponents({time:r,delta:i}),this._cameraManager.update({time:r,delta:i});var o=null===(e=this._components.papersContainer)||void 0===e||null===(e=e._paints.$paintManager)||void 0===e?void 0:e.paintIntersection;null!==(n=this._components)&&void 0!==n&&n.leaves&&this._components.leaves.setPaintInfosIntersection(o)}},{key:"_updateComponents",value:function(t){var e,n=t.time,r=t.delta;for(var i in this._components)"function"==typeof(e=this._components[i]).update&&e.update({time:n,delta:r})}},{key:"onWindowResize",value:function(t){this._cameraManager.resize(t.renderWidth,t.renderHeight)}},{key:"_createDebug",value:function(){if(lK){var t=lK.addFolder({title:"Scene",tab:this._config.name});t.addInput(lK,"isHelpersVisible",{label:"helpers"});var e=lK.pane.addFolder({title:"Simulation",index:3}),n=e.addFolder({title:"Brush",expanded:!1});n.addInput($$.brush,"depthInfluence",{label:"Depth Influence",step:.1}),n.addInput($$.brush,"sizeMultiplier",{label:"Size Multiplier",step:.01}),n.addInput($$.brush,"intensityVariation",{label:"Intensity Variation",step:.01}),n.addInput($$.brush,"damping",{label:"Damping",step:.1});var r=e.addFolder({title:"Advection",expanded:!1});r.addInput($$.advection,"randomDirection",{label:"Random Direction",step:.001}),r.addInput($$.advection,"firstNoiseScale",{label:"First Noise Scale",step:.01}),r.addInput($$.advection,"secondNoiseScale",{label:"Second Noise Scale",step:.1}),r.addInput($$.advection,"gapVelocityBoost",{label:"Gap Velocity Boost",step:.1}),r.addInput($$.advection,"velocityThreshold",{label:"Velocity Threshold",step:.001,min:0,max:1}),r.addInput($$.advection,"intensityDim",{label:"Intensity Dim",step:.001,min:0,max:1}),r.addInput($$.advection,"gapAmount",{label:"Gap Amount",min:0,max:1,step:.001});var i=e.addFolder({title:"Hover Animation",expanded:!1});i.addInput($$.hover,"mouseForce",{label:"Mouse Force"}),i.addInput($$.hover,"deceleration",{label:"Deceleration",step:.001,min:0,max:1}),i.addInput($$.hover,"attenuation",{label:"Attenuation",step:.001,min:0,max:1}),i.addInput($$.hover,"cursorSize",{label:"Cursor Size",step:1}),i.addInput($$.hover,"dt",{label:"Speed",step:.001});var o=e.addFolder({title:"Mouse Down Animation",expanded:!1});o.addInput($$.mousedown,"mouseForce",{label:"Mouse Force"}),o.addInput($$.mousedown,"deceleration",{label:"Deceleration",step:.001,min:0,max:1}),o.addInput($$.mousedown,"attenuation",{label:"Attenuation",step:.001,min:0,max:1}),o.addInput($$.mousedown,"cursorSize",{label:"Cursor Size",step:1}),o.addInput($$.mousedown,"dt",{label:"Speed",step:.001}),e.addButton({title:"Save to clipboard"}).on("click",(function(){a.json=JSON.stringify($$,null,"\t"),navigator.clipboard.writeText(a.json)}));var a={json:""};e.addMonitor(a,"json",{label:"JSON",multiline:!0,lineCount:1});var s=JSON.parse(JSON.stringify($$));return e.addButton({title:"Reset"}).on("click",(function(){Object.assign($$.brush,s.brush),Object.assign($$.hover,s.hover),Object.assign($$.mousedown,s.mousedown),Object.assign($$.advection,s.advection)})),t}}}],r&&E5(n.prototype,r),i&&E5(n,i),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,i}(dY());const R5={name:"Watercolor",class:P5,renderer:{clearColor:"#000000"},composer:{final:{enabled:!0},gammaCorrection:{enabled:!1}},resources:{preload:{development:!0,production:!0},items:[{type:"gltf",path:"/xp/models/scene.glb",name:"watercolor/scene"},{type:"texture",path:"/xp/textures/atlas/sdf.png",name:"atlas/sdf"},{type:"texture",path:"/xp/textures/atlas/texture.jpg",name:"atlas/texture"},{type:"texture",path:"/xp/textures/atlas/texture_mask.jpg",name:"atlas/texture_mask"},{type:"3dl",path:"/xp/lut/ink.3DL",name:"lut/ink"},{type:"3dl",path:"/xp/lut/dry.3DL",name:"lut/dry"},{type:"texture",path:"/xp/textures/paper/normal.jpg",name:"watercolor/paper/normal"},{type:"texture",path:"/xp/textures/paper/matcap.png",name:"watercolor/paper/matcap"},{type:"texture",path:"/xp/textures/paper/texture.jpg",name:"watercolor/paper/texture"},{type:"texture",path:"/xp/textures/noise.jpeg",name:"grass/noise"},{type:"texture",path:"/xp/textures/grassTest.png",name:"grass/texture"},{type:"texture",path:"/xp/textures/leaves.png",name:"leave/texture"},{type:"texture",path:"/xp/textures/noises/rgb-fractal.png",name:"noise/rgb-fractal"},{type:"texture",path:"/xp/textures/noises/greyscale-fractal.png",name:"noise/greyscale-fractal"},{type:"texture",path:"/xp/textures/noises/rgb-generated-compressed.png",name:"noise/rgb-generated"},{type:"texture",path:"/xp/textures/noises/rgba-pixel.png",name:"noise/rgba-pixel"},{type:"ktx",path:"/xp/textures/grounds/atlas.ktx2",name:"watercolor/ground"},{type:"texture",path:"/xp/textures/grass/atlas.png",name:"grass/blade-atlas"},{type:"texture",path:"/xp/textures/grass/color-gradients.jpg",name:"grass/color-gradients"},{type:"texture",path:"/xp/poem/text.png",name:"poem/texture"}]}};function O5(t){return O5="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},O5(t)}function M5(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,L5(r.key),r)}}function L5(t){var e=function(t,e){if("object"!=O5(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=O5(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==O5(e)?e:e+""}var D5=function(){return t=function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._debugContainer=e.debug,this._name=null,this._isEnabled=!1,this._instance=this._createInstance()},(e=[{key:"name",get:function(){return this._name},set:function(t){this._name=t}},{key:"instance",get:function(){return this._instance}},{key:"enable",value:function(){this._isEnabled=!0}},{key:"disable",value:function(){this._isEnabled=!1}},{key:"show",value:function(){this._showDebug()}},{key:"hide",value:function(){this._hideDebug()}},{key:"_createInstance",value:function(){return new yw(-1,1,1,-1,0,10)}},{key:"resize",value:function(){var t=zY.dimensions,e=t.innerWidth,n=t.innerHeight;this._instance.left=-e/2,this._instance.right=e/2,this._instance.top=n/2,this._instance.bottom=-n/2,this._instance.updateProjectionMatrix()}},{key:"_showDebug",value:function(){var t=this;if(this._debugContainer){var e=this,n={frustum:{min:this._instance.near,max:this._instance.far}};this._debug=this._debugContainer.addFolder({title:"Default"}),this._debug.addInput(n,"frustum",{min:.01,max:1e3,step:1}).on("change",(function(){t._instance.near=n.frustum.min,t._instance.far=n.frustum.max,e._instance.updateProjectionMatrix()}))}}},{key:"_hideDebug",value:function(){var t;null===(t=this._debug)||void 0===t||t.dispose()}}])&&M5(t.prototype,e),n&&M5(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,n}();function N5(t){return N5="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},N5(t)}function B5(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,j5(r.key),r)}}function j5(t){var e=function(t,e){if("object"!=N5(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=N5(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==N5(e)?e:e+""}function z5(t,e,n){return e=q5(e),function(t,e){if(e&&("object"===N5(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,F5()?Reflect.construct(e,n||[],q5(t).constructor):e.apply(t,n))}function F5(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(F5=function(){return!!t})()}function U5(){return U5="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=q5(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(arguments.length<3?t:n):i.value}},U5.apply(this,arguments)}function q5(t){return q5=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},q5(t)}function G5(t,e){return G5=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},G5(t,e)}var H5=3.8,V5=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),z5(this,e,arguments)}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&G5(t,e)}(e,t),n=e,r=[{key:"init",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this._config=t._config,this._onVideoReady=this._onVideoReady.bind(this),this._geometry=this._createGeometry(),this._material=this._createMaterial(),this._mesh=this._createMesh(),this._mesh.visible=!1,this._createDebug()}},{key:"_batchSimulation",get:function(){var t,e=this.$viewManager.get("Watercolor").instance;return null==e||null===(t=e._components)||void 0===t||null===(t=t.papersContainer)||void 0===t?void 0:t.batchSimulation}},{key:"_createGeometry",value:function(){return new sw(1,1,1,1)}},{key:"_createMaterial",value:function(){var t=AK.get("noise/rgb-generated");return t.wrapS=t.wrapT=Bg,this._paintSize=new Ay,this._resolution=new Ay,this._uniforms={uSimulation:{value:null},uSimulationRemap:{value:new Hy(0,0,0,0)},uResolution:{value:this._resolution},uScale:{value:1.4},uAlpha:{value:1},uColor:{value:new By("#fff7e5")},uVisibleProgress:{value:0},uPaintTexture:{value:null},uPaintTexture2:{value:null},uPaintTextureSize:{value:this._paintSize},uNoiseTexture:{value:t},uRevealPoints:{value:null},uRevealPointsPos:{value:null}},new V_({vertexShader:"#define GLSLIFY 1\nvarying vec2 vUv;\nvarying vec2 vSimulationUv;\n\nfloat remap(float value, float start1, float stop1, float start2, float stop2) {\n  return start2 + (stop2 - start2) * ((value - start1) / (stop1 - start1));\n}\n\nvec2 remapAtlasUv(vec2 uv, vec4 atlasRemap) {\n    vec2 _uv = uv;\n    _uv.x = remap(_uv.x, 0., 1., atlasRemap.x, atlasRemap.x + atlasRemap.z);\n    _uv.y = remap(_uv.y, 0., 1., atlasRemap.y, atlasRemap.y + atlasRemap.w);\n    return _uv;\n}\n\nvec2 remapAtlasUv(vec2 uv, vec4 boxSize, vec4 atlasRemap) {\n    vec2 _uv = uv;\n    _uv.x = remap(_uv.x, 0., 1., boxSize.x, boxSize.z);\n    _uv.y = remap(_uv.y, 1., 0., boxSize.y, boxSize.w);\n    _uv.x = remap(_uv.x, 0., 1., atlasRemap.x, atlasRemap.x + atlasRemap.z);\n    _uv.y = remap(_uv.y, 0., 1., atlasRemap.y, atlasRemap.y + atlasRemap.w);\n    return _uv;\n}\n\nuniform vec2 uResolution;\nuniform vec4 uSimulationRemap;\nuniform float uScale;\n\n#define REVEAL_POINTS_COUNT 4\nuniform mat4 uRevealPoints;\nvarying vec4 vRevealPoints[REVEAL_POINTS_COUNT];\nuniform mat4 uRevealPointsPos;\nvarying vec2 vRevealPointsPos[REVEAL_POINTS_COUNT];\n\nvoid main() {\n    vUv = uv;\n\n\tfloat ratio = uResolution.x / uResolution.y;\n    vec2 simulationUv = uv;\n    simulationUv.y = 1. - simulationUv.y;\n    simulationUv = remapAtlasUv(simulationUv, uSimulationRemap);\n\tvSimulationUv = simulationUv;\n\n    mat4 revealPoints = uRevealPoints;\n\tvRevealPoints[0] = revealPoints[0];\n\tvRevealPoints[1] = revealPoints[1];\n\tvRevealPoints[2] = revealPoints[2];\n\tvRevealPoints[3] = revealPoints[3];\n\n    mat4 revealPointsPos = uRevealPointsPos;\n\tvRevealPointsPos[0] = revealPointsPos[0].xy;\n\tvRevealPointsPos[1] = revealPointsPos[1].xy;\n\tvRevealPointsPos[2] = revealPointsPos[2].xy;\n\tvRevealPointsPos[3] = revealPointsPos[3].xy;\n\n\tvec3 transformedPosition = position.xyz * uScale;\n\n    gl_Position = projectionMatrix * modelViewMatrix * vec4(transformedPosition, 1.0);\n}",fragmentShader:"#define GLSLIFY 1\nvarying vec2 vUv;\nvarying vec2 vSimulationUv;\n\n#ifndef lt\n#define lt(x, y) (1.0 - step(y, x))\n#endif\n\n#ifndef ge\n#define ge(x, y) step(y, x)\n#endif\n\nvec2 getTextureCoverUv(vec2 baseUv, vec2 resolution, vec2 textureInfos, vec2 textureScale)\n{\n\tvec2 uv = baseUv;\n\tvec2 scale = textureScale;\n\tvec2 offset = vec2(0.);\n\t\n\tfloat textureRatio = resolution.x / resolution.y;\n\tfloat imageRatio = textureInfos.x / textureInfos.y;\n    float diffRatio = imageRatio / textureRatio;\n    \n    scale.x *= lt(diffRatio, 1.) + ge(diffRatio, 1.) * diffRatio;\n    scale.y *= lt(diffRatio, 1.) / diffRatio + ge(diffRatio, 1.);\n\t\n\toffset.x += (scale.x - 1.0) * 0.5;\n\toffset.y += (scale.y - 1.0) * 0.5;\n\n\tuv /= scale;\n\tuv += offset / scale;\n\n\treturn uv;\n}\n\nstruct SDFData {\n    vec2 pixelSize;\n    vec2 planeSize;\n    vec2 scale;\n    vec2 originSize;\n    vec4 atlasRemap;\n};\n\nfloat cremap(float value, float start1, float stop1, float start2, float stop2) {\n  float r = start2 + (stop2 - start2) * ((value - start1) / (stop1 - start1));\n  return clamp(r, min(start2, stop2), max(start2, stop2));\n}\n\nfloat remap(float value, float start1, float stop1, float start2, float stop2) {\n  return start2 + (stop2 - start2) * ((value - start1) / (stop1 - start1));\n}\n\nvec2 rotateUV(vec2 uv, float rotation)\n{\n    float mid = 0.5;\n    return vec2(\n        cos(rotation) * (uv.x - mid) + sin(rotation) * (uv.y - mid) + mid,\n        cos(rotation) * (uv.y - mid) - sin(rotation) * (uv.x - mid) + mid\n    );\n}\n\nvec2 rotateUV(vec2 uv, float rotation, vec2 mid)\n{\n    return vec2(\n      cos(rotation) * (uv.x - mid.x) + sin(rotation) * (uv.y - mid.y) + mid.x,\n      cos(rotation) * (uv.y - mid.y) - sin(rotation) * (uv.x - mid.x) + mid.y\n    );\n}\n\nvec2 rotateUV(vec2 uv, float rotation, float mid)\n{\n    return vec2(\n      cos(rotation) * (uv.x - mid) + sin(rotation) * (uv.y - mid) + mid,\n      cos(rotation) * (uv.y - mid) - sin(rotation) * (uv.x - mid) + mid\n    );\n}\n\n// #pragma glslify: easeQuartOut = require(glsl-easings/quartic-out)\n// Fix to avoid negative x in pow(x, y) which doesnt work on mac hardware\nfloat easeQuartOut(float t) {\n\tfloat invT = t - 1.0;\n\treturn invT * invT * invT * (1.0 - t) + 1.0;\n}\n\n#define PI 3.141592653589793\n#define REVEAL_POINTS_COUNT 4\n\nfloat if_gt_1062606552(float value1, float value2, float result1, float result2) {\n\tfloat coef = (1.0 - step(value1, value2));\n\treturn mix(result2, result1, coef);\n}\n\nfloat circle(vec2 diff, float radius) {\n\treturn length(diff) - radius;\n}\n\nfloat getInkMask(float noise, vec2 pos, vec2 startPoint, float progress, float power, float sharpRatioMin, float sharpRatioMax) {\n\tfloat sdf = -circle(pos + startPoint, 1.) + progress;\n\tfloat baseSdf = sdf;\n\tfloat intensity = pow(sdf, power) * noise;\n\tif(baseSdf < 0.)\n\t\tintensity = 0.;\n\tintensity = cremap(intensity, sharpRatioMin, sharpRatioMax, 0.0, 1.0);\n\treturn intensity;\n}\n\nfloat getInkIntensity(vec2 pos, vec2 startPoint, float progressMask, float progressIntensity) {\n\tfloat sdf = -circle(pos + startPoint, 0.) + progressMask;\n\tfloat dist = max(0., 1. - sdf);\n\tdist = cremap(dist, .6, 1., 0., 1.) * (1. - progressIntensity);\n\tdist = (.8 + 1.2 * pow(dist, 4.));\n\treturn dist;\n}\n\nvec4 computeInkReveal(vec3 bgColor, vec3 paintColor, vec2 uv, float progress, float planeRatio, sampler2D noiseTexture, vec4 points[REVEAL_POINTS_COUNT], vec2 pointsPos[REVEAL_POINTS_COUNT], float progressMax) {\n\tvec2 pos_0 = uv;\n\tpos_0.x *= planeRatio;\n\tpos_0.x -= planeRatio * .5 - .5;\n\n\tfloat _progress = progress;\n\t// _progress = .3; /// debug\n\n\tif(planeRatio >= 1.)\n\t\t_progress *= planeRatio * 1.;\n\t// _progress *= 1.4;\n\n\tvec2 uv1 = pos_0 * 10.;\n\tvec2 uv2 = rotateUV(pos_0, PI * .3) * 12.;\n\tvec2 uv3 = rotateUV(pos_0, PI * .6) * 14.;\n\n\t/** noise texture **/\n\tvec4 noiseColor = texture2D(noiseTexture, pos_0);\n\tfloat noise1 = noiseColor.x;\n\tfloat noise2 = noiseColor.y;\n\tfloat noise3 = noiseColor.z;\n\t/**/\n\n\tfloat power = 5.0;\n\tfloat sharpRatioMin = .90;\n\tfloat sharpRatioMax = 1.0;\n\n\tvec3 inkColor = bgColor;\n\tfloat globalIntensity = 0.;\n\n\tfor(int i = 0; i < REVEAL_POINTS_COUNT; ++i) {\n\t\tvec4 point = points[i];\n\t\tvec2 startPoint = -pointsPos[i];\n\t\tstartPoint.x *= planeRatio;\n\t\tstartPoint.x += planeRatio * .5 - .5;\n\n\t\tfloat scale = point.x;\n\t\tfloat startTime = point.y;\n\t\tfloat stepDuration = point.z;\n\n\t\tfloat _progressMask = cremap(progress, startTime, startTime + stepDuration, 0., progressMax);\n\t\t_progressMask = easeQuartOut(_progressMask / progressMax) * progressMax;\n\t\t_progressMask *= scale;\n\n\t\tfloat impairCoef = mod(float(i), 2.);\n\t\tfloat _noise1 = mix(noise1, noise2, impairCoef);\n\t\tfloat _noise2 = mix(noise2, noise3, impairCoef);\n\t\tfloat _progress2Coef = mix(.85, .92, impairCoef);\n\n\t\tfloat intensity1 = getInkMask(_noise1, pos_0, startPoint, _progressMask, power, sharpRatioMin, sharpRatioMax);\n\t\tfloat intensity2 = getInkMask(_noise2, pos_0, startPoint, _progressMask * _progress2Coef, power, sharpRatioMin, sharpRatioMax);\n\n\t\tfloat _progressIntensity = cremap(progress, startTime + stepDuration * .5, startTime + stepDuration, 0., 1.);\n\t\tintensity1 *= getInkIntensity(pos_0, startPoint, _progressMask, _progressIntensity);\n\t\tintensity2 *= getInkIntensity(pos_0, startPoint, _progressMask, _progressIntensity);\n\n\t\tfloat alpha = .5 + .5 * float(i) / float(REVEAL_POINTS_COUNT);\n\t\tinkColor = mix(inkColor, paintColor, intensity1 * alpha);\n\t\tinkColor = mix(inkColor, paintColor, intensity2 * alpha);\n\n\t\tfloat _intensity = (intensity1 + intensity2) * alpha;\n\n\t\tglobalIntensity = if_gt_1062606552(_intensity, globalIntensity, _intensity, globalIntensity);\n\t}\n\n\t// inkColor = vec3(noise1, noise2, noise3);\n\n\treturn vec4(inkColor.xyz, globalIntensity);\n}\n\nuniform float uAlpha;\nuniform float uVisibleProgress;\nuniform vec2 uResolution;\nuniform vec2 uPaintTextureSize;\nuniform vec3 uColor;\nuniform sampler2D uPaintTexture;\nuniform sampler2D uPaintTexture2;\nuniform sampler2D uNoiseTexture;\nuniform sampler2D uSimulation;\n\nvarying vec4 vRevealPoints[REVEAL_POINTS_COUNT];\nvarying vec2 vRevealPointsPos[REVEAL_POINTS_COUNT];\n\n#define REVEAL_POINTS_COUNT 4\n\nvoid main() {\n    vec4 data = texture2D(uSimulation, vSimulationUv);\n\tvec2 dir = -data.rg;\n\tfloat vel = data.b;\n\tfloat blend = smoothstep(0., 0.1, vel);\n\n    float ratio = uResolution.x / uResolution.y;\n    float paintRatio = uPaintTextureSize.x / uPaintTextureSize.y;\n    float diffRatio = paintRatio / ratio;\n\n    vec2 paintUv = getTextureCoverUv(vUv, uResolution, uPaintTextureSize, vec2(1.));\n    vec3 paintColor = texture2D(uPaintTexture, paintUv).rgb;\n    vec3 paintColor2 = texture2D(uPaintTexture2, paintUv).rgb;\n\n    vec3 color = mix(paintColor, paintColor2, blend);\n    color *= 1. + (blend - 0.5) * 0.1;\n\n    vec4 inkColor = computeInkReveal(uColor, color, vUv, uVisibleProgress, ratio, uNoiseTexture, vRevealPoints, vRevealPointsPos, 0.65);\n\n    float alpha = uAlpha;\n    // alpha *= uVisibleProgress;\n\n    gl_FragColor = inkColor;\n}",uniforms:this._uniforms,transparent:!0})}},{key:"_updateRevealPoints",value:function(){var t=zY.dimensions,e=r2(t.innerWidth/t.innerHeight,1.5),n=e.positions,r=e.infos;this._uniforms.uRevealPoints.value=r,this._uniforms.uRevealPointsPos.value=n}},{key:"_createMesh",value:function(){var t=new j_(this._geometry,this._material);return t.renderOrder=500,this.add(t),t}},{key:"show",value:function(){var t,e,n=this,r=(H5-this.visibleProgress)/H5*H5;null===(t=this._showTimeline)||void 0===t||t.kill(),null===(e=this._hideTimeline)||void 0===e||e.kill();var i=ti.timeline();return i.call((function(){return n._mesh.visible=!0})),i.to(this._mesh.material.uniforms.uScale,{value:1,duration:3,ease:"power1.out"},0),i.to(this,{visibleProgress:H5,duration:r,ease:"linear"},.42),i.timeScale(2),this._showTimeline=i,this._showTimeline}},{key:"hide",value:function(){var t,e,n=this,r=2.5*(1-(H5-this.visibleProgress)/H5);null===(t=this._showTimeline)||void 0===t||t.kill(),null===(e=this._hideTimeline)||void 0===e||e.kill();var i=ti.timeline();return i.to(this,{visibleProgress:0,duration:r,ease:"linear"},0),i.to(this._mesh.material.uniforms.uScale,{value:1.4,duration:3,ease:"power1.inOut"},.25),i.call((function(){return n._mesh.visible=!1})),i.timeScale(2),this._hideTimeline=i,this._hideTimeline}},{key:"visibleProgress",get:function(){return this._uniforms.uVisibleProgress.value},set:function(t){this._uniforms.uVisibleProgress.value=t}},{key:"hasVideoTextures",get:function(){return!!this._material.uniforms.uPaintTexture.value}},{key:"setVideoTextures",value:function(t,e){this._video1=t,this._video2=e;var n=new Cx(t);n.encoding=Xv;var r=null;e&&((r=new Cx(e)).encoding=Xv),this._video1.addEventListener("loadedmetadata",this._onVideoReady),this._material.uniforms.uPaintTexture.value=n,this._material.uniforms.uPaintTexture2.value=r||n,this._resizeVideo()}},{key:"unsetVideoTextures",value:function(){this._video1.removeEventListener("loadedmetadata",this._onVideoReady)}},{key:"_onVideoReady",value:function(){this._resizeVideo()}},{key:"_resizeVideo",value:function(){this._video1&&(this._material.uniforms.uPaintTextureSize.value=this._paintSize.set(this._video1.offsetWidth,this._video1.offsetHeight))}},{key:"onWindowResize",value:function(t){var e=t.innerWidth,n=t.innerHeight;this._mesh.scale.set(e,n,1),this._material.uniforms.uResolution.value=this._resolution.set(e,n),this._resizeVideo()}},{key:"update",value:function(t){if(t.time,t.delta,this._batchSimulation){var e=this._batchSimulation.fullScreenInstance.getNormalizedDimensions();this._mesh.material.uniforms.uSimulation.value=this._batchSimulation.output,this._mesh.material.uniforms.uSimulationRemap.value.set(e.x,e.y,e.w,e.h)}}},{key:"destroy",value:function(){U5(q5(e.prototype),"destroy",this).call(this),this._material.dispose(),this._geometry.dispose()}},{key:"_createDebug",value:function(){}},{key:"updateConfig",value:function(){return this._config}}],r&&B5(n.prototype,r),i&&B5(n,i),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,i}(dY(Xb));function Q5(t){return Q5="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Q5(t)}function W5(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,i,o,a,s=[],l=!0,u=!1;try{if(o=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=o.call(n)).done)&&(s.push(r.value),s.length!==e);l=!0);}catch(t){u=!0,i=t}finally{try{if(!l&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(u)throw i}}return s}}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return Y5(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Y5(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Y5(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function K5(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,X5(r.key),r)}}function X5(t){var e=function(t,e){if("object"!=Q5(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=Q5(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Q5(e)?e:e+""}function $5(t,e,n){return e=t6(e),function(t,e){if(e&&("object"===Q5(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,Z5()?Reflect.construct(e,n||[],t6(t).constructor):e.apply(t,n))}function Z5(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(Z5=function(){return!!t})()}function J5(){return J5="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=t6(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(arguments.length<3?t:n):i.value}},J5.apply(this,arguments)}function t6(t){return t6=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},t6(t)}function e6(t,e){return e6=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},e6(t,e)}function n6(t,e){e.set(t.min.x,t.min.y,t.max.x,t.max.y)}var r6=new Ay,i6=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),$5(this,e,arguments)}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&e6(t,e)}(e,t),n=e,r=[{key:"init",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this._config=t.config,this._camera=t.camera,this._element=t.element,this._antialiasing=t.antialiasing,this._visibleArea=t.visibleArea,this._damping=t.damping,this._scrollOffset=-.06,this._raycaster=new qS,this._targetIntersectPosition=null,this._isHovered=!1,this._debug=this._createDebug(),this._elementRect=this._element.getBoundingClientRect(),this._textCanvas=this.$experienceManager.textCanvas,this._mesh=this._createPlane(),this._bindHandlers(),this._setupEventListeners(),this._textUpdateHandler()}},{key:"destroy",value:function(){J5(t6(e.prototype),"destroy",this).call(this),this._mesh.geometry.dispose(),this._mesh.material.dispose(),this._removeEventListeners()}},{key:"isHovered",get:function(){return this._isHovered}},{key:"checkTextIntersection",value:function(){var t=r6.copy(this._material.uniforms.uCursorPosition.value),e=this._material.uniforms.uQuadRatio.value/this._material.uniforms.uTextRatio.value,n=this._textCanvas.uvBoxes[3];return t.x=(t.x-.5)*e+.5,t.x=A0(t.x,[0,1],[n.min.x,n.max.x]),t.y=A0(t.y,[0,1],[n.min.y,n.max.y]),t.y=1-t.y,t.y/=this._material.uniforms.uTextRatio.value,t.y*=this._material.uniforms.uTileRatio.value,t.y+=this._material.uniforms.uScrollProgress.value*(n.max.y-n.min.y),255===this._textCanvas.fetchImageDataAtUv(t).data[3]}},{key:"_createPlane",value:function(){var t=AK.get("noise/rgb-fractal");t.wrapS=Dg,t.wrapT=Dg,this._textCanvas.texture.flipY=!1,this._material=new V_({uniforms:{map:{value:this._textCanvas.texture},uTileRatio:{value:1},uTextRatio:{value:1},uQuadRatio:{value:1},uCursorPosition:{value:new Ay(1e3,1e3)},uScrollProgress:{value:this._scrollOffset},uUvScrollProgress:{value:0},uVisibleArea:{value:this._visibleArea},uFadeProgress:{value:0},uWriteProgress:{value:0},uClampFadeOverride:{value:0},uSharpUvs:{value:new Hy},uLowBlurUvs:{value:new Hy},uHighBlurUvs:{value:new Hy},uNoise:{value:t},uFadeNoiseSize:{value:.07},uCursorFactor:{value:1}},defines:{ANTIALIASING:this._antialiasing},vertexShader:"#define GLSLIFY 1\nvarying vec2 vUv;\n\nvoid main() {\n  gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n\n  vUv = uv;\n}",fragmentShader:"precision highp float;\n#define GLSLIFY 1\n\nuniform sampler2D map;\nuniform sampler2D uNoise;\n\nuniform vec2 uCursorPosition;\nuniform float uCursorFactor;\nuniform float uTileRatio;\nuniform float uQuadRatio;\nuniform float uTextRatio;\nuniform float uScrollProgress;\nuniform float uUvScrollProgress;\nuniform float uVisibleArea;\n\nuniform vec4 uSharpUvs;\nuniform vec4 uLowBlurUvs;\nuniform vec4 uHighBlurUvs;\n\nuniform float uClampFadeOverride;\nuniform float uFadeProgress;\nuniform float uFadeNoiseSize;\nuniform float uWriteProgress;\n\nvarying vec2 vUv;\n\nfloat remap(float value, float start1, float stop1, float start2, float stop2) {\n  return start2 + (stop2 - start2) * ((value - start1) / (stop1 - start1));\n}\n\nvec2 remapAtlasUv(vec2 uv, vec4 atlasRemap) {\n    vec2 _uv = uv;\n    _uv.x = remap(_uv.x, 0., 1., atlasRemap.x, atlasRemap.x + atlasRemap.z);\n    _uv.y = remap(_uv.y, 0., 1., atlasRemap.y, atlasRemap.y + atlasRemap.w);\n    return _uv;\n}\n\nvec2 remapAtlasUv(vec2 uv, vec4 boxSize, vec4 atlasRemap) {\n    vec2 _uv = uv;\n    _uv.x = remap(_uv.x, 0., 1., boxSize.x, boxSize.z);\n    _uv.y = remap(_uv.y, 1., 0., boxSize.y, boxSize.w);\n    _uv.x = remap(_uv.x, 0., 1., atlasRemap.x, atlasRemap.x + atlasRemap.z);\n    _uv.y = remap(_uv.y, 0., 1., atlasRemap.y, atlasRemap.y + atlasRemap.w);\n    return _uv;\n}\n\nfloat cremap(float value, float start1, float stop1, float start2, float stop2) {\n  float r = start2 + (stop2 - start2) * ((value - start1) / (stop1 - start1));\n  return clamp(r, min(start2, stop2), max(start2, stop2));\n}\n\nfloat quarticInOut(float t) {\n  return t < 0.5\n    ? +8.0 * pow(t, 4.0)\n    : -8.0 * pow(t - 1.0, 4.0) + 1.0;\n}\n\nfloat cubicIn(float t) {\n  return t * t * t;\n}\n\nfloat cubicOut(float t) {\n  float f = t - 1.0;\n  return f * f * f + 1.0;\n}\n\nfloat quadraticOut(float t) {\n  return -t * (t - 2.0);\n}\n\nfloat sampleAlpha(vec2 uv, vec4 uvRemap) {\n  float quadToTextRatio = uQuadRatio / uTextRatio;\n  vec2 sampleUvs = uv;\n  sampleUvs.x = ((sampleUvs.x - 0.5) * quadToTextRatio) + 0.5;\n  vec2 boundUvs = sampleUvs;\n  sampleUvs.x = remap(sampleUvs.x, 0., 1., uvRemap.x, uvRemap.z);\n  sampleUvs.y = remap(sampleUvs.y, 0., 1., uvRemap.y, uvRemap.w);\n  sampleUvs.y = 1. - sampleUvs.y;\n  sampleUvs.y /= uTextRatio;\n  sampleUvs.y *= uTileRatio;\n  sampleUvs.y = sampleUvs.y;\n  sampleUvs.y += uScrollProgress * (uvRemap.w - uvRemap.y);\n  \n  float texel = texture2D(map, sampleUvs).a;\n  if (boundUvs.x < -0.05) return 0.;\n  if (boundUvs.x > 0.95) return 0.;\n  return texel;\n}\n\nvoid main() {\n  // Noise uv\n  float quadToTextRatio = uQuadRatio / uTextRatio;\n  vec2 noiseBaseUv = vUv;\n  noiseBaseUv.x = ((noiseBaseUv.x - 0.5) * quadToTextRatio) + 0.5;\n\n  // Area blur\n  vec4 distNoise = texture2D(uNoise, (noiseBaseUv - vec2(0.6, uUvScrollProgress)) * 1.2);\n  float distNoiseR = quarticInOut(distNoise.r);\n  float size = 0.05;\n  float dist = length((vUv - uCursorPosition) / vec2(1., uQuadRatio));\n  dist = abs(0.15 - dist);\n  dist = cremap(dist, 0., size / 2. + distNoiseR * size * 4., 1., 0.);\n\tdist = smoothstep(0., 1., dist) * distNoise.g;\n\n  // Clamp noise\n  float clampFadeNoise = texture2D(uNoise, noiseBaseUv * 0.7).r;\n  clampFadeNoise = (clampFadeNoise - 0.5) * 2.;\n  clampFadeNoise *= 0.2;\n\n  // Top & Bottom factor\n  float clampFade = abs(vUv.y + clampFadeNoise - 0.5) * 2. / uVisibleArea;\n  float baseClampFade = clampFade;\n  clampFade = mix(clampFade, 1., uClampFadeOverride);\n  clampFade = cubicIn(clampFade);\n\n  // Displacement noise\n  vec4 fadeDisplacementNoise = texture2D(uNoise, (noiseBaseUv - vec2(0., uUvScrollProgress)) * uFadeNoiseSize);\n\n  // Write animation\n  float writeAnimationNoise = fadeDisplacementNoise.r;\n  float writeAnimationProgress = min(uWriteProgress + quarticInOut(writeAnimationNoise) * 0.5 * cubicIn(uWriteProgress), 1.);\n\n  float fadeDisplacementAmount = 0.2;\n  float fadeProgress = pow(max(uFadeProgress - quarticInOut(fadeDisplacementNoise.b) * 0.5, 0.), 2.) * 4.;\n  vec2 fadeDisplacement = (fadeDisplacementNoise.rg - 0.5) * 2. * fadeProgress * fadeDisplacementAmount;\n  fadeDisplacement += (fadeDisplacementNoise.gb - 0.5) * 2. * writeAnimationProgress * fadeDisplacementAmount;\n\n  dist *= smoothstep(0.5, 0., fadeProgress) * smoothstep(0.5, 0., writeAnimationProgress) * uCursorFactor;\n\n  // Displacement\n  vec2 displacement = -(fadeDisplacementNoise.br - 0.5) * 2. * vec2(1., mix(0.1, 1., writeAnimationProgress));\n\n  float displacementAmount = 0.15;\n  // displacementAmount *= clampFade * 0.7;\n  displacementAmount *= max(clampFade * 0.4, dist * 0.2);\n  // displacementAmount = max(displacementAmount, writeAnimationProgress * 0.07);\n  displacement = displacement * displacementAmount - vec2(0.01, 0.);\n\n  // Blur\n  float blurNoiseScale = 0.44;\n  float noiseBlur = texture2D(uNoise, (noiseBaseUv - vec2(0.3, uUvScrollProgress)) * blurNoiseScale).g;\n  noiseBlur = quarticInOut(noiseBlur);\n  \n  float clampFadeWithDist = mix(baseClampFade, 1., dist);\n  float blurAmount = smoothstep(mix(0.5, 0.3, smoothstep(0.1, 0.4, clampFadeWithDist * clampFadeWithDist)), 1., noiseBlur) * mix(clampFadeWithDist, 0.7, dist);\n  // blurAmount = max(clampFade * 2., blurAmount);\n  blurAmount = max(clampFade * 0.7, blurAmount);\n  // blurAmount = max(dist * 0.7, blurAmount);\n  blurAmount = max(cubicOut(length(fadeDisplacement) * 15.), blurAmount);\n  blurAmount = max(writeAnimationProgress, blurAmount);\n\n  // Samples\n  vec2 uv = vUv + displacement + fadeDisplacement * 0.5;\n  float sharpTexture = sampleAlpha(uv, uSharpUvs);\n  #ifdef ANTIALIASING\n    sharpTexture = sharpTexture - 0.5;\n    sharpTexture = clamp(sharpTexture / fwidth(sharpTexture) + 0.5, 0.0, 1.0);\n  #endif\n  float lowBlurTexture = sampleAlpha(uv, uLowBlurUvs);\n  float highBlurTexture = sampleAlpha(uv, uHighBlurUvs);\n\n  float sharpAmount = smoothstep(0.5, 0., blurAmount);\n  float lowBlurAmount = smoothstep(0.5, 0., abs(blurAmount - 0.5));\n  float highBlurAmount = smoothstep(0.5,1.0, blurAmount);\n\n  float alpha = sharpTexture * sharpAmount + lowBlurTexture * lowBlurAmount + highBlurTexture * highBlurAmount;\n  alpha = min(alpha, 1.);\n\n  alpha = cremap(alpha, quadraticOut(writeAnimationProgress) * 0.5, 1., 0., 1.);\n  // alpha = cremap(alpha, writeAnimationProgress * 0.5, 1., 0., 1.);\n  alpha *= (1. - uFadeProgress);\n  alpha *= (1. - clampFade);\n\n  // gl_FragColor = mix(sharpTexture, highBlurTexture, blurAmount);\n  // gl_FragColor = vec4(vec3(sharpTexture, lowBlurTexture * 2., cubicOut(highBlurTexture * 2.)), 1.);\n  gl_FragColor = vec4(vec3(0.), alpha);\n  // gl_FragColor = vec4(vec3(dist), 1.);\n\n  // gl_FragColor = vec4(vec3(uFadeProgress), 1.);\n}\n",transparent:!0,depthTest:!1});var e=new sw(1,1,1,1),n=new j_(e,this._material);return n.renderOrder=1,this.add(n),n}},{key:"animateScrollIn",value:function(){var t=ti.timeline();return t.fromTo(this,{_scrollOffset:-.26},{_scrollOffset:-.06,duration:2,ease:"power2.out"},0),t}},{key:"fadeOut",value:function(){var t=ti.timeline();return t.fromTo(this._material.uniforms.uClampFadeOverride,{value:0},{value:1,duration:2,ease:"power2.out"},0),t}},{key:"fadeIn",value:function(){var t=ti.timeline();return t.fromTo(this._material.uniforms.uClampFadeOverride,{value:1},{value:0,duration:3,ease:"power3.in"}),t.set(this._material.uniforms.uFadeProgress,{value:0},0),t}},{key:"customFadeOut",value:function(){var t=ti.timeline();return t.fromTo(this._material.uniforms.uFadeProgress,{value:0},{value:.97,duration:1,ease:"linear"}),t}},{key:"writeFadeIn",value:function(){var t=ti.timeline();return t.fromTo(this._material.uniforms.uWriteProgress,{value:.7},{value:0,duration:1,ease:"power1.out"}),t.set(this._material.uniforms.uFadeProgress,{value:0},0),t.set(this._material.uniforms.uClampFadeOverride,{value:0},0),t}},{key:"update",value:function(t){var e=t.delta;if(t.time,this._updateScroll(),this._material.uniforms.uCursorPosition.value&&this._targetIntersectPosition){var n=Math.min(e,.04),r=1-Math.exp(-this._damping*n);this._material.uniforms.uCursorPosition.value.lerp(this._targetIntersectPosition,r)}}},{key:"_updateScroll",value:function(){var t=KY.sectionProgress;this._material.uniforms.uScrollProgress.value=t+this._scrollOffset;var e=t*this._textCanvas.canvasPixelHeight;this._material.uniforms.uUvScrollProgress.value=e/this._elementRect.height}},{key:"onMousemove",value:function(t){var e=t.ndc;if(!yZ()){this._raycaster.setFromCamera(e,this._camera);var n=W5(this._raycaster.intersectObject(this._mesh),1)[0];this._isHovered=!!n,n&&(this._targetIntersectPosition||(this._targetIntersectPosition=n.uv.clone(),this._material.uniforms.uCursorPosition.value=n.uv.clone()),this._targetIntersectPosition.copy(n.uv))}}},{key:"onWindowResize",value:function(t){this._elementRect=this._element.getBoundingClientRect(),this._updateMeshPosition()}},{key:"_bindHandlers",value:function(){this._textUpdateHandler=this._textUpdateHandler.bind(this)}},{key:"_setupEventListeners",value:function(){this._textCanvas.addEventListener("resize",this._textUpdateHandler)}},{key:"_removeEventListeners",value:function(){this._textCanvas.removeEventListener("resize",this._textUpdateHandler)}},{key:"_textUpdateHandler",value:function(){var t=this._textCanvas.pixelBoxes[0].max.x-this._textCanvas.pixelBoxes[0].min.x,e=this._textCanvas.pixelBoxes[0].max.y-this._textCanvas.pixelBoxes[0].min.y;this._material.uniforms.uTileRatio.value=t/e,n6(this._textCanvas.uvBoxes[0],this._material.uniforms.uSharpUvs.value),n6(this._textCanvas.uvBoxes[1],this._material.uniforms.uLowBlurUvs.value),n6(this._textCanvas.uvBoxes[2],this._material.uniforms.uHighBlurUvs.value)}},{key:"_updateMeshPosition",value:function(){var t=zY.dimensions,e=t.innerWidth,n=t.innerHeight;this._mesh.position.set(-(e-this._elementRect.width)/2+this._elementRect.left,(n-this._elementRect.height)/2-this._elementRect.top-window.scrollY,0),this._mesh.scale.set(this._elementRect.width+200,this._elementRect.height,1),this._material.uniforms.uQuadRatio.value=(this._elementRect.width+200)/this._elementRect.height,this._material.uniforms.uTextRatio.value=this._elementRect.width/this._elementRect.height}},{key:"_createDebug",value:function(){if(lK)return lK.addFolder({title:"Text",expanded:!1,tab:this._config.name})}}],r&&K5(n.prototype,r),i&&K5(n,i),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,i}(dY(Xb));function o6(t){return o6="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o6(t)}function a6(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,s6(r.key),r)}}function s6(t){var e=function(t,e){if("object"!=o6(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=o6(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==o6(e)?e:e+""}function l6(t,e,n){return e=d6(e),function(t,e){if(e&&("object"===o6(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,u6()?Reflect.construct(e,n||[],d6(t).constructor):e.apply(t,n))}function u6(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(u6=function(){return!!t})()}function c6(){return c6="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=d6(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(arguments.length<3?t:n):i.value}},c6.apply(this,arguments)}function d6(t){return d6=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},d6(t)}function f6(t,e){return f6=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},f6(t,e)}var h6=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),l6(this,e,arguments)}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&f6(t,e)}(e,t),n=e,r=[{key:"init",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this._config=t.config,this._debug=this._createDebug(),this._resourceManager=this._createResourceManager(),this._scene=this._createScene(),this._cameraManager=this._createCameraManager(),this._components=null}},{key:"destroy",value:function(){c6(d6(e.prototype),"destroy",this).call(this),this._cameraManager.destroy(),this._destroyComponents()}},{key:"scene",get:function(){return this._scene}},{key:"camera",get:function(){var t;return null===(t=this._cameraManager.active)||void 0===t?void 0:t.instance}},{key:"prepare",value:function(){if(this._components=this._createComponents(),this.$composer){this.$renderer.instance.compile(this._scene,this._cameraManager.active.instance);var t=this.$renderer.instance.getRenderTarget(),e=this.$composer.renderTarget;this.$renderer.instance.setRenderTarget(e),this.$renderer.render(this._scene,this._cameraManager.active.instance),this.$renderer.instance.setRenderTarget(t)}}},{key:"show",value:function(){var t,e=this;this._components||this._resourceManager.load().then((function(){var t;e._components=e._createComponents(),null===(t=e._components.textMesh)||void 0===t||t.animateScrollIn()}));var n=ti.timeline();return null!==(t=this._components)&&void 0!==t&&t.textMesh&&("hidePoem"===this.$experienceManager.transitionState.meta||"poemToOffers"===this.$experienceManager.transitionState.meta?n.add(this._components.textMesh.writeFadeIn(),0):n.add(this._components.textMesh.animateScrollIn(),.8)),n}},{key:"hide",value:function(t){var e=this,n=ti.timeline({onComplete:t});return this._components.textMesh&&n.add(this._components.textMesh.customFadeOut(),0),n.call((function(){e._cameraManager.disable()}),null,0),n}},{key:"checkPoemIntersection",value:function(){var t,e;return(null===(t=this._components.textMesh)||void 0===t?void 0:t.isHovered)&&(null===(e=this._components.textMesh)||void 0===e?void 0:e.checkTextIntersection())}},{key:"_createResourceManager",value:function(){return new EK({namespace:this._config.name})}},{key:"_createScene",value:function(){return new UE}},{key:"_createCameraManager",value:function(){var t=new oZ({config:this._config,renderer:this.$renderer.instance,scene:this._scene,cameras:[{name:"orbit",camera:pZ,options:{near:1,far:4e3,fov:50}},{name:"ui",camera:D5},{name:"scroll",camera:zZ}]});return t.activate("ui"),t}},{key:"_createComponents",value:function(){var t={};return t.textMesh=this._createTextComponent(),t.fullPaintMesh=this._createFullPaintComponent(),IY&&(t.debugTexture=this._createDebugTextureComponent()),t}},{key:"_createTextComponent",value:function(){var t=new i6({config:this._config,camera:this._cameraManager.get("ui").instance,element:document.querySelector(".xp-section .xp-text-sizer"),visibleArea:.95,damping:6});return t._material.uniforms.uFadeNoiseSize.value=.25,t._material.uniforms.uCursorFactor.value=1,this._scene.add(t),t}},{key:"_createFullPaintComponent",value:function(){var t=new V5({config:this._config});return this._scene.add(t),t}},{key:"_createDebugTextureComponent",value:function(){var t=new nJ({config:this._config});return this._scene.add(t),t}},{key:"_destroyComponents",value:function(){if(this._components)for(var t in this._components)"function"==typeof this._components[t].destroy&&this._components[t].destroy()}},{key:"update",value:function(t){var e,n=t.time,r=t.delta;null===(e=this._dropshadows)||void 0===e||e.update({time:n,delta:r}),this._updateComponents({time:n,delta:r}),this._cameraManager.update({time:n,delta:r})}},{key:"_updateComponents",value:function(t){var e,n=t.time,r=t.delta;for(var i in this._components)"function"==typeof(e=this._components[i]).update&&e.update({time:n,delta:r})}},{key:"onWindowResize",value:function(t){this._cameraManager.resize(t.renderWidth,t.renderHeight)}},{key:"_createDebug",value:function(){if(lK){var t=lK.addFolder({title:"Scene",tab:this._config.name});return t.addInput(lK,"isHelpersVisible",{label:"helpers"}),t}}}],r&&a6(n.prototype,r),i&&a6(n,i),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,i}(dY());const p6={name:"UI",class:h6,renderer:{clearColor:"#ffffff"},composer:{},resources:{preload:{development:!0,production:!0},items:[]}};function m6(t){return m6="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},m6(t)}function g6(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,v6(r.key),r)}}function v6(t){var e=function(t,e){if("object"!=m6(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=m6(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==m6(e)?e:e+""}function y6(t,e,n){return e=_6(e),function(t,e){if(e&&("object"===m6(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,b6()?Reflect.construct(e,n||[],_6(t).constructor):e.apply(t,n))}function b6(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(b6=function(){return!!t})()}function _6(t){return _6=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},_6(t)}function w6(t,e){return w6=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},w6(t,e)}var A6=!1,E6=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),y6(this,e,arguments)}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&w6(t,e)}(e,t),n=e,r=[{key:"init",value:function(t){var e,n;this._config=t.config,this._watercolorView=this.$viewManager.get("Watercolor").instance,this._batchSimulation=null===(e=this._watercolorView._components)||void 0===e||null===(e=e.papersContainer)||void 0===e?void 0:e.batchSimulation,this._fullScreenInstance=null===(n=this._batchSimulation)||void 0===n?void 0:n.fullScreenInstance,this._mesh=this._createMesh(),this._debug=this._createDebug()}},{key:"_createMesh",value:function(){var t,e,n=new sw(2,2),r=null===(t=this._batchSimulation)||void 0===t?void 0:t.fullScreenInstance.getNormalizedDimensions(),i=AK.get("watercolor/paper/texture");i.wrapS=Dg,i.wrapT=Dg;var o=new V_({uniforms:{uSimulation:{value:null===(e=this._batchSimulation)||void 0===e?void 0:e.output},uSimulationRemap:{value:new Hy(null==r?void 0:r.x,null==r?void 0:r.y,null==r?void 0:r.w,null==r?void 0:r.h)},uRatio:{value:1},uPaperTexture:{value:i},uColor:{value:new By("#dcdcdc")},uSimulationAlpha:{value:1}},defines:{BACKGROUND_TEXTURE:A6},fragmentShader:"#define GLSLIFY 1\nvarying vec2 vUv;\nvarying vec2 vSimulationUv;\n\nuniform sampler2D uSimulation;\nuniform float uSimulationAlpha;\nuniform sampler2D uPaperTexture;\n\nuniform float uRatio;\nuniform vec3 uColor;\n\n#ifdef BACKGROUND_TEXTURE\n    uniform sampler2D uTexture;\n    uniform float uTextureRatio;\n#else\n    uniform vec3 uPaintColor1;\n    uniform vec3 uPaintColor2;\n#endif\n\nfloat cremap(float value, float start1, float stop1, float start2, float stop2) {\n  float r = start2 + (stop2 - start2) * ((value - start1) / (stop1 - start1));\n  return clamp(r, min(start2, stop2), max(start2, stop2));\n}\n\nfloat remap(float value, float start1, float stop1, float start2, float stop2) {\n  return start2 + (stop2 - start2) * ((value - start1) / (stop1 - start1));\n}\n\nvec2 remapAtlasUv(vec2 uv, vec4 atlasRemap) {\n    vec2 _uv = uv;\n    _uv.x = remap(_uv.x, 0., 1., atlasRemap.x, atlasRemap.x + atlasRemap.z);\n    _uv.y = remap(_uv.y, 0., 1., atlasRemap.y, atlasRemap.y + atlasRemap.w);\n    return _uv;\n}\n\nvec2 remapAtlasUv(vec2 uv, vec4 boxSize, vec4 atlasRemap) {\n    vec2 _uv = uv;\n    _uv.x = remap(_uv.x, 0., 1., boxSize.x, boxSize.z);\n    _uv.y = remap(_uv.y, 1., 0., boxSize.y, boxSize.w);\n    _uv.x = remap(_uv.x, 0., 1., atlasRemap.x, atlasRemap.x + atlasRemap.z);\n    _uv.y = remap(_uv.y, 0., 1., atlasRemap.y, atlasRemap.y + atlasRemap.w);\n    return _uv;\n}\n\nfloat sdBox( in vec2 p, in vec2 b )\n{\n    vec2 d = abs(p)-b;\n    return length(max(d,0.0)) + min(max(d.x,d.y),0.0);\n}\n\nvoid main() {\n    vec4 data = texture2D(uSimulation, vSimulationUv);\n\tvec2 dir = -data.rg;\n\tfloat vel = data.b;\n\tfloat blend = smoothstep(0., 0.1, vel);\n\tfloat offset = smoothstep(0.05, 0.15, vel);\n    \n    vec2 paperUv = vUv;\n    paperUv.x *= uRatio;\n    paperUv *= 3.;\n    vec4 paperTexture = texture2D(uPaperTexture, paperUv);\n\n    #ifdef BACKGROUND_TEXTURE\n        vec2 textureUv = vUv;\n        if (uRatio > uTextureRatio) textureUv.y /= uTextureRatio;\n        if (uRatio <= uTextureRatio) textureUv.x /= uTextureRatio;\n\n        float sdf = sdBox(textureUv - 0.5, vec2(0.5, 0.5));\n        sdf = smoothstep(0., -0.05, sdf);\n\n        textureUv += normalize(dir) * smoothstep(0.001, 0.05, vel) * 0.01 * sdf;\n\n        vec4 texel = texture2D(uTexture, textureUv);\n        vec3 backgroundColor = texel.rgb * mix(uColor, vec3(1.), 0.3);\n    #else\n        vec3 backgroundColor = mix(uPaintColor1, uPaintColor2, data.a);\n    #endif\n\n    vec3 color = mix(uColor, backgroundColor, blend * uSimulationAlpha);\n    color *= mix(vec3(1.), paperTexture.rgb, uSimulationAlpha);\n\n    gl_FragColor = vec4(color, 1.);\n}",vertexShader:"#define GLSLIFY 1\nvarying vec2 vUv;\nvarying vec2 vSimulationUv;\n\nuniform vec4 uSimulationRemap;\n\nuniform float uRatio;\n\nfloat remap(float value, float start1, float stop1, float start2, float stop2) {\n  return start2 + (stop2 - start2) * ((value - start1) / (stop1 - start1));\n}\n\nvec2 remapAtlasUv(vec2 uv, vec4 atlasRemap) {\n    vec2 _uv = uv;\n    _uv.x = remap(_uv.x, 0., 1., atlasRemap.x, atlasRemap.x + atlasRemap.z);\n    _uv.y = remap(_uv.y, 0., 1., atlasRemap.y, atlasRemap.y + atlasRemap.w);\n    return _uv;\n}\n\nvec2 remapAtlasUv(vec2 uv, vec4 boxSize, vec4 atlasRemap) {\n    vec2 _uv = uv;\n    _uv.x = remap(_uv.x, 0., 1., boxSize.x, boxSize.z);\n    _uv.y = remap(_uv.y, 1., 0., boxSize.y, boxSize.w);\n    _uv.x = remap(_uv.x, 0., 1., atlasRemap.x, atlasRemap.x + atlasRemap.z);\n    _uv.y = remap(_uv.y, 0., 1., atlasRemap.y, atlasRemap.y + atlasRemap.w);\n    return _uv;\n}\n\nvoid main() {\n    vec2 simulationUv = uv;\n    simulationUv.y = ((simulationUv.y - 0.5) / uRatio) + 0.5;\n    simulationUv.y = 1. - simulationUv.y;\n    simulationUv = remapAtlasUv(simulationUv, uSimulationRemap);\n\n    gl_Position = vec4(position, 1.);\n    vSimulationUv = simulationUv;\n\tvUv = uv;\n}",depthWrite:!1});o.uniforms.uPaintColor1={value:new By("#cdcdd1")},o.uniforms.uPaintColor2={value:new By("#bec1c6")};var a=new j_(n,o);return a.renderOrder=-10,a.frustumCulled=!1,this.add(a),a}},{key:"fadeIn",value:function(){return ti.fromTo(this._mesh.material.uniforms.uSimulationAlpha,{value:0},{value:1,duration:4,ease:"linear"})}},{key:"fadeOut",value:function(){return ti.to(this._mesh.material.uniforms.uSimulationAlpha,{value:0,duration:3.5,ease:"linear"})}},{key:"update",value:function(t){var e=t.time,n=t.delta;this._batchSimulation&&(this._batchSimulation.update({time:e,delta:n}),this._mesh.material.uniforms.uSimulation.value=this._batchSimulation.output)}},{key:"onWindowResize",value:function(t){this._mesh.material.uniforms.uRatio.value=1}},{key:"_createDebug",value:function(){var t,e=this;if(lK){var n=lK.addFolder({title:"Background",tab:this._config.name,index:0}),r={value:(null===(t=this._fullScreenInstance)||void 0===t?void 0:t._mockedMeshScreenSpaceSize.x)||0};return n.addInput(new p1(this._mesh.material.uniforms.uColor,"value"),"value",{label:"Color"}),n.addInput(r,"value",{label:"Simulation size",step:.1}).on("change",(function(t){var n=t.value;e._fullScreenInstance._mockedMeshScreenSpaceSize.x=n,e._fullScreenInstance._mockedMeshScreenSpaceSize.y=n})),n.addInput(new p1(this._mesh.material.uniforms.uPaintColor1,"value"),"value",{label:"Paint Color 1"}),n.addInput(new p1(this._mesh.material.uniforms.uPaintColor2,"value"),"value",{label:"Paint Color 2"}),n}}}],r&&g6(n.prototype,r),i&&g6(n,i),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,i}(dY(Xb));function x6(t){return x6="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},x6(t)}function S6(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,T6(r.key),r)}}function T6(t){var e=function(t,e){if("object"!=x6(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=x6(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==x6(e)?e:e+""}function C6(t,e,n){return e=P6(e),function(t,e){if(e&&("object"===x6(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,I6()?Reflect.construct(e,n||[],P6(t).constructor):e.apply(t,n))}function I6(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(I6=function(){return!!t})()}function k6(){return k6="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=P6(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(arguments.length<3?t:n):i.value}},k6.apply(this,arguments)}function P6(t){return P6=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},P6(t)}function R6(t,e){return R6=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},R6(t,e)}var O6=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),C6(this,e,arguments)}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&R6(t,e)}(e,t),n=e,r=[{key:"init",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this._config=t.config,this._closeButton=document.querySelector(".xp-poem-btn"),this._debug=this._createDebug(),this._resourceManager=this._createResourceManager(),this._scene=this._createScene(),this._cameraManager=this._createCameraManager(),this._components=null,this._bindHandlers()}},{key:"destroy",value:function(){k6(P6(e.prototype),"destroy",this).call(this),this._destroyComponents(),this._bind(!1)}},{key:"scene",get:function(){return this._scene}},{key:"camera",get:function(){var t;return null===(t=this._cameraManager.active)||void 0===t?void 0:t.instance}},{key:"prepare",value:function(){if(this._components=this._createComponents(),this.$composer){this.$renderer.instance.compile(this._scene,this._cameraManager.active.instance);var t=this.$renderer.instance.getRenderTarget(),e=this.$composer.renderTarget;this.$renderer.instance.setRenderTarget(e),this.$renderer.render(this._scene,this._cameraManager.active.instance),this.$renderer.instance.setRenderTarget(t)}}},{key:"show",value:function(){this._components||(this._components=this._createComponents()),this._closeButton.style.pointerEvents="all",this._bind(!0);var t=ti.timeline();return this._components&&(t.add(this._components.textMesh.writeFadeIn(),0),t.add(this._components.background.fadeIn(),0),t.to(this._closeButton,{opacity:1,duration:.8,ease:"sine.inOut"},.5)),t}},{key:"hide",value:function(t){var e=this;this._closeButton.style.pointerEvents="none",this._bind(!1);var n=ti.timeline({onComplete:t});return n.add((function(){e._cameraManager.disable()}),0),"poemToOffers"===this.$experienceManager.transitionState.meta?(n.add(this._components.textMesh.customFadeOut().timeScale(3),0),n.add(this._components.background.fadeOut().timeScale(3),0)):(n.add(this._components.textMesh.customFadeOut().timeScale(1),0),n.add(this._components.background.fadeOut().timeScale(3),0)),n.to(this._closeButton,{opacity:0,duration:.6,ease:"sine.inOut"},0),n}},{key:"_createResourceManager",value:function(){return new EK({namespace:this._config.name})}},{key:"_createScene",value:function(){return new UE}},{key:"_createCameraManager",value:function(){var t=new oZ({config:this._config,renderer:this.$renderer.instance,scene:this._scene,cameras:[{name:"orbit",camera:pZ,options:{near:1,far:4e3,fov:50}},{name:"ui",camera:D5}]});return t.activate("ui"),t}},{key:"_createComponents",value:function(){var t={};return t.textMesh=this._createTextComponent(),t.background=this._createBackgroundComponent(),IY&&(t.debugTexture=this._createDebugTextureComponent()),t}},{key:"_createTextComponent",value:function(){var t=new i6({config:this._config,camera:this._cameraManager.get("ui").instance,element:document.querySelector(".xp-fulltext"),visibleArea:1.25,antialiasing:!0,damping:3});return t._material.uniforms.uFadeNoiseSize.value=.07,t._material.uniforms.uCursorFactor.value=0,this._scene.add(t),t}},{key:"_createBackgroundComponent",value:function(){var t=new E6({config:this._config});return this._scene.add(t),t}},{key:"_createDebugTextureComponent",value:function(){var t=new nJ({config:this._config});return this._scene.add(t),t}},{key:"_destroyComponents",value:function(){if(this._components)for(var t in this._components)"function"==typeof this._components[t].destroy&&this._components[t].destroy()}},{key:"update",value:function(t){var e,n=t.time,r=t.delta;null===(e=this._dropshadows)||void 0===e||e.update({time:n,delta:r}),this._updateComponents({time:n,delta:r}),this._cameraManager.update({time:n,delta:r})}},{key:"_updateComponents",value:function(t){var e,n=t.time,r=t.delta;for(var i in this._components)"function"==typeof(e=this._components[i]).update&&e.update({time:n,delta:r})}},{key:"onWindowResize",value:function(t){this._cameraManager.resize(t.renderWidth,t.renderHeight)}},{key:"_bindHandlers",value:function(){this._onCloseClick=this._onCloseClick.bind(this),this._onCloseOverOut=this._onCloseOverOut.bind(this)}},{key:"_bind",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&!arguments[0]?"removeEventListener":"addEventListener";this._closeButton[t]("click",this._onCloseClick),this._closeButton[t]("mouseenter",this._onCloseOverOut),this._closeButton[t]("mouseleave",this._onCloseOverOut)}},{key:"_onCloseOverOut",value:function(t){"mouseenter"===t.type&&this.$audioManager.playSound("over-cta-back")}},{key:"_onCloseClick",value:function(){this.$experienceManager.hideFullscreenPoem()}},{key:"_createDebug",value:function(){if(lK){var t=lK.addFolder({title:"Scene",tab:this._config.name});return t.addInput(lK,"isHelpersVisible",{label:"helpers"}),t}}}],r&&S6(n.prototype,r),i&&S6(n,i),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,i}(dY());function M6(t){return M6="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},M6(t)}function L6(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,D6(r.key),r)}}function D6(t){var e=function(t,e){if("object"!=M6(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=M6(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==M6(e)?e:e+""}function N6(t,e,n){return e=z6(e),function(t,e){if(e&&("object"===M6(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,B6()?Reflect.construct(e,n||[],z6(t).constructor):e.apply(t,n))}function B6(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(B6=function(){return!!t})()}function j6(){return j6="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=z6(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(arguments.length<3?t:n):i.value}},j6.apply(this,arguments)}function z6(t){return z6=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},z6(t)}function F6(t,e){return F6=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},F6(t,e)}const U6=[R5,p6,{name:"Poem",class:O6,renderer:{clearColor:"#ffffff"},composer:{final:{enabled:!1},gammaCorrection:{enabled:!0}},resources:{preload:{development:!0,production:!0},items:[]}},{name:"Debug",class:function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),N6(this,e,arguments)}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&F6(t,e)}(e,t),n=e,r=[{key:"init",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this._config=t.config,this._debug=this._createDebug(),this._resourceManager=this._createResourceManager(),this._scene=this._createScene(),this._cameraManager=this._createCameraManager(),this._components=null}},{key:"destroy",value:function(){j6(z6(e.prototype),"destroy",this).call(this),this._destroyComponents()}},{key:"scene",get:function(){return this._scene}},{key:"camera",get:function(){var t;return null===(t=this._cameraManager.active)||void 0===t?void 0:t.instance}},{key:"show",value:function(){var t=this;return this._components||this._resourceManager.load().then((function(){t._components=t._createComponents()})),this._timelineShow=ti.timeline(),this._timelineShow.call((function(){return t._cameraManager.enable()}),null,0),this._timelineShow}},{key:"hide",value:function(t){var e=this;return this._timelineHide=ti.timeline({onComplete:t}),this._timelineHide.call((function(){e._cameraManager.disable(),e._removeEventListeners()}),null,0),this._timelineHide}},{key:"_createResourceManager",value:function(){return new EK({namespace:this._config.name})}},{key:"_createScene",value:function(){return new UE}},{key:"_createCameraManager",value:function(){var t=new oZ({config:this._config,renderer:this.$renderer.instance,scene:this._scene,cameras:[{name:"orbit",camera:pZ,options:{near:1,far:4e3,fov:50}},{name:"ui",camera:D5}]});return t.activate("ui"),t}},{key:"_createComponents",value:function(){var t={};return t.debugTexture=this._createDebugTextureComponent(),t}},{key:"_createDebugTextureComponent",value:function(){var t=new nJ({config:this._config});return this._scene.add(t),t}},{key:"_destroyComponents",value:function(){if(this._components)for(var t in this._components)"function"==typeof this._components[t].destroy&&this._components[t].destroy()}},{key:"update",value:function(t){var e=t.time,n=t.delta;this._updateComponents({time:e,delta:n}),this._cameraManager.update({time:e,delta:n})}},{key:"_updateComponents",value:function(t){var e,n=t.time,r=t.delta;for(var i in this._components)"function"==typeof(e=this._components[i]).update&&e.update({time:n,delta:r})}},{key:"onWindowResize",value:function(t){this._cameraManager.resize(t.renderWidth,t.renderHeight)}},{key:"onScroll",value:function(){}},{key:"_createDebug",value:function(){if(lK)return lK.addFolder({title:"Scene",tab:this._config.name})}}],r&&L6(n.prototype,r),i&&L6(n,i),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,i}(dY()),renderer:{clearColor:"#ffffff"},composer:{},resources:{preload:{development:!0,production:!0},items:[]}}];function q6(t){return q6="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},q6(t)}function G6(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return H6(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return H6(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return a=t.done,t},e:function(t){s=!0,o=t},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function H6(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function V6(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Q6(r.key),r)}}function Q6(t){var e=function(t,e){if("object"!=q6(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=q6(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==q6(e)?e:e+""}function W6(t,e,n){return e=X6(e),function(t,e){if(e&&("object"===q6(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,Y6()?Reflect.construct(e,n||[],X6(t).constructor):e.apply(t,n))}function Y6(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(Y6=function(){return!!t})()}function K6(){return K6="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=X6(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(arguments.length<3?t:n):i.value}},K6.apply(this,arguments)}function X6(t){return X6=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},X6(t)}function $6(t,e){return $6=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},$6(t,e)}var Z6=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),W6(this,e,arguments)}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&$6(t,e)}(e,t),n=e,r=[{key:"init",value:function(){this._active=null,this._overlay=null,this._views=[],this._bindHandlers(),this._setupEventListeners()}},{key:"setup",value:function(){this._views=this._createViews()}},{key:"destroy",value:function(){K6(X6(e.prototype),"destroy",this).call(this),this._destroyViews(!0),this._removeEventListeners(),this._removeDebugLayers()}},{key:"activeViewName",get:function(){var t;return null===(t=this._active)||void 0===t||null===(t=t.instance)||void 0===t||null===(t=t._config)||void 0===t?void 0:t.name}},{key:"active",get:function(){var t;return null===(t=this._active)||void 0===t?void 0:t.instance}},{key:"overlayViewName",get:function(){var t;return null===(t=this._overlay)||void 0===t||null===(t=t.instance)||void 0===t||null===(t=t._config)||void 0===t?void 0:t.name}},{key:"overlay",get:function(){var t;return null===(t=this._overlay)||void 0===t?void 0:t.instance}},{key:"views",get:function(){return this._views}},{key:"get",value:function(t){return this._getViewByName(t)}},{key:"show",value:function(t){var e=this,n=this._getViewByName(t);if(n&&this._active!==n){var r=ti.timeline();return r.add((function(){var t;e._active=n,e._loadRenderSettings(n.config.renderer),null===(t=e.$composer)||void 0===t||t.updateSettings(n.config.composer),null==lK||lK.gotoTab(e._active.name)})),r.add(n.instance.show()),r}}},{key:"showAsOverlay",value:function(t){var e=this,n=this._getViewByName(t);if(n&&this._overlay!==n){var r=ti.timeline();return r.add((function(){e._overlay=n})),r.add(n.instance.show()),r}}},{key:"hideCurrent",value:function(){var t=this;if(this._active)return"function"==typeof this._active.instance.hide?this._active.instance.hide((function(){t._active=null})):void(this._active=null)}},{key:"hideOverlay",value:function(){var t=this;if(this._overlay)return"function"==typeof this._overlay.instance.hide?this._overlay.instance.hide((function(){t._overlay=null})):void(this._overlay=null)}},{key:"_bindHandlers",value:function(){this._tabChangeHandler=this._tabChangeHandler.bind(this)}},{key:"_setupEventListeners",value:function(){null==lK||lK.addEventListener("tab:change",this._tabChangeHandler)}},{key:"_removeEventListeners",value:function(){null==lK||lK.removeEventListener("tab:change",this._tabChangeHandler)}},{key:"_createViews",value:function(){var t,e=[];return lK&&U6.forEach((function(t){return lK.addTab(t.name)})),U6.forEach((function(n){t=new n.class({config:n}),e.push({name:n.name,instance:t,config:n})})),e}},{key:"_getViewByName",value:function(t){var e,n=G6(this._views);try{for(n.s();!(e=n.n()).done;){var r=e.value;if(r.config.name.toLowerCase()===t.toLowerCase())return r}}catch(t){n.e(t)}finally{n.f()}return null}},{key:"_destroyViews",value:function(){var t,e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],n=G6(this._views);try{var r=function(){var n=t.value;"function"==typeof n.instance.destroy&&(n.instance.destroy(),e&&n.instance.scene.traverse((function(t){var e;t instanceof j_&&(null===(e=t.material)||void 0===e||e.dispose(),n.instance.scene.remove(t))})))};for(n.s();!(t=n.n()).done;)r()}catch(t){n.e(t)}finally{n.f()}}},{key:"_loadRenderSettings",value:function(t){this.$renderer.instance.setClearColor(t.clearColor)}},{key:"_removeDebugLayers",value:function(){null==lK||lK.removeTabs()}},{key:"onUpdate",value:function(t){var e=t.time,n=t.delta;this._active&&"function"==typeof this._active.instance.update&&this._active.instance.update({time:e,delta:n}),this._overlay&&"function"==typeof this._overlay.instance.update&&this._overlay.instance.update({time:e,delta:n})}},{key:"_tabChangeHandler",value:function(t){this.show(t)}}],r&&V6(n.prototype,r),i&&V6(n,i),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,i}(dY()),J6=n(8520);function t8(t){return t8="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},t8(t)}function e8(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,n8(r.key),r)}}function n8(t){var e=function(t,e){if("object"!=t8(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=t8(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==t8(e)?e:e+""}var r8=function(){return t=function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._scene=new UE,this._camera=new Q_,this._quad=new j_(new sw(2,2),new V_({fragmentShader:"#define GLSLIFY 1\nuniform sampler2D map;\nuniform vec2 mapResize;\nvarying vec2 vUv;\n\nvoid main() {\n    vec2 uv = ((vUv - 0.5) * mapResize) + 0.5;\n    uv.y = clamp(uv.y, -0.1, 0.99);\n    vec4 texel = texture2D(map, uv);\n    float alpha = texel.a;\n    if (abs(uv.x - 0.5) > 0.5 || abs(uv.y - 0.5) > 0.5) {\n        alpha = 0.;\n    } \n    gl_FragColor = vec4(vec3(1. - alpha), 1.);\n}",vertexShader:"#define GLSLIFY 1\nvarying vec2 vUv;\n\nvoid main() {\n    vUv = uv;\n    gl_Position = vec4(position, 1.);\n}",uniforms:{map:{value:null},mapResize:{value:new Ay(1,1)}}})),this._scene.add(this._quad),this._precision="JFA+2"},e=[{key:"_setParams",value:function(t){var e=t.texture,n=t.scale,r=this._quad.material.uniforms;r.map.value=e,r.mapResize.value.copy(n)}},{key:"open",value:function(){this._generator=new J6.DistanceFieldGenerator}},{key:"generate",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.resizeToNormal,i=void 0===r||r,o=n.paddingScale,a=void 0===o?new Ay(1,1):o,s=n.resolution,l=void 0===s?1:s,u=n.precision,c=void 0===u?this._precision:u;if(!this._generator)throw"Call SDFGenerator.open before generate";var d=e.image,f=d.width,h=d.height,p=Math.floor(f*a.x*l),m=Math.floor(h*a.y*l);t.instance.setPixelRatio(1),t.instance.setSize(p,m,!1),this._setParams({texture:e,scale:a}),t.instance.render(this._scene,this._camera),this._generator.generateSDF(t.instance.domElement,c);var g=this._generator.outputCanvas();i&&t.resize(zY.dimensions);var v=document.createElement("canvas"),y=v.getContext("2d");v.width=p,v.height=m,y.drawImage(g,0,0,p,m);var b=new Gy(v);return b.needsUpdate=!0,t.instance.initTexture(b),{output:b,pixelSize:new Ay(p,m)}}},{key:"close",value:function(){var t;null===(t=this._generator)||void 0===t||t.destroy(),this._generator=null}},{key:"destroy",value:function(){var t;null===(t=this._generator)||void 0===t||t.destroy(),this._quad.material.dispose(),this._quad.geometry.dispose()}}],e&&e8(t.prototype,e),n&&e8(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,n}();function i8(t){return i8="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},i8(t)}function o8(t){return function(t){if(Array.isArray(t))return l8(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||s8(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function a8(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,i,o,a,s=[],l=!0,u=!1;try{if(o=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=o.call(n)).done)&&(s.push(r.value),s.length!==e);l=!0);}catch(t){u=!0,i=t}finally{try{if(!l&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(u)throw i}}return s}}(t,e)||s8(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function s8(t,e){if(t){if("string"==typeof t)return l8(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?l8(t,e):void 0}}function l8(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function u8(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,c8(r.key),r)}}function c8(t){var e=function(t,e){if("object"!=i8(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=i8(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==i8(e)?e:e+""}function d8(t,e,n){return e=h8(e),function(t,e){if(e&&("object"===i8(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,f8()?Reflect.construct(e,n||[],h8(t).constructor):e.apply(t,n))}function f8(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(f8=function(){return!!t})()}function h8(t){return h8=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},h8(t)}function p8(t,e){return p8=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},p8(t,e)}var m8=new iw,g8=new Sb,v8=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),d8(this,e,arguments)}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&p8(t,e)}(e,t),n=e,r=[{key:"init",value:function(){this._hasMouseMoved=!0,this._distanceTraveled=0,this._lastMouseMove=0,this._ndc=new Ay,this._ndcVelocity=new Ay,this._raycaster=new qS,this._groundsMesh=null,this._groundIntersection=null,this._papersArray=null,this._paintIntersection=null,this._instanceIndex=null}},{key:"hasMouseMoved",get:function(){return this._hasMouseMoved}},{key:"ndc",get:function(){return this._ndc}},{key:"ndcVelocity",get:function(){return this._ndcVelocity}},{key:"instanceIndex",get:function(){return this._instanceIndex}},{key:"sceneIndex",get:function(){var t;return null!=this.instanceIndex&&(null===(t=this._papersArray[this.instanceIndex])||void 0===t||null===(t=t.config)||void 0===t?void 0:t.sceneIndex)}},{key:"papersArray",get:function(){return this._papersArray},set:function(t){this._papersArray=t}},{key:"paintIntersection",get:function(){return this._paintIntersection}},{key:"groundsMesh",set:function(t){this._groundsMesh=t}},{key:"groundIntersection",get:function(){return this._groundIntersection}},{key:"update",value:function(t,e,n){var r;if(e){var i=Math.min(t,.04),o=1-Math.exp(-$$.brush.damping*i);this._ndcVelocity.copy(this._ndc),this._ndc.x=ZW(this._ndc.x,HJ._ndc.x,o),this._ndc.y=ZW(this._ndc.y,HJ._ndc.y,o),this._ndcVelocity.sub(this._ndc).multiplyScalar(-1),this._ndcVelocity.length()>.001&&(this._hasMouseMoved=!0)}else this._ndcVelocity.set(0,0),this._ndc.copy(HJ._ndc),this._hasMouseMoved=!0;m8.setFromProjectionMatrix(g8.multiplyMatrices(n.projectionMatrix,n.matrixWorldInverse)),null===(r=this._papersArray)||void 0===r||r.forEach((function(t){return t.computeIsInFrustum(m8)})),this._hasMouseMoved&&this._raycast(n)}},{key:"onMousemove",value:function(){var t=performance.now()/1e3;t-this._lastMouseMove>.5&&0==this._hasMouseMoved&&(this._ndcVelocity.set(0,0),this._ndc.copy(HJ._ndc)),this._lastMouseMove=t}},{key:"_raycast",value:function(t){if(!this._ndc)return null;if(this._raycaster.setFromCamera(this._ndc,t),this._papersArray&&this._groundsMesh){var e=this._papersArray.map((function(t){return t.mesh})),n=this._papersArray.filter((function(t){return t.isVisible&&t.isInFrustum})).map((function(t){return t.mesh})),r=a8(this._raycaster.intersectObjects([].concat(o8(n),[this._groundsMesh])),1)[0],i=!!r,o=(null==r?void 0:r.object)==this._groundsMesh,a=!o;this._groundIntersection=o&&i?r:null,this._paintIntersection=a&&i?r:null,a&&i&&(this._paintIntersection.uv.x=1-this._paintIntersection.uv.x),this._instanceIndex=o?null==r?void 0:r.instanceId:e.findIndex((function(t){return t===(null==r?void 0:r.object)}))}}}],r&&u8(n.prototype,r),i&&u8(n,i),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,i}(dY());function y8(t){return y8="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},y8(t)}function b8(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,_8(r.key),r)}}function _8(t){var e=function(t,e){if("object"!=y8(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=y8(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==y8(e)?e:e+""}var w8=function(){return t=function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._renderer=e.renderer,this._debug=e.debug,this._minFps=e.minFps,this._maxFps=e.maxFps,this._renderScaleIncrease=e.renderScaleIncrease,this._renderScaleDecrease=e.renderScaleDecrease,this._minRenderScale=e.minRenderScale,this._maxRenderScale=e.maxRenderScale,this._measeurePeriod=1e3*e.measeurePeriod,this._fluctuationMargin=e.fluctuationMargin,this._renderScale=1,this._frameRange=60,this._averageFps=0,this._lowestFps=0,this._highestFps=0,this._fpsBuffer=new Array(this._frameRange).fill(0),this._fpsBufferIndex=0,this._beginTime=performance.now(),this._previousTime=this._beginTime,this._frames=0,this._measurePeriodBegin=performance.now(),this._hasRenderScaleChanged=!1,this._createDebug()},e=[{key:"maxRenderScale",set:function(t){this._maxRenderScale=t,this._renderScale=t}},{key:"hasRenderScaleChanged",get:function(){return this._hasRenderScaleChanged}},{key:"begin",value:function(){var t=performance.now();this._hasRenderScaleChanged=!1,this._beginTime=t,this._measurePeriodBegin-t<=-this._measeurePeriod&&(this._measurePeriodBegin=t,this._updateRenderScale())}},{key:"end",value:function(){this._frames++;var t,e=performance.now();if(e>=this._previousTime+16){t=1e3*this._frames/(e-this._previousTime),this._previousTime=e,this._frames=0,this._fpsBuffer[this._fpsBufferIndex]=t,this._fpsBufferIndex=(this._fpsBufferIndex+1)%this._frameRange;for(var n=0,r=0,i=Number.MAX_VALUE,o=0;o<this._frameRange;o++){var a=this._fpsBuffer[o];n+=a,a>r&&(r=a),a<i&&(i=a)}this._averageFps=Math.floor(n/this._frameRange),this._highestFps=r,this._lowestFps=i}}},{key:"_updateRenderScale",value:function(){var t=this._renderScale;this._averageFps<this._minFps?t-=5*this._renderScaleDecrease:this._averageFps>this._minFps&&this._averageFps<this._maxFps-this._fluctuationMargin?t-=this._renderScaleDecrease:this._averageFps>this._maxFps-this._fluctuationMargin&&(t+=this._renderScaleIncrease),t=function(t,e,n){return Math.min(Math.max(t,e),n)}(t,this._minRenderScale,this._maxRenderScale),t!==this._renderScale&&(this._renderScale=t,this._renderer.renderScale=this._renderScale,this._hasRenderScaleChanged=!0)}},{key:"_createDebug",value:function(){if(this._debug){var t=this._debug.addFolder({title:"DRS"});t.addMonitor(this,"_averageFps",{label:"average FPS"}),t.addMonitor(this,"_renderScale",{label:"render scale"});var e=t.addFolder({title:"FPS"});e.addInput(this,"_minFps",{label:"min"}),e.addInput(this,"_maxFps",{label:"max"});var n=t.addFolder({title:"Scale"});n.addInput(this,"_renderScaleIncrease",{label:"increase"}),n.addInput(this,"_renderScaleDecrease",{label:"decrease"});var r=t.addFolder({title:"Render scale"});r.addInput(this,"_minRenderScale",{label:"min"}),r.addInput(this,"_maxRenderScale",{label:"max"})}}}],e&&b8(t.prototype,e),n&&b8(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,n}();function A8(t){return A8="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},A8(t)}function E8(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function x8(t,e,n){return(e=T8(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function S8(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,T8(r.key),r)}}function T8(t){var e=function(t,e){if("object"!=A8(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=A8(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==A8(e)?e:e+""}var C8=function(){return t=function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._canvas=e.canvas,this._isDevelopment=e.isDevelopment,this._isActive=!0,this._renderScale=jK.rendering.scale,this._isViewRenderingEnabled=!0,this._isStatsGpuQueryStarted=!1,ti.ticker.fps(60),this._registerBidelloGlobals(),this._debug=this._createDebug(),this._clock=this._createClock(),this._exposureManager=this._createExposeManager(),this._renderer=this._createRenderer(),jK.composer.enabled&&(this._composer=this._createComposer()),this._viewManager=this._createViewManager(),this._experienceManager=e.experienceManager,fY.registerGlobal("experienceManager",this._experienceManager),this._sdfGenerator=this._createSdfGenerator(),this._paintManager=this._createPaintManager(),(this._isDevelopment||SY)&&(this._stats=this._createStats(),this._statsGpuPanel=this._createStatsGpuPanel()),this._bindHandlers(),this._setupEventListeners(),this._resize(),this.events=new kW},e=[{key:"watercolorView",get:function(){return this._viewManager.get("Watercolor").instance}},{key:"destroy",value:function(){var t,e,n,r;this._removeDebug(),this._removeStats(),this._removeEventListeners(),null===(t=this._viewManager)||void 0===t||t.destroy(),null===(e=this._overlayManager)||void 0===e||e.destroy(),null===(n=this._overlayRenderer)||void 0===n||n.destroy(),null===(r=this._composer)||void 0===r||r.destroy(),this._renderer.destroy(),this._exposureManager.destroy(),this._sdfGenerator.destroy(),this._paintManager.destroy()}},{key:"enableViewRendering",value:function(){this._isViewRenderingEnabled=!0}},{key:"disableViewRendering",value:function(){this._isViewRenderingEnabled=!1}},{key:"_bindHandlers",value:function(){this._resizeHandler=this._resizeHandler.bind(this),this._tickHandler=this._tickHandler.bind(this),this._visibilityChangeHandler=this._visibilityChangeHandler.bind(this)}},{key:"_setupEventListeners",value:function(){zY.addEventListener("resize",this._resizeHandler),ti.ticker.add(this._tickHandler),HW.addEventListener("change",this._visibilityChangeHandler)}},{key:"_removeEventListeners",value:function(){zY.removeEventListener("resize",this._resizeHandler),ti.ticker.remove(this._tickHandler),HW.removeEventListener("change",this._visibilityChangeHandler)}},{key:"_registerBidelloGlobals",value:function(){fY.registerGlobal("root",this),fY.registerGlobal("isDevelopment",this._isDevelopment)}},{key:"_init",value:function(){var t;jK.composer.enabled&&this._composer.setup(),this._viewManager.setup(),this._drs&&(this._drs.maxRenderScale=zY.dpr),this.watercolorView.prepare(),null===(t=this._composer)||void 0===t||t.prepare(this.watercolorView),this._viewManager.get("UI").instance.prepare(),this._viewManager.get("Poem").instance.prepare();var e=this._renderer.instance.getClearAlpha();this._renderer.instance.setClearAlpha(0),this._renderer.instance.clearColor(),this._renderer.instance.setClearAlpha(e)}},{key:"_start",value:function(){}},{key:"_startStatsGpuQuery",value:function(){var t=this;this._isDevelopment&&setTimeout((function(){t._isStatsGpuQueryStarted=!0}),2e3)}},{key:"_createStats",value:function(){var t=new(NK());return document.body.appendChild(t.dom),t}},{key:"_createStatsGpuPanel",value:function(){var t=new BK(this._renderer.instance.getContext());return this._stats.addPanel(t),t}},{key:"_removeStats",value:function(){this._stats&&(document.body.removeChild(this._stats.dom),this._stats=null)}},{key:"_createClock",value:function(){return new kS}},{key:"_createExposeManager",value:function(){return YK}},{key:"_createRenderer",value:function(){var t=new iX({canvas:this._canvas});return fY.registerGlobal("renderer",t),t}},{key:"_createComposer",value:function(){var t=new X$;return fY.registerGlobal("composer",t),t}},{key:"_createViewManager",value:function(){var t=new Z6;return fY.registerGlobal("viewManager",t),t}},{key:"_createSdfGenerator",value:function(){var t=new r8;return fY.registerGlobal("sdfGenerator",t),t}},{key:"_createPaintManager",value:function(){var t=new v8;return fY.registerGlobal("paintManager",t),t}},{key:"_createDrs",value:function(){return new w8({renderer:this._renderer,debug:this._debug,minFps:30,maxFps:60,renderScaleIncrease:.02,renderScaleDecrease:.02,minRenderScale:1,maxRenderScale:2,measeurePeriod:1,fluctuationMargin:10})}},{key:"_tick",value:function(){var t,e,n,r,i,o;this._isActive&&(null===(t=this._stats)||void 0===t||t.begin(),this._isDevelopment&&this._isStatsGpuQueryStarted&&(null===(i=this._statsGpuPanel)||void 0===i||i.startQuery()),null===(e=this._drs)||void 0===e||e.begin(),this._update(),this._render(),null===(n=this._drs)||void 0===n||n.end(),this._isDevelopment&&this._isStatsGpuQueryStarted&&(null===(o=this._statsGpuPanel)||void 0===o||o.endQuery()),this._isDevelopment&&this._renderer.updateStats(),null===(r=this._stats)||void 0===r||r.end(),this._isDevelopment&&this._renderer&&this._renderer.instance.info.reset(),this._renderer&&this._renderer.instance.info.reset())}},{key:"_update",value:function(){var t,e=this._clock.getDelta(),n=this._clock.getElapsedTime();this._triggerBidelloUpdate(e,n);var r=null===(t=this._viewManager)||void 0===t?void 0:t.active;if(r){var i=r.camera;this._paintManager.update(e,!0,i)}}},{key:"_triggerBidelloUpdate",value:function(t,e){fY.trigger({name:"update",fireAtStart:!1},{delta:t,time:e})}},{key:"_render",value:function(){var t,e,n=null===(t=this._viewManager)||void 0===t?void 0:t.active;if(n){var r;n&&this._isViewRenderingEnabled&&(jK.composer.enabled?null===(r=this._composer)||void 0===r||r.render(n):this._renderer.render(n.scene,n.camera));var i=null===(e=this._viewManager)||void 0===e?void 0:e.overlay;i&&(this._renderer.instance.autoClear=!1,this._renderer.render(i.scene,i.camera),this._renderer.instance.autoClear=!0)}}},{key:"_resize",value:function(){var t=zY.dimensions;this._renderer.resize(t),t.renderWidth=this._renderer.width,t.renderHeight=this._renderer.height,this._triggerBidelloResize(t)}},{key:"_triggerBidelloResize",value:function(t){fY.trigger({name:"windowResize",fireAtStart:!0},function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?E8(Object(n),!0).forEach((function(e){x8(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):E8(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({},t))}},{key:"_resizeHandler",value:function(t){this._resize(t)}},{key:"_tickHandler",value:function(){this._tick()}},{key:"_visibilityChangeHandler",value:function(t){t.isHidden?(this._clock.stop(),this._isActive=!1):(this._clock.start(),this._isActive=!0)}},{key:"_createDebug",value:function(){if(lK)return lK.addFolder({title:"WebGL",index:1})}},{key:"_removeDebug",value:function(){this._debug&&this._debug.dispose()}}],e&&S8(t.prototype,e),n&&S8(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,n}();Object.assign(C8.prototype,{start:function(){this._start()},init:function(){this._init()},showView:function(t){return this._viewManager.show(t)},hideCurrentView:function(){return this._viewManager.hideCurrent()},showAsOverlay:function(t){return this._viewManager.showAsOverlay(t)},hideOverlay:function(){return this._viewManager.hideOverlay()}});const I8=C8;function k8(t){return k8="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},k8(t)}function P8(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function R8(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?P8(Object(n),!0).forEach((function(e){O8(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):P8(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function O8(t,e,n){return(e=L8(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function M8(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,L8(r.key),r)}}function L8(t){var e=function(t,e){if("object"!=k8(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=k8(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==k8(e)?e:e+""}function D8(t,e,n){return e=j8(e),function(t,e){if(e&&("object"===k8(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,N8()?Reflect.construct(e,n||[],j8(t).constructor):e.apply(t,n))}function N8(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(N8=function(){return!!t})()}function B8(){return B8="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=j8(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(arguments.length<3?t:n):i.value}},B8.apply(this,arguments)}function j8(t){return j8=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},j8(t)}function z8(t,e){return z8=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},z8(t,e)}var F8=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),D8(this,e,arguments)}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&z8(t,e)}(e,t),n=e,r=[{key:"init",value:function(){this._state={showing:!1,hasCloseBttn:!1,needToShow:!1,hiding:!1,sceneIndex:0},this.releaseFullpaintForce=this.releaseFullpaintForce.bind(this),this._onCloseOverOut=this._onCloseOverOut.bind(this),this._sceneIndexOverride=null,this._currentIntersect=null,this._closeButton=document.querySelector(".xp-fullpaint-btn"),this._videoBase=document.querySelector(".xp-assets .xp-videoTexture-base"),this._videoOver=document.querySelector(".xp-assets .xp-videoTexture-over"),this._scenesTextures=[],this._scenesTextures2=[];for(var t="wp-content/themes/davidwhyte/resources/assets/xp/videos/",e=SW.gpu.isMobile?"mobile/":"desktop/",n=1;n<=6;n++)this._scenesTextures.push(t+e+"base/"+n+".mp4"),this._scenesTextures2.push(t+e+"over/"+n+".mp4");this._bind(!0)}},{key:"destroy",value:function(){this._bind(!1),B8(j8(e.prototype),"destroy",this).call(this)}},{key:"_bind",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&!arguments[0]?"removeEventListener":"addEventListener";this._closeButton[t]("click",this.releaseFullpaintForce),this._closeButton[t]("mouseenter",this._onCloseOverOut),this._closeButton[t]("mouseleave",this._onCloseOverOut)}},{key:"_fullPaintComponent",get:function(){var t;return null===(t=this.$viewManager.get("UI"))||void 0===t||null===(t=t.instance)||void 0===t||null===(t=t._components)||void 0===t?void 0:t.fullPaintMesh}},{key:"_waterColorCamera",get:function(){var t;return null===(t=this.$viewManager.get("Watercolor"))||void 0===t||null===(t=t.instance)||void 0===t||null===(t=t._cameraManager)||void 0===t?void 0:t.get("scroll")}},{key:"_titlesContainer",get:function(){var t;return null===(t=this.$viewManager)||void 0===t||null===(t=t.get("Watercolor"))||void 0===t||null===(t=t.instance)||void 0===t||null===(t=t._components)||void 0===t?void 0:t.titles}},{key:"isVisible",get:function(){var t;return(null===(t=this._fullPaintComponent)||void 0===t?void 0:t.visibleProgress)>.8}},{key:"isFullScreen",get:function(){var t;return(null===(t=this._fullPaintComponent)||void 0===t?void 0:t.visibleProgress)>2.5}},{key:"isForced",get:function(){return null!==this._sceneIndexOverride}},{key:"getSceneIndex",value:function(){return null!=this._sceneIndexOverride?this._sceneIndexOverride:this.$paintManager.sceneIndex}},{key:"_setSceneTexture",value:function(){this._fullPaintComponent&&this._scenesTextures[this._state.sceneIndex-1]&&(this._fullPaintComponent.hasVideoTextures||this._fullPaintComponent.setVideoTextures(this._videoBase,this._videoOver),this._videoBase.src=this._scenesTextures[this._state.sceneIndex-1],this._videoBase.play(),this._videoOver.src=this._scenesTextures2[this._state.sceneIndex-1],this._videoOver.play(),this._fullPaintComponent._updateRevealPoints())}},{key:"onLongpressOn",value:function(t){var e=t.htmlTarget;this.$experienceManager.isPaintInteractionEnabled&&(this.isForced||e!==this.$root._canvas||this.reevaluateLongpress())}},{key:"onLongpressOff",value:function(){this.hide()}},{key:"onMousemove",value:function(){var t,e;this.$experienceManager.isPaintInteractionEnabled&&(this.isForced||null===(t=this._titlesContainer)||void 0===t||t.checkIfTitleOver(null===(e=this._waterColorCamera)||void 0===e?void 0:e.instance))}},{key:"onMouseup",value:function(){if(this.$experienceManager.isPaintInteractionEnabled&&!this.isForced&&"UI"===this.$viewManager.overlayViewName){var t,e,n=null===(t=this._titlesContainer)||void 0===t?void 0:t.getTitleOverInstance(null===(e=this._waterColorCamera)||void 0===e?void 0:e.instance);null!=(null==n?void 0:n.sceneIndex)&&this.showFromTitle(n.sceneIndex)}}},{key:"releaseFullpaintForce",value:function(){var t=this;return this._sceneIndexOverride=null,this.hide().call((function(){t._state.needToShow=!1})),this._state.needToShow}},{key:"reevaluateLongpress",value:function(){var t=this._state.sceneIndex==this.getSceneIndex();!t&&this._state.showing?(this._state.needToShow=!0,this.hide()):!t&&this._state.hiding?this._state.needToShow=!0:this.show()}},{key:"_onCloseOverOut",value:function(t){"mouseenter"===t.type&&this.$audioManager.playSound("over-cta-back")}},{key:"showFromTitle",value:function(t){null!=t&&(this._sceneIndexOverride=t,this.show(0,!0))}},{key:"show",value:function(){var t,e,n=this,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,o=this.getSceneIndex();if(null!=o&&!this._state.showing){null==i&&SW.gpu.isMobile&&(i=!0);var a=this._state.sceneIndex==o;this._state.sceneIndex=o,this._state.needToShow=!1,this._state.showing=!0,this._state.hiding=!1,this._state.hasCloseBttn=i,i&&(document.body.style.cursor="inherit"),a||this._setSceneTexture();var s={};null===(t=this._showTimeline)||void 0===t||t.kill(),null===(e=this._hideTimeline)||void 0===e||e.kill();var l=ti.timeline(R8(R8({},s),{},{onComplete:this._onShowCompleted.bind(this)}));return l.add((function(){return n.$audioManager.switchThemeTo("loop-painting")})),l.add(this.$experienceManager.switchFogToOpaque(1,"power1.inOut"),0),l.add(this._fullPaintComponent.show(),.2),l.add(this._waterColorCamera.zoomOut(),0),this._state.hasCloseBttn&&l.to(this._closeButton,{opacity:1,pointerEvents:"all",duration:.8,ease:"sine.inOut"},1.5),l.delay(r),this._showTimeline=l,l}}},{key:"_onShowCompleted",value:function(){this._state.showing=!1}},{key:"hide",value:function(){var t,e,n,r,i=this;if(null===this._sceneIndexOverride&&!this._state.hiding&&(null!==(t=this._showTimeline)&&void 0!==t&&t.isActive()||null!==(e=this._fullPaintComponent)&&void 0!==e&&e.visibleProgress||this._state.showing)){this._state.hiding=!0,this._state.showing=!1,null===(n=this._showTimeline)||void 0===n||n.kill(),null===(r=this._hideTimeline)||void 0===r||r.kill();var o=ti.timeline({onComplete:this._onHideComplete.bind(this)});return o.add((function(){return i.$audioManager.switchThemeTo("loop-main")})),o.add(this.$experienceManager.switchFogToBase(2,"power1.inOut"),0),o.to(this._closeButton,{opacity:0,pointerEvents:"none",duration:.6,ease:"sine.inOut"},0),o.add(this._fullPaintComponent.hide(),0),o.add(this._waterColorCamera.zoomIn(),0),this._hideTimeline=o,o}}},{key:"_onHideComplete",value:function(){var t;this._state.hiding=!1,this._state.needToShow?(this._state.needToShow=!1,this.show()):null===(t=this._fullPaintComponent)||void 0===t||t.unsetVideoTextures()}},{key:"updateConfig",value:function(){return this._config}}],r&&M8(n.prototype,r),i&&M8(n,i),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,i}(dY());function U8(t){return U8="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},U8(t)}function q8(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,G8(r.key),r)}}function G8(t){var e=function(t,e){if("object"!=U8(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=U8(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==U8(e)?e:e+""}function H8(t,e,n){return e=W8(e),function(t,e){if(e&&("object"===U8(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,V8()?Reflect.construct(e,n||[],W8(t).constructor):e.apply(t,n))}function V8(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(V8=function(){return!!t})()}function Q8(){return Q8="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=W8(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(arguments.length<3?t:n):i.value}},Q8.apply(this,arguments)}function W8(t){return W8=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},W8(t)}function Y8(t,e){return Y8=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Y8(t,e)}var K8=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),H8(this,e,arguments)}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Y8(t,e)}(e,t),n=e,r=[{key:"init",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};fY.register("experienceManager",this),this._canvas=t.canvas,this._bootstrap=t.bootstrap,this._hasStarted=!1,this._showOffers=!1,this._isOverPoem=!1,this._scrollToExploreElt=document.querySelector(".xp-section .xp-scrollToExplore"),this._scrollToExploreEnabled=!0,this._initModules(),this._textCanvas=this._createTextCanvas(),this._webglApp=this._createWebglApp(),this._fullPaintManager=new F8,this._currentDuration=null,this._transitionState={inTransition:!1,toView:null,fromView:null,toOverlay:null,fromOverlay:null,meta:null},this._fogState={opaque:0,occulted:0},HJ.longpressTriggerTime=SW.gpu.isMobile?.6:.3,this._bindHandlers()}},{key:"textCanvas",get:function(){return this._textCanvas}},{key:"transitionState",get:function(){return this._transitionState}},{key:"fullPaintManager",get:function(){return this._fullPaintManager}},{key:"showOffers",get:function(){return this._showOffers}},{key:"watercolorView",get:function(){return this._webglApp.watercolorView}},{key:"isPaintInteractionEnabled",get:function(){var t,e;return!(!this._hasStarted||this._transitionState.inTransition||"Watercolor"!==(null===(t=this.$viewManager)||void 0===t?void 0:t.activeViewName)||"UI"!==(null===(e=this.$viewManager)||void 0===e?void 0:e.overlayViewName)||"SHOW_OFFER"===KY.state||"showPoem"===this._transitionState.meta||this._fullPaintManager.isForced||this._fullPaintManager.isVisible)}},{key:"isOverPaiting",get:function(){var t;return this.isPaintInteractionEnabled&&null!=(null===(t=this.$paintManager)||void 0===t?void 0:t.sceneIndex)}},{key:"isOverPoem",get:function(){return this._isOverPoem}},{key:"checkPoemIntersection",value:function(){return this.isPaintInteractionEnabled&&!SW.gpu.isMobile&&!this._showOffers&&this.$viewManager.overlay.checkPoemIntersection()}},{key:"start",value:function(){this._hasStarted=!0,this._webglApp.start(),this._webglApp.showView(yY||"Watercolor"),!PY&&this._webglApp.showAsOverlay(bY||"UI"),this._setupEventListeners(),AY&&(this._canvas.style.zIndex=10)}},{key:"prepare",value:function(){this._textCanvas.resize(),this._webglApp.init()}},{key:"destroy",value:function(){var t,n,r;this._removeEventListeners(),null===(t=this._webglApp)||void 0===t||t.destroy(),null===(n=this._fullPaintManager)||void 0===n||n.destroy(),null===(r=this._textCanvas)||void 0===r||r.destroy(),null==lK||lK.destroy(),KY.destroy(),Q8(W8(e.prototype),"destroy",this).call(this)}},{key:"onUpdate",value:function(){this.$paintManager=fY.globals.$paintManager,this.$viewManager=fY.globals.$viewManager}},{key:"_initModules",value:function(){null==lK||lK.init(),KY.init(this._bootstrap)}},{key:"_createWebglApp",value:function(){return new I8({canvas:this._canvas,isDevelopment:NW.isDevelopment,experienceManager:this})}},{key:"_createTextCanvas",value:function(){var t=document.querySelector(".xp-section .xp-text-w-inside");return new LK({el:t,font:"Canela Text",weight:100})}},{key:"_fillTransitionState",value:function(t){var e,n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;this._transitionState.fromView=null===(e=this.$viewManager)||void 0===e?void 0:e.activeViewName,this._transitionState.fromOverlay=null===(n=this.$viewManager)||void 0===n?void 0:n.overlayViewName,this._transitionState.toView=t,this._transitionState.toOverlay=r,this._transitionState.inTransition=!0,this._transitionState.meta=i}},{key:"_emptyTransitionState",value:function(){this._transitionState.fromView=null,this._transitionState.fromOverlay=null,this._transitionState.toView=null,this._transitionState.toOverlay=null,this._transitionState.inTransition=!1,this._transitionState.meta=null}},{key:"restart",value:function(){var t,e,n=this,r=ti.timeline();this._fillTransitionState("XP",null,"restart"),null===(t=this.watercolorView.scrollCamera)||void 0===t||t.stopPaperReveal(),r.add(this.$viewManager.hideCurrent(),0);var i=ti.timeline();i.add((function(){return n.$viewManager.show("Watercolor")}),0),i.add(this.$viewManager.showAsOverlay("UI"),0),r.add(i,"+=0"),r.call((function(){return n._emptyTransitionState()})),null===(e=this._currentDuration)||void 0===e||e.kill(),this._currentDuration=r}},{key:"showFullscreenPoem",value:function(){var t,e=this;this._fullPaintManager.hide();var n=ti.timeline();this._fillTransitionState("Poem",null,"showPoem"),n.add(this.$viewManager.hideCurrent(),0),n.add(this.$viewManager.hideOverlay(),0),n.add((function(){return e.$audioManager.switchThemeTo("loop-poem")})),n.add(this.$viewManager.show("Poem")),n.call((function(){return e._emptyTransitionState()})),null===(t=this._currentDuration)||void 0===t||t.kill(),this._currentDuration=n}},{key:"hideFullscreenPoem",value:function(){var t,e=this,n=ti.timeline();this._fillTransitionState("Watercolor","UI","hidePoem"),n.add(this.$viewManager.hideCurrent(),0),n.add((function(){return e.$audioManager.switchThemeTo("loop-main")}));var r=ti.timeline();r.add(this.$viewManager.show("Watercolor"),0),r.add(this.$viewManager.showAsOverlay("UI"),0),n.add(r),n.call((function(){return e._emptyTransitionState()})),null===(t=this._currentDuration)||void 0===t||t.kill(),this._currentDuration=n}},{key:"_fullscreenPoemToOffers",value:function(){var t,e=this;if("poemToOffers"!==this._transitionState.meta){var n=ti.timeline();this._fillTransitionState("Watercolor","UI","poemToOffers"),n.add(this.$viewManager.hideCurrent(),0);var r=ti.timeline();r.add(this.$viewManager.show("Watercolor"),0),r.add(this.$viewManager.showAsOverlay("UI"),0),n.add(r),n.call((function(){return e._emptyTransitionState()})),null===(t=this._currentDuration)||void 0===t||t.kill(),this._currentDuration=n}}},{key:"_bindHandlers",value:function(){this._handleShowOffers=this._handleShowOffers.bind(this),this._handleHideOffers=this._handleHideOffers.bind(this),this._handleScroll=this._handleScroll.bind(this),this._onFogChangeComplete=this._onFogChangeComplete.bind(this)}},{key:"_setupEventListeners",value:function(){KY.addEventListener(pY,this._handleShowOffers),KY.addEventListener(mY,this._handleHideOffers),KY.addEventListener("scroll",this._handleScroll)}},{key:"_removeEventListeners",value:function(){KY.removeEventListener(pY,this._handleShowOffers),KY.removeEventListener(mY,this._handleHideOffers),KY.removeEventListener("scroll",this._handleScroll)}},{key:"_handleShowOffers",value:function(){this._showOffers=!0,this.switchFogToOcculted(1.1,"power1.out")}},{key:"_handleHideOffers",value:function(){this._showOffers=!1,this.switchFogToBase(1.1,"power1.inOut")}},{key:"_handleScroll",value:function(){var t;KY.sectionProgress>=.8&&1==KY.scrollDir&&"Poem"===(null===(t=this.$viewManager)||void 0===t?void 0:t.activeViewName)&&this._fullscreenPoemToOffers(),KY.progress>.02&&this._scrollToExploreEnabled&&(this._scrollToExploreEnabled=!1,this._scrollToExploreElt.classList.toggle("hidden",!0))}},{key:"onWindowResize",value:function(){}},{key:"onMousemove",value:function(){this._isOverPoem=this.checkPoemIntersection()}},{key:"onMouseup",value:function(){this._isOverPoem=this.checkPoemIntersection(),this._isOverPoem&&this.showFullscreenPoem()}},{key:"fogState",get:function(){return this._fogState}},{key:"switchFogToBase",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:2,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"power1.inOut",r=new ti.timeline({onComplete:this._onFogChangeComplete});return r.to(this._fogState,{opaque:0,duration:e,ease:n},0),r.to(this._fogState,{occulted:0,duration:e,ease:n},0),this._scrollToExploreEnabled&&r.add((function(){return t._scrollToExploreElt.classList.toggle("hidden",!1)}),e||1),r}},{key:"switchFogToOpaque",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:2,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"power1.inOut",r=new ti.timeline({onComplete:this._onFogChangeComplete});return r.to(this._fogState,{opaque:1,duration:e,ease:n},0),r.to(this._fogState,{occulted:0,duration:e,ease:n},0),this._scrollToExploreEnabled&&r.add((function(){return t._scrollToExploreElt.classList.toggle("hidden",!0)}),0),r}},{key:"switchFogToOcculted",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:2,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"power1.inOut",r=new ti.timeline({onComplete:this._onFogChangeComplete});return r.to(this._fogState,{opaque:0,duration:e,ease:n},0),r.to(this._fogState,{occulted:1,duration:e,ease:n},0),this._scrollToExploreEnabled&&r.add((function(){return t._scrollToExploreElt.classList.toggle("hidden",!0)}),0),r}},{key:"_onFogChangeComplete",value:function(){var t=!this._scrollToExploreEnabled||this._fogState.opaque>0||this._fogState.occulted>0;this._scrollToExploreElt.classList.toggle("hidden",t)}}],r&&q8(n.prototype,r),i&&q8(n,i),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,i}(dY());function X8(t){return X8="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},X8(t)}function $8(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Z8(r.key),r)}}function Z8(t){var e=function(t,e){if("object"!=X8(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=X8(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==X8(e)?e:e+""}function J8(t,e,n){return e=e9(e),function(t,e){if(e&&("object"===X8(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,t9()?Reflect.construct(e,n||[],e9(t).constructor):e.apply(t,n))}function t9(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(t9=function(){return!!t})()}function e9(t){return e9=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},e9(t)}function n9(t,e){return n9=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},n9(t,e)}var r9=function(t){function e(t,n){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=J8(this,e,[t,n])).loaderExperienceEl=document.querySelector('[data-component="LoaderExperience"]'),r.advantagesEl=document.querySelector('[data-component="Advantages"]'),r._headerSubscribeElts=[].slice.call(document.querySelectorAll("#header .become-member")),r._audioManager=new XW,fY.registerGlobal("watercolorExperience",r),fY.registerGlobal("audioManager",r._audioManager),r._onStartWatercolorScene=r._onStartWatercolorScene.bind(r),r._onRestartBtnClick=r._onRestartBtnClick.bind(r),r._onSubscribeBtnClick=r._onSubscribeBtnClick.bind(r),r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&n9(t,e)}(e,t),n=e,r=[{key:"experienceManager",get:function(){return this._experienceManager}},{key:"prepare",value:function(){this._experienceManager.prepare()}},{key:"attach",value:function(){var t,e=this,n=document.querySelector(".xp-canvas");n.style.opacity=0,n.style.willChange="opacity";var r=.1*(navigator.userAgent.toLowerCase().includes("firefox")?1.5:1);this._savedSmoother={wheelMultiplier:this.smoother.options.wheelMultiplier,touchMultiplier:this.smoother.options.touchMultiplier,syncTouch:this.smoother.options.syncTouch},this.smoother.options.syncTouch=!0,this.smoother.options.wheelMultiplier=r,this.smoother.options.touchMultiplier=.5,this.smoother.virtualScroll.wheelMultiplier=this.smoother.options.wheelMultiplier,this.smoother.virtualScroll.touchMultiplier=this.smoother.options.touchMultiplier,this.loaderExperienceComponent=this.components.get(this.loaderExperienceEl),this.advantagesComponent=this.components.get(this.advantagesEl),PY&&(this.advantagesEl.style.visibility="hidden",document.querySelector(".xp-section").style.visibility="hidden",document.querySelector('[data-component="Cursor"]').style.visibility="hidden",document.querySelector("header").style.visibility="hidden"),this.loaderExperienceComponent.on("start-watercolor-scene",this._onStartWatercolorScene),this.advantagesComponent.on("restart-watercolor-scene",this._onRestartBtnClick),null===(t=this._headerSubscribeElts)||void 0===t||t.forEach((function(t){return t.addEventListener("click",e._onSubscribeBtnClick)})),this.canvas=n,SW.init().then((function(){e._experienceManager=new K8({canvas:n,bootstrap:e.bootstrap}),console.log("attach",e._experienceManager)}))}},{key:"detach",value:function(){var t,e,n,r=this;this._experienceManager.destroy(),this._audioManager.destroy(),this.canvas.parentNode&&this.canvas.parentNode.removeChild(this.canvas),null===(t=this.loaderExperienceComponent)||void 0===t||t.off("start-watercolor-scene",this._onStartWatercolorScene),null===(e=this.advantagesComponent)||void 0===e||e.off("restart-watercolor-scene",this._onRestartBtnClick),null===(n=this._headerSubscribeElts)||void 0===n||n.forEach((function(t){return t.removeEventListener("click",r._onSubscribeBtnClick)})),this.smoother.options.syncTouch=this._savedSmoother.syncTouch,this.smoother.options.wheelMultiplier=this._savedSmoother.wheelMultiplier,this.smoother.options.touchMultiplier=this._savedSmoother.touchMultiplier,this.smoother.virtualScroll.wheelMultiplier=this.smoother.options.wheelMultiplier,this.smoother.virtualScroll.touchMultiplier=this.smoother.options.touchMultiplier,console.log("detach",this._experienceManager)}},{key:"_onStartWatercolorScene",value:function(){var t=this;this._experienceManager.start(),this._audioManager.start(),this.canvas.style.willChange="opacity";var e=ti.timeline();e.to(this.canvas,{opacity:1,duration:1.7,ease:"sine.inOut"},0),e.add((function(){t.canvas.style.willChange=""}))}},{key:"_onRestartBtnClick",value:function(){var t=this;this.canvas.style.willChange="opacity";var e=ti.timeline();this._experienceManager.restart(),e.to(this.canvas,{opacity:0,duration:.5,ease:"sine.inOut"},0),e.to(this.advantagesComponent.element,{opacity:0,duration:.5,ease:"sine.inOut"},0),e.addLabel("show"),e.add((function(){t.bootstrap.smoother.scrollTo(0,{immediate:!0,force:!0,duration:0}),KY.syncScroll()}),"show"),e.to(this.advantagesComponent.element,{opacity:1,duration:1.5,ease:"sine.inOut"},"show"),e.to(this.canvas,{opacity:1,duration:1,ease:"sine.inOut"},"show+=.5"),e.add((function(){t.canvas.style.willChange=""}))}},{key:"_onSubscribeBtnClick",value:function(t){var e=this;t.preventDefault(),t.stopPropagation(),this.canvas.style.willChange="opacity";var n=ti.timeline();n.to(this.canvas,{opacity:0,duration:.5,ease:"sine.inOut"},0),n.to(this.advantagesComponent.element,{opacity:0,duration:.5,ease:"sine.inOut"},0),n.addLabel("show"),n.add((function(){e.bootstrap.smoother.scrollTo(KY._height+.5*window.innerHeight,{immediate:!0,force:!0,duration:0}),KY.syncScroll()}),"show"),n.to(this.advantagesComponent.element,{opacity:1,duration:1.5,ease:"sine.inOut"},"show"),n.to(this.canvas,{opacity:1,duration:1,ease:"sine.inOut"},"show+=.5"),n.add((function(){e.canvas.style.willChange=""}))}}],r&&$8(n.prototype,r),i&&$8(n,i),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,i}(Yp),i9=n(6880),o9=n.n(i9);function a9(t){return a9="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},a9(t)}function s9(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,l9(r.key),r)}}function l9(t){var e=function(t,e){if("object"!=a9(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=a9(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==a9(e)?e:e+""}const u9=new(function(){return t=function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),NW.isServer&&(this.bowser=o9().getParser(window.navigator.userAgent))},(e=[{key:"isFirefox",value:function(){return this.bowser.isBrowser("Firefox")}},{key:"isSafari",value:function(){return this.bowser.isBrowser("Safari")}},{key:"isEdge",value:function(){return this.bowser.isBrowser("Microsoft Edge")}},{key:"isInternetExplorer",value:function(){return this.bowser.isBrowser("Internet explorer")}}])&&s9(t.prototype,e),n&&s9(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,n}());const c9=[].concat([],[{type:"json",name:"canela-font",path:"/xp/msdf/CanelaText-Light/CanelaText-Light.json"},{type:"texture",name:"canela-atlas",path:"/xp/msdf/CanelaText-Light/CanelaText-Light.png?v=999"}],[],[]),d9=new WeakMap;class f9 extends iS{constructor(t){super(t),this.decoderPath="",this.decoderConfig={},this.decoderBinary=null,this.decoderPending=null,this.workerLimit=4,this.workerPool=[],this.workerNextTaskID=1,this.workerSourceURL="",this.defaultAttributeIDs={position:"POSITION",normal:"NORMAL",color:"COLOR",uv:"TEX_COORD"},this.defaultAttributeTypes={position:"Float32Array",normal:"Float32Array",color:"Float32Array",uv:"Float32Array"}}setDecoderPath(t){return this.decoderPath=t,this}setDecoderConfig(t){return this.decoderConfig=t,this}setWorkerLimit(t){return this.workerLimit=t,this}load(t,e,n,r){const i=new sS(this.manager);i.setPath(this.path),i.setResponseType("arraybuffer"),i.setRequestHeader(this.requestHeader),i.setWithCredentials(this.withCredentials),i.load(t,(t=>{this.decodeDracoFile(t,e).catch(r)}),n,r)}decodeDracoFile(t,e,n,r){const i={attributeIDs:n||this.defaultAttributeIDs,attributeTypes:r||this.defaultAttributeTypes,useUniqueIDs:!!n};return this.decodeGeometry(t,i).then(e)}decodeGeometry(t,e){const n=JSON.stringify(e);if(d9.has(t)){const e=d9.get(t);if(e.key===n)return e.promise;if(0===t.byteLength)throw new Error("THREE.DRACOLoader: Unable to re-decode a buffer with different settings. Buffer has already been transferred.")}let r;const i=this.workerNextTaskID++,o=t.byteLength,a=this._getWorker(i,o).then((n=>(r=n,new Promise(((n,o)=>{r._callbacks[i]={resolve:n,reject:o},r.postMessage({type:"decode",id:i,taskConfig:e,buffer:t},[t])}))))).then((t=>this._createGeometry(t.geometry)));return a.catch((()=>!0)).then((()=>{r&&i&&this._releaseTask(r,i)})),d9.set(t,{key:n,promise:a}),a}_createGeometry(t){const e=new x_;t.index&&e.setIndex(new h_(t.index.array,1));for(let n=0;n<t.attributes.length;n++){const r=t.attributes[n],i=r.name,o=r.array,a=r.itemSize;e.setAttribute(i,new h_(o,a))}return e}_loadLibrary(t,e){const n=new sS(this.manager);return n.setPath(this.decoderPath),n.setResponseType(e),n.setWithCredentials(this.withCredentials),new Promise(((e,r)=>{n.load(t,e,void 0,r)}))}preload(){return this._initDecoder(),this}_initDecoder(){if(this.decoderPending)return this.decoderPending;const t="object"!=typeof WebAssembly||"js"===this.decoderConfig.type,e=[];return t?e.push(this._loadLibrary("draco_decoder.js","text")):(e.push(this._loadLibrary("draco_wasm_wrapper.js","text")),e.push(this._loadLibrary("draco_decoder.wasm","arraybuffer"))),this.decoderPending=Promise.all(e).then((e=>{const n=e[0];t||(this.decoderConfig.wasmBinary=e[1]);const r=h9.toString(),i=["/* draco decoder */",n,"","/* worker */",r.substring(r.indexOf("{")+1,r.lastIndexOf("}"))].join("\n");this.workerSourceURL=URL.createObjectURL(new Blob([i]))})),this.decoderPending}_getWorker(t,e){return this._initDecoder().then((()=>{if(this.workerPool.length<this.workerLimit){const t=new Worker(this.workerSourceURL);t._callbacks={},t._taskCosts={},t._taskLoad=0,t.postMessage({type:"init",decoderConfig:this.decoderConfig}),t.onmessage=function(e){const n=e.data;switch(n.type){case"decode":t._callbacks[n.id].resolve(n);break;case"error":t._callbacks[n.id].reject(n);break;default:console.error('THREE.DRACOLoader: Unexpected message, "'+n.type+'"')}},this.workerPool.push(t)}else this.workerPool.sort((function(t,e){return t._taskLoad>e._taskLoad?-1:1}));const n=this.workerPool[this.workerPool.length-1];return n._taskCosts[t]=e,n._taskLoad+=e,n}))}_releaseTask(t,e){t._taskLoad-=t._taskCosts[e],delete t._callbacks[e],delete t._taskCosts[e]}debug(){console.log("Task load: ",this.workerPool.map((t=>t._taskLoad)))}dispose(){for(let t=0;t<this.workerPool.length;++t)this.workerPool[t].terminate();return this.workerPool.length=0,""!==this.workerSourceURL&&URL.revokeObjectURL(this.workerSourceURL),this}}function h9(){let t,e;function n(t,e,n,r,i,o){const a=o.num_components(),s=n.num_points()*a,l=s*i.BYTES_PER_ELEMENT,u=function(t,e){switch(e){case Float32Array:return t.DT_FLOAT32;case Int8Array:return t.DT_INT8;case Int16Array:return t.DT_INT16;case Int32Array:return t.DT_INT32;case Uint8Array:return t.DT_UINT8;case Uint16Array:return t.DT_UINT16;case Uint32Array:return t.DT_UINT32}}(t,i),c=t._malloc(l);e.GetAttributeDataArrayForAllPoints(n,o,u,l,c);const d=new i(t.HEAPF32.buffer,c,s).slice();return t._free(c),{name:r,array:d,itemSize:a}}onmessage=function(r){const i=r.data;switch(i.type){case"init":t=i.decoderConfig,e=new Promise((function(e){t.onModuleLoaded=function(t){e({draco:t})},DracoDecoderModule(t)}));break;case"decode":const r=i.buffer,o=i.taskConfig;e.then((t=>{const e=t.draco,a=new e.Decoder,s=new e.DecoderBuffer;s.Init(new Int8Array(r),r.byteLength);try{const t=function(t,e,r,i){const o=i.attributeIDs,a=i.attributeTypes;let s,l;const u=e.GetEncodedGeometryType(r);if(u===t.TRIANGULAR_MESH)s=new t.Mesh,l=e.DecodeBufferToMesh(r,s);else{if(u!==t.POINT_CLOUD)throw new Error("THREE.DRACOLoader: Unexpected geometry type.");s=new t.PointCloud,l=e.DecodeBufferToPointCloud(r,s)}if(!l.ok()||0===s.ptr)throw new Error("THREE.DRACOLoader: Decoding failed: "+l.error_msg());const c={index:null,attributes:[]};for(const r in o){const l=self[a[r]];let u,d;if(i.useUniqueIDs)d=o[r],u=e.GetAttributeByUniqueId(s,d);else{if(d=e.GetAttributeId(s,t[o[r]]),-1===d)continue;u=e.GetAttribute(s,d)}c.attributes.push(n(t,e,s,r,l,u))}u===t.TRIANGULAR_MESH&&(c.index=function(t,e,n){const r=n.num_faces(),i=3*r,o=4*i,a=t._malloc(o);e.GetTrianglesUInt32Array(n,o,a);const s=new Uint32Array(t.HEAPF32.buffer,a,i).slice();return t._free(a),{array:s,itemSize:1}}(t,e,s));return t.destroy(s),c}(e,a,s,o),r=t.attributes.map((t=>t.array.buffer));t.index&&r.push(t.index.array.buffer),self.postMessage({type:"decode",id:i.id,geometry:t},r)}catch(t){console.error(t),self.postMessage({type:"error",id:i.id,error:t.message})}finally{e.destroy(s),e.destroy(a)}}))}}}function p9(t,e){if(0===e)return console.warn("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Geometry already defined as triangles."),t;if(2===e||1===e){let n=t.getIndex();if(null===n){const e=[],r=t.getAttribute("position");if(void 0===r)return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Undefined position attribute. Processing not possible."),t;for(let t=0;t<r.count;t++)e.push(t);t.setIndex(e),n=t.getIndex()}const r=n.count-2,i=[];if(2===e)for(let t=1;t<=r;t++)i.push(n.getX(0)),i.push(n.getX(t)),i.push(n.getX(t+1));else for(let t=0;t<r;t++)t%2==0?(i.push(n.getX(t)),i.push(n.getX(t+1)),i.push(n.getX(t+2))):(i.push(n.getX(t+2)),i.push(n.getX(t+1)),i.push(n.getX(t)));i.length/3!==r&&console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unable to generate correct amount of triangles.");const o=t.clone();return o.setIndex(i),o.clearGroups(),o}return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unknown draw mode:",e),t}class m9 extends iS{constructor(t){super(t),this.dracoLoader=null,this.ktx2Loader=null,this.meshoptDecoder=null,this.pluginCallbacks=[],this.register((function(t){return new w9(t)})),this.register((function(t){return new I9(t)})),this.register((function(t){return new k9(t)})),this.register((function(t){return new E9(t)})),this.register((function(t){return new x9(t)})),this.register((function(t){return new S9(t)})),this.register((function(t){return new T9(t)})),this.register((function(t){return new _9(t)})),this.register((function(t){return new C9(t)})),this.register((function(t){return new A9(t)})),this.register((function(t){return new y9(t)})),this.register((function(t){return new P9(t)})),this.register((function(t){return new R9(t)}))}load(t,e,n,r){const i=this;let o;o=""!==this.resourcePath?this.resourcePath:""!==this.path?this.path:TS.extractUrlBase(t),this.manager.itemStart(t);const a=function(e){r?r(e):console.error(e),i.manager.itemError(t),i.manager.itemEnd(t)},s=new sS(this.manager);s.setPath(this.path),s.setResponseType("arraybuffer"),s.setRequestHeader(this.requestHeader),s.setWithCredentials(this.withCredentials),s.load(t,(function(n){try{i.parse(n,o,(function(n){e(n),i.manager.itemEnd(t)}),a)}catch(t){a(t)}}),n,a)}setDRACOLoader(t){return this.dracoLoader=t,this}setDDSLoader(){throw new Error('THREE.GLTFLoader: "MSFT_texture_dds" no longer supported. Please update to "KHR_texture_basisu".')}setKTX2Loader(t){return this.ktx2Loader=t,this}setMeshoptDecoder(t){return this.meshoptDecoder=t,this}register(t){return-1===this.pluginCallbacks.indexOf(t)&&this.pluginCallbacks.push(t),this}unregister(t){return-1!==this.pluginCallbacks.indexOf(t)&&this.pluginCallbacks.splice(this.pluginCallbacks.indexOf(t),1),this}parse(t,e,n,r){let i;const o={},a={},s=new TextDecoder;if("string"==typeof t)i=JSON.parse(t);else if(t instanceof ArrayBuffer){if(s.decode(new Uint8Array(t,0,4))===O9){try{o[v9.KHR_BINARY_GLTF]=new D9(t)}catch(t){return void(r&&r(t))}i=JSON.parse(o[v9.KHR_BINARY_GLTF].content)}else i=JSON.parse(s.decode(t))}else i=t;if(void 0===i.asset||i.asset.version[0]<2)return void(r&&r(new Error("THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported.")));const l=new a7(i,{path:e||this.resourcePath||"",crossOrigin:this.crossOrigin,requestHeader:this.requestHeader,manager:this.manager,ktx2Loader:this.ktx2Loader,meshoptDecoder:this.meshoptDecoder});l.fileLoader.setRequestHeader(this.requestHeader);for(let t=0;t<this.pluginCallbacks.length;t++){const e=this.pluginCallbacks[t](l);a[e.name]=e,o[e.name]=!0}if(i.extensionsUsed)for(let t=0;t<i.extensionsUsed.length;++t){const e=i.extensionsUsed[t],n=i.extensionsRequired||[];switch(e){case v9.KHR_MATERIALS_UNLIT:o[e]=new b9;break;case v9.KHR_DRACO_MESH_COMPRESSION:o[e]=new N9(i,this.dracoLoader);break;case v9.KHR_TEXTURE_TRANSFORM:o[e]=new B9;break;case v9.KHR_MESH_QUANTIZATION:o[e]=new j9;break;default:n.indexOf(e)>=0&&void 0===a[e]&&console.warn('THREE.GLTFLoader: Unknown extension "'+e+'".')}}l.setExtensions(o),l.setPlugins(a),l.parse(n,r)}parseAsync(t,e){const n=this;return new Promise((function(r,i){n.parse(t,e,r,i)}))}}function g9(){let t={};return{get:function(e){return t[e]},add:function(e,n){t[e]=n},remove:function(e){delete t[e]},removeAll:function(){t={}}}}const v9={KHR_BINARY_GLTF:"KHR_binary_glTF",KHR_DRACO_MESH_COMPRESSION:"KHR_draco_mesh_compression",KHR_LIGHTS_PUNCTUAL:"KHR_lights_punctual",KHR_MATERIALS_CLEARCOAT:"KHR_materials_clearcoat",KHR_MATERIALS_IOR:"KHR_materials_ior",KHR_MATERIALS_SHEEN:"KHR_materials_sheen",KHR_MATERIALS_SPECULAR:"KHR_materials_specular",KHR_MATERIALS_TRANSMISSION:"KHR_materials_transmission",KHR_MATERIALS_IRIDESCENCE:"KHR_materials_iridescence",KHR_MATERIALS_UNLIT:"KHR_materials_unlit",KHR_MATERIALS_VOLUME:"KHR_materials_volume",KHR_TEXTURE_BASISU:"KHR_texture_basisu",KHR_TEXTURE_TRANSFORM:"KHR_texture_transform",KHR_MESH_QUANTIZATION:"KHR_mesh_quantization",KHR_MATERIALS_EMISSIVE_STRENGTH:"KHR_materials_emissive_strength",EXT_TEXTURE_WEBP:"EXT_texture_webp",EXT_MESHOPT_COMPRESSION:"EXT_meshopt_compression",EXT_MESH_GPU_INSTANCING:"EXT_mesh_gpu_instancing"};class y9{constructor(t){this.parser=t,this.name=v9.KHR_LIGHTS_PUNCTUAL,this.cache={refs:{},uses:{}}}_markDefs(){const t=this.parser,e=this.parser.json.nodes||[];for(let n=0,r=e.length;n<r;n++){const r=e[n];r.extensions&&r.extensions[this.name]&&void 0!==r.extensions[this.name].light&&t._addNodeRef(this.cache,r.extensions[this.name].light)}}_loadLight(t){const e=this.parser,n="light:"+t;let r=e.cache.get(n);if(r)return r;const i=e.json,o=((i.extensions&&i.extensions[this.name]||{}).lights||[])[t];let a;const s=new By(16777215);void 0!==o.color&&s.fromArray(o.color);const l=void 0!==o.range?o.range:0;switch(o.type){case"directional":a=new xS(s),a.target.position.set(0,0,-1),a.add(a.target);break;case"point":a=new AS(s),a.distance=l;break;case"spot":a=new vS(s),a.distance=l,o.spot=o.spot||{},o.spot.innerConeAngle=void 0!==o.spot.innerConeAngle?o.spot.innerConeAngle:0,o.spot.outerConeAngle=void 0!==o.spot.outerConeAngle?o.spot.outerConeAngle:Math.PI/4,a.angle=o.spot.outerConeAngle,a.penumbra=1-o.spot.innerConeAngle/o.spot.outerConeAngle,a.target.position.set(0,0,-1),a.add(a.target);break;default:throw new Error("THREE.GLTFLoader: Unexpected light type: "+o.type)}return a.position.set(0,0,0),a.decay=2,t7(a,o),void 0!==o.intensity&&(a.intensity=o.intensity),a.name=e.createUniqueName(o.name||"light_"+t),r=Promise.resolve(a),e.cache.add(n,r),r}getDependency(t,e){if("light"===t)return this._loadLight(e)}createNodeAttachment(t){const e=this,n=this.parser,r=n.json.nodes[t],i=(r.extensions&&r.extensions[this.name]||{}).light;return void 0===i?null:this._loadLight(i).then((function(t){return n._getNodeRef(e.cache,i,t)}))}}class b9{constructor(){this.name=v9.KHR_MATERIALS_UNLIT}getMaterialType(){return c_}extendParams(t,e,n){const r=[];t.color=new By(1,1,1),t.opacity=1;const i=e.pbrMetallicRoughness;if(i){if(Array.isArray(i.baseColorFactor)){const e=i.baseColorFactor;t.color.fromArray(e),t.opacity=e[3]}void 0!==i.baseColorTexture&&r.push(n.assignTexture(t,"map",i.baseColorTexture,Xv))}return Promise.all(r)}}class _9{constructor(t){this.parser=t,this.name=v9.KHR_MATERIALS_EMISSIVE_STRENGTH}extendMaterialParams(t,e){const n=this.parser.json.materials[t];if(!n.extensions||!n.extensions[this.name])return Promise.resolve();const r=n.extensions[this.name].emissiveStrength;return void 0!==r&&(e.emissiveIntensity=r),Promise.resolve()}}class w9{constructor(t){this.parser=t,this.name=v9.KHR_MATERIALS_CLEARCOAT}getMaterialType(t){const e=this.parser.json.materials[t];return e.extensions&&e.extensions[this.name]?Mx:null}extendMaterialParams(t,e){const n=this.parser,r=n.json.materials[t];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const i=[],o=r.extensions[this.name];if(void 0!==o.clearcoatFactor&&(e.clearcoat=o.clearcoatFactor),void 0!==o.clearcoatTexture&&i.push(n.assignTexture(e,"clearcoatMap",o.clearcoatTexture)),void 0!==o.clearcoatRoughnessFactor&&(e.clearcoatRoughness=o.clearcoatRoughnessFactor),void 0!==o.clearcoatRoughnessTexture&&i.push(n.assignTexture(e,"clearcoatRoughnessMap",o.clearcoatRoughnessTexture)),void 0!==o.clearcoatNormalTexture&&(i.push(n.assignTexture(e,"clearcoatNormalMap",o.clearcoatNormalTexture)),void 0!==o.clearcoatNormalTexture.scale)){const t=o.clearcoatNormalTexture.scale;e.clearcoatNormalScale=new Ay(t,t)}return Promise.all(i)}}class A9{constructor(t){this.parser=t,this.name=v9.KHR_MATERIALS_IRIDESCENCE}getMaterialType(t){const e=this.parser.json.materials[t];return e.extensions&&e.extensions[this.name]?Mx:null}extendMaterialParams(t,e){const n=this.parser,r=n.json.materials[t];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const i=[],o=r.extensions[this.name];return void 0!==o.iridescenceFactor&&(e.iridescence=o.iridescenceFactor),void 0!==o.iridescenceTexture&&i.push(n.assignTexture(e,"iridescenceMap",o.iridescenceTexture)),void 0!==o.iridescenceIor&&(e.iridescenceIOR=o.iridescenceIor),void 0===e.iridescenceThicknessRange&&(e.iridescenceThicknessRange=[100,400]),void 0!==o.iridescenceThicknessMinimum&&(e.iridescenceThicknessRange[0]=o.iridescenceThicknessMinimum),void 0!==o.iridescenceThicknessMaximum&&(e.iridescenceThicknessRange[1]=o.iridescenceThicknessMaximum),void 0!==o.iridescenceThicknessTexture&&i.push(n.assignTexture(e,"iridescenceThicknessMap",o.iridescenceThicknessTexture)),Promise.all(i)}}class E9{constructor(t){this.parser=t,this.name=v9.KHR_MATERIALS_SHEEN}getMaterialType(t){const e=this.parser.json.materials[t];return e.extensions&&e.extensions[this.name]?Mx:null}extendMaterialParams(t,e){const n=this.parser,r=n.json.materials[t];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const i=[];e.sheenColor=new By(0,0,0),e.sheenRoughness=0,e.sheen=1;const o=r.extensions[this.name];return void 0!==o.sheenColorFactor&&e.sheenColor.fromArray(o.sheenColorFactor),void 0!==o.sheenRoughnessFactor&&(e.sheenRoughness=o.sheenRoughnessFactor),void 0!==o.sheenColorTexture&&i.push(n.assignTexture(e,"sheenColorMap",o.sheenColorTexture,Xv)),void 0!==o.sheenRoughnessTexture&&i.push(n.assignTexture(e,"sheenRoughnessMap",o.sheenRoughnessTexture)),Promise.all(i)}}class x9{constructor(t){this.parser=t,this.name=v9.KHR_MATERIALS_TRANSMISSION}getMaterialType(t){const e=this.parser.json.materials[t];return e.extensions&&e.extensions[this.name]?Mx:null}extendMaterialParams(t,e){const n=this.parser,r=n.json.materials[t];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const i=[],o=r.extensions[this.name];return void 0!==o.transmissionFactor&&(e.transmission=o.transmissionFactor),void 0!==o.transmissionTexture&&i.push(n.assignTexture(e,"transmissionMap",o.transmissionTexture)),Promise.all(i)}}class S9{constructor(t){this.parser=t,this.name=v9.KHR_MATERIALS_VOLUME}getMaterialType(t){const e=this.parser.json.materials[t];return e.extensions&&e.extensions[this.name]?Mx:null}extendMaterialParams(t,e){const n=this.parser,r=n.json.materials[t];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const i=[],o=r.extensions[this.name];e.thickness=void 0!==o.thicknessFactor?o.thicknessFactor:0,void 0!==o.thicknessTexture&&i.push(n.assignTexture(e,"thicknessMap",o.thicknessTexture)),e.attenuationDistance=o.attenuationDistance||1/0;const a=o.attenuationColor||[1,1,1];return e.attenuationColor=new By(a[0],a[1],a[2]),Promise.all(i)}}class T9{constructor(t){this.parser=t,this.name=v9.KHR_MATERIALS_IOR}getMaterialType(t){const e=this.parser.json.materials[t];return e.extensions&&e.extensions[this.name]?Mx:null}extendMaterialParams(t,e){const n=this.parser.json.materials[t];if(!n.extensions||!n.extensions[this.name])return Promise.resolve();const r=n.extensions[this.name];return e.ior=void 0!==r.ior?r.ior:1.5,Promise.resolve()}}class C9{constructor(t){this.parser=t,this.name=v9.KHR_MATERIALS_SPECULAR}getMaterialType(t){const e=this.parser.json.materials[t];return e.extensions&&e.extensions[this.name]?Mx:null}extendMaterialParams(t,e){const n=this.parser,r=n.json.materials[t];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const i=[],o=r.extensions[this.name];e.specularIntensity=void 0!==o.specularFactor?o.specularFactor:1,void 0!==o.specularTexture&&i.push(n.assignTexture(e,"specularIntensityMap",o.specularTexture));const a=o.specularColorFactor||[1,1,1];return e.specularColor=new By(a[0],a[1],a[2]),void 0!==o.specularColorTexture&&i.push(n.assignTexture(e,"specularColorMap",o.specularColorTexture,Xv)),Promise.all(i)}}class I9{constructor(t){this.parser=t,this.name=v9.KHR_TEXTURE_BASISU}loadTexture(t){const e=this.parser,n=e.json,r=n.textures[t];if(!r.extensions||!r.extensions[this.name])return null;const i=r.extensions[this.name],o=e.options.ktx2Loader;if(!o){if(n.extensionsRequired&&n.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setKTX2Loader must be called before loading KTX2 textures");return null}return e.loadTextureImage(t,i.source,o)}}class k9{constructor(t){this.parser=t,this.name=v9.EXT_TEXTURE_WEBP,this.isSupported=null}loadTexture(t){const e=this.name,n=this.parser,r=n.json,i=r.textures[t];if(!i.extensions||!i.extensions[e])return null;const o=i.extensions[e],a=r.images[o.source];let s=n.textureLoader;if(a.uri){const t=n.options.manager.getHandler(a.uri);null!==t&&(s=t)}return this.detectSupport().then((function(i){if(i)return n.loadTextureImage(t,o.source,s);if(r.extensionsRequired&&r.extensionsRequired.indexOf(e)>=0)throw new Error("THREE.GLTFLoader: WebP required by asset but unsupported.");return n.loadTexture(t)}))}detectSupport(){return this.isSupported||(this.isSupported=new Promise((function(t){const e=new Image;e.src="data:image/webp;base64,UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA",e.onload=e.onerror=function(){t(1===e.height)}}))),this.isSupported}}class P9{constructor(t){this.name=v9.EXT_MESHOPT_COMPRESSION,this.parser=t}loadBufferView(t){const e=this.parser.json,n=e.bufferViews[t];if(n.extensions&&n.extensions[this.name]){const t=n.extensions[this.name],r=this.parser.getDependency("buffer",t.buffer),i=this.parser.options.meshoptDecoder;if(!i||!i.supported){if(e.extensionsRequired&&e.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setMeshoptDecoder must be called before loading compressed files");return null}return r.then((function(e){const n=t.byteOffset||0,r=t.byteLength||0,o=t.count,a=t.byteStride,s=new Uint8Array(e,n,r);return i.decodeGltfBufferAsync?i.decodeGltfBufferAsync(o,a,s,t.mode,t.filter).then((function(t){return t.buffer})):i.ready.then((function(){const e=new ArrayBuffer(o*a);return i.decodeGltfBuffer(new Uint8Array(e),o,a,s,t.mode,t.filter),e}))}))}return null}}class R9{constructor(t){this.name=v9.EXT_MESH_GPU_INSTANCING,this.parser=t}createNodeMesh(t){const e=this.parser.json,n=e.nodes[t];if(!n.extensions||!n.extensions[this.name]||void 0===n.mesh)return null;const r=e.meshes[n.mesh];for(const t of r.primitives)if(t.mode!==q9.TRIANGLES&&t.mode!==q9.TRIANGLE_STRIP&&t.mode!==q9.TRIANGLE_FAN&&void 0!==t.mode)return null;const i=n.extensions[this.name].attributes,o=[],a={};for(const t in i)o.push(this.parser.getDependency("accessor",i[t]).then((e=>(a[t]=e,a[t]))));return o.length<1?null:(o.push(this.parser.createNodeMesh(t)),Promise.all(o).then((t=>{const e=t.pop(),n=e.isGroup?e.children:[e],r=t[0].count,i=[];for(const t of n){const e=new Sb,n=new Ky,o=new Yy,s=new Ky(1,1,1),l=new lx(t.geometry,t.material,r);for(let t=0;t<r;t++)a.TRANSLATION&&n.fromBufferAttribute(a.TRANSLATION,t),a.ROTATION&&o.fromBufferAttribute(a.ROTATION,t),a.SCALE&&s.fromBufferAttribute(a.SCALE,t),l.setMatrixAt(t,e.compose(n,o,s));for(const e in a)"TRANSLATION"!==e&&"ROTATION"!==e&&"SCALE"!==e&&t.geometry.setAttribute(e,a[e]);Xb.prototype.copy.call(l,t),l.frustumCulled=!1,this.parser.assignFinalMaterial(l),i.push(l)}return e.isGroup?(e.clear(),e.add(...i),e):i[0]})))}}const O9="glTF",M9=1313821514,L9=5130562;class D9{constructor(t){this.name=v9.KHR_BINARY_GLTF,this.content=null,this.body=null;const e=new DataView(t,0,12),n=new TextDecoder;if(this.header={magic:n.decode(new Uint8Array(t.slice(0,4))),version:e.getUint32(4,!0),length:e.getUint32(8,!0)},this.header.magic!==O9)throw new Error("THREE.GLTFLoader: Unsupported glTF-Binary header.");if(this.header.version<2)throw new Error("THREE.GLTFLoader: Legacy binary file detected.");const r=this.header.length-12,i=new DataView(t,12);let o=0;for(;o<r;){const e=i.getUint32(o,!0);o+=4;const r=i.getUint32(o,!0);if(o+=4,r===M9){const r=new Uint8Array(t,12+o,e);this.content=n.decode(r)}else if(r===L9){const n=12+o;this.body=t.slice(n,n+e)}o+=e}if(null===this.content)throw new Error("THREE.GLTFLoader: JSON content not found.")}}class N9{constructor(t,e){if(!e)throw new Error("THREE.GLTFLoader: No DRACOLoader instance provided.");this.name=v9.KHR_DRACO_MESH_COMPRESSION,this.json=t,this.dracoLoader=e,this.dracoLoader.preload()}decodePrimitive(t,e){const n=this.json,r=this.dracoLoader,i=t.extensions[this.name].bufferView,o=t.extensions[this.name].attributes,a={},s={},l={};for(const t in o){const e=W9[t]||t.toLowerCase();a[e]=o[t]}for(const e in t.attributes){const r=W9[e]||e.toLowerCase();if(void 0!==o[e]){const i=n.accessors[t.attributes[e]],o=G9[i.componentType];l[r]=o.name,s[r]=!0===i.normalized}}return e.getDependency("bufferView",i).then((function(t){return new Promise((function(e){r.decodeDracoFile(t,(function(t){for(const e in t.attributes){const n=t.attributes[e],r=s[e];void 0!==r&&(n.normalized=r)}e(t)}),a,l)}))}))}}class B9{constructor(){this.name=v9.KHR_TEXTURE_TRANSFORM}extendTexture(t,e){return void 0!==e.texCoord&&console.warn('THREE.GLTFLoader: Custom UV sets in "'+this.name+'" extension not yet supported.'),void 0===e.offset&&void 0===e.rotation&&void 0===e.scale||(t=t.clone(),void 0!==e.offset&&t.offset.fromArray(e.offset),void 0!==e.rotation&&(t.rotation=e.rotation),void 0!==e.scale&&t.repeat.fromArray(e.scale),t.needsUpdate=!0),t}}class j9{constructor(){this.name=v9.KHR_MESH_QUANTIZATION}}class z9 extends Ux{constructor(t,e,n,r){super(t,e,n,r)}copySampleValue_(t){const e=this.resultBuffer,n=this.sampleValues,r=this.valueSize,i=t*r*3+r;for(let t=0;t!==r;t++)e[t]=n[i+t];return e}interpolate_(t,e,n,r){const i=this.resultBuffer,o=this.sampleValues,a=this.valueSize,s=2*a,l=3*a,u=r-e,c=(n-e)/u,d=c*c,f=d*c,h=t*l,p=h-l,m=-2*f+3*d,g=f-d,v=1-m,y=g-d+c;for(let t=0;t!==a;t++){const e=o[p+t+a],n=o[p+t+s]*u,r=o[h+t+a],l=o[h+t]*u;i[t]=v*e+y*n+m*r+g*l}return i}}const F9=new Yy;class U9 extends z9{interpolate_(t,e,n,r){const i=super.interpolate_(t,e,n,r);return F9.fromArray(i).normalize().toArray(i),i}}const q9={FLOAT:5126,FLOAT_MAT3:35675,FLOAT_MAT4:35676,FLOAT_VEC2:35664,FLOAT_VEC3:35665,FLOAT_VEC4:35666,LINEAR:9729,REPEAT:10497,SAMPLER_2D:35678,POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6,UNSIGNED_BYTE:5121,UNSIGNED_SHORT:5123},G9={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},H9={9728:jg,9729:Ug,9984:zg,9985:qg,9986:Fg,9987:Gg},V9={33071:Ng,33648:Bg,10497:Dg},Q9={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},W9={POSITION:"position",NORMAL:"normal",TANGENT:"tangent",TEXCOORD_0:"uv",TEXCOORD_1:"uv2",COLOR_0:"color",WEIGHTS_0:"skinWeight",JOINTS_0:"skinIndex"},Y9={scale:"scale",translation:"position",rotation:"quaternion",weights:"morphTargetInfluences"},K9={CUBICSPLINE:void 0,LINEAR:Gv,STEP:qv},X9="OPAQUE",$9="MASK",Z9="BLEND";function J9(t,e,n){for(const r in n.extensions)void 0===t[r]&&(e.userData.gltfExtensions=e.userData.gltfExtensions||{},e.userData.gltfExtensions[r]=n.extensions[r])}function t7(t,e){void 0!==e.extras&&("object"==typeof e.extras?Object.assign(t.userData,e.extras):console.warn("THREE.GLTFLoader: Ignoring primitive type .extras, "+e.extras))}function e7(t,e){if(t.updateMorphTargets(),void 0!==e.weights)for(let n=0,r=e.weights.length;n<r;n++)t.morphTargetInfluences[n]=e.weights[n];if(e.extras&&Array.isArray(e.extras.targetNames)){const n=e.extras.targetNames;if(t.morphTargetInfluences.length===n.length){t.morphTargetDictionary={};for(let e=0,r=n.length;e<r;e++)t.morphTargetDictionary[n[e]]=e}else console.warn("THREE.GLTFLoader: Invalid extras.targetNames length. Ignoring names.")}}function n7(t){const e=t.extensions&&t.extensions[v9.KHR_DRACO_MESH_COMPRESSION];let n;return n=e?"draco:"+e.bufferView+":"+e.indices+":"+r7(e.attributes):t.indices+":"+r7(t.attributes)+":"+t.mode,n}function r7(t){let e="";const n=Object.keys(t).sort();for(let r=0,i=n.length;r<i;r++)e+=n[r]+":"+t[n[r]]+";";return e}function i7(t){switch(t){case Int8Array:return 1/127;case Uint8Array:return 1/255;case Int16Array:return 1/32767;case Uint16Array:return 1/65535;default:throw new Error("THREE.GLTFLoader: Unsupported normalized accessor component type.")}}const o7=new Sb;class a7{constructor(t={},e={}){this.json=t,this.extensions={},this.plugins={},this.options=e,this.cache=new g9,this.associations=new Map,this.primitiveCache={},this.meshCache={refs:{},uses:{}},this.cameraCache={refs:{},uses:{}},this.lightCache={refs:{},uses:{}},this.sourceCache={},this.textureCache={},this.nodeNamesUsed={};let n=!1,r=!1,i=-1;"undefined"!=typeof navigator&&(n=!0===/^((?!chrome|android).)*safari/i.test(navigator.userAgent),r=navigator.userAgent.indexOf("Firefox")>-1,i=r?navigator.userAgent.match(/Firefox\/([0-9]+)\./)[1]:-1),"undefined"==typeof createImageBitmap||n||r&&i<98?this.textureLoader=new cS(this.options.manager):this.textureLoader=new IS(this.options.manager),this.textureLoader.setCrossOrigin(this.options.crossOrigin),this.textureLoader.setRequestHeader(this.options.requestHeader),this.fileLoader=new sS(this.options.manager),this.fileLoader.setResponseType("arraybuffer"),"use-credentials"===this.options.crossOrigin&&this.fileLoader.setWithCredentials(!0)}setExtensions(t){this.extensions=t}setPlugins(t){this.plugins=t}parse(t,e){const n=this,r=this.json,i=this.extensions;this.cache.removeAll(),this._invokeAll((function(t){return t._markDefs&&t._markDefs()})),Promise.all(this._invokeAll((function(t){return t.beforeRoot&&t.beforeRoot()}))).then((function(){return Promise.all([n.getDependencies("scene"),n.getDependencies("animation"),n.getDependencies("camera")])})).then((function(e){const o={scene:e[0][r.scene||0],scenes:e[0],animations:e[1],cameras:e[2],asset:r.asset,parser:n,userData:{}};J9(i,o,r),t7(o,r),Promise.all(n._invokeAll((function(t){return t.afterRoot&&t.afterRoot(o)}))).then((function(){t(o)}))})).catch(e)}_markDefs(){const t=this.json.nodes||[],e=this.json.skins||[],n=this.json.meshes||[];for(let n=0,r=e.length;n<r;n++){const r=e[n].joints;for(let e=0,n=r.length;e<n;e++)t[r[e]].isBone=!0}for(let e=0,r=t.length;e<r;e++){const r=t[e];void 0!==r.mesh&&(this._addNodeRef(this.meshCache,r.mesh),void 0!==r.skin&&(n[r.mesh].isSkinnedMesh=!0)),void 0!==r.camera&&this._addNodeRef(this.cameraCache,r.camera)}}_addNodeRef(t,e){void 0!==e&&(void 0===t.refs[e]&&(t.refs[e]=t.uses[e]=0),t.refs[e]++)}_getNodeRef(t,e,n){if(t.refs[e]<=1)return n;const r=n.clone(),i=(t,e)=>{const n=this.associations.get(t);null!=n&&this.associations.set(e,n);for(const[n,r]of t.children.entries())i(r,e.children[n])};return i(n,r),r.name+="_instance_"+t.uses[e]++,r}_invokeOne(t){const e=Object.values(this.plugins);e.push(this);for(let n=0;n<e.length;n++){const r=t(e[n]);if(r)return r}return null}_invokeAll(t){const e=Object.values(this.plugins);e.unshift(this);const n=[];for(let r=0;r<e.length;r++){const i=t(e[r]);i&&n.push(i)}return n}getDependency(t,e){const n=t+":"+e;let r=this.cache.get(n);if(!r){switch(t){case"scene":r=this.loadScene(e);break;case"node":r=this._invokeOne((function(t){return t.loadNode&&t.loadNode(e)}));break;case"mesh":r=this._invokeOne((function(t){return t.loadMesh&&t.loadMesh(e)}));break;case"accessor":r=this.loadAccessor(e);break;case"bufferView":r=this._invokeOne((function(t){return t.loadBufferView&&t.loadBufferView(e)}));break;case"buffer":r=this.loadBuffer(e);break;case"material":r=this._invokeOne((function(t){return t.loadMaterial&&t.loadMaterial(e)}));break;case"texture":r=this._invokeOne((function(t){return t.loadTexture&&t.loadTexture(e)}));break;case"skin":r=this.loadSkin(e);break;case"animation":r=this._invokeOne((function(t){return t.loadAnimation&&t.loadAnimation(e)}));break;case"camera":r=this.loadCamera(e);break;default:if(r=this._invokeOne((function(n){return n!=this&&n.getDependency&&n.getDependency(t,e)})),!r)throw new Error("Unknown type: "+t)}this.cache.add(n,r)}return r}getDependencies(t){let e=this.cache.get(t);if(!e){const n=this,r=this.json[t+("mesh"===t?"es":"s")]||[];e=Promise.all(r.map((function(e,r){return n.getDependency(t,r)}))),this.cache.add(t,e)}return e}loadBuffer(t){const e=this.json.buffers[t],n=this.fileLoader;if(e.type&&"arraybuffer"!==e.type)throw new Error("THREE.GLTFLoader: "+e.type+" buffer type is not supported.");if(void 0===e.uri&&0===t)return Promise.resolve(this.extensions[v9.KHR_BINARY_GLTF].body);const r=this.options;return new Promise((function(t,i){n.load(TS.resolveURL(e.uri,r.path),t,void 0,(function(){i(new Error('THREE.GLTFLoader: Failed to load buffer "'+e.uri+'".'))}))}))}loadBufferView(t){const e=this.json.bufferViews[t];return this.getDependency("buffer",e.buffer).then((function(t){const n=e.byteLength||0,r=e.byteOffset||0;return t.slice(r,r+n)}))}loadAccessor(t){const e=this,n=this.json,r=this.json.accessors[t];if(void 0===r.bufferView&&void 0===r.sparse){const t=Q9[r.type],e=G9[r.componentType],n=!0===r.normalized,i=new e(r.count*t);return Promise.resolve(new h_(i,t,n))}const i=[];return void 0!==r.bufferView?i.push(this.getDependency("bufferView",r.bufferView)):i.push(null),void 0!==r.sparse&&(i.push(this.getDependency("bufferView",r.sparse.indices.bufferView)),i.push(this.getDependency("bufferView",r.sparse.values.bufferView))),Promise.all(i).then((function(t){const i=t[0],o=Q9[r.type],a=G9[r.componentType],s=a.BYTES_PER_ELEMENT,l=s*o,u=r.byteOffset||0,c=void 0!==r.bufferView?n.bufferViews[r.bufferView].byteStride:void 0,d=!0===r.normalized;let f,h;if(c&&c!==l){const t=Math.floor(u/c),n="InterleavedBuffer:"+r.bufferView+":"+r.componentType+":"+t+":"+r.count;let l=e.cache.get(n);l||(f=new a(i,t*c,r.count*c/s),l=new qE(f,c/s),e.cache.add(n,l)),h=new HE(l,o,u%c/s,d)}else f=null===i?new a(r.count*o):new a(i,u,r.count*o),h=new h_(f,o,d);if(void 0!==r.sparse){const e=Q9.SCALAR,n=G9[r.sparse.indices.componentType],s=r.sparse.indices.byteOffset||0,l=r.sparse.values.byteOffset||0,u=new n(t[1],s,r.sparse.count*e),c=new a(t[2],l,r.sparse.count*o);null!==i&&(h=new h_(h.array.slice(),h.itemSize,h.normalized));for(let t=0,e=u.length;t<e;t++){const e=u[t];if(h.setX(e,c[t*o]),o>=2&&h.setY(e,c[t*o+1]),o>=3&&h.setZ(e,c[t*o+2]),o>=4&&h.setW(e,c[t*o+3]),o>=5)throw new Error("THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.")}}return h}))}loadTexture(t){const e=this.json,n=this.options,r=e.textures[t].source,i=e.images[r];let o=this.textureLoader;if(i.uri){const t=n.manager.getHandler(i.uri);null!==t&&(o=t)}return this.loadTextureImage(t,r,o)}loadTextureImage(t,e,n){const r=this,i=this.json,o=i.textures[t],a=i.images[e],s=(a.uri||a.bufferView)+":"+o.sampler;if(this.textureCache[s])return this.textureCache[s];const l=this.loadImageSource(e,n).then((function(e){e.flipY=!1,e.name=o.name||a.name||"";const n=(i.samplers||{})[o.sampler]||{};return e.magFilter=H9[n.magFilter]||Ug,e.minFilter=H9[n.minFilter]||Gg,e.wrapS=V9[n.wrapS]||Dg,e.wrapT=V9[n.wrapT]||Dg,r.associations.set(e,{textures:t}),e})).catch((function(){return null}));return this.textureCache[s]=l,l}loadImageSource(t,e){const n=this,r=this.json,i=this.options;if(void 0!==this.sourceCache[t])return this.sourceCache[t].then((t=>t.clone()));const o=r.images[t],a=self.URL||self.webkitURL;let s=o.uri||"",l=!1;if(void 0!==o.bufferView)s=n.getDependency("bufferView",o.bufferView).then((function(t){l=!0;const e=new Blob([t],{type:o.mimeType});return s=a.createObjectURL(e),s}));else if(void 0===o.uri)throw new Error("THREE.GLTFLoader: Image "+t+" is missing URI and bufferView");const u=Promise.resolve(s).then((function(t){return new Promise((function(n,r){let o=n;!0===e.isImageBitmapLoader&&(o=function(t){const e=new Gy(t);e.needsUpdate=!0,n(e)}),e.load(TS.resolveURL(t,i.path),o,void 0,r)}))})).then((function(t){var e;return!0===l&&a.revokeObjectURL(s),t.userData.mimeType=o.mimeType||((e=o.uri).search(/\.jpe?g($|\?)/i)>0||0===e.search(/^data\:image\/jpeg/)?"image/jpeg":e.search(/\.webp($|\?)/i)>0||0===e.search(/^data\:image\/webp/)?"image/webp":"image/png"),t})).catch((function(t){throw console.error("THREE.GLTFLoader: Couldn't load texture",s),t}));return this.sourceCache[t]=u,u}assignTexture(t,e,n,r){const i=this;return this.getDependency("texture",n.index).then((function(o){if(!o)return null;if(void 0===n.texCoord||0==n.texCoord||"aoMap"===e&&1==n.texCoord||console.warn("THREE.GLTFLoader: Custom UV set "+n.texCoord+" for texture "+e+" not yet supported."),i.extensions[v9.KHR_TEXTURE_TRANSFORM]){const t=void 0!==n.extensions?n.extensions[v9.KHR_TEXTURE_TRANSFORM]:void 0;if(t){const e=i.associations.get(o);o=i.extensions[v9.KHR_TEXTURE_TRANSFORM].extendTexture(o,t),i.associations.set(o,e)}}return void 0!==r&&(o.encoding=r),t[e]=o,o}))}assignFinalMaterial(t){const e=t.geometry;let n=t.material;const r=void 0===e.attributes.tangent,i=void 0!==e.attributes.color,o=void 0===e.attributes.normal;if(t.isPoints){const t="PointsMaterial:"+n.uuid;let e=this.cache.get(t);e||(e=new _x,u_.prototype.copy.call(e,n),e.color.copy(n.color),e.map=n.map,e.sizeAttenuation=!1,this.cache.add(t,e)),n=e}else if(t.isLine){const t="LineBasicMaterial:"+n.uuid;let e=this.cache.get(t);e||(e=new ux,u_.prototype.copy.call(e,n),e.color.copy(n.color),this.cache.add(t,e)),n=e}if(r||i||o){let t="ClonedMaterial:"+n.uuid+":";r&&(t+="derivative-tangents:"),i&&(t+="vertex-colors:"),o&&(t+="flat-shading:");let e=this.cache.get(t);e||(e=n.clone(),i&&(e.vertexColors=!0),o&&(e.flatShading=!0),r&&(e.normalScale&&(e.normalScale.y*=-1),e.clearcoatNormalScale&&(e.clearcoatNormalScale.y*=-1)),this.cache.add(t,e),this.associations.set(e,this.associations.get(n))),n=e}n.aoMap&&void 0===e.attributes.uv2&&void 0!==e.attributes.uv&&e.setAttribute("uv2",e.attributes.uv),t.material=n}getMaterialType(){return Ox}loadMaterial(t){const e=this,n=this.json,r=this.extensions,i=n.materials[t];let o;const a={},s=[];if((i.extensions||{})[v9.KHR_MATERIALS_UNLIT]){const t=r[v9.KHR_MATERIALS_UNLIT];o=t.getMaterialType(),s.push(t.extendParams(a,i,e))}else{const n=i.pbrMetallicRoughness||{};if(a.color=new By(1,1,1),a.opacity=1,Array.isArray(n.baseColorFactor)){const t=n.baseColorFactor;a.color.fromArray(t),a.opacity=t[3]}void 0!==n.baseColorTexture&&s.push(e.assignTexture(a,"map",n.baseColorTexture,Xv)),a.metalness=void 0!==n.metallicFactor?n.metallicFactor:1,a.roughness=void 0!==n.roughnessFactor?n.roughnessFactor:1,void 0!==n.metallicRoughnessTexture&&(s.push(e.assignTexture(a,"metalnessMap",n.metallicRoughnessTexture)),s.push(e.assignTexture(a,"roughnessMap",n.metallicRoughnessTexture))),o=this._invokeOne((function(e){return e.getMaterialType&&e.getMaterialType(t)})),s.push(Promise.all(this._invokeAll((function(e){return e.extendMaterialParams&&e.extendMaterialParams(t,a)}))))}!0===i.doubleSided&&(a.side=Hm);const l=i.alphaMode||X9;if(l===Z9?(a.transparent=!0,a.depthWrite=!1):(a.transparent=!1,l===$9&&(a.alphaTest=void 0!==i.alphaCutoff?i.alphaCutoff:.5)),void 0!==i.normalTexture&&o!==c_&&(s.push(e.assignTexture(a,"normalMap",i.normalTexture)),a.normalScale=new Ay(1,1),void 0!==i.normalTexture.scale)){const t=i.normalTexture.scale;a.normalScale.set(t,t)}return void 0!==i.occlusionTexture&&o!==c_&&(s.push(e.assignTexture(a,"aoMap",i.occlusionTexture)),void 0!==i.occlusionTexture.strength&&(a.aoMapIntensity=i.occlusionTexture.strength)),void 0!==i.emissiveFactor&&o!==c_&&(a.emissive=(new By).fromArray(i.emissiveFactor)),void 0!==i.emissiveTexture&&o!==c_&&s.push(e.assignTexture(a,"emissiveMap",i.emissiveTexture,Xv)),Promise.all(s).then((function(){const n=new o(a);return i.name&&(n.name=i.name),t7(n,i),e.associations.set(n,{materials:t}),i.extensions&&J9(r,n,i),n}))}createUniqueName(t){const e=jS.sanitizeNodeName(t||"");let n=e;for(let t=1;this.nodeNamesUsed[n];++t)n=e+"_"+t;return this.nodeNamesUsed[n]=!0,n}loadGeometries(t){const e=this,n=this.extensions,r=this.primitiveCache;function i(t){return n[v9.KHR_DRACO_MESH_COMPRESSION].decodePrimitive(t,e).then((function(n){return s7(n,t,e)}))}const o=[];for(let n=0,a=t.length;n<a;n++){const a=t[n],s=n7(a),l=r[s];if(l)o.push(l.promise);else{let t;t=a.extensions&&a.extensions[v9.KHR_DRACO_MESH_COMPRESSION]?i(a):s7(new x_,a,e),r[s]={primitive:a,promise:t},o.push(t)}}return Promise.all(o)}loadMesh(t){const e=this,n=this.json,r=this.extensions,i=n.meshes[t],o=i.primitives,a=[];for(let t=0,e=o.length;t<e;t++){const e=void 0===o[t].material?(void 0===(s=this.cache).DefaultMaterial&&(s.DefaultMaterial=new Ox({color:16777215,emissive:0,metalness:1,roughness:1,transparent:!1,depthTest:!0,side:qm})),s.DefaultMaterial):this.getDependency("material",o[t].material);a.push(e)}var s;return a.push(e.loadGeometries(o)),Promise.all(a).then((function(n){const a=n.slice(0,n.length-1),s=n[n.length-1],l=[];for(let n=0,u=s.length;n<u;n++){const u=s[n],c=o[n];let d;const f=a[n];if(c.mode===q9.TRIANGLES||c.mode===q9.TRIANGLE_STRIP||c.mode===q9.TRIANGLE_FAN||void 0===c.mode)d=!0===i.isSkinnedMesh?new XE(u,f):new j_(u,f),!0!==d.isSkinnedMesh||d.geometry.attributes.skinWeight.normalized||d.normalizeSkinWeights(),c.mode===q9.TRIANGLE_STRIP?d.geometry=p9(d.geometry,1):c.mode===q9.TRIANGLE_FAN&&(d.geometry=p9(d.geometry,2));else if(c.mode===q9.LINES)d=new yx(u,f);else if(c.mode===q9.LINE_STRIP)d=new mx(u,f);else if(c.mode===q9.LINE_LOOP)d=new bx(u,f);else{if(c.mode!==q9.POINTS)throw new Error("THREE.GLTFLoader: Primitive mode unsupported: "+c.mode);d=new Sx(u,f)}Object.keys(d.geometry.morphAttributes).length>0&&e7(d,i),d.name=e.createUniqueName(i.name||"mesh_"+t),t7(d,i),c.extensions&&J9(r,d,c),e.assignFinalMaterial(d),l.push(d)}for(let n=0,r=l.length;n<r;n++)e.associations.set(l[n],{meshes:t,primitives:n});if(1===l.length)return l[0];const u=new OE;e.associations.set(u,{meshes:t});for(let t=0,e=l.length;t<e;t++)u.add(l[t]);return u}))}loadCamera(t){let e;const n=this.json.cameras[t],r=n[n.type];if(r)return"perspective"===n.type?e=new W_(wy.radToDeg(r.yfov),r.aspectRatio||1,r.znear||1,r.zfar||2e6):"orthographic"===n.type&&(e=new yw(-r.xmag,r.xmag,r.ymag,-r.ymag,r.znear,r.zfar)),n.name&&(e.name=this.createUniqueName(n.name)),t7(e,n),Promise.resolve(e);console.warn("THREE.GLTFLoader: Missing camera parameters.")}loadSkin(t){const e=this.json.skins[t],n=[];for(let t=0,r=e.joints.length;t<r;t++)n.push(this.getDependency("node",e.joints[t]));return void 0!==e.inverseBindMatrices?n.push(this.getDependency("accessor",e.inverseBindMatrices)):n.push(null),Promise.all(n).then((function(t){const n=t.pop(),r=t,i=[],o=[];for(let t=0,a=r.length;t<a;t++){const a=r[t];if(a){i.push(a);const e=new Sb;null!==n&&e.fromArray(n.array,16*t),o.push(e)}else console.warn('THREE.GLTFLoader: Joint "%s" could not be found.',e.joints[t])}return new ex(i,o)}))}loadAnimation(t){const e=this.json.animations[t],n=[],r=[],i=[],o=[],a=[];for(let t=0,s=e.channels.length;t<s;t++){const s=e.channels[t],l=e.samplers[s.sampler],u=s.target,c=u.node,d=void 0!==e.parameters?e.parameters[l.input]:l.input,f=void 0!==e.parameters?e.parameters[l.output]:l.output;n.push(this.getDependency("node",c)),r.push(this.getDependency("accessor",d)),i.push(this.getDependency("accessor",f)),o.push(l),a.push(u)}return Promise.all([Promise.all(n),Promise.all(r),Promise.all(i),Promise.all(o),Promise.all(a)]).then((function(n){const r=n[0],i=n[1],o=n[2],a=n[3],s=n[4],l=[];for(let t=0,e=r.length;t<e;t++){const e=r[t],n=i[t],u=o[t],c=a[t],d=s[t];if(void 0===e)continue;let f;switch(e.updateMatrix(),Y9[d.path]){case Y9.weights:f=Yx;break;case Y9.rotation:f=Xx;break;default:f=Zx}const h=e.name?e.name:e.uuid,p=void 0!==c.interpolation?K9[c.interpolation]:Gv,m=[];Y9[d.path]===Y9.weights?e.traverse((function(t){t.morphTargetInfluences&&m.push(t.name?t.name:t.uuid)})):m.push(h);let g=u.array;if(u.normalized){const t=i7(g.constructor),e=new Float32Array(g.length);for(let n=0,r=g.length;n<r;n++)e[n]=g[n]*t;g=e}for(let t=0,e=m.length;t<e;t++){const e=new f(m[t]+"."+Y9[d.path],n.array,g,p);"CUBICSPLINE"===c.interpolation&&(e.createInterpolant=function(t){return new(this instanceof Xx?U9:z9)(this.times,this.values,this.getValueSize()/3,t)},e.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline=!0),l.push(e)}}const u=e.name?e.name:"animation_"+t;return new Jx(u,void 0,l)}))}createNodeMesh(t){const e=this.json,n=this,r=e.nodes[t];return void 0===r.mesh?null:n.getDependency("mesh",r.mesh).then((function(t){const e=n._getNodeRef(n.meshCache,r.mesh,t);return void 0!==r.weights&&e.traverse((function(t){if(t.isMesh)for(let e=0,n=r.weights.length;e<n;e++)t.morphTargetInfluences[e]=r.weights[e]})),e}))}loadNode(t){const e=this.json,n=this.extensions,r=this,i=e.nodes[t],o=i.name?r.createUniqueName(i.name):"";return function(){const e=[],n=r._invokeOne((function(e){return e.createNodeMesh&&e.createNodeMesh(t)}));n&&e.push(n),void 0!==i.camera&&e.push(r.getDependency("camera",i.camera).then((function(t){return r._getNodeRef(r.cameraCache,i.camera,t)}))),r._invokeAll((function(e){return e.createNodeAttachment&&e.createNodeAttachment(t)})).forEach((function(t){e.push(t)}));const o=[],a=i.children||[];for(let t=0,e=a.length;t<e;t++)o.push(r.getDependency("node",a[t]));const s=void 0===i.skin?Promise.resolve(null):r.getDependency("skin",i.skin);return Promise.all([Promise.all(e),Promise.all(o),s])}().then((function(e){const a=e[0],s=e[1],l=e[2];let u;if(u=!0===i.isBone?new $E:a.length>1?new OE:1===a.length?a[0]:new Xb,u!==a[0])for(let t=0,e=a.length;t<e;t++)u.add(a[t]);if(i.name&&(u.userData.name=i.name,u.name=o),t7(u,i),i.extensions&&J9(n,u,i),void 0!==i.matrix){const t=new Sb;t.fromArray(i.matrix),u.applyMatrix4(t)}else void 0!==i.translation&&u.position.fromArray(i.translation),void 0!==i.rotation&&u.quaternion.fromArray(i.rotation),void 0!==i.scale&&u.scale.fromArray(i.scale);r.associations.has(u)||r.associations.set(u,{}),r.associations.get(u).nodes=t,null!==l&&u.traverse((function(t){t.isSkinnedMesh&&t.bind(l,o7)}));for(let t=0,e=s.length;t<e;t++)u.add(s[t]);return u}))}loadScene(t){const e=this.extensions,n=this.json.scenes[t],r=this,i=new OE;n.name&&(i.name=r.createUniqueName(n.name)),t7(i,n),n.extensions&&J9(e,i,n);const o=n.nodes||[],a=[];for(let t=0,e=o.length;t<e;t++)a.push(r.getDependency("node",o[t]));return Promise.all(a).then((function(t){for(let e=0,n=t.length;e<n;e++)i.add(t[e]);return r.associations=(t=>{const e=new Map;for(const[t,n]of r.associations)(t instanceof u_||t instanceof Gy)&&e.set(t,n);return t.traverse((t=>{const n=r.associations.get(t);null!=n&&e.set(t,n)})),e})(i),i}))}}function s7(t,e,n){const r=e.attributes,i=[];function o(e,r){return n.getDependency("accessor",e).then((function(e){t.setAttribute(r,e)}))}for(const e in r){const n=W9[e]||e.toLowerCase();n in t.attributes||i.push(o(r[e],n))}if(void 0!==e.indices&&!t.index){const r=n.getDependency("accessor",e.indices).then((function(e){t.setIndex(e)}));i.push(r)}return t7(t,e),function(t,e,n){const r=e.attributes,i=new Zy;if(void 0===r.POSITION)return;{const t=n.json.accessors[r.POSITION],e=t.min,o=t.max;if(void 0===e||void 0===o)return void console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.");if(i.set(new Ky(e[0],e[1],e[2]),new Ky(o[0],o[1],o[2])),t.normalized){const e=i7(G9[t.componentType]);i.min.multiplyScalar(e),i.max.multiplyScalar(e)}}const o=e.targets;if(void 0!==o){const t=new Ky,e=new Ky;for(let r=0,i=o.length;r<i;r++){const i=o[r];if(void 0!==i.POSITION){const r=n.json.accessors[i.POSITION],o=r.min,a=r.max;if(void 0!==o&&void 0!==a){if(e.setX(Math.max(Math.abs(o[0]),Math.abs(a[0]))),e.setY(Math.max(Math.abs(o[1]),Math.abs(a[1]))),e.setZ(Math.max(Math.abs(o[2]),Math.abs(a[2]))),r.normalized){const t=i7(G9[r.componentType]);e.multiplyScalar(t)}t.max(e)}else console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.")}}i.expandByVector(t)}t.boundingBox=i;const a=new gb;i.getCenter(a.center),a.radius=i.min.distanceTo(i.max)/2,t.boundingSphere=a}(t,e,n),Promise.all(i).then((function(){return void 0!==e.targets?function(t,e,n){let r=!1,i=!1,o=!1;for(let t=0,n=e.length;t<n;t++){const n=e[t];if(void 0!==n.POSITION&&(r=!0),void 0!==n.NORMAL&&(i=!0),void 0!==n.COLOR_0&&(o=!0),r&&i&&o)break}if(!r&&!i&&!o)return Promise.resolve(t);const a=[],s=[],l=[];for(let u=0,c=e.length;u<c;u++){const c=e[u];if(r){const e=void 0!==c.POSITION?n.getDependency("accessor",c.POSITION):t.attributes.position;a.push(e)}if(i){const e=void 0!==c.NORMAL?n.getDependency("accessor",c.NORMAL):t.attributes.normal;s.push(e)}if(o){const e=void 0!==c.COLOR_0?n.getDependency("accessor",c.COLOR_0):t.attributes.color;l.push(e)}}return Promise.all([Promise.all(a),Promise.all(s),Promise.all(l)]).then((function(e){const n=e[0],a=e[1],s=e[2];return r&&(t.morphAttributes.position=n),i&&(t.morphAttributes.normal=a),o&&(t.morphAttributes.color=s),t.morphTargetsRelative=!0,t}))}(t,e.targets,n):t}))}function l7(t){return l7="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},l7(t)}function u7(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function c7(t){return(c7=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function d7(t,e){return(d7=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function f7(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=c7(t);if(e){var i=c7(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return function(t,e){return!e||"object"!=l7(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}(this,n)}}var h7=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&d7(t,e)}(i,xK);var e,n,r=f7(i);function i(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(t=r.call(this,e))._dracoDecoderPath=e.dracoDecoderPath,t._gltfLoader=new m9,t._dracoDecoderPath&&(t._dracoLoader=new f9,t._dracoLoader.setDecoderPath(t._dracoDecoderPath),t._gltfLoader.setDRACOLoader(t._dracoLoader)),t}return e=i,(n=[{key:"load",value:function(t){var e=this,n=t.path;return new Promise((function(t,r){e._gltfLoader.load(n,t,null,r)}))}}])&&u7(e.prototype,n),i}();const p7=h7,m7=/^[og]\s*(.+)?/,g7=/^mtllib /,v7=/^usemtl /,y7=/^usemap /,b7=/\s+/,_7=new Ky,w7=new Ky,A7=new Ky,E7=new Ky,x7=new Ky,S7=new By;function T7(){const t={objects:[],object:{},vertices:[],normals:[],colors:[],uvs:[],materials:{},materialLibraries:[],startObject:function(t,e){if(this.object&&!1===this.object.fromDeclaration)return this.object.name=t,void(this.object.fromDeclaration=!1!==e);const n=this.object&&"function"==typeof this.object.currentMaterial?this.object.currentMaterial():void 0;if(this.object&&"function"==typeof this.object._finalize&&this.object._finalize(!0),this.object={name:t||"",fromDeclaration:!1!==e,geometry:{vertices:[],normals:[],colors:[],uvs:[],hasUVIndices:!1},materials:[],smooth:!0,startMaterial:function(t,e){const n=this._finalize(!1);n&&(n.inherited||n.groupCount<=0)&&this.materials.splice(n.index,1);const r={index:this.materials.length,name:t||"",mtllib:Array.isArray(e)&&e.length>0?e[e.length-1]:"",smooth:void 0!==n?n.smooth:this.smooth,groupStart:void 0!==n?n.groupEnd:0,groupEnd:-1,groupCount:-1,inherited:!1,clone:function(t){const e={index:"number"==typeof t?t:this.index,name:this.name,mtllib:this.mtllib,smooth:this.smooth,groupStart:0,groupEnd:-1,groupCount:-1,inherited:!1};return e.clone=this.clone.bind(e),e}};return this.materials.push(r),r},currentMaterial:function(){if(this.materials.length>0)return this.materials[this.materials.length-1]},_finalize:function(t){const e=this.currentMaterial();if(e&&-1===e.groupEnd&&(e.groupEnd=this.geometry.vertices.length/3,e.groupCount=e.groupEnd-e.groupStart,e.inherited=!1),t&&this.materials.length>1)for(let t=this.materials.length-1;t>=0;t--)this.materials[t].groupCount<=0&&this.materials.splice(t,1);return t&&0===this.materials.length&&this.materials.push({name:"",smooth:this.smooth}),e}},n&&n.name&&"function"==typeof n.clone){const t=n.clone(0);t.inherited=!0,this.object.materials.push(t)}this.objects.push(this.object)},finalize:function(){this.object&&"function"==typeof this.object._finalize&&this.object._finalize(!0)},parseVertexIndex:function(t,e){const n=parseInt(t,10);return 3*(n>=0?n-1:n+e/3)},parseNormalIndex:function(t,e){const n=parseInt(t,10);return 3*(n>=0?n-1:n+e/3)},parseUVIndex:function(t,e){const n=parseInt(t,10);return 2*(n>=0?n-1:n+e/2)},addVertex:function(t,e,n){const r=this.vertices,i=this.object.geometry.vertices;i.push(r[t+0],r[t+1],r[t+2]),i.push(r[e+0],r[e+1],r[e+2]),i.push(r[n+0],r[n+1],r[n+2])},addVertexPoint:function(t){const e=this.vertices;this.object.geometry.vertices.push(e[t+0],e[t+1],e[t+2])},addVertexLine:function(t){const e=this.vertices;this.object.geometry.vertices.push(e[t+0],e[t+1],e[t+2])},addNormal:function(t,e,n){const r=this.normals,i=this.object.geometry.normals;i.push(r[t+0],r[t+1],r[t+2]),i.push(r[e+0],r[e+1],r[e+2]),i.push(r[n+0],r[n+1],r[n+2])},addFaceNormal:function(t,e,n){const r=this.vertices,i=this.object.geometry.normals;_7.fromArray(r,t),w7.fromArray(r,e),A7.fromArray(r,n),x7.subVectors(A7,w7),E7.subVectors(_7,w7),x7.cross(E7),x7.normalize(),i.push(x7.x,x7.y,x7.z),i.push(x7.x,x7.y,x7.z),i.push(x7.x,x7.y,x7.z)},addColor:function(t,e,n){const r=this.colors,i=this.object.geometry.colors;void 0!==r[t]&&i.push(r[t+0],r[t+1],r[t+2]),void 0!==r[e]&&i.push(r[e+0],r[e+1],r[e+2]),void 0!==r[n]&&i.push(r[n+0],r[n+1],r[n+2])},addUV:function(t,e,n){const r=this.uvs,i=this.object.geometry.uvs;i.push(r[t+0],r[t+1]),i.push(r[e+0],r[e+1]),i.push(r[n+0],r[n+1])},addDefaultUV:function(){const t=this.object.geometry.uvs;t.push(0,0),t.push(0,0),t.push(0,0)},addUVLine:function(t){const e=this.uvs;this.object.geometry.uvs.push(e[t+0],e[t+1])},addFace:function(t,e,n,r,i,o,a,s,l){const u=this.vertices.length;let c=this.parseVertexIndex(t,u),d=this.parseVertexIndex(e,u),f=this.parseVertexIndex(n,u);if(this.addVertex(c,d,f),this.addColor(c,d,f),void 0!==a&&""!==a){const t=this.normals.length;c=this.parseNormalIndex(a,t),d=this.parseNormalIndex(s,t),f=this.parseNormalIndex(l,t),this.addNormal(c,d,f)}else this.addFaceNormal(c,d,f);if(void 0!==r&&""!==r){const t=this.uvs.length;c=this.parseUVIndex(r,t),d=this.parseUVIndex(i,t),f=this.parseUVIndex(o,t),this.addUV(c,d,f),this.object.geometry.hasUVIndices=!0}else this.addDefaultUV()},addPointGeometry:function(t){this.object.geometry.type="Points";const e=this.vertices.length;for(let n=0,r=t.length;n<r;n++){const r=this.parseVertexIndex(t[n],e);this.addVertexPoint(r),this.addColor(r)}},addLineGeometry:function(t,e){this.object.geometry.type="Line";const n=this.vertices.length,r=this.uvs.length;for(let e=0,r=t.length;e<r;e++)this.addVertexLine(this.parseVertexIndex(t[e],n));for(let t=0,n=e.length;t<n;t++)this.addUVLine(this.parseUVIndex(e[t],r))}};return t.startObject("",!1),t}class C7 extends iS{constructor(t){super(t),this.materials=null}load(t,e,n,r){const i=this,o=new sS(this.manager);o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(t,(function(n){try{e(i.parse(n))}catch(e){r?r(e):console.error(e),i.manager.itemError(t)}}),n,r)}setMaterials(t){return this.materials=t,this}parse(t){const e=new T7;-1!==t.indexOf("\r\n")&&(t=t.replace(/\r\n/g,"\n")),-1!==t.indexOf("\\\n")&&(t=t.replace(/\\\n/g,""));const n=t.split("\n");let r=[];for(let t=0,i=n.length;t<i;t++){const i=n[t].trimStart();if(0===i.length)continue;const o=i.charAt(0);if("#"!==o)if("v"===o){const t=i.split(b7);switch(t[0]){case"v":e.vertices.push(parseFloat(t[1]),parseFloat(t[2]),parseFloat(t[3])),t.length>=7?(S7.setRGB(parseFloat(t[4]),parseFloat(t[5]),parseFloat(t[6])).convertSRGBToLinear(),e.colors.push(S7.r,S7.g,S7.b)):e.colors.push(void 0,void 0,void 0);break;case"vn":e.normals.push(parseFloat(t[1]),parseFloat(t[2]),parseFloat(t[3]));break;case"vt":e.uvs.push(parseFloat(t[1]),parseFloat(t[2]))}}else if("f"===o){const t=i.slice(1).trim().split(b7),n=[];for(let e=0,r=t.length;e<r;e++){const r=t[e];if(r.length>0){const t=r.split("/");n.push(t)}}const r=n[0];for(let t=1,i=n.length-1;t<i;t++){const i=n[t],o=n[t+1];e.addFace(r[0],i[0],o[0],r[1],i[1],o[1],r[2],i[2],o[2])}}else if("l"===o){const t=i.substring(1).trim().split(" ");let n=[];const r=[];if(-1===i.indexOf("/"))n=t;else for(let e=0,i=t.length;e<i;e++){const i=t[e].split("/");""!==i[0]&&n.push(i[0]),""!==i[1]&&r.push(i[1])}e.addLineGeometry(n,r)}else if("p"===o){const t=i.slice(1).trim().split(" ");e.addPointGeometry(t)}else if(null!==(r=m7.exec(i))){const t=(" "+r[0].slice(1).trim()).slice(1);e.startObject(t)}else if(v7.test(i))e.object.startMaterial(i.substring(7).trim(),e.materialLibraries);else if(g7.test(i))e.materialLibraries.push(i.substring(7).trim());else if(y7.test(i))console.warn('THREE.OBJLoader: Rendering identifier "usemap" not supported. Textures must be defined in MTL files.');else if("s"===o){if(r=i.split(" "),r.length>1){const t=r[1].trim().toLowerCase();e.object.smooth="0"!==t&&"off"!==t}else e.object.smooth=!0;const t=e.object.currentMaterial();t&&(t.smooth=e.object.smooth)}else{if("\0"===i)continue;console.warn('THREE.OBJLoader: Unexpected line: "'+i+'"')}}e.finalize();const i=new OE;i.materialLibraries=[].concat(e.materialLibraries);if(!0===!(1===e.objects.length&&0===e.objects[0].geometry.vertices.length))for(let t=0,n=e.objects.length;t<n;t++){const n=e.objects[t],r=n.geometry,o=n.materials,a="Line"===r.type,s="Points"===r.type;let l=!1;if(0===r.vertices.length)continue;const u=new x_;u.setAttribute("position",new g_(r.vertices,3)),r.normals.length>0&&u.setAttribute("normal",new g_(r.normals,3)),r.colors.length>0&&(l=!0,u.setAttribute("color",new g_(r.colors,3))),!0===r.hasUVIndices&&u.setAttribute("uv",new g_(r.uvs,2));const c=[];for(let t=0,n=o.length;t<n;t++){const n=o[t],r=n.name+"_"+n.smooth+"_"+l;let i=e.materials[r];if(null!==this.materials)if(i=this.materials.create(n.name),!a||!i||i instanceof ux){if(s&&i&&!(i instanceof _x)){const t=new _x({size:10,sizeAttenuation:!1});u_.prototype.copy.call(t,i),t.color.copy(i.color),t.map=i.map,i=t}}else{const t=new ux;u_.prototype.copy.call(t,i),t.color.copy(i.color),i=t}void 0===i&&(i=a?new ux:s?new _x({size:1,sizeAttenuation:!1}):new Lx,i.name=n.name,i.flatShading=!n.smooth,i.vertexColors=l,e.materials[r]=i),c.push(i)}let d;if(c.length>1){for(let t=0,e=o.length;t<e;t++){const e=o[t];u.addGroup(e.groupStart,e.groupCount,t)}d=a?new yx(u,c):s?new Sx(u,c):new j_(u,c)}else d=a?new yx(u,c[0]):s?new Sx(u,c[0]):new j_(u,c[0]);d.name=n.name,i.add(d)}else if(e.vertices.length>0){const t=new _x({size:1,sizeAttenuation:!1}),n=new x_;n.setAttribute("position",new g_(e.vertices,3)),e.colors.length>0&&void 0!==e.colors[0]&&(n.setAttribute("color",new g_(e.colors,3)),t.vertexColors=!0);const r=new Sx(n,t);i.add(r)}return i}}function I7(t){return I7="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},I7(t)}function k7(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function P7(t){return(P7=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function R7(t,e){return(R7=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function O7(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=P7(t);if(e){var i=P7(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return function(t,e){return!e||"object"!=I7(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}(this,n)}}var M7=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&R7(t,e)}(i,xK);var e,n,r=O7(i);function i(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(e=r.call(this,t))._loader=new C7,e}return e=i,(n=[{key:"load",value:function(t){var e=this,n=t.path;return new Promise((function(t,r){e._loader.load(n,t,null,r)}))}}])&&k7(e.prototype,n),i}();const L7=M7;function D7(t){return D7="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},D7(t)}function N7(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function B7(t){return(B7=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function j7(t,e){return(j7=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function z7(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=B7(t);if(e){var i=B7(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return function(t,e){return!e||"object"!=D7(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}(this,n)}}var F7=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&j7(t,e)}(i,xK);var e,n,r=z7(i);function i(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(e=r.call(this,t))._loader=new cS,e}return e=i,(n=[{key:"load",value:function(t){var e=this,n=t.path;return new Promise((function(t,r){e._loader.load(n,t,null,r)}))}}])&&N7(e.prototype,n),i}();const U7=F7;function q7(t){return q7="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},q7(t)}function G7(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function H7(t){return(H7=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function V7(t,e){return(V7=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Q7(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=H7(t);if(e){var i=H7(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return function(t,e){return!e||"object"!=q7(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}(this,n)}}var W7=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&V7(t,e)}(i,xK);var e,n,r=Q7(i);function i(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),r.apply(this,arguments)}return e=i,(n=[{key:"load",value:function(t){var e=t.path,n=t.name,r=new Image,i=new Promise((function(t,e){r.addEventListener("load",(function(){t(r)})),r.addEventListener("error",(function(t){e(new Error('ImageLoader : Error while loading resource "'.concat(n,'"')))}))}));return r.src=e,i}}])&&G7(e.prototype,n),i}();const Y7=W7;var K7=function(t){return URL.createObjectURL(new Blob([t],{type:"text/javascript"}))};try{URL.revokeObjectURL(K7(""))}catch(oM){K7=function(t){return"data:application/javascript;charset=UTF-8,"+encodeURI(t)},function(t){return new Worker(t,{type:"module"})}}var X7=Uint8Array,$7=Uint16Array,Z7=Uint32Array,J7=new X7([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),ttt=new X7([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),ett=new X7([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),ntt=function(t,e){for(var n=new $7(31),r=0;r<31;++r)n[r]=e+=1<<t[r-1];var i=new Z7(n[30]);for(r=1;r<30;++r)for(var o=n[r];o<n[r+1];++o)i[o]=o-n[r]<<5|r;return[n,i]},rtt=ntt(J7,2),itt=rtt[0],ott=rtt[1];itt[28]=258,ott[258]=28;for(var att=ntt(ttt,0),stt=att[0],ltt=(att[1],new $7(32768)),utt=0;utt<32768;++utt){var ctt=(43690&utt)>>>1|(21845&utt)<<1;ctt=(61680&(ctt=(52428&ctt)>>>2|(13107&ctt)<<2))>>>4|(3855&ctt)<<4,ltt[utt]=((65280&ctt)>>>8|(255&ctt)<<8)>>>1}var dtt=function(t,e,n){for(var r=t.length,i=0,o=new $7(e);i<r;++i)++o[t[i]-1];var a,s=new $7(e);for(i=0;i<e;++i)s[i]=s[i-1]+o[i-1]<<1;if(n){a=new $7(1<<e);var l=15-e;for(i=0;i<r;++i)if(t[i])for(var u=i<<4|t[i],c=e-t[i],d=s[t[i]-1]++<<c,f=d|(1<<c)-1;d<=f;++d)a[ltt[d]>>>l]=u}else for(a=new $7(r),i=0;i<r;++i)t[i]&&(a[i]=ltt[s[t[i]-1]++]>>>15-t[i]);return a},ftt=new X7(288);for(utt=0;utt<144;++utt)ftt[utt]=8;for(utt=144;utt<256;++utt)ftt[utt]=9;for(utt=256;utt<280;++utt)ftt[utt]=7;for(utt=280;utt<288;++utt)ftt[utt]=8;var htt=new X7(32);for(utt=0;utt<32;++utt)htt[utt]=5;var ptt=dtt(ftt,9,1),mtt=dtt(htt,5,1),gtt=function(t){for(var e=t[0],n=1;n<t.length;++n)t[n]>e&&(e=t[n]);return e},vtt=function(t,e,n){var r=e/8|0;return(t[r]|t[r+1]<<8)>>(7&e)&n},ytt=function(t,e){var n=e/8|0;return(t[n]|t[n+1]<<8|t[n+2]<<16)>>(7&e)},btt=function(t){return(t/8|0)+(7&t&&1)},_tt=function(t,e,n){(null==e||e<0)&&(e=0),(null==n||n>t.length)&&(n=t.length);var r=new(t instanceof $7?$7:t instanceof Z7?Z7:X7)(n-e);return r.set(t.subarray(e,n)),r},wtt=function(t,e,n){var r=t.length;if(!r||n&&!n.l&&r<5)return e||new X7(0);var i=!e||n,o=!n||n.i;n||(n={}),e||(e=new X7(3*r));var a=function(t){var n=e.length;if(t>n){var r=new X7(Math.max(2*n,t));r.set(e),e=r}},s=n.f||0,l=n.p||0,u=n.b||0,c=n.l,d=n.d,f=n.m,h=n.n,p=8*r;do{if(!c){n.f=s=vtt(t,l,1);var m=vtt(t,l+1,3);if(l+=3,!m){var g=t[(C=btt(l)+4)-4]|t[C-3]<<8,v=C+g;if(v>r){if(o)throw"unexpected EOF";break}i&&a(u+g),e.set(t.subarray(C,v),u),n.b=u+=g,n.p=l=8*v;continue}if(1==m)c=ptt,d=mtt,f=9,h=5;else{if(2!=m)throw"invalid block type";var y=vtt(t,l,31)+257,b=vtt(t,l+10,15)+4,_=y+vtt(t,l+5,31)+1;l+=14;for(var w=new X7(_),A=new X7(19),E=0;E<b;++E)A[ett[E]]=vtt(t,l+3*E,7);l+=3*b;var x=gtt(A),S=(1<<x)-1,T=dtt(A,x,1);for(E=0;E<_;){var C,I=T[vtt(t,l,S)];if(l+=15&I,(C=I>>>4)<16)w[E++]=C;else{var k=0,P=0;for(16==C?(P=3+vtt(t,l,3),l+=2,k=w[E-1]):17==C?(P=3+vtt(t,l,7),l+=3):18==C&&(P=11+vtt(t,l,127),l+=7);P--;)w[E++]=k}}var R=w.subarray(0,y),O=w.subarray(y);f=gtt(R),h=gtt(O),c=dtt(R,f,1),d=dtt(O,h,1)}if(l>p){if(o)throw"unexpected EOF";break}}i&&a(u+131072);for(var M=(1<<f)-1,L=(1<<h)-1,D=l;;D=l){var N=(k=c[ytt(t,l)&M])>>>4;if((l+=15&k)>p){if(o)throw"unexpected EOF";break}if(!k)throw"invalid length/literal";if(N<256)e[u++]=N;else{if(256==N){D=l,c=null;break}var B=N-254;if(N>264){var j=J7[E=N-257];B=vtt(t,l,(1<<j)-1)+itt[E],l+=j}var z=d[ytt(t,l)&L],F=z>>>4;if(!z)throw"invalid distance";l+=15&z;O=stt[F];if(F>3){j=ttt[F];O+=ytt(t,l)&(1<<j)-1,l+=j}if(l>p){if(o)throw"unexpected EOF";break}i&&a(u+131072);for(var U=u+B;u<U;u+=4)e[u]=e[u-O],e[u+1]=e[u+1-O],e[u+2]=e[u+2-O],e[u+3]=e[u+3-O];u=U}}n.l=c,n.p=D,n.b=u,c&&(s=1,n.m=f,n.d=d,n.n=h)}while(!s);return u==e.length?e:_tt(e,0,u)},Att=new X7(0),Ett=function(t){if(8!=(15&t[0])||t[0]>>>4>7||(t[0]<<8|t[1])%31)throw"invalid zlib data";if(32&t[1])throw"invalid zlib data: preset dictionaries not supported"};function xtt(t,e){return wtt((Ett(t),t.subarray(2,-4)),e)}var Stt="undefined"!=typeof TextDecoder&&new TextDecoder;try{Stt.decode(Att,{stream:!0}),1}catch(oM){}class Ttt extends uS{constructor(t){super(t),this.type=$g}parse(t){const e=65536,n=14,r=65537,i=16384,o=Math.pow(2.7182818,2.2);const a={l:0,c:0,lc:0};function s(t,e,n,r,i){for(;n<t;)e=e<<8|U(r,i),n+=8;n-=t,a.l=e>>n&(1<<t)-1,a.c=e,a.lc=n}const l=new Array(59);function u(t,e,n,i,o,u){const c=e;let d=0,f=0;for(;i<=o;i++){if(c.value-e.value>n)return!1;s(6,d,f,t,c);const r=a.l;if(d=a.c,f=a.lc,u[i]=r,63==r){if(c.value-e.value>n)throw new Error("Something wrong with hufUnpackEncTable");s(8,d,f,t,c);let r=a.l+6;if(d=a.c,f=a.lc,i+r>o+1)throw new Error("Something wrong with hufUnpackEncTable");for(;r--;)u[i++]=0;i--}else if(r>=59){let t=r-59+2;if(i+t>o+1)throw new Error("Something wrong with hufUnpackEncTable");for(;t--;)u[i++]=0;i--}}!function(t){for(let t=0;t<=58;++t)l[t]=0;for(let e=0;e<r;++e)l[t[e]]+=1;let e=0;for(let t=58;t>0;--t){const n=e+l[t]>>1;l[t]=e,e=n}for(let e=0;e<r;++e){const n=t[e];n>0&&(t[e]=n|l[n]++<<6)}}(u)}function c(t){return 63&t}function d(t){return t>>6}const f={c:0,lc:0};function h(t,e,n,r){t=t<<8|U(n,r),e+=8,f.c=t,f.lc=e}const p={c:0,lc:0};function m(t,e,n,r,i,o,a,s,l){if(t==e){r<8&&(h(n,r,i,o),n=f.c,r=f.lc);let t=n>>(r-=8);if(t=new Uint8Array([t])[0],s.value+t>l)return!1;const e=a[s.value-1];for(;t-- >0;)a[s.value++]=e}else{if(!(s.value<l))return!1;a[s.value++]=t}p.c=n,p.lc=r}function g(t){return 65535&t}function v(t){const e=g(t);return e>32767?e-65536:e}const y={a:0,b:0};function b(t,e){const n=v(t),r=v(e),i=n+(1&r)+(r>>1),o=i,a=i-r;y.a=o,y.b=a}function _(t,e){const n=g(t),r=g(e),i=n-(r>>1)&65535,o=r+i-32768&65535;y.a=o,y.b=i}function w(t,e,n,r,i,o,a){const s=a<16384,l=n>i?i:n;let u,c,d=1;for(;d<=l;)d<<=1;for(d>>=1,u=d,d>>=1;d>=1;){c=0;const a=c+o*(i-u),l=o*d,f=o*u,h=r*d,p=r*u;let m,g,v,w;for(;c<=a;c+=f){let i=c;const o=c+r*(n-u);for(;i<=o;i+=p){const n=i+h,r=i+l,o=r+h;s?(b(t[i+e],t[r+e]),m=y.a,v=y.b,b(t[n+e],t[o+e]),g=y.a,w=y.b,b(m,g),t[i+e]=y.a,t[n+e]=y.b,b(v,w),t[r+e]=y.a,t[o+e]=y.b):(_(t[i+e],t[r+e]),m=y.a,v=y.b,_(t[n+e],t[o+e]),g=y.a,w=y.b,_(m,g),t[i+e]=y.a,t[n+e]=y.b,_(v,w),t[r+e]=y.a,t[o+e]=y.b)}if(n&d){const n=i+l;s?b(t[i+e],t[n+e]):_(t[i+e],t[n+e]),m=y.a,t[n+e]=y.b,t[i+e]=m}}if(i&d){let i=c;const o=c+r*(n-u);for(;i<=o;i+=p){const n=i+h;s?b(t[i+e],t[n+e]):_(t[i+e],t[n+e]),m=y.a,t[n+e]=y.b,t[i+e]=m}}u=d,d>>=1}return c}function A(t,e,o,a,s,l){const g=o.value,v=F(e,o),y=F(e,o);o.value+=4;const b=F(e,o);if(o.value+=4,v<0||v>=r||y<0||y>=r)throw new Error("Something wrong with HUF_ENCSIZE");const _=new Array(r),w=new Array(i);!function(t){for(let e=0;e<i;e++)t[e]={},t[e].len=0,t[e].lit=0,t[e].p=null}(w);if(u(t,o,a-(o.value-g),v,y,_),b>8*(a-(o.value-g)))throw new Error("Something wrong with hufUncompress");!function(t,e,r,i){for(;e<=r;e++){const r=d(t[e]),o=c(t[e]);if(r>>o)throw new Error("Invalid table entry");if(o>n){const t=i[r>>o-n];if(t.len)throw new Error("Invalid table entry");if(t.lit++,t.p){const e=t.p;t.p=new Array(t.lit);for(let n=0;n<t.lit-1;++n)t.p[n]=e[n]}else t.p=new Array(1);t.p[t.lit-1]=e}else if(o){let t=0;for(let a=1<<n-o;a>0;a--){const a=i[(r<<n-o)+t];if(a.len||a.p)throw new Error("Invalid table entry");a.len=o,a.lit=e,t++}}}}(_,v,y,w),function(t,e,r,i,o,a,s,l,u){let g=0,v=0;const y=s,b=Math.trunc(i.value+(o+7)/8);for(;i.value<b;)for(h(g,v,r,i),g=f.c,v=f.lc;v>=n;){const o=e[g>>v-n&16383];if(o.len)v-=o.len,m(o.lit,a,g,v,r,i,l,u,y),g=p.c,v=p.lc;else{if(!o.p)throw new Error("hufDecode issues");let e;for(e=0;e<o.lit;e++){const n=c(t[o.p[e]]);for(;v<n&&i.value<b;)h(g,v,r,i),g=f.c,v=f.lc;if(v>=n&&d(t[o.p[e]])==(g>>v-n&(1<<n)-1)){v-=n,m(o.p[e],a,g,v,r,i,l,u,y),g=p.c,v=p.lc;break}}if(e==o.lit)throw new Error("hufDecode issues")}}const _=8-o&7;for(g>>=_,v-=_;v>0;){const t=e[g<<n-v&16383];if(!t.len)throw new Error("hufDecode issues");v-=t.len,m(t.lit,a,g,v,r,i,l,u,y),g=p.c,v=p.lc}}(_,w,t,o,b,y,l,s,{value:0})}function E(t){for(let e=1;e<t.length;e++){const n=t[e-1]+t[e]-128;t[e]=n}}function x(t,e){let n=0,r=Math.floor((t.length+1)/2),i=0;const o=t.length-1;for(;!(i>o||(e[i++]=t[n++],i>o));)e[i++]=t[r++]}function S(t){let e=t.byteLength;const n=new Array;let r=0;const i=new DataView(t);for(;e>0;){const t=i.getInt8(r++);if(t<0){const o=-t;e-=o+1;for(let t=0;t<o;t++)n.push(i.getUint8(r++))}else{const o=t;e-=2;const a=i.getUint8(r++);for(let t=0;t<o+1;t++)n.push(a)}}return n}function T(t,e,n){let r,i=1;for(;i<64;)r=e[t.value],65280==r?i=64:r>>8==255?i+=255&r:(n[i]=r,i++),t.value++}function C(t,e){e[0]=Q(t[0]),e[1]=Q(t[1]),e[2]=Q(t[5]),e[3]=Q(t[6]),e[4]=Q(t[14]),e[5]=Q(t[15]),e[6]=Q(t[27]),e[7]=Q(t[28]),e[8]=Q(t[2]),e[9]=Q(t[4]),e[10]=Q(t[7]),e[11]=Q(t[13]),e[12]=Q(t[16]),e[13]=Q(t[26]),e[14]=Q(t[29]),e[15]=Q(t[42]),e[16]=Q(t[3]),e[17]=Q(t[8]),e[18]=Q(t[12]),e[19]=Q(t[17]),e[20]=Q(t[25]),e[21]=Q(t[30]),e[22]=Q(t[41]),e[23]=Q(t[43]),e[24]=Q(t[9]),e[25]=Q(t[11]),e[26]=Q(t[18]),e[27]=Q(t[24]),e[28]=Q(t[31]),e[29]=Q(t[40]),e[30]=Q(t[44]),e[31]=Q(t[53]),e[32]=Q(t[10]),e[33]=Q(t[19]),e[34]=Q(t[23]),e[35]=Q(t[32]),e[36]=Q(t[39]),e[37]=Q(t[45]),e[38]=Q(t[52]),e[39]=Q(t[54]),e[40]=Q(t[20]),e[41]=Q(t[22]),e[42]=Q(t[33]),e[43]=Q(t[38]),e[44]=Q(t[46]),e[45]=Q(t[51]),e[46]=Q(t[55]),e[47]=Q(t[60]),e[48]=Q(t[21]),e[49]=Q(t[34]),e[50]=Q(t[37]),e[51]=Q(t[47]),e[52]=Q(t[50]),e[53]=Q(t[56]),e[54]=Q(t[59]),e[55]=Q(t[61]),e[56]=Q(t[35]),e[57]=Q(t[36]),e[58]=Q(t[48]),e[59]=Q(t[49]),e[60]=Q(t[57]),e[61]=Q(t[58]),e[62]=Q(t[62]),e[63]=Q(t[63])}function I(t){const e=.5*Math.cos(.7853975),n=.5*Math.cos(3.14159/16),r=.5*Math.cos(3.14159/8),i=.5*Math.cos(3*3.14159/16),o=.5*Math.cos(.981746875),a=.5*Math.cos(3*3.14159/8),s=.5*Math.cos(1.374445625),l=new Array(4),u=new Array(4),c=new Array(4),d=new Array(4);for(let f=0;f<8;++f){const h=8*f;l[0]=r*t[h+2],l[1]=a*t[h+2],l[2]=r*t[h+6],l[3]=a*t[h+6],u[0]=n*t[h+1]+i*t[h+3]+o*t[h+5]+s*t[h+7],u[1]=i*t[h+1]-s*t[h+3]-n*t[h+5]-o*t[h+7],u[2]=o*t[h+1]-n*t[h+3]+s*t[h+5]+i*t[h+7],u[3]=s*t[h+1]-o*t[h+3]+i*t[h+5]-n*t[h+7],c[0]=e*(t[h+0]+t[h+4]),c[3]=e*(t[h+0]-t[h+4]),c[1]=l[0]+l[3],c[2]=l[1]-l[2],d[0]=c[0]+c[1],d[1]=c[3]+c[2],d[2]=c[3]-c[2],d[3]=c[0]-c[1],t[h+0]=d[0]+u[0],t[h+1]=d[1]+u[1],t[h+2]=d[2]+u[2],t[h+3]=d[3]+u[3],t[h+4]=d[3]-u[3],t[h+5]=d[2]-u[2],t[h+6]=d[1]-u[1],t[h+7]=d[0]-u[0]}for(let f=0;f<8;++f)l[0]=r*t[16+f],l[1]=a*t[16+f],l[2]=r*t[48+f],l[3]=a*t[48+f],u[0]=n*t[8+f]+i*t[24+f]+o*t[40+f]+s*t[56+f],u[1]=i*t[8+f]-s*t[24+f]-n*t[40+f]-o*t[56+f],u[2]=o*t[8+f]-n*t[24+f]+s*t[40+f]+i*t[56+f],u[3]=s*t[8+f]-o*t[24+f]+i*t[40+f]-n*t[56+f],c[0]=e*(t[f]+t[32+f]),c[3]=e*(t[f]-t[32+f]),c[1]=l[0]+l[3],c[2]=l[1]-l[2],d[0]=c[0]+c[1],d[1]=c[3]+c[2],d[2]=c[3]-c[2],d[3]=c[0]-c[1],t[0+f]=d[0]+u[0],t[8+f]=d[1]+u[1],t[16+f]=d[2]+u[2],t[24+f]=d[3]+u[3],t[32+f]=d[3]-u[3],t[40+f]=d[2]-u[2],t[48+f]=d[1]-u[1],t[56+f]=d[0]-u[0]}function k(t){for(let e=0;e<64;++e){const n=t[0][e],r=t[1][e],i=t[2][e];t[0][e]=n+1.5747*i,t[1][e]=n-.1873*r-.4682*i,t[2][e]=n+1.8556*r}}function P(t,e,n){for(let r=0;r<64;++r)e[n+r]=eT.toHalfFloat(R(t[r]))}function R(t){return t<=1?Math.sign(t)*Math.pow(Math.abs(t),2.2):Math.sign(t)*Math.pow(o,Math.abs(t)-1)}function O(t){return new DataView(t.array.buffer,t.offset.value,t.size)}function M(t){const e=t.viewer.buffer.slice(t.offset.value,t.offset.value+t.size),n=new Uint8Array(S(e)),r=new Uint8Array(n.length);return E(n),x(n,r),new DataView(r.buffer)}function L(t){const e=xtt(t.array.slice(t.offset.value,t.offset.value+t.size)),n=new Uint8Array(e.length);return E(e),x(e,n),new DataView(n.buffer)}function D(t){const n=t.viewer,r={value:t.offset.value},i=new Uint16Array(t.width*t.scanlineBlockSize*(t.channels*t.type)),o=new Uint8Array(8192);let a=0;const s=new Array(t.channels);for(let e=0;e<t.channels;e++)s[e]={},s[e].start=a,s[e].end=s[e].start,s[e].nx=t.width,s[e].ny=t.lines,s[e].size=t.type,a+=s[e].nx*s[e].ny*s[e].size;const l=W(n,r),u=W(n,r);if(u>=8192)throw new Error("Something is wrong with PIZ_COMPRESSION BITMAP_SIZE");if(l<=u)for(let t=0;t<u-l+1;t++)o[t+l]=q(n,r);const c=new Uint16Array(e),d=function(t,n){let r=0;for(let i=0;i<e;++i)(0==i||t[i>>3]&1<<(7&i))&&(n[r++]=i);const i=r-1;for(;r<e;)n[r++]=0;return i}(o,c),f=F(n,r);A(t.array,n,r,f,i,a);for(let e=0;e<t.channels;++e){const t=s[e];for(let n=0;n<s[e].size;++n)w(i,t.start+n,t.nx,t.size,t.ny,t.nx*t.size,d)}!function(t,e,n){for(let r=0;r<n;++r)e[r]=t[e[r]]}(c,i,a);let h=0;const p=new Uint8Array(i.buffer.byteLength);for(let e=0;e<t.lines;e++)for(let e=0;e<t.channels;e++){const t=s[e],n=t.nx*t.size,r=new Uint8Array(i.buffer,2*t.end,2*n);p.set(r,h),h+=2*n,t.end+=n}return new DataView(p.buffer)}function N(t){const e=xtt(t.array.slice(t.offset.value,t.offset.value+t.size)),n=t.lines*t.channels*t.width,r=1==t.type?new Uint16Array(n):new Uint32Array(n);let i=0,o=0;const a=new Array(4);for(let n=0;n<t.lines;n++)for(let n=0;n<t.channels;n++){let n=0;switch(t.type){case 1:a[0]=i,a[1]=a[0]+t.width,i=a[1]+t.width;for(let i=0;i<t.width;++i){n+=e[a[0]++]<<8|e[a[1]++],r[o]=n,o++}break;case 2:a[0]=i,a[1]=a[0]+t.width,a[2]=a[1]+t.width,i=a[2]+t.width;for(let i=0;i<t.width;++i){n+=e[a[0]++]<<24|e[a[1]++]<<16|e[a[2]++]<<8,r[o]=n,o++}}}return new DataView(r.buffer)}function B(t){const e=t.viewer,n={value:t.offset.value},r=new Uint8Array(t.width*t.lines*(t.channels*t.type*2)),i={version:G(e,n),unknownUncompressedSize:G(e,n),unknownCompressedSize:G(e,n),acCompressedSize:G(e,n),dcCompressedSize:G(e,n),rleCompressedSize:G(e,n),rleUncompressedSize:G(e,n),rleRawSize:G(e,n),totalAcUncompressedCount:G(e,n),totalDcUncompressedCount:G(e,n),acCompression:G(e,n)};if(i.version<2)throw new Error("EXRLoader.parse: "+J.compression+" version "+i.version+" is unsupported");const o=new Array;let a=W(e,n)-2;for(;a>0;){const t=j(e.buffer,n),r=q(e,n),i=r>>2&3,s=new Int8Array([(r>>4)-1])[0],l=q(e,n);o.push({name:t,index:s,type:l,compression:i}),a-=t.length+3}const s=J.channels,l=new Array(t.channels);for(let e=0;e<t.channels;++e){const n=l[e]={},r=s[e];n.name=r.name,n.compression=0,n.decoded=!1,n.type=r.pixelType,n.pLinear=r.pLinear,n.width=t.width,n.height=t.lines}const u={idx:new Array(3)};for(let e=0;e<t.channels;++e){const t=l[e];for(let n=0;n<o.length;++n){const r=o[n];t.name==r.name&&(t.compression=r.compression,r.index>=0&&(u.idx[r.index]=e),t.offset=e)}}let c,d,f;if(i.acCompressedSize>0)switch(i.acCompression){case 0:c=new Uint16Array(i.totalAcUncompressedCount),A(t.array,e,n,i.acCompressedSize,c,i.totalAcUncompressedCount);break;case 1:const r=xtt(t.array.slice(n.value,n.value+i.totalAcUncompressedCount));c=new Uint16Array(r.buffer),n.value+=i.totalAcUncompressedCount}if(i.dcCompressedSize>0){const e={array:t.array,offset:n,size:i.dcCompressedSize};d=new Uint16Array(L(e).buffer),n.value+=i.dcCompressedSize}if(i.rleRawSize>0){f=S(xtt(t.array.slice(n.value,n.value+i.rleCompressedSize)).buffer),n.value+=i.rleCompressedSize}let h=0;const p=new Array(l.length);for(let t=0;t<p.length;++t)p[t]=new Array;for(let e=0;e<t.lines;++e)for(let e=0;e<l.length;++e)p[e].push(h),h+=l[e].width*t.type*2;!function(t,e,n,r,i,o){let a=new DataView(o.buffer);const s=n[t.idx[0]].width,l=n[t.idx[0]].height,u=Math.floor(s/8),c=Math.ceil(s/8),d=Math.ceil(l/8),f=s-8*(c-1),h=l-8*(d-1),p={value:0},m=new Array(3),g=new Array(3),v=new Array(3),y=new Array(3),b=new Array(3);for(let n=0;n<3;++n)b[n]=e[t.idx[n]],m[n]=n<1?0:m[n-1]+c*d,g[n]=new Float32Array(64),v[n]=new Uint16Array(64),y[n]=new Uint16Array(64*c);for(let e=0;e<d;++e){let o=8;e==d-1&&(o=h);let s=8;for(let t=0;t<c;++t){t==c-1&&(s=f);for(let t=0;t<3;++t)v[t].fill(0),v[t][0]=i[m[t]++],T(p,r,v[t]),C(v[t],g[t]),I(g[t]);k(g);for(let e=0;e<3;++e)P(g[e],y[e],64*t)}let l=0;for(let r=0;r<3;++r){const i=n[t.idx[r]].type;for(let t=8*e;t<8*e+o;++t){l=b[r][t];for(let e=0;e<u;++e){const n=64*e+8*(7&t);a.setUint16(l+0*i,y[r][n+0],!0),a.setUint16(l+2*i,y[r][n+1],!0),a.setUint16(l+4*i,y[r][n+2],!0),a.setUint16(l+6*i,y[r][n+3],!0),a.setUint16(l+8*i,y[r][n+4],!0),a.setUint16(l+10*i,y[r][n+5],!0),a.setUint16(l+12*i,y[r][n+6],!0),a.setUint16(l+14*i,y[r][n+7],!0),l+=16*i}}if(u!=c)for(let t=8*e;t<8*e+o;++t){const e=b[r][t]+8*u*2*i,n=64*u+8*(7&t);for(let t=0;t<s;++t)a.setUint16(e+2*t*i,y[r][n+t],!0)}}}const _=new Uint16Array(s);a=new DataView(o.buffer);for(let e=0;e<3;++e){n[t.idx[e]].decoded=!0;const r=n[t.idx[e]].type;if(2==n[e].type)for(let t=0;t<l;++t){const n=b[e][t];for(let t=0;t<s;++t)_[t]=a.getUint16(n+2*t*r,!0);for(let t=0;t<s;++t)a.setFloat32(n+2*t*r,Q(_[t]),!0)}}}(u,p,l,c,d,r);for(let e=0;e<l.length;++e){const n=l[e];if(!n.decoded){if(2!==n.compression)throw new Error("EXRLoader.parse: unsupported channel compression");{let i=0,o=0;for(let a=0;a<t.lines;++a){let t=p[e][i];for(let e=0;e<n.width;++e){for(let e=0;e<2*n.type;++e)r[t++]=f[o+e*n.width*n.height];o++}i++}}}}return new DataView(r.buffer)}function j(t,e){const n=new Uint8Array(t);let r=0;for(;0!=n[e.value+r];)r+=1;const i=(new TextDecoder).decode(n.slice(e.value,e.value+r));return e.value=e.value+r+1,i}function z(t,e){const n=t.getInt32(e.value,!0);return e.value=e.value+4,n}function F(t,e){const n=t.getUint32(e.value,!0);return e.value=e.value+4,n}function U(t,e){const n=t[e.value];return e.value=e.value+1,n}function q(t,e){const n=t.getUint8(e.value);return e.value=e.value+1,n}const G=function(t,e){const n=Number(t.getBigInt64(e.value,!0));return e.value+=8,n};function H(t,e){const n=t.getFloat32(e.value,!0);return e.value+=4,n}function V(t,e){return eT.toHalfFloat(H(t,e))}function Q(t){const e=(31744&t)>>10,n=1023&t;return(t>>15?-1:1)*(e?31===e?n?NaN:1/0:Math.pow(2,e-15)*(1+n/1024):n/1024*6103515625e-14)}function W(t,e){const n=t.getUint16(e.value,!0);return e.value+=2,n}function Y(t,e){return Q(W(t,e))}function K(t,e,n,r,i){return"string"===r||"stringvector"===r||"iccProfile"===r?function(t,e,n){const r=(new TextDecoder).decode(new Uint8Array(t).slice(e.value,e.value+n));return e.value=e.value+n,r}(e,n,i):"chlist"===r?function(t,e,n,r){const i=n.value,o=[];for(;n.value<i+r-1;){const r=j(e,n),i=z(t,n),a=q(t,n);n.value+=3;const s=z(t,n),l=z(t,n);o.push({name:r,pixelType:i,pLinear:a,xSampling:s,ySampling:l})}return n.value+=1,o}(t,e,n,i):"chromaticities"===r?function(t,e){return{redX:H(t,e),redY:H(t,e),greenX:H(t,e),greenY:H(t,e),blueX:H(t,e),blueY:H(t,e),whiteX:H(t,e),whiteY:H(t,e)}}(t,n):"compression"===r?function(t,e){return["NO_COMPRESSION","RLE_COMPRESSION","ZIPS_COMPRESSION","ZIP_COMPRESSION","PIZ_COMPRESSION","PXR24_COMPRESSION","B44_COMPRESSION","B44A_COMPRESSION","DWAA_COMPRESSION","DWAB_COMPRESSION"][q(t,e)]}(t,n):"box2i"===r?function(t,e){return{xMin:F(t,e),yMin:F(t,e),xMax:F(t,e),yMax:F(t,e)}}(t,n):"lineOrder"===r?function(t,e){return["INCREASING_Y"][q(t,e)]}(t,n):"float"===r?H(t,n):"v2f"===r?function(t,e){return[H(t,e),H(t,e)]}(t,n):"v3f"===r?function(t,e){return[H(t,e),H(t,e),H(t,e)]}(t,n):"int"===r?z(t,n):"rational"===r?function(t,e){return[z(t,e),F(t,e)]}(t,n):"timecode"===r?function(t,e){return[F(t,e),F(t,e)]}(t,n):"preview"===r?(n.value+=i,"skipped"):void(n.value+=i)}const X=new DataView(t),$=new Uint8Array(t),Z={value:0},J=function(t,e,n){const r={};if(20000630!=t.getUint32(0,!0))throw new Error("THREE.EXRLoader: provided file doesn't appear to be in OpenEXR format.");r.version=t.getUint8(4);const i=t.getUint8(5);r.spec={singleTile:!!(2&i),longName:!!(4&i),deepFormat:!!(8&i),multiPart:!!(16&i)},n.value=8;let o=!0;for(;o;){const i=j(e,n);if(0==i)o=!1;else{const o=j(e,n),a=K(t,e,n,o,F(t,n));void 0===a?console.warn(`EXRLoader.parse: skipped unknown header attribute type '${o}'.`):r[i]=a}}if(-5&i)throw console.error("EXRHeader:",r),new Error("THREE.EXRLoader: provided file is currently unsupported.");return r}(X,t,Z),tt=function(t,e,n,r,i){const o={size:0,viewer:e,array:n,offset:r,width:t.dataWindow.xMax-t.dataWindow.xMin+1,height:t.dataWindow.yMax-t.dataWindow.yMin+1,channels:t.channels.length,bytesPerLine:null,lines:null,inputSize:null,type:t.channels[0].pixelType,uncompress:null,getter:null,format:null,encoding:null};switch(t.compression){case"NO_COMPRESSION":o.lines=1,o.uncompress=O;break;case"RLE_COMPRESSION":o.lines=1,o.uncompress=M;break;case"ZIPS_COMPRESSION":o.lines=1,o.uncompress=L;break;case"ZIP_COMPRESSION":o.lines=16,o.uncompress=L;break;case"PIZ_COMPRESSION":o.lines=32,o.uncompress=D;break;case"PXR24_COMPRESSION":o.lines=16,o.uncompress=N;break;case"DWAA_COMPRESSION":o.lines=32,o.uncompress=B;break;case"DWAB_COMPRESSION":o.lines=256,o.uncompress=B;break;default:throw new Error("EXRLoader.parse: "+t.compression+" is unsupported")}if(o.scanlineBlockSize=o.lines,1==o.type)switch(i){case Xg:o.getter=Y,o.inputSize=2;break;case $g:o.getter=W,o.inputSize=2}else{if(2!=o.type)throw new Error("EXRLoader.parse: unsupported pixelType "+o.type+" for "+t.compression+".");switch(i){case Xg:o.getter=H,o.inputSize=4;break;case $g:o.getter=V,o.inputSize=4}}o.blockCount=(t.dataWindow.yMax+1)/o.scanlineBlockSize;for(let t=0;t<o.blockCount;t++)G(e,r);o.outputChannels=3==o.channels?4:o.channels;const a=o.width*o.height*o.outputChannels;switch(i){case Xg:o.byteArray=new Float32Array(a),o.channels<o.outputChannels&&o.byteArray.fill(1,0,a);break;case $g:o.byteArray=new Uint16Array(a),o.channels<o.outputChannels&&o.byteArray.fill(15360,0,a);break;default:console.error("THREE.EXRLoader: unsupported type: ",i)}return o.bytesPerLine=o.width*o.inputSize*o.channels,4==o.outputChannels?(o.format=nv,o.encoding=Kv):(o.format=sv,o.encoding=Kv),o}(J,X,$,Z,this.type),et={value:0},nt={R:0,G:1,B:2,A:3,Y:0};for(let t=0;t<tt.height/tt.scanlineBlockSize;t++){const e=F(X,Z);tt.size=F(X,Z),tt.lines=e+tt.scanlineBlockSize>tt.height?tt.height-e:tt.scanlineBlockSize;const n=tt.size<tt.lines*tt.bytesPerLine?tt.uncompress(tt):O(tt);Z.value+=tt.size;for(let e=0;e<tt.scanlineBlockSize;e++){const r=e+t*tt.scanlineBlockSize;if(r>=tt.height)break;for(let t=0;t<tt.channels;t++){const i=nt[J.channels[t].name];for(let o=0;o<tt.width;o++){et.value=(e*(tt.channels*tt.width)+t*tt.width+o)*tt.inputSize;const a=(tt.height-1-r)*(tt.width*tt.outputChannels)+o*tt.outputChannels+i;tt.byteArray[a]=tt.getter(n,et)}}}}return{header:J,width:tt.width,height:tt.height,data:tt.byteArray,format:tt.format,encoding:tt.encoding,type:this.type}}setDataType(t){return this.type=t,this}load(t,e,n,r){return super.load(t,(function(t,n){t.encoding=n.encoding,t.minFilter=Ug,t.magFilter=Ug,t.generateMipmaps=!1,t.flipY=!1,e&&e(t,n)}),n,r)}}function Ctt(t){return Ctt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ctt(t)}function Itt(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(void 0,"symbol"==Ctt(i=function(t,e){if("object"!=Ctt(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!=Ctt(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(r.key))?i:String(i)),r)}var i}function ktt(t){return ktt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},ktt(t)}function Ptt(t,e){return Ptt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Ptt(t,e)}function Rtt(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=ktt(t);if(e){var i=ktt(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return function(t,e){if(e&&("object"==Ctt(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,n)}}var Ott=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Ptt(t,e)}(i,xK);var e,n,r=Rtt(i);function i(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(e=r.call(this,t))._loader=new Ttt,e}return e=i,(n=[{key:"load",value:function(t){var e=this,n=t.path;return new Promise((function(t,r){e._loader.load(n,t,null,r)}))}}])&&Itt(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();function Mtt(t){return Mtt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Mtt(t)}function Ltt(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Dtt(t){return(Dtt=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Ntt(t,e){return(Ntt=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Btt(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Dtt(t);if(e){var i=Dtt(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return function(t,e){return!e||"object"!=Mtt(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}(this,n)}}var jtt=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Ntt(t,e)}(i,xK);var e,n,r=Btt(i);function i(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),r.apply(this,arguments)}return e=i,(n=[{key:"load",value:function(t){var e=t.path,n=t.name;return new Promise((function(t,r){var i=new XMLHttpRequest;i.addEventListener("load",(function(){var e=JSON.parse(i.response);t(e)})),i.addEventListener("error",(function(){r(new Error('ImageLoader : Error while loading resource "'.concat(n,'"')))})),i.open("GET",e),i.send()}))}}])&&Ltt(e.prototype,n),i}();const ztt=jtt;function Ftt(t){return Ftt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ftt(t)}function Utt(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,qtt(r.key),r)}}function qtt(t){var e=function(t,e){if("object"!=Ftt(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=Ftt(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Ftt(e)?e:e+""}function Gtt(t,e,n){return e=Vtt(e),function(t,e){if(e&&("object"===Ftt(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,Htt()?Reflect.construct(e,n||[],Vtt(t).constructor):e.apply(t,n))}function Htt(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(Htt=function(){return!!t})()}function Vtt(t){return Vtt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Vtt(t)}function Qtt(t,e){return Qtt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Qtt(t,e)}var Wtt=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),Gtt(this,e,arguments)}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Qtt(t,e)}(e,t),n=e,r=[{key:"load",value:function(t,e,n,r){var i=this,o=new sS(this.manager);o.setPath(this.path),o.setResponseType("text"),o.load(t,(function(n){try{e(i.parse(n))}catch(e){r?r(e):console.error(e),i.manager.itemError(t)}}),n,r)}},{key:"parse",value:function(t){for(var e=(t=t.replace(/^#.*?(\n|\r)/gm,"").replace(/^\s*?(\n|\r)/gm,"").trim()).split(/[\n\r]+/g),n=e[0].trim().split(/\s+/g).map((function(t){return parseFloat(t)})),r=n.length,i=new Array(r*r*r*4),o=0,a=0,s=1,l=e.length;s<l;s++){var u=e[s].trim().split(/\s/g),c=parseFloat(u[0]),d=parseFloat(u[1]),f=parseFloat(u[2]);a=Math.max(a,c,d,f);var h=o%r*r*r+Math.floor(o/r)%r*r+Math.floor(o/(r*r))%r;i[4*h+0]=c,i[4*h+1]=d,i[4*h+2]=f,i[4*h+3]=1,o+=1}for(var p=Math.ceil(Math.log2(a)),m=Math.pow(2,p),g=0,v=i.length;g<v;g+=4){var y=i[g+0],b=i[g+1],_=i[g+2];i[g+0]=255*y/m,i[g+1]=255*b/m,i[g+2]=255*_/m}var w=new Uint8Array(i),A=new ZE;A.image.data=w,A.image.width=r,A.image.height=r*r,A.format=nv,A.type=Hg,A.magFilter=Ug,A.minFilter=Ug,A.wrapS=Ng,A.wrapT=Ng,A.generateMipmaps=!1,A.needsUpdate=!0;var E=new Wy;return E.image.data=w,E.image.width=r,E.image.height=r,E.image.depth=r,E.format=nv,E.type=Hg,E.magFilter=Ug,E.minFilter=Ug,E.wrapS=Ng,E.wrapT=Ng,E.wrapR=Ng,E.generateMipmaps=!1,E.needsUpdate=!0,{size:r,texture:A,texture3D:E}}}],r&&Utt(n.prototype,r),i&&Utt(n,i),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,i}(iS);function Ytt(t){return Ytt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ytt(t)}function Ktt(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Xtt(r.key),r)}}function Xtt(t){var e=function(t,e){if("object"!=Ytt(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=Ytt(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Ytt(e)?e:e+""}function $tt(t,e,n){return e=Jtt(e),function(t,e){if(e&&("object"===Ytt(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,Ztt()?Reflect.construct(e,n||[],Jtt(t).constructor):e.apply(t,n))}function Ztt(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(Ztt=function(){return!!t})()}function Jtt(t){return Jtt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Jtt(t)}function tet(t,e){return tet=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},tet(t,e)}const eet=function(t){function e(t){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=$tt(this,e,[t]))._loader=new Wtt,n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&tet(t,e)}(e,t),n=e,(r=[{key:"load",value:function(t){var e=this,n=t.path;return new Promise((function(t,r){e._loader.load(n,t,null,r)}))}}])&&Ktt(n.prototype,r),i&&Ktt(n,i),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,i}(xK);function net(t){return net="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},net(t)}function ret(t){return function(t){if(Array.isArray(t))return iet(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return iet(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return iet(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function iet(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function oet(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,aet(r.key),r)}}function aet(t){var e=function(t,e){if("object"!=net(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=net(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==net(e)?e:e+""}function set(t,e,n){return e=cet(e),function(t,e){if(e&&("object"===net(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,uet()?Reflect.construct(e,n||[],cet(t).constructor):e.apply(t,n))}function uet(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(uet=function(){return!!t})()}function cet(t){return cet=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},cet(t)}function det(t,e){return det=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},det(t,e)}AK.basePath="./wp-content/themes/davidwhyte/resources/assets",AK.registerLoader(p7,"gltf",{}),AK.registerLoader(L7,"obj"),AK.registerLoader(eet,"3dl"),AK.registerLoader(U7,"texture"),AK.registerLoader(Y7,"image"),AK.registerLoader(Ott,"exr"),AK.registerLoader(ztt,"json");var fet=function(t){function e(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(t=set(this,e))._bindHandlers(),t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&det(t,e)}(e,t),n=e,r=[{key:"start",value:function(){this._resourceLoader=this._createResourceLoader(),this._setupEventListeners(),this._addViewsAssets(this._resourceLoader),this._resourceLoader.add({resources:c9,preload:!0}),this._resourceLoader.preload()}},{key:"_createResourceLoader",value:function(){return new AK}},{key:"_addViewsAssets",value:function(t){var e=this;U6.forEach((function(n){var r=NW.isProduction&&n.resources.preload.production,i=NW.isDevelopment&&n.resources.preload.development,o=r||i;n.resources.items=e._updateFallbacks(n.resources.items),t.add({resources:n.resources.items,namespace:n.name,preload:o})}))}},{key:"_updateFallbacks",value:function(t){var e,n=[],r=[];return t.forEach((function(t){t.fallback&&t.fallback.edge&&u9.isEdge()&&(r.push(t),n.push.apply(n,ret(t.fallback.edge)))})),(e=t=t.filter((function(t){return!r.includes(t)}))).push.apply(e,n),t}},{key:"_setupEventListeners",value:function(){this._resourceLoader.addEventListener("progress",this._loadingProgressHandler),this._resourceLoader.addEventListener("complete",this._loadingCompleteHandler)}},{key:"_bindHandlers",value:function(){this._loadingProgressHandler=this._loadingProgressHandler.bind(this),this._loadingCompleteHandler=this._loadingCompleteHandler.bind(this)}},{key:"_loadingProgressHandler",value:function(t){this.dispatchEvent("progress",t)}},{key:"_loadingCompleteHandler",value:function(){this.dispatchEvent("complete")}}],r&&oet(n.prototype,r),i&&oet(n,i),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,i}(kW);const het=new fet;function pet(t){return pet="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},pet(t)}function met(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,vet(r.key),r)}}function get(t,e,n){return(e=vet(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function vet(t){var e=function(t,e){if("object"!=pet(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=pet(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==pet(e)?e:e+""}var yet=function(){return t=function t(e){var n=e.canvas,r=e.width,i=void 0===r?500:r,o=e.height,a=void 0===o?500:o,s=e.color;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),get(this,"_width",void 0),get(this,"_height",void 0),get(this,"_dpr",2),get(this,"_color",void 0),get(this,"targetScroll",0),get(this,"charDelay",0),get(this,"_innerMargin",void 0),get(this,"_lineWidth",void 0),get(this,"_center",void 0),get(this,"progress",0),this.canvas=n,this.ctx=n.getContext("2d"),this._width=i,this._height=a,this._color=s,this.canvas.width=i*this._dpr,this.canvas.style.width=i,this.canvas.height=a*this._dpr,this.canvas.style.height=a,this.canvas.style.position="fixed",this.canvas.style.top="0px",this.canvas.style.left="0px",this.canvas.style.zIndex=1e6,this._lineWidth=5,this._innerMargin=this._lineWidth/2+5,this._center=i/2,this.draw()},(e=[{key:"draw",value:function(t,e){var n=this._dpr,r=this.ctx;r.setTransform(n,0,0,n,0,0),r.clearRect(0,0,this._width,this._height),r.lineWidth=this._lineWidth,r.strokeStyle="rgba(0, 0, 0, 0.3)",r.beginPath(),r.arc(this._center,this._center,this._center-this._innerMargin,1.5*Math.PI,3.5*Math.PI),r.stroke(),r.strokeStyle=this._color,r.beginPath(),r.arc(this._center,this._center,this._center-this._innerMargin,1.5*Math.PI,(1.5+2*t)*Math.PI,e),r.stroke()}}])&&met(t.prototype,e),n&&met(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,n}();class bet{constructor(t=4){this.pool=t,this.queue=[],this.workers=[],this.workersResolve=[],this.workerStatus=0}_initWorker(t){if(!this.workers[t]){const e=this.workerCreator();e.addEventListener("message",this._onMessage.bind(this,t)),this.workers[t]=e}}_getIdleWorker(){for(let t=0;t<this.pool;t++)if(!(this.workerStatus&1<<t))return t;return-1}_onMessage(t,e){const n=this.workersResolve[t];if(n&&n(e),this.queue.length){const{resolve:e,msg:n,transfer:r}=this.queue.shift();this.workersResolve[t]=e,this.workers[t].postMessage(n,r)}else this.workerStatus^=1<<t}setWorkerCreator(t){this.workerCreator=t}setWorkerLimit(t){this.pool=t}postMessage(t,e){return new Promise((n=>{const r=this._getIdleWorker();-1!==r?(this._initWorker(r),this.workerStatus|=1<<r,this.workersResolve[r]=n,this.workers[r].postMessage(t,e)):this.queue.push({resolve:n,msg:t,transfer:e})}))}dispose(){this.workers.forEach((t=>t.terminate())),this.workersResolve.length=0,this.workers.length=0,this.queue.length=0,this.workerStatus=0}}var _et=n(8287).hp;const wet=9,Aet=15,Eet=16,xet=22,Tet=37,Cet=43,Iet=76,ket=83,Pet=97,Ret=100,Oet=103,Met=109;class Let{constructor(){this.vkFormat=0,this.typeSize=1,this.pixelWidth=0,this.pixelHeight=0,this.pixelDepth=0,this.layerCount=0,this.faceCount=1,this.supercompressionScheme=0,this.levels=[],this.dataFormatDescriptor=[{vendorId:0,descriptorType:0,descriptorBlockSize:0,versionNumber:2,colorModel:0,colorPrimaries:1,transferFunction:2,flags:0,texelBlockDimension:[0,0,0,0],bytesPlane:[0,0,0,0,0,0,0,0],samples:[]}],this.keyValue={},this.globalData=null}}class Det{constructor(t,e,n,r){this._dataView=new DataView(t.buffer,t.byteOffset+e,n),this._littleEndian=r,this._offset=0}_nextUint8(){const t=this._dataView.getUint8(this._offset);return this._offset+=1,t}_nextUint16(){const t=this._dataView.getUint16(this._offset,this._littleEndian);return this._offset+=2,t}_nextUint32(){const t=this._dataView.getUint32(this._offset,this._littleEndian);return this._offset+=4,t}_nextUint64(){const t=this._dataView.getUint32(this._offset,this._littleEndian)+2**32*this._dataView.getUint32(this._offset+4,this._littleEndian);return this._offset+=8,t}_nextInt32(){const t=this._dataView.getInt32(this._offset,this._littleEndian);return this._offset+=4,t}_skip(t){return this._offset+=t,this}_scan(t,e=0){const n=this._offset;let r=0;for(;this._dataView.getUint8(this._offset)!==e&&r<t;)r++,this._offset++;return r<t&&this._offset++,new Uint8Array(this._dataView.buffer,this._dataView.byteOffset+n,r)}}new Uint8Array([0]);const Net=[171,75,84,88,32,50,48,187,13,10,26,10];function Bet(t){return"undefined"!=typeof TextDecoder?(new TextDecoder).decode(t):_et.from(t).toString("utf8")}var jet=n(8287).hp;let zet,Fet,Uet;const qet={env:{emscripten_notify_memory_growth:function(t){Uet=new Uint8Array(Fet.exports.memory.buffer)}}};class Get{init(){return zet||(zet="undefined"!=typeof fetch?fetch("data:application/wasm;base64,"+Het).then((t=>t.arrayBuffer())).then((t=>WebAssembly.instantiate(t,qet))).then(this._init):WebAssembly.instantiate(jet.from(Het,"base64"),qet).then(this._init),zet)}_init(t){Fet=t.instance,qet.env.emscripten_notify_memory_growth(0)}decode(t,e=0){if(!Fet)throw new Error("ZSTDDecoder: Await .init() before decoding.");const n=t.byteLength,r=Fet.exports.malloc(n);Uet.set(t,r),e=e||Number(Fet.exports.ZSTD_findDecompressedSize(r,n));const i=Fet.exports.malloc(e),o=Fet.exports.ZSTD_decompress(i,e,r,n),a=Uet.slice(i,i+o);return Fet.exports.free(r),Fet.exports.free(i),a}}const Het="AGFzbQEAAAABpQEVYAF/AX9gAn9/AGADf39/AX9gBX9/f39/AX9gAX8AYAJ/fwF/YAR/f39/AX9gA39/fwBgBn9/f39/fwF/YAd/f39/f39/AX9gAn9/AX5gAn5+AX5gAABgBX9/f39/AGAGf39/f39/AGAIf39/f39/f38AYAl/f39/f39/f38AYAABf2AIf39/f39/f38Bf2ANf39/f39/f39/f39/fwF/YAF/AX4CJwEDZW52H2Vtc2NyaXB0ZW5fbm90aWZ5X21lbW9yeV9ncm93dGgABANpaAEFAAAFAgEFCwACAQABAgIFBQcAAwABDgsBAQcAEhMHAAUBDAQEAAANBwQCAgYCBAgDAwMDBgEACQkHBgICAAYGAgQUBwYGAwIGAAMCAQgBBwUGCgoEEQAEBAEIAwgDBQgDEA8IAAcABAUBcAECAgUEAQCAAgYJAX8BQaCgwAILB2AHBm1lbW9yeQIABm1hbGxvYwAoBGZyZWUAJgxaU1REX2lzRXJyb3IAaBlaU1REX2ZpbmREZWNvbXByZXNzZWRTaXplAFQPWlNURF9kZWNvbXByZXNzAEoGX3N0YXJ0ACQJBwEAQQELASQKussBaA8AIAAgACgCBCABajYCBAsZACAAKAIAIAAoAgRBH3F0QQAgAWtBH3F2CwgAIABBiH9LC34BBH9BAyEBIAAoAgQiA0EgTQRAIAAoAggiASAAKAIQTwRAIAAQDQ8LIAAoAgwiAiABRgRAQQFBAiADQSBJGw8LIAAgASABIAJrIANBA3YiBCABIARrIAJJIgEbIgJrIgQ2AgggACADIAJBA3RrNgIEIAAgBCgAADYCAAsgAQsUAQF/IAAgARACIQIgACABEAEgAgv3AQECfyACRQRAIABCADcCACAAQQA2AhAgAEIANwIIQbh/DwsgACABNgIMIAAgAUEEajYCECACQQRPBEAgACABIAJqIgFBfGoiAzYCCCAAIAMoAAA2AgAgAUF/ai0AACIBBEAgAEEIIAEQFGs2AgQgAg8LIABBADYCBEF/DwsgACABNgIIIAAgAS0AACIDNgIAIAJBfmoiBEEBTQRAIARBAWtFBEAgACABLQACQRB0IANyIgM2AgALIAAgAS0AAUEIdCADajYCAAsgASACakF/ai0AACIBRQRAIABBADYCBEFsDwsgAEEoIAEQFCACQQN0ams2AgQgAgsWACAAIAEpAAA3AAAgACABKQAINwAICy8BAX8gAUECdEGgHWooAgAgACgCAEEgIAEgACgCBGprQR9xdnEhAiAAIAEQASACCyEAIAFCz9bTvtLHq9lCfiAAfEIfiUKHla+vmLbem55/fgsdAQF/IAAoAgggACgCDEYEfyAAKAIEQSBGBUEACwuCBAEDfyACQYDAAE8EQCAAIAEgAhBnIAAPCyAAIAJqIQMCQCAAIAFzQQNxRQRAAkAgAkEBSARAIAAhAgwBCyAAQQNxRQRAIAAhAgwBCyAAIQIDQCACIAEtAAA6AAAgAUEBaiEBIAJBAWoiAiADTw0BIAJBA3ENAAsLAkAgA0F8cSIEQcAASQ0AIAIgBEFAaiIFSw0AA0AgAiABKAIANgIAIAIgASgCBDYCBCACIAEoAgg2AgggAiABKAIMNgIMIAIgASgCEDYCECACIAEoAhQ2AhQgAiABKAIYNgIYIAIgASgCHDYCHCACIAEoAiA2AiAgAiABKAIkNgIkIAIgASgCKDYCKCACIAEoAiw2AiwgAiABKAIwNgIwIAIgASgCNDYCNCACIAEoAjg2AjggAiABKAI8NgI8IAFBQGshASACQUBrIgIgBU0NAAsLIAIgBE8NAQNAIAIgASgCADYCACABQQRqIQEgAkEEaiICIARJDQALDAELIANBBEkEQCAAIQIMAQsgA0F8aiIEIABJBEAgACECDAELIAAhAgNAIAIgAS0AADoAACACIAEtAAE6AAEgAiABLQACOgACIAIgAS0AAzoAAyABQQRqIQEgAkEEaiICIARNDQALCyACIANJBEADQCACIAEtAAA6AAAgAUEBaiEBIAJBAWoiAiADRw0ACwsgAAsMACAAIAEpAAA3AAALQQECfyAAKAIIIgEgACgCEEkEQEEDDwsgACAAKAIEIgJBB3E2AgQgACABIAJBA3ZrIgE2AgggACABKAAANgIAQQALDAAgACABKAIANgAAC/cCAQJ/AkAgACABRg0AAkAgASACaiAASwRAIAAgAmoiBCABSw0BCyAAIAEgAhALDwsgACABc0EDcSEDAkACQCAAIAFJBEAgAwRAIAAhAwwDCyAAQQNxRQRAIAAhAwwCCyAAIQMDQCACRQ0EIAMgAS0AADoAACABQQFqIQEgAkF/aiECIANBAWoiA0EDcQ0ACwwBCwJAIAMNACAEQQNxBEADQCACRQ0FIAAgAkF/aiICaiIDIAEgAmotAAA6AAAgA0EDcQ0ACwsgAkEDTQ0AA0AgACACQXxqIgJqIAEgAmooAgA2AgAgAkEDSw0ACwsgAkUNAgNAIAAgAkF/aiICaiABIAJqLQAAOgAAIAINAAsMAgsgAkEDTQ0AIAIhBANAIAMgASgCADYCACABQQRqIQEgA0EEaiEDIARBfGoiBEEDSw0ACyACQQNxIQILIAJFDQADQCADIAEtAAA6AAAgA0EBaiEDIAFBAWohASACQX9qIgINAAsLIAAL8wICAn8BfgJAIAJFDQAgACACaiIDQX9qIAE6AAAgACABOgAAIAJBA0kNACADQX5qIAE6AAAgACABOgABIANBfWogAToAACAAIAE6AAIgAkEHSQ0AIANBfGogAToAACAAIAE6AAMgAkEJSQ0AIABBACAAa0EDcSIEaiIDIAFB/wFxQYGChAhsIgE2AgAgAyACIARrQXxxIgRqIgJBfGogATYCACAEQQlJDQAgAyABNgIIIAMgATYCBCACQXhqIAE2AgAgAkF0aiABNgIAIARBGUkNACADIAE2AhggAyABNgIUIAMgATYCECADIAE2AgwgAkFwaiABNgIAIAJBbGogATYCACACQWhqIAE2AgAgAkFkaiABNgIAIAQgA0EEcUEYciIEayICQSBJDQAgAa0iBUIghiAFhCEFIAMgBGohAQNAIAEgBTcDGCABIAU3AxAgASAFNwMIIAEgBTcDACABQSBqIQEgAkFgaiICQR9LDQALCyAACy8BAn8gACgCBCAAKAIAQQJ0aiICLQACIQMgACACLwEAIAEgAi0AAxAIajYCACADCy8BAn8gACgCBCAAKAIAQQJ0aiICLQACIQMgACACLwEAIAEgAi0AAxAFajYCACADCx8AIAAgASACKAIEEAg2AgAgARAEGiAAIAJBCGo2AgQLCAAgAGdBH3MLugUBDX8jAEEQayIKJAACfyAEQQNNBEAgCkEANgIMIApBDGogAyAEEAsaIAAgASACIApBDGpBBBAVIgBBbCAAEAMbIAAgACAESxsMAQsgAEEAIAEoAgBBAXRBAmoQECENQVQgAygAACIGQQ9xIgBBCksNABogAiAAQQVqNgIAIAMgBGoiAkF8aiEMIAJBeWohDiACQXtqIRAgAEEGaiELQQQhBSAGQQR2IQRBICAAdCIAQQFyIQkgASgCACEPQQAhAiADIQYCQANAIAlBAkggAiAPS3JFBEAgAiEHAkAgCARAA0AgBEH//wNxQf//A0YEQCAHQRhqIQcgBiAQSQR/IAZBAmoiBigAACAFdgUgBUEQaiEFIARBEHYLIQQMAQsLA0AgBEEDcSIIQQNGBEAgBUECaiEFIARBAnYhBCAHQQNqIQcMAQsLIAcgCGoiByAPSw0EIAVBAmohBQNAIAIgB0kEQCANIAJBAXRqQQA7AQAgAkEBaiECDAELCyAGIA5LQQAgBiAFQQN1aiIHIAxLG0UEQCAHKAAAIAVBB3EiBXYhBAwCCyAEQQJ2IQQLIAYhBwsCfyALQX9qIAQgAEF/anEiBiAAQQF0QX9qIgggCWsiEUkNABogBCAIcSIEQQAgESAEIABIG2shBiALCyEIIA0gAkEBdGogBkF/aiIEOwEAIAlBASAGayAEIAZBAUgbayEJA0AgCSAASARAIABBAXUhACALQX9qIQsMAQsLAn8gByAOS0EAIAcgBSAIaiIFQQN1aiIGIAxLG0UEQCAFQQdxDAELIAUgDCIGIAdrQQN0awshBSACQQFqIQIgBEUhCCAGKAAAIAVBH3F2IQQMAQsLQWwgCUEBRyAFQSBKcg0BGiABIAJBf2o2AgAgBiAFQQdqQQN1aiADawwBC0FQCyEAIApBEGokACAACwkAQQFBBSAAGwsMACAAIAEoAAA2AAALqgMBCn8jAEHwAGsiCiQAIAJBAWohDiAAQQhqIQtBgIAEIAVBf2p0QRB1IQxBACECQQEhBkEBIAV0IglBf2oiDyEIA0AgAiAORkUEQAJAIAEgAkEBdCINai8BACIHQf//A0YEQCALIAhBA3RqIAI2AgQgCEF/aiEIQQEhBwwBCyAGQQAgDCAHQRB0QRB1ShshBgsgCiANaiAHOwEAIAJBAWohAgwBCwsgACAFNgIEIAAgBjYCACAJQQN2IAlBAXZqQQNqIQxBACEAQQAhBkEAIQIDQCAGIA5GBEADQAJAIAAgCUYNACAKIAsgAEEDdGoiASgCBCIGQQF0aiICIAIvAQAiAkEBajsBACABIAUgAhAUayIIOgADIAEgAiAIQf8BcXQgCWs7AQAgASAEIAZBAnQiAmooAgA6AAIgASACIANqKAIANgIEIABBAWohAAwBCwsFIAEgBkEBdGouAQAhDUEAIQcDQCAHIA1ORQRAIAsgAkEDdGogBjYCBANAIAIgDGogD3EiAiAISw0ACyAHQQFqIQcMAQsLIAZBAWohBgwBCwsgCkHwAGokAAsjAEIAIAEQCSAAhUKHla+vmLbem55/fkLj3MqV/M7y9YV/fAsQACAAQn43AwggACABNgIACyQBAX8gAARAIAEoAgQiAgRAIAEoAgggACACEQEADwsgABAmCwsfACAAIAEgAi8BABAINgIAIAEQBBogACACQQRqNgIEC0oBAX9BoCAoAgAiASAAaiIAQX9MBEBBiCBBMDYCAEF/DwsCQCAAPwBBEHRNDQAgABBmDQBBiCBBMDYCAEF/DwtBoCAgADYCACABC9cBAQh/Qbp/IQoCQCACKAIEIgggAigCACIJaiIOIAEgAGtLDQBBbCEKIAkgBCADKAIAIgtrSw0AIAAgCWoiBCACKAIIIgxrIQ0gACABQWBqIg8gCyAJQQAQKSADIAkgC2o2AgACQAJAIAwgBCAFa00EQCANIQUMAQsgDCAEIAZrSw0CIAcgDSAFayIAaiIBIAhqIAdNBEAgBCABIAgQDxoMAgsgBCABQQAgAGsQDyEBIAIgACAIaiIINgIEIAEgAGshBAsgBCAPIAUgCEEBECkLIA4hCgsgCgubAgEBfyMAQYABayINJAAgDSADNgJ8AkAgAkEDSwRAQX8hCQwBCwJAAkACQAJAIAJBAWsOAwADAgELIAZFBEBBuH8hCQwEC0FsIQkgBS0AACICIANLDQMgACAHIAJBAnQiAmooAgAgAiAIaigCABA7IAEgADYCAEEBIQkMAwsgASAJNgIAQQAhCQwCCyAKRQRAQWwhCQwCC0EAIQkgC0UgDEEZSHINAUEIIAR0QQhqIQBBACECA0AgAiAATw0CIAJBQGshAgwAAAsAC0FsIQkgDSANQfwAaiANQfgAaiAFIAYQFSICEAMNACANKAJ4IgMgBEsNACAAIA0gDSgCfCAHIAggAxAYIAEgADYCACACIQkLIA1BgAFqJAAgCQsLACAAIAEgAhALGgsQACAALwAAIAAtAAJBEHRyCy8AAn9BuH8gAUEISQ0AGkFyIAAoAAQiAEF3Sw0AGkG4fyAAQQhqIgAgACABSxsLCwkAIAAgATsAAAsDAAELigYBBX8gACAAKAIAIgVBfnE2AgBBACAAIAVBAXZqQYQgKAIAIgQgAEYbIQECQAJAIAAoAgQiAkUNACACKAIAIgNBAXENACACQQhqIgUgA0EBdkF4aiIDQQggA0EISxtnQR9zQQJ0QYAfaiIDKAIARgRAIAMgAigCDDYCAAsgAigCCCIDBEAgAyACKAIMNgIECyACKAIMIgMEQCADIAIoAgg2AgALIAIgAigCACAAKAIAQX5xajYCAEGEICEAAkACQCABRQ0AIAEgAjYCBCABKAIAIgNBAXENASADQQF2QXhqIgNBCCADQQhLG2dBH3NBAnRBgB9qIgMoAgAgAUEIakYEQCADIAEoAgw2AgALIAEoAggiAwRAIAMgASgCDDYCBAsgASgCDCIDBEAgAyABKAIINgIAQYQgKAIAIQQLIAIgAigCACABKAIAQX5xajYCACABIARGDQAgASABKAIAQQF2akEEaiEACyAAIAI2AgALIAIoAgBBAXZBeGoiAEEIIABBCEsbZ0Efc0ECdEGAH2oiASgCACEAIAEgBTYCACACIAA2AgwgAkEANgIIIABFDQEgACAFNgIADwsCQCABRQ0AIAEoAgAiAkEBcQ0AIAJBAXZBeGoiAkEIIAJBCEsbZ0Efc0ECdEGAH2oiAigCACABQQhqRgRAIAIgASgCDDYCAAsgASgCCCICBEAgAiABKAIMNgIECyABKAIMIgIEQCACIAEoAgg2AgBBhCAoAgAhBAsgACAAKAIAIAEoAgBBfnFqIgI2AgACQCABIARHBEAgASABKAIAQQF2aiAANgIEIAAoAgAhAgwBC0GEICAANgIACyACQQF2QXhqIgFBCCABQQhLG2dBH3NBAnRBgB9qIgIoAgAhASACIABBCGoiAjYCACAAIAE2AgwgAEEANgIIIAFFDQEgASACNgIADwsgBUEBdkF4aiIBQQggAUEISxtnQR9zQQJ0QYAfaiICKAIAIQEgAiAAQQhqIgI2AgAgACABNgIMIABBADYCCCABRQ0AIAEgAjYCAAsLDgAgAARAIABBeGoQJQsLgAIBA38CQCAAQQ9qQXhxQYQgKAIAKAIAQQF2ayICEB1Bf0YNAAJAQYQgKAIAIgAoAgAiAUEBcQ0AIAFBAXZBeGoiAUEIIAFBCEsbZ0Efc0ECdEGAH2oiASgCACAAQQhqRgRAIAEgACgCDDYCAAsgACgCCCIBBEAgASAAKAIMNgIECyAAKAIMIgFFDQAgASAAKAIINgIAC0EBIQEgACAAKAIAIAJBAXRqIgI2AgAgAkEBcQ0AIAJBAXZBeGoiAkEIIAJBCEsbZ0Efc0ECdEGAH2oiAygCACECIAMgAEEIaiIDNgIAIAAgAjYCDCAAQQA2AgggAkUNACACIAM2AgALIAELtwIBA38CQAJAIABBASAAGyICEDgiAA0AAkACQEGEICgCACIARQ0AIAAoAgAiA0EBcQ0AIAAgA0EBcjYCACADQQF2QXhqIgFBCCABQQhLG2dBH3NBAnRBgB9qIgEoAgAgAEEIakYEQCABIAAoAgw2AgALIAAoAggiAQRAIAEgACgCDDYCBAsgACgCDCIBBEAgASAAKAIINgIACyACECchAkEAIQFBhCAoAgAhACACDQEgACAAKAIAQX5xNgIAQQAPCyACQQ9qQXhxIgMQHSICQX9GDQIgAkEHakF4cSIAIAJHBEAgACACaxAdQX9GDQMLAkBBhCAoAgAiAUUEQEGAICAANgIADAELIAAgATYCBAtBhCAgADYCACAAIANBAXRBAXI2AgAMAQsgAEUNAQsgAEEIaiEBCyABC7kDAQJ/IAAgA2ohBQJAIANBB0wEQANAIAAgBU8NAiAAIAItAAA6AAAgAEEBaiEAIAJBAWohAgwAAAsACyAEQQFGBEACQCAAIAJrIgZBB00EQCAAIAItAAA6AAAgACACLQABOgABIAAgAi0AAjoAAiAAIAItAAM6AAMgAEEEaiACIAZBAnQiBkHAHmooAgBqIgIQFyACIAZB4B5qKAIAayECDAELIAAgAhAMCyACQQhqIQIgAEEIaiEACwJAAkACQAJAIAUgAU0EQCAAIANqIQEgBEEBRyAAIAJrQQ9Kcg0BA0AgACACEAwgAkEIaiECIABBCGoiACABSQ0ACwwFCyAAIAFLBEAgACEBDAQLIARBAUcgACACa0EPSnINASAAIQMgAiEEA0AgAyAEEAwgBEEIaiEEIANBCGoiAyABSQ0ACwwCCwNAIAAgAhAHIAJBEGohAiAAQRBqIgAgAUkNAAsMAwsgACEDIAIhBANAIAMgBBAHIARBEGohBCADQRBqIgMgAUkNAAsLIAIgASAAa2ohAgsDQCABIAVPDQEgASACLQAAOgAAIAFBAWohASACQQFqIQIMAAALAAsLQQECfyAAIAAoArjgASIDNgLE4AEgACgCvOABIQQgACABNgK84AEgACABIAJqNgK44AEgACABIAQgA2tqNgLA4AELpgEBAX8gACAAKALs4QEQFjYCyOABIABCADcD+OABIABCADcDuOABIABBwOABakIANwMAIABBqNAAaiIBQYyAgOAANgIAIABBADYCmOIBIABCADcDiOEBIABCAzcDgOEBIABBrNABakHgEikCADcCACAAQbTQAWpB6BIoAgA2AgAgACABNgIMIAAgAEGYIGo2AgggACAAQaAwajYCBCAAIABBEGo2AgALYQEBf0G4fyEDAkAgAUEDSQ0AIAIgABAhIgFBA3YiADYCCCACIAFBAXE2AgQgAiABQQF2QQNxIgM2AgACQCADQX9qIgFBAksNAAJAIAFBAWsOAgEAAgtBbA8LIAAhAwsgAwsMACAAIAEgAkEAEC4LiAQCA38CfiADEBYhBCAAQQBBKBAQIQAgBCACSwRAIAQPCyABRQRAQX8PCwJAAkAgA0EBRg0AIAEoAAAiBkGo6r5pRg0AQXYhAyAGQXBxQdDUtMIBRw0BQQghAyACQQhJDQEgAEEAQSgQECEAIAEoAAQhASAAQQE2AhQgACABrTcDAEEADwsgASACIAMQLyIDIAJLDQAgACADNgIYQXIhAyABIARqIgVBf2otAAAiAkEIcQ0AIAJBIHEiBkUEQEFwIQMgBS0AACIFQacBSw0BIAVBB3GtQgEgBUEDdkEKaq2GIgdCA4h+IAd8IQggBEEBaiEECyACQQZ2IQMgAkECdiEFAkAgAkEDcUF/aiICQQJLBEBBACECDAELAkACQAJAIAJBAWsOAgECAAsgASAEai0AACECIARBAWohBAwCCyABIARqLwAAIQIgBEECaiEEDAELIAEgBGooAAAhAiAEQQRqIQQLIAVBAXEhBQJ+AkACQAJAIANBf2oiA0ECTQRAIANBAWsOAgIDAQtCfyAGRQ0DGiABIARqMQAADAMLIAEgBGovAACtQoACfAwCCyABIARqKAAArQwBCyABIARqKQAACyEHIAAgBTYCICAAIAI2AhwgACAHNwMAQQAhAyAAQQA2AhQgACAHIAggBhsiBzcDCCAAIAdCgIAIIAdCgIAIVBs+AhALIAMLWwEBf0G4fyEDIAIQFiICIAFNBH8gACACakF/ai0AACIAQQNxQQJ0QaAeaigCACACaiAAQQZ2IgFBAnRBsB5qKAIAaiAAQSBxIgBFaiABRSAAQQV2cWoFQbh/CwsdACAAKAKQ4gEQWiAAQQA2AqDiASAAQgA3A5DiAQu1AwEFfyMAQZACayIKJABBuH8hBgJAIAVFDQAgBCwAACIIQf8BcSEHAkAgCEF/TARAIAdBgn9qQQF2IgggBU8NAkFsIQYgB0GBf2oiBUGAAk8NAiAEQQFqIQdBACEGA0AgBiAFTwRAIAUhBiAIIQcMAwUgACAGaiAHIAZBAXZqIgQtAABBBHY6AAAgACAGQQFyaiAELQAAQQ9xOgAAIAZBAmohBgwBCwAACwALIAcgBU8NASAAIARBAWogByAKEFMiBhADDQELIAYhBEEAIQYgAUEAQTQQECEJQQAhBQNAIAQgBkcEQCAAIAZqIggtAAAiAUELSwRAQWwhBgwDBSAJIAFBAnRqIgEgASgCAEEBajYCACAGQQFqIQZBASAILQAAdEEBdSAFaiEFDAILAAsLQWwhBiAFRQ0AIAUQFEEBaiIBQQxLDQAgAyABNgIAQQFBASABdCAFayIDEBQiAXQgA0cNACAAIARqIAFBAWoiADoAACAJIABBAnRqIgAgACgCAEEBajYCACAJKAIEIgBBAkkgAEEBcXINACACIARBAWo2AgAgB0EBaiEGCyAKQZACaiQAIAYLxhEBDH8jAEHwAGsiBSQAQWwhCwJAIANBCkkNACACLwAAIQogAi8AAiEJIAIvAAQhByAFQQhqIAQQDgJAIAMgByAJIApqakEGaiIMSQ0AIAUtAAohCCAFQdgAaiACQQZqIgIgChAGIgsQAw0BIAVBQGsgAiAKaiICIAkQBiILEAMNASAFQShqIAIgCWoiAiAHEAYiCxADDQEgBUEQaiACIAdqIAMgDGsQBiILEAMNASAAIAFqIg9BfWohECAEQQRqIQZBASELIAAgAUEDakECdiIDaiIMIANqIgIgA2oiDiEDIAIhBCAMIQcDQCALIAMgEElxBEAgACAGIAVB2ABqIAgQAkECdGoiCS8BADsAACAFQdgAaiAJLQACEAEgCS0AAyELIAcgBiAFQUBrIAgQAkECdGoiCS8BADsAACAFQUBrIAktAAIQASAJLQADIQogBCAGIAVBKGogCBACQQJ0aiIJLwEAOwAAIAVBKGogCS0AAhABIAktAAMhCSADIAYgBUEQaiAIEAJBAnRqIg0vAQA7AAAgBUEQaiANLQACEAEgDS0AAyENIAAgC2oiCyAGIAVB2ABqIAgQAkECdGoiAC8BADsAACAFQdgAaiAALQACEAEgAC0AAyEAIAcgCmoiCiAGIAVBQGsgCBACQQJ0aiIHLwEAOwAAIAVBQGsgBy0AAhABIActAAMhByAEIAlqIgkgBiAFQShqIAgQAkECdGoiBC8BADsAACAFQShqIAQtAAIQASAELQADIQQgAyANaiIDIAYgBUEQaiAIEAJBAnRqIg0vAQA7AAAgBUEQaiANLQACEAEgACALaiEAIAcgCmohByAEIAlqIQQgAyANLQADaiEDIAVB2ABqEA0gBUFAaxANciAFQShqEA1yIAVBEGoQDXJFIQsMAQsLIAQgDksgByACS3INAEFsIQsgACAMSw0BIAxBfWohCQNAQQAgACAJSSAFQdgAahAEGwRAIAAgBiAFQdgAaiAIEAJBAnRqIgovAQA7AAAgBUHYAGogCi0AAhABIAAgCi0AA2oiACAGIAVB2ABqIAgQAkECdGoiCi8BADsAACAFQdgAaiAKLQACEAEgACAKLQADaiEADAEFIAxBfmohCgNAIAVB2ABqEAQgACAKS3JFBEAgACAGIAVB2ABqIAgQAkECdGoiCS8BADsAACAFQdgAaiAJLQACEAEgACAJLQADaiEADAELCwNAIAAgCk0EQCAAIAYgBUHYAGogCBACQQJ0aiIJLwEAOwAAIAVB2ABqIAktAAIQASAAIAktAANqIQAMAQsLAkAgACAMTw0AIAAgBiAFQdgAaiAIEAIiAEECdGoiDC0AADoAACAMLQADQQFGBEAgBUHYAGogDC0AAhABDAELIAUoAlxBH0sNACAFQdgAaiAGIABBAnRqLQACEAEgBSgCXEEhSQ0AIAVBIDYCXAsgAkF9aiEMA0BBACAHIAxJIAVBQGsQBBsEQCAHIAYgBUFAayAIEAJBAnRqIgAvAQA7AAAgBUFAayAALQACEAEgByAALQADaiIAIAYgBUFAayAIEAJBAnRqIgcvAQA7AAAgBUFAayAHLQACEAEgACAHLQADaiEHDAEFIAJBfmohDANAIAVBQGsQBCAHIAxLckUEQCAHIAYgBUFAayAIEAJBAnRqIgAvAQA7AAAgBUFAayAALQACEAEgByAALQADaiEHDAELCwNAIAcgDE0EQCAHIAYgBUFAayAIEAJBAnRqIgAvAQA7AAAgBUFAayAALQACEAEgByAALQADaiEHDAELCwJAIAcgAk8NACAHIAYgBUFAayAIEAIiAEECdGoiAi0AADoAACACLQADQQFGBEAgBUFAayACLQACEAEMAQsgBSgCREEfSw0AIAVBQGsgBiAAQQJ0ai0AAhABIAUoAkRBIUkNACAFQSA2AkQLIA5BfWohAgNAQQAgBCACSSAFQShqEAQbBEAgBCAGIAVBKGogCBACQQJ0aiIALwEAOwAAIAVBKGogAC0AAhABIAQgAC0AA2oiACAGIAVBKGogCBACQQJ0aiIELwEAOwAAIAVBKGogBC0AAhABIAAgBC0AA2ohBAwBBSAOQX5qIQIDQCAFQShqEAQgBCACS3JFBEAgBCAGIAVBKGogCBACQQJ0aiIALwEAOwAAIAVBKGogAC0AAhABIAQgAC0AA2ohBAwBCwsDQCAEIAJNBEAgBCAGIAVBKGogCBACQQJ0aiIALwEAOwAAIAVBKGogAC0AAhABIAQgAC0AA2ohBAwBCwsCQCAEIA5PDQAgBCAGIAVBKGogCBACIgBBAnRqIgItAAA6AAAgAi0AA0EBRgRAIAVBKGogAi0AAhABDAELIAUoAixBH0sNACAFQShqIAYgAEECdGotAAIQASAFKAIsQSFJDQAgBUEgNgIsCwNAQQAgAyAQSSAFQRBqEAQbBEAgAyAGIAVBEGogCBACQQJ0aiIALwEAOwAAIAVBEGogAC0AAhABIAMgAC0AA2oiACAGIAVBEGogCBACQQJ0aiICLwEAOwAAIAVBEGogAi0AAhABIAAgAi0AA2ohAwwBBSAPQX5qIQIDQCAFQRBqEAQgAyACS3JFBEAgAyAGIAVBEGogCBACQQJ0aiIALwEAOwAAIAVBEGogAC0AAhABIAMgAC0AA2ohAwwBCwsDQCADIAJNBEAgAyAGIAVBEGogCBACQQJ0aiIALwEAOwAAIAVBEGogAC0AAhABIAMgAC0AA2ohAwwBCwsCQCADIA9PDQAgAyAGIAVBEGogCBACIgBBAnRqIgItAAA6AAAgAi0AA0EBRgRAIAVBEGogAi0AAhABDAELIAUoAhRBH0sNACAFQRBqIAYgAEECdGotAAIQASAFKAIUQSFJDQAgBUEgNgIUCyABQWwgBUHYAGoQCiAFQUBrEApxIAVBKGoQCnEgBUEQahAKcRshCwwJCwAACwALAAALAAsAAAsACwAACwALQWwhCwsgBUHwAGokACALC7UEAQ5/IwBBEGsiBiQAIAZBBGogABAOQVQhBQJAIARB3AtJDQAgBi0ABCEHIANB8ARqQQBB7AAQECEIIAdBDEsNACADQdwJaiIJIAggBkEIaiAGQQxqIAEgAhAxIhAQA0UEQCAGKAIMIgQgB0sNASADQdwFaiEPIANBpAVqIREgAEEEaiESIANBqAVqIQEgBCEFA0AgBSICQX9qIQUgCCACQQJ0aigCAEUNAAsgAkEBaiEOQQEhBQNAIAUgDk9FBEAgCCAFQQJ0IgtqKAIAIQwgASALaiAKNgIAIAVBAWohBSAKIAxqIQoMAQsLIAEgCjYCAEEAIQUgBigCCCELA0AgBSALRkUEQCABIAUgCWotAAAiDEECdGoiDSANKAIAIg1BAWo2AgAgDyANQQF0aiINIAw6AAEgDSAFOgAAIAVBAWohBQwBCwtBACEBIANBADYCqAUgBEF/cyAHaiEJQQEhBQNAIAUgDk9FBEAgCCAFQQJ0IgtqKAIAIQwgAyALaiABNgIAIAwgBSAJanQgAWohASAFQQFqIQUMAQsLIAcgBEEBaiIBIAJrIgRrQQFqIQgDQEEBIQUgBCAIT0UEQANAIAUgDk9FBEAgBUECdCIJIAMgBEE0bGpqIAMgCWooAgAgBHY2AgAgBUEBaiEFDAELCyAEQQFqIQQMAQsLIBIgByAPIAogESADIAIgARBkIAZBAToABSAGIAc6AAYgACAGKAIENgIACyAQIQULIAZBEGokACAFC8ENAQt/IwBB8ABrIgUkAEFsIQkCQCADQQpJDQAgAi8AACEKIAIvAAIhDCACLwAEIQYgBUEIaiAEEA4CQCADIAYgCiAMampBBmoiDUkNACAFLQAKIQcgBUHYAGogAkEGaiICIAoQBiIJEAMNASAFQUBrIAIgCmoiAiAMEAYiCRADDQEgBUEoaiACIAxqIgIgBhAGIgkQAw0BIAVBEGogAiAGaiADIA1rEAYiCRADDQEgACABaiIOQX1qIQ8gBEEEaiEGQQEhCSAAIAFBA2pBAnYiAmoiCiACaiIMIAJqIg0hAyAMIQQgCiECA0AgCSADIA9JcQRAIAYgBUHYAGogBxACQQF0aiIILQAAIQsgBUHYAGogCC0AARABIAAgCzoAACAGIAVBQGsgBxACQQF0aiIILQAAIQsgBUFAayAILQABEAEgAiALOgAAIAYgBUEoaiAHEAJBAXRqIggtAAAhCyAFQShqIAgtAAEQASAEIAs6AAAgBiAFQRBqIAcQAkEBdGoiCC0AACELIAVBEGogCC0AARABIAMgCzoAACAGIAVB2ABqIAcQAkEBdGoiCC0AACELIAVB2ABqIAgtAAEQASAAIAs6AAEgBiAFQUBrIAcQAkEBdGoiCC0AACELIAVBQGsgCC0AARABIAIgCzoAASAGIAVBKGogBxACQQF0aiIILQAAIQsgBUEoaiAILQABEAEgBCALOgABIAYgBUEQaiAHEAJBAXRqIggtAAAhCyAFQRBqIAgtAAEQASADIAs6AAEgA0ECaiEDIARBAmohBCACQQJqIQIgAEECaiEAIAkgBUHYAGoQDUVxIAVBQGsQDUVxIAVBKGoQDUVxIAVBEGoQDUVxIQkMAQsLIAQgDUsgAiAMS3INAEFsIQkgACAKSw0BIApBfWohCQNAIAVB2ABqEAQgACAJT3JFBEAgBiAFQdgAaiAHEAJBAXRqIggtAAAhCyAFQdgAaiAILQABEAEgACALOgAAIAYgBUHYAGogBxACQQF0aiIILQAAIQsgBUHYAGogCC0AARABIAAgCzoAASAAQQJqIQAMAQsLA0AgBUHYAGoQBCAAIApPckUEQCAGIAVB2ABqIAcQAkEBdGoiCS0AACEIIAVB2ABqIAktAAEQASAAIAg6AAAgAEEBaiEADAELCwNAIAAgCkkEQCAGIAVB2ABqIAcQAkEBdGoiCS0AACEIIAVB2ABqIAktAAEQASAAIAg6AAAgAEEBaiEADAELCyAMQX1qIQADQCAFQUBrEAQgAiAAT3JFBEAgBiAFQUBrIAcQAkEBdGoiCi0AACEJIAVBQGsgCi0AARABIAIgCToAACAGIAVBQGsgBxACQQF0aiIKLQAAIQkgBUFAayAKLQABEAEgAiAJOgABIAJBAmohAgwBCwsDQCAFQUBrEAQgAiAMT3JFBEAgBiAFQUBrIAcQAkEBdGoiAC0AACEKIAVBQGsgAC0AARABIAIgCjoAACACQQFqIQIMAQsLA0AgAiAMSQRAIAYgBUFAayAHEAJBAXRqIgAtAAAhCiAFQUBrIAAtAAEQASACIAo6AAAgAkEBaiECDAELCyANQX1qIQADQCAFQShqEAQgBCAAT3JFBEAgBiAFQShqIAcQAkEBdGoiAi0AACEKIAVBKGogAi0AARABIAQgCjoAACAGIAVBKGogBxACQQF0aiICLQAAIQogBUEoaiACLQABEAEgBCAKOgABIARBAmohBAwBCwsDQCAFQShqEAQgBCANT3JFBEAgBiAFQShqIAcQAkEBdGoiAC0AACECIAVBKGogAC0AARABIAQgAjoAACAEQQFqIQQMAQsLA0AgBCANSQRAIAYgBUEoaiAHEAJBAXRqIgAtAAAhAiAFQShqIAAtAAEQASAEIAI6AAAgBEEBaiEEDAELCwNAIAVBEGoQBCADIA9PckUEQCAGIAVBEGogBxACQQF0aiIALQAAIQIgBUEQaiAALQABEAEgAyACOgAAIAYgBUEQaiAHEAJBAXRqIgAtAAAhAiAFQRBqIAAtAAEQASADIAI6AAEgA0ECaiEDDAELCwNAIAVBEGoQBCADIA5PckUEQCAGIAVBEGogBxACQQF0aiIALQAAIQIgBUEQaiAALQABEAEgAyACOgAAIANBAWohAwwBCwsDQCADIA5JBEAgBiAFQRBqIAcQAkEBdGoiAC0AACECIAVBEGogAC0AARABIAMgAjoAACADQQFqIQMMAQsLIAFBbCAFQdgAahAKIAVBQGsQCnEgBUEoahAKcSAFQRBqEApxGyEJDAELQWwhCQsgBUHwAGokACAJC8oCAQR/IwBBIGsiBSQAIAUgBBAOIAUtAAIhByAFQQhqIAIgAxAGIgIQA0UEQCAEQQRqIQIgACABaiIDQX1qIQQDQCAFQQhqEAQgACAET3JFBEAgAiAFQQhqIAcQAkEBdGoiBi0AACEIIAVBCGogBi0AARABIAAgCDoAACACIAVBCGogBxACQQF0aiIGLQAAIQggBUEIaiAGLQABEAEgACAIOgABIABBAmohAAwBCwsDQCAFQQhqEAQgACADT3JFBEAgAiAFQQhqIAcQAkEBdGoiBC0AACEGIAVBCGogBC0AARABIAAgBjoAACAAQQFqIQAMAQsLA0AgACADT0UEQCACIAVBCGogBxACQQF0aiIELQAAIQYgBUEIaiAELQABEAEgACAGOgAAIABBAWohAAwBCwsgAUFsIAVBCGoQChshAgsgBUEgaiQAIAILtgMBCX8jAEEQayIGJAAgBkEANgIMIAZBADYCCEFUIQQCQAJAIANBQGsiDCADIAZBCGogBkEMaiABIAIQMSICEAMNACAGQQRqIAAQDiAGKAIMIgcgBi0ABEEBaksNASAAQQRqIQogBkEAOgAFIAYgBzoABiAAIAYoAgQ2AgAgB0EBaiEJQQEhBANAIAQgCUkEQCADIARBAnRqIgEoAgAhACABIAU2AgAgACAEQX9qdCAFaiEFIARBAWohBAwBCwsgB0EBaiEHQQAhBSAGKAIIIQkDQCAFIAlGDQEgAyAFIAxqLQAAIgRBAnRqIgBBASAEdEEBdSILIAAoAgAiAWoiADYCACAHIARrIQhBACEEAkAgC0EDTQRAA0AgBCALRg0CIAogASAEakEBdGoiACAIOgABIAAgBToAACAEQQFqIQQMAAALAAsDQCABIABPDQEgCiABQQF0aiIEIAg6AAEgBCAFOgAAIAQgCDoAAyAEIAU6AAIgBCAIOgAFIAQgBToABCAEIAg6AAcgBCAFOgAGIAFBBGohAQwAAAsACyAFQQFqIQUMAAALAAsgAiEECyAGQRBqJAAgBAutAQECfwJAQYQgKAIAIABHIAAoAgBBAXYiAyABa0F4aiICQXhxQQhHcgR/IAIFIAMQJ0UNASACQQhqC0EQSQ0AIAAgACgCACICQQFxIAAgAWpBD2pBeHEiASAAa0EBdHI2AgAgASAANgIEIAEgASgCAEEBcSAAIAJBAXZqIAFrIgJBAXRyNgIAQYQgIAEgAkH/////B3FqQQRqQYQgKAIAIABGGyABNgIAIAEQJQsLygIBBX8CQAJAAkAgAEEIIABBCEsbZ0EfcyAAaUEBR2oiAUEESSAAIAF2cg0AIAFBAnRB/B5qKAIAIgJFDQADQCACQXhqIgMoAgBBAXZBeGoiBSAATwRAIAIgBUEIIAVBCEsbZ0Efc0ECdEGAH2oiASgCAEYEQCABIAIoAgQ2AgALDAMLIARBHksNASAEQQFqIQQgAigCBCICDQALC0EAIQMgAUEgTw0BA0AgAUECdEGAH2ooAgAiAkUEQCABQR5LIQIgAUEBaiEBIAJFDQEMAwsLIAIgAkF4aiIDKAIAQQF2QXhqIgFBCCABQQhLG2dBH3NBAnRBgB9qIgEoAgBGBEAgASACKAIENgIACwsgAigCACIBBEAgASACKAIENgIECyACKAIEIgEEQCABIAIoAgA2AgALIAMgAygCAEEBcjYCACADIAAQNwsgAwvhCwINfwV+IwBB8ABrIgckACAHIAAoAvDhASIINgJcIAEgAmohDSAIIAAoAoDiAWohDwJAAkAgBUUEQCABIQQMAQsgACgCxOABIRAgACgCwOABIREgACgCvOABIQ4gAEEBNgKM4QFBACEIA0AgCEEDRwRAIAcgCEECdCICaiAAIAJqQazQAWooAgA2AkQgCEEBaiEIDAELC0FsIQwgB0EYaiADIAQQBhADDQEgB0EsaiAHQRhqIAAoAgAQEyAHQTRqIAdBGGogACgCCBATIAdBPGogB0EYaiAAKAIEEBMgDUFgaiESIAEhBEEAIQwDQCAHKAIwIAcoAixBA3RqKQIAIhRCEIinQf8BcSEIIAcoAkAgBygCPEEDdGopAgAiFUIQiKdB/wFxIQsgBygCOCAHKAI0QQN0aikCACIWQiCIpyEJIBVCIIghFyAUQiCIpyECAkAgFkIQiKdB/wFxIgNBAk8EQAJAIAZFIANBGUlyRQRAIAkgB0EYaiADQSAgBygCHGsiCiAKIANLGyIKEAUgAyAKayIDdGohCSAHQRhqEAQaIANFDQEgB0EYaiADEAUgCWohCQwBCyAHQRhqIAMQBSAJaiEJIAdBGGoQBBoLIAcpAkQhGCAHIAk2AkQgByAYNwNIDAELAkAgA0UEQCACBEAgBygCRCEJDAMLIAcoAkghCQwBCwJAAkAgB0EYakEBEAUgCSACRWpqIgNBA0YEQCAHKAJEQX9qIgMgA0VqIQkMAQsgA0ECdCAHaigCRCIJIAlFaiEJIANBAUYNAQsgByAHKAJINgJMCwsgByAHKAJENgJIIAcgCTYCRAsgF6chAyALBEAgB0EYaiALEAUgA2ohAwsgCCALakEUTwRAIAdBGGoQBBoLIAgEQCAHQRhqIAgQBSACaiECCyAHQRhqEAQaIAcgB0EYaiAUQhiIp0H/AXEQCCAUp0H//wNxajYCLCAHIAdBGGogFUIYiKdB/wFxEAggFadB//8DcWo2AjwgB0EYahAEGiAHIAdBGGogFkIYiKdB/wFxEAggFqdB//8DcWo2AjQgByACNgJgIAcoAlwhCiAHIAk2AmggByADNgJkAkACQAJAIAQgAiADaiILaiASSw0AIAIgCmoiEyAPSw0AIA0gBGsgC0Egak8NAQsgByAHKQNoNwMQIAcgBykDYDcDCCAEIA0gB0EIaiAHQdwAaiAPIA4gESAQEB4hCwwBCyACIARqIQggBCAKEAcgAkERTwRAIARBEGohAgNAIAIgCkEQaiIKEAcgAkEQaiICIAhJDQALCyAIIAlrIQIgByATNgJcIAkgCCAOa0sEQCAJIAggEWtLBEBBbCELDAILIBAgAiAOayICaiIKIANqIBBNBEAgCCAKIAMQDxoMAgsgCCAKQQAgAmsQDyEIIAcgAiADaiIDNgJkIAggAmshCCAOIQILIAlBEE8EQCADIAhqIQMDQCAIIAIQByACQRBqIQIgCEEQaiIIIANJDQALDAELAkAgCUEHTQRAIAggAi0AADoAACAIIAItAAE6AAEgCCACLQACOgACIAggAi0AAzoAAyAIQQRqIAIgCUECdCIDQcAeaigCAGoiAhAXIAIgA0HgHmooAgBrIQIgBygCZCEDDAELIAggAhAMCyADQQlJDQAgAyAIaiEDIAhBCGoiCCACQQhqIgJrQQ9MBEADQCAIIAIQDCACQQhqIQIgCEEIaiIIIANJDQAMAgALAAsDQCAIIAIQByACQRBqIQIgCEEQaiIIIANJDQALCyAHQRhqEAQaIAsgDCALEAMiAhshDCAEIAQgC2ogAhshBCAFQX9qIgUNAAsgDBADDQFBbCEMIAdBGGoQBEECSQ0BQQAhCANAIAhBA0cEQCAAIAhBAnQiAmpBrNABaiACIAdqKAJENgIAIAhBAWohCAwBCwsgBygCXCEIC0G6fyEMIA8gCGsiACANIARrSw0AIAQEfyAEIAggABALIABqBUEACyABayEMCyAHQfAAaiQAIAwLkRcCFn8FfiMAQdABayIHJAAgByAAKALw4QEiCDYCvAEgASACaiESIAggACgCgOIBaiETAkACQCAFRQRAIAEhAwwBCyAAKALE4AEhESAAKALA4AEhFSAAKAK84AEhDyAAQQE2AozhAUEAIQgDQCAIQQNHBEAgByAIQQJ0IgJqIAAgAmpBrNABaigCADYCVCAIQQFqIQgMAQsLIAcgETYCZCAHIA82AmAgByABIA9rNgJoQWwhECAHQShqIAMgBBAGEAMNASAFQQQgBUEESBshFyAHQTxqIAdBKGogACgCABATIAdBxABqIAdBKGogACgCCBATIAdBzABqIAdBKGogACgCBBATQQAhBCAHQeAAaiEMIAdB5ABqIQoDQCAHQShqEARBAksgBCAXTnJFBEAgBygCQCAHKAI8QQN0aikCACIdQhCIp0H/AXEhCyAHKAJQIAcoAkxBA3RqKQIAIh5CEIinQf8BcSEJIAcoAkggBygCREEDdGopAgAiH0IgiKchCCAeQiCIISAgHUIgiKchAgJAIB9CEIinQf8BcSIDQQJPBEACQCAGRSADQRlJckUEQCAIIAdBKGogA0EgIAcoAixrIg0gDSADSxsiDRAFIAMgDWsiA3RqIQggB0EoahAEGiADRQ0BIAdBKGogAxAFIAhqIQgMAQsgB0EoaiADEAUgCGohCCAHQShqEAQaCyAHKQJUISEgByAINgJUIAcgITcDWAwBCwJAIANFBEAgAgRAIAcoAlQhCAwDCyAHKAJYIQgMAQsCQAJAIAdBKGpBARAFIAggAkVqaiIDQQNGBEAgBygCVEF/aiIDIANFaiEIDAELIANBAnQgB2ooAlQiCCAIRWohCCADQQFGDQELIAcgBygCWDYCXAsLIAcgBygCVDYCWCAHIAg2AlQLICCnIQMgCQRAIAdBKGogCRAFIANqIQMLIAkgC2pBFE8EQCAHQShqEAQaCyALBEAgB0EoaiALEAUgAmohAgsgB0EoahAEGiAHIAcoAmggAmoiCSADajYCaCAKIAwgCCAJSxsoAgAhDSAHIAdBKGogHUIYiKdB/wFxEAggHadB//8DcWo2AjwgByAHQShqIB5CGIinQf8BcRAIIB6nQf//A3FqNgJMIAdBKGoQBBogB0EoaiAfQhiIp0H/AXEQCCEOIAdB8ABqIARBBHRqIgsgCSANaiAIazYCDCALIAg2AgggCyADNgIEIAsgAjYCACAHIA4gH6dB//8DcWo2AkQgBEEBaiEEDAELCyAEIBdIDQEgEkFgaiEYIAdB4ABqIRogB0HkAGohGyABIQMDQCAHQShqEARBAksgBCAFTnJFBEAgBygCQCAHKAI8QQN0aikCACIdQhCIp0H/AXEhCyAHKAJQIAcoAkxBA3RqKQIAIh5CEIinQf8BcSEIIAcoAkggBygCREEDdGopAgAiH0IgiKchCSAeQiCIISAgHUIgiKchDAJAIB9CEIinQf8BcSICQQJPBEACQCAGRSACQRlJckUEQCAJIAdBKGogAkEgIAcoAixrIgogCiACSxsiChAFIAIgCmsiAnRqIQkgB0EoahAEGiACRQ0BIAdBKGogAhAFIAlqIQkMAQsgB0EoaiACEAUgCWohCSAHQShqEAQaCyAHKQJUISEgByAJNgJUIAcgITcDWAwBCwJAIAJFBEAgDARAIAcoAlQhCQwDCyAHKAJYIQkMAQsCQAJAIAdBKGpBARAFIAkgDEVqaiICQQNGBEAgBygCVEF/aiICIAJFaiEJDAELIAJBAnQgB2ooAlQiCSAJRWohCSACQQFGDQELIAcgBygCWDYCXAsLIAcgBygCVDYCWCAHIAk2AlQLICCnIRQgCARAIAdBKGogCBAFIBRqIRQLIAggC2pBFE8EQCAHQShqEAQaCyALBEAgB0EoaiALEAUgDGohDAsgB0EoahAEGiAHIAcoAmggDGoiGSAUajYCaCAbIBogCSAZSxsoAgAhHCAHIAdBKGogHUIYiKdB/wFxEAggHadB//8DcWo2AjwgByAHQShqIB5CGIinQf8BcRAIIB6nQf//A3FqNgJMIAdBKGoQBBogByAHQShqIB9CGIinQf8BcRAIIB+nQf//A3FqNgJEIAcgB0HwAGogBEEDcUEEdGoiDSkDCCIdNwPIASAHIA0pAwAiHjcDwAECQAJAAkAgBygCvAEiDiAepyICaiIWIBNLDQAgAyAHKALEASIKIAJqIgtqIBhLDQAgEiADayALQSBqTw0BCyAHIAcpA8gBNwMQIAcgBykDwAE3AwggAyASIAdBCGogB0G8AWogEyAPIBUgERAeIQsMAQsgAiADaiEIIAMgDhAHIAJBEU8EQCADQRBqIQIDQCACIA5BEGoiDhAHIAJBEGoiAiAISQ0ACwsgCCAdpyIOayECIAcgFjYCvAEgDiAIIA9rSwRAIA4gCCAVa0sEQEFsIQsMAgsgESACIA9rIgJqIhYgCmogEU0EQCAIIBYgChAPGgwCCyAIIBZBACACaxAPIQggByACIApqIgo2AsQBIAggAmshCCAPIQILIA5BEE8EQCAIIApqIQoDQCAIIAIQByACQRBqIQIgCEEQaiIIIApJDQALDAELAkAgDkEHTQRAIAggAi0AADoAACAIIAItAAE6AAEgCCACLQACOgACIAggAi0AAzoAAyAIQQRqIAIgDkECdCIKQcAeaigCAGoiAhAXIAIgCkHgHmooAgBrIQIgBygCxAEhCgwBCyAIIAIQDAsgCkEJSQ0AIAggCmohCiAIQQhqIgggAkEIaiICa0EPTARAA0AgCCACEAwgAkEIaiECIAhBCGoiCCAKSQ0ADAIACwALA0AgCCACEAcgAkEQaiECIAhBEGoiCCAKSQ0ACwsgCxADBEAgCyEQDAQFIA0gDDYCACANIBkgHGogCWs2AgwgDSAJNgIIIA0gFDYCBCAEQQFqIQQgAyALaiEDDAILAAsLIAQgBUgNASAEIBdrIQtBACEEA0AgCyAFSARAIAcgB0HwAGogC0EDcUEEdGoiAikDCCIdNwPIASAHIAIpAwAiHjcDwAECQAJAAkAgBygCvAEiDCAepyICaiIKIBNLDQAgAyAHKALEASIJIAJqIhBqIBhLDQAgEiADayAQQSBqTw0BCyAHIAcpA8gBNwMgIAcgBykDwAE3AxggAyASIAdBGGogB0G8AWogEyAPIBUgERAeIRAMAQsgAiADaiEIIAMgDBAHIAJBEU8EQCADQRBqIQIDQCACIAxBEGoiDBAHIAJBEGoiAiAISQ0ACwsgCCAdpyIGayECIAcgCjYCvAEgBiAIIA9rSwRAIAYgCCAVa0sEQEFsIRAMAgsgESACIA9rIgJqIgwgCWogEU0EQCAIIAwgCRAPGgwCCyAIIAxBACACaxAPIQggByACIAlqIgk2AsQBIAggAmshCCAPIQILIAZBEE8EQCAIIAlqIQYDQCAIIAIQByACQRBqIQIgCEEQaiIIIAZJDQALDAELAkAgBkEHTQRAIAggAi0AADoAACAIIAItAAE6AAEgCCACLQACOgACIAggAi0AAzoAAyAIQQRqIAIgBkECdCIGQcAeaigCAGoiAhAXIAIgBkHgHmooAgBrIQIgBygCxAEhCQwBCyAIIAIQDAsgCUEJSQ0AIAggCWohBiAIQQhqIgggAkEIaiICa0EPTARAA0AgCCACEAwgAkEIaiECIAhBCGoiCCAGSQ0ADAIACwALA0AgCCACEAcgAkEQaiECIAhBEGoiCCAGSQ0ACwsgEBADDQMgC0EBaiELIAMgEGohAwwBCwsDQCAEQQNHBEAgACAEQQJ0IgJqQazQAWogAiAHaigCVDYCACAEQQFqIQQMAQsLIAcoArwBIQgLQbp/IRAgEyAIayIAIBIgA2tLDQAgAwR/IAMgCCAAEAsgAGoFQQALIAFrIRALIAdB0AFqJAAgEAslACAAQgA3AgAgAEEAOwEIIABBADoACyAAIAE2AgwgACACOgAKC7QFAQN/IwBBMGsiBCQAIABB/wFqIgVBfWohBgJAIAMvAQIEQCAEQRhqIAEgAhAGIgIQAw0BIARBEGogBEEYaiADEBwgBEEIaiAEQRhqIAMQHCAAIQMDQAJAIARBGGoQBCADIAZPckUEQCADIARBEGogBEEYahASOgAAIAMgBEEIaiAEQRhqEBI6AAEgBEEYahAERQ0BIANBAmohAwsgBUF+aiEFAn8DQEG6fyECIAMiASAFSw0FIAEgBEEQaiAEQRhqEBI6AAAgAUEBaiEDIARBGGoQBEEDRgRAQQIhAiAEQQhqDAILIAMgBUsNBSABIARBCGogBEEYahASOgABIAFBAmohA0EDIQIgBEEYahAEQQNHDQALIARBEGoLIQUgAyAFIARBGGoQEjoAACABIAJqIABrIQIMAwsgAyAEQRBqIARBGGoQEjoAAiADIARBCGogBEEYahASOgADIANBBGohAwwAAAsACyAEQRhqIAEgAhAGIgIQAw0AIARBEGogBEEYaiADEBwgBEEIaiAEQRhqIAMQHCAAIQMDQAJAIARBGGoQBCADIAZPckUEQCADIARBEGogBEEYahAROgAAIAMgBEEIaiAEQRhqEBE6AAEgBEEYahAERQ0BIANBAmohAwsgBUF+aiEFAn8DQEG6fyECIAMiASAFSw0EIAEgBEEQaiAEQRhqEBE6AAAgAUEBaiEDIARBGGoQBEEDRgRAQQIhAiAEQQhqDAILIAMgBUsNBCABIARBCGogBEEYahAROgABIAFBAmohA0EDIQIgBEEYahAEQQNHDQALIARBEGoLIQUgAyAFIARBGGoQEToAACABIAJqIABrIQIMAgsgAyAEQRBqIARBGGoQEToAAiADIARBCGogBEEYahAROgADIANBBGohAwwAAAsACyAEQTBqJAAgAgtpAQF/An8CQAJAIAJBB00NACABKAAAQbfIwuF+Rw0AIAAgASgABDYCmOIBQWIgAEEQaiABIAIQPiIDEAMNAhogAEKBgICAEDcDiOEBIAAgASADaiACIANrECoMAQsgACABIAIQKgtBAAsLrQMBBn8jAEGAAWsiAyQAQWIhCAJAIAJBCUkNACAAQZjQAGogAUEIaiIEIAJBeGogAEGY0AAQMyIFEAMiBg0AIANBHzYCfCADIANB/ABqIANB+ABqIAQgBCAFaiAGGyIEIAEgAmoiAiAEaxAVIgUQAw0AIAMoAnwiBkEfSw0AIAMoAngiB0EJTw0AIABBiCBqIAMgBkGAC0GADCAHEBggA0E0NgJ8IAMgA0H8AGogA0H4AGogBCAFaiIEIAIgBGsQFSIFEAMNACADKAJ8IgZBNEsNACADKAJ4IgdBCk8NACAAQZAwaiADIAZBgA1B4A4gBxAYIANBIzYCfCADIANB/ABqIANB+ABqIAQgBWoiBCACIARrEBUiBRADDQAgAygCfCIGQSNLDQAgAygCeCIHQQpPDQAgACADIAZBwBBB0BEgBxAYIAQgBWoiBEEMaiIFIAJLDQAgAiAFayEFQQAhAgNAIAJBA0cEQCAEKAAAIgZBf2ogBU8NAiAAIAJBAnRqQZzQAWogBjYCACACQQFqIQIgBEEEaiEEDAELCyAEIAFrIQgLIANBgAFqJAAgCAtGAQN/IABBCGohAyAAKAIEIQJBACEAA0AgACACdkUEQCABIAMgAEEDdGotAAJBFktqIQEgAEEBaiEADAELCyABQQggAmt0C4YDAQV/Qbh/IQcCQCADRQ0AIAItAAAiBEUEQCABQQA2AgBBAUG4fyADQQFGGw8LAn8gAkEBaiIFIARBGHRBGHUiBkF/Sg0AGiAGQX9GBEAgA0EDSA0CIAUvAABBgP4BaiEEIAJBA2oMAQsgA0ECSA0BIAItAAEgBEEIdHJBgIB+aiEEIAJBAmoLIQUgASAENgIAIAVBAWoiASACIANqIgNLDQBBbCEHIABBEGogACAFLQAAIgVBBnZBI0EJIAEgAyABa0HAEEHQEUHwEiAAKAKM4QEgACgCnOIBIAQQHyIGEAMiCA0AIABBmCBqIABBCGogBUEEdkEDcUEfQQggASABIAZqIAgbIgEgAyABa0GAC0GADEGAFyAAKAKM4QEgACgCnOIBIAQQHyIGEAMiCA0AIABBoDBqIABBBGogBUECdkEDcUE0QQkgASABIAZqIAgbIgEgAyABa0GADUHgDkGQGSAAKAKM4QEgACgCnOIBIAQQHyIAEAMNACAAIAFqIAJrIQcLIAcLrQMBCn8jAEGABGsiCCQAAn9BUiACQf8BSw0AGkFUIANBDEsNABogAkEBaiELIABBBGohCUGAgAQgA0F/anRBEHUhCkEAIQJBASEEQQEgA3QiB0F/aiIMIQUDQCACIAtGRQRAAkAgASACQQF0Ig1qLwEAIgZB//8DRgRAIAkgBUECdGogAjoAAiAFQX9qIQVBASEGDAELIARBACAKIAZBEHRBEHVKGyEECyAIIA1qIAY7AQAgAkEBaiECDAELCyAAIAQ7AQIgACADOwEAIAdBA3YgB0EBdmpBA2ohBkEAIQRBACECA0AgBCALRkUEQCABIARBAXRqLgEAIQpBACEAA0AgACAKTkUEQCAJIAJBAnRqIAQ6AAIDQCACIAZqIAxxIgIgBUsNAAsgAEEBaiEADAELCyAEQQFqIQQMAQsLQX8gAg0AGkEAIQIDfyACIAdGBH9BAAUgCCAJIAJBAnRqIgAtAAJBAXRqIgEgAS8BACIBQQFqOwEAIAAgAyABEBRrIgU6AAMgACABIAVB/wFxdCAHazsBACACQQFqIQIMAQsLCyEFIAhBgARqJAAgBQvjBgEIf0FsIQcCQCACQQNJDQACQAJAAkACQCABLQAAIgNBA3EiCUEBaw4DAwEAAgsgACgCiOEBDQBBYg8LIAJBBUkNAkEDIQYgASgAACEFAn8CQAJAIANBAnZBA3EiCEF+aiIEQQFNBEAgBEEBaw0BDAILIAVBDnZB/wdxIQQgBUEEdkH/B3EhAyAIRQwCCyAFQRJ2IQRBBCEGIAVBBHZB//8AcSEDQQAMAQsgBUEEdkH//w9xIgNBgIAISw0DIAEtAARBCnQgBUEWdnIhBEEFIQZBAAshBSAEIAZqIgogAksNAgJAIANBgQZJDQAgACgCnOIBRQ0AQQAhAgNAIAJBg4ABSw0BIAJBQGshAgwAAAsACwJ/IAlBA0YEQCABIAZqIQEgAEHw4gFqIQIgACgCDCEGIAUEQCACIAMgASAEIAYQXwwCCyACIAMgASAEIAYQXQwBCyAAQbjQAWohAiABIAZqIQEgAEHw4gFqIQYgAEGo0ABqIQggBQRAIAggBiADIAEgBCACEF4MAQsgCCAGIAMgASAEIAIQXAsQAw0CIAAgAzYCgOIBIABBATYCiOEBIAAgAEHw4gFqNgLw4QEgCUECRgRAIAAgAEGo0ABqNgIMCyAAIANqIgBBiOMBakIANwAAIABBgOMBakIANwAAIABB+OIBakIANwAAIABB8OIBakIANwAAIAoPCwJ/AkACQAJAIANBAnZBA3FBf2oiBEECSw0AIARBAWsOAgACAQtBASEEIANBA3YMAgtBAiEEIAEvAABBBHYMAQtBAyEEIAEQIUEEdgsiAyAEaiIFQSBqIAJLBEAgBSACSw0CIABB8OIBaiABIARqIAMQCyEBIAAgAzYCgOIBIAAgATYC8OEBIAEgA2oiAEIANwAYIABCADcAECAAQgA3AAggAEIANwAAIAUPCyAAIAM2AoDiASAAIAEgBGo2AvDhASAFDwsCfwJAAkACQCADQQJ2QQNxQX9qIgRBAksNACAEQQFrDgIAAgELQQEhByADQQN2DAILQQIhByABLwAAQQR2DAELIAJBBEkgARAhIgJBj4CAAUtyDQFBAyEHIAJBBHYLIQIgAEHw4gFqIAEgB2otAAAgAkEgahAQIQEgACACNgKA4gEgACABNgLw4QEgB0EBaiEHCyAHC0sAIABC+erQ0OfJoeThADcDICAAQgA3AxggAELP1tO+0ser2UI3AxAgAELW64Lu6v2J9eAANwMIIABCADcDACAAQShqQQBBKBAQGgviAgICfwV+IABBKGoiASAAKAJIaiECAn4gACkDACIDQiBaBEAgACkDECIEQgeJIAApAwgiBUIBiXwgACkDGCIGQgyJfCAAKQMgIgdCEol8IAUQGSAEEBkgBhAZIAcQGQwBCyAAKQMYQsXP2bLx5brqJ3wLIAN8IQMDQCABQQhqIgAgAk0EQEIAIAEpAAAQCSADhUIbiUKHla+vmLbem55/fkLj3MqV/M7y9YV/fCEDIAAhAQwBCwsCQCABQQRqIgAgAksEQCABIQAMAQsgASgAAK1Ch5Wvr5i23puef34gA4VCF4lCz9bTvtLHq9lCfkL5893xmfaZqxZ8IQMLA0AgACACSQRAIAAxAABCxc/ZsvHluuonfiADhUILiUKHla+vmLbem55/fiEDIABBAWohAAwBCwsgA0IhiCADhULP1tO+0ser2UJ+IgNCHYggA4VC+fPd8Zn2masWfiIDQiCIIAOFC+8CAgJ/BH4gACAAKQMAIAKtfDcDAAJAAkAgACgCSCIDIAJqIgRBH00EQCABRQ0BIAAgA2pBKGogASACECAgACgCSCACaiEEDAELIAEgAmohAgJ/IAMEQCAAQShqIgQgA2ogAUEgIANrECAgACAAKQMIIAQpAAAQCTcDCCAAIAApAxAgACkAMBAJNwMQIAAgACkDGCAAKQA4EAk3AxggACAAKQMgIABBQGspAAAQCTcDICAAKAJIIQMgAEEANgJIIAEgA2tBIGohAQsgAUEgaiACTQsEQCACQWBqIQMgACkDICEFIAApAxghBiAAKQMQIQcgACkDCCEIA0AgCCABKQAAEAkhCCAHIAEpAAgQCSEHIAYgASkAEBAJIQYgBSABKQAYEAkhBSABQSBqIgEgA00NAAsgACAFNwMgIAAgBjcDGCAAIAc3AxAgACAINwMICyABIAJPDQEgAEEoaiABIAIgAWsiBBAgCyAAIAQ2AkgLCy8BAX8gAEUEQEG2f0EAIAMbDwtBun8hBCADIAFNBH8gACACIAMQEBogAwVBun8LCy8BAX8gAEUEQEG2f0EAIAMbDwtBun8hBCADIAFNBH8gACACIAMQCxogAwVBun8LC6gCAQZ/IwBBEGsiByQAIABB2OABaikDAEKAgIAQViEIQbh/IQUCQCAEQf//B0sNACAAIAMgBBBCIgUQAyIGDQAgACgCnOIBIQkgACAHQQxqIAMgAyAFaiAGGyIKIARBACAFIAYbayIGEEAiAxADBEAgAyEFDAELIAcoAgwhBCABRQRAQbp/IQUgBEEASg0BCyAGIANrIQUgAyAKaiEDAkAgCQRAIABBADYCnOIBDAELAkACQAJAIARBBUgNACAAQdjgAWopAwBCgICACFgNAAwBCyAAQQA2ApziAQwBCyAAKAIIED8hBiAAQQA2ApziASAGQRRPDQELIAAgASACIAMgBSAEIAgQOSEFDAELIAAgASACIAMgBSAEIAgQOiEFCyAHQRBqJAAgBQtnACAAQdDgAWogASACIAAoAuzhARAuIgEQAwRAIAEPC0G4fyECAkAgAQ0AIABB7OABaigCACIBBEBBYCECIAAoApjiASABRw0BC0EAIQIgAEHw4AFqKAIARQ0AIABBkOEBahBDCyACCycBAX8QVyIERQRAQUAPCyAEIAAgASACIAMgBBBLEE8hACAEEFYgAAs/AQF/AkACQAJAIAAoAqDiAUEBaiIBQQJLDQAgAUEBaw4CAAECCyAAEDBBAA8LIABBADYCoOIBCyAAKAKU4gELvAMCB38BfiMAQRBrIgkkAEG4fyEGAkAgBCgCACIIQQVBCSAAKALs4QEiBRtJDQAgAygCACIHQQFBBSAFGyAFEC8iBRADBEAgBSEGDAELIAggBUEDakkNACAAIAcgBRBJIgYQAw0AIAEgAmohCiAAQZDhAWohCyAIIAVrIQIgBSAHaiEHIAEhBQNAIAcgAiAJECwiBhADDQEgAkF9aiICIAZJBEBBuH8hBgwCCyAJKAIAIghBAksEQEFsIQYMAgsgB0EDaiEHAn8CQAJAAkAgCEEBaw4CAgABCyAAIAUgCiAFayAHIAYQSAwCCyAFIAogBWsgByAGEEcMAQsgBSAKIAVrIActAAAgCSgCCBBGCyIIEAMEQCAIIQYMAgsgACgC8OABBEAgCyAFIAgQRQsgAiAGayECIAYgB2ohByAFIAhqIQUgCSgCBEUNAAsgACkD0OABIgxCf1IEQEFsIQYgDCAFIAFrrFINAQsgACgC8OABBEBBaiEGIAJBBEkNASALEEQhDCAHKAAAIAynRw0BIAdBBGohByACQXxqIQILIAMgBzYCACAEIAI2AgAgBSABayEGCyAJQRBqJAAgBgsuACAAECsCf0EAQQAQAw0AGiABRSACRXJFBEBBYiAAIAEgAhA9EAMNARoLQQALCzcAIAEEQCAAIAAoAsTgASABKAIEIAEoAghqRzYCnOIBCyAAECtBABADIAFFckUEQCAAIAEQWwsL0QIBB38jAEEQayIGJAAgBiAENgIIIAYgAzYCDCAFBEAgBSgCBCEKIAUoAgghCQsgASEIAkACQANAIAAoAuzhARAWIQsCQANAIAQgC0kNASADKAAAQXBxQdDUtMIBRgRAIAMgBBAiIgcQAw0EIAQgB2shBCADIAdqIQMMAQsLIAYgAzYCDCAGIAQ2AggCQCAFBEAgACAFEE5BACEHQQAQA0UNAQwFCyAAIAogCRBNIgcQAw0ECyAAIAgQUCAMQQFHQQAgACAIIAIgBkEMaiAGQQhqEEwiByIDa0EAIAMQAxtBCkdyRQRAQbh/IQcMBAsgBxADDQMgAiAHayECIAcgCGohCEEBIQwgBigCDCEDIAYoAgghBAwBCwsgBiADNgIMIAYgBDYCCEG4fyEHIAQNASAIIAFrIQcMAQsgBiADNgIMIAYgBDYCCAsgBkEQaiQAIAcLRgECfyABIAAoArjgASICRwRAIAAgAjYCxOABIAAgATYCuOABIAAoArzgASEDIAAgATYCvOABIAAgASADIAJrajYCwOABCwutAgIEfwF+IwBBQGoiBCQAAkACQCACQQhJDQAgASgAAEFwcUHQ1LTCAUcNACABIAIQIiEBIABCADcDCCAAQQA2AgQgACABNgIADAELIARBGGogASACEC0iAxADBEAgACADEBoMAQsgAwRAIABBuH8QGgwBCyACIAQoAjAiA2shAiABIANqIQMDQAJAIAAgAyACIARBCGoQLCIFEAMEfyAFBSACIAVBA2oiBU8NAUG4fwsQGgwCCyAGQQFqIQYgAiAFayECIAMgBWohAyAEKAIMRQ0ACyAEKAI4BEAgAkEDTQRAIABBuH8QGgwCCyADQQRqIQMLIAQoAighAiAEKQMYIQcgAEEANgIEIAAgAyABazYCACAAIAIgBmytIAcgB0J/URs3AwgLIARBQGskAAslAQF/IwBBEGsiAiQAIAIgACABEFEgAigCACEAIAJBEGokACAAC30BBH8jAEGQBGsiBCQAIARB/wE2AggCQCAEQRBqIARBCGogBEEMaiABIAIQFSIGEAMEQCAGIQUMAQtBVCEFIAQoAgwiB0EGSw0AIAMgBEEQaiAEKAIIIAcQQSIFEAMNACAAIAEgBmogAiAGayADEDwhBQsgBEGQBGokACAFC4cBAgJ/An5BABAWIQMCQANAIAEgA08EQAJAIAAoAABBcHFB0NS0wgFGBEAgACABECIiAhADRQ0BQn4PCyAAIAEQVSIEQn1WDQMgBCAFfCIFIARUIQJCfiEEIAINAyAAIAEQUiICEAMNAwsgASACayEBIAAgAmohAAwBCwtCfiAFIAEbIQQLIAQLPwIBfwF+IwBBMGsiAiQAAn5CfiACQQhqIAAgARAtDQAaQgAgAigCHEEBRg0AGiACKQMICyEDIAJBMGokACADC40BAQJ/IwBBMGsiASQAAkAgAEUNACAAKAKI4gENACABIABB/OEBaigCADYCKCABIAApAvThATcDICAAEDAgACgCqOIBIQIgASABKAIoNgIYIAEgASkDIDcDECACIAFBEGoQGyAAQQA2AqjiASABIAEoAig2AgggASABKQMgNwMAIAAgARAbCyABQTBqJAALKgECfyMAQRBrIgAkACAAQQA2AgggAEIANwMAIAAQWCEBIABBEGokACABC4cBAQN/IwBBEGsiAiQAAkAgACgCAEUgACgCBEVzDQAgAiAAKAIINgIIIAIgACkCADcDAAJ/IAIoAgAiAQRAIAIoAghBqOMJIAERBQAMAQtBqOMJECgLIgFFDQAgASAAKQIANwL04QEgAUH84QFqIAAoAgg2AgAgARBZIAEhAwsgAkEQaiQAIAMLywEBAn8jAEEgayIBJAAgAEGBgIDAADYCtOIBIABBADYCiOIBIABBADYC7OEBIABCADcDkOIBIABBADYCpOMJIABBADYC3OIBIABCADcCzOIBIABBADYCvOIBIABBADYCxOABIABCADcCnOIBIABBpOIBakIANwIAIABBrOIBakEANgIAIAFCADcCECABQgA3AhggASABKQMYNwMIIAEgASkDEDcDACABKAIIQQh2QQFxIQIgAEEANgLg4gEgACACNgKM4gEgAUEgaiQAC3YBA38jAEEwayIBJAAgAARAIAEgAEHE0AFqIgIoAgA2AiggASAAKQK80AE3AyAgACgCACEDIAEgAigCADYCGCABIAApArzQATcDECADIAFBEGoQGyABIAEoAig2AgggASABKQMgNwMAIAAgARAbCyABQTBqJAALzAEBAX8gACABKAK00AE2ApjiASAAIAEoAgQiAjYCwOABIAAgAjYCvOABIAAgAiABKAIIaiICNgK44AEgACACNgLE4AEgASgCuNABBEAgAEKBgICAEDcDiOEBIAAgAUGk0ABqNgIMIAAgAUGUIGo2AgggACABQZwwajYCBCAAIAFBDGo2AgAgAEGs0AFqIAFBqNABaigCADYCACAAQbDQAWogAUGs0AFqKAIANgIAIABBtNABaiABQbDQAWooAgA2AgAPCyAAQgA3A4jhAQs7ACACRQRAQbp/DwsgBEUEQEFsDwsgAiAEEGAEQCAAIAEgAiADIAQgBRBhDwsgACABIAIgAyAEIAUQZQtGAQF/IwBBEGsiBSQAIAVBCGogBBAOAn8gBS0ACQRAIAAgASACIAMgBBAyDAELIAAgASACIAMgBBA0CyEAIAVBEGokACAACzQAIAAgAyAEIAUQNiIFEAMEQCAFDwsgBSAESQR/IAEgAiADIAVqIAQgBWsgABA1BUG4fwsLRgEBfyMAQRBrIgUkACAFQQhqIAQQDgJ/IAUtAAkEQCAAIAEgAiADIAQQYgwBCyAAIAEgAiADIAQQNQshACAFQRBqJAAgAAtZAQF/QQ8hAiABIABJBEAgAUEEdCAAbiECCyAAQQh2IgEgAkEYbCIAQYwIaigCAGwgAEGICGooAgBqIgJBA3YgAmogAEGACGooAgAgAEGECGooAgAgAWxqSQs3ACAAIAMgBCAFQYAQEDMiBRADBEAgBQ8LIAUgBEkEfyABIAIgAyAFaiAEIAVrIAAQMgVBuH8LC78DAQN/IwBBIGsiBSQAIAVBCGogAiADEAYiAhADRQRAIAAgAWoiB0F9aiEGIAUgBBAOIARBBGohAiAFLQACIQMDQEEAIAAgBkkgBUEIahAEGwRAIAAgAiAFQQhqIAMQAkECdGoiBC8BADsAACAFQQhqIAQtAAIQASAAIAQtAANqIgQgAiAFQQhqIAMQAkECdGoiAC8BADsAACAFQQhqIAAtAAIQASAEIAAtAANqIQAMAQUgB0F+aiEEA0AgBUEIahAEIAAgBEtyRQRAIAAgAiAFQQhqIAMQAkECdGoiBi8BADsAACAFQQhqIAYtAAIQASAAIAYtAANqIQAMAQsLA0AgACAES0UEQCAAIAIgBUEIaiADEAJBAnRqIgYvAQA7AAAgBUEIaiAGLQACEAEgACAGLQADaiEADAELCwJAIAAgB08NACAAIAIgBUEIaiADEAIiA0ECdGoiAC0AADoAACAALQADQQFGBEAgBUEIaiAALQACEAEMAQsgBSgCDEEfSw0AIAVBCGogAiADQQJ0ai0AAhABIAUoAgxBIUkNACAFQSA2AgwLIAFBbCAFQQhqEAobIQILCwsgBUEgaiQAIAILkgIBBH8jAEFAaiIJJAAgCSADQTQQCyEDAkAgBEECSA0AIAMgBEECdGooAgAhCSADQTxqIAgQIyADQQE6AD8gAyACOgA+QQAhBCADKAI8IQoDQCAEIAlGDQEgACAEQQJ0aiAKNgEAIARBAWohBAwAAAsAC0EAIQkDQCAGIAlGRQRAIAMgBSAJQQF0aiIKLQABIgtBAnRqIgwoAgAhBCADQTxqIAotAABBCHQgCGpB//8DcRAjIANBAjoAPyADIAcgC2siCiACajoAPiAEQQEgASAKa3RqIQogAygCPCELA0AgACAEQQJ0aiALNgEAIARBAWoiBCAKSQ0ACyAMIAo2AgAgCUEBaiEJDAELCyADQUBrJAALowIBCX8jAEHQAGsiCSQAIAlBEGogBUE0EAsaIAcgBmshDyAHIAFrIRADQAJAIAMgCkcEQEEBIAEgByACIApBAXRqIgYtAAEiDGsiCGsiC3QhDSAGLQAAIQ4gCUEQaiAMQQJ0aiIMKAIAIQYgCyAPTwRAIAAgBkECdGogCyAIIAUgCEE0bGogCCAQaiIIQQEgCEEBShsiCCACIAQgCEECdGooAgAiCEEBdGogAyAIayAHIA4QYyAGIA1qIQgMAgsgCUEMaiAOECMgCUEBOgAPIAkgCDoADiAGIA1qIQggCSgCDCELA0AgBiAITw0CIAAgBkECdGogCzYBACAGQQFqIQYMAAALAAsgCUHQAGokAA8LIAwgCDYCACAKQQFqIQoMAAALAAs0ACAAIAMgBCAFEDYiBRADBEAgBQ8LIAUgBEkEfyABIAIgAyAFaiAEIAVrIAAQNAVBuH8LCyMAIAA/AEEQdGtB//8DakEQdkAAQX9GBEBBAA8LQQAQAEEBCzsBAX8gAgRAA0AgACABIAJBgCAgAkGAIEkbIgMQCyEAIAFBgCBqIQEgAEGAIGohACACIANrIgINAAsLCwYAIAAQAwsLqBUJAEGICAsNAQAAAAEAAAACAAAAAgBBoAgLswYBAAAAAQAAAAIAAAACAAAAJgAAAIIAAAAhBQAASgAAAGcIAAAmAAAAwAEAAIAAAABJBQAASgAAAL4IAAApAAAALAIAAIAAAABJBQAASgAAAL4IAAAvAAAAygIAAIAAAACKBQAASgAAAIQJAAA1AAAAcwMAAIAAAACdBQAASgAAAKAJAAA9AAAAgQMAAIAAAADrBQAASwAAAD4KAABEAAAAngMAAIAAAABNBgAASwAAAKoKAABLAAAAswMAAIAAAADBBgAATQAAAB8NAABNAAAAUwQAAIAAAAAjCAAAUQAAAKYPAABUAAAAmQQAAIAAAABLCQAAVwAAALESAABYAAAA2gQAAIAAAABvCQAAXQAAACMUAABUAAAARQUAAIAAAABUCgAAagAAAIwUAABqAAAArwUAAIAAAAB2CQAAfAAAAE4QAAB8AAAA0gIAAIAAAABjBwAAkQAAAJAHAACSAAAAAAAAAAEAAAABAAAABQAAAA0AAAAdAAAAPQAAAH0AAAD9AAAA/QEAAP0DAAD9BwAA/Q8AAP0fAAD9PwAA/X8AAP3/AAD9/wEA/f8DAP3/BwD9/w8A/f8fAP3/PwD9/38A/f//AP3//wH9//8D/f//B/3//w/9//8f/f//P/3//38AAAAAAQAAAAIAAAADAAAABAAAAAUAAAAGAAAABwAAAAgAAAAJAAAACgAAAAsAAAAMAAAADQAAAA4AAAAPAAAAEAAAABEAAAASAAAAEwAAABQAAAAVAAAAFgAAABcAAAAYAAAAGQAAABoAAAAbAAAAHAAAAB0AAAAeAAAAHwAAAAMAAAAEAAAABQAAAAYAAAAHAAAACAAAAAkAAAAKAAAACwAAAAwAAAANAAAADgAAAA8AAAAQAAAAEQAAABIAAAATAAAAFAAAABUAAAAWAAAAFwAAABgAAAAZAAAAGgAAABsAAAAcAAAAHQAAAB4AAAAfAAAAIAAAACEAAAAiAAAAIwAAACUAAAAnAAAAKQAAACsAAAAvAAAAMwAAADsAAABDAAAAUwAAAGMAAACDAAAAAwEAAAMCAAADBAAAAwgAAAMQAAADIAAAA0AAAAOAAAADAAEAQeAPC1EBAAAAAQAAAAEAAAABAAAAAgAAAAIAAAADAAAAAwAAAAQAAAAEAAAABQAAAAcAAAAIAAAACQAAAAoAAAALAAAADAAAAA0AAAAOAAAADwAAABAAQcQQC4sBAQAAAAIAAAADAAAABAAAAAUAAAAGAAAABwAAAAgAAAAJAAAACgAAAAsAAAAMAAAADQAAAA4AAAAPAAAAEAAAABIAAAAUAAAAFgAAABgAAAAcAAAAIAAAACgAAAAwAAAAQAAAAIAAAAAAAQAAAAIAAAAEAAAACAAAABAAAAAgAAAAQAAAAIAAAAAAAQBBkBIL5gQBAAAAAQAAAAEAAAABAAAAAgAAAAIAAAADAAAAAwAAAAQAAAAGAAAABwAAAAgAAAAJAAAACgAAAAsAAAAMAAAADQAAAA4AAAAPAAAAEAAAAAEAAAAEAAAACAAAAAAAAAABAAEBBgAAAAAAAAQAAAAAEAAABAAAAAAgAAAFAQAAAAAAAAUDAAAAAAAABQQAAAAAAAAFBgAAAAAAAAUHAAAAAAAABQkAAAAAAAAFCgAAAAAAAAUMAAAAAAAABg4AAAAAAAEFEAAAAAAAAQUUAAAAAAABBRYAAAAAAAIFHAAAAAAAAwUgAAAAAAAEBTAAAAAgAAYFQAAAAAAABwWAAAAAAAAIBgABAAAAAAoGAAQAAAAADAYAEAAAIAAABAAAAAAAAAAEAQAAAAAAAAUCAAAAIAAABQQAAAAAAAAFBQAAACAAAAUHAAAAAAAABQgAAAAgAAAFCgAAAAAAAAULAAAAAAAABg0AAAAgAAEFEAAAAAAAAQUSAAAAIAABBRYAAAAAAAIFGAAAACAAAwUgAAAAAAADBSgAAAAAAAYEQAAAABAABgRAAAAAIAAHBYAAAAAAAAkGAAIAAAAACwYACAAAMAAABAAAAAAQAAAEAQAAACAAAAUCAAAAIAAABQMAAAAgAAAFBQAAACAAAAUGAAAAIAAABQgAAAAgAAAFCQAAACAAAAULAAAAIAAABQwAAAAAAAAGDwAAACAAAQUSAAAAIAABBRQAAAAgAAIFGAAAACAAAgUcAAAAIAADBSgAAAAgAAQFMAAAAAAAEAYAAAEAAAAPBgCAAAAAAA4GAEAAAAAADQYAIABBgBcLhwIBAAEBBQAAAAAAAAUAAAAAAAAGBD0AAAAAAAkF/QEAAAAADwX9fwAAAAAVBf3/HwAAAAMFBQAAAAAABwR9AAAAAAAMBf0PAAAAABIF/f8DAAAAFwX9/38AAAAFBR0AAAAAAAgE/QAAAAAADgX9PwAAAAAUBf3/DwAAAAIFAQAAABAABwR9AAAAAAALBf0HAAAAABEF/f8BAAAAFgX9/z8AAAAEBQ0AAAAQAAgE/QAAAAAADQX9HwAAAAATBf3/BwAAAAEFAQAAABAABgQ9AAAAAAAKBf0DAAAAABAF/f8AAAAAHAX9//8PAAAbBf3//wcAABoF/f//AwAAGQX9//8BAAAYBf3//wBBkBkLhgQBAAEBBgAAAAAAAAYDAAAAAAAABAQAAAAgAAAFBQAAAAAAAAUGAAAAAAAABQgAAAAAAAAFCQAAAAAAAAULAAAAAAAABg0AAAAAAAAGEAAAAAAAAAYTAAAAAAAABhYAAAAAAAAGGQAAAAAAAAYcAAAAAAAABh8AAAAAAAAGIgAAAAAAAQYlAAAAAAABBikAAAAAAAIGLwAAAAAAAwY7AAAAAAAEBlMAAAAAAAcGgwAAAAAACQYDAgAAEAAABAQAAAAAAAAEBQAAACAAAAUGAAAAAAAABQcAAAAgAAAFCQAAAAAAAAUKAAAAAAAABgwAAAAAAAAGDwAAAAAAAAYSAAAAAAAABhUAAAAAAAAGGAAAAAAAAAYbAAAAAAAABh4AAAAAAAAGIQAAAAAAAQYjAAAAAAABBicAAAAAAAIGKwAAAAAAAwYzAAAAAAAEBkMAAAAAAAUGYwAAAAAACAYDAQAAIAAABAQAAAAwAAAEBAAAABAAAAQFAAAAIAAABQcAAAAgAAAFCAAAACAAAAUKAAAAIAAABQsAAAAAAAAGDgAAAAAAAAYRAAAAAAAABhQAAAAAAAAGFwAAAAAAAAYaAAAAAAAABh0AAAAAAAAGIAAAAAAAEAYDAAEAAAAPBgOAAAAAAA4GA0AAAAAADQYDIAAAAAAMBgMQAAAAAAsGAwgAAAAACgYDBABBpB0L2QEBAAAAAwAAAAcAAAAPAAAAHwAAAD8AAAB/AAAA/wAAAP8BAAD/AwAA/wcAAP8PAAD/HwAA/z8AAP9/AAD//wAA//8BAP//AwD//wcA//8PAP//HwD//z8A//9/AP///wD///8B////A////wf///8P////H////z////9/AAAAAAEAAAACAAAABAAAAAAAAAACAAAABAAAAAgAAAAAAAAAAQAAAAIAAAABAAAABAAAAAQAAAAEAAAABAAAAAgAAAAIAAAACAAAAAcAAAAIAAAACQAAAAoAAAALAEGgIAsDwBBQ",Vet=new WeakMap;let Qet,Wet=0;class Yet extends iS{constructor(t){super(t),this.transcoderPath="",this.transcoderBinary=null,this.transcoderPending=null,this.workerPool=new bet,this.workerSourceURL="",this.workerConfig=null,"undefined"!=typeof MSC_TRANSCODER&&console.warn('THREE.KTX2Loader: Please update to latest "basis_transcoder". "msc_basis_transcoder" is no longer supported in three.js r125+.')}setTranscoderPath(t){return this.transcoderPath=t,this}setWorkerLimit(t){return this.workerPool.setWorkerLimit(t),this}detectSupport(t){return this.workerConfig={astcSupported:t.extensions.has("WEBGL_compressed_texture_astc"),etc1Supported:t.extensions.has("WEBGL_compressed_texture_etc1"),etc2Supported:t.extensions.has("WEBGL_compressed_texture_etc"),dxtSupported:t.extensions.has("WEBGL_compressed_texture_s3tc"),bptcSupported:t.extensions.has("EXT_texture_compression_bptc"),pvrtcSupported:t.extensions.has("WEBGL_compressed_texture_pvrtc")||t.extensions.has("WEBKIT_WEBGL_compressed_texture_pvrtc")},t.capabilities.isWebGL2&&(this.workerConfig.etc1Supported=!1),this}init(){if(!this.transcoderPending){const t=new sS(this.manager);t.setPath(this.transcoderPath),t.setWithCredentials(this.withCredentials);const e=t.loadAsync("basis_transcoder.js"),n=new sS(this.manager);n.setPath(this.transcoderPath),n.setResponseType("arraybuffer"),n.setWithCredentials(this.withCredentials);const r=n.loadAsync("basis_transcoder.wasm");this.transcoderPending=Promise.all([e,r]).then((([t,e])=>{const n=Yet.BasisWorker.toString(),r=["/* constants */","let _EngineFormat = "+JSON.stringify(Yet.EngineFormat),"let _TranscoderFormat = "+JSON.stringify(Yet.TranscoderFormat),"let _BasisFormat = "+JSON.stringify(Yet.BasisFormat),"/* basis_transcoder.js */",t,"/* worker */",n.substring(n.indexOf("{")+1,n.lastIndexOf("}"))].join("\n");this.workerSourceURL=URL.createObjectURL(new Blob([r])),this.transcoderBinary=e,this.workerPool.setWorkerCreator((()=>{const t=new Worker(this.workerSourceURL),e=this.transcoderBinary.slice(0);return t.postMessage({type:"init",config:this.workerConfig,transcoderBinary:e},[e]),t}))})),Wet>0&&console.warn("THREE.KTX2Loader: Multiple active KTX2 loaders may cause performance issues. Use a single KTX2Loader instance, or call .dispose() on old instances."),Wet++}return this.transcoderPending}load(t,e,n,r){if(null===this.workerConfig)throw new Error("THREE.KTX2Loader: Missing initialization with `.detectSupport( renderer )`.");const i=new sS(this.manager);i.setResponseType("arraybuffer"),i.setWithCredentials(this.withCredentials),i.load(t,(t=>{if(Vet.has(t)){return Vet.get(t).promise.then(e).catch(r)}this._createTexture(t).then((t=>e?e(t):null)).catch(r)}),n,r)}_createTextureFrom(t,e){const{mipmaps:n,width:r,height:i,format:o,type:a,error:s,dfdTransferFn:l,dfdFlags:u}=t;if("error"===a)return Promise.reject(s);const c=e.layerCount>1?new kx(n,r,i,e.layerCount,o,Hg):new Ix(n,r,i,o,Hg);return c.minFilter=1===n.length?Ug:Gg,c.magFilter=Ug,c.generateMipmaps=!1,c.needsUpdate=!0,c.encoding=2===l?Xv:Kv,c.premultiplyAlpha=!!(1&u),c}async _createTexture(t,e={}){const n=function(t){const e=new Uint8Array(t.buffer,t.byteOffset,Net.length);if(e[0]!==Net[0]||e[1]!==Net[1]||e[2]!==Net[2]||e[3]!==Net[3]||e[4]!==Net[4]||e[5]!==Net[5]||e[6]!==Net[6]||e[7]!==Net[7]||e[8]!==Net[8]||e[9]!==Net[9]||e[10]!==Net[10]||e[11]!==Net[11])throw new Error("Missing KTX 2.0 identifier.");const n=new Let,r=17*Uint32Array.BYTES_PER_ELEMENT,i=new Det(t,Net.length,r,!0);n.vkFormat=i._nextUint32(),n.typeSize=i._nextUint32(),n.pixelWidth=i._nextUint32(),n.pixelHeight=i._nextUint32(),n.pixelDepth=i._nextUint32(),n.layerCount=i._nextUint32(),n.faceCount=i._nextUint32();const o=i._nextUint32();n.supercompressionScheme=i._nextUint32();const a=i._nextUint32(),s=i._nextUint32(),l=i._nextUint32(),u=i._nextUint32(),c=i._nextUint64(),d=i._nextUint64(),f=new Det(t,Net.length+r,3*o*8,!0);for(let e=0;e<o;e++)n.levels.push({levelData:new Uint8Array(t.buffer,t.byteOffset+f._nextUint64(),f._nextUint64()),uncompressedByteLength:f._nextUint64()});const h=new Det(t,a,s,!0),p={vendorId:h._skip(4)._nextUint16(),descriptorType:h._nextUint16(),versionNumber:h._nextUint16(),descriptorBlockSize:h._nextUint16(),colorModel:h._nextUint8(),colorPrimaries:h._nextUint8(),transferFunction:h._nextUint8(),flags:h._nextUint8(),texelBlockDimension:[h._nextUint8(),h._nextUint8(),h._nextUint8(),h._nextUint8()],bytesPlane:[h._nextUint8(),h._nextUint8(),h._nextUint8(),h._nextUint8(),h._nextUint8(),h._nextUint8(),h._nextUint8(),h._nextUint8()],samples:[]},m=(p.descriptorBlockSize/4-6)/4;for(let t=0;t<m;t++){const e={bitOffset:h._nextUint16(),bitLength:h._nextUint8(),channelType:h._nextUint8(),samplePosition:[h._nextUint8(),h._nextUint8(),h._nextUint8(),h._nextUint8()],sampleLower:-1/0,sampleUpper:1/0};64&e.channelType?(e.sampleLower=h._nextInt32(),e.sampleUpper=h._nextInt32()):(e.sampleLower=h._nextUint32(),e.sampleUpper=h._nextUint32()),p.samples[t]=e}n.dataFormatDescriptor.length=0,n.dataFormatDescriptor.push(p);const g=new Det(t,l,u,!0);for(;g._offset<u;){const t=g._nextUint32(),e=g._scan(t),r=Bet(e),i=g._scan(t-e.byteLength);n.keyValue[r]=r.match(/^ktx/i)?Bet(i):i,g._offset%4&&g._skip(4-g._offset%4)}if(d<=0)return n;const v=new Det(t,c,d,!0),y=v._nextUint16(),b=v._nextUint16(),_=v._nextUint32(),w=v._nextUint32(),A=v._nextUint32(),E=v._nextUint32(),x=[];for(let t=0;t<o;t++)x.push({imageFlags:v._nextUint32(),rgbSliceByteOffset:v._nextUint32(),rgbSliceByteLength:v._nextUint32(),alphaSliceByteOffset:v._nextUint32(),alphaSliceByteLength:v._nextUint32()});const S=c+v._offset,T=S+_,C=T+w,I=C+A,k=new Uint8Array(t.buffer,t.byteOffset+S,_),P=new Uint8Array(t.buffer,t.byteOffset+T,w),R=new Uint8Array(t.buffer,t.byteOffset+C,A),O=new Uint8Array(t.buffer,t.byteOffset+I,E);return n.globalData={endpointCount:y,selectorCount:b,imageDescs:x,endpointsData:k,selectorsData:P,tablesData:R,extendedData:O},n}(new Uint8Array(t));if(0!==n.vkFormat)return async function(t){const{vkFormat:e,pixelWidth:n,pixelHeight:r,pixelDepth:i}=t;if(void 0===Ket[e])throw new Error("THREE.KTX2Loader: Unsupported vkFormat.");const o=t.levels[0];let a,s;if(0===t.supercompressionScheme)a=o.levelData;else{if(2!==t.supercompressionScheme)throw new Error("THREE.KTX2Loader: Unsupported supercompressionScheme.");Qet||(Qet=new Promise((async t=>{const e=new Get;await e.init(),t(e)}))),a=(await Qet).decode(o.levelData,o.uncompressedByteLength)}s=Xet[e]===Xg?new Float32Array(a.buffer,a.byteOffset,a.byteLength/Float32Array.BYTES_PER_ELEMENT):Xet[e]===$g?new Uint16Array(a.buffer,a.byteOffset,a.byteLength/Uint16Array.BYTES_PER_ELEMENT):a;const l=0===i?new ZE(s,n,r):new Wy(s,n,r,i);return l.type=Xet[e],l.format=Ket[e],l.encoding=$et[e]||Kv,l.needsUpdate=!0,Promise.resolve(l)}(n);const r=e,i=this.init().then((()=>this.workerPool.postMessage({type:"transcode",buffer:t,taskConfig:r},[t]))).then((t=>this._createTextureFrom(t.data,n)));return Vet.set(t,{promise:i}),i}dispose(){return this.workerPool.dispose(),this.workerSourceURL&&URL.revokeObjectURL(this.workerSourceURL),Wet--,this}}Yet.BasisFormat={ETC1S:0,UASTC_4x4:1},Yet.TranscoderFormat={ETC1:0,ETC2:1,BC1:2,BC3:3,BC4:4,BC5:5,BC7_M6_OPAQUE_ONLY:6,BC7_M5:7,PVRTC1_4_RGB:8,PVRTC1_4_RGBA:9,ASTC_4x4:10,ATC_RGB:11,ATC_RGBA_INTERPOLATED_ALPHA:12,RGBA32:13,RGB565:14,BGR565:15,RGBA4444:16},Yet.EngineFormat={RGBAFormat:nv,RGBA_ASTC_4x4_Format:Ev,RGBA_BPTC_Format:Bv,RGBA_ETC2_EAC_Format:Av,RGBA_PVRTC_4BPPV1_Format:yv,RGBA_S3TC_DXT5_Format:mv,RGB_ETC1_Format:_v,RGB_ETC2_Format:wv,RGB_PVRTC_4BPPV1_Format:gv,RGB_S3TC_DXT1_Format:fv},Yet.BasisWorker=function(){let t,e,n;const r=_EngineFormat,i=_TranscoderFormat,o=_BasisFormat;self.addEventListener("message",(function(a){const d=a.data;switch(d.type){case"init":t=d.config,f=d.transcoderBinary,e=new Promise((t=>{n={wasmBinary:f,onRuntimeInitialized:t},BASIS(n)})).then((()=>{n.initializeBasis(),void 0===n.KTX2File&&console.warn("THREE.KTX2Loader: Please update Basis Universal transcoder.")}));break;case"transcode":e.then((()=>{try{const{width:e,height:a,hasAlpha:f,mipmaps:h,format:p,dfdTransferFn:m,dfdFlags:g}=function(e){const a=new n.KTX2File(new Uint8Array(e));function d(){a.close(),a.delete()}if(!a.isValid())throw d(),new Error("THREE.KTX2Loader:\tInvalid or unsupported .ktx2 file");const f=a.isUASTC()?o.UASTC_4x4:o.ETC1S,h=a.getWidth(),p=a.getHeight(),m=a.getLayers()||1,g=a.getLevels(),v=a.getHasAlpha(),y=a.getDFDTransferFunc(),b=a.getDFDFlags(),{transcoderFormat:_,engineFormat:w}=function(e,n,a,c){let d,f;const h=e===o.ETC1S?s:l;for(let r=0;r<h.length;r++){const i=h[r];if(t[i.if]&&(i.basisFormat.includes(e)&&!(c&&i.transcoderFormat.length<2)&&(!i.needsPowerOfTwo||u(n)&&u(a))))return d=i.transcoderFormat[c?1:0],f=i.engineFormat[c?1:0],{transcoderFormat:d,engineFormat:f}}return console.warn("THREE.KTX2Loader: No suitable compressed texture format found. Decoding to RGBA32."),d=i.RGBA32,f=r.RGBAFormat,{transcoderFormat:d,engineFormat:f}}(f,h,p,v);if(!h||!p||!g)throw d(),new Error("THREE.KTX2Loader:\tInvalid texture");if(!a.startTranscoding())throw d(),new Error("THREE.KTX2Loader: .startTranscoding failed");const A=[];for(let t=0;t<g;t++){const e=[];let n,r;for(let i=0;i<m;i++){const o=a.getImageLevelInfo(t,i,0);n=o.origWidth,r=o.origHeight;const s=new Uint8Array(a.getImageTranscodedSizeInBytes(t,i,0,_));if(!a.transcodeImage(s,t,i,0,_,0,-1,-1))throw d(),new Error("THREE.KTX2Loader: .transcodeImage failed.");e.push(s)}A.push({data:c(e),width:n,height:r})}return d(),{width:h,height:p,hasAlpha:v,mipmaps:A,format:w,dfdTransferFn:y,dfdFlags:b}}(d.buffer),v=[];for(let t=0;t<h.length;++t)v.push(h[t].data.buffer);self.postMessage({type:"transcode",id:d.id,width:e,height:a,hasAlpha:f,mipmaps:h,format:p,dfdTransferFn:m,dfdFlags:g},v)}catch(t){console.error(t),self.postMessage({type:"error",id:d.id,error:t.message})}}))}var f}));const a=[{if:"astcSupported",basisFormat:[o.UASTC_4x4],transcoderFormat:[i.ASTC_4x4,i.ASTC_4x4],engineFormat:[r.RGBA_ASTC_4x4_Format,r.RGBA_ASTC_4x4_Format],priorityETC1S:1/0,priorityUASTC:1,needsPowerOfTwo:!1},{if:"bptcSupported",basisFormat:[o.ETC1S,o.UASTC_4x4],transcoderFormat:[i.BC7_M5,i.BC7_M5],engineFormat:[r.RGBA_BPTC_Format,r.RGBA_BPTC_Format],priorityETC1S:3,priorityUASTC:2,needsPowerOfTwo:!1},{if:"dxtSupported",basisFormat:[o.ETC1S,o.UASTC_4x4],transcoderFormat:[i.BC1,i.BC3],engineFormat:[r.RGB_S3TC_DXT1_Format,r.RGBA_S3TC_DXT5_Format],priorityETC1S:4,priorityUASTC:5,needsPowerOfTwo:!1},{if:"etc2Supported",basisFormat:[o.ETC1S,o.UASTC_4x4],transcoderFormat:[i.ETC1,i.ETC2],engineFormat:[r.RGB_ETC2_Format,r.RGBA_ETC2_EAC_Format],priorityETC1S:1,priorityUASTC:3,needsPowerOfTwo:!1},{if:"etc1Supported",basisFormat:[o.ETC1S,o.UASTC_4x4],transcoderFormat:[i.ETC1],engineFormat:[r.RGB_ETC1_Format],priorityETC1S:2,priorityUASTC:4,needsPowerOfTwo:!1},{if:"pvrtcSupported",basisFormat:[o.ETC1S,o.UASTC_4x4],transcoderFormat:[i.PVRTC1_4_RGB,i.PVRTC1_4_RGBA],engineFormat:[r.RGB_PVRTC_4BPPV1_Format,r.RGBA_PVRTC_4BPPV1_Format],priorityETC1S:5,priorityUASTC:6,needsPowerOfTwo:!0}],s=a.sort((function(t,e){return t.priorityETC1S-e.priorityETC1S})),l=a.sort((function(t,e){return t.priorityUASTC-e.priorityUASTC}));function u(t){return t<=2||!(t&t-1)&&0!==t}function c(t){let e=0;for(const n of t)e+=n.byteLength;const n=new Uint8Array(e);let r=0;for(const e of t)n.set(e,r),r+=e.byteLength;return n}};const Ket={[Met]:nv,[Pet]:nv,[Tet]:nv,[Cet]:nv,[Oet]:uv,[ket]:uv,[Eet]:uv,[xet]:uv,[Ret]:sv,[Iet]:sv,[Aet]:sv,[wet]:sv},Xet={[Met]:Xg,[Pet]:$g,[Tet]:Hg,[Cet]:Hg,[Oet]:Xg,[ket]:$g,[Eet]:Hg,[xet]:Hg,[Ret]:Xg,[Iet]:$g,[Aet]:Hg,[wet]:Hg},$et={[Cet]:Xv,[xet]:Xv,[Aet]:Xv};function Zet(t){return Zet="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Zet(t)}function Jet(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function tnt(t){return(tnt=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function ent(t,e){return(ent=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function nnt(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=tnt(t);if(e){var i=tnt(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return function(t,e){return!e||"object"!=Zet(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}(this,n)}}var rnt=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&ent(t,e)}(i,xK);var e,n,r=nnt(i);function i(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(t=r.call(this,e))._loader=new Yet,t._transcoderPath=e.transcoderPath,t._renderer=e.renderer,!t._transcoderPath)throw new Error("ThreeKTX2TextureLoader: transcoderPath is not defined");if(!t._renderer)throw new Error("ThreeKTX2TextureLoader: renderer is not defined");return t._loader.setTranscoderPath(t._transcoderPath),t._loader.detectSupport(t._renderer),t}return e=i,(n=[{key:"load",value:function(t){var e=this,n=t.path;return new Promise((function(t,r){e._loader.load(n,t,null,r)}))}}])&&Jet(e.prototype,n),i}();const int=rnt;function ont(t){return ont="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ont(t)}function ant(){ant=function(){return e};var t,e={},n=Object.prototype,r=n.hasOwnProperty,i=Object.defineProperty||function(t,e,n){t[e]=n.value},o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",s=o.asyncIterator||"@@asyncIterator",l=o.toStringTag||"@@toStringTag";function u(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,n){return t[e]=n}}function c(t,e,n,r){var o=e&&e.prototype instanceof v?e:v,a=Object.create(o.prototype),s=new P(r||[]);return i(a,"_invoke",{value:T(t,n,s)}),a}function d(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}e.wrap=c;var f="suspendedStart",h="suspendedYield",p="executing",m="completed",g={};function v(){}function y(){}function b(){}var _={};u(_,a,(function(){return this}));var w=Object.getPrototypeOf,A=w&&w(w(R([])));A&&A!==n&&r.call(A,a)&&(_=A);var E=b.prototype=v.prototype=Object.create(_);function x(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function S(t,e){function n(i,o,a,s){var l=d(t[i],t,o);if("throw"!==l.type){var u=l.arg,c=u.value;return c&&"object"==ont(c)&&r.call(c,"__await")?e.resolve(c.__await).then((function(t){n("next",t,a,s)}),(function(t){n("throw",t,a,s)})):e.resolve(c).then((function(t){u.value=t,a(u)}),(function(t){return n("throw",t,a,s)}))}s(l.arg)}var o;i(this,"_invoke",{value:function(t,r){function i(){return new e((function(e,i){n(t,r,e,i)}))}return o=o?o.then(i,i):i()}})}function T(e,n,r){var i=f;return function(o,a){if(i===p)throw Error("Generator is already running");if(i===m){if("throw"===o)throw a;return{value:t,done:!0}}for(r.method=o,r.arg=a;;){var s=r.delegate;if(s){var l=C(s,r);if(l){if(l===g)continue;return l}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(i===f)throw i=m,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);i=p;var u=d(e,n,r);if("normal"===u.type){if(i=r.done?m:h,u.arg===g)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(i=m,r.method="throw",r.arg=u.arg)}}}function C(e,n){var r=n.method,i=e.iterator[r];if(i===t)return n.delegate=null,"throw"===r&&e.iterator.return&&(n.method="return",n.arg=t,C(e,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),g;var o=d(i,e.iterator,n.arg);if("throw"===o.type)return n.method="throw",n.arg=o.arg,n.delegate=null,g;var a=o.arg;return a?a.done?(n[e.resultName]=a.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=t),n.delegate=null,g):a:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,g)}function I(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function k(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function P(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(I,this),this.reset(!0)}function R(e){if(e||""===e){var n=e[a];if(n)return n.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var i=-1,o=function n(){for(;++i<e.length;)if(r.call(e,i))return n.value=e[i],n.done=!1,n;return n.value=t,n.done=!0,n};return o.next=o}}throw new TypeError(ont(e)+" is not iterable")}return y.prototype=b,i(E,"constructor",{value:b,configurable:!0}),i(b,"constructor",{value:y,configurable:!0}),y.displayName=u(b,l,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===y||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,b):(t.__proto__=b,u(t,l,"GeneratorFunction")),t.prototype=Object.create(E),t},e.awrap=function(t){return{__await:t}},x(S.prototype),u(S.prototype,s,(function(){return this})),e.AsyncIterator=S,e.async=function(t,n,r,i,o){void 0===o&&(o=Promise);var a=new S(c(t,n,r,i),o);return e.isGeneratorFunction(n)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},x(E),u(E,l,"Generator"),u(E,a,(function(){return this})),u(E,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),n=[];for(var r in e)n.push(r);return n.reverse(),function t(){for(;n.length;){var r=n.pop();if(r in e)return t.value=r,t.done=!1,t}return t.done=!0,t}},e.values=R,P.prototype={constructor:P,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(k),!e)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function i(r,i){return s.type="throw",s.arg=e,n.next=r,i&&(n.method="next",n.arg=t),!!i}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],s=a.completion;if("root"===a.tryLoc)return i("end");if(a.tryLoc<=this.prev){var l=r.call(a,"catchLoc"),u=r.call(a,"finallyLoc");if(l&&u){if(this.prev<a.catchLoc)return i(a.catchLoc,!0);if(this.prev<a.finallyLoc)return i(a.finallyLoc)}else if(l){if(this.prev<a.catchLoc)return i(a.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return i(a.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=t,a.arg=e,o?(this.method="next",this.next=o.finallyLoc,g):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),g},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),k(n),g}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var i=r.arg;k(n)}return i}}throw Error("illegal catch attempt")},delegateYield:function(e,n,r){return this.delegate={iterator:R(e),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=t),g}},e}function snt(t,e,n,r,i,o,a){try{var s=t[o](a),l=s.value}catch(t){return void n(t)}s.done?e(l):Promise.resolve(l).then(r,i)}function lnt(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,cnt(r.key),r)}}function unt(t,e,n){return(e=cnt(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function cnt(t){var e=function(t,e){if("object"!=ont(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=ont(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==ont(e)?e:e+""}var dnt=function(){return t=function t(e,n,r){var i=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),unt(this,"_canvas",void 0),unt(this,"_renderer",void 0),unt(this,"_scene",void 0),unt(this,"_orthoCamera",void 0),unt(this,"_width",void 0),unt(this,"_height",void 0),unt(this,"_material",void 0),unt(this,"_mesh",void 0),unt(this,"_loaderCanvas",void 0),unt(this,"_textureCanvas",void 0),unt(this,"progress",0),unt(this,"progressTarget",0),unt(this,"loadCallback",null),unt(this,"showComplete",!1),unt(this,"guiObj",{layers:2,noiseSpread:.2,noiseSpread2:.14,noisePrecision:18.54,force:.12,offset:160,progress:0,posX:.5,clampY:.1,colorDivider:245,radius:1,animate:function(){i.animateProgress()}}),unt(this,"init",function(){var t=function(t){return function(){var e=this,n=arguments;return new Promise((function(r,i){var o=t.apply(e,n);function a(t){snt(o,r,i,a,s,"next",t)}function s(t){snt(o,r,i,a,s,"throw",t)}a(void 0)}))}}(ant().mark((function t(e){var n,r=arguments;return ant().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return(n=r.length>1&&void 0!==r[1]&&r[1])||(i.loadCallback=e),i.initCanvas(),i.setScene(),i.setRender(),i.setCanvasTexture(),i.setPlane(),i.setCamera(),i.handleResize(),i.startAnim(),i.events(!0),AK.registerLoader(int,"ktx",{transcoderPath:"./wp-content/themes/davidwhyte/resources/assets/xp/libs/basis/",renderer:i._renderer}),het.addEventListener("progress",i.onLoadProgress),het.start(),t.next=16,new Promise((function(t){het.addEventListener("complete",(function e(){het.removeEventListener("complete",e),t()}))}));case 16:return t.next=18,document.fonts.ready;case 18:het.removeEventListener("progress",i.onLoadProgress),i.watercolorExperience.prepare(),i.loaded=!0,n&&e();case 22:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),unt(this,"render",(function(t,e){var n=i.progress+(i.progressTarget-i.progress)/20;Math.abs(i.progressTarget-n)<.001&&(n=i.progressTarget),n!=i.progress&&(i.progress=n,i._loaderCanvas.draw(i.progress,!1),i._textureCanvas.needsUpdate=!0,1==i.progress&&i.onLoadAnimCompleted()),i._renderer.render(i._scene,i._orthoCamera)})),unt(this,"handleMouseenter",(function(){i.loaded&&!i.clicked&&(ti.to(i.mesh.material.uniforms.uProgress,{value:125,duration:2.5,ease:"expo.out"}),ti.to(i.canvas,{opacity:.6,duration:2.5,ease:"expo.out"}))})),unt(this,"handleMouseleave",(function(){i.loaded&&!i.clicked&&(ti.to(i.mesh.material.uniforms.uProgress,{value:0,duration:2.5,ease:"expo.out"}),ti.to(i.canvas,{opacity:1,duration:2.5,ease:"expo.out"}))})),unt(this,"handleClick",(function(){i.loaded&&(i.clicked=!0,ti.to(i.mesh.material.uniforms.uProgress,{value:470,duration:4,ease:"linear"}),ti.to(i.el,{opacity:0,duration:4,ease:"linear"}),ti.to(i.textEl,{opacity:0,duration:4,ease:"linear"}))})),unt(this,"handleResize",(function(){i.dpr=2,i._width=i.el.offsetWidth,i._height=i.el.offsetHeight,i._orthoCamera.left=-i._width/2,i._orthoCamera.right=i._width/2,i._orthoCamera.top=i._height/2,i._orthoCamera.bottom=-i._height/2,i._orthoCamera.updateProjectionMatrix(),i._renderer.setPixelRatio(i.dpr),i._renderer.setSize(i._width,i._height)})),unt(this,"guiChange",(function(){i._material.uniforms.uNoiseSpread.value=i.guiObj.noiseSpread,i._material.uniforms.uProgress.value=i.guiObj.progress,i._material.uniforms.uNoisePrecision.value=i.guiObj.noisePrecision,i._material.uniforms.uOffset.value=i.guiObj.offset,i._material.uniforms.uNoiseSpread2.value=i.guiObj.noiseSpread2,i._material.uniforms.uforce.value=i.guiObj.force,i._material.uniforms.uPosX.value=i.guiObj.posX,i._material.uniforms.uColorDivider.value=i.guiObj.colorDivider})),this.el=e,this.textEl=n,this.watercolorExperience=r,this.onLoadProgress=this.onLoadProgress.bind(this),this.onShowAnimCompleted=this.onShowAnimCompleted.bind(this)},e=[{key:"initCanvas",value:function(){this.canvas=document.createElement("canvas"),this.canvas.style.position="absolute",this.canvas.style.top=0,this.canvas.style.left=0,this.canvas.style.height="100%",this.canvas.style.width="100%",this.canvas.style.zIndex=-1,this.canvas.style.willChange="transform",this.el.appendChild(this.canvas)}},{key:"onLoadProgress",value:function(t){this.progressTarget=t}},{key:"onLoadAnimCompleted",value:function(){console.log("LoaderScene.onLoadAnimCompleted()"),this.showComplete&&this.loadCallback&&this.loadCallback()}},{key:"startAnim",value:function(){var t=1.05,e=ti.timeline({onComplete:this.onShowAnimCompleted});e.fromTo(this.canvas,{scale:0},{scale:1,duration:3,ease:"expo.out"},t),e.fromTo(this.el,{opacity:0},{opacity:1,duration:2.5},t);var n=new Fs(this.textEl,{type:"words",wordsClass:"word-anim"});this.textEl.style.opacity=1,e.fromTo(n.words,{opacity:0},{opacity:1,duration:1.8,stagger:.165},1.85),e.fromTo(n.words,{y:10},{y:0,duration:1.8,ease:"expo.out",stagger:.165},1.85)}},{key:"onShowAnimCompleted",value:function(){console.log("LoaderScene.onShowAnimCompleted()",this.progress),this.showComplete=!0,1==this.progress&&this.loadCallback&&this.loadCallback()}},{key:"setGUI",value:function(){var t=(new Cm).addFolder("Loader");t.add(this.guiObj,"noiseSpread",0,1).step(.01).onChange(this.guiChange),t.add(this.guiObj,"noiseSpread2",0,1).step(.01).onChange(this.guiChange),t.add(this.guiObj,"noisePrecision",0,200).step(.01).onChange(this.guiChange),t.add(this.guiObj,"offset",0,1e3).onChange(this.guiChange),t.add(this.guiObj,"progress",0,700).step(1).onChange(this.guiChange),t.add(this.guiObj,"force",0,20).step(.01).onChange(this.guiChange),t.add(this.guiObj,"posX",0,1).step(.01).onChange(this.guiChange),t.add(this.guiObj,"colorDivider",0,600).onChange(this.guiChange),t.add(this.guiObj,"animate")}},{key:"setRender",value:function(){this._renderer=new zE({canvas:this.canvas,antialias:!0}),this._renderer.autoClear=!1,this._renderer.outputEncoding=Xv,this._renderer.shadowMap.enabled=!0}},{key:"setScene",value:function(){this._scene=new UE}},{key:"setCamera",value:function(){this._orthoCamera=new yw(-this.el.offsetWidth/2,this.el.offsetWidth/2,this.el.offsetHeight/2,-this.el.offsetHeight/2,0,10)}},{key:"setCanvasTexture",value:function(){var t=document.createElement("canvas");this._textureCanvas=new Gy(t),this._textureCanvas.needsUpdate=!0,this._loaderCanvas=new yet({canvas:t,color:"black"})}},{key:"setPlane",value:function(){var t=this.el.offsetWidth,e=this.el.offsetHeight,n=new sw(t,e,1,1);this._material=new V_({uniforms:{uProgress:{value:this.guiObj.progress},map:{value:this._textureCanvas},uResolution:{value:new Ay(this.el.offsetWidth,this.el.offsetHeight)},uNoiseSpread:{value:this.guiObj.noiseSpread},uNoisePrecision:{value:this.guiObj.noisePrecision},uOffset:{value:this.guiObj.offset},uNoiseSpread2:{value:this.guiObj.noiseSpread2},uforce:{value:this.guiObj.force},uPosX:{value:this.guiObj.posX},uColorDivider:{value:this.guiObj.colorDivider}},vertexShader:HZ,fragmentShader:"precision highp float;\n#define GLSLIFY 1\n\nuniform sampler2D map;\nuniform vec3 diffuse;\nuniform float opacity;\n\nuniform float uTime;\nuniform vec3 uColor;\nuniform float uProgress;\nuniform float uforce;\nuniform vec2 uResolution;\nuniform float uDpr;\nuniform float uNoiseSpread;\nuniform float uNoiseSpread2;\nuniform float uNoisePrecision;\nuniform float uOffset;\nuniform float uPosX;\nuniform float uColorDivider;\nuniform vec3 uBkgColor;\n\nvarying vec2 vUv;\n\n#define _PerlinPrecision 8.0\n#define _PerlinOctaves 8.0\n#define _PerlinSeed 0.0\n\nfloat rnd(vec2 xy) {\n    return fract(sin(dot(xy, vec2(12.9898-_PerlinSeed, 78.233+_PerlinSeed)))* (43758.5453+_PerlinSeed));\n}\n\nfloat inter(float a, float b, float x) {\n    //return a*(1.0-x) + b*x; // Linear interpolation\n\n    float f = (1.0 - cos(x * 3.1415927)) * 0.5; // Cosine interpolation\n    return a*(1.0-f) + b*f;\n}\n\nfloat perlin(vec2 uv, float _Precision) {\n    float a,b,c,d, coef1,coef2, t, p;\n\n    t = _Precision;\t\t\t\t\t// Precision\n    p = 0.0;\t\t\t\t\t\t\t\t// Final heightmap value\n\n    for (float i=0.0; i<_PerlinOctaves; i++) {\n        a = rnd(vec2(floor(t*uv.x)/t, floor(t*uv.y)/t));\t//\ta----b\n        b = rnd(vec2(ceil(t*uv.x)/t, floor(t*uv.y)/t));\t\t//\t|    |\n        c = rnd(vec2(floor(t*uv.x)/t, ceil(t*uv.y)/t));\t\t//\tc----d\n        d = rnd(vec2(ceil(t*uv.x)/t, ceil(t*uv.y)/t));\n\n        if((ceil(t*uv.x)/t) == 1.0)\n        {\n            b = rnd(vec2(0.0, floor(t*uv.y)/t));\n            d = rnd(vec2(0.0, ceil(t*uv.y)/t));\n        }\n\n        coef1 = fract(t*uv.x);\n        coef2 = fract(t*uv.y);\n        p += inter(inter(a,b,coef1), inter(c,d,coef1), coef2) * (1.0/pow(2.0,(i+0.6)));\n        t *= 2.0;\n    }\n    return p;\n}\n\nvoid main() {\n\n  vec4 diffuseColor = vec4( diffuse, opacity );\n\n  #include <map_fragment>\n  // vec2 uv = gl_FragCoord.xy / uResolution.xy - 0.5 * uDpr;\n// texture\n  // vec4 texture = texture2D(map, vUv);\n\n  // Uvs\n  vec2 uv = gl_FragCoord.xy / (uResolution.xy);\n  vec2 st = uv;\n  // make it square\n  st.x *= uResolution.x / uResolution.y;\n  float noise = perlin(st, uNoisePrecision);\n\n  // displacement 1\n  vec2 texCoord = vUv;\n  vec2 displacementCenter = vec2(uPosX, .5);\n  vec2 displacement = normalize(texCoord - displacementCenter);\n  float distanceR = length(displacement);\n\n  float radius = noise / 2. * uProgress;\n  float percent = 0.;\n\n  if (distanceR < radius) {\n    percent = 1.0 - distanceR / (radius / 1.);\n    percent = pow(percent, uOffset);\n    displacement *= percent * uNoiseSpread;\n    texCoord -= displacement;\n  }\n\n  vec4 textureDisplace1 = texture2D(map, texCoord);\n\n  // displacement 2\n  texCoord = vUv;\n  vec2 displacement2 = normalize(texCoord - displacementCenter);\n  float distanceR2 = length(displacement2);\n\n  float radius2 = noise / 2. * (uProgress - 0.);\n  percent = 0.;\n\n  if (distanceR2 < radius2) {\n    percent = 1.0 - distanceR2 / (radius2 / 1.);\n    percent = pow(percent, uOffset);\n    displacement2 *= percent * uNoiseSpread2;\n    texCoord -= displacement2;\n  }\n\n  vec4 textureDisplace2 = texture2D(map, texCoord);\n\n  // vec4 bkg = vec4(uBkgColor, 0.5);\n\n  gl_FragColor = textureDisplace1 * textureDisplace2;\n}\n",transparent:!0}),this.mesh=new j_(n,this._material),this._scene.add(this.mesh)}},{key:"events",value:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],e=t?"addEventListener":"removeEventListener";window[e]("resize",this.handleResize,{passive:!0}),this.el[e]("mouseenter",this.handleMouseenter),this.el[e]("mouseleave",this.handleMouseleave),this.el[e]("click",this.handleClick),t?ti.ticker.add(this.render):ti.ticker.remove(this.render)}},{key:"destroy",value:function(){var t,e=this;null!==(t=this.canvas)&&void 0!==t&&t.parentNode&&this.canvas.parentNode.removeChild(this.canvas),this.events(!1),this._scene.traverse((function(t){var n;t instanceof j_&&(null===(n=t.material)||void 0===n||n.dispose(),e._scene.remove(t))}))}}],e&&lnt(t.prototype,e),n&&lnt(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,n}();function fnt(t){return fnt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},fnt(t)}function hnt(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,ynt(r.key),r)}}function pnt(t,e,n){return e=gnt(e),function(t,e){if(e&&("object"===fnt(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,mnt()?Reflect.construct(e,n||[],gnt(t).constructor):e.apply(t,n))}function mnt(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(mnt=function(){return!!t})()}function gnt(t){return gnt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},gnt(t)}function vnt(t,e){return vnt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},vnt(t,e)}function ynt(t){var e=function(t,e){if("object"!=fnt(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=fnt(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==fnt(e)?e:e+""}var bnt=function(t){function e(t,n){var r,i,o,a;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),r=pnt(this,e,[t,n]),i=r,a=function(){if(r.webgl.loaded){r.centerWrapper.style.willChange="opacity";var t=ti.timeline();t.to(r.centerWrapper,{opacity:0,duration:.7,ease:"sine.inOut"},0),t.to(r.element,{display:"none"}),t.add((function(){r.webgl.destroy(),r.emit("start-watercolor-scene")}))}},(o=ynt(o="enter"))in i?Object.defineProperty(i,o,{value:a,enumerable:!0,configurable:!0,writable:!0}):i[o]=a,r.experienceEl=document.querySelector('[data-component="WatercolorExperience"]'),r.centerWrapper=r.element.querySelector(".center-wrapper"),r.animatedCircle=r.element.querySelector(".animated-circle"),r.circles=r.element.querySelectorAll(".loader-circle"),r.midW=r.element.querySelector(".middle-w"),r.text=r.element.querySelector(".enter-description"),r.loaded=!1,r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&vnt(t,e)}(e,t),n=e,(r=[{key:"init",value:function(){EY&&(this.skip=!0,this.element.style.display="none"),this.webgl=new dnt(this.midW,this.text,this.components.get(this.experienceEl))}},{key:"attach",value:function(){var t=this;SW.init().then((function(){t.webgl.init((function(){t.skip?t.emit("start-watercolor-scene"):t.enter()}),t.skip)}))}},{key:"detach",value:function(){this.webgl.destroy()}}])&&hnt(n.prototype,r),i&&hnt(n,i),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,i}(Yp);function _nt(t){return _nt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_nt(t)}function wnt(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Cnt(r.key),r)}}function Ant(t,e,n){return e=xnt(e),function(t,e){if(e&&("object"===_nt(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,Ent()?Reflect.construct(e,n||[],xnt(t).constructor):e.apply(t,n))}function Ent(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(Ent=function(){return!!t})()}function xnt(t){return xnt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},xnt(t)}function Snt(t,e){return Snt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Snt(t,e)}function Tnt(t,e,n){return(e=Cnt(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Cnt(t){var e=function(t,e){if("object"!=_nt(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=_nt(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==_nt(e)?e:e+""}var Int=function(t){function e(t,n){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),Tnt(r=Ant(this,e,[t,n]),"handleScroll",(function(){r._scroll=window.scrollY})),Tnt(r,"resize",(function(){r._parallaxEnabled=!!window.matchMedia("(min-width: 1280px)").matches,r._setParallaxRect()})),Tnt(r,"handleRaf",(function(){var t=zY.dimensions.outerHeight;if(r._advantagesHeader&&r._advantagesHeaderRect&&!SW.gpu.isMobile){var e=r._advantagesHeaderRect,n=A0(e.top-r._scroll,[-t+e.height,e.height],[0,1]),i=.2*t;r._advantagesHeaderTransform=i*(r._parallaxEnabled?n:0),r._advantagesHeaderTransform<2*i&&(r._advantagesHeader.style.transform="translateY(".concat(r._advantagesHeaderTransform,"px)"))}})),r._handleRestart=r._handleRestart.bind(r),r._advantagesSection=r.element,r._advantagesHeader=r.element.querySelector(".advantages-header"),r._advantagesContent=r.element.querySelector(".advantages-content"),r._advantagesContentTitle=r.element.querySelector(".advantages-content .a-title"),r._advantagesContentSteps=r.element.querySelectorAll(".advantages-content .a-step-wrapper"),r._advantagesContentCta=r.element.querySelector(".advantages-content .a-cta-wrapper"),r._advantagesContentGiftCta=r.element.querySelector(".advantages-content .gift-card"),r._advantagesRestartCta=r.element.querySelector(".advantages-footer .xp-restart"),r._advantagesHeaderTransform=0,r._advantagesContentTransform=0,r._parallaxEnabled=!1,r._scroll=0,r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Snt(t,e)}(e,t),n=e,r=[{key:"attach",value:function(){var t=[];this._advantagesSection&&(this._advantagesHeader.style.transform="translateY(0%)",t.push(this._advantagesHeader,this._advantagesContentTitle,this._advantagesContentCta,this._advantagesContentGiftCta),this._advantagesContentSteps.forEach((function(e){t.push(e)}))),this.events(!0),this.handleScroll(),this.resize(),this._setIntersectionObserver(t),xY&&this.scrollTo(0,1)}},{key:"detach",value:function(){var t;this.events(!1),null===(t=this._observer)||void 0===t||t.disconnect()}},{key:"events",value:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],e=t?"add":"remove";ti.ticker[e](this.handleRaf);var n=t?"addEventListener":"removeEventListener";window[n]("scroll",this.handleScroll,{passive:!0}),window[n]("resize",this.resize),this._advantagesRestartCta[n]("click",this._handleRestart)}},{key:"scrollTo",value:function(){var t={y:0};ti.to(t,{y:1*KY._height,duration:0,delay:1,onUpdate:function(){return window.scrollTo(0,t.y)}})}},{key:"_setIntersectionObserver",value:function(t){var e=this;this._observer=new IntersectionObserver(this._handleIntersection,{root:null,rootMargin:"0px",threshold:0}),t.forEach((function(t){e._observer.observe(t)}))}},{key:"_handleIntersection",value:function(t,e){t.forEach((function(t){t.isIntersecting?t.target.classList.add("show"):t.target.classList.remove("show")}))}},{key:"_handleRestart",value:function(){this.emit("restart-watercolor-scene")}},{key:"_setParallaxRect",value:function(){this._advantagesSection&&(this._advantagesHeaderRect=knt(this._advantagesHeader,this._scroll-this._advantagesHeaderTransform),this._advantagesContentRect=knt(this._advantagesContent,this._scroll-this._advantagesContentTransform))}}],r&&wnt(n.prototype,r),i&&wnt(n,i),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,i}(Yp);function knt(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=t.getBoundingClientRect();return new DOMRect(n.x,n.y+e,n.width,n.height)}function Pnt(t){return Pnt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Pnt(t)}function Rnt(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Ont(r.key),r)}}function Ont(t){var e=function(t,e){if("object"!=Pnt(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=Pnt(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Pnt(e)?e:e+""}function Mnt(t,e,n){return e=Dnt(e),function(t,e){if(e&&("object"===Pnt(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,Lnt()?Reflect.construct(e,n||[],Dnt(t).constructor):e.apply(t,n))}function Lnt(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(Lnt=function(){return!!t})()}function Dnt(t){return Dnt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Dnt(t)}function Nnt(t,e){return Nnt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Nnt(t,e)}var Bnt=function(t){function e(t){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=Mnt(this,e,[t])).dependencies.add(af),n.dependencies.add(vf),n.selector='a:not(.no-history):not([target="_blank"])',n.linkClicked=n.linkClicked.bind(n),n.enabled=!0,n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Nnt(t,e)}(e,t),n=e,r=[{key:"priority",get:function(){return 10}},{key:"enabled",get:function(){return this._enabled},set:function(t){var e=this;this._enabled!=t&&(this._enabled=t,t&&this.links&&this.links.forEach((function(t){return t.removeEventListener("click",e.linkClicked)})))}},{key:"linkClicked",value:function(t){var e,n=t.currentTarget.getAttribute("href");if(n){var r=new pf(n),i=null==r||null===(e=r.path)||void 0===e?void 0:e.includes("register/membership");r.external||i||(t.preventDefault(),this.bootstrap.get(vf).set(n))}}},{key:"after",value:function(){var t=this;this.links&&this.links.forEach((function(e){return e.removeEventListener("click",t.linkClicked)})),this._enabled&&(this.links=document.querySelectorAll(this.selector),this.links&&this.links.forEach((function(e){return e.addEventListener("click",t.linkClicked)})))}}],r&&Rnt(n.prototype,r),i&&Rnt(n,i),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,i}(nf);function jnt(t){return jnt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},jnt(t)}function znt(){znt=function(){return e};var t,e={},n=Object.prototype,r=n.hasOwnProperty,i=Object.defineProperty||function(t,e,n){t[e]=n.value},o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",s=o.asyncIterator||"@@asyncIterator",l=o.toStringTag||"@@toStringTag";function u(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,n){return t[e]=n}}function c(t,e,n,r){var o=e&&e.prototype instanceof v?e:v,a=Object.create(o.prototype),s=new P(r||[]);return i(a,"_invoke",{value:T(t,n,s)}),a}function d(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}e.wrap=c;var f="suspendedStart",h="suspendedYield",p="executing",m="completed",g={};function v(){}function y(){}function b(){}var _={};u(_,a,(function(){return this}));var w=Object.getPrototypeOf,A=w&&w(w(R([])));A&&A!==n&&r.call(A,a)&&(_=A);var E=b.prototype=v.prototype=Object.create(_);function x(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function S(t,e){function n(i,o,a,s){var l=d(t[i],t,o);if("throw"!==l.type){var u=l.arg,c=u.value;return c&&"object"==jnt(c)&&r.call(c,"__await")?e.resolve(c.__await).then((function(t){n("next",t,a,s)}),(function(t){n("throw",t,a,s)})):e.resolve(c).then((function(t){u.value=t,a(u)}),(function(t){return n("throw",t,a,s)}))}s(l.arg)}var o;i(this,"_invoke",{value:function(t,r){function i(){return new e((function(e,i){n(t,r,e,i)}))}return o=o?o.then(i,i):i()}})}function T(e,n,r){var i=f;return function(o,a){if(i===p)throw Error("Generator is already running");if(i===m){if("throw"===o)throw a;return{value:t,done:!0}}for(r.method=o,r.arg=a;;){var s=r.delegate;if(s){var l=C(s,r);if(l){if(l===g)continue;return l}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(i===f)throw i=m,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);i=p;var u=d(e,n,r);if("normal"===u.type){if(i=r.done?m:h,u.arg===g)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(i=m,r.method="throw",r.arg=u.arg)}}}function C(e,n){var r=n.method,i=e.iterator[r];if(i===t)return n.delegate=null,"throw"===r&&e.iterator.return&&(n.method="return",n.arg=t,C(e,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),g;var o=d(i,e.iterator,n.arg);if("throw"===o.type)return n.method="throw",n.arg=o.arg,n.delegate=null,g;var a=o.arg;return a?a.done?(n[e.resultName]=a.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=t),n.delegate=null,g):a:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,g)}function I(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function k(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function P(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(I,this),this.reset(!0)}function R(e){if(e||""===e){var n=e[a];if(n)return n.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var i=-1,o=function n(){for(;++i<e.length;)if(r.call(e,i))return n.value=e[i],n.done=!1,n;return n.value=t,n.done=!0,n};return o.next=o}}throw new TypeError(jnt(e)+" is not iterable")}return y.prototype=b,i(E,"constructor",{value:b,configurable:!0}),i(b,"constructor",{value:y,configurable:!0}),y.displayName=u(b,l,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===y||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,b):(t.__proto__=b,u(t,l,"GeneratorFunction")),t.prototype=Object.create(E),t},e.awrap=function(t){return{__await:t}},x(S.prototype),u(S.prototype,s,(function(){return this})),e.AsyncIterator=S,e.async=function(t,n,r,i,o){void 0===o&&(o=Promise);var a=new S(c(t,n,r,i),o);return e.isGeneratorFunction(n)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},x(E),u(E,l,"Generator"),u(E,a,(function(){return this})),u(E,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),n=[];for(var r in e)n.push(r);return n.reverse(),function t(){for(;n.length;){var r=n.pop();if(r in e)return t.value=r,t.done=!1,t}return t.done=!0,t}},e.values=R,P.prototype={constructor:P,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(k),!e)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function i(r,i){return s.type="throw",s.arg=e,n.next=r,i&&(n.method="next",n.arg=t),!!i}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],s=a.completion;if("root"===a.tryLoc)return i("end");if(a.tryLoc<=this.prev){var l=r.call(a,"catchLoc"),u=r.call(a,"finallyLoc");if(l&&u){if(this.prev<a.catchLoc)return i(a.catchLoc,!0);if(this.prev<a.finallyLoc)return i(a.finallyLoc)}else if(l){if(this.prev<a.catchLoc)return i(a.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return i(a.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=t,a.arg=e,o?(this.method="next",this.next=o.finallyLoc,g):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),g},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),k(n),g}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var i=r.arg;k(n)}return i}}throw Error("illegal catch attempt")},delegateYield:function(e,n,r){return this.delegate={iterator:R(e),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=t),g}},e}function Fnt(t,e,n,r,i,o,a){try{var s=t[o](a),l=s.value}catch(t){return void n(t)}s.done?e(l):Promise.resolve(l).then(r,i)}function Unt(t){return function(){var e=this,n=arguments;return new Promise((function(r,i){var o=t.apply(e,n);function a(t){Fnt(o,r,i,a,s,"next",t)}function s(t){Fnt(o,r,i,a,s,"throw",t)}a(void 0)}))}}function qnt(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Wnt(r.key),r)}}function Gnt(t,e,n){return e=Vnt(e),function(t,e){if(e&&("object"===jnt(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,Hnt()?Reflect.construct(e,n||[],Vnt(t).constructor):e.apply(t,n))}function Hnt(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(Hnt=function(){return!!t})()}function Vnt(t){return Vnt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Vnt(t)}function Qnt(t,e){return Qnt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Qnt(t,e)}function Wnt(t){var e=function(t,e){if("object"!=jnt(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=jnt(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==jnt(e)?e:e+""}var Ynt=function(t){function e(t){var n,r,i,o;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),n=Gnt(this,e,[t]),r=n,o=function(t){n.bootstrap.transitionColor=t.currentTarget.dataset.color},(i=Wnt(i="onClickUniver"))in r?Object.defineProperty(r,i,{value:o,enumerable:!0,configurable:!0,writable:!0}):r[i]=o,n.dependencies.add(qf),n.panelForms=document.querySelector("#panel-forms"),n.ctaPanelForms=document.querySelectorAll(".panel-opener"),n.ctaUnivers=document.querySelectorAll(".cta-univers"),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Qnt(t,e)}(e,t),n=e,r=[{key:"components",get:function(){return this.bootstrap.get(qf).components}},{key:"_panelForms",get:function(){return this.components.get(this.panelForms)}},{key:"before",value:(a=Unt(znt().mark((function t(){var e=this;return znt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:this._panelForms&&this.ctaPanelForms.forEach((function(t){t.removeEventListener("click",e._panelForms.onOpen,!0)})),this.ctaUnivers.forEach((function(t){t.removeEventListener("click",e.onClickUniver,!0)}));case 2:case"end":return t.stop()}}),t,this)}))),function(){return a.apply(this,arguments)})},{key:"after",value:(o=Unt(znt().mark((function t(){var e=this;return znt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:this.ctaPanelForms=document.querySelectorAll(".panel-opener"),this.ctaPanelForms.forEach((function(t){t.addEventListener("click",e._panelForms.onOpen,!0)})),this.ctaUnivers=document.querySelectorAll(".cta-univers"),this.ctaUnivers.forEach((function(t){t.classList.toggle("active",t.dataset.color==e.bootstrap.transitionColor),t.addEventListener("click",e.onClickUniver,!0)}));case 4:case"end":return t.stop()}}),t,this)}))),function(){return o.apply(this,arguments)})}],r&&qnt(n.prototype,r),i&&qnt(n,i),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,i,o,a}(nf);function Knt(t){return Knt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Knt(t)}function Xnt(){Xnt=function(){return e};var t,e={},n=Object.prototype,r=n.hasOwnProperty,i=Object.defineProperty||function(t,e,n){t[e]=n.value},o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",s=o.asyncIterator||"@@asyncIterator",l=o.toStringTag||"@@toStringTag";function u(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,n){return t[e]=n}}function c(t,e,n,r){var o=e&&e.prototype instanceof v?e:v,a=Object.create(o.prototype),s=new P(r||[]);return i(a,"_invoke",{value:T(t,n,s)}),a}function d(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}e.wrap=c;var f="suspendedStart",h="suspendedYield",p="executing",m="completed",g={};function v(){}function y(){}function b(){}var _={};u(_,a,(function(){return this}));var w=Object.getPrototypeOf,A=w&&w(w(R([])));A&&A!==n&&r.call(A,a)&&(_=A);var E=b.prototype=v.prototype=Object.create(_);function x(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function S(t,e){function n(i,o,a,s){var l=d(t[i],t,o);if("throw"!==l.type){var u=l.arg,c=u.value;return c&&"object"==Knt(c)&&r.call(c,"__await")?e.resolve(c.__await).then((function(t){n("next",t,a,s)}),(function(t){n("throw",t,a,s)})):e.resolve(c).then((function(t){u.value=t,a(u)}),(function(t){return n("throw",t,a,s)}))}s(l.arg)}var o;i(this,"_invoke",{value:function(t,r){function i(){return new e((function(e,i){n(t,r,e,i)}))}return o=o?o.then(i,i):i()}})}function T(e,n,r){var i=f;return function(o,a){if(i===p)throw Error("Generator is already running");if(i===m){if("throw"===o)throw a;return{value:t,done:!0}}for(r.method=o,r.arg=a;;){var s=r.delegate;if(s){var l=C(s,r);if(l){if(l===g)continue;return l}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(i===f)throw i=m,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);i=p;var u=d(e,n,r);if("normal"===u.type){if(i=r.done?m:h,u.arg===g)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(i=m,r.method="throw",r.arg=u.arg)}}}function C(e,n){var r=n.method,i=e.iterator[r];if(i===t)return n.delegate=null,"throw"===r&&e.iterator.return&&(n.method="return",n.arg=t,C(e,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),g;var o=d(i,e.iterator,n.arg);if("throw"===o.type)return n.method="throw",n.arg=o.arg,n.delegate=null,g;var a=o.arg;return a?a.done?(n[e.resultName]=a.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=t),n.delegate=null,g):a:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,g)}function I(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function k(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function P(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(I,this),this.reset(!0)}function R(e){if(e||""===e){var n=e[a];if(n)return n.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var i=-1,o=function n(){for(;++i<e.length;)if(r.call(e,i))return n.value=e[i],n.done=!1,n;return n.value=t,n.done=!0,n};return o.next=o}}throw new TypeError(Knt(e)+" is not iterable")}return y.prototype=b,i(E,"constructor",{value:b,configurable:!0}),i(b,"constructor",{value:y,configurable:!0}),y.displayName=u(b,l,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===y||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,b):(t.__proto__=b,u(t,l,"GeneratorFunction")),t.prototype=Object.create(E),t},e.awrap=function(t){return{__await:t}},x(S.prototype),u(S.prototype,s,(function(){return this})),e.AsyncIterator=S,e.async=function(t,n,r,i,o){void 0===o&&(o=Promise);var a=new S(c(t,n,r,i),o);return e.isGeneratorFunction(n)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},x(E),u(E,l,"Generator"),u(E,a,(function(){return this})),u(E,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),n=[];for(var r in e)n.push(r);return n.reverse(),function t(){for(;n.length;){var r=n.pop();if(r in e)return t.value=r,t.done=!1,t}return t.done=!0,t}},e.values=R,P.prototype={constructor:P,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(k),!e)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function i(r,i){return s.type="throw",s.arg=e,n.next=r,i&&(n.method="next",n.arg=t),!!i}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],s=a.completion;if("root"===a.tryLoc)return i("end");if(a.tryLoc<=this.prev){var l=r.call(a,"catchLoc"),u=r.call(a,"finallyLoc");if(l&&u){if(this.prev<a.catchLoc)return i(a.catchLoc,!0);if(this.prev<a.finallyLoc)return i(a.finallyLoc)}else if(l){if(this.prev<a.catchLoc)return i(a.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return i(a.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=t,a.arg=e,o?(this.method="next",this.next=o.finallyLoc,g):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),g},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),k(n),g}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var i=r.arg;k(n)}return i}}throw Error("illegal catch attempt")},delegateYield:function(e,n,r){return this.delegate={iterator:R(e),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=t),g}},e}function $nt(t,e,n,r,i,o,a){try{var s=t[o](a),l=s.value}catch(t){return void n(t)}s.done?e(l):Promise.resolve(l).then(r,i)}function Znt(t){return function(){var e=this,n=arguments;return new Promise((function(r,i){var o=t.apply(e,n);function a(t){$nt(o,r,i,a,s,"next",t)}function s(t){$nt(o,r,i,a,s,"throw",t)}a(void 0)}))}}function Jnt(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,trt(r.key),r)}}function trt(t){var e=function(t,e){if("object"!=Knt(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=Knt(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Knt(e)?e:e+""}function ert(t,e,n){return e=rrt(e),function(t,e){if(e&&("object"===Knt(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,nrt()?Reflect.construct(e,n||[],rrt(t).constructor):e.apply(t,n))}function nrt(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(nrt=function(){return!!t})()}function rrt(t){return rrt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},rrt(t)}function irt(t,e){return irt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},irt(t,e)}var ort=function(t){function e(t){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=ert(this,e,[t])).first=!0,n.$loader=document.querySelector("#loader"),n.header=document.getElementById("header"),n.root=document.getElementById("root"),n.footer=document.getElementById("footer"),n.skipRegister=!1,n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&irt(t,e)}(e,t),n=e,r=[{key:"before",value:(a=Znt(Xnt().mark((function t(){return Xnt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:case"end":return t.stop()}}),t)}))),function(){return a.apply(this,arguments)})},{key:"after",value:(o=Znt(Xnt().mark((function t(){var e,n,r,i=this;return Xnt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:this.bootstrap.get(vf).router.current.toString(),n=new URLSearchParams(null===(e=window)||void 0===e||null===(e=e.location)||void 0===e?void 0:e.search),this.skipRegister=n.has("skipRegister"),window.addEventListener("scroll",this.preventScroll,{capture:!0,passive:!1}),window.addEventListener("wheel",this.preventScroll,{capture:!0,passive:!1}),r=ti.timeline(),this.first&&(window.loaderTimeout&&clearTimeout(window.loaderTimeout),EY||this.skipRegister?(r.add((function(){i.emit("loaded"),window.removeEventListener("scroll",i.preventScroll,{capture:!0,passive:!1}),window.removeEventListener("wheel",i.preventScroll,{capture:!0,passive:!1}),i.$loader.remove()}),"<"),this.skipRegister&&(this.emit("animation"),r.to([this.header,this.root,document.body,this.footer],{opacity:1,duration:.2,ease:"none"},">"))):(r.to(window,{loaderProgress:100,duration:.8},0),r.add((function(){i.emit("animation")}),.8),r.to(this.$loader,{opacity:0,duration:.2,ease:"none"}),r.set(this.$loader,{display:"none"}),r.add((function(){i.emit("loaded"),window.removeEventListener("scroll",i.preventScroll,{capture:!0,passive:!1}),window.removeEventListener("wheel",i.preventScroll,{capture:!0,passive:!1})})),r.add((function(){return i.$loader.remove()}))));case 8:case"end":return t.stop()}}),t,this)}))),function(){return o.apply(this,arguments)})},{key:"preventScroll",value:function(t){t.stopPropagation(),t.preventDefault()}}],r&&Jnt(n.prototype,r),i&&Jnt(n,i),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,i,o,a}(nf);function art(t){return art="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},art(t)}function srt(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,frt(r.key),r)}}function lrt(t,e,n){return e=crt(e),function(t,e){if(e&&("object"===art(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,urt()?Reflect.construct(e,n||[],crt(t).constructor):e.apply(t,n))}function urt(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(urt=function(){return!!t})()}function crt(t){return crt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},crt(t)}function drt(t,e){return drt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},drt(t,e)}function frt(t){var e=function(t,e){if("object"!=art(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=art(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==art(e)?e:e+""}function hrt(t,e,n){!function(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}(t,e),e.set(t,n)}function prt(t,e,n){if("function"==typeof t?t===e:t.has(e))return arguments.length<3?e:n;throw new TypeError("Private element is not present on this object")}var mrt=new WeakMap,grt=function(t){function e(t){var n,r,i,o;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),hrt(n=lrt(this,e,[t]),mrt,[]),r=n,o=function(){(function(t,e){return t.get(prt(t,e))})(mrt,n).forEach((function(t){var e,n=parseFloat(t.getAttribute("data-lag"))||1;t.timeline=ti.timeline({scrollTrigger:{trigger:t,start:"top ".concat("first"===t.dataset.parallaxOption?"top":"80%"),end:"bottom top",scrub:.9}});var r="picture"===t.dataset.parallax?(null===(e=t.querySelector("img"))||void 0===e?void 0:e.offsetHeight)/16*n:50;t.timeline.fromTo("picture"===t.dataset.parallax?t.querySelectorAll("img"):t,{y:"first"===t.dataset.parallaxOption?0:-r},{y:r})}))},(i=frt(i="buildSts"))in r?Object.defineProperty(r,i,{value:o,enumerable:!0,configurable:!0,writable:!0}):r[i]=o,n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&drt(t,e)}(e,t),n=e,r=[{key:"before",value:function(){}},{key:"after",value:function(){!function(t,e,n){t.set(prt(t,e),n)}(mrt,this,document.querySelectorAll("[data-parallax]")),this.buildSts()}}],r&&srt(n.prototype,r),i&&srt(n,i),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,i}(nf);function vrt(t){var e=Df()(t),n=null;return e.forEach((function(t){if(t.d>1){if(window.devicePixelRatio>1)return t.url}else n=t.url})),n}function yrt(t){var e,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",r=t.querySelectorAll(":scope picture"+n),i=!(!(e=document.createElement("canvas")).getContext||!e.getContext("2d"))&&0==e.toDataURL("image/webp").indexOf("data:image/webp"),o=function(){var t=document.createElement("canvas");return!(!t.getContext||!t.getContext("2d"))&&0==t.toDataURL("image/avif").indexOf("data:image/avif")}(),a=new Set;return r.forEach((function(t){var e=!1,n=t.querySelectorAll(":scope source");if("lazy"===t.querySelector(":scope img").getAttribute("loading"))return!0;var r=!1,s=!1;(i||o)&&n.forEach((function(t){var e=t.getAttribute("media");""!=e&&(window.matchMedia(e).matches&&(n.forEach((function(t){(t.getAttribute("srcset").includes(".webp")||"image/webp"==t.getAttribute("type"))&&(r=!0)})),n.forEach((function(t){(t.getAttribute("srcset").includes(".avif")||"image/avif"==t.getAttribute("type"))&&(s=!0)}))))})),n.forEach((function(t){var n=t.getAttribute("media");if(""!=n&&window.matchMedia(n).matches){if(s&&!t.getAttribute("srcset").includes(".avif"))return!0;if(r&&!t.getAttribute("srcset").includes(".webp"))return!0;e=!0,a.add(vrt(t.getAttribute("srcset")))}})),e||a.add(brt(t))})),a}function brt(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=t.querySelectorAll(":scope img"+e),r=new Set;return n.forEach((function(t){if(""!=t.srcset)return r.add(vrt(t.src));r.add(t.src)})),r}const _rt=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return Array.from(brt(t,e)).concat(Array.from(yrt(t,e))).concat(Array.from(function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=t.querySelectorAll(":scope div"+e),r=new Set;return n.forEach((function(t){var e=window.getComputedStyle(t).backgroundImage;-1==e.indexOf("linear-gradient")&&-1==e.indexOf("radial-gradient")&&"none"!=(e=e.replace('url("',"").replace("url(","").replace('")',"").replace(")",""))&&e.length&&r.add(e)})),r}(t,e)))};function wrt(t){return wrt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},wrt(t)}function Art(){Art=function(){return e};var t,e={},n=Object.prototype,r=n.hasOwnProperty,i=Object.defineProperty||function(t,e,n){t[e]=n.value},o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",s=o.asyncIterator||"@@asyncIterator",l=o.toStringTag||"@@toStringTag";function u(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,n){return t[e]=n}}function c(t,e,n,r){var o=e&&e.prototype instanceof v?e:v,a=Object.create(o.prototype),s=new P(r||[]);return i(a,"_invoke",{value:T(t,n,s)}),a}function d(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}e.wrap=c;var f="suspendedStart",h="suspendedYield",p="executing",m="completed",g={};function v(){}function y(){}function b(){}var _={};u(_,a,(function(){return this}));var w=Object.getPrototypeOf,A=w&&w(w(R([])));A&&A!==n&&r.call(A,a)&&(_=A);var E=b.prototype=v.prototype=Object.create(_);function x(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function S(t,e){function n(i,o,a,s){var l=d(t[i],t,o);if("throw"!==l.type){var u=l.arg,c=u.value;return c&&"object"==wrt(c)&&r.call(c,"__await")?e.resolve(c.__await).then((function(t){n("next",t,a,s)}),(function(t){n("throw",t,a,s)})):e.resolve(c).then((function(t){u.value=t,a(u)}),(function(t){return n("throw",t,a,s)}))}s(l.arg)}var o;i(this,"_invoke",{value:function(t,r){function i(){return new e((function(e,i){n(t,r,e,i)}))}return o=o?o.then(i,i):i()}})}function T(e,n,r){var i=f;return function(o,a){if(i===p)throw Error("Generator is already running");if(i===m){if("throw"===o)throw a;return{value:t,done:!0}}for(r.method=o,r.arg=a;;){var s=r.delegate;if(s){var l=C(s,r);if(l){if(l===g)continue;return l}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(i===f)throw i=m,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);i=p;var u=d(e,n,r);if("normal"===u.type){if(i=r.done?m:h,u.arg===g)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(i=m,r.method="throw",r.arg=u.arg)}}}function C(e,n){var r=n.method,i=e.iterator[r];if(i===t)return n.delegate=null,"throw"===r&&e.iterator.return&&(n.method="return",n.arg=t,C(e,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),g;var o=d(i,e.iterator,n.arg);if("throw"===o.type)return n.method="throw",n.arg=o.arg,n.delegate=null,g;var a=o.arg;return a?a.done?(n[e.resultName]=a.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=t),n.delegate=null,g):a:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,g)}function I(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function k(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function P(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(I,this),this.reset(!0)}function R(e){if(e||""===e){var n=e[a];if(n)return n.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var i=-1,o=function n(){for(;++i<e.length;)if(r.call(e,i))return n.value=e[i],n.done=!1,n;return n.value=t,n.done=!0,n};return o.next=o}}throw new TypeError(wrt(e)+" is not iterable")}return y.prototype=b,i(E,"constructor",{value:b,configurable:!0}),i(b,"constructor",{value:y,configurable:!0}),y.displayName=u(b,l,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===y||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,b):(t.__proto__=b,u(t,l,"GeneratorFunction")),t.prototype=Object.create(E),t},e.awrap=function(t){return{__await:t}},x(S.prototype),u(S.prototype,s,(function(){return this})),e.AsyncIterator=S,e.async=function(t,n,r,i,o){void 0===o&&(o=Promise);var a=new S(c(t,n,r,i),o);return e.isGeneratorFunction(n)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},x(E),u(E,l,"Generator"),u(E,a,(function(){return this})),u(E,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),n=[];for(var r in e)n.push(r);return n.reverse(),function t(){for(;n.length;){var r=n.pop();if(r in e)return t.value=r,t.done=!1,t}return t.done=!0,t}},e.values=R,P.prototype={constructor:P,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(k),!e)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function i(r,i){return s.type="throw",s.arg=e,n.next=r,i&&(n.method="next",n.arg=t),!!i}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],s=a.completion;if("root"===a.tryLoc)return i("end");if(a.tryLoc<=this.prev){var l=r.call(a,"catchLoc"),u=r.call(a,"finallyLoc");if(l&&u){if(this.prev<a.catchLoc)return i(a.catchLoc,!0);if(this.prev<a.finallyLoc)return i(a.finallyLoc)}else if(l){if(this.prev<a.catchLoc)return i(a.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return i(a.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=t,a.arg=e,o?(this.method="next",this.next=o.finallyLoc,g):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),g},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),k(n),g}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var i=r.arg;k(n)}return i}}throw Error("illegal catch attempt")},delegateYield:function(e,n,r){return this.delegate={iterator:R(e),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=t),g}},e}function Ert(t,e,n,r,i,o,a){try{var s=t[o](a),l=s.value}catch(t){return void n(t)}s.done?e(l):Promise.resolve(l).then(r,i)}function xrt(t){return function(){var e=this,n=arguments;return new Promise((function(r,i){var o=t.apply(e,n);function a(t){Ert(o,r,i,a,s,"next",t)}function s(t){Ert(o,r,i,a,s,"throw",t)}a(void 0)}))}}function Srt(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Trt(r.key),r)}}function Trt(t){var e=function(t,e){if("object"!=wrt(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=wrt(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==wrt(e)?e:e+""}function Crt(t,e,n){return e=krt(e),function(t,e){if(e&&("object"===wrt(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,Irt()?Reflect.construct(e,n||[],krt(t).constructor):e.apply(t,n))}function Irt(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(Irt=function(){return!!t})()}function krt(t){return krt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},krt(t)}function Prt(t,e){return Prt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Prt(t,e)}var Rrt=function(t){function e(t){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=Crt(this,e,[t])).dependencies.add(Of),n.loader=new Mf,n.selector="",n.gather=function(){return[]},n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Prt(t,e)}(e,t),n=e,r=[{key:"loaderModule",get:function(){return this.bootstrap.get(Of)}},{key:"before",value:(a=xrt(Art().mark((function t(){return Art().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:this.loader.reset(),this.loaderModule.loader.has(this.loader)||this.loaderModule.loader.add(this.loader);case 2:case"end":return t.stop()}}),t,this)}))),function(){return a.apply(this,arguments)})},{key:"run",value:(o=xrt(Art().mark((function t(){return Art().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.loader.add(_rt(document.body,this.selector)),this.loader.add(this.gather()),t.next=4,this.loaderModule.loader.load();case 4:case"end":return t.stop()}}),t,this)}))),function(){return o.apply(this,arguments)})}],r&&Srt(n.prototype,r),i&&Srt(n,i),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,i,o,a}(rf);function Ort(t,e,n){return Math.max(t,Math.min(e,n))}var Mrt=class{isRunning=!1;value=0;from=0;to=0;currentTime=0;lerp;duration;easing;onUpdate;advance(t){if(!this.isRunning)return;let e=!1;if(this.duration&&this.easing){this.currentTime+=t;const n=Ort(0,this.currentTime/this.duration,1);e=n>=1;const r=e?1:this.easing(n);this.value=this.from+(this.to-this.from)*r}else this.lerp?(this.value=function(t,e,n,r){return function(t,e,n){return(1-n)*t+n*e}(t,e,1-Math.exp(-n*r))}(this.value,this.to,60*this.lerp,t),Math.round(this.value)===this.to&&(this.value=this.to,e=!0)):(this.value=this.to,e=!0);e&&this.stop(),this.onUpdate?.(this.value,e)}stop(){this.isRunning=!1}fromTo(t,e,{lerp:n,duration:r,easing:i,onStart:o,onUpdate:a}){this.from=this.value=t,this.to=e,this.lerp=n,this.duration=r,this.easing=i,this.currentTime=0,this.isRunning=!0,o?.(),this.onUpdate=a}};var Lrt=class{constructor(t,e,{autoResize:n=!0,debounce:r=250}={}){this.wrapper=t,this.content=e,n&&(this.debouncedResize=function(t,e){let n;return function(...r){let i=this;clearTimeout(n),n=setTimeout((()=>{n=void 0,t.apply(i,r)}),e)}}(this.resize,r),this.wrapper instanceof Window?window.addEventListener("resize",this.debouncedResize,!1):(this.wrapperResizeObserver=new ResizeObserver(this.debouncedResize),this.wrapperResizeObserver.observe(this.wrapper)),this.contentResizeObserver=new ResizeObserver(this.debouncedResize),this.contentResizeObserver.observe(this.content)),this.resize()}width=0;height=0;scrollHeight=0;scrollWidth=0;debouncedResize;wrapperResizeObserver;contentResizeObserver;destroy(){this.wrapperResizeObserver?.disconnect(),this.contentResizeObserver?.disconnect(),this.wrapper===window&&this.debouncedResize&&window.removeEventListener("resize",this.debouncedResize,!1)}resize=()=>{this.onWrapperResize(),this.onContentResize()};onWrapperResize=()=>{this.wrapper instanceof Window?(this.width=window.innerWidth,this.height=window.innerHeight):(this.width=this.wrapper.clientWidth,this.height=this.wrapper.clientHeight)};onContentResize=()=>{this.wrapper instanceof Window?(this.scrollHeight=this.content.scrollHeight,this.scrollWidth=this.content.scrollWidth):(this.scrollHeight=this.wrapper.scrollHeight,this.scrollWidth=this.wrapper.scrollWidth)};get limit(){return{x:this.scrollWidth-this.width,y:this.scrollHeight-this.height}}},Drt=class{events={};emit(t,...e){let n=this.events[t]||[];for(let t=0,r=n.length;t<r;t++)n[t]?.(...e)}on(t,e){return this.events[t]?.push(e)||(this.events[t]=[e]),()=>{this.events[t]=this.events[t]?.filter((t=>e!==t))}}off(t,e){this.events[t]=this.events[t]?.filter((t=>e!==t))}destroy(){this.events={}}},Nrt=100/6,Brt={passive:!1},jrt=class{constructor(t,e={wheelMultiplier:1,touchMultiplier:1}){this.element=t,this.options=e,window.addEventListener("resize",this.onWindowResize,!1),this.onWindowResize(),this.element.addEventListener("wheel",this.onWheel,Brt),this.element.addEventListener("touchstart",this.onTouchStart,Brt),this.element.addEventListener("touchmove",this.onTouchMove,Brt),this.element.addEventListener("touchend",this.onTouchEnd,Brt)}touchStart={x:0,y:0};lastDelta={x:0,y:0};window={width:0,height:0};emitter=new Drt;on(t,e){return this.emitter.on(t,e)}destroy(){this.emitter.destroy(),window.removeEventListener("resize",this.onWindowResize,!1),this.element.removeEventListener("wheel",this.onWheel,Brt),this.element.removeEventListener("touchstart",this.onTouchStart,Brt),this.element.removeEventListener("touchmove",this.onTouchMove,Brt),this.element.removeEventListener("touchend",this.onTouchEnd,Brt)}onTouchStart=t=>{const{clientX:e,clientY:n}=t.targetTouches?t.targetTouches[0]:t;this.touchStart.x=e,this.touchStart.y=n,this.lastDelta={x:0,y:0},this.emitter.emit("scroll",{deltaX:0,deltaY:0,event:t})};onTouchMove=t=>{const{clientX:e,clientY:n}=t.targetTouches?t.targetTouches[0]:t,r=-(e-this.touchStart.x)*this.options.touchMultiplier,i=-(n-this.touchStart.y)*this.options.touchMultiplier;this.touchStart.x=e,this.touchStart.y=n,this.lastDelta={x:r,y:i},this.emitter.emit("scroll",{deltaX:r,deltaY:i,event:t})};onTouchEnd=t=>{this.emitter.emit("scroll",{deltaX:this.lastDelta.x,deltaY:this.lastDelta.y,event:t})};onWheel=t=>{let{deltaX:e,deltaY:n,deltaMode:r}=t;e*=1===r?Nrt:2===r?this.window.width:1,n*=1===r?Nrt:2===r?this.window.height:1,e*=this.options.wheelMultiplier,n*=this.options.wheelMultiplier,this.emitter.emit("scroll",{deltaX:e,deltaY:n,event:t})};onWindowResize=()=>{this.window={width:window.innerWidth,height:window.innerHeight}}},zrt=t=>Math.min(1,1.001-Math.pow(2,-10*t)),Frt=class{_isScrolling=!1;_isStopped=!1;_isLocked=!1;_preventNextNativeScrollEvent=!1;_resetVelocityTimeout=null;_rafId=null;isTouching;time=0;userData={};lastVelocity=0;velocity=0;direction=0;options;targetScroll;animatedScroll;animate=new Mrt;emitter=new Drt;dimensions;virtualScroll;constructor({wrapper:t=window,content:e=document.documentElement,eventsTarget:n=t,smoothWheel:r=!0,syncTouch:i=!1,syncTouchLerp:o=.075,touchInertiaExponent:a=1.7,duration:s,easing:l,lerp:u=.1,infinite:c=!1,orientation:d="vertical",gestureOrientation:f=("horizontal"===d?"both":"vertical"),touchMultiplier:h=1,wheelMultiplier:p=1,autoResize:m=!0,prevent:g,virtualScroll:v,overscroll:y=!0,autoRaf:b=!1,anchors:_=!1,autoToggle:w=!1,allowNestedScroll:A=!1,__experimental__naiveDimensions:E=!1,naiveDimensions:x=E,stopInertiaOnNavigate:S=!1}={}){window.lenisVersion="1.3.17",t&&t!==document.documentElement||(t=window),"number"==typeof s&&"function"!=typeof l?l=zrt:"function"==typeof l&&"number"!=typeof s&&(s=1),this.options={wrapper:t,content:e,eventsTarget:n,smoothWheel:r,syncTouch:i,syncTouchLerp:o,touchInertiaExponent:a,duration:s,easing:l,lerp:u,infinite:c,gestureOrientation:f,orientation:d,touchMultiplier:h,wheelMultiplier:p,autoResize:m,prevent:g,virtualScroll:v,overscroll:y,autoRaf:b,anchors:_,autoToggle:w,allowNestedScroll:A,naiveDimensions:x,stopInertiaOnNavigate:S},this.dimensions=new Lrt(t,e,{autoResize:m}),this.updateClassName(),this.targetScroll=this.animatedScroll=this.actualScroll,this.options.wrapper.addEventListener("scroll",this.onNativeScroll,!1),this.options.wrapper.addEventListener("scrollend",this.onScrollEnd,{capture:!0}),(this.options.anchors||this.options.stopInertiaOnNavigate)&&this.options.wrapper.addEventListener("click",this.onClick,!1),this.options.wrapper.addEventListener("pointerdown",this.onPointerDown,!1),this.virtualScroll=new jrt(n,{touchMultiplier:h,wheelMultiplier:p}),this.virtualScroll.on("scroll",this.onVirtualScroll),this.options.autoToggle&&(this.checkOverflow(),this.rootElement.addEventListener("transitionend",this.onTransitionEnd,{passive:!0})),this.options.autoRaf&&(this._rafId=requestAnimationFrame(this.raf))}destroy(){this.emitter.destroy(),this.options.wrapper.removeEventListener("scroll",this.onNativeScroll,!1),this.options.wrapper.removeEventListener("scrollend",this.onScrollEnd,{capture:!0}),this.options.wrapper.removeEventListener("pointerdown",this.onPointerDown,!1),(this.options.anchors||this.options.stopInertiaOnNavigate)&&this.options.wrapper.removeEventListener("click",this.onClick,!1),this.virtualScroll.destroy(),this.dimensions.destroy(),this.cleanUpClassName(),this._rafId&&cancelAnimationFrame(this._rafId)}on(t,e){return this.emitter.on(t,e)}off(t,e){return this.emitter.off(t,e)}onScrollEnd=t=>{t instanceof CustomEvent||"smooth"!==this.isScrolling&&!1!==this.isScrolling||t.stopPropagation()};dispatchScrollendEvent=()=>{this.options.wrapper.dispatchEvent(new CustomEvent("scrollend",{bubbles:this.options.wrapper===window,detail:{lenisScrollEnd:!0}}))};get overflow(){const t=this.isHorizontal?"overflow-x":"overflow-y";return getComputedStyle(this.rootElement)[t]}checkOverflow(){["hidden","clip"].includes(this.overflow)?this.internalStop():this.internalStart()}onTransitionEnd=t=>{t.propertyName.includes("overflow")&&this.checkOverflow()};setScroll(t){this.isHorizontal?this.options.wrapper.scrollTo({left:t,behavior:"instant"}):this.options.wrapper.scrollTo({top:t,behavior:"instant"})}onClick=t=>{const e=t.composedPath().filter((t=>t instanceof HTMLAnchorElement&&t.getAttribute("href")));if(this.options.anchors){const t=e.find((t=>t.getAttribute("href")?.includes("#")));if(t){const e=t.getAttribute("href");if(e){const t="object"==typeof this.options.anchors&&this.options.anchors?this.options.anchors:void 0,n=`#${e.split("#")[1]}`;this.scrollTo(n,t)}}}if(this.options.stopInertiaOnNavigate){e.find((t=>t.host===window.location.host))&&this.reset()}};onPointerDown=t=>{1===t.button&&this.reset()};onVirtualScroll=t=>{if("function"==typeof this.options.virtualScroll&&!1===this.options.virtualScroll(t))return;const{deltaX:e,deltaY:n,event:r}=t;if(this.emitter.emit("virtual-scroll",{deltaX:e,deltaY:n,event:r}),r.ctrlKey)return;if(r.lenisStopPropagation)return;const i=r.type.includes("touch"),o=r.type.includes("wheel");this.isTouching="touchstart"===r.type||"touchmove"===r.type;const a=0===e&&0===n;if(this.options.syncTouch&&i&&"touchstart"===r.type&&a&&!this.isStopped&&!this.isLocked)return void this.reset();const s="vertical"===this.options.gestureOrientation&&0===n||"horizontal"===this.options.gestureOrientation&&0===e;if(a||s)return;let l=r.composedPath();l=l.slice(0,l.indexOf(this.rootElement));const u=this.options.prevent;if(l.find((t=>t instanceof HTMLElement&&("function"==typeof u&&u?.(t)||t.hasAttribute?.("data-lenis-prevent")||i&&t.hasAttribute?.("data-lenis-prevent-touch")||o&&t.hasAttribute?.("data-lenis-prevent-wheel")||this.options.allowNestedScroll&&this.checkNestedScroll(t,{deltaX:e,deltaY:n})))))return;if(this.isStopped||this.isLocked)return void(r.cancelable&&r.preventDefault());if(!(this.options.syncTouch&&i||this.options.smoothWheel&&o))return this.isScrolling="native",this.animate.stop(),void(r.lenisStopPropagation=!0);let c=n;"both"===this.options.gestureOrientation?c=Math.abs(n)>Math.abs(e)?n:e:"horizontal"===this.options.gestureOrientation&&(c=e),(!this.options.overscroll||this.options.infinite||this.options.wrapper!==window&&this.limit>0&&(this.animatedScroll>0&&this.animatedScroll<this.limit||0===this.animatedScroll&&n>0||this.animatedScroll===this.limit&&n<0))&&(r.lenisStopPropagation=!0),r.cancelable&&r.preventDefault();const d=i&&this.options.syncTouch,f=i&&"touchend"===r.type;f&&(c=Math.sign(this.velocity)*Math.pow(Math.abs(this.velocity),this.options.touchInertiaExponent)),this.scrollTo(this.targetScroll+c,{programmatic:!1,...d?{lerp:f?this.options.syncTouchLerp:1}:{lerp:this.options.lerp,duration:this.options.duration,easing:this.options.easing}})};resize(){this.dimensions.resize(),this.animatedScroll=this.targetScroll=this.actualScroll,this.emit()}emit(){this.emitter.emit("scroll",this)}onNativeScroll=()=>{if(null!==this._resetVelocityTimeout&&(clearTimeout(this._resetVelocityTimeout),this._resetVelocityTimeout=null),this._preventNextNativeScrollEvent)this._preventNextNativeScrollEvent=!1;else if(!1===this.isScrolling||"native"===this.isScrolling){const t=this.animatedScroll;this.animatedScroll=this.targetScroll=this.actualScroll,this.lastVelocity=this.velocity,this.velocity=this.animatedScroll-t,this.direction=Math.sign(this.animatedScroll-t),this.isStopped||(this.isScrolling="native"),this.emit(),0!==this.velocity&&(this._resetVelocityTimeout=setTimeout((()=>{this.lastVelocity=this.velocity,this.velocity=0,this.isScrolling=!1,this.emit()}),400))}};reset(){this.isLocked=!1,this.isScrolling=!1,this.animatedScroll=this.targetScroll=this.actualScroll,this.lastVelocity=this.velocity=0,this.animate.stop()}start(){this.isStopped&&(this.options.autoToggle?this.rootElement.style.removeProperty("overflow"):this.internalStart())}internalStart(){this.isStopped&&(this.reset(),this.isStopped=!1,this.emit())}stop(){this.isStopped||(this.options.autoToggle?this.rootElement.style.setProperty("overflow","clip"):this.internalStop())}internalStop(){this.isStopped||(this.reset(),this.isStopped=!0,this.emit())}raf=t=>{const e=t-(this.time||t);this.time=t,this.animate.advance(.001*e),this.options.autoRaf&&(this._rafId=requestAnimationFrame(this.raf))};scrollTo(t,{offset:e=0,immediate:n=!1,lock:r=!1,programmatic:i=!0,lerp:o=(i?this.options.lerp:void 0),duration:a=(i?this.options.duration:void 0),easing:s=(i?this.options.easing:void 0),onStart:l,onComplete:u,force:c=!1,userData:d}={}){if(!this.isStopped&&!this.isLocked||c){if("string"==typeof t&&["top","left","start","#"].includes(t))t=0;else if("string"==typeof t&&["bottom","right","end"].includes(t))t=this.limit;else{let n;if("string"==typeof t?(n=document.querySelector(t),n||("#top"===t?t=0:console.warn("Lenis: Target not found",t))):t instanceof HTMLElement&&t?.nodeType&&(n=t),n){if(this.options.wrapper!==window){const t=this.rootElement.getBoundingClientRect();e-=this.isHorizontal?t.left:t.top}const r=n.getBoundingClientRect();t=(this.isHorizontal?r.left:r.top)+this.animatedScroll}}if("number"==typeof t){if(t+=e,t=Math.round(t),this.options.infinite){if(i){this.targetScroll=this.animatedScroll=this.scroll;const e=t-this.animatedScroll;e>this.limit/2?t-=this.limit:e<-this.limit/2&&(t+=this.limit)}}else t=Ort(0,t,this.limit);if(t===this.targetScroll)return l?.(this),void u?.(this);if(this.userData=d??{},n)return this.animatedScroll=this.targetScroll=t,this.setScroll(this.scroll),this.reset(),this.preventNextNativeScrollEvent(),this.emit(),u?.(this),this.userData={},void requestAnimationFrame((()=>{this.dispatchScrollendEvent()}));i||(this.targetScroll=t),"number"==typeof a&&"function"!=typeof s?s=zrt:"function"==typeof s&&"number"!=typeof a&&(a=1),this.animate.fromTo(this.animatedScroll,t,{duration:a,easing:s,lerp:o,onStart:()=>{r&&(this.isLocked=!0),this.isScrolling="smooth",l?.(this)},onUpdate:(t,e)=>{this.isScrolling="smooth",this.lastVelocity=this.velocity,this.velocity=t-this.animatedScroll,this.direction=Math.sign(this.velocity),this.animatedScroll=t,this.setScroll(this.scroll),i&&(this.targetScroll=t),e||this.emit(),e&&(this.reset(),this.emit(),u?.(this),this.userData={},requestAnimationFrame((()=>{this.dispatchScrollendEvent()})),this.preventNextNativeScrollEvent())}})}}}preventNextNativeScrollEvent(){this._preventNextNativeScrollEvent=!0,requestAnimationFrame((()=>{this._preventNextNativeScrollEvent=!1}))}checkNestedScroll(t,{deltaX:e,deltaY:n}){const r=Date.now(),i=t._lenis??={};let o,a,s,l,u,c,d,f;const h=this.options.gestureOrientation;if(r-(i.time??0)>2e3){i.time=Date.now();const e=window.getComputedStyle(t);i.computedStyle=e;const n=e.overflowX,r=e.overflowY;if(o=["auto","overlay","scroll"].includes(n),a=["auto","overlay","scroll"].includes(r),i.hasOverflowX=o,i.hasOverflowY=a,!o&&!a)return!1;if("vertical"===h&&!a)return!1;if("horizontal"===h&&!o)return!1;u=t.scrollWidth,c=t.scrollHeight,d=t.clientWidth,f=t.clientHeight,s=u>d,l=c>f,i.isScrollableX=s,i.isScrollableY=l,i.scrollWidth=u,i.scrollHeight=c,i.clientWidth=d,i.clientHeight=f}else s=i.isScrollableX,l=i.isScrollableY,o=i.hasOverflowX,a=i.hasOverflowY,u=i.scrollWidth,c=i.scrollHeight,d=i.clientWidth,f=i.clientHeight;if(!o&&!a||!s&&!l)return!1;if(!("vertical"!==h||a&&l))return!1;if(!("horizontal"!==h||o&&s))return!1;let p,m,g,v,y,b;if("horizontal"===h)p="x";else if("vertical"===h)p="y";else{0!==e&&o&&s&&(p="x"),0!==n&&a&&l&&(p="y")}if(!p)return!1;if("x"===p)m=t.scrollLeft,g=u-d,v=e,y=o,b=s;else{if("y"!==p)return!1;m=t.scrollTop,g=c-f,v=n,y=a,b=l}return(v>0?m<g:m>0)&&y&&b}get rootElement(){return this.options.wrapper===window?document.documentElement:this.options.wrapper}get limit(){return this.options.naiveDimensions?this.isHorizontal?this.rootElement.scrollWidth-this.rootElement.clientWidth:this.rootElement.scrollHeight-this.rootElement.clientHeight:this.dimensions.limit[this.isHorizontal?"x":"y"]}get isHorizontal(){return"horizontal"===this.options.orientation}get actualScroll(){const t=this.options.wrapper;return this.isHorizontal?t.scrollX??t.scrollLeft:t.scrollY??t.scrollTop}get scroll(){return this.options.infinite?function(t,e){return(t%e+e)%e}(this.animatedScroll,this.limit):this.animatedScroll}get progress(){return 0===this.limit?1:this.scroll/this.limit}get isScrolling(){return this._isScrolling}set isScrolling(t){this._isScrolling!==t&&(this._isScrolling=t,this.updateClassName())}get isStopped(){return this._isStopped}set isStopped(t){this._isStopped!==t&&(this._isStopped=t,this.updateClassName())}get isLocked(){return this._isLocked}set isLocked(t){this._isLocked!==t&&(this._isLocked=t,this.updateClassName())}get isSmooth(){return"smooth"===this.isScrolling}get className(){let t="lenis";return this.options.autoToggle&&(t+=" lenis-autoToggle"),this.isStopped&&(t+=" lenis-stopped"),this.isLocked&&(t+=" lenis-locked"),this.isScrolling&&(t+=" lenis-scrolling"),"smooth"===this.isScrolling&&(t+=" lenis-smooth"),t}updateClassName(){this.cleanUpClassName(),this.rootElement.className=`${this.rootElement.className} ${this.className}`.trim()}cleanUpClassName(){this.rootElement.className=this.rootElement.className.replace(/lenis(-\w+)?/g,"").trim()}};function Urt(t){return Urt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Urt(t)}function qrt(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,i,o,a,s=[],l=!0,u=!1;try{if(o=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=o.call(n)).done)&&(s.push(r.value),s.length!==e);l=!0);}catch(t){u=!0,i=t}finally{try{if(!l&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(u)throw i}}return s}}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return Grt(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Grt(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Grt(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Hrt(){Hrt=function(){return e};var t,e={},n=Object.prototype,r=n.hasOwnProperty,i=Object.defineProperty||function(t,e,n){t[e]=n.value},o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",s=o.asyncIterator||"@@asyncIterator",l=o.toStringTag||"@@toStringTag";function u(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,n){return t[e]=n}}function c(t,e,n,r){var o=e&&e.prototype instanceof v?e:v,a=Object.create(o.prototype),s=new P(r||[]);return i(a,"_invoke",{value:T(t,n,s)}),a}function d(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}e.wrap=c;var f="suspendedStart",h="suspendedYield",p="executing",m="completed",g={};function v(){}function y(){}function b(){}var _={};u(_,a,(function(){return this}));var w=Object.getPrototypeOf,A=w&&w(w(R([])));A&&A!==n&&r.call(A,a)&&(_=A);var E=b.prototype=v.prototype=Object.create(_);function x(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function S(t,e){function n(i,o,a,s){var l=d(t[i],t,o);if("throw"!==l.type){var u=l.arg,c=u.value;return c&&"object"==Urt(c)&&r.call(c,"__await")?e.resolve(c.__await).then((function(t){n("next",t,a,s)}),(function(t){n("throw",t,a,s)})):e.resolve(c).then((function(t){u.value=t,a(u)}),(function(t){return n("throw",t,a,s)}))}s(l.arg)}var o;i(this,"_invoke",{value:function(t,r){function i(){return new e((function(e,i){n(t,r,e,i)}))}return o=o?o.then(i,i):i()}})}function T(e,n,r){var i=f;return function(o,a){if(i===p)throw Error("Generator is already running");if(i===m){if("throw"===o)throw a;return{value:t,done:!0}}for(r.method=o,r.arg=a;;){var s=r.delegate;if(s){var l=C(s,r);if(l){if(l===g)continue;return l}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(i===f)throw i=m,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);i=p;var u=d(e,n,r);if("normal"===u.type){if(i=r.done?m:h,u.arg===g)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(i=m,r.method="throw",r.arg=u.arg)}}}function C(e,n){var r=n.method,i=e.iterator[r];if(i===t)return n.delegate=null,"throw"===r&&e.iterator.return&&(n.method="return",n.arg=t,C(e,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),g;var o=d(i,e.iterator,n.arg);if("throw"===o.type)return n.method="throw",n.arg=o.arg,n.delegate=null,g;var a=o.arg;return a?a.done?(n[e.resultName]=a.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=t),n.delegate=null,g):a:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,g)}function I(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function k(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function P(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(I,this),this.reset(!0)}function R(e){if(e||""===e){var n=e[a];if(n)return n.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var i=-1,o=function n(){for(;++i<e.length;)if(r.call(e,i))return n.value=e[i],n.done=!1,n;return n.value=t,n.done=!0,n};return o.next=o}}throw new TypeError(Urt(e)+" is not iterable")}return y.prototype=b,i(E,"constructor",{value:b,configurable:!0}),i(b,"constructor",{value:y,configurable:!0}),y.displayName=u(b,l,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===y||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,b):(t.__proto__=b,u(t,l,"GeneratorFunction")),t.prototype=Object.create(E),t},e.awrap=function(t){return{__await:t}},x(S.prototype),u(S.prototype,s,(function(){return this})),e.AsyncIterator=S,e.async=function(t,n,r,i,o){void 0===o&&(o=Promise);var a=new S(c(t,n,r,i),o);return e.isGeneratorFunction(n)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},x(E),u(E,l,"Generator"),u(E,a,(function(){return this})),u(E,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),n=[];for(var r in e)n.push(r);return n.reverse(),function t(){for(;n.length;){var r=n.pop();if(r in e)return t.value=r,t.done=!1,t}return t.done=!0,t}},e.values=R,P.prototype={constructor:P,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(k),!e)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function i(r,i){return s.type="throw",s.arg=e,n.next=r,i&&(n.method="next",n.arg=t),!!i}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],s=a.completion;if("root"===a.tryLoc)return i("end");if(a.tryLoc<=this.prev){var l=r.call(a,"catchLoc"),u=r.call(a,"finallyLoc");if(l&&u){if(this.prev<a.catchLoc)return i(a.catchLoc,!0);if(this.prev<a.finallyLoc)return i(a.finallyLoc)}else if(l){if(this.prev<a.catchLoc)return i(a.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return i(a.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=t,a.arg=e,o?(this.method="next",this.next=o.finallyLoc,g):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),g},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),k(n),g}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var i=r.arg;k(n)}return i}}throw Error("illegal catch attempt")},delegateYield:function(e,n,r){return this.delegate={iterator:R(e),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=t),g}},e}function Vrt(t,e,n,r,i,o,a){try{var s=t[o](a),l=s.value}catch(t){return void n(t)}s.done?e(l):Promise.resolve(l).then(r,i)}function Qrt(t){return function(){var e=this,n=arguments;return new Promise((function(r,i){var o=t.apply(e,n);function a(t){Vrt(o,r,i,a,s,"next",t)}function s(t){Vrt(o,r,i,a,s,"throw",t)}a(void 0)}))}}function Wrt(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Jrt(r.key),r)}}function Yrt(t,e,n){return e=Xrt(e),function(t,e){if(e&&("object"===Urt(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,Krt()?Reflect.construct(e,n||[],Xrt(t).constructor):e.apply(t,n))}function Krt(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(Krt=function(){return!!t})()}function Xrt(t){return Xrt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Xrt(t)}function $rt(t,e){return $rt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},$rt(t,e)}function Zrt(t,e,n){return(e=Jrt(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Jrt(t){var e=function(t,e){if("object"!=Urt(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=Urt(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Urt(e)?e:e+""}function tit(t,e,n){!function(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}(t,e),e.set(t,n)}var eit=new WeakMap,nit=function(t){function e(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),tit(t=Yrt(this,e,[wf,vf,$h,qf,af,Qf,Fp,dp,wp,Rrt,jh,Bnt,Ynt,ort,grt]),eit,document.querySelector("body")),Zrt(t,"getUserThreeSundays",Qrt(Hrt().mark((function t(){var e,n;return Hrt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,fetch(ADMIN_AJAX_URL,{method:"POST",body:new URLSearchParams({action:"david_get_user_three_sundays"}).toString(),credentials:"include",headers:{"Content-Type":"application/x-www-form-urlencoded"}});case 3:return e=t.sent,t.next=6,e.json();case 6:return n=t.sent,t.abrupt("return",n);case 10:throw t.prev=10,t.t0=t.catch(0),t.t0;case 13:case"end":return t.stop()}}),t,null,[[0,10]])})))),Zrt(t,"toggleLike",function(){var t=Qrt(Hrt().mark((function t(e){var n,r;return Hrt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,fetch(ADMIN_AJAX_URL,{method:"POST",body:new URLSearchParams({action:"david_toggle_like",postID:e}).toString(),credentials:"include",headers:{"Content-Type":"application/x-www-form-urlencoded"}});case 3:return n=t.sent,t.next=6,n.json();case 6:return r=t.sent,t.abrupt("return",r);case 10:throw t.prev=10,t.t0=t.catch(0),console.err("Bootstrap toggle like err",t.t0),t.t0;case 14:case"end":return t.stop()}}),t,null,[[0,10]])})));return function(e){return t.apply(this,arguments)}}()),Zrt(t,"getLikes",Qrt(Hrt().mark((function t(){var e,n;return Hrt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,fetch(ADMIN_AJAX_URL,{method:"POST",body:new URLSearchParams({action:"david_get_likes"}).toString(),credentials:"include",headers:{"Content-Type":"application/x-www-form-urlencoded"}});case 3:return e=t.sent,t.next=6,e.json();case 6:return n=t.sent,t.abrupt("return",n);case 10:throw t.prev=10,t.t0=t.catch(0),t.t0;case 13:case"end":return t.stop()}}),t,null,[[0,10]])})))),Zrt(t,"updateMemberInfo",function(){var t=Qrt(Hrt().mark((function t(e){var n,r,i,o,a,s,l;return Hrt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:for(n={action:"david_update_member_info"},r=0,i=Object.entries(e);r<i.length;r++)o=qrt(i[r],2),a=o[0],s=o[1],n[a]=s;return t.prev=2,t.next=5,fetch(ADMIN_AJAX_URL,{method:"POST",body:new URLSearchParams(n).toString(),credentials:"include",headers:{"Content-Type":"application/x-www-form-urlencoded"}});case 5:return l=t.sent,t.abrupt("return",l);case 9:throw t.prev=9,t.t0=t.catch(2),t.t0;case 12:case"end":return t.stop()}}),t,null,[[2,9]])})));return function(e){return t.apply(this,arguments)}}()),Zrt(t,"getMemberInfo",Qrt(Hrt().mark((function t(){var e,n,r;return Hrt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e={action:"david_get_member"},t.prev=1,t.next=4,fetch(ADMIN_AJAX_URL,{method:"POST",body:new URLSearchParams(e).toString(),credentials:"include",headers:{"Content-Type":"application/x-www-form-urlencoded"}});case 4:return n=t.sent,t.next=7,n.json();case 7:return r=t.sent,t.abrupt("return",r);case 11:throw t.prev=11,t.t0=t.catch(1),t.t0;case 14:case"end":return t.stop()}}),t,null,[[1,11]])}))));var n=navigator.userAgent.toLowerCase().includes("firefox");return t.lenis=new Frt({duration:1.2,wheelMultiplier:n?1.5:1,easing:function(t){return Math.min(1,1.001-Math.pow(2,-10*t))}}),t.lenis.on("scroll",us.update),ti.ticker.add((function(e){t.lenis.raf(1e3*e)})),ti.ticker.lagSmoothing(0),t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&$rt(t,e)}(e,t),n=e,(r=[{key:"components",get:function(){return this.get(qf).components}},{key:"viewport",get:function(){return this.get(Qf).viewport}},{key:"transition",get:function(){return this.get(dp)}},{key:"router",get:function(){return this.get(vf).router}},{key:"loader",get:function(){return this.get(jh)}},{key:"loaderModule",get:function(){return this.get(ort)}},{key:"imageLoader",get:function(){return this.get(Rrt)}},{key:"animation",get:function(){return this.get(Fp)}},{key:"parallax",get:function(){return this.get(grt)}},{key:"smoother",get:function(){return this.lenis}}])&&Wrt(n.prototype,r),i&&Wrt(n,i),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,i}(oh);function rit(t){return rit="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},rit(t)}function iit(){iit=function(){return e};var t,e={},n=Object.prototype,r=n.hasOwnProperty,i=Object.defineProperty||function(t,e,n){t[e]=n.value},o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",s=o.asyncIterator||"@@asyncIterator",l=o.toStringTag||"@@toStringTag";function u(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,n){return t[e]=n}}function c(t,e,n,r){var o=e&&e.prototype instanceof v?e:v,a=Object.create(o.prototype),s=new P(r||[]);return i(a,"_invoke",{value:T(t,n,s)}),a}function d(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}e.wrap=c;var f="suspendedStart",h="suspendedYield",p="executing",m="completed",g={};function v(){}function y(){}function b(){}var _={};u(_,a,(function(){return this}));var w=Object.getPrototypeOf,A=w&&w(w(R([])));A&&A!==n&&r.call(A,a)&&(_=A);var E=b.prototype=v.prototype=Object.create(_);function x(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function S(t,e){function n(i,o,a,s){var l=d(t[i],t,o);if("throw"!==l.type){var u=l.arg,c=u.value;return c&&"object"==rit(c)&&r.call(c,"__await")?e.resolve(c.__await).then((function(t){n("next",t,a,s)}),(function(t){n("throw",t,a,s)})):e.resolve(c).then((function(t){u.value=t,a(u)}),(function(t){return n("throw",t,a,s)}))}s(l.arg)}var o;i(this,"_invoke",{value:function(t,r){function i(){return new e((function(e,i){n(t,r,e,i)}))}return o=o?o.then(i,i):i()}})}function T(e,n,r){var i=f;return function(o,a){if(i===p)throw Error("Generator is already running");if(i===m){if("throw"===o)throw a;return{value:t,done:!0}}for(r.method=o,r.arg=a;;){var s=r.delegate;if(s){var l=C(s,r);if(l){if(l===g)continue;return l}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(i===f)throw i=m,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);i=p;var u=d(e,n,r);if("normal"===u.type){if(i=r.done?m:h,u.arg===g)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(i=m,r.method="throw",r.arg=u.arg)}}}function C(e,n){var r=n.method,i=e.iterator[r];if(i===t)return n.delegate=null,"throw"===r&&e.iterator.return&&(n.method="return",n.arg=t,C(e,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),g;var o=d(i,e.iterator,n.arg);if("throw"===o.type)return n.method="throw",n.arg=o.arg,n.delegate=null,g;var a=o.arg;return a?a.done?(n[e.resultName]=a.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=t),n.delegate=null,g):a:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,g)}function I(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function k(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function P(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(I,this),this.reset(!0)}function R(e){if(e||""===e){var n=e[a];if(n)return n.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var i=-1,o=function n(){for(;++i<e.length;)if(r.call(e,i))return n.value=e[i],n.done=!1,n;return n.value=t,n.done=!0,n};return o.next=o}}throw new TypeError(rit(e)+" is not iterable")}return y.prototype=b,i(E,"constructor",{value:b,configurable:!0}),i(b,"constructor",{value:y,configurable:!0}),y.displayName=u(b,l,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===y||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,b):(t.__proto__=b,u(t,l,"GeneratorFunction")),t.prototype=Object.create(E),t},e.awrap=function(t){return{__await:t}},x(S.prototype),u(S.prototype,s,(function(){return this})),e.AsyncIterator=S,e.async=function(t,n,r,i,o){void 0===o&&(o=Promise);var a=new S(c(t,n,r,i),o);return e.isGeneratorFunction(n)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},x(E),u(E,l,"Generator"),u(E,a,(function(){return this})),u(E,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),n=[];for(var r in e)n.push(r);return n.reverse(),function t(){for(;n.length;){var r=n.pop();if(r in e)return t.value=r,t.done=!1,t}return t.done=!0,t}},e.values=R,P.prototype={constructor:P,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(k),!e)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function i(r,i){return s.type="throw",s.arg=e,n.next=r,i&&(n.method="next",n.arg=t),!!i}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],s=a.completion;if("root"===a.tryLoc)return i("end");if(a.tryLoc<=this.prev){var l=r.call(a,"catchLoc"),u=r.call(a,"finallyLoc");if(l&&u){if(this.prev<a.catchLoc)return i(a.catchLoc,!0);if(this.prev<a.finallyLoc)return i(a.finallyLoc)}else if(l){if(this.prev<a.catchLoc)return i(a.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return i(a.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=t,a.arg=e,o?(this.method="next",this.next=o.finallyLoc,g):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),g},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),k(n),g}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var i=r.arg;k(n)}return i}}throw Error("illegal catch attempt")},delegateYield:function(e,n,r){return this.delegate={iterator:R(e),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=t),g}},e}function oit(t,e,n,r,i,o,a){try{var s=t[o](a),l=s.value}catch(t){return void n(t)}s.done?e(l):Promise.resolve(l).then(r,i)}function ait(t){return function(){var e=this,n=arguments;return new Promise((function(r,i){var o=t.apply(e,n);function a(t){oit(o,r,i,a,s,"next",t)}function s(t){oit(o,r,i,a,s,"throw",t)}a(void 0)}))}}ti.registerPlugin(us),ti.registerPlugin(Fs),ti.registerPlugin(Kc),ti.registerPlugin(Du),ti.registerPlugin(Rc),ti.registerPlugin(Jd),ti.config({force3D:!0}),ti.defaults({ease:"none",duration:.2});var sit=new nit;sit.components.register(r),sit.viewport.add({addClass:!1,name:"mobile"}),sit.viewport.add({name:"tablet",minWidth:768}),sit.viewport.add({name:"desktop",minWidth:1025,media:"(min-width: 1025px)"}),sit.viewport.add({name:"large",minWidth:1440}),sit.viewport.add({name:"xlarge",minWidth:1600}),sit.viewport.on("resize",(function(){document.body.style.setProperty("--vh",window.innerHeight/100+"px"),document.body.style.setProperty("--vw",window.innerWidth/100+"px"),document.documentElement.style.setProperty("--vw","".concat(.01*document.documentElement.clientWidth,"px")),document.documentElement.style.setProperty("--dvh","".concat(.01*window.innerHeight,"px")),document.documentElement.style.setProperty("--svh","".concat(.01*document.documentElement.clientHeight,"px")),document.documentElement.style.setProperty("--lvh","1vh")})),history.scrollRestoration&&(history.scrollRestoration="manual"),sit.imageLoader.selector=".preload",sit.get($h).loader.callback=function(){var t=ait(iit().mark((function t(e){var n;return iit().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:try{(n=decodeURI(e.headers.get("X-Meta-Title")))&&(document.querySelector("head title").innerHTML=n)}catch(t){console.error(t)}case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),nh.device.touch||document.querySelector("html").classList.add("notouch"),ait(iit().mark((function t(){return iit().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,sit.run();case 2:case"end":return t.stop()}}),t)})))()},7526:(t,e)=>{"use strict";e.byteLength=function(t){var e=s(t),n=e[0],r=e[1];return 3*(n+r)/4-r},e.toByteArray=function(t){var e,n,o=s(t),a=o[0],l=o[1],u=new i(function(t,e,n){return 3*(e+n)/4-n}(0,a,l)),c=0,d=l>0?a-4:a;for(n=0;n<d;n+=4)e=r[t.charCodeAt(n)]<<18|r[t.charCodeAt(n+1)]<<12|r[t.charCodeAt(n+2)]<<6|r[t.charCodeAt(n+3)],u[c++]=e>>16&255,u[c++]=e>>8&255,u[c++]=255&e;2===l&&(e=r[t.charCodeAt(n)]<<2|r[t.charCodeAt(n+1)]>>4,u[c++]=255&e);1===l&&(e=r[t.charCodeAt(n)]<<10|r[t.charCodeAt(n+1)]<<4|r[t.charCodeAt(n+2)]>>2,u[c++]=e>>8&255,u[c++]=255&e);return u},e.fromByteArray=function(t){for(var e,r=t.length,i=r%3,o=[],a=16383,s=0,u=r-i;s<u;s+=a)o.push(l(t,s,s+a>u?u:s+a));1===i?(e=t[r-1],o.push(n[e>>2]+n[e<<4&63]+"==")):2===i&&(e=(t[r-2]<<8)+t[r-1],o.push(n[e>>10]+n[e>>4&63]+n[e<<2&63]+"="));return o.join("")};for(var n=[],r=[],i="undefined"!=typeof Uint8Array?Uint8Array:Array,o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",a=0;a<64;++a)n[a]=o[a],r[o.charCodeAt(a)]=a;function s(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=t.indexOf("=");return-1===n&&(n=e),[n,n===e?0:4-n%4]}function l(t,e,r){for(var i,o,a=[],s=e;s<r;s+=3)i=(t[s]<<16&16711680)+(t[s+1]<<8&65280)+(255&t[s+2]),a.push(n[(o=i)>>18&63]+n[o>>12&63]+n[o>>6&63]+n[63&o]);return a.join("")}r["-".charCodeAt(0)]=62,r["_".charCodeAt(0)]=63},9853:t=>{var e=.1,n="function"==typeof Float32Array;function r(t,e){return 1-3*e+3*t}function i(t,e){return 3*e-6*t}function o(t){return 3*t}function a(t,e,n){return((r(e,n)*t+i(e,n))*t+o(e))*t}function s(t,e,n){return 3*r(e,n)*t*t+2*i(e,n)*t+o(e)}function l(t){return t}t.exports=function(t,r,i,o){if(!(0<=t&&t<=1&&0<=i&&i<=1))throw new Error("bezier x values must be in [0, 1] range");if(t===r&&i===o)return l;for(var u=n?new Float32Array(11):new Array(11),c=0;c<11;++c)u[c]=a(c*e,t,i);function d(n){for(var r=0,o=1;10!==o&&u[o]<=n;++o)r+=e;--o;var l=r+(n-u[o])/(u[o+1]-u[o])*e,c=s(l,t,i);return c>=.001?function(t,e,n,r){for(var i=0;i<4;++i){var o=s(e,n,r);if(0===o)return e;e-=(a(e,n,r)-t)/o}return e}(n,l,t,i):0===c?l:function(t,e,n,r,i){var o,s,l=0;do{(o=a(s=e+(n-e)/2,r,i)-t)>0?n=s:e=s}while(Math.abs(o)>1e-7&&++l<10);return s}(n,r,r+e,t,i)}return function(t){return 0===t?0:1===t?1:a(d(t),r,o)}}},6880:function(t){t.exports=function(t){var e={};function n(r){if(e[r])return e[r].exports;var i=e[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)n.d(r,i,function(e){return t[e]}.bind(null,i));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=90)}({17:function(t,e,n){"use strict";e.__esModule=!0,e.default=void 0;var r=n(18),i=function(){function t(){}return t.getFirstMatch=function(t,e){var n=e.match(t);return n&&n.length>0&&n[1]||""},t.getSecondMatch=function(t,e){var n=e.match(t);return n&&n.length>1&&n[2]||""},t.matchAndReturnConst=function(t,e,n){if(t.test(e))return n},t.getWindowsVersionName=function(t){switch(t){case"NT":return"NT";case"XP":case"NT 5.1":return"XP";case"NT 5.0":return"2000";case"NT 5.2":return"2003";case"NT 6.0":return"Vista";case"NT 6.1":return"7";case"NT 6.2":return"8";case"NT 6.3":return"8.1";case"NT 10.0":return"10";default:return}},t.getMacOSVersionName=function(t){var e=t.split(".").splice(0,2).map((function(t){return parseInt(t,10)||0}));if(e.push(0),10===e[0])switch(e[1]){case 5:return"Leopard";case 6:return"Snow Leopard";case 7:return"Lion";case 8:return"Mountain Lion";case 9:return"Mavericks";case 10:return"Yosemite";case 11:return"El Capitan";case 12:return"Sierra";case 13:return"High Sierra";case 14:return"Mojave";case 15:return"Catalina";default:return}},t.getAndroidVersionName=function(t){var e=t.split(".").splice(0,2).map((function(t){return parseInt(t,10)||0}));if(e.push(0),!(1===e[0]&&e[1]<5))return 1===e[0]&&e[1]<6?"Cupcake":1===e[0]&&e[1]>=6?"Donut":2===e[0]&&e[1]<2?"Eclair":2===e[0]&&2===e[1]?"Froyo":2===e[0]&&e[1]>2?"Gingerbread":3===e[0]?"Honeycomb":4===e[0]&&e[1]<1?"Ice Cream Sandwich":4===e[0]&&e[1]<4?"Jelly Bean":4===e[0]&&e[1]>=4?"KitKat":5===e[0]?"Lollipop":6===e[0]?"Marshmallow":7===e[0]?"Nougat":8===e[0]?"Oreo":9===e[0]?"Pie":void 0},t.getVersionPrecision=function(t){return t.split(".").length},t.compareVersions=function(e,n,r){void 0===r&&(r=!1);var i=t.getVersionPrecision(e),o=t.getVersionPrecision(n),a=Math.max(i,o),s=0,l=t.map([e,n],(function(e){var n=a-t.getVersionPrecision(e),r=e+new Array(n+1).join(".0");return t.map(r.split("."),(function(t){return new Array(20-t.length).join("0")+t})).reverse()}));for(r&&(s=a-Math.min(i,o)),a-=1;a>=s;){if(l[0][a]>l[1][a])return 1;if(l[0][a]===l[1][a]){if(a===s)return 0;a-=1}else if(l[0][a]<l[1][a])return-1}},t.map=function(t,e){var n,r=[];if(Array.prototype.map)return Array.prototype.map.call(t,e);for(n=0;n<t.length;n+=1)r.push(e(t[n]));return r},t.find=function(t,e){var n,r;if(Array.prototype.find)return Array.prototype.find.call(t,e);for(n=0,r=t.length;n<r;n+=1){var i=t[n];if(e(i,n))return i}},t.assign=function(t){for(var e,n,r=t,i=arguments.length,o=new Array(i>1?i-1:0),a=1;a<i;a++)o[a-1]=arguments[a];if(Object.assign)return Object.assign.apply(Object,[t].concat(o));var s=function(){var t=o[e];"object"==typeof t&&null!==t&&Object.keys(t).forEach((function(e){r[e]=t[e]}))};for(e=0,n=o.length;e<n;e+=1)s();return t},t.getBrowserAlias=function(t){return r.BROWSER_ALIASES_MAP[t]},t.getBrowserTypeByAlias=function(t){return r.BROWSER_MAP[t]||""},t}();e.default=i,t.exports=e.default},18:function(t,e,n){"use strict";e.__esModule=!0,e.ENGINE_MAP=e.OS_MAP=e.PLATFORMS_MAP=e.BROWSER_MAP=e.BROWSER_ALIASES_MAP=void 0,e.BROWSER_ALIASES_MAP={"Amazon Silk":"amazon_silk","Android Browser":"android",Bada:"bada",BlackBerry:"blackberry",Chrome:"chrome",Chromium:"chromium",Electron:"electron",Epiphany:"epiphany",Firefox:"firefox",Focus:"focus",Generic:"generic","Google Search":"google_search",Googlebot:"googlebot","Internet Explorer":"ie","K-Meleon":"k_meleon",Maxthon:"maxthon","Microsoft Edge":"edge","MZ Browser":"mz","NAVER Whale Browser":"naver",Opera:"opera","Opera Coast":"opera_coast",PhantomJS:"phantomjs",Puffin:"puffin",QupZilla:"qupzilla",QQ:"qq",QQLite:"qqlite",Safari:"safari",Sailfish:"sailfish","Samsung Internet for Android":"samsung_internet",SeaMonkey:"seamonkey",Sleipnir:"sleipnir",Swing:"swing",Tizen:"tizen","UC Browser":"uc",Vivaldi:"vivaldi","WebOS Browser":"webos",WeChat:"wechat","Yandex Browser":"yandex",Roku:"roku"},e.BROWSER_MAP={amazon_silk:"Amazon Silk",android:"Android Browser",bada:"Bada",blackberry:"BlackBerry",chrome:"Chrome",chromium:"Chromium",electron:"Electron",epiphany:"Epiphany",firefox:"Firefox",focus:"Focus",generic:"Generic",googlebot:"Googlebot",google_search:"Google Search",ie:"Internet Explorer",k_meleon:"K-Meleon",maxthon:"Maxthon",edge:"Microsoft Edge",mz:"MZ Browser",naver:"NAVER Whale Browser",opera:"Opera",opera_coast:"Opera Coast",phantomjs:"PhantomJS",puffin:"Puffin",qupzilla:"QupZilla",qq:"QQ Browser",qqlite:"QQ Browser Lite",safari:"Safari",sailfish:"Sailfish",samsung_internet:"Samsung Internet for Android",seamonkey:"SeaMonkey",sleipnir:"Sleipnir",swing:"Swing",tizen:"Tizen",uc:"UC Browser",vivaldi:"Vivaldi",webos:"WebOS Browser",wechat:"WeChat",yandex:"Yandex Browser"},e.PLATFORMS_MAP={tablet:"tablet",mobile:"mobile",desktop:"desktop",tv:"tv"},e.OS_MAP={WindowsPhone:"Windows Phone",Windows:"Windows",MacOS:"macOS",iOS:"iOS",Android:"Android",WebOS:"WebOS",BlackBerry:"BlackBerry",Bada:"Bada",Tizen:"Tizen",Linux:"Linux",ChromeOS:"Chrome OS",PlayStation4:"PlayStation 4",Roku:"Roku"},e.ENGINE_MAP={EdgeHTML:"EdgeHTML",Blink:"Blink",Trident:"Trident",Presto:"Presto",Gecko:"Gecko",WebKit:"WebKit"}},90:function(t,e,n){"use strict";e.__esModule=!0,e.default=void 0;var r,i=(r=n(91))&&r.__esModule?r:{default:r},o=n(18);function a(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var s=function(){function t(){}var e,n,r;return t.getParser=function(t,e){if(void 0===e&&(e=!1),"string"!=typeof t)throw new Error("UserAgent should be a string");return new i.default(t,e)},t.parse=function(t){return new i.default(t).getResult()},e=t,r=[{key:"BROWSER_MAP",get:function(){return o.BROWSER_MAP}},{key:"ENGINE_MAP",get:function(){return o.ENGINE_MAP}},{key:"OS_MAP",get:function(){return o.OS_MAP}},{key:"PLATFORMS_MAP",get:function(){return o.PLATFORMS_MAP}}],(n=null)&&a(e.prototype,n),r&&a(e,r),t}();e.default=s,t.exports=e.default},91:function(t,e,n){"use strict";e.__esModule=!0,e.default=void 0;var r=l(n(92)),i=l(n(93)),o=l(n(94)),a=l(n(95)),s=l(n(17));function l(t){return t&&t.__esModule?t:{default:t}}var u=function(){function t(t,e){if(void 0===e&&(e=!1),null==t||""===t)throw new Error("UserAgent parameter can't be empty");this._ua=t,this.parsedResult={},!0!==e&&this.parse()}var e=t.prototype;return e.getUA=function(){return this._ua},e.test=function(t){return t.test(this._ua)},e.parseBrowser=function(){var t=this;this.parsedResult.browser={};var e=s.default.find(r.default,(function(e){if("function"==typeof e.test)return e.test(t);if(e.test instanceof Array)return e.test.some((function(e){return t.test(e)}));throw new Error("Browser's test function is not valid")}));return e&&(this.parsedResult.browser=e.describe(this.getUA())),this.parsedResult.browser},e.getBrowser=function(){return this.parsedResult.browser?this.parsedResult.browser:this.parseBrowser()},e.getBrowserName=function(t){return t?String(this.getBrowser().name).toLowerCase()||"":this.getBrowser().name||""},e.getBrowserVersion=function(){return this.getBrowser().version},e.getOS=function(){return this.parsedResult.os?this.parsedResult.os:this.parseOS()},e.parseOS=function(){var t=this;this.parsedResult.os={};var e=s.default.find(i.default,(function(e){if("function"==typeof e.test)return e.test(t);if(e.test instanceof Array)return e.test.some((function(e){return t.test(e)}));throw new Error("Browser's test function is not valid")}));return e&&(this.parsedResult.os=e.describe(this.getUA())),this.parsedResult.os},e.getOSName=function(t){var e=this.getOS().name;return t?String(e).toLowerCase()||"":e||""},e.getOSVersion=function(){return this.getOS().version},e.getPlatform=function(){return this.parsedResult.platform?this.parsedResult.platform:this.parsePlatform()},e.getPlatformType=function(t){void 0===t&&(t=!1);var e=this.getPlatform().type;return t?String(e).toLowerCase()||"":e||""},e.parsePlatform=function(){var t=this;this.parsedResult.platform={};var e=s.default.find(o.default,(function(e){if("function"==typeof e.test)return e.test(t);if(e.test instanceof Array)return e.test.some((function(e){return t.test(e)}));throw new Error("Browser's test function is not valid")}));return e&&(this.parsedResult.platform=e.describe(this.getUA())),this.parsedResult.platform},e.getEngine=function(){return this.parsedResult.engine?this.parsedResult.engine:this.parseEngine()},e.getEngineName=function(t){return t?String(this.getEngine().name).toLowerCase()||"":this.getEngine().name||""},e.parseEngine=function(){var t=this;this.parsedResult.engine={};var e=s.default.find(a.default,(function(e){if("function"==typeof e.test)return e.test(t);if(e.test instanceof Array)return e.test.some((function(e){return t.test(e)}));throw new Error("Browser's test function is not valid")}));return e&&(this.parsedResult.engine=e.describe(this.getUA())),this.parsedResult.engine},e.parse=function(){return this.parseBrowser(),this.parseOS(),this.parsePlatform(),this.parseEngine(),this},e.getResult=function(){return s.default.assign({},this.parsedResult)},e.satisfies=function(t){var e=this,n={},r=0,i={},o=0;if(Object.keys(t).forEach((function(e){var a=t[e];"string"==typeof a?(i[e]=a,o+=1):"object"==typeof a&&(n[e]=a,r+=1)})),r>0){var a=Object.keys(n),l=s.default.find(a,(function(t){return e.isOS(t)}));if(l){var u=this.satisfies(n[l]);if(void 0!==u)return u}var c=s.default.find(a,(function(t){return e.isPlatform(t)}));if(c){var d=this.satisfies(n[c]);if(void 0!==d)return d}}if(o>0){var f=Object.keys(i),h=s.default.find(f,(function(t){return e.isBrowser(t,!0)}));if(void 0!==h)return this.compareVersion(i[h])}},e.isBrowser=function(t,e){void 0===e&&(e=!1);var n=this.getBrowserName().toLowerCase(),r=t.toLowerCase(),i=s.default.getBrowserTypeByAlias(r);return e&&i&&(r=i.toLowerCase()),r===n},e.compareVersion=function(t){var e=[0],n=t,r=!1,i=this.getBrowserVersion();if("string"==typeof i)return">"===t[0]||"<"===t[0]?(n=t.substr(1),"="===t[1]?(r=!0,n=t.substr(2)):e=[],">"===t[0]?e.push(1):e.push(-1)):"="===t[0]?n=t.substr(1):"~"===t[0]&&(r=!0,n=t.substr(1)),e.indexOf(s.default.compareVersions(i,n,r))>-1},e.isOS=function(t){return this.getOSName(!0)===String(t).toLowerCase()},e.isPlatform=function(t){return this.getPlatformType(!0)===String(t).toLowerCase()},e.isEngine=function(t){return this.getEngineName(!0)===String(t).toLowerCase()},e.is=function(t,e){return void 0===e&&(e=!1),this.isBrowser(t,e)||this.isOS(t)||this.isPlatform(t)},e.some=function(t){var e=this;return void 0===t&&(t=[]),t.some((function(t){return e.is(t)}))},t}();e.default=u,t.exports=e.default},92:function(t,e,n){"use strict";e.__esModule=!0,e.default=void 0;var r,i=(r=n(17))&&r.__esModule?r:{default:r},o=/version\/(\d+(\.?_?\d+)+)/i,a=[{test:[/googlebot/i],describe:function(t){var e={name:"Googlebot"},n=i.default.getFirstMatch(/googlebot\/(\d+(\.\d+))/i,t)||i.default.getFirstMatch(o,t);return n&&(e.version=n),e}},{test:[/opera/i],describe:function(t){var e={name:"Opera"},n=i.default.getFirstMatch(o,t)||i.default.getFirstMatch(/(?:opera)[\s/](\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/opr\/|opios/i],describe:function(t){var e={name:"Opera"},n=i.default.getFirstMatch(/(?:opr|opios)[\s/](\S+)/i,t)||i.default.getFirstMatch(o,t);return n&&(e.version=n),e}},{test:[/SamsungBrowser/i],describe:function(t){var e={name:"Samsung Internet for Android"},n=i.default.getFirstMatch(o,t)||i.default.getFirstMatch(/(?:SamsungBrowser)[\s/](\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/Whale/i],describe:function(t){var e={name:"NAVER Whale Browser"},n=i.default.getFirstMatch(o,t)||i.default.getFirstMatch(/(?:whale)[\s/](\d+(?:\.\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/MZBrowser/i],describe:function(t){var e={name:"MZ Browser"},n=i.default.getFirstMatch(/(?:MZBrowser)[\s/](\d+(?:\.\d+)+)/i,t)||i.default.getFirstMatch(o,t);return n&&(e.version=n),e}},{test:[/focus/i],describe:function(t){var e={name:"Focus"},n=i.default.getFirstMatch(/(?:focus)[\s/](\d+(?:\.\d+)+)/i,t)||i.default.getFirstMatch(o,t);return n&&(e.version=n),e}},{test:[/swing/i],describe:function(t){var e={name:"Swing"},n=i.default.getFirstMatch(/(?:swing)[\s/](\d+(?:\.\d+)+)/i,t)||i.default.getFirstMatch(o,t);return n&&(e.version=n),e}},{test:[/coast/i],describe:function(t){var e={name:"Opera Coast"},n=i.default.getFirstMatch(o,t)||i.default.getFirstMatch(/(?:coast)[\s/](\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/opt\/\d+(?:.?_?\d+)+/i],describe:function(t){var e={name:"Opera Touch"},n=i.default.getFirstMatch(/(?:opt)[\s/](\d+(\.?_?\d+)+)/i,t)||i.default.getFirstMatch(o,t);return n&&(e.version=n),e}},{test:[/yabrowser/i],describe:function(t){var e={name:"Yandex Browser"},n=i.default.getFirstMatch(/(?:yabrowser)[\s/](\d+(\.?_?\d+)+)/i,t)||i.default.getFirstMatch(o,t);return n&&(e.version=n),e}},{test:[/ucbrowser/i],describe:function(t){var e={name:"UC Browser"},n=i.default.getFirstMatch(o,t)||i.default.getFirstMatch(/(?:ucbrowser)[\s/](\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/Maxthon|mxios/i],describe:function(t){var e={name:"Maxthon"},n=i.default.getFirstMatch(o,t)||i.default.getFirstMatch(/(?:Maxthon|mxios)[\s/](\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/epiphany/i],describe:function(t){var e={name:"Epiphany"},n=i.default.getFirstMatch(o,t)||i.default.getFirstMatch(/(?:epiphany)[\s/](\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/puffin/i],describe:function(t){var e={name:"Puffin"},n=i.default.getFirstMatch(o,t)||i.default.getFirstMatch(/(?:puffin)[\s/](\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/sleipnir/i],describe:function(t){var e={name:"Sleipnir"},n=i.default.getFirstMatch(o,t)||i.default.getFirstMatch(/(?:sleipnir)[\s/](\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/k-meleon/i],describe:function(t){var e={name:"K-Meleon"},n=i.default.getFirstMatch(o,t)||i.default.getFirstMatch(/(?:k-meleon)[\s/](\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/micromessenger/i],describe:function(t){var e={name:"WeChat"},n=i.default.getFirstMatch(/(?:micromessenger)[\s/](\d+(\.?_?\d+)+)/i,t)||i.default.getFirstMatch(o,t);return n&&(e.version=n),e}},{test:[/qqbrowser/i],describe:function(t){var e={name:/qqbrowserlite/i.test(t)?"QQ Browser Lite":"QQ Browser"},n=i.default.getFirstMatch(/(?:qqbrowserlite|qqbrowser)[/](\d+(\.?_?\d+)+)/i,t)||i.default.getFirstMatch(o,t);return n&&(e.version=n),e}},{test:[/msie|trident/i],describe:function(t){var e={name:"Internet Explorer"},n=i.default.getFirstMatch(/(?:msie |rv:)(\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/\sedg\//i],describe:function(t){var e={name:"Microsoft Edge"},n=i.default.getFirstMatch(/\sedg\/(\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/edg([ea]|ios)/i],describe:function(t){var e={name:"Microsoft Edge"},n=i.default.getSecondMatch(/edg([ea]|ios)\/(\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/vivaldi/i],describe:function(t){var e={name:"Vivaldi"},n=i.default.getFirstMatch(/vivaldi\/(\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/seamonkey/i],describe:function(t){var e={name:"SeaMonkey"},n=i.default.getFirstMatch(/seamonkey\/(\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/sailfish/i],describe:function(t){var e={name:"Sailfish"},n=i.default.getFirstMatch(/sailfish\s?browser\/(\d+(\.\d+)?)/i,t);return n&&(e.version=n),e}},{test:[/silk/i],describe:function(t){var e={name:"Amazon Silk"},n=i.default.getFirstMatch(/silk\/(\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/phantom/i],describe:function(t){var e={name:"PhantomJS"},n=i.default.getFirstMatch(/phantomjs\/(\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/slimerjs/i],describe:function(t){var e={name:"SlimerJS"},n=i.default.getFirstMatch(/slimerjs\/(\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/blackberry|\bbb\d+/i,/rim\stablet/i],describe:function(t){var e={name:"BlackBerry"},n=i.default.getFirstMatch(o,t)||i.default.getFirstMatch(/blackberry[\d]+\/(\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/(web|hpw)[o0]s/i],describe:function(t){var e={name:"WebOS Browser"},n=i.default.getFirstMatch(o,t)||i.default.getFirstMatch(/w(?:eb)?[o0]sbrowser\/(\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/bada/i],describe:function(t){var e={name:"Bada"},n=i.default.getFirstMatch(/dolfin\/(\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/tizen/i],describe:function(t){var e={name:"Tizen"},n=i.default.getFirstMatch(/(?:tizen\s?)?browser\/(\d+(\.?_?\d+)+)/i,t)||i.default.getFirstMatch(o,t);return n&&(e.version=n),e}},{test:[/qupzilla/i],describe:function(t){var e={name:"QupZilla"},n=i.default.getFirstMatch(/(?:qupzilla)[\s/](\d+(\.?_?\d+)+)/i,t)||i.default.getFirstMatch(o,t);return n&&(e.version=n),e}},{test:[/firefox|iceweasel|fxios/i],describe:function(t){var e={name:"Firefox"},n=i.default.getFirstMatch(/(?:firefox|iceweasel|fxios)[\s/](\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/electron/i],describe:function(t){var e={name:"Electron"},n=i.default.getFirstMatch(/(?:electron)\/(\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/MiuiBrowser/i],describe:function(t){var e={name:"Miui"},n=i.default.getFirstMatch(/(?:MiuiBrowser)[\s/](\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/chromium/i],describe:function(t){var e={name:"Chromium"},n=i.default.getFirstMatch(/(?:chromium)[\s/](\d+(\.?_?\d+)+)/i,t)||i.default.getFirstMatch(o,t);return n&&(e.version=n),e}},{test:[/chrome|crios|crmo/i],describe:function(t){var e={name:"Chrome"},n=i.default.getFirstMatch(/(?:chrome|crios|crmo)\/(\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/GSA/i],describe:function(t){var e={name:"Google Search"},n=i.default.getFirstMatch(/(?:GSA)\/(\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:function(t){var e=!t.test(/like android/i),n=t.test(/android/i);return e&&n},describe:function(t){var e={name:"Android Browser"},n=i.default.getFirstMatch(o,t);return n&&(e.version=n),e}},{test:[/playstation 4/i],describe:function(t){var e={name:"PlayStation 4"},n=i.default.getFirstMatch(o,t);return n&&(e.version=n),e}},{test:[/safari|applewebkit/i],describe:function(t){var e={name:"Safari"},n=i.default.getFirstMatch(o,t);return n&&(e.version=n),e}},{test:[/.*/i],describe:function(t){var e=-1!==t.search("\\(")?/^(.*)\/(.*)[ \t]\((.*)/:/^(.*)\/(.*) /;return{name:i.default.getFirstMatch(e,t),version:i.default.getSecondMatch(e,t)}}}];e.default=a,t.exports=e.default},93:function(t,e,n){"use strict";e.__esModule=!0,e.default=void 0;var r,i=(r=n(17))&&r.__esModule?r:{default:r},o=n(18),a=[{test:[/Roku\/DVP/],describe:function(t){var e=i.default.getFirstMatch(/Roku\/DVP-(\d+\.\d+)/i,t);return{name:o.OS_MAP.Roku,version:e}}},{test:[/windows phone/i],describe:function(t){var e=i.default.getFirstMatch(/windows phone (?:os)?\s?(\d+(\.\d+)*)/i,t);return{name:o.OS_MAP.WindowsPhone,version:e}}},{test:[/windows /i],describe:function(t){var e=i.default.getFirstMatch(/Windows ((NT|XP)( \d\d?.\d)?)/i,t),n=i.default.getWindowsVersionName(e);return{name:o.OS_MAP.Windows,version:e,versionName:n}}},{test:[/Macintosh(.*?) FxiOS(.*?)\//],describe:function(t){var e={name:o.OS_MAP.iOS},n=i.default.getSecondMatch(/(Version\/)(\d[\d.]+)/,t);return n&&(e.version=n),e}},{test:[/macintosh/i],describe:function(t){var e=i.default.getFirstMatch(/mac os x (\d+(\.?_?\d+)+)/i,t).replace(/[_\s]/g,"."),n=i.default.getMacOSVersionName(e),r={name:o.OS_MAP.MacOS,version:e};return n&&(r.versionName=n),r}},{test:[/(ipod|iphone|ipad)/i],describe:function(t){var e=i.default.getFirstMatch(/os (\d+([_\s]\d+)*) like mac os x/i,t).replace(/[_\s]/g,".");return{name:o.OS_MAP.iOS,version:e}}},{test:function(t){var e=!t.test(/like android/i),n=t.test(/android/i);return e&&n},describe:function(t){var e=i.default.getFirstMatch(/android[\s/-](\d+(\.\d+)*)/i,t),n=i.default.getAndroidVersionName(e),r={name:o.OS_MAP.Android,version:e};return n&&(r.versionName=n),r}},{test:[/(web|hpw)[o0]s/i],describe:function(t){var e=i.default.getFirstMatch(/(?:web|hpw)[o0]s\/(\d+(\.\d+)*)/i,t),n={name:o.OS_MAP.WebOS};return e&&e.length&&(n.version=e),n}},{test:[/blackberry|\bbb\d+/i,/rim\stablet/i],describe:function(t){var e=i.default.getFirstMatch(/rim\stablet\sos\s(\d+(\.\d+)*)/i,t)||i.default.getFirstMatch(/blackberry\d+\/(\d+([_\s]\d+)*)/i,t)||i.default.getFirstMatch(/\bbb(\d+)/i,t);return{name:o.OS_MAP.BlackBerry,version:e}}},{test:[/bada/i],describe:function(t){var e=i.default.getFirstMatch(/bada\/(\d+(\.\d+)*)/i,t);return{name:o.OS_MAP.Bada,version:e}}},{test:[/tizen/i],describe:function(t){var e=i.default.getFirstMatch(/tizen[/\s](\d+(\.\d+)*)/i,t);return{name:o.OS_MAP.Tizen,version:e}}},{test:[/linux/i],describe:function(){return{name:o.OS_MAP.Linux}}},{test:[/CrOS/],describe:function(){return{name:o.OS_MAP.ChromeOS}}},{test:[/PlayStation 4/],describe:function(t){var e=i.default.getFirstMatch(/PlayStation 4[/\s](\d+(\.\d+)*)/i,t);return{name:o.OS_MAP.PlayStation4,version:e}}}];e.default=a,t.exports=e.default},94:function(t,e,n){"use strict";e.__esModule=!0,e.default=void 0;var r,i=(r=n(17))&&r.__esModule?r:{default:r},o=n(18),a=[{test:[/googlebot/i],describe:function(){return{type:"bot",vendor:"Google"}}},{test:[/huawei/i],describe:function(t){var e=i.default.getFirstMatch(/(can-l01)/i,t)&&"Nova",n={type:o.PLATFORMS_MAP.mobile,vendor:"Huawei"};return e&&(n.model=e),n}},{test:[/nexus\s*(?:7|8|9|10).*/i],describe:function(){return{type:o.PLATFORMS_MAP.tablet,vendor:"Nexus"}}},{test:[/ipad/i],describe:function(){return{type:o.PLATFORMS_MAP.tablet,vendor:"Apple",model:"iPad"}}},{test:[/Macintosh(.*?) FxiOS(.*?)\//],describe:function(){return{type:o.PLATFORMS_MAP.tablet,vendor:"Apple",model:"iPad"}}},{test:[/kftt build/i],describe:function(){return{type:o.PLATFORMS_MAP.tablet,vendor:"Amazon",model:"Kindle Fire HD 7"}}},{test:[/silk/i],describe:function(){return{type:o.PLATFORMS_MAP.tablet,vendor:"Amazon"}}},{test:[/tablet(?! pc)/i],describe:function(){return{type:o.PLATFORMS_MAP.tablet}}},{test:function(t){var e=t.test(/ipod|iphone/i),n=t.test(/like (ipod|iphone)/i);return e&&!n},describe:function(t){var e=i.default.getFirstMatch(/(ipod|iphone)/i,t);return{type:o.PLATFORMS_MAP.mobile,vendor:"Apple",model:e}}},{test:[/nexus\s*[0-6].*/i,/galaxy nexus/i],describe:function(){return{type:o.PLATFORMS_MAP.mobile,vendor:"Nexus"}}},{test:[/[^-]mobi/i],describe:function(){return{type:o.PLATFORMS_MAP.mobile}}},{test:function(t){return"blackberry"===t.getBrowserName(!0)},describe:function(){return{type:o.PLATFORMS_MAP.mobile,vendor:"BlackBerry"}}},{test:function(t){return"bada"===t.getBrowserName(!0)},describe:function(){return{type:o.PLATFORMS_MAP.mobile}}},{test:function(t){return"windows phone"===t.getBrowserName()},describe:function(){return{type:o.PLATFORMS_MAP.mobile,vendor:"Microsoft"}}},{test:function(t){var e=Number(String(t.getOSVersion()).split(".")[0]);return"android"===t.getOSName(!0)&&e>=3},describe:function(){return{type:o.PLATFORMS_MAP.tablet}}},{test:function(t){return"android"===t.getOSName(!0)},describe:function(){return{type:o.PLATFORMS_MAP.mobile}}},{test:function(t){return"macos"===t.getOSName(!0)},describe:function(){return{type:o.PLATFORMS_MAP.desktop,vendor:"Apple"}}},{test:function(t){return"windows"===t.getOSName(!0)},describe:function(){return{type:o.PLATFORMS_MAP.desktop}}},{test:function(t){return"linux"===t.getOSName(!0)},describe:function(){return{type:o.PLATFORMS_MAP.desktop}}},{test:function(t){return"playstation 4"===t.getOSName(!0)},describe:function(){return{type:o.PLATFORMS_MAP.tv}}},{test:function(t){return"roku"===t.getOSName(!0)},describe:function(){return{type:o.PLATFORMS_MAP.tv}}}];e.default=a,t.exports=e.default},95:function(t,e,n){"use strict";e.__esModule=!0,e.default=void 0;var r,i=(r=n(17))&&r.__esModule?r:{default:r},o=n(18),a=[{test:function(t){return"microsoft edge"===t.getBrowserName(!0)},describe:function(t){if(/\sedg\//i.test(t))return{name:o.ENGINE_MAP.Blink};var e=i.default.getFirstMatch(/edge\/(\d+(\.?_?\d+)+)/i,t);return{name:o.ENGINE_MAP.EdgeHTML,version:e}}},{test:[/trident/i],describe:function(t){var e={name:o.ENGINE_MAP.Trident},n=i.default.getFirstMatch(/trident\/(\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:function(t){return t.test(/presto/i)},describe:function(t){var e={name:o.ENGINE_MAP.Presto},n=i.default.getFirstMatch(/presto\/(\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:function(t){var e=t.test(/gecko/i),n=t.test(/like gecko/i);return e&&!n},describe:function(t){var e={name:o.ENGINE_MAP.Gecko},n=i.default.getFirstMatch(/gecko\/(\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/(apple)?webkit\/537\.36/i],describe:function(){return{name:o.ENGINE_MAP.Blink}}},{test:[/(apple)?webkit/i],describe:function(t){var e={name:o.ENGINE_MAP.WebKit},n=i.default.getFirstMatch(/webkit\/(\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}}];e.default=a,t.exports=e.default}})},8287:(t,e,n)=>{"use strict";var r=n(7526),i=n(251),o=n(4634);function a(){return l.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function s(t,e){if(a()<e)throw new RangeError("Invalid typed array length");return l.TYPED_ARRAY_SUPPORT?(t=new Uint8Array(e)).__proto__=l.prototype:(null===t&&(t=new l(e)),t.length=e),t}function l(t,e,n){if(!(l.TYPED_ARRAY_SUPPORT||this instanceof l))return new l(t,e,n);if("number"==typeof t){if("string"==typeof e)throw new Error("If encoding is specified then the first argument must be a string");return d(this,t)}return u(this,t,e,n)}function u(t,e,n,r){if("number"==typeof e)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&e instanceof ArrayBuffer?function(t,e,n,r){if(e.byteLength,n<0||e.byteLength<n)throw new RangeError("'offset' is out of bounds");if(e.byteLength<n+(r||0))throw new RangeError("'length' is out of bounds");e=void 0===n&&void 0===r?new Uint8Array(e):void 0===r?new Uint8Array(e,n):new Uint8Array(e,n,r);l.TYPED_ARRAY_SUPPORT?(t=e).__proto__=l.prototype:t=f(t,e);return t}(t,e,n,r):"string"==typeof e?function(t,e,n){"string"==typeof n&&""!==n||(n="utf8");if(!l.isEncoding(n))throw new TypeError('"encoding" must be a valid string encoding');var r=0|p(e,n);t=s(t,r);var i=t.write(e,n);i!==r&&(t=t.slice(0,i));return t}(t,e,n):function(t,e){if(l.isBuffer(e)){var n=0|h(e.length);return 0===(t=s(t,n)).length||e.copy(t,0,0,n),t}if(e){if("undefined"!=typeof ArrayBuffer&&e.buffer instanceof ArrayBuffer||"length"in e)return"number"!=typeof e.length||(r=e.length)!=r?s(t,0):f(t,e);if("Buffer"===e.type&&o(e.data))return f(t,e.data)}var r;throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(t,e)}function c(t){if("number"!=typeof t)throw new TypeError('"size" argument must be a number');if(t<0)throw new RangeError('"size" argument must not be negative')}function d(t,e){if(c(e),t=s(t,e<0?0:0|h(e)),!l.TYPED_ARRAY_SUPPORT)for(var n=0;n<e;++n)t[n]=0;return t}function f(t,e){var n=e.length<0?0:0|h(e.length);t=s(t,n);for(var r=0;r<n;r+=1)t[r]=255&e[r];return t}function h(t){if(t>=a())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+a().toString(16)+" bytes");return 0|t}function p(t,e){if(l.isBuffer(t))return t.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(t)||t instanceof ArrayBuffer))return t.byteLength;"string"!=typeof t&&(t=""+t);var n=t.length;if(0===n)return 0;for(var r=!1;;)switch(e){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":case void 0:return U(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return q(t).length;default:if(r)return U(t).length;e=(""+e).toLowerCase(),r=!0}}function m(t,e,n){var r=!1;if((void 0===e||e<0)&&(e=0),e>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if((n>>>=0)<=(e>>>=0))return"";for(t||(t="utf8");;)switch(t){case"hex":return P(this,e,n);case"utf8":case"utf-8":return T(this,e,n);case"ascii":return I(this,e,n);case"latin1":case"binary":return k(this,e,n);case"base64":return S(this,e,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return R(this,e,n);default:if(r)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),r=!0}}function g(t,e,n){var r=t[e];t[e]=t[n],t[n]=r}function v(t,e,n,r,i){if(0===t.length)return-1;if("string"==typeof n?(r=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),n=+n,isNaN(n)&&(n=i?0:t.length-1),n<0&&(n=t.length+n),n>=t.length){if(i)return-1;n=t.length-1}else if(n<0){if(!i)return-1;n=0}if("string"==typeof e&&(e=l.from(e,r)),l.isBuffer(e))return 0===e.length?-1:y(t,e,n,r,i);if("number"==typeof e)return e&=255,l.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(t,e,n):Uint8Array.prototype.lastIndexOf.call(t,e,n):y(t,[e],n,r,i);throw new TypeError("val must be string, number or Buffer")}function y(t,e,n,r,i){var o,a=1,s=t.length,l=e.length;if(void 0!==r&&("ucs2"===(r=String(r).toLowerCase())||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(t.length<2||e.length<2)return-1;a=2,s/=2,l/=2,n/=2}function u(t,e){return 1===a?t[e]:t.readUInt16BE(e*a)}if(i){var c=-1;for(o=n;o<s;o++)if(u(t,o)===u(e,-1===c?0:o-c)){if(-1===c&&(c=o),o-c+1===l)return c*a}else-1!==c&&(o-=o-c),c=-1}else for(n+l>s&&(n=s-l),o=n;o>=0;o--){for(var d=!0,f=0;f<l;f++)if(u(t,o+f)!==u(e,f)){d=!1;break}if(d)return o}return-1}function b(t,e,n,r){n=Number(n)||0;var i=t.length-n;r?(r=Number(r))>i&&(r=i):r=i;var o=e.length;if(o%2!=0)throw new TypeError("Invalid hex string");r>o/2&&(r=o/2);for(var a=0;a<r;++a){var s=parseInt(e.substr(2*a,2),16);if(isNaN(s))return a;t[n+a]=s}return a}function _(t,e,n,r){return G(U(e,t.length-n),t,n,r)}function w(t,e,n,r){return G(function(t){for(var e=[],n=0;n<t.length;++n)e.push(255&t.charCodeAt(n));return e}(e),t,n,r)}function A(t,e,n,r){return w(t,e,n,r)}function E(t,e,n,r){return G(q(e),t,n,r)}function x(t,e,n,r){return G(function(t,e){for(var n,r,i,o=[],a=0;a<t.length&&!((e-=2)<0);++a)r=(n=t.charCodeAt(a))>>8,i=n%256,o.push(i),o.push(r);return o}(e,t.length-n),t,n,r)}function S(t,e,n){return 0===e&&n===t.length?r.fromByteArray(t):r.fromByteArray(t.slice(e,n))}function T(t,e,n){n=Math.min(t.length,n);for(var r=[],i=e;i<n;){var o,a,s,l,u=t[i],c=null,d=u>239?4:u>223?3:u>191?2:1;if(i+d<=n)switch(d){case 1:u<128&&(c=u);break;case 2:128==(192&(o=t[i+1]))&&(l=(31&u)<<6|63&o)>127&&(c=l);break;case 3:o=t[i+1],a=t[i+2],128==(192&o)&&128==(192&a)&&(l=(15&u)<<12|(63&o)<<6|63&a)>2047&&(l<55296||l>57343)&&(c=l);break;case 4:o=t[i+1],a=t[i+2],s=t[i+3],128==(192&o)&&128==(192&a)&&128==(192&s)&&(l=(15&u)<<18|(63&o)<<12|(63&a)<<6|63&s)>65535&&l<1114112&&(c=l)}null===c?(c=65533,d=1):c>65535&&(c-=65536,r.push(c>>>10&1023|55296),c=56320|1023&c),r.push(c),i+=d}return function(t){var e=t.length;if(e<=C)return String.fromCharCode.apply(String,t);var n="",r=0;for(;r<e;)n+=String.fromCharCode.apply(String,t.slice(r,r+=C));return n}(r)}e.hp=l,e.IS=50,l.TYPED_ARRAY_SUPPORT=void 0!==n.g.TYPED_ARRAY_SUPPORT?n.g.TYPED_ARRAY_SUPPORT:function(){try{var t=new Uint8Array(1);return t.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===t.foo()&&"function"==typeof t.subarray&&0===t.subarray(1,1).byteLength}catch(t){return!1}}(),a(),l.poolSize=8192,l._augment=function(t){return t.__proto__=l.prototype,t},l.from=function(t,e,n){return u(null,t,e,n)},l.TYPED_ARRAY_SUPPORT&&(l.prototype.__proto__=Uint8Array.prototype,l.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&l[Symbol.species]===l&&Object.defineProperty(l,Symbol.species,{value:null,configurable:!0})),l.alloc=function(t,e,n){return function(t,e,n,r){return c(e),e<=0?s(t,e):void 0!==n?"string"==typeof r?s(t,e).fill(n,r):s(t,e).fill(n):s(t,e)}(null,t,e,n)},l.allocUnsafe=function(t){return d(null,t)},l.allocUnsafeSlow=function(t){return d(null,t)},l.isBuffer=function(t){return!(null==t||!t._isBuffer)},l.compare=function(t,e){if(!l.isBuffer(t)||!l.isBuffer(e))throw new TypeError("Arguments must be Buffers");if(t===e)return 0;for(var n=t.length,r=e.length,i=0,o=Math.min(n,r);i<o;++i)if(t[i]!==e[i]){n=t[i],r=e[i];break}return n<r?-1:r<n?1:0},l.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},l.concat=function(t,e){if(!o(t))throw new TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return l.alloc(0);var n;if(void 0===e)for(e=0,n=0;n<t.length;++n)e+=t[n].length;var r=l.allocUnsafe(e),i=0;for(n=0;n<t.length;++n){var a=t[n];if(!l.isBuffer(a))throw new TypeError('"list" argument must be an Array of Buffers');a.copy(r,i),i+=a.length}return r},l.byteLength=p,l.prototype._isBuffer=!0,l.prototype.swap16=function(){var t=this.length;if(t%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var e=0;e<t;e+=2)g(this,e,e+1);return this},l.prototype.swap32=function(){var t=this.length;if(t%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var e=0;e<t;e+=4)g(this,e,e+3),g(this,e+1,e+2);return this},l.prototype.swap64=function(){var t=this.length;if(t%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var e=0;e<t;e+=8)g(this,e,e+7),g(this,e+1,e+6),g(this,e+2,e+5),g(this,e+3,e+4);return this},l.prototype.toString=function(){var t=0|this.length;return 0===t?"":0===arguments.length?T(this,0,t):m.apply(this,arguments)},l.prototype.equals=function(t){if(!l.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t||0===l.compare(this,t)},l.prototype.inspect=function(){var t="",n=e.IS;return this.length>0&&(t=this.toString("hex",0,n).match(/.{2}/g).join(" "),this.length>n&&(t+=" ... ")),"<Buffer "+t+">"},l.prototype.compare=function(t,e,n,r,i){if(!l.isBuffer(t))throw new TypeError("Argument must be a Buffer");if(void 0===e&&(e=0),void 0===n&&(n=t?t.length:0),void 0===r&&(r=0),void 0===i&&(i=this.length),e<0||n>t.length||r<0||i>this.length)throw new RangeError("out of range index");if(r>=i&&e>=n)return 0;if(r>=i)return-1;if(e>=n)return 1;if(this===t)return 0;for(var o=(i>>>=0)-(r>>>=0),a=(n>>>=0)-(e>>>=0),s=Math.min(o,a),u=this.slice(r,i),c=t.slice(e,n),d=0;d<s;++d)if(u[d]!==c[d]){o=u[d],a=c[d];break}return o<a?-1:a<o?1:0},l.prototype.includes=function(t,e,n){return-1!==this.indexOf(t,e,n)},l.prototype.indexOf=function(t,e,n){return v(this,t,e,n,!0)},l.prototype.lastIndexOf=function(t,e,n){return v(this,t,e,n,!1)},l.prototype.write=function(t,e,n,r){if(void 0===e)r="utf8",n=this.length,e=0;else if(void 0===n&&"string"==typeof e)r=e,n=this.length,e=0;else{if(!isFinite(e))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");e|=0,isFinite(n)?(n|=0,void 0===r&&(r="utf8")):(r=n,n=void 0)}var i=this.length-e;if((void 0===n||n>i)&&(n=i),t.length>0&&(n<0||e<0)||e>this.length)throw new RangeError("Attempt to write outside buffer bounds");r||(r="utf8");for(var o=!1;;)switch(r){case"hex":return b(this,t,e,n);case"utf8":case"utf-8":return _(this,t,e,n);case"ascii":return w(this,t,e,n);case"latin1":case"binary":return A(this,t,e,n);case"base64":return E(this,t,e,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return x(this,t,e,n);default:if(o)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),o=!0}},l.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var C=4096;function I(t,e,n){var r="";n=Math.min(t.length,n);for(var i=e;i<n;++i)r+=String.fromCharCode(127&t[i]);return r}function k(t,e,n){var r="";n=Math.min(t.length,n);for(var i=e;i<n;++i)r+=String.fromCharCode(t[i]);return r}function P(t,e,n){var r=t.length;(!e||e<0)&&(e=0),(!n||n<0||n>r)&&(n=r);for(var i="",o=e;o<n;++o)i+=F(t[o]);return i}function R(t,e,n){for(var r=t.slice(e,n),i="",o=0;o<r.length;o+=2)i+=String.fromCharCode(r[o]+256*r[o+1]);return i}function O(t,e,n){if(t%1!=0||t<0)throw new RangeError("offset is not uint");if(t+e>n)throw new RangeError("Trying to access beyond buffer length")}function M(t,e,n,r,i,o){if(!l.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>i||e<o)throw new RangeError('"value" argument is out of bounds');if(n+r>t.length)throw new RangeError("Index out of range")}function L(t,e,n,r){e<0&&(e=65535+e+1);for(var i=0,o=Math.min(t.length-n,2);i<o;++i)t[n+i]=(e&255<<8*(r?i:1-i))>>>8*(r?i:1-i)}function D(t,e,n,r){e<0&&(e=4294967295+e+1);for(var i=0,o=Math.min(t.length-n,4);i<o;++i)t[n+i]=e>>>8*(r?i:3-i)&255}function N(t,e,n,r,i,o){if(n+r>t.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function B(t,e,n,r,o){return o||N(t,0,n,4),i.write(t,e,n,r,23,4),n+4}function j(t,e,n,r,o){return o||N(t,0,n,8),i.write(t,e,n,r,52,8),n+8}l.prototype.slice=function(t,e){var n,r=this.length;if((t=~~t)<0?(t+=r)<0&&(t=0):t>r&&(t=r),(e=void 0===e?r:~~e)<0?(e+=r)<0&&(e=0):e>r&&(e=r),e<t&&(e=t),l.TYPED_ARRAY_SUPPORT)(n=this.subarray(t,e)).__proto__=l.prototype;else{var i=e-t;n=new l(i,void 0);for(var o=0;o<i;++o)n[o]=this[o+t]}return n},l.prototype.readUIntLE=function(t,e,n){t|=0,e|=0,n||O(t,e,this.length);for(var r=this[t],i=1,o=0;++o<e&&(i*=256);)r+=this[t+o]*i;return r},l.prototype.readUIntBE=function(t,e,n){t|=0,e|=0,n||O(t,e,this.length);for(var r=this[t+--e],i=1;e>0&&(i*=256);)r+=this[t+--e]*i;return r},l.prototype.readUInt8=function(t,e){return e||O(t,1,this.length),this[t]},l.prototype.readUInt16LE=function(t,e){return e||O(t,2,this.length),this[t]|this[t+1]<<8},l.prototype.readUInt16BE=function(t,e){return e||O(t,2,this.length),this[t]<<8|this[t+1]},l.prototype.readUInt32LE=function(t,e){return e||O(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},l.prototype.readUInt32BE=function(t,e){return e||O(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},l.prototype.readIntLE=function(t,e,n){t|=0,e|=0,n||O(t,e,this.length);for(var r=this[t],i=1,o=0;++o<e&&(i*=256);)r+=this[t+o]*i;return r>=(i*=128)&&(r-=Math.pow(2,8*e)),r},l.prototype.readIntBE=function(t,e,n){t|=0,e|=0,n||O(t,e,this.length);for(var r=e,i=1,o=this[t+--r];r>0&&(i*=256);)o+=this[t+--r]*i;return o>=(i*=128)&&(o-=Math.pow(2,8*e)),o},l.prototype.readInt8=function(t,e){return e||O(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},l.prototype.readInt16LE=function(t,e){e||O(t,2,this.length);var n=this[t]|this[t+1]<<8;return 32768&n?4294901760|n:n},l.prototype.readInt16BE=function(t,e){e||O(t,2,this.length);var n=this[t+1]|this[t]<<8;return 32768&n?4294901760|n:n},l.prototype.readInt32LE=function(t,e){return e||O(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},l.prototype.readInt32BE=function(t,e){return e||O(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},l.prototype.readFloatLE=function(t,e){return e||O(t,4,this.length),i.read(this,t,!0,23,4)},l.prototype.readFloatBE=function(t,e){return e||O(t,4,this.length),i.read(this,t,!1,23,4)},l.prototype.readDoubleLE=function(t,e){return e||O(t,8,this.length),i.read(this,t,!0,52,8)},l.prototype.readDoubleBE=function(t,e){return e||O(t,8,this.length),i.read(this,t,!1,52,8)},l.prototype.writeUIntLE=function(t,e,n,r){(t=+t,e|=0,n|=0,r)||M(this,t,e,n,Math.pow(2,8*n)-1,0);var i=1,o=0;for(this[e]=255&t;++o<n&&(i*=256);)this[e+o]=t/i&255;return e+n},l.prototype.writeUIntBE=function(t,e,n,r){(t=+t,e|=0,n|=0,r)||M(this,t,e,n,Math.pow(2,8*n)-1,0);var i=n-1,o=1;for(this[e+i]=255&t;--i>=0&&(o*=256);)this[e+i]=t/o&255;return e+n},l.prototype.writeUInt8=function(t,e,n){return t=+t,e|=0,n||M(this,t,e,1,255,0),l.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),this[e]=255&t,e+1},l.prototype.writeUInt16LE=function(t,e,n){return t=+t,e|=0,n||M(this,t,e,2,65535,0),l.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):L(this,t,e,!0),e+2},l.prototype.writeUInt16BE=function(t,e,n){return t=+t,e|=0,n||M(this,t,e,2,65535,0),l.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):L(this,t,e,!1),e+2},l.prototype.writeUInt32LE=function(t,e,n){return t=+t,e|=0,n||M(this,t,e,4,4294967295,0),l.TYPED_ARRAY_SUPPORT?(this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=255&t):D(this,t,e,!0),e+4},l.prototype.writeUInt32BE=function(t,e,n){return t=+t,e|=0,n||M(this,t,e,4,4294967295,0),l.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):D(this,t,e,!1),e+4},l.prototype.writeIntLE=function(t,e,n,r){if(t=+t,e|=0,!r){var i=Math.pow(2,8*n-1);M(this,t,e,n,i-1,-i)}var o=0,a=1,s=0;for(this[e]=255&t;++o<n&&(a*=256);)t<0&&0===s&&0!==this[e+o-1]&&(s=1),this[e+o]=(t/a|0)-s&255;return e+n},l.prototype.writeIntBE=function(t,e,n,r){if(t=+t,e|=0,!r){var i=Math.pow(2,8*n-1);M(this,t,e,n,i-1,-i)}var o=n-1,a=1,s=0;for(this[e+o]=255&t;--o>=0&&(a*=256);)t<0&&0===s&&0!==this[e+o+1]&&(s=1),this[e+o]=(t/a|0)-s&255;return e+n},l.prototype.writeInt8=function(t,e,n){return t=+t,e|=0,n||M(this,t,e,1,127,-128),l.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),t<0&&(t=255+t+1),this[e]=255&t,e+1},l.prototype.writeInt16LE=function(t,e,n){return t=+t,e|=0,n||M(this,t,e,2,32767,-32768),l.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):L(this,t,e,!0),e+2},l.prototype.writeInt16BE=function(t,e,n){return t=+t,e|=0,n||M(this,t,e,2,32767,-32768),l.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):L(this,t,e,!1),e+2},l.prototype.writeInt32LE=function(t,e,n){return t=+t,e|=0,n||M(this,t,e,4,2147483647,-2147483648),l.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24):D(this,t,e,!0),e+4},l.prototype.writeInt32BE=function(t,e,n){return t=+t,e|=0,n||M(this,t,e,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),l.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):D(this,t,e,!1),e+4},l.prototype.writeFloatLE=function(t,e,n){return B(this,t,e,!0,n)},l.prototype.writeFloatBE=function(t,e,n){return B(this,t,e,!1,n)},l.prototype.writeDoubleLE=function(t,e,n){return j(this,t,e,!0,n)},l.prototype.writeDoubleBE=function(t,e,n){return j(this,t,e,!1,n)},l.prototype.copy=function(t,e,n,r){if(n||(n=0),r||0===r||(r=this.length),e>=t.length&&(e=t.length),e||(e=0),r>0&&r<n&&(r=n),r===n)return 0;if(0===t.length||0===this.length)return 0;if(e<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("sourceStart out of bounds");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),t.length-e<r-n&&(r=t.length-e+n);var i,o=r-n;if(this===t&&n<e&&e<r)for(i=o-1;i>=0;--i)t[i+e]=this[i+n];else if(o<1e3||!l.TYPED_ARRAY_SUPPORT)for(i=0;i<o;++i)t[i+e]=this[i+n];else Uint8Array.prototype.set.call(t,this.subarray(n,n+o),e);return o},l.prototype.fill=function(t,e,n,r){if("string"==typeof t){if("string"==typeof e?(r=e,e=0,n=this.length):"string"==typeof n&&(r=n,n=this.length),1===t.length){var i=t.charCodeAt(0);i<256&&(t=i)}if(void 0!==r&&"string"!=typeof r)throw new TypeError("encoding must be a string");if("string"==typeof r&&!l.isEncoding(r))throw new TypeError("Unknown encoding: "+r)}else"number"==typeof t&&(t&=255);if(e<0||this.length<e||this.length<n)throw new RangeError("Out of range index");if(n<=e)return this;var o;if(e>>>=0,n=void 0===n?this.length:n>>>0,t||(t=0),"number"==typeof t)for(o=e;o<n;++o)this[o]=t;else{var a=l.isBuffer(t)?t:U(new l(t,r).toString()),s=a.length;for(o=0;o<n-e;++o)this[o+e]=a[o%s]}return this};var z=/[^+\/0-9A-Za-z-_]/g;function F(t){return t<16?"0"+t.toString(16):t.toString(16)}function U(t,e){var n;e=e||1/0;for(var r=t.length,i=null,o=[],a=0;a<r;++a){if((n=t.charCodeAt(a))>55295&&n<57344){if(!i){if(n>56319){(e-=3)>-1&&o.push(239,191,189);continue}if(a+1===r){(e-=3)>-1&&o.push(239,191,189);continue}i=n;continue}if(n<56320){(e-=3)>-1&&o.push(239,191,189),i=n;continue}n=65536+(i-55296<<10|n-56320)}else i&&(e-=3)>-1&&o.push(239,191,189);if(i=null,n<128){if((e-=1)<0)break;o.push(n)}else if(n<2048){if((e-=2)<0)break;o.push(n>>6|192,63&n|128)}else if(n<65536){if((e-=3)<0)break;o.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((e-=4)<0)break;o.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return o}function q(t){return r.toByteArray(function(t){if((t=function(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}(t).replace(z,"")).length<2)return"";for(;t.length%4!=0;)t+="=";return t}(t))}function G(t,e,n,r){for(var i=0;i<r&&!(i+n>=e.length||i>=t.length);++i)e[i+n]=t[i];return i}},2200:(t,e,n)=>{var r,i,o;i=[n(1066)],void 0===(o="function"==typeof(r=function(t){var e,n,r;function i(t,e){if(t.indexOf)return t.indexOf(e);for(var n=t.length;n--;)if(t[n]===e)return n;return-1}function o(t,e){var n=i(t,e);-1!==n&&t.splice(n,1)}function a(t,e){return"[object "+e+"]"===Object.prototype.toString.call(t)}function s(t){return a(t,"RegExp")}function l(t){return a(t,"Array")}function u(t){return"function"==typeof t}function c(t){return null===t||"null"===t?null:"true"===t||"false"!==t&&(t===r||"undefined"===t?r:""===t||isNaN(t)?t:parseFloat(t))}function d(t,e){for(var n,r,i,o,a=(t||"").replace("?","").split("&"),s=-1,u={};r=a[++s];)n=r.indexOf("="),o=r.substring(0,n),i=decodeURIComponent(r.substring(n+1)),!1!==e&&(i=c(i)),o in u?l(u[o])?u[o].push(i):u[o]=[u[o],i]:u[o]=i;return u}function f(){this.bypassed=new t.Signal,this.routed=new t.Signal,this._routes=[],this._prevRoutes=[],this._piped=[],this.resetState()}function h(e,n,r,i){var o=s(e),a=i.patternLexer;this._router=i,this._pattern=e,this._paramsIds=o?null:a.getParamIds(e),this._optionalParamsIds=o?null:a.getOptionalParamsIds(e),this._matchRegexp=o?e:a.compilePattern(e,i.ignoreCase),this.matched=new t.Signal,this.switched=new t.Signal,n&&this.matched.add(n),this._priority=r||0}return n=""===/t(.+)?/.exec("t")[1],f.prototype={greedy:!1,greedyEnabled:!0,ignoreCase:!0,ignoreState:!1,shouldTypecast:!1,normalizeFn:null,resetState:function(){this._prevRoutes.length=0,this._prevMatchedRequest=null,this._prevBypassedRequest=null},create:function(){return new f},addRoute:function(t,e,n){var r=new h(t,e,n,this);return this._sortedInsert(r),r},removeRoute:function(t){o(this._routes,t),t._destroy()},removeAllRoutes:function(){for(var t=this.getNumRoutes();t--;)this._routes[t]._destroy();this._routes.length=0},parse:function(t,e){if(t=t||"",e=e||[],this.ignoreState||t!==this._prevMatchedRequest&&t!==this._prevBypassedRequest){var n,r=this._getMatchedRoutes(t),i=0,o=r.length;if(o)for(this._prevMatchedRequest=t,this._notifyPrevRoutes(r,t),this._prevRoutes=r;i<o;)(n=r[i]).route.matched.dispatch.apply(n.route.matched,e.concat(n.params)),n.isFirst=!i,this.routed.dispatch.apply(this.routed,e.concat([t,n])),i+=1;else this._prevBypassedRequest=t,this.bypassed.dispatch.apply(this.bypassed,e.concat([t]));this._pipeParse(t,e)}},_notifyPrevRoutes:function(t,e){for(var n,r=0;n=this._prevRoutes[r++];)n.route.switched&&this._didSwitch(n.route,t)&&n.route.switched.dispatch(e)},_didSwitch:function(t,e){for(var n,r=0;n=e[r++];)if(n.route===t)return!1;return!0},_pipeParse:function(t,e){for(var n,r=0;n=this._piped[r++];)n.parse(t,e)},getNumRoutes:function(){return this._routes.length},_sortedInsert:function(t){var e=this._routes,n=e.length;do{--n}while(e[n]&&t._priority<=e[n]._priority);e.splice(n+1,0,t)},_getMatchedRoutes:function(t){for(var e,n=[],r=this._routes,i=r.length;(e=r[--i])&&((!n.length||this.greedy||e.greedy)&&e.match(t)&&n.push({route:e,params:e._getParamsArray(t)}),this.greedyEnabled||!n.length););return n},pipe:function(t){this._piped.push(t)},unpipe:function(t){o(this._piped,t)},toString:function(){return"[crossroads numRoutes:"+this.getNumRoutes()+"]"}},(e=new f).VERSION="0.12.2",e.NORM_AS_ARRAY=function(t,e){return[e.vals_]},e.NORM_AS_OBJECT=function(t,e){return[e]},h.prototype={greedy:!1,rules:void 0,match:function(t){return t=t||"",this._matchRegexp.test(t)&&this._validateParams(t)},_validateParams:function(t){var e,n=this.rules,r=this._getParamsObject(t);for(e in n)if("normalize_"!==e&&n.hasOwnProperty(e)&&!this._isValidParam(t,e,r))return!1;return!0},_isValidParam:function(t,e,n){var r=this.rules[e],o=n[e],a=!1,c=0===e.indexOf("?");return null==o&&this._optionalParamsIds&&-1!==i(this._optionalParamsIds,e)?a=!0:s(r)?(c&&(o=n[e+"_"]),a=r.test(o)):l(r)?(c&&(o=n[e+"_"]),a=this._isValidArrayRule(r,o)):u(r)&&(a=r(o,t,n)),a},_isValidArrayRule:function(t,e){if(!this._router.ignoreCase)return-1!==i(t,e);"string"==typeof e&&(e=e.toLowerCase());for(var n,r=t.length;r--;)if(("string"==typeof(n=t[r])?n.toLowerCase():n)===e)return!0;return!1},_getParamsObject:function(t){for(var e,r,o=this._router.shouldTypecast,a=this._router.patternLexer.getParamValues(t,this._matchRegexp,o),s={},l=a.length;l--;)r=a[l],this._paramsIds&&(0===(e=this._paramsIds[l]).indexOf("?")&&r&&(s[e+"_"]=r,r=d(r,o),a[l]=r),n&&""===r&&-1!==i(this._optionalParamsIds,e)&&(r=void 0,a[l]=r),s[e]=r),s[l]=r;return s.request_=o?c(t):t,s.vals_=a,s},_getParamsArray:function(t){var e=this.rules?this.rules.normalize_:null;return(e=e||this._router.normalizeFn)&&u(e)?e(t,this._getParamsObject(t)):this._getParamsObject(t).vals_},interpolate:function(t){var e=this._router.patternLexer.interpolate(this._pattern,t);if(!this._validateParams(e))throw new Error("Generated string doesn't validate against `Route.rules`.");return e},dispose:function(){this._router.removeRoute(this)},_destroy:function(){this.matched.dispose(),this.switched.dispose(),this.matched=this.switched=this._pattern=this._matchRegexp=null},toString:function(){return'[Route pattern:"'+this._pattern+'", numListeners:'+this.matched.getNumListeners()+"]"}},f.prototype.patternLexer=function(){var t=/[\\.+*?\^$\[\](){}\/'#]/g,e=/^\/|\/$/g,n=/\/$/g,r=/(?:\{|:)([^}:]+)(?:\}|:)/g,i={OS:{rgx:/([:}]|\w(?=\/))\/?(:|(?:\{\?))/g,save:"$1{{id}}$2",res:"\\/?"},RS:{rgx:/([:}])\/?(\{)/g,save:"$1{{id}}$2",res:"\\/"},RQ:{rgx:/\{\?([^}]+)\}/g,res:"\\?([^#]+)"},OQ:{rgx:/:\?([^:]+):/g,res:"(?:\\?([^#]*))?"},OR:{rgx:/:([^:]+)\*:/g,res:"(.*)?"},RR:{rgx:/\{([^}]+)\*\}/g,res:"(.+)"},RP:{rgx:/\{([^}]+)\}/g,res:"([^\\/?]+)"},OP:{rgx:/:([^:]+):/g,res:"([^\\/?]+)?/?"}},o=1;function a(t,e){var n,r=[];for(t.lastIndex=0;n=t.exec(e);)r.push(n[1]);return r}function s(t,e,n){var r,o;for(o in i)i.hasOwnProperty(o)&&(r=i[o],t=t.replace(r[e],r[n]));return t}return function(){var t,e;for(t in i)i.hasOwnProperty(t)&&((e=i[t]).id="__CR_"+t+"__",e.save="save"in e?e.save.replace("{{id}}",e.id):e.id,e.rRestore=new RegExp(e.id,"g"))}(),{strict:function(){o=2},loose:function(){o=1},legacy:function(){o=3},getParamIds:function(t){return a(r,t)},getOptionalParamsIds:function(t){return a(i.OP.rgx,t)},getParamValues:function(t,e,n){var r=e.exec(t);return r&&(r.shift(),n&&(r=function(t){for(var e=t.length,n=[];e--;)n[e]=c(t[e]);return n}(r))),r},compilePattern:function(r,i){return(r=r||"")&&(1===o?r=r.replace(e,""):3===o&&(r=r.replace(n,"")),r=s(r,"rgx","save"),r=s(r=r.replace(t,"\\$&"),"rRestore","res"),1===o&&(r="\\/?"+r)),2!==o&&(r+="\\/?"),new RegExp("^"+r+"$",i?"i":"")},interpolate:function(t,e){if(e=e||{},"string"!=typeof t)throw new Error("Route pattern should be a string.");return i.OS.trail||(i.OS.trail=new RegExp("(?:"+i.OS.id+")+$")),t.replace(i.OS.rgx,i.OS.save).replace(r,(function(t,n){var r;if(n="?"===n.substr(0,1)?n.substr(1):n,null!=e[n]){if("object"==typeof e[n]){var i,o=[];for(var a in e[n])if(l(i=e[n][a]))for(var s in i)"[]"==a.slice(-2)?o.push(encodeURI(a.slice(0,-2))+"[]="+encodeURI(i[s])):o.push(encodeURI(a+"="+i[s]));else o.push(encodeURI(a+"="+i));r="?"+o.join("&")}else r=String(e[n]);if(-1===t.indexOf("*")&&-1!==r.indexOf("/"))throw new Error('Invalid value "'+r+'" for segment "'+t+'".')}else{if(-1!==t.indexOf("{"))throw new Error("The segment "+t+" is required.");r=""}return r})).replace(i.OS.trail,"").replace(i.OS.rRestore,"/")}}}(),e})?r.apply(e,i):r)||(t.exports=o)},7334:t=>{function e(t,e,n){var r,i,o,a,s;function l(){var u=Date.now()-a;u<e&&u>=0?r=setTimeout(l,e-u):(r=null,n||(s=t.apply(o,i),o=i=null))}null==e&&(e=100);var u=function(){o=this,i=arguments,a=Date.now();var u=n&&!r;return r||(r=setTimeout(l,e)),u&&(s=t.apply(o,i),o=i=null),s};return u.clear=function(){r&&(clearTimeout(r),r=null)},u.flush=function(){r&&(s=t.apply(o,i),o=i=null,clearTimeout(r),r=null)},u}e.debounce=e,t.exports=e},7503:t=>{t.exports=function(t){switch(t){case"int8":return Int8Array;case"int16":return Int16Array;case"int32":return Int32Array;case"uint8":return Uint8Array;case"uint16":return Uint16Array;case"uint32":return Uint32Array;case"float32":return Float32Array;case"float64":return Float64Array;case"array":return Array;case"uint8_clamped":return Uint8ClampedArray}}},3011:(t,e,n)=>{var r,i=n(5606);!function(o){var a=Object.hasOwnProperty,s=Array.isArray?Array.isArray:function(t){return"[object Array]"===Object.prototype.toString.call(t)},l="object"==typeof i&&"function"==typeof i.nextTick,u="function"==typeof Symbol,c="object"==typeof Reflect,d="function"==typeof setImmediate?setImmediate:setTimeout,f=u?c&&"function"==typeof Reflect.ownKeys?Reflect.ownKeys:function(t){var e=Object.getOwnPropertyNames(t);return e.push.apply(e,Object.getOwnPropertySymbols(t)),e}:Object.keys;function h(){this._events={},this._conf&&p.call(this,this._conf)}function p(t){t&&(this._conf=t,t.delimiter&&(this.delimiter=t.delimiter),t.maxListeners!==o&&(this._maxListeners=t.maxListeners),t.wildcard&&(this.wildcard=t.wildcard),t.newListener&&(this._newListener=t.newListener),t.removeListener&&(this._removeListener=t.removeListener),t.verboseMemoryLeak&&(this.verboseMemoryLeak=t.verboseMemoryLeak),t.ignoreErrors&&(this.ignoreErrors=t.ignoreErrors),this.wildcard&&(this.listenerTree={}))}function m(t,e){var n="(node) warning: possible EventEmitter memory leak detected. "+t+" listeners added. Use emitter.setMaxListeners() to increase limit.";if(this.verboseMemoryLeak&&(n+=" Event name: "+e+"."),void 0!==i&&i.emitWarning){var r=new Error(n);r.name="MaxListenersExceededWarning",r.emitter=this,r.count=t,i.emitWarning(r)}else console.error(n),console.trace&&console.trace()}var g=function(t,e,n){var r=arguments.length;switch(r){case 0:return[];case 1:return[t];case 2:return[t,e];case 3:return[t,e,n];default:for(var i=new Array(r);r--;)i[r]=arguments[r];return i}};function v(t,e){for(var n={},r=t.length,i=e?e.length:0,a=0;a<r;a++)n[t[a]]=a<i?e[a]:o;return n}function y(t,e,n){var r,i;if(this._emitter=t,this._target=e,this._listeners={},this._listenersCount=0,(n.on||n.off)&&(r=n.on,i=n.off),e.addEventListener?(r=e.addEventListener,i=e.removeEventListener):e.addListener?(r=e.addListener,i=e.removeListener):e.on&&(r=e.on,i=e.off),!r&&!i)throw Error("target does not implement any known event API");if("function"!=typeof r)throw TypeError("on method must be a function");if("function"!=typeof i)throw TypeError("off method must be a function");this._on=r,this._off=i;var o=t._observers;o?o.push(this):t._observers=[this]}function b(t,e,n,r){var i=Object.assign({},e);if(!t)return i;if("object"!=typeof t)throw TypeError("options must be an object");var s,l,u,c=Object.keys(t),d=c.length;function f(t){throw Error('Invalid "'+s+'" option value'+(t?". Reason: "+t:""))}for(var h=0;h<d;h++){if(s=c[h],!r&&!a.call(e,s))throw Error('Unknown "'+s+'" option');(l=t[s])!==o&&(u=n[s],i[s]=u?u(l,f):l)}return i}function _(t,e){return"function"==typeof t&&t.hasOwnProperty("prototype")||e("value must be a constructor"),t}function w(t){var e="value must be type of "+t.join("|"),n=t.length,r=t[0],i=t[1];return 1===n?function(t,n){if(typeof t===r)return t;n(e)}:2===n?function(t,n){var o=typeof t;if(o===r||o===i)return t;n(e)}:function(r,i){for(var o=typeof r,a=n;a-- >0;)if(o===t[a])return r;i(e)}}Object.assign(y.prototype,{subscribe:function(t,e,n){var r=this,i=this._target,o=this._emitter,a=this._listeners,s=function(){var r=g.apply(null,arguments),a={data:r,name:e,original:t};n?!1!==n.call(i,a)&&o.emit.apply(o,[a.name].concat(r)):o.emit.apply(o,[e].concat(r))};if(a[t])throw Error("Event '"+t+"' is already listening");this._listenersCount++,o._newListener&&o._removeListener&&!r._onNewListener?(this._onNewListener=function(n){n===e&&null===a[t]&&(a[t]=s,r._on.call(i,t,s))},o.on("newListener",this._onNewListener),this._onRemoveListener=function(n){n===e&&!o.hasListeners(n)&&a[t]&&(a[t]=null,r._off.call(i,t,s))},a[t]=null,o.on("removeListener",this._onRemoveListener)):(a[t]=s,r._on.call(i,t,s))},unsubscribe:function(t){var e,n,r,i=this,o=this._listeners,a=this._emitter,s=this._off,l=this._target;if(t&&"string"!=typeof t)throw TypeError("event must be a string");function u(){i._onNewListener&&(a.off("newListener",i._onNewListener),a.off("removeListener",i._onRemoveListener),i._onNewListener=null,i._onRemoveListener=null);var t=S.call(a,i);a._observers.splice(t,1)}if(t){if(!(e=o[t]))return;s.call(l,t,e),delete o[t],--this._listenersCount||u()}else{for(r=(n=f(o)).length;r-- >0;)t=n[r],s.call(l,t,o[t]);this._listeners={},this._listenersCount=0,u()}}});var A=w(["function"]),E=w(["object","function"]);function x(t,e,n){var r,i,o,a=0,s=new t((function(l,u,c){function d(){i&&(i=null),a&&(clearTimeout(a),a=0)}n=b(n,{timeout:0,overload:!1},{timeout:function(t,e){return("number"!=typeof(t*=1)||t<0||!Number.isFinite(t))&&e("timeout must be a positive number"),t}}),r=!n.overload&&"function"==typeof t.prototype.cancel&&"function"==typeof c;var f=function(t){d(),l(t)},h=function(t){d(),u(t)};r?e(f,h,c):(i=[function(t){h(t||Error("canceled"))}],e(f,h,(function(t){if(o)throw Error("Unable to subscribe on cancel event asynchronously");if("function"!=typeof t)throw TypeError("onCancel callback must be a function");i.push(t)})),o=!0),n.timeout>0&&(a=setTimeout((function(){var t=Error("timeout");t.code="ETIMEDOUT",a=0,s.cancel(t),u(t)}),n.timeout))}));return r||(s.cancel=function(t){if(i){for(var e=i.length,n=1;n<e;n++)i[n](t);i[0](t),i=null}}),s}function S(t){var e=this._observers;if(!e)return-1;for(var n=e.length,r=0;r<n;r++)if(e[r]._target===t)return r;return-1}function T(t,e,n,r,i){if(!n)return null;if(0===r){var o=typeof e;if("string"===o){var a,s,l=0,u=0,c=this.delimiter,d=c.length;if(-1!==(s=e.indexOf(c))){a=new Array(5);do{a[l++]=e.slice(u,s),u=s+d}while(-1!==(s=e.indexOf(c,u)));a[l++]=e.slice(u),e=a,i=l}else e=[e],i=1}else"object"===o?i=e.length:(e=[e],i=1)}var h,p,m,g,v,y,b,_=null,w=e[r],A=e[r+1];if(r===i)n._listeners&&("function"==typeof n._listeners?(t&&t.push(n._listeners),_=[n]):(t&&t.push.apply(t,n._listeners),_=[n]));else{if("*"===w){for(s=(y=f(n)).length;s-- >0;)"_listeners"!==(h=y[s])&&(b=T(t,e,n[h],r+1,i))&&(_?_.push.apply(_,b):_=b);return _}if("**"===w){for((v=r+1===i||r+2===i&&"*"===A)&&n._listeners&&(_=T(t,e,n,i,i)),s=(y=f(n)).length;s-- >0;)"_listeners"!==(h=y[s])&&("*"===h||"**"===h?(n[h]._listeners&&!v&&(b=T(t,e,n[h],i,i))&&(_?_.push.apply(_,b):_=b),b=T(t,e,n[h],r,i)):b=T(t,e,n[h],h===A?r+2:r,i),b&&(_?_.push.apply(_,b):_=b));return _}n[w]&&(_=T(t,e,n[w],r+1,i))}if((p=n["*"])&&T(t,e,p,r+1,i),m=n["**"])if(r<i)for(m._listeners&&T(t,e,m,i,i),s=(y=f(m)).length;s-- >0;)"_listeners"!==(h=y[s])&&(h===A?T(t,e,m[h],r+2,i):h===w?T(t,e,m[h],r+1,i):((g={})[h]=m[h],T(t,e,{"**":g},r+1,i)));else m._listeners?T(t,e,m,i,i):m["*"]&&m["*"]._listeners&&T(t,e,m["*"],i,i);return _}function C(t,e,n){var r,i,o=0,a=0,s=this.delimiter,l=s.length;if("string"==typeof t)if(-1!==(r=t.indexOf(s))){i=new Array(5);do{i[o++]=t.slice(a,r),a=r+l}while(-1!==(r=t.indexOf(s,a)));i[o++]=t.slice(a)}else i=[t],o=1;else i=t,o=t.length;if(o>1)for(r=0;r+1<o;r++)if("**"===i[r]&&"**"===i[r+1])return;var u,c=this.listenerTree;for(r=0;r<o;r++)if(c=c[u=i[r]]||(c[u]={}),r===o-1)return c._listeners?("function"==typeof c._listeners&&(c._listeners=[c._listeners]),n?c._listeners.unshift(e):c._listeners.push(e),!c._listeners.warned&&this._maxListeners>0&&c._listeners.length>this._maxListeners&&(c._listeners.warned=!0,m.call(this,c._listeners.length,u))):c._listeners=e,!0;return!0}function I(t,e,n,r){for(var i,o,a,s,l=f(t),u=l.length,c=t._listeners;u-- >0;)i=t[o=l[u]],a="_listeners"===o?n:n?n.concat(o):[o],s=r||"symbol"==typeof o,c&&e.push(s?a:a.join(this.delimiter)),"object"==typeof i&&I.call(this,i,e,a,s);return e}function k(t){for(var e,n,r,i=f(t),o=i.length;o-- >0;)(e=t[n=i[o]])&&(r=!0,"_listeners"===n||k(e)||delete t[n]);return r}function P(t,e,n){this.emitter=t,this.event=e,this.listener=n}function R(t,e,n){if(!0===n)a=!0;else if(!1===n)r=!0;else{if(!n||"object"!=typeof n)throw TypeError("options should be an object or true");var r=n.async,a=n.promisify,s=n.nextTick,u=n.objectify}if(r||s||a){var c=e,f=e._origin||e;if(s&&!l)throw Error("process.nextTick is not supported");a===o&&(a="AsyncFunction"===e.constructor.name),e=function(){var t=arguments,e=this,n=this.event;return a?s?Promise.resolve():new Promise((function(t){d(t)})).then((function(){return e.event=n,c.apply(e,t)})):(s?i.nextTick:d)((function(){e.event=n,c.apply(e,t)}))},e._async=!0,e._origin=f}return[e,u?new P(this,t,e):this]}function O(t){this._events={},this._newListener=!1,this._removeListener=!1,this.verboseMemoryLeak=!1,p.call(this,t)}P.prototype.off=function(){return this.emitter.off(this.event,this.listener),this},O.EventEmitter2=O,O.prototype.listenTo=function(t,e,n){if("object"!=typeof t)throw TypeError("target musts be an object");var r=this;function i(e){if("object"!=typeof e)throw TypeError("events must be an object");var i,o=n.reducers,a=S.call(r,t);i=-1===a?new y(r,t,n):r._observers[a];for(var s,l=f(e),u=l.length,c="function"==typeof o,d=0;d<u;d++)s=l[d],i.subscribe(s,e[s]||s,c?o:o&&o[s])}return n=b(n,{on:o,off:o,reducers:o},{on:A,off:A,reducers:E}),s(e)?i(v(e)):i("string"==typeof e?v(e.split(/\s+/)):e),this},O.prototype.stopListeningTo=function(t,e){var n=this._observers;if(!n)return!1;var r,i=n.length,o=!1;if(t&&"object"!=typeof t)throw TypeError("target should be an object");for(;i-- >0;)r=n[i],t&&r._target!==t||(r.unsubscribe(e),o=!0);return o},O.prototype.delimiter=".",O.prototype.setMaxListeners=function(t){t!==o&&(this._maxListeners=t,this._conf||(this._conf={}),this._conf.maxListeners=t)},O.prototype.getMaxListeners=function(){return this._maxListeners},O.prototype.event="",O.prototype.once=function(t,e,n){return this._once(t,e,!1,n)},O.prototype.prependOnceListener=function(t,e,n){return this._once(t,e,!0,n)},O.prototype._once=function(t,e,n,r){return this._many(t,1,e,n,r)},O.prototype.many=function(t,e,n,r){return this._many(t,e,n,!1,r)},O.prototype.prependMany=function(t,e,n,r){return this._many(t,e,n,!0,r)},O.prototype._many=function(t,e,n,r,i){var o=this;if("function"!=typeof n)throw new Error("many only accepts instances of Function");function a(){return 0==--e&&o.off(t,a),n.apply(this,arguments)}return a._origin=n,this._on(t,a,r,i)},O.prototype.emit=function(){if(!this._events&&!this._all)return!1;this._events||h.call(this);var t,e,n,r,i,o,a=arguments[0],s=this.wildcard;if("newListener"===a&&!this._newListener&&!this._events.newListener)return!1;if(s&&(t=a,"newListener"!==a&&"removeListener"!==a&&"object"==typeof a)){if(n=a.length,u)for(r=0;r<n;r++)if("symbol"==typeof a[r]){o=!0;break}o||(a=a.join(this.delimiter))}var l,c=arguments.length;if(this._all&&this._all.length)for(r=0,n=(l=this._all.slice()).length;r<n;r++)switch(this.event=a,c){case 1:l[r].call(this,a);break;case 2:l[r].call(this,a,arguments[1]);break;case 3:l[r].call(this,a,arguments[1],arguments[2]);break;default:l[r].apply(this,arguments)}if(s)l=[],T.call(this,l,t,this.listenerTree,0,n);else{if("function"==typeof(l=this._events[a])){switch(this.event=a,c){case 1:l.call(this);break;case 2:l.call(this,arguments[1]);break;case 3:l.call(this,arguments[1],arguments[2]);break;default:for(e=new Array(c-1),i=1;i<c;i++)e[i-1]=arguments[i];l.apply(this,e)}return!0}l&&(l=l.slice())}if(l&&l.length){if(c>3)for(e=new Array(c-1),i=1;i<c;i++)e[i-1]=arguments[i];for(r=0,n=l.length;r<n;r++)switch(this.event=a,c){case 1:l[r].call(this);break;case 2:l[r].call(this,arguments[1]);break;case 3:l[r].call(this,arguments[1],arguments[2]);break;default:l[r].apply(this,e)}return!0}if(!this.ignoreErrors&&!this._all&&"error"===a)throw arguments[1]instanceof Error?arguments[1]:new Error("Uncaught, unspecified 'error' event.");return!!this._all},O.prototype.emitAsync=function(){if(!this._events&&!this._all)return!1;this._events||h.call(this);var t,e,n,r,i,o,a=arguments[0],s=this.wildcard;if("newListener"===a&&!this._newListener&&!this._events.newListener)return Promise.resolve([!1]);if(s&&(t=a,"newListener"!==a&&"removeListener"!==a&&"object"==typeof a)){if(r=a.length,u)for(i=0;i<r;i++)if("symbol"==typeof a[i]){e=!0;break}e||(a=a.join(this.delimiter))}var l,c=[],d=arguments.length;if(this._all)for(i=0,r=this._all.length;i<r;i++)switch(this.event=a,d){case 1:c.push(this._all[i].call(this,a));break;case 2:c.push(this._all[i].call(this,a,arguments[1]));break;case 3:c.push(this._all[i].call(this,a,arguments[1],arguments[2]));break;default:c.push(this._all[i].apply(this,arguments))}if(s?(l=[],T.call(this,l,t,this.listenerTree,0)):l=this._events[a],"function"==typeof l)switch(this.event=a,d){case 1:c.push(l.call(this));break;case 2:c.push(l.call(this,arguments[1]));break;case 3:c.push(l.call(this,arguments[1],arguments[2]));break;default:for(n=new Array(d-1),o=1;o<d;o++)n[o-1]=arguments[o];c.push(l.apply(this,n))}else if(l&&l.length){if(l=l.slice(),d>3)for(n=new Array(d-1),o=1;o<d;o++)n[o-1]=arguments[o];for(i=0,r=l.length;i<r;i++)switch(this.event=a,d){case 1:c.push(l[i].call(this));break;case 2:c.push(l[i].call(this,arguments[1]));break;case 3:c.push(l[i].call(this,arguments[1],arguments[2]));break;default:c.push(l[i].apply(this,n))}}else if(!this.ignoreErrors&&!this._all&&"error"===a)return arguments[1]instanceof Error?Promise.reject(arguments[1]):Promise.reject("Uncaught, unspecified 'error' event.");return Promise.all(c)},O.prototype.on=function(t,e,n){return this._on(t,e,!1,n)},O.prototype.prependListener=function(t,e,n){return this._on(t,e,!0,n)},O.prototype.onAny=function(t){return this._onAny(t,!1)},O.prototype.prependAny=function(t){return this._onAny(t,!0)},O.prototype.addListener=O.prototype.on,O.prototype._onAny=function(t,e){if("function"!=typeof t)throw new Error("onAny only accepts instances of Function");return this._all||(this._all=[]),e?this._all.unshift(t):this._all.push(t),this},O.prototype._on=function(t,e,n,r){if("function"==typeof t)return this._onAny(t,e),this;if("function"!=typeof e)throw new Error("on only accepts instances of Function");this._events||h.call(this);var i,a=this;return r!==o&&(e=(i=R.call(this,t,e,r))[0],a=i[1]),this._newListener&&this.emit("newListener",t,e),this.wildcard?(C.call(this,t,e,n),a):(this._events[t]?("function"==typeof this._events[t]&&(this._events[t]=[this._events[t]]),n?this._events[t].unshift(e):this._events[t].push(e),!this._events[t].warned&&this._maxListeners>0&&this._events[t].length>this._maxListeners&&(this._events[t].warned=!0,m.call(this,this._events[t].length,t))):this._events[t]=e,a)},O.prototype.off=function(t,e){if("function"!=typeof e)throw new Error("removeListener only takes instances of Function");var n,r=[];if(this.wildcard){var i="string"==typeof t?t.split(this.delimiter):t.slice();if(!(r=T.call(this,null,i,this.listenerTree,0)))return this}else{if(!this._events[t])return this;n=this._events[t],r.push({_listeners:n})}for(var o=0;o<r.length;o++){var a=r[o];if(n=a._listeners,s(n)){for(var l=-1,u=0,c=n.length;u<c;u++)if(n[u]===e||n[u].listener&&n[u].listener===e||n[u]._origin&&n[u]._origin===e){l=u;break}if(l<0)continue;return this.wildcard?a._listeners.splice(l,1):this._events[t].splice(l,1),0===n.length&&(this.wildcard?delete a._listeners:delete this._events[t]),this._removeListener&&this.emit("removeListener",t,e),this}(n===e||n.listener&&n.listener===e||n._origin&&n._origin===e)&&(this.wildcard?delete a._listeners:delete this._events[t],this._removeListener&&this.emit("removeListener",t,e))}return this.listenerTree&&k(this.listenerTree),this},O.prototype.offAny=function(t){var e,n=0,r=0;if(t&&this._all&&this._all.length>0){for(n=0,r=(e=this._all).length;n<r;n++)if(t===e[n])return e.splice(n,1),this._removeListener&&this.emit("removeListenerAny",t),this}else{if(e=this._all,this._removeListener)for(n=0,r=e.length;n<r;n++)this.emit("removeListenerAny",e[n]);this._all=[]}return this},O.prototype.removeListener=O.prototype.off,O.prototype.removeAllListeners=function(t){if(t===o)return!this._events||h.call(this),this;if(this.wildcard){var e,n=T.call(this,null,t,this.listenerTree,0);if(!n)return this;for(e=0;e<n.length;e++)n[e]._listeners=null;this.listenerTree&&k(this.listenerTree)}else this._events&&(this._events[t]=null);return this},O.prototype.listeners=function(t){var e,n,r,i,a,s=this._events;if(t===o){if(this.wildcard)throw Error("event name required for wildcard emitter");if(!s)return[];for(i=(e=f(s)).length,r=[];i-- >0;)"function"==typeof(n=s[e[i]])?r.push(n):r.push.apply(r,n);return r}if(this.wildcard){if(!(a=this.listenerTree))return[];var l=[],u="string"==typeof t?t.split(this.delimiter):t.slice();return T.call(this,l,u,a,0),l}return s&&(n=s[t])?"function"==typeof n?[n]:n:[]},O.prototype.eventNames=function(t){var e=this._events;return this.wildcard?I.call(this,this.listenerTree,[],null,t):e?f(e):[]},O.prototype.listenerCount=function(t){return this.listeners(t).length},O.prototype.hasListeners=function(t){if(this.wildcard){var e=[],n="string"==typeof t?t.split(this.delimiter):t.slice();return T.call(this,e,n,this.listenerTree,0),e.length>0}var r=this._events,i=this._all;return!!(i&&i.length||r&&(t===o?f(r).length:r[t]))},O.prototype.listenersAny=function(){return this._all?this._all:[]},O.prototype.waitFor=function(t,e){var n=this,r=typeof e;return"number"===r?e={timeout:e}:"function"===r&&(e={filter:e}),x((e=b(e,{timeout:0,filter:o,handleError:!1,Promise,overload:!1},{filter:A,Promise:_})).Promise,(function(r,i,o){function a(){var o=e.filter;if(!o||o.apply(n,arguments))if(n.off(t,a),e.handleError){var s=arguments[0];s?i(s):r(g.apply(null,arguments).slice(1))}else r(g.apply(null,arguments))}o((function(){n.off(t,a)})),n._on(t,a,!1)}),{timeout:e.timeout,overload:e.overload})};var M=O.prototype;Object.defineProperties(O,{defaultMaxListeners:{get:function(){return M._maxListeners},set:function(t){if("number"!=typeof t||t<0||Number.isNaN(t))throw TypeError("n must be a non-negative number");M._maxListeners=t},enumerable:!0},once:{value:function(t,e,n){return x((n=b(n,{Promise,timeout:0,overload:!1},{Promise:_})).Promise,(function(n,r,i){var o;if("function"==typeof t.addEventListener)return o=function(){n(g.apply(null,arguments))},i((function(){t.removeEventListener(e,o)})),void t.addEventListener(e,o,{once:!0});var a,s=function(){a&&t.removeListener("error",a),n(g.apply(null,arguments))};"error"!==e&&(a=function(n){t.removeListener(e,s),r(n)},t.once("error",a)),i((function(){a&&t.removeListener("error",a),t.removeListener(e,s)})),t.once(e,s)}),{timeout:n.timeout,overload:n.overload})},writable:!0,configurable:!0}}),Object.defineProperties(M,{_maxListeners:{value:10,writable:!0,configurable:!0},_observers:{value:null,writable:!0,configurable:!0}}),(r=function(){return O}.call(e,n,e,t))===o||(t.exports=r)}()},7007:t=>{"use strict";var e,n="object"==typeof Reflect?Reflect:null,r=n&&"function"==typeof n.apply?n.apply:function(t,e,n){return Function.prototype.apply.call(t,e,n)};e=n&&"function"==typeof n.ownKeys?n.ownKeys:Object.getOwnPropertySymbols?function(t){return Object.getOwnPropertyNames(t).concat(Object.getOwnPropertySymbols(t))}:function(t){return Object.getOwnPropertyNames(t)};var i=Number.isNaN||function(t){return t!=t};function o(){o.init.call(this)}t.exports=o,t.exports.once=function(t,e){return new Promise((function(n,r){function i(n){t.removeListener(e,o),r(n)}function o(){"function"==typeof t.removeListener&&t.removeListener("error",i),n([].slice.call(arguments))}m(t,e,o,{once:!0}),"error"!==e&&function(t,e,n){"function"==typeof t.on&&m(t,"error",e,n)}(t,i,{once:!0})}))},o.EventEmitter=o,o.prototype._events=void 0,o.prototype._eventsCount=0,o.prototype._maxListeners=void 0;var a=10;function s(t){if("function"!=typeof t)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t)}function l(t){return void 0===t._maxListeners?o.defaultMaxListeners:t._maxListeners}function u(t,e,n,r){var i,o,a,u;if(s(n),void 0===(o=t._events)?(o=t._events=Object.create(null),t._eventsCount=0):(void 0!==o.newListener&&(t.emit("newListener",e,n.listener?n.listener:n),o=t._events),a=o[e]),void 0===a)a=o[e]=n,++t._eventsCount;else if("function"==typeof a?a=o[e]=r?[n,a]:[a,n]:r?a.unshift(n):a.push(n),(i=l(t))>0&&a.length>i&&!a.warned){a.warned=!0;var c=new Error("Possible EventEmitter memory leak detected. "+a.length+" "+String(e)+" listeners added. Use emitter.setMaxListeners() to increase limit");c.name="MaxListenersExceededWarning",c.emitter=t,c.type=e,c.count=a.length,u=c,console&&console.warn&&console.warn(u)}return t}function c(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function d(t,e,n){var r={fired:!1,wrapFn:void 0,target:t,type:e,listener:n},i=c.bind(r);return i.listener=n,r.wrapFn=i,i}function f(t,e,n){var r=t._events;if(void 0===r)return[];var i=r[e];return void 0===i?[]:"function"==typeof i?n?[i.listener||i]:[i]:n?function(t){for(var e=new Array(t.length),n=0;n<e.length;++n)e[n]=t[n].listener||t[n];return e}(i):p(i,i.length)}function h(t){var e=this._events;if(void 0!==e){var n=e[t];if("function"==typeof n)return 1;if(void 0!==n)return n.length}return 0}function p(t,e){for(var n=new Array(e),r=0;r<e;++r)n[r]=t[r];return n}function m(t,e,n,r){if("function"==typeof t.on)r.once?t.once(e,n):t.on(e,n);else{if("function"!=typeof t.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof t);t.addEventListener(e,(function i(o){r.once&&t.removeEventListener(e,i),n(o)}))}}Object.defineProperty(o,"defaultMaxListeners",{enumerable:!0,get:function(){return a},set:function(t){if("number"!=typeof t||t<0||i(t))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+t+".");a=t}}),o.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},o.prototype.setMaxListeners=function(t){if("number"!=typeof t||t<0||i(t))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+t+".");return this._maxListeners=t,this},o.prototype.getMaxListeners=function(){return l(this)},o.prototype.emit=function(t){for(var e=[],n=1;n<arguments.length;n++)e.push(arguments[n]);var i="error"===t,o=this._events;if(void 0!==o)i=i&&void 0===o.error;else if(!i)return!1;if(i){var a;if(e.length>0&&(a=e[0]),a instanceof Error)throw a;var s=new Error("Unhandled error."+(a?" ("+a.message+")":""));throw s.context=a,s}var l=o[t];if(void 0===l)return!1;if("function"==typeof l)r(l,this,e);else{var u=l.length,c=p(l,u);for(n=0;n<u;++n)r(c[n],this,e)}return!0},o.prototype.addListener=function(t,e){return u(this,t,e,!1)},o.prototype.on=o.prototype.addListener,o.prototype.prependListener=function(t,e){return u(this,t,e,!0)},o.prototype.once=function(t,e){return s(e),this.on(t,d(this,t,e)),this},o.prototype.prependOnceListener=function(t,e){return s(e),this.prependListener(t,d(this,t,e)),this},o.prototype.removeListener=function(t,e){var n,r,i,o,a;if(s(e),void 0===(r=this._events))return this;if(void 0===(n=r[t]))return this;if(n===e||n.listener===e)0==--this._eventsCount?this._events=Object.create(null):(delete r[t],r.removeListener&&this.emit("removeListener",t,n.listener||e));else if("function"!=typeof n){for(i=-1,o=n.length-1;o>=0;o--)if(n[o]===e||n[o].listener===e){a=n[o].listener,i=o;break}if(i<0)return this;0===i?n.shift():function(t,e){for(;e+1<t.length;e++)t[e]=t[e+1];t.pop()}(n,i),1===n.length&&(r[t]=n[0]),void 0!==r.removeListener&&this.emit("removeListener",t,a||e)}return this},o.prototype.off=o.prototype.removeListener,o.prototype.removeAllListeners=function(t){var e,n,r;if(void 0===(n=this._events))return this;if(void 0===n.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==n[t]&&(0==--this._eventsCount?this._events=Object.create(null):delete n[t]),this;if(0===arguments.length){var i,o=Object.keys(n);for(r=0;r<o.length;++r)"removeListener"!==(i=o[r])&&this.removeAllListeners(i);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(e=n[t]))this.removeListener(t,e);else if(void 0!==e)for(r=e.length-1;r>=0;r--)this.removeListener(t,e[r]);return this},o.prototype.listeners=function(t){return f(this,t,!0)},o.prototype.rawListeners=function(t){return f(this,t,!1)},o.listenerCount=function(t,e){return"function"==typeof t.listenerCount?t.listenerCount(e):h.call(t,e)},o.prototype.listenerCount=h,o.prototype.eventNames=function(){return this._eventsCount>0?e(this._events):[]}},6983:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.findClosestIndex=function(t,e,n){for(var r={index:-1,distance:Number.POSITIVE_INFINITY,value:0},i=0;i<t.length;i++){var o=t[i],a=o;if(n){var s=n(o,i,t);switch(s){case!1:continue;case!0:break;default:a=s}}if("number"!=typeof a)throw new TypeError("Expected a number value. Received "+a+".");var l=Math.abs(a-e);if(0===l)return i;l<r.distance&&(r={index:i,distance:l,value:a})}return r.index},e.findClosest=function(t,n,r){return t[e.findClosestIndex(t,n,r)]},e.default=e.findClosest},8520:function(t,e){!function(t){"use strict";function e(t){if(!t)throw new Error("Assertion failed.")}function n(t,e){-1===t.indexOf(e)&&t.push(e)}function r(t,e){const n=t.indexOf(e);-1!==n&&t.splice(n,1)}function i(t,n){return e(n>=0&&n<=31),t.TEXTURE0+n}var o,a;(function(t){class e{constructor(t=0,e=0,n=0,r=0){this.x=t,this.y=e,this.width=n,this.height=r}set(t,e,n,r){this.x=t,this.y=e,this.width=n,this.height=r}equals(t){return this.x===t.x&&this.y===t.y&&this.width===t.width&&this.height===t.height}}t.Rect=e;class n{constructor(t,e,n,r){this.redF=t,this.greenF=e,this.blueF=n,this.alphaF=r}}let r,i,o,a,s;n.TRANSPARENT=new n(0,0,0,0),t.Color=n,function(t){t[t.ZERO=0]="ZERO",t[t.ONE=1]="ONE",t[t.SOURCE_COLOR=2]="SOURCE_COLOR",t[t.TARGET_COLOR=3]="TARGET_COLOR",t[t.INVERSE_SOURCE_COLOR=4]="INVERSE_SOURCE_COLOR",t[t.INVERSE_TARGET_COLOR=5]="INVERSE_TARGET_COLOR",t[t.SOURCE_ALPHA=6]="SOURCE_ALPHA",t[t.TARGET_ALPHA=7]="TARGET_ALPHA",t[t.INVERSE_SOURCE_ALPHA=8]="INVERSE_SOURCE_ALPHA",t[t.INVERSE_TARGET_ALPHA=9]="INVERSE_TARGET_ALPHA",t[t.CONSTANT=10]="CONSTANT",t[t.INVERSE_CONSTANT=11]="INVERSE_CONSTANT"}(r=t.BlendOperation||(t.BlendOperation={})),function(t){t[t.TRIANGLES=0]="TRIANGLES",t[t.TRIANGLE_STRIP=1]="TRIANGLE_STRIP"}(i=t.Primitive||(t.Primitive={}));class l{setCopyBlendState(){this.setBlendState(r.ONE,r.ZERO)}setAddBlendState(){this.setBlendState(r.ONE,r.ONE)}setPremultipliedBlendState(){this.setBlendState(r.ONE,r.INVERSE_SOURCE_ALPHA)}setUnpremultipliedBlendState(){this.setBlendState(r.SOURCE_ALPHA,r.INVERSE_SOURCE_ALPHA)}}function u(t){return t==o.FLOAT?4:1}t.Context=l,function(t){t[t.FLOAT=0]="FLOAT",t[t.BYTE=1]="BYTE"}(o=t.AttributeType||(t.AttributeType={})),t.attributeByteLength=u;class c{constructor(t,e,n,r){this.name=t,this.type=e,this.count=n,this.byteOffset=r}}t.Attribute=c;class d{constructor(){this._attributes=[],this._stride=0}get attributes(){return this._attributes}get stride(){return this._stride}add(t,e,n){return this.attributes.push(new c(t,e,n,this.stride)),this._stride+=n*u(e),this}}t.VertexFormat=d;class f{uploadFloat32Array(t){this.upload(new Uint8Array(t.buffer),0)}uploadFloats(t){this.uploadFloat32Array(new Float32Array(t))}}t.VertexBuffer=f,function(t){t[t.NEAREST=0]="NEAREST",t[t.LINEAR=1]="LINEAR"}(a=t.PixelFilter||(t.PixelFilter={})),function(t){t[t.REPEAT=0]="REPEAT",t[t.CLAMP=1]="CLAMP"}(s=t.PixelWrap||(t.PixelWrap={}));class h{constructor(t,e,n){this.minFilter=t,this.magFilter=e,this.wrap=n}}h.LINEAR_CLAMP=new h(a.LINEAR,a.LINEAR,s.CLAMP),h.LINEAR_MIN_NEAREST_MAG_CLAMP=new h(a.LINEAR,a.NEAREST,s.CLAMP),h.NEAREST_CLAMP=new h(a.NEAREST,a.NEAREST,s.CLAMP),t.TextureFormat=h})(o||(o={})),function(t){class a extends o.Context{constructor(t=document.createElement("canvas")){super(),this._attributeCount=0,this._blendOperations=0,this._contextResetHandlers=[],this._currentClearColor=o.Color.TRANSPARENT,this._currentRenderTarget=null,this._defaultViewport=new o.Rect,this._forceStateUpdate=!0,this._generation=1,this._height=0,this._oldBlendOperations=0,this._oldRenderTarget=null,this._oldViewport=new o.Rect,this._width=0,this.handleWebglContextRestored=()=>{this._attributeCount=0,this._currentClearColor=o.Color.TRANSPARENT,this._forceStateUpdate=!0,this._generation++;for(let t of this._contextResetHandlers)t()},this.ANGLE_instanced_arrays=null,this.ANGLE_instanced_arrays_generation=-1;let e=t.getContext("webgl",{alpha:!1,antialias:!1,depth:!1,preserveDrawingBuffer:!0,stencil:!1});if(null==e)throw new Error("Setup failure");this._gl=e;let n=t.style;t.width=0,t.height=0,n.width=n.height="0",t.addEventListener("webglcontextlost",(t=>{t.preventDefault()})),t.addEventListener("webglcontextrestored",this.handleWebglContextRestored),this._blendOperationMap={[o.BlendOperation.ZERO]:this._gl.ZERO,[o.BlendOperation.ONE]:this._gl.ONE,[o.BlendOperation.SOURCE_COLOR]:this._gl.SRC_COLOR,[o.BlendOperation.TARGET_COLOR]:this._gl.DST_COLOR,[o.BlendOperation.INVERSE_SOURCE_COLOR]:this._gl.ONE_MINUS_SRC_COLOR,[o.BlendOperation.INVERSE_TARGET_COLOR]:this._gl.ONE_MINUS_DST_COLOR,[o.BlendOperation.SOURCE_ALPHA]:this._gl.SRC_ALPHA,[o.BlendOperation.TARGET_ALPHA]:this._gl.DST_ALPHA,[o.BlendOperation.INVERSE_SOURCE_ALPHA]:this._gl.ONE_MINUS_SRC_ALPHA,[o.BlendOperation.INVERSE_TARGET_ALPHA]:this._gl.ONE_MINUS_DST_ALPHA,[o.BlendOperation.CONSTANT]:this._gl.CONSTANT_COLOR,[o.BlendOperation.INVERSE_CONSTANT]:this._gl.ONE_MINUS_CONSTANT_COLOR}}get widthInPixels(){return this._width}get heightInPixels(){return this._height}testContextLoss(){this.handleWebglContextRestored()}get gl(){return this._gl}get generation(){return this._generation}addContextResetHandler(t){n(this._contextResetHandlers,t)}removeContextResetHandler(t){r(this._contextResetHandlers,t)}get currentRenderTarget(){return this._currentRenderTarget}beginFrame(){this.setRenderTarget(null)}endFrame(){}setBlendState(t,e){this._blendOperations=a._packBlendModes(t,e)}setViewport(t,e,n,r){(null!=this._currentRenderTarget?this._currentRenderTarget.viewport:this._defaultViewport).set(t,e,n,r)}get viewport(){return null!=this._currentRenderTarget?this._currentRenderTarget.viewport:this._defaultViewport}get renderTargetWidthInPixels(){return null!=this._currentRenderTarget?this._currentRenderTarget.viewport.width:this._width}get renderTargetHeightInPixels(){return null!=this._currentRenderTarget?this._currentRenderTarget.viewport.height:this._height}draw(t,e,n){this._updateRenderTargetAndViewport(),g.from(e).prepare(),v.from(n).prepare(),this._updateFormat(e.format),this._updateBlendState(),this._gl.drawArrays(t==o.Primitive.TRIANGLES?this._gl.TRIANGLES:this._gl.TRIANGLE_STRIP,0,Math.floor(n.byteCount/e.format.stride)),this._forceStateUpdate=!1}resize(t,e,n,r){let i=this._gl.canvas;const o=i.getBoundingClientRect();if(this._width===n&&this._height===e&&o.width===n&&o.height===r)return;let a=i.style;i.width=t,i.height=e,a.width=`${n}px`,a.height=`${r}px`,this.setViewport(0,0,t,e),this._width=t,this._height=e}clear(t){this._updateRenderTargetAndViewport(),this._updateBlendState(),t!=this._currentClearColor&&(this._gl.clearColor(t.redF,t.greenF,t.blueF,t.alphaF),this._currentClearColor=t),this._gl.clear(this._gl.COLOR_BUFFER_BIT)}setRenderTarget(t){this._currentRenderTarget=b.from(t)}createMaterial(t,e,n){return new g(this,t,e,n)}createVertexBuffer(t){return e(t>0&&t%4==0),new v(this,t)}createTexture(t,e,n,r){return new y(this,t,e,n,r)}createRenderTarget(t){return new b(this,y.from(t))}getANGLE_instanced_arrays(){if(this.ANGLE_instanced_arrays_generation!==this._generation&&(this.ANGLE_instanced_arrays=null),!this.ANGLE_instanced_arrays&&(this.ANGLE_instanced_arrays=this.gl.getExtension("ANGLE_instanced_arrays"),!this.ANGLE_instanced_arrays))throw new Error("Failed to get extension ANGLE_instanced_arrays");return this.ANGLE_instanced_arrays}_updateRenderTargetAndViewport(){let t=this._currentRenderTarget,e=null!=t?t.viewport:this._defaultViewport,n=this._gl;(this._forceStateUpdate||this._oldRenderTarget!=t)&&(n.bindFramebuffer(n.FRAMEBUFFER,t?t.framebuffer:null),this._oldRenderTarget=t),!this._forceStateUpdate&&this._oldViewport.equals(e)||(n.viewport(e.x,this.renderTargetHeightInPixels-e.y-e.height,e.width,e.height),this._oldViewport.set(e.x,e.y,e.width,e.height))}_updateBlendState(){if(this._forceStateUpdate||this._oldBlendOperations!=this._blendOperations){let t=this._gl,n=this._blendOperations,r=this._oldBlendOperations,i=15&n,o=n>>4;e(i in this._blendOperationMap),e(o in this._blendOperationMap),n==a.COPY_BLEND_OPERATIONS?t.disable(t.BLEND):((this._forceStateUpdate||r==a.COPY_BLEND_OPERATIONS)&&t.enable(t.BLEND),t.blendFunc(this._blendOperationMap[i],this._blendOperationMap[o])),this._oldBlendOperations=n}}_updateFormat(t){let e=this._gl,n=t.attributes,r=n.length;for(let i=0;i<r;i++){let r=n[i],a=r.type==o.AttributeType.BYTE;e.vertexAttribPointer(i,r.count,a?e.UNSIGNED_BYTE:e.FLOAT,a,t.stride,r.byteOffset)}for(;this._attributeCount<r;)e.enableVertexAttribArray(this._attributeCount),this._attributeCount++;for(;this._attributeCount>r;)this._attributeCount--,e.disableVertexAttribArray(this._attributeCount);this._attributeCount=r}getWebGLInfo(){const t=this.gl.getExtension("WEBGL_debug_renderer_info");return{renderer:t?this.gl.getParameter(t.UNMASKED_RENDERER_WEBGL):null,vendor:t?this.gl.getParameter(t.UNMASKED_VENDOR_WEBGL):null,version:this.gl.getParameter(this.gl.VERSION)}}static from(t){return e(null==t||t instanceof a),t}static _packBlendModes(t,e){return t|e<<4}}a.COPY_BLEND_OPERATIONS=a._packBlendModes(o.BlendOperation.ONE,o.BlendOperation.ZERO),t.Context=a;class s{constructor(t,e,n=0,r=null,i=!0){this._material=t,this._name=e,this._generation=n,this._location=r,this._isDirty=i}get location(){let t=a.from(this._material.context);if(this._generation!=t.generation){this._location=t.gl.getUniformLocation(this._material.program,this._name),this._generation=t.generation;{let n=this._material.program,r=t.gl;for(let t=0,i=r.getProgramParameter(n,r.ACTIVE_UNIFORMS);t<i;t++){let i=r.getActiveUniform(n,t);if(i&&i.name==this._name)switch(e(1==i.size),i.type){case r.FLOAT:e(this instanceof l);break;case r.BOOL:e(this instanceof u);break;case r.FLOAT_MAT3:e(this instanceof p);break;case r.FLOAT_VEC2:e(this instanceof d);break;case r.FLOAT_VEC3:e(this instanceof f);break;case r.FLOAT_VEC4:e(this instanceof h);break;case r.INT:e(this instanceof c);break;case r.SAMPLER_2D:e(this instanceof m);break;default:e(!1)}}}}if(!this._location)throw new Error("Failed to get uniform location");return this._location}}class l extends s{constructor(){super(...arguments),this._x=0}set(t){t!=this._x&&(this._x=t,this._isDirty=!0)}prepare(){let t=a.from(this._material.context);(this._generation!=t.generation||this._isDirty)&&(t.gl.uniform1f(this.location,this._x),this._isDirty=!1)}}class u extends s{constructor(){super(...arguments),this._x=!1}set(t){t!=this._x&&(this._x=t,this._isDirty=!0)}prepare(){let t=a.from(this._material.context);(this._generation!=t.generation||this._isDirty)&&(t.gl.uniform1i(this.location,this._x?1:0),this._isDirty=!1)}}class c extends s{constructor(){super(...arguments),this._x=0}set(t){t!=this._x&&(this._x=t,this._isDirty=!0)}prepare(){let t=a.from(this._material.context);(this._generation!=t.generation||this._isDirty)&&(t.gl.uniform1i(this.location,this._x),this._isDirty=!1)}}class d extends s{constructor(){super(...arguments),this._x=0,this._y=0}set(t,e){t==this._x&&e==this._y||(this._x=t,this._y=e,this._isDirty=!0)}prepare(){let t=a.from(this._material.context);(this._generation!=t.generation||this._isDirty)&&(t.gl.uniform2f(this.location,this._x,this._y),this._isDirty=!1)}}class f extends s{constructor(){super(...arguments),this._x=0,this._y=0,this._z=0}set(t,e,n){t==this._x&&e==this._y&&n==this._z||(this._x=t,this._y=e,this._z=n,this._isDirty=!0)}prepare(){let t=a.from(this._material.context);(this._generation!=t.generation||this._isDirty)&&(t.gl.uniform3f(this.location,this._x,this._y,this._z),this._isDirty=!1)}}class h extends s{constructor(){super(...arguments),this._x=0,this._y=0,this._z=0,this._w=0}set(t,e,n,r){t==this._x&&e==this._y&&n==this._z&&r==this._w||(this._x=t,this._y=e,this._z=n,this._w=r,this._isDirty=!0)}prepare(){let t=a.from(this._material.context);(this._generation!=t.generation||this._isDirty)&&(t.gl.uniform4f(this.location,this._x,this._y,this._z,this._w),this._isDirty=!1)}}class p extends s{constructor(){super(...arguments),this._values=[1,0,0,0,1,0,0,0,1]}set(t,e,n,r,i,o,a,s,l){p._cachedValues[0]=t,p._cachedValues[1]=r,p._cachedValues[2]=a,p._cachedValues[3]=e,p._cachedValues[4]=i,p._cachedValues[5]=s,p._cachedValues[6]=n,p._cachedValues[7]=o,p._cachedValues[8]=l;for(let t=0;t<9;t++)if(p._cachedValues[t]!=this._values[t]){let t=this._values;this._values=p._cachedValues,p._cachedValues=t,this._isDirty=!0;break}}prepare(){let t=a.from(this._material.context);(this._generation!=t.generation||this._isDirty)&&(t.gl.uniformMatrix3fv(this.location,!1,this._values),this._isDirty=!1)}}p._cachedValues=[1,0,0,0,1,0,0,0,1];class m extends s{constructor(){super(...arguments),this._texture=null,this._index=-1}set(t,e){this._texture==t&&this._index==e||(this._texture=y.from(t),this._index=e,this._isDirty=!0)}prepare(){let t=a.from(this._material.context),n=t.gl;e(null==this._texture||null==t.currentRenderTarget||this._texture!=t.currentRenderTarget.texture),(this._generation!=t.generation||this._isDirty)&&(n.uniform1i(this.location,this._index),this._isDirty=!1),n.activeTexture(i(n,this._index)),n.bindTexture(n.TEXTURE_2D,null!=this._texture&&this._texture.width>0&&this._texture.height>0?this._texture.texture:null)}}class g{constructor(t,e,n,r,i={},o=[],a=0,s=null){this._context=t,this._format=e,this._vertexSource=n,this._fragmentSource=r,this._uniformsMap=i,this._uniformsList=o,this._generation=a,this._program=s}get context(){return this._context}get format(){return this._format}get vertexSource(){return this._vertexSource}get fragmentSource(){return this._fragmentSource}free(){this._program&&this._context.gl.deleteProgram(this._program),this._generation=0}setUniformBool(t,n){let r=this._uniformsMap[t]||null;null==r&&(r=new u(this,t),this._uniformsMap[t]=r,this._uniformsList.push(r)),e(r instanceof u),r.set(n)}setUniformFloat(t,n){let r=this._uniformsMap[t]||null;null==r&&(r=new l(this,t),this._uniformsMap[t]=r,this._uniformsList.push(r)),e(r instanceof l),r.set(n)}setUniformInt(t,n){let r=this._uniformsMap[t]||null;null==r&&(r=new c(this,t),this._uniformsMap[t]=r,this._uniformsList.push(r)),e(r instanceof c),r.set(n)}setUniformVec2(t,n,r){let i=this._uniformsMap[t]||null;null==i&&(i=new d(this,t),this._uniformsMap[t]=i,this._uniformsList.push(i)),e(i instanceof d),i.set(n,r)}setUniformVec3(t,n,r,i){let o=this._uniformsMap[t]||null;null==o&&(o=new f(this,t),this._uniformsMap[t]=o,this._uniformsList.push(o)),e(o instanceof f),o.set(n,r,i)}setUniformVec4(t,n,r,i,o){let a=this._uniformsMap[t]||null;null==a&&(a=new h(this,t),this._uniformsMap[t]=a,this._uniformsList.push(a)),e(a instanceof h),a.set(n,r,i,o)}setUniformMat3(t,n,r,i,o,a,s,l,u,c){let d=this._uniformsMap[t]||null;null==d&&(d=new p(this,t),this._uniformsMap[t]=d,this._uniformsList.push(d)),e(d instanceof p),d.set(n,r,i,o,a,s,l,u,c)}setUniformSampler(t,n,r){let i=this._uniformsMap[t]||null;null==i&&(i=new m(this,t),this._uniformsMap[t]=i,this._uniformsList.push(i)),e(i instanceof m),i.set(n,r)}get program(){let t=this._context.gl;if(this._generation!=this._context.generation){this._program=t.createProgram(),this._compileShader(t,t.VERTEX_SHADER,this.vertexSource),this._compileShader(t,t.FRAGMENT_SHADER,this.fragmentSource);let n=this.format.attributes;for(let e=0;e<n.length;e++)t.bindAttribLocation(this._program,e,n[e].name);if(t.linkProgram(this._program),!t.getProgramParameter(this._program,t.LINK_STATUS))throw new Error(`${t.getProgramInfoLog(this._program)}`);this._generation=this._context.generation;for(let r of n)for(let n=0,i=t.getProgramParameter(this.program,t.ACTIVE_ATTRIBUTES);n<i;n++){let i=t.getActiveAttrib(this.program,n);if(i&&i.name==r.name)switch(e(1==i.size),r.count){case 1:e(i.type==t.FLOAT);break;case 2:e(i.type==t.FLOAT_VEC2);break;case 3:e(i.type==t.FLOAT_VEC3);break;case 4:e(i.type==t.FLOAT_VEC4);break;default:e(!1)}}}return this._program}prepare(){this._context.gl.useProgram(this.program);for(let t of this._uniformsList)t.prepare()}_compileShader(t,e,n){let r=t.createShader(e);if(!r)throw new Error("Failed to create shader");if(t.shaderSource(r,n),t.compileShader(r),!t.getShaderParameter(r,t.COMPILE_STATUS))throw new Error(`${t.getShaderInfoLog(r)}`);if(!this._program)throw new Error("Tried to attach shader before program was created");t.attachShader(this._program,r)}static from(t){return e(null==t||t instanceof g),t}}class v extends o.VertexBuffer{constructor(t,e){super(),this._generation=0,this._buffer=null,this._bytes=null,this._isDirty=!0,this._dirtyMin=v.INT_MAX,this._dirtyMax=0,this._totalMin=v.INT_MAX,this._totalMax=0,this._byteCount=0,this._context=t,this._byteCount=e,this._bytes=new Uint8Array(e)}get context(){return this._context}get byteCount(){return this._byteCount}move(t,n,r){e(r>=0),e(0<=t&&t+r<=this._byteCount),e(0<=n&&n+r<=this._byteCount),this._bytes&&t!=n&&0!=r&&(this._bytes.set(this._bytes.subarray(t,this._byteCount),n),this._growDirtyRegion(Math.min(t,n),Math.max(t,n)+r))}upload(t,n=0){e(0<=n&&n+t.length<=this._byteCount),e(null!=this._bytes),this._bytes.set(t,n),this._growDirtyRegion(n,n+t.length)}free(){this._buffer&&this._context.gl.deleteBuffer(this._buffer),this._generation=0}prepare(){let t=this._context.gl;this._generation!==this._context.generation&&(this._buffer=t.createBuffer(),this._generation=this._context.generation,this._isDirty=!0),t.bindBuffer(t.ARRAY_BUFFER,this._buffer),this._isDirty&&(t.bufferData(t.ARRAY_BUFFER,this._byteCount,t.DYNAMIC_DRAW),this._dirtyMin=this._totalMin,this._dirtyMax=this._totalMax,this._isDirty=!1),this._dirtyMin<this._dirtyMax&&(t.bufferSubData(t.ARRAY_BUFFER,this._dirtyMin,this._bytes.subarray(this._dirtyMin,this._dirtyMax)),this._dirtyMin=v.INT_MAX,this._dirtyMax=0)}_growDirtyRegion(t,e){this._dirtyMin=Math.min(this._dirtyMin,t),this._dirtyMax=Math.max(this._dirtyMax,e),this._totalMin=Math.min(this._totalMin,t),this._totalMax=Math.max(this._totalMax,e)}static from(t){return e(null==t||t instanceof v),t}}v.INT_MAX=2147483647;class y{constructor(t,e,n,r,i=null,o=null,a=0,s=!0,l=!0){this._context=t,this._format=e,this._width=n,this._height=r,this._pixels=i,this._texture=o,this._generation=a,this._isFormatDirty=s,this._isContentDirty=l}get context(){return this._context}get format(){return this._format}get width(){return this._width}get height(){return this._height}resize(t,e,n=null){this._width=t,this._height=e,this._pixels=n,this._isContentDirty=!0}setFormat(t){this._format!=t&&(this._format=t,this._isFormatDirty=!0)}get texture(){let t=this._context.gl;return this._generation!=this._context.generation&&(this._texture=t.createTexture(),this._generation=this._context.generation,this._isFormatDirty=!0,this._isContentDirty=!0),this._isFormatDirty&&(t.bindTexture(t.TEXTURE_2D,this._texture),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,this.format.magFilter==o.PixelFilter.NEAREST?t.NEAREST:t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,this.format.minFilter==o.PixelFilter.NEAREST?t.NEAREST:t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,this.format.wrap==o.PixelWrap.REPEAT?t.REPEAT:t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,this.format.wrap==o.PixelWrap.REPEAT?t.REPEAT:t.CLAMP_TO_EDGE),this._isFormatDirty=!1),this._isContentDirty&&(t.bindTexture(t.TEXTURE_2D,this._texture),this._pixels instanceof HTMLCanvasElement?t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,this._pixels):t.texImage2D(t.TEXTURE_2D,0,t.RGBA,this._width,this._height,0,t.RGBA,t.UNSIGNED_BYTE,this._pixels),this._isContentDirty=!1),this._texture}free(){this.texture&&(this._context.gl.deleteTexture(this.texture),this._generation=0)}static from(t){return e(null==t||t instanceof y),t}}class b{constructor(t,e,n=null,r=0,i=!0,a=new o.Rect){this._context=t,this._texture=e,this._framebuffer=n,this._generation=r,this._isDirty=i,this._viewport=a}get context(){return this._context}get texture(){return this._texture}get viewport(){return this._viewport}setColor(t){this._texture!=t&&(this._texture=y.from(t),this._isDirty=!0)}get framebuffer(){let t=this._context.gl,n=this._texture.texture;return this._generation!=this._context.generation&&(this._framebuffer=t.createFramebuffer(),this._generation=this._context.generation,this._isDirty=!0),this._isDirty&&(t.bindFramebuffer(t.FRAMEBUFFER,this._framebuffer),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,n,0),e(t.checkFramebufferStatus(t.FRAMEBUFFER)==t.FRAMEBUFFER_COMPLETE),this._isDirty=!1),this._framebuffer}free(){this._framebuffer&&(this._context.gl.deleteFramebuffer(this._framebuffer),this._generation=0)}static from(t){return e(null==t||t instanceof b),t}}}(a||(a={}));const s="precision highp float;precision highp int;attribute vec2 B;const vec4 s=vec4(1.,0.,0.,1.),t=vec4(0.,1.,0.,1.),u=vec4(0.,0.,1.,1.),v=vec4(0.,0.,0.,1.),w=vec4(1.,1.,1.,1.);void main(){gl_Position=vec4(B,0,1.);}struct x{vec2 p;vec4 o;};const vec2 j=vec2(1.,0.);",l="precision highp float;precision highp int;uniform sampler2D q;uniform vec2 h;const vec4 s=vec4(1.,0.,0.,1.),t=vec4(0.,1.,0.,1.),u=vec4(0.,0.,1.,1.),v=vec4(0.,0.,0.,1.),w=vec4(1.,1.,1.,1.);bool r(float a,float b,float c){return clamp(a,b,c)==a;}vec4 A(in vec2 b){vec2 a=b;a=floor(a*8.);return vec4(floor(a.x/255.),mod(a.x,255.),floor(a.y/255.),mod(a.y,255.))/255.;}vec4 m(vec2 b){vec2 a=b.xy/h,c=vec2(a.x,1.-a.y);return texture2D(q,c);}struct x{vec2 p;vec4 o;};const vec2 j=vec2(1.,0.);bool C(vec2 a,vec4 e,out x g){vec2 c=a.xy-j,d=a.xy+j;vec4 i=m(c),k=m(d);vec2 b=e.r>.5?vec2(0.,.5):vec2(.5,1.);if(r(i.r,b.x,b.y)){g=x(c,i);return true;}else if(r(k.r,b.x,b.y)){g=x(d,k);return true;}return false;}bool D(vec2 a,vec4 e,out x g){vec2 c=a.xy-j.yx,d=a.xy+j.yx;vec4 i=m(c),k=m(d);vec2 b=e.r>.5?vec2(0.,.5):vec2(.5,1.);if(r(k.r,b.x,b.y)){g=x(d,k);return true;}else if(r(i.r,b.x,b.y)){g=x(c,i);return true;}return false;}void main(){vec4 b=m(gl_FragCoord.xy);if(abs(b.r-.5)<.1)gl_FragColor=A(gl_FragCoord.xy);else{vec2 c=vec2(8129.);x a;if(C(gl_FragCoord.xy,b,a)){float d=b.r,g=a.o.r,k=abs(.5-d)/abs(g-d);c=mix(gl_FragCoord.xy,a.p,k);}if(D(gl_FragCoord.xy,b,a)){float e=b.r,i=a.o.r,E=abs(.5-e)/abs(i-e);c.x=min(c.x,gl_FragCoord.x),c.y=mix(gl_FragCoord.y,a.p.y,E);}gl_FragColor=A(c);}}",u="precision highp float;precision highp int;uniform sampler2D n;uniform vec2 h;uniform int y;const vec4 s=vec4(1.,0.,0.,1.),t=vec4(0.,1.,0.,1.),u=vec4(0.,0.,1.,1.),v=vec4(0.,0.,0.,1.),w=vec4(1.,1.,1.,1.);vec2 l(in vec4 a){a*=255.;return vec2(a.x*255.+a.y,a.z*255.+a.w)/8.;}struct x{vec2 p;vec4 o;};const vec2 j=vec2(1.,0.);vec4 f(in vec4 a,in vec2 c){vec2 d=(gl_FragCoord.xy+c)/h;vec4 b=texture2D(n,d);vec2 e=l(a),g=l(b);float i=distance(e,gl_FragCoord.xy),k=distance(g,gl_FragCoord.xy);return i>k?b:a;}vec4 z(in vec4 a,in int b){a=f(a,vec2(0,b)),a=f(a,vec2(b,b)),a=f(a,vec2(b,0)),a=f(a,vec2(b,-b)),a=f(a,vec2(0,-b)),a=f(a,vec2(-b,-b)),a=f(a,vec2(-b,0)),a=f(a,vec2(-b,b));return a;}void main(){vec2 a=gl_FragCoord.xy/h;vec4 b=texture2D(n,a);gl_FragColor=z(b,y);}",c="precision highp float;precision highp int;uniform sampler2D q,n;uniform vec2 h;uniform int y;const vec4 s=vec4(1.,0.,0.,1.),t=vec4(0.,1.,0.,1.),u=vec4(0.,0.,1.,1.),v=vec4(0.,0.,0.,1.),w=vec4(1.,1.,1.,1.);vec2 l(in vec4 a){a*=255.;return vec2(a.x*255.+a.y,a.z*255.+a.w)/8.;}struct x{vec2 p;vec4 o;};const vec2 j=vec2(1.,0.);vec4 f(in vec4 a,in vec2 c){vec2 d=(gl_FragCoord.xy+c)/h;vec4 b=texture2D(n,d);vec2 e=l(a),g=l(b);float i=distance(e,gl_FragCoord.xy),k=distance(g,gl_FragCoord.xy);return i>k?b:a;}vec4 z(in vec4 a,in int b){a=f(a,vec2(0,b)),a=f(a,vec2(b,b)),a=f(a,vec2(b,0)),a=f(a,vec2(b,-b)),a=f(a,vec2(0,-b)),a=f(a,vec2(-b,-b)),a=f(a,vec2(-b,0)),a=f(a,vec2(-b,b));return a;}vec4 F(in float a){a*=1000.,a+=8290687.5;return vec4(mod(floor(a/65025.),255.),mod(floor(a/255.),255.),mod(floor(a),255.),255.)/255.;}void main(){vec2 a=gl_FragCoord.xy/h;vec4 b=texture2D(n,a);b=z(b,y);vec4 c=texture2D(q,vec2(a.x,1.-a.y));vec2 d=l(b);float e=distance(d,gl_FragCoord.xy),g=c.r<.5?-1.:1.;gl_FragColor=F(g*e);}",d="h",f="n",h="q",p="y",m="B";class g{constructor(t={}){this._sourceTexture=null,this._destTexture=null,this._sourceTextureTarget=null,this._destTextureTarget=null,this._seedInputTexture=null,null!=t.outputCanvas?this._outputCanvas=t.outputCanvas:this._outputCanvas=document.createElement("canvas");const e=null!=t.outputCanvas?[t.outputCanvas.width,t.outputCanvas.height]:null!=t.sizeHint?t.sizeHint:[100,100];this._gl=new a.Context(this._outputCanvas),this._resizeOutputCanvasAndTextures(e[0],e[1],"force-update");const n=this._gl;this._gl.setCopyBlendState();const r=new o.VertexFormat;r.add(m,o.AttributeType.FLOAT,2),this._prepJumpFloodData=n.createMaterial(r,s,l),this._jumpFloodOutputSeedPosition=n.createMaterial(r,s,u),this._jumpFloodOutputDistance=n.createMaterial(r,s,c);const i=new Float32Array([-1,-1,1,-1,-1,1,1,1]);this._quadBuffer=n.createVertexBuffer(r.stride*i.length),this._quadBuffer.upload(new Uint8Array(i.buffer))}destroy(){this._sourceTexture&&this._sourceTexture.free(),this._destTexture&&this._destTexture.free(),this._seedInputTexture&&this._seedInputTexture.free(),this._quadBuffer.free(),this._prepJumpFloodData.free(),this._jumpFloodOutputDistance.free(),this._jumpFloodOutputSeedPosition.free()}outputCanvas(){return this._outputCanvas}_resizeTextureIfNecessary(t,e,n,r="dont-force"){t.width===e&&t.height===n&&"force-update"!==r||t.resize(e,n)}_resizeOutputCanvasAndTextures(t,e,n="dont-force"){const r=this._gl,i=this._outputCanvas;(i.width!==t||i.height!==e||"force-update"===n)&&r.resize(t,e,t,e),null==this._sourceTexture?(this._sourceTexture=r.createTexture(o.TextureFormat.NEAREST_CLAMP,t,e),this._sourceTextureTarget=r.createRenderTarget(this._sourceTexture)):this._resizeTextureIfNecessary(this._sourceTexture,t,e),null==this._destTexture?(this._destTexture=r.createTexture(o.TextureFormat.NEAREST_CLAMP,t,e),this._destTextureTarget=r.createRenderTarget(this._destTexture)):this._resizeTextureIfNecessary(this._destTexture,t,e),null==this._seedInputTexture?this._seedInputTexture=r.createTexture(o.TextureFormat.NEAREST_CLAMP,t,e):this._resizeTextureIfNecessary(this._seedInputTexture,t,e)}generateSDF(t,e="JFA"){const n=t.width,r=t.height;this._resizeOutputCanvasAndTextures(n,r),this._setSeedsFromCanvas(t);let i=v(Math.max(n,r))/2;for(;i>=1;){const t=i/2<1&&"JFA"==e?y.FOR_SCREEN:y.FOR_ANOTHER_STEP;this._runJumpFloodStep(i,t),i/=2}switch(e){case"JFA":break;case"JFA+1":this._runJumpFloodStep(1,y.FOR_SCREEN);break;case"JFA+2":this._runJumpFloodStep(4,y.FOR_ANOTHER_STEP),this._runJumpFloodStep(3,y.FOR_ANOTHER_STEP),this._runJumpFloodStep(2,y.FOR_ANOTHER_STEP),this._runJumpFloodStep(1,y.FOR_SCREEN)}}getPixels(){const t=this._gl.gl,e=new Uint8Array(t.drawingBufferWidth*t.drawingBufferHeight*4);return t.readPixels(0,0,t.drawingBufferWidth,t.drawingBufferHeight,t.RGBA,t.UNSIGNED_BYTE,e),e}_setSeedsFromCanvas(t){if(!this._seedInputTexture)throw new Error("Expected _seedInputTexture to be set before calling setSeedsFromCanvas");const e=t.width,n=t.height;this._seedInputTexture.resize(e,n,t);const r=this._prepJumpFloodData;r.setUniformSampler(h,this._seedInputTexture,0),r.setUniformVec2(d,e,n),this._gl.setRenderTarget(this._sourceTextureTarget),this._gl.setViewport(0,0,e,n),this._gl.draw(o.Primitive.TRIANGLE_STRIP,r,this._quadBuffer)}_runJumpFloodStep(t,e){if(!this._sourceTexture||!this._seedInputTexture)throw new Error("Expected textures to be set before calling setSeedsFromCanvas");const{width:n,height:r}=this._outputCanvas,i="seed-position"===e.format?this._jumpFloodOutputSeedPosition:this._jumpFloodOutputDistance;i.setUniformSampler(f,this._sourceTexture,0),i.setUniformInt(p,t),i.setUniformVec2(d,n,r),"distance"===e.format&&i.setUniformSampler(h,this._seedInputTexture,1),this._gl.setRenderTarget("texture"===e.renderTarget?this._destTextureTarget:null),this._gl.setViewport(0,0,n,r),this._gl.draw(o.Primitive.TRIANGLE_STRIP,i,this._quadBuffer),this._swapBuffers()}_swapBuffers(){const t=this._sourceTexture,e=this._sourceTextureTarget;this._sourceTexture=this._destTexture,this._sourceTextureTarget=this._destTextureTarget,this._destTexture=t,this._destTextureTarget=e}}function v(t){return t--,t|=t>>1,t|=t>>2,t|=t>>4,t|=t>>8,t|=t>>16,++t}var y;(function(t){t.FOR_ANOTHER_STEP={format:"seed-position",renderTarget:"texture"},t.FOR_SCREEN={format:"distance",renderTarget:"screen"}})(y||(y={})),t.DistanceFieldGenerator=g,Object.defineProperty(t,"__esModule",{value:!0})}(e)},1158:(t,e,n)=>{"use strict";t.exports=n(8376)},7893:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.headerDefaults=e.eventDefaults=void 0;var r=n(1195);e.headerDefaults=function(){return{productId:"adamgibbons/ics",method:"PUBLISH"}},e.eventDefaults=function(){return{title:"Untitled event",uid:(0,r.nanoid)(),timestamp:Date.now()}}},7707:(t,e,n)=>{"use strict";e.lh=function(t,e){return u([t],e)};var r=n(8378);function i(t){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},i(t)}function o(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function a(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?o(Object(n),!0).forEach((function(e){s(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function s(t,e,n){return(e=function(t){var e=function(t,e){if("object"!==i(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!==i(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===i(e)?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function l(t){return(0,r.validateHeaderAndEvent)(a(a({},(0,r.buildHeader)(t)),(0,r.buildEvent)(t)))}function u(t,e,n){var o,s="object"===i(e)?e:{},u=3===arguments.length?n:"function"==typeof e?e:null;try{o=function(){if(!t)return{error:new Error("one argument is required"),value:null};var e,n=0===t.length?(e=s,(0,r.validateHeader)((0,r.buildHeader)(e))):l(a(a({},t[0]),s)),i=n.error,o=n.value;if(i)return{error:i,value:null};var u="";u+=(0,r.formatHeader)(o);for(var c=0;c<t.length;c++){var d=l(t[c]),f=d.error,h=d.value;if(f)return{error:f,value:null};u+=(0,r.formatEvent)(h)}return{error:null,value:u+=(0,r.formatFooter)()}}()}catch(t){o={error:t,value:null}}return u?u(o.error,o.value):o}},842:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.buildEvent=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return a(Object.assign({},(0,r.eventDefaults)(),t))},e.buildHeader=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return a(Object.assign({},(0,r.headerDefaults)(),t))};var r=n(7893);function i(t){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},i(t)}function o(t,e,n){return(e=function(t){var e=function(t,e){if("object"!==i(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!==i(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===i(e)?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function a(t){return Object.entries(t).reduce((function(t,e){return void 0!==e[1]?Object.assign(t,o({},e[0],e[1])):t}),{})}},8395:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.formatEvent=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.title,n=t.uid,r=t.sequence,a=t.timestamp,s=t.start,l=t.startType,u=t.startInputType,c=t.startOutputType,d=t.duration,f=t.end,h=t.endInputType,p=t.endOutputType,m=t.description,g=t.url,v=t.geo,y=t.location,b=t.status,_=t.categories,w=t.organizer,A=t.attendees,E=t.alarms,x=t.recurrenceRule,S=t.exclusionDates,T=t.busyStatus,C=t.transp,I=t.classification,k=t.created,P=t.lastModified,R=t.htmlContent,O="";O+="BEGIN:VEVENT\r\n",O+=(0,i.foldLine)("UID:".concat((0,o.default)(n)))+"\r\n",O+=e?(0,i.foldLine)("SUMMARY:".concat((0,o.default)((0,i.setSummary)(e))))+"\r\n":"",O+=(0,i.foldLine)("DTSTAMP:".concat((0,o.default)((0,i.formatDate)(a))))+"\r\n",O+=(0,i.foldLine)("DTSTART".concat(s&&3==s.length?";VALUE=DATE":"",":").concat((0,o.default)((0,i.formatDate)(s,c||l,u))))+"\r\n",(!f||3!==f.length||s.length!==f.length||s.some((function(t,e){return t!==f[e]})))&&f&&(O+=(0,i.foldLine)("DTEND".concat(3===f.length?";VALUE=DATE":"",":").concat((0,o.default)((0,i.formatDate)(f,p||c||l,h||u))))+"\r\n");O+=void 0!==r?"SEQUENCE:".concat(r,"\r\n"):"",O+=m?(0,i.foldLine)("DESCRIPTION:".concat((0,o.default)((0,i.setDescription)(m))))+"\r\n":"",O+=g?(0,i.foldLine)("URL:".concat((0,o.default)(g)))+"\r\n":"",O+=v?(0,i.foldLine)("GEO:".concat((0,i.setGeolocation)(v)))+"\r\n":"",O+=y?(0,i.foldLine)("LOCATION:".concat((0,o.default)((0,i.setLocation)(y))))+"\r\n":"",O+=b?(0,i.foldLine)("STATUS:".concat((0,o.default)(b)))+"\r\n":"",O+=_?(0,i.foldLine)("CATEGORIES:".concat((0,o.default)(_.join(","))))+"\r\n":"",O+=w?(0,i.foldLine)("ORGANIZER;".concat((0,i.setOrganizer)(w)))+"\r\n":"",O+=T?(0,i.foldLine)("X-MICROSOFT-CDO-BUSYSTATUS:".concat((0,o.default)(T)))+"\r\n":"",O+=C?(0,i.foldLine)("TRANSP:".concat((0,o.default)(C)))+"\r\n":"",O+=I?(0,i.foldLine)("CLASS:".concat((0,o.default)(I)))+"\r\n":"",O+=k?"CREATED:"+(0,o.default)((0,i.formatDate)(k))+"\r\n":"",O+=P?"LAST-MODIFIED:"+(0,o.default)((0,i.formatDate)(P))+"\r\n":"",O+=R?(0,i.foldLine)("X-ALT-DESC;FMTTYPE=text/html:".concat((0,o.default)(R)))+"\r\n":"",A&&A.forEach((function(t){O+=(0,i.foldLine)("ATTENDEE;".concat((0,o.default)((0,i.setContact)(t))))+"\r\n"}));O+=x?(0,i.foldLine)("RRULE:".concat((0,o.default)(x)))+"\r\n":"",O+=S?(0,i.foldLine)("EXDATE:".concat((0,o.default)(S.map((function(t){return(0,i.formatDate)(t)})).join(","))))+"\r\n":"",O+=d?(0,i.foldLine)("DURATION:".concat((0,i.formatDuration)(d)))+"\r\n":"",E&&E.forEach((function(t){O+=(0,i.setAlarm)(t)}));return O+="END:VEVENT\r\n"},e.formatFooter=function(){return"END:VCALENDAR\r\n"},e.formatHeader=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.productId,n=t.method,r=t.calName,a="";return a+="BEGIN:VCALENDAR\r\n",a+="VERSION:2.0\r\n",a+="CALSCALE:GREGORIAN\r\n",a+=(0,i.foldLine)("PRODID:".concat((0,o.default)(e)))+"\r\n",a+=(0,i.foldLine)("METHOD:".concat((0,o.default)(n)))+"\r\n",a+=r?(0,i.foldLine)("X-WR-CALNAME:".concat((0,o.default)(r)))+"\r\n":"",a+="X-PUBLISHED-TTL:PT1H\r\n"};var r,i=n(1637),o=(r=n(6290))&&r.__esModule?r:{default:r}},8378:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"buildEvent",{enumerable:!0,get:function(){return r.buildEvent}}),Object.defineProperty(e,"buildHeader",{enumerable:!0,get:function(){return r.buildHeader}}),Object.defineProperty(e,"formatEvent",{enumerable:!0,get:function(){return i.formatEvent}}),Object.defineProperty(e,"formatFooter",{enumerable:!0,get:function(){return i.formatFooter}}),Object.defineProperty(e,"formatHeader",{enumerable:!0,get:function(){return i.formatHeader}}),Object.defineProperty(e,"validateHeader",{enumerable:!0,get:function(){return o.validateHeader}}),Object.defineProperty(e,"validateHeaderAndEvent",{enumerable:!0,get:function(){return o.validateHeaderAndEvent}});var r=n(842),i=n(8395),o=n(2174)},2174:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(9951);Object.keys(r).forEach((function(t){"default"!==t&&"__esModule"!==t&&(t in e&&e[t]===r[t]||Object.defineProperty(e,t,{enumerable:!0,get:function(){return r[t]}}))}))},9951:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.validateHeader=function(t){try{return{error:null,value:g.validateSync(t,{abortEarly:!1,strict:!0})}}catch(t){return{error:Object.assign({},t),value:void 0}}},e.validateHeaderAndEvent=function(t){try{return{error:null,value:y.validateSync(t,{abortEarly:!1,strict:!0})}}catch(t){return{error:Object.assign({},t),value:void 0}}};var r=function(t,e){if(!e&&t&&t.__esModule)return t;if(null===t||"object"!==o(t)&&"function"!=typeof t)return{default:t};var n=i(e);if(n&&n.has(t))return n.get(t);var r={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in t)if("default"!==s&&Object.prototype.hasOwnProperty.call(t,s)){var l=a?Object.getOwnPropertyDescriptor(t,s):null;l&&(l.get||l.set)?Object.defineProperty(r,s,l):r[s]=t[s]}r.default=t,n&&n.set(t,r);return r}(n(2664));function i(t){if("function"!=typeof WeakMap)return null;var e=new WeakMap,n=new WeakMap;return(i=function(t){return t?n:e})(t)}function o(t){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o(t)}function a(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function s(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?a(Object(n),!0).forEach((function(e){l(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function l(t,e,n){return(e=function(t){var e=function(t,e){if("object"!==o(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!==o(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===o(e)?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var u=/^(?:([a-z0-9+.-]+):\/\/)(?:\S+(?::\S*)?@)?(?:(?:[1-9]\d?|1\d\d|2[01]\d|22[0-3])(?:\.(?:1?\d{1,2}|2[0-4]\d|25[0-5])){2}(?:\.(?:[1-9]\d?|1\d\d|2[0-4]\d|25[0-4]))|(?:(?:[a-z\u00a1-\uffff0-9]-*)*[a-z\u00a1-\uffff0-9]+)(?:\.(?:[a-z\u00a1-\uffff0-9]-*)*[a-z\u00a1-\uffff0-9]+)*\.?)(?::\d{2,5})?(?:[/?#]\S*)?$/,c=function(t){var e=t.required;return r.lazy((function(t){return"number"==typeof t?r.number().integer().min(0):"string"==typeof t?r.string().required():e||void 0!==t?r.array().required().min(3).max(7).of(r.lazy((function(t,e){var n=e.parent.indexOf(e.value);return[r.number().integer(),r.number().integer().min(1).max(12),r.number().integer().min(1).max(31),r.number().integer().min(0).max(23),r.number().integer().min(0).max(60),r.number().integer().min(0).max(60)][n]}))):r.mixed().oneOf([void 0])}))},d=r.object().shape({before:r.boolean(),weeks:r.number(),days:r.number(),hours:r.number(),minutes:r.number(),seconds:r.number()}).noUnknown(),f=r.object().shape({name:r.string(),email:r.string().email(),rsvp:r.boolean(),dir:r.string().matches(u),partstat:r.string(),role:r.string(),cutype:r.string(),xNumGuests:r.number()}).noUnknown(),h=r.object().shape({name:r.string(),email:r.string().email(),dir:r.string(),sentBy:r.string()}).noUnknown(),p=r.object().shape({action:r.string().matches(/^(audio|display|email)$/).required(),trigger:r.mixed().required(),description:r.string(),duration:d,repeat:r.number(),attach:r.string(),attachType:r.string(),summary:r.string(),attendee:f,"x-prop":r.mixed(),"iana-prop":r.mixed()}).noUnknown(),m={productId:r.string(),method:r.string(),calName:r.string()},g=r.object().shape(m).noUnknown(),v={summary:r.string(),timestamp:c({required:!1}),title:r.string(),uid:r.string(),sequence:r.number().integer().max(2147483647),start:c({required:!0}),duration:d,startType:r.string().matches(/^(utc|local)$/),startInputType:r.string().matches(/^(utc|local)$/),startOutputType:r.string().matches(/^(utc|local)$/),end:c({required:!1}),endInputType:r.string().matches(/^(utc|local)$/),endOutputType:r.string().matches(/^(utc|local)$/),description:r.string(),url:r.string().matches(u),geo:r.object().shape({lat:r.number(),lon:r.number()}),location:r.string(),status:r.string().matches(/^(TENTATIVE|CANCELLED|CONFIRMED)$/i),categories:r.array().of(r.string()),organizer:h,attendees:r.array().of(f),alarms:r.array().of(p),recurrenceRule:r.string(),busyStatus:r.string().matches(/^(TENTATIVE|FREE|BUSY|OOF)$/i),transp:r.string().matches(/^(TRANSPARENT|OPAQUE)$/i),classification:r.string(),created:c({required:!1}),lastModified:c({required:!1}),exclusionDates:r.array().of(c({required:!0})),htmlContent:r.string()},y=r.object().shape(s(s({},m),v)).test("xor","object should have end or duration (but not both)",(function(t){var e=!!t.end,n=!!t.duration;return e&&!n||!e&&n||!e&&!n})).noUnknown()},6290:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){return t.replace(/\r?\n/gm,"\\n")}},5587:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){return'"'.concat(t.replaceAll('"','\\"'),'"')}},2325:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){var e=[],n=75;for(;(0,i.default)(t).length>n;)e.push(i.default.substring(t,0,n)),t=i.default.substring(t,n),n=74;return e.push(t),e.join("\r\n\t")};var r,i=(r=n(2813))&&r.__esModule?r:{default:r}},9747:(t,e)=>{"use strict";function n(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,i,o,a,s=[],l=!0,u=!1;try{if(o=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=o.call(n)).done)&&(s.push(r.value),s.length!==e);l=!0);}catch(t){u=!0,i=t}finally{try{if(!l&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(u)throw i}}return s}}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return r(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return r(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function r(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"utc",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"local";if("string"==typeof t)return t;if(Array.isArray(t)&&3===t.length){var o=n(t,3),a=o[0],s=o[1],l=o[2];return"".concat(a).concat(i(s)).concat(i(l))}var u=new Date;if(Array.isArray(t)&&t.length>0&&t[0]){var c=n(t,6),d=c[0],f=c[1],h=c[2],p=c[3],m=void 0===p?0:p,g=c[4],v=void 0===g?0:g,y=c[5],b=void 0===y?0:y;u="local"===r?new Date(d,f-1,h,m,v,b):new Date(Date.UTC(d,f-1,h,m,v,b))}else Array.isArray(t)||(u=new Date(t));if("local"===e)return[u.getFullYear(),i(u.getMonth()+1),i(u.getDate()),"T",i(u.getHours()),i(u.getMinutes()),i(u.getSeconds())].join("");return[u.getUTCFullYear(),i(u.getUTCMonth()+1),i(u.getUTCDate()),"T",i(u.getUTCHours()),i(u.getUTCMinutes()),i(u.getUTCSeconds()),"Z"].join("")};var i=function(t){return t<10?"0".concat(t):"".concat(t)}},1799:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.weeks,n=t.days,r=t.hours,i=t.minutes,o=t.seconds,a="P";return a+=e?"".concat(e,"W"):"",a+=n?"".concat(n,"D"):"",a+="T",a+=r?"".concat(r,"H"):"",a+=i?"".concat(i,"M"):"",a+=o?"".concat(o,"S"):""}},1756:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){return t.replace(/\\/gm,"\\\\").replace(/\r?\n/gm,"\\n").replace(/;/gm,"\\;").replace(/,/gm,"\\,")}},1637:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"encodeParamValue",{enumerable:!0,get:function(){return h.default}}),Object.defineProperty(e,"foldLine",{enumerable:!0,get:function(){return d.default}}),Object.defineProperty(e,"formatDate",{enumerable:!0,get:function(){return r.default}}),Object.defineProperty(e,"formatDuration",{enumerable:!0,get:function(){return c.default}}),Object.defineProperty(e,"setAlarm",{enumerable:!0,get:function(){return s.default}}),Object.defineProperty(e,"setContact",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(e,"setDescription",{enumerable:!0,get:function(){return l.default}}),Object.defineProperty(e,"setGeolocation",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(e,"setLocation",{enumerable:!0,get:function(){return f.default}}),Object.defineProperty(e,"setOrganizer",{enumerable:!0,get:function(){return a.default}}),Object.defineProperty(e,"setSummary",{enumerable:!0,get:function(){return u.default}});var r=p(n(9747)),i=p(n(86)),o=p(n(1988)),a=p(n(2009)),s=p(n(489)),l=p(n(7614)),u=p(n(4500)),c=p(n(1799)),d=p(n(2325)),f=p(n(861)),h=p(n(5587));function p(t){return t&&t.__esModule?t:{default:t}}},489:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.action,n=t.repeat,a=t.description,l=t.duration,u=t.attach,c=t.attachType,d=t.trigger,f=t.summary,h="BEGIN:VALARM\r\n";h+=(0,i.default)("ACTION:".concat((0,o.default)(function(t){return t.toUpperCase()}(e))))+"\r\n",h+=n?(0,i.default)("REPEAT:".concat(n))+"\r\n":"",h+=a?(0,i.default)("DESCRIPTION:".concat((0,o.default)(a)))+"\r\n":"",h+=l?(0,i.default)("DURATION:".concat(s(l)))+"\r\n":"";var p=c||"FMTTYPE=audio/basic";return h+=u?(0,i.default)((0,o.default)("ATTACH;".concat(p,":").concat(u)))+"\r\n":"",h+=d?function(t){var e="";if(Array.isArray(t)||"number"==typeof t||"string"==typeof t)e="TRIGGER;VALUE=DATE-TIME:".concat((0,o.default)((0,r.default)(t)),"\r\n");else{var n=t.before?"-":"";e="TRIGGER:".concat((0,o.default)(n+s(t)),"\r\n")}return e}(d):"",h+=f?(0,i.default)("SUMMARY:".concat((0,o.default)(f)))+"\r\n":"",h+="END:VALARM\r\n"};var r=a(n(9747)),i=a(n(2325)),o=a(n(6290));function a(t){return t&&t.__esModule?t:{default:t}}function s(t){var e=t.weeks,n=t.days,r=t.hours,i=t.minutes,o=t.seconds,a="P";return a+=e?"".concat(e,"W"):"",a+=n?"".concat(n,"D"):"",a+="T",a+=r?"".concat(r,"H"):"",a+=i?"".concat(i,"M"):"",a+=o?"".concat(o,"S"):""}},1988:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){var e=t.name,n=t.email,r=t.rsvp,o=t.dir,a=t.partstat,s=t.role,l=t.cutype,u=t.xNumGuests,c=[];void 0!==r&&c.push(r?"RSVP=TRUE":"RSVP=FALSE");l&&c.push("CUTYPE=".concat((0,i.default)(l)));void 0!==u&&c.push("X-NUM-GUESTS=".concat(u));s&&c.push("ROLE=".concat((0,i.default)(s)));a&&c.push("PARTSTAT=".concat((0,i.default)(a)));o&&c.push("DIR=".concat((0,i.default)(o)));return c.push("CN=".concat((0,i.default)(e||"Unnamed attendee"))),c.join(";").concat(n?":mailto:".concat(n):"")};var r,i=(r=n(5587))&&r.__esModule?r:{default:r}},7614:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){return(0,i.default)(t)};var r,i=(r=n(1756))&&r.__esModule?r:{default:r}},86:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){var e=t.lat,n=t.lon;return"".concat(e,";").concat(n)}},861:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){return(0,i.default)(t)};var r,i=(r=n(1756))&&r.__esModule?r:{default:r}},2009:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){var e=t.name,n=t.email,r=t.dir,o=t.sentBy,a="";return a+=r?"DIR=".concat((0,i.default)(r),";"):"",a+=o?"SENT-BY=".concat((0,i.default)("MAILTO:".concat(o)),";"):"",a+="CN=",a+=(0,i.default)(e||"Organizer"),a+=n?":MAILTO:".concat(n):""};var r,i=(r=n(5587))&&r.__esModule?r:{default:r}},4500:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){return(0,i.default)(t)};var r,i=(r=n(1756))&&r.__esModule?r:{default:r}},251:(t,e)=>{e.read=function(t,e,n,r,i){var o,a,s=8*i-r-1,l=(1<<s)-1,u=l>>1,c=-7,d=n?i-1:0,f=n?-1:1,h=t[e+d];for(d+=f,o=h&(1<<-c)-1,h>>=-c,c+=s;c>0;o=256*o+t[e+d],d+=f,c-=8);for(a=o&(1<<-c)-1,o>>=-c,c+=r;c>0;a=256*a+t[e+d],d+=f,c-=8);if(0===o)o=1-u;else{if(o===l)return a?NaN:1/0*(h?-1:1);a+=Math.pow(2,r),o-=u}return(h?-1:1)*a*Math.pow(2,o-r)},e.write=function(t,e,n,r,i,o){var a,s,l,u=8*o-i-1,c=(1<<u)-1,d=c>>1,f=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,h=r?0:o-1,p=r?1:-1,m=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(s=isNaN(e)?1:0,a=c):(a=Math.floor(Math.log(e)/Math.LN2),e*(l=Math.pow(2,-a))<1&&(a--,l*=2),(e+=a+d>=1?f/l:f*Math.pow(2,1-d))*l>=2&&(a++,l/=2),a+d>=c?(s=0,a=c):a+d>=1?(s=(e*l-1)*Math.pow(2,i),a+=d):(s=e*Math.pow(2,d-1)*Math.pow(2,i),a=0));i>=8;t[n+h]=255&s,h+=p,s/=256,i-=8);for(a=a<<i|s,u+=i;u>0;t[n+h]=255&a,h+=p,a/=256,u-=8);t[n+h-p]|=128*m}},4126:(t,e,n)=>{const r=n(570);t.exports={iframeResize:r,iframeResizer:r,contentWindow:n(481)}},481:t=>{!function(e){if("undefined"!=typeof window){var n=!0,r=10,i="",o=0,a="",s=null,l="",u=!1,c={resize:1,click:1},d=128,f=!0,h=1,p="bodyOffset",m=p,g=!0,v="",y={},b=32,_=null,w=!1,A=!1,E="[iFrameSizer]",x=E.length,S="",T={max:1,min:1,bodyScroll:1,documentElementScroll:1},C="child",I=!0,k=window.parent,P="*",R=0,O=!1,M=null,L=16,D=1,N="scroll",B=N,j=window,z=function(){st("onMessage function not defined")},F=function(){},U=function(){},q={height:function(){return st("Custom height calculation function not defined"),document.documentElement.offsetHeight},width:function(){return st("Custom width calculation function not defined"),document.body.scrollWidth}},G={},H=!1;try{var V=Object.create({},{passive:{get:function(){H=!0}}});window.addEventListener("test",nt,V),window.removeEventListener("test",nt,V)}catch(t){}var Q,W,Y,K,X,$,Z,J={bodyOffset:function(){return document.body.offsetHeight+yt("marginTop")+yt("marginBottom")},offset:function(){return J.bodyOffset()},bodyScroll:function(){return document.body.scrollHeight},custom:function(){return q.height()},documentElementOffset:function(){return document.documentElement.offsetHeight},documentElementScroll:function(){return document.documentElement.scrollHeight},max:function(){return Math.max.apply(null,_t(J))},min:function(){return Math.min.apply(null,_t(J))},grow:function(){return J.max()},lowestElement:function(){return Math.max(J.bodyOffset()||J.documentElementOffset(),bt("bottom",At()))},taggedElement:function(){return wt("bottom","data-iframe-height")}},tt={bodyScroll:function(){return document.body.scrollWidth},bodyOffset:function(){return document.body.offsetWidth},custom:function(){return q.width()},documentElementScroll:function(){return document.documentElement.scrollWidth},documentElementOffset:function(){return document.documentElement.offsetWidth},scroll:function(){return Math.max(tt.bodyScroll(),tt.documentElementScroll())},max:function(){return Math.max.apply(null,_t(tt))},min:function(){return Math.min.apply(null,_t(tt))},rightMostElement:function(){return bt("right",At())},taggedElement:function(){return wt("right","data-iframe-width")}},et=(Q=Et,X=null,$=0,Z=function(){$=Date.now(),X=null,K=Q.apply(W,Y),X||(W=Y=null)},function(){var t=Date.now();$||($=t);var e=L-(t-$);return W=this,Y=arguments,e<=0||e>L?(X&&(clearTimeout(X),X=null),$=t,K=Q.apply(W,Y),X||(W=Y=null)):X||(X=setTimeout(Z,e)),K});rt(window,"message",(function(n){var r={init:function(){v=n.data,k=n.source,lt(),f=!1,setTimeout((function(){g=!1}),d)},reset:function(){g?at("Page reset ignored by init"):(at("Page size reset by host page"),Tt("resetPage"))},resize:function(){xt("resizeParent","Parent window requested size check")},moveToAnchor:function(){y.findTarget(o())},inPageLink:function(){this.moveToAnchor()},pageInfo:function(){var t=o();at("PageInfoFromParent called from parent: "+t),U(JSON.parse(t)),at(" --")},message:function(){var t=o();at("onMessage called from parent: "+t),z(JSON.parse(t)),at(" --")}};function i(){return n.data.split("]")[1].split(":")[0]}function o(){return n.data.slice(n.data.indexOf(":")+1)}function a(){return n.data.split(":")[2]in{true:1,false:1}}function s(){var o=i();o in r?r[o]():!t.exports&&"iFrameResize"in window||window.jQuery!==e&&"iFrameResize"in window.jQuery.prototype||a()||st("Unexpected message ("+n.data+")")}E===(""+n.data).slice(0,x)&&(!1===f?s():a()?r.init():at('Ignored message of type "'+i()+'". Received before initialization.'))})),rt(window,"readystatechange",kt),kt()}function nt(){}function rt(t,e,n,r){t.addEventListener(e,n,!!H&&(r||{}))}function it(t){return t.charAt(0).toUpperCase()+t.slice(1)}function ot(t){return E+"["+S+"] "+t}function at(t){w&&"object"==typeof window.console&&console.log(ot(t))}function st(t){"object"==typeof window.console&&console.warn(ot(t))}function lt(){var t;!function(){function t(t){return"true"===t}var r=v.slice(x).split(":");S=r[0],o=e===r[1]?o:Number(r[1]),u=e===r[2]?u:t(r[2]),w=e===r[3]?w:t(r[3]),b=e===r[4]?b:Number(r[4]),n=e===r[6]?n:t(r[6]),a=r[7],m=e===r[8]?m:r[8],i=r[9],l=r[10],R=e===r[11]?R:Number(r[11]),y.enable=e!==r[12]&&t(r[12]),C=e===r[13]?C:r[13],B=e===r[14]?B:r[14],A=e===r[15]?A:t(r[15])}(),at("Initialising iFrame ("+window.location.href+")"),function(){function t(){var t=window.iFrameResizer;at("Reading data from page: "+JSON.stringify(t)),Object.keys(t).forEach(ut,t),z="onMessage"in t?t.onMessage:z,F="onReady"in t?t.onReady:F,P="targetOrigin"in t?t.targetOrigin:P,m="heightCalculationMethod"in t?t.heightCalculationMethod:m,B="widthCalculationMethod"in t?t.widthCalculationMethod:B}function e(t,e){return"function"==typeof t&&(at("Setup custom "+e+"CalcMethod"),q[e]=t,t="custom"),t}"iFrameResizer"in window&&Object===window.iFrameResizer.constructor&&(t(),m=e(m,"height"),B=e(B,"width"));at("TargetOrigin for parent set to: "+P)}(),function(){e===a&&(a=o+"px");ct("margin",function(t,e){-1!==e.indexOf("-")&&(st("Negative CSS value ignored for "+t),e="");return e}("margin",a))}(),ct("background",i),ct("padding",l),(t=document.createElement("div")).style.clear="both",t.style.display="block",t.style.height="0",document.body.appendChild(t),pt(),mt(),document.documentElement.style.height="",document.body.style.height="",at('HTML & body height set to "auto"'),at("Enable public methods"),j.parentIFrame={autoResize:function(t){return!0===t&&!1===n?(n=!0,gt()):!1===t&&!0===n&&(n=!1,ft("remove"),null!==s&&s.disconnect(),clearInterval(_)),It(0,0,"autoResize",JSON.stringify(n)),n},close:function(){It(0,0,"close")},getId:function(){return S},getPageInfo:function(t){"function"==typeof t?(U=t,It(0,0,"pageInfo")):(U=function(){},It(0,0,"pageInfoStop"))},moveToAnchor:function(t){y.findTarget(t)},reset:function(){Ct("parentIFrame.reset")},scrollTo:function(t,e){It(e,t,"scrollTo")},scrollToOffset:function(t,e){It(e,t,"scrollToOffset")},sendMessage:function(t,e){It(0,0,"message",JSON.stringify(t),e)},setHeightCalculationMethod:function(t){m=t,pt()},setWidthCalculationMethod:function(t){B=t,mt()},setTargetOrigin:function(t){at("Set targetOrigin: "+t),P=t},size:function(t,e){xt("size","parentIFrame.size("+(t||"")+(e?","+e:"")+")",t,e)}},function(){if(!0!==A)return;function t(t){It(0,0,t.type,t.screenY+":"+t.screenX)}function e(e,n){at("Add event listener: "+n),rt(window.document,e,t)}e("mouseenter","Mouse Enter"),e("mouseleave","Mouse Leave")}(),gt(),y=function(){function t(){return{x:window.pageXOffset===e?document.documentElement.scrollLeft:window.pageXOffset,y:window.pageYOffset===e?document.documentElement.scrollTop:window.pageYOffset}}function n(e){var n=e.getBoundingClientRect(),r=t();return{x:parseInt(n.left,10)+parseInt(r.x,10),y:parseInt(n.top,10)+parseInt(r.y,10)}}function r(t){function r(t){var e=n(t);at("Moving to in page link (#"+i+") at x: "+e.x+" y: "+e.y),It(e.y,e.x,"scrollToOffset")}var i=t.split("#")[1]||t,o=decodeURIComponent(i),a=document.getElementById(o)||document.getElementsByName(o)[0];e===a?(at("In page link (#"+i+") not found in iFrame, so sending to parent"),It(0,0,"inPageLink","#"+i)):r(a)}function i(){var t=window.location.hash,e=window.location.href;""!==t&&"#"!==t&&r(e)}function o(){function t(t){function e(t){t.preventDefault(),r(this.getAttribute("href"))}"#"!==t.getAttribute("href")&&rt(t,"click",e)}Array.prototype.forEach.call(document.querySelectorAll('a[href^="#"]'),t)}function a(){rt(window,"hashchange",i)}function s(){setTimeout(i,d)}function l(){Array.prototype.forEach&&document.querySelectorAll?(at("Setting up location.hash handlers"),o(),a(),s()):st("In page linking not fully supported in this browser! (See README.md for IE8 workaround)")}y.enable?l():at("In page linking not enabled");return{findTarget:r}}(),xt("init","Init message from host page"),F()}function ut(t){var e=t.split("Callback");if(2===e.length){var n="on"+e[0].charAt(0).toUpperCase()+e[0].slice(1);this[n]=this[t],delete this[t],st("Deprecated: '"+t+"' has been renamed '"+n+"'. The old method will be removed in the next major version.")}}function ct(t,n){e!==n&&""!==n&&"null"!==n&&(document.body.style[t]=n,at("Body "+t+' set to "'+n+'"'))}function dt(t){var e={add:function(e){function n(){xt(t.eventName,t.eventType)}G[e]=n,rt(window,e,n,{passive:!0})},remove:function(t){var e,n,r,i=G[t];delete G[t],e=window,n=t,r=i,e.removeEventListener(n,r,!1)}};t.eventNames&&Array.prototype.map?(t.eventName=t.eventNames[0],t.eventNames.map(e[t.method])):e[t.method](t.eventName),at(it(t.method)+" event listener: "+t.eventType)}function ft(t){dt({method:t,eventType:"Animation Start",eventNames:["animationstart","webkitAnimationStart"]}),dt({method:t,eventType:"Animation Iteration",eventNames:["animationiteration","webkitAnimationIteration"]}),dt({method:t,eventType:"Animation End",eventNames:["animationend","webkitAnimationEnd"]}),dt({method:t,eventType:"Input",eventName:"input"}),dt({method:t,eventType:"Mouse Up",eventName:"mouseup"}),dt({method:t,eventType:"Mouse Down",eventName:"mousedown"}),dt({method:t,eventType:"Orientation Change",eventName:"orientationchange"}),dt({method:t,eventType:"Print",eventNames:["afterprint","beforeprint"]}),dt({method:t,eventType:"Ready State Change",eventName:"readystatechange"}),dt({method:t,eventType:"Touch Start",eventName:"touchstart"}),dt({method:t,eventType:"Touch End",eventName:"touchend"}),dt({method:t,eventType:"Touch Cancel",eventName:"touchcancel"}),dt({method:t,eventType:"Transition Start",eventNames:["transitionstart","webkitTransitionStart","MSTransitionStart","oTransitionStart","otransitionstart"]}),dt({method:t,eventType:"Transition Iteration",eventNames:["transitioniteration","webkitTransitionIteration","MSTransitionIteration","oTransitionIteration","otransitioniteration"]}),dt({method:t,eventType:"Transition End",eventNames:["transitionend","webkitTransitionEnd","MSTransitionEnd","oTransitionEnd","otransitionend"]}),"child"===C&&dt({method:t,eventType:"IFrame Resized",eventName:"resize"})}function ht(t,e,n,r){return e!==t&&(t in n||(st(t+" is not a valid option for "+r+"CalculationMethod."),t=e),at(r+' calculation method set to "'+t+'"')),t}function pt(){m=ht(m,p,J,"height")}function mt(){B=ht(B,N,tt,"width")}function gt(){var t;!0===n?(ft("add"),t=0>b,window.MutationObserver||window.WebKitMutationObserver?t?vt():s=function(){function t(t){function e(t){!1===t.complete&&(at("Attach listeners to "+t.src),t.addEventListener("load",i,!1),t.addEventListener("error",o,!1),l.push(t))}"attributes"===t.type&&"src"===t.attributeName?e(t.target):"childList"===t.type&&Array.prototype.forEach.call(t.target.querySelectorAll("img"),e)}function e(t){l.splice(l.indexOf(t),1)}function n(t){at("Remove listeners from "+t.src),t.removeEventListener("load",i,!1),t.removeEventListener("error",o,!1),e(t)}function r(t,e,r){n(t.target),xt(e,r+": "+t.target.src)}function i(t){r(t,"imageLoad","Image loaded")}function o(t){r(t,"imageLoadFailed","Image load failed")}function a(e){xt("mutationObserver","mutationObserver: "+e[0].target+" "+e[0].type),e.forEach(t)}function s(){var t=document.querySelector("body"),e={attributes:!0,attributeOldValue:!1,characterData:!0,characterDataOldValue:!1,childList:!0,subtree:!0};return c=new u(a),at("Create body MutationObserver"),c.observe(t,e),c}var l=[],u=window.MutationObserver||window.WebKitMutationObserver,c=s();return{disconnect:function(){"disconnect"in c&&(at("Disconnect body MutationObserver"),c.disconnect(),l.forEach(n))}}}():(at("MutationObserver not supported in this browser!"),vt())):at("Auto Resize disabled")}function vt(){0!==b&&(at("setInterval: "+b+"ms"),_=setInterval((function(){xt("interval","setInterval: "+b)}),Math.abs(b)))}function yt(t,e){var n=0;return e=e||document.body,n=null===(n=document.defaultView.getComputedStyle(e,null))?0:n[t],parseInt(n,r)}function bt(t,e){for(var n=e.length,r=0,i=0,o=it(t),a=Date.now(),s=0;s<n;s++)(r=e[s].getBoundingClientRect()[t]+yt("margin"+o,e[s]))>i&&(i=r);return a=Date.now()-a,at("Parsed "+n+" HTML elements"),at("Element position calculated in "+a+"ms"),function(t){t>L/2&&at("Event throttle increased to "+(L=2*t)+"ms")}(a),i}function _t(t){return[t.bodyOffset(),t.bodyScroll(),t.documentElementOffset(),t.documentElementScroll()]}function wt(t,e){var n=document.querySelectorAll("["+e+"]");return 0===n.length&&(st("No tagged elements ("+e+") found on page"),document.querySelectorAll("body *")),bt(t,n)}function At(){return document.querySelectorAll("body *")}function Et(t,n,r,i){var o,a;!function(){function t(t,e){return!(Math.abs(t-e)<=R)}return o=e===r?J[m]():r,a=e===i?tt[B]():i,t(h,o)||u&&t(D,a)}()&&"init"!==t?!(t in{init:1,interval:1,size:1})&&(m in T||u&&B in T)?Ct(n):t in{interval:1}||at("No change in size detected"):(St(),It(h=o,D=a,t))}function xt(t,e,n,r){O&&t in c?at("Trigger event cancelled: "+t):(t in{reset:1,resetPage:1,init:1}||at("Trigger event: "+e),"init"===t?Et(t,e,n,r):et(t,e,n,r))}function St(){O||(O=!0,at("Trigger event lock on")),clearTimeout(M),M=setTimeout((function(){O=!1,at("Trigger event lock off"),at("--")}),d)}function Tt(t){h=J[m](),D=tt[B](),It(h,D,t)}function Ct(t){var e=m;m=p,at("Reset trigger event: "+t),St(),Tt("reset"),m=e}function It(t,n,r,i,o){var a;!0===I&&(e===o?o=P:at("Message targetOrigin: "+o),at("Sending message to host page ("+(a=S+":"+t+":"+n+":"+r+(e===i?"":":"+i))+")"),k.postMessage(E+a,o))}function kt(){"loading"!==document.readyState&&window.parent.postMessage("[iFrameResizerChild]Ready","*")}}()},570:(t,e)=>{var n,r,i;!function(o){if("undefined"!=typeof window){var a,s=0,l=!1,u=!1,c=7,d="[iFrameSizer]",f=d.length,h=null,p=window.requestAnimationFrame,m=Object.freeze({max:1,scroll:1,bodyScroll:1,documentElementScroll:1}),g={},v=null,y=Object.freeze({autoResize:!0,bodyBackground:null,bodyMargin:null,bodyMarginV1:8,bodyPadding:null,checkOrigin:!0,inPageLinks:!1,enablePublicMethods:!0,heightCalculationMethod:"bodyOffset",id:"iFrameResizer",interval:32,log:!1,maxHeight:1/0,maxWidth:1/0,minHeight:0,minWidth:0,mouseEvents:!0,resizeFrom:"parent",scrolling:!1,sizeHeight:!0,sizeWidth:!1,warningTimeout:5e3,tolerance:0,widthCalculationMethod:"scroll",onClose:function(){return!0},onClosed:function(){},onInit:function(){},onMessage:function(){C("onMessage function not defined")},onMouseEnter:function(){},onMouseLeave:function(){},onResized:function(){},onScroll:function(){return!0}}),b={};window.jQuery!==o&&((a=window.jQuery).fn?a.fn.iFrameResize||(a.fn.iFrameResize=function(t){return this.filter("iframe").each((function(e,n){U(n,t)})).end()}):T("","Unable to bind to jQuery, it is not fully loaded.")),r=[],(i="function"==typeof(n=Q)?n.apply(e,r):n)===o||(t.exports=i),window.iFrameResize=window.iFrameResize||Q()}function _(){return window.MutationObserver||window.WebKitMutationObserver||window.MozMutationObserver}function w(t,e,n){t.addEventListener(e,n,!1)}function A(t,e,n){t.removeEventListener(e,n,!1)}function E(t){return d+"["+function(t){var e="Host page: "+t;return window.top!==window.self&&(e=window.parentIFrame&&window.parentIFrame.getId?window.parentIFrame.getId()+": "+t:"Nested host page: "+t),e}(t)+"]"}function x(t){return g[t]?g[t].log:l}function S(t,e){I("log",t,e,x(t))}function T(t,e){I("info",t,e,x(t))}function C(t,e){I("warn",t,e,!0)}function I(t,e,n,r){!0===r&&"object"==typeof window.console&&console[t](E(e),n)}function k(t){function e(){i("Height"),i("Width"),j((function(){B(R),L(U),m("onResized",R)}),R,"init")}function n(t){return"border-box"!==t.boxSizing?0:(t.paddingTop?parseInt(t.paddingTop,10):0)+(t.paddingBottom?parseInt(t.paddingBottom,10):0)}function r(t){return"border-box"!==t.boxSizing?0:(t.borderTopWidth?parseInt(t.borderTopWidth,10):0)+(t.borderBottomWidth?parseInt(t.borderBottomWidth,10):0)}function i(t){var e=Number(g[U]["max"+t]),n=Number(g[U]["min"+t]),r=t.toLowerCase(),i=Number(R[r]);S(U,"Checking "+r+" is in range "+n+"-"+e),i<n&&(i=n,S(U,"Set "+r+" to min value")),i>e&&(i=e,S(U,"Set "+r+" to max value")),R[r]=""+i}function o(t){return k.slice(k.indexOf(":")+c+t)}function a(t,e){var n,r,i;n=function(){var n,r;z("Send Page Info","pageInfo:"+(n=document.body.getBoundingClientRect(),r=R.iframe.getBoundingClientRect(),JSON.stringify({iframeHeight:r.height,iframeWidth:r.width,clientHeight:Math.max(document.documentElement.clientHeight,window.innerHeight||0),clientWidth:Math.max(document.documentElement.clientWidth,window.innerWidth||0),offsetTop:parseInt(r.top-n.top,10),offsetLeft:parseInt(r.left-n.left,10),scrollTop:window.pageYOffset,scrollLeft:window.pageXOffset,documentHeight:document.documentElement.clientHeight,documentWidth:document.documentElement.clientWidth,windowHeight:window.innerHeight,windowWidth:window.innerWidth})),t,e)},r=32,b[i=e]||(b[i]=setTimeout((function(){b[i]=null,n()}),r))}function s(t){var e=t.getBoundingClientRect();return M(U),{x:Math.floor(Number(e.left)+Number(h.x)),y:Math.floor(Number(e.top)+Number(h.y))}}function l(t){var e=t?s(R.iframe):{x:0,y:0},n={x:Number(R.width)+e.x,y:Number(R.height)+e.y};S(U,"Reposition requested from iFrame (offset x:"+e.x+" y:"+e.y+")"),window.top===window.self?(h=n,u(),S(U,"--")):window.parentIFrame?window.parentIFrame["scrollTo"+(t?"Offset":"")](n.x,n.y):C(U,"Unable to scroll to requested position, window.parentIFrame not found")}function u(){!1===m("onScroll",h)?D():L(U)}function p(t){var e={};if(0===Number(R.width)&&0===Number(R.height)){var n=o(9).split(":");e={x:n[1],y:n[0]}}else e={x:R.width,y:R.height};m(t,{iframe:R.iframe,screenX:Number(e.x),screenY:Number(e.y),type:R.type})}function m(t,e){return P(U,t,e)}var v,y,_,E,x,I,k=t.data,R={},U=null;"[iFrameResizerChild]Ready"===k?function(){for(var t in g)z("iFrame requested init",F(t),g[t].iframe,t)}():d===(""+k).slice(0,f)&&k.slice(f).split(":")[0]in g?(_=k.slice(f).split(":"),E=_[1]?parseInt(_[1],10):0,x=g[_[0]]&&g[_[0]].iframe,I=getComputedStyle(x),R={iframe:x,id:_[0],height:E+n(I)+r(I),width:_[2],type:_[3]},U=R.id,g[U]&&(g[U].loaded=!0),(y=R.type in{true:1,false:1,undefined:1})&&S(U,"Ignoring init message from meta parent page"),!y&&function(t){var e=!0;return g[t]||(e=!1,C(R.type+" No settings for "+t+". Message was: "+k)),e}(U)&&(S(U,"Received: "+k),v=!0,null===R.iframe&&(C(U,"IFrame ("+R.id+") not found"),v=!1),v&&function(){var e,n=t.origin,r=g[U]&&g[U].checkOrigin;if(r&&""+n!="null"&&!(r.constructor===Array?function(){var t=0,e=!1;for(S(U,"Checking connection is from allowed list of origins: "+r);t<r.length;t++)if(r[t]===n){e=!0;break}return e}():(e=g[U]&&g[U].remoteHost,S(U,"Checking connection is from: "+e),n===e)))throw new Error("Unexpected message received from: "+n+" for "+R.iframe.id+". Message was: "+t.data+". This error can be disabled by setting the checkOrigin: false option or by providing of array of trusted domains.");return!0}()&&function(){switch(g[U]&&g[U].firstRun&&g[U]&&(g[U].firstRun=!1),R.type){case"close":O(R.iframe);break;case"message":t=o(6),S(U,"onMessage passed: {iframe: "+R.iframe.id+", message: "+t+"}"),m("onMessage",{iframe:R.iframe,message:JSON.parse(t)}),S(U,"--");break;case"mouseenter":p("onMouseEnter");break;case"mouseleave":p("onMouseLeave");break;case"autoResize":g[U].autoResize=JSON.parse(o(9));break;case"scrollTo":l(!1);break;case"scrollToOffset":l(!0);break;case"pageInfo":a(g[U]&&g[U].iframe,U),function(){function t(t,r){function i(){g[n]?a(g[n].iframe,n):e()}["scroll","resize"].forEach((function(e){S(n,t+e+" listener for sendPageInfo"),r(window,e,i)}))}function e(){t("Remove ",A)}var n=U;t("Add ",w),g[n]&&(g[n].stopPageInfo=e)}();break;case"pageInfoStop":g[U]&&g[U].stopPageInfo&&(g[U].stopPageInfo(),delete g[U].stopPageInfo);break;case"inPageLink":!function(t){var e,n=t.split("#")[1]||"",r=decodeURIComponent(n),i=document.getElementById(r)||document.getElementsByName(r)[0];i?(e=s(i),S(U,"Moving to in page link (#"+n+") at x: "+e.x+" y: "+e.y),h={x:e.x,y:e.y},u(),S(U,"--")):window.top===window.self?S(U,"In page link #"+n+" not found"):window.parentIFrame?window.parentIFrame.moveToAnchor(n):S(U,"In page link #"+n+" not found and window.parentIFrame not found")}(o(9));break;case"reset":N(R);break;case"init":e(),m("onInit",R.iframe);break;default:0===Number(R.width)&&0===Number(R.height)?C("Unsupported message received ("+R.type+"), this is likely due to the iframe containing a later version of iframe-resizer than the parent page"):e()}var t}())):T(U,"Ignored: "+k)}function P(t,e,n){var r=null,i=null;if(g[t]){if("function"!=typeof(r=g[t][e]))throw new TypeError(e+" on iFrame["+t+"] is not a function");i=r(n)}return i}function R(t){var e=t.id;delete g[e]}function O(t){var e=t.id;if(!1!==P(e,"onClose",e)){S(e,"Removing iFrame: "+e);try{t.parentNode&&t.parentNode.removeChild(t)}catch(t){C(t)}P(e,"onClosed",e),S(e,"--"),R(t)}else S(e,"Close iframe cancelled by onClose event")}function M(t){null===h&&S(t,"Get page position: "+(h={x:window.pageXOffset===o?document.documentElement.scrollLeft:window.pageXOffset,y:window.pageYOffset===o?document.documentElement.scrollTop:window.pageYOffset}).x+","+h.y)}function L(t){null!==h&&(window.scrollTo(h.x,h.y),S(t,"Set page position: "+h.x+","+h.y),D())}function D(){h=null}function N(t){S(t.id,"Size reset requested by "+("init"===t.type?"host page":"iFrame")),M(t.id),j((function(){B(t),z("reset","reset",t.iframe,t.id)}),t,"reset")}function B(t){function e(e){u||"0"!==t[e]||(u=!0,S(r,"Hidden iFrame detected, creating visibility listener"),function(){function t(){function t(t){function e(e){return"0px"===(g[t]&&g[t].iframe.style[e])}function n(t){return null!==t.offsetParent}g[t]&&n(g[t].iframe)&&(e("height")||e("width"))&&z("Visibility change","resize",g[t].iframe,t)}Object.keys(g).forEach((function(e){t(e)}))}function e(e){S("window","Mutation observed: "+e[0].target+" "+e[0].type),q(t,16)}function n(){var t=document.querySelector("body"),n={attributes:!0,attributeOldValue:!1,characterData:!0,characterDataOldValue:!1,childList:!0,subtree:!0};new r(e).observe(t,n)}var r=_();r&&n()}())}function n(n){!function(e){t.id?(t.iframe.style[e]=t[e]+"px",S(t.id,"IFrame ("+r+") "+e+" set to "+t[e]+"px")):S("undefined","messageData id not set")}(n),e(n)}var r=t.iframe.id;g[r]&&(g[r].sizeHeight&&n("height"),g[r].sizeWidth&&n("width"))}function j(t,e,n){n!==e.type&&p&&!window.jasmine?(S(e.id,"Requesting animation frame"),p(t)):t()}function z(t,e,n,r,i){var o,a=!1;r=r||n.id,g[r]&&(n&&"contentWindow"in n&&null!==n.contentWindow?(o=g[r]&&g[r].targetOrigin,S(r,"["+t+"] Sending msg to iframe["+r+"] ("+e+") targetOrigin: "+o),n.contentWindow.postMessage(d+e,o)):C(r,"["+t+"] IFrame("+r+") not found"),i&&g[r]&&g[r].warningTimeout&&(g[r].msgTimeout=setTimeout((function(){!g[r]||g[r].loaded||a||(a=!0,C(r,"IFrame has not responded within "+g[r].warningTimeout/1e3+" seconds. Check iFrameResizer.contentWindow.js has been loaded in iFrame. This message can be ignored if everything is working, or you can set the warningTimeout option to a higher value or zero to suppress this warning."))}),g[r].warningTimeout)))}function F(t){return t+":"+g[t].bodyMarginV1+":"+g[t].sizeWidth+":"+g[t].log+":"+g[t].interval+":"+g[t].enablePublicMethods+":"+g[t].autoResize+":"+g[t].bodyMargin+":"+g[t].heightCalculationMethod+":"+g[t].bodyBackground+":"+g[t].bodyPadding+":"+g[t].tolerance+":"+g[t].inPageLinks+":"+g[t].resizeFrom+":"+g[t].widthCalculationMethod+":"+g[t].mouseEvents}function U(t,e){function n(t){var e=t.split("Callback");if(2===e.length){var n="on"+e[0].charAt(0).toUpperCase()+e[0].slice(1);this[n]=this[t],delete this[t],C(r,"Deprecated: '"+t+"' has been renamed '"+n+"'. The old method will be removed in the next major version.")}}var r=function(n){if("string"!=typeof n)throw new TypeError("Invaild id for iFrame. Expected String");var r;return""===n&&(t.id=(r=e&&e.id||y.id+s++,null!==document.getElementById(r)&&(r+=s++),n=r),l=(e||{}).log,S(n,"Added missing iframe ID: "+n+" ("+t.src+")")),n}(t.id);r in g&&"iFrameResizer"in t?C(r,"Ignored iFrame, already setup."):(!function(e){var i;e=e||{},g[r]=Object.create(null),g[r].iframe=t,g[r].firstRun=!0,g[r].remoteHost=t.src&&t.src.split("/").slice(0,3).join("/"),function(t){if("object"!=typeof t)throw new TypeError("Options is not an object")}(e),Object.keys(e).forEach(n,e),function(t){for(var e in y)Object.prototype.hasOwnProperty.call(y,e)&&(g[r][e]=Object.prototype.hasOwnProperty.call(t,e)?t[e]:y[e])}(e),g[r]&&(g[r].targetOrigin=!0===g[r].checkOrigin?""===(i=g[r].remoteHost)||null!==i.match(/^(about:blank|javascript:|file:\/\/)/)?"*":i:"*")}(e),function(){switch(S(r,"IFrame scrolling "+(g[r]&&g[r].scrolling?"enabled":"disabled")+" for "+r),t.style.overflow=!1===(g[r]&&g[r].scrolling)?"hidden":"auto",g[r]&&g[r].scrolling){case"omit":break;case!0:t.scrolling="yes";break;case!1:t.scrolling="no";break;default:t.scrolling=g[r]?g[r].scrolling:"no"}}(),function(){function e(e){var n=g[r][e];1/0!==n&&0!==n&&(t.style[e]="number"==typeof n?n+"px":n,S(r,"Set "+e+" = "+t.style[e]))}function n(t){if(g[r]["min"+t]>g[r]["max"+t])throw new Error("Value for min"+t+" can not be greater than max"+t)}n("Height"),n("Width"),e("maxHeight"),e("minHeight"),e("maxWidth"),e("minWidth")}(),"number"!=typeof(g[r]&&g[r].bodyMargin)&&"0"!==(g[r]&&g[r].bodyMargin)||(g[r].bodyMarginV1=g[r].bodyMargin,g[r].bodyMargin=g[r].bodyMargin+"px"),function(e){var n=_();n&&function(e){t.parentNode&&new e((function(e){e.forEach((function(e){Array.prototype.slice.call(e.removedNodes).forEach((function(e){e===t&&O(t)}))}))})).observe(t.parentNode,{childList:!0})}(n),w(t,"load",(function(){var n,i;z("iFrame.onload",e,t,o,!0),n=g[r]&&g[r].firstRun,i=g[r]&&g[r].heightCalculationMethod in m,!n&&i&&N({iframe:t,height:0,width:0,type:"init"})})),z("init",e,t,o,!0)}(F(r)),g[r]&&(g[r].iframe.iFrameResizer={close:O.bind(null,g[r].iframe),removeListeners:R.bind(null,g[r].iframe),resize:z.bind(null,"Window resize","resize",g[r].iframe),moveToAnchor:function(t){z("Move to anchor","moveToAnchor:"+t,g[r].iframe,r)},sendMessage:function(t){z("Send Message","message:"+(t=JSON.stringify(t)),g[r].iframe,r)}}))}function q(t,e){null===v&&(v=setTimeout((function(){v=null,t()}),e))}function G(){"hidden"!==document.visibilityState&&(S("document","Trigger event: Visibility change"),q((function(){H("Tab Visible","resize")}),16))}function H(t,e){Object.keys(g).forEach((function(n){(function(t){return g[t]&&"parent"===g[t].resizeFrom&&g[t].autoResize&&!g[t].firstRun})(n)&&z(t,e,g[n].iframe,n)}))}function V(){w(window,"message",k),w(window,"resize",(function(){!function(t){S("window","Trigger event: "+t),q((function(){H("Window "+t,"resize")}),16)}("resize")})),w(document,"visibilitychange",G),w(document,"-webkit-visibilitychange",G)}function Q(){function t(t,n){n&&(!function(){if(!n.tagName)throw new TypeError("Object is not a valid DOM element");if("IFRAME"!==n.tagName.toUpperCase())throw new TypeError("Expected <IFRAME> tag, found <"+n.tagName+">")}(),U(n,t),e.push(n))}var e;return function(){var t,e=["moz","webkit","o","ms"];for(t=0;t<e.length&&!p;t+=1)p=window[e[t]+"RequestAnimationFrame"];p?p=p.bind(window):S("setup","RequestAnimationFrame not supported")}(),V(),function(n,r){switch(e=[],function(t){t&&t.enablePublicMethods&&C("enablePublicMethods option has been removed, public methods are now always available in the iFrame")}(n),typeof r){case"undefined":case"string":Array.prototype.forEach.call(document.querySelectorAll(r||"iframe"),t.bind(o,n));break;case"object":t(n,r);break;default:throw new TypeError("Unexpected data type ("+typeof r+")")}return e}}}()},7206:t=>{function e(t){return!!t.constructor&&"function"==typeof t.constructor.isBuffer&&t.constructor.isBuffer(t)}t.exports=function(t){return null!=t&&(e(t)||function(t){return"function"==typeof t.readFloatLE&&"function"==typeof t.slice&&e(t.slice(0,0))}(t)||!!t._isBuffer)}},6749:(t,e,n)=>{"use strict";const r=n(1158),i=/\s?<!doctype html>|(<html\b[^>]*>|<body\b[^>]*>|<x-[^>]+>)+/i,o=new RegExp(r.map((t=>`<${t}\\b[^>]*>`)).join("|"),"i");t.exports=t=>i.test(t)||o.test(t)},4634:t=>{var e={}.toString;t.exports=Array.isArray||function(t){return"[object Array]"==e.call(t)}},9129:()=>{if("undefined"!=typeof window)try{document.querySelector(":scope *")}catch(t){!function(t){var e=/:scope(?![\w-])/gi,n=a(t.querySelector);t.querySelector=function(t){return n.apply(this,arguments)};var r=a(t.querySelectorAll);if(t.querySelectorAll=function(t){return r.apply(this,arguments)},t.matches){var i=a(t.matches);t.matches=function(t){return i.apply(this,arguments)}}if(t.closest){var o=a(t.closest);t.closest=function(t){return o.apply(this,arguments)}}function a(t){return function(n){if(n&&e.test(n)){var r="q"+Math.floor(9e6*Math.random())+1e6;arguments[0]=n.replace(e,"["+r+"]"),this.setAttribute(r,"");var i=t.apply(this,arguments);return this.removeAttribute(r),i}return t.apply(this,arguments)}}}(Element.prototype)}},3065:function(t,e,n){var r,i;!function(o,a){"use strict";r=function(){var t=function(){},e="undefined",n=typeof window!==e&&typeof window.navigator!==e&&/Trident\/|MSIE /.test(window.navigator.userAgent),r=["trace","debug","info","warn","error"],i={},o=null;function a(t,e){var n=t[e];if("function"==typeof n.bind)return n.bind(t);try{return Function.prototype.bind.call(n,t)}catch(e){return function(){return Function.prototype.apply.apply(n,[t,arguments])}}}function s(){console.log&&(console.log.apply?console.log.apply(console,arguments):Function.prototype.apply.apply(console.log,[console,arguments])),console.trace&&console.trace()}function l(r){return"debug"===r&&(r="log"),typeof console!==e&&("trace"===r&&n?s:void 0!==console[r]?a(console,r):void 0!==console.log?a(console,"log"):t)}function u(){for(var n=this.getLevel(),i=0;i<r.length;i++){var o=r[i];this[o]=i<n?t:this.methodFactory(o,n,this.name)}if(this.log=this.debug,typeof console===e&&n<this.levels.SILENT)return"No console available for logging"}function c(t){return function(){typeof console!==e&&(u.call(this),this[t].apply(this,arguments))}}function d(t,e,n){return l(t)||c.apply(this,arguments)}function f(t,n){var a,s,l,c=this,f="loglevel";function h(t){var n=(r[t]||"silent").toUpperCase();if(typeof window!==e&&f){try{return void(window.localStorage[f]=n)}catch(t){}try{window.document.cookie=encodeURIComponent(f)+"="+n+";"}catch(t){}}}function p(){var t;if(typeof window!==e&&f){try{t=window.localStorage[f]}catch(t){}if(typeof t===e)try{var n=window.document.cookie,r=encodeURIComponent(f),i=n.indexOf(r+"=");-1!==i&&(t=/^([^;]+)/.exec(n.slice(i+r.length+1))[1])}catch(t){}return void 0===c.levels[t]&&(t=void 0),t}}function m(){if(typeof window!==e&&f){try{window.localStorage.removeItem(f)}catch(t){}try{window.document.cookie=encodeURIComponent(f)+"=; expires=Thu, 01 Jan 1970 00:00:00 UTC"}catch(t){}}}function g(t){var e=t;if("string"==typeof e&&void 0!==c.levels[e.toUpperCase()]&&(e=c.levels[e.toUpperCase()]),"number"==typeof e&&e>=0&&e<=c.levels.SILENT)return e;throw new TypeError("log.setLevel() called with invalid level: "+t)}"string"==typeof t?f+=":"+t:"symbol"==typeof t&&(f=void 0),c.name=t,c.levels={TRACE:0,DEBUG:1,INFO:2,WARN:3,ERROR:4,SILENT:5},c.methodFactory=n||d,c.getLevel=function(){return null!=l?l:null!=s?s:a},c.setLevel=function(t,e){return l=g(t),!1!==e&&h(l),u.call(c)},c.setDefaultLevel=function(t){s=g(t),p()||c.setLevel(t,!1)},c.resetLevel=function(){l=null,m(),u.call(c)},c.enableAll=function(t){c.setLevel(c.levels.TRACE,t)},c.disableAll=function(t){c.setLevel(c.levels.SILENT,t)},c.rebuild=function(){if(o!==c&&(a=g(o.getLevel())),u.call(c),o===c)for(var t in i)i[t].rebuild()},a=g(o?o.getLevel():"WARN");var v=p();null!=v&&(l=g(v)),u.call(c)}(o=new f).getLogger=function(t){if("symbol"!=typeof t&&"string"!=typeof t||""===t)throw new TypeError("You must supply a name when creating a logger.");var e=i[t];return e||(e=i[t]=new f(t,o.methodFactory)),e};var h=typeof window!==e?window.log:void 0;return o.noConflict=function(){return typeof window!==e&&window.log===o&&(window.log=h),o},o.getLoggers=function(){return i},o.default=o,o},void 0===(i="function"==typeof r?r.call(e,n,e,t):r)||(t.exports=i)}()},8119:()=>{},1553:()=>{},3199:t=>{t.exports=function(t,e){e=e||2;for(var n=2*(t=t||1)+1,r=Math.pow(n,e)-1,i=new Array(r),o=0;o<r;o++)for(var a=i[o]=new Array(e),s=o<r/2?o:o+1,l=1;l<=e;l++){var u=s%Math.pow(n,l);a[l-1]=u/Math.pow(n,l-1)-t,s-=u}return i}},9466:function(t,e){var n,r,i;r=[],void 0===(i="function"==typeof(n=function(){return function(t){function e(t){return" "===t||"\t"===t||"\n"===t||"\f"===t||"\r"===t}function n(e){var n,r=e.exec(t.substring(m));if(r)return n=r[0],m+=n.length,n}for(var r,i,o,a,s,l=t.length,u=/^[ \t\n\r\u000c]+/,c=/^[, \t\n\r\u000c]+/,d=/^[^ \t\n\r\u000c]+/,f=/[,]+$/,h=/^\d+$/,p=/^-?(?:[0-9]+|[0-9]*\.[0-9]+)(?:[eE][+-]?[0-9]+)?$/,m=0,g=[];;){if(n(c),m>=l)return g;r=n(d),i=[],","===r.slice(-1)?(r=r.replace(f,""),y()):v()}function v(){for(n(u),o="",a="in descriptor";;){if(s=t.charAt(m),"in descriptor"===a)if(e(s))o&&(i.push(o),o="",a="after descriptor");else{if(","===s)return m+=1,o&&i.push(o),void y();if("("===s)o+=s,a="in parens";else{if(""===s)return o&&i.push(o),void y();o+=s}}else if("in parens"===a)if(")"===s)o+=s,a="in descriptor";else{if(""===s)return i.push(o),void y();o+=s}else if("after descriptor"===a)if(e(s));else{if(""===s)return void y();a="in descriptor",m-=1}m+=1}}function y(){var e,n,o,a,s,l,u,c,d,f=!1,m={};for(a=0;a<i.length;a++)l=(s=i[a])[s.length-1],u=s.substring(0,s.length-1),c=parseInt(u,10),d=parseFloat(u),h.test(u)&&"w"===l?((e||n)&&(f=!0),0===c?f=!0:e=c):p.test(u)&&"x"===l?((e||n||o)&&(f=!0),d<0?f=!0:n=d):h.test(u)&&"h"===l?((o||n)&&(f=!0),0===c?f=!0:o=c):f=!0;f?console&&console.log&&console.log("Invalid srcset descriptor found in '"+t+"' at '"+s+"'."):(m.url=r,e&&(m.w=e),n&&(m.d=n),o&&(m.h=o),g.push(m))}}})?n.apply(e,r):n)||(t.exports=i)},2630:(t,e,n)=>{"use strict";var r=n(4461).integer,i=n(4650),o=n(8264);function a(t,e){for(var n=0,r=0;r<t.length;r++)n+=Math.pow(t[r]-e[r],2);return n}function s(t,e){if("function"==typeof t.distanceFunction)throw new Error("PoissonDiskSampling: Tried to instantiate the fixed density implementation with a distanceFunction");this.shape=t.shape,this.minDistance=t.minDistance,this.maxDistance=t.maxDistance||2*t.minDistance,this.maxTries=Math.ceil(Math.max(1,t.tries||30)),this.rng=e||Math.random;for(var n=0,i=0;i<this.shape.length;i++)n=Math.max(n,this.shape[i]);var a=1e-14*Math.max(1,n/128|0);this.dimension=this.shape.length,this.squaredMinDistance=this.minDistance*this.minDistance,this.minDistancePlusEpsilon=this.minDistance+a,this.deltaDistance=Math.max(0,this.maxDistance-this.minDistancePlusEpsilon),this.cellSize=this.minDistance/Math.sqrt(this.dimension),this.neighbourhood=o(this.dimension),this.currentPoint=null,this.processList=[],this.samplePoints=[],this.gridShape=[];for(i=0;i<this.dimension;i++)this.gridShape.push(Math.ceil(this.shape[i]/this.cellSize));this.grid=r(this.gridShape)}s.prototype.shape=null,s.prototype.dimension=null,s.prototype.minDistance=null,s.prototype.maxDistance=null,s.prototype.minDistancePlusEpsilon=null,s.prototype.squaredMinDistance=null,s.prototype.deltaDistance=null,s.prototype.cellSize=null,s.prototype.maxTries=null,s.prototype.rng=null,s.prototype.neighbourhood=null,s.prototype.currentPoint=null,s.prototype.processList=null,s.prototype.samplePoints=null,s.prototype.gridShape=null,s.prototype.grid=null,s.prototype.addRandomPoint=function(){for(var t=new Array(this.dimension),e=0;e<this.dimension;e++)t[e]=this.rng()*this.shape[e];return this.directAddPoint(t)},s.prototype.addPoint=function(t){var e,n=!0;if(t.length===this.dimension)for(e=0;e<this.dimension&&n;e++)n=t[e]>=0&&t[e]<this.shape[e];else n=!1;return n?this.directAddPoint(t):null},s.prototype.directAddPoint=function(t){var e,n=0,r=this.grid.stride;for(this.processList.push(t),this.samplePoints.push(t),e=0;e<this.dimension;e++)n+=(t[e]/this.cellSize|0)*r[e];return this.grid.data[n]=this.samplePoints.length,t},s.prototype.inNeighbourhood=function(t){var e,n,r,i,o=this.dimension,s=this.grid.stride;for(e=0;e<this.neighbourhood.length;e++){for(n=0,r=0;r<o;r++){if((i=(t[r]/this.cellSize|0)+this.neighbourhood[e][r])<0||i>=this.gridShape[r]){n=-1;break}n+=i*s[r]}if(-1!==n&&0!==this.grid.data[n]&&a(t,this.samplePoints[this.grid.data[n]-1])<this.squaredMinDistance)return!0}return!1},s.prototype.next=function(){for(var t,e,n,r,o,a,s;this.processList.length>0;){for(null===this.currentPoint&&(this.currentPoint=this.processList.shift()),r=this.currentPoint,t=0;t<this.maxTries;t++){for(a=!0,n=this.minDistancePlusEpsilon+this.deltaDistance*this.rng(),2===this.dimension?(e=this.rng()*Math.PI*2,o=[Math.cos(e),Math.sin(e)]):o=i(this.dimension,this.rng),s=0;a&&s<this.dimension;s++)o[s]=r[s]+o[s]*n,a=o[s]>=0&&o[s]<this.shape[s];if(a&&!this.inNeighbourhood(o))return this.directAddPoint(o)}t===this.maxTries&&(this.currentPoint=null)}return null},s.prototype.fill=function(){for(0===this.samplePoints.length&&this.addRandomPoint();this.next(););return this.samplePoints},s.prototype.getAllPoints=function(){return this.samplePoints},s.prototype.getAllPointsWithDistance=function(){throw new Error("PoissonDiskSampling: getAllPointsWithDistance() is not available in fixed-density implementation")},s.prototype.reset=function(){var t=this.grid.data,e=0;for(e=0;e<t.length;e++)t[e]=0;this.samplePoints=[],this.currentPoint=null,this.processList.length=0},t.exports=s},2124:(t,e,n)=>{"use strict";var r=n(4461).array,i=n(4650),o=n(8264);function a(t,e){for(var n=0,r=0;r<t.length;r++)n+=Math.pow(t[r]-e[r],2);return Math.sqrt(n)}function s(t,e){if("function"!=typeof t.distanceFunction)throw new Error("PoissonDiskSampling: Tried to instantiate the variable density implementation without a distanceFunction");this.shape=t.shape,this.minDistance=t.minDistance,this.maxDistance=t.maxDistance||2*t.minDistance,this.maxTries=Math.ceil(Math.max(1,t.tries||30)),this.distanceFunction=t.distanceFunction,this.bias=Math.max(0,Math.min(1,t.bias||0)),this.rng=e||Math.random;for(var n=0,i=0;i<this.shape.length;i++)n=Math.max(n,this.shape[i]);var a=1e-14*Math.max(1,n/128|0);this.dimension=this.shape.length,this.minDistancePlusEpsilon=this.minDistance+a,this.deltaDistance=Math.max(0,this.maxDistance-this.minDistancePlusEpsilon),this.cellSize=this.maxDistance/Math.sqrt(this.dimension),this.neighbourhood=o(this.dimension),this.currentPoint=null,this.currentDistance=0,this.processList=[],this.samplePoints=[],this.sampleDistance=[],this.gridShape=[];for(i=0;i<this.dimension;i++)this.gridShape.push(Math.ceil(this.shape[i]/this.cellSize));this.grid=r(this.gridShape)}s.prototype.shape=null,s.prototype.dimension=null,s.prototype.minDistance=null,s.prototype.maxDistance=null,s.prototype.minDistancePlusEpsilon=null,s.prototype.deltaDistance=null,s.prototype.cellSize=null,s.prototype.maxTries=null,s.prototype.distanceFunction=null,s.prototype.bias=null,s.prototype.rng=null,s.prototype.neighbourhood=null,s.prototype.currentPoint=null,s.prototype.currentDistance=null,s.prototype.processList=null,s.prototype.samplePoints=null,s.prototype.sampleDistance=null,s.prototype.gridShape=null,s.prototype.grid=null,s.prototype.addRandomPoint=function(){for(var t=new Array(this.dimension),e=0;e<this.dimension;e++)t[e]=this.rng()*this.shape[e];return this.directAddPoint(t)},s.prototype.addPoint=function(t){var e,n=!0;if(t.length===this.dimension)for(e=0;e<this.dimension&&n;e++)n=t[e]>=0&&t[e]<this.shape[e];else n=!1;return n?this.directAddPoint(t):null},s.prototype.directAddPoint=function(t){var e,n=0,r=this.grid.stride,i=this.samplePoints.length;for(this.processList.push(i),this.samplePoints.push(t),this.sampleDistance.push(this.distanceFunction(t)),e=0;e<this.dimension;e++)n+=(t[e]/this.cellSize|0)*r[e];return this.grid.data[n].push(i),t},s.prototype.inNeighbourhood=function(t){var e,n,r,i,o,s,l=this.dimension,u=this.grid.stride,c=this.distanceFunction(t);for(e=0;e<this.neighbourhood.length;e++){for(n=0,r=0;r<l;r++){if((i=(t[r]/this.cellSize|0)+this.neighbourhood[e][r])<0||i>=this.gridShape[r]){n=-1;break}n+=i*u[r]}if(-1!==n&&this.grid.data[n].length>0)for(var d=0;d<this.grid.data[n].length;d++){o=this.samplePoints[this.grid.data[n][d]],s=this.sampleDistance[this.grid.data[n][d]];var f=Math.min(s,c),h=f+(Math.max(s,c)-f)*this.bias;if(a(t,o)<this.minDistance+this.deltaDistance*h)return!0}}return!1},s.prototype.next=function(){for(var t,e,n,r,o,a,s,l;this.processList.length>0;){if(null===this.currentPoint){var u=this.processList.shift();this.currentPoint=this.samplePoints[u],this.currentDistance=this.sampleDistance[u]}for(r=this.currentPoint,o=this.currentDistance,t=0;t<this.maxTries;t++){for(s=!0,n=this.minDistancePlusEpsilon+this.deltaDistance*(o+(1-o)*this.bias),2===this.dimension?(e=this.rng()*Math.PI*2,a=[Math.cos(e),Math.sin(e)]):a=i(this.dimension,this.rng),l=0;s&&l<this.dimension;l++)a[l]=r[l]+a[l]*n,s=a[l]>=0&&a[l]<this.shape[l];if(s&&!this.inNeighbourhood(a))return this.directAddPoint(a)}t===this.maxTries&&(this.currentPoint=null)}return null},s.prototype.fill=function(){for(0===this.samplePoints.length&&this.addRandomPoint();this.next(););return this.samplePoints},s.prototype.getAllPoints=function(){return this.samplePoints},s.prototype.getAllPointsWithDistance=function(){var t,e=new Array(this.samplePoints.length),n=0,r=0;for(n=0;n<this.samplePoints.length;n++){for(t=new Array(this.dimension+1),r=0;r<this.dimension;r++)t[r]=this.samplePoints[n][r];t[this.dimension]=this.sampleDistance[n],e[n]=t}return e},s.prototype.reset=function(){var t=this.grid.data,e=0;for(e=0;e<t.length;e++)t[e]=[];this.samplePoints=[],this.currentPoint=null,this.processList.length=0},t.exports=s},8264:(t,e,n)=>{"use strict";var r=n(3199);var i={};t.exports=function(t){return i[t]||(i[t]=function(t){var e,n=r(2,t),i=[];for(n=n.filter((function(e){for(var n=0,r=0;r<t;r++)n+=Math.pow(Math.max(0,Math.abs(e[r])-1),2);return n<t})),e=0;e<t;e++)i.push(0);return n.push(i),n.sort((function(e,n){var r,i=0,o=0;for(r=0;r<t;r++)i+=Math.pow(e[r],2),o+=Math.pow(n[r],2);return i<o?-1:i>o?1:0})),n}(t)),i[t]}},5966:(t,e,n)=>{"use strict";var r=n(2630),i=n(2124);function o(t,e){this.shape=t.shape,"function"==typeof t.distanceFunction?this.implementation=new i(t,e):this.implementation=new r(t,e)}o.prototype.implementation=null,o.prototype.addRandomPoint=function(){return this.implementation.addRandomPoint()},o.prototype.addPoint=function(t){return this.implementation.addPoint(t)},o.prototype.next=function(){return this.implementation.next()},o.prototype.fill=function(){return this.implementation.fill()},o.prototype.getAllPoints=function(){return this.implementation.getAllPoints()},o.prototype.getAllPointsWithDistance=function(){return this.implementation.getAllPointsWithDistance()},o.prototype.reset=function(){this.implementation.reset()},t.exports=o},4650:t=>{"use strict";t.exports=function(t,e){var n,r,i,o,a,s=new Array(t),l=Math.floor(t/2)<<1,u=0;for(a=0;a<l;a+=2)n=-2*Math.log(e()),r=Math.sqrt(n),i=2*Math.PI*e(),u+=n,s[a]=r*Math.cos(i),s[a+1]=r*Math.sin(i);if(t%2){var c=Math.sqrt(-2*Math.log(e()))*Math.cos(2*Math.PI*e());s[t-1]=c,u+=Math.pow(c,2)}for(o=1/Math.sqrt(u),a=0;a<t;++a)s[a]*=o;return s}},4461:t=>{"use strict";t.exports={integer:function(t){var e,n=t.length,r=1,i=new Array(n);for(e=n;e>0;e--)i[e-1]=r,r*=t[e-1];return{stride:i,data:new Uint32Array(r)}},array:function(t){var e,n,r=t.length,i=1,o=new Array(r),a=[];for(e=r;e>0;e--)o[e-1]=i,i*=t[e-1];for(n=0;n<i;n++)a.push([]);return{stride:o,data:a}}}},5606:t=>{var e,n,r=t.exports={};function i(){throw new Error("setTimeout has not been defined")}function o(){throw new Error("clearTimeout has not been defined")}function a(t){if(e===setTimeout)return setTimeout(t,0);if((e===i||!e)&&setTimeout)return e=setTimeout,setTimeout(t,0);try{return e(t,0)}catch(n){try{return e.call(null,t,0)}catch(n){return e.call(this,t,0)}}}!function(){try{e="function"==typeof setTimeout?setTimeout:i}catch(t){e=i}try{n="function"==typeof clearTimeout?clearTimeout:o}catch(t){n=o}}();var s,l=[],u=!1,c=-1;function d(){u&&s&&(u=!1,s.length?l=s.concat(l):c=-1,l.length&&f())}function f(){if(!u){var t=a(d);u=!0;for(var e=l.length;e;){for(s=l,l=[];++c<e;)s&&s[c].run();c=-1,e=l.length}s=null,u=!1,function(t){if(n===clearTimeout)return clearTimeout(t);if((n===o||!n)&&clearTimeout)return n=clearTimeout,clearTimeout(t);try{return n(t)}catch(e){try{return n.call(null,t)}catch(e){return n.call(this,t)}}}(t)}}function h(t,e){this.fun=t,this.array=e}function p(){}r.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];l.push(new h(t,e)),1!==l.length||u||a(f)},h.prototype.run=function(){this.fun.apply(null,this.array)},r.title="browser",r.browser=!0,r.env={},r.argv=[],r.version="",r.versions={},r.on=p,r.addListener=p,r.once=p,r.off=p,r.removeListener=p,r.removeAllListeners=p,r.emit=p,r.prependListener=p,r.prependOnceListener=p,r.listeners=function(t){return[]},r.binding=function(t){throw new Error("process.binding is not supported")},r.cwd=function(){return"/"},r.chdir=function(t){throw new Error("process.chdir is not supported")},r.umask=function(){return 0}},3668:t=>{"use strict";function e(t){this._maxSize=t,this.clear()}e.prototype.clear=function(){this._size=0,this._values=Object.create(null)},e.prototype.get=function(t){return this._values[t]},e.prototype.set=function(t,e){return this._size>=this._maxSize&&this.clear(),t in this._values||this._size++,this._values[t]=e};var n=/[^.^\]^[]+|(?=\[\]|\.\.)/g,r=/^\d+$/,i=/^\d/,o=/[~`!#$%\^&*+=\-\[\]\\';,/{}|\\":<>\?]/g,a=/^\s*(['"]?)(.*?)(\1)\s*$/,s=new e(512),l=new e(512),u=new e(512);function c(t){return s.get(t)||s.set(t,d(t).map((function(t){return t.replace(a,"$2")})))}function d(t){return t.match(n)||[""]}function f(t){return"string"==typeof t&&t&&-1!==["'",'"'].indexOf(t.charAt(0))}function h(t){return!f(t)&&(function(t){return t.match(i)&&!t.match(r)}(t)||function(t){return o.test(t)}(t))}t.exports={Cache:e,split:d,normalizePath:c,setter:function(t){var e=c(t);return l.get(t)||l.set(t,(function(t,n){for(var r=0,i=e.length,o=t;r<i-1;){var a=e[r];if("__proto__"===a||"constructor"===a||"prototype"===a)return t;o=o[e[r++]]}o[e[r]]=n}))},getter:function(t,e){var n=c(t);return u.get(t)||u.set(t,(function(t){for(var r=0,i=n.length;r<i;){if(null==t&&e)return;t=t[n[r++]]}return t}))},join:function(t){return t.reduce((function(t,e){return t+(f(e)||r.test(e)?"["+e+"]":(t?".":"")+e)}),"")},forEach:function(t,e,n){!function(t,e,n){var r,i,o,a,s=t.length;for(i=0;i<s;i++)(r=t[i])&&(h(r)&&(r='"'+r+'"'),o=!(a=f(r))&&/^\d+$/.test(r),e.call(n,r,a,o,i,t))}(Array.isArray(t)?t:d(t),e,n)}}},7554:(t,e,n)=>{var r=n(7503),i=n(9486),o=n(7206),a=[0,2,3],s=[2,1,3];t.exports=function(t,e){t&&(i(t)||o(t))||(e=t||{},t=null);for(var n="string"==typeof(e="number"==typeof e?{count:e}:e||{}).type?e.type:"uint16",l="number"==typeof e.count?e.count:1,u=e.start||0,c=!1!==e.clockwise?a:s,d=c[0],f=c[1],h=c[2],p=6*l,m=t||new(r(n))(p),g=0,v=0;g<p;g+=6,v+=4){var y=g+u;m[y+0]=v+0,m[y+1]=v+1,m[y+2]=v+2,m[y+3]=v+d,m[y+4]=v+f,m[y+5]=v+h}return m}},1066:function(t,e,n){var r;!function(i){function o(t,e,n,r,i){this._listener=e,this._isOnce=n,this.context=r,this._signal=t,this._priority=i||0}function a(t,e){if("function"!=typeof t)throw new Error("listener is a required param of {fn}() and should be a Function.".replace("{fn}",e))}function s(){this._bindings=[],this._prevParams=null;var t=this;this.dispatch=function(){s.prototype.dispatch.apply(t,arguments)}}o.prototype={active:!0,params:null,execute:function(t){var e,n;return this.active&&this._listener&&(n=this.params?this.params.concat(t):t,e=this._listener.apply(this.context,n),this._isOnce&&this.detach()),e},detach:function(){return this.isBound()?this._signal.remove(this._listener,this.context):null},isBound:function(){return!!this._signal&&!!this._listener},isOnce:function(){return this._isOnce},getListener:function(){return this._listener},getSignal:function(){return this._signal},_destroy:function(){delete this._signal,delete this._listener,delete this.context},toString:function(){return"[SignalBinding isOnce:"+this._isOnce+", isBound:"+this.isBound()+", active:"+this.active+"]"}},s.prototype={VERSION:"1.0.0",memorize:!1,_shouldPropagate:!0,active:!0,_registerListener:function(t,e,n,r){var i,a=this._indexOfListener(t,n);if(-1!==a){if((i=this._bindings[a]).isOnce()!==e)throw new Error("You cannot add"+(e?"":"Once")+"() then add"+(e?"Once":"")+"() the same listener without removing the relationship first.")}else i=new o(this,t,e,n,r),this._addBinding(i);return this.memorize&&this._prevParams&&i.execute(this._prevParams),i},_addBinding:function(t){var e=this._bindings.length;do{--e}while(this._bindings[e]&&t._priority<=this._bindings[e]._priority);this._bindings.splice(e+1,0,t)},_indexOfListener:function(t,e){for(var n,r=this._bindings.length;r--;)if((n=this._bindings[r])._listener===t&&n.context===e)return r;return-1},has:function(t,e){return-1!==this._indexOfListener(t,e)},add:function(t,e,n){return a(t,"add"),this._registerListener(t,!1,e,n)},addOnce:function(t,e,n){return a(t,"addOnce"),this._registerListener(t,!0,e,n)},remove:function(t,e){a(t,"remove");var n=this._indexOfListener(t,e);return-1!==n&&(this._bindings[n]._destroy(),this._bindings.splice(n,1)),t},removeAll:function(){for(var t=this._bindings.length;t--;)this._bindings[t]._destroy();this._bindings.length=0},getNumListeners:function(){return this._bindings.length},halt:function(){this._shouldPropagate=!1},dispatch:function(t){if(this.active){var e,n=Array.prototype.slice.call(arguments),r=this._bindings.length;if(this.memorize&&(this._prevParams=n),r){e=this._bindings.slice(),this._shouldPropagate=!0;do{r--}while(e[r]&&this._shouldPropagate&&!1!==e[r].execute(n))}}},forget:function(){this._prevParams=null},dispose:function(){this.removeAll(),delete this._bindings,delete this._prevParams},toString:function(){return"[Signal active:"+this.active+" numListeners:"+this.getNumListeners()+"]"}};var l=s;l.Signal=s,void 0===(r=function(){return l}.call(e,n,e,t))||(t.exports=r)}()},8166:function(t){t.exports=function(){"use strict";var t=function(){var e=0,n=document.createElement("div");function r(t){return n.appendChild(t.dom),t}function i(t){for(var r=0;r<n.children.length;r++)n.children[r].style.display=r===t?"block":"none";e=t}n.style.cssText="position:fixed;top:0;left:0;cursor:pointer;opacity:0.9;z-index:10000",n.addEventListener("click",(function(t){t.preventDefault(),i(++e%n.children.length)}),!1);var o=(performance||Date).now(),a=o,s=0,l=r(new t.Panel("FPS","#0ff","#002")),u=r(new t.Panel("MS","#0f0","#020"));if(self.performance&&self.performance.memory)var c=r(new t.Panel("MB","#f08","#201"));return i(0),{REVISION:16,dom:n,addPanel:r,showPanel:i,begin:function(){o=(performance||Date).now()},end:function(){s++;var t=(performance||Date).now();if(u.update(t-o,200),a+1e3<=t&&(l.update(1e3*s/(t-a),100),a=t,s=0,c)){var e=performance.memory;c.update(e.usedJSHeapSize/1048576,e.jsHeapSizeLimit/1048576)}return t},update:function(){o=this.end()},domElement:n,setMode:i}};return t.Panel=function(t,e,n){var r=1/0,i=0,o=Math.round,a=o(window.devicePixelRatio||1),s=80*a,l=48*a,u=3*a,c=2*a,d=3*a,f=15*a,h=74*a,p=30*a,m=document.createElement("canvas");m.width=s,m.height=l,m.style.cssText="width:80px;height:48px";var g=m.getContext("2d");return g.font="bold "+9*a+"px Helvetica,Arial,sans-serif",g.textBaseline="top",g.fillStyle=n,g.fillRect(0,0,s,l),g.fillStyle=e,g.fillText(t,u,c),g.fillRect(d,f,h,p),g.fillStyle=n,g.globalAlpha=.9,g.fillRect(d,f,h,p),{dom:m,update:function(l,v){r=Math.min(r,l),i=Math.max(i,l),g.fillStyle=n,g.globalAlpha=1,g.fillRect(0,0,s,f),g.fillStyle=e,g.fillText(o(l)+" "+t+" ("+o(r)+"-"+o(i)+")",u,c),g.drawImage(m,d+a,f,h-a,p,d,f,h-a,p),g.fillRect(d+h-a,f,a,p),g.fillStyle=n,g.globalAlpha=.9,g.fillRect(d+h-a,f,a,o((1-l/v)*p))}}},t}()},4427:function(t,e){!function(t){"use strict";function e(t,e,n,r){var i,o=!1,a=0;function s(){i&&clearTimeout(i)}function l(){s(),o=!0}function u(){for(var l=arguments.length,u=new Array(l),c=0;c<l;c++)u[c]=arguments[c];var d=this,f=Date.now()-a;function h(){a=Date.now(),n.apply(d,u)}function p(){i=void 0}o||(r&&!i&&h(),s(),void 0===r&&f>t?h():!0!==e&&(i=setTimeout(r?p:h,void 0===r?t-f:t)))}return"boolean"!=typeof e&&(r=n,n=e,e=void 0),u.cancel=l,u}function n(t,n,r){return void 0===r?e(t,n,!1):e(t,r,!1!==n)}t.debounce=n,t.throttle=e,Object.defineProperty(t,"__esModule",{value:!0})}(e)},5714:t=>{const e=/[A-Z\xc0-\xd6\xd8-\xde]?[a-z\xdf-\xf6\xf8-\xff]+(?:['](?:d|ll|m|re|s|t|ve))?(?=[\xac\xb1\xd7\xf7\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\xbf\u2000-\u206f \t\x0b\f\xa0\ufeff\n\r\u2028\u2029\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000]|[A-Z\xc0-\xd6\xd8-\xde]|$)|(?:[A-Z\xc0-\xd6\xd8-\xde]|[^\ud800-\udfff\xac\xb1\xd7\xf7\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\xbf\u2000-\u206f \t\x0b\f\xa0\ufeff\n\r\u2028\u2029\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\d+\u2700-\u27bfa-z\xdf-\xf6\xf8-\xffA-Z\xc0-\xd6\xd8-\xde])+(?:['](?:D|LL|M|RE|S|T|VE))?(?=[\xac\xb1\xd7\xf7\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\xbf\u2000-\u206f \t\x0b\f\xa0\ufeff\n\r\u2028\u2029\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000]|[A-Z\xc0-\xd6\xd8-\xde](?:[a-z\xdf-\xf6\xf8-\xff]|[^\ud800-\udfff\xac\xb1\xd7\xf7\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\xbf\u2000-\u206f \t\x0b\f\xa0\ufeff\n\r\u2028\u2029\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\d+\u2700-\u27bfa-z\xdf-\xf6\xf8-\xffA-Z\xc0-\xd6\xd8-\xde])|$)|[A-Z\xc0-\xd6\xd8-\xde]?(?:[a-z\xdf-\xf6\xf8-\xff]|[^\ud800-\udfff\xac\xb1\xd7\xf7\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\xbf\u2000-\u206f \t\x0b\f\xa0\ufeff\n\r\u2028\u2029\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\d+\u2700-\u27bfa-z\xdf-\xf6\xf8-\xffA-Z\xc0-\xd6\xd8-\xde])+(?:['](?:d|ll|m|re|s|t|ve))?|[A-Z\xc0-\xd6\xd8-\xde]+(?:['](?:D|LL|M|RE|S|T|VE))?|\d*(?:1ST|2ND|3RD|(?![123])\dTH)(?=\b|[a-z_])|\d*(?:1st|2nd|3rd|(?![123])\dth)(?=\b|[A-Z_])|\d+|(?:[\u2700-\u27bf]|(?:\ud83c[\udde6-\uddff]){2}|[\ud800-\udbff][\udc00-\udfff])[\ufe0e\ufe0f]?(?:[\u0300-\u036f\ufe20-\ufe2f\u20d0-\u20ff]|\ud83c[\udffb-\udfff])?(?:\u200d(?:[^\ud800-\udfff]|(?:\ud83c[\udde6-\uddff]){2}|[\ud800-\udbff][\udc00-\udfff])[\ufe0e\ufe0f]?(?:[\u0300-\u036f\ufe20-\ufe2f\u20d0-\u20ff]|\ud83c[\udffb-\udfff])?)*/g,n=t=>t.match(e)||[],r=t=>t[0].toUpperCase()+t.slice(1),i=(t,e)=>n(t).join(e).toLowerCase(),o=t=>n(t).reduce(((t,e)=>`${t}${t?e[0].toUpperCase()+e.slice(1).toLowerCase():e.toLowerCase()}`),"");t.exports={words:n,upperFirst:r,camelCase:o,pascalCase:t=>r(o(t)),snakeCase:t=>i(t,"_"),kebabCase:t=>i(t,"-"),sentenceCase:t=>r(i(t," ")),titleCase:t=>n(t).map(r).join(" ")}},2981:t=>{function e(t,e){var n=t.length,r=new Array(n),i={},o=n,a=function(t){for(var e=new Map,n=0,r=t.length;n<r;n++){var i=t[n];e.has(i[0])||e.set(i[0],new Set),e.has(i[1])||e.set(i[1],new Set),e.get(i[0]).add(i[1])}return e}(e),s=function(t){for(var e=new Map,n=0,r=t.length;n<r;n++)e.set(t[n],n);return e}(t);for(e.forEach((function(t){if(!s.has(t[0])||!s.has(t[1]))throw new Error("Unknown node. There is an unknown node in the supplied edges.")}));o--;)i[o]||l(t[o],o,new Set);return r;function l(t,e,o){if(o.has(t)){var u;try{u=", node was:"+JSON.stringify(t)}catch(t){u=""}throw new Error("Cyclic dependency"+u)}if(!s.has(t))throw new Error("Found unknown node. Make sure to provided all involved nodes. Unknown node: "+JSON.stringify(t));if(!i[e]){i[e]=!0;var c=a.get(t)||new Set;if(e=(c=Array.from(c)).length){o.add(t);do{var d=c[--e];l(d,s.get(d),o)}while(e);o.delete(t)}r[--n]=t}}}t.exports=function(t){return e(function(t){for(var e=new Set,n=0,r=t.length;n<r;n++){var i=t[n];e.add(i[0]),e.add(i[1])}return Array.from(e)}(t),t)},t.exports.array=e},8712:function(t,e){!function(t){"use strict";function e(t){return t}class n{constructor(){this.observers_={}}on(t,e){let n=this.observers_[t];return n||(n=this.observers_[t]=[]),n.push({handler:e}),this}off(t,e){const n=this.observers_[t];return n&&(this.observers_[t]=n.filter((t=>t.handler!==e))),this}emit(t,e){const n=this.observers_[t];n&&n.forEach((t=>{t.handler(e)}))}}const r="tp";function i(t){return(e,n)=>[r,"-",t,"v",e?`_${e}`:"",n?`-${n}`:""].join("")}function o(t,n){return e(Object.keys(n).reduce(((e,r)=>{if(void 0===e)return;const i=(0,n[r])(t[r]);return i.succeeded?Object.assign(Object.assign({},e),{[r]:i.value}):void 0}),{}))}function a(t,e){return t.reduce(((t,n)=>{if(void 0===t)return;const r=e(n);return r.succeeded&&void 0!==r.value?[...t,r.value]:void 0}),[])}function s(t){return null!==t&&"object"==typeof t}function l(t){return e=>n=>{if(!e&&void 0===n)return{succeeded:!1,value:void 0};if(e&&void 0===n)return{succeeded:!0,value:void 0};const r=t(n);return void 0!==r?{succeeded:!0,value:r}:{succeeded:!1,value:void 0}}}function u(t){return{custom:e=>l(e)(t),boolean:l((t=>"boolean"==typeof t?t:void 0))(t),number:l((t=>"number"==typeof t?t:void 0))(t),string:l((t=>"string"==typeof t?t:void 0))(t),function:l((t=>"function"==typeof t?t:void 0))(t),constant:e=>l((t=>t===e?e:void 0))(t),raw:l((t=>t))(t),object:e=>l((t=>{if(s(t))return o(t,e)}))(t),array:e=>l((t=>{if(Array.isArray(t))return a(t,e)}))(t)}}const c={optional:u(!0),required:u(!1)};function d(t,e){const n=c.required.object(e)(t);return n.succeeded?n.value:void 0}class f{constructor(t){this.constraints=t}constrain(t){return this.constraints.reduce(((t,e)=>e.constrain(t)),t)}}function h(t){return e=>e.toFixed(Math.max(Math.min(t,20),0))}function p(t,e){var n,r;const i=e.ownerDocument.defaultView,o=e.getBoundingClientRect();return{x:t.pageX-((null!==(n=i&&i.scrollX)&&void 0!==n?n:0)+o.left),y:t.pageY-((null!==(r=i&&i.scrollY)&&void 0!==r?r:0)+o.top)}}h(0);class m{constructor(t){this.lastTouch_=null,this.onDocumentMouseMove_=this.onDocumentMouseMove_.bind(this),this.onDocumentMouseUp_=this.onDocumentMouseUp_.bind(this),this.onMouseDown_=this.onMouseDown_.bind(this),this.onTouchEnd_=this.onTouchEnd_.bind(this),this.onTouchMove_=this.onTouchMove_.bind(this),this.onTouchStart_=this.onTouchStart_.bind(this),this.elem_=t,this.emitter=new n,t.addEventListener("touchstart",this.onTouchStart_,{passive:!1}),t.addEventListener("touchmove",this.onTouchMove_,{passive:!0}),t.addEventListener("touchend",this.onTouchEnd_),t.addEventListener("mousedown",this.onMouseDown_)}computePosition_(t){const e=this.elem_.getBoundingClientRect();return{bounds:{width:e.width,height:e.height},point:t?{x:t.x,y:t.y}:null}}onMouseDown_(t){var e;t.preventDefault(),null===(e=t.currentTarget)||void 0===e||e.focus();const n=this.elem_.ownerDocument;n.addEventListener("mousemove",this.onDocumentMouseMove_),n.addEventListener("mouseup",this.onDocumentMouseUp_),this.emitter.emit("down",{altKey:t.altKey,data:this.computePosition_(p(t,this.elem_)),sender:this,shiftKey:t.shiftKey})}onDocumentMouseMove_(t){this.emitter.emit("move",{altKey:t.altKey,data:this.computePosition_(p(t,this.elem_)),sender:this,shiftKey:t.shiftKey})}onDocumentMouseUp_(t){const e=this.elem_.ownerDocument;e.removeEventListener("mousemove",this.onDocumentMouseMove_),e.removeEventListener("mouseup",this.onDocumentMouseUp_),this.emitter.emit("up",{altKey:t.altKey,data:this.computePosition_(p(t,this.elem_)),sender:this,shiftKey:t.shiftKey})}onTouchStart_(t){t.preventDefault();const e=t.targetTouches.item(0),n=this.elem_.getBoundingClientRect();this.emitter.emit("down",{altKey:t.altKey,data:this.computePosition_(e?{x:e.clientX-n.left,y:e.clientY-n.top}:void 0),sender:this,shiftKey:t.shiftKey}),this.lastTouch_=e}onTouchMove_(t){const e=t.targetTouches.item(0),n=this.elem_.getBoundingClientRect();this.emitter.emit("move",{altKey:t.altKey,data:this.computePosition_(e?{x:e.clientX-n.left,y:e.clientY-n.top}:void 0),sender:this,shiftKey:t.shiftKey}),this.lastTouch_=e}onTouchEnd_(t){var e;const n=null!==(e=t.targetTouches.item(0))&&void 0!==e?e:this.lastTouch_,r=this.elem_.getBoundingClientRect();this.emitter.emit("up",{altKey:t.altKey,data:this.computePosition_(n?{x:n.clientX-r.left,y:n.clientY-r.top}:void 0),sender:this,shiftKey:t.shiftKey})}}function g(t){return[t[0],t[1],t[2]]}function v(t,e){const n=h("float"===e?2:0);return`rgb(${g(t.getComponents("rgb",e)).map((t=>n(t))).join(", ")})`}function y(t){return e=>v(e,t)}function b(t,e){const n=h(2),r=h("float"===e?2:0);return`rgba(${t.getComponents("rgb",e).map(((t,e)=>(3===e?n:r)(t))).join(", ")})`}function _(t){return e=>b(e,t)}function w(t,e){const n=h("float"===e?2:0),r=["r","g","b"];return`{${g(t.getComponents("rgb",e)).map(((t,e)=>`${r[e]}: ${n(t)}`)).join(", ")}}`}function A(t){return e=>w(e,t)}function E(t,e){const n=h(2),r=h("float"===e?2:0),i=["r","g","b","a"];return`{${t.getComponents("rgb",e).map(((t,e)=>{const o=3===e?n:r;return`${i[e]}: ${o(t)}`})).join(", ")}}`}function x(t){return e=>E(e,t)}["int","float"].reduce(((t,e)=>[...t,{format:{alpha:!1,mode:"rgb",notation:"func",type:e},stringifier:y(e)},{format:{alpha:!0,mode:"rgb",notation:"func",type:e},stringifier:_(e)},{format:{alpha:!1,mode:"rgb",notation:"object",type:e},stringifier:A(e)},{format:{alpha:!0,mode:"rgb",notation:"object",type:e},stringifier:x(e)}]),[]);const S=i("ctn"),T=i("btn");class C{constructor(t,e){this.onDrop_=this.onDrop_.bind(this),this.element=t.createElement("div"),this.container=t.createElement("div"),this.container.style.height=`calc(var(--bld-us) * ${e.lineCount})`,this.container.classList.add(S()),this.element.appendChild(this.container),this.fileIconEl_=t.createElement("div"),this.fileIconEl_.classList.add(S("icon")),this.container.appendChild(this.fileIconEl_),this.textEl_=t.createElement("span"),this.textEl_.classList.add(S("text")),this.button=t.createElement("button"),this.button.classList.add(T("b")),this.button.innerHTML="Delete",this.button.style.display="none",this.element.appendChild(this.button),this.element.addEventListener("drop",this.onDrop_),this.element.addEventListener("dragover",this.onDragOver_),this.value_=e.value,this.value_.emitter.on("change",this.onValueChange_.bind(this)),e.viewProps.bindClassModifiers(this.element),e.viewProps.handleDispose((()=>{console.log("TODO: dispose view")}))}onDragOver_(t){t.preventDefault()}onDrop_(t){if(t instanceof DragEvent&&(t.preventDefault(),t.dataTransfer&&t.dataTransfer.files)){const e=t.dataTransfer.files;if(1==e.length){const t=e.item(0);this.value_.setRawValue(t)}}}onValueChange_(){const t=this.value_.rawValue;t?(this.textEl_.textContent=t.name,this.container.appendChild(this.textEl_),this.container.contains(this.fileIconEl_)&&this.container.removeChild(this.fileIconEl_),this.button.style.display="block",this.container.style.border="unset"):(this.textEl_.textContent="",this.container.appendChild(this.fileIconEl_),this.container.removeChild(this.textEl_),this.button.style.display="none",this.container.style.border="1px dashed #717070")}}class I{constructor(t,e){this.onContainerClick_=this.onContainerClick_.bind(this),this.onButtonClick_=this.onButtonClick_.bind(this),this.value=e.value,this.filetypes=e.filetypes,this.viewProps=e.viewProps,this.viewProps.handleDispose((()=>{})),this.view=new C(t,{value:this.value,viewProps:this.viewProps,lineCount:e.lineCount}),new m(this.view.container).emitter.on("down",this.onContainerClick_),new m(this.view.button).emitter.on("down",this.onButtonClick_)}onContainerClick_(t){const e=this.filetypes,n=document.createElement("input");n.setAttribute("type","file"),n.style.opacity="0",n.style.position="fixed",n.style.pointerEvents="none",document.body.appendChild(n),n.addEventListener("input",(t=>{var r;if(n.files&&n.files.length>0){const t=n.files[0],i="."+(null===(r=t.name.split(".").pop())||void 0===r?void 0:r.toLowerCase());if(e&&e.length>0&&!e.includes(i)&&i)return;this.value.setRawValue(t)}}),{once:!0}),n.click(),document.body.removeChild(n)}onButtonClick_(t){this.value.rawValue&&this.value.setRawValue(null)}}const k=[{id:"file-input",type:"input",css:'.tp-ctnv{-webkit-appearance:none;-moz-appearance:none;appearance:none;background-color:rgba(0,0,0,0);border-width:0;font-family:inherit;font-size:inherit;font-weight:inherit;margin:0;outline:none;padding:0}.tp-ctnv{background-color:var(--in-bg);border-radius:var(--elm-br);box-sizing:border-box;color:var(--in-fg);font-family:inherit;height:var(--bld-us);line-height:var(--bld-us);min-width:0;width:100%}.tp-ctnv:hover{background-color:var(--in-bg-h)}.tp-ctnv:focus{background-color:var(--in-bg-f)}.tp-ctnv:active{background-color:var(--in-bg-a)}.tp-ctnv:disabled{opacity:.5}.tp-ctnv{cursor:pointer;display:flex;justify-content:center;align-items:center;overflow:hidden;position:relative;border:1px dashed #717070;border-radius:5px}.tp-ctnv.tp-v-disabled{opacity:.5}.tp-ctnv_text{color:var(--in-fg);bottom:2px;display:inline-block;font-size:.9em;height:-moz-max-content;height:max-content;line-height:.9;margin:.2rem;max-height:100%;max-width:100%;opacity:.5;position:absolute;right:2px;text-align:right;white-space:normal;width:-moz-max-content;width:max-content;word-wrap:break-word}.tp-ctnv_frac{background-color:var(--in-fg);border-radius:1px;height:2px;left:50%;margin-top:-1px;position:absolute;top:50%}.tp-ctnv_icon{box-sizing:border-box;position:relative;display:block;transform:scale(var(--ggs, 1));width:16px;height:6px;border:2px solid;border-top:0;border-bottom-left-radius:2px;border-bottom-right-radius:2px;margin-top:8px;opacity:.5}.tp-ctnv_icon::after{content:"";display:block;box-sizing:border-box;position:absolute;width:8px;height:8px;border-left:2px solid;border-top:2px solid;transform:rotate(45deg);left:2px;bottom:4px}.tp-ctnv_icon::before{content:"";display:block;box-sizing:border-box;position:absolute;border-radius:3px;width:2px;height:10px;background:currentColor;left:5px;bottom:3px}.tp-btnv_b{margin-top:10px}',accept(t,e){if("string"!=typeof t)return null;const n=c,r=d(e,{view:n.required.constant("file-input"),lineCount:n.optional.number,filetypes:n.optional.array(n.required.string)});return r?{initialValue:t,params:r}:null},binding:{reader:t=>t=>t instanceof File?t:null,constraint:t=>new f([]),writer:t=>(t,e)=>{t.write(e)}},controller(t){var e;const n=3;return new I(t.document,{value:t.value,viewProps:t.viewProps,lineCount:null!==(e=t.params.lineCount)&&void 0!==e?e:n,filetypes:t.params.filetypes})}}];t.plugins=k,Object.defineProperty(t,"__esModule",{value:!0})}(e)},4100:function(t,e){!function(t){"use strict";class e{constructor(t){const[e,n]=t.split("-"),r=e.split(".");this.major=parseInt(r[0],10),this.minor=parseInt(r[1],10),this.patch=parseInt(r[2],10),this.prerelease=null!=n?n:null}toString(){const t=[this.major,this.minor,this.patch].join(".");return null!==this.prerelease?[t,this.prerelease].join("-"):t}}class n{constructor(t){this.controller_=t}get element(){return this.controller_.view.element}get disabled(){return this.controller_.viewProps.get("disabled")}set disabled(t){this.controller_.viewProps.set("disabled",t)}get hidden(){return this.controller_.viewProps.get("hidden")}set hidden(t){this.controller_.viewProps.set("hidden",t)}dispose(){this.controller_.viewProps.set("disposed",!0)}}class r{constructor(t){this.target=t}}class i extends r{constructor(t,e,n,r){super(t),this.value=e,this.presetKey=n,this.last=null==r||r}}class o extends r{constructor(t,e,n){super(t),this.value=e,this.presetKey=n}}class a extends r{constructor(t,e){super(t),this.expanded=e}}class s extends r{constructor(t,e){super(t),this.index=e}}function l(t){return t}function u(t){return null==t}function c(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}function d(t,e){let n=t;do{const t=Object.getOwnPropertyDescriptor(n,e);if(t&&(void 0!==t.set||!0===t.writable))return!0;n=Object.getPrototypeOf(n)}while(null!==n);return!1}const f={alreadydisposed:()=>"View has been already disposed",invalidparams:t=>`Invalid parameters for '${t.name}'`,nomatchingcontroller:t=>`No matching controller for '${t.key}'`,nomatchingview:t=>`No matching view for '${JSON.stringify(t.params)}'`,notbindable:()=>"Value is not bindable",propertynotfound:t=>`Property '${t.name}' not found`,shouldneverhappen:()=>"This error should never happen"};class h{static alreadyDisposed(){return new h({type:"alreadydisposed"})}static notBindable(){return new h({type:"notbindable"})}static propertyNotFound(t){return new h({type:"propertynotfound",context:{name:t}})}static shouldNeverHappen(){return new h({type:"shouldneverhappen"})}constructor(t){var e;this.message=null!==(e=f[t.type](l(t.context)))&&void 0!==e?e:"Unexpected error",this.name=this.constructor.name,this.stack=new Error(this.message).stack,this.type=t.type}}class p{constructor(t,e,n){this.obj_=t,this.key_=e,this.presetKey_=null!=n?n:e}static isBindable(t){return null!==t&&("object"==typeof t||"function"==typeof t)}get key(){return this.key_}get presetKey(){return this.presetKey_}read(){return this.obj_[this.key_]}write(t){this.obj_[this.key_]=t}writeProperty(t,e){const n=this.read();if(!p.isBindable(n))throw h.notBindable();if(!(t in n))throw h.propertyNotFound(t);n[t]=e}}class m extends n{get label(){return this.controller_.props.get("label")}set label(t){this.controller_.props.set("label",t)}get title(){var t;return null!==(t=this.controller_.valueController.props.get("title"))&&void 0!==t?t:""}set title(t){this.controller_.valueController.props.set("title",t)}on(t,e){const n=e.bind(this);return this.controller_.valueController.emitter.on(t,(()=>{n(new r(this))})),this}}class g{constructor(){this.observers_={}}on(t,e){let n=this.observers_[t];return n||(n=this.observers_[t]=[]),n.push({handler:e}),this}off(t,e){const n=this.observers_[t];return n&&(this.observers_[t]=n.filter((t=>t.handler!==e))),this}emit(t,e){const n=this.observers_[t];n&&n.forEach((t=>{t.handler(e)}))}}const v="tp";function y(t){return(e,n)=>[v,"-",t,"v",e?`_${e}`:"",n?`-${n}`:""].join("")}function b(t,e){return n=>e(t(n))}function _(t){return t.rawValue}function w(t,e){t.emitter.on("change",b(_,e)),e(t.rawValue)}function A(t,e,n){w(t.value(e),n)}function E(t,e,n){n?t.classList.add(e):t.classList.remove(e)}function x(t,e){return n=>{E(t,e,n)}}function S(t,e){w(t,(t=>{e.textContent=null!=t?t:""}))}const T=y("btn");class C{constructor(t,e){this.element=t.createElement("div"),this.element.classList.add(T()),e.viewProps.bindClassModifiers(this.element);const n=t.createElement("button");n.classList.add(T("b")),e.viewProps.bindDisabled(n),this.element.appendChild(n),this.buttonElement=n;const r=t.createElement("div");r.classList.add(T("t")),S(e.props.value("title"),r),this.buttonElement.appendChild(r)}}class I{constructor(t,e){this.emitter=new g,this.onClick_=this.onClick_.bind(this),this.props=e.props,this.viewProps=e.viewProps,this.view=new C(t,{props:this.props,viewProps:this.viewProps}),this.view.buttonElement.addEventListener("click",this.onClick_)}onClick_(){this.emitter.emit("click",{sender:this})}}class k{constructor(t,e){var n;this.constraint_=null==e?void 0:e.constraint,this.equals_=null!==(n=null==e?void 0:e.equals)&&void 0!==n?n:(t,e)=>t===e,this.emitter=new g,this.rawValue_=t}get constraint(){return this.constraint_}get rawValue(){return this.rawValue_}set rawValue(t){this.setRawValue(t,{forceEmit:!1,last:!0})}setRawValue(t,e){const n=null!=e?e:{forceEmit:!1,last:!0},r=this.constraint_?this.constraint_.constrain(t):t,i=this.rawValue_;(!this.equals_(i,r)||n.forceEmit)&&(this.emitter.emit("beforechange",{sender:this}),this.rawValue_=r,this.emitter.emit("change",{options:n,previousRawValue:i,rawValue:r,sender:this}))}}class P{constructor(t){this.emitter=new g,this.value_=t}get rawValue(){return this.value_}set rawValue(t){this.setRawValue(t,{forceEmit:!1,last:!0})}setRawValue(t,e){const n=null!=e?e:{forceEmit:!1,last:!0},r=this.value_;(r!==t||n.forceEmit)&&(this.emitter.emit("beforechange",{sender:this}),this.value_=t,this.emitter.emit("change",{options:n,previousRawValue:r,rawValue:this.value_,sender:this}))}}function R(t,e){const n=null==e?void 0:e.constraint,r=null==e?void 0:e.equals;return n||r?new k(t,e):new P(t)}class O{constructor(t){this.emitter=new g,this.valMap_=t;for(const t in this.valMap_)this.valMap_[t].emitter.on("change",(()=>{this.emitter.emit("change",{key:t,sender:this})}))}static createCore(t){return Object.keys(t).reduce(((e,n)=>Object.assign(e,{[n]:R(t[n])})),{})}static fromObject(t){const e=this.createCore(t);return new O(e)}get(t){return this.valMap_[t].rawValue}set(t,e){this.valMap_[t].rawValue=e}value(t){return this.valMap_[t]}}function M(t,e){return l(Object.keys(e).reduce(((n,r)=>{if(void 0===n)return;const i=(0,e[r])(t[r]);return i.succeeded?Object.assign(Object.assign({},n),{[r]:i.value}):void 0}),{}))}function L(t,e){return t.reduce(((t,n)=>{if(void 0===t)return;const r=e(n);return r.succeeded&&void 0!==r.value?[...t,r.value]:void 0}),[])}function D(t){return null!==t&&"object"==typeof t}function N(t){return e=>n=>{if(!e&&void 0===n)return{succeeded:!1,value:void 0};if(e&&void 0===n)return{succeeded:!0,value:void 0};const r=t(n);return void 0!==r?{succeeded:!0,value:r}:{succeeded:!1,value:void 0}}}function B(t){return{custom:e=>N(e)(t),boolean:N((t=>"boolean"==typeof t?t:void 0))(t),number:N((t=>"number"==typeof t?t:void 0))(t),string:N((t=>"string"==typeof t?t:void 0))(t),function:N((t=>"function"==typeof t?t:void 0))(t),constant:e=>N((t=>t===e?e:void 0))(t),raw:N((t=>t))(t),object:e=>N((t=>{if(D(t))return M(t,e)}))(t),array:e=>N((t=>{if(Array.isArray(t))return L(t,e)}))(t)}}const j={optional:B(!0),required:B(!1)};function z(t,e){const n=j.required.object(e)(t);return n.succeeded?n.value:void 0}function F(t){console.warn([`Missing '${t.key}' of ${t.target} in ${t.place}.`,"Please rebuild plugins with the latest core package."].join(" "))}function U(t){return t&&t.parentElement&&t.parentElement.removeChild(t),null}class q{constructor(t){this.value_=t}static create(t){return[new q(t),(e,n)=>{t.setRawValue(e,n)}]}get emitter(){return this.value_.emitter}get rawValue(){return this.value_.rawValue}}const G=y("");function H(t,e){return x(t,G(void 0,e))}class V extends O{constructor(t){var e;super(t),this.onDisabledChange_=this.onDisabledChange_.bind(this),this.onParentChange_=this.onParentChange_.bind(this),this.onParentGlobalDisabledChange_=this.onParentGlobalDisabledChange_.bind(this),[this.globalDisabled_,this.setGlobalDisabled_]=q.create(R(this.getGlobalDisabled_())),this.value("disabled").emitter.on("change",this.onDisabledChange_),this.value("parent").emitter.on("change",this.onParentChange_),null===(e=this.get("parent"))||void 0===e||e.globalDisabled.emitter.on("change",this.onParentGlobalDisabledChange_)}static create(t){var e,n,r;const i=null!=t?t:{};return new V(O.createCore({disabled:null!==(e=i.disabled)&&void 0!==e&&e,disposed:!1,hidden:null!==(n=i.hidden)&&void 0!==n&&n,parent:null!==(r=i.parent)&&void 0!==r?r:null}))}get globalDisabled(){return this.globalDisabled_}bindClassModifiers(t){w(this.globalDisabled_,H(t,"disabled")),A(this,"hidden",H(t,"hidden"))}bindDisabled(t){w(this.globalDisabled_,(e=>{t.disabled=e}))}bindTabIndex(t){w(this.globalDisabled_,(e=>{t.tabIndex=e?-1:0}))}handleDispose(t){this.value("disposed").emitter.on("change",(e=>{e&&t()}))}getGlobalDisabled_(){const t=this.get("parent");return!!t&&t.globalDisabled.rawValue||this.get("disabled")}updateGlobalDisabled_(){this.setGlobalDisabled_(this.getGlobalDisabled_())}onDisabledChange_(){this.updateGlobalDisabled_()}onParentGlobalDisabledChange_(){this.updateGlobalDisabled_()}onParentChange_(t){var e;const n=t.previousRawValue;null==n||n.globalDisabled.emitter.off("change",this.onParentGlobalDisabledChange_),null===(e=this.get("parent"))||void 0===e||e.globalDisabled.emitter.on("change",this.onParentGlobalDisabledChange_),this.updateGlobalDisabled_()}}function Q(){return["veryfirst","first","last","verylast"]}const W=y(""),Y={veryfirst:"vfst",first:"fst",last:"lst",verylast:"vlst"};class K{constructor(t){this.parent_=null,this.blade=t.blade,this.view=t.view,this.viewProps=t.viewProps;const e=this.view.element;this.blade.value("positions").emitter.on("change",(()=>{Q().forEach((t=>{e.classList.remove(W(void 0,Y[t]))})),this.blade.get("positions").forEach((t=>{e.classList.add(W(void 0,Y[t]))}))})),this.viewProps.handleDispose((()=>{U(e)}))}get parent(){return this.parent_}set parent(t){this.parent_=t,"parent"in this.viewProps.valMap_?this.viewProps.set("parent",this.parent_?this.parent_.viewProps:null):F({key:"parent",target:V.name,place:"BladeController.parent"})}}const X="http://www.w3.org/2000/svg";function $(t){t.offsetHeight}function Z(t,e){const n=t.style.transition;t.style.transition="none",e(),t.style.transition=n}function J(t){return void 0!==t.ontouchstart}function tt(){return globalThis}function et(){return l(tt()).document}function nt(t){const e=t.ownerDocument.defaultView;return e&&"document"in e?t.getContext("2d",{willReadFrequently:!0}):null}const rt={check:'<path d="M2 8l4 4l8 -8"/>',dropdown:'<path d="M5 7h6l-3 3 z"/>',p2dpad:'<path d="M8 4v8"/><path d="M4 8h8"/><circle cx="12" cy="12" r="1.2"/>'};function it(t,e){const n=t.createElementNS(X,"svg");return n.innerHTML=rt[e],n}function ot(t,e,n){t.insertBefore(e,t.children[n])}function at(t){t.parentElement&&t.parentElement.removeChild(t)}function st(t){for(;t.children.length>0;)t.removeChild(t.children[0])}function lt(t){for(;t.childNodes.length>0;)t.removeChild(t.childNodes[0])}function ut(t){return t.relatedTarget?l(t.relatedTarget):"explicitOriginalTarget"in t?t.explicitOriginalTarget:null}const ct=y("lbl");function dt(t,e){const n=t.createDocumentFragment();return e.split("\n").map((e=>t.createTextNode(e))).forEach(((e,r)=>{r>0&&n.appendChild(t.createElement("br")),n.appendChild(e)})),n}class ft{constructor(t,e){this.element=t.createElement("div"),this.element.classList.add(ct()),e.viewProps.bindClassModifiers(this.element);const n=t.createElement("div");n.classList.add(ct("l")),A(e.props,"label",(e=>{u(e)?this.element.classList.add(ct(void 0,"nol")):(this.element.classList.remove(ct(void 0,"nol")),lt(n),n.appendChild(dt(t,e)))})),this.element.appendChild(n),this.labelElement=n;const r=t.createElement("div");r.classList.add(ct("v")),this.element.appendChild(r),this.valueElement=r}}class ht extends K{constructor(t,e){const n=e.valueController.viewProps;super(Object.assign(Object.assign({},e),{view:new ft(t,{props:e.props,viewProps:n}),viewProps:n})),this.props=e.props,this.valueController=e.valueController,this.view.valueElement.appendChild(this.valueController.view.element)}}const pt={id:"button",type:"blade",accept(t){const e=j,n=z(t,{title:e.required.string,view:e.required.constant("button"),label:e.optional.string});return n?{params:n}:null},controller:t=>new ht(t.document,{blade:t.blade,props:O.fromObject({label:t.params.label}),valueController:new I(t.document,{props:O.fromObject({title:t.params.title}),viewProps:t.viewProps})}),api:t=>t.controller instanceof ht&&t.controller.valueController instanceof I?new m(t.controller):null};class mt extends K{constructor(t){super(t),this.value=t.value}}function gt(){return new O({positions:R([],{equals:c})})}class vt extends O{constructor(t){super(t)}static create(t){const e={completed:!0,expanded:t,expandedHeight:null,shouldFixHeight:!1,temporaryExpanded:null},n=O.createCore(e);return new vt(n)}get styleExpanded(){var t;return null!==(t=this.get("temporaryExpanded"))&&void 0!==t?t:this.get("expanded")}get styleHeight(){if(!this.styleExpanded)return"0";const t=this.get("expandedHeight");return this.get("shouldFixHeight")&&!u(t)?`${t}px`:"auto"}bindExpandedClass(t,e){const n=()=>{this.styleExpanded?t.classList.add(e):t.classList.remove(e)};A(this,"expanded",n),A(this,"temporaryExpanded",n)}cleanUpTransition(){this.set("shouldFixHeight",!1),this.set("expandedHeight",null),this.set("completed",!0)}}function yt(t,e){let n=0;return Z(e,(()=>{t.set("expandedHeight",null),t.set("temporaryExpanded",!0),$(e),n=e.clientHeight,t.set("temporaryExpanded",null),$(e)})),n}function bt(t,e){e.style.height=t.styleHeight}function _t(t,e){t.value("expanded").emitter.on("beforechange",(()=>{if(t.set("completed",!1),u(t.get("expandedHeight"))){const n=yt(t,e);n>0&&t.set("expandedHeight",n)}t.set("shouldFixHeight",!0),$(e)})),t.emitter.on("change",(()=>{bt(t,e)})),bt(t,e),e.addEventListener("transitionend",(e=>{"height"===e.propertyName&&t.cleanUpTransition()}))}class wt extends n{constructor(t,e){super(t),this.rackApi_=e}}function At(t,e){return t.addBlade(Object.assign(Object.assign({},e),{view:"button"}))}function Et(t,e){return t.addBlade(Object.assign(Object.assign({},e),{view:"folder"}))}function xt(t,e){const n=null!=e?e:{};return t.addBlade(Object.assign(Object.assign({},n),{view:"separator"}))}function St(t,e){return t.addBlade(Object.assign(Object.assign({},e),{view:"tab"}))}class Tt{constructor(t){this.emitter=new g,this.items_=[],this.cache_=new Set,this.onSubListAdd_=this.onSubListAdd_.bind(this),this.onSubListRemove_=this.onSubListRemove_.bind(this),this.extract_=t}get items(){return this.items_}allItems(){return Array.from(this.cache_)}find(t){for(const e of this.allItems())if(t(e))return e;return null}includes(t){return this.cache_.has(t)}add(t,e){if(this.includes(t))throw h.shouldNeverHappen();const n=void 0!==e?e:this.items_.length;this.items_.splice(n,0,t),this.cache_.add(t);const r=this.extract_(t);r&&(r.emitter.on("add",this.onSubListAdd_),r.emitter.on("remove",this.onSubListRemove_),r.allItems().forEach((t=>{this.cache_.add(t)}))),this.emitter.emit("add",{index:n,item:t,root:this,target:this})}remove(t){const e=this.items_.indexOf(t);if(e<0)return;this.items_.splice(e,1),this.cache_.delete(t);const n=this.extract_(t);n&&(n.emitter.off("add",this.onSubListAdd_),n.emitter.off("remove",this.onSubListRemove_)),this.emitter.emit("remove",{index:e,item:t,root:this,target:this})}onSubListAdd_(t){this.cache_.add(t.item),this.emitter.emit("add",{index:t.index,item:t.item,root:this,target:t.target})}onSubListRemove_(t){this.cache_.delete(t.item),this.emitter.emit("remove",{index:t.index,item:t.item,root:this,target:t.target})}}class Ct extends n{constructor(t){super(t),this.onBindingChange_=this.onBindingChange_.bind(this),this.emitter_=new g,this.controller_.binding.emitter.on("change",this.onBindingChange_)}get label(){return this.controller_.props.get("label")}set label(t){this.controller_.props.set("label",t)}on(t,e){const n=e.bind(this);return this.emitter_.on(t,(t=>{n(t.event)})),this}refresh(){this.controller_.binding.read()}onBindingChange_(t){const e=t.sender.target.read();this.emitter_.emit("change",{event:new i(this,l(e),this.controller_.binding.target.presetKey,t.options.last)})}}class It extends ht{constructor(t,e){super(t,e),this.binding=e.binding}}class kt extends n{constructor(t){super(t),this.onBindingUpdate_=this.onBindingUpdate_.bind(this),this.emitter_=new g,this.controller_.binding.emitter.on("update",this.onBindingUpdate_)}get label(){return this.controller_.props.get("label")}set label(t){this.controller_.props.set("label",t)}on(t,e){const n=e.bind(this);return this.emitter_.on(t,(t=>{n(t.event)})),this}refresh(){this.controller_.binding.read()}onBindingUpdate_(t){const e=t.sender.target.read();this.emitter_.emit("update",{event:new o(this,l(e),this.controller_.binding.target.presetKey)})}}class Pt extends ht{constructor(t,e){super(t,e),this.binding=e.binding,this.viewProps.bindDisabled(this.binding.ticker),this.viewProps.handleDispose((()=>{this.binding.dispose()}))}}function Rt(t){return t instanceof Lt?t.apiSet_:t instanceof wt?t.rackApi_.apiSet_:null}function Ot(t,e){const n=t.find((t=>t.controller_===e));if(!n)throw h.shouldNeverHappen();return n}function Mt(t,e,n){if(!p.isBindable(t))throw h.notBindable();return new p(t,e,n)}class Lt extends n{constructor(t,e){super(t),this.onRackAdd_=this.onRackAdd_.bind(this),this.onRackRemove_=this.onRackRemove_.bind(this),this.onRackInputChange_=this.onRackInputChange_.bind(this),this.onRackMonitorUpdate_=this.onRackMonitorUpdate_.bind(this),this.emitter_=new g,this.apiSet_=new Tt(Rt),this.pool_=e;const n=this.controller_.rack;n.emitter.on("add",this.onRackAdd_),n.emitter.on("remove",this.onRackRemove_),n.emitter.on("inputchange",this.onRackInputChange_),n.emitter.on("monitorupdate",this.onRackMonitorUpdate_),n.children.forEach((t=>{this.setUpApi_(t)}))}get children(){return this.controller_.rack.children.map((t=>Ot(this.apiSet_,t)))}addInput(t,e,n){const r=null!=n?n:{},i=this.controller_.view.element.ownerDocument,o=this.pool_.createInput(i,Mt(t,e,r.presetKey),r),a=new Ct(o);return this.add(a,r.index)}addMonitor(t,e,n){const r=null!=n?n:{},i=this.controller_.view.element.ownerDocument,o=this.pool_.createMonitor(i,Mt(t,e),r),a=new kt(o);return l(this.add(a,r.index))}addFolder(t){return Et(this,t)}addButton(t){return At(this,t)}addSeparator(t){return xt(this,t)}addTab(t){return St(this,t)}add(t,e){this.controller_.rack.add(t.controller_,e);const n=this.apiSet_.find((e=>e.controller_===t.controller_));return n&&this.apiSet_.remove(n),this.apiSet_.add(t),t}remove(t){this.controller_.rack.remove(t.controller_)}addBlade(t){const e=this.controller_.view.element.ownerDocument,n=this.pool_.createBlade(e,t),r=this.pool_.createBladeApi(n);return this.add(r,t.index)}on(t,e){const n=e.bind(this);return this.emitter_.on(t,(t=>{n(t.event)})),this}setUpApi_(t){this.apiSet_.find((e=>e.controller_===t))||this.apiSet_.add(this.pool_.createBladeApi(t))}onRackAdd_(t){this.setUpApi_(t.bladeController)}onRackRemove_(t){if(t.isRoot){const e=Ot(this.apiSet_,t.bladeController);this.apiSet_.remove(e)}}onRackInputChange_(t){const e=t.bladeController;if(e instanceof It){const n=Ot(this.apiSet_,e),r=e.binding;this.emitter_.emit("change",{event:new i(n,l(r.target.read()),r.target.presetKey,t.options.last)})}else if(e instanceof mt){const n=Ot(this.apiSet_,e);this.emitter_.emit("change",{event:new i(n,e.value.rawValue,void 0,t.options.last)})}}onRackMonitorUpdate_(t){if(!(t.bladeController instanceof Pt))throw h.shouldNeverHappen();const e=Ot(this.apiSet_,t.bladeController),n=t.bladeController.binding;this.emitter_.emit("update",{event:new o(e,l(n.target.read()),n.target.presetKey)})}}class Dt extends wt{constructor(t,e){super(t,new Lt(t.rackController,e)),this.emitter_=new g,this.controller_.foldable.value("expanded").emitter.on("change",(t=>{this.emitter_.emit("fold",{event:new a(this,t.sender.rawValue)})})),this.rackApi_.on("change",(t=>{this.emitter_.emit("change",{event:t})})),this.rackApi_.on("update",(t=>{this.emitter_.emit("update",{event:t})}))}get expanded(){return this.controller_.foldable.get("expanded")}set expanded(t){this.controller_.foldable.set("expanded",t)}get title(){return this.controller_.props.get("title")}set title(t){this.controller_.props.set("title",t)}get children(){return this.rackApi_.children}addInput(t,e,n){return this.rackApi_.addInput(t,e,n)}addMonitor(t,e,n){return this.rackApi_.addMonitor(t,e,n)}addFolder(t){return this.rackApi_.addFolder(t)}addButton(t){return this.rackApi_.addButton(t)}addSeparator(t){return this.rackApi_.addSeparator(t)}addTab(t){return this.rackApi_.addTab(t)}add(t,e){return this.rackApi_.add(t,e)}remove(t){this.rackApi_.remove(t)}addBlade(t){return this.rackApi_.addBlade(t)}on(t,e){const n=e.bind(this);return this.emitter_.on(t,(t=>{n(t.event)})),this}}class Nt extends K{constructor(t){super({blade:t.blade,view:t.view,viewProps:t.rackController.viewProps}),this.rackController=t.rackController}}class Bt{constructor(t,e){const n=y(e.viewName);this.element=t.createElement("div"),this.element.classList.add(n()),e.viewProps.bindClassModifiers(this.element)}}function jt(t,e){for(let n=0;n<t.length;n++){const r=t[n];if(r instanceof It&&r.binding===e)return r}return null}function zt(t,e){for(let n=0;n<t.length;n++){const r=t[n];if(r instanceof Pt&&r.binding===e)return r}return null}function Ft(t,e){for(let n=0;n<t.length;n++){const r=t[n];if(r instanceof mt&&r.value===e)return r}return null}function Ut(t){return t instanceof Ht?t.rack:t instanceof Nt?t.rackController.rack:null}function qt(t){const e=Ut(t);return e?e.bcSet_:null}class Gt{constructor(t){var e,n;this.onBladePositionsChange_=this.onBladePositionsChange_.bind(this),this.onSetAdd_=this.onSetAdd_.bind(this),this.onSetRemove_=this.onSetRemove_.bind(this),this.onChildDispose_=this.onChildDispose_.bind(this),this.onChildPositionsChange_=this.onChildPositionsChange_.bind(this),this.onChildInputChange_=this.onChildInputChange_.bind(this),this.onChildMonitorUpdate_=this.onChildMonitorUpdate_.bind(this),this.onChildValueChange_=this.onChildValueChange_.bind(this),this.onChildViewPropsChange_=this.onChildViewPropsChange_.bind(this),this.onDescendantLayout_=this.onDescendantLayout_.bind(this),this.onDescendantInputChange_=this.onDescendantInputChange_.bind(this),this.onDescendantMonitorUpdate_=this.onDescendantMonitorUpdate_.bind(this),this.emitter=new g,this.blade_=null!==(e=t.blade)&&void 0!==e?e:null,null===(n=this.blade_)||void 0===n||n.value("positions").emitter.on("change",this.onBladePositionsChange_),this.viewProps=t.viewProps,this.bcSet_=new Tt(qt),this.bcSet_.emitter.on("add",this.onSetAdd_),this.bcSet_.emitter.on("remove",this.onSetRemove_)}get children(){return this.bcSet_.items}add(t,e){var n;null===(n=t.parent)||void 0===n||n.remove(t),d(t,"parent")?t.parent=this:(t.parent_=this,F({key:"parent",target:"BladeController",place:"BladeRack.add"})),this.bcSet_.add(t,e)}remove(t){d(t,"parent")?t.parent=null:(t.parent_=null,F({key:"parent",target:"BladeController",place:"BladeRack.remove"})),this.bcSet_.remove(t)}find(t){return l(this.bcSet_.allItems().filter((e=>e instanceof t)))}onSetAdd_(t){this.updatePositions_();const e=t.target===t.root;if(this.emitter.emit("add",{bladeController:t.item,index:t.index,isRoot:e,sender:this}),!e)return;const n=t.item;if(n.viewProps.emitter.on("change",this.onChildViewPropsChange_),n.blade.value("positions").emitter.on("change",this.onChildPositionsChange_),n.viewProps.handleDispose(this.onChildDispose_),n instanceof It)n.binding.emitter.on("change",this.onChildInputChange_);else if(n instanceof Pt)n.binding.emitter.on("update",this.onChildMonitorUpdate_);else if(n instanceof mt)n.value.emitter.on("change",this.onChildValueChange_);else{const t=Ut(n);if(t){const e=t.emitter;e.on("layout",this.onDescendantLayout_),e.on("inputchange",this.onDescendantInputChange_),e.on("monitorupdate",this.onDescendantMonitorUpdate_)}}}onSetRemove_(t){this.updatePositions_();const e=t.target===t.root;if(this.emitter.emit("remove",{bladeController:t.item,isRoot:e,sender:this}),!e)return;const n=t.item;if(n instanceof It)n.binding.emitter.off("change",this.onChildInputChange_);else if(n instanceof Pt)n.binding.emitter.off("update",this.onChildMonitorUpdate_);else if(n instanceof mt)n.value.emitter.off("change",this.onChildValueChange_);else{const t=Ut(n);if(t){const e=t.emitter;e.off("layout",this.onDescendantLayout_),e.off("inputchange",this.onDescendantInputChange_),e.off("monitorupdate",this.onDescendantMonitorUpdate_)}}}updatePositions_(){const t=this.bcSet_.items.filter((t=>!t.viewProps.get("hidden"))),e=t[0],n=t[t.length-1];this.bcSet_.items.forEach((t=>{const r=[];t===e&&(r.push("first"),this.blade_&&!this.blade_.get("positions").includes("veryfirst")||r.push("veryfirst")),t===n&&(r.push("last"),this.blade_&&!this.blade_.get("positions").includes("verylast")||r.push("verylast")),t.blade.set("positions",r)}))}onChildPositionsChange_(){this.updatePositions_(),this.emitter.emit("layout",{sender:this})}onChildViewPropsChange_(t){this.updatePositions_(),this.emitter.emit("layout",{sender:this})}onChildDispose_(){this.bcSet_.items.filter((t=>t.viewProps.get("disposed"))).forEach((t=>{this.bcSet_.remove(t)}))}onChildInputChange_(t){const e=jt(this.find(It),t.sender);if(!e)throw h.alreadyDisposed();this.emitter.emit("inputchange",{bladeController:e,options:t.options,sender:this})}onChildMonitorUpdate_(t){const e=zt(this.find(Pt),t.sender);if(!e)throw h.alreadyDisposed();this.emitter.emit("monitorupdate",{bladeController:e,sender:this})}onChildValueChange_(t){const e=Ft(this.find(mt),t.sender);if(!e)throw h.alreadyDisposed();this.emitter.emit("inputchange",{bladeController:e,options:t.options,sender:this})}onDescendantLayout_(t){this.updatePositions_(),this.emitter.emit("layout",{sender:this})}onDescendantInputChange_(t){this.emitter.emit("inputchange",{bladeController:t.bladeController,options:t.options,sender:this})}onDescendantMonitorUpdate_(t){this.emitter.emit("monitorupdate",{bladeController:t.bladeController,sender:this})}onBladePositionsChange_(){this.updatePositions_()}}class Ht extends K{constructor(t,e){super(Object.assign(Object.assign({},e),{view:new Bt(t,{viewName:"brk",viewProps:e.viewProps})})),this.onRackAdd_=this.onRackAdd_.bind(this),this.onRackRemove_=this.onRackRemove_.bind(this);const n=new Gt({blade:e.root?void 0:e.blade,viewProps:e.viewProps});n.emitter.on("add",this.onRackAdd_),n.emitter.on("remove",this.onRackRemove_),this.rack=n,this.viewProps.handleDispose((()=>{for(let t=this.rack.children.length-1;t>=0;t--)this.rack.children[t].viewProps.set("disposed",!0)}))}onRackAdd_(t){t.isRoot&&ot(this.view.element,t.bladeController.view.element,t.index)}onRackRemove_(t){t.isRoot&&at(t.bladeController.view.element)}}const Vt=y("cnt");class Qt{constructor(t,e){var n;this.className_=y(null!==(n=e.viewName)&&void 0!==n?n:"fld"),this.element=t.createElement("div"),this.element.classList.add(this.className_(),Vt()),e.viewProps.bindClassModifiers(this.element),this.foldable_=e.foldable,this.foldable_.bindExpandedClass(this.element,this.className_(void 0,"expanded")),A(this.foldable_,"completed",x(this.element,this.className_(void 0,"cpl")));const r=t.createElement("button");r.classList.add(this.className_("b")),A(e.props,"title",(t=>{u(t)?this.element.classList.add(this.className_(void 0,"not")):this.element.classList.remove(this.className_(void 0,"not"))})),e.viewProps.bindDisabled(r),this.element.appendChild(r),this.buttonElement=r;const i=t.createElement("div");i.classList.add(this.className_("i")),this.element.appendChild(i);const o=t.createElement("div");o.classList.add(this.className_("t")),S(e.props.value("title"),o),this.buttonElement.appendChild(o),this.titleElement=o;const a=t.createElement("div");a.classList.add(this.className_("m")),this.buttonElement.appendChild(a);const s=e.containerElement;s.classList.add(this.className_("c")),this.element.appendChild(s),this.containerElement=s}}class Wt extends Nt{constructor(t,e){var n;const r=vt.create(null===(n=e.expanded)||void 0===n||n),i=new Ht(t,{blade:e.blade,root:e.root,viewProps:e.viewProps});super(Object.assign(Object.assign({},e),{rackController:i,view:new Qt(t,{containerElement:i.view.element,foldable:r,props:e.props,viewName:e.root?"rot":void 0,viewProps:e.viewProps})})),this.onTitleClick_=this.onTitleClick_.bind(this),this.props=e.props,this.foldable=r,_t(this.foldable,this.view.containerElement),this.rackController.rack.emitter.on("add",(()=>{this.foldable.cleanUpTransition()})),this.rackController.rack.emitter.on("remove",(()=>{this.foldable.cleanUpTransition()})),this.view.buttonElement.addEventListener("click",this.onTitleClick_)}get document(){return this.view.element.ownerDocument}onTitleClick_(){this.foldable.set("expanded",!this.foldable.get("expanded"))}}const Yt={id:"folder",type:"blade",accept(t){const e=j,n=z(t,{title:e.required.string,view:e.required.constant("folder"),expanded:e.optional.boolean});return n?{params:n}:null},controller:t=>new Wt(t.document,{blade:t.blade,expanded:t.params.expanded,props:O.fromObject({title:t.params.title}),viewProps:t.viewProps}),api:t=>t.controller instanceof Wt?new Dt(t.controller,t.pool):null};class Kt extends mt{constructor(t,e){const n=e.valueController.viewProps;super(Object.assign(Object.assign({},e),{value:e.valueController.value,view:new ft(t,{props:e.props,viewProps:n}),viewProps:n})),this.props=e.props,this.valueController=e.valueController,this.view.valueElement.appendChild(this.valueController.view.element)}}class Xt extends n{}const $t=y("spr");class Zt{constructor(t,e){this.element=t.createElement("div"),this.element.classList.add($t()),e.viewProps.bindClassModifiers(this.element);const n=t.createElement("hr");n.classList.add($t("r")),this.element.appendChild(n)}}class Jt extends K{constructor(t,e){super(Object.assign(Object.assign({},e),{view:new Zt(t,{viewProps:e.viewProps})}))}}const te={id:"separator",type:"blade",accept(t){const e=z(t,{view:j.required.constant("separator")});return e?{params:e}:null},controller:t=>new Jt(t.document,{blade:t.blade,viewProps:t.viewProps}),api:t=>t.controller instanceof Jt?new Xt(t.controller):null},ee=y("tbi");class ne{constructor(t,e){this.element=t.createElement("div"),this.element.classList.add(ee()),e.viewProps.bindClassModifiers(this.element),A(e.props,"selected",(t=>{t?this.element.classList.add(ee(void 0,"sel")):this.element.classList.remove(ee(void 0,"sel"))}));const n=t.createElement("button");n.classList.add(ee("b")),e.viewProps.bindDisabled(n),this.element.appendChild(n),this.buttonElement=n;const r=t.createElement("div");r.classList.add(ee("t")),S(e.props.value("title"),r),this.buttonElement.appendChild(r),this.titleElement=r}}class re{constructor(t,e){this.emitter=new g,this.onClick_=this.onClick_.bind(this),this.props=e.props,this.viewProps=e.viewProps,this.view=new ne(t,{props:e.props,viewProps:e.viewProps}),this.view.buttonElement.addEventListener("click",this.onClick_)}onClick_(){this.emitter.emit("click",{sender:this})}}class ie{constructor(t,e){this.onItemClick_=this.onItemClick_.bind(this),this.ic_=new re(t,{props:e.itemProps,viewProps:V.create()}),this.ic_.emitter.on("click",this.onItemClick_),this.cc_=new Ht(t,{blade:gt(),viewProps:V.create()}),this.props=e.props,A(this.props,"selected",(t=>{this.itemController.props.set("selected",t),this.contentController.viewProps.set("hidden",!t)}))}get itemController(){return this.ic_}get contentController(){return this.cc_}onItemClick_(){this.props.set("selected",!0)}}class oe{constructor(t,e){this.controller_=t,this.rackApi_=e}get title(){var t;return null!==(t=this.controller_.itemController.props.get("title"))&&void 0!==t?t:""}set title(t){this.controller_.itemController.props.set("title",t)}get selected(){return this.controller_.props.get("selected")}set selected(t){this.controller_.props.set("selected",t)}get children(){return this.rackApi_.children}addButton(t){return this.rackApi_.addButton(t)}addFolder(t){return this.rackApi_.addFolder(t)}addSeparator(t){return this.rackApi_.addSeparator(t)}addTab(t){return this.rackApi_.addTab(t)}add(t,e){this.rackApi_.add(t,e)}remove(t){this.rackApi_.remove(t)}addInput(t,e,n){return this.rackApi_.addInput(t,e,n)}addMonitor(t,e,n){return this.rackApi_.addMonitor(t,e,n)}addBlade(t){return this.rackApi_.addBlade(t)}}class ae extends wt{constructor(t,e){super(t,new Lt(t.rackController,e)),this.onPageAdd_=this.onPageAdd_.bind(this),this.onPageRemove_=this.onPageRemove_.bind(this),this.onSelect_=this.onSelect_.bind(this),this.emitter_=new g,this.pageApiMap_=new Map,this.rackApi_.on("change",(t=>{this.emitter_.emit("change",{event:t})})),this.rackApi_.on("update",(t=>{this.emitter_.emit("update",{event:t})})),this.controller_.tab.selectedIndex.emitter.on("change",this.onSelect_),this.controller_.pageSet.emitter.on("add",this.onPageAdd_),this.controller_.pageSet.emitter.on("remove",this.onPageRemove_),this.controller_.pageSet.items.forEach((t=>{this.setUpPageApi_(t)}))}get pages(){return this.controller_.pageSet.items.map((t=>{const e=this.pageApiMap_.get(t);if(!e)throw h.shouldNeverHappen();return e}))}addPage(t){const e=this.controller_.view.element.ownerDocument,n=new ie(e,{itemProps:O.fromObject({selected:!1,title:t.title}),props:O.fromObject({selected:!1})});this.controller_.add(n,t.index);const r=this.pageApiMap_.get(n);if(!r)throw h.shouldNeverHappen();return r}removePage(t){this.controller_.remove(t)}on(t,e){const n=e.bind(this);return this.emitter_.on(t,(t=>{n(t.event)})),this}setUpPageApi_(t){const e=this.rackApi_.apiSet_.find((e=>e.controller_===t.contentController));if(!e)throw h.shouldNeverHappen();const n=new oe(t,e);this.pageApiMap_.set(t,n)}onPageAdd_(t){this.setUpPageApi_(t.item)}onPageRemove_(t){if(!this.pageApiMap_.get(t.item))throw h.shouldNeverHappen();this.pageApiMap_.delete(t.item)}onSelect_(t){this.emitter_.emit("select",{event:new s(this,t.rawValue)})}}const se=-1;class le{constructor(){this.onItemSelectedChange_=this.onItemSelectedChange_.bind(this),this.empty=R(!0),this.selectedIndex=R(se),this.items_=[]}add(t,e){const n=null!=e?e:this.items_.length;this.items_.splice(n,0,t),t.emitter.on("change",this.onItemSelectedChange_),this.keepSelection_()}remove(t){const e=this.items_.indexOf(t);e<0||(this.items_.splice(e,1),t.emitter.off("change",this.onItemSelectedChange_),this.keepSelection_())}keepSelection_(){if(0===this.items_.length)return this.selectedIndex.rawValue=se,void(this.empty.rawValue=!0);const t=this.items_.findIndex((t=>t.rawValue));t<0?(this.items_.forEach(((t,e)=>{t.rawValue=0===e})),this.selectedIndex.rawValue=0):(this.items_.forEach(((e,n)=>{e.rawValue=n===t})),this.selectedIndex.rawValue=t),this.empty.rawValue=!1}onItemSelectedChange_(t){if(t.rawValue){const e=this.items_.findIndex((e=>e===t.sender));this.items_.forEach(((t,n)=>{t.rawValue=n===e})),this.selectedIndex.rawValue=e}else this.keepSelection_()}}const ue=y("tab");class ce{constructor(t,e){this.element=t.createElement("div"),this.element.classList.add(ue(),Vt()),e.viewProps.bindClassModifiers(this.element),w(e.empty,x(this.element,ue(void 0,"nop")));const n=t.createElement("div");n.classList.add(ue("t")),this.element.appendChild(n),this.itemsElement=n;const r=t.createElement("div");r.classList.add(ue("i")),this.element.appendChild(r);const i=e.contentsElement;i.classList.add(ue("c")),this.element.appendChild(i),this.contentsElement=i}}class de extends Nt{constructor(t,e){const n=new Ht(t,{blade:e.blade,viewProps:e.viewProps}),r=new le;super({blade:e.blade,rackController:n,view:new ce(t,{contentsElement:n.view.element,empty:r.empty,viewProps:e.viewProps})}),this.onPageAdd_=this.onPageAdd_.bind(this),this.onPageRemove_=this.onPageRemove_.bind(this),this.pageSet_=new Tt((()=>null)),this.pageSet_.emitter.on("add",this.onPageAdd_),this.pageSet_.emitter.on("remove",this.onPageRemove_),this.tab=r}get pageSet(){return this.pageSet_}add(t,e){this.pageSet_.add(t,e)}remove(t){this.pageSet_.remove(this.pageSet_.items[t])}onPageAdd_(t){const e=t.item;ot(this.view.itemsElement,e.itemController.view.element,t.index),e.itemController.viewProps.set("parent",this.viewProps),this.rackController.rack.add(e.contentController,t.index),this.tab.add(e.props.value("selected"))}onPageRemove_(t){const e=t.item;at(e.itemController.view.element),e.itemController.viewProps.set("parent",null),this.rackController.rack.remove(e.contentController),this.tab.remove(e.props.value("selected"))}}const fe={id:"tab",type:"blade",accept(t){const e=j,n=z(t,{pages:e.required.array(e.required.object({title:e.required.string})),view:e.required.constant("tab")});return n&&0!==n.pages.length?{params:n}:null},controller(t){const e=new de(t.document,{blade:t.blade,viewProps:t.viewProps});return t.params.pages.forEach((n=>{const r=new ie(t.document,{itemProps:O.fromObject({selected:!1,title:n.title}),props:O.fromObject({selected:!1})});e.add(r)})),e},api:t=>t.controller instanceof de?new ae(t.controller,t.pool):null};function he(t,e){const n=t.accept(e.params);if(!n)return null;const r=j.optional.boolean(e.params.disabled).value,i=j.optional.boolean(e.params.hidden).value;return t.controller({blade:gt(),document:e.document,params:l(Object.assign(Object.assign({},n.params),{disabled:r,hidden:i})),viewProps:V.create({disabled:r,hidden:i})})}class pe{constructor(){this.disabled=!1,this.emitter=new g}dispose(){}tick(){this.disabled||this.emitter.emit("tick",{sender:this})}}class me{constructor(t,e){this.disabled_=!1,this.timerId_=null,this.onTick_=this.onTick_.bind(this),this.doc_=t,this.emitter=new g,this.interval_=e,this.setTimer_()}get disabled(){return this.disabled_}set disabled(t){this.disabled_=t,this.disabled_?this.clearTimer_():this.setTimer_()}dispose(){this.clearTimer_()}clearTimer_(){if(null===this.timerId_)return;const t=this.doc_.defaultView;t&&t.clearInterval(this.timerId_),this.timerId_=null}setTimer_(){if(this.clearTimer_(),this.interval_<=0)return;const t=this.doc_.defaultView;t&&(this.timerId_=t.setInterval(this.onTick_,this.interval_))}onTick_(){this.disabled_||this.emitter.emit("tick",{sender:this})}}class ge{constructor(t){this.onValueChange_=this.onValueChange_.bind(this),this.reader=t.reader,this.writer=t.writer,this.emitter=new g,this.value=t.value,this.value.emitter.on("change",this.onValueChange_),this.target=t.target,this.read()}read(){const t=this.target.read();void 0!==t&&(this.value.rawValue=this.reader(t))}write_(t){this.writer(this.target,t)}onValueChange_(t){this.write_(t.rawValue),this.emitter.emit("change",{options:t.options,rawValue:t.rawValue,sender:this})}}function ve(t,e){for(;t.length<e;)t.push(void 0)}function ye(t){const e=[];return ve(e,t),R(e)}function be(t){const e=t.indexOf(void 0);return l(e<0?t:t.slice(0,e))}function _e(t,e){const n=[...be(t),e];return n.length>t.length?n.splice(0,n.length-t.length):ve(n,t.length),n}class we{constructor(t){this.onTick_=this.onTick_.bind(this),this.reader_=t.reader,this.target=t.target,this.emitter=new g,this.value=t.value,this.ticker=t.ticker,this.ticker.emitter.on("tick",this.onTick_),this.read()}dispose(){this.ticker.dispose()}read(){const t=this.target.read();if(void 0===t)return;const e=this.value.rawValue,n=this.reader_(t);this.value.rawValue=_e(e,n),this.emitter.emit("update",{rawValue:n,sender:this})}onTick_(t){this.read()}}class Ae{constructor(t){this.constraints=t}constrain(t){return this.constraints.reduce(((t,e)=>e.constrain(t)),t)}}function Ee(t,e){if(t instanceof e)return t;if(t instanceof Ae){const n=t.constraints.reduce(((t,n)=>t||(n instanceof e?n:null)),null);if(n)return n}return null}class xe{constructor(t){this.values=O.fromObject({max:t.max,min:t.min})}constrain(t){const e=this.values.get("max"),n=this.values.get("min");return Math.min(Math.max(t,n),e)}}class Se{constructor(t){this.values=O.fromObject({options:t})}get options(){return this.values.get("options")}constrain(t){const e=this.values.get("options");return 0===e.length||e.filter((e=>e.value===t)).length>0?t:e[0].value}}class Te{constructor(t){this.values=O.fromObject({max:t.max,min:t.min})}get maxValue(){return this.values.get("max")}get minValue(){return this.values.get("min")}constrain(t){const e=this.values.get("max"),n=this.values.get("min");let r=t;return u(n)||(r=Math.max(r,n)),u(e)||(r=Math.min(r,e)),r}}class Ce{constructor(t,e=0){this.step=t,this.origin=e}constrain(t){const e=this.origin%this.step;return e+Math.round((t-e)/this.step)*this.step}}const Ie=y("lst");class ke{constructor(t,e){this.onValueChange_=this.onValueChange_.bind(this),this.props_=e.props,this.element=t.createElement("div"),this.element.classList.add(Ie()),e.viewProps.bindClassModifiers(this.element);const n=t.createElement("select");n.classList.add(Ie("s")),e.viewProps.bindDisabled(n),this.element.appendChild(n),this.selectElement=n;const r=t.createElement("div");r.classList.add(Ie("m")),r.appendChild(it(t,"dropdown")),this.element.appendChild(r),e.value.emitter.on("change",this.onValueChange_),this.value_=e.value,A(this.props_,"options",(e=>{st(this.selectElement),e.forEach((e=>{const n=t.createElement("option");n.textContent=e.text,this.selectElement.appendChild(n)})),this.update_()}))}update_(){const t=this.props_.get("options").map((t=>t.value));this.selectElement.selectedIndex=t.indexOf(this.value_.rawValue)}onValueChange_(){this.update_()}}class Pe{constructor(t,e){this.onSelectChange_=this.onSelectChange_.bind(this),this.props=e.props,this.value=e.value,this.viewProps=e.viewProps,this.view=new ke(t,{props:this.props,value:this.value,viewProps:this.viewProps}),this.view.selectElement.addEventListener("change",this.onSelectChange_)}onSelectChange_(t){const e=l(t.currentTarget);this.value.rawValue=this.props.get("options")[e.selectedIndex].value}}const Re=y("pop");class Oe{constructor(t,e){this.element=t.createElement("div"),this.element.classList.add(Re()),e.viewProps.bindClassModifiers(this.element),w(e.shows,x(this.element,Re(void 0,"v")))}}class Me{constructor(t,e){this.shows=R(!1),this.viewProps=e.viewProps,this.view=new Oe(t,{shows:this.shows,viewProps:this.viewProps})}}const Le=y("txt");class De{constructor(t,e){this.onChange_=this.onChange_.bind(this),this.element=t.createElement("div"),this.element.classList.add(Le()),e.viewProps.bindClassModifiers(this.element),this.props_=e.props,this.props_.emitter.on("change",this.onChange_);const n=t.createElement("input");n.classList.add(Le("i")),n.type="text",e.viewProps.bindDisabled(n),this.element.appendChild(n),this.inputElement=n,e.value.emitter.on("change",this.onChange_),this.value_=e.value,this.refresh()}refresh(){const t=this.props_.get("formatter");this.inputElement.value=t(this.value_.rawValue)}onChange_(){this.refresh()}}class Ne{constructor(t,e){this.onInputChange_=this.onInputChange_.bind(this),this.parser_=e.parser,this.props=e.props,this.value=e.value,this.viewProps=e.viewProps,this.view=new De(t,{props:e.props,value:this.value,viewProps:this.viewProps}),this.view.inputElement.addEventListener("change",this.onInputChange_)}onInputChange_(t){const e=l(t.currentTarget).value,n=this.parser_(e);u(n)||(this.value.rawValue=n),this.view.refresh()}}function Be(t){return String(t)}function je(t){return"false"!==t&&!!t}function ze(t){return Be(t)}class Fe{constructor(t){this.text=t}evaluate(){return Number(this.text)}toString(){return this.text}}const Ue={"**":(t,e)=>Math.pow(t,e),"*":(t,e)=>t*e,"/":(t,e)=>t/e,"%":(t,e)=>t%e,"+":(t,e)=>t+e,"-":(t,e)=>t-e,"<<":(t,e)=>t<<e,">>":(t,e)=>t>>e,">>>":(t,e)=>t>>>e,"&":(t,e)=>t&e,"^":(t,e)=>t^e,"|":(t,e)=>t|e};class qe{constructor(t,e,n){this.left=e,this.operator=t,this.right=n}evaluate(){const t=Ue[this.operator];if(!t)throw new Error(`unexpected binary operator: '${this.operator}`);return t(this.left.evaluate(),this.right.evaluate())}toString(){return["b(",this.left.toString(),this.operator,this.right.toString(),")"].join(" ")}}const Ge={"+":t=>t,"-":t=>-t,"~":t=>~t};class He{constructor(t,e){this.operator=t,this.expression=e}evaluate(){const t=Ge[this.operator];if(!t)throw new Error(`unexpected unary operator: '${this.operator}`);return t(this.expression.evaluate())}toString(){return["u(",this.operator,this.expression.toString(),")"].join(" ")}}function Ve(t){return(e,n)=>{for(let r=0;r<t.length;r++){const i=t[r](e,n);if(""!==i)return i}return""}}function Qe(t,e){var n;const r=t.substr(e).match(/^\s+/);return null!==(n=r&&r[0])&&void 0!==n?n:""}function We(t,e){const n=t.substr(e,1);return n.match(/^[1-9]$/)?n:""}function Ye(t,e){var n;const r=t.substr(e).match(/^[0-9]+/);return null!==(n=r&&r[0])&&void 0!==n?n:""}function Ke(t,e){const n=Ye(t,e);if(""!==n)return n;const r=t.substr(e,1);if("-"!==r&&"+"!==r)return"";const i=Ye(t,e+=1);return""===i?"":r+i}function Xe(t,e){const n=t.substr(e,1);if(e+=1,"e"!==n.toLowerCase())return"";const r=Ke(t,e);return""===r?"":n+r}function $e(t,e){const n=t.substr(e,1);if("0"===n)return n;const r=We(t,e);return e+=r.length,""===r?"":r+Ye(t,e)}function Ze(t,e){const n=$e(t,e);if(e+=n.length,""===n)return"";const r=t.substr(e,1);if(e+=r.length,"."!==r)return"";const i=Ye(t,e);return n+r+i+Xe(t,e+=i.length)}function Je(t,e){const n=t.substr(e,1);if(e+=n.length,"."!==n)return"";const r=Ye(t,e);return e+=r.length,""===r?"":n+r+Xe(t,e)}function tn(t,e){const n=$e(t,e);return e+=n.length,""===n?"":n+Xe(t,e)}const en=Ve([Ze,Je,tn]);function nn(t,e){var n;const r=t.substr(e).match(/^[01]+/);return null!==(n=r&&r[0])&&void 0!==n?n:""}function rn(t,e){const n=t.substr(e,2);if(e+=n.length,"0b"!==n.toLowerCase())return"";const r=nn(t,e);return""===r?"":n+r}function on(t,e){var n;const r=t.substr(e).match(/^[0-7]+/);return null!==(n=r&&r[0])&&void 0!==n?n:""}function an(t,e){const n=t.substr(e,2);if(e+=n.length,"0o"!==n.toLowerCase())return"";const r=on(t,e);return""===r?"":n+r}function sn(t,e){var n;const r=t.substr(e).match(/^[0-9a-f]+/i);return null!==(n=r&&r[0])&&void 0!==n?n:""}function ln(t,e){const n=t.substr(e,2);if(e+=n.length,"0x"!==n.toLowerCase())return"";const r=sn(t,e);return""===r?"":n+r}const un=Ve([rn,an,ln]),cn=Ve([un,en]);function dn(t,e){const n=cn(t,e);return e+=n.length,""===n?null:{evaluable:new Fe(n),cursor:e}}function fn(t,e){const n=t.substr(e,1);if(e+=n.length,"("!==n)return null;const r=yn(t,e);if(!r)return null;e=r.cursor,e+=Qe(t,e).length;const i=t.substr(e,1);return e+=i.length,")"!==i?null:{evaluable:r.evaluable,cursor:e}}function hn(t,e){var n;return null!==(n=dn(t,e))&&void 0!==n?n:fn(t,e)}function pn(t,e){const n=hn(t,e);if(n)return n;const r=t.substr(e,1);if(e+=r.length,"+"!==r&&"-"!==r&&"~"!==r)return null;const i=pn(t,e);return i?{cursor:e=i.cursor,evaluable:new He(r,i.evaluable)}:null}function mn(t,e,n){n+=Qe(e,n).length;const r=t.filter((t=>e.startsWith(t,n)))[0];return r?(n+=r.length,{cursor:n+=Qe(e,n).length,operator:r}):null}function gn(t,e){return(n,r)=>{const i=t(n,r);if(!i)return null;r=i.cursor;let o=i.evaluable;for(;;){const i=mn(e,n,r);if(!i)break;r=i.cursor;const a=t(n,r);if(!a)return null;r=a.cursor,o=new qe(i.operator,o,a.evaluable)}return o?{cursor:r,evaluable:o}:null}}const vn=[["**"],["*","/","%"],["+","-"],["<<",">>>",">>"],["&"],["^"],["|"]].reduce(((t,e)=>gn(t,e)),pn);function yn(t,e){return e+=Qe(t,e).length,vn(t,e)}function bn(t){const e=yn(t,0);return e?e.cursor+Qe(t,e.cursor).length!==t.length?null:e.evaluable:null}function _n(t){var e;const n=bn(t);return null!==(e=null==n?void 0:n.evaluate())&&void 0!==e?e:null}function wn(t){if("number"==typeof t)return t;if("string"==typeof t){const e=_n(t);if(!u(e))return e}return 0}function An(t){return String(t)}function En(t){return e=>e.toFixed(Math.max(Math.min(t,20),0))}const xn=En(0);function Sn(t){return xn(t)+"%"}function Tn(t){return String(t)}function Cn(t){return t}function In({primary:t,secondary:e,forward:n,backward:r}){let i=!1;function o(t){i||(i=!0,t(),i=!1)}t.emitter.on("change",(r=>{o((()=>{e.setRawValue(n(t,e),r.options)}))})),e.emitter.on("change",(i=>{o((()=>{t.setRawValue(r(t,e),i.options)})),o((()=>{e.setRawValue(n(t,e),i.options)}))})),o((()=>{e.setRawValue(n(t,e),{forceEmit:!1,last:!0})}))}function kn(t,e){const n=t*(e.altKey?.1:1)*(e.shiftKey?10:1);return e.upKey?+n:e.downKey?-n:0}function Pn(t){return{altKey:t.altKey,downKey:"ArrowDown"===t.key,shiftKey:t.shiftKey,upKey:"ArrowUp"===t.key}}function Rn(t){return{altKey:t.altKey,downKey:"ArrowLeft"===t.key,shiftKey:t.shiftKey,upKey:"ArrowRight"===t.key}}function On(t){return"ArrowUp"===t||"ArrowDown"===t}function Mn(t){return On(t)||"ArrowLeft"===t||"ArrowRight"===t}function Ln(t,e){var n,r;const i=e.ownerDocument.defaultView,o=e.getBoundingClientRect();return{x:t.pageX-((null!==(n=i&&i.scrollX)&&void 0!==n?n:0)+o.left),y:t.pageY-((null!==(r=i&&i.scrollY)&&void 0!==r?r:0)+o.top)}}class Dn{constructor(t){this.lastTouch_=null,this.onDocumentMouseMove_=this.onDocumentMouseMove_.bind(this),this.onDocumentMouseUp_=this.onDocumentMouseUp_.bind(this),this.onMouseDown_=this.onMouseDown_.bind(this),this.onTouchEnd_=this.onTouchEnd_.bind(this),this.onTouchMove_=this.onTouchMove_.bind(this),this.onTouchStart_=this.onTouchStart_.bind(this),this.elem_=t,this.emitter=new g,t.addEventListener("touchstart",this.onTouchStart_,{passive:!1}),t.addEventListener("touchmove",this.onTouchMove_,{passive:!0}),t.addEventListener("touchend",this.onTouchEnd_),t.addEventListener("mousedown",this.onMouseDown_)}computePosition_(t){const e=this.elem_.getBoundingClientRect();return{bounds:{width:e.width,height:e.height},point:t?{x:t.x,y:t.y}:null}}onMouseDown_(t){var e;t.preventDefault(),null===(e=t.currentTarget)||void 0===e||e.focus();const n=this.elem_.ownerDocument;n.addEventListener("mousemove",this.onDocumentMouseMove_),n.addEventListener("mouseup",this.onDocumentMouseUp_),this.emitter.emit("down",{altKey:t.altKey,data:this.computePosition_(Ln(t,this.elem_)),sender:this,shiftKey:t.shiftKey})}onDocumentMouseMove_(t){this.emitter.emit("move",{altKey:t.altKey,data:this.computePosition_(Ln(t,this.elem_)),sender:this,shiftKey:t.shiftKey})}onDocumentMouseUp_(t){const e=this.elem_.ownerDocument;e.removeEventListener("mousemove",this.onDocumentMouseMove_),e.removeEventListener("mouseup",this.onDocumentMouseUp_),this.emitter.emit("up",{altKey:t.altKey,data:this.computePosition_(Ln(t,this.elem_)),sender:this,shiftKey:t.shiftKey})}onTouchStart_(t){t.preventDefault();const e=t.targetTouches.item(0),n=this.elem_.getBoundingClientRect();this.emitter.emit("down",{altKey:t.altKey,data:this.computePosition_(e?{x:e.clientX-n.left,y:e.clientY-n.top}:void 0),sender:this,shiftKey:t.shiftKey}),this.lastTouch_=e}onTouchMove_(t){const e=t.targetTouches.item(0),n=this.elem_.getBoundingClientRect();this.emitter.emit("move",{altKey:t.altKey,data:this.computePosition_(e?{x:e.clientX-n.left,y:e.clientY-n.top}:void 0),sender:this,shiftKey:t.shiftKey}),this.lastTouch_=e}onTouchEnd_(t){var e;const n=null!==(e=t.targetTouches.item(0))&&void 0!==e?e:this.lastTouch_,r=this.elem_.getBoundingClientRect();this.emitter.emit("up",{altKey:t.altKey,data:this.computePosition_(n?{x:n.clientX-r.left,y:n.clientY-r.top}:void 0),sender:this,shiftKey:t.shiftKey})}}function Nn(t,e,n,r,i){return r+(t-e)/(n-e)*(i-r)}function Bn(t){return String(t.toFixed(10)).split(".")[1].replace(/0+$/,"").length}function jn(t,e,n){return Math.min(Math.max(t,e),n)}function zn(t,e){return(t%e+e)%e}const Fn=y("txt");class Un{constructor(t,e){this.onChange_=this.onChange_.bind(this),this.props_=e.props,this.props_.emitter.on("change",this.onChange_),this.element=t.createElement("div"),this.element.classList.add(Fn(),Fn(void 0,"num")),e.arrayPosition&&this.element.classList.add(Fn(void 0,e.arrayPosition)),e.viewProps.bindClassModifiers(this.element);const n=t.createElement("input");n.classList.add(Fn("i")),n.type="text",e.viewProps.bindDisabled(n),this.element.appendChild(n),this.inputElement=n,this.onDraggingChange_=this.onDraggingChange_.bind(this),this.dragging_=e.dragging,this.dragging_.emitter.on("change",this.onDraggingChange_),this.element.classList.add(Fn()),this.inputElement.classList.add(Fn("i"));const r=t.createElement("div");r.classList.add(Fn("k")),this.element.appendChild(r),this.knobElement=r;const i=t.createElementNS(X,"svg");i.classList.add(Fn("g")),this.knobElement.appendChild(i);const o=t.createElementNS(X,"path");o.classList.add(Fn("gb")),i.appendChild(o),this.guideBodyElem_=o;const a=t.createElementNS(X,"path");a.classList.add(Fn("gh")),i.appendChild(a),this.guideHeadElem_=a;const s=t.createElement("div");s.classList.add(y("tt")()),this.knobElement.appendChild(s),this.tooltipElem_=s,e.value.emitter.on("change",this.onChange_),this.value=e.value,this.refresh()}onDraggingChange_(t){if(null===t.rawValue)return void this.element.classList.remove(Fn(void 0,"drg"));this.element.classList.add(Fn(void 0,"drg"));const e=t.rawValue/this.props_.get("draggingScale"),n=e+(e>0?-1:e<0?1:0),r=jn(-n,-4,4);this.guideHeadElem_.setAttributeNS(null,"d",[`M ${n+r},0 L${n},4 L${n+r},8`,`M ${e},-1 L${e},9`].join(" ")),this.guideBodyElem_.setAttributeNS(null,"d",`M 0,4 L${e},4`);const i=this.props_.get("formatter");this.tooltipElem_.textContent=i(this.value.rawValue),this.tooltipElem_.style.left=`${e}px`}refresh(){const t=this.props_.get("formatter");this.inputElement.value=t(this.value.rawValue)}onChange_(){this.refresh()}}class qn{constructor(t,e){var n;this.originRawValue_=0,this.onInputChange_=this.onInputChange_.bind(this),this.onInputKeyDown_=this.onInputKeyDown_.bind(this),this.onInputKeyUp_=this.onInputKeyUp_.bind(this),this.onPointerDown_=this.onPointerDown_.bind(this),this.onPointerMove_=this.onPointerMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.baseStep_=e.baseStep,this.parser_=e.parser,this.props=e.props,this.sliderProps_=null!==(n=e.sliderProps)&&void 0!==n?n:null,this.value=e.value,this.viewProps=e.viewProps,this.dragging_=R(null),this.view=new Un(t,{arrayPosition:e.arrayPosition,dragging:this.dragging_,props:this.props,value:this.value,viewProps:this.viewProps}),this.view.inputElement.addEventListener("change",this.onInputChange_),this.view.inputElement.addEventListener("keydown",this.onInputKeyDown_),this.view.inputElement.addEventListener("keyup",this.onInputKeyUp_);const r=new Dn(this.view.knobElement);r.emitter.on("down",this.onPointerDown_),r.emitter.on("move",this.onPointerMove_),r.emitter.on("up",this.onPointerUp_)}constrainValue_(t){var e,n;const r=null===(e=this.sliderProps_)||void 0===e?void 0:e.get("minValue"),i=null===(n=this.sliderProps_)||void 0===n?void 0:n.get("maxValue");let o=t;return void 0!==r&&(o=Math.max(o,r)),void 0!==i&&(o=Math.min(o,i)),o}onInputChange_(t){const e=l(t.currentTarget).value,n=this.parser_(e);u(n)||(this.value.rawValue=this.constrainValue_(n)),this.view.refresh()}onInputKeyDown_(t){const e=kn(this.baseStep_,Pn(t));0!==e&&this.value.setRawValue(this.constrainValue_(this.value.rawValue+e),{forceEmit:!1,last:!1})}onInputKeyUp_(t){0!==kn(this.baseStep_,Pn(t))&&this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})}onPointerDown_(){this.originRawValue_=this.value.rawValue,this.dragging_.rawValue=0}computeDraggingValue_(t){if(!t.point)return null;const e=t.point.x-t.bounds.width/2;return this.constrainValue_(this.originRawValue_+e*this.props.get("draggingScale"))}onPointerMove_(t){const e=this.computeDraggingValue_(t.data);null!==e&&(this.value.setRawValue(e,{forceEmit:!1,last:!1}),this.dragging_.rawValue=this.value.rawValue-this.originRawValue_)}onPointerUp_(t){const e=this.computeDraggingValue_(t.data);null!==e&&(this.value.setRawValue(e,{forceEmit:!0,last:!0}),this.dragging_.rawValue=null)}}const Gn=y("sld");class Hn{constructor(t,e){this.onChange_=this.onChange_.bind(this),this.props_=e.props,this.props_.emitter.on("change",this.onChange_),this.element=t.createElement("div"),this.element.classList.add(Gn()),e.viewProps.bindClassModifiers(this.element);const n=t.createElement("div");n.classList.add(Gn("t")),e.viewProps.bindTabIndex(n),this.element.appendChild(n),this.trackElement=n;const r=t.createElement("div");r.classList.add(Gn("k")),this.trackElement.appendChild(r),this.knobElement=r,e.value.emitter.on("change",this.onChange_),this.value=e.value,this.update_()}update_(){const t=jn(Nn(this.value.rawValue,this.props_.get("minValue"),this.props_.get("maxValue"),0,100),0,100);this.knobElement.style.width=`${t}%`}onChange_(){this.update_()}}class Vn{constructor(t,e){this.onKeyDown_=this.onKeyDown_.bind(this),this.onKeyUp_=this.onKeyUp_.bind(this),this.onPointerDownOrMove_=this.onPointerDownOrMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.baseStep_=e.baseStep,this.value=e.value,this.viewProps=e.viewProps,this.props=e.props,this.view=new Hn(t,{props:this.props,value:this.value,viewProps:this.viewProps}),this.ptHandler_=new Dn(this.view.trackElement),this.ptHandler_.emitter.on("down",this.onPointerDownOrMove_),this.ptHandler_.emitter.on("move",this.onPointerDownOrMove_),this.ptHandler_.emitter.on("up",this.onPointerUp_),this.view.trackElement.addEventListener("keydown",this.onKeyDown_),this.view.trackElement.addEventListener("keyup",this.onKeyUp_)}handlePointerEvent_(t,e){t.point&&this.value.setRawValue(Nn(jn(t.point.x,0,t.bounds.width),0,t.bounds.width,this.props.get("minValue"),this.props.get("maxValue")),e)}onPointerDownOrMove_(t){this.handlePointerEvent_(t.data,{forceEmit:!1,last:!1})}onPointerUp_(t){this.handlePointerEvent_(t.data,{forceEmit:!0,last:!0})}onKeyDown_(t){const e=kn(this.baseStep_,Rn(t));0!==e&&this.value.setRawValue(this.value.rawValue+e,{forceEmit:!1,last:!1})}onKeyUp_(t){0!==kn(this.baseStep_,Rn(t))&&this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})}}const Qn=y("sldtxt");class Wn{constructor(t,e){this.element=t.createElement("div"),this.element.classList.add(Qn());const n=t.createElement("div");n.classList.add(Qn("s")),this.sliderView_=e.sliderView,n.appendChild(this.sliderView_.element),this.element.appendChild(n);const r=t.createElement("div");r.classList.add(Qn("t")),this.textView_=e.textView,r.appendChild(this.textView_.element),this.element.appendChild(r)}}class Yn{constructor(t,e){this.value=e.value,this.viewProps=e.viewProps,this.sliderC_=new Vn(t,{baseStep:e.baseStep,props:e.sliderProps,value:e.value,viewProps:this.viewProps}),this.textC_=new qn(t,{baseStep:e.baseStep,parser:e.parser,props:e.textProps,sliderProps:e.sliderProps,value:e.value,viewProps:e.viewProps}),this.view=new Wn(t,{sliderView:this.sliderC_.view,textView:this.textC_.view})}get sliderController(){return this.sliderC_}get textController(){return this.textC_}}function Kn(t,e){t.write(e)}function Xn(t){const e=j;return Array.isArray(t)?e.required.array(e.required.object({text:e.required.string,value:e.required.raw}))(t).value:"object"==typeof t?e.required.raw(t).value:void 0}function $n(t){if("inline"===t||"popup"===t)return t}function Zn(t){const e=j;return e.required.object({max:e.optional.number,min:e.optional.number,step:e.optional.number})(t).value}function Jn(t){if(Array.isArray(t))return t;const e=[];return Object.keys(t).forEach((n=>{e.push({text:n,value:t[n]})})),e}function tr(t){return u(t)?null:new Se(Jn(l(t)))}function er(t){const e=t?Ee(t,Ce):null;return e?e.step:null}function nr(t,e){const n=t&&Ee(t,Ce);return n?Bn(n.step):Math.max(Bn(e),2)}function rr(t){const e=er(t);return null!=e?e:1}function ir(t,e){var n;const r=t&&Ee(t,Ce),i=Math.abs(null!==(n=null==r?void 0:r.step)&&void 0!==n?n:e);return 0===i?.1:Math.pow(10,Math.floor(Math.log10(i))-1)}const or=y("ckb");class ar{constructor(t,e){this.onValueChange_=this.onValueChange_.bind(this),this.element=t.createElement("div"),this.element.classList.add(or()),e.viewProps.bindClassModifiers(this.element);const n=t.createElement("label");n.classList.add(or("l")),this.element.appendChild(n);const r=t.createElement("input");r.classList.add(or("i")),r.type="checkbox",n.appendChild(r),this.inputElement=r,e.viewProps.bindDisabled(this.inputElement);const i=t.createElement("div");i.classList.add(or("w")),n.appendChild(i);const o=it(t,"check");i.appendChild(o),e.value.emitter.on("change",this.onValueChange_),this.value=e.value,this.update_()}update_(){this.inputElement.checked=this.value.rawValue}onValueChange_(){this.update_()}}class sr{constructor(t,e){this.onInputChange_=this.onInputChange_.bind(this),this.value=e.value,this.viewProps=e.viewProps,this.view=new ar(t,{value:this.value,viewProps:this.viewProps}),this.view.inputElement.addEventListener("change",this.onInputChange_)}onInputChange_(t){const e=l(t.currentTarget);this.value.rawValue=e.checked}}function lr(t){const e=[],n=tr(t.options);return n&&e.push(n),new Ae(e)}const ur={id:"input-bool",type:"input",accept:(t,e)=>{if("boolean"!=typeof t)return null;const n=z(e,{options:j.optional.custom(Xn)});return n?{initialValue:t,params:n}:null},binding:{reader:t=>je,constraint:t=>lr(t.params),writer:t=>Kn},controller:t=>{const e=t.document,n=t.value,r=t.constraint,i=r&&Ee(r,Se);return i?new Pe(e,{props:new O({options:i.values.value("options")}),value:n,viewProps:t.viewProps}):new sr(e,{value:n,viewProps:t.viewProps})}},cr=y("col");class dr{constructor(t,e){this.element=t.createElement("div"),this.element.classList.add(cr()),e.foldable.bindExpandedClass(this.element,cr(void 0,"expanded")),A(e.foldable,"completed",x(this.element,cr(void 0,"cpl")));const n=t.createElement("div");n.classList.add(cr("h")),this.element.appendChild(n);const r=t.createElement("div");r.classList.add(cr("s")),n.appendChild(r),this.swatchElement=r;const i=t.createElement("div");if(i.classList.add(cr("t")),n.appendChild(i),this.textElement=i,"inline"===e.pickerLayout){const e=t.createElement("div");e.classList.add(cr("p")),this.element.appendChild(e),this.pickerElement=e}else this.pickerElement=null}}function fr(t,e,n){const r=jn(t/255,0,1),i=jn(e/255,0,1),o=jn(n/255,0,1),a=Math.max(r,i,o),s=Math.min(r,i,o),l=a-s;let u=0,c=0;const d=(s+a)/2;return 0!==l&&(c=l/(1-Math.abs(a+s-1)),u=r===a?(i-o)/l:i===a?2+(o-r)/l:4+(r-i)/l,u=u/6+(u<0?1:0)),[360*u,100*c,100*d]}function hr(t,e,n){const r=(t%360+360)%360,i=jn(e/100,0,1),o=jn(n/100,0,1),a=(1-Math.abs(2*o-1))*i,s=a*(1-Math.abs(r/60%2-1)),l=o-a/2;let u,c,d;return[u,c,d]=r>=0&&r<60?[a,s,0]:r>=60&&r<120?[s,a,0]:r>=120&&r<180?[0,a,s]:r>=180&&r<240?[0,s,a]:r>=240&&r<300?[s,0,a]:[a,0,s],[255*(u+l),255*(c+l),255*(d+l)]}function pr(t,e,n){const r=jn(t/255,0,1),i=jn(e/255,0,1),o=jn(n/255,0,1),a=Math.max(r,i,o),s=a-Math.min(r,i,o);let l;return l=0===s?0:a===r?((i-o)/s%6+6)%6*60:a===i?60*((o-r)/s+2):60*((r-i)/s+4),[l,100*(0===a?0:s/a),100*a]}function mr(t,e,n){const r=zn(t,360),i=jn(e/100,0,1),o=jn(n/100,0,1),a=o*i,s=a*(1-Math.abs(r/60%2-1)),l=o-a;let u,c,d;return[u,c,d]=r>=0&&r<60?[a,s,0]:r>=60&&r<120?[s,a,0]:r>=120&&r<180?[0,a,s]:r>=180&&r<240?[0,s,a]:r>=240&&r<300?[s,0,a]:[a,0,s],[255*(u+l),255*(c+l),255*(d+l)]}function gr(t,e,n){const r=n+e*(100-Math.abs(2*n-100))/200;return[t,0!==r?e*(100-Math.abs(2*n-100))/r:0,n+e*(100-Math.abs(2*n-100))/200]}function vr(t,e,n){const r=100-Math.abs(n*(200-e)/100-100);return[t,0!==r?e*n/r:0,n*(200-e)/200]}function yr(t){return[t[0],t[1],t[2]]}function br(t,e){return[t[0],t[1],t[2],e]}const _r={hsl:{hsl:(t,e,n)=>[t,e,n],hsv:gr,rgb:hr},hsv:{hsl:vr,hsv:(t,e,n)=>[t,e,n],rgb:mr},rgb:{hsl:fr,hsv:pr,rgb:(t,e,n)=>[t,e,n]}};function wr(t,e){return["float"===e?1:"rgb"===t?255:360,"float"===e?1:"rgb"===t?255:100,"float"===e?1:"rgb"===t?255:100]}function Ar(t,e){return t===e?e:zn(t,e)}function Er(t,e,n){var r;const i=wr(e,n);return["rgb"===e?jn(t[0],0,i[0]):Ar(t[0],i[0]),jn(t[1],0,i[1]),jn(t[2],0,i[2]),jn(null!==(r=t[3])&&void 0!==r?r:1,0,1)]}function xr(t,e,n,r){const i=wr(e,n),o=wr(e,r);return t.map(((t,e)=>t/i[e]*o[e]))}function Sr(t,e,n){const r=xr(t,e.mode,e.type,"int");return xr(_r[e.mode][n.mode](...r),n.mode,"int",n.type)}function Tr(t,e){return"object"==typeof t&&!u(t)&&e in t&&"number"==typeof t[e]}class Cr{static black(t="int"){return new Cr([0,0,0],"rgb",t)}static fromObject(t,e="int"){const n="a"in t?[t.r,t.g,t.b,t.a]:[t.r,t.g,t.b];return new Cr(n,"rgb",e)}static toRgbaObject(t,e="int"){return t.toRgbaObject(e)}static isRgbColorObject(t){return Tr(t,"r")&&Tr(t,"g")&&Tr(t,"b")}static isRgbaColorObject(t){return this.isRgbColorObject(t)&&Tr(t,"a")}static isColorObject(t){return this.isRgbColorObject(t)}static equals(t,e){if(t.mode!==e.mode)return!1;const n=t.comps_,r=e.comps_;for(let t=0;t<n.length;t++)if(n[t]!==r[t])return!1;return!0}constructor(t,e,n="int"){this.mode=e,this.type=n,this.comps_=Er(t,e,n)}getComponents(t,e="int"){return br(Sr(yr(this.comps_),{mode:this.mode,type:this.type},{mode:null!=t?t:this.mode,type:e}),this.comps_[3])}toRgbaObject(t="int"){const e=this.getComponents("rgb",t);return{r:e[0],g:e[1],b:e[2],a:e[3]}}}const Ir=y("colp");class kr{constructor(t,e){this.alphaViews_=null,this.element=t.createElement("div"),this.element.classList.add(Ir()),e.viewProps.bindClassModifiers(this.element);const n=t.createElement("div");n.classList.add(Ir("hsv"));const r=t.createElement("div");r.classList.add(Ir("sv")),this.svPaletteView_=e.svPaletteView,r.appendChild(this.svPaletteView_.element),n.appendChild(r);const i=t.createElement("div");i.classList.add(Ir("h")),this.hPaletteView_=e.hPaletteView,i.appendChild(this.hPaletteView_.element),n.appendChild(i),this.element.appendChild(n);const o=t.createElement("div");if(o.classList.add(Ir("rgb")),this.textView_=e.textView,o.appendChild(this.textView_.element),this.element.appendChild(o),e.alphaViews){this.alphaViews_={palette:e.alphaViews.palette,text:e.alphaViews.text};const n=t.createElement("div");n.classList.add(Ir("a"));const r=t.createElement("div");r.classList.add(Ir("ap")),r.appendChild(this.alphaViews_.palette.element),n.appendChild(r);const i=t.createElement("div");i.classList.add(Ir("at")),i.appendChild(this.alphaViews_.text.element),n.appendChild(i),this.element.appendChild(n)}}get allFocusableElements(){const t=[this.svPaletteView_.element,this.hPaletteView_.element,this.textView_.modeSelectElement,...this.textView_.textViews.map((t=>t.inputElement))];return this.alphaViews_&&t.push(this.alphaViews_.palette.element,this.alphaViews_.text.inputElement),t}}function Pr(t){return"int"===t?"int":"float"===t?"float":void 0}function Rr(t){const e=j;return z(t,{alpha:e.optional.boolean,color:e.optional.object({alpha:e.optional.boolean,type:e.optional.custom(Pr)}),expanded:e.optional.boolean,picker:e.optional.custom($n)})}function Or(t){return t?.1:1}function Mr(t){var e;return null===(e=t.color)||void 0===e?void 0:e.type}function Lr(t,e){return t.alpha===e.alpha&&t.mode===e.mode&&t.notation===e.notation&&t.type===e.type}function Dr(t,e){const n=t.match(/^(.+)%$/);return n?Math.min(.01*parseFloat(n[1])*e,e):Math.min(parseFloat(t),e)}const Nr={deg:t=>t,grad:t=>360*t/400,rad:t=>360*t/(2*Math.PI),turn:t=>360*t};function Br(t){const e=t.match(/^([0-9.]+?)(deg|grad|rad|turn)$/);if(!e)return parseFloat(t);const n=parseFloat(e[1]),r=e[2];return Nr[r](n)}function jr(t){const e=t.match(/^rgb\(\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*\)$/);if(!e)return null;const n=[Dr(e[1],255),Dr(e[2],255),Dr(e[3],255)];return isNaN(n[0])||isNaN(n[1])||isNaN(n[2])?null:n}function zr(t){return e=>{const n=jr(e);return n?new Cr(n,"rgb",t):null}}function Fr(t){const e=t.match(/^rgba\(\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*\)$/);if(!e)return null;const n=[Dr(e[1],255),Dr(e[2],255),Dr(e[3],255),Dr(e[4],1)];return isNaN(n[0])||isNaN(n[1])||isNaN(n[2])||isNaN(n[3])?null:n}function Ur(t){return e=>{const n=Fr(e);return n?new Cr(n,"rgb",t):null}}function qr(t){const e=t.match(/^hsl\(\s*([0-9A-Fa-f.]+(?:deg|grad|rad|turn)?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*\)$/);if(!e)return null;const n=[Br(e[1]),Dr(e[2],100),Dr(e[3],100)];return isNaN(n[0])||isNaN(n[1])||isNaN(n[2])?null:n}function Gr(t){return e=>{const n=qr(e);return n?new Cr(n,"hsl",t):null}}function Hr(t){const e=t.match(/^hsla\(\s*([0-9A-Fa-f.]+(?:deg|grad|rad|turn)?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*\)$/);if(!e)return null;const n=[Br(e[1]),Dr(e[2],100),Dr(e[3],100),Dr(e[4],1)];return isNaN(n[0])||isNaN(n[1])||isNaN(n[2])||isNaN(n[3])?null:n}function Vr(t){return e=>{const n=Hr(e);return n?new Cr(n,"hsl",t):null}}function Qr(t){const e=t.match(/^#([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])$/);if(e)return[parseInt(e[1]+e[1],16),parseInt(e[2]+e[2],16),parseInt(e[3]+e[3],16)];const n=t.match(/^(?:#|0x)([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})$/);return n?[parseInt(n[1],16),parseInt(n[2],16),parseInt(n[3],16)]:null}function Wr(t){const e=Qr(t);return e?new Cr(e,"rgb","int"):null}function Yr(t){const e=t.match(/^#?([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])$/);if(e)return[parseInt(e[1]+e[1],16),parseInt(e[2]+e[2],16),parseInt(e[3]+e[3],16),Nn(parseInt(e[4]+e[4],16),0,255,0,1)];const n=t.match(/^(?:#|0x)?([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})$/);return n?[parseInt(n[1],16),parseInt(n[2],16),parseInt(n[3],16),Nn(parseInt(n[4],16),0,255,0,1)]:null}function Kr(t){const e=Yr(t);return e?new Cr(e,"rgb","int"):null}function Xr(t){const e=t.match(/^\{\s*r\s*:\s*([0-9A-Fa-f.]+%?)\s*,\s*g\s*:\s*([0-9A-Fa-f.]+%?)\s*,\s*b\s*:\s*([0-9A-Fa-f.]+%?)\s*\}$/);if(!e)return null;const n=[parseFloat(e[1]),parseFloat(e[2]),parseFloat(e[3])];return isNaN(n[0])||isNaN(n[1])||isNaN(n[2])?null:n}function $r(t){return e=>{const n=Xr(e);return n?new Cr(n,"rgb",t):null}}function Zr(t){const e=t.match(/^\{\s*r\s*:\s*([0-9A-Fa-f.]+%?)\s*,\s*g\s*:\s*([0-9A-Fa-f.]+%?)\s*,\s*b\s*:\s*([0-9A-Fa-f.]+%?)\s*,\s*a\s*:\s*([0-9A-Fa-f.]+%?)\s*\}$/);if(!e)return null;const n=[parseFloat(e[1]),parseFloat(e[2]),parseFloat(e[3]),parseFloat(e[4])];return isNaN(n[0])||isNaN(n[1])||isNaN(n[2])||isNaN(n[3])?null:n}function Jr(t){return e=>{const n=Zr(e);return n?new Cr(n,"rgb",t):null}}const ti=[{parser:Qr,result:{alpha:!1,mode:"rgb",notation:"hex"}},{parser:Yr,result:{alpha:!0,mode:"rgb",notation:"hex"}},{parser:jr,result:{alpha:!1,mode:"rgb",notation:"func"}},{parser:Fr,result:{alpha:!0,mode:"rgb",notation:"func"}},{parser:qr,result:{alpha:!1,mode:"hsl",notation:"func"}},{parser:Hr,result:{alpha:!0,mode:"hsl",notation:"func"}},{parser:Xr,result:{alpha:!1,mode:"rgb",notation:"object"}},{parser:Zr,result:{alpha:!0,mode:"rgb",notation:"object"}}];function ei(t){return ti.reduce(((e,{parser:n,result:r})=>e||(n(t)?r:null)),null)}function ni(t,e="int"){const n=ei(t);return n?"hex"===n.notation&&"float"!==e?Object.assign(Object.assign({},n),{type:"int"}):"func"===n.notation?Object.assign(Object.assign({},n),{type:e}):null:null}const ri={int:[Wr,Kr,zr("int"),Ur("int"),Gr("int"),Vr("int"),$r("int"),Jr("int")],float:[zr("float"),Ur("float"),Gr("float"),Vr("float"),$r("float"),Jr("float")]};function ii(t){const e=ri[t];return n=>{if("string"!=typeof n)return Cr.black(t);const r=e.reduce(((t,e)=>t||e(n)),null);return null!=r?r:Cr.black(t)}}function oi(t){const e=ri[t];return t=>e.reduce(((e,n)=>e||n(t)),null)}function ai(t){const e=jn(Math.floor(t),0,255).toString(16);return 1===e.length?`0${e}`:e}function si(t,e="#"){return`${e}${yr(t.getComponents("rgb")).map(ai).join("")}`}function li(t,e="#"){const n=t.getComponents("rgb");return`${e}${[n[0],n[1],n[2],255*n[3]].map(ai).join("")}`}function ui(t,e){const n=En("float"===e?2:0);return`rgb(${yr(t.getComponents("rgb",e)).map((t=>n(t))).join(", ")})`}function ci(t){return e=>ui(e,t)}function di(t,e){const n=En(2),r=En("float"===e?2:0);return`rgba(${t.getComponents("rgb",e).map(((t,e)=>(3===e?n:r)(t))).join(", ")})`}function fi(t){return e=>di(e,t)}function hi(t){const e=[En(0),Sn,Sn];return`hsl(${yr(t.getComponents("hsl")).map(((t,n)=>e[n](t))).join(", ")})`}function pi(t){const e=[En(0),Sn,Sn,En(2)];return`hsla(${t.getComponents("hsl").map(((t,n)=>e[n](t))).join(", ")})`}function mi(t,e){const n=En("float"===e?2:0),r=["r","g","b"];return`{${yr(t.getComponents("rgb",e)).map(((t,e)=>`${r[e]}: ${n(t)}`)).join(", ")}}`}function gi(t){return e=>mi(e,t)}function vi(t,e){const n=En(2),r=En("float"===e?2:0),i=["r","g","b","a"];return`{${t.getComponents("rgb",e).map(((t,e)=>{const o=3===e?n:r;return`${i[e]}: ${o(t)}`})).join(", ")}}`}function yi(t){return e=>vi(e,t)}const bi=[{format:{alpha:!1,mode:"rgb",notation:"hex",type:"int"},stringifier:si},{format:{alpha:!0,mode:"rgb",notation:"hex",type:"int"},stringifier:li},{format:{alpha:!1,mode:"hsl",notation:"func",type:"int"},stringifier:hi},{format:{alpha:!0,mode:"hsl",notation:"func",type:"int"},stringifier:pi},...["int","float"].reduce(((t,e)=>[...t,{format:{alpha:!1,mode:"rgb",notation:"func",type:e},stringifier:ci(e)},{format:{alpha:!0,mode:"rgb",notation:"func",type:e},stringifier:fi(e)},{format:{alpha:!1,mode:"rgb",notation:"object",type:e},stringifier:gi(e)},{format:{alpha:!0,mode:"rgb",notation:"object",type:e},stringifier:yi(e)}]),[])];function _i(t){return bi.reduce(((e,n)=>e||(Lr(n.format,t)?n.stringifier:null)),null)}const wi=y("apl");class Ai{constructor(t,e){this.onValueChange_=this.onValueChange_.bind(this),this.value=e.value,this.value.emitter.on("change",this.onValueChange_),this.element=t.createElement("div"),this.element.classList.add(wi()),e.viewProps.bindClassModifiers(this.element),e.viewProps.bindTabIndex(this.element);const n=t.createElement("div");n.classList.add(wi("b")),this.element.appendChild(n);const r=t.createElement("div");r.classList.add(wi("c")),n.appendChild(r),this.colorElem_=r;const i=t.createElement("div");i.classList.add(wi("m")),this.element.appendChild(i),this.markerElem_=i;const o=t.createElement("div");o.classList.add(wi("p")),this.markerElem_.appendChild(o),this.previewElem_=o,this.update_()}update_(){const t=this.value.rawValue,e=t.getComponents("rgb"),n=new Cr([e[0],e[1],e[2],0],"rgb"),r=new Cr([e[0],e[1],e[2],255],"rgb"),i=["to right",di(n),di(r)];this.colorElem_.style.background=`linear-gradient(${i.join(",")})`,this.previewElem_.style.backgroundColor=di(t);const o=Nn(e[3],0,1,0,100);this.markerElem_.style.left=`${o}%`}onValueChange_(){this.update_()}}class Ei{constructor(t,e){this.onKeyDown_=this.onKeyDown_.bind(this),this.onKeyUp_=this.onKeyUp_.bind(this),this.onPointerDown_=this.onPointerDown_.bind(this),this.onPointerMove_=this.onPointerMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.value=e.value,this.viewProps=e.viewProps,this.view=new Ai(t,{value:this.value,viewProps:this.viewProps}),this.ptHandler_=new Dn(this.view.element),this.ptHandler_.emitter.on("down",this.onPointerDown_),this.ptHandler_.emitter.on("move",this.onPointerMove_),this.ptHandler_.emitter.on("up",this.onPointerUp_),this.view.element.addEventListener("keydown",this.onKeyDown_),this.view.element.addEventListener("keyup",this.onKeyUp_)}handlePointerEvent_(t,e){if(!t.point)return;const n=t.point.x/t.bounds.width,r=this.value.rawValue,[i,o,a]=r.getComponents("hsv");this.value.setRawValue(new Cr([i,o,a,n],"hsv"),e)}onPointerDown_(t){this.handlePointerEvent_(t.data,{forceEmit:!1,last:!1})}onPointerMove_(t){this.handlePointerEvent_(t.data,{forceEmit:!1,last:!1})}onPointerUp_(t){this.handlePointerEvent_(t.data,{forceEmit:!0,last:!0})}onKeyDown_(t){const e=kn(Or(!0),Rn(t));if(0===e)return;const n=this.value.rawValue,[r,i,o,a]=n.getComponents("hsv");this.value.setRawValue(new Cr([r,i,o,a+e],"hsv"),{forceEmit:!1,last:!1})}onKeyUp_(t){0!==kn(Or(!0),Rn(t))&&this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})}}const xi=y("coltxt");function Si(t){const e=t.createElement("select"),n=[{text:"RGB",value:"rgb"},{text:"HSL",value:"hsl"},{text:"HSV",value:"hsv"}];return e.appendChild(n.reduce(((e,n)=>{const r=t.createElement("option");return r.textContent=n.text,r.value=n.value,e.appendChild(r),e}),t.createDocumentFragment())),e}class Ti{constructor(t,e){this.element=t.createElement("div"),this.element.classList.add(xi()),e.viewProps.bindClassModifiers(this.element);const n=t.createElement("div");n.classList.add(xi("m")),this.modeElem_=Si(t),this.modeElem_.classList.add(xi("ms")),n.appendChild(this.modeSelectElement),e.viewProps.bindDisabled(this.modeElem_);const r=t.createElement("div");r.classList.add(xi("mm")),r.appendChild(it(t,"dropdown")),n.appendChild(r),this.element.appendChild(n);const i=t.createElement("div");i.classList.add(xi("w")),this.element.appendChild(i),this.textsElem_=i,this.textViews_=e.textViews,this.applyTextViews_(),w(e.colorMode,(t=>{this.modeElem_.value=t}))}get modeSelectElement(){return this.modeElem_}get textViews(){return this.textViews_}set textViews(t){this.textViews_=t,this.applyTextViews_()}applyTextViews_(){st(this.textsElem_);const t=this.element.ownerDocument;this.textViews_.forEach((e=>{const n=t.createElement("div");n.classList.add(xi("c")),n.appendChild(e.element),this.textsElem_.appendChild(n)}))}}function Ci(t){return En("float"===t?2:0)}function Ii(t,e,n){const r=wr(t,e)[n];return new xe({min:0,max:r})}function ki(t,e,n){return new qn(t,{arrayPosition:0===n?"fst":2===n?"lst":"mid",baseStep:Or(!1),parser:e.parser,props:O.fromObject({draggingScale:"float"===e.colorType?.01:1,formatter:Ci(e.colorType)}),value:R(0,{constraint:Ii(e.colorMode,e.colorType,n)}),viewProps:e.viewProps})}class Pi{constructor(t,e){this.onModeSelectChange_=this.onModeSelectChange_.bind(this),this.colorType_=e.colorType,this.parser_=e.parser,this.value=e.value,this.viewProps=e.viewProps,this.colorMode=R(this.value.rawValue.mode),this.ccs_=this.createComponentControllers_(t),this.view=new Ti(t,{colorMode:this.colorMode,textViews:[this.ccs_[0].view,this.ccs_[1].view,this.ccs_[2].view],viewProps:this.viewProps}),this.view.modeSelectElement.addEventListener("change",this.onModeSelectChange_)}createComponentControllers_(t){const e={colorMode:this.colorMode.rawValue,colorType:this.colorType_,parser:this.parser_,viewProps:this.viewProps},n=[ki(t,e,0),ki(t,e,1),ki(t,e,2)];return n.forEach(((t,e)=>{In({primary:this.value,secondary:t.value,forward:t=>t.rawValue.getComponents(this.colorMode.rawValue,this.colorType_)[e],backward:(t,n)=>{const r=this.colorMode.rawValue,i=t.rawValue.getComponents(r,this.colorType_);return i[e]=n.rawValue,new Cr(br(yr(i),i[3]),r,this.colorType_)}})})),n}onModeSelectChange_(t){const e=t.currentTarget;this.colorMode.rawValue=e.value,this.ccs_=this.createComponentControllers_(this.view.element.ownerDocument),this.view.textViews=[this.ccs_[0].view,this.ccs_[1].view,this.ccs_[2].view]}}const Ri=y("hpl");class Oi{constructor(t,e){this.onValueChange_=this.onValueChange_.bind(this),this.value=e.value,this.value.emitter.on("change",this.onValueChange_),this.element=t.createElement("div"),this.element.classList.add(Ri()),e.viewProps.bindClassModifiers(this.element),e.viewProps.bindTabIndex(this.element);const n=t.createElement("div");n.classList.add(Ri("c")),this.element.appendChild(n);const r=t.createElement("div");r.classList.add(Ri("m")),this.element.appendChild(r),this.markerElem_=r,this.update_()}update_(){const t=this.value.rawValue,[e]=t.getComponents("hsv");this.markerElem_.style.backgroundColor=ui(new Cr([e,100,100],"hsv"));const n=Nn(e,0,360,0,100);this.markerElem_.style.left=`${n}%`}onValueChange_(){this.update_()}}class Mi{constructor(t,e){this.onKeyDown_=this.onKeyDown_.bind(this),this.onKeyUp_=this.onKeyUp_.bind(this),this.onPointerDown_=this.onPointerDown_.bind(this),this.onPointerMove_=this.onPointerMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.value=e.value,this.viewProps=e.viewProps,this.view=new Oi(t,{value:this.value,viewProps:this.viewProps}),this.ptHandler_=new Dn(this.view.element),this.ptHandler_.emitter.on("down",this.onPointerDown_),this.ptHandler_.emitter.on("move",this.onPointerMove_),this.ptHandler_.emitter.on("up",this.onPointerUp_),this.view.element.addEventListener("keydown",this.onKeyDown_),this.view.element.addEventListener("keyup",this.onKeyUp_)}handlePointerEvent_(t,e){if(!t.point)return;const n=Nn(jn(t.point.x,0,t.bounds.width),0,t.bounds.width,0,360),r=this.value.rawValue,[,i,o,a]=r.getComponents("hsv");this.value.setRawValue(new Cr([n,i,o,a],"hsv"),e)}onPointerDown_(t){this.handlePointerEvent_(t.data,{forceEmit:!1,last:!1})}onPointerMove_(t){this.handlePointerEvent_(t.data,{forceEmit:!1,last:!1})}onPointerUp_(t){this.handlePointerEvent_(t.data,{forceEmit:!0,last:!0})}onKeyDown_(t){const e=kn(Or(!1),Rn(t));if(0===e)return;const n=this.value.rawValue,[r,i,o,a]=n.getComponents("hsv");this.value.setRawValue(new Cr([r+e,i,o,a],"hsv"),{forceEmit:!1,last:!1})}onKeyUp_(t){0!==kn(Or(!1),Rn(t))&&this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})}}const Li=y("svp"),Di=64;class Ni{constructor(t,e){this.onValueChange_=this.onValueChange_.bind(this),this.value=e.value,this.value.emitter.on("change",this.onValueChange_),this.element=t.createElement("div"),this.element.classList.add(Li()),e.viewProps.bindClassModifiers(this.element),e.viewProps.bindTabIndex(this.element);const n=t.createElement("canvas");n.height=Di,n.width=Di,n.classList.add(Li("c")),this.element.appendChild(n),this.canvasElement=n;const r=t.createElement("div");r.classList.add(Li("m")),this.element.appendChild(r),this.markerElem_=r,this.update_()}update_(){const t=nt(this.canvasElement);if(!t)return;const e=this.value.rawValue.getComponents("hsv"),n=this.canvasElement.width,r=this.canvasElement.height,i=t.getImageData(0,0,n,r),o=i.data;for(let t=0;t<r;t++)for(let i=0;i<n;i++){const a=Nn(i,0,n,0,100),s=Nn(t,0,r,100,0),l=mr(e[0],a,s),u=4*(t*n+i);o[u]=l[0],o[u+1]=l[1],o[u+2]=l[2],o[u+3]=255}t.putImageData(i,0,0);const a=Nn(e[1],0,100,0,100);this.markerElem_.style.left=`${a}%`;const s=Nn(e[2],0,100,100,0);this.markerElem_.style.top=`${s}%`}onValueChange_(){this.update_()}}class Bi{constructor(t,e){this.onKeyDown_=this.onKeyDown_.bind(this),this.onKeyUp_=this.onKeyUp_.bind(this),this.onPointerDown_=this.onPointerDown_.bind(this),this.onPointerMove_=this.onPointerMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.value=e.value,this.viewProps=e.viewProps,this.view=new Ni(t,{value:this.value,viewProps:this.viewProps}),this.ptHandler_=new Dn(this.view.element),this.ptHandler_.emitter.on("down",this.onPointerDown_),this.ptHandler_.emitter.on("move",this.onPointerMove_),this.ptHandler_.emitter.on("up",this.onPointerUp_),this.view.element.addEventListener("keydown",this.onKeyDown_),this.view.element.addEventListener("keyup",this.onKeyUp_)}handlePointerEvent_(t,e){if(!t.point)return;const n=Nn(t.point.x,0,t.bounds.width,0,100),r=Nn(t.point.y,0,t.bounds.height,100,0),[i,,,o]=this.value.rawValue.getComponents("hsv");this.value.setRawValue(new Cr([i,n,r,o],"hsv"),e)}onPointerDown_(t){this.handlePointerEvent_(t.data,{forceEmit:!1,last:!1})}onPointerMove_(t){this.handlePointerEvent_(t.data,{forceEmit:!1,last:!1})}onPointerUp_(t){this.handlePointerEvent_(t.data,{forceEmit:!0,last:!0})}onKeyDown_(t){Mn(t.key)&&t.preventDefault();const[e,n,r,i]=this.value.rawValue.getComponents("hsv"),o=Or(!1),a=kn(o,Rn(t)),s=kn(o,Pn(t));0===a&&0===s||this.value.setRawValue(new Cr([e,n+a,r+s,i],"hsv"),{forceEmit:!1,last:!1})}onKeyUp_(t){const e=Or(!1),n=kn(e,Rn(t)),r=kn(e,Pn(t));0===n&&0===r||this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})}}class ji{constructor(t,e){this.value=e.value,this.viewProps=e.viewProps,this.hPaletteC_=new Mi(t,{value:this.value,viewProps:this.viewProps}),this.svPaletteC_=new Bi(t,{value:this.value,viewProps:this.viewProps}),this.alphaIcs_=e.supportsAlpha?{palette:new Ei(t,{value:this.value,viewProps:this.viewProps}),text:new qn(t,{parser:_n,baseStep:.1,props:O.fromObject({draggingScale:.01,formatter:En(2)}),value:R(0,{constraint:new xe({min:0,max:1})}),viewProps:this.viewProps})}:null,this.alphaIcs_&&In({primary:this.value,secondary:this.alphaIcs_.text.value,forward:t=>t.rawValue.getComponents()[3],backward:(t,e)=>{const n=t.rawValue.getComponents();return n[3]=e.rawValue,new Cr(n,t.rawValue.mode)}}),this.textC_=new Pi(t,{colorType:e.colorType,parser:_n,value:this.value,viewProps:this.viewProps}),this.view=new kr(t,{alphaViews:this.alphaIcs_?{palette:this.alphaIcs_.palette.view,text:this.alphaIcs_.text.view}:null,hPaletteView:this.hPaletteC_.view,supportsAlpha:e.supportsAlpha,svPaletteView:this.svPaletteC_.view,textView:this.textC_.view,viewProps:this.viewProps})}get textController(){return this.textC_}}const zi=y("colsw");class Fi{constructor(t,e){this.onValueChange_=this.onValueChange_.bind(this),e.value.emitter.on("change",this.onValueChange_),this.value=e.value,this.element=t.createElement("div"),this.element.classList.add(zi()),e.viewProps.bindClassModifiers(this.element);const n=t.createElement("div");n.classList.add(zi("sw")),this.element.appendChild(n),this.swatchElem_=n;const r=t.createElement("button");r.classList.add(zi("b")),e.viewProps.bindDisabled(r),this.element.appendChild(r),this.buttonElement=r,this.update_()}update_(){const t=this.value.rawValue;this.swatchElem_.style.backgroundColor=li(t)}onValueChange_(){this.update_()}}class Ui{constructor(t,e){this.value=e.value,this.viewProps=e.viewProps,this.view=new Fi(t,{value:this.value,viewProps:this.viewProps})}}class qi{constructor(t,e){this.onButtonBlur_=this.onButtonBlur_.bind(this),this.onButtonClick_=this.onButtonClick_.bind(this),this.onPopupChildBlur_=this.onPopupChildBlur_.bind(this),this.onPopupChildKeydown_=this.onPopupChildKeydown_.bind(this),this.value=e.value,this.viewProps=e.viewProps,this.foldable_=vt.create(e.expanded),this.swatchC_=new Ui(t,{value:this.value,viewProps:this.viewProps});const n=this.swatchC_.view.buttonElement;n.addEventListener("blur",this.onButtonBlur_),n.addEventListener("click",this.onButtonClick_),this.textC_=new Ne(t,{parser:e.parser,props:O.fromObject({formatter:e.formatter}),value:this.value,viewProps:this.viewProps}),this.view=new dr(t,{foldable:this.foldable_,pickerLayout:e.pickerLayout}),this.view.swatchElement.appendChild(this.swatchC_.view.element),this.view.textElement.appendChild(this.textC_.view.element),this.popC_="popup"===e.pickerLayout?new Me(t,{viewProps:this.viewProps}):null;const r=new ji(t,{colorType:e.colorType,supportsAlpha:e.supportsAlpha,value:this.value,viewProps:this.viewProps});r.view.allFocusableElements.forEach((t=>{t.addEventListener("blur",this.onPopupChildBlur_),t.addEventListener("keydown",this.onPopupChildKeydown_)})),this.pickerC_=r,this.popC_?(this.view.element.appendChild(this.popC_.view.element),this.popC_.view.element.appendChild(r.view.element),In({primary:this.foldable_.value("expanded"),secondary:this.popC_.shows,forward:t=>t.rawValue,backward:(t,e)=>e.rawValue})):this.view.pickerElement&&(this.view.pickerElement.appendChild(this.pickerC_.view.element),_t(this.foldable_,this.view.pickerElement))}get textController(){return this.textC_}onButtonBlur_(t){if(!this.popC_)return;const e=this.view.element,n=l(t.relatedTarget);n&&e.contains(n)||(this.popC_.shows.rawValue=!1)}onButtonClick_(){this.foldable_.set("expanded",!this.foldable_.get("expanded")),this.foldable_.get("expanded")&&this.pickerC_.view.allFocusableElements[0].focus()}onPopupChildBlur_(t){if(!this.popC_)return;const e=this.popC_.view.element,n=ut(t);n&&e.contains(n)||n&&n===this.swatchC_.view.buttonElement&&!J(e.ownerDocument)||(this.popC_.shows.rawValue=!1)}onPopupChildKeydown_(t){this.popC_?"Escape"===t.key&&(this.popC_.shows.rawValue=!1):this.view.pickerElement&&"Escape"===t.key&&this.swatchC_.view.buttonElement.focus()}}function Gi(t,e){return Cr.isColorObject(t)?Cr.fromObject(t,e):Cr.black(e)}function Hi(t){return yr(t.getComponents("rgb")).reduce(((t,e)=>t<<8|255&Math.floor(e)),0)}function Vi(t){return t.getComponents("rgb").reduce(((t,e,n)=>t<<8|255&Math.floor(3===n?255*e:e)),0)>>>0}function Qi(t){return new Cr([t>>16&255,t>>8&255,255&t],"rgb")}function Wi(t){return new Cr([t>>24&255,t>>16&255,t>>8&255,Nn(255&t,0,255,0,1)],"rgb")}function Yi(t){return"number"!=typeof t?Cr.black():Qi(t)}function Ki(t){return"number"!=typeof t?Cr.black():Wi(t)}function Xi(t){const e=_i(t);return e?(t,n)=>{Kn(t,e(n))}:null}function $i(t){const e=t?Vi:Hi;return(t,n)=>{Kn(t,e(n))}}function Zi(t,e,n){const r=e.toRgbaObject(n);t.writeProperty("r",r.r),t.writeProperty("g",r.g),t.writeProperty("b",r.b),t.writeProperty("a",r.a)}function Ji(t,e,n){const r=e.toRgbaObject(n);t.writeProperty("r",r.r),t.writeProperty("g",r.g),t.writeProperty("b",r.b)}function to(t,e){return(n,r)=>{t?Zi(n,r,e):Ji(n,r,e)}}function eo(t){var e;return!(!(null==t?void 0:t.alpha)&&!(null===(e=null==t?void 0:t.color)||void 0===e?void 0:e.alpha))}function no(t){return t?t=>li(t,"0x"):t=>si(t,"0x")}function ro(t){return"color"in t||"view"in t&&"color"===t.view}const io={id:"input-color-number",type:"input",accept:(t,e)=>{if("number"!=typeof t)return null;if(!ro(e))return null;const n=Rr(e);return n?{initialValue:t,params:n}:null},binding:{reader:t=>eo(t.params)?Ki:Yi,equals:Cr.equals,writer:t=>$i(eo(t.params))},controller:t=>{const e=eo(t.params),n="expanded"in t.params?t.params.expanded:void 0,r="picker"in t.params?t.params.picker:void 0;return new qi(t.document,{colorType:"int",expanded:null!=n&&n,formatter:no(e),parser:oi("int"),pickerLayout:null!=r?r:"popup",supportsAlpha:e,value:t.value,viewProps:t.viewProps})}};function oo(t){return Cr.isRgbaColorObject(t)}function ao(t){return e=>Gi(e,t)}function so(t,e){return n=>t?vi(n,e):mi(n,e)}const lo={id:"input-color-object",type:"input",accept:(t,e)=>{if(!Cr.isColorObject(t))return null;const n=Rr(e);return n?{initialValue:t,params:n}:null},binding:{reader:t=>ao(Mr(t.params)),equals:Cr.equals,writer:t=>to(oo(t.initialValue),Mr(t.params))},controller:t=>{var e;const n=Cr.isRgbaColorObject(t.initialValue),r="expanded"in t.params?t.params.expanded:void 0,i="picker"in t.params?t.params.picker:void 0,o=null!==(e=Mr(t.params))&&void 0!==e?e:"int";return new qi(t.document,{colorType:o,expanded:null!=r&&r,formatter:so(n,o),parser:oi(o),pickerLayout:null!=i?i:"popup",supportsAlpha:n,value:t.value,viewProps:t.viewProps})}},uo={id:"input-color-string",type:"input",accept:(t,e)=>{if("string"!=typeof t)return null;if("view"in e&&"text"===e.view)return null;const n=ni(t,Mr(e));if(!n)return null;if(!_i(n))return null;const r=Rr(e);return r?{initialValue:t,params:r}:null},binding:{reader:t=>{var e;return ii(null!==(e=Mr(t.params))&&void 0!==e?e:"int")},equals:Cr.equals,writer:t=>{const e=ni(t.initialValue,Mr(t.params));if(!e)throw h.shouldNeverHappen();const n=Xi(e);if(!n)throw h.notBindable();return n}},controller:t=>{const e=ni(t.initialValue,Mr(t.params));if(!e)throw h.shouldNeverHappen();const n=_i(e);if(!n)throw h.shouldNeverHappen();const r="expanded"in t.params?t.params.expanded:void 0,i="picker"in t.params?t.params.picker:void 0;return new qi(t.document,{colorType:e.type,expanded:null!=r&&r,formatter:n,parser:oi(e.type),pickerLayout:null!=i?i:"popup",supportsAlpha:e.alpha,value:t.value,viewProps:t.viewProps})}};class co{constructor(t){this.components=t.components,this.asm_=t.assembly}constrain(t){const e=this.asm_.toComponents(t).map(((t,e)=>{var n,r;return null!==(r=null===(n=this.components[e])||void 0===n?void 0:n.constrain(t))&&void 0!==r?r:t}));return this.asm_.fromComponents(e)}}const fo=y("pndtxt");class ho{constructor(t,e){this.textViews=e.textViews,this.element=t.createElement("div"),this.element.classList.add(fo()),this.textViews.forEach((e=>{const n=t.createElement("div");n.classList.add(fo("a")),n.appendChild(e.element),this.element.appendChild(n)}))}}function po(t,e,n){return new qn(t,{arrayPosition:0===n?"fst":n===e.axes.length-1?"lst":"mid",baseStep:e.axes[n].baseStep,parser:e.parser,props:e.axes[n].textProps,value:R(0,{constraint:e.axes[n].constraint}),viewProps:e.viewProps})}class mo{constructor(t,e){this.value=e.value,this.viewProps=e.viewProps,this.acs_=e.axes.map(((n,r)=>po(t,e,r))),this.acs_.forEach(((t,n)=>{In({primary:this.value,secondary:t.value,forward:t=>e.assembly.toComponents(t.rawValue)[n],backward:(t,r)=>{const i=e.assembly.toComponents(t.rawValue);return i[n]=r.rawValue,e.assembly.fromComponents(i)}})})),this.view=new ho(t,{textViews:this.acs_.map((t=>t.view))})}}function go(t,e){return"step"in t&&!u(t.step)?new Ce(t.step,e):null}function vo(t){return u(t.max)||u(t.min)?u(t.max)&&u(t.min)?null:new Te({max:t.max,min:t.min}):new xe({max:t.max,min:t.min})}function yo(t){const e=Ee(t,xe);if(e)return[e.values.get("min"),e.values.get("max")];const n=Ee(t,Te);return n?[n.minValue,n.maxValue]:[void 0,void 0]}function bo(t,e){const n=[],r=go(t,e);r&&n.push(r);const i=vo(t);i&&n.push(i);const o=tr(t.options);return o&&n.push(o),new Ae(n)}const _o={id:"input-number",type:"input",accept:(t,e)=>{if("number"!=typeof t)return null;const n=j,r=z(e,{format:n.optional.function,max:n.optional.number,min:n.optional.number,options:n.optional.custom(Xn),step:n.optional.number});return r?{initialValue:t,params:r}:null},binding:{reader:t=>wn,constraint:t=>bo(t.params,t.initialValue),writer:t=>Kn},controller:t=>{var e;const n=t.value,r=t.constraint,i=r&&Ee(r,Se);if(i)return new Pe(t.document,{props:new O({options:i.values.value("options")}),value:n,viewProps:t.viewProps});const o=null!==(e="format"in t.params?t.params.format:void 0)&&void 0!==e?e:En(nr(r,n.rawValue)),a=r&&Ee(r,xe);return a?new Yn(t.document,{baseStep:rr(r),parser:_n,sliderProps:new O({maxValue:a.values.value("max"),minValue:a.values.value("min")}),textProps:O.fromObject({draggingScale:ir(r,n.rawValue),formatter:o}),value:n,viewProps:t.viewProps}):new qn(t.document,{baseStep:rr(r),parser:_n,props:O.fromObject({draggingScale:ir(r,n.rawValue),formatter:o}),value:n,viewProps:t.viewProps})}};class wo{constructor(t=0,e=0){this.x=t,this.y=e}getComponents(){return[this.x,this.y]}static isObject(t){if(u(t))return!1;const e=t.x,n=t.y;return"number"==typeof e&&"number"==typeof n}static equals(t,e){return t.x===e.x&&t.y===e.y}toObject(){return{x:this.x,y:this.y}}}const Ao={toComponents:t=>t.getComponents(),fromComponents:t=>new wo(...t)},Eo=y("p2d");class xo{constructor(t,e){this.element=t.createElement("div"),this.element.classList.add(Eo()),e.viewProps.bindClassModifiers(this.element),w(e.expanded,x(this.element,Eo(void 0,"expanded")));const n=t.createElement("div");n.classList.add(Eo("h")),this.element.appendChild(n);const r=t.createElement("button");r.classList.add(Eo("b")),r.appendChild(it(t,"p2dpad")),e.viewProps.bindDisabled(r),n.appendChild(r),this.buttonElement=r;const i=t.createElement("div");if(i.classList.add(Eo("t")),n.appendChild(i),this.textElement=i,"inline"===e.pickerLayout){const e=t.createElement("div");e.classList.add(Eo("p")),this.element.appendChild(e),this.pickerElement=e}else this.pickerElement=null}}const So=y("p2dp");class To{constructor(t,e){this.onFoldableChange_=this.onFoldableChange_.bind(this),this.onValueChange_=this.onValueChange_.bind(this),this.invertsY_=e.invertsY,this.maxValue_=e.maxValue,this.element=t.createElement("div"),this.element.classList.add(So()),"popup"===e.layout&&this.element.classList.add(So(void 0,"p")),e.viewProps.bindClassModifiers(this.element);const n=t.createElement("div");n.classList.add(So("p")),e.viewProps.bindTabIndex(n),this.element.appendChild(n),this.padElement=n;const r=t.createElementNS(X,"svg");r.classList.add(So("g")),this.padElement.appendChild(r),this.svgElem_=r;const i=t.createElementNS(X,"line");i.classList.add(So("ax")),i.setAttributeNS(null,"x1","0"),i.setAttributeNS(null,"y1","50%"),i.setAttributeNS(null,"x2","100%"),i.setAttributeNS(null,"y2","50%"),this.svgElem_.appendChild(i);const o=t.createElementNS(X,"line");o.classList.add(So("ax")),o.setAttributeNS(null,"x1","50%"),o.setAttributeNS(null,"y1","0"),o.setAttributeNS(null,"x2","50%"),o.setAttributeNS(null,"y2","100%"),this.svgElem_.appendChild(o);const a=t.createElementNS(X,"line");a.classList.add(So("l")),a.setAttributeNS(null,"x1","50%"),a.setAttributeNS(null,"y1","50%"),this.svgElem_.appendChild(a),this.lineElem_=a;const s=t.createElement("div");s.classList.add(So("m")),this.padElement.appendChild(s),this.markerElem_=s,e.value.emitter.on("change",this.onValueChange_),this.value=e.value,this.update_()}get allFocusableElements(){return[this.padElement]}update_(){const[t,e]=this.value.rawValue.getComponents(),n=this.maxValue_,r=Nn(t,-n,+n,0,100),i=Nn(e,-n,+n,0,100),o=this.invertsY_?100-i:i;this.lineElem_.setAttributeNS(null,"x2",`${r}%`),this.lineElem_.setAttributeNS(null,"y2",`${o}%`),this.markerElem_.style.left=`${r}%`,this.markerElem_.style.top=`${o}%`}onValueChange_(){this.update_()}onFoldableChange_(){this.update_()}}function Co(t,e,n){return[kn(e[0],Rn(t)),kn(e[1],Pn(t))*(n?1:-1)]}class Io{constructor(t,e){this.onPadKeyDown_=this.onPadKeyDown_.bind(this),this.onPadKeyUp_=this.onPadKeyUp_.bind(this),this.onPointerDown_=this.onPointerDown_.bind(this),this.onPointerMove_=this.onPointerMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.value=e.value,this.viewProps=e.viewProps,this.baseSteps_=e.baseSteps,this.maxValue_=e.maxValue,this.invertsY_=e.invertsY,this.view=new To(t,{invertsY:this.invertsY_,layout:e.layout,maxValue:this.maxValue_,value:this.value,viewProps:this.viewProps}),this.ptHandler_=new Dn(this.view.padElement),this.ptHandler_.emitter.on("down",this.onPointerDown_),this.ptHandler_.emitter.on("move",this.onPointerMove_),this.ptHandler_.emitter.on("up",this.onPointerUp_),this.view.padElement.addEventListener("keydown",this.onPadKeyDown_),this.view.padElement.addEventListener("keyup",this.onPadKeyUp_)}handlePointerEvent_(t,e){if(!t.point)return;const n=this.maxValue_,r=Nn(t.point.x,0,t.bounds.width,-n,+n),i=Nn(this.invertsY_?t.bounds.height-t.point.y:t.point.y,0,t.bounds.height,-n,+n);this.value.setRawValue(new wo(r,i),e)}onPointerDown_(t){this.handlePointerEvent_(t.data,{forceEmit:!1,last:!1})}onPointerMove_(t){this.handlePointerEvent_(t.data,{forceEmit:!1,last:!1})}onPointerUp_(t){this.handlePointerEvent_(t.data,{forceEmit:!0,last:!0})}onPadKeyDown_(t){Mn(t.key)&&t.preventDefault();const[e,n]=Co(t,this.baseSteps_,this.invertsY_);0===e&&0===n||this.value.setRawValue(new wo(this.value.rawValue.x+e,this.value.rawValue.y+n),{forceEmit:!1,last:!1})}onPadKeyUp_(t){const[e,n]=Co(t,this.baseSteps_,this.invertsY_);0===e&&0===n||this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})}}class ko{constructor(t,e){var n,r;this.onPopupChildBlur_=this.onPopupChildBlur_.bind(this),this.onPopupChildKeydown_=this.onPopupChildKeydown_.bind(this),this.onPadButtonBlur_=this.onPadButtonBlur_.bind(this),this.onPadButtonClick_=this.onPadButtonClick_.bind(this),this.value=e.value,this.viewProps=e.viewProps,this.foldable_=vt.create(e.expanded),this.popC_="popup"===e.pickerLayout?new Me(t,{viewProps:this.viewProps}):null;const i=new Io(t,{baseSteps:[e.axes[0].baseStep,e.axes[1].baseStep],invertsY:e.invertsY,layout:e.pickerLayout,maxValue:e.maxValue,value:this.value,viewProps:this.viewProps});i.view.allFocusableElements.forEach((t=>{t.addEventListener("blur",this.onPopupChildBlur_),t.addEventListener("keydown",this.onPopupChildKeydown_)})),this.pickerC_=i,this.textC_=new mo(t,{assembly:Ao,axes:e.axes,parser:e.parser,value:this.value,viewProps:this.viewProps}),this.view=new xo(t,{expanded:this.foldable_.value("expanded"),pickerLayout:e.pickerLayout,viewProps:this.viewProps}),this.view.textElement.appendChild(this.textC_.view.element),null===(n=this.view.buttonElement)||void 0===n||n.addEventListener("blur",this.onPadButtonBlur_),null===(r=this.view.buttonElement)||void 0===r||r.addEventListener("click",this.onPadButtonClick_),this.popC_?(this.view.element.appendChild(this.popC_.view.element),this.popC_.view.element.appendChild(this.pickerC_.view.element),In({primary:this.foldable_.value("expanded"),secondary:this.popC_.shows,forward:t=>t.rawValue,backward:(t,e)=>e.rawValue})):this.view.pickerElement&&(this.view.pickerElement.appendChild(this.pickerC_.view.element),_t(this.foldable_,this.view.pickerElement))}onPadButtonBlur_(t){if(!this.popC_)return;const e=this.view.element,n=l(t.relatedTarget);n&&e.contains(n)||(this.popC_.shows.rawValue=!1)}onPadButtonClick_(){this.foldable_.set("expanded",!this.foldable_.get("expanded")),this.foldable_.get("expanded")&&this.pickerC_.view.allFocusableElements[0].focus()}onPopupChildBlur_(t){if(!this.popC_)return;const e=this.popC_.view.element,n=ut(t);n&&e.contains(n)||n&&n===this.view.buttonElement&&!J(e.ownerDocument)||(this.popC_.shows.rawValue=!1)}onPopupChildKeydown_(t){this.popC_?"Escape"===t.key&&(this.popC_.shows.rawValue=!1):this.view.pickerElement&&"Escape"===t.key&&this.view.buttonElement.focus()}}class Po{constructor(t=0,e=0,n=0){this.x=t,this.y=e,this.z=n}getComponents(){return[this.x,this.y,this.z]}static isObject(t){if(u(t))return!1;const e=t.x,n=t.y,r=t.z;return"number"==typeof e&&"number"==typeof n&&"number"==typeof r}static equals(t,e){return t.x===e.x&&t.y===e.y&&t.z===e.z}toObject(){return{x:this.x,y:this.y,z:this.z}}}const Ro={toComponents:t=>t.getComponents(),fromComponents:t=>new Po(...t)};function Oo(t){return Po.isObject(t)?new Po(t.x,t.y,t.z):new Po}function Mo(t,e){t.writeProperty("x",e.x),t.writeProperty("y",e.y),t.writeProperty("z",e.z)}function Lo(t,e){return new co({assembly:Ro,components:[ga("x"in t?t.x:void 0,e.x),ga("y"in t?t.y:void 0,e.y),ga("z"in t?t.z:void 0,e.z)]})}function Do(t,e){return{baseStep:rr(e),constraint:e,textProps:O.fromObject({draggingScale:ir(e,t),formatter:En(nr(e,t))})}}const No={id:"input-point3d",type:"input",accept:(t,e)=>{if(!Po.isObject(t))return null;const n=j,r=z(e,{x:n.optional.custom(Zn),y:n.optional.custom(Zn),z:n.optional.custom(Zn)});return r?{initialValue:t,params:r}:null},binding:{reader:t=>Oo,constraint:t=>Lo(t.params,t.initialValue),equals:Po.equals,writer:t=>Mo},controller:t=>{const e=t.value,n=t.constraint;if(!(n instanceof co))throw h.shouldNeverHappen();return new mo(t.document,{assembly:Ro,axes:[Do(e.rawValue.x,n.components[0]),Do(e.rawValue.y,n.components[1]),Do(e.rawValue.z,n.components[2])],parser:_n,value:e,viewProps:t.viewProps})}};class Bo{constructor(t=0,e=0,n=0,r=0){this.x=t,this.y=e,this.z=n,this.w=r}getComponents(){return[this.x,this.y,this.z,this.w]}static isObject(t){if(u(t))return!1;const e=t.x,n=t.y,r=t.z,i=t.w;return"number"==typeof e&&"number"==typeof n&&"number"==typeof r&&"number"==typeof i}static equals(t,e){return t.x===e.x&&t.y===e.y&&t.z===e.z&&t.w===e.w}toObject(){return{x:this.x,y:this.y,z:this.z,w:this.w}}}const jo={toComponents:t=>t.getComponents(),fromComponents:t=>new Bo(...t)};function zo(t){return Bo.isObject(t)?new Bo(t.x,t.y,t.z,t.w):new Bo}function Fo(t,e){t.writeProperty("x",e.x),t.writeProperty("y",e.y),t.writeProperty("z",e.z),t.writeProperty("w",e.w)}function Uo(t,e){return new co({assembly:jo,components:[ga("x"in t?t.x:void 0,e.x),ga("y"in t?t.y:void 0,e.y),ga("z"in t?t.z:void 0,e.z),ga("w"in t?t.w:void 0,e.w)]})}function qo(t,e){return{baseStep:rr(e),constraint:e,textProps:O.fromObject({draggingScale:ir(e,t),formatter:En(nr(e,t))})}}const Go={id:"input-point4d",type:"input",accept:(t,e)=>{if(!Bo.isObject(t))return null;const n=j,r=z(e,{x:n.optional.custom(Zn),y:n.optional.custom(Zn),z:n.optional.custom(Zn),w:n.optional.custom(Zn)});return r?{initialValue:t,params:r}:null},binding:{reader:t=>zo,constraint:t=>Uo(t.params,t.initialValue),equals:Bo.equals,writer:t=>Fo},controller:t=>{const e=t.value,n=t.constraint;if(!(n instanceof co))throw h.shouldNeverHappen();return new mo(t.document,{assembly:jo,axes:e.rawValue.getComponents().map(((t,e)=>qo(t,n.components[e]))),parser:_n,value:e,viewProps:t.viewProps})}};function Ho(t){const e=[],n=tr(t.options);return n&&e.push(n),new Ae(e)}const Vo={id:"input-string",type:"input",accept:(t,e)=>{if("string"!=typeof t)return null;const n=z(e,{options:j.optional.custom(Xn)});return n?{initialValue:t,params:n}:null},binding:{reader:t=>Tn,constraint:t=>Ho(t.params),writer:t=>Kn},controller:t=>{const e=t.document,n=t.value,r=t.constraint,i=r&&Ee(r,Se);return i?new Pe(e,{props:new O({options:i.values.value("options")}),value:n,viewProps:t.viewProps}):new Ne(e,{parser:t=>t,props:O.fromObject({formatter:Cn}),value:n,viewProps:t.viewProps})}},Qo={monitor:{defaultInterval:200,defaultLineCount:3}},Wo=y("mll");class Yo{constructor(t,e){this.onValueUpdate_=this.onValueUpdate_.bind(this),this.formatter_=e.formatter,this.element=t.createElement("div"),this.element.classList.add(Wo()),e.viewProps.bindClassModifiers(this.element);const n=t.createElement("textarea");n.classList.add(Wo("i")),n.style.height=`calc(var(--bld-us) * ${e.lineCount})`,n.readOnly=!0,e.viewProps.bindDisabled(n),this.element.appendChild(n),this.textareaElem_=n,e.value.emitter.on("change",this.onValueUpdate_),this.value=e.value,this.update_()}update_(){const t=this.textareaElem_,e=t.scrollTop===t.scrollHeight-t.clientHeight,n=[];this.value.rawValue.forEach((t=>{void 0!==t&&n.push(this.formatter_(t))})),t.textContent=n.join("\n"),e&&(t.scrollTop=t.scrollHeight)}onValueUpdate_(){this.update_()}}class Ko{constructor(t,e){this.value=e.value,this.viewProps=e.viewProps,this.view=new Yo(t,{formatter:e.formatter,lineCount:e.lineCount,value:this.value,viewProps:this.viewProps})}}const Xo=y("sgl");class $o{constructor(t,e){this.onValueUpdate_=this.onValueUpdate_.bind(this),this.formatter_=e.formatter,this.element=t.createElement("div"),this.element.classList.add(Xo()),e.viewProps.bindClassModifiers(this.element);const n=t.createElement("input");n.classList.add(Xo("i")),n.readOnly=!0,n.type="text",e.viewProps.bindDisabled(n),this.element.appendChild(n),this.inputElement=n,e.value.emitter.on("change",this.onValueUpdate_),this.value=e.value,this.update_()}update_(){const t=this.value.rawValue,e=t[t.length-1];this.inputElement.value=void 0!==e?this.formatter_(e):""}onValueUpdate_(){this.update_()}}class Zo{constructor(t,e){this.value=e.value,this.viewProps=e.viewProps,this.view=new $o(t,{formatter:e.formatter,value:this.value,viewProps:this.viewProps})}}const Jo={id:"monitor-bool",type:"monitor",accept:(t,e)=>{if("boolean"!=typeof t)return null;const n=z(e,{lineCount:j.optional.number});return n?{initialValue:t,params:n}:null},binding:{reader:t=>je},controller:t=>{var e;return 1===t.value.rawValue.length?new Zo(t.document,{formatter:ze,value:t.value,viewProps:t.viewProps}):new Ko(t.document,{formatter:ze,lineCount:null!==(e=t.params.lineCount)&&void 0!==e?e:Qo.monitor.defaultLineCount,value:t.value,viewProps:t.viewProps})}},ta=y("grl");class ea{constructor(t,e){this.onCursorChange_=this.onCursorChange_.bind(this),this.onValueUpdate_=this.onValueUpdate_.bind(this),this.element=t.createElement("div"),this.element.classList.add(ta()),e.viewProps.bindClassModifiers(this.element),this.formatter_=e.formatter,this.props_=e.props,this.cursor_=e.cursor,this.cursor_.emitter.on("change",this.onCursorChange_);const n=t.createElementNS(X,"svg");n.classList.add(ta("g")),n.style.height=`calc(var(--bld-us) * ${e.lineCount})`,this.element.appendChild(n),this.svgElem_=n;const r=t.createElementNS(X,"polyline");this.svgElem_.appendChild(r),this.lineElem_=r;const i=t.createElement("div");i.classList.add(ta("t"),y("tt")()),this.element.appendChild(i),this.tooltipElem_=i,e.value.emitter.on("change",this.onValueUpdate_),this.value=e.value,this.update_()}get graphElement(){return this.svgElem_}update_(){const t=this.svgElem_.getBoundingClientRect(),e=this.value.rawValue.length-1,n=this.props_.get("minValue"),r=this.props_.get("maxValue"),i=[];this.value.rawValue.forEach(((o,a)=>{if(void 0===o)return;const s=Nn(a,0,e,0,t.width),l=Nn(o,n,r,t.height,0);i.push([s,l].join(","))})),this.lineElem_.setAttributeNS(null,"points",i.join(" "));const o=this.tooltipElem_,a=this.value.rawValue[this.cursor_.rawValue];if(void 0===a)return void o.classList.remove(ta("t","a"));const s=Nn(this.cursor_.rawValue,0,e,0,t.width),l=Nn(a,n,r,t.height,0);o.style.left=`${s}px`,o.style.top=`${l}px`,o.textContent=`${this.formatter_(a)}`,o.classList.contains(ta("t","a"))||(o.classList.add(ta("t","a"),ta("t","in")),$(o),o.classList.remove(ta("t","in")))}onValueUpdate_(){this.update_()}onCursorChange_(){this.update_()}}class na{constructor(t,e){if(this.onGraphMouseMove_=this.onGraphMouseMove_.bind(this),this.onGraphMouseLeave_=this.onGraphMouseLeave_.bind(this),this.onGraphPointerDown_=this.onGraphPointerDown_.bind(this),this.onGraphPointerMove_=this.onGraphPointerMove_.bind(this),this.onGraphPointerUp_=this.onGraphPointerUp_.bind(this),this.props_=e.props,this.value=e.value,this.viewProps=e.viewProps,this.cursor_=R(-1),this.view=new ea(t,{cursor:this.cursor_,formatter:e.formatter,lineCount:e.lineCount,props:this.props_,value:this.value,viewProps:this.viewProps}),J(t)){const t=new Dn(this.view.element);t.emitter.on("down",this.onGraphPointerDown_),t.emitter.on("move",this.onGraphPointerMove_),t.emitter.on("up",this.onGraphPointerUp_)}else this.view.element.addEventListener("mousemove",this.onGraphMouseMove_),this.view.element.addEventListener("mouseleave",this.onGraphMouseLeave_)}onGraphMouseLeave_(){this.cursor_.rawValue=-1}onGraphMouseMove_(t){const e=this.view.element.getBoundingClientRect();this.cursor_.rawValue=Math.floor(Nn(t.offsetX,0,e.width,0,this.value.rawValue.length))}onGraphPointerDown_(t){this.onGraphPointerMove_(t)}onGraphPointerMove_(t){t.data.point?this.cursor_.rawValue=Math.floor(Nn(t.data.point.x,0,t.data.bounds.width,0,this.value.rawValue.length)):this.cursor_.rawValue=-1}onGraphPointerUp_(){this.cursor_.rawValue=-1}}function ra(t){return"format"in t&&!u(t.format)?t.format:En(2)}function ia(t){var e;return 1===t.value.rawValue.length?new Zo(t.document,{formatter:ra(t.params),value:t.value,viewProps:t.viewProps}):new Ko(t.document,{formatter:ra(t.params),lineCount:null!==(e=t.params.lineCount)&&void 0!==e?e:Qo.monitor.defaultLineCount,value:t.value,viewProps:t.viewProps})}function oa(t){var e,n,r;return new na(t.document,{formatter:ra(t.params),lineCount:null!==(e=t.params.lineCount)&&void 0!==e?e:Qo.monitor.defaultLineCount,props:O.fromObject({maxValue:null!==(n="max"in t.params?t.params.max:null)&&void 0!==n?n:100,minValue:null!==(r="min"in t.params?t.params.min:null)&&void 0!==r?r:0}),value:t.value,viewProps:t.viewProps})}function aa(t){return"view"in t&&"graph"===t.view}const sa={id:"monitor-number",type:"monitor",accept:(t,e)=>{if("number"!=typeof t)return null;const n=j,r=z(e,{format:n.optional.function,lineCount:n.optional.number,max:n.optional.number,min:n.optional.number,view:n.optional.string});return r?{initialValue:t,params:r}:null},binding:{defaultBufferSize:t=>aa(t)?64:1,reader:t=>wn},controller:t=>aa(t.params)?oa(t):ia(t)},la={id:"monitor-string",type:"monitor",accept:(t,e)=>{if("string"!=typeof t)return null;const n=j,r=z(e,{lineCount:n.optional.number,multiline:n.optional.boolean});return r?{initialValue:t,params:r}:null},binding:{reader:t=>Tn},controller:t=>{var e;const n=t.value;return n.rawValue.length>1||"multiline"in t.params&&t.params.multiline?new Ko(t.document,{formatter:Cn,lineCount:null!==(e=t.params.lineCount)&&void 0!==e?e:Qo.monitor.defaultLineCount,value:n,viewProps:t.viewProps}):new Zo(t.document,{formatter:Cn,value:n,viewProps:t.viewProps})}};function ua(t,e){var n;const r=t.accept(e.target.read(),e.params);if(u(r))return null;const i=j,o={target:e.target,initialValue:r.initialValue,params:r.params},a=t.binding.reader(o),s=t.binding.constraint?t.binding.constraint(o):void 0,l=R(a(r.initialValue),{constraint:s,equals:t.binding.equals}),c=new ge({reader:a,target:e.target,value:l,writer:t.binding.writer(o)}),d=i.optional.boolean(e.params.disabled).value,f=i.optional.boolean(e.params.hidden).value,h=t.controller({constraint:s,document:e.document,initialValue:r.initialValue,params:r.params,value:c.value,viewProps:V.create({disabled:d,hidden:f})});return new It(e.document,{binding:c,blade:gt(),props:O.fromObject({label:"label"in e.params?null!==(n=i.optional.string(e.params.label).value)&&void 0!==n?n:null:e.target.key}),valueController:h})}function ca(t,e){return 0===e?new pe:new me(t,null!=e?e:Qo.monitor.defaultInterval)}function da(t,e){var n,r,i;const o=j,a=t.accept(e.target.read(),e.params);if(u(a))return null;const s={target:e.target,initialValue:a.initialValue,params:a.params},l=t.binding.reader(s),c=null!==(r=null!==(n=o.optional.number(e.params.bufferSize).value)&&void 0!==n?n:t.binding.defaultBufferSize&&t.binding.defaultBufferSize(a.params))&&void 0!==r?r:1,d=o.optional.number(e.params.interval).value,f=new we({reader:l,target:e.target,ticker:ca(e.document,d),value:ye(c)}),h=o.optional.boolean(e.params.disabled).value,p=o.optional.boolean(e.params.hidden).value,m=t.controller({document:e.document,params:a.params,value:f.value,viewProps:V.create({disabled:h,hidden:p})});return new Pt(e.document,{binding:f,blade:gt(),props:O.fromObject({label:"label"in e.params?null!==(i=o.optional.string(e.params.label).value)&&void 0!==i?i:null:e.target.key}),valueController:m})}class fa{constructor(){this.pluginsMap_={blades:[],inputs:[],monitors:[]}}getAll(){return[...this.pluginsMap_.blades,...this.pluginsMap_.inputs,...this.pluginsMap_.monitors]}register(t){"blade"===t.type?this.pluginsMap_.blades.unshift(t):"input"===t.type?this.pluginsMap_.inputs.unshift(t):"monitor"===t.type&&this.pluginsMap_.monitors.unshift(t)}createInput(t,e,n){if(u(e.read()))throw new h({context:{key:e.key},type:"nomatchingcontroller"});const r=this.pluginsMap_.inputs.reduce(((r,i)=>null!=r?r:ua(i,{document:t,target:e,params:n})),null);if(r)return r;throw new h({context:{key:e.key},type:"nomatchingcontroller"})}createMonitor(t,e,n){const r=this.pluginsMap_.monitors.reduce(((r,i)=>null!=r?r:da(i,{document:t,params:n,target:e})),null);if(r)return r;throw new h({context:{key:e.key},type:"nomatchingcontroller"})}createBlade(t,e){const n=this.pluginsMap_.blades.reduce(((n,r)=>null!=n?n:he(r,{document:t,params:e})),null);if(!n)throw new h({type:"nomatchingview",context:{params:e}});return n}createBladeApi(t){if(t instanceof It)return new Ct(t);if(t instanceof Pt)return new kt(t);if(t instanceof Ht)return new Lt(t,this);const e=this.pluginsMap_.blades.reduce(((e,n)=>null!=e?e:n.api({controller:t,pool:this})),null);if(!e)throw h.shouldNeverHappen();return e}}function ha(){const t=new fa;return[Aa,No,Go,Vo,_o,uo,lo,io,ur,Jo,la,sa,pt,Yt,te,fe].forEach((e=>{t.register(e)})),t}function pa(t){return wo.isObject(t)?new wo(t.x,t.y):new wo}function ma(t,e){t.writeProperty("x",e.x),t.writeProperty("y",e.y)}function ga(t,e){if(!t)return;const n=[],r=go(t,e);r&&n.push(r);const i=vo(t);return i&&n.push(i),new Ae(n)}function va(t,e){return new co({assembly:Ao,components:[ga("x"in t?t.x:void 0,e.x),ga("y"in t?t.y:void 0,e.y)]})}function ya(t,e){const[n,r]=t?yo(t):[];if(!u(n)||!u(r))return Math.max(Math.abs(null!=n?n:0),Math.abs(null!=r?r:0));const i=rr(t);return Math.max(10*Math.abs(i),10*Math.abs(e))}function ba(t,e){const n=e instanceof co?e.components[0]:void 0,r=e instanceof co?e.components[1]:void 0,i=ya(n,t.x),o=ya(r,t.y);return Math.max(i,o)}function _a(t,e){return{baseStep:rr(e),constraint:e,textProps:O.fromObject({draggingScale:ir(e,t),formatter:En(nr(e,t))})}}function wa(t){if(!("y"in t))return!1;const e=t.y;return!!e&&"inverted"in e&&!!e.inverted}const Aa={id:"input-point2d",type:"input",accept:(t,e)=>{if(!wo.isObject(t))return null;const n=j,r=z(e,{expanded:n.optional.boolean,picker:n.optional.custom($n),x:n.optional.custom(Zn),y:n.optional.object({inverted:n.optional.boolean,max:n.optional.number,min:n.optional.number,step:n.optional.number})});return r?{initialValue:t,params:r}:null},binding:{reader:t=>pa,constraint:t=>va(t.params,t.initialValue),equals:wo.equals,writer:t=>ma},controller:t=>{const e=t.document,n=t.value,r=t.constraint;if(!(r instanceof co))throw h.shouldNeverHappen();const i="expanded"in t.params?t.params.expanded:void 0,o="picker"in t.params?t.params.picker:void 0;return new ko(e,{axes:[_a(n.rawValue.x,r.components[0]),_a(n.rawValue.y,r.components[1])],expanded:null!=i&&i,invertsY:wa(t.params),maxValue:ba(n.rawValue,r),parser:_n,pickerLayout:null!=o?o:"popup",value:n,viewProps:t.viewProps})}};class Ea extends n{constructor(t){super(t),this.emitter_=new g,this.controller_.valueController.value.emitter.on("change",(t=>{this.emitter_.emit("change",{event:new i(this,t.rawValue)})}))}get label(){return this.controller_.props.get("label")}set label(t){this.controller_.props.set("label",t)}get options(){return this.controller_.valueController.props.get("options")}set options(t){this.controller_.valueController.props.set("options",t)}get value(){return this.controller_.valueController.value.rawValue}set value(t){this.controller_.valueController.value.rawValue=t}on(t,e){const n=e.bind(this);return this.emitter_.on(t,(t=>{n(t.event)})),this}}class xa extends n{constructor(t){super(t),this.emitter_=new g,this.controller_.valueController.value.emitter.on("change",(t=>{this.emitter_.emit("change",{event:new i(this,t.rawValue)})}))}get label(){return this.controller_.props.get("label")}set label(t){this.controller_.props.set("label",t)}get maxValue(){return this.controller_.valueController.sliderController.props.get("maxValue")}set maxValue(t){this.controller_.valueController.sliderController.props.set("maxValue",t)}get minValue(){return this.controller_.valueController.sliderController.props.get("minValue")}set minValue(t){this.controller_.valueController.sliderController.props.set("minValue",t)}get value(){return this.controller_.valueController.value.rawValue}set value(t){this.controller_.valueController.value.rawValue=t}on(t,e){const n=e.bind(this);return this.emitter_.on(t,(t=>{n(t.event)})),this}}class Sa extends n{constructor(t){super(t),this.emitter_=new g,this.controller_.valueController.value.emitter.on("change",(t=>{this.emitter_.emit("change",{event:new i(this,t.rawValue)})}))}get label(){return this.controller_.props.get("label")}set label(t){this.controller_.props.set("label",t)}get formatter(){return this.controller_.valueController.props.get("formatter")}set formatter(t){this.controller_.valueController.props.set("formatter",t)}get value(){return this.controller_.valueController.value.rawValue}set value(t){this.controller_.valueController.value.rawValue=t}on(t,e){const n=e.bind(this);return this.emitter_.on(t,(t=>{n(t.event)})),this}}const Ta={id:"list",type:"blade",accept(t){const e=j,n=z(t,{options:e.required.custom(Xn),value:e.required.raw,view:e.required.constant("list"),label:e.optional.string});return n?{params:n}:null},controller(t){const e=new Se(Jn(t.params.options)),n=R(t.params.value,{constraint:e}),r=new Pe(t.document,{props:new O({options:e.values.value("options")}),value:n,viewProps:t.viewProps});return new Kt(t.document,{blade:t.blade,props:O.fromObject({label:t.params.label}),valueController:r})},api:t=>t.controller instanceof Kt&&t.controller.valueController instanceof Pe?new Ea(t.controller):null};function Ca(t){return t.reduce(((t,e)=>Object.assign(t,{[e.presetKey]:e.read()})),{})}function Ia(t,e){t.forEach((t=>{const n=e[t.target.presetKey];void 0!==n&&t.writer(t.target,t.reader(n))}))}class ka extends Dt{constructor(t,e){super(t,e)}get element(){return this.controller_.view.element}importPreset(t){Ia(this.controller_.rackController.rack.find(It).map((t=>t.binding)),t),this.refresh()}exportPreset(){return Ca(this.controller_.rackController.rack.find(It).map((t=>t.binding.target)))}refresh(){this.controller_.rackController.rack.find(It).forEach((t=>{t.binding.read()})),this.controller_.rackController.rack.find(Pt).forEach((t=>{t.binding.read()}))}}class Pa extends Wt{constructor(t,e){super(t,{expanded:e.expanded,blade:e.blade,props:e.props,root:!0,viewProps:e.viewProps})}}const Ra={id:"slider",type:"blade",accept(t){const e=j,n=z(t,{max:e.required.number,min:e.required.number,view:e.required.constant("slider"),format:e.optional.function,label:e.optional.string,value:e.optional.number});return n?{params:n}:null},controller(t){var e,n;const r=null!==(e=t.params.value)&&void 0!==e?e:0,i=new xe({max:t.params.max,min:t.params.min}),o=new Yn(t.document,{baseStep:1,parser:_n,sliderProps:new O({maxValue:i.values.value("max"),minValue:i.values.value("min")}),textProps:O.fromObject({draggingScale:ir(void 0,r),formatter:null!==(n=t.params.format)&&void 0!==n?n:An}),value:R(r,{constraint:i}),viewProps:t.viewProps});return new Kt(t.document,{blade:t.blade,props:O.fromObject({label:t.params.label}),valueController:o})},api:t=>t.controller instanceof Kt&&t.controller.valueController instanceof Yn?new xa(t.controller):null},Oa={id:"text",type:"blade",accept(t){const e=j,n=z(t,{parse:e.required.function,value:e.required.raw,view:e.required.constant("text"),format:e.optional.function,label:e.optional.string});return n?{params:n}:null},controller(t){var e;const n=new Ne(t.document,{parser:t.params.parse,props:O.fromObject({formatter:null!==(e=t.params.format)&&void 0!==e?e:t=>String(t)}),value:R(t.params.value),viewProps:t.viewProps});return new Kt(t.document,{blade:t.blade,props:O.fromObject({label:t.params.label}),valueController:n})},api:t=>t.controller instanceof Kt&&t.controller.valueController instanceof Ne?new Sa(t.controller):null};function Ma(t){const e=t.createElement("div");return e.classList.add(y("dfw")()),t.body&&t.body.appendChild(e),e}function La(t,e,n){if(t.querySelector(`style[data-tp-style=${e}]`))return;const r=t.createElement("style");r.dataset.tpStyle=e,r.textContent=n,t.head.appendChild(r)}class Da extends ka{constructor(t){var e,n;const r=null!=t?t:{},i=null!==(e=r.document)&&void 0!==e?e:et(),o=ha();super(new Pa(i,{expanded:r.expanded,blade:gt(),props:O.fromObject({title:r.title}),viewProps:V.create()}),o),this.pool_=o,this.containerElem_=null!==(n=r.container)&&void 0!==n?n:Ma(i),this.containerElem_.appendChild(this.element),this.doc_=i,this.usesDefaultWrapper_=!r.container,this.setUpDefaultPlugins_()}get document(){if(!this.doc_)throw h.alreadyDisposed();return this.doc_}dispose(){const t=this.containerElem_;if(!t)throw h.alreadyDisposed();if(this.usesDefaultWrapper_){const e=t.parentElement;e&&e.removeChild(t)}this.containerElem_=null,this.doc_=null,super.dispose()}registerPlugin(t){("plugin"in t?[t.plugin]:"plugins"in t?t.plugins:[]).forEach((t=>{this.pool_.register(t),this.embedPluginStyle_(t)}))}embedPluginStyle_(t){t.css&&La(this.document,`plugin-${t.id}`,t.css)}setUpDefaultPlugins_(){La(this.document,"default",'.tp-tbiv_b,.tp-coltxtv_ms,.tp-ckbv_i,.tp-rotv_b,.tp-fldv_b,.tp-mllv_i,.tp-sglv_i,.tp-grlv_g,.tp-txtv_i,.tp-p2dpv_p,.tp-colswv_sw,.tp-p2dv_b,.tp-btnv_b,.tp-lstv_s{-webkit-appearance:none;-moz-appearance:none;appearance:none;background-color:rgba(0,0,0,0);border-width:0;font-family:inherit;font-size:inherit;font-weight:inherit;margin:0;outline:none;padding:0}.tp-p2dv_b,.tp-btnv_b,.tp-lstv_s{background-color:var(--btn-bg);border-radius:var(--elm-br);color:var(--btn-fg);cursor:pointer;display:block;font-weight:bold;height:var(--bld-us);line-height:var(--bld-us);overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.tp-p2dv_b:hover,.tp-btnv_b:hover,.tp-lstv_s:hover{background-color:var(--btn-bg-h)}.tp-p2dv_b:focus,.tp-btnv_b:focus,.tp-lstv_s:focus{background-color:var(--btn-bg-f)}.tp-p2dv_b:active,.tp-btnv_b:active,.tp-lstv_s:active{background-color:var(--btn-bg-a)}.tp-p2dv_b:disabled,.tp-btnv_b:disabled,.tp-lstv_s:disabled{opacity:.5}.tp-txtv_i,.tp-p2dpv_p,.tp-colswv_sw{background-color:var(--in-bg);border-radius:var(--elm-br);box-sizing:border-box;color:var(--in-fg);font-family:inherit;height:var(--bld-us);line-height:var(--bld-us);min-width:0;width:100%}.tp-txtv_i:hover,.tp-p2dpv_p:hover,.tp-colswv_sw:hover{background-color:var(--in-bg-h)}.tp-txtv_i:focus,.tp-p2dpv_p:focus,.tp-colswv_sw:focus{background-color:var(--in-bg-f)}.tp-txtv_i:active,.tp-p2dpv_p:active,.tp-colswv_sw:active{background-color:var(--in-bg-a)}.tp-txtv_i:disabled,.tp-p2dpv_p:disabled,.tp-colswv_sw:disabled{opacity:.5}.tp-mllv_i,.tp-sglv_i,.tp-grlv_g{background-color:var(--mo-bg);border-radius:var(--elm-br);box-sizing:border-box;color:var(--mo-fg);height:var(--bld-us);scrollbar-color:currentColor rgba(0,0,0,0);scrollbar-width:thin;width:100%}.tp-mllv_i::-webkit-scrollbar,.tp-sglv_i::-webkit-scrollbar,.tp-grlv_g::-webkit-scrollbar{height:8px;width:8px}.tp-mllv_i::-webkit-scrollbar-corner,.tp-sglv_i::-webkit-scrollbar-corner,.tp-grlv_g::-webkit-scrollbar-corner{background-color:rgba(0,0,0,0)}.tp-mllv_i::-webkit-scrollbar-thumb,.tp-sglv_i::-webkit-scrollbar-thumb,.tp-grlv_g::-webkit-scrollbar-thumb{background-clip:padding-box;background-color:currentColor;border:rgba(0,0,0,0) solid 2px;border-radius:4px}.tp-rotv{--font-family: var(--tp-font-family, Roboto Mono, Source Code Pro, Menlo, Courier, monospace);--bs-br: var(--tp-base-border-radius, 6px);--cnt-h-p: var(--tp-container-horizontal-padding, 4px);--cnt-v-p: var(--tp-container-vertical-padding, 4px);--elm-br: var(--tp-element-border-radius, 2px);--bld-s: var(--tp-blade-spacing, 4px);--bld-us: var(--tp-blade-unit-size, 20px);--bs-bg: var(--tp-base-background-color, hsl(230, 7%, 17%));--bs-sh: var(--tp-base-shadow-color, rgba(0, 0, 0, 0.2));--btn-bg: var(--tp-button-background-color, hsl(230, 7%, 70%));--btn-bg-a: var(--tp-button-background-color-active, #d6d7db);--btn-bg-f: var(--tp-button-background-color-focus, #c8cad0);--btn-bg-h: var(--tp-button-background-color-hover, #bbbcc4);--btn-fg: var(--tp-button-foreground-color, hsl(230, 7%, 17%));--cnt-bg: var(--tp-container-background-color, rgba(187, 188, 196, 0.1));--cnt-bg-a: var(--tp-container-background-color-active, rgba(187, 188, 196, 0.25));--cnt-bg-f: var(--tp-container-background-color-focus, rgba(187, 188, 196, 0.2));--cnt-bg-h: var(--tp-container-background-color-hover, rgba(187, 188, 196, 0.15));--cnt-fg: var(--tp-container-foreground-color, hsl(230, 7%, 75%));--in-bg: var(--tp-input-background-color, rgba(187, 188, 196, 0.1));--in-bg-a: var(--tp-input-background-color-active, rgba(187, 188, 196, 0.25));--in-bg-f: var(--tp-input-background-color-focus, rgba(187, 188, 196, 0.2));--in-bg-h: var(--tp-input-background-color-hover, rgba(187, 188, 196, 0.15));--in-fg: var(--tp-input-foreground-color, hsl(230, 7%, 75%));--lbl-fg: var(--tp-label-foreground-color, rgba(187, 188, 196, 0.7));--mo-bg: var(--tp-monitor-background-color, rgba(0, 0, 0, 0.2));--mo-fg: var(--tp-monitor-foreground-color, rgba(187, 188, 196, 0.7));--grv-fg: var(--tp-groove-foreground-color, rgba(187, 188, 196, 0.1))}.tp-rotv_c>.tp-cntv.tp-v-lst,.tp-tabv_c .tp-brkv>.tp-cntv.tp-v-lst,.tp-fldv_c>.tp-cntv.tp-v-lst{margin-bottom:calc(-1*var(--cnt-v-p))}.tp-rotv_c>.tp-fldv.tp-v-lst .tp-fldv_c,.tp-tabv_c .tp-brkv>.tp-fldv.tp-v-lst .tp-fldv_c,.tp-fldv_c>.tp-fldv.tp-v-lst .tp-fldv_c{border-bottom-left-radius:0}.tp-rotv_c>.tp-fldv.tp-v-lst .tp-fldv_b,.tp-tabv_c .tp-brkv>.tp-fldv.tp-v-lst .tp-fldv_b,.tp-fldv_c>.tp-fldv.tp-v-lst .tp-fldv_b{border-bottom-left-radius:0}.tp-rotv_c>*:not(.tp-v-fst),.tp-tabv_c .tp-brkv>*:not(.tp-v-fst),.tp-fldv_c>*:not(.tp-v-fst){margin-top:var(--bld-s)}.tp-rotv_c>.tp-sprv:not(.tp-v-fst),.tp-tabv_c .tp-brkv>.tp-sprv:not(.tp-v-fst),.tp-fldv_c>.tp-sprv:not(.tp-v-fst),.tp-rotv_c>.tp-cntv:not(.tp-v-fst),.tp-tabv_c .tp-brkv>.tp-cntv:not(.tp-v-fst),.tp-fldv_c>.tp-cntv:not(.tp-v-fst){margin-top:var(--cnt-v-p)}.tp-rotv_c>.tp-sprv+*:not(.tp-v-hidden),.tp-tabv_c .tp-brkv>.tp-sprv+*:not(.tp-v-hidden),.tp-fldv_c>.tp-sprv+*:not(.tp-v-hidden),.tp-rotv_c>.tp-cntv+*:not(.tp-v-hidden),.tp-tabv_c .tp-brkv>.tp-cntv+*:not(.tp-v-hidden),.tp-fldv_c>.tp-cntv+*:not(.tp-v-hidden){margin-top:var(--cnt-v-p)}.tp-rotv_c>.tp-sprv:not(.tp-v-hidden)+.tp-sprv,.tp-tabv_c .tp-brkv>.tp-sprv:not(.tp-v-hidden)+.tp-sprv,.tp-fldv_c>.tp-sprv:not(.tp-v-hidden)+.tp-sprv,.tp-rotv_c>.tp-cntv:not(.tp-v-hidden)+.tp-cntv,.tp-tabv_c .tp-brkv>.tp-cntv:not(.tp-v-hidden)+.tp-cntv,.tp-fldv_c>.tp-cntv:not(.tp-v-hidden)+.tp-cntv{margin-top:0}.tp-tabv_c .tp-brkv>.tp-cntv,.tp-fldv_c>.tp-cntv{margin-left:4px}.tp-tabv_c .tp-brkv>.tp-fldv>.tp-fldv_b,.tp-fldv_c>.tp-fldv>.tp-fldv_b{border-top-left-radius:var(--elm-br);border-bottom-left-radius:var(--elm-br)}.tp-tabv_c .tp-brkv>.tp-fldv.tp-fldv-expanded>.tp-fldv_b,.tp-fldv_c>.tp-fldv.tp-fldv-expanded>.tp-fldv_b{border-bottom-left-radius:0}.tp-tabv_c .tp-brkv .tp-fldv>.tp-fldv_c,.tp-fldv_c .tp-fldv>.tp-fldv_c{border-bottom-left-radius:var(--elm-br)}.tp-tabv_c .tp-brkv>.tp-cntv+.tp-fldv>.tp-fldv_b,.tp-fldv_c>.tp-cntv+.tp-fldv>.tp-fldv_b{border-top-left-radius:0}.tp-tabv_c .tp-brkv>.tp-cntv+.tp-tabv>.tp-tabv_t,.tp-fldv_c>.tp-cntv+.tp-tabv>.tp-tabv_t{border-top-left-radius:0}.tp-tabv_c .tp-brkv>.tp-tabv>.tp-tabv_t,.tp-fldv_c>.tp-tabv>.tp-tabv_t{border-top-left-radius:var(--elm-br)}.tp-tabv_c .tp-brkv .tp-tabv>.tp-tabv_c,.tp-fldv_c .tp-tabv>.tp-tabv_c{border-bottom-left-radius:var(--elm-br)}.tp-rotv_b,.tp-fldv_b{background-color:var(--cnt-bg);color:var(--cnt-fg);cursor:pointer;display:block;height:calc(var(--bld-us) + 4px);line-height:calc(var(--bld-us) + 4px);overflow:hidden;padding-left:var(--cnt-h-p);padding-right:calc(4px + var(--bld-us) + var(--cnt-h-p));position:relative;text-align:left;text-overflow:ellipsis;white-space:nowrap;width:100%;transition:border-radius .2s ease-in-out .2s}.tp-rotv_b:hover,.tp-fldv_b:hover{background-color:var(--cnt-bg-h)}.tp-rotv_b:focus,.tp-fldv_b:focus{background-color:var(--cnt-bg-f)}.tp-rotv_b:active,.tp-fldv_b:active{background-color:var(--cnt-bg-a)}.tp-rotv_b:disabled,.tp-fldv_b:disabled{opacity:.5}.tp-rotv_m,.tp-fldv_m{background:linear-gradient(to left, var(--cnt-fg), var(--cnt-fg) 2px, transparent 2px, transparent 4px, var(--cnt-fg) 4px);border-radius:2px;bottom:0;content:"";display:block;height:6px;right:calc(var(--cnt-h-p) + (var(--bld-us) + 4px - 6px)/2 - 2px);margin:auto;opacity:.5;position:absolute;top:0;transform:rotate(90deg);transition:transform .2s ease-in-out;width:6px}.tp-rotv.tp-rotv-expanded .tp-rotv_m,.tp-fldv.tp-fldv-expanded>.tp-fldv_b>.tp-fldv_m{transform:none}.tp-rotv_c,.tp-fldv_c{box-sizing:border-box;height:0;opacity:0;overflow:hidden;padding-bottom:0;padding-top:0;position:relative;transition:height .2s ease-in-out,opacity .2s linear,padding .2s ease-in-out}.tp-rotv.tp-rotv-cpl:not(.tp-rotv-expanded) .tp-rotv_c,.tp-fldv.tp-fldv-cpl:not(.tp-fldv-expanded)>.tp-fldv_c{display:none}.tp-rotv.tp-rotv-expanded .tp-rotv_c,.tp-fldv.tp-fldv-expanded>.tp-fldv_c{opacity:1;padding-bottom:var(--cnt-v-p);padding-top:var(--cnt-v-p);transform:none;overflow:visible;transition:height .2s ease-in-out,opacity .2s linear .2s,padding .2s ease-in-out}.tp-lstv,.tp-coltxtv_m{position:relative}.tp-lstv_s{padding:0 20px 0 4px;width:100%}.tp-lstv_m,.tp-coltxtv_mm{bottom:0;margin:auto;pointer-events:none;position:absolute;right:2px;top:0}.tp-lstv_m svg,.tp-coltxtv_mm svg{bottom:0;height:16px;margin:auto;position:absolute;right:0;top:0;width:16px}.tp-lstv_m svg path,.tp-coltxtv_mm svg path{fill:currentColor}.tp-pndtxtv,.tp-coltxtv_w{display:flex}.tp-pndtxtv_a,.tp-coltxtv_c{width:100%}.tp-pndtxtv_a+.tp-pndtxtv_a,.tp-coltxtv_c+.tp-pndtxtv_a,.tp-pndtxtv_a+.tp-coltxtv_c,.tp-coltxtv_c+.tp-coltxtv_c{margin-left:2px}.tp-btnv_b{width:100%}.tp-btnv_t{text-align:center}.tp-ckbv_l{display:block;position:relative}.tp-ckbv_i{left:0;opacity:0;position:absolute;top:0}.tp-ckbv_w{background-color:var(--in-bg);border-radius:var(--elm-br);cursor:pointer;display:block;height:var(--bld-us);position:relative;width:var(--bld-us)}.tp-ckbv_w svg{bottom:0;display:block;height:16px;left:0;margin:auto;opacity:0;position:absolute;right:0;top:0;width:16px}.tp-ckbv_w svg path{fill:none;stroke:var(--in-fg);stroke-width:2}.tp-ckbv_i:hover+.tp-ckbv_w{background-color:var(--in-bg-h)}.tp-ckbv_i:focus+.tp-ckbv_w{background-color:var(--in-bg-f)}.tp-ckbv_i:active+.tp-ckbv_w{background-color:var(--in-bg-a)}.tp-ckbv_i:checked+.tp-ckbv_w svg{opacity:1}.tp-ckbv.tp-v-disabled .tp-ckbv_w{opacity:.5}.tp-colv{position:relative}.tp-colv_h{display:flex}.tp-colv_s{flex-grow:0;flex-shrink:0;width:var(--bld-us)}.tp-colv_t{flex:1;margin-left:4px}.tp-colv_p{height:0;margin-top:0;opacity:0;overflow:hidden;transition:height .2s ease-in-out,opacity .2s linear,margin .2s ease-in-out}.tp-colv.tp-colv-expanded.tp-colv-cpl .tp-colv_p{overflow:visible}.tp-colv.tp-colv-expanded .tp-colv_p{margin-top:var(--bld-s);opacity:1}.tp-colv .tp-popv{left:calc(-1*var(--cnt-h-p));right:calc(-1*var(--cnt-h-p));top:var(--bld-us)}.tp-colpv_h,.tp-colpv_ap{margin-left:6px;margin-right:6px}.tp-colpv_h{margin-top:var(--bld-s)}.tp-colpv_rgb{display:flex;margin-top:var(--bld-s);width:100%}.tp-colpv_a{display:flex;margin-top:var(--cnt-v-p);padding-top:calc(var(--cnt-v-p) + 2px);position:relative}.tp-colpv_a::before{background-color:var(--grv-fg);content:"";height:2px;left:calc(-1*var(--cnt-h-p));position:absolute;right:calc(-1*var(--cnt-h-p));top:0}.tp-colpv.tp-v-disabled .tp-colpv_a::before{opacity:.5}.tp-colpv_ap{align-items:center;display:flex;flex:3}.tp-colpv_at{flex:1;margin-left:4px}.tp-svpv{border-radius:var(--elm-br);outline:none;overflow:hidden;position:relative}.tp-svpv.tp-v-disabled{opacity:.5}.tp-svpv_c{cursor:crosshair;display:block;height:calc(var(--bld-us)*4);width:100%}.tp-svpv_m{border-radius:100%;border:rgba(255,255,255,.75) solid 2px;box-sizing:border-box;filter:drop-shadow(0 0 1px rgba(0, 0, 0, 0.3));height:12px;margin-left:-6px;margin-top:-6px;pointer-events:none;position:absolute;width:12px}.tp-svpv:focus .tp-svpv_m{border-color:#fff}.tp-hplv{cursor:pointer;height:var(--bld-us);outline:none;position:relative}.tp-hplv.tp-v-disabled{opacity:.5}.tp-hplv_c{background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAAABCAYAAABubagXAAAAQ0lEQVQoU2P8z8Dwn0GCgQEDi2OK/RBgYHjBgIpfovFh8j8YBIgzFGQxuqEgPhaDOT5gOhPkdCxOZeBg+IDFZZiGAgCaSSMYtcRHLgAAAABJRU5ErkJggg==);background-position:left top;background-repeat:no-repeat;background-size:100% 100%;border-radius:2px;display:block;height:4px;left:0;margin-top:-2px;position:absolute;top:50%;width:100%}.tp-hplv_m{border-radius:var(--elm-br);border:rgba(255,255,255,.75) solid 2px;box-shadow:0 0 2px rgba(0,0,0,.1);box-sizing:border-box;height:12px;left:50%;margin-left:-6px;margin-top:-6px;pointer-events:none;position:absolute;top:50%;width:12px}.tp-hplv:focus .tp-hplv_m{border-color:#fff}.tp-aplv{cursor:pointer;height:var(--bld-us);outline:none;position:relative;width:100%}.tp-aplv.tp-v-disabled{opacity:.5}.tp-aplv_b{background-color:#fff;background-image:linear-gradient(to top right, #ddd 25%, transparent 25%, transparent 75%, #ddd 75%),linear-gradient(to top right, #ddd 25%, transparent 25%, transparent 75%, #ddd 75%);background-size:4px 4px;background-position:0 0,2px 2px;border-radius:2px;display:block;height:4px;left:0;margin-top:-2px;overflow:hidden;position:absolute;top:50%;width:100%}.tp-aplv_c{bottom:0;left:0;position:absolute;right:0;top:0}.tp-aplv_m{background-color:#fff;background-image:linear-gradient(to top right, #ddd 25%, transparent 25%, transparent 75%, #ddd 75%),linear-gradient(to top right, #ddd 25%, transparent 25%, transparent 75%, #ddd 75%);background-size:12px 12px;background-position:0 0,6px 6px;border-radius:var(--elm-br);box-shadow:0 0 2px rgba(0,0,0,.1);height:12px;left:50%;margin-left:-6px;margin-top:-6px;overflow:hidden;pointer-events:none;position:absolute;top:50%;width:12px}.tp-aplv_p{border-radius:var(--elm-br);border:rgba(255,255,255,.75) solid 2px;box-sizing:border-box;bottom:0;left:0;position:absolute;right:0;top:0}.tp-aplv:focus .tp-aplv_p{border-color:#fff}.tp-colswv{background-color:#fff;background-image:linear-gradient(to top right, #ddd 25%, transparent 25%, transparent 75%, #ddd 75%),linear-gradient(to top right, #ddd 25%, transparent 25%, transparent 75%, #ddd 75%);background-size:10px 10px;background-position:0 0,5px 5px;border-radius:var(--elm-br);overflow:hidden}.tp-colswv.tp-v-disabled{opacity:.5}.tp-colswv_sw{border-radius:0}.tp-colswv_b{-webkit-appearance:none;-moz-appearance:none;appearance:none;background-color:rgba(0,0,0,0);border-width:0;cursor:pointer;display:block;height:var(--bld-us);left:0;margin:0;outline:none;padding:0;position:absolute;top:0;width:var(--bld-us)}.tp-colswv_b:focus::after{border:rgba(255,255,255,.75) solid 2px;border-radius:var(--elm-br);bottom:0;content:"";display:block;left:0;position:absolute;right:0;top:0}.tp-coltxtv{display:flex;width:100%}.tp-coltxtv_m{margin-right:4px}.tp-coltxtv_ms{border-radius:var(--elm-br);color:var(--lbl-fg);cursor:pointer;height:var(--bld-us);line-height:var(--bld-us);padding:0 18px 0 4px}.tp-coltxtv_ms:hover{background-color:var(--in-bg-h)}.tp-coltxtv_ms:focus{background-color:var(--in-bg-f)}.tp-coltxtv_ms:active{background-color:var(--in-bg-a)}.tp-coltxtv_mm{color:var(--lbl-fg)}.tp-coltxtv.tp-v-disabled .tp-coltxtv_mm{opacity:.5}.tp-coltxtv_w{flex:1}.tp-dfwv{position:absolute;top:8px;right:8px;width:256px}.tp-fldv{position:relative}.tp-fldv.tp-fldv-not .tp-fldv_b{display:none}.tp-fldv_t{padding-left:4px}.tp-fldv_b:disabled .tp-fldv_m{display:none}.tp-fldv_c{padding-left:4px}.tp-fldv_i{bottom:0;color:var(--cnt-bg);left:0;overflow:hidden;position:absolute;top:calc(var(--bld-us) + 4px);width:var(--bs-br)}.tp-fldv_i::before{background-color:currentColor;bottom:0;content:"";left:0;position:absolute;top:0;width:4px}.tp-fldv_b:hover+.tp-fldv_i{color:var(--cnt-bg-h)}.tp-fldv_b:focus+.tp-fldv_i{color:var(--cnt-bg-f)}.tp-fldv_b:active+.tp-fldv_i{color:var(--cnt-bg-a)}.tp-fldv.tp-v-disabled>.tp-fldv_i{opacity:.5}.tp-grlv{position:relative}.tp-grlv_g{display:block;height:calc(var(--bld-us)*3)}.tp-grlv_g polyline{fill:none;stroke:var(--mo-fg);stroke-linejoin:round}.tp-grlv_t{margin-top:-4px;transition:left .05s,top .05s;visibility:hidden}.tp-grlv_t.tp-grlv_t-a{visibility:visible}.tp-grlv_t.tp-grlv_t-in{transition:none}.tp-grlv.tp-v-disabled .tp-grlv_g{opacity:.5}.tp-grlv .tp-ttv{background-color:var(--mo-fg)}.tp-grlv .tp-ttv::before{border-top-color:var(--mo-fg)}.tp-lblv{align-items:center;display:flex;line-height:1.3;padding-left:var(--cnt-h-p);padding-right:var(--cnt-h-p)}.tp-lblv.tp-lblv-nol{display:block}.tp-lblv_l{color:var(--lbl-fg);flex:1;-webkit-hyphens:auto;hyphens:auto;overflow:hidden;padding-left:4px;padding-right:16px}.tp-lblv.tp-v-disabled .tp-lblv_l{opacity:.5}.tp-lblv.tp-lblv-nol .tp-lblv_l{display:none}.tp-lblv_v{align-self:flex-start;flex-grow:0;flex-shrink:0;width:160px}.tp-lblv.tp-lblv-nol .tp-lblv_v{width:100%}.tp-lstv_s{padding:0 20px 0 4px;width:100%}.tp-lstv_m{color:var(--btn-fg)}.tp-sglv_i{padding:0 4px}.tp-sglv.tp-v-disabled .tp-sglv_i{opacity:.5}.tp-mllv_i{display:block;height:calc(var(--bld-us)*3);line-height:var(--bld-us);padding:0 4px;resize:none;white-space:pre}.tp-mllv.tp-v-disabled .tp-mllv_i{opacity:.5}.tp-p2dv{position:relative}.tp-p2dv_h{display:flex}.tp-p2dv_b{height:var(--bld-us);margin-right:4px;position:relative;width:var(--bld-us)}.tp-p2dv_b svg{display:block;height:16px;left:50%;margin-left:-8px;margin-top:-8px;position:absolute;top:50%;width:16px}.tp-p2dv_b svg path{stroke:currentColor;stroke-width:2}.tp-p2dv_b svg circle{fill:currentColor}.tp-p2dv_t{flex:1}.tp-p2dv_p{height:0;margin-top:0;opacity:0;overflow:hidden;transition:height .2s ease-in-out,opacity .2s linear,margin .2s ease-in-out}.tp-p2dv.tp-p2dv-expanded .tp-p2dv_p{margin-top:var(--bld-s);opacity:1}.tp-p2dv .tp-popv{left:calc(-1*var(--cnt-h-p));right:calc(-1*var(--cnt-h-p));top:var(--bld-us)}.tp-p2dpv{padding-left:calc(var(--bld-us) + 4px)}.tp-p2dpv_p{cursor:crosshair;height:0;overflow:hidden;padding-bottom:100%;position:relative}.tp-p2dpv.tp-v-disabled .tp-p2dpv_p{opacity:.5}.tp-p2dpv_g{display:block;height:100%;left:0;pointer-events:none;position:absolute;top:0;width:100%}.tp-p2dpv_ax{opacity:.1;stroke:var(--in-fg);stroke-dasharray:1}.tp-p2dpv_l{opacity:.5;stroke:var(--in-fg);stroke-dasharray:1}.tp-p2dpv_m{border:var(--in-fg) solid 1px;border-radius:50%;box-sizing:border-box;height:4px;margin-left:-2px;margin-top:-2px;position:absolute;width:4px}.tp-p2dpv_p:focus .tp-p2dpv_m{background-color:var(--in-fg);border-width:0}.tp-popv{background-color:var(--bs-bg);border-radius:6px;box-shadow:0 2px 4px var(--bs-sh);display:none;max-width:168px;padding:var(--cnt-v-p) var(--cnt-h-p);position:absolute;visibility:hidden;z-index:1000}.tp-popv.tp-popv-v{display:block;visibility:visible}.tp-sprv_r{background-color:var(--grv-fg);border-width:0;display:block;height:2px;margin:0;width:100%}.tp-sprv.tp-v-disabled .tp-sprv_r{opacity:.5}.tp-sldv.tp-v-disabled{opacity:.5}.tp-sldv_t{box-sizing:border-box;cursor:pointer;height:var(--bld-us);margin:0 6px;outline:none;position:relative}.tp-sldv_t::before{background-color:var(--in-bg);border-radius:1px;bottom:0;content:"";display:block;height:2px;left:0;margin:auto;position:absolute;right:0;top:0}.tp-sldv_k{height:100%;left:0;position:absolute;top:0}.tp-sldv_k::before{background-color:var(--in-fg);border-radius:1px;bottom:0;content:"";display:block;height:2px;left:0;margin-bottom:auto;margin-top:auto;position:absolute;right:0;top:0}.tp-sldv_k::after{background-color:var(--btn-bg);border-radius:var(--elm-br);bottom:0;content:"";display:block;height:12px;margin-bottom:auto;margin-top:auto;position:absolute;right:-6px;top:0;width:12px}.tp-sldv_t:hover .tp-sldv_k::after{background-color:var(--btn-bg-h)}.tp-sldv_t:focus .tp-sldv_k::after{background-color:var(--btn-bg-f)}.tp-sldv_t:active .tp-sldv_k::after{background-color:var(--btn-bg-a)}.tp-sldtxtv{display:flex}.tp-sldtxtv_s{flex:2}.tp-sldtxtv_t{flex:1;margin-left:4px}.tp-tabv{position:relative}.tp-tabv_t{align-items:flex-end;color:var(--cnt-bg);display:flex;overflow:hidden;position:relative}.tp-tabv_t:hover{color:var(--cnt-bg-h)}.tp-tabv_t:has(*:focus){color:var(--cnt-bg-f)}.tp-tabv_t:has(*:active){color:var(--cnt-bg-a)}.tp-tabv_t::before{background-color:currentColor;bottom:0;content:"";height:2px;left:0;pointer-events:none;position:absolute;right:0}.tp-tabv.tp-v-disabled .tp-tabv_t::before{opacity:.5}.tp-tabv.tp-tabv-nop .tp-tabv_t{height:calc(var(--bld-us) + 4px);position:relative}.tp-tabv.tp-tabv-nop .tp-tabv_t::before{background-color:var(--cnt-bg);bottom:0;content:"";height:2px;left:0;position:absolute;right:0}.tp-tabv_c{padding-bottom:var(--cnt-v-p);padding-left:4px;padding-top:var(--cnt-v-p)}.tp-tabv_i{bottom:0;color:var(--cnt-bg);left:0;overflow:hidden;position:absolute;top:calc(var(--bld-us) + 4px);width:var(--bs-br)}.tp-tabv_i::before{background-color:currentColor;bottom:0;content:"";left:0;position:absolute;top:0;width:4px}.tp-tabv_t:hover+.tp-tabv_i{color:var(--cnt-bg-h)}.tp-tabv_t:has(*:focus)+.tp-tabv_i{color:var(--cnt-bg-f)}.tp-tabv_t:has(*:active)+.tp-tabv_i{color:var(--cnt-bg-a)}.tp-tabv.tp-v-disabled>.tp-tabv_i{opacity:.5}.tp-tbiv{flex:1;min-width:0;position:relative}.tp-tbiv+.tp-tbiv{margin-left:2px}.tp-tbiv+.tp-tbiv.tp-v-disabled::before{opacity:.5}.tp-tbiv_b{display:block;padding-left:calc(var(--cnt-h-p) + 4px);padding-right:calc(var(--cnt-h-p) + 4px);position:relative;width:100%}.tp-tbiv_b:disabled{opacity:.5}.tp-tbiv_b::before{background-color:var(--cnt-bg);bottom:2px;content:"";left:0;pointer-events:none;position:absolute;right:0;top:0}.tp-tbiv_b:hover::before{background-color:var(--cnt-bg-h)}.tp-tbiv_b:focus::before{background-color:var(--cnt-bg-f)}.tp-tbiv_b:active::before{background-color:var(--cnt-bg-a)}.tp-tbiv_t{color:var(--cnt-fg);height:calc(var(--bld-us) + 4px);line-height:calc(var(--bld-us) + 4px);opacity:.5;overflow:hidden;text-overflow:ellipsis}.tp-tbiv.tp-tbiv-sel .tp-tbiv_t{opacity:1}.tp-txtv{position:relative}.tp-txtv_i{padding:0 4px}.tp-txtv.tp-txtv-fst .tp-txtv_i{border-bottom-right-radius:0;border-top-right-radius:0}.tp-txtv.tp-txtv-mid .tp-txtv_i{border-radius:0}.tp-txtv.tp-txtv-lst .tp-txtv_i{border-bottom-left-radius:0;border-top-left-radius:0}.tp-txtv.tp-txtv-num .tp-txtv_i{text-align:right}.tp-txtv.tp-txtv-drg .tp-txtv_i{opacity:.3}.tp-txtv_k{cursor:pointer;height:100%;left:-3px;position:absolute;top:0;width:12px}.tp-txtv_k::before{background-color:var(--in-fg);border-radius:1px;bottom:0;content:"";height:calc(var(--bld-us) - 4px);left:50%;margin-bottom:auto;margin-left:-1px;margin-top:auto;opacity:.1;position:absolute;top:0;transition:border-radius .1s,height .1s,transform .1s,width .1s;width:2px}.tp-txtv_k:hover::before,.tp-txtv.tp-txtv-drg .tp-txtv_k::before{opacity:1}.tp-txtv.tp-txtv-drg .tp-txtv_k::before{border-radius:50%;height:4px;transform:translateX(-1px);width:4px}.tp-txtv_g{bottom:0;display:block;height:8px;left:50%;margin:auto;overflow:visible;pointer-events:none;position:absolute;top:0;visibility:hidden;width:100%}.tp-txtv.tp-txtv-drg .tp-txtv_g{visibility:visible}.tp-txtv_gb{fill:none;stroke:var(--in-fg);stroke-dasharray:1}.tp-txtv_gh{fill:none;stroke:var(--in-fg)}.tp-txtv .tp-ttv{margin-left:6px;visibility:hidden}.tp-txtv.tp-txtv-drg .tp-ttv{visibility:visible}.tp-ttv{background-color:var(--in-fg);border-radius:var(--elm-br);color:var(--bs-bg);padding:2px 4px;pointer-events:none;position:absolute;transform:translate(-50%, -100%)}.tp-ttv::before{border-color:var(--in-fg) rgba(0,0,0,0) rgba(0,0,0,0) rgba(0,0,0,0);border-style:solid;border-width:2px;box-sizing:border-box;content:"";font-size:.9em;height:4px;left:50%;margin-left:-2px;position:absolute;top:100%;width:4px}.tp-rotv{background-color:var(--bs-bg);border-radius:var(--bs-br);box-shadow:0 2px 4px var(--bs-sh);font-family:var(--font-family);font-size:11px;font-weight:500;line-height:1;text-align:left}.tp-rotv_b{border-bottom-left-radius:var(--bs-br);border-bottom-right-radius:var(--bs-br);border-top-left-radius:var(--bs-br);border-top-right-radius:var(--bs-br);padding-left:calc(4px + var(--bld-us) + var(--cnt-h-p));text-align:center}.tp-rotv.tp-rotv-expanded .tp-rotv_b{border-bottom-left-radius:0;border-bottom-right-radius:0}.tp-rotv.tp-rotv-not .tp-rotv_b{display:none}.tp-rotv_b:disabled .tp-rotv_m{display:none}.tp-rotv_c>.tp-fldv.tp-v-lst>.tp-fldv_c{border-bottom-left-radius:var(--bs-br);border-bottom-right-radius:var(--bs-br)}.tp-rotv_c>.tp-fldv.tp-v-lst>.tp-fldv_i{border-bottom-left-radius:var(--bs-br)}.tp-rotv_c>.tp-fldv.tp-v-lst:not(.tp-fldv-expanded)>.tp-fldv_b{border-bottom-left-radius:var(--bs-br);border-bottom-right-radius:var(--bs-br)}.tp-rotv_c .tp-fldv.tp-v-vlst:not(.tp-fldv-expanded)>.tp-fldv_b{border-bottom-right-radius:var(--bs-br)}.tp-rotv.tp-rotv-not .tp-rotv_c>.tp-fldv.tp-v-fst{margin-top:calc(-1*var(--cnt-v-p))}.tp-rotv.tp-rotv-not .tp-rotv_c>.tp-fldv.tp-v-fst>.tp-fldv_b{border-top-left-radius:var(--bs-br);border-top-right-radius:var(--bs-br)}.tp-rotv_c>.tp-tabv.tp-v-lst>.tp-tabv_c{border-bottom-left-radius:var(--bs-br);border-bottom-right-radius:var(--bs-br)}.tp-rotv_c>.tp-tabv.tp-v-lst>.tp-tabv_i{border-bottom-left-radius:var(--bs-br)}.tp-rotv.tp-rotv-not .tp-rotv_c>.tp-tabv.tp-v-fst{margin-top:calc(-1*var(--cnt-v-p))}.tp-rotv.tp-rotv-not .tp-rotv_c>.tp-tabv.tp-v-fst>.tp-tabv_t{border-top-left-radius:var(--bs-br);border-top-right-radius:var(--bs-br)}.tp-rotv.tp-v-disabled,.tp-rotv .tp-v-disabled{pointer-events:none}.tp-rotv.tp-v-hidden,.tp-rotv .tp-v-hidden{display:none}'),this.pool_.getAll().forEach((t=>{this.embedPluginStyle_(t)})),this.registerPlugin({plugins:[Ra,Ta,fe,Oa]})}}const Na=new e("3.1.10");t.BladeApi=n,t.ButtonApi=m,t.FolderApi=Dt,t.InputBindingApi=Ct,t.ListApi=Ea,t.MonitorBindingApi=kt,t.Pane=Da,t.SeparatorApi=Xt,t.SliderApi=xa,t.TabApi=ae,t.TabPageApi=oe,t.TextApi=Sa,t.TpChangeEvent=i,t.VERSION=Na,Object.defineProperty(t,"__esModule",{value:!0})}(e)},1430:function(t,e,n){var r,i;!function(o,a){"use strict";t.exports?t.exports=a():void 0===(i="function"==typeof(r=a)?r.call(e,n,e,t):r)||(t.exports=i)}(0,(function(t){"use strict";var e=t&&t.IPv6;return{best:function(t){var e,n,r=t.toLowerCase().split(":"),i=r.length,o=8;for(""===r[0]&&""===r[1]&&""===r[2]?(r.shift(),r.shift()):""===r[0]&&""===r[1]?r.shift():""===r[i-1]&&""===r[i-2]&&r.pop(),-1!==r[(i=r.length)-1].indexOf(".")&&(o=7),e=0;e<i&&""!==r[e];e++);if(e<o)for(r.splice(e,1,"0000");r.length<o;)r.splice(e,0,"0000");for(var a=0;a<o;a++){n=r[a].split("");for(var s=0;s<3&&("0"===n[0]&&n.length>1);s++)n.splice(0,1);r[a]=n.join("")}var l=-1,u=0,c=0,d=-1,f=!1;for(a=0;a<o;a++)f?"0"===r[a]?c+=1:(f=!1,c>u&&(l=d,u=c)):"0"===r[a]&&(f=!0,d=a,c=1);c>u&&(l=d,u=c),u>1&&r.splice(l,u,""),i=r.length;var h="";for(""===r[0]&&(h=":"),a=0;a<i&&(h+=r[a],a!==i-1);a++)h+=":";return""===r[i-1]&&(h+=":"),h},noConflict:function(){return t.IPv6===this&&(t.IPv6=e),this}}}))},4704:function(t,e,n){var r,i;!function(o,a){"use strict";t.exports?t.exports=a():void 0===(i="function"==typeof(r=a)?r.call(e,n,e,t):r)||(t.exports=i)}(0,(function(t){"use strict";var e=t&&t.SecondLevelDomains,n={list:{ac:" com gov mil net org ",ae:" ac co gov mil name net org pro sch ",af:" com edu gov net org ",al:" com edu gov mil net org ",ao:" co ed gv it og pb ",ar:" com edu gob gov int mil net org tur ",at:" ac co gv or ",au:" asn com csiro edu gov id net org ",ba:" co com edu gov mil net org rs unbi unmo unsa untz unze ",bb:" biz co com edu gov info net org store tv ",bh:" biz cc com edu gov info net org ",bn:" com edu gov net org ",bo:" com edu gob gov int mil net org tv ",br:" adm adv agr am arq art ato b bio blog bmd cim cng cnt com coop ecn edu eng esp etc eti far flog fm fnd fot fst g12 ggf gov imb ind inf jor jus lel mat med mil mus net nom not ntr odo org ppg pro psc psi qsl rec slg srv tmp trd tur tv vet vlog wiki zlg ",bs:" com edu gov net org ",bz:" du et om ov rg ",ca:" ab bc mb nb nf nl ns nt nu on pe qc sk yk ",ck:" biz co edu gen gov info net org ",cn:" ac ah bj com cq edu fj gd gov gs gx gz ha hb he hi hl hn jl js jx ln mil net nm nx org qh sc sd sh sn sx tj tw xj xz yn zj ",co:" com edu gov mil net nom org ",cr:" ac c co ed fi go or sa ",cy:" ac biz com ekloges gov ltd name net org parliament press pro tm ",do:" art com edu gob gov mil net org sld web ",dz:" art asso com edu gov net org pol ",ec:" com edu fin gov info med mil net org pro ",eg:" com edu eun gov mil name net org sci ",er:" com edu gov ind mil net org rochest w ",es:" com edu gob nom org ",et:" biz com edu gov info name net org ",fj:" ac biz com info mil name net org pro ",fk:" ac co gov net nom org ",fr:" asso com f gouv nom prd presse tm ",gg:" co net org ",gh:" com edu gov mil org ",gn:" ac com gov net org ",gr:" com edu gov mil net org ",gt:" com edu gob ind mil net org ",gu:" com edu gov net org ",hk:" com edu gov idv net org ",hu:" 2000 agrar bolt casino city co erotica erotika film forum games hotel info ingatlan jogasz konyvelo lakas media news org priv reklam sex shop sport suli szex tm tozsde utazas video ",id:" ac co go mil net or sch web ",il:" ac co gov idf k12 muni net org ",in:" ac co edu ernet firm gen gov i ind mil net nic org res ",iq:" com edu gov i mil net org ",ir:" ac co dnssec gov i id net org sch ",it:" edu gov ",je:" co net org ",jo:" com edu gov mil name net org sch ",jp:" ac ad co ed go gr lg ne or ",ke:" ac co go info me mobi ne or sc ",kh:" com edu gov mil net org per ",ki:" biz com de edu gov info mob net org tel ",km:" asso com coop edu gouv k medecin mil nom notaires pharmaciens presse tm veterinaire ",kn:" edu gov net org ",kr:" ac busan chungbuk chungnam co daegu daejeon es gangwon go gwangju gyeongbuk gyeonggi gyeongnam hs incheon jeju jeonbuk jeonnam k kg mil ms ne or pe re sc seoul ulsan ",kw:" com edu gov net org ",ky:" com edu gov net org ",kz:" com edu gov mil net org ",lb:" com edu gov net org ",lk:" assn com edu gov grp hotel int ltd net ngo org sch soc web ",lr:" com edu gov net org ",lv:" asn com conf edu gov id mil net org ",ly:" com edu gov id med net org plc sch ",ma:" ac co gov m net org press ",mc:" asso tm ",me:" ac co edu gov its net org priv ",mg:" com edu gov mil nom org prd tm ",mk:" com edu gov inf name net org pro ",ml:" com edu gov net org presse ",mn:" edu gov org ",mo:" com edu gov net org ",mt:" com edu gov net org ",mv:" aero biz com coop edu gov info int mil museum name net org pro ",mw:" ac co com coop edu gov int museum net org ",mx:" com edu gob net org ",my:" com edu gov mil name net org sch ",nf:" arts com firm info net other per rec store web ",ng:" biz com edu gov mil mobi name net org sch ",ni:" ac co com edu gob mil net nom org ",np:" com edu gov mil net org ",nr:" biz com edu gov info net org ",om:" ac biz co com edu gov med mil museum net org pro sch ",pe:" com edu gob mil net nom org sld ",ph:" com edu gov i mil net ngo org ",pk:" biz com edu fam gob gok gon gop gos gov net org web ",pl:" art bialystok biz com edu gda gdansk gorzow gov info katowice krakow lodz lublin mil net ngo olsztyn org poznan pwr radom slupsk szczecin torun warszawa waw wroc wroclaw zgora ",pr:" ac biz com edu est gov info isla name net org pro prof ",ps:" com edu gov net org plo sec ",pw:" belau co ed go ne or ",ro:" arts com firm info nom nt org rec store tm www ",rs:" ac co edu gov in org ",sb:" com edu gov net org ",sc:" com edu gov net org ",sh:" co com edu gov net nom org ",sl:" com edu gov net org ",st:" co com consulado edu embaixada gov mil net org principe saotome store ",sv:" com edu gob org red ",sz:" ac co org ",tr:" av bbs bel biz com dr edu gen gov info k12 name net org pol tel tsk tv web ",tt:" aero biz cat co com coop edu gov info int jobs mil mobi museum name net org pro tel travel ",tw:" club com ebiz edu game gov idv mil net org ",mu:" ac co com gov net or org ",mz:" ac co edu gov org ",na:" co com ",nz:" ac co cri geek gen govt health iwi maori mil net org parliament school ",pa:" abo ac com edu gob ing med net nom org sld ",pt:" com edu gov int net nome org publ ",py:" com edu gov mil net org ",qa:" com edu gov mil net org ",re:" asso com nom ",ru:" ac adygeya altai amur arkhangelsk astrakhan bashkiria belgorod bir bryansk buryatia cbg chel chelyabinsk chita chukotka chuvashia com dagestan e-burg edu gov grozny int irkutsk ivanovo izhevsk jar joshkar-ola kalmykia kaluga kamchatka karelia kazan kchr kemerovo khabarovsk khakassia khv kirov koenig komi kostroma kranoyarsk kuban kurgan kursk lipetsk magadan mari mari-el marine mil mordovia mosreg msk murmansk nalchik net nnov nov novosibirsk nsk omsk orenburg org oryol penza perm pp pskov ptz rnd ryazan sakhalin samara saratov simbirsk smolensk spb stavropol stv surgut tambov tatarstan tom tomsk tsaritsyn tsk tula tuva tver tyumen udm udmurtia ulan-ude vladikavkaz vladimir vladivostok volgograd vologda voronezh vrn vyatka yakutia yamal yekaterinburg yuzhno-sakhalinsk ",rw:" ac co com edu gouv gov int mil net ",sa:" com edu gov med net org pub sch ",sd:" com edu gov info med net org tv ",se:" a ac b bd c d e f g h i k l m n o org p parti pp press r s t tm u w x y z ",sg:" com edu gov idn net org per ",sn:" art com edu gouv org perso univ ",sy:" com edu gov mil net news org ",th:" ac co go in mi net or ",tj:" ac biz co com edu go gov info int mil name net nic org test web ",tn:" agrinet com defense edunet ens fin gov ind info intl mincom nat net org perso rnrt rns rnu tourism ",tz:" ac co go ne or ",ua:" biz cherkassy chernigov chernovtsy ck cn co com crimea cv dn dnepropetrovsk donetsk dp edu gov if in ivano-frankivsk kh kharkov kherson khmelnitskiy kiev kirovograd km kr ks kv lg lugansk lutsk lviv me mk net nikolaev od odessa org pl poltava pp rovno rv sebastopol sumy te ternopil uzhgorod vinnica vn zaporizhzhe zhitomir zp zt ",ug:" ac co go ne or org sc ",uk:" ac bl british-library co cym gov govt icnet jet lea ltd me mil mod national-library-scotland nel net nhs nic nls org orgn parliament plc police sch scot soc ",us:" dni fed isa kids nsn ",uy:" com edu gub mil net org ",ve:" co com edu gob info mil net org web ",vi:" co com k12 net org ",vn:" ac biz com edu gov health info int name net org pro ",ye:" co com gov ltd me net org plc ",yu:" ac co edu gov org ",za:" ac agric alt bourse city co cybernet db edu gov grondar iaccess imt inca landesign law mil net ngo nis nom olivetti org pix school tm web ",zm:" ac co com edu gov net org sch ",com:"ar br cn de eu gb gr hu jpn kr no qc ru sa se uk us uy za ",net:"gb jp se uk ",org:"ae",de:"com "},has:function(t){var e=t.lastIndexOf(".");if(e<=0||e>=t.length-1)return!1;var r=t.lastIndexOf(".",e-1);if(r<=0||r>=e-1)return!1;var i=n.list[t.slice(e+1)];return!!i&&i.indexOf(" "+t.slice(r+1,e)+" ")>=0},is:function(t){var e=t.lastIndexOf(".");if(e<=0||e>=t.length-1)return!1;if(t.lastIndexOf(".",e-1)>=0)return!1;var r=n.list[t.slice(e+1)];return!!r&&r.indexOf(" "+t.slice(0,e)+" ")>=0},get:function(t){var e=t.lastIndexOf(".");if(e<=0||e>=t.length-1)return null;var r=t.lastIndexOf(".",e-1);if(r<=0||r>=e-1)return null;var i=n.list[t.slice(e+1)];return i?i.indexOf(" "+t.slice(r+1,e)+" ")<0?null:t.slice(r+1):null},noConflict:function(){return t.SecondLevelDomains===this&&(t.SecondLevelDomains=e),this}};return n}))},4193:function(t,e,n){var r,i,o;!function(a,s){"use strict";t.exports?t.exports=s(n(9340),n(1430),n(4704)):(i=[n(9340),n(1430),n(4704)],void 0===(o="function"==typeof(r=s)?r.apply(e,i):r)||(t.exports=o))}(0,(function(t,e,n,r){"use strict";var i=r&&r.URI;function o(t,e){var n=arguments.length>=1;if(!(this instanceof o))return n?arguments.length>=2?new o(t,e):new o(t):new o;if(void 0===t){if(n)throw new TypeError("undefined is not a valid argument for URI");t="undefined"!=typeof location?location.href+"":""}if(null===t&&n)throw new TypeError("null is not a valid argument for URI");return this.href(t),void 0!==e?this.absoluteTo(e):this}o.version="1.19.11";var a=o.prototype,s=Object.prototype.hasOwnProperty;function l(t){return t.replace(/([.*+?^=!:${}()|[\]\/\\])/g,"\\$1")}function u(t){return void 0===t?"Undefined":String(Object.prototype.toString.call(t)).slice(8,-1)}function c(t){return"Array"===u(t)}function d(t,e){var n,r,i={};if("RegExp"===u(e))i=null;else if(c(e))for(n=0,r=e.length;n<r;n++)i[e[n]]=!0;else i[e]=!0;for(n=0,r=t.length;n<r;n++){(i&&void 0!==i[t[n]]||!i&&e.test(t[n]))&&(t.splice(n,1),r--,n--)}return t}function f(t,e){var n,r;if(c(e)){for(n=0,r=e.length;n<r;n++)if(!f(t,e[n]))return!1;return!0}var i=u(e);for(n=0,r=t.length;n<r;n++)if("RegExp"===i){if("string"==typeof t[n]&&t[n].match(e))return!0}else if(t[n]===e)return!0;return!1}function h(t,e){if(!c(t)||!c(e))return!1;if(t.length!==e.length)return!1;t.sort(),e.sort();for(var n=0,r=t.length;n<r;n++)if(t[n]!==e[n])return!1;return!0}function p(t){return t.replace(/^\/+|\/+$/g,"")}function m(t){return escape(t)}function g(t){return encodeURIComponent(t).replace(/[!'()*]/g,m).replace(/\*/g,"%2A")}o._parts=function(){return{protocol:null,username:null,password:null,hostname:null,urn:null,port:null,path:null,query:null,fragment:null,preventInvalidHostname:o.preventInvalidHostname,duplicateQueryParameters:o.duplicateQueryParameters,escapeQuerySpace:o.escapeQuerySpace}},o.preventInvalidHostname=!1,o.duplicateQueryParameters=!1,o.escapeQuerySpace=!0,o.protocol_expression=/^[a-z][a-z0-9.+-]*$/i,o.idn_expression=/[^a-z0-9\._-]/i,o.punycode_expression=/(xn--)/i,o.ip4_expression=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,o.ip6_expression=/^\s*((([0-9A-Fa-f]{1,4}:){7}([0-9A-Fa-f]{1,4}|:))|(([0-9A-Fa-f]{1,4}:){6}(:[0-9A-Fa-f]{1,4}|((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9A-Fa-f]{1,4}:){5}(((:[0-9A-Fa-f]{1,4}){1,2})|:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9A-Fa-f]{1,4}:){4}(((:[0-9A-Fa-f]{1,4}){1,3})|((:[0-9A-Fa-f]{1,4})?:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){3}(((:[0-9A-Fa-f]{1,4}){1,4})|((:[0-9A-Fa-f]{1,4}){0,2}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){2}(((:[0-9A-Fa-f]{1,4}){1,5})|((:[0-9A-Fa-f]{1,4}){0,3}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){1}(((:[0-9A-Fa-f]{1,4}){1,6})|((:[0-9A-Fa-f]{1,4}){0,4}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(:(((:[0-9A-Fa-f]{1,4}){1,7})|((:[0-9A-Fa-f]{1,4}){0,5}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))(%.+)?\s*$/,o.find_uri_expression=/\b((?:[a-z][\w-]+:(?:\/{1,3}|[a-z0-9%])|www\d{0,3}[.]|[a-z0-9.\-]+[.][a-z]{2,4}\/)(?:[^\s()<>]+|\(([^\s()<>]+|(\([^\s()<>]+\)))*\))+(?:\(([^\s()<>]+|(\([^\s()<>]+\)))*\)|[^\s`!()\[\]{};:'".,<>?]))/gi,o.findUri={start:/\b(?:([a-z][a-z0-9.+-]*:\/\/)|www\.)/gi,end:/[\s\r\n]|$/,trim:/[`!()\[\]{};:'".,<>?]+$/,parens:/(\([^\)]*\)|\[[^\]]*\]|\{[^}]*\}|<[^>]*>)/g},o.leading_whitespace_expression=/^[\x00-\x20\u00a0\u1680\u2000-\u200a\u2028\u2029\u202f\u205f\u3000\ufeff]+/,o.ascii_tab_whitespace=/[\u0009\u000A\u000D]+/g,o.defaultPorts={http:"80",https:"443",ftp:"21",gopher:"70",ws:"80",wss:"443"},o.hostProtocols=["http","https"],o.invalid_hostname_characters=/[^a-zA-Z0-9\.\-:_]/,o.domAttributes={a:"href",blockquote:"cite",link:"href",base:"href",script:"src",form:"action",img:"src",area:"href",iframe:"src",embed:"src",source:"src",track:"src",input:"src",audio:"src",video:"src"},o.getDomAttribute=function(t){if(t&&t.nodeName){var e=t.nodeName.toLowerCase();if("input"!==e||"image"===t.type)return o.domAttributes[e]}},o.encode=g,o.decode=decodeURIComponent,o.iso8859=function(){o.encode=escape,o.decode=unescape},o.unicode=function(){o.encode=g,o.decode=decodeURIComponent},o.characters={pathname:{encode:{expression:/%(24|26|2B|2C|3B|3D|3A|40)/gi,map:{"%24":"$","%26":"&","%2B":"+","%2C":",","%3B":";","%3D":"=","%3A":":","%40":"@"}},decode:{expression:/[\/\?#]/g,map:{"/":"%2F","?":"%3F","#":"%23"}}},reserved:{encode:{expression:/%(21|23|24|26|27|28|29|2A|2B|2C|2F|3A|3B|3D|3F|40|5B|5D)/gi,map:{"%3A":":","%2F":"/","%3F":"?","%23":"#","%5B":"[","%5D":"]","%40":"@","%21":"!","%24":"$","%26":"&","%27":"'","%28":"(","%29":")","%2A":"*","%2B":"+","%2C":",","%3B":";","%3D":"="}}},urnpath:{encode:{expression:/%(21|24|27|28|29|2A|2B|2C|3B|3D|40)/gi,map:{"%21":"!","%24":"$","%27":"'","%28":"(","%29":")","%2A":"*","%2B":"+","%2C":",","%3B":";","%3D":"=","%40":"@"}},decode:{expression:/[\/\?#:]/g,map:{"/":"%2F","?":"%3F","#":"%23",":":"%3A"}}}},o.encodeQuery=function(t,e){var n=o.encode(t+"");return void 0===e&&(e=o.escapeQuerySpace),e?n.replace(/%20/g,"+"):n},o.decodeQuery=function(t,e){t+="",void 0===e&&(e=o.escapeQuerySpace);try{return o.decode(e?t.replace(/\+/g,"%20"):t)}catch(e){return t}};var v,y={encode:"encode",decode:"decode"},b=function(t,e){return function(n){try{return o[e](n+"").replace(o.characters[t][e].expression,(function(n){return o.characters[t][e].map[n]}))}catch(t){return n}}};for(v in y)o[v+"PathSegment"]=b("pathname",y[v]),o[v+"UrnPathSegment"]=b("urnpath",y[v]);var _=function(t,e,n){return function(r){var i;i=n?function(t){return o[e](o[n](t))}:o[e];for(var a=(r+"").split(t),s=0,l=a.length;s<l;s++)a[s]=i(a[s]);return a.join(t)}};function w(t){return function(e,n){return void 0===e?this._parts[t]||"":(this._parts[t]=e||null,this.build(!n),this)}}function A(t,e){return function(n,r){return void 0===n?this._parts[t]||"":(null!==n&&(n+="").charAt(0)===e&&(n=n.substring(1)),this._parts[t]=n,this.build(!r),this)}}o.decodePath=_("/","decodePathSegment"),o.decodeUrnPath=_(":","decodeUrnPathSegment"),o.recodePath=_("/","encodePathSegment","decode"),o.recodeUrnPath=_(":","encodeUrnPathSegment","decode"),o.encodeReserved=b("reserved","encode"),o.parse=function(t,e){var n;return e||(e={preventInvalidHostname:o.preventInvalidHostname}),(n=(t=(t=t.replace(o.leading_whitespace_expression,"")).replace(o.ascii_tab_whitespace,"")).indexOf("#"))>-1&&(e.fragment=t.substring(n+1)||null,t=t.substring(0,n)),(n=t.indexOf("?"))>-1&&(e.query=t.substring(n+1)||null,t=t.substring(0,n)),"//"===(t=(t=t.replace(/^(https?|ftp|wss?)?:+[/\\]*/i,"$1://")).replace(/^[/\\]{2,}/i,"//")).substring(0,2)?(e.protocol=null,t=t.substring(2),t=o.parseAuthority(t,e)):(n=t.indexOf(":"))>-1&&(e.protocol=t.substring(0,n)||null,e.protocol&&!e.protocol.match(o.protocol_expression)?e.protocol=void 0:"//"===t.substring(n+1,n+3).replace(/\\/g,"/")?(t=t.substring(n+3),t=o.parseAuthority(t,e)):(t=t.substring(n+1),e.urn=!0)),e.path=t,e},o.parseHost=function(t,e){t||(t="");var n,r,i=(t=t.replace(/\\/g,"/")).indexOf("/");if(-1===i&&(i=t.length),"["===t.charAt(0))n=t.indexOf("]"),e.hostname=t.substring(1,n)||null,e.port=t.substring(n+2,i)||null,"/"===e.port&&(e.port=null);else{var a=t.indexOf(":"),s=t.indexOf("/"),l=t.indexOf(":",a+1);-1!==l&&(-1===s||l<s)?(e.hostname=t.substring(0,i)||null,e.port=null):(r=t.substring(0,i).split(":"),e.hostname=r[0]||null,e.port=r[1]||null)}return e.hostname&&"/"!==t.substring(i).charAt(0)&&(i++,t="/"+t),e.preventInvalidHostname&&o.ensureValidHostname(e.hostname,e.protocol),e.port&&o.ensureValidPort(e.port),t.substring(i)||"/"},o.parseAuthority=function(t,e){return t=o.parseUserinfo(t,e),o.parseHost(t,e)},o.parseUserinfo=function(t,e){var n=t;-1!==t.indexOf("\\")&&(t=t.replace(/\\/g,"/"));var r,i=t.indexOf("/"),a=t.lastIndexOf("@",i>-1?i:t.length-1);return a>-1&&(-1===i||a<i)?(r=t.substring(0,a).split(":"),e.username=r[0]?o.decode(r[0]):null,r.shift(),e.password=r[0]?o.decode(r.join(":")):null,t=n.substring(a+1)):(e.username=null,e.password=null),t},o.parseQuery=function(t,e){if(!t)return{};if(!(t=t.replace(/&+/g,"&").replace(/^\?*&*|&+$/g,"")))return{};for(var n,r,i,a={},l=t.split("&"),u=l.length,c=0;c<u;c++)n=l[c].split("="),r=o.decodeQuery(n.shift(),e),i=n.length?o.decodeQuery(n.join("="),e):null,"__proto__"!==r&&(s.call(a,r)?("string"!=typeof a[r]&&null!==a[r]||(a[r]=[a[r]]),a[r].push(i)):a[r]=i);return a},o.build=function(t){var e="",n=!1;return t.protocol&&(e+=t.protocol+":"),t.urn||!e&&!t.hostname||(e+="//",n=!0),e+=o.buildAuthority(t)||"","string"==typeof t.path&&("/"!==t.path.charAt(0)&&n&&(e+="/"),e+=t.path),"string"==typeof t.query&&t.query&&(e+="?"+t.query),"string"==typeof t.fragment&&t.fragment&&(e+="#"+t.fragment),e},o.buildHost=function(t){var e="";return t.hostname?(o.ip6_expression.test(t.hostname)?e+="["+t.hostname+"]":e+=t.hostname,t.port&&(e+=":"+t.port),e):""},o.buildAuthority=function(t){return o.buildUserinfo(t)+o.buildHost(t)},o.buildUserinfo=function(t){var e="";return t.username&&(e+=o.encode(t.username)),t.password&&(e+=":"+o.encode(t.password)),e&&(e+="@"),e},o.buildQuery=function(t,e,n){var r,i,a,l,u="";for(i in t)if("__proto__"!==i&&s.call(t,i))if(c(t[i]))for(r={},a=0,l=t[i].length;a<l;a++)void 0!==t[i][a]&&void 0===r[t[i][a]+""]&&(u+="&"+o.buildQueryParameter(i,t[i][a],n),!0!==e&&(r[t[i][a]+""]=!0));else void 0!==t[i]&&(u+="&"+o.buildQueryParameter(i,t[i],n));return u.substring(1)},o.buildQueryParameter=function(t,e,n){return o.encodeQuery(t,n)+(null!==e?"="+o.encodeQuery(e,n):"")},o.addQuery=function(t,e,n){if("object"==typeof e)for(var r in e)s.call(e,r)&&o.addQuery(t,r,e[r]);else{if("string"!=typeof e)throw new TypeError("URI.addQuery() accepts an object, string as the name parameter");if(void 0===t[e])return void(t[e]=n);"string"==typeof t[e]&&(t[e]=[t[e]]),c(n)||(n=[n]),t[e]=(t[e]||[]).concat(n)}},o.setQuery=function(t,e,n){if("object"==typeof e)for(var r in e)s.call(e,r)&&o.setQuery(t,r,e[r]);else{if("string"!=typeof e)throw new TypeError("URI.setQuery() accepts an object, string as the name parameter");t[e]=void 0===n?null:n}},o.removeQuery=function(t,e,n){var r,i,a;if(c(e))for(r=0,i=e.length;r<i;r++)t[e[r]]=void 0;else if("RegExp"===u(e))for(a in t)e.test(a)&&(t[a]=void 0);else if("object"==typeof e)for(a in e)s.call(e,a)&&o.removeQuery(t,a,e[a]);else{if("string"!=typeof e)throw new TypeError("URI.removeQuery() accepts an object, string, RegExp as the first parameter");void 0!==n?"RegExp"===u(n)?!c(t[e])&&n.test(t[e])?t[e]=void 0:t[e]=d(t[e],n):t[e]!==String(n)||c(n)&&1!==n.length?c(t[e])&&(t[e]=d(t[e],n)):t[e]=void 0:t[e]=void 0}},o.hasQuery=function(t,e,n,r){switch(u(e)){case"String":break;case"RegExp":for(var i in t)if(s.call(t,i)&&e.test(i)&&(void 0===n||o.hasQuery(t,i,n)))return!0;return!1;case"Object":for(var a in e)if(s.call(e,a)&&!o.hasQuery(t,a,e[a]))return!1;return!0;default:throw new TypeError("URI.hasQuery() accepts a string, regular expression or object as the name parameter")}switch(u(n)){case"Undefined":return e in t;case"Boolean":return n===Boolean(c(t[e])?t[e].length:t[e]);case"Function":return!!n(t[e],e,t);case"Array":return!!c(t[e])&&(r?f:h)(t[e],n);case"RegExp":return c(t[e])?!!r&&f(t[e],n):Boolean(t[e]&&t[e].match(n));case"Number":n=String(n);case"String":return c(t[e])?!!r&&f(t[e],n):t[e]===n;default:throw new TypeError("URI.hasQuery() accepts undefined, boolean, string, number, RegExp, Function as the value parameter")}},o.joinPaths=function(){for(var t=[],e=[],n=0,r=0;r<arguments.length;r++){var i=new o(arguments[r]);t.push(i);for(var a=i.segment(),s=0;s<a.length;s++)"string"==typeof a[s]&&e.push(a[s]),a[s]&&n++}if(!e.length||!n)return new o("");var l=new o("").segment(e);return""!==t[0].path()&&"/"!==t[0].path().slice(0,1)||l.path("/"+l.path()),l.normalize()},o.commonPath=function(t,e){var n,r=Math.min(t.length,e.length);for(n=0;n<r;n++)if(t.charAt(n)!==e.charAt(n)){n--;break}return n<1?t.charAt(0)===e.charAt(0)&&"/"===t.charAt(0)?"/":"":("/"===t.charAt(n)&&"/"===e.charAt(n)||(n=t.substring(0,n).lastIndexOf("/")),t.substring(0,n+1))},o.withinString=function(t,e,n){n||(n={});var r=n.start||o.findUri.start,i=n.end||o.findUri.end,a=n.trim||o.findUri.trim,s=n.parens||o.findUri.parens,l=/[a-z0-9-]=["']?$/i;for(r.lastIndex=0;;){var u=r.exec(t);if(!u)break;var c=u.index;if(n.ignoreHtml){var d=t.slice(Math.max(c-3,0),c);if(d&&l.test(d))continue}for(var f=c+t.slice(c).search(i),h=t.slice(c,f),p=-1;;){var m=s.exec(h);if(!m)break;var g=m.index+m[0].length;p=Math.max(p,g)}if(!((h=p>-1?h.slice(0,p)+h.slice(p).replace(a,""):h.replace(a,"")).length<=u[0].length||n.ignore&&n.ignore.test(h))){var v=e(h,c,f=c+h.length,t);void 0!==v?(v=String(v),t=t.slice(0,c)+v+t.slice(f),r.lastIndex=c+v.length):r.lastIndex=f}}return r.lastIndex=0,t},o.ensureValidHostname=function(e,n){var r=!!e,i=!1;if(!!n&&(i=f(o.hostProtocols,n)),i&&!r)throw new TypeError("Hostname cannot be empty, if protocol is "+n);if(e&&e.match(o.invalid_hostname_characters)){if(!t)throw new TypeError('Hostname "'+e+'" contains characters other than [A-Z0-9.-:_] and Punycode.js is not available');if(t.toASCII(e).match(o.invalid_hostname_characters))throw new TypeError('Hostname "'+e+'" contains characters other than [A-Z0-9.-:_]')}},o.ensureValidPort=function(t){if(t){var e=Number(t);if(!(/^[0-9]+$/.test(e)&&e>0&&e<65536))throw new TypeError('Port "'+t+'" is not a valid port')}},o.noConflict=function(t){if(t){var e={URI:this.noConflict()};return r.URITemplate&&"function"==typeof r.URITemplate.noConflict&&(e.URITemplate=r.URITemplate.noConflict()),r.IPv6&&"function"==typeof r.IPv6.noConflict&&(e.IPv6=r.IPv6.noConflict()),r.SecondLevelDomains&&"function"==typeof r.SecondLevelDomains.noConflict&&(e.SecondLevelDomains=r.SecondLevelDomains.noConflict()),e}return r.URI===this&&(r.URI=i),this},a.build=function(t){return!0===t?this._deferred_build=!0:(void 0===t||this._deferred_build)&&(this._string=o.build(this._parts),this._deferred_build=!1),this},a.clone=function(){return new o(this)},a.valueOf=a.toString=function(){return this.build(!1)._string},a.protocol=w("protocol"),a.username=w("username"),a.password=w("password"),a.hostname=w("hostname"),a.port=w("port"),a.query=A("query","?"),a.fragment=A("fragment","#"),a.search=function(t,e){var n=this.query(t,e);return"string"==typeof n&&n.length?"?"+n:n},a.hash=function(t,e){var n=this.fragment(t,e);return"string"==typeof n&&n.length?"#"+n:n},a.pathname=function(t,e){if(void 0===t||!0===t){var n=this._parts.path||(this._parts.hostname?"/":"");return t?(this._parts.urn?o.decodeUrnPath:o.decodePath)(n):n}return this._parts.urn?this._parts.path=t?o.recodeUrnPath(t):"":this._parts.path=t?o.recodePath(t):"/",this.build(!e),this},a.path=a.pathname,a.href=function(t,e){var n;if(void 0===t)return this.toString();this._string="",this._parts=o._parts();var r=t instanceof o,i="object"==typeof t&&(t.hostname||t.path||t.pathname);t.nodeName&&(t=t[o.getDomAttribute(t)]||"",i=!1);if(!r&&i&&void 0!==t.pathname&&(t=t.toString()),"string"==typeof t||t instanceof String)this._parts=o.parse(String(t),this._parts);else{if(!r&&!i)throw new TypeError("invalid input");var a=r?t._parts:t;for(n in a)"query"!==n&&s.call(this._parts,n)&&(this._parts[n]=a[n]);a.query&&this.query(a.query,!1)}return this.build(!e),this},a.is=function(t){var e=!1,r=!1,i=!1,a=!1,s=!1,l=!1,u=!1,c=!this._parts.urn;switch(this._parts.hostname&&(c=!1,r=o.ip4_expression.test(this._parts.hostname),i=o.ip6_expression.test(this._parts.hostname),s=(a=!(e=r||i))&&n&&n.has(this._parts.hostname),l=a&&o.idn_expression.test(this._parts.hostname),u=a&&o.punycode_expression.test(this._parts.hostname)),t.toLowerCase()){case"relative":return c;case"absolute":return!c;case"domain":case"name":return a;case"sld":return s;case"ip":return e;case"ip4":case"ipv4":case"inet4":return r;case"ip6":case"ipv6":case"inet6":return i;case"idn":return l;case"url":return!this._parts.urn;case"urn":return!!this._parts.urn;case"punycode":return u}return null};var E=a.protocol,x=a.port,S=a.hostname;a.protocol=function(t,e){if(t&&!(t=t.replace(/:(\/\/)?$/,"")).match(o.protocol_expression))throw new TypeError('Protocol "'+t+"\" contains characters other than [A-Z0-9.+-] or doesn't start with [A-Z]");return E.call(this,t,e)},a.scheme=a.protocol,a.port=function(t,e){return this._parts.urn?void 0===t?"":this:(void 0!==t&&(0===t&&(t=null),t&&(":"===(t+="").charAt(0)&&(t=t.substring(1)),o.ensureValidPort(t))),x.call(this,t,e))},a.hostname=function(t,e){if(this._parts.urn)return void 0===t?"":this;if(void 0!==t){var n={preventInvalidHostname:this._parts.preventInvalidHostname};if("/"!==o.parseHost(t,n))throw new TypeError('Hostname "'+t+'" contains characters other than [A-Z0-9.-]');t=n.hostname,this._parts.preventInvalidHostname&&o.ensureValidHostname(t,this._parts.protocol)}return S.call(this,t,e)},a.origin=function(t,e){if(this._parts.urn)return void 0===t?"":this;if(void 0===t){var n=this.protocol();return this.authority()?(n?n+"://":"")+this.authority():""}var r=o(t);return this.protocol(r.protocol()).authority(r.authority()).build(!e),this},a.host=function(t,e){if(this._parts.urn)return void 0===t?"":this;if(void 0===t)return this._parts.hostname?o.buildHost(this._parts):"";if("/"!==o.parseHost(t,this._parts))throw new TypeError('Hostname "'+t+'" contains characters other than [A-Z0-9.-]');return this.build(!e),this},a.authority=function(t,e){if(this._parts.urn)return void 0===t?"":this;if(void 0===t)return this._parts.hostname?o.buildAuthority(this._parts):"";if("/"!==o.parseAuthority(t,this._parts))throw new TypeError('Hostname "'+t+'" contains characters other than [A-Z0-9.-]');return this.build(!e),this},a.userinfo=function(t,e){if(this._parts.urn)return void 0===t?"":this;if(void 0===t){var n=o.buildUserinfo(this._parts);return n?n.substring(0,n.length-1):n}return"@"!==t[t.length-1]&&(t+="@"),o.parseUserinfo(t,this._parts),this.build(!e),this},a.resource=function(t,e){var n;return void 0===t?this.path()+this.search()+this.hash():(n=o.parse(t),this._parts.path=n.path,this._parts.query=n.query,this._parts.fragment=n.fragment,this.build(!e),this)},a.subdomain=function(t,e){if(this._parts.urn)return void 0===t?"":this;if(void 0===t){if(!this._parts.hostname||this.is("IP"))return"";var n=this._parts.hostname.length-this.domain().length-1;return this._parts.hostname.substring(0,n)||""}var r=this._parts.hostname.length-this.domain().length,i=this._parts.hostname.substring(0,r),a=new RegExp("^"+l(i));if(t&&"."!==t.charAt(t.length-1)&&(t+="."),-1!==t.indexOf(":"))throw new TypeError("Domains cannot contain colons");return t&&o.ensureValidHostname(t,this._parts.protocol),this._parts.hostname=this._parts.hostname.replace(a,t),this.build(!e),this},a.domain=function(t,e){if(this._parts.urn)return void 0===t?"":this;if("boolean"==typeof t&&(e=t,t=void 0),void 0===t){if(!this._parts.hostname||this.is("IP"))return"";var n=this._parts.hostname.match(/\./g);if(n&&n.length<2)return this._parts.hostname;var r=this._parts.hostname.length-this.tld(e).length-1;return r=this._parts.hostname.lastIndexOf(".",r-1)+1,this._parts.hostname.substring(r)||""}if(!t)throw new TypeError("cannot set domain empty");if(-1!==t.indexOf(":"))throw new TypeError("Domains cannot contain colons");if(o.ensureValidHostname(t,this._parts.protocol),!this._parts.hostname||this.is("IP"))this._parts.hostname=t;else{var i=new RegExp(l(this.domain())+"$");this._parts.hostname=this._parts.hostname.replace(i,t)}return this.build(!e),this},a.tld=function(t,e){if(this._parts.urn)return void 0===t?"":this;if("boolean"==typeof t&&(e=t,t=void 0),void 0===t){if(!this._parts.hostname||this.is("IP"))return"";var r=this._parts.hostname.lastIndexOf("."),i=this._parts.hostname.substring(r+1);return!0!==e&&n&&n.list[i.toLowerCase()]&&n.get(this._parts.hostname)||i}var o;if(!t)throw new TypeError("cannot set TLD empty");if(t.match(/[^a-zA-Z0-9-]/)){if(!n||!n.is(t))throw new TypeError('TLD "'+t+'" contains characters other than [A-Z0-9]');o=new RegExp(l(this.tld())+"$"),this._parts.hostname=this._parts.hostname.replace(o,t)}else{if(!this._parts.hostname||this.is("IP"))throw new ReferenceError("cannot set TLD on non-domain host");o=new RegExp(l(this.tld())+"$"),this._parts.hostname=this._parts.hostname.replace(o,t)}return this.build(!e),this},a.directory=function(t,e){if(this._parts.urn)return void 0===t?"":this;if(void 0===t||!0===t){if(!this._parts.path&&!this._parts.hostname)return"";if("/"===this._parts.path)return"/";var n=this._parts.path.length-this.filename().length-1,r=this._parts.path.substring(0,n)||(this._parts.hostname?"/":"");return t?o.decodePath(r):r}var i=this._parts.path.length-this.filename().length,a=this._parts.path.substring(0,i),s=new RegExp("^"+l(a));return this.is("relative")||(t||(t="/"),"/"!==t.charAt(0)&&(t="/"+t)),t&&"/"!==t.charAt(t.length-1)&&(t+="/"),t=o.recodePath(t),this._parts.path=this._parts.path.replace(s,t),this.build(!e),this},a.filename=function(t,e){if(this._parts.urn)return void 0===t?"":this;if("string"!=typeof t){if(!this._parts.path||"/"===this._parts.path)return"";var n=this._parts.path.lastIndexOf("/"),r=this._parts.path.substring(n+1);return t?o.decodePathSegment(r):r}var i=!1;"/"===t.charAt(0)&&(t=t.substring(1)),t.match(/\.?\//)&&(i=!0);var a=new RegExp(l(this.filename())+"$");return t=o.recodePath(t),this._parts.path=this._parts.path.replace(a,t),i?this.normalizePath(e):this.build(!e),this},a.suffix=function(t,e){if(this._parts.urn)return void 0===t?"":this;if(void 0===t||!0===t){if(!this._parts.path||"/"===this._parts.path)return"";var n,r,i=this.filename(),a=i.lastIndexOf(".");return-1===a?"":(n=i.substring(a+1),r=/^[a-z0-9%]+$/i.test(n)?n:"",t?o.decodePathSegment(r):r)}"."===t.charAt(0)&&(t=t.substring(1));var s,u=this.suffix();if(u)s=t?new RegExp(l(u)+"$"):new RegExp(l("."+u)+"$");else{if(!t)return this;this._parts.path+="."+o.recodePath(t)}return s&&(t=o.recodePath(t),this._parts.path=this._parts.path.replace(s,t)),this.build(!e),this},a.segment=function(t,e,n){var r=this._parts.urn?":":"/",i=this.path(),o="/"===i.substring(0,1),a=i.split(r);if(void 0!==t&&"number"!=typeof t&&(n=e,e=t,t=void 0),void 0!==t&&"number"!=typeof t)throw new Error('Bad segment "'+t+'", must be 0-based integer');if(o&&a.shift(),t<0&&(t=Math.max(a.length+t,0)),void 0===e)return void 0===t?a:a[t];if(null===t||void 0===a[t])if(c(e)){a=[];for(var s=0,l=e.length;s<l;s++)(e[s].length||a.length&&a[a.length-1].length)&&(a.length&&!a[a.length-1].length&&a.pop(),a.push(p(e[s])))}else(e||"string"==typeof e)&&(e=p(e),""===a[a.length-1]?a[a.length-1]=e:a.push(e));else e?a[t]=p(e):a.splice(t,1);return o&&a.unshift(""),this.path(a.join(r),n)},a.segmentCoded=function(t,e,n){var r,i,a;if("number"!=typeof t&&(n=e,e=t,t=void 0),void 0===e){if(c(r=this.segment(t,e,n)))for(i=0,a=r.length;i<a;i++)r[i]=o.decode(r[i]);else r=void 0!==r?o.decode(r):void 0;return r}if(c(e))for(i=0,a=e.length;i<a;i++)e[i]=o.encode(e[i]);else e="string"==typeof e||e instanceof String?o.encode(e):e;return this.segment(t,e,n)};var T=a.query;return a.query=function(t,e){if(!0===t)return o.parseQuery(this._parts.query,this._parts.escapeQuerySpace);if("function"==typeof t){var n=o.parseQuery(this._parts.query,this._parts.escapeQuerySpace),r=t.call(this,n);return this._parts.query=o.buildQuery(r||n,this._parts.duplicateQueryParameters,this._parts.escapeQuerySpace),this.build(!e),this}return void 0!==t&&"string"!=typeof t?(this._parts.query=o.buildQuery(t,this._parts.duplicateQueryParameters,this._parts.escapeQuerySpace),this.build(!e),this):T.call(this,t,e)},a.setQuery=function(t,e,n){var r=o.parseQuery(this._parts.query,this._parts.escapeQuerySpace);if("string"==typeof t||t instanceof String)r[t]=void 0!==e?e:null;else{if("object"!=typeof t)throw new TypeError("URI.addQuery() accepts an object, string as the name parameter");for(var i in t)s.call(t,i)&&(r[i]=t[i])}return this._parts.query=o.buildQuery(r,this._parts.duplicateQueryParameters,this._parts.escapeQuerySpace),"string"!=typeof t&&(n=e),this.build(!n),this},a.addQuery=function(t,e,n){var r=o.parseQuery(this._parts.query,this._parts.escapeQuerySpace);return o.addQuery(r,t,void 0===e?null:e),this._parts.query=o.buildQuery(r,this._parts.duplicateQueryParameters,this._parts.escapeQuerySpace),"string"!=typeof t&&(n=e),this.build(!n),this},a.removeQuery=function(t,e,n){var r=o.parseQuery(this._parts.query,this._parts.escapeQuerySpace);return o.removeQuery(r,t,e),this._parts.query=o.buildQuery(r,this._parts.duplicateQueryParameters,this._parts.escapeQuerySpace),"string"!=typeof t&&(n=e),this.build(!n),this},a.hasQuery=function(t,e,n){var r=o.parseQuery(this._parts.query,this._parts.escapeQuerySpace);return o.hasQuery(r,t,e,n)},a.setSearch=a.setQuery,a.addSearch=a.addQuery,a.removeSearch=a.removeQuery,a.hasSearch=a.hasQuery,a.normalize=function(){return this._parts.urn?this.normalizeProtocol(!1).normalizePath(!1).normalizeQuery(!1).normalizeFragment(!1).build():this.normalizeProtocol(!1).normalizeHostname(!1).normalizePort(!1).normalizePath(!1).normalizeQuery(!1).normalizeFragment(!1).build()},a.normalizeProtocol=function(t){return"string"==typeof this._parts.protocol&&(this._parts.protocol=this._parts.protocol.toLowerCase(),this.build(!t)),this},a.normalizeHostname=function(n){return this._parts.hostname&&(this.is("IDN")&&t?this._parts.hostname=t.toASCII(this._parts.hostname):this.is("IPv6")&&e&&(this._parts.hostname=e.best(this._parts.hostname)),this._parts.hostname=this._parts.hostname.toLowerCase(),this.build(!n)),this},a.normalizePort=function(t){return"string"==typeof this._parts.protocol&&this._parts.port===o.defaultPorts[this._parts.protocol]&&(this._parts.port=null,this.build(!t)),this},a.normalizePath=function(t){var e,n=this._parts.path;if(!n)return this;if(this._parts.urn)return this._parts.path=o.recodeUrnPath(this._parts.path),this.build(!t),this;if("/"===this._parts.path)return this;var r,i,a="";for("/"!==(n=o.recodePath(n)).charAt(0)&&(e=!0,n="/"+n),"/.."!==n.slice(-3)&&"/."!==n.slice(-2)||(n+="/"),n=n.replace(/(\/(\.\/)+)|(\/\.$)/g,"/").replace(/\/{2,}/g,"/"),e&&(a=n.substring(1).match(/^(\.\.\/)+/)||"")&&(a=a[0]);-1!==(r=n.search(/\/\.\.(\/|$)/));)0!==r?(-1===(i=n.substring(0,r).lastIndexOf("/"))&&(i=r),n=n.substring(0,i)+n.substring(r+3)):n=n.substring(3);return e&&this.is("relative")&&(n=a+n.substring(1)),this._parts.path=n,this.build(!t),this},a.normalizePathname=a.normalizePath,a.normalizeQuery=function(t){return"string"==typeof this._parts.query&&(this._parts.query.length?this.query(o.parseQuery(this._parts.query,this._parts.escapeQuerySpace)):this._parts.query=null,this.build(!t)),this},a.normalizeFragment=function(t){return this._parts.fragment||(this._parts.fragment=null,this.build(!t)),this},a.normalizeSearch=a.normalizeQuery,a.normalizeHash=a.normalizeFragment,a.iso8859=function(){var t=o.encode,e=o.decode;o.encode=escape,o.decode=decodeURIComponent;try{this.normalize()}finally{o.encode=t,o.decode=e}return this},a.unicode=function(){var t=o.encode,e=o.decode;o.encode=g,o.decode=unescape;try{this.normalize()}finally{o.encode=t,o.decode=e}return this},a.readable=function(){var e=this.clone();e.username("").password("").normalize();var n="";if(e._parts.protocol&&(n+=e._parts.protocol+"://"),e._parts.hostname&&(e.is("punycode")&&t?(n+=t.toUnicode(e._parts.hostname),e._parts.port&&(n+=":"+e._parts.port)):n+=e.host()),e._parts.hostname&&e._parts.path&&"/"!==e._parts.path.charAt(0)&&(n+="/"),n+=e.path(!0),e._parts.query){for(var r="",i=0,a=e._parts.query.split("&"),s=a.length;i<s;i++){var l=(a[i]||"").split("=");r+="&"+o.decodeQuery(l[0],this._parts.escapeQuerySpace).replace(/&/g,"%26"),void 0!==l[1]&&(r+="="+o.decodeQuery(l[1],this._parts.escapeQuerySpace).replace(/&/g,"%26"))}n+="?"+r.substring(1)}return n+=o.decodeQuery(e.hash(),!0)},a.absoluteTo=function(t){var e,n,r,i=this.clone(),a=["protocol","username","password","hostname","port"];if(this._parts.urn)throw new Error("URNs do not have any generally defined hierarchical components");if(t instanceof o||(t=new o(t)),i._parts.protocol)return i;if(i._parts.protocol=t._parts.protocol,this._parts.hostname)return i;for(n=0;r=a[n];n++)i._parts[r]=t._parts[r];return i._parts.path?(".."===i._parts.path.substring(-2)&&(i._parts.path+="/"),"/"!==i.path().charAt(0)&&(e=(e=t.directory())||(0===t.path().indexOf("/")?"/":""),i._parts.path=(e?e+"/":"")+i._parts.path,i.normalizePath())):(i._parts.path=t._parts.path,i._parts.query||(i._parts.query=t._parts.query)),i.build(),i},a.relativeTo=function(t){var e,n,r,i,a,s=this.clone().normalize();if(s._parts.urn)throw new Error("URNs do not have any generally defined hierarchical components");if(t=new o(t).normalize(),e=s._parts,n=t._parts,i=s.path(),a=t.path(),"/"!==i.charAt(0))throw new Error("URI is already relative");if("/"!==a.charAt(0))throw new Error("Cannot calculate a URI relative to another relative URI");if(e.protocol===n.protocol&&(e.protocol=null),e.username!==n.username||e.password!==n.password)return s.build();if(null!==e.protocol||null!==e.username||null!==e.password)return s.build();if(e.hostname!==n.hostname||e.port!==n.port)return s.build();if(e.hostname=null,e.port=null,i===a)return e.path="",s.build();if(!(r=o.commonPath(i,a)))return s.build();var l=n.path.substring(r.length).replace(/[^\/]*$/,"").replace(/.*?\//g,"../");return e.path=l+e.path.substring(r.length)||"./",s.build()},a.equals=function(t){var e,n,r,i,a,l=this.clone(),u=new o(t),d={};if(l.normalize(),u.normalize(),l.toString()===u.toString())return!0;if(r=l.query(),i=u.query(),l.query(""),u.query(""),l.toString()!==u.toString())return!1;if(r.length!==i.length)return!1;for(a in e=o.parseQuery(r,this._parts.escapeQuerySpace),n=o.parseQuery(i,this._parts.escapeQuerySpace),e)if(s.call(e,a)){if(c(e[a])){if(!h(e[a],n[a]))return!1}else if(e[a]!==n[a])return!1;d[a]=!0}for(a in n)if(s.call(n,a)&&!d[a])return!1;return!0},a.preventInvalidHostname=function(t){return this._parts.preventInvalidHostname=!!t,this},a.duplicateQueryParameters=function(t){return this._parts.duplicateQueryParameters=!!t,this},a.escapeQuerySpace=function(t){return this._parts.escapeQuerySpace=!!t,this},o}))},9340:function(t,e,n){var r;t=n.nmd(t),function(i){e&&e.nodeType,t&&t.nodeType;var o="object"==typeof n.g&&n.g;o.global!==o&&o.window!==o&&o.self;var a,s=2147483647,l=36,u=1,c=26,d=38,f=700,h=72,p=128,m="-",g=/^xn--/,v=/[^\x20-\x7E]/,y=/[\x2E\u3002\uFF0E\uFF61]/g,b={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},_=l-u,w=Math.floor,A=String.fromCharCode;function E(t){throw new RangeError(b[t])}function x(t,e){for(var n=t.length,r=[];n--;)r[n]=e(t[n]);return r}function S(t,e){var n=t.split("@"),r="";return n.length>1&&(r=n[0]+"@",t=n[1]),r+x((t=t.replace(y,".")).split("."),e).join(".")}function T(t){for(var e,n,r=[],i=0,o=t.length;i<o;)(e=t.charCodeAt(i++))>=55296&&e<=56319&&i<o?56320==(64512&(n=t.charCodeAt(i++)))?r.push(((1023&e)<<10)+(1023&n)+65536):(r.push(e),i--):r.push(e);return r}function C(t){return x(t,(function(t){var e="";return t>65535&&(e+=A((t-=65536)>>>10&1023|55296),t=56320|1023&t),e+=A(t)})).join("")}function I(t,e){return t+22+75*(t<26)-((0!=e)<<5)}function k(t,e,n){var r=0;for(t=n?w(t/f):t>>1,t+=w(t/e);t>_*c>>1;r+=l)t=w(t/_);return w(r+(_+1)*t/(t+d))}function P(t){var e,n,r,i,o,a,d,f,g,v,y,b=[],_=t.length,A=0,x=p,S=h;for((n=t.lastIndexOf(m))<0&&(n=0),r=0;r<n;++r)t.charCodeAt(r)>=128&&E("not-basic"),b.push(t.charCodeAt(r));for(i=n>0?n+1:0;i<_;){for(o=A,a=1,d=l;i>=_&&E("invalid-input"),((f=(y=t.charCodeAt(i++))-48<10?y-22:y-65<26?y-65:y-97<26?y-97:l)>=l||f>w((s-A)/a))&&E("overflow"),A+=f*a,!(f<(g=d<=S?u:d>=S+c?c:d-S));d+=l)a>w(s/(v=l-g))&&E("overflow"),a*=v;S=k(A-o,e=b.length+1,0==o),w(A/e)>s-x&&E("overflow"),x+=w(A/e),A%=e,b.splice(A++,0,x)}return C(b)}function R(t){var e,n,r,i,o,a,d,f,g,v,y,b,_,x,S,C=[];for(b=(t=T(t)).length,e=p,n=0,o=h,a=0;a<b;++a)(y=t[a])<128&&C.push(A(y));for(r=i=C.length,i&&C.push(m);r<b;){for(d=s,a=0;a<b;++a)(y=t[a])>=e&&y<d&&(d=y);for(d-e>w((s-n)/(_=r+1))&&E("overflow"),n+=(d-e)*_,e=d,a=0;a<b;++a)if((y=t[a])<e&&++n>s&&E("overflow"),y==e){for(f=n,g=l;!(f<(v=g<=o?u:g>=o+c?c:g-o));g+=l)S=f-v,x=l-v,C.push(A(I(v+S%x,0))),f=w(S/x);C.push(A(I(f,0))),o=k(n,_,r==i),n=0,++r}++n,++e}return C.join("")}a={version:"1.3.2",ucs2:{decode:T,encode:C},decode:P,encode:R,toASCII:function(t){return S(t,(function(t){return v.test(t)?"xn--"+R(t):t}))},toUnicode:function(t){return S(t,(function(t){return g.test(t)?P(t.slice(4).toLowerCase()):t}))}},void 0===(r=function(){return a}.call(e,n,e,t))||(t.exports=r)}()},2421:t=>{!function e(n,r,i){var o=function(t){return"[object Array]"===Object.prototype.toString.call(t)};function a(t,e){if(!(this instanceof a))return new a(t,e);o(t)?(e=t[1],t=t[0]):"object"==typeof t&&t&&(e=t.y,t=t.x),this.x=a.clean(t||0),this.y=a.clean(e||0)}a.prototype={change:function(t){if("function"==typeof t)this.observers?this.observers.push(t):this.observers=[t];else if(this.observers&&this.observers.length)for(var e=this.observers.length-1;e>=0;e--)this.observers[e](this,t);return this},ignore:function(t){if(this.observers)if(t)for(var e=this.observers,n=e.length;n--;)e[n]===t&&e.splice(n,1);else this.observers=[];return this},set:function(t,e,n){if("number"!=typeof t&&(n=e,e=t.y,t=t.x),this.x===t&&this.y===e)return this;var r=null;return!1!==n&&this.observers&&this.observers.length&&(r=this.clone()),this.x=a.clean(t),this.y=a.clean(e),!1!==n?this.change(r):void 0},zero:function(){return this.set(0,0)},clone:function(){return new this.constructor(this.x,this.y)},negate:function(t){return t?new this.constructor(-this.x,-this.y):this.set(-this.x,-this.y)},add:function(t,e,n){return"number"!=typeof t&&(n=e,o(t)?(e=t[1],t=t[0]):(e=t.y,t=t.x)),t+=this.x,e+=this.y,n?new this.constructor(t,e):this.set(t,e)},subtract:function(t,e,n){return"number"!=typeof t&&(n=e,o(t)?(e=t[1],t=t[0]):(e=t.y,t=t.x)),t=this.x-t,e=this.y-e,n?new this.constructor(t,e):this.set(t,e)},multiply:function(t,e,n){return"number"!=typeof t?(n=e,o(t)?(e=t[1],t=t[0]):(e=t.y,t=t.x)):"number"!=typeof e&&(n=e,e=t),t*=this.x,e*=this.y,n?new this.constructor(t,e):this.set(t,e)},rotate:function(t,e,n){var r,i,o=this.x,a=this.y,s=Math.cos(t),l=Math.sin(t);return r=s*o-(e=e?-1:1)*l*a,i=e*l*o+s*a,n?new this.constructor(r,i):this.set(r,i)},length:function(){var t=this.x,e=this.y;return Math.sqrt(t*t+e*e)},lengthSquared:function(){var t=this.x,e=this.y;return t*t+e*e},distance:function(t){var e=this.x-t.x,n=this.y-t.y;return Math.sqrt(e*e+n*n)},nearest:function(t){for(var e,n=Number.MAX_VALUE,r=null,i=t.length-1;i>=0;i--)(e=this.distance(t[i]))<=n&&(n=e,r=t[i]);return r},normalize:function(t){var e=this.length(),n=e<Number.MIN_VALUE?0:1/e;return t?new this.constructor(this.x*n,this.y*n):this.set(this.x*n,this.y*n)},equal:function(t,e){return"number"!=typeof t&&(o(t)?(e=t[1],t=t[0]):(e=t.y,t=t.x)),a.clean(t)===this.x&&a.clean(e)===this.y},abs:function(t){var e=Math.abs(this.x),n=Math.abs(this.y);return t?new this.constructor(e,n):this.set(e,n)},min:function(t,e){var n=this.x,r=this.y,i=t.x,o=t.y,a=n<i?n:i,s=r<o?r:o;return e?new this.constructor(a,s):this.set(a,s)},max:function(t,e){var n=this.x,r=this.y,i=t.x,o=t.y,a=n>i?n:i,s=r>o?r:o;return e?new this.constructor(a,s):this.set(a,s)},clamp:function(t,e,n){var r=this.min(e,!0).max(t);return n?r:this.set(r.x,r.y)},lerp:function(t,e,n){return this.add(t.subtract(this,!0).multiply(e),n)},skew:function(t){return t?new this.constructor(-this.y,this.x):this.set(-this.y,this.x)},dot:function(t){return a.clean(this.x*t.x+t.y*this.y)},perpDot:function(t){return a.clean(this.x*t.y-this.y*t.x)},angleTo:function(t){return Math.atan2(this.perpDot(t),this.dot(t))},divide:function(t,e,n){if("number"!=typeof t?(n=e,o(t)?(e=t[1],t=t[0]):(e=t.y,t=t.x)):"number"!=typeof e&&(n=e,e=t),0===t||0===e)throw new Error("division by zero");if(isNaN(t)||isNaN(e))throw new Error("NaN detected");return n?new this.constructor(this.x/t,this.y/e):this.set(this.x/t,this.y/e)},isPointOnLine:function(t,e){return(t.y-this.y)*(t.x-e.x)==(t.y-e.y)*(t.x-this.x)},toArray:function(){return[this.x,this.y]},fromArray:function(t){return this.set(t[0],t[1])},toJSON:function(){return{x:this.x,y:this.y}},toString:function(){return"("+this.x+", "+this.y+")"},constructor:a},a.fromArray=function(t,e){return new(e||a)(t[0],t[1])},a.precision=r||8;var s=Math.pow(10,a.precision);return a.clean=n||function(t){if(isNaN(t))throw new Error("NaN detected");if(!isFinite(t))throw new Error("Infinity detected");return Math.round(t)===t?t:Math.round(t*s)/s},a.inject=e,n||(a.fast=e((function(t){return t})),"object"==typeof t.exports?t.exports=a:window.Vec2=window.Vec2||a),a}()},3964:t=>{function e(t,e,n){t.addEventListener("wheel",e,n)}t.exports=e,t.exports.addWheelListener=e,t.exports.removeWheelListener=function(t,e,n){t.removeEventListener("wheel",e,n)}},207:t=>{var e=/\n/,n="\n",r=/\s/;function i(t,e,n,r){var i=t.indexOf(e,n);return-1===i||i>r?r:i}function o(t){return r.test(t)}function a(t,e,n,r){return{start:e,end:e+Math.min(r,n-e)}}t.exports=function(e,n){return t.exports.lines(e,n).map((function(t){return e.substring(t.start,t.end)})).join("\n")},t.exports.lines=function(t,r){if(0===(r=r||{}).width&&"nowrap"!==r.mode)return[];t=t||"";var s="number"==typeof r.width?r.width:Number.MAX_VALUE,l=Math.max(0,r.start||0),u="number"==typeof r.end?r.end:t.length,c=r.mode,d=r.measure||a;return"pre"===c?function(t,n,r,i,o){for(var a=[],s=r,l=r;l<i&&l<n.length;l++){var u=n.charAt(l),c=e.test(u);if(c||l===i-1){var d=t(n,s,c?l:l+1,o);a.push(d),s=l+1}}return a}(d,t,l,u,s):function(t,e,r,a,s,l){var u=[],c=s;"nowrap"===l&&(c=Number.MAX_VALUE);for(;r<a&&r<e.length;){for(var d=i(e,n,r,a);r<d&&o(e.charAt(r));)r++;var f=t(e,r,d,c),h=r+(f.end-f.start),p=h+1;if(h<d){for(;h>r&&!o(e.charAt(h));)h--;if(h===r)p>r+1&&p--,h=p;else for(p=h;h>r&&o(e.charAt(h-1));)h--}if(h>=r){var m=t(e,r,h,c);u.push(m)}r=p}return u}(d,t,l,u,s,c)}},2664:(t,e,n)=>{"use strict";n.r(e),n.d(e,{ArraySchema:()=>bt,BooleanSchema:()=>W,DateSchema:()=>ut,MixedSchema:()=>V,NumberSchema:()=>at,ObjectSchema:()=>vt,Schema:()=>q,StringSchema:()=>it,TupleSchema:()=>wt,ValidationError:()=>_,addMethod:()=>St,array:()=>yt,bool:()=>Q,boolean:()=>Q,date:()=>lt,defaultLocale:()=>k,getIn:()=>j,isSchema:()=>P,lazy:()=>At,mixed:()=>H,number:()=>ot,object:()=>gt,printValue:()=>h,reach:()=>z,ref:()=>L,setLocale:()=>xt,string:()=>rt,tuple:()=>_t});var r=n(3668),i=n(5714),o=n(2981),a=n.n(o);const s=Object.prototype.toString,l=Error.prototype.toString,u=RegExp.prototype.toString,c="undefined"!=typeof Symbol?Symbol.prototype.toString:()=>"",d=/^Symbol\((.*)\)(.*)$/;function f(t,e=!1){if(null==t||!0===t||!1===t)return""+t;const n=typeof t;if("number"===n)return function(t){return t!=+t?"NaN":0===t&&1/t<0?"-0":""+t}(t);if("string"===n)return e?`"${t}"`:t;if("function"===n)return"[Function "+(t.name||"anonymous")+"]";if("symbol"===n)return c.call(t).replace(d,"Symbol($1)");const r=s.call(t).slice(8,-1);return"Date"===r?isNaN(t.getTime())?""+t:t.toISOString(t):"Error"===r||t instanceof Error?"["+l.call(t)+"]":"RegExp"===r?u.call(t):null}function h(t,e){let n=f(t,e);return null!==n?n:JSON.stringify(t,(function(t,n){let r=f(this[t],e);return null!==r?r:n}),2)}function p(t){return null==t?[]:[].concat(t)}let m,g,v,y=/\$\{\s*(\w+)\s*\}/g;m=Symbol.toStringTag;class b{constructor(t,e,n,r){this.name=void 0,this.message=void 0,this.value=void 0,this.path=void 0,this.type=void 0,this.params=void 0,this.errors=void 0,this.inner=void 0,this[m]="Error",this.name="ValidationError",this.value=e,this.path=n,this.type=r,this.errors=[],this.inner=[],p(t).forEach((t=>{if(_.isError(t)){this.errors.push(...t.errors);const e=t.inner.length?t.inner:[t];this.inner.push(...e)}else this.errors.push(t)})),this.message=this.errors.length>1?`${this.errors.length} errors occurred`:this.errors[0]}}g=Symbol.hasInstance,v=Symbol.toStringTag;class _ extends Error{static formatError(t,e){const n=e.label||e.path||"this";return n!==e.path&&(e=Object.assign({},e,{path:n})),"string"==typeof t?t.replace(y,((t,n)=>h(e[n]))):"function"==typeof t?t(e):t}static isError(t){return t&&"ValidationError"===t.name}constructor(t,e,n,r,i){const o=new b(t,e,n,r);if(i)return o;super(),this.value=void 0,this.path=void 0,this.type=void 0,this.params=void 0,this.errors=[],this.inner=[],this[v]="Error",this.name=o.name,this.message=o.message,this.type=o.type,this.value=o.value,this.path=o.path,this.errors=o.errors,this.inner=o.inner,Error.captureStackTrace&&Error.captureStackTrace(this,_)}static[g](t){return b[Symbol.hasInstance](t)||super[Symbol.hasInstance](t)}}let w={default:"${path} is invalid",required:"${path} is a required field",defined:"${path} must be defined",notNull:"${path} cannot be null",oneOf:"${path} must be one of the following values: ${values}",notOneOf:"${path} must not be one of the following values: ${values}",notType:({path:t,type:e,value:n,originalValue:r})=>{const i=null!=r&&r!==n?` (cast from the value \`${h(r,!0)}\`).`:".";return"mixed"!==e?`${t} must be a \`${e}\` type, but the final value was: \`${h(n,!0)}\``+i:`${t} must match the configured type. The validated value was: \`${h(n,!0)}\``+i}},A={length:"${path} must be exactly ${length} characters",min:"${path} must be at least ${min} characters",max:"${path} must be at most ${max} characters",matches:'${path} must match the following: "${regex}"',email:"${path} must be a valid email",url:"${path} must be a valid URL",uuid:"${path} must be a valid UUID",datetime:"${path} must be a valid ISO date-time",datetime_precision:"${path} must be a valid ISO date-time with a sub-second precision of exactly ${precision} digits",datetime_offset:'${path} must be a valid ISO date-time with UTC "Z" timezone',trim:"${path} must be a trimmed string",lowercase:"${path} must be a lowercase string",uppercase:"${path} must be a upper case string"},E={min:"${path} must be greater than or equal to ${min}",max:"${path} must be less than or equal to ${max}",lessThan:"${path} must be less than ${less}",moreThan:"${path} must be greater than ${more}",positive:"${path} must be a positive number",negative:"${path} must be a negative number",integer:"${path} must be an integer"},x={min:"${path} field must be later than ${min}",max:"${path} field must be at earlier than ${max}"},S={isValue:"${path} field must be ${value}"},T={noUnknown:"${path} field has unspecified keys: ${unknown}"},C={min:"${path} field must have at least ${min} items",max:"${path} field must have less than or equal to ${max} items",length:"${path} must have ${length} items"},I={notType:t=>{const{path:e,value:n,spec:r}=t,i=r.types.length;if(Array.isArray(n)){if(n.length<i)return`${e} tuple value has too few items, expected a length of ${i} but got ${n.length} for value: \`${h(n,!0)}\``;if(n.length>i)return`${e} tuple value has too many items, expected a length of ${i} but got ${n.length} for value: \`${h(n,!0)}\``}return _.formatError(w.notType,t)}};var k=Object.assign(Object.create(null),{mixed:w,string:A,number:E,date:x,object:T,array:C,boolean:S,tuple:I});const P=t=>t&&t.__isYupSchema__;class R{static fromOptions(t,e){if(!e.then&&!e.otherwise)throw new TypeError("either `then:` or `otherwise:` is required for `when()` conditions");let{is:n,then:r,otherwise:i}=e,o="function"==typeof n?n:(...t)=>t.every((t=>t===n));return new R(t,((t,e)=>{var n;let a=o(...t)?r:i;return null!=(n=null==a?void 0:a(e))?n:e}))}constructor(t,e){this.fn=void 0,this.refs=t,this.refs=t,this.fn=e}resolve(t,e){let n=this.refs.map((t=>t.getValue(null==e?void 0:e.value,null==e?void 0:e.parent,null==e?void 0:e.context))),r=this.fn(n,t,e);if(void 0===r||r===t)return t;if(!P(r))throw new TypeError("conditions must return a schema object");return r.resolve(e)}}const O="$",M=".";function L(t,e){return new D(t,e)}class D{constructor(t,e={}){if(this.key=void 0,this.isContext=void 0,this.isValue=void 0,this.isSibling=void 0,this.path=void 0,this.getter=void 0,this.map=void 0,"string"!=typeof t)throw new TypeError("ref must be a string, got: "+t);if(this.key=t.trim(),""===t)throw new TypeError("ref must be a non-empty string");this.isContext=this.key[0]===O,this.isValue=this.key[0]===M,this.isSibling=!this.isContext&&!this.isValue;let n=this.isContext?O:this.isValue?M:"";this.path=this.key.slice(n.length),this.getter=this.path&&(0,r.getter)(this.path,!0),this.map=e.map}getValue(t,e,n){let r=this.isContext?n:this.isValue?t:e;return this.getter&&(r=this.getter(r||{})),this.map&&(r=this.map(r)),r}cast(t,e){return this.getValue(t,null==e?void 0:e.parent,null==e?void 0:e.context)}resolve(){return this}describe(){return{type:"ref",key:this.key}}toString(){return`Ref(${this.key})`}static isRef(t){return t&&t.__isYupRef}}D.prototype.__isYupRef=!0;const N=t=>null==t;function B(t){function e({value:e,path:n="",options:r,originalValue:i,schema:o},a,s){const{name:l,test:u,params:c,message:d,skipAbsent:f}=t;let{parent:h,context:p,abortEarly:m=o.spec.abortEarly,disableStackTrace:g=o.spec.disableStackTrace}=r;function v(t){return D.isRef(t)?t.getValue(e,h,p):t}function y(t={}){const r=Object.assign({value:e,originalValue:i,label:o.spec.label,path:t.path||n,spec:o.spec,disableStackTrace:t.disableStackTrace||g},c,t.params);for(const t of Object.keys(r))r[t]=v(r[t]);const a=new _(_.formatError(t.message||d,r),e,r.path,t.type||l,r.disableStackTrace);return a.params=r,a}const b=m?a:s;let w={path:n,parent:h,type:l,from:r.from,createError:y,resolve:v,options:r,originalValue:i,schema:o};const A=t=>{_.isError(t)?b(t):t?s(null):b(y())},E=t=>{_.isError(t)?b(t):a(t)};if(f&&N(e))return A(!0);let x;try{var S;if(x=u.call(w,e,w),"function"==typeof(null==(S=x)?void 0:S.then)){if(r.sync)throw new Error(`Validation test of type: "${w.type}" returned a Promise during a synchronous validate. This test will finish after the validate call has returned`);return Promise.resolve(x).then(A,E)}}catch(t){return void E(t)}A(x)}return e.OPTIONS=t,e}function j(t,e,n,i=n){let o,a,s;return e?((0,r.forEach)(e,((r,l,u)=>{let c=l?r.slice(1,r.length-1):r,d="tuple"===(t=t.resolve({context:i,parent:o,value:n})).type,f=u?parseInt(c,10):0;if(t.innerType||d){if(d&&!u)throw new Error(`Yup.reach cannot implicitly index into a tuple type. the path part "${s}" must contain an index to the tuple element, e.g. "${s}[0]"`);if(n&&f>=n.length)throw new Error(`Yup.reach cannot resolve an array item at index: ${r}, in the path: ${e}. because there is no value at that index. `);o=n,n=n&&n[f],t=d?t.spec.types[f]:t.innerType}if(!u){if(!t.fields||!t.fields[c])throw new Error(`The schema does not contain the path: ${e}. (failed at: ${s} which is a type: "${t.type}")`);o=n,n=n&&n[c],t=t.fields[c]}a=c,s=l?"["+r+"]":"."+r})),{schema:t,parent:o,parentPath:a}):{parent:o,parentPath:e,schema:t}}function z(t,e,n,r){return j(t,e,n,r).schema}class F extends Set{describe(){const t=[];for(const e of this.values())t.push(D.isRef(e)?e.describe():e);return t}resolveAll(t){let e=[];for(const n of this.values())e.push(t(n));return e}clone(){return new F(this.values())}merge(t,e){const n=this.clone();return t.forEach((t=>n.add(t))),e.forEach((t=>n.delete(t))),n}}function U(t,e=new Map){if(P(t)||!t||"object"!=typeof t)return t;if(e.has(t))return e.get(t);let n;if(t instanceof Date)n=new Date(t.getTime()),e.set(t,n);else if(t instanceof RegExp)n=new RegExp(t),e.set(t,n);else if(Array.isArray(t)){n=new Array(t.length),e.set(t,n);for(let r=0;r<t.length;r++)n[r]=U(t[r],e)}else if(t instanceof Map){n=new Map,e.set(t,n);for(const[r,i]of t.entries())n.set(r,U(i,e))}else if(t instanceof Set){n=new Set,e.set(t,n);for(const r of t)n.add(U(r,e))}else{if(!(t instanceof Object))throw Error(`Unable to clone ${t}`);n={},e.set(t,n);for(const[r,i]of Object.entries(t))n[r]=U(i,e)}return n}class q{constructor(t){this.type=void 0,this.deps=[],this.tests=void 0,this.transforms=void 0,this.conditions=[],this._mutate=void 0,this.internalTests={},this._whitelist=new F,this._blacklist=new F,this.exclusiveTests=Object.create(null),this._typeCheck=void 0,this.spec=void 0,this.tests=[],this.transforms=[],this.withMutation((()=>{this.typeError(w.notType)})),this.type=t.type,this._typeCheck=t.check,this.spec=Object.assign({strip:!1,strict:!1,abortEarly:!0,recursive:!0,disableStackTrace:!1,nullable:!1,optional:!0,coerce:!0},null==t?void 0:t.spec),this.withMutation((t=>{t.nonNullable()}))}get _type(){return this.type}clone(t){if(this._mutate)return t&&Object.assign(this.spec,t),this;const e=Object.create(Object.getPrototypeOf(this));return e.type=this.type,e._typeCheck=this._typeCheck,e._whitelist=this._whitelist.clone(),e._blacklist=this._blacklist.clone(),e.internalTests=Object.assign({},this.internalTests),e.exclusiveTests=Object.assign({},this.exclusiveTests),e.deps=[...this.deps],e.conditions=[...this.conditions],e.tests=[...this.tests],e.transforms=[...this.transforms],e.spec=U(Object.assign({},this.spec,t)),e}label(t){let e=this.clone();return e.spec.label=t,e}meta(...t){if(0===t.length)return this.spec.meta;let e=this.clone();return e.spec.meta=Object.assign(e.spec.meta||{},t[0]),e}withMutation(t){let e=this._mutate;this._mutate=!0;let n=t(this);return this._mutate=e,n}concat(t){if(!t||t===this)return this;if(t.type!==this.type&&"mixed"!==this.type)throw new TypeError(`You cannot \`concat()\` schema's of different types: ${this.type} and ${t.type}`);let e=this,n=t.clone();const r=Object.assign({},e.spec,n.spec);return n.spec=r,n.internalTests=Object.assign({},e.internalTests,n.internalTests),n._whitelist=e._whitelist.merge(t._whitelist,t._blacklist),n._blacklist=e._blacklist.merge(t._blacklist,t._whitelist),n.tests=e.tests,n.exclusiveTests=e.exclusiveTests,n.withMutation((e=>{t.tests.forEach((t=>{e.test(t.OPTIONS)}))})),n.transforms=[...e.transforms,...n.transforms],n}isType(t){return null==t?!(!this.spec.nullable||null!==t)||!(!this.spec.optional||void 0!==t):this._typeCheck(t)}resolve(t){let e=this;if(e.conditions.length){let n=e.conditions;e=e.clone(),e.conditions=[],e=n.reduce(((e,n)=>n.resolve(e,t)),e),e=e.resolve(t)}return e}resolveOptions(t){var e,n,r,i;return Object.assign({},t,{from:t.from||[],strict:null!=(e=t.strict)?e:this.spec.strict,abortEarly:null!=(n=t.abortEarly)?n:this.spec.abortEarly,recursive:null!=(r=t.recursive)?r:this.spec.recursive,disableStackTrace:null!=(i=t.disableStackTrace)?i:this.spec.disableStackTrace})}cast(t,e={}){let n=this.resolve(Object.assign({value:t},e)),r="ignore-optionality"===e.assert,i=n._cast(t,e);if(!1!==e.assert&&!n.isType(i)){if(r&&N(i))return i;let o=h(t),a=h(i);throw new TypeError(`The value of ${e.path||"field"} could not be cast to a value that satisfies the schema type: "${n.type}". \n\nattempted value: ${o} \n`+(a!==o?`result of cast: ${a}`:""))}return i}_cast(t,e){let n=void 0===t?t:this.transforms.reduce(((e,n)=>n.call(this,e,t,this)),t);return void 0===n&&(n=this.getDefault(e)),n}_validate(t,e={},n,r){let{path:i,originalValue:o=t,strict:a=this.spec.strict}=e,s=t;a||(s=this._cast(s,Object.assign({assert:!1},e)));let l=[];for(let t of Object.values(this.internalTests))t&&l.push(t);this.runTests({path:i,value:s,originalValue:o,options:e,tests:l},n,(t=>{if(t.length)return r(t,s);this.runTests({path:i,value:s,originalValue:o,options:e,tests:this.tests},n,r)}))}runTests(t,e,n){let r=!1,{tests:i,value:o,originalValue:a,path:s,options:l}=t,u=t=>{r||(r=!0,e(t,o))},c=t=>{r||(r=!0,n(t,o))},d=i.length,f=[];if(!d)return c([]);let h={value:o,originalValue:a,path:s,options:l,schema:this};for(let t=0;t<i.length;t++){(0,i[t])(h,u,(function(t){t&&(Array.isArray(t)?f.push(...t):f.push(t)),--d<=0&&c(f)}))}}asNestedTest({key:t,index:e,parent:n,parentPath:r,originalParent:i,options:o}){const a=null!=t?t:e;if(null==a)throw TypeError("Must include `key` or `index` for nested validations");const s="number"==typeof a;let l=n[a];const u=Object.assign({},o,{strict:!0,parent:n,value:l,originalValue:i[a],key:void 0,[s?"index":"key"]:a,path:s||a.includes(".")?`${r||""}[${s?a:`"${a}"`}]`:(r?`${r}.`:"")+t});return(t,e,n)=>this.resolve(u)._validate(l,u,e,n)}validate(t,e){var n;let r=this.resolve(Object.assign({},e,{value:t})),i=null!=(n=null==e?void 0:e.disableStackTrace)?n:r.spec.disableStackTrace;return new Promise(((n,o)=>r._validate(t,e,((t,e)=>{_.isError(t)&&(t.value=e),o(t)}),((t,e)=>{t.length?o(new _(t,e,void 0,void 0,i)):n(e)}))))}validateSync(t,e){var n;let r,i=this.resolve(Object.assign({},e,{value:t})),o=null!=(n=null==e?void 0:e.disableStackTrace)?n:i.spec.disableStackTrace;return i._validate(t,Object.assign({},e,{sync:!0}),((t,e)=>{throw _.isError(t)&&(t.value=e),t}),((e,n)=>{if(e.length)throw new _(e,t,void 0,void 0,o);r=n})),r}isValid(t,e){return this.validate(t,e).then((()=>!0),(t=>{if(_.isError(t))return!1;throw t}))}isValidSync(t,e){try{return this.validateSync(t,e),!0}catch(t){if(_.isError(t))return!1;throw t}}_getDefault(t){let e=this.spec.default;return null==e?e:"function"==typeof e?e.call(this,t):U(e)}getDefault(t){return this.resolve(t||{})._getDefault(t)}default(t){if(0===arguments.length)return this._getDefault();return this.clone({default:t})}strict(t=!0){return this.clone({strict:t})}nullability(t,e){const n=this.clone({nullable:t});return n.internalTests.nullable=B({message:e,name:"nullable",test(t){return null!==t||this.schema.spec.nullable}}),n}optionality(t,e){const n=this.clone({optional:t});return n.internalTests.optionality=B({message:e,name:"optionality",test(t){return void 0!==t||this.schema.spec.optional}}),n}optional(){return this.optionality(!0)}defined(t=w.defined){return this.optionality(!1,t)}nullable(){return this.nullability(!0)}nonNullable(t=w.notNull){return this.nullability(!1,t)}required(t=w.required){return this.clone().withMutation((e=>e.nonNullable(t).defined(t)))}notRequired(){return this.clone().withMutation((t=>t.nullable().optional()))}transform(t){let e=this.clone();return e.transforms.push(t),e}test(...t){let e;if(e=1===t.length?"function"==typeof t[0]?{test:t[0]}:t[0]:2===t.length?{name:t[0],test:t[1]}:{name:t[0],message:t[1],test:t[2]},void 0===e.message&&(e.message=w.default),"function"!=typeof e.test)throw new TypeError("`test` is a required parameters");let n=this.clone(),r=B(e),i=e.exclusive||e.name&&!0===n.exclusiveTests[e.name];if(e.exclusive&&!e.name)throw new TypeError("Exclusive tests must provide a unique `name` identifying the test");return e.name&&(n.exclusiveTests[e.name]=!!e.exclusive),n.tests=n.tests.filter((t=>{if(t.OPTIONS.name===e.name){if(i)return!1;if(t.OPTIONS.test===r.OPTIONS.test)return!1}return!0})),n.tests.push(r),n}when(t,e){Array.isArray(t)||"string"==typeof t||(e=t,t=".");let n=this.clone(),r=p(t).map((t=>new D(t)));return r.forEach((t=>{t.isSibling&&n.deps.push(t.key)})),n.conditions.push("function"==typeof e?new R(r,e):R.fromOptions(r,e)),n}typeError(t){let e=this.clone();return e.internalTests.typeError=B({message:t,name:"typeError",skipAbsent:!0,test(t){return!!this.schema._typeCheck(t)||this.createError({params:{type:this.schema.type}})}}),e}oneOf(t,e=w.oneOf){let n=this.clone();return t.forEach((t=>{n._whitelist.add(t),n._blacklist.delete(t)})),n.internalTests.whiteList=B({message:e,name:"oneOf",skipAbsent:!0,test(t){let e=this.schema._whitelist,n=e.resolveAll(this.resolve);return!!n.includes(t)||this.createError({params:{values:Array.from(e).join(", "),resolved:n}})}}),n}notOneOf(t,e=w.notOneOf){let n=this.clone();return t.forEach((t=>{n._blacklist.add(t),n._whitelist.delete(t)})),n.internalTests.blacklist=B({message:e,name:"notOneOf",test(t){let e=this.schema._blacklist,n=e.resolveAll(this.resolve);return!n.includes(t)||this.createError({params:{values:Array.from(e).join(", "),resolved:n}})}}),n}strip(t=!0){let e=this.clone();return e.spec.strip=t,e}describe(t){const e=(t?this.resolve(t):this).clone(),{label:n,meta:r,optional:i,nullable:o}=e.spec;return{meta:r,label:n,optional:i,nullable:o,default:e.getDefault(t),type:e.type,oneOf:e._whitelist.describe(),notOneOf:e._blacklist.describe(),tests:e.tests.map((t=>({name:t.OPTIONS.name,params:t.OPTIONS.params}))).filter(((t,e,n)=>n.findIndex((e=>e.name===t.name))===e))}}}q.prototype.__isYupSchema__=!0;for(const t of["validate","validateSync"])q.prototype[`${t}At`]=function(e,n,r={}){const{parent:i,parentPath:o,schema:a}=j(this,e,n,r.context);return a[t](i&&i[o],Object.assign({},r,{parent:i,path:e}))};for(const t of["equals","is"])q.prototype[t]=q.prototype.oneOf;for(const t of["not","nope"])q.prototype[t]=q.prototype.notOneOf;const G=()=>!0;function H(t){return new V(t)}class V extends q{constructor(t){super("function"==typeof t?{type:"mixed",check:t}:Object.assign({type:"mixed",check:G},t))}}function Q(){return new W}H.prototype=V.prototype;class W extends q{constructor(){super({type:"boolean",check:t=>(t instanceof Boolean&&(t=t.valueOf()),"boolean"==typeof t)}),this.withMutation((()=>{this.transform(((t,e,n)=>{if(n.spec.coerce&&!n.isType(t)){if(/^(true|1)$/i.test(String(t)))return!0;if(/^(false|0)$/i.test(String(t)))return!1}return t}))}))}isTrue(t=S.isValue){return this.test({message:t,name:"is-value",exclusive:!0,params:{value:"true"},test:t=>N(t)||!0===t})}isFalse(t=S.isValue){return this.test({message:t,name:"is-value",exclusive:!0,params:{value:"false"},test:t=>N(t)||!1===t})}default(t){return super.default(t)}defined(t){return super.defined(t)}optional(){return super.optional()}required(t){return super.required(t)}notRequired(){return super.notRequired()}nullable(){return super.nullable()}nonNullable(t){return super.nonNullable(t)}strip(t){return super.strip(t)}}Q.prototype=W.prototype;const Y=/^(\d{4}|[+-]\d{6})(?:-?(\d{2})(?:-?(\d{2}))?)?(?:[ T]?(\d{2}):?(\d{2})(?::?(\d{2})(?:[,.](\d{1,}))?)?(?:(Z)|([+-])(\d{2})(?::?(\d{2}))?)?)?$/;function K(t){var e,n;const r=Y.exec(t);return r?{year:X(r[1]),month:X(r[2],1)-1,day:X(r[3],1),hour:X(r[4]),minute:X(r[5]),second:X(r[6]),millisecond:r[7]?X(r[7].substring(0,3)):0,precision:null!=(e=null==(n=r[7])?void 0:n.length)?e:void 0,z:r[8]||void 0,plusMinus:r[9]||void 0,hourOffset:X(r[10]),minuteOffset:X(r[11])}:null}function X(t,e=0){return Number(t)||e}let $=/^[a-zA-Z0-9.!#$%&'*+\/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/,Z=/^((https?|ftp):)?\/\/(((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(\#((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?$/i,J=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i,tt=new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(\\.\\d+)?(([+-]\\d{2}(:?\\d{2})?)|Z)$"),et=t=>N(t)||t===t.trim(),nt={}.toString();function rt(){return new it}class it extends q{constructor(){super({type:"string",check:t=>(t instanceof String&&(t=t.valueOf()),"string"==typeof t)}),this.withMutation((()=>{this.transform(((t,e,n)=>{if(!n.spec.coerce||n.isType(t))return t;if(Array.isArray(t))return t;const r=null!=t&&t.toString?t.toString():t;return r===nt?t:r}))}))}required(t){return super.required(t).withMutation((e=>e.test({message:t||w.required,name:"required",skipAbsent:!0,test:t=>!!t.length})))}notRequired(){return super.notRequired().withMutation((t=>(t.tests=t.tests.filter((t=>"required"!==t.OPTIONS.name)),t)))}length(t,e=A.length){return this.test({message:e,name:"length",exclusive:!0,params:{length:t},skipAbsent:!0,test(e){return e.length===this.resolve(t)}})}min(t,e=A.min){return this.test({message:e,name:"min",exclusive:!0,params:{min:t},skipAbsent:!0,test(e){return e.length>=this.resolve(t)}})}max(t,e=A.max){return this.test({name:"max",exclusive:!0,message:e,params:{max:t},skipAbsent:!0,test(e){return e.length<=this.resolve(t)}})}matches(t,e){let n,r,i=!1;return e&&("object"==typeof e?({excludeEmptyString:i=!1,message:n,name:r}=e):n=e),this.test({name:r||"matches",message:n||A.matches,params:{regex:t},skipAbsent:!0,test:e=>""===e&&i||-1!==e.search(t)})}email(t=A.email){return this.matches($,{name:"email",message:t,excludeEmptyString:!0})}url(t=A.url){return this.matches(Z,{name:"url",message:t,excludeEmptyString:!0})}uuid(t=A.uuid){return this.matches(J,{name:"uuid",message:t,excludeEmptyString:!1})}datetime(t){let e,n,r="";return t&&("object"==typeof t?({message:r="",allowOffset:e=!1,precision:n}=t):r=t),this.matches(tt,{name:"datetime",message:r||A.datetime,excludeEmptyString:!0}).test({name:"datetime_offset",message:r||A.datetime_offset,params:{allowOffset:e},skipAbsent:!0,test:t=>{if(!t||e)return!0;const n=K(t);return!!n&&!!n.z}}).test({name:"datetime_precision",message:r||A.datetime_precision,params:{precision:n},skipAbsent:!0,test:t=>{if(!t||null==n)return!0;const e=K(t);return!!e&&e.precision===n}})}ensure(){return this.default("").transform((t=>null===t?"":t))}trim(t=A.trim){return this.transform((t=>null!=t?t.trim():t)).test({message:t,name:"trim",test:et})}lowercase(t=A.lowercase){return this.transform((t=>N(t)?t:t.toLowerCase())).test({message:t,name:"string_case",exclusive:!0,skipAbsent:!0,test:t=>N(t)||t===t.toLowerCase()})}uppercase(t=A.uppercase){return this.transform((t=>N(t)?t:t.toUpperCase())).test({message:t,name:"string_case",exclusive:!0,skipAbsent:!0,test:t=>N(t)||t===t.toUpperCase()})}}rt.prototype=it.prototype;function ot(){return new at}class at extends q{constructor(){super({type:"number",check:t=>(t instanceof Number&&(t=t.valueOf()),"number"==typeof t&&!(t=>t!=+t)(t))}),this.withMutation((()=>{this.transform(((t,e,n)=>{if(!n.spec.coerce)return t;let r=t;if("string"==typeof r){if(r=r.replace(/\s/g,""),""===r)return NaN;r=+r}return n.isType(r)||null===r?r:parseFloat(r)}))}))}min(t,e=E.min){return this.test({message:e,name:"min",exclusive:!0,params:{min:t},skipAbsent:!0,test(e){return e>=this.resolve(t)}})}max(t,e=E.max){return this.test({message:e,name:"max",exclusive:!0,params:{max:t},skipAbsent:!0,test(e){return e<=this.resolve(t)}})}lessThan(t,e=E.lessThan){return this.test({message:e,name:"max",exclusive:!0,params:{less:t},skipAbsent:!0,test(e){return e<this.resolve(t)}})}moreThan(t,e=E.moreThan){return this.test({message:e,name:"min",exclusive:!0,params:{more:t},skipAbsent:!0,test(e){return e>this.resolve(t)}})}positive(t=E.positive){return this.moreThan(0,t)}negative(t=E.negative){return this.lessThan(0,t)}integer(t=E.integer){return this.test({name:"integer",message:t,skipAbsent:!0,test:t=>Number.isInteger(t)})}truncate(){return this.transform((t=>N(t)?t:0|t))}round(t){var e;let n=["ceil","floor","round","trunc"];if("trunc"===(t=(null==(e=t)?void 0:e.toLowerCase())||"round"))return this.truncate();if(-1===n.indexOf(t.toLowerCase()))throw new TypeError("Only valid options for round() are: "+n.join(", "));return this.transform((e=>N(e)?e:Math[t](e)))}}ot.prototype=at.prototype;let st=new Date("");function lt(){return new ut}class ut extends q{constructor(){super({type:"date",check(t){return e=t,"[object Date]"===Object.prototype.toString.call(e)&&!isNaN(t.getTime());var e}}),this.withMutation((()=>{this.transform(((t,e,n)=>!n.spec.coerce||n.isType(t)||null===t?t:(t=function(t){const e=K(t);if(!e)return Date.parse?Date.parse(t):Number.NaN;if(void 0===e.z&&void 0===e.plusMinus)return new Date(e.year,e.month,e.day,e.hour,e.minute,e.second,e.millisecond).valueOf();let n=0;return"Z"!==e.z&&void 0!==e.plusMinus&&(n=60*e.hourOffset+e.minuteOffset,"+"===e.plusMinus&&(n=0-n)),Date.UTC(e.year,e.month,e.day,e.hour,e.minute+n,e.second,e.millisecond)}(t),isNaN(t)?ut.INVALID_DATE:new Date(t))))}))}prepareParam(t,e){let n;if(D.isRef(t))n=t;else{let r=this.cast(t);if(!this._typeCheck(r))throw new TypeError(`\`${e}\` must be a Date or a value that can be \`cast()\` to a Date`);n=r}return n}min(t,e=x.min){let n=this.prepareParam(t,"min");return this.test({message:e,name:"min",exclusive:!0,params:{min:t},skipAbsent:!0,test(t){return t>=this.resolve(n)}})}max(t,e=x.max){let n=this.prepareParam(t,"max");return this.test({message:e,name:"max",exclusive:!0,params:{max:t},skipAbsent:!0,test(t){return t<=this.resolve(n)}})}}function ct(t,e){let n=1/0;return t.some(((t,r)=>{var i;if(null!=(i=e.path)&&i.includes(t))return n=r,!0})),n}function dt(t){return(e,n)=>ct(t,e)-ct(t,n)}ut.INVALID_DATE=st,lt.prototype=ut.prototype,lt.INVALID_DATE=st;const ft=(t,e,n)=>{if("string"!=typeof t)return t;let r=t;try{r=JSON.parse(t)}catch(t){}return n.isType(r)?r:t};function ht(t){if("fields"in t){const e={};for(const[n,r]of Object.entries(t.fields))e[n]=ht(r);return t.setFields(e)}if("array"===t.type){const e=t.optional();return e.innerType&&(e.innerType=ht(e.innerType)),e}return"tuple"===t.type?t.optional().clone({types:t.spec.types.map(ht)}):"optional"in t?t.optional():t}let pt=t=>"[object Object]"===Object.prototype.toString.call(t);const mt=dt([]);function gt(t){return new vt(t)}class vt extends q{constructor(t){super({type:"object",check:t=>pt(t)||"function"==typeof t}),this.fields=Object.create(null),this._sortErrors=mt,this._nodes=[],this._excludedEdges=[],this.withMutation((()=>{t&&this.shape(t)}))}_cast(t,e={}){var n;let r=super._cast(t,e);if(void 0===r)return this.getDefault(e);if(!this._typeCheck(r))return r;let i=this.fields,o=null!=(n=e.stripUnknown)?n:this.spec.noUnknown,a=[].concat(this._nodes,Object.keys(r).filter((t=>!this._nodes.includes(t)))),s={},l=Object.assign({},e,{parent:s,__validating:e.__validating||!1}),u=!1;for(const t of a){let n=i[t],a=t in r;if(n){let i,o=r[t];l.path=(e.path?`${e.path}.`:"")+t,n=n.resolve({value:o,context:e.context,parent:s});let a=n instanceof q?n.spec:void 0,c=null==a?void 0:a.strict;if(null!=a&&a.strip){u=u||t in r;continue}i=e.__validating&&c?r[t]:n.cast(r[t],l),void 0!==i&&(s[t]=i)}else a&&!o&&(s[t]=r[t]);a===t in s&&s[t]===r[t]||(u=!0)}return u?s:r}_validate(t,e={},n,r){let{from:i=[],originalValue:o=t,recursive:a=this.spec.recursive}=e;e.from=[{schema:this,value:o},...i],e.__validating=!0,e.originalValue=o,super._validate(t,e,n,((t,i)=>{if(!a||!pt(i))return void r(t,i);o=o||i;let s=[];for(let t of this._nodes){let n=this.fields[t];n&&!D.isRef(n)&&s.push(n.asNestedTest({options:e,key:t,parent:i,parentPath:e.path,originalParent:o}))}this.runTests({tests:s,value:i,originalValue:o,options:e},n,(e=>{r(e.sort(this._sortErrors).concat(t),i)}))}))}clone(t){const e=super.clone(t);return e.fields=Object.assign({},this.fields),e._nodes=this._nodes,e._excludedEdges=this._excludedEdges,e._sortErrors=this._sortErrors,e}concat(t){let e=super.concat(t),n=e.fields;for(let[t,e]of Object.entries(this.fields)){const r=n[t];n[t]=void 0===r?e:r}return e.withMutation((e=>e.setFields(n,[...this._excludedEdges,...t._excludedEdges])))}_getDefault(t){if("default"in this.spec)return super._getDefault(t);if(!this._nodes.length)return;let e={};return this._nodes.forEach((n=>{var r;const i=this.fields[n];let o=t;null!=(r=o)&&r.value&&(o=Object.assign({},o,{parent:o.value,value:o.value[n]})),e[n]=i&&"getDefault"in i?i.getDefault(o):void 0})),e}setFields(t,e){let n=this.clone();return n.fields=t,n._nodes=function(t,e=[]){let n=[],i=new Set,o=new Set(e.map((([t,e])=>`${t}-${e}`)));function s(t,e){let a=(0,r.split)(t)[0];i.add(a),o.has(`${e}-${a}`)||n.push([e,a])}for(const e of Object.keys(t)){let n=t[e];i.add(e),D.isRef(n)&&n.isSibling?s(n.path,e):P(n)&&"deps"in n&&n.deps.forEach((t=>s(t,e)))}return a().array(Array.from(i),n).reverse()}(t,e),n._sortErrors=dt(Object.keys(t)),e&&(n._excludedEdges=e),n}shape(t,e=[]){return this.clone().withMutation((n=>{let r=n._excludedEdges;return e.length&&(Array.isArray(e[0])||(e=[e]),r=[...n._excludedEdges,...e]),n.setFields(Object.assign(n.fields,t),r)}))}partial(){const t={};for(const[e,n]of Object.entries(this.fields))t[e]="optional"in n&&n.optional instanceof Function?n.optional():n;return this.setFields(t)}deepPartial(){return ht(this)}pick(t){const e={};for(const n of t)this.fields[n]&&(e[n]=this.fields[n]);return this.setFields(e,this._excludedEdges.filter((([e,n])=>t.includes(e)&&t.includes(n))))}omit(t){const e=[];for(const n of Object.keys(this.fields))t.includes(n)||e.push(n);return this.pick(e)}from(t,e,n){let i=(0,r.getter)(t,!0);return this.transform((o=>{if(!o)return o;let a=o;return((t,e)=>{const n=[...(0,r.normalizePath)(e)];if(1===n.length)return n[0]in t;let i=n.pop(),o=(0,r.getter)((0,r.join)(n),!0)(t);return!(!o||!(i in o))})(o,t)&&(a=Object.assign({},o),n||delete a[t],a[e]=i(o)),a}))}json(){return this.transform(ft)}noUnknown(t=!0,e=T.noUnknown){"boolean"!=typeof t&&(e=t,t=!0);let n=this.test({name:"noUnknown",exclusive:!0,message:e,test(e){if(null==e)return!0;const n=function(t,e){let n=Object.keys(t.fields);return Object.keys(e).filter((t=>-1===n.indexOf(t)))}(this.schema,e);return!t||0===n.length||this.createError({params:{unknown:n.join(", ")}})}});return n.spec.noUnknown=t,n}unknown(t=!0,e=T.noUnknown){return this.noUnknown(!t,e)}transformKeys(t){return this.transform((e=>{if(!e)return e;const n={};for(const r of Object.keys(e))n[t(r)]=e[r];return n}))}camelCase(){return this.transformKeys(i.camelCase)}snakeCase(){return this.transformKeys(i.snakeCase)}constantCase(){return this.transformKeys((t=>(0,i.snakeCase)(t).toUpperCase()))}describe(t){const e=(t?this.resolve(t):this).clone(),n=super.describe(t);n.fields={};for(const[i,o]of Object.entries(e.fields)){var r;let e=t;null!=(r=e)&&r.value&&(e=Object.assign({},e,{parent:e.value,value:e.value[i]})),n.fields[i]=o.describe(e)}return n}}function yt(t){return new bt(t)}gt.prototype=vt.prototype;class bt extends q{constructor(t){super({type:"array",spec:{types:t},check:t=>Array.isArray(t)}),this.innerType=void 0,this.innerType=t}_cast(t,e){const n=super._cast(t,e);if(!this._typeCheck(n)||!this.innerType)return n;let r=!1;const i=n.map(((t,n)=>{const i=this.innerType.cast(t,Object.assign({},e,{path:`${e.path||""}[${n}]`}));return i!==t&&(r=!0),i}));return r?i:n}_validate(t,e={},n,r){var i;let o=this.innerType,a=null!=(i=e.recursive)?i:this.spec.recursive;null!=e.originalValue&&e.originalValue,super._validate(t,e,n,((i,s)=>{var l;if(!a||!o||!this._typeCheck(s))return void r(i,s);let u=new Array(s.length);for(let n=0;n<s.length;n++){var c;u[n]=o.asNestedTest({options:e,index:n,parent:s,parentPath:e.path,originalParent:null!=(c=e.originalValue)?c:t})}this.runTests({value:s,tests:u,originalValue:null!=(l=e.originalValue)?l:t,options:e},n,(t=>r(t.concat(i),s)))}))}clone(t){const e=super.clone(t);return e.innerType=this.innerType,e}json(){return this.transform(ft)}concat(t){let e=super.concat(t);return e.innerType=this.innerType,t.innerType&&(e.innerType=e.innerType?e.innerType.concat(t.innerType):t.innerType),e}of(t){let e=this.clone();if(!P(t))throw new TypeError("`array.of()` sub-schema must be a valid yup schema not: "+h(t));return e.innerType=t,e.spec=Object.assign({},e.spec,{types:t}),e}length(t,e=C.length){return this.test({message:e,name:"length",exclusive:!0,params:{length:t},skipAbsent:!0,test(e){return e.length===this.resolve(t)}})}min(t,e){return e=e||C.min,this.test({message:e,name:"min",exclusive:!0,params:{min:t},skipAbsent:!0,test(e){return e.length>=this.resolve(t)}})}max(t,e){return e=e||C.max,this.test({message:e,name:"max",exclusive:!0,params:{max:t},skipAbsent:!0,test(e){return e.length<=this.resolve(t)}})}ensure(){return this.default((()=>[])).transform(((t,e)=>this._typeCheck(t)?t:null==e?[]:[].concat(e)))}compact(t){let e=t?(e,n,r)=>!t(e,n,r):t=>!!t;return this.transform((t=>null!=t?t.filter(e):t))}describe(t){const e=(t?this.resolve(t):this).clone(),n=super.describe(t);if(e.innerType){var r;let i=t;null!=(r=i)&&r.value&&(i=Object.assign({},i,{parent:i.value,value:i.value[0]})),n.innerType=e.innerType.describe(i)}return n}}function _t(t){return new wt(t)}yt.prototype=bt.prototype;class wt extends q{constructor(t){super({type:"tuple",spec:{types:t},check(t){const e=this.spec.types;return Array.isArray(t)&&t.length===e.length}}),this.withMutation((()=>{this.typeError(I.notType)}))}_cast(t,e){const{types:n}=this.spec,r=super._cast(t,e);if(!this._typeCheck(r))return r;let i=!1;const o=n.map(((t,n)=>{const o=t.cast(r[n],Object.assign({},e,{path:`${e.path||""}[${n}]`}));return o!==r[n]&&(i=!0),o}));return i?o:r}_validate(t,e={},n,r){let i=this.spec.types;super._validate(t,e,n,((o,a)=>{var s;if(!this._typeCheck(a))return void r(o,a);let l=[];for(let[n,r]of i.entries()){var u;l[n]=r.asNestedTest({options:e,index:n,parent:a,parentPath:e.path,originalParent:null!=(u=e.originalValue)?u:t})}this.runTests({value:a,tests:l,originalValue:null!=(s=e.originalValue)?s:t,options:e},n,(t=>r(t.concat(o),a)))}))}describe(t){const e=(t?this.resolve(t):this).clone(),n=super.describe(t);return n.innerType=e.spec.types.map(((e,n)=>{var r;let i=t;return null!=(r=i)&&r.value&&(i=Object.assign({},i,{parent:i.value,value:i.value[n]})),e.describe(i)})),n}}function At(t){return new Et(t)}_t.prototype=wt.prototype;class Et{constructor(t){this.type="lazy",this.__isYupSchema__=!0,this.spec=void 0,this._resolve=(t,e={})=>{let n=this.builder(t,e);if(!P(n))throw new TypeError("lazy() functions must return a valid schema");return this.spec.optional&&(n=n.optional()),n.resolve(e)},this.builder=t,this.spec={meta:void 0,optional:!1}}clone(t){const e=new Et(this.builder);return e.spec=Object.assign({},this.spec,t),e}optionality(t){return this.clone({optional:t})}optional(){return this.optionality(!0)}resolve(t){return this._resolve(t.value,t)}cast(t,e){return this._resolve(t,e).cast(t,e)}asNestedTest(t){let{key:e,index:n,parent:r,options:i}=t,o=r[null!=n?n:e];return this._resolve(o,Object.assign({},i,{value:o,parent:r})).asNestedTest(t)}validate(t,e){return this._resolve(t,e).validate(t,e)}validateSync(t,e){return this._resolve(t,e).validateSync(t,e)}validateAt(t,e,n){return this._resolve(e,n).validateAt(t,e,n)}validateSyncAt(t,e,n){return this._resolve(e,n).validateSyncAt(t,e,n)}isValid(t,e){return this._resolve(t,e).isValid(t,e)}isValidSync(t,e){return this._resolve(t,e).isValidSync(t,e)}describe(t){return t?this.resolve(t).describe(t):{type:"lazy",meta:this.spec.meta,label:void 0}}meta(...t){if(0===t.length)return this.spec.meta;let e=this.clone();return e.spec.meta=Object.assign(e.spec.meta||{},t[0]),e}}function xt(t){Object.keys(t).forEach((e=>{Object.keys(t[e]).forEach((n=>{k[e][n]=t[e][n]}))}))}function St(t,e,n){if(!t||!P(t.prototype))throw new TypeError("You must provide a yup schema constructor function");if("string"!=typeof e)throw new TypeError("A Method name must be provided");if("function"!=typeof n)throw new TypeError("Method function must be provided");t.prototype[e]=n}},2813:(t,e,n)=>{"use strict";n(5606);t.exports=n(1446)},1446:t=>{"use strict";var e;!function(t){t[t.HIGH_SURROGATE_START=55296]="HIGH_SURROGATE_START",t[t.HIGH_SURROGATE_END=56319]="HIGH_SURROGATE_END",t[t.LOW_SURROGATE_START=56320]="LOW_SURROGATE_START",t[t.REGIONAL_INDICATOR_START=127462]="REGIONAL_INDICATOR_START",t[t.REGIONAL_INDICATOR_END=127487]="REGIONAL_INDICATOR_END",t[t.FITZPATRICK_MODIFIER_START=127995]="FITZPATRICK_MODIFIER_START",t[t.FITZPATRICK_MODIFIER_END=127999]="FITZPATRICK_MODIFIER_END",t[t.VARIATION_MODIFIER_START=65024]="VARIATION_MODIFIER_START",t[t.VARIATION_MODIFIER_END=65039]="VARIATION_MODIFIER_END",t[t.DIACRITICAL_MARKS_START=8400]="DIACRITICAL_MARKS_START",t[t.DIACRITICAL_MARKS_END=8447]="DIACRITICAL_MARKS_END",t[t.SUBDIVISION_INDICATOR_START=127988]="SUBDIVISION_INDICATOR_START",t[t.TAGS_START=917504]="TAGS_START",t[t.TAGS_END=917631]="TAGS_END",t[t.ZWJ=8205]="ZWJ"}(e||(e={}));const n=Object.freeze([776,2359,2367,2984,3007,3021,3633,3635,3648,3657,4352,4449,4520]);var r;function i(t){if("string"!=typeof t)throw new TypeError("string cannot be undefined or null");const e=[];let n=0,r=0;for(;n<t.length;)r+=o(n+r,t),u(t[n+r])&&r++,s(t[n+r])&&r++,l(t[n+r])&&r++,c(t[n+r])?r++:(e.push(t.substring(n,n+r)),n+=r,r=0);return e}function o(t,e){const n=e[t];if(!function(t){return t&&f(t[0].charCodeAt(0),55296,56319)}(n)||t===e.length-1)return 1;const r=n+e[t+1];let i=e.substring(t+2,t+5);return a(r)&&a(i)?4:function(t){return f(d(t),127988,127988)}(r)&&function(t){const e=t.codePointAt(0);return"string"==typeof t&&"number"==typeof e&&f(e,917504,917631)}(i)?e.slice(t).indexOf(String.fromCodePoint(917631))+2:function(t){return f(d(t),127995,127999)}(i)?4:2}function a(t){return f(d(t),127462,127487)}function s(t){return"string"==typeof t&&f(t.charCodeAt(0),65024,65039)}function l(t){return"string"==typeof t&&f(t.charCodeAt(0),8400,8447)}function u(t){return"string"==typeof t&&n.includes(t.charCodeAt(0))}function c(t){return"string"==typeof t&&8205===t.charCodeAt(0)}function d(t){return(t.charCodeAt(0)-55296<<10)+(t.charCodeAt(1)-56320)+65536}function f(t,e,n){return t>=e&&t<=n}function h(t,e,n){const r=i(t);if(void 0===e)return t;if(e>=r.length)return"";const o=r.length-e;let a=e+(void 0===n?o:n);return a>e+o&&(a=void 0),r.slice(e,a).join("")}!function(t){t[t.unit_1=1]="unit_1",t[t.unit_2=2]="unit_2",t[t.unit_4=4]="unit_4"}(r||(r={})),Object.defineProperty(i,"runes",{value:i}),Object.defineProperty(i,"default",{value:i}),Object.defineProperty(i,"__esModule",{value:!0}),Object.defineProperty(i,"substr",{value:h}),Object.defineProperty(i,"substring",{value:h}),Object.defineProperty(i,"EnumRunesCode",{value:e}),Object.defineProperty(i,"EnumCodeUnits",{value:r}),Object.defineProperty(i,"GRAPHEMES",{value:n}),t.exports=i},1195:(t,e,n)=>{"use strict";n.r(e),n.d(e,{customAlphabet:()=>a,customRandom:()=>o,nanoid:()=>s,random:()=>i,urlAlphabet:()=>r});let r="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict",i=t=>crypto.getRandomValues(new Uint8Array(t)),o=(t,e,n)=>{let r=(2<<Math.log(t.length-1)/Math.LN2)-1,i=-~(1.6*r*e/t.length);return(o=e)=>{let a="";for(;;){let e=n(i),s=i;for(;s--;)if(a+=t[e[s]&r]||"",a.length===o)return a}}},a=(t,e=21)=>o(t,e,i),s=(t=21)=>crypto.getRandomValues(new Uint8Array(t)).reduce(((t,e)=>t+=(e&=63)<36?e.toString(36):e<62?(e-26).toString(36).toUpperCase():e>62?"-":"_"),"")},8376:t=>{"use strict";t.exports=JSON.parse('["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","label","legend","li","link","main","map","mark","math","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rb","rp","rt","rtc","ruby","s","samp","script","search","section","select","slot","small","source","span","strong","style","sub","summary","sup","svg","table","tbody","td","template","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr"]')}},n={};function r(t){var i=n[t];if(void 0!==i)return i.exports;var o=n[t]={id:t,loaded:!1,exports:{}};return e[t].call(o.exports,o,o.exports,r),o.loaded=!0,o.exports}r.m=e,t=[],r.O=(e,n,i,o)=>{if(!n){var a=1/0;for(c=0;c<t.length;c++){for(var[n,i,o]=t[c],s=!0,l=0;l<n.length;l++)(!1&o||a>=o)&&Object.keys(r.O).every((t=>r.O[t](n[l])))?n.splice(l--,1):(s=!1,o<a&&(a=o));if(s){t.splice(c--,1);var u=i();void 0!==u&&(e=u)}}return e}o=o||0;for(var c=t.length;c>0&&t[c-1][2]>o;c--)t[c]=t[c-1];t[c]=[n,i,o]},r.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return r.d(e,{a:e}),e},r.d=(t,e)=>{for(var n in e)r.o(e,n)&&!r.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})},r.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),r.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),r.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.nmd=t=>(t.paths=[],t.children||(t.children=[]),t),(()=>{var t={546:0,139:0,777:0};r.O.j=e=>0===t[e];var e=(e,n)=>{var i,o,[a,s,l]=n,u=0;if(a.some((e=>0!==t[e]))){for(i in s)r.o(s,i)&&(r.m[i]=s[i]);if(l)var c=l(r)}for(e&&e(n);u<a.length;u++)o=a[u],r.o(t,o)&&t[o]&&t[o][0](),t[o]=0;return r.O(c)},n=self.webpackChunkdavid_whyte_1122=self.webpackChunkdavid_whyte_1122||[];n.forEach(e.bind(null,0)),n.push=e.bind(null,n.push.bind(n))})(),r.O(void 0,[139,777],(()=>r(6255))),r.O(void 0,[139,777],(()=>r(8119)));var i=r.O(void 0,[139,777],(()=>r(1553)));i=r.O(i)})();